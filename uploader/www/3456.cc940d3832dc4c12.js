"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3456],{3456:(G,f,d)=>{d.r(f),d.d(f,{ServerDetailPageModule:()=>P});var h=d(177),u=d(4341),l=d(5374),p=d(9858),c=d(467),e=d(3953),I=d(4234),S=d(9900),v=d(755),F=d(4237),b=d(482),C=d(3656);const D=["ServerDetailuseSSL"];function j(a,_){if(1&a){const s=e.RV6();e.j41(0,"img",25),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.copy_startup_address())}),e.k0s()}if(2&a){const s=e.XpG();e.Y8G("src",s.QRCodeSRC,e.B4B)}}function k(a,_){1&a&&(e.j41(0,"div",26),e.EFF(1,"Ctrl + Enter"),e.k0s())}const R=[{path:"",component:(()=>{var a;class _{constructor(i,t,r,o,n,g,m,y){this.lang=i,this.p5toast=t,this.indexed=r,this.nakama=o,this.global=n,this.route=g,this.router=m,this.navCtrl=y,this.dedicated_info={},this.FilteredInfo={},this.index=0}ngOnDestroy(){this.global.RestoreShortCutAct("server-detail"),this.route.queryParams.unsubscribe(),this.global.PageDismissAct["quick-server-detail"]&&this.global.PageDismissAct["quick-server-detail"]()}ngOnInit(){this.route.queryParams.subscribe(i=>{const t=this.router.getCurrentNavigation().extras.state;this.dedicated_info=t.data,this.FilteredInfo={name:this.dedicated_info.name,address:this.dedicated_info.address,nakama_port:this.dedicated_info.nakama_port,cdn_port:this.dedicated_info.cdn_port,apache_port:this.dedicated_info.apache_port,square_port:this.dedicated_info.square_port,webrtc_port:this.dedicated_info.webrtc_port,key:this.dedicated_info.key,useSSL:this.dedicated_info.useSSL},"192.168.0.1"==this.dedicated_info.address&&delete this.FilteredInfo.address,"defaultkey"==this.dedicated_info.key&&delete this.FilteredInfo.key,7350==this.dedicated_info.nakama_port&&delete this.FilteredInfo.nakama_port,9001==this.dedicated_info.cdn_port&&delete this.FilteredInfo.cdn_port,9002==this.dedicated_info.apache_port&&delete this.FilteredInfo.apache_port,12013==this.dedicated_info.square_port&&delete this.FilteredInfo.square_port,3478==this.dedicated_info.webrtc_port&&delete this.FilteredInfo.webrtc_port,this.dedicated_info.useSSL||delete this.FilteredInfo.useSSL,this.GenerateQRCode()})}GenerateQRCode(){this.global.GetHeaderAddress(void 0,!0).then(i=>{this.QRCodeSRC=this.global.readasQRCodeFromString(`${i}?server=${this.FilteredInfo.useSSL?"https":"http"}://${this.FilteredInfo.address||""}${this.FilteredInfo.nakama_port?`:${this.FilteredInfo.nakama_port}`:""},${this.FilteredInfo.key||""},${this.FilteredInfo.cdn_port||""},${this.FilteredInfo.apache_port||""},${this.FilteredInfo.square_port||""},${this.FilteredInfo.webrtc_port||""}`.replace(" ","%20"))})}open_custom_check(){this.global.open_custom_site((this.dedicated_info.useSSL?"https://":"http://")+this.dedicated_info.address,this.dedicated_info.cdn_port)}reGenerateWebRTCInfo(){var i=this;return(0,c.A)(function*(){yield i.nakama.AutoGenWebRTCInfo(i.dedicated_info),i.p5toast.show({text:i.lang.text.ServerDetail.RegenWebRTCDone})})()}ionViewDidEnter(){this.ServerDetailuseSSL.checked=this.dedicated_info.useSSL,this.global.StoreShortCutAct("server-detail"),this.global.p5KeyShortCut.EnterAct=i=>{i.ctrlKey&&this.apply_changed_info()},this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()}}copy_startup_address(){this.global.GetHeaderAddress(void 0,!0).then(i=>{let t=`${i}?server=${this.FilteredInfo.useSSL?"https":"http"}://${this.FilteredInfo.address||""}${this.FilteredInfo.nakama_port?`:${this.FilteredInfo.nakama_port}`:""},${this.FilteredInfo.key||""},${this.FilteredInfo.cdn_port||""},${this.FilteredInfo.apache_port||""},${this.FilteredInfo.square_port||""},${this.FilteredInfo.webrtc_port||""}`.replace(" ","%20");this.global.WriteValueToClipboard("text/plain",t)})}apply_changed_info(){var i=this;return(0,c.A)(function*(){if(!i.FilteredInfo.name)return void i.p5toast.show({text:i.lang.text.GroupServer.NeedSetDIsplayName});i.dedicated_info.name=i.FilteredInfo.name,i.dedicated_info.target=i.FilteredInfo.target||i.FilteredInfo.name,i.dedicated_info.address=i.FilteredInfo.address||"192.168.0.1",i.dedicated_info.nakama_port=i.FilteredInfo.nakama_port||7350,i.dedicated_info.cdn_port=i.FilteredInfo.nakama_port||9001,i.dedicated_info.apache_port=i.FilteredInfo.nakama_port||9002,i.dedicated_info.square_port=i.FilteredInfo.nakama_port||12013,i.dedicated_info.webrtc_port=i.FilteredInfo.nakama_port||3478,i.dedicated_info.useSSL=i.ServerDetailuseSSL.checked||!1,i.dedicated_info.isOfficial=i.FilteredInfo.isOfficial||"unofficial",i.dedicated_info.key=i.FilteredInfo.key||"defaultkey";let t=(new Date).getTime().toString();t+=`,${i.dedicated_info.isOfficial}`,t+=`,${i.dedicated_info.name}`,t+=`,${i.dedicated_info.target}`,t+=`,${i.dedicated_info.address}`,t+=`,${i.dedicated_info.nakama_port}`,t+=`,${i.dedicated_info.useSSL}`,t+=`,${i.dedicated_info.cdn_port}`,t+=`,${i.dedicated_info.apache_port}`,t+=`,${i.dedicated_info.square_port}`,t+=`,${i.dedicated_info.webrtc_port}`;let r=yield i.indexed.loadTextFromUserPath("servers/list_detail.csv"),o=[];r&&(o=r.split("\n"));for(let n=0,g=o.length;n<g;n++)if(o[n].split(",")[3]==i.dedicated_info.target){o.splice(n,1);break}o.push(t),yield i.indexed.saveTextFileToUserPath(o.join("\n"),"servers/list_detail.csv"),i.nakama.init_server(i.dedicated_info),i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].info={...i.dedicated_info};try{i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].socket.disconnect(!0)}catch{}i.global.PageDismissAct["quick-server-detail"]&&i.global.PageDismissAct["quick-server-detail"](),i.navCtrl.pop()})()}ionViewWillLeave(){delete this.global.p5KeyShortCut.Escape,delete this.global.p5KeyShortCut.EnterAct}}return(a=_).\u0275fac=function(i){return new(i||a)(e.rXU(I.y),e.rXU(S.G),e.rXU(v.n),e.rXU(F.X),e.rXU(b.z3),e.rXU(p.nX),e.rXU(p.Ix),e.rXU(C.q9))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-server-detail"]],viewQuery:function(i,t){if(1&i&&e.GBs(D,5),2&i){let r;e.mGM(r=e.lsd())&&(t.ServerDetailuseSSL=r.first)}},decls:52,vars:29,consts:[["ServerDetailInfo",""],["ServerDetailuseSSL",""],[1,"ion-no-border"],["slot","start"],["defaultHref",""],["style","width: 100%; height: auto; cursor: copy;","alt","Loading",3,"src","click",4,"ngIf"],["button",""],[1,"ion-text-right",3,"ionInput","ngModelChange","label","ngModel","placeholder"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["slot","end","name","open-outline",3,"click"],["value","Detail"],["slot","header"],["slot","content"],["button","",3,"click"],["color","warning",1,"ion-text-center"],["placeholder","defaultkey",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","7350",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","9001",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","9002",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","12013",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","3478",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],[2,"pointer-events","none",3,"ngModelChange","ionChange","ngModel"],[2,"position","relative"],["class","shortcut_hint",4,"ngIf"],[1,"ion-text-center"],["alt","Loading",2,"width","100%","height","auto","cursor","copy",3,"click","src"],[1,"shortcut_hint"]],template:function(i,t){if(1&i){const r=e.RV6();e.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",3),e.nrm(5,"ion-back-button",4),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.EFF(9),e.k0s()(),e.DNE(10,j,1,1,"img",5),e.j41(11,"ion-item-divider")(12,"ion-label"),e.EFF(13,"\uc11c\ubc84 \uc124\uc815"),e.k0s()(),e.j41(14,"ion-item",6)(15,"ion-input",7),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.name,n)||(t.FilteredInfo.name=n),e.Njj(n)}),e.k0s()(),e.j41(16,"ion-item",6)(17,"ion-input",8),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.address,n)||(t.FilteredInfo.address=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s(),e.j41(18,"ion-icon",9),e.bIt("click",function(){return e.eBV(r),e.Njj(t.open_custom_check())}),e.k0s()(),e.j41(19,"ion-accordion-group",null,0)(21,"ion-accordion",10)(22,"ion-item",11)(23,"ion-label"),e.EFF(24),e.k0s()(),e.j41(25,"div",12)(26,"ion-item",13),e.bIt("click",function(){return e.eBV(r),e.Njj(t.reGenerateWebRTCInfo())}),e.j41(27,"ion-label",14),e.EFF(28),e.k0s()(),e.j41(29,"ion-item",6)(30,"ion-input",7),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.target,n)||(t.FilteredInfo.target=n),e.Njj(n)}),e.k0s()(),e.j41(31,"ion-item",6)(32,"ion-input",15),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.key,n)||(t.FilteredInfo.key=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(33,"ion-item",6)(34,"ion-input",16),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.nakama_port,n)||(t.FilteredInfo.nakama_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(35,"ion-item",6)(36,"ion-input",17),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.cdn_port,n)||(t.FilteredInfo.cdn_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(37,"ion-item",6)(38,"ion-input",18),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.apache_port,n)||(t.FilteredInfo.apache_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(39,"ion-item",6)(40,"ion-input",19),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.square_port,n)||(t.FilteredInfo.square_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(41,"ion-item",6)(42,"ion-input",20),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.webrtc_port,n)||(t.FilteredInfo.webrtc_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(43,"ion-item",13),e.bIt("click",function(){return e.eBV(r),e.Njj(t.FilteredInfo.useSSL=!t.FilteredInfo.useSSL)}),e.j41(44,"ion-toggle",21,1),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(t.FilteredInfo.useSSL,n)||(t.FilteredInfo.useSSL=n),e.Njj(n)}),e.bIt("ionChange",function(){return e.eBV(r),e.Njj(t.GenerateQRCode())}),e.EFF(46),e.k0s()()()()(),e.j41(47,"div",22),e.DNE(48,k,2,0,"div",23),e.j41(49,"ion-item",13),e.bIt("click",function(){return e.eBV(r),e.Njj(t.apply_changed_info())}),e.j41(50,"ion-label",24),e.EFF(51),e.k0s()()()()}2&i&&(e.R7$(3),e.JRh(t.lang.text.GroupServer.ServerDetail),e.R7$(6),e.JRh(t.lang.text.ServerDetail.copy_scan_below),e.R7$(),e.Y8G("ngIf",t.QRCodeSRC),e.R7$(5),e.Y8G("label",t.lang.text.GroupServer.DisplayName),e.R50("ngModel",t.FilteredInfo.name),e.Y8G("placeholder",t.lang.text.GroupServer.DisplayName_placeholder),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Address),e.R50("ngModel",t.FilteredInfo.address),e.R7$(7),e.JRh(t.lang.text.ServerDetail.detailInfo),e.R7$(4),e.JRh(t.lang.text.ServerDetail.RegenWebRTC),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.DivisionName),e.R50("ngModel",t.FilteredInfo.target),e.Y8G("placeholder",t.FilteredInfo.name||t.lang.text.GroupServer.DivisionName_placeholder),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Key),e.R50("ngModel",t.FilteredInfo.key),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Port),e.R50("ngModel",t.FilteredInfo.nakama_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.cdnPort),e.R50("ngModel",t.FilteredInfo.cdn_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.apachePort),e.R50("ngModel",t.FilteredInfo.apache_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.SquarePort),e.R50("ngModel",t.FilteredInfo.square_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.WebRTCPort),e.R50("ngModel",t.FilteredInfo.webrtc_port),e.R7$(2),e.R50("ngModel",t.FilteredInfo.useSSL),e.R7$(2),e.JRh(t.lang.text.GroupServer.isSSL),e.R7$(2),e.Y8G("ngIf",t.global.ShowHint),e.R7$(3),e.JRh(t.lang.text.ServerDetail.ApplyChangeServerInfo))},dependencies:[h.bT,u.BC,u.vS,l.xk,l.YH,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.Dg,l.he,l.BC,l.BY,l.ai,l.hB,l.su,l.Gw,l.el],styles:[".icon_style[_ngcontent-%COMP%]{width:22px;height:22px;transform:translateY(2px);margin-left:4px;margin-right:4px}"]}),_})()}];let M=(()=>{var a;class _{}return(a=_).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[p.iI.forChild(R),p.iI]}),_})(),P=(()=>{var a;class _{}return(a=_).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[h.MD,u.YN,l.bv,M]}),_})()}}]);