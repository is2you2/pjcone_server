"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8180],{8180:(N,b,i)=>{i.r(b),i.d(b,{PortalPageModule:()=>M});var d=i(177),u=i(4341),c=i(5374),h=i(9858),g=i(467),m=i(617),t=i(3953),P=i(3656),_=i(4237),f=i(7100),v=i(755),I=i(4020),T=i(8065),A=i(4234);const p=["QuitArcade"];function C(a,n){1&a&&(t.j41(0,"div",14),t.EFF(1,"Q"),t.k0s())}function y(a,n){1&a&&(t.j41(0,"div",14),t.EFF(1,"W"),t.k0s())}function S(a,n){1&a&&t.nrm(0,"div",15)}function $(a,n){1&a&&(t.j41(0,"div",14),t.EFF(1,"E"),t.k0s())}function x(a,n){1&a&&t.nrm(0,"div",15)}function G(a,n){1&a&&(t.j41(0,"div",14),t.EFF(1,"R"),t.k0s())}function B(a,n){1&a&&t.nrm(0,"div",15)}function R(a,n){1&a&&(t.j41(0,"div",14),t.EFF(1,"T"),t.k0s())}function j(a,n){if(1&a){const l=t.RV6();t.j41(0,"ion-tab-bar",4)(1,"ion-tab-button",5),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.bottom_tab_selected())})("contextmenu",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.CreatePIPViewer())}),t.DNE(2,C,2,0,"div",6),t.nrm(3,"ion-icon",7),t.k0s(),t.j41(4,"ion-tab-button",8),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.subscribe_button())}),t.DNE(5,y,2,0,"div",6),t.nrm(6,"ion-icon",7),t.DNE(7,S,1,0,"div",9),t.k0s(),t.j41(8,"ion-tab-button",10),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.arcade_tab_selected())}),t.DNE(9,$,2,0,"div",6),t.nrm(10,"ion-icon",7),t.DNE(11,x,1,0,"div",9),t.k0s(),t.j41(12,"ion-tab-button",11),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.community_tab_selected())}),t.DNE(13,G,2,0,"div",6),t.nrm(14,"ion-icon",7),t.DNE(15,B,1,0,"div",9),t.k0s(),t.j41(16,"ion-tab-button",12),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.setting_button())}),t.DNE(17,R,2,0,"div",6),t.nrm(18,"ion-icon",13),t.k0s()()}if(2&a){const l=t.XpG();t.R7$(),t.Y8G("disabled",!l.indexed.ionicDB),t.R7$(),t.Y8G("ngIf",l.global.ShowHint&&l.global.portalHint),t.R7$(),t.Y8G("name",l.TodoIcon),t.R7$(),t.Y8G("disabled",!l.indexed.ionicDB),t.R7$(),t.Y8G("ngIf",l.global.ShowHint&&l.global.portalHint),t.R7$(),t.Y8G("name",l.SubscribesIcon),t.R7$(),t.Y8G("ngIf",l.nakama.has_new_channel_msg),t.R7$(),t.Y8G("disabled",!l.indexed.ionicDB),t.R7$(),t.Y8G("ngIf",l.global.ShowHint&&l.global.portalHint),t.R7$(),t.Y8G("name",l.ArcadeIcon),t.R7$(),t.Y8G("ngIf",l.global.ArcadeLoaded),t.R7$(),t.Y8G("disabled",!l.indexed.ionicDB),t.R7$(),t.Y8G("ngIf",l.global.ShowHint&&l.global.portalHint),t.R7$(),t.Y8G("name",l.CommunityIcon),t.R7$(),t.Y8G("ngIf",l.nakama.has_new_post),t.R7$(),t.Y8G("disabled",!l.indexed.ionicDB),t.R7$(),t.Y8G("ngIf",l.global.ShowHint&&l.global.portalHint)}}const k=[{path:"",component:(()=>{var a;class n{constructor(o,e,s,r,Y,E,D){this.navCtrl=o,this.nakama=e,this.global=s,this.indexed=r,this._webrtc=Y,this.statusBar=E,this.lang=D,this.TodoIcon="checkbox",this.SubscribesIcon="chatbubble-outline",this.ArcadeIcon="game-controller-outline",this.CommunityIcon="reader-outline",this.QuitArcadeButtons=[]}ngOnInit(){this.global.SelectTodoTab=()=>{this.bottom_tab_selected(),this.ionTabs.select("main")},this.global.SelectArcadeTab=()=>{this.arcade_tab_selected(),this.ionTabs.select("arcade")},this.nakama.SelectSubscribesTab=(o=!0)=>{this.subscribe_button(o),this.ionTabs.select("subscribes")}}ionViewWillEnter(){this.global.FocusOnPortal=!0}ionViewDidEnter(){this.CacheKeyShortCut&&(this.global.p5KeyShortCut=this.CacheKeyShortCut),this.global.p5todoPlayCanvas&&"checkbox"==this.TodoIcon&&this.global.p5todoPlayCanvas(),this.nakama.AfterLoginAct.length&&this.nakama.open_profile_page(),this.try_add_shortcut().then(()=>{if(this.nakama.OnInit){switch(localStorage.getItem("StartPage")||"0"){case"1":this.subscribe_button(),this.ionTabs.select("subscribes");break;case"2":this.arcade_tab_selected(),this.ionTabs.select("arcade");break;case"3":this.community_tab_selected(),this.ionTabs.select("community")}this.nakama.OnInit=!1}})}try_add_shortcut(){var o=this;return(0,g.A)(function*(){for(;!o.global.p5key||!o.global.p5KeyShortCut;)yield new Promise(e=>setTimeout(e,0));o.global.p5KeyShortCut.BottomTab=e=>{switch(e){case"Q":o.bottom_tab_selected(),o.ionTabs.select("main");break;case"W":o.subscribe_button(),o.ionTabs.select("subscribes");break;case"E":o.arcade_tab_selected(),o.ionTabs.select("arcade");break;case"R":o.community_tab_selected(),o.ionTabs.select("community");break;case"T":o.setting_button()}}})()}subscribe_button(o=!0){var e,s;this.global.portalHint=!0,this.nakama.has_new_channel_msg=!1,"chatbubble"==this.SubscribesIcon&&this.global.PortalBottonTabAct.Subscribes&&(this.global.ClearShortCutAct(),this.try_add_shortcut(),this.global.PortalBottonTabAct.Subscribes(o)),this.SubscribesIcon="chatbubble",this.TodoIcon="checkbox-outline",this.CommunityIcon="reader-outline",this.ArcadeIcon="game-controller-outline",null===(e=this.global.godot_window)||void 0===e||null===(s=e.toggle_bottom_menu)||void 0===s||s.call(e,"chat")}setting_button(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/settings",{animation:m.NC})})}bottom_tab_selected(){var o,e;this.global.portalHint=!0,this.SubscribesIcon="chatbubble-outline","checkbox"==this.TodoIcon&&this.global.PortalBottonTabAct.Todo&&(this.global.ClearShortCutAct(),this.try_add_shortcut(),this.global.PortalBottonTabAct.Todo()),this.TodoIcon="checkbox",this.CommunityIcon="reader-outline",this.ArcadeIcon="game-controller-outline",null===(o=this.global.godot_window)||void 0===o||null===(e=o.toggle_bottom_menu)||void 0===e||e.call(o,"todo")}CreatePIPViewer(){const o=document.getElementById("p5todo");return this.global.stream&&this.global.PIPableInfo.PIPableCanvas==o?this.global.RemoveAutoPIPMode():(this.global.SetPIPableInfo(o,this.global.p5todo),this.global.CraeteAutoPIPMode()),!1}arcade_tab_selected(){var o,e;this.global.portalHint=!0,this.SubscribesIcon="chatbubble-outline",this.TodoIcon="checkbox-outline","game-controller"==this.ArcadeIcon&&this.global.PortalBottonTabAct.Arcade&&(this.global.ClearShortCutAct(),this.try_add_shortcut(),this.global.PortalBottonTabAct.Arcade()),this.global.ArcadeLoaded&&"game-controller"==this.ArcadeIcon&&(this.global.StoreShortCutAct("quit-arcade"),this.global.ToggleFullScreen(!1),this.QuitArcadeButtons=[{text:this.lang.text.Arcade.AlertFullscr,handler:()=>{this.global.ToggleFullScreen(!0)}},{text:this.lang.text.Arcade.AlertOK,handler:()=>{var s,r;this.global.ArcadeLoaded=!1,null===(s=this.global.godot)||void 0===s||s.remove(),this.global.godot=null,this.global.ToggleFullScreen(!1),null===(r=this.global.ArcadeWS)||void 0===r||r.close(1e3,"user_quit"),delete this.global.windowOnFocusAct.ArcadePIP,delete this.global.WindowOnBlurAct.ArcadePIP},cssClass:"redfont"}],this.QuitArcade.onDidDismiss().then(()=>{this.global.RestoreShortCutAct("quit-arcade")}),this.QuitArcade.present()),this.ArcadeIcon="game-controller",this.CommunityIcon="reader-outline",null===(o=this.global.godot_window)||void 0===o||null===(e=o.toggle_bottom_menu)||void 0===e||e.call(o,"arcade")}community_tab_selected(){var o,e;this.global.portalHint=!0,this.SubscribesIcon="chatbubble-outline",this.TodoIcon="checkbox-outline","reader"==this.CommunityIcon&&this.global.PortalBottonTabAct.Community&&(this.global.ClearShortCutAct(),this.try_add_shortcut(),this.global.PortalBottonTabAct.Community()),this.CommunityIcon="reader",this.ArcadeIcon="game-controller-outline",null===(o=this.global.godot_window)||void 0===o||null===(e=o.toggle_bottom_menu)||void 0===e||e.call(o,"community")}ionViewWillLeave(){this.global.ToggleFullScreen(!1),this.global.FocusOnPortal=!1,this.global.FocusOnPortalLeaveAct&&this.global.FocusOnPortalLeaveAct(),this.CacheKeyShortCut=this.global.p5KeyShortCut,this.global.p5KeyShortCut={},this.global.p5todoStopCanvas&&this.global.p5todoStopCanvas()}}return(a=n).\u0275fac=function(o){return new(o||a)(t.rXU(P.q9),t.rXU(_.X),t.rXU(f.z3),t.rXU(v.n),t.rXU(I.j),t.rXU(T.j),t.rXU(A.y))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-portal"]],viewQuery:function(o,e){if(1&o&&(t.GBs(c.p4,5),t.GBs(p,5)),2&o){let s;t.mGM(s=t.lsd())&&(e.ionTabs=s.first),t.mGM(s=t.lsd())&&(e.QuitArcade=s.first)}},decls:6,vars:4,consts:[["QuitArcade",""],["data-ad-client","ca-pub-6577630868247944","data-ad-slot","8218360192","data-ad-format","auto","data-full-width-responsive","true",1,"adsbygoogle",2,"display","block"],["slot","bottom",4,"ngIf"],[3,"header","message","buttons"],["slot","bottom"],["tab","main",3,"click","contextmenu","disabled"],["class","shortcut_hint shortcut_main",4,"ngIf"],[3,"name"],["tab","subscribes",3,"click","disabled"],["class","custom_badge",4,"ngIf"],["tab","arcade",3,"click","disabled"],["tab","community",3,"click","disabled"],[3,"click","disabled"],["name","settings-outline"],[1,"shortcut_hint","shortcut_main"],[1,"custom_badge"]],template:function(o,e){1&o&&(t.j41(0,"ion-content"),t.nrm(1,"ins",1),t.j41(2,"ion-tabs"),t.DNE(3,j,19,17,"ion-tab-bar",2),t.k0s(),t.nrm(4,"ion-alert",3,0),t.k0s()),2&o&&(t.R7$(3),t.Y8G("ngIf",!e.global.ArcadeWithFullScreen),t.R7$(),t.Y8G("header",e.lang.text.Arcade.AlertTitle)("message",e.lang.text.Arcade.AlertMsg)("buttons",e.QuitArcadeButtons))},dependencies:[d.bT,c.Zy,c.W9,c.iq,c.Jq,c.qW,c.p4],styles:[".custom_badge[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);width:8px;height:8px;position:absolute;transform:translate(10px,-8px);border-radius:16px}"]}),n})(),children:[{path:"",redirectTo:"main",pathMatch:"full"},{path:"subscribes",loadChildren:()=>i.e(9128).then(i.bind(i,9128)).then(a=>a.SubscribesPageModule)},{path:"main",loadChildren:()=>i.e(887).then(i.bind(i,887)).then(a=>a.MainPageModule)},{path:"community",loadChildren:()=>i.e(5036).then(i.bind(i,5036)).then(a=>a.CommunityPageModule)},{path:"arcade",loadChildren:()=>Promise.all([i.e(2076),i.e(6767)]).then(i.bind(i,6767)).then(a=>a.ArcadePageModule)}]},{path:"settings",loadChildren:()=>i.e(767).then(i.bind(i,767)).then(a=>a.SettingsPageModule)}];let F=(()=>{var a;class n{}return(a=n).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[h.iI.forChild(k),h.iI]}),n})(),M=(()=>{var a;class n{}return(a=n).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[d.MD,u.YN,c.bv,F]}),n})()}}]);