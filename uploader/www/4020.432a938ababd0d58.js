"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4020],{4020:(L,w,p)=>{p.d(w,{j:()=>B});var C=p(467),b=p(8326),m=p(4237),D=p(5402),O=p(482),I=p(3953),P=p(9900),x=p(755),N=p(4234);!function M(){("http:"!=window.location.protocol||0==window.location.host.indexOf("localhost"))&&p.e(925).then(p.t.bind(p,925,23)).then(E=>{})}();let B=(()=>{var E;class k{constructor(t,a,e,n,i){this.p5toast=t,this.indexed=a,this.lang=e,this.nakama=n,this.global=i,this.OnUse=!1,this.isCallable=!1,this.isConnected=!1,this.JoinInited=!1,this.ReceivedOfferPart="",this.ReceivedAnswerPart="",this.IceCandidates=[],this.StatusText="",this.nakama.WebRTCService=this}initialize(t,a,e,n){var i=this;return(0,C.A)(function*(){if("data"!=t&&"http:"==window.location.protocol&&0!=window.location.host.indexOf("localhost")){let s=i.nakama.get_all_online_server(),l="https://is2you2.github.io/pjcone_pwa/";l+=`?tmp_user=${i.nakama.users.self.email},${i.nakama.users.self.password},${i.nakama.users.self.display_name}`;for(let r=0,d=s.length;r<d;r++)l+=`&server=${s[r].info.name||""},${s[r].info.address||""},${s[r].info.useSSL||""},${s[r].info.port||""},${s[r].info.key||""}`;l+=`&open_prv_channel=${e.user_id},${e.isOfficial||"official"},${e.target||"DevTestServer"}`;try{let r=yield i.indexed.loadTextFromUserPath("servers/webrtc_server.json"),d=JSON.parse(r);for(let f=0,u=d.length;f<u;f++)l+=`&rtcserver=[${d[f].urls}],${d[f].username},${d[f].credential}`}catch{}throw window.open(l,"_blank"),i.lang.text.WebRTCDevManager.SecurityError}if("data"!=t&&!(yield D.R.requestAudioRecordingPermission()).value)throw i.lang.text.WebRTCDevManager.SecurityError;if(i.OnUse)throw i.p5toast.show({text:i.lang.text.WebRTCDevManager.AlreadyCalling}),i.lang.text.WebRTCDevManager.AlreadyCalling;if(yield i.close_webrtc(n),i.TypeIn=t,i.nakama.socket_reactive.WEBRTC_CHECK_ONLINE=s=>{i.user_id==s.user_id&&(i.nakama.load_other_user(i.user_id,i.isOfficial,i.target).online||i.close_webrtc())},i.nakama.socket_reactive.WEBRTC_INIT_REQ_SIGNAL=function(){var s=(0,C.A)(function*(l){let d=JSON.stringify(i.LocalOffer).match(/(.{1,64})/g);if(l){for(let f=0,u=d.length;f<u;f++)l.client&&l.client.readyState==l.client.OPEN&&(l.client.send(JSON.stringify({type:"socket_react",channel:l.channel,act:"WEBRTC_REPLY_INIT_SIGNAL",data_str:d[f]})),yield new Promise(v=>setTimeout(v,i.global.WebsocketRetryTerm)));l.client&&l.client.readyState==l.client.OPEN&&l.client.send(JSON.stringify({type:"socket_react",channel:l.channel,act:"WEBRTC_REPLY_INIT_SIGNAL",data_str:"EOL"}))}else{for(let f=0,u=d.length;f<u;f++)yield i.nakama.servers[i.isOfficial][i.target].socket.sendMatchState(i.CurrentMatch.match_id,m.I.WEBRTC_REPLY_INIT_SIGNAL,encodeURIComponent(d[f])),yield new Promise(v=>setTimeout(v,i.global.WebsocketRetryTerm));yield i.nakama.servers[i.isOfficial][i.target].socket.sendMatchState(i.CurrentMatch.match_id,m.I.WEBRTC_REPLY_INIT_SIGNAL,encodeURIComponent("EOL"))}});return function(l){return s.apply(this,arguments)}}(),i.nakama.socket_reactive.WEBRTC_REPLY_INIT_SIGNAL=s=>{"EOL"==s?(i.createRemoteOfferFromAnswer(JSON.parse(i.ReceivedOfferPart)),i.ReceivedOfferPart="",i.InitReplyCallback&&i.InitReplyCallback()):i.ReceivedOfferPart+=s},i.nakama.socket_reactive.WEBRTC_RECEIVE_ANSWER=(s,l)=>{"EOL"==s?(i.ReceiveRemoteAnswer(JSON.parse(i.ReceivedAnswerPart),l),i.ReceivedAnswerPart=""):i.ReceivedAnswerPart+=s},i.nakama.socket_reactive.WEBRTC_ICE_CANDIDATES=(s,l)=>{i.ReceiveIceCandidate(JSON.parse(s),l)},i.nakama.socket_reactive.WEBRTC_NEGOCIATENEEDED=s=>{"EOL"==s?(i.createRemoteOfferFromAnswer(JSON.parse(i.ReceivedOfferPart)),i.ReceivedOfferPart="",i.CreateAnswer()):i.ReceivedOfferPart+=s},i.nakama.socket_reactive.WEBRTC_RECEIVED_CALL_SELF=()=>{i.close_webrtc(!1)},e&&(i.isOfficial=e.isOfficial,i.target=e.target,i.user_id=e.user_id,i.channel_id=e.channel_id),"data"!=t){i.createP5_panel();try{var o,c;i.localMedia=document.createElement(t),i.localMedia.id="webrtc_video",i.localMedia.style.width="100%",i.localMedia.style.height="fit-content",i.localMedia.autoplay=!0,"video"==t&&(i.localMedia.playsInline=!0),i.localMedia.muted=!0,document.body.appendChild(i.localMedia),i.remoteMedia=document.createElement(t),i.remoteMedia.id="webrtc_video_remote",i.remoteMedia.style.width="100%",i.remoteMedia.style.height="fit-content",i.remoteMedia.autoplay=!0,"video"==t&&(i.remoteMedia.playsInline=!0),document.body.appendChild(i.remoteMedia);let l,r,s=yield i.getDeviceList(),d=Number(null!==(o=localStorage.getItem("VideoInputDev"))&&void 0!==o?o:NaN),f=Number(null!==(c=localStorage.getItem("AudioInputDev"))&&void 0!==c?c:NaN);for(let u=0,v=s.length,R=0,h=0;u<v&&(!l||!r);u++)!l&&"audioinput"==s[u].kind&&(Number.isNaN(f)?(l=s[u].deviceId,localStorage.setItem("AudioInputDev",`${h}`)):h==f&&(l=s[u].deviceId),h++),!r&&"videoinput"==s[u].kind&&(Number.isNaN(d)?(r=s[u].deviceId,localStorage.setItem("AudioInputDev",`${R}`)):R==d&&(r=s[u].deviceId),R++);a||(a={},"video"==t?(a.video=!0,r&&(a.video={deviceId:r})):a.video=!1,a.audio=!0,l&&(a.audio={deviceId:l})),i.localStream=yield navigator.mediaDevices.getUserMedia(a),i.localMedia.srcObject=i.localStream,i.isCallable=!0}catch(s){console.log("navigator.getUserMedia error: ",s),yield i.close_webrtc(),i.p5toast.show({text:`${i.lang.text.WebRTCDevManager.InitErr}: ${s}`})}}else i.isCallable=!0;yield i.createCall(),i.p5callButton&&(i.p5callButton.elt.disabled=!1),i.StatusText=i.lang.text.InstantCall.Connecting})()}createP5_panel(){var t=this;this.OnUse=!0,this.p5canvas&&(clearTimeout(this.p5waitingAct),this.p5waitingAct=null,this.p5callButton&&this.p5callButton.remove(),this.p5callButton=null,this.p5hangup=null,this.p5canvas.remove()),this.p5canvas=new b(a=>{let e,n,i,o,c,s,l,r,d,f=1;a.setup=()=>{let h,T=()=>{this.JoinInited?(h.stop(.1),clearTimeout(this.p5waitingAct)):(h&&h.stop(.1),h=new b.Oscillator(380,"sine"),h.start(),h.amp(1,.15),h.amp(0,.75),this.p5waitingAct=setTimeout(()=>{T()},1200))};this.p5waitingAct=setTimeout(()=>{T()},0),this.p5hangup=(_=!1)=>{!this.isConnected&&!_||(h.stop(.1),clearTimeout(this.p5waitingAct),h=new b.Oscillator(380,"sine"),h.start(),h.freq(250,.35),h.amp(1,.15),h.amp(0,.25),h.amp(1,.35),h.amp(0,.45))},a.noCanvas(),e=a.createDiv(),e.id("outterDiv"),e.style("position: absolute; left: 50%; top: 0px; z-index: 1"),e.style("transform: translateX(-50%)"),e.style("width: fit-content; height: fit-content"),e.style("padding: 8px 16px;"),e.style("display: flex; justify-content: center;"),o=a.createDiv(),o.parent(e),o.style("display: flex; justify-content: center;"),o.style("width: fit-content; height: fit-content"),o.style("border-radius: 32px"),o.style("background: #"+(O.ud?"30564e88":"b9543788")),o.style("padding: 6px 12px"),n=a.createDiv(),n.parent(o),n.id("webrtc_content"),n.style("display: flex; justify-content: center;"),n.style("flex-direction","column"),n.style("width: fit-content; height: fit-content"),n.style("word-break: break-all"),n.style("background: #"+(O.ud?"30564e88":"b9543788")),n.style("border-radius: 32px"),n.style("padding: 6px 12px"),n.style("color: "+(O.ud?"white":"black")),R(),this.isOfficial&&this.target&&(this.user_id&&(i=a.createDiv(this.nakama.users[this.isOfficial][this.target][this.user_id].display_name)),i.parent(n),i.style("text-align","center"),i.style("align-self","center"),i.style("width","100%"),i.style("height","fit-content"),i.style("pointer-events","none")),c=a.createDiv(),c.parent(n),c.id("webrtc_content"),c.style("display: flex; justify-content: center;"),c.style("align-self","center"),c.style("width: fit-content; height: fit-content"),this.p5callButton=a.createButton('<ion-icon style="width: 32px; height: 32px;" name="call-outline"></ion-icon>'),this.p5callButton.parent(c),this.p5callButton.style("padding","0px"),this.p5callButton.style("margin","4px"),this.p5callButton.style("border-radius","16px"),this.p5callButton.style("width","40px"),this.p5callButton.style("height","40px"),this.p5callButton.mouseClicked(()=>{this.CreateAnswer()}),this.p5callButton.elt.disabled=!0,this.p5callButton=this.p5callButton,s=a.createButton('<ion-icon style="width: 32px; height: 32px;" name="mic-outline"></ion-icon>'),s.parent(c),s.style("padding","0px"),s.style("margin","4px"),s.style("border-radius","16px"),s.style("width","40px"),s.style("height","40px"),s.mouseClicked(()=>{const _=this.localStream.getAudioTracks();for(let g=0,y=_.length;g<y;g++)_[g].enabled=!1;l.show(),s.hide()}),l=a.createButton('<ion-icon style="width: 32px; height: 32px;" name="mic-off-outline"></ion-icon>'),l.parent(c),l.style("background-color","grey"),l.style("padding","0px"),l.style("margin","4px"),l.style("border-radius","16px"),l.style("width","40px"),l.style("height","40px"),l.mouseClicked(()=>{const _=this.localStream.getAudioTracks();for(let g=0,y=_.length;g<y;g++)_[g].enabled=!0;s.show(),l.hide()}),l.hide(),r=a.createButton('<ion-icon style="width: 32px; height: 32px;" name="settings-outline"></ion-icon>'),r.parent(c),r.style("padding","0px"),r.style("margin","4px"),r.style("border-radius","16px"),r.style("width","40px"),r.style("height","40px"),r.mouseClicked((0,C.A)(function*(){r.elt.disabled=!0;let _=yield t.getDeviceList();t.global.PageDismissAct["webrtc-manage"]=function(){var g=(0,C.A)(function*(y){r.elt.disabled=!1;try{let S={};"video"==t.TypeIn&&y.data.videoinput&&(S.video={deviceId:{exact:y.data.videoinput.deviceId}}),y.data.audioinput&&(S.audio={deviceId:{exact:y.data.audioinput.deviceId}}),t.localStream.getTracks().forEach(A=>A.stop()),t.localStream=yield navigator.mediaDevices.getUserMedia(S),t.localMedia.srcObject=t.localStream,t.PeerConnection.getSenders().forEach(A=>{A.track&&A.replaceTrack(t.localStream.getTracks()[0])}),t.CreateOffer()}catch(S){console.log("\ubbf8\ub514\uc5b4 \uc2a4\ud2b8\ub9bc \ubcc0\uacbd \uc624\ub958: ",S)}t.global.RestoreShortCutAct("webrtc-manage"),delete t.global.PageDismissAct["webrtc-manage"]});return function(y){return g.apply(this,arguments)}}(),t.global.StoreShortCutAct("webrtc-manage"),t.global.ActLikeModal("webrtc-manage-io-dev",{list:JSON.parse(JSON.stringify(_)),typein:t.TypeIn,dismiss:"webrtc-manage"})})),d=a.createButton('<ion-icon style="width: 32px; height: 32px;" name="close-circle-outline"></ion-icon>'),d.parent(c),d.style("background-color","red"),d.style("padding","0px"),d.style("margin","4px"),d.style("border-radius","16px"),d.style("width","40px"),d.style("height","40px"),d.mouseClicked((0,C.A)(function*(){yield t.close_webrtc()}))};let v=!1;a.draw=()=>{f>0&&(f-=.03),R(),this.OnUse||this.p5hangup&&!v&&(this.p5hangup(),e.hide(),setTimeout(()=>{this.OnUse||(clearTimeout(this.p5waitingAct),this.p5waitingAct=null,this.p5callButton.remove(),this.p5callButton=null,this.p5hangup=null,this.p5canvas.remove())},1e3),v=!0)};let R=()=>{let h=a.lerpColor(a.color("#"+(O.ud?"30564e88":"b9543788")),a.color("#ffd94ebb"),f).levels,T=4*f;o.style(`padding: ${T}px ${T}px`),n.style(`padding: ${a.lerp(6,2,f)}px ${a.lerp(12,8,f)}px`),o.style(`background: rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]/255})`)}})}getDeviceList(){return(0,C.A)(function*(){return yield navigator.mediaDevices.enumerateDevices()})()}createCall(){var t=this;return(0,C.A)(function*(){let a;t.isCallable=!1,t.isConnected=!0,t.startTime=window.performance.now();try{let e=yield t.indexed.loadTextFromUserPath("servers/webrtc_server.json");a={},a.iceServers=JSON.parse(e)}catch{}"data"!=t.TypeIn&&(!a||!a.iceServers||!a.iceServers.length)&&(t.p5toast.show({text:t.lang.text.WebRTCDevManager.NoRegServer}),a=null),t.PeerConnection=new RTCPeerConnection(a),t.PeerConnection.onicecandidate=e=>t.handleConnection(e),t.PeerConnection.onconnectionstatechange=function(){var e=(0,C.A)(function*(n){switch(n.target.connectionState){case"failed":case"disconnected":yield t.close_webrtc();break;case"connected":t.p5waitingAct&&clearTimeout(t.p5waitingAct);break;default:console.log("\uc5f0\uacb0 \uc0c1\ud0dc \ubcc0\uacbd\ub428: ",n.target.connectionState)}});return function(n){return e.apply(this,arguments)}}(),"data"!=t.TypeIn?(t.localStream.getTracks().forEach(e=>t.PeerConnection.addTrack(e,t.localStream)),t.PeerConnection.ontrack=e=>{t.remoteMedia.srcObject=e.streams[0]}):t.createDataChannel(),t.PeerConnection.ondatachannel=e=>{t.dataChannel=e.channel,t.createDataChannelListener()},t.PeerConnection.onnegotiationneeded=function(){var e=(0,C.A)(function*(n){if(t.JoinInited){yield t.PeerConnection.createOffer({offerToReceiveVideo:!0}).then(c=>t.createdOffer(c)).catch(c=>t.setSessionDescriptionError(c));let o=JSON.stringify(t.LocalOffer).match(/(.{1,64})/g);if(t.isOfficial&&t.target){for(let c=0,s=o.length;c<s;c++)yield t.nakama.servers[t.isOfficial][t.target].socket.sendMatchState(t.CurrentMatch.match_id,m.I.WEBRTC_NEGOCIATENEEDED,encodeURIComponent(o[c])),yield new Promise(l=>setTimeout(l,t.global.WebsocketRetryTerm));yield t.nakama.servers[t.isOfficial][t.target].socket.sendMatchState(t.CurrentMatch.match_id,m.I.WEBRTC_NEGOCIATENEEDED,encodeURIComponent("EOL"))}else console.log("\uc11c\ubc84\uc815\ubcf4 \uc5c6\uc74c: \ub204\uad6c \ud1b5\ud574\uc11c \ubcf4\ub0c4?")}});return function(n){return e.apply(this,arguments)}}()})()}createDataChannel(t){this.dataChannel=this.PeerConnection.createDataChannel(t),this.createDataChannelListener()}createDataChannelListener(){this.dataChannel.onopen=t=>{this.dataChannelOpenAct&&this.dataChannelOpenAct()},this.dataChannel.onclose=t=>{this.dataChannelOnCloseAct&&this.dataChannelOnCloseAct(),this.dataChannelOpenAct=null,this.dataChannelOnMsgAct=null,this.dataChannelOnCloseAct=null},this.dataChannel.onmessage=t=>{this.dataChannelOnMsgAct&&this.dataChannelOnMsgAct(t.data)}}send(t){try{this.dataChannel.send(t)}catch(a){console.log("WebRTC \uba54\uc2dc\uc9c0 \ubc1c\uc1a1 \uc2e4\ud328: ",a)}}CreateOffer(){this.p5callButton&&this.p5callButton.hide(),this.PeerConnection.createOffer({offerToReceiveVideo:!0}).then(t=>this.createdOffer(t)).catch(t=>this.setSessionDescriptionError(t))}handleConnection(t){let a=t.candidate;a&&this.IceCandidates.push(new RTCIceCandidate(a))}ReceiveIceCandidate(t,a){var e=this;this.ReplyIceCandidate&&clearTimeout(this.ReplyIceCandidate),this.ReplyIceCandidate=setTimeout((0,C.A)(function*(){if(a)for(let n=0,i=e.IceCandidates.length;n<i;n++)a.client&&a.client.readyState==a.client.OPEN&&a.client.send(JSON.stringify({type:"socket_react",act:"WEBRTC_ICE_CANDIDATES",channel:a.channel,data_str:JSON.stringify(e.IceCandidates[n])})),yield new Promise(o=>setTimeout(o,e.global.WebsocketRetryTerm));else for(let n=0,i=e.IceCandidates.length;n<i;n++)yield e.nakama.servers[e.isOfficial][e.target].socket.sendMatchState(e.CurrentMatch.match_id,m.I.WEBRTC_ICE_CANDIDATES,encodeURIComponent(JSON.stringify(e.IceCandidates[n]))),yield new Promise(o=>setTimeout(o,e.global.WebsocketRetryTerm));e.IceCandidates.length=0}),800),this.PeerConnection.addIceCandidate(t).then(()=>{console.log("Success to add new ice candidate")}).catch(n=>{console.error("failed to add ice candidate: ",n)})}createdOffer(t){this.LocalOffer=t,this.PeerConnection.setLocalDescription(t).then(()=>{this.setLocalDescriptionSuccess(this.PeerConnection)}).catch(a=>this.setSessionDescriptionError(a))}createRemoteOfferFromAnswer(t){this.PeerConnection.setRemoteDescription(t).then(()=>{this.setRemoteDescriptionSuccess(this.PeerConnection)}).catch(a=>this.setSessionDescriptionError(a))}CreateAnswer(t){this.PeerConnection.createAnswer().then(a=>this.createdAnswer(a,t)).catch(a=>this.setSessionDescriptionError(a))}setLocalDescriptionSuccess(t){this.setDescriptionSuccess(t,"setLocalDescription")}setRemoteDescriptionSuccess(t){this.setDescriptionSuccess(t,"setRemoteDescription")}createdAnswer(t,a){var e=this;return(0,C.A)(function*(){e.p5callButton&&e.p5callButton.hide(),e.LocalAnswer=t,e.PeerConnection.setLocalDescription(t).then(()=>{e.setLocalDescriptionSuccess(e.PeerConnection)}).catch(o=>e.setSessionDescriptionError(o));let i=JSON.stringify(t).match(/(.{1,64})/g);if(a){for(let o=0,c=i.length;o<c;o++)a.client&&a.client.readyState==a.client.OPEN&&(a.client.send(JSON.stringify({type:"socket_react",act:"WEBRTC_RECEIVE_ANSWER",channel:a.channel,data_str:i[o]})),yield new Promise(s=>setTimeout(s,e.global.WebsocketRetryTerm)));a.client&&a.client.readyState==a.client.OPEN&&a.client.send(JSON.stringify({type:"socket_react",act:"WEBRTC_RECEIVE_ANSWER",channel:a.channel,data_str:"EOL"}))}else{for(let o=0,c=i.length;o<c;o++)yield e.nakama.servers[e.isOfficial][e.target].socket.sendMatchState(e.CurrentMatch.match_id,m.I.WEBRTC_RECEIVE_ANSWER,encodeURIComponent(i[o])),yield new Promise(s=>setTimeout(s,e.global.WebsocketRetryTerm));yield e.nakama.servers[e.isOfficial][e.target].socket.sendMatchState(e.CurrentMatch.match_id,m.I.WEBRTC_RECEIVE_ANSWER,encodeURIComponent("EOL")),yield new Promise(o=>setTimeout(o,e.global.WebsocketRetryTerm)),yield e.nakama.servers[e.isOfficial][e.target].socket.sendMatchState(e.nakama.self_match[e.isOfficial][e.target].match_id,m.I.WEBRTC_RECEIVED_CALL_SELF,encodeURIComponent(""))}e.JoinInited=!0})()}ReceiveRemoteAnswer(t,a){var e=this;return(0,C.A)(function*(){if(e.PeerConnection.setRemoteDescription(t).then(()=>{e.setRemoteDescriptionSuccess(e.PeerConnection)}).catch(n=>e.setSessionDescriptionError(n)),a)for(let n=0,i=e.IceCandidates.length;n<i;n++)a.client&&a.client.readyState==a.client.OPEN&&(a.client.send(JSON.stringify({type:"socket_react",channel:a.channel,act:"WEBRTC_ICE_CANDIDATES",data_str:JSON.stringify(e.IceCandidates[n])})),yield new Promise(o=>setTimeout(o,e.global.WebsocketRetryTerm)));else for(let n=0,i=e.IceCandidates.length;n<i;n++)yield e.nakama.servers[e.isOfficial][e.target].socket.sendMatchState(e.CurrentMatch.match_id,m.I.WEBRTC_ICE_CANDIDATES,encodeURIComponent(JSON.stringify(e.IceCandidates[n]))),yield new Promise(o=>setTimeout(o,e.global.WebsocketRetryTerm));e.IceCandidates.length=0})()}setSessionDescriptionError(t){console.error(`Failed to create session description: ${t}.`)}setDescriptionSuccess(t,a){console.log(`Local ${a} complete.`)}HangUpCall(t){var a=this;return(0,C.A)(function*(){a.p5hangup&&a.p5hangup(),a.isCallable=!0,a.isConnected=!1,a.PeerConnection&&(a.PeerConnection.close(),a.PeerConnection.onicecandidate=null,a.PeerConnection.onconnectionstatechange=null,a.PeerConnection.ontrack=null,a.PeerConnection.ondatachannel=null,a.PeerConnection.onnegotiationneeded=null),a.PeerConnection=null;try{t&&a.CurrentMatch.match_id!=a.nakama.self_match[a.isOfficial][a.target].match_id&&(yield a.nakama.servers[a.isOfficial][a.target].socket.sendMatchState(a.CurrentMatch.match_id,m.I.WEBRTC_HANGUP,""),yield new Promise(e=>setTimeout(e,a.global.WebsocketRetryTerm)),yield a.nakama.servers[a.isOfficial][a.target].socket.leaveMatch(a.CurrentMatch.match_id))}catch{}})()}close_webrtc(t=!0,a=!1){var e=this;return(0,C.A)(function*(){if(!a||"data"==e.TypeIn){if(e.InitReplyCallback=null,yield e.HangUpCall(t),e.localMedia&&e.localMedia.remove(),e.remoteMedia&&e.remoteMedia.remove(),e.OnUse=!1,e.isCallable=!1,e.isConnected=!1,e.localStream&&(e.localStream.getVideoTracks().forEach(n=>n.stop()),e.localStream.getAudioTracks().forEach(n=>n.stop())),e.HangUpCallBack){try{yield e.HangUpCallBack()}catch(n){console.log("\uc804\ud654 \ub04a\uae30 \ucd94\uac00\ub3d9\uc791 \uc624\ub958: ",n)}e.HangUpCallBack=null}e.localMedia=null,e.localStream=null,e.remoteMedia=null,e.isOfficial=null,e.target=null,e.user_id=null,e.channel_id=null,e.LocalOffer=null,e.LocalAnswer=null,e.dataChannel&&(e.dataChannel.onopen=null,e.dataChannel.onclose=null,e.dataChannel.onmessage=null),e.dataChannel=null,e.ReceivedOfferPart="",e.ReceivedAnswerPart="",e.JoinInited=!1,delete e.nakama.socket_reactive.WEBRTC_INIT_REQ_SIGNAL,delete e.nakama.socket_reactive.WEBRTC_REPLY_INIT_SIGNAL,delete e.nakama.socket_reactive.WEBRTC_RECEIVE_ANSWER,delete e.nakama.socket_reactive.WEBRTC_ICE_CANDIDATES,delete e.nakama.socket_reactive.WEBRTC_NEGOCIATENEEDED,delete e.nakama.socket_reactive.WEBRTC_RECEIVED_CALL_SELF,delete e.nakama.socket_reactive.WEBRTC_CHECK_ONLINE,e.IceCandidates.length=0}})()}}return(E=k).\u0275fac=function(t){return new(t||E)(I.KVO(P.G),I.KVO(x.n),I.KVO(N.y),I.KVO(m.X),I.KVO(O.z3))},E.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}),k})()}}]);