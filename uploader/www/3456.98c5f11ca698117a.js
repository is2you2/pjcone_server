"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3456],{3456:(B,p,l)=>{l.r(p),l.d(p,{ServerDetailPageModule:()=>G});var h=l(177),f=l(4341),d=l(5374),g=l(9858),_=l(467),S=l(92),e=l(3953),v=l(4234),I=l(9900),D=l(8065),F=l(755),C=l(4237),j=l(482),R=l(3656);const y=["ServerDetailuseSSL"];function b(o,u){if(1&o){const s=e.RV6();e.j41(0,"img",16),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.copy_startup_address())}),e.k0s()}if(2&o){const s=e.XpG();e.Y8G("src",s.QRCodeSRC,e.B4B)}}const k=[{path:"",component:(()=>{var o;class u{constructor(t,i,r,a,n,c,m,M,T){this.lang=t,this.p5toast=i,this.statusBar=r,this.indexed=a,this.nakama=n,this.global=c,this.route=m,this.router=M,this.navCtrl=T,this.isTargetAlreadyExist=!0,this.index=0}ngOnDestroy(){this.route.queryParams.unsubscribe(),this.global.PageDismissAct["quick-server-detail"]&&this.global.PageDismissAct["quick-server-detail"]()}ngOnInit(){this.route.queryParams.subscribe(t=>{const i=this.router.getCurrentNavigation().extras.state;this.dedicated_info=i.data}),this.FilteredInfo={name:this.dedicated_info.name,address:this.dedicated_info.address,port:this.dedicated_info.port,key:this.dedicated_info.key,useSSL:this.dedicated_info.useSSL},"192.168.0.1"==this.dedicated_info.address&&delete this.FilteredInfo.address,"defaultkey"==this.dedicated_info.key&&delete this.FilteredInfo.key,7350==this.dedicated_info.port&&delete this.FilteredInfo.port,this.dedicated_info.useSSL||delete this.FilteredInfo.useSSL,this.GenerateQRCode(),this.isTargetAlreadyExist=!!this.statusBar.groupServer.unofficial[this.dedicated_info.target]}GenerateQRCode(){this.QRCodeSRC=this.global.readasQRCodeFromString(`${S.d2}pjcone_pwa/?server=${this.FilteredInfo.name||""},${this.FilteredInfo.address||""},${this.FilteredInfo.useSSL?"true":""},${this.FilteredInfo.port||""},${this.FilteredInfo.key||""}`.replace(" ","%20"))}open_custom_check(){this.global.open_custom_site((this.dedicated_info.useSSL?"https://":"http://")+this.dedicated_info.address)}reGenerateWebRTCInfo(){var t=this;return(0,_.A)(function*(){yield t.nakama.AutoGenWebRTCInfo(t.dedicated_info),t.p5toast.show({text:t.lang.text.ServerDetail.RegenWebRTCDone})})()}ionViewDidEnter(){this.ServerDetailuseSSL.checked=this.dedicated_info.useSSL,this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()}}copy_startup_address(){this.global.WriteValueToClipboard("text/plain",`${S.d2}pjcone_pwa/?server=${this.FilteredInfo.name||""},${this.FilteredInfo.address||""},${this.FilteredInfo.useSSL?"true":""},${this.FilteredInfo.port||""},${this.FilteredInfo.key||""}`.replace(" ","%20"))}apply_changed_info(){var t=this;return(0,_.A)(function*(){if(!t.FilteredInfo.name)return void t.p5toast.show({text:t.lang.text.GroupServer.NeedSetDIsplayName});t.dedicated_info.target=t.FilteredInfo.target||t.FilteredInfo.name,t.dedicated_info.address=t.FilteredInfo.address||"192.168.0.1",t.dedicated_info.port=t.FilteredInfo.port||7350,t.dedicated_info.useSSL=t.ServerDetailuseSSL.checked||!1,t.dedicated_info.isOfficial=t.FilteredInfo.isOfficial||"unofficial",t.dedicated_info.key=t.FilteredInfo.key||"defaultkey";let i=(new Date).getTime().toString();i+=`,${t.dedicated_info.isOfficial}`,i+=`,${t.dedicated_info.name}`,i+=`,${t.dedicated_info.target}`,i+=`,${t.dedicated_info.address}`,i+=`,${t.dedicated_info.port}`,i+=`,${t.dedicated_info.useSSL}`;let r=yield t.indexed.loadTextFromUserPath("servers/list_detail.csv"),a=[];if(r&&(a=r.split("\n")),t.isTargetAlreadyExist)for(let n=0,c=a.length;n<c;n++)if(a[n].split(",")[3]==t.dedicated_info.target){a.splice(n,1);break}a.push(i),yield t.indexed.saveTextFileToUserPath(a.join("\n"),"servers/list_detail.csv"),t.nakama.init_server(t.dedicated_info),t.nakama.servers[t.dedicated_info.isOfficial][t.dedicated_info.target].info={...t.dedicated_info};try{t.nakama.servers[t.dedicated_info.isOfficial][t.dedicated_info.target].socket.disconnect(!0)}catch{}t.global.PageDismissAct["quick-server-detail"]&&t.global.PageDismissAct["quick-server-detail"](),t.navCtrl.pop()})()}ionViewWillLeave(){delete this.global.p5KeyShortCut.Escape}}return(o=u).\u0275fac=function(t){return new(t||o)(e.rXU(v.y),e.rXU(I.G),e.rXU(D.j),e.rXU(F.n),e.rXU(C.X),e.rXU(j.z3),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(R.q9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-server-detail"]],viewQuery:function(t,i){if(1&t&&e.GBs(y,5),2&t){let r;e.mGM(r=e.lsd())&&(i.ServerDetailuseSSL=r.first)}},decls:38,vars:21,consts:[["ServerDetailuseSSL",""],[1,"ion-no-border"],["slot","start"],["defaultHref",""],["style","width: 100%; height: auto; cursor: copy;","alt","Loading",3,"src","click",4,"ngIf"],["button",""],[1,"ion-text-right",3,"ionInput","ngModelChange","label","ngModel","placeholder"],["button","",3,"disabled"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["slot","end","name","open-outline",3,"click"],["button","",3,"click"],["color","warning",1,"ion-text-center"],["placeholder","defaultkey",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","7350",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],[2,"pointer-events","none",3,"ngModelChange","ionChange","ngModel"],[1,"ion-text-center"],["alt","Loading",2,"width","100%","height","auto","cursor","copy",3,"click","src"]],template:function(t,i){if(1&t){const r=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",2),e.nrm(5,"ion-back-button",3),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.EFF(9),e.k0s()(),e.DNE(10,b,1,1,"img",4),e.j41(11,"ion-item-divider")(12,"ion-label"),e.EFF(13,"\uc11c\ubc84 \uc124\uc815"),e.k0s()(),e.j41(14,"ion-item",5)(15,"ion-input",6),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.name,n)||(i.FilteredInfo.name=n),e.Njj(n)}),e.k0s()(),e.j41(16,"ion-item",7)(17,"ion-input",6),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.target,n)||(i.FilteredInfo.target=n),e.Njj(n)}),e.k0s()(),e.j41(18,"ion-item",5)(19,"ion-input",8),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.address,n)||(i.FilteredInfo.address=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.k0s(),e.j41(20,"ion-icon",9),e.bIt("click",function(){return e.eBV(r),e.Njj(i.open_custom_check())}),e.k0s()(),e.j41(21,"ion-item-divider")(22,"ion-label"),e.EFF(23),e.k0s()(),e.j41(24,"ion-item",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.reGenerateWebRTCInfo())}),e.j41(25,"ion-label",11),e.EFF(26),e.k0s()(),e.j41(27,"ion-item",5)(28,"ion-input",12),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.key,n)||(i.FilteredInfo.key=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.k0s()(),e.j41(29,"ion-item",5)(30,"ion-input",13),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.port,n)||(i.FilteredInfo.port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.k0s()(),e.j41(31,"ion-item",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.FilteredInfo.useSSL=!i.FilteredInfo.useSSL)}),e.j41(32,"ion-toggle",14,0),e.mxI("ngModelChange",function(n){return e.eBV(r),e.DH7(i.FilteredInfo.useSSL,n)||(i.FilteredInfo.useSSL=n),e.Njj(n)}),e.bIt("ionChange",function(){return e.eBV(r),e.Njj(i.GenerateQRCode())}),e.EFF(34),e.k0s()(),e.j41(35,"ion-item",10),e.bIt("click",function(){return e.eBV(r),e.Njj(i.apply_changed_info())}),e.j41(36,"ion-label",15),e.EFF(37),e.k0s()()()}2&t&&(e.R7$(3),e.JRh(i.lang.text.GroupServer.ServerDetail),e.R7$(6),e.JRh(i.lang.text.ServerDetail.copy_scan_below),e.R7$(),e.Y8G("ngIf",i.QRCodeSRC),e.R7$(5),e.Y8G("label",i.lang.text.GroupServer.DisplayName),e.R50("ngModel",i.FilteredInfo.name),e.Y8G("placeholder",i.lang.text.GroupServer.DisplayName_placeholder),e.R7$(),e.Y8G("disabled",i.isTargetAlreadyExist),e.R7$(),e.Y8G("label",i.lang.text.GroupServer.DivisionName),e.R50("ngModel",i.FilteredInfo.target),e.Y8G("placeholder",i.FilteredInfo.name||i.lang.text.GroupServer.DivisionName_placeholder),e.R7$(2),e.Y8G("label",i.lang.text.GroupServer.Address),e.R50("ngModel",i.FilteredInfo.address),e.R7$(4),e.JRh(i.lang.text.ServerDetail.detailInfo),e.R7$(3),e.JRh(i.lang.text.ServerDetail.RegenWebRTC),e.R7$(2),e.Y8G("label",i.lang.text.GroupServer.Key),e.R50("ngModel",i.FilteredInfo.key),e.R7$(2),e.Y8G("label",i.lang.text.GroupServer.Port),e.R50("ngModel",i.FilteredInfo.port),e.R7$(2),e.R50("ngModel",i.FilteredInfo.useSSL),e.R7$(2),e.JRh(i.lang.text.GroupServer.isSSL),e.R7$(3),e.JRh(i.lang.text.ServerDetail.ApplyChangeServerInfo))},dependencies:[h.bT,f.BC,f.vS,d.QW,d.W9,d.eU,d.iq,d.$w,d.uz,d.Dg,d.he,d.BC,d.BY,d.ai,d.hB,d.su,d.Gw,d.el],styles:[".icon_style[_ngcontent-%COMP%]{width:22px;height:22px;transform:translateY(2px);margin-left:4px;margin-right:4px}"]}),u})()}];let P=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(k),g.iI]}),u})(),G=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,f.YN,d.bv,P]}),u})()}}]);