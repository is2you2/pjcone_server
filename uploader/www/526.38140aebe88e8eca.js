"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[526],{526:(le,F,b)=>{b.r(F),b.d(F,{PostViewerPageModule:()=>ne});var j=b(177),D=b(4341),w=b(5374),A=b(9858),O=b(467),L=b(8326),E=b(222),t=b(3953),U=b(3656),H=b(4234),G=b(755),N=b(4237),M=b(482),X=b(9900);const B=["QuickPostView"];function W(n,P){1&n&&(t.j41(0,"div",13)(1,"div",14),t.EFF(2,"A"),t.k0s()())}function Y(n,P){if(1&n){const c=t.RV6();t.j41(0,"ion-icon",15),t.bIt("click",function(){t.eBV(c);const o=t.XpG();return t.Njj(o.ChangeToAnother(-1))}),t.k0s()}}function z(n,P){if(1&n&&(t.j41(0,"ion-label",16),t.EFF(1),t.k0s()),2&n){const c=t.XpG();t.R7$(),t.JRh(c.CurrentIndex+" / "+c.nakama.posts.length)}}function K(n,P){1&n&&(t.j41(0,"div",13)(1,"div",17),t.EFF(2,"D"),t.k0s()())}function J(n,P){if(1&n){const c=t.RV6();t.j41(0,"ion-icon",18),t.bIt("click",function(){t.eBV(c);const o=t.XpG();return t.Njj(o.ChangeToAnother(1))}),t.k0s()}}function Q(n,P){if(1&n&&t.nrm(0,"img",19),2&n){const c=t.XpG();t.Y8G("src",c.PostInfo.mainImage.MainThumbnail,t.B4B)}}function Z(n,P){1&n&&(t.j41(0,"div",25),t.EFF(1,"Shift + E"),t.k0s())}function q(n,P){1&n&&(t.j41(0,"div",25),t.EFF(1,"Shift + D"),t.k0s())}function ee(n,P){if(1&n){const c=t.RV6();t.j41(0,"table",20)(1,"tr")(2,"td")(3,"div",21),t.DNE(4,Z,2,0,"div",22),t.j41(5,"ion-button",23),t.bIt("click",function(){t.eBV(c);const o=t.XpG();return t.Njj(o.EditPost())}),t.EFF(6),t.k0s()()(),t.j41(7,"td")(8,"div",21),t.DNE(9,q,2,0,"div",22),t.j41(10,"ion-button",24),t.bIt("click",function(){t.eBV(c);const o=t.XpG();return t.Njj(o.RemovePost())}),t.EFF(11),t.k0s()()()()()}if(2&n){const c=t.XpG();t.R7$(4),t.Y8G("ngIf",c.global.ShowHint),t.R7$(2),t.SpI(" ",c.lang.text.AddPost.EditTitle," "),t.R7$(3),t.Y8G("ngIf",c.global.ShowHint),t.R7$(2),t.SpI(" ",c.lang.text.PostViewer.RemovePost," ")}}function te(n,P){if(1&n){const c=t.RV6();t.j41(0,"img",31),t.bIt("click",function(){t.eBV(c);const o=t.XpG(2);return t.Njj(o.global.WriteValueToClipboard("text/plain",o.ResultSharedAddress))}),t.k0s()}if(2&n){const c=t.XpG(2);t.Y8G("src",c.QRCodeSRC,t.B4B)}}function oe(n,P){if(1&n){const c=t.RV6();t.j41(0,"div",26)(1,"div",27),t.DNE(2,te,1,1,"img",28),t.j41(3,"ion-item",29),t.bIt("click",function(){t.eBV(c);const o=t.XpG();return t.Njj(o.global.WriteValueToClipboard("text/plain",o.ResultSharedAddress))}),t.j41(4,"ion-label",30),t.EFF(5),t.k0s()()()()}if(2&n){const c=t.XpG();t.R7$(2),t.Y8G("ngIf",c.QRCodeSRC),t.R7$(3),t.JRh(c.ResultSharedAddress)}}const ie=[{path:"",component:(()=>{var n;class P{constructor(e,o,d,k,p,u,I,m,g){this.navCtrl=e,this.lang=o,this.indexed=d,this.nakama=k,this.alertCtrl=p,this.global=u,this.p5toast=I,this.route=m,this.router=g,this.PostInfo={},this.isOwner=!1,this.HavePosts=!1,this.CurrentIndex=1,this.WaitingLoaded=!1,this.BackButtonPressed=!1,this.ScrollPostId="ScrollPostId",this.blenderViewers=[],this.FileURLs=[],this.PlayableElements=[],this.IsFocusOnHere=!0,this.ContentChanging=!1,this.PostContentId="PostContentId",this.AlreadyHaveGodot=!1}ngOnInit(){this.cont=new AbortController,this.route.queryParams.subscribe(e=>{try{const o=this.router.getCurrentNavigation().extras.state;this.PostInfo=o.data,this.ScrollPostId=`ScrollPostId_${Date.now()}`,this.PostContentId=`PostContentId_${Date.now()}`,this.CurrentIndex=o.index}catch{}})}WaitingCurrent(){var e=this;return(0,O.A)(function*(){for(;!e.WaitingLoaded;)yield new Promise(o=>setTimeout(o,0))})()}ionViewWillEnter(){this.global.portalHint=!1,this.IsFocusOnHere&&this.initialize(),this.WaitingLoaded=!0,this.global.StoreShortCutAct("post-viewer"),this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()},this.IsFocusOnHere=!0}ChangeContentWithKeyInput(){var e=this;if(this.p5canvas){this.ScrollDiv||(this.ScrollDiv=document.getElementById(this.ScrollPostId)),this.p5canvas.keyPressed=function(){var u=(0,O.A)(function*(I){if(e.IsFocusOnHere)switch(I.code){case"KeyW":e.ScrollDiv.scrollTo({top:e.ScrollDiv.scrollTop-480,behavior:"smooth"});break;case"KeyS":e.ScrollDiv.scrollTo({top:e.ScrollDiv.scrollTop+480,behavior:"smooth"});break;case"KeyA":case"ArrowLeft":e.ChangeToAnother(-1);break;case"KeyE":I.shiftKey&&e.EditPost();break;case"KeyD":I.shiftKey&&e.RemovePost();case"ArrowRight":I.shiftKey||e.ChangeToAnother(1);break;case"KeyQ":let g,r,x,m=[];for(let y=0,V=e.PostInfo.attachments.length;y<V;y++)m.push({content:JSON.parse(JSON.stringify(e.PostInfo.attachments[y]))});if(!m.length)return;e.global.PageDismissAct["post-viewer-image-view"]=function(){var y=(0,O.A)(function*(V){yield e.WaitingCurrent(),V.data&&V.data.share&&e.navCtrl.pop(),e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-image-view"]});return function(V){return y.apply(this,arguments)}}();try{x=e.PostInfo.creator_id,g=e.PostInfo.server.isOfficial,r=e.PostInfo.server.target}catch{g="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("ionic-viewer",{info:{content:e.PostInfo.attachments[0],sender_id:x},isOfficial:g,target:r,path:e.PostInfo.attachments[0].path,relevance:m,noEdit:!0,dismiss:"post-viewer-image-view"})}});return function(I){return u.apply(this,arguments)}}();let d=this.p5canvas.createVector(),k={};this.p5canvas.touchStarted=u=>{if(this.IsFocusOnHere&&"changedTouches"in u){for(let m=0,g=u.changedTouches.length;m<g;m++)k[u.changedTouches[m].identifier]=this.p5canvas.createVector(u.changedTouches[m].clientX,u.changedTouches[m].clientY);1===Object.keys(k).length&&(d=k[u.changedTouches[0].identifier].copy())}};const p=100;this.p5canvas.touchEnded=u=>{if(this.IsFocusOnHere&&"changedTouches"in u){let I;for(let g=0,r=u.changedTouches.length;g<r;g++)I=this.p5canvas.createVector(u.changedTouches[g].clientX,u.changedTouches[g].clientY),delete k[u.changedTouches[g].identifier];0===Object.keys(k).length&&(I.sub(d),I.x>p?this.ChangeToAnother(-1):I.x<-p&&this.ChangeToAnother(1))}}}}initialize(){if(this.PostInfo.mainImage)try{let e=this.PostInfo.mainImage.url;e||(e=URL.createObjectURL(this.PostInfo.mainImage.blob),setTimeout(()=>{URL.revokeObjectURL(e)},100)),this.PostInfo.mainImage.MainThumbnail=e}catch{}this.create_content();try{this.isOwner="me"==this.PostInfo.creator_id||this.PostInfo.creator_id==this.nakama.servers[this.PostInfo.server.isOfficial][this.PostInfo.server.target].session.user_id}catch{this.isOwner=!1}this.HavePosts=this.nakama.posts.length>1&&this.CurrentIndex>=0,this.ChangeContentWithKeyInput()}ChangeToAnother(e){if(this.ContentChanging)return;this.ContentChanging=!0;let o=this.CurrentIndex+e;o<=0||o>this.nakama.posts.length?this.ContentChanging=!1:(this.ScrollDiv.scrollTo({top:0}),this.p5canvas&&this.p5canvas.remove(),this.CurrentIndex=o,this.PostInfo=this.nakama.posts[this.CurrentIndex-1],this.initialize())}create_content(){var e=this;let o=document.getElementById(this.PostContentId);this.p5canvas=new L(d=>{d.setup=(0,O.A)(function*(){d.noCanvas();let p=d.createDiv(`${e.PostInfo.OutSource?'<ion-icon id="title_link" style="cursor: pointer;" slot="start" name="link-outline"></ion-icon> ':""}${e.PostInfo.title}`);e.PostInfo.OutSource&&(document.getElementById("title_link").onclick=(0,O.A)(function*(){e.ResultSharedAddress="",e.ResultSharedAddress=`${yield e.global.GetHeaderAddress()}?postViewer=${e.PostInfo.OutSource}`,e.QRCodeSRC=e.global.readasQRCodeFromString(e.ResultSharedAddress),e.QuickPostView.onDidDismiss().then(()=>{e.global.RestoreShortCutAct("quick-post-view")}),e.global.StoreShortCutAct("quick-post-view"),e.QuickPostView.present()})),p.style("font-size","32px"),p.style("font-weight","bold"),p.parent(o);let m,u=d.createDiv();u.style("color","#888"),d.createDiv(`${e.lang.text.PostViewer.CreateTime}: ${new Date(e.PostInfo.create_time).toLocaleString()}`).parent(u),e.PostInfo.create_time!=e.PostInfo.modify_time&&d.createDiv(`${e.lang.text.PostViewer.ModifyTime}: ${new Date(e.PostInfo.modify_time).toLocaleString()}`).parent(u),u.parent(o);try{m=e.nakama.usernameOverride[e.PostInfo.server.isOfficial][e.PostInfo.server.target][e.PostInfo.creator_id]||e.PostInfo.creator_name}catch{m=e.PostInfo.creator_name}let g=d.createSpan(m);if(g.style("color",`#${e.PostInfo.UserColor}`),g.style("font-weight","bold"),g.style("font-size","17px"),g.style("cursor","pointer"),g.mouseClicked(()=>{if("me"==e.PostInfo.creator_id)e.nakama.open_profile_page();else try{let r=e.PostInfo.server.isOfficial,x=e.PostInfo.server.target,y=e.PostInfo.creator_id;y==e.nakama.servers[r][x].session.user_id?e.nakama.open_profile_page({isOfficial:r,target:x}):e.nakama.open_others_profile({info:{user:e.nakama.load_other_user(y,r,x)},group:{server:{isOfficial:r,target:x}}})}catch(r){e.p5toast.show({text:`${e.lang.text.PostViewer.CannotOpenProfile}: ${r}`})}}),g.parent(o),e.PostInfo.content){let r=(yield E.xI(e.PostInfo.content)).split("\n"),x=[];for(let h=0,R=r.length;h<R;h++){let $=!1,ae=r[h].length-1,i=0;try{let s=r[h].indexOf("}</p>");i=Number(r[h].substring(4,s)),$=0==r[h].indexOf("<p>{")&&r[h].indexOf("}</p>")==ae-4&&!isNaN(i)}catch{}if($){if(e.PostInfo.server.local)try{if(e.PostInfo.attachments[i].blob)throw"blob \uc900\ube44\ub418\uc5b4\uc788\uc74c";let s=yield e.indexed.loadBlobFromUserPath(e.PostInfo.attachments[i].path,e.PostInfo.attachments[i].type);e.PostInfo.attachments[i].blob=s}catch{}else try{if(e.PostInfo.attachments[i].blob)throw"blob \uc900\ube44\ub418\uc5b4\uc788\uc74c";e.PostInfo.attachments[i].alt_path=`servers/${e.PostInfo.server.isOfficial}/${e.PostInfo.server.target}/posts/${e.PostInfo.creator_id}/${e.PostInfo.id}/[${h}]${e.PostInfo.attachments[h].filename}`;let s=yield e.nakama.sync_load_file(e.PostInfo.attachments[i],e.PostInfo.server.isOfficial,e.PostInfo.server.target,"server_post",e.PostInfo.creator_id,`${e.PostInfo.id}_attach_${i}`,!1);e.PostInfo.attachments[i].blob=s.value}catch{}switch(e.PostInfo.attachments[i].viewer){case"image":{let s=e.PostInfo.attachments[i].url;if(!s)try{s=URL.createObjectURL(e.PostInfo.attachments[i].blob),setTimeout(()=>{URL.revokeObjectURL(s)},100)}catch(a){console.log("\uac8c\uc2dc\ubb3c image \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",a)}let l=d.createP(),f=d.createImg(s,`${i}`);f.style("cursor","pointer"),f.mouseClicked(()=>{let v,_,C,a=[];for(let S of e.PostInfo.attachments)a.push({content:JSON.parse(JSON.stringify(S))});e.global.PageDismissAct["post-viewer-image-view"]=function(){var S=(0,O.A)(function*(T){yield e.WaitingCurrent(),T.data&&T.data.share&&e.navCtrl.pop(),e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-image-view"]});return function(T){return S.apply(this,arguments)}}();try{C=e.PostInfo.creator_id,v=e.PostInfo.server.isOfficial,_=e.PostInfo.server.target}catch{v="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("ionic-viewer",{info:{content:e.PostInfo.attachments[i],sender_id:C},isOfficial:v,target:_,path:e.PostInfo.attachments[i].path,relevance:a,noEdit:!0,dismiss:"post-viewer-image-view"})}),f.parent(l),r[h]=l}break;case"audio":{let s=e.PostInfo.attachments[i].url;if(!s)try{s=URL.createObjectURL(e.PostInfo.attachments[i].blob),e.FileURLs.push(s)}catch(a){console.log("\uac8c\uc2dc\ubb3c audio \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",a)}let l=d.createP(),f=d.createAudio([s]);f.showControls(),f.elt.onplay=()=>{for(let a=0,v=e.PlayableElements.length;a<v;a++)try{a!=i&&e.PlayableElements[a].pause()}catch{}},f.parent(l),r[h]=l,e.PlayableElements[i]=f.elt}break;case"video":{let s=e.PostInfo.attachments[i].url;if(!s)try{s=URL.createObjectURL(e.PostInfo.attachments[i].blob),e.FileURLs.push(s)}catch(a){console.log("\uac8c\uc2dc\ubb3c video \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",a)}let l=d.createP(),f=d.createVideo([s]);f.style("width","100%"),f.style("height","auto"),f.showControls(),f.parent(l),r[h]=l,e.PlayableElements[i]=f.elt}break;case"godot":{let s=`PostViewer_godot_pck_${i}`,l=d.createDiv();l.id(s),l.style("width","100%"),l.style("height","432px"),l.style("margin-top","8px"),r[h]=l,setTimeout(()=>{if(e.AlreadyHaveGodot||e.global.ArcadeLoaded)try{k(l,i),l.mouseClicked(()=>{let a,v,_,f=[];for(let C of e.PostInfo.attachments)f.push({content:C});e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{_=e.PostInfo.creator_id,a=e.PostInfo.server.isOfficial,v=e.PostInfo.server.target}catch{a="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[i])),sender_id:_},isOfficial:a,target:v,path:e.PostInfo.attachments[i].path,relevance:f,noEdit:!0,dismiss:"post-viewer-file-view"})})}catch(f){console.log("\ud504\ub808\uc784 \uc0ad\uc81c \ud589\ub3d9\uc2e4\ud328: ",f)}else e.AlreadyHaveGodot=!0,e.PostInfo.attachments[i].cont=e.cont,e.global.CreateGodotIFrameWithDuplicateAct(e.PostInfo.attachments[i],s,{path:`tmp_files/duplicate/${e.PostInfo.attachments[i].filename}`,url:e.PostInfo.attachments[i].url,quit_ionic:()=>{try{k(l,i),l.mouseClicked(()=>{let a,v,_,f=[];for(let C of e.PostInfo.attachments)f.push({content:C});e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{_=e.PostInfo.creator_id,a=e.PostInfo.server.isOfficial,v=e.PostInfo.server.target}catch{a="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[i])),sender_id:_},isOfficial:a,target:v,path:e.PostInfo.attachments[i].path,relevance:f,noEdit:!0,dismiss:"post-viewer-file-view"})})}catch(f){console.log("\ud504\ub808\uc784 \uc0ad\uc81c \ud589\ub3d9\uc2e4\ud328: ",f)}}})},100*i)}break;case"blender":{let s=d.createDiv();s.style("position","relative"),s.style("width","100%"),s.style("height","432px"),s.elt.onwheel=()=>!1,s.elt.oncontextmenu=()=>!1,r[h]=s;let l=e.global.load_blender_file(s.elt,e.PostInfo.attachments[i],()=>{},()=>{},e.cont);e.blenderViewers.push(l)}break;case"code":case"text":if("text/html"==e.PostInfo.attachments[i].type)try{if(!e.PostInfo.attachments[i].blob||!e.PostInfo.attachments[i].blob.size){if(e.PostInfo.attachments[i].url){let a=yield fetch(e.PostInfo.attachments[i].url);if(a.ok){let v=yield a.blob();e.PostInfo.attachments[i].alt_path=`servers/${e.PostInfo.server.isOfficial}/${e.PostInfo.server.target}/posts/${e.PostInfo.creator_id}/${e.PostInfo.id}/[${i}]${e.PostInfo.attachments[i].filename}`,yield e.indexed.saveBlobToUserPath(v,e.PostInfo.attachments[i].alt_path)}}let f=yield e.indexed.loadBlobFromUserPath(e.PostInfo.attachments[i].alt_path||e.PostInfo.attachments[i].path,e.PostInfo.attachments[i].type);e.PostInfo.attachments[i].blob=f}let s=URL.createObjectURL(e.PostInfo.attachments[i].blob);e.FileURLs.push(s);let l=d.createElement("iframe");l.style("width","100%"),l.style("border","0"),l.style("height","432px"),l.attribute("src",s),r[h]=l;break}catch(s){console.log("HTML \ud30c\uc77c \uc77d\uae30 \uc2e4\ud328: ",s)}default:{let s=d.createDiv();s.parent(o),k(s,i),s.mouseClicked(()=>{let f,a,v,l=[];for(let _ of e.PostInfo.attachments)l.push({content:_});e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{v=e.PostInfo.creator_id,f=e.PostInfo.server.isOfficial,a=e.PostInfo.server.target}catch{f="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[i])),sender_id:v},isOfficial:f,target:a,path:e.PostInfo.attachments[i].path,relevance:l,noEdit:!0,dismiss:"post-viewer-file-view"})}),r[h]=s}}}else try{let s=e.global.HTMLDecode(r[h].replace("<p>","").replace("</p>","")),l=JSON.parse(s),a=d.createDiv(`[${l.i}] ${e.PostInfo.attachments[l.i].filename} (${l.t})`);a.style("background-color","#8888"),a.style("width","fit-content"),a.style("height","fit-content"),a.style("border-radius","16px"),a.style("padding","8px 16px"),a.style("margin","8px 0px"),a.style("cursor","pointer"),r[h]=a,x.push(()=>{let v=e.PlayableElements[l.i],_=l.t.split(":"),C=0,S=1;for(let T=_.length-1;T>=0;T--){let re=Number(_.pop());C+=re*S,S*=60}a.mouseClicked(()=>{try{v.currentTime=C,v.play()}catch{}})})}catch{}}let y=[],V=()=>{if(y.length){let h=y.join("\n"),R=d.createDiv();R.style("width","100%"),R.elt.innerHTML=h,R.parent(o),y.length=0}};for(let h=0,R=r.length;h<R;h++)"string"==typeof r[h]?y.push(r[h]):(V(),r[h].parent(o));V();for(let h=0,R=x.length;h<R;h++)x[h]();for(let h of e.blenderViewers)h.windowResized()}e.ContentChanging=!1});let k=(p,u)=>{this.PostInfo.attachments[u].blob=null,p.style("width","160px"),p.style("height","112px"),p.style("overflow","hidden"),p.style("background-color","grey"),p.style("margin-top","8px"),p.style("border-radius","8px"),p.style("cursor","pointer");let I=d.createP(this.PostInfo.attachments[u].filename);I.style("margin","0px 4px"),I.style("text-align","start"),I.parent(p);let m=d.createDiv();m.style("background-color","white"),m.style("margin-top","2px"),m.style("position","relative"),m.style("width","100%"),m.style("height","2px"),m.parent(p);let g=d.createSpan(this.lang.text.PostViewer.OpenFromViewer);g.style("margin","2px 4px 0px 4px"),g.style("text-align","start"),g.style("display","grid"),g.parent(p)}})}EditPost(){this.navCtrl.pop(),this.nakama.EditPost(this.PostInfo)}ionViewWillLeave(){this.WaitingLoaded=!1,delete this.global.p5KeyShortCut.Escape,this.global.RestoreShortCutAct("post-viewer"),this.IsFocusOnHere=!1}RemovePost(){var o,e=this;this.alertCtrl.create({header:this.lang.text.PostViewer.RemovePost,message:this.lang.text.ChatRoom.CannotUndone,buttons:[{text:this.lang.text.ChatRoom.Delete,cssClass:"redfont",handler:(o=(0,O.A)(function*(){yield e.nakama.RemovePost(e.PostInfo),e.navCtrl.pop()}),function(){return o.apply(this,arguments)})}]}).then(o=>o.present())}ngOnDestroy(){this.route.queryParams.unsubscribe(),this.cont.abort(),this.cont=null;for(let e=0,o=this.FileURLs.length;e<o;e++)URL.revokeObjectURL(this.FileURLs[e]);for(let e=0,o=this.blenderViewers.length;e<o;e++)this.blenderViewers[e].remove();this.p5canvas&&this.p5canvas.remove(),this.global.portalHint=!0}}return(n=P).\u0275fac=function(e){return new(e||n)(t.rXU(U.q9),t.rXU(H.y),t.rXU(G.n),t.rXU(N.X),t.rXU(w.hG),t.rXU(M.z3),t.rXU(X.G),t.rXU(A.nX),t.rXU(A.Ix))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-post-viewer"]],viewQuery:function(e,o){if(1&e&&t.GBs(B,5),2&e){let d;t.mGM(d=t.lsd())&&(o.QuickPostView=d.first)}},decls:20,vars:10,consts:[["QuickPostView",""],[1,"ion-no-border"],["slot","start"],["defaultHref","portal/community"],["style","position: relative;","slot","end",4,"ngIf"],["class","relevance_change","style","padding-right: 4px;","slot","end","name","arrow-back-circle-outline",3,"click",4,"ngIf"],["slot","end",4,"ngIf"],["class","relevance_change","style","padding-right: 16px; padding-left: 4px;","slot","end","name","arrow-forward-circle-outline",3,"click",4,"ngIf"],[2,"height","100%","overflow-y","auto",3,"id"],["style","width: 100%; height: auto;","alt","MainImage",3,"src",4,"ngIf"],[2,"padding","16px","height","100%",3,"id"],["style","width: 100%; background-color: black;",4,"ngIf"],[1,"transparent-modal"],["slot","end",2,"position","relative"],[1,"shortcut_hint","shortcut_change_viewer",2,"right","-4px"],["slot","end","name","arrow-back-circle-outline",1,"relevance_change",2,"padding-right","4px",3,"click"],["slot","end"],[1,"shortcut_hint","shortcut_change_viewer"],["slot","end","name","arrow-forward-circle-outline",1,"relevance_change",2,"padding-right","16px","padding-left","4px",3,"click"],["alt","MainImage",2,"width","100%","height","auto",3,"src"],[2,"width","100%","background-color","black"],[2,"position","relative"],["class","shortcut_hint",4,"ngIf"],["expand","block",3,"click"],["color","danger","expand","block",3,"click"],[1,"shortcut_hint"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["style","width: 100%; height: auto; cursor: copy; margin-bottom: 8px;","alt","QuickPostViewLink",3,"src","click",4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["alt","QuickPostViewLink",2,"width","100%","height","auto","cursor","copy","margin-bottom","8px",3,"click","src"]],template:function(e,o){1&e&&(t.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",2),t.nrm(5,"ion-back-button",3),t.k0s(),t.DNE(6,W,3,0,"div",4)(7,Y,1,0,"ion-icon",5)(8,z,2,1,"ion-label",6)(9,K,3,0,"div",4)(10,J,1,0,"ion-icon",7),t.k0s()(),t.j41(11,"ion-content")(12,"div",8)(13,"div"),t.DNE(14,Q,1,1,"img",9),t.nrm(15,"div",10),t.DNE(16,ee,12,4,"table",11),t.k0s()(),t.j41(17,"ion-modal",12,0),t.DNE(19,oe,6,2,"ng-template"),t.k0s()()),2&e&&(t.R7$(3),t.JRh(o.lang.text.PostViewer.Title),t.R7$(3),t.Y8G("ngIf",o.global.ShowHint&&o.HavePosts),t.R7$(),t.Y8G("ngIf",o.HavePosts),t.R7$(),t.Y8G("ngIf",o.HavePosts),t.R7$(),t.Y8G("ngIf",o.global.ShowHint&&o.HavePosts),t.R7$(),t.Y8G("ngIf",o.HavePosts),t.R7$(2),t.Y8G("id",o.ScrollPostId),t.R7$(2),t.Y8G("ngIf",o.PostInfo.mainImage&&o.PostInfo.mainImage.MainThumbnail),t.R7$(),t.Y8G("id",o.PostContentId),t.R7$(),t.Y8G("ngIf",o.isOwner&&o.CurrentIndex>=0))},dependencies:[j.bT,w.Jm,w.QW,w.W9,w.eU,w.iq,w.uz,w.he,w.BC,w.ai,w.Sb,w.el]}),P})()}];let se=(()=>{var n;class P{}return(n=P).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[A.iI.forChild(ie),A.iI]}),P})(),ne=(()=>{var n;class P{}return(n=P).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[j.MD,D.YN,w.bv,se]}),P})()}}]);