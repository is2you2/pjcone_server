"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4598,7476],{7476:(X,L,c)=>{c.d(L,{u:()=>I});var R=c(8326),_=c(3953);let I=(()=>{var m;class G{constructor(){this.Buttons={},this.ArrayKeys=[],this.RemoveLock=!1}CreateFloatButton(){this.p5canvas=new R(u=>{let h,e=[],g=v=>{e.push(v),f=0,u.loop()},y=v=>{h=v,v.style("transform-origin","50% 50%"),v.style("opacity","0"),v.style("transform","scale(0)"),f=0,u.loop()},C=()=>{this.LastRemoveQueue.style("transform-origin","50% 50%"),this.LastRemoveQueue.style("opacity","1"),this.LastRemoveQueue.style("transform","scale(1)"),f=0,u.loop()};u.setup=()=>{u.noCanvas(),this.AddAnimateActFunc=g,this.AddButtonQueue=y,this.RemoveButtonQueue=C,u.noLoop()};let f=0,j=v=>u.sin(v*u.PI/2);u.draw=()=>{f+=.07;let v=f>=1;v&&(f=1,h&&(h=null),this.LastRemoveQueue&&(this.LastRemoveQueue.remove(),this.LastRemoveQueue=null,this.LastRemoveKey=null,this.RemoveLock=!1,!this.ArrayKeys.length&&this.p5canvas&&this.p5canvas.remove()),u.noLoop()),h&&(h.style("opacity",`${f}`),h.style("transform",`scale(${j(f)})`)),this.LastRemoveQueue&&(this.LastRemoveQueue.style("opacity",""+(1-f)),this.LastRemoveQueue.style("transform",`scale(${j(1-f)})`));for(let b=e.length-1;b>=0;b--){let S=u.lerp(e[b].start,e[b].end,j(f));e[b].button.style(`right: ${S}px`)}v&&(e.length=0)}})}AddFloatButton(u,e){if(this.LastRemoveKey==u)return;this.p5canvas||this.CreateFloatButton();for(let h of this.ArrayKeys){let y=Number(this.Buttons[h].style("right").split("px").shift());this.AddAnimateActFunc({type:"add",button:this.Buttons[h],start:y,end:y+80})}let g=this.p5canvas.createDiv(`<ion-icon style="width: 36px; height: 36px" name="${e}"></ion-icon>`);return g.style("position: absolute; right: 0; bottom: 56px; z-index: 1"),g.style("width: 64px; height: 64px"),g.style("text-align: center; align-content: center"),g.style("cursor: pointer"),g.style("margin: 16px"),g.style("padding-top: 6px"),g.style("background-color: #8888"),g.style("border-radius: 24px"),this.AddButtonQueue(g),this.Buttons[u]=g,this.ArrayKeys.push(u),g}RemoveFloatButton(u){if(!this.Buttons[u]||this.RemoveLock)return;this.RemoveLock=!0,this.LastRemoveKey=u,this.LastRemoveQueue=this.Buttons[u],delete this.Buttons[u];let e=-1;for(let g=this.ArrayKeys.length-1;g>=0;g--){if(e>=0){let h=Number(this.Buttons[this.ArrayKeys[g]].style("right").split("px").shift());this.AddAnimateActFunc({type:"remove",button:this.Buttons[this.ArrayKeys[g]],start:h,end:h-80})}this.ArrayKeys[g]==u&&(this.RemoveButtonQueue(),this.ArrayKeys.splice(g,1),e=g)}}}return(m=G).\u0275fac=function(u){return new(u||m)},m.\u0275prov=_.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),G})()},6767:(X,L,c)=>{c.r(L),c.d(L,{ArcadePageModule:()=>ue});var R=c(177),E=c(4341),_=c(5374),I=c(9858),m=c(467),G=c(617),P=c(8326),u=c(92),e=c(3953),g=c(4234),h=c(8065),y=c(4237),C=c(3656),f=c(9347),j=c(482),v=c(755),b=c(9900),S=c(3307);const N=["ArcadeDetail"],U=["ArcadeQRShare"],z=["InAppQRScanner"];function Y(n,s){if(1&n){const a=e.RV6();e.j41(0,"ion-header",11)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"img",12),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.QuickLinkAct())})("contextmenu",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.QuickLinkContextmenu())}),e.k0s(),e.j41(5,"input",13),e.bIt("change",function(i){e.eBV(a);const o=e.XpG();return e.Njj(o.SelectVoidDrawBackgroundImage(i))}),e.k0s(),e.j41(6,"div",14),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.JoinInstantCall())}),e.nrm(7,"ion-icon",15),e.k0s(),e.j41(8,"div",16),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.JoinSmallTalk())}),e.nrm(9,"ion-icon",17),e.k0s(),e.j41(10,"div",18),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.nakama.toggle_all_session())}),e.k0s()()()}if(2&n){const a=e.XpG();e.R7$(3),e.JRh(a.lang.text.Arcade.Title),e.R7$(7),e.Aen("background-color: "+a.statusBar.colors[a.statusBar.settings.groupServer]+"; cursor: pointer;")}}function K(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){e.eBV(a);const i=e.XpG(2);return e.Njj(i.ToggleBackgroundMode())}),e.j41(1,"div",5),e.nrm(2,"ion-icon",28),e.j41(3,"div",29)(4,"ion-label",7),e.EFF(5),e.k0s()()()()}if(2&n){const a=e.XpG(2);e.Aen(a.IsBackgroundMode?"background-color: var(--toast-background-color)":""),e.R7$(5),e.JRh(a.lang.text.Arcade.ToggleBGMode)}}function J(n,s){if(1&n&&e.nrm(0,"div",36),2&n){const a=e.XpG().$implicit;e.Aen("background-image: url("+a.cover+");")}}function W(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",34),e.bIt("click",function(){e.eBV(a);const i=e.XpG(3);return e.Njj(i.ShowGameInfo())}),e.DNE(1,J,1,2,"div",35),e.j41(2,"div",5),e.EFF(3),e.k0s()()}if(2&n){const a=s.$implicit;e.Y8G("hidden",a.hide),e.R7$(),e.Y8G("ngIf",a.cover),e.R7$(2),e.SpI(" ",a.name," ")}}function H(n,s){if(1&n){const a=e.RV6();e.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),e.EFF(3),e.k0s(),e.j41(4,"div",30),e.nrm(5,"ion-icon",31),e.j41(6,"input",32),e.bIt("input",function(i){e.eBV(a);const o=e.XpG(2);return e.Njj(o.SearchTextInput("official",i))}),e.k0s()()(),e.j41(7,"div",19),e.DNE(8,W,4,3,"div",33),e.k0s()()}if(2&n){const a=e.XpG(2);e.R7$(3),e.JRh(a.lang.text.Arcade.OfficialList),e.R7$(3),e.Y8G("placeholder",a.lang.text.Arcade.Search),e.R7$(2),e.Y8G("ngForOf",a.nakama.ArcadeListOfficial)}}function Z(n,s){if(1&n&&e.nrm(0,"div",36),2&n){const a=e.XpG().$implicit;e.Aen("background-image: url("+a.cover+");")}}function q(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(a);const i=e.XpG(3);return e.Njj(i.ShowGameInfo())}),e.DNE(1,Z,1,2,"div",35),e.j41(2,"div",5),e.EFF(3),e.k0s()()}if(2&n){const a=s.$implicit;e.Y8G("hidden",a.hide),e.R7$(),e.Y8G("ngIf",a.cover),e.R7$(2),e.SpI(" ",a.name," ")}}function ee(n,s){if(1&n){const a=e.RV6();e.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),e.EFF(3),e.k0s(),e.j41(4,"div",30),e.nrm(5,"ion-icon",31),e.j41(6,"input",37),e.bIt("input",function(i){e.eBV(a);const o=e.XpG(2);return e.Njj(o.SearchTextInput("dedicated",i))}),e.k0s()()(),e.j41(7,"div",38),e.DNE(8,q,4,3,"div",39),e.k0s()()}if(2&n){const a=e.XpG(2);e.R7$(3),e.JRh(a.lang.text.Arcade.DediList),e.R7$(3),e.Y8G("placeholder",a.lang.text.Arcade.Search),e.R7$(2),e.Y8G("ngForOf",a.nakama.ArcadeList)}}function te(n,s){if(1&n){const a=e.RV6();e.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),e.EFF(3),e.k0s()(),e.j41(4,"div",19)(5,"div",20),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.OpenScanner())})("contextmenu",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.OpenQuickLink())}),e.j41(6,"div",5),e.nrm(7,"ion-icon",21),e.j41(8,"div")(9,"ion-label",7),e.EFF(10,"QRCode"),e.k0s()()()(),e.DNE(11,K,6,3,"div",22),e.j41(12,"input",23),e.bIt("change",function(i){e.eBV(a);const o=e.XpG();return e.Njj(o.LoadFileFromLocalAct(i))}),e.k0s(),e.j41(13,"div",20),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.LoadFileFromLocal())})("contextmenu",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.LoadFileFromClipboard())}),e.j41(14,"div",5),e.nrm(15,"ion-icon",24),e.j41(16,"div")(17,"ion-label",7),e.EFF(18),e.k0s()()()(),e.j41(19,"input",25),e.bIt("change",function(i){e.eBV(a);const o=e.XpG();return e.Njj(o.inputFileSelected(i))}),e.k0s(),e.j41(20,"div",20),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.AddCustomGame())})("contextmenu",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.AddCustomGameFromClipboard())}),e.j41(21,"div",5),e.nrm(22,"ion-icon",26),e.j41(23,"div")(24,"ion-label",7),e.EFF(25),e.k0s()()()()(),e.DNE(26,H,9,3,"div",8)(27,ee,9,3,"div",8),e.k0s()}if(2&n){const a=e.XpG();e.R7$(3),e.JRh(a.lang.text.Arcade.AddCustom),e.R7$(8),e.Y8G("ngIf",a.NeedBackgroundMode),e.R7$(7),e.JRh(a.lang.text.Arcade.FromFile),e.R7$(7),e.JRh(a.lang.text.Arcade.FromPck),e.R7$(),e.Y8G("ngIf",a.nakama.ArcadeListOfficial.length),e.R7$(),e.Y8G("ngIf",a.nakama.ArcadeList.length)}}function ie(n,s){1&n&&(e.j41(0,"div"),e.nrm(1,"div",41),e.k0s())}function ae(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",42),e.bIt("click",function(i){e.eBV(a);const o=e.XpG();return e.Njj(o.CheckIfDismissAct(i))}),e.j41(1,"div",43),e.nrm(2,"div",44),e.k0s()()}}function ne(n,s){if(1&n){const a=e.RV6();e.j41(0,"img",49),e.bIt("click",function(){e.eBV(a);const i=e.XpG(2);return e.Njj(i.copy_address(i.global.ArcadeQRAddress))}),e.k0s()}if(2&n){const a=e.XpG(2);e.Y8G("src",a.global.ArcadeQRCodeSRC,e.B4B)}}function oe(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",43)(1,"div",45),e.DNE(2,ne,1,1,"img",46),e.j41(3,"ion-item",47),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.copy_address(i.global.ArcadeQRAddress))}),e.j41(4,"ion-label",48),e.EFF(5),e.k0s()()()()}if(2&n){const a=e.XpG();e.R7$(2),e.Y8G("ngIf",a.global.ArcadeQRCodeSRC),e.R7$(3),e.JRh(a.global.ArcadeQRAddress)}}function re(n,s){if(1&n&&(e.j41(0,"ion-label",57),e.EFF(1),e.k0s()),2&n){const a=e.XpG(2);e.R7$(),e.JRh(a.lang.text.Subscribes.QRScanPlaceholder)}}function ce(n,s){if(1&n&&(e.j41(0,"ion-label",48),e.EFF(1),e.k0s()),2&n){const a=e.XpG(2);e.R7$(),e.JRh(a.QRScanResult)}}function le(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",50),e.bIt("click",function(i){e.eBV(a);const o=e.XpG();return e.Njj(o.CheckIfDismissAct(i))}),e.j41(1,"div",43)(2,"div",51)(3,"div",52),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.ChangeScanDevice())}),e.nrm(4,"ion-icon",53),e.k0s(),e.nrm(5,"iframe",54),e.j41(6,"ion-item",47),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.copy_address(i.QRScanResult))}),e.DNE(7,re,2,1,"ion-label",55)(8,ce,2,1,"ion-label",56),e.k0s()()()()}if(2&n){const a=e.XpG();e.R7$(7),e.Y8G("ngIf",!a.QRScanResult),e.R7$(),e.Y8G("ngIf",a.QRScanResult)}}const se=[{path:"",component:(()=>{var n;class s{constructor(t,i,o,l,r,p,d,A,B,x){this.lang=t,this.statusBar=i,this.nakama=o,this.navCtrl=l,this.client=r,this.global=p,this.indexed=d,this.animationCtrl=A,this.p5toast=B,this.p5loading=x,this.WillLeave=!1,this.enterAnimation=k=>{const M=k.shadowRoot,F=this.animationCtrl.create().addElement(M.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),T=this.animationCtrl.create().addElement(M.querySelector(".modal-wrapper")).keyframes([{offset:0,opacity:"0",transform:"scale(0)"},{offset:1,opacity:"1",transform:"scale(1)"}]);return this.animationCtrl.create().addElement(k).easing("ease-out").duration(250).addAnimation([F,T])},this.leaveAnimation=k=>this.enterAnimation(k).direction("reverse"),this.NeedBackgroundMode=!1,this.IsBackgroundMode=!1}ngOnInit(){this.NeedBackgroundMode="DesktopPWA"!=u.aH}ionViewWillEnter(){var t=this;return(0,m.A)(function*(){if(t.WillLeave=!1,!t.nakama.ArcadeListOfficial.length)try{let i=yield fetch("https://is2you2.github.io/pjcone_arcade.json");if(!i.ok)throw i;{let o=yield i.json();t.nakama.ArcadeListOfficial=o}}catch(i){console.log("\uacf5\uc2dd \uc544\ucf00\uc774\ub4dc \ub9ac\uc2a4\ud2b8 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",i)}})()}ionViewDidEnter(){try{const t=document.getElementById("official_filter");t.onfocus||(t.onfocus=()=>{this.global.BlockMainShortcut=!0}),t.onblur||(t.onblur=()=>{this.global.BlockMainShortcut=!0})}catch{}try{const t=document.getElementById("dedicated_filter");t.onfocus||(t.onfocus=()=>{this.global.BlockMainShortcut=!0}),t.onblur||(t.onblur=()=>{this.global.BlockMainShortcut=!0})}catch{}}WaitingCurrent(){var t=this;return(0,m.A)(function*(){for(;t.WillLeave;)yield new Promise(i=>setTimeout(i,0))})()}ionViewWillLeave(){this.global.RestoreShortCutAct("arcade-fileviewer"),this.global.ArcadeWithFullScreen=!1,this.WillLeave=!0}QuickLinkAct(){this.global.PageDismissAct["voiddraw-remote"]=t=>{delete this.global.PageDismissAct["voiddraw-remote"]},this.global.ActLikeModal("portal/arcade/void-draw",{dismiss:"voiddraw-remote"})}CheckIfDismissAct(t){switch(t.target.id){case"arcade_detail":this.ArcadeDetail.dismiss();break;case"inapp_qrscanner":this.InAppQRScanner.dismiss()}}AddCustomGame(){document.getElementById("arcade_file_input").click()}inputFileSelected(t){try{let i=t.target.files[0];const o=i.name.split(".").pop();if("pck"!==o)throw o;this.global.CreateArcadeFrame({blob:i})}catch(i){this.p5toast.show({text:`${this.lang.text.Arcade.InputError}: ${i}`}),console.log("\uc544\ucf00\uc774\ub4dc \ud30c\uc77c \uc785\ub825 \uc2e4\ud328: ",i)}document.getElementById("arcade_file_input").value=null}SearchTextInput(t,i){let o=[];switch(t){case"official":o=this.nakama.ArcadeListOfficial;break;case"dedicated":o=this.nakama.ArcadeList}for(let l of o){let r=l.name;for(let d of l.searchKey||[])r+=d;const p=r.toLowerCase().indexOf(i.target.value.toLowerCase())<0;l.hide=p}}AddCustomGameFromClipboard(){return this.global.ArcadeObject.QRCode=this.ArcadeQRShare,this.global.OpenGodotFromURL(),!1}LoadFileFromLocal(){document.getElementById("arcade_file_load").click()}LoadFileFromLocalAct(t){var i=this;return(0,m.A)(function*(){let o,l=[];try{for(let r=0,p=t.target.files.length;r<p;r++){let d={};d.filename=t.target.files[r].name,d.file_ext=t.target.files[r].name.split(".").pop()||t.target.files[r].type||i.lang.text.ChatRoom.unknown_ext,d.size=t.target.files[r].size,d.type=t.target.files[r].type||t.target.files[r].type_override,d.blob=t.target.files[r],i.global.set_viewer_category_from_ext(d),d.path=`tmp_files/arcade/[${r}] ${t.target.files[r].name}`,yield i.indexed.saveBlobToUserPath(t.target.files[r],d.path),o||(o=d),l.push({content:d})}}catch(r){i.p5toast.show({text:`${i.lang.text.Arcade.InputError}: ${r}`}),console.log("\uc544\ucf00\uc774\ub4dc \ud30c\uc77c \uc785\ub825 \uc2e4\ud328: ",r)}i.global.PageDismissAct["arcade-fileviewer"]=r=>{i.global.RestoreShortCutAct("arcade-fileviewer"),i.indexed.GetFileListFromDB("tmp_files/arcade/").then(p=>{p.forEach(d=>i.indexed.removeFileFromUserPath(d))}),delete i.global.PageDismissAct["arcade-fileviewer"]},i.global.StoreShortCutAct("arcade-fileviewer"),i.global.ActLikeModal("portal/arcade/ionic-viewer",{info:{content:o},relevance:l,noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"arcade-fileviewer"}),document.getElementById("arcade_file_load").value=null})()}LoadFileFromClipboard(){var t=this;return function(){var o=(0,m.A)(function*(){let l=yield t.global.GetValueFromClipboard();switch(l.type){case"text/plain":{t.global.PageDismissAct["arcade-clipboard"]=p=>{t.global.RestoreShortCutAct("arcade-fileviewer"),delete t.global.PageDismissAct["arcade-clipboard"]};let r={};r.filename=l.value.split("_").pop(),r.file_ext=r.filename.split(".").pop(),r.url=l.value,r.path=`tmp_files/arcade/${r.filename}`,r.type="html"==r.file_ext?"text/html":r.type,t.global.set_viewer_category_from_ext(r),t.global.StoreShortCutAct("arcade-fileviewer"),t.global.ActLikeModal("portal/arcade/ionic-viewer",{info:{content:r},relevance:[{content:r}],noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"arcade-clipboard"})}break;case"image/png":t.LoadFileFromLocalAct({target:{files:[l.value]}});break;default:console.log("\uc544\ucf00\uc774\ub4dc-\ud074\ub9bd\ubcf4\ub4dc\ub85c\ubd80\ud130 \ud30c\uc77c \uc77d\uae30 \uc624\ub958: ",l.value),t.LoadFileFromLocal()}});return function(){return o.apply(this,arguments)}}()(),!1}ShowGameInfo(){this.ArcadeDetail.onDidDismiss().then(()=>{this.global.RestoreShortCutAct("arcade_detail")}),this.global.StoreShortCutAct("arcade_detail"),this.ArcadeDetail.present()}ToggleBackgroundMode(){var t,i;if(this.IsBackgroundMode=!this.IsBackgroundMode,null===(t=this.BGModeAudio)||void 0===t||t.pause(),null===(i=this.BGModeAudio)||void 0===i||i.remove(),this.BGModeAudio=null,this.IsBackgroundMode){const o=document.getElementById("BackgroundModeAudio");this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),o.appendChild(this.BGModeAudio),this.p5loading.update({id:"toggle_bgmode",progress:null}),this.p5loading.toast(this.lang.text.Arcade.BGModeOn,"toggle_bgmode")}else this.p5loading.update({id:"toggle_bgmode",progress:1}),this.p5loading.toast(this.lang.text.Arcade.BGModeOff,"toggle_bgmode")}QuickLinkContextmenu(){var t=this;return function(){var o=(0,m.A)(function*(){let l=yield t.global.GetValueFromClipboard();"image/png"===l.type?t.SelectVoidDrawBackgroundImage({target:{files:[l.value]}}):document.getElementById("arcade_voiddraw_img").click()});return function(){return o.apply(this,arguments)}}()(),!1}SelectVoidDrawBackgroundImage(t){var i=this;return(0,m.A)(function*(){const o=t.target.files[0],l=`tmp_files/quick_act/${o.name}`;yield i.indexed.saveBlobToUserPath(o,l);let r=yield i.indexed.loadBlobFromUserPath(l,o.type);const p=URL.createObjectURL(r);new P(d=>{d.setup=()=>{document.getElementById("arcade_voiddraw_img").value="",d.noCanvas(),d.loadImage(p,A=>{i.global.PageDismissAct["voiddraw-remote"]=B=>{delete i.global.PageDismissAct["voiddraw-remote"]},i.global.ActLikeModal("portal/arcade/void-draw",{path:l,width:A.width,height:A.height,type:o.type,dismiss:"voiddraw-remote"}),URL.revokeObjectURL(p),d.remove()},A=>{console.log("\ube60\ub978 \ud3b8\uc9d1\uae30 \uc774\ub3d9 \uc2e4\ud328: ",A),URL.revokeObjectURL(p),d.remove()})}})})()}JoinSmallTalk(){"online"!=this.statusBar.settings.dedicated_groupchat&&"certified"!=this.statusBar.settings.dedicated_groupchat&&(this.statusBar.settings.dedicated_groupchat="pending"),this.client.RejoinGroupChat()}JoinInstantCall(){this.navCtrl.navigateForward("portal/arcade/instant-call",{animation:G.NC})}copy_address(t){this.global.WriteValueToClipboard("text/plain",t)}OpenScanner(){var t=this;return(0,m.A)(function*(){const i=`arcade_OpenScanner_${Date.now()}`;yield t.p5loading.update({id:i,message:t.lang.text.Arcade.OpeningCamera,forceEnd:null}),t.QRScanResult=null,t.global.StoreShortCutAct("qrcode-scanner");let l=yield(yield fetch("assets/p5js/zxing_scanner.js")).blob(),r=URL.createObjectURL(l),d=yield(yield fetch("assets/p5js/libraries/p5.min.js")).blob(),A=URL.createObjectURL(d),x=yield(yield fetch("assets/p5js/libraries/zxing@0.21.3.min.js")).blob(),k=URL.createObjectURL(x),F=yield(yield fetch("assets/p5js/zxing.html")).text();F=F.replace('<script language="javascript" type="text/javascript" src="libraries/p5.min.js"><\/script>',`<script language="javascript" type="text/javascript" src="${A}"><\/script>`).replace('<script language="javascript" type="text/javascript" src="libraries/zxing@0.21.3.min.js"><\/script>',`<script language="javascript" type="text/javascript" src="${k}"><\/script>`).replace('<script language="javascript" type="text/javascript" src="zxing_scanner.js"><\/script>',`<script language="javascript" type="text/javascript" src="${r}"><\/script>`);let T=new Blob([F],{type:"text/html"}),Q=URL.createObjectURL(T);t.InAppQRScanner.onDidDismiss().then(()=>{URL.revokeObjectURL(Q),URL.revokeObjectURL(r),URL.revokeObjectURL(A),URL.revokeObjectURL(k),t.ChangeDeviceFunc=null,t.global.RestoreShortCutAct("qrcode-scanner")}),yield t.InAppQRScanner.present(),t.p5loading.remove(i);let w=document.getElementById("qr_scan_frame");w.src=Q;let $=w.contentWindow||w.contentDocument;setTimeout(()=>{t.ChangeDeviceFunc=$.ChangeDevice,$.load_failed=D=>{t.p5toast.show({text:`${t.lang.text.Subscribes.QRScanInitFailed}: ${D}`}),t.InAppQRScanner.dismiss()},$.scan_result=function(){var D=(0,m.A)(function*(O){try{t.QRScanResult=O.text,t.QRScanResult&&(yield t.nakama.open_url_link(t.QRScanResult,!1))&&t.InAppQRScanner.dismiss()}catch(V){console.log("QR\uc2a4\uce94 \uc2e4\ud328: ",V)}});return function(O){return D.apply(this,arguments)}}()},1e3)})()}ChangeScanDevice(){this.ChangeDeviceFunc&&this.ChangeDeviceFunc()}OpenQuickLink(){var t=this;const i=`arcade_OpenQuickLink_${Date.now()}`;return function(){var l=(0,m.A)(function*(){const r=yield t.global.GetValueFromClipboard(i);switch(r.type){case"text/plain":const p=r.value,d=t.global.GetConnectedAddress(),A=yield t.global.GetHeaderAddress();if(0==p.indexOf("https://is2you2.github.io/pjcone_pwa/?")||0==p.indexOf(`${d}?`)||0==p.indexOf(`${A}?`)){const B=t.global.CatchGETs(p)||{};try{const x=yield t.nakama.AddressToQRCodeAct(B,!0);yield t.nakama.act_from_QRInfo(x,"portal/arcade/")}catch(x){console.log("open_url_link: ",x),t.p5toast.show({text:`${t.lang.text.AddGroup.DiffFormat}: ${x}`})}}else t.p5loading.update({id:i,message:`${t.lang.text.AddGroup.DiffFormat}: ${p}`,progress:0});break;case"image/png":t.LoadFileFromLocalAct({target:{files:[r.value]}});break;case"error":t.p5toast.show({text:`${t.lang.text.GlobalAct.FailedToReadClipboard}: ${r.value}`})}});return function(){return l.apply(this,arguments)}}()(),!1}}return(n=s).\u0275fac=function(t){return new(t||n)(e.rXU(g.y),e.rXU(h.j),e.rXU(y.X),e.rXU(C.q9),e.rXU(f.z),e.rXU(j.z3),e.rXU(v.n),e.rXU(_.Hx),e.rXU(b.G),e.rXU(S.f))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-arcade"]],viewQuery:function(t,i){if(1&t&&(e.GBs(N,5),e.GBs(U,5),e.GBs(z,5)),2&t){let o;e.mGM(o=e.lsd())&&(i.ArcadeDetail=o.first),e.mGM(o=e.lsd())&&(i.ArcadeQRShare=o.first),e.mGM(o=e.lsd())&&(i.InAppQRScanner=o.first)}},decls:18,vars:7,consts:[["ArcadeDetail",""],["ArcadeQRShare",""],["InAppQRScanner",""],["class","ion-no-border",4,"ngIf"],[3,"fullscreen"],[1,"disconnect_info"],["color","medium","name","game-controller-outline",2,"width","60px","height","60px"],["color","medium"],[4,"ngIf"],[1,"transparent-modal",3,"enterAnimation","leaveAnimation"],[1,"transparent-modal"],[1,"ion-no-border"],["src","assets/icon/voidDraw.png",1,"add_group","top_icon_override_2",2,"width","32px","height","32px",3,"click","contextmenu"],["hidden","","type","file","id","arcade_voiddraw_img","accept","image/*",3,"change"],[1,"add_group","top_icon_override_1",3,"click"],["button","","name","call-outline",2,"width","24px","height","24px"],[1,"add_group",3,"click"],["button","","name","chatbubbles-outline",2,"width","24px","height","24px"],[1,"header_online_circle",3,"click"],[1,"fixed_btn_size"],[1,"list_ele","list_add_btn",3,"click","contextmenu"],["color","medium","name","qr-code-outline",2,"width","36px","height","36px"],["class","list_ele list_add_btn",3,"style","click",4,"ngIf"],["hidden","","type","file","id","arcade_file_load","multiple","","accept","*",3,"change"],["color","medium","name","document-outline",2,"width","36px","height","36px"],["hidden","","type","file","id","arcade_file_input","accept",".pck",3,"change"],["color","medium","name","extension-puzzle-outline",2,"width","36px","height","36px"],[1,"list_ele","list_add_btn",3,"click"],["color","medium","name","alert-circle-outline",2,"width","36px","height","36px"],["id","BackgroundModeAudio"],[2,"position","absolute","right","16px"],["name","search-outline",2,"margin-right","8px","cursor","pointer"],["id","official_filter","type","text",1,"searchInput",3,"input","placeholder"],["class","list_ele list_add_btn",3,"hidden","click",4,"ngFor","ngForOf"],[1,"list_ele","list_add_btn",3,"click","hidden"],["class","cover_image",3,"style",4,"ngIf"],[1,"cover_image"],["id","dedicated_filter","type","text",1,"searchInput",3,"input","placeholder"],[1,"list_form"],["class","list_ele",3,"hidden","click",4,"ngFor","ngForOf"],[1,"list_ele",3,"click","hidden"],["id","arcade_pck_loaded",1,"full_screen",2,"position","fixed"],["id","arcade_detail",1,"OutterModal",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],[2,"width","400px","height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px","border-radius","16px"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["style","width: 100%; height: auto; cursor: copy; margin-bottom: 8px;","alt","ArcadeQuickLink",3,"src","click",4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["alt","ArcadeQuickLink",2,"width","100%","height","auto","cursor","copy","margin-bottom","8px",3,"click","src"],["id","inapp_qrscanner",1,"OutterModal",3,"click"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px","position","relative"],[2,"position","absolute","width","64px","height","64px","cursor","pointer","margin","16px","background-color","#8888","border-radius","24px","top","0","right","0","text-align","center","align-content","center",3,"click"],["name","camera-reverse-outline",2,"width","36px","height","36px"],["id","qr_scan_frame","frameborder","0",2,"width","100%","height","368px","margin-bottom","8px"],["class","ion-text-center","color","medium",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["color","medium",1,"ion-text-center"]],template:function(t,i){1&t&&(e.DNE(0,Y,11,3,"ion-header",3),e.j41(1,"ion-content",4)(2,"div",5),e.nrm(3,"ion-icon",6),e.j41(4,"div")(5,"ion-label",7),e.EFF(6),e.k0s()()(),e.DNE(7,te,28,6,"div",8)(8,ie,2,0,"div",8),e.j41(9,"ion-modal",9,0),e.DNE(11,ae,3,0,"ng-template"),e.k0s(),e.j41(12,"ion-modal",10,1),e.DNE(14,oe,6,2,"ng-template"),e.k0s(),e.j41(15,"ion-modal",10,2),e.DNE(17,le,9,2,"ng-template"),e.k0s()()),2&t&&(e.Y8G("ngIf",!i.global.ArcadeLoaded),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(5),e.JRh(i.lang.text.Arcade.Preparing),e.R7$(),e.Y8G("ngIf",!i.global.ArcadeLoaded),e.R7$(),e.Y8G("ngIf",i.global.ArcadeLoaded),e.R7$(),e.Y8G("enterAnimation",i.enterAnimation)("leaveAnimation",i.leaveAnimation))},dependencies:[R.Sq,R.bT,_.W9,_.eU,_.iq,_.uz,_.Dg,_.he,_.BC,_.ai,_.Sb],styles:[".list_form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(135px,1fr));padding:16px;gap:16px}.list_add_btn[_ngcontent-%COMP%]{flex:0 1}.fixed_btn_size[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px;overflow-x:auto;margin:16px 16px 0;padding-bottom:16px}.searchInput[_ngcontent-%COMP%]{border:none;border-bottom:1px solid;outline:none}.cover_image[_ngcontent-%COMP%]{width:100%;height:100%;background-size:cover;background-position:center;opacity:.35}.list_ele[_ngcontent-%COMP%]{overflow:hidden;cursor:pointer;border:1px solid var(--list-shortcut-hint-background);border-radius:8px;min-width:135px;min-height:90px;text-align:center;align-content:center;position:relative}.add_group[_ngcontent-%COMP%]{position:absolute;right:68px;top:16px;cursor:pointer}.top_icon_override_1[_ngcontent-%COMP%]{right:116px}.top_icon_override_2[_ngcontent-%COMP%]{right:164px;top:13px}"]}),s})()},{path:"instant-call",loadChildren:()=>c.e(6524).then(c.bind(c,6524)).then(n=>n.InstantCallPageModule)},{path:"void-draw",loadChildren:()=>c.e(2655).then(c.bind(c,2655)).then(n=>n.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([c.e(4803),c.e(222)]).then(c.bind(c,4803)).then(n=>n.IonicViewerPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([c.e(222),c.e(526)]).then(c.bind(c,526)).then(n=>n.PostViewerPageModule)}];let de=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[I.iI.forChild(se),I.iI]}),s})(),ue=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[R.MD,E.YN,_.bv,de]}),s})()}}]);