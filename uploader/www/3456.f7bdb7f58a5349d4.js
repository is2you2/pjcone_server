"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3456],{3456:(N,c,l)=>{l.r(c),l.d(c,{ServerDetailPageModule:()=>k});var f=l(177),u=l(4341),d=l(5374),g=l(9858),p=l(467),e=l(3953),h=l(4234),m=l(9900),v=l(3307),S=l(4237),D=l(7100),b=l(3656);const C=["ServerDetailuseSSL"];function j(r,s){if(1&r){const _=e.RV6();e.j41(0,"img",28),e.bIt("click",function(){e.eBV(_);const t=e.XpG(2);return e.Njj(t.copy_startup_address())}),e.k0s()}if(2&r){const _=e.XpG(2);e.Y8G("src",_.QRCodeSRC,e.B4B)}}function R(r,s){if(1&r&&(e.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),e.EFF(3),e.k0s()(),e.DNE(4,j,1,1,"img",27),e.k0s()),2&r){const _=e.XpG();e.R7$(3),e.JRh(_.lang.text.ServerDetail.copy_scan_below),e.R7$(),e.Y8G("ngIf",_.QRCodeSRC)}}function I(r,s){1&r&&(e.j41(0,"div",29),e.EFF(1,"Ctrl + Enter"),e.k0s())}const M=[{path:"",component:(()=>{var r;class s{constructor(i,t,a,o,n,G,y,T){this.lang=i,this.p5toast=t,this.p5loading=a,this.nakama=o,this.global=n,this.route=G,this.router=y,this.navCtrl=T,this.dedicated_info={},this.HideQRCode=!1,this.index=0}ngOnDestroy(){var i,t;this.global.RestoreShortCutAct("server-detail"),this.route.queryParams.unsubscribe(),null===(i=(t=this.global.PageDismissAct)["quick-server-detail"])||void 0===i||i.call(t)}ngOnInit(){this.route.queryParams.subscribe(i=>{const t=this.router.getCurrentNavigation().extras.state;this.HideQRCode=t.quick,this.dedicated_info=t.data,this.GenerateQRCode()})}GenerateQRCode(){var i=this;return(0,p.A)(function*(){let t=yield i.nakama.GenerateQRCode(i.dedicated_info);i.QRCodeSRC=i.global.readasQRCodeFromString(t)})()}open_custom_check(){this.global.open_custom_site((this.dedicated_info.useSSL?"https://":"http://")+this.dedicated_info.address,this.dedicated_info.cdn_port)}reGenerateWebRTCInfo(){var i=this;return(0,p.A)(function*(){yield i.nakama.AutoGenWebRTCInfo(i.dedicated_info),i.p5loading.toast(i.lang.text.ServerDetail.RegenWebRTCDone,"webrtc_server_save")})()}ionViewDidEnter(){this.ServerDetailuseSSL.checked=this.dedicated_info.useSSL,this.global.StoreShortCutAct("server-detail"),this.global.p5KeyShortCut.EnterAct=i=>{i.ctrlKey&&this.apply_changed_info()}}copy_startup_address(){this.global.GetHeaderAddress().then(i=>{let t=`${i}?server=${this.dedicated_info.useSSL?"https":"http"}://${this.dedicated_info.address||""}${this.dedicated_info.nakama_port?`:${this.dedicated_info.nakama_port}`:""},${this.dedicated_info.key||""},${this.dedicated_info.cdn_port||""},${this.dedicated_info.apache_port||""},${this.dedicated_info.square_port||""},${this.dedicated_info.webrtc_port||""},${this.dedicated_info.webpush_port||""}`.replace(/ /g,"%20");this.global.WriteValueToClipboard("text/plain",t)})}apply_changed_info(){var i=this;return(0,p.A)(function*(){var t,a;if(i.dedicated_info.name){i.dedicated_info.name=i.dedicated_info.name,i.dedicated_info.target=i.dedicated_info.target||i.dedicated_info.name,i.dedicated_info.address=i.dedicated_info.address||"192.168.0.1",i.dedicated_info.nakama_port=i.dedicated_info.nakama_port,i.dedicated_info.cdn_port=i.dedicated_info.cdn_port,i.dedicated_info.apache_port=i.dedicated_info.apache_port,i.dedicated_info.square_port=i.dedicated_info.square_port,i.dedicated_info.webrtc_port=i.dedicated_info.webrtc_port,i.dedicated_info.useSSL=i.ServerDetailuseSSL.checked||!1,i.dedicated_info.webpush_port=i.dedicated_info.webpush_port,i.dedicated_info.isOfficial=i.dedicated_info.isOfficial||"unofficial",i.dedicated_info.key=i.dedicated_info.key||"",yield i.nakama.modify_group_server(i.dedicated_info),i.nakama.init_server(i.dedicated_info),i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].info={...i.dedicated_info};try{i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].socket.disconnect(!0)}catch{}null===(t=(a=i.global.PageDismissAct)["quick-server-detail"])||void 0===t||t.call(a,i.dedicated_info),i.navCtrl.pop()}else i.p5toast.show({text:i.lang.text.GroupServer.NeedSetDIsplayName})})()}ionViewWillLeave(){delete this.global.p5KeyShortCut.EnterAct}}return(r=s).\u0275fac=function(i){return new(i||r)(e.rXU(h.y),e.rXU(m.G),e.rXU(v.f),e.rXU(S.X),e.rXU(D.z3),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(b.q9))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-server-detail"]],viewQuery:function(i,t){if(1&i&&e.GBs(C,5),2&i){let a;e.mGM(a=e.lsd())&&(t.ServerDetailuseSSL=a.first)}},decls:51,vars:31,consts:[["ServerDetailInfo",""],["ServerDetailuseSSL",""],[1,"ion-no-border"],["slot","start"],["defaultHref",""],[4,"ngIf"],["button",""],[1,"ion-text-right",3,"ionInput","ngModelChange","label","ngModel","placeholder"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["slot","end","name","open-outline",3,"click"],["value","Detail"],["slot","header"],["slot","content"],["button","",3,"click"],["color","tertiary",1,"ion-text-center"],["button","","disabled",""],["placeholder","defaultkey",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","7350",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","9001",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","9002",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","12013",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","3478",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],["type","number","placeholder","5000",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"],[2,"pointer-events","none",3,"ngModelChange","ionChange","ngModel"],[2,"position","relative"],["class","shortcut_hint",4,"ngIf"],[1,"ion-text-center"],["style","width: 100%; height: auto; cursor: copy;","alt","Loading",3,"src","click",4,"ngIf"],["alt","Loading",2,"width","100%","height","auto","cursor","copy",3,"click","src"],[1,"shortcut_hint"]],template:function(i,t){if(1&i){const a=e.RV6();e.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",3),e.nrm(5,"ion-back-button",4),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,R,5,2,"div",5),e.j41(8,"ion-item-divider")(9,"ion-label"),e.EFF(10),e.k0s()(),e.j41(11,"ion-item",6)(12,"ion-input",7),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.name,n)||(t.dedicated_info.name=n),e.Njj(n)}),e.k0s()(),e.j41(13,"ion-item",6)(14,"ion-input",8),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.address,n)||(t.dedicated_info.address=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s(),e.j41(15,"ion-icon",9),e.bIt("click",function(){return e.eBV(a),e.Njj(t.open_custom_check())}),e.k0s()(),e.j41(16,"ion-accordion-group",null,0)(18,"ion-accordion",10)(19,"ion-item",11)(20,"ion-label"),e.EFF(21),e.k0s()(),e.j41(22,"div",12)(23,"ion-item",13),e.bIt("click",function(){return e.eBV(a),e.Njj(t.reGenerateWebRTCInfo())}),e.j41(24,"ion-label",14),e.EFF(25),e.k0s()(),e.j41(26,"ion-item",15)(27,"ion-input",7),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.target,n)||(t.dedicated_info.target=n),e.Njj(n)}),e.k0s()(),e.j41(28,"ion-item",6)(29,"ion-input",16),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.key,n)||(t.dedicated_info.key=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(30,"ion-item",6)(31,"ion-input",17),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.nakama_port,n)||(t.dedicated_info.nakama_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(32,"ion-item",6)(33,"ion-input",18),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.cdn_port,n)||(t.dedicated_info.cdn_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(34,"ion-item",6)(35,"ion-input",19),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.apache_port,n)||(t.dedicated_info.apache_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(36,"ion-item",6)(37,"ion-input",20),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.square_port,n)||(t.dedicated_info.square_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(38,"ion-item",6)(39,"ion-input",21),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.webrtc_port,n)||(t.dedicated_info.webrtc_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(40,"ion-item",6)(41,"ion-input",22),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.webpush_port,n)||(t.dedicated_info.webpush_port=n),e.Njj(n)}),e.bIt("ionInput",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.k0s()(),e.j41(42,"ion-item",13),e.bIt("click",function(){return e.eBV(a),e.Njj(t.dedicated_info.useSSL=!t.dedicated_info.useSSL)}),e.j41(43,"ion-toggle",23,1),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(t.dedicated_info.useSSL,n)||(t.dedicated_info.useSSL=n),e.Njj(n)}),e.bIt("ionChange",function(){return e.eBV(a),e.Njj(t.GenerateQRCode())}),e.EFF(45),e.k0s()()()()(),e.j41(46,"div",24),e.DNE(47,I,2,0,"div",25),e.j41(48,"ion-item",13),e.bIt("click",function(){return e.eBV(a),e.Njj(t.apply_changed_info())}),e.j41(49,"ion-label",26),e.EFF(50),e.k0s()()()()}2&i&&(e.R7$(3),e.JRh(t.lang.text.GroupServer.ServerDetail),e.R7$(4),e.Y8G("ngIf",!t.HideQRCode),e.R7$(3),e.JRh(t.lang.text.ServerDetail.ServerSetting),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.DisplayName),e.R50("ngModel",t.dedicated_info.name),e.Y8G("placeholder",t.lang.text.GroupServer.DisplayName_placeholder),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Address),e.R50("ngModel",t.dedicated_info.address),e.R7$(7),e.JRh(t.lang.text.ServerDetail.detailInfo),e.R7$(4),e.JRh(t.lang.text.ServerDetail.RegenWebRTC),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.DivisionName),e.R50("ngModel",t.dedicated_info.target),e.Y8G("placeholder",t.dedicated_info.name||t.lang.text.GroupServer.DivisionName_placeholder),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Key),e.R50("ngModel",t.dedicated_info.key),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Port),e.R50("ngModel",t.dedicated_info.nakama_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.cdnPort),e.R50("ngModel",t.dedicated_info.cdn_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.apachePort),e.R50("ngModel",t.dedicated_info.apache_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.SquarePort),e.R50("ngModel",t.dedicated_info.square_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.WebRTCPort),e.R50("ngModel",t.dedicated_info.webrtc_port),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.WebpushPort),e.R50("ngModel",t.dedicated_info.webpush_port),e.R7$(2),e.R50("ngModel",t.dedicated_info.useSSL),e.R7$(2),e.JRh(t.lang.text.GroupServer.isSSL),e.R7$(2),e.Y8G("ngIf",t.global.ShowHint),e.R7$(3),e.JRh(t.lang.text.ServerDetail.ApplyChangeServerInfo))},dependencies:[f.bT,u.BC,u.vS,d.xk,d.YH,d.QW,d.W9,d.eU,d.iq,d.$w,d.uz,d.Dg,d.he,d.BC,d.BY,d.ai,d.hB,d.su,d.Gw,d.el],styles:[".icon_style[_ngcontent-%COMP%]{width:22px;height:22px;transform:translateY(2px);margin-left:4px;margin-right:4px}ion-input[_ngcontent-%COMP%]{--highlight-color-valid: var(--ion-color-primary)}"]}),s})()}];let P=(()=>{var r;class s{}return(r=s).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(M),g.iI]}),s})(),k=(()=>{var r;class s{}return(r=s).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[f.MD,u.YN,d.bv,P]}),s})()}}]);