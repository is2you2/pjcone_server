"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8989],{8989:(Y,A,u)=>{u.r(A),u.d(A,{AdminToolsPageModule:()=>D});var k=u(177),f=u(4341),c=u(5374),T=u(9858),p=u(467),e=u(3953),R=u(4234),j=u(4237),$=u(9900),F=u(8065),x=u(755),b=u(7100),G=u(3307);const E=["UserSel"],I=["GroupSel"];function P(n,_){if(1&n){const r=e.RV6();e.j41(0,"ion-item",31),e.bIt("click",function(){const i=e.eBV(r).index,s=e.XpG(2);return e.Njj(s.select_server(i))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&n){const r=_.$implicit;e.R7$(2),e.JRh(r.name)}}function y(n,_){if(1&n){const r=e.RV6();e.j41(0,"ion-accordion-group",23,2),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.isExpanded=!0)}),e.j41(2,"ion-accordion",24)(3,"ion-item",25)(4,"ion-label",26),e.EFF(5),e.k0s(),e.j41(6,"ion-label",27),e.EFF(7),e.k0s(),e.nrm(8,"ion-icon",28),e.k0s(),e.j41(9,"div",29),e.DNE(10,P,3,1,"ion-item",30),e.k0s()()()}if(2&n){const r=e.XpG();e.Y8G("value",r.isExpanded),e.R7$(5),e.JRh(r.lang.text.AddGroup.SelectServer),e.R7$(2),e.JRh(r.servers[r.index].name),e.R7$(3),e.Y8G("ngForOf",r.servers)}}function S(n,_){if(1&n&&(e.j41(0,"div",32)(1,"div",33),e.nrm(2,"ion-icon",34),e.j41(3,"div")(4,"ion-label",35),e.EFF(5),e.k0s()()()()),2&n){const r=e.XpG();e.R7$(5),e.JRh(r.lang.text.AdminTools.Requesting)}}function O(n,_){if(1&n&&e.nrm(0,"img",48),2&n){const r=e.XpG().$implicit,t=e.XpG();e.Y8G("src",t.all_users[r].img,e.B4B)}}function C(n,_){if(1&n&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&n){const r=e.XpG(2);e.R7$(),e.JRh("("+r.lang.text.AdminTools.AboutMe+")")}}function L(n,_){if(1&n){const r=e.RV6();e.j41(0,"div")(1,"ion-accordion",36)(2,"ion-item",37)(3,"div",38),e.DNE(4,O,1,1,"img",39),e.k0s(),e.nrm(5,"div",40),e.j41(6,"ion-label",41),e.EFF(7),e.DNE(8,C,2,1,"span",42),e.k0s(),e.nrm(9,"ion-icon",28),e.k0s(),e.j41(10,"div",29)(11,"ion-item",43),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.copy_id(s.all_users[i].id||s.all_users[i].user_id))}),e.j41(12,"ion-label",44),e.EFF(13),e.k0s()(),e.j41(14,"ion-item",45)(15,"ion-label",26),e.EFF(16),e.k0s(),e.j41(17,"ion-label",46),e.EFF(18),e.k0s()(),e.j41(19,"ion-item",45)(20,"ion-label",26),e.EFF(21),e.k0s(),e.j41(22,"ion-label",46),e.EFF(23),e.k0s()(),e.j41(24,"ion-item",31),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.start_private_chat(s.all_users[i]))}),e.j41(25,"ion-label"),e.EFF(26),e.k0s()(),e.j41(27,"ion-item",31),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.remove_user(s.all_users[i]))}),e.j41(28,"ion-label",47),e.EFF(29),e.k0s()()()()()}if(2&n){const r=_.$implicit,t=e.XpG();e.R7$(),e.Y8G("value",t.all_users[r].id||t.all_users[r].user_id),e.R7$(3),e.Y8G("ngIf",t.all_users[r].img),e.R7$(),e.Aen("background-color: "+t.statusBar.colors[t.all_users[r].online?"online":"offline"]),e.R7$(2),e.SpI("",t.nakama.usernameOverride[t.isOfficial][t.target][t.all_users[r].id]||t.all_users[r].display_name||t.lang.text.Profile.noname_user," "),e.R7$(),e.Y8G("ngIf",t.all_users[r].is_me),e.R7$(5),e.JRh(t.all_users[r].id||t.all_users[r].user_id),e.R7$(3),e.JRh(t.lang.text.AdminTools.UserCreate),e.R7$(2),e.JRh(t.all_users[r].display_created),e.R7$(3),e.JRh(t.lang.text.AddGroup.LanguageTag),e.R7$(2),e.JRh(t.all_users[r].lang_tag),e.R7$(3),e.JRh(t.lang.text.OtherProfile.privacy_chat),e.R7$(3),e.JRh(t.lang.text.AdminTools.ForceLeave)}}function U(n,_){if(1&n&&(e.j41(0,"div",32)(1,"div",33),e.nrm(2,"ion-icon",50),e.j41(3,"div")(4,"ion-label",35),e.EFF(5),e.k0s()()()()),2&n){const r=e.XpG();e.R7$(5),e.JRh(r.lang.text.AdminTools.Requesting)}}function B(n,_){if(1&n&&e.nrm(0,"img",48),2&n){const r=e.XpG().$implicit,t=e.XpG();e.Y8G("src",t.all_groups[r].img,e.B4B)}}function M(n,_){if(1&n&&e.nrm(0,"img",56),2&n){const r=e.XpG().$implicit,t=e.XpG(2);e.Y8G("src",r.is_me?t.nakama.users.self.img:t.nakama.users[t.isOfficial][t.target][r.user.id].img,e.B4B)}}function N(n,_){if(1&n){const r=e.RV6();e.j41(0,"div")(1,"ion-item",54),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG(2);return s.copy_id(i.user.id),e.Njj(s.find_current_user_id(i.user.id))}),e.j41(2,"div",38),e.DNE(3,M,1,1,"img",55),e.k0s(),e.j41(4,"ion-label"),e.EFF(5),e.k0s()()()}if(2&n){const r=_.$implicit,t=e.XpG(2);e.R7$(3),e.Y8G("ngIf",r.is_me?t.nakama.users.self.img:t.nakama.users[t.isOfficial][t.target][r.user.id].img),e.R7$(2),e.JRh((r.is_me?t.nakama.users.self.display_name:t.nakama.usernameOverride[t.isOfficial][t.target][r.user.id]||r.user.display_name)||t.lang.text.Profile.noname_user)}}function J(n,_){if(1&n){const r=e.RV6();e.j41(0,"div")(1,"ion-accordion",36)(2,"ion-item",37)(3,"div",38),e.DNE(4,B,1,1,"img",39),e.k0s(),e.nrm(5,"div",40),e.j41(6,"ion-label",41),e.EFF(7),e.k0s(),e.nrm(8,"ion-icon",28),e.k0s(),e.j41(9,"div",29)(10,"ion-item",43),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.copy_id(s.all_groups[i].id))}),e.j41(11,"ion-label",44),e.EFF(12),e.k0s()(),e.j41(13,"ion-item",45)(14,"ion-label",26),e.EFF(15),e.k0s(),e.j41(16,"ion-label",46),e.EFF(17),e.k0s()(),e.j41(18,"ion-item",43),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return s.copy_id(s.all_groups[i].creator_id),e.Njj(s.find_current_user_id(s.all_groups[i].creator_id))}),e.j41(19,"ion-label",51),e.EFF(20),e.k0s(),e.j41(21,"ion-label",52),e.EFF(22),e.k0s()(),e.j41(23,"ion-accordion-group",null,3)(25,"ion-accordion",36)(26,"ion-item",37)(27,"ion-label",26),e.EFF(28),e.k0s(),e.j41(29,"ion-label",46),e.EFF(30),e.k0s()(),e.j41(31,"div",29),e.DNE(32,N,6,2,"div",22),e.k0s()()(),e.j41(33,"ion-item-divider")(34,"ion-label"),e.EFF(35),e.k0s()(),e.j41(36,"textarea",53),e.mxI("ngModelChange",function(i){const s=e.eBV(r).$implicit,o=e.XpG();return e.DH7(o.all_groups[s].description,i)||(o.all_groups[s].description=i),e.Njj(i)}),e.k0s(),e.j41(37,"ion-item",31),e.bIt("click",function(){const i=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.force_breakup_group(s.all_groups[i]))}),e.j41(38,"ion-label",47),e.EFF(39),e.k0s()()()()()}if(2&n){const r=_.$implicit,t=e.XpG();e.R7$(),e.Y8G("value",t.all_groups[r].name),e.R7$(3),e.Y8G("ngIf",t.all_groups[r].img),e.R7$(),e.Aen("background-color: "+t.statusBar.colors[t.all_groups[r].open?"online":"pending"]),e.R7$(2),e.JRh(t.all_groups[r].name),e.R7$(5),e.JRh(t.all_groups[r].id),e.R7$(3),e.JRh(t.lang.text.AddGroup.LanguageTag),e.R7$(2),e.JRh(t.all_groups[r].lang_tag),e.R7$(3),e.JRh(t.lang.text.AdminTools.GroupCreator),e.R7$(2),e.SpI(" ",(t.nakama.users[t.isOfficial][t.target][t.all_groups[r].creator_id]?t.nakama.usernameOverride[t.isOfficial][t.target][t.all_groups[r].creator_id]||t.nakama.users[t.isOfficial][t.target][t.all_groups[r].creator_id].display_name:t.nakama.users.self.display_name)||t.lang.text.Profile.noname_user," "),e.R7$(3),e.Y8G("value",t.all_groups[r].name+"_user"),e.R7$(3),e.JRh(t.lang.text.AdminTools.GroupUserCounter),e.R7$(2),e.JRh(t.all_groups[r].edge_count+" / "+t.all_groups[r].max_count),e.R7$(2),e.Y8G("ngForOf",t.all_groups[r].users),e.R7$(3),e.JRh(t.lang.text.AddGroup.GroupDetail_placeholder),e.R7$(),e.R50("ngModel",t.all_groups[r].description),e.R7$(3),e.JRh(t.lang.text.AdminTools.ForceBreakUp)}}const X=[{path:"",component:(()=>{var n;class _{constructor(t,i,s,o,l,a,h,d){this.lang=t,this.nakama=i,this.p5toast=s,this.alertCtrl=o,this.statusBar=l,this.indexed=a,this.global=h,this.p5loading=d,this.servers=[],this.index=0,this.isExpanded=!0,this.notification={uri:"",msg:"",noti_id:1,persistent:!1},this.ArcadeListURL="",this.is_sending=!1,this.all_users=[],this.CurrentOnlineUser=0,this.AllUserCount=0,this.current_user_page=1,this.all_user_page=1,this.current_user_size=[],this.all_groups=[],this.AllGroupCount=0,this.current_group_page=1,this.all_group_page=1,this.current_group_size=[],this.LIST_PAGE_SIZE=5}select_server(t){this.index=t,this.isOfficial=this.servers[t].isOfficial,this.target=this.servers[t].target,this.isExpanded=!1,this.GetRegisteredArcadeURL(),this.refresh_all_user(),this.refresh_all_groups()}ngOnInit(){this.servers=this.nakama.get_all_server_info(!0,!0);for(let t=this.servers.length-1;t>=0;t--)this.servers[t].is_admin||this.servers.splice(t,1);this.select_server(0)}GetRegisteredArcadeURL(){this.nakama.servers[this.isOfficial][this.target].client.readStorageObjects(this.nakama.servers[this.isOfficial][this.target].session,{object_ids:[{collection:"arcade",key:"url"}]}).then(t=>{this.ArcadeListURL=t.objects.length?t.objects[0].value.data:""})}SetArcadeURL(){var t=this;return(0,p.A)(function*(){try{yield t.nakama.servers[t.isOfficial][t.target].client.rpc(t.nakama.servers[t.isOfficial][t.target].session,"set_arcade_url_fn",{data:t.ArcadeListURL}),t.p5toast.show({text:t.lang.text.AdminTools.SuccSetArcadeURL})}catch(i){t.p5toast.show({text:`${t.lang.text.AdminTools.FailedSetArcadeURL}: ${(i.statusText?`${i.statusText}(${i.status})`:i.status)||i}`})}t.ArcadeListURL&&t.global.open_link(t.ArcadeListURL)})()}send_noti_to_server(){this.notification.msg||this.notification.uri?(this.is_sending=!0,this.notification.msg=encodeURIComponent(this.notification.msg),this.notification.uri=encodeURIComponent(this.notification.uri),this.nakama.servers[this.isOfficial][this.target].client.rpc(this.nakama.servers[this.isOfficial][this.target].session,"send_noti_all_fn",this.notification).then(t=>{this.notification.msg="",this.notification.uri="",this.is_sending=!1}).catch(t=>{console.log("send_noti_to_server: ",t),this.p5toast.show({text:`${this.lang.text.AdminTools.SendFailed}: ${(t.statusText?`${t.statusText}(${t.status})`:t.status)||t}`}),this.is_sending=!1})):this.p5toast.show({text:this.lang.text.AdminTools.NoNotiMsg})}refresh_all_user(){this.CurrentOnlineUser=0,this.AllUserCount=0,this.all_users.length=0,this.current_user_size.length=0,this.nakama.servers[this.isOfficial][this.target].client.rpc(this.nakama.servers[this.isOfficial][this.target].session,"query_all_users",{}).then(t=>{this.all_users=t.payload;for(let i=0,s=this.all_users.length;i<s;i++){this.nakama.save_other_user(this.all_users[i],this.isOfficial,this.target);let o=this.all_users[i].id||this.all_users[i].user_id;this.nakama.load_other_user(o,this.isOfficial,this.target,l=>{this.all_users[i]={...this.all_users[i],...l};let a=new Date(this.all_users[i].create_time).getTime()-60*(new Date).getTimezoneOffset()*1e3;this.all_users[i].display_created=new Date(a).toISOString().split(".")[0],this.all_users[i].is_me=o==this.nakama.servers[this.isOfficial][this.target].session.user_id},!0),this.all_users[i].online&&this.CurrentOnlineUser++}this.AllUserCount=this.all_users.length,this.all_user_page=Math.ceil(this.all_users.length/this.LIST_PAGE_SIZE),this.current_user_page=0,this.change_user_list_page(1)}).catch(t=>{console.error("\uc0ac\uc6a9\uc790 \ub9ac\uc2a4\ud2b8 \ub3cc\ub824\ubc1b\uae30 \uc624\ub958: ",t)})}refresh_all_groups(){this.AllGroupCount=0,this.all_groups.length=0,this.current_group_size.length=0,this.nakama.servers[this.isOfficial][this.target].client.rpc(this.nakama.servers[this.isOfficial][this.target].session,"query_all_groups",{}).then(t=>{this.all_groups=t.payload;for(let i=0,s=this.all_groups.length;i<s;i++){for(let o=0,l=this.all_groups[i].users.length;o<l;o++)this.all_groups[i].users[o].user.user_id==this.nakama.servers[this.isOfficial][this.target].session.user_id?(this.all_groups[i].users[o].is_me=!0,this.all_groups[i].users[o].user=this.nakama.users.self):this.all_groups[i].users[o].user=this.nakama.load_other_user(this.all_groups[i].users[o].user.user_id,this.isOfficial,this.target);this.indexed.loadTextFromUserPath(`servers/${this.isOfficial}/${this.target}/groups/${this.all_groups[i].id}.img`,(o,l)=>{o&&l&&(this.all_groups[i].img=l)})}this.AllGroupCount=this.all_groups.length||0,this.all_group_page=Math.ceil(this.all_groups.length/this.LIST_PAGE_SIZE)||0,this.current_group_page=0,this.change_group_list_page(1)}).catch(t=>{console.error("\uadf8\ub8f9 \ub9ac\uc2a4\ud2b8 \ub3cc\ub824\ubc1b\uae30 \uc624\ub958: ",t)})}find_current_user_id(t){for(let i=0,s=this.all_users.length;i<s;i++)if(this.all_users[i].id==t){this.current_user_page=Math.floor(i/5),this.change_user_list_page(1);break}this.UserSel.value=t}force_breakup_group(t){this.alertCtrl.create({header:t.name,message:this.lang.text.AdminTools.ForceBreakUp,buttons:[{text:this.lang.text.GroupDetail.BreakupGroup,cssClass:"redfont",handler:()=>{this.ForceBreakupGroupAct(t)}}]}).then(i=>i.present())}ForceBreakupGroupAct(t){var i=this;return(0,p.A)(function*(){const s=`remove_channel_files_${t.name}`;yield i.p5loading.update({id:s,message:`${i.lang.text.GroupDetail.ForceBreaked}: ${t.name}`,forceEnd:null});try{yield i.nakama.servers[i.isOfficial][i.target].client.rpc(i.nakama.servers[i.isOfficial][i.target].session,"force_remove_group",{group_id:t.id}),i.p5toast.show({text:`${i.lang.text.AdminTools.ForceBreaked}: ${t.name}`}),i.refresh_all_user(),i.refresh_all_groups()}catch(a){console.log("force_breakup_group: ",a),i.p5toast.show({text:`${i.lang.text.AdminTools.ForceBreakedFailed}: ${a.statusText}`,lateable:!0})}try{yield i.nakama.remove_channel_files(i.isOfficial,i.target,i.nakama.groups[i.isOfficial][i.target][t.id].channel_id,void 0,s)}catch(a){console.log("\ucc44\ub110 \ud30c\uc77c \uc0ad\uc81c \uc624\ub958: ",a),i.p5toast.show({text:`${i.lang.text.AdminTools.FailedClear}: ${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`,lateable:!0})}let o=i.nakama.servers[i.isOfficial][i.target].info;try{var l;let a=localStorage.getItem("fallback_fs");if(!a)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let h=a.split("://"),d=h.pop().split(":"),g=h.pop();g?g+=":":g=i.global.checkProtocolFromAddress(d[0])?"https:":"http:";const m=null===(l=d[1])||void 0===l?void 0:l.split(",");let v=`${g}//${d[0]}:${(null==m?void 0:m[1])||9002}/`;yield i.p5loading.update({id:s,message:`${i.lang.text.AdminTools.ClearFFSKey}: ${t.name}`,forceEnd:null}),yield i.global.remove_files_from_storage_with_key(v,t.id,{})}catch(a){console.log("ffs \ud30c\uc77c \uc0ad\uc81c \uc2e4\ud328: ",a),i.p5toast.show({text:`${i.lang.text.AdminTools.FailedFFSClear}: ${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`,lateable:!0})}try{let a=`${o.useSSL?"https":"http"}://${o.address}`;yield i.p5loading.update({id:s,message:`${i.lang.text.AdminTools.ClearCDN}: ${t.name}`,forceEnd:null}),yield i.global.remove_files_from_storage_with_key(a,t.id,{cdn_port:o.cdn_port,apache_port:o.apache_port,user_id:i.nakama.servers[i.isOfficial][i.target].session.user_id})}catch(a){console.log("\ud30c\uc77c \uc77c\uad04 \uc0ad\uc81c \uc694\uccad \uc2e4\ud328: ",a),i.p5toast.show({text:`${i.lang.text.AdminTools.FailedClear}: ${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`,lateable:!0})}yield i.p5loading.update({id:s,message:`${i.lang.text.GroupDetail.BreakupGroup}: ${t.name}`,progress:1,forceEnd:1e3})})()}change_user_list_page(t){switch(t){case 1:if(this.current_user_page<this.all_user_page){this.current_user_page+=1,this.current_user_size=Array(this.current_user_page==this.all_user_page?this.all_users.length%this.LIST_PAGE_SIZE==0?this.LIST_PAGE_SIZE:this.all_users.length%this.LIST_PAGE_SIZE:this.LIST_PAGE_SIZE);for(let i=0,s=this.current_user_size.length;i<s;i++)this.current_user_size[i]=(this.current_user_page-1)*this.LIST_PAGE_SIZE+i}break;case-1:if(this.current_user_page-1>0){this.current_user_page-=1,this.current_user_size=Array(this.LIST_PAGE_SIZE);for(let i=0,s=this.current_user_size.length;i<s;i++)this.current_user_size[i]=(this.current_user_page-1)*this.LIST_PAGE_SIZE+i}}this.UserSel.value=void 0}change_group_list_page(t){switch(t){case 1:if(this.current_group_page<this.all_group_page){this.current_group_page+=1,this.current_group_size=Array(this.current_group_page==this.all_group_page?this.all_groups.length%this.LIST_PAGE_SIZE==0?this.LIST_PAGE_SIZE:this.all_groups.length%this.LIST_PAGE_SIZE:this.LIST_PAGE_SIZE);for(let i=0,s=this.current_group_size.length;i<s;i++)this.current_group_size[i]=(this.current_group_page-1)*this.LIST_PAGE_SIZE+i}break;case-1:if(this.current_group_page-1>0){this.current_group_page-=1,this.current_group_size=Array(this.LIST_PAGE_SIZE);for(let i=0,s=this.current_group_size.length;i<s;i++)this.current_group_size[i]=(this.current_group_page-1)*this.LIST_PAGE_SIZE+i}}this.GroupSel.value=void 0}start_private_chat(t){var i=this;return(0,p.A)(function*(){let s=yield i.nakama.join_chat_with_modulation(t.user_id||t.id,2,i.isOfficial,i.target,!0);i.nakama.go_to_chatroom(s)})()}copy_id(t){this.global.WriteValueToClipboard("text/plain",t)}remove_user(t){var i=this;let s=t.display_name||this.lang.text.Profile.noname_user;try{this.nakama.usernameOverride[this.isOfficial][this.target][t.id]&&(s+=` (${this.nakama.usernameOverride[this.isOfficial][this.target][t.id]})`)}catch{}this.alertCtrl.create({header:s,message:this.lang.text.AdminTools.ForceLeave,buttons:[{text:this.lang.text.AdminTools.ApplyLeave,cssClass:"redfont",handler:()=>{!function(){var l=(0,p.A)(function*(){const a=`admin_remove_user_${Date.now()}`;i.p5loading.update({id:a,message:i.lang.text.Nakama.RemovingAccount}),yield i.RemoveUser(t),i.p5loading.remove(a)});return function(){return l.apply(this,arguments)}}()()}}]}).then(o=>o.present())}RemoveUser(t){var i=this;return(0,p.A)(function*(){try{let o=i.nakama.servers[i.isOfficial][i.target].info,l=`${o.useSSL?"https":"http"}://${o.address}`;yield i.nakama.servers[i.isOfficial][i.target].client.rpc(i.nakama.servers[i.isOfficial][i.target].session,"remove_account_fn",{user_id:t.user_id||t.id});try{var s;let a=localStorage.getItem("fallback_fs");if(!a)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let h=a.split("://"),d=h.pop().split(":"),g=h.pop();g?g+=":":g=i.global.checkProtocolFromAddress(d[0])?"https:":"http:";const m=null===(s=d[1])||void 0===s?void 0:s.split(",");let v=`${g}//${d[0]}:${(null==m?void 0:m[1])||9002}/`;yield i.global.remove_files_from_storage_with_key(v,t.user_id,{})}catch{}try{yield i.global.remove_files_from_storage_with_key(l,t.user_id,{cdn_port:o.cdn_port,apache_port:o.apache_port,user_id:i.nakama.servers[i.isOfficial][i.target].session.user_id})}catch(a){console.log("\ud30c\uc77c \uc77c\uad04 \uc0ad\uc81c \uc694\uccad \uc2e4\ud328: ",a)}i.p5toast.show({text:`${i.lang.text.AdminTools.UserLeaved}: ${t.display_name||i.lang.text.Profile.noname_user}`}),i.refresh_all_user(),i.refresh_all_groups()}catch(o){console.log("remove_user: ",o),i.p5toast.show({text:`${i.lang.text.AdminTools.UserLeavedFailed}: ${o.statusText}`})}})()}}return(n=_).\u0275fac=function(t){return new(t||n)(e.rXU(R.y),e.rXU(j.X),e.rXU($.G),e.rXU(c.hG),e.rXU(F.j),e.rXU(x.n),e.rXU(b.z3),e.rXU(G.f))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-admin-tools"]],viewQuery:function(t,i){if(1&t&&(e.GBs(E,5),e.GBs(I,5)),2&t){let s;e.mGM(s=e.lsd())&&(i.UserSel=s.first),e.mGM(s=e.lsd())&&(i.GroupSel=s.first)}},decls:66,vars:26,consts:[["UserSel",""],["GroupSel",""],["accordionGroup",""],["GroupUserSel",""],[1,"ion-no-border"],["slot","start"],["defaultHref","portal/settings"],["value","colors","expand","inset",3,"value","click",4,"ngIf"],["button",""],[1,"ion-text-end",3,"ngModelChange","label","placeholder","ngModel"],["slot","end","name","open-outline",3,"click"],[1,"ion-text-end",3,"ngModelChange","label","ngModel","placeholder"],[3,"ngModelChange","ngModel"],[1,"infobox","content_size",3,"ngModelChange","ngModel","placeholder"],["button","",3,"disabled"],[1,"ion-text-center",3,"click"],["color","primary","name","refresh-circle-outline",1,"refresh_icon",3,"click"],["slot","end",2,"margin-right","8px"],[3,"click"],["slot","start","name","arrow-back-circle-outline",1,"icon_style"],["slot","start","name","arrow-forward-circle-outline",1,"icon_style"],["style","height: 245px;",4,"ngIf"],[4,"ngFor","ngForOf"],["value","colors","expand","inset",3,"click","value"],["value","colors"],["slot","header"],[2,"display","contents"],[1,"ion-text-right"],[1,"ion-accordion-toggle-icon","hide_accordion_icon"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],[2,"height","245px"],[1,"disconnect_info",2,"position","relative"],["color","medium","name","person-circle-outline",2,"width","60px","height","60px"],["color","medium"],[3,"value"],["button","","slot","header"],[1,"additional_form","bg_img_form"],["class","profile_img","loading","lazy",3,"src",4,"ngIf"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["class","server_target",4,"ngIf"],[2,"cursor","copy",3,"click"],["color","medium","text-wrap","",1,"ion-text-center"],["disabled",""],[1,"ion-text-end"],["color","danger",1,"ion-text-center"],["loading","lazy",1,"profile_img",3,"src"],[1,"server_target"],["color","medium","name","people-circle-outline",2,"width","60px","height","60px"],["color","medium",2,"display","contents"],["color","medium",1,"ion-text-end"],["disabled","",1,"infobox",3,"ngModelChange","ngModel"],["button","",2,"cursor","copy",3,"click"],["class","profile_img",3,"src",4,"ngIf"],[1,"profile_img",3,"src"]],template:function(t,i){if(1&t){const s=e.RV6();e.j41(0,"ion-header",4)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",5),e.nrm(5,"ion-back-button",6),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,y,11,4,"ion-accordion-group",7),e.j41(8,"ion-item-divider")(9,"ion-label"),e.EFF(10),e.k0s()(),e.j41(11,"ion-item",8)(12,"ion-input",9),e.mxI("ngModelChange",function(l){return e.eBV(s),e.DH7(i.ArcadeListURL,l)||(i.ArcadeListURL=l),e.Njj(l)}),e.k0s(),e.j41(13,"ion-icon",10),e.bIt("click",function(){return e.eBV(s),e.Njj(i.SetArcadeURL())}),e.k0s()(),e.j41(14,"ion-item-divider")(15,"ion-label"),e.EFF(16),e.k0s()(),e.j41(17,"ion-item")(18,"ion-input",11),e.mxI("ngModelChange",function(l){return e.eBV(s),e.DH7(i.notification.uri,l)||(i.notification.uri=l),e.Njj(l)}),e.k0s()(),e.j41(19,"ion-item")(20,"ion-checkbox",12),e.mxI("ngModelChange",function(l){return e.eBV(s),e.DH7(i.notification.persistent,l)||(i.notification.persistent=l),e.Njj(l)}),e.EFF(21),e.k0s()(),e.j41(22,"textarea",13),e.mxI("ngModelChange",function(l){return e.eBV(s),e.DH7(i.notification.msg,l)||(i.notification.msg=l),e.Njj(l)}),e.k0s(),e.j41(23,"ion-item",14)(24,"ion-label",15),e.bIt("click",function(){return e.eBV(s),e.Njj(i.send_noti_to_server())}),e.EFF(25),e.k0s()(),e.j41(26,"ion-item-divider")(27,"ion-label"),e.EFF(28),e.k0s(),e.j41(29,"ion-icon",16),e.bIt("click",function(){return e.eBV(s),e.Njj(i.refresh_all_user())}),e.k0s(),e.j41(30,"table",17)(31,"tr")(32,"td",18),e.bIt("click",function(){return e.eBV(s),e.Njj(i.change_user_list_page(-1))}),e.nrm(33,"ion-icon",19),e.k0s(),e.j41(34,"td"),e.EFF(35),e.k0s(),e.j41(36,"td"),e.EFF(37,"/"),e.k0s(),e.j41(38,"td"),e.EFF(39),e.k0s(),e.j41(40,"td",18),e.bIt("click",function(){return e.eBV(s),e.Njj(i.change_user_list_page(1))}),e.nrm(41,"ion-icon",20),e.k0s()()()(),e.DNE(42,S,6,1,"div",21),e.j41(43,"ion-accordion-group",null,0),e.DNE(45,L,30,13,"div",22),e.k0s(),e.j41(46,"ion-item-divider")(47,"ion-label"),e.EFF(48),e.k0s(),e.j41(49,"ion-icon",16),e.bIt("click",function(){return e.eBV(s),e.Njj(i.refresh_all_groups())}),e.k0s(),e.j41(50,"table",17)(51,"tr")(52,"td",18),e.bIt("click",function(){return e.eBV(s),e.Njj(i.change_group_list_page(-1))}),e.nrm(53,"ion-icon",19),e.k0s(),e.j41(54,"td"),e.EFF(55),e.k0s(),e.j41(56,"td"),e.EFF(57,"/"),e.k0s(),e.j41(58,"td"),e.EFF(59),e.k0s(),e.j41(60,"td",18),e.bIt("click",function(){return e.eBV(s),e.Njj(i.change_group_list_page(1))}),e.nrm(61,"ion-icon",20),e.k0s()()()(),e.DNE(62,U,6,1,"div",21),e.j41(63,"ion-accordion-group",null,1),e.DNE(65,J,40,17,"div",22),e.k0s()()}2&t&&(e.R7$(3),e.JRh(i.lang.text.Settings.ServerAdmin),e.R7$(4),e.Y8G("ngIf",i.servers.length),e.R7$(3),e.JRh(i.lang.text.AdminTools.ArcadeSet),e.R7$(2),e.Y8G("label",i.lang.text.AdminTools.ArcadeListURL)("placeholder",i.lang.text.AdminTools.ArcadeURLPlaceholder),e.R50("ngModel",i.ArcadeListURL),e.R7$(4),e.JRh(i.lang.text.AdminTools.GlobalNoti),e.R7$(2),e.Y8G("label",i.lang.text.AdminTools.ImageURL),e.R50("ngModel",i.notification.uri),e.Y8G("placeholder",i.lang.text.AdminTools.EnterURI),e.R7$(2),e.R50("ngModel",i.notification.persistent),e.R7$(),e.JRh(i.lang.text.AdminTools.isPersistent),e.R7$(),e.R50("ngModel",i.notification.msg),e.Y8G("placeholder",i.lang.text.AdminTools.NoNotiMsg),e.R7$(),e.Y8G("disabled",i.is_sending||!i.notification.msg&&!i.notification.uri),e.R7$(2),e.JRh(i.lang.text.AdminTools.Send),e.R7$(3),e.JRh(i.lang.text.AdminTools.UserList+" ("+i.CurrentOnlineUser+"/"+i.AllUserCount+")"),e.R7$(7),e.JRh(i.current_user_page),e.R7$(4),e.JRh(i.all_user_page),e.R7$(3),e.Y8G("ngIf",0==i.CurrentOnlineUser),e.R7$(3),e.Y8G("ngForOf",i.current_user_size),e.R7$(3),e.JRh(i.lang.text.AdminTools.GroupList+" ("+i.AllGroupCount+")"),e.R7$(7),e.JRh(i.current_group_page),e.R7$(4),e.JRh(i.all_group_page),e.R7$(3),e.Y8G("ngIf",0==i.AllGroupCount),e.R7$(3),e.Y8G("ngForOf",i.current_group_size))},dependencies:[k.Sq,k.bT,f.me,f.BC,f.vS,c.xk,c.YH,c.QW,c.eY,c.W9,c.eU,c.iq,c.$w,c.uz,c.Dg,c.he,c.BC,c.ai,c.hB,c.Gw,c.el],styles:[".icon_style[_ngcontent-%COMP%]{width:22px;height:22px;transform:translateY(2px);margin-left:4px;margin-right:4px}.refresh_icon[_ngcontent-%COMP%]{margin-left:8px}ion-input[_ngcontent-%COMP%]{--highlight-color-valid: var(--ion-color-primary)}"]}),_})()}];let V=(()=>{var n;class _{}return(n=_).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[T.iI.forChild(X),T.iI]}),_})(),D=(()=>{var n;class _{}return(n=_).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[k.MD,f.YN,c.bv,V]}),_})()}}]);