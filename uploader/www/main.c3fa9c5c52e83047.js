(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{E_:()=>p,F3:()=>d,I9:()=>C});var F=Ve(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var M=function($){return $.Unimplemented="UNIMPLEMENTED",$.Unavailable="UNAVAILABLE",$}(M||{});class C extends Error{constructor(ne,Y,we){super(ne),this.message=ne,this.code=Y,this.data=we}}const w=$=>{var ne,Y,we,Se,oe;const ge=$.CapacitorCustomPlatform||null,re=$.Capacitor||{},Q=re.Plugins=re.Plugins||{},fe=$.CapacitorPlatforms,it=(null===(ne=null==fe?void 0:fe.currentPlatform)||void 0===ne?void 0:ne.getPlatform)||(()=>null!==ge?ge.name:($=>{var ne,Y;return null!=$&&$.androidBridge?"android":null!==(Y=null===(ne=null==$?void 0:$.webkit)||void 0===ne?void 0:ne.messageHandlers)&&void 0!==Y&&Y.bridge?"ios":"web"})($)),z=(null===(Y=null==fe?void 0:fe.currentPlatform)||void 0===Y?void 0:Y.isNativePlatform)||(()=>"web"!==it()),je=(null===(we=null==fe?void 0:fe.currentPlatform)||void 0===we?void 0:we.isPluginAvailable)||(ft=>{const jt=yt.get(ft);return!!(null!=jt&&jt.platforms.has(it())||gt(ft))}),gt=(null===(Se=null==fe?void 0:fe.currentPlatform)||void 0===Se?void 0:Se.getPluginHeader)||(ft=>{var jt;return null===(jt=re.PluginHeaders)||void 0===jt?void 0:jt.find(Lt=>Lt.name===ft)}),yt=new Map,Xt=(null===(oe=null==fe?void 0:fe.currentPlatform)||void 0===oe?void 0:oe.registerPlugin)||((ft,jt={})=>{const Lt=yt.get(ft);if(Lt)return console.warn(`Capacitor plugin "${ft}" already registered. Cannot register plugins twice.`),Lt.proxy;const Bt=it(),Et=gt(ft);let Kt;const yn=function(){var ur=(0,F.A)(function*(){return!Kt&&Bt in jt?Kt=Kt="function"==typeof jt[Bt]?yield jt[Bt]():jt[Bt]:null!==ge&&!Kt&&"web"in jt&&(Kt=Kt="function"==typeof jt.web?yield jt.web():jt.web),Kt});return function(){return ur.apply(this,arguments)}}(),An=ur=>{let bn;const Qn=(...Pn)=>{const pt=yn().then(bt=>{const rt=((ur,bn)=>{var Qn,Pn;if(!Et){if(ur)return null===(Pn=ur[bn])||void 0===Pn?void 0:Pn.bind(ur);throw new C(`"${ft}" plugin is not implemented on ${Bt}`,M.Unimplemented)}{const pt=null==Et?void 0:Et.methods.find(bt=>bn===bt.name);if(pt)return"promise"===pt.rtype?bt=>re.nativePromise(ft,bn.toString(),bt):(bt,rt)=>re.nativeCallback(ft,bn.toString(),bt,rt);if(ur)return null===(Qn=ur[bn])||void 0===Qn?void 0:Qn.bind(ur)}})(bt,ur);if(rt){const _t=rt(...Pn);return bn=null==_t?void 0:_t.remove,_t}throw new C(`"${ft}.${ur}()" is not implemented on ${Bt}`,M.Unimplemented)});return"addListener"===ur&&(pt.remove=(0,F.A)(function*(){return bn()})),pt};return Qn.toString=()=>`${ur.toString()}() { [capacitor code] }`,Object.defineProperty(Qn,"name",{value:ur,writable:!1,configurable:!1}),Qn},Jn=An("addListener"),Rn=An("removeListener"),Sr=(ur,bn)=>{const Qn=Jn({eventName:ur},bn),Pn=function(){var bt=(0,F.A)(function*(){const rt=yield Qn;Rn({eventName:ur,callbackId:rt},bn)});return function(){return bt.apply(this,arguments)}}(),pt=new Promise(bt=>Qn.then(()=>bt({remove:Pn})));return pt.remove=(0,F.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Pn()}),pt},Bn=new Proxy({},{get(ur,bn){switch(bn){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Et?Sr:Jn;case"removeListener":return Rn;default:return An(bn)}}});return Q[ft]=Bn,yt.set(ft,{name:ft,proxy:Bn,platforms:new Set([...Object.keys(jt),...Et?[Bt]:[]])}),Bn});return re.convertFileSrc||(re.convertFileSrc=ft=>ft),re.getPlatform=it,re.handleError=ft=>$.console.error(ft),re.isNativePlatform=z,re.isPluginAvailable=je,re.pluginMethodNoop=(ft,jt,Lt)=>Promise.reject(`${Lt} does not have an implementation of "${jt}".`),re.registerPlugin=Xt,re.Exception=C,re.DEBUG=!!re.DEBUG,re.isLoggingEnabled=!!re.isLoggingEnabled,re.platform=re.getPlatform(),re.isNative=re.isNativePlatform(),re},D=($=>$.Capacitor=w($))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),d=D.registerPlugin;class p{constructor(ne){this.listeners={},this.retainedEventArguments={},this.windowListeners={},ne&&(console.warn(`Capacitor WebPlugin "${ne.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=ne)}addListener(ne,Y){var we=this;let Se=!1;this.listeners[ne]||(this.listeners[ne]=[],Se=!0),this.listeners[ne].push(Y);const ge=this.windowListeners[ne];ge&&!ge.registered&&this.addWindowListener(ge),Se&&this.sendRetainedArgumentsForEvent(ne);const re=function(){var fe=(0,F.A)(function*(){return we.removeListener(ne,Y)});return function(){return fe.apply(this,arguments)}}();return Promise.resolve({remove:re})}removeAllListeners(){var ne=this;return(0,F.A)(function*(){ne.listeners={};for(const Y in ne.windowListeners)ne.removeWindowListener(ne.windowListeners[Y]);ne.windowListeners={}})()}notifyListeners(ne,Y,we){const Se=this.listeners[ne];if(Se)Se.forEach(oe=>oe(Y));else if(we){let oe=this.retainedEventArguments[ne];oe||(oe=[]),oe.push(Y),this.retainedEventArguments[ne]=oe}}hasListeners(ne){return!!this.listeners[ne].length}registerWindowListener(ne,Y){this.windowListeners[Y]={registered:!1,windowEventName:ne,pluginEventName:Y,handler:we=>{this.notifyListeners(Y,we)}}}unimplemented(ne="not implemented"){return new D.Exception(ne,M.Unimplemented)}unavailable(ne="not available"){return new D.Exception(ne,M.Unavailable)}removeListener(ne,Y){var we=this;return(0,F.A)(function*(){const Se=we.listeners[ne];if(!Se)return;const oe=Se.indexOf(Y);we.listeners[ne].splice(oe,1),we.listeners[ne].length||we.removeWindowListener(we.windowListeners[ne])})()}addWindowListener(ne){window.addEventListener(ne.windowEventName,ne.handler),ne.registered=!0}removeWindowListener(ne){ne&&(window.removeEventListener(ne.windowEventName,ne.handler),ne.registered=!1)}sendRetainedArgumentsForEvent(ne){const Y=this.retainedEventArguments[ne];Y&&(delete this.retainedEventArguments[ne],Y.forEach(we=>{this.notifyListeners(ne,we)}))}}const g=$=>encodeURIComponent($).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),x=$=>$.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends p{getCookies(){return(0,F.A)(function*(){const ne=document.cookie,Y={};return ne.split(";").forEach(we=>{if(we.length<=0)return;let[Se,oe]=we.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Se=x(Se).trim(),oe=x(oe).trim(),Y[Se]=oe}),Y})()}setCookie(ne){return(0,F.A)(function*(){try{const Y=g(ne.key),we=g(ne.value),Se=`; expires=${(ne.expires||"").replace("expires=","")}`,oe=(ne.path||"/").replace("path=",""),ge=null!=ne.url&&ne.url.length>0?`domain=${ne.url}`:"";document.cookie=`${Y}=${we||""}${Se}; path=${oe}; ${ge};`}catch(Y){return Promise.reject(Y)}})()}deleteCookie(ne){return(0,F.A)(function*(){try{document.cookie=`${ne.key}=; Max-Age=0`}catch(Y){return Promise.reject(Y)}})()}clearCookies(){return(0,F.A)(function*(){try{const ne=document.cookie.split(";")||[];for(const Y of ne)document.cookie=Y.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(ne){return Promise.reject(ne)}})()}clearAllCookies(){var ne=this;return(0,F.A)(function*(){try{yield ne.clearCookies()}catch(Y){return Promise.reject(Y)}})()}}d("CapacitorCookies",{web:()=>new E});const k=function(){var $=(0,F.A)(function*(ne){return new Promise((Y,we)=>{const Se=new FileReader;Se.onload=()=>{const oe=Se.result;Y(oe.indexOf(",")>=0?oe.split(",")[1]:oe)},Se.onerror=oe=>we(oe),Se.readAsDataURL(ne)})});return function(Y){return $.apply(this,arguments)}}();class V extends p{request(ne){return(0,F.A)(function*(){const Y=(($,ne={})=>{const Y=Object.assign({method:$.method||"GET",headers:$.headers},ne),Se=(($={})=>{const ne=Object.keys($);return Object.keys($).map(Se=>Se.toLocaleLowerCase()).reduce((Se,oe,ge)=>(Se[oe]=$[ne[ge]],Se),{})})($.headers)["content-type"]||"";if("string"==typeof $.data)Y.body=$.data;else if(Se.includes("application/x-www-form-urlencoded")){const oe=new URLSearchParams;for(const[ge,re]of Object.entries($.data||{}))oe.set(ge,re);Y.body=oe.toString()}else if(Se.includes("multipart/form-data")||$.data instanceof FormData){const oe=new FormData;if($.data instanceof FormData)$.data.forEach((re,Q)=>{oe.append(Q,re)});else for(const re of Object.keys($.data))oe.append(re,$.data[re]);Y.body=oe;const ge=new Headers(Y.headers);ge.delete("content-type"),Y.headers=ge}else(Se.includes("application/json")||"object"==typeof $.data)&&(Y.body=JSON.stringify($.data));return Y})(ne,ne.webFetchExtra),we=(($,ne=!0)=>$?Object.entries($).reduce((we,Se)=>{const[oe,ge]=Se;let re,Q;return Array.isArray(ge)?(Q="",ge.forEach(fe=>{re=ne?encodeURIComponent(fe):fe,Q+=`${oe}=${re}&`}),Q.slice(0,-1)):(re=ne?encodeURIComponent(ge):ge,Q=`${oe}=${re}`),`${we}&${Q}`},"").substr(1):null)(ne.params,ne.shouldEncodeUrlParams),Se=we?`${ne.url}?${we}`:ne.url,oe=yield fetch(Se,Y),ge=oe.headers.get("content-type")||"";let Q,fe,{responseType:re="text"}=oe.ok?ne:{};switch(ge.includes("application/json")&&(re="json"),re){case"arraybuffer":case"blob":fe=yield oe.blob(),Q=yield k(fe);break;case"json":Q=yield oe.json();break;default:Q=yield oe.text()}const Ce={};return oe.headers.forEach((it,le)=>{Ce[le]=it}),{data:Q,headers:Ce,status:oe.status,url:oe.url}})()}get(ne){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ne),{method:"GET"}))})()}post(ne){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ne),{method:"POST"}))})()}put(ne){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ne),{method:"PUT"}))})()}patch(ne){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ne),{method:"PATCH"}))})()}delete(ne){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ne),{method:"DELETE"}))})()}}d("CapacitorHttp",{web:()=>new V})},4442:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{L:()=>a,a:()=>be,b:()=>Z,c:()=>M,d:()=>C,g:()=>oe}),Ve(5531);const a="ionViewWillEnter",be="ionViewDidEnter",Z="ionViewWillLeave",M="ionViewDidLeave",C="ionViewWillUnload",oe=ge=>ge.classList.contains("ion-page")?ge:ge.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ge},5531:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{a:()=>b,c:()=>j,g:()=>C});class F{constructor(){this.m=new Map}reset(ge){this.m=new Map(Object.entries(ge))}get(ge,re){const Q=this.m.get(ge);return void 0!==Q?Q:re}getBoolean(ge,re=!1){const Q=this.m.get(ge);return void 0===Q?re:"string"==typeof Q?"true"===Q:!!Q}getNumber(ge,re){const Q=parseFloat(this.m.get(ge));return isNaN(Q)?void 0!==re?re:NaN:Q}set(ge,re){this.m.set(ge,re)}}const j=new F,C=oe=>w(oe),b=(oe,ge)=>("string"==typeof oe&&(ge=oe,oe=void 0),C(oe).includes(ge)),w=(oe=window)=>{if(typeof oe>"u")return[];oe.Ionic=oe.Ionic||{};let ge=oe.Ionic.platforms;return null==ge&&(ge=oe.Ionic.platforms=I(oe),ge.forEach(re=>oe.document.documentElement.classList.add(`plt-${re}`))),ge},I=oe=>{const ge=j.get("platform");return Object.keys(ne).filter(re=>{const Q=null==ge?void 0:ge[re];return"function"==typeof Q?Q(oe):ne[re](oe)})},d=oe=>!!(K(oe,/iPad/i)||K(oe,/Macintosh/i)&&E(oe)),p=oe=>K(oe,/android|sink/i),E=oe=>$(oe,"(any-pointer:coarse)"),k=oe=>q(oe)||J(oe),q=oe=>!!(oe.cordova||oe.phonegap||oe.PhoneGap),J=oe=>{const ge=oe.Capacitor;return!(null==ge||!ge.isNative)},K=(oe,ge)=>ge.test(oe.navigator.userAgent),$=(oe,ge)=>{var re;return null===(re=oe.matchMedia)||void 0===re?void 0:re.call(oe,ge).matches},ne={ipad:d,iphone:oe=>K(oe,/iPhone/i),ios:oe=>K(oe,/iPhone|iPod/i)||d(oe),android:p,phablet:oe=>{const ge=oe.innerWidth,re=oe.innerHeight,Q=Math.min(ge,re),fe=Math.max(ge,re);return Q>390&&Q<520&&fe>620&&fe<800},tablet:oe=>{const ge=oe.innerWidth,re=oe.innerHeight,Q=Math.min(ge,re),fe=Math.max(ge,re);return d(oe)||(oe=>p(oe)&&!K(oe,/mobile/i))(oe)||Q>460&&Q<820&&fe>780&&fe<1400},cordova:q,capacitor:J,electron:oe=>K(oe,/electron/i),pwa:oe=>{var ge;return!!(null!==(ge=oe.matchMedia)&&void 0!==ge&&ge.call(oe,"(display-mode: standalone)").matches||oe.navigator.standalone)},mobile:E,mobileweb:oe=>E(oe)&&!k(oe),desktop:oe=>!E(oe),hybrid:k}},9986:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{c:()=>be});var F=Ve(8476);let j;const sn=(Z,M,C)=>{const b=M.startsWith("animation")?(Z=>(void 0===j&&(j=void 0===Z.style.animationName&&void 0!==Z.style.webkitAnimationName?"-webkit-":""),j))(Z):"";Z.style.setProperty(b+M,C)},a=(Z=[],M)=>{if(void 0!==M){const C=Array.isArray(M)?M:[M];return[...Z,...C]}return Z},be=Z=>{let M,C,b,w,I,D,m,G,V,K,we,d=[],f=[],h=[],p=!1,g={},x=[],E=[],S={},k=0,q=!1,J=!1,$=!0,ne=!1,Y=!0,Se=!1;const oe=Z,ge=[],re=[],Q=[],fe=[],Ce=[],it=[],le=[],z=[],ye=[],je=[],Je=[],gt="function"==typeof AnimationEffect||void 0!==F.w&&"function"==typeof F.w.AnimationEffect,Ct="function"==typeof Element&&"function"==typeof Element.prototype.animate&&gt,$t=()=>Je,jt=(Ge,He)=>{const vt=He.findIndex(tt=>tt.c===Ge);vt>-1&&He.splice(vt,1)},Bt=(Ge,He)=>((null!=He&&He.oneTimeCallback?re:ge).push({c:Ge,o:He}),we),Kt=()=>{Ct&&(Je.forEach(Ge=>{Ge.cancel()}),Je.length=0)},yn=()=>{it.forEach(Ge=>{null!=Ge&&Ge.parentNode&&Ge.parentNode.removeChild(Ge)}),it.length=0},rt=()=>void 0!==I?I:m?m.getFill():"both",_t=()=>void 0!==G?G:void 0!==D?D:m?m.getDirection():"normal",vn=()=>q?"linear":void 0!==b?b:m?m.getEasing():"linear",On=()=>J?0:void 0!==V?V:void 0!==C?C:m?m.getDuration():0,zn=()=>void 0!==w?w:m?m.getIterations():1,ir=()=>void 0!==K?K:void 0!==M?M:m?m.getDelay():0,yr=()=>{0!==k&&(k--,0===k&&((()=>{ye.forEach(Dt=>Dt()),je.forEach(Dt=>Dt());const Ge=$?1:0,He=x,vt=E,tt=S;fe.forEach(Dt=>{const Zt=Dt.classList;He.forEach($n=>Zt.add($n)),vt.forEach($n=>Zt.remove($n));for(const $n in tt)tt.hasOwnProperty($n)&&sn(Dt,$n,tt[$n])}),V=void 0,G=void 0,K=void 0,ge.forEach(Dt=>Dt.c(Ge,we)),re.forEach(Dt=>Dt.c(Ge,we)),re.length=0,Y=!0,$&&(ne=!0),$=!0})(),m&&m.animationFinish()))},Er=()=>{(()=>{le.forEach(tt=>tt()),z.forEach(tt=>tt());const Ge=f,He=h,vt=g;fe.forEach(tt=>{const Dt=tt.classList;Ge.forEach(Zt=>Dt.add(Zt)),He.forEach(Zt=>Dt.remove(Zt));for(const Zt in vt)vt.hasOwnProperty(Zt)&&sn(tt,Zt,vt[Zt])})})(),d.length>0&&Ct&&(fe.forEach(Ge=>{const He=Ge.animate(d,{id:oe,delay:ir(),duration:On(),easing:vn(),iterations:zn(),fill:rt(),direction:_t()});He.pause(),Je.push(He)}),Je.length>0&&(Je[0].onfinish=()=>{yr()})),p=!0},Lr=Ge=>{Ge=Math.min(Math.max(Ge,0),.9999),Ct&&Je.forEach(He=>{He.currentTime=He.effect.getComputedTiming().delay+On()*Ge,He.pause()})},te=Ge=>{Je.forEach(He=>{He.effect.updateTiming({delay:ir(),duration:On(),easing:vn(),iterations:zn(),fill:rt(),direction:_t()})}),void 0!==Ge&&Lr(Ge)},Ie=(Ge=!1,He=!0,vt)=>(Ge&&Ce.forEach(tt=>{tt.update(Ge,He,vt)}),Ct&&te(vt),we),U=()=>{p&&(Ct?Je.forEach(Ge=>{Ge.pause()}):fe.forEach(Ge=>{sn(Ge,"animation-play-state","paused")}),Se=!0)},Be=Ge=>new Promise(He=>{null!=Ge&&Ge.sync&&(J=!0,Bt(()=>J=!1,{oneTimeCallback:!0})),p||Er(),ne&&(Ct&&(Lr(0),te()),ne=!1),Y&&(k=Ce.length+1,Y=!1);const vt=()=>{jt(tt,re),He()},tt=()=>{jt(vt,Q),He()};Bt(tt,{oneTimeCallback:!0}),((Ge,He)=>{Q.push({c:Ge,o:{oneTimeCallback:!0}})})(vt),Ce.forEach(Dt=>{Dt.play()}),Ct?(Je.forEach(Ge=>{Ge.play()}),(0===d.length||0===fe.length)&&yr()):yr(),Se=!1}),wt=(Ge,He)=>{const vt=d[0];return void 0===vt||void 0!==vt.offset&&0!==vt.offset?d=[{offset:0,[Ge]:He},...d]:vt[Ge]=He,we};return we={parentAnimation:m,elements:fe,childAnimations:Ce,id:oe,animationFinish:yr,from:wt,to:(Ge,He)=>{const vt=d[d.length-1];return void 0===vt||void 0!==vt.offset&&1!==vt.offset?d=[...d,{offset:1,[Ge]:He}]:vt[Ge]=He,we},fromTo:(Ge,He,vt)=>wt(Ge,He).to(Ge,vt),parent:Ge=>(m=Ge,we),play:Be,pause:()=>(Ce.forEach(Ge=>{Ge.pause()}),U(),we),stop:()=>{Ce.forEach(Ge=>{Ge.stop()}),p&&(Kt(),p=!1),q=!1,J=!1,Y=!0,G=void 0,V=void 0,K=void 0,k=0,ne=!1,$=!0,Se=!1,Q.forEach(Ge=>Ge.c(0,we)),Q.length=0},destroy:Ge=>(Ce.forEach(He=>{He.destroy(Ge)}),(Ge=>{Kt(),Ge&&yn()})(Ge),fe.length=0,Ce.length=0,d.length=0,ge.length=0,re.length=0,p=!1,Y=!0,we),keyframes:Ge=>{const He=d!==Ge;return d=Ge,He&&(Ge=>{Ct&&$t().forEach(He=>{const vt=He.effect;if(vt.setKeyframes)vt.setKeyframes(Ge);else{const tt=new KeyframeEffect(vt.target,Ge,vt.getTiming());He.effect=tt}})})(d),we},addAnimation:Ge=>{if(null!=Ge)if(Array.isArray(Ge))for(const He of Ge)He.parent(we),Ce.push(He);else Ge.parent(we),Ce.push(Ge);return we},addElement:Ge=>{if(null!=Ge)if(1===Ge.nodeType)fe.push(Ge);else if(Ge.length>=0)for(let He=0;He<Ge.length;He++)fe.push(Ge[He]);else console.error("Invalid addElement value");return we},update:Ie,fill:Ge=>(I=Ge,Ie(!0),we),direction:Ge=>(D=Ge,Ie(!0),we),iterations:Ge=>(w=Ge,Ie(!0),we),duration:Ge=>(!Ct&&0===Ge&&(Ge=1),C=Ge,Ie(!0),we),easing:Ge=>(b=Ge,Ie(!0),we),delay:Ge=>(M=Ge,Ie(!0),we),getWebAnimations:$t,getKeyframes:()=>d,getFill:rt,getDirection:_t,getDelay:ir,getIterations:zn,getEasing:vn,getDuration:On,afterAddRead:Ge=>(ye.push(Ge),we),afterAddWrite:Ge=>(je.push(Ge),we),afterClearStyles:(Ge=[])=>{for(const He of Ge)S[He]="";return we},afterStyles:(Ge={})=>(S=Ge,we),afterRemoveClass:Ge=>(E=a(E,Ge),we),afterAddClass:Ge=>(x=a(x,Ge),we),beforeAddRead:Ge=>(le.push(Ge),we),beforeAddWrite:Ge=>(z.push(Ge),we),beforeClearStyles:(Ge=[])=>{for(const He of Ge)g[He]="";return we},beforeStyles:(Ge={})=>(g=Ge,we),beforeRemoveClass:Ge=>(h=a(h,Ge),we),beforeAddClass:Ge=>(f=a(f,Ge),we),onFinish:Bt,isRunning:()=>0!==k&&!Se,progressStart:(Ge=!1,He)=>(Ce.forEach(vt=>{vt.progressStart(Ge,He)}),U(),q=Ge,p||Er(),Ie(!1,!0,He),we),progressStep:Ge=>(Ce.forEach(He=>{He.progressStep(Ge)}),Lr(Ge),we),progressEnd:(Ge,He,vt)=>(q=!1,Ce.forEach(tt=>{tt.progressEnd(Ge,He,vt)}),void 0!==vt&&(V=vt),ne=!1,$=!0,0===Ge?(G="reverse"===_t()?"normal":"reverse","reverse"===G&&($=!1),Ct?(Ie(),Lr(1-He)):(K=(1-He)*On()*-1,Ie(!1,!1))):1===Ge&&(Ct?(Ie(),Lr(He)):(K=He*On()*-1,Ie(!1,!1))),void 0!==Ge&&!m&&Be(),we)}}},464:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{E:()=>b,I:()=>Z,a:()=>F,s:()=>M});const F=w=>{try{if(w instanceof Z)return w.value;if(!sn()||"string"!=typeof w||""===w)return w;if(w.includes("onload="))return"";const I=document.createDocumentFragment(),D=document.createElement("div");I.appendChild(D),D.innerHTML=w,be.forEach(p=>{const m=I.querySelectorAll(p);for(let g=m.length-1;g>=0;g--){const x=m[g];x.parentNode?x.parentNode.removeChild(x):I.removeChild(x);const E=It(x);for(let S=0;S<E.length;S++)j(E[S])}});const d=It(I);for(let p=0;p<d.length;p++)j(d[p]);const f=document.createElement("div");f.appendChild(I);const h=f.querySelector("div");return null!==h?h.innerHTML:f.innerHTML}catch(I){return console.error(I),""}},j=w=>{if(w.nodeType&&1!==w.nodeType)return;if(typeof NamedNodeMap<"u"&&!(w.attributes instanceof NamedNodeMap))return void w.remove();for(let D=w.attributes.length-1;D>=0;D--){const d=w.attributes.item(D),f=d.name;if(!a.includes(f.toLowerCase())){w.removeAttribute(f);continue}const h=d.value,p=w[f];(null!=h&&h.toLowerCase().includes("javascript:")||null!=p&&p.toLowerCase().includes("javascript:"))&&w.removeAttribute(f)}const I=It(w);for(let D=0;D<I.length;D++)j(I[D])},It=w=>null!=w.children?w.children:w.childNodes,sn=()=>{var w;const I=window,D=null===(w=null==I?void 0:I.Ionic)||void 0===w?void 0:w.config;return!D||(D.get?D.get("sanitizerEnabled",!0):!0===D.sanitizerEnabled||void 0===D.sanitizerEnabled)},a=["class","id","href","src","name","slot"],be=["script","style","iframe","meta","link","object","embed"];class Z{constructor(I){this.value=I}}const M=w=>{const I=window,D=I.Ionic;if(!D||!D.config||"Object"===D.config.constructor.name)return I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),w),I.Ionic.config},b=!1},3351:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{g:()=>F});const F=(be,Z,M,C,b)=>It(be[1],Z[1],M[1],C[1],b).map(w=>j(be[0],Z[0],M[0],C[0],w)),j=(be,Z,M,C,b)=>b*(3*Z*Math.pow(b-1,2)+b*(-3*M*b+3*M+C*b))-be*Math.pow(b-1,3),It=(be,Z,M,C,b)=>a((C-=b)-3*(M-=b)+3*(Z-=b)-(be-=b),3*M-6*Z+3*be,3*Z-3*be,be).filter(I=>I>=0&&I<=1),a=(be,Z,M,C)=>{if(0===be)return((be,Z,M)=>{const C=Z*Z-4*be*M;return C<0?[]:[(-Z+Math.sqrt(C))/(2*be),(-Z-Math.sqrt(C))/(2*be)]})(Z,M,C);const b=(3*(M/=be)-(Z/=be)*Z)/3,w=(2*Z*Z*Z-9*Z*M+27*(C/=be))/27;if(0===b)return[Math.pow(-w,1/3)];if(0===w)return[Math.sqrt(-b),-Math.sqrt(-b)];const I=Math.pow(w/2,2)+Math.pow(b/3,3);if(0===I)return[Math.pow(w/2,.5)-Z/3];if(I>0)return[Math.pow(-w/2+Math.sqrt(I),1/3)-Math.pow(w/2+Math.sqrt(I),1/3)-Z/3];const D=Math.sqrt(Math.pow(-b/3,3)),d=Math.acos(-w/(2*Math.sqrt(Math.pow(-b/3,3)))),f=2*Math.pow(D,1/3);return[f*Math.cos(d/3)-Z/3,f*Math.cos((d+2*Math.PI)/3)-Z/3,f*Math.cos((d+4*Math.PI)/3)-Z/3]}},8621:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{C:()=>a,a:()=>It,d:()=>sn});var F=Ve(467),j=Ve(4920);const It=function(){var be=(0,F.A)(function*(Z,M,C,b,w,I){var D;if(Z)return Z.attachViewToDom(M,C,w,b);if(!(I||"string"==typeof C||C instanceof HTMLElement))throw new Error("framework delegate is missing");const d="string"==typeof C?null===(D=M.ownerDocument)||void 0===D?void 0:D.createElement(C):C;return b&&b.forEach(f=>d.classList.add(f)),w&&Object.assign(d,w),M.appendChild(d),yield new Promise(f=>(0,j.c)(d,f)),d});return function(M,C,b,w,I,D){return be.apply(this,arguments)}}(),sn=(be,Z)=>{if(Z){if(be)return be.removeViewFromDom(Z.parentElement,Z);Z.remove()}return Promise.resolve()},a=()=>{let be,Z;return{attachViewToDom:function(){var b=(0,F.A)(function*(w,I,D={},d=[]){var f,h;let p;if(be=w,I){const g="string"==typeof I?null===(f=be.ownerDocument)||void 0===f?void 0:f.createElement(I):I;d.forEach(x=>g.classList.add(x)),Object.assign(g,D),be.appendChild(g),p=g,yield new Promise(x=>(0,j.c)(g,x))}else if(be.children.length>0&&("ION-MODAL"===be.tagName||"ION-POPOVER"===be.tagName)&&!(p=be.children[0]).classList.contains("ion-delegate-host")){const x=null===(h=be.ownerDocument)||void 0===h?void 0:h.createElement("div");x.classList.add("ion-delegate-host"),d.forEach(E=>x.classList.add(E)),x.append(...be.children),be.appendChild(x),p=x}const m=document.querySelector("ion-app")||document.body;return Z=document.createComment("ionic teleport"),be.parentNode.insertBefore(Z,be),m.appendChild(be),null!=p?p:be});return function(I,D){return b.apply(this,arguments)}}(),removeViewFromDom:()=>(be&&Z&&(Z.parentNode.insertBefore(be,Z),Z.remove()),Promise.resolve())}}},1970:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B:()=>sn,G:()=>a});class j{constructor(Z,M,C,b,w){this.id=M,this.name=C,this.disableScroll=w,this.priority=1e6*b+M,this.ctrl=Z}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Z=this.ctrl.capture(this.name,this.id,this.priority);return Z&&this.disableScroll&&this.ctrl.disableScroll(this.id),Z}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class It{constructor(Z,M,C,b){this.id=M,this.disable=C,this.disableScroll=b,this.ctrl=Z}block(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.disableGesture(Z,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.enableGesture(Z,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const sn="backdrop-no-scroll",a=new class F{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Z){var M;return new j(this,this.newID(),Z.name,null!==(M=Z.priority)&&void 0!==M?M:0,!!Z.disableScroll)}createBlocker(Z={}){return new It(this,this.newID(),Z.disable,!!Z.disableScroll)}start(Z,M,C){return this.canStart(Z)?(this.requestedStart.set(M,C),!0):(this.requestedStart.delete(M),!1)}capture(Z,M,C){if(!this.start(Z,M,C))return!1;const b=this.requestedStart;let w=-1e4;if(b.forEach(I=>{w=Math.max(w,I)}),w===C){this.capturedId=M,b.clear();const I=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Z}});return document.dispatchEvent(I),!0}return b.delete(M),!1}release(Z){this.requestedStart.delete(Z),this.capturedId===Z&&(this.capturedId=void 0)}disableGesture(Z,M){let C=this.disabledGestures.get(Z);void 0===C&&(C=new Set,this.disabledGestures.set(Z,C)),C.add(M)}enableGesture(Z,M){const C=this.disabledGestures.get(Z);void 0!==C&&C.delete(M)}disableScroll(Z){this.disabledScroll.add(Z),1===this.disabledScroll.size&&document.body.classList.add(sn)}enableScroll(Z){this.disabledScroll.delete(Z),0===this.disabledScroll.size&&document.body.classList.remove(sn)}canStart(Z){return!(void 0!==this.capturedId||this.isDisabled(Z))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Z){const M=this.disabledGestures.get(Z);return!!(M&&M.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(Rr,Un,Ve)=>{"use strict";Ve.r(Un),Ve.d(Un,{MENU_BACK_BUTTON_PRIORITY:()=>C,OVERLAY_BACK_BUTTON_PRIORITY:()=>M,blockHardwareBackButton:()=>be,shouldUseCloseWatcher:()=>a,startHardwareBackButton:()=>Z});var F=Ve(467),j=Ve(8476),It=Ve(4921);Ve(8393);const a=()=>It.c.get("experimentalCloseWatcher",!1)&&void 0!==j.w&&"CloseWatcher"in j.w,be=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const b=document;let w=!1;const I=()=>{if(w)return;let D=0,d=[];const f=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(m,g){d.push({priority:m,handler:g,id:D++})}}});b.dispatchEvent(f);const h=function(){var m=(0,F.A)(function*(g){try{if(null!=g&&g.handler){const x=g.handler(p);null!=x&&(yield x)}}catch(x){console.error(x)}});return function(x){return m.apply(this,arguments)}}(),p=()=>{if(d.length>0){let m={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};d.forEach(g=>{g.priority>=m.priority&&(m=g)}),w=!0,d=d.filter(g=>g.id!==m.id),h(m).then(()=>w=!1)}};p()};if(a()){let D;const d=()=>{null==D||D.destroy(),D=new j.w.CloseWatcher,D.onclose=()=>{I(),d()}};d()}else b.addEventListener("backbutton",I)},M=100,C=99},4920:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{a:()=>M,b:()=>C,c:()=>It,d:()=>d,e:()=>g,f:()=>D,g:()=>b,h:()=>a,i:()=>Z,j:()=>f,k:()=>sn,l:()=>I,m:()=>h,n:()=>m,o:()=>x,p:()=>p,r:()=>w,s:()=>E,t:()=>F});const F=(S,k=0)=>new Promise(q=>{j(S,k,q)}),j=(S,k=0,q)=>{let J,G;const V={passive:!0},$=()=>{J&&J()},ne=Y=>{(void 0===Y||S===Y.target)&&($(),q(Y))};return S&&(S.addEventListener("webkitTransitionEnd",ne,V),S.addEventListener("transitionend",ne,V),G=setTimeout(ne,k+500),J=()=>{void 0!==G&&(clearTimeout(G),G=void 0),S.removeEventListener("webkitTransitionEnd",ne,V),S.removeEventListener("transitionend",ne,V)}),$},It=(S,k)=>{S.componentOnReady?S.componentOnReady().then(q=>k(q)):w(()=>k(S))},sn=S=>void 0!==S.componentOnReady,a=(S,k=[])=>{const q={};return k.forEach(J=>{S.hasAttribute(J)&&(null!==S.getAttribute(J)&&(q[J]=S.getAttribute(J)),S.removeAttribute(J))}),q},be=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Z=(S,k)=>{let q=be;return k&&k.length>0&&(q=q.filter(J=>!k.includes(J))),a(S,q)},M=(S,k,q,J)=>{var G;if(typeof window<"u"){const V=window,K=null===(G=null==V?void 0:V.Ionic)||void 0===G?void 0:G.config;if(K){const $=K.get("_ael");if($)return $(S,k,q,J);if(K._ael)return K._ael(S,k,q,J)}}return S.addEventListener(k,q,J)},C=(S,k,q,J)=>{var G;if(typeof window<"u"){const V=window,K=null===(G=null==V?void 0:V.Ionic)||void 0===G?void 0:G.config;if(K){const $=K.get("_rel");if($)return $(S,k,q,J);if(K._rel)return K._rel(S,k,q,J)}}return S.removeEventListener(k,q,J)},b=(S,k=S)=>S.shadowRoot||k,w=S=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(S):"function"==typeof requestAnimationFrame?requestAnimationFrame(S):setTimeout(S),I=S=>!!S.shadowRoot&&!!S.attachShadow,D=S=>{if(S.focus(),S.classList.contains("ion-focusable")){const k=S.closest("ion-app");k&&k.setFocus([S])}},d=(S,k,q,J,G)=>{if(S||I(k)){let V=k.querySelector("input.aux-input");V||(V=k.ownerDocument.createElement("input"),V.type="hidden",V.classList.add("aux-input"),k.appendChild(V)),V.disabled=G,V.name=q,V.value=J||""}},f=(S,k,q)=>Math.max(S,Math.min(k,q)),h=(S,k)=>{if(!S){const q="ASSERT: "+k;throw console.error(q),new Error(q)}},p=S=>{if(S){const k=S.changedTouches;if(k&&k.length>0){const q=k[0];return{x:q.clientX,y:q.clientY}}if(void 0!==S.pageX)return{x:S.pageX,y:S.pageY}}return{x:0,y:0}},m=S=>{const k="rtl"===document.dir;switch(S){case"start":return k;case"end":return!k;default:throw new Error(`"${S}" is not a valid value for [side]. Use "start" or "end" instead.`)}},g=(S,k)=>{const q=S._original||S;return{_original:S,emit:x(q.emit.bind(q),k)}},x=(S,k=0)=>{let q;return(...J)=>{clearTimeout(q),q=setTimeout(S,k,...J)}},E=(S,k)=>{if(null!=S||(S={}),null!=k||(k={}),S===k)return!0;const q=Object.keys(S);if(q.length!==Object.keys(k).length)return!1;for(const J of q)if(!(J in k)||S[J]!==k[J])return!1;return!0}},8607:(Rr,Un,Ve)=>{"use strict";Ve.r(Un),Ve.d(Un,{GESTURE_CONTROLLER:()=>F.G,createGesture:()=>C});var F=Ve(1970);const j=(D,d,f,h)=>{const p=It(D)?{capture:!!h.capture,passive:!!h.passive}:!!h.capture;let m,g;return D.__zone_symbol__addEventListener?(m="__zone_symbol__addEventListener",g="__zone_symbol__removeEventListener"):(m="addEventListener",g="removeEventListener"),D[m](d,f,p),()=>{D[g](d,f,p)}},It=D=>{if(void 0===sn)try{const d=Object.defineProperty({},"passive",{get:()=>{sn=!0}});D.addEventListener("optsTest",()=>{},d)}catch{sn=!1}return!!sn};let sn;const Z=D=>D instanceof Document?D:D.ownerDocument,C=D=>{let d=!1,f=!1,h=!0,p=!1;const m=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},D),g=m.canStart,x=m.onWillStart,E=m.onStart,S=m.onEnd,k=m.notCaptured,q=m.onMove,J=m.threshold,G=m.passive,V=m.blurOnStart,K={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},$=((D,d,f)=>{const h=f*(Math.PI/180),p="x"===D,m=Math.cos(h),g=d*d;let x=0,E=0,S=!1,k=0;return{start(q,J){x=q,E=J,k=0,S=!0},detect(q,J){if(!S)return!1;const G=q-x,V=J-E,K=G*G+V*V;if(K<g)return!1;const $=Math.sqrt(K),ne=(p?G:V)/$;return k=ne>m?1:ne<-m?-1:0,S=!1,!0},isGesture:()=>0!==k,getDirection:()=>k}})(m.direction,m.threshold,m.maxAngle),ne=F.G.createGesture({name:D.gestureName,priority:D.gesturePriority,disableScroll:D.disableScroll}),Se=()=>{d&&(p=!1,q&&q(K))},oe=()=>!!ne.capture()&&(d=!0,h=!1,K.startX=K.currentX,K.startY=K.currentY,K.startTime=K.currentTime,x?x(K).then(re):re(),!0),re=()=>{V&&(()=>{if(typeof document<"u"){const le=document.activeElement;null!=le&&le.blur&&le.blur()}})(),E&&E(K),h=!0},Q=()=>{d=!1,f=!1,p=!1,h=!0,ne.release()},fe=le=>{const z=d,ye=h;if(Q(),ye){if(b(K,le),z)return void(S&&S(K));k&&k(K)}},Ce=((D,d,f,h,p)=>{let m,g,x,E,S,k,q,J=0;const G=ge=>{J=Date.now()+2e3,d(ge)&&(!g&&f&&(g=j(D,"touchmove",f,p)),x||(x=j(ge.target,"touchend",K,p)),E||(E=j(ge.target,"touchcancel",K,p)))},V=ge=>{J>Date.now()||d(ge)&&(!k&&f&&(k=j(Z(D),"mousemove",f,p)),q||(q=j(Z(D),"mouseup",$,p)))},K=ge=>{ne(),h&&h(ge)},$=ge=>{Y(),h&&h(ge)},ne=()=>{g&&g(),x&&x(),E&&E(),g=x=E=void 0},Y=()=>{k&&k(),q&&q(),k=q=void 0},we=()=>{ne(),Y()},Se=(ge=!0)=>{ge?(m||(m=j(D,"touchstart",G,p)),S||(S=j(D,"mousedown",V,p))):(m&&m(),S&&S(),m=S=void 0,we())};return{enable:Se,stop:we,destroy:()=>{Se(!1),h=f=d=void 0}}})(m.el,le=>{const z=I(le);return!(f||!h||(w(le,K),K.startX=K.currentX,K.startY=K.currentY,K.startTime=K.currentTime=z,K.velocityX=K.velocityY=K.deltaX=K.deltaY=0,K.event=le,g&&!1===g(K))||(ne.release(),!ne.start()))&&(f=!0,0===J?oe():($.start(K.startX,K.startY),!0))},le=>{d?!p&&h&&(p=!0,b(K,le),requestAnimationFrame(Se)):(b(K,le),$.detect(K.currentX,K.currentY)&&(!$.isGesture()||!oe())&&it())},fe,{capture:!1,passive:G}),it=()=>{Q(),Ce.stop(),k&&k(K)};return{enable(le=!0){le||(d&&fe(void 0),Q()),Ce.enable(le)},destroy(){ne.destroy(),Ce.destroy()}}},b=(D,d)=>{if(!d)return;const f=D.currentX,h=D.currentY,p=D.currentTime;w(d,D);const m=D.currentX,g=D.currentY,E=(D.currentTime=I(d))-p;if(E>0&&E<100){const k=(g-h)/E;D.velocityX=(m-f)/E*.7+.3*D.velocityX,D.velocityY=.7*k+.3*D.velocityY}D.deltaX=m-D.startX,D.deltaY=g-D.startY,D.event=d},w=(D,d)=>{let f=0,h=0;if(D){const p=D.changedTouches;if(p&&p.length>0){const m=p[0];f=m.clientX,h=m.clientY}else void 0!==D.pageX&&(f=D.pageX,h=D.pageY)}d.currentX=f,d.currentY=h},I=D=>D.timeStamp||Date.now()},6073:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{m:()=>D});var F=Ve(467),j=Ve(8476),It=Ve(8669),sn=Ve(4929),a=Ve(4920),be=Ve(4921),Z=Ve(9986);const M=d=>(0,Z.c)().duration(d?400:300),C=d=>{let f,h;const p=d.width+8,m=(0,Z.c)(),g=(0,Z.c)();d.isEndSide?(f=p+"px",h="0px"):(f=-p+"px",h="0px"),m.addElement(d.menuInnerEl).fromTo("transform",`translateX(${f})`,`translateX(${h})`);const E="ios"===(0,be.b)(d),S=E?.2:.25;return g.addElement(d.backdropEl).fromTo("opacity",.01,S),M(E).addAnimation([m,g])},b=d=>{let f,h;const p=(0,be.b)(d),m=d.width;d.isEndSide?(f=-m+"px",h=m+"px"):(f=m+"px",h=-m+"px");const g=(0,Z.c)().addElement(d.menuInnerEl).fromTo("transform",`translateX(${h})`,"translateX(0px)"),x=(0,Z.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${f})`),E=(0,Z.c)().addElement(d.backdropEl).fromTo("opacity",.01,.32);return M("ios"===p).addAnimation([g,x,E])},w=d=>{const f=(0,be.b)(d),h=d.width*(d.isEndSide?-1:1)+"px",p=(0,Z.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${h})`);return M("ios"===f).addAnimation(p)},D=(()=>{const d=new Map,f=[],h=function(){var Q=(0,F.A)(function*(fe){const Ce=yield k(fe,!0);return!!Ce&&Ce.open()});return function(Ce){return Q.apply(this,arguments)}}(),p=function(){var Q=(0,F.A)(function*(fe){const Ce=yield void 0!==fe?k(fe,!0):q();return void 0!==Ce&&Ce.close()});return function(Ce){return Q.apply(this,arguments)}}(),m=function(){var Q=(0,F.A)(function*(fe){const Ce=yield k(fe,!0);return!!Ce&&Ce.toggle()});return function(Ce){return Q.apply(this,arguments)}}(),g=function(){var Q=(0,F.A)(function*(fe,Ce){const it=yield k(Ce);return it&&(it.disabled=!fe),it});return function(Ce,it){return Q.apply(this,arguments)}}(),x=function(){var Q=(0,F.A)(function*(fe,Ce){const it=yield k(Ce);return it&&(it.swipeGesture=fe),it});return function(Ce,it){return Q.apply(this,arguments)}}(),E=function(){var Q=(0,F.A)(function*(fe){if(null!=fe){const Ce=yield k(fe);return void 0!==Ce&&Ce.isOpen()}return void 0!==(yield q())});return function(Ce){return Q.apply(this,arguments)}}(),S=function(){var Q=(0,F.A)(function*(fe){const Ce=yield k(fe);return!!Ce&&!Ce.disabled});return function(Ce){return Q.apply(this,arguments)}}(),k=function(){var Q=(0,F.A)(function*(fe,Ce=!1){if(yield re(),"start"===fe||"end"===fe){const le=f.filter(ye=>ye.side===fe&&!ye.disabled);if(le.length>=1)return le.length>1&&Ce&&(0,sn.p)(`menuController queried for a menu on the "${fe}" side, but ${le.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,le.map(ye=>ye.el)),le[0].el;const z=f.filter(ye=>ye.side===fe);if(z.length>=1)return z.length>1&&Ce&&(0,sn.p)(`menuController queried for a menu on the "${fe}" side, but ${z.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,z.map(ye=>ye.el)),z[0].el}else if(null!=fe)return ge(le=>le.menuId===fe);return ge(le=>!le.disabled)||(f.length>0?f[0].el:void 0)});return function(Ce){return Q.apply(this,arguments)}}(),q=function(){var Q=(0,F.A)(function*(){return yield re(),we()});return function(){return Q.apply(this,arguments)}}(),J=function(){var Q=(0,F.A)(function*(){return yield re(),Se()});return function(){return Q.apply(this,arguments)}}(),G=function(){var Q=(0,F.A)(function*(){return yield re(),oe()});return function(){return Q.apply(this,arguments)}}(),V=(Q,fe)=>{d.set(Q,fe)},ne=function(){var Q=(0,F.A)(function*(fe,Ce,it){if(oe())return!1;if(Ce){const le=yield q();le&&fe.el!==le&&(yield le.setOpen(!1,!1))}return fe._setOpen(Ce,it)});return function(Ce,it,le){return Q.apply(this,arguments)}}(),we=()=>ge(Q=>Q._isOpen),Se=()=>f.map(Q=>Q.el),oe=()=>f.some(Q=>Q.isAnimating),ge=Q=>{const fe=f.find(Q);if(void 0!==fe)return fe.el},re=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Q=>new Promise(fe=>(0,a.c)(Q,fe))));return V("reveal",w),V("push",b),V("overlay",C),null==j.d||j.d.addEventListener("ionBackButton",Q=>{const fe=we();fe&&Q.detail.register(It.MENU_BACK_BUTTON_PRIORITY,()=>fe.close())}),{registerAnimation:V,get:k,getMenus:J,getOpen:q,isEnabled:S,swipeGesture:x,isAnimating:G,isOpen:E,enable:g,toggle:m,close:p,open:h,_getOpenSync:we,_createAnimation:(Q,fe)=>{const Ce=d.get(Q);if(!Ce)throw new Error("animation not registered");return Ce(fe)},_register:Q=>{f.indexOf(Q)<0&&f.push(Q)},_unregister:Q=>{const fe=f.indexOf(Q);fe>-1&&f.splice(fe,1)},_setOpen:ne}})()},8393:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B:()=>be,a:()=>Y,b:()=>Qa,c:()=>rt,d:()=>zn,e:()=>ye,f:()=>Rn,g:()=>_t,h:()=>An,i:()=>On,j:()=>ws,k:()=>Je,r:()=>C,w:()=>je});var F=Ve(467);var sn=Object.defineProperty,be={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Z=new WeakMap,M=ct=>Z.get(ct),C=(ct,Ot)=>Z.set(Ot.$lazyInstance$=ct,Ot),w=(ct,Ot)=>Ot in ct,I=(ct,Ot)=>(0,console.error)(ct,Ot),D=new Map,f=new Map,h=[],E="s-id",S="sty-id",k="c-id",J="slot-fb{display:contents}slot-fb[hidden]{display:none}",G="http://www.w3.org/1999/xlink",V=typeof window<"u"?window:{},K=V.document||{head:{}},ne={$flags$:0,$resourcesUrl$:"",jmp:ct=>ct(),raf:ct=>requestAnimationFrame(ct),ael:(ct,Ot,pn,xn)=>ct.addEventListener(Ot,pn,xn),rel:(ct,Ot,pn,xn)=>ct.removeEventListener(Ot,pn,xn),ce:(ct,Ot)=>new CustomEvent(ct,Ot)},Y=ct=>{Object.assign(ne,ct)},Se=(()=>{let ct=!1;try{K.addEventListener("e",null,Object.defineProperty({},"passive",{get(){ct=!0}}))}catch{}return ct})(),ge=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),re=!1,Q=[],fe=[],Ce=(ct,Ot)=>pn=>{ct.push(pn),re||(re=!0,Ot&&4&ne.$flags$?z(le):ne.raf(le))},it=ct=>{for(let Ot=0;Ot<ct.length;Ot++)try{ct[Ot](performance.now())}catch(pn){I(pn)}ct.length=0},le=()=>{it(Q),it(fe),(re=Q.length>0)&&ne.raf(le)},z=ct=>Promise.resolve(void 0).then(ct),ye=Ce(Q,!1),je=Ce(fe,!0),Je=ct=>{const Ot=new URL(ct,ne.$resourcesUrl$);return Ot.origin!==V.location.origin?Ot.href:Ot.pathname},gt={},Ut=ct=>"object"==(ct=typeof ct)||"function"===ct;function Xt(ct){var Ot,pn,xn;return null!=(xn=null==(pn=null==(Ot=ct.head)?void 0:Ot.querySelector('meta[name="csp-nonce"]'))?void 0:pn.getAttribute("content"))?xn:void 0}((ct,Ot)=>{for(var pn in Ot)sn(ct,pn,{get:Ot[pn],enumerable:!0})})({},{err:()=>Lt,map:()=>Bt,ok:()=>jt,unwrap:()=>Et,unwrapErr:()=>Kt});var jt=ct=>({isOk:!0,isErr:!1,value:ct}),Lt=ct=>({isOk:!1,isErr:!0,value:ct});function Bt(ct,Ot){if(ct.isOk){const pn=Ot(ct.value);return pn instanceof Promise?pn.then(xn=>jt(xn)):jt(pn)}if(ct.isErr)return Lt(ct.value);throw"should never get here"}var Et=ct=>{if(ct.isOk)return ct.value;throw ct.value},Kt=ct=>{if(ct.isErr)return ct.value;throw ct.value},An=(ct,Ot,...pn)=>{let xn=null,Nn=null,jn=null,hr=!1,_r=!1;const Mr=[],Or=Qr=>{for(let yi=0;yi<Qr.length;yi++)xn=Qr[yi],Array.isArray(xn)?Or(xn):null!=xn&&"boolean"!=typeof xn&&((hr="function"!=typeof ct&&!Ut(xn))&&(xn=String(xn)),hr&&_r?Mr[Mr.length-1].$text$+=xn:Mr.push(hr?Jn(null,xn):xn),_r=hr)};if(Or(pn),Ot){Ot.key&&(Nn=Ot.key),Ot.name&&(jn=Ot.name);{const Qr=Ot.className||Ot.class;Qr&&(Ot.class="object"!=typeof Qr?Qr:Object.keys(Qr).filter(yi=>Qr[yi]).join(" "))}}if("function"==typeof ct)return ct(null===Ot?{}:Ot,Mr,Bn);const si=Jn(ct,null);return si.$attrs$=Ot,Mr.length>0&&(si.$children$=Mr),si.$key$=Nn,si.$name$=jn,si},Jn=(ct,Ot)=>({$flags$:0,$tag$:ct,$text$:Ot,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Rn={},Bn={forEach:(ct,Ot)=>ct.map(ur).forEach(Ot),map:(ct,Ot)=>ct.map(ur).map(Ot).map(bn)},ur=ct=>({vattrs:ct.$attrs$,vchildren:ct.$children$,vkey:ct.$key$,vname:ct.$name$,vtag:ct.$tag$,vtext:ct.$text$}),bn=ct=>{if("function"==typeof ct.vtag){const pn={...ct.vattrs};return ct.vkey&&(pn.key=ct.vkey),ct.vname&&(pn.name=ct.vname),An(ct.vtag,pn,...ct.vchildren||[])}const Ot=Jn(ct.vtag,ct.vtext);return Ot.$attrs$=ct.vattrs,Ot.$children$=ct.vchildren,Ot.$key$=ct.vkey,Ot.$name$=ct.vname,Ot},Pn=(ct,Ot,pn,xn,Nn,jn,hr)=>{let _r,Mr,Or,si;if(1===jn.nodeType){for(_r=jn.getAttribute(k),_r&&(Mr=_r.split("."),(Mr[0]===hr||"0"===Mr[0])&&(Or={$flags$:0,$hostId$:Mr[0],$nodeId$:Mr[1],$depth$:Mr[2],$index$:Mr[3],$tag$:jn.tagName.toLowerCase(),$elm$:jn,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ot.push(Or),jn.removeAttribute(k),ct.$children$||(ct.$children$=[]),ct.$children$[Or.$index$]=Or,ct=Or,xn&&"0"===Or.$depth$&&(xn[Or.$index$]=Or.$elm$))),si=jn.childNodes.length-1;si>=0;si--)Pn(ct,Ot,pn,xn,Nn,jn.childNodes[si],hr);if(jn.shadowRoot)for(si=jn.shadowRoot.childNodes.length-1;si>=0;si--)Pn(ct,Ot,pn,xn,Nn,jn.shadowRoot.childNodes[si],hr)}else if(8===jn.nodeType)Mr=jn.nodeValue.split("."),(Mr[1]===hr||"0"===Mr[1])&&(_r=Mr[0],Or={$flags$:0,$hostId$:Mr[1],$nodeId$:Mr[2],$depth$:Mr[3],$index$:Mr[4],$elm$:jn,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===_r?(Or.$elm$=jn.nextSibling,Or.$elm$&&3===Or.$elm$.nodeType&&(Or.$text$=Or.$elm$.textContent,Ot.push(Or),jn.remove(),ct.$children$||(ct.$children$=[]),ct.$children$[Or.$index$]=Or,xn&&"0"===Or.$depth$&&(xn[Or.$index$]=Or.$elm$))):Or.$hostId$===hr&&("s"===_r?(Or.$tag$="slot",jn["s-sn"]=Mr[5]?Or.$name$=Mr[5]:"",jn["s-sr"]=!0,xn&&(Or.$elm$=K.createElement(Or.$tag$),Or.$name$&&Or.$elm$.setAttribute("name",Or.$name$),jn.parentNode.insertBefore(Or.$elm$,jn),jn.remove(),"0"===Or.$depth$&&(xn[Or.$index$]=Or.$elm$)),pn.push(Or),ct.$children$||(ct.$children$=[]),ct.$children$[Or.$index$]=Or):"r"===_r&&(xn?jn.remove():(Nn["s-cr"]=jn,jn["s-cn"]=!0))));else if(ct&&"style"===ct.$tag$){const Qr=Jn(null,jn.textContent);Qr.$elm$=jn,Qr.$index$="0",ct.$children$=[Qr]}},pt=(ct,Ot)=>{if(1===ct.nodeType){let pn=0;for(;pn<ct.childNodes.length;pn++)pt(ct.childNodes[pn],Ot);if(ct.shadowRoot)for(pn=0;pn<ct.shadowRoot.childNodes.length;pn++)pt(ct.shadowRoot.childNodes[pn],Ot)}else if(8===ct.nodeType){const pn=ct.nodeValue.split(".");"o"===pn[0]&&(Ot.set(pn[1]+"."+pn[2],ct),ct.nodeValue="",ct["s-en"]=pn[3])}},rt=ct=>h.push(ct),_t=ct=>M(ct).$modeName$,On=ct=>M(ct).$hostElement$,zn=(ct,Ot,pn)=>{const xn=On(ct);return{emit:Nn=>ir(xn,Ot,{bubbles:!!(4&pn),composed:!!(2&pn),cancelable:!!(1&pn),detail:Nn})}},ir=(ct,Ot,pn)=>{const xn=ne.ce(Ot,pn);return ct.dispatchEvent(xn),xn},Dr=new WeakMap,Pr=(ct,Ot,pn)=>{let xn=f.get(ct);ge&&pn?(xn=xn||new CSSStyleSheet,"string"==typeof xn?xn=Ot:xn.replaceSync(Ot)):xn=Ot,f.set(ct,xn)},Br=(ct,Ot,pn)=>{var xn;const Nn=un(Ot,pn),jn=f.get(Nn);if(ct=11===ct.nodeType?ct:K,jn)if("string"==typeof jn){let _r,hr=Dr.get(ct=ct.head||ct);if(hr||Dr.set(ct,hr=new Set),!hr.has(Nn)){if(ct.host&&(_r=ct.querySelector(`[${S}="${Nn}"]`)))_r.innerHTML=jn;else{_r=K.createElement("style"),_r.innerHTML=jn;const Mr=null!=(xn=ne.$nonce$)?xn:Xt(K);null!=Mr&&_r.setAttribute("nonce",Mr),ct.insertBefore(_r,ct.querySelector("link"))}4&Ot.$flags$&&(_r.innerHTML+=J),hr&&hr.add(Nn)}}else ct.adoptedStyleSheets.includes(jn)||(ct.adoptedStyleSheets=[...ct.adoptedStyleSheets,jn]);return Nn},un=(ct,Ot)=>"sc-"+(Ot&&32&ct.$flags$?ct.$tagName$+"-"+Ot:ct.$tagName$),Tn=ct=>ct.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),on=(ct,Ot,pn,xn,Nn,jn)=>{if(pn!==xn){let hr=w(ct,Ot),_r=Ot.toLowerCase();if("class"===Ot){const Mr=ct.classList,Or=sr(pn),si=sr(xn);Mr.remove(...Or.filter(Qr=>Qr&&!si.includes(Qr))),Mr.add(...si.filter(Qr=>Qr&&!Or.includes(Qr)))}else if("style"===Ot){for(const Mr in pn)(!xn||null==xn[Mr])&&(Mr.includes("-")?ct.style.removeProperty(Mr):ct.style[Mr]="");for(const Mr in xn)(!pn||xn[Mr]!==pn[Mr])&&(Mr.includes("-")?ct.style.setProperty(Mr,xn[Mr]):ct.style[Mr]=xn[Mr])}else if("key"!==Ot)if("ref"===Ot)xn&&xn(ct);else if(hr||"o"!==Ot[0]||"n"!==Ot[1]){const Mr=Ut(xn);if((hr||Mr&&null!==xn)&&!Nn)try{if(ct.tagName.includes("-"))ct[Ot]=xn;else{const si=null==xn?"":xn;"list"===Ot?hr=!1:(null==pn||ct[Ot]!=si)&&(ct[Ot]=si)}}catch{}let Or=!1;_r!==(_r=_r.replace(/^xlink\:?/,""))&&(Ot=_r,Or=!0),null==xn||!1===xn?(!1!==xn||""===ct.getAttribute(Ot))&&(Or?ct.removeAttributeNS(G,Ot):ct.removeAttribute(Ot)):(!hr||4&jn||Nn)&&!Mr&&(xn=!0===xn?"":xn,Or?ct.setAttributeNS(G,Ot,xn):ct.setAttribute(Ot,xn))}else if(Ot="-"===Ot[2]?Ot.slice(3):w(V,_r)?_r.slice(2):_r[2]+Ot.slice(3),pn||xn){const Mr=Ot.endsWith(qt);Ot=Ot.replace(fn,""),pn&&ne.rel(ct,Ot,pn,Mr),xn&&ne.ael(ct,Ot,xn,Mr)}}},mn=/\s/,sr=ct=>ct?ct.split(mn):[],qt="Capture",fn=new RegExp(qt+"$"),Fn=(ct,Ot,pn)=>{const xn=11===Ot.$elm$.nodeType&&Ot.$elm$.host?Ot.$elm$.host:Ot.$elm$,Nn=ct&&ct.$attrs$||gt,jn=Ot.$attrs$||gt;for(const hr of Cn(Object.keys(Nn)))hr in jn||on(xn,hr,Nn[hr],void 0,pn,Ot.$flags$);for(const hr of Cn(Object.keys(jn)))on(xn,hr,Nn[hr],jn[hr],pn,Ot.$flags$)};function Cn(ct){return ct.includes("ref")?[...ct.filter(Ot=>"ref"!==Ot),"ref"]:ct}var Wn,yr,fr,Er=!1,Lr=!1,te=!1,Ie=!1,Qe=(ct,Ot,pn,xn)=>{var Nn;const jn=Ot.$children$[pn];let _r,Mr,Or,hr=0;if(Er||(te=!0,"slot"===jn.$tag$&&(Wn&&xn.classList.add(Wn+"-s"),jn.$flags$|=jn.$children$?2:1)),null!==jn.$text$)_r=jn.$elm$=K.createTextNode(jn.$text$);else if(1&jn.$flags$)_r=jn.$elm$=K.createTextNode("");else{if(Ie||(Ie="svg"===jn.$tag$),_r=jn.$elm$=K.createElementNS(Ie?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Er&&2&jn.$flags$?"slot-fb":jn.$tag$),Ie&&"foreignObject"===jn.$tag$&&(Ie=!1),Fn(null,jn,Ie),(ct=>null!=ct)(Wn)&&_r["s-si"]!==Wn&&_r.classList.add(_r["s-si"]=Wn),Dt(_r,xn),jn.$children$)for(hr=0;hr<jn.$children$.length;++hr)Mr=Qe(ct,jn,hr,_r),Mr&&_r.appendChild(Mr);"svg"===jn.$tag$?Ie=!1:"foreignObject"===_r.tagName&&(Ie=!0)}return _r["s-hn"]=fr,3&jn.$flags$&&(_r["s-sr"]=!0,_r["s-cr"]=yr,_r["s-sn"]=jn.$name$||"",_r["s-rf"]=null==(Nn=jn.$attrs$)?void 0:Nn.ref,Or=ct&&ct.$children$&&ct.$children$[pn],Or&&Or.$tag$===jn.$tag$&&ct.$elm$&&T(ct.$elm$)),_r},T=ct=>{ne.$flags$|=1;const Ot=ct.closest(fr.toLowerCase());if(null!=Ot){const pn=Array.from(Ot.childNodes).find(Nn=>Nn["s-cr"]),xn=Array.from(ct.childNodes);for(const Nn of pn?xn.reverse():xn)null!=Nn["s-sh"]&&(vt(Ot,Nn,null!=pn?pn:null),Nn["s-sh"]=void 0,te=!0)}ne.$flags$&=-2},N=(ct,Ot)=>{ne.$flags$|=1;const pn=Array.from(ct.childNodes);if(ct["s-sr"]){let xn=ct;for(;xn=xn.nextSibling;)xn&&xn["s-sn"]===ct["s-sn"]&&xn["s-sh"]===fr&&pn.push(xn)}for(let xn=pn.length-1;xn>=0;xn--){const Nn=pn[xn];Nn["s-hn"]!==fr&&Nn["s-ol"]&&(vt(Be(Nn),Nn,de(Nn)),Nn["s-ol"].remove(),Nn["s-ol"]=void 0,Nn["s-sh"]=void 0,te=!0),Ot&&N(Nn,Ot)}ne.$flags$&=-2},U=(ct,Ot,pn,xn,Nn,jn)=>{let _r,hr=ct["s-cr"]&&ct["s-cr"].parentNode||ct;for(hr.shadowRoot&&hr.tagName===fr&&(hr=hr.shadowRoot);Nn<=jn;++Nn)xn[Nn]&&(_r=Qe(null,pn,Nn,ct),_r&&(xn[Nn].$elm$=_r,vt(hr,_r,de(Ot))))},L=(ct,Ot,pn)=>{for(let xn=Ot;xn<=pn;++xn){const Nn=ct[xn];if(Nn){const jn=Nn.$elm$;He(Nn),jn&&(Lr=!0,jn["s-ol"]?jn["s-ol"].remove():N(jn,!0),jn.remove())}}},H=(ct,Ot,pn=!1)=>ct.$tag$===Ot.$tag$&&("slot"===ct.$tag$?ct.$name$===Ot.$name$:!!pn||ct.$key$===Ot.$key$),de=ct=>ct&&ct["s-ol"]||ct,Be=ct=>(ct["s-ol"]?ct["s-ol"]:ct).parentNode,Xe=(ct,Ot,pn=!1)=>{const xn=Ot.$elm$=ct.$elm$,Nn=ct.$children$,jn=Ot.$children$,hr=Ot.$tag$,_r=Ot.$text$;let Mr;null===_r?(Ie="svg"===hr||"foreignObject"!==hr&&Ie,"slot"!==hr||Er?Fn(ct,Ot,Ie):ct.$name$!==Ot.$name$&&(Ot.$elm$["s-sn"]=Ot.$name$||"",T(Ot.$elm$.parentElement)),null!==Nn&&null!==jn?((ct,Ot,pn,xn,Nn=!1)=>{let ns,Ms,jn=0,hr=0,_r=0,Mr=0,Or=Ot.length-1,si=Ot[0],Qr=Ot[Or],yi=xn.length-1,Si=xn[0],Vi=xn[yi];for(;jn<=Or&&hr<=yi;)if(null==si)si=Ot[++jn];else if(null==Qr)Qr=Ot[--Or];else if(null==Si)Si=xn[++hr];else if(null==Vi)Vi=xn[--yi];else if(H(si,Si,Nn))Xe(si,Si,Nn),si=Ot[++jn],Si=xn[++hr];else if(H(Qr,Vi,Nn))Xe(Qr,Vi,Nn),Qr=Ot[--Or],Vi=xn[--yi];else if(H(si,Vi,Nn))("slot"===si.$tag$||"slot"===Vi.$tag$)&&N(si.$elm$.parentNode,!1),Xe(si,Vi,Nn),vt(ct,si.$elm$,Qr.$elm$.nextSibling),si=Ot[++jn],Vi=xn[--yi];else if(H(Qr,Si,Nn))("slot"===si.$tag$||"slot"===Vi.$tag$)&&N(Qr.$elm$.parentNode,!1),Xe(Qr,Si,Nn),vt(ct,Qr.$elm$,si.$elm$),Qr=Ot[--Or],Si=xn[++hr];else{for(_r=-1,Mr=jn;Mr<=Or;++Mr)if(Ot[Mr]&&null!==Ot[Mr].$key$&&Ot[Mr].$key$===Si.$key$){_r=Mr;break}_r>=0?(Ms=Ot[_r],Ms.$tag$!==Si.$tag$?ns=Qe(Ot&&Ot[hr],pn,_r,ct):(Xe(Ms,Si,Nn),Ot[_r]=void 0,ns=Ms.$elm$),Si=xn[++hr]):(ns=Qe(Ot&&Ot[hr],pn,hr,ct),Si=xn[++hr]),ns&&vt(Be(si.$elm$),ns,de(si.$elm$))}jn>Or?U(ct,null==xn[yi+1]?null:xn[yi+1].$elm$,pn,xn,hr,yi):hr>yi&&L(Ot,jn,Or)})(xn,Nn,Ot,jn,pn):null!==jn?(null!==ct.$text$&&(xn.textContent=""),U(xn,null,Ot,jn,0,jn.length-1)):null!==Nn&&L(Nn,0,Nn.length-1),Ie&&"svg"===hr&&(Ie=!1)):(Mr=xn["s-cr"])?Mr.parentNode.textContent=_r:ct.$text$!==_r&&(xn.data=_r)},wt=ct=>{const Ot=ct.childNodes;for(const pn of Ot)if(1===pn.nodeType){if(pn["s-sr"]){const xn=pn["s-sn"];pn.hidden=!1;for(const Nn of Ot)if(Nn!==pn)if(Nn["s-hn"]!==pn["s-hn"]||""!==xn){if(1===Nn.nodeType&&(xn===Nn.getAttribute("slot")||xn===Nn["s-sn"])||3===Nn.nodeType&&xn===Nn["s-sn"]){pn.hidden=!0;break}}else if(1===Nn.nodeType||3===Nn.nodeType&&""!==Nn.textContent.trim()){pn.hidden=!0;break}}wt(pn)}},Nt=[],rn=ct=>{let Ot,pn,xn;for(const Nn of ct.childNodes){if(Nn["s-sr"]&&(Ot=Nn["s-cr"])&&Ot.parentNode){pn=Ot.parentNode.childNodes;const jn=Nn["s-sn"];for(xn=pn.length-1;xn>=0;xn--)if(Ot=pn[xn],!(Ot["s-cn"]||Ot["s-nr"]||Ot["s-hn"]===Nn["s-hn"]||Ot["s-sh"]&&Ot["s-sh"]===Nn["s-hn"]))if(Ge(Ot,jn)){let hr=Nt.find(_r=>_r.$nodeToRelocate$===Ot);Lr=!0,Ot["s-sn"]=Ot["s-sn"]||jn,hr?(hr.$nodeToRelocate$["s-sh"]=Nn["s-hn"],hr.$slotRefNode$=Nn):(Ot["s-sh"]=Nn["s-hn"],Nt.push({$slotRefNode$:Nn,$nodeToRelocate$:Ot})),Ot["s-sr"]&&Nt.map(_r=>{Ge(_r.$nodeToRelocate$,Ot["s-sn"])&&(hr=Nt.find(Mr=>Mr.$nodeToRelocate$===Ot),hr&&!_r.$slotRefNode$&&(_r.$slotRefNode$=hr.$slotRefNode$))})}else Nt.some(hr=>hr.$nodeToRelocate$===Ot)||Nt.push({$nodeToRelocate$:Ot})}1===Nn.nodeType&&rn(Nn)}},Ge=(ct,Ot)=>1===ct.nodeType?null===ct.getAttribute("slot")&&""===Ot||ct.getAttribute("slot")===Ot:ct["s-sn"]===Ot||""===Ot,He=ct=>{ct.$attrs$&&ct.$attrs$.ref&&ct.$attrs$.ref(null),ct.$children$&&ct.$children$.map(He)},vt=(ct,Ot,pn)=>{const xn=null==ct?void 0:ct.insertBefore(Ot,pn);return Dt(Ot,ct),xn},tt=ct=>{const Ot=[];return ct&&Ot.push(...ct["s-scs"]||[],ct["s-si"],ct["s-sc"],...tt(ct.parentElement)),Ot},Dt=(ct,Ot,pn=!1)=>{var xn;if(ct&&Ot&&1===ct.nodeType){const Nn=new Set(tt(Ot).filter(Boolean));if(Nn.size&&(null==(xn=ct.classList)||xn.add(...ct["s-scs"]=[...Nn]),ct["s-ol"]||pn))for(const jn of Array.from(ct.childNodes))Dt(jn,ct,!0)}},$n=(ct,Ot)=>{Ot&&!ct.$onRenderResolve$&&Ot["s-p"]&&Ot["s-p"].push(new Promise(pn=>ct.$onRenderResolve$=pn))},lr=(ct,Ot)=>{if(ct.$flags$|=16,!(4&ct.$flags$))return $n(ct,ct.$ancestorComponent$),je(()=>Ar(ct,Ot));ct.$flags$|=512},Ar=(ct,Ot)=>{const Nn=ct.$lazyInstance$;if(!Nn)throw new Error(`Can't render component <${ct.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let jn;return Ot&&(ct.$flags$|=256,ct.$queuedListeners$&&(ct.$queuedListeners$.map(([hr,_r])=>Ls(Nn,hr,_r)),ct.$queuedListeners$=void 0),jn=Ls(Nn,"componentWillLoad")),jn=Hi(jn,()=>Ls(Nn,"componentWillRender")),Hi(jn,()=>Xs(ct,Nn,Ot))},Hi=(ct,Ot)=>Ki(ct)?ct.then(Ot).catch(pn=>{console.error(pn),Ot()}):Ot(),Ki=ct=>ct instanceof Promise||ct&&ct.then&&"function"==typeof ct.then,Xs=function(){var ct=(0,F.A)(function*(Ot,pn,xn){var Nn;const jn=Ot.$hostElement$,_r=jn["s-rc"];xn&&(ct=>{const Ot=ct.$cmpMeta$,pn=ct.$hostElement$,xn=Ot.$flags$,jn=Br(pn.shadowRoot?pn.shadowRoot:pn.getRootNode(),Ot,ct.$modeName$);10&xn&&(pn["s-sc"]=jn,pn.classList.add(jn+"-h"),2&xn&&pn.classList.add(jn+"-s"))})(Ot);Os(Ot,pn,jn,xn),_r&&(_r.map(Or=>Or()),jn["s-rc"]=void 0);{const Or=null!=(Nn=jn["s-p"])?Nn:[],si=()=>wi(Ot);0===Or.length?si():(Promise.all(Or).then(si),Ot.$flags$|=4,Or.length=0)}});return function(pn,xn,Nn){return ct.apply(this,arguments)}}(),Os=(ct,Ot,pn,xn)=>{try{Ot=Ot.render&&Ot.render(),ct.$flags$&=-17,ct.$flags$|=2,((ct,Ot,pn=!1)=>{var xn,Nn,jn,hr,_r;const Mr=ct.$hostElement$,Or=ct.$cmpMeta$,si=ct.$vnode$||Jn(null,null),Qr=(ct=>ct&&ct.$tag$===Rn)(Ot)?Ot:An(null,null,Ot);if(fr=Mr.tagName,Or.$attrsToReflect$&&(Qr.$attrs$=Qr.$attrs$||{},Or.$attrsToReflect$.map(([yi,Si])=>Qr.$attrs$[Si]=Mr[yi])),pn&&Qr.$attrs$)for(const yi of Object.keys(Qr.$attrs$))Mr.hasAttribute(yi)&&!["key","ref","style","class"].includes(yi)&&(Qr.$attrs$[yi]=Mr[yi]);if(Qr.$tag$=null,Qr.$flags$|=4,ct.$vnode$=Qr,Qr.$elm$=si.$elm$=Mr.shadowRoot||Mr,Wn=Mr["s-sc"],Er=!!(1&Or.$flags$),yr=Mr["s-cr"],Lr=!1,Xe(si,Qr,pn),ne.$flags$|=1,te){rn(Qr.$elm$);for(const yi of Nt){const Si=yi.$nodeToRelocate$;if(!Si["s-ol"]){const Vi=K.createTextNode("");Vi["s-nr"]=Si,vt(Si.parentNode,Si["s-ol"]=Vi,Si)}}for(const yi of Nt){const Si=yi.$nodeToRelocate$,Vi=yi.$slotRefNode$;if(Vi){const ns=Vi.parentNode;let Ms=Vi.nextSibling;if(Ms&&1===Ms.nodeType){let qi=null==(xn=Si["s-ol"])?void 0:xn.previousSibling;for(;qi;){let Js=null!=(Nn=qi["s-nr"])?Nn:null;if(Js&&Js["s-sn"]===Si["s-sn"]&&ns===Js.parentNode){for(Js=Js.nextSibling;Js===Si||null!=Js&&Js["s-sr"];)Js=null==Js?void 0:Js.nextSibling;if(!Js||!Js["s-nr"]){Ms=Js;break}}qi=qi.previousSibling}}(!Ms&&ns!==Si.parentNode||Si.nextSibling!==Ms)&&Si!==Ms&&(vt(ns,Si,Ms),1===Si.nodeType&&(Si.hidden=null!=(jn=Si["s-ih"])&&jn)),Si&&"function"==typeof Vi["s-rf"]&&Vi["s-rf"](Si)}else 1===Si.nodeType&&(pn&&(Si["s-ih"]=null!=(hr=Si.hidden)&&hr),Si.hidden=!0)}}if(Lr&&wt(Qr.$elm$),ne.$flags$&=-2,Nt.length=0,2&Or.$flags$)for(const yi of Qr.$elm$.childNodes)yi["s-hn"]!==fr&&!yi["s-sh"]&&(pn&&null==yi["s-ih"]&&(yi["s-ih"]=null!=(_r=yi.hidden)&&_r),yi.hidden=!0);yr=void 0})(ct,Ot,xn)}catch(Nn){I(Nn,ct.$hostElement$)}return null},wi=ct=>{const pn=ct.$hostElement$,Nn=ct.$lazyInstance$,jn=ct.$ancestorComponent$;Ls(Nn,"componentDidRender"),64&ct.$flags$?Ls(Nn,"componentDidUpdate"):(ct.$flags$|=64,so(pn),Ls(Nn,"componentDidLoad"),ct.$onReadyResolve$(pn),jn||co()),ct.$onInstanceResolve$(pn),ct.$onRenderResolve$&&(ct.$onRenderResolve$(),ct.$onRenderResolve$=void 0),512&ct.$flags$&&z(()=>lr(ct,!1)),ct.$flags$&=-517},ws=ct=>{{const Ot=M(ct),pn=Ot.$hostElement$.isConnected;return pn&&2==(18&Ot.$flags$)&&lr(Ot,!1),pn}},co=ct=>{so(K.documentElement),z(()=>ir(V,"appload",{detail:{namespace:"ionic"}}))},Ls=(ct,Ot,pn)=>{if(ct&&ct[Ot])try{return ct[Ot](pn)}catch(xn){I(xn)}},so=ct=>ct.classList.add(("hydrated","hydrated")),ca=(ct,Ot,pn)=>{var xn,Nn;const jn=ct.prototype;if(Ot.$members$||Ot.$watchers$||ct.watchers){ct.watchers&&!Ot.$watchers$&&(Ot.$watchers$=ct.watchers);const hr=Object.entries(null!=(xn=Ot.$members$)?xn:{});if(hr.map(([_r,[Mr]])=>{31&Mr||2&pn&&32&Mr?Object.defineProperty(jn,_r,{get(){return((ct,Ot)=>M(this).$instanceValues$.get(Ot))(0,_r)},set(Or){((ct,Ot,pn,xn)=>{const Nn=M(ct);if(!Nn)throw new Error(`Couldn't find host element for "${xn.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const jn=Nn.$hostElement$,hr=Nn.$instanceValues$.get(Ot),_r=Nn.$flags$,Mr=Nn.$lazyInstance$;pn=((ct,Ot)=>null==ct||Ut(ct)?ct:4&Ot?"false"!==ct&&(""===ct||!!ct):2&Ot?parseFloat(ct):1&Ot?String(ct):ct)(pn,xn.$members$[Ot][0]);const Or=Number.isNaN(hr)&&Number.isNaN(pn);if((!(8&_r)||void 0===hr)&&pn!==hr&&!Or&&(Nn.$instanceValues$.set(Ot,pn),Mr)){if(xn.$watchers$&&128&_r){const Qr=xn.$watchers$[Ot];Qr&&Qr.map(yi=>{try{Mr[yi](pn,hr,Ot)}catch(Si){I(Si,jn)}})}2==(18&_r)&&lr(Nn,!1)}})(this,_r,Or,Ot)},configurable:!0,enumerable:!0}):1&pn&&64&Mr&&Object.defineProperty(jn,_r,{value(...Or){var si;const Qr=M(this);return null==(si=null==Qr?void 0:Qr.$onInstancePromise$)?void 0:si.then(()=>{var yi;return null==(yi=Qr.$lazyInstance$)?void 0:yi[_r](...Or)})}})}),1&pn){const _r=new Map;jn.attributeChangedCallback=function(Mr,Or,si){ne.jmp(()=>{var Qr;const yi=_r.get(Mr);if(this.hasOwnProperty(yi))si=this[yi],delete this[yi];else{if(jn.hasOwnProperty(yi)&&"number"==typeof this[yi]&&this[yi]==si)return;if(null==yi){const Si=M(this),Vi=null==Si?void 0:Si.$flags$;if(Vi&&!(8&Vi)&&128&Vi&&si!==Or){const ns=Si.$lazyInstance$,Ms=null==(Qr=Ot.$watchers$)?void 0:Qr[Mr];null==Ms||Ms.forEach(qi=>{null!=ns[qi]&&ns[qi].call(ns,si,Or,Mr)})}return}}this[yi]=(null!==si||"boolean"!=typeof this[yi])&&si})},ct.observedAttributes=Array.from(new Set([...Object.keys(null!=(Nn=Ot.$watchers$)?Nn:{}),...hr.filter(([Mr,Or])=>15&Or[0]).map(([Mr,Or])=>{var si;const Qr=Or[1]||Mr;return _r.set(Qr,Mr),512&Or[0]&&(null==(si=Ot.$attrsToReflect$)||si.push([Mr,Qr])),Qr})]))}}return ct},ta=function(){var ct=(0,F.A)(function*(Ot,pn,xn,Nn){let jn;if(!(32&pn.$flags$)){if(pn.$flags$|=32,xn.$lazyBundleId$){const Or=((ct,Ot,pn)=>{const xn=ct.$tagName$.replace(/-/g,"_"),Nn=ct.$lazyBundleId$;if(!Nn)return;const jn=D.get(Nn);return jn?jn[xn]:Ve(8996)(`./${Nn}.entry.js`).then(hr=>(D.set(Nn,hr),hr[xn]),I)})(xn);if(Or&&"then"in Or){const Qr=()=>{};jn=yield Or,Qr()}else jn=Or;if(!jn)throw new Error(`Constructor for "${xn.$tagName$}#${pn.$modeName$}" was not found`);jn.isProxied||(xn.$watchers$=jn.watchers,ca(jn,xn,2),jn.isProxied=!0);const si=()=>{};pn.$flags$|=8;try{new jn(pn)}catch(Qr){I(Qr)}pn.$flags$&=-9,pn.$flags$|=128,si(),qo(pn.$lazyInstance$)}else jn=Ot.constructor,customElements.whenDefined(Ot.localName).then(()=>pn.$flags$|=128);if(jn&&jn.style){let Or;"string"==typeof jn.style?Or=jn.style:"string"!=typeof jn.style&&(pn.$modeName$=(ct=>h.map(Ot=>Ot(ct)).find(Ot=>!!Ot))(Ot),pn.$modeName$&&(Or=jn.style[pn.$modeName$]));const si=un(xn,pn.$modeName$);if(!f.has(si)){const Qr=()=>{};Pr(si,Or,!!(1&xn.$flags$)),Qr()}}}const hr=pn.$ancestorComponent$,_r=()=>lr(pn,!0);hr&&hr["s-rc"]?hr["s-rc"].push(_r):_r()});return function(pn,xn,Nn,jn){return ct.apply(this,arguments)}}(),qo=ct=>{Ls(ct,"connectedCallback")},mo=ct=>{const Ot=ct["s-cr"]=K.createComment("");Ot["s-cn"]=!0,vt(ct,Ot,ct.firstChild)},Ta=ct=>{Ls(ct,"disconnectedCallback")},To=function(){var ct=(0,F.A)(function*(Ot){if(!(1&ne.$flags$)){const pn=M(Ot);pn.$rmListeners$&&(pn.$rmListeners$.map(xn=>xn()),pn.$rmListeners$=void 0),null!=pn&&pn.$lazyInstance$?Ta(pn.$lazyInstance$):null!=pn&&pn.$onReadyPromise$&&pn.$onReadyPromise$.then(()=>Ta(pn.$lazyInstance$))}});return function(pn){return ct.apply(this,arguments)}}(),Va=ct=>{const Ot=ct.cloneNode;ct.cloneNode=function(pn){const xn=this,Nn=xn.shadowRoot&&true,jn=Ot.call(xn,!!Nn&&pn);if(!Nn&&pn){let _r,Mr,hr=0;const Or=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;hr<xn.childNodes.length;hr++)_r=xn.childNodes[hr]["s-nr"],Mr=Or.every(si=>!xn.childNodes[hr][si]),_r&&(jn.__appendChild?jn.__appendChild(_r.cloneNode(!0)):jn.appendChild(_r.cloneNode(!0))),Mr&&jn.appendChild(xn.childNodes[hr].cloneNode(!0))}return jn}},ke=ct=>{ct.__appendChild=ct.appendChild,ct.appendChild=function(Ot){const pn=Ot["s-sn"]=Ma(Ot),xn=Ko(this.childNodes,pn,this.tagName);if(xn){const Nn=ka(xn,pn),jn=Nn[Nn.length-1],hr=vt(jn.parentNode,Ot,jn.nextSibling);return wt(this),hr}return this.__appendChild(Ot)}},mt=ct=>{ct.__removeChild=ct.removeChild,ct.removeChild=function(Ot){if(Ot&&typeof Ot["s-sn"]<"u"){const pn=Ko(this.childNodes,Ot["s-sn"],this.tagName);if(pn){const Nn=ka(pn,Ot["s-sn"]).find(jn=>jn===Ot);if(Nn)return Nn.remove(),void wt(this)}}return this.__removeChild(Ot)}},Vt=ct=>{const Ot=ct.prepend;ct.prepend=function(...pn){pn.forEach(xn=>{"string"==typeof xn&&(xn=this.ownerDocument.createTextNode(xn));const Nn=xn["s-sn"]=Ma(xn),jn=Ko(this.childNodes,Nn,this.tagName);if(jn){const hr=document.createTextNode("");hr["s-nr"]=xn,jn["s-cr"].parentNode.__appendChild(hr),xn["s-ol"]=hr;const Mr=ka(jn,Nn)[0];return vt(Mr.parentNode,xn,Mr.nextSibling)}return 1===xn.nodeType&&xn.getAttribute("slot")&&(xn.hidden=!0),Ot.call(this,xn)})}},We=ct=>{ct.append=function(...Ot){Ot.forEach(pn=>{"string"==typeof pn&&(pn=this.ownerDocument.createTextNode(pn)),this.appendChild(pn)})}},Wt=ct=>{const Ot=ct.insertAdjacentHTML;ct.insertAdjacentHTML=function(pn,xn){if("afterbegin"!==pn&&"beforeend"!==pn)return Ot.call(this,pn,xn);const Nn=this.ownerDocument.createElement("_");let jn;if(Nn.innerHTML=xn,"afterbegin"===pn)for(;jn=Nn.firstChild;)this.prepend(jn);else if("beforeend"===pn)for(;jn=Nn.firstChild;)this.append(jn)}},Ln=ct=>{ct.insertAdjacentText=function(Ot,pn){this.insertAdjacentHTML(Ot,pn)}},fs=ct=>{const Ot=ct.insertAdjacentElement;ct.insertAdjacentElement=function(pn,xn){return"afterbegin"!==pn&&"beforeend"!==pn?Ot.call(this,pn,xn):"afterbegin"===pn?(this.prepend(xn),xn):("beforeend"===pn&&this.append(xn),xn)}},qs=ct=>{const Ot=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(ct,"__textContent",Ot),Object.defineProperty(ct,"textContent",{get(){return" "+Ga(this.childNodes).map(Nn=>{var jn,hr;const _r=[];let Mr=Nn.nextSibling;for(;Mr&&Mr["s-sn"]===Nn["s-sn"];)(3===Mr.nodeType||1===Mr.nodeType)&&_r.push(null!=(hr=null==(jn=Mr.textContent)?void 0:jn.trim())?hr:""),Mr=Mr.nextSibling;return _r.filter(Or=>""!==Or).join(" ")}).filter(Nn=>""!==Nn).join(" ")+" "},set(pn){Ga(this.childNodes).forEach(Nn=>{let jn=Nn.nextSibling;for(;jn&&jn["s-sn"]===Nn["s-sn"];){const hr=jn;jn=jn.nextSibling,hr.remove()}if(""===Nn["s-sn"]){const hr=this.ownerDocument.createTextNode(pn);hr["s-sn"]="",vt(Nn.parentElement,hr,Nn.nextSibling)}else Nn.remove()})}})},na=(ct,Ot)=>{class pn extends Array{item(Nn){return this[Nn]}}if(8&Ot.$flags$){const xn=ct.__lookupGetter__("childNodes");Object.defineProperty(ct,"children",{get(){return this.childNodes.map(Nn=>1===Nn.nodeType)}}),Object.defineProperty(ct,"childElementCount",{get:()=>ct.children.length}),Object.defineProperty(ct,"childNodes",{get(){const Nn=xn.call(this);if(!(1&ne.$flags$)&&2&M(this).$flags$){const jn=new pn;for(let hr=0;hr<Nn.length;hr++){const _r=Nn[hr]["s-nr"];_r&&jn.push(_r)}return jn}return pn.from(Nn)}})}},Ga=ct=>{const Ot=[];for(const pn of Array.from(ct))pn["s-sr"]&&Ot.push(pn),Ot.push(...Ga(pn.childNodes));return Ot},Ma=ct=>ct["s-sn"]||1===ct.nodeType&&ct.getAttribute("slot")||"",Ko=(ct,Ot,pn)=>{let Nn,xn=0;for(;xn<ct.length;xn++)if(Nn=ct[xn],Nn["s-sr"]&&Nn["s-sn"]===Ot&&Nn["s-hn"]===pn||(Nn=Ko(Nn.childNodes,Ot,pn),Nn))return Nn;return null},ka=(ct,Ot)=>{const pn=[ct];for(;(ct=ct.nextSibling)&&ct["s-sn"]===Ot;)pn.push(ct);return pn},Qa=(ct,Ot={})=>{var pn;const Nn=[],jn=Ot.exclude||[],hr=V.customElements,_r=K.head,Mr=_r.querySelector("meta[charset]"),Or=K.createElement("style"),si=[],Qr=K.querySelectorAll(`[${S}]`);let yi,Si=!0,Vi=0;for(Object.assign(ne,Ot),ne.$resourcesUrl$=new URL(Ot.resourcesUrl||"./",K.baseURI).href,ne.$flags$|=2;Vi<Qr.length;Vi++)Pr(Qr[Vi].getAttribute(S),Tn(Qr[Vi].innerHTML),!0);let ns=!1;if(ct.map(Ms=>{Ms[1].map(qi=>{var Js;const Vr={$flags$:qi[0],$tagName$:qi[1],$members$:qi[2],$listeners$:qi[3]};4&Vr.$flags$&&(ns=!0),Vr.$members$=qi[2],Vr.$listeners$=qi[3],Vr.$attrsToReflect$=[],Vr.$watchers$=null!=(Js=qi[4])?Js:{};const da=Vr.$tagName$,Na=class extends HTMLElement{constructor(uo){if(super(uo),this.hasRegisteredEventListeners=!1,((ct,Ot)=>{const pn={$flags$:0,$hostElement$:ct,$cmpMeta$:Ot,$instanceValues$:new Map};pn.$onInstancePromise$=new Promise(xn=>pn.$onInstanceResolve$=xn),pn.$onReadyPromise$=new Promise(xn=>pn.$onReadyResolve$=xn),ct["s-p"]=[],ct["s-rc"]=[],Z.set(ct,pn)})(uo=this,Vr),1&Vr.$flags$)if(uo.shadowRoot){if("open"!==uo.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Vr.$tagName$}! Mode is set to ${uo.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else uo.attachShadow({mode:"open",delegatesFocus:!!(16&Vr.$flags$)})}connectedCallback(){const uo=M(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,Bl(this,uo,Vr.$listeners$)),yi&&(clearTimeout(yi),yi=null),Si?si.push(this):ne.jmp(()=>(ct=>{if(!(1&ne.$flags$)){const Ot=M(ct),pn=Ot.$cmpMeta$,xn=()=>{};if(1&Ot.$flags$)Bl(ct,Ot,pn.$listeners$),null!=Ot&&Ot.$lazyInstance$?qo(Ot.$lazyInstance$):null!=Ot&&Ot.$onReadyPromise$&&Ot.$onReadyPromise$.then(()=>qo(Ot.$lazyInstance$));else{let Nn;if(Ot.$flags$|=1,Nn=ct.getAttribute(E),Nn){if(1&pn.$flags$){const jn=Br(ct.shadowRoot,pn,ct.getAttribute("s-mode"));ct.classList.remove(jn+"-h",jn+"-s")}((ct,Ot,pn,xn)=>{const jn=ct.shadowRoot,hr=[],Mr=jn?[]:null,Or=xn.$vnode$=Jn(Ot,null);ne.$orgLocNodes$||pt(K.body,ne.$orgLocNodes$=new Map),ct[E]=pn,ct.removeAttribute(E),Pn(Or,hr,[],Mr,ct,ct,pn),hr.map(si=>{const Qr=si.$hostId$+"."+si.$nodeId$,yi=ne.$orgLocNodes$.get(Qr),Si=si.$elm$;yi&&""===yi["s-en"]&&yi.parentNode.insertBefore(Si,yi.nextSibling),jn||(Si["s-hn"]=Ot,yi&&(Si["s-ol"]=yi,Si["s-ol"]["s-nr"]=Si)),ne.$orgLocNodes$.delete(Qr)}),jn&&Mr.map(si=>{si&&jn.appendChild(si)})})(ct,pn.$tagName$,Nn,Ot)}Nn||12&pn.$flags$&&mo(ct);{let jn=ct;for(;jn=jn.parentNode||jn.host;)if(1===jn.nodeType&&jn.hasAttribute("s-id")&&jn["s-p"]||jn["s-p"]){$n(Ot,Ot.$ancestorComponent$=jn);break}}pn.$members$&&Object.entries(pn.$members$).map(([jn,[hr]])=>{if(31&hr&&ct.hasOwnProperty(jn)){const _r=ct[jn];delete ct[jn],ct[jn]=_r}}),ta(ct,Ot,pn)}xn()}})(this))}disconnectedCallback(){ne.jmp(()=>To(this))}componentOnReady(){return M(this).$onReadyPromise$}};2&Vr.$flags$&&((ct,Ot)=>{Va(ct),ke(ct),We(ct),Vt(ct),fs(ct),Wt(ct),Ln(ct),qs(ct),na(ct,Ot),mt(ct)})(Na.prototype,Vr),Vr.$lazyBundleId$=Ms[0],!jn.includes(da)&&!hr.get(da)&&(Nn.push(da),hr.define(da,ca(Na,Vr,1)))})}),Nn.length>0&&(ns&&(Or.textContent+=J),Or.textContent+=Nn.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Or.innerHTML.length)){Or.setAttribute("data-styles","");const Ms=null!=(pn=ne.$nonce$)?pn:Xt(K);null!=Ms&&Or.setAttribute("nonce",Ms),_r.insertBefore(Or,Mr?Mr.nextSibling:_r.firstChild)}Si=!1,si.length?si.map(Ms=>Ms.connectedCallback()):ne.jmp(()=>yi=setTimeout(co,30))},Bl=(ct,Ot,pn,xn)=>{pn&&pn.map(([Nn,jn,hr])=>{const _r=Vo(ct,Nn),Mr=Ro(Ot,hr),Or=oo(Nn);ne.ael(_r,jn,Mr,Or),(Ot.$rmListeners$=Ot.$rmListeners$||[]).push(()=>ne.rel(_r,jn,Mr,Or))})},Ro=(ct,Ot)=>pn=>{var xn;try{256&ct.$flags$?null==(xn=ct.$lazyInstance$)||xn[Ot](pn):(ct.$queuedListeners$=ct.$queuedListeners$||[]).push([Ot,pn])}catch(Nn){I(Nn)}},Vo=(ct,Ot)=>4&Ot?K:8&Ot?V:16&Ot?K.body:ct,oo=ct=>Se?{passive:!!(1&ct),capture:!!(2&ct)}:!!(2&ct)},1331:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{b:()=>M,c:()=>C,d:()=>b,e:()=>we,g:()=>ge,l:()=>ne,s:()=>Se,t:()=>m,w:()=>Y});var F=Ve(467),j=Ve(4921),It=Ve(8393),sn=Ve(4929),a=Ve(4920);const M="ionViewWillLeave",C="ionViewDidLeave",b="ionViewWillUnload",w=re=>{re.tabIndex=-1,re.focus()},I=re=>null!==re.offsetParent,d="ion-last-focus",p_saveViewFocus=fe=>{if(j.c.get("focusManagerPriority",!1)){const it=document.activeElement;null!==it&&null!=fe&&fe.contains(it)&&it.setAttribute(d,"true")}},p_setViewFocus=fe=>{const Ce=j.c.get("focusManagerPriority",!1);if(Array.isArray(Ce)&&!fe.contains(document.activeElement)){const it=fe.querySelector(`[${d}]`);if(it&&I(it))return void w(it);for(const le of Ce)switch(le){case"content":const z=fe.querySelector('main, [role="main"]');if(z&&I(z))return void w(z);break;case"heading":const ye=fe.querySelector('h1, [role="heading"][aria-level="1"]');if(ye&&I(ye))return void w(ye);break;case"banner":const je=fe.querySelector('header, [role="banner"]');if(je&&I(je))return void w(je);break;default:(0,sn.p)(`Unrecognized focus manager priority value ${le}`)}w(fe)}},m=re=>new Promise((Q,fe)=>{(0,It.w)(()=>{g(re),x(re).then(Ce=>{Ce.animation&&Ce.animation.destroy(),E(re),Q(Ce)},Ce=>{E(re),fe(Ce)})})}),g=re=>{const Q=re.enteringEl,fe=re.leavingEl;p_saveViewFocus(fe),oe(Q,fe,re.direction),re.showGoBack?Q.classList.add("can-go-back"):Q.classList.remove("can-go-back"),Se(Q,!1),Q.style.setProperty("pointer-events","none"),fe&&(Se(fe,!1),fe.style.setProperty("pointer-events","none"))},x=function(){var re=(0,F.A)(function*(Q){const fe=yield S(Q);return fe&&It.B.isBrowser?k(fe,Q):q(Q)});return function(fe){return re.apply(this,arguments)}}(),E=re=>{const Q=re.enteringEl,fe=re.leavingEl;Q.classList.remove("ion-page-invisible"),Q.style.removeProperty("pointer-events"),void 0!==fe&&(fe.classList.remove("ion-page-invisible"),fe.style.removeProperty("pointer-events")),p_setViewFocus(Q)},S=function(){var re=(0,F.A)(function*(Q){return Q.leavingEl&&Q.animated&&0!==Q.duration?Q.animationBuilder?Q.animationBuilder:"ios"===Q.mode?(yield Promise.resolve().then(Ve.bind(Ve,9856))).iosTransitionAnimation:(yield Promise.resolve().then(Ve.bind(Ve,361))).mdTransitionAnimation:void 0});return function(fe){return re.apply(this,arguments)}}(),k=function(){var re=(0,F.A)(function*(Q,fe){yield J(fe,!0);const Ce=Q(fe.baseEl,fe);K(fe.enteringEl,fe.leavingEl);const it=yield V(Ce,fe);return fe.progressCallback&&fe.progressCallback(void 0),it&&$(fe.enteringEl,fe.leavingEl),{hasCompleted:it,animation:Ce}});return function(fe,Ce){return re.apply(this,arguments)}}(),q=function(){var re=(0,F.A)(function*(Q){const fe=Q.enteringEl,Ce=Q.leavingEl,it=j.c.get("focusManagerPriority",!1);return yield J(Q,it),K(fe,Ce),$(fe,Ce),{hasCompleted:!0}});return function(fe){return re.apply(this,arguments)}}(),J=function(){var re=(0,F.A)(function*(Q,fe){(void 0!==Q.deepWait?Q.deepWait:fe)&&(yield Promise.all([we(Q.enteringEl),we(Q.leavingEl)])),yield G(Q.viewIsReady,Q.enteringEl)});return function(fe,Ce){return re.apply(this,arguments)}}(),G=function(){var re=(0,F.A)(function*(Q,fe){Q&&(yield Q(fe))});return function(fe,Ce){return re.apply(this,arguments)}}(),V=(re,Q)=>{const fe=Q.progressCallback,Ce=new Promise(it=>{re.onFinish(le=>it(1===le))});return fe?(re.progressStart(!0),fe(re)):re.play(),Ce},K=(re,Q)=>{ne(Q,M),ne(re,"ionViewWillEnter")},$=(re,Q)=>{ne(re,"ionViewDidEnter"),ne(Q,C)},ne=(re,Q)=>{if(re){const fe=new CustomEvent(Q,{bubbles:!1,cancelable:!1});re.dispatchEvent(fe)}},Y=()=>new Promise(re=>(0,a.r)(()=>(0,a.r)(()=>re()))),we=function(){var re=(0,F.A)(function*(Q){const fe=Q;if(fe){if(null!=fe.componentOnReady){if(null!=(yield fe.componentOnReady()))return}else if(null!=fe.__registerHost)return void(yield new Promise(it=>(0,a.r)(it)));yield Promise.all(Array.from(fe.children).map(we))}});return function(fe){return re.apply(this,arguments)}}(),Se=(re,Q)=>{Q?(re.setAttribute("aria-hidden","true"),re.classList.add("ion-page-hidden")):(re.hidden=!1,re.removeAttribute("aria-hidden"),re.classList.remove("ion-page-hidden"))},oe=(re,Q,fe)=>{void 0!==re&&(re.style.zIndex="back"===fe?"99":"101"),void 0!==Q&&(Q.style.zIndex="100")},ge=re=>re.classList.contains("ion-page")?re:re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||re},4929:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{a:()=>j,b:()=>It,p:()=>F});const F=(sn,...a)=>console.warn(`[Ionic Warning]: ${sn}`,...a),j=(sn,...a)=>console.error(`[Ionic Error]: ${sn}`,...a),It=(sn,...a)=>console.error(`<${sn.tagName.toLowerCase()}> must be used inside ${a.join(" or ")}.`)},8476:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{d:()=>j,w:()=>F});const F=typeof window<"u"?window:void 0,j=typeof document<"u"?document:void 0},617:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{FJ:()=>b.l,JI:()=>F.c,NC:()=>It.iosTransitionAnimation,OZ:()=>b.m,QX:()=>M.s,TN:()=>b.a,V5:()=>sn.mdTransitionAnimation,Vk:()=>M.I,mF:()=>b.c,sE:()=>a.g});var F=Ve(9986),It=(Ve(1331),Ve(9856)),sn=Ve(361),a=Ve(3351),M=(Ve(8607),Ve(4921),Ve(464)),b=(Ve(6073),Ve(1070));Ve(8476),Ve(8393),Ve(1970),Ve(8669)},4921:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{a:()=>w,b:()=>Se,c:()=>It,i:()=>oe});var F=Ve(8393);class j{constructor(){this.m=new Map}reset(re){this.m=new Map(Object.entries(re))}get(re,Q){const fe=this.m.get(re);return void 0!==fe?fe:Q}getBoolean(re,Q=!1){const fe=this.m.get(re);return void 0===fe?Q:"string"==typeof fe?"true"===fe:!!fe}getNumber(re,Q){const fe=parseFloat(this.m.get(re));return isNaN(fe)?void 0!==Q?Q:NaN:fe}set(re,Q){this.m.set(re,Q)}}const It=new j,M="ionic:",C="ionic-persist-config",w=(ge,re)=>("string"==typeof ge&&(re=ge,ge=void 0),(ge=>I(ge))(ge).includes(re)),I=(ge=window)=>{if(typeof ge>"u")return[];ge.Ionic=ge.Ionic||{};let re=ge.Ionic.platforms;return null==re&&(re=ge.Ionic.platforms=D(ge),re.forEach(Q=>ge.document.documentElement.classList.add(`plt-${Q}`))),re},D=ge=>{const re=It.get("platform");return Object.keys(Y).filter(Q=>{const fe=null==re?void 0:re[Q];return"function"==typeof fe?fe(ge):Y[Q](ge)})},f=ge=>!!($(ge,/iPad/i)||$(ge,/Macintosh/i)&&S(ge)),m=ge=>$(ge,/android|sink/i),S=ge=>ne(ge,"(any-pointer:coarse)"),q=ge=>J(ge)||G(ge),J=ge=>!!(ge.cordova||ge.phonegap||ge.PhoneGap),G=ge=>{const re=ge.Capacitor;return!(null==re||!re.isNative)},$=(ge,re)=>re.test(ge.navigator.userAgent),ne=(ge,re)=>{var Q;return null===(Q=ge.matchMedia)||void 0===Q?void 0:Q.call(ge,re).matches},Y={ipad:f,iphone:ge=>$(ge,/iPhone/i),ios:ge=>$(ge,/iPhone|iPod/i)||f(ge),android:m,phablet:ge=>{const re=ge.innerWidth,Q=ge.innerHeight,fe=Math.min(re,Q),Ce=Math.max(re,Q);return fe>390&&fe<520&&Ce>620&&Ce<800},tablet:ge=>{const re=ge.innerWidth,Q=ge.innerHeight,fe=Math.min(re,Q),Ce=Math.max(re,Q);return f(ge)||(ge=>m(ge)&&!$(ge,/mobile/i))(ge)||fe>460&&fe<820&&Ce>780&&Ce<1400},cordova:J,capacitor:G,electron:ge=>$(ge,/electron/i),pwa:ge=>{var re;return!!(null!==(re=ge.matchMedia)&&void 0!==re&&re.call(ge,"(display-mode: standalone)").matches||ge.navigator.standalone)},mobile:S,mobileweb:ge=>S(ge)&&!q(ge),desktop:ge=>!S(ge),hybrid:q};let we;const Se=ge=>ge&&(0,F.g)(ge)||we,oe=(ge={})=>{if(typeof window>"u")return;const re=window.document,Q=window,fe=Q.Ionic=Q.Ionic||{},Ce={};ge._ael&&(Ce.ael=ge._ael),ge._rel&&(Ce.rel=ge._rel),ge._ce&&(Ce.ce=ge._ce),(0,F.a)(Ce);const it=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ge=>{try{const re=ge.sessionStorage.getItem(C);return null!==re?JSON.parse(re):{}}catch{return{}}})(Q)),{persistConfig:!1}),fe.config),(ge=>{const re={};return ge.location.search.slice(1).split("&").map(Q=>Q.split("=")).map(([Q,fe])=>{try{return[decodeURIComponent(Q),decodeURIComponent(fe)]}catch{return["",""]}}).filter(([Q])=>((ge,re)=>ge.substr(0,re.length)===re)(Q,M)).map(([Q,fe])=>[Q.slice(6),fe]).forEach(([Q,fe])=>{re[Q]=fe}),re})(Q)),ge);It.reset(it),It.getBoolean("persistConfig")&&((ge,re)=>{try{ge.sessionStorage.setItem(C,JSON.stringify(re))}catch{return}})(Q,it),I(Q),fe.config=It,fe.mode=we=It.get("mode",re.documentElement.getAttribute("mode")||(w(Q,"ios")?"ios":"md")),It.set("mode",we),re.documentElement.setAttribute("mode",we),re.documentElement.classList.add(we),It.getBoolean("_testing")&&It.set("animated",!1);const le=ye=>{var je;return null===(je=ye.tagName)||void 0===je?void 0:je.startsWith("ION-")},z=ye=>["ios","md"].includes(ye);(0,F.c)(ye=>{for(;ye;){const je=ye.mode||ye.getAttribute("mode");if(je){if(z(je))return je;le(ye)&&console.warn('Invalid ionic mode: "'+je+'", expected: "ios" or "md"')}ye=ye.parentElement}return we})}},9856:(Rr,Un,Ve)=>{"use strict";Ve.r(Un),Ve.d(Un,{iosTransitionAnimation:()=>d,shadow:()=>M});var F=Ve(9986),j=Ve(1331);Ve(8476),Ve(4921),Ve(8393);const Z=h=>document.querySelector(`${h}.ion-cloned-element`),M=h=>h.shadowRoot||h,C=h=>{const p="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs"),m="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=p){const g=p.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=g?g.querySelector(m):null}return h.querySelector(m)},b=(h,p)=>{const m="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs");let g=[];if(null!=m){const x=m.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=x&&(g=x.querySelectorAll("ion-buttons"))}else g=h.querySelectorAll("ion-buttons");for(const x of g){const E=x.closest("ion-header"),S=E&&!E.classList.contains("header-collapse-condense-inactive"),k=x.querySelector("ion-back-button"),q=x.classList.contains("buttons-collapse");if(null!==k&&("start"===x.slot||""===x.slot)&&(q&&S&&p||!q))return k}return null},I=(h,p,m,g,x,E,S,k,q)=>{var J,G;const V=p?`calc(100% - ${x.right+4}px)`:x.left-4+"px",K=p?"right":"left",$=p?"left":"right",ne=p?"right":"left";let Y=1,we=1,Se=`scale(${we})`;const oe="scale(1)";if(E&&S){const Et=(null===(J=E.textContent)||void 0===J?void 0:J.trim())===(null===(G=k.textContent)||void 0===G?void 0:G.trim());Y=q.width/S.width,we=(q.height-f)/S.height,Se=Et?`scale(${Y}, ${we})`:`scale(${we})`}const re=M(g).querySelector("ion-icon").getBoundingClientRect(),Q=p?re.width/2-(re.right-x.right)+"px":x.left-re.width/2+"px",fe=p?`-${window.innerWidth-x.right}px`:`${x.left}px`,Ce=`${q.top}px`,it=`${x.top}px`,ye=m?[{offset:0,transform:`translate3d(${fe}, ${it}, 0)`},{offset:1,transform:`translate3d(${Q}, ${Ce}, 0)`}]:[{offset:0,transform:`translate3d(${Q}, ${Ce}, 0)`},{offset:1,transform:`translate3d(${fe}, ${it}, 0)`}],gt=m?[{offset:0,opacity:1,transform:oe},{offset:1,opacity:0,transform:Se}]:[{offset:0,opacity:0,transform:Se},{offset:1,opacity:1,transform:oe}],yt=m?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Ut=(0,F.c)(),Xt=(0,F.c)(),ft=(0,F.c)(),jt=Z("ion-back-button"),Lt=M(jt).querySelector(".button-text"),Bt=M(jt).querySelector("ion-icon");jt.text=g.text,jt.mode=g.mode,jt.icon=g.icon,jt.color=g.color,jt.disabled=g.disabled,jt.style.setProperty("display","block"),jt.style.setProperty("position","fixed"),Xt.addElement(Bt),Ut.addElement(Lt),ft.addElement(jt),ft.beforeStyles({position:"absolute",top:"0px",[ne]:"0px"}).beforeAddWrite(()=>{g.style.setProperty("display","none"),jt.style.setProperty(K,V)}).afterAddWrite(()=>{g.style.setProperty("display",""),jt.style.setProperty("display","none"),jt.style.removeProperty(K)}).keyframes(ye),Ut.beforeStyles({"transform-origin":`${K} top`}).keyframes(gt),Xt.beforeStyles({"transform-origin":`${$} center`}).keyframes(yt),h.addAnimation([Ut,Xt,ft])},D=(h,p,m,g,x,E,S,k,q)=>{var J,G;const V=p?"right":"left",K=p?`calc(100% - ${x.right}px)`:`${x.left}px`,ne=`${x.top}px`;let we=p?`-${window.innerWidth-S.right-8}px`:`${S.x+8}px`,Se=.5;const oe="scale(1)";let ge=`scale(${Se})`;if(k&&q){we=p?`-${window.innerWidth-q.right-8}px`:q.x-8+"px";const je=(null===(J=k.textContent)||void 0===J?void 0:J.trim())===(null===(G=g.textContent)||void 0===G?void 0:G.trim());Se=q.height/(E.height-f),ge=je?`scale(${q.width/E.width}, ${Se})`:`scale(${Se})`}const fe=S.top+S.height/2-x.height*Se/2+"px",le=m?[{offset:0,opacity:0,transform:`translate3d(${we}, ${fe}, 0) ${ge}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${ne}, 0) ${oe}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${ne}, 0) ${oe}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${we}, ${fe}, 0) ${ge}`}],z=Z("ion-title"),ye=(0,F.c)();z.innerText=g.innerText,z.size=g.size,z.color=g.color,ye.addElement(z),ye.beforeStyles({"transform-origin":`${V} top`,height:`${x.height}px`,display:"",position:"relative",[V]:K}).beforeAddWrite(()=>{g.style.setProperty("opacity","0")}).afterAddWrite(()=>{g.style.setProperty("opacity",""),z.style.setProperty("display","none")}).keyframes(le),h.addAnimation(ye)},d=(h,p)=>{var m;try{const g="cubic-bezier(0.32,0.72,0,1)",x="opacity",E="transform",S="0%",q="rtl"===h.ownerDocument.dir,J=q?"-99.5%":"99.5%",G=q?"33%":"-33%",V=p.enteringEl,K=p.leavingEl,$="back"===p.direction,ne=V.querySelector(":scope > ion-content"),Y=V.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),we=V.querySelectorAll(":scope > ion-header > ion-toolbar"),Se=(0,F.c)(),oe=(0,F.c)();if(Se.addElement(V).duration((null!==(m=p.duration)&&void 0!==m?m:0)||540).easing(p.easing||g).fill("both").beforeRemoveClass("ion-page-invisible"),K&&null!=h){const fe=(0,F.c)();fe.addElement(h),Se.addAnimation(fe)}if(ne||0!==we.length||0!==Y.length?(oe.addElement(ne),oe.addElement(Y)):oe.addElement(V.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(oe),$?oe.beforeClearStyles([x]).fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.8,1):oe.beforeClearStyles([x]).fromTo("transform",`translateX(${J})`,`translateX(${S})`),ne){const fe=M(ne).querySelector(".transition-effect");if(fe){const Ce=fe.querySelector(".transition-cover"),it=fe.querySelector(".transition-shadow"),le=(0,F.c)(),z=(0,F.c)(),ye=(0,F.c)();le.addElement(fe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),z.addElement(Ce).beforeClearStyles([x]).fromTo(x,0,.1),ye.addElement(it).beforeClearStyles([x]).fromTo(x,.03,.7),le.addAnimation([z,ye]),oe.addAnimation([le])}}const ge=V.querySelector("ion-header.header-collapse-condense"),{forward:re,backward:Q}=((h,p,m,g,x)=>{const E=b(g,m),S=C(x),k=C(g),q=b(x,m),J=null!==E&&null!==S&&!m,G=null!==k&&null!==q&&m;if(J){const V=S.getBoundingClientRect(),K=E.getBoundingClientRect(),$=M(E).querySelector(".button-text"),ne=null==$?void 0:$.getBoundingClientRect(),we=M(S).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,S,V,we,K,$,ne),I(h,p,m,E,K,$,ne,S,we)}else if(G){const V=k.getBoundingClientRect(),K=q.getBoundingClientRect(),$=M(q).querySelector(".button-text"),ne=null==$?void 0:$.getBoundingClientRect(),we=M(k).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,k,V,we,K,$,ne),I(h,p,m,q,K,$,ne,k,we)}return{forward:J,backward:G}})(Se,q,$,V,K);if(we.forEach(fe=>{const Ce=(0,F.c)();Ce.addElement(fe),Se.addAnimation(Ce);const it=(0,F.c)();it.addElement(fe.querySelector("ion-title"));const le=(0,F.c)(),z=Array.from(fe.querySelectorAll("ion-buttons,[menuToggle]")),ye=fe.closest("ion-header"),je=null==ye?void 0:ye.classList.contains("header-collapse-condense-inactive");let Je;Je=z.filter($?Ut=>{const Xt=Ut.classList.contains("buttons-collapse");return Xt&&!je||!Xt}:Ut=>!Ut.classList.contains("buttons-collapse")),le.addElement(Je);const gt=(0,F.c)();gt.addElement(fe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ct=(0,F.c)();Ct.addElement(M(fe).querySelector(".toolbar-background"));const $t=(0,F.c)(),yt=fe.querySelector("ion-back-button");if(yt&&$t.addElement(yt),Ce.addAnimation([it,le,gt,Ct,$t]),le.fromTo(x,.01,1),gt.fromTo(x,.01,1),$)je||it.fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.01,1),gt.fromTo("transform",`translateX(${G})`,`translateX(${S})`),$t.fromTo(x,.01,1);else if(ge||it.fromTo("transform",`translateX(${J})`,`translateX(${S})`).fromTo(x,.01,1),gt.fromTo("transform",`translateX(${J})`,`translateX(${S})`),Ct.beforeClearStyles([x,"transform"]),(null==ye?void 0:ye.translucent)?Ct.fromTo("transform",q?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ct.fromTo(x,.01,"var(--opacity)"),re||$t.fromTo(x,.01,1),yt&&!re){const Xt=(0,F.c)();Xt.addElement(M(yt).querySelector(".button-text")).fromTo("transform",q?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ce.addAnimation(Xt)}}),K){const fe=(0,F.c)(),Ce=K.querySelector(":scope > ion-content"),it=K.querySelectorAll(":scope > ion-header > ion-toolbar"),le=K.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ce||0!==it.length||0!==le.length?(fe.addElement(Ce),fe.addElement(le)):fe.addElement(K.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(fe),$){fe.beforeClearStyles([x]).fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)");const z=(0,j.g)(K);Se.afterAddWrite(()=>{"normal"===Se.getDirection()&&z.style.setProperty("display","none")})}else fe.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,1,.8);if(Ce){const z=M(Ce).querySelector(".transition-effect");if(z){const ye=z.querySelector(".transition-cover"),je=z.querySelector(".transition-shadow"),Je=(0,F.c)(),gt=(0,F.c)(),Ct=(0,F.c)();Je.addElement(z).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),gt.addElement(ye).beforeClearStyles([x]).fromTo(x,.1,0),Ct.addElement(je).beforeClearStyles([x]).fromTo(x,.7,.03),Je.addAnimation([gt,Ct]),fe.addAnimation([Je])}}it.forEach(z=>{const ye=(0,F.c)();ye.addElement(z);const je=(0,F.c)();je.addElement(z.querySelector("ion-title"));const Je=(0,F.c)(),gt=z.querySelectorAll("ion-buttons,[menuToggle]"),Ct=z.closest("ion-header"),$t=null==Ct?void 0:Ct.classList.contains("header-collapse-condense-inactive"),yt=Array.from(gt).filter(Bt=>{const Et=Bt.classList.contains("buttons-collapse");return Et&&!$t||!Et});Je.addElement(yt);const Ut=(0,F.c)(),Xt=z.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Xt.length>0&&Ut.addElement(Xt);const ft=(0,F.c)();ft.addElement(M(z).querySelector(".toolbar-background"));const jt=(0,F.c)(),Lt=z.querySelector("ion-back-button");if(Lt&&jt.addElement(Lt),ye.addAnimation([je,Je,Ut,jt,ft]),Se.addAnimation(ye),jt.fromTo(x,.99,0),Je.fromTo(x,.99,0),Ut.fromTo(x,.99,0),$){if($t||je.fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)").fromTo(x,.99,0),Ut.fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)"),ft.beforeClearStyles([x,"transform"]),(null==Ct?void 0:Ct.translucent)?ft.fromTo("transform","translateX(0px)",q?"translateX(-100%)":"translateX(100%)"):ft.fromTo(x,"var(--opacity)",0),Lt&&!Q){const Et=(0,F.c)();Et.addElement(M(Lt).querySelector(".button-text")).fromTo("transform",`translateX(${S})`,`translateX(${(q?-124:124)+"px"})`),ye.addAnimation(Et)}}else $t||je.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,.99,0).afterClearStyles([E,x]),Ut.fromTo("transform",`translateX(${S})`,`translateX(${G})`).afterClearStyles([E,x]),jt.afterClearStyles([x]),je.afterClearStyles([x]),Je.afterClearStyles([x])})}return Se}catch(g){throw g}},f=10},361:(Rr,Un,Ve)=>{"use strict";Ve.r(Un),Ve.d(Un,{mdTransitionAnimation:()=>be});var F=Ve(9986),j=Ve(1331);Ve(8476),Ve(4921),Ve(8393);const be=(Z,M)=>{var C,b,w;const I="40px",d="back"===M.direction,h=M.leavingEl,p=(0,j.g)(M.enteringEl),m=p.querySelector("ion-toolbar"),g=(0,F.c)();if(g.addElement(p).fill("both").beforeRemoveClass("ion-page-invisible"),d?g.duration((null!==(C=M.duration)&&void 0!==C?C:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):g.duration((null!==(b=M.duration)&&void 0!==b?b:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${I})`,"translateY(0px)").fromTo("opacity",.01,1),m){const x=(0,F.c)();x.addElement(m),g.addAnimation(x)}if(h&&d){g.duration((null!==(w=M.duration)&&void 0!==w?w:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const x=(0,F.c)();x.addElement((0,j.g)(h)).onFinish(E=>{1===E&&x.elements.length>0&&x.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${I})`).fromTo("opacity",1,0),g.addAnimation(x)}return g}},1070:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B:()=>gt,F:()=>jt,G:()=>Ct,O:()=>$t,a:()=>p,b:()=>m,c:()=>S,d:()=>yt,e:()=>Ut,f:()=>re,g:()=>fe,h:()=>le,i:()=>ye,j:()=>q,k:()=>J,l:()=>g,m:()=>x,n:()=>b,o:()=>oe,q:()=>w,s:()=>Je});var F=Ve(467),j=Ve(8476),It=Ve(4920),sn=Ve(8669),a=Ve(4921),be=Ve(8621),Z=Ve(1970),M=Ve(4929);const C='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',b=(Lt,Bt)=>{const Et=Lt.querySelector(C);I(Et,null!=Bt?Bt:Lt)},w=(Lt,Bt)=>{const Et=Array.from(Lt.querySelectorAll(C));I(Et.length>0?Et[Et.length-1]:null,null!=Bt?Bt:Lt)},I=(Lt,Bt)=>{let Et=Lt;const Kt=null==Lt?void 0:Lt.shadowRoot;Kt&&(Et=Kt.querySelector(C)||Lt),Et?(0,It.f)(Et):Bt.focus()};let D=0,d=0;const f=new WeakMap,h=Lt=>({create:Bt=>G(Lt,Bt),dismiss:(Bt,Et,Kt)=>Y(document,Bt,Et,Lt,Kt),getTop:()=>(0,F.A)(function*(){return oe(document,Lt)})()}),p=h("ion-alert"),m=h("ion-action-sheet"),g=h("ion-loading"),x=h("ion-modal"),S=h("ion-popover"),q=Lt=>{typeof document<"u"&&ne(document);const Bt=D++;Lt.overlayIndex=Bt},J=Lt=>(Lt.hasAttribute("id")||(Lt.id="ion-overlay-"+ ++d),Lt.id),G=(Lt,Bt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Lt).then(()=>{const Et=document.createElement(Lt);return Et.classList.add("overlay-hidden"),Object.assign(Et,Object.assign(Object.assign({},Bt),{hasController:!0})),Ce(document).appendChild(Et),new Promise(Kt=>(0,It.c)(Et,Kt))}):Promise.resolve(),K=(Lt,Bt)=>{let Et=Lt;const Kt=null==Lt?void 0:Lt.shadowRoot;Kt&&(Et=Kt.querySelector(C)||Lt),Et?(0,It.f)(Et):Bt.focus()},ne=Lt=>{0===D&&(D=1,Lt.addEventListener("focus",Bt=>{((Lt,Bt)=>{const Et=oe(Bt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),Kt=Lt.target;Et&&Kt&&!Et.classList.contains(jt)&&(Et.shadowRoot?(()=>{if(Et.contains(Kt))Et.lastFocus=Kt;else if("ION-TOAST"===Kt.tagName)K(Et.lastFocus,Et);else{const An=Et.lastFocus;b(Et),An===Bt.activeElement&&w(Et),Et.lastFocus=Bt.activeElement}})():(()=>{if(Et===Kt)Et.lastFocus=void 0;else if("ION-TOAST"===Kt.tagName)K(Et.lastFocus,Et);else{const An=(0,It.g)(Et);if(!An.contains(Kt))return;const Jn=An.querySelector(".ion-overlay-wrapper");if(!Jn)return;if(Jn.contains(Kt)||Kt===An.querySelector("ion-backdrop"))Et.lastFocus=Kt;else{const Rn=Et.lastFocus;b(Jn,Et),Rn===Bt.activeElement&&w(Jn,Et),Et.lastFocus=Bt.activeElement}}})())})(Bt,Lt)},!0),Lt.addEventListener("ionBackButton",Bt=>{const Et=oe(Lt);null!=Et&&Et.backdropDismiss&&Bt.detail.register(sn.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Et.dismiss(void 0,gt)})}),(0,sn.shouldUseCloseWatcher)()||Lt.addEventListener("keydown",Bt=>{if("Escape"===Bt.key){const Et=oe(Lt);null!=Et&&Et.backdropDismiss&&Et.dismiss(void 0,gt)}}))},Y=(Lt,Bt,Et,Kt,yn)=>{const Yn=oe(Lt,Kt,yn);return Yn?Yn.dismiss(Bt,Et):Promise.reject("overlay does not exist")},Se=(Lt,Bt)=>((Lt,Bt)=>(void 0===Bt&&(Bt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(Lt.querySelectorAll(Bt)).filter(Et=>Et.overlayIndex>0)))(Lt,Bt).filter(Et=>!(Lt=>Lt.classList.contains("overlay-hidden"))(Et)),oe=(Lt,Bt,Et)=>{const Kt=Se(Lt,Bt);return void 0===Et?Kt[Kt.length-1]:Kt.find(yn=>yn.id===Et)},ge=(Lt=!1)=>{const Et=Ce(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Et&&(Lt?Et.setAttribute("aria-hidden","true"):Et.removeAttribute("aria-hidden"))},re=function(){var Lt=(0,F.A)(function*(Bt,Et,Kt,yn,Yn){var An,Jn;if(Bt.presented)return;ge(!0),document.body.classList.add(Z.B),Xt(Bt.el),Bt.presented=!0,Bt.willPresent.emit(),null===(An=Bt.willPresentShorthand)||void 0===An||An.emit();const Rn=(0,a.b)(Bt),Sr=Bt.enterAnimation?Bt.enterAnimation:a.c.get(Et,"ios"===Rn?Kt:yn);(yield it(Bt,Sr,Bt.el,Yn))&&(Bt.didPresent.emit(),null===(Jn=Bt.didPresentShorthand)||void 0===Jn||Jn.emit()),"ION-TOAST"!==Bt.el.tagName&&Q(Bt.el),Bt.keyboardClose&&(null===document.activeElement||!Bt.el.contains(document.activeElement))&&Bt.el.focus(),Bt.el.removeAttribute("aria-hidden")});return function(Et,Kt,yn,Yn,An){return Lt.apply(this,arguments)}}(),Q=function(){var Lt=(0,F.A)(function*(Bt){let Et=document.activeElement;if(!Et)return;const Kt=null==Et?void 0:Et.shadowRoot;Kt&&(Et=Kt.querySelector(C)||Et),yield Bt.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Et.focus()});return function(Et){return Lt.apply(this,arguments)}}(),fe=function(){var Lt=(0,F.A)(function*(Bt,Et,Kt,yn,Yn,An,Jn){var Rn,Sr;if(!Bt.presented)return!1;void 0!==j.d&&1===Se(j.d).length&&(ge(!1),document.body.classList.remove(Z.B)),Bt.presented=!1;try{Bt.el.style.setProperty("pointer-events","none"),Bt.willDismiss.emit({data:Et,role:Kt}),null===(Rn=Bt.willDismissShorthand)||void 0===Rn||Rn.emit({data:Et,role:Kt});const ur=(0,a.b)(Bt),bn=Bt.leaveAnimation?Bt.leaveAnimation:a.c.get(yn,"ios"===ur?Yn:An);Kt!==Ct&&(yield it(Bt,bn,Bt.el,Jn)),Bt.didDismiss.emit({data:Et,role:Kt}),null===(Sr=Bt.didDismissShorthand)||void 0===Sr||Sr.emit({data:Et,role:Kt}),(f.get(Bt)||[]).forEach(Pn=>Pn.destroy()),f.delete(Bt),Bt.el.classList.add("overlay-hidden"),Bt.el.style.removeProperty("pointer-events"),void 0!==Bt.el.lastFocus&&(Bt.el.lastFocus=void 0)}catch(ur){console.error(ur)}return Bt.el.remove(),ft(),!0});return function(Et,Kt,yn,Yn,An,Jn,Rn){return Lt.apply(this,arguments)}}(),Ce=Lt=>Lt.querySelector("ion-app")||Lt.body,it=function(){var Lt=(0,F.A)(function*(Bt,Et,Kt,yn){Kt.classList.remove("overlay-hidden");const An=Et(Bt.el,yn);(!Bt.animated||!a.c.getBoolean("animated",!0))&&An.duration(0),Bt.keyboardClose&&An.beforeAddWrite(()=>{const Rn=Kt.ownerDocument.activeElement;null!=Rn&&Rn.matches("input,ion-input, ion-textarea")&&Rn.blur()});const Jn=f.get(Bt)||[];return f.set(Bt,[...Jn,An]),yield An.play(),!0});return function(Et,Kt,yn,Yn){return Lt.apply(this,arguments)}}(),le=(Lt,Bt)=>{let Et;const Kt=new Promise(yn=>Et=yn);return z(Lt,Bt,yn=>{Et(yn.detail)}),Kt},z=(Lt,Bt,Et)=>{const Kt=yn=>{(0,It.b)(Lt,Bt,Kt),Et(yn)};(0,It.a)(Lt,Bt,Kt)},ye=Lt=>"cancel"===Lt||Lt===gt,je=Lt=>Lt(),Je=(Lt,Bt)=>{if("function"==typeof Lt)return a.c.get("_zoneGate",je)(()=>{try{return Lt(Bt)}catch(Kt){throw Kt}})},gt="backdrop",Ct="gesture",$t=39,yt=Lt=>{let Et,Bt=!1;const Kt=(0,be.C)(),yn=(Jn=!1)=>{if(Et&&!Jn)return{delegate:Et,inline:Bt};const{el:Rn,hasController:Sr,delegate:Bn}=Lt;return Bt=null!==Rn.parentNode&&!Sr,Et=Bt?Bn||Kt:Bn,{inline:Bt,delegate:Et}};return{attachViewToDom:function(){var Jn=(0,F.A)(function*(Rn){const{delegate:Sr}=yn(!0);if(Sr)return yield Sr.attachViewToDom(Lt.el,Rn);const{hasController:Bn}=Lt;if(Bn&&void 0!==Rn)throw new Error("framework delegate is missing");return null});return function(Sr){return Jn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Jn}=yn();Jn&&void 0!==Lt.el&&Jn.removeViewFromDom(Lt.el.parentElement,Lt.el)}}},Ut=()=>{let Lt;const Bt=()=>{Lt&&(Lt(),Lt=void 0)};return{addClickListener:(Kt,yn)=>{Bt();const Yn=void 0!==yn?document.getElementById(yn):null;Yn?Lt=((Jn,Rn)=>{const Sr=()=>{Rn.present()};return Jn.addEventListener("click",Sr),()=>{Jn.removeEventListener("click",Sr)}})(Yn,Kt):(0,M.p)(`A trigger element with the ID "${yn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Kt)},removeClickListener:Bt}},Xt=Lt=>{var Bt;if(void 0===j.d)return;const Et=Se(j.d);for(let Kt=Et.length-1;Kt>=0;Kt--){const yn=Et[Kt],Yn=null!==(Bt=Et[Kt+1])&&void 0!==Bt?Bt:Lt;(Yn.hasAttribute("aria-hidden")||"ION-TOAST"!==Yn.tagName)&&yn.setAttribute("aria-hidden","true")}},ft=()=>{if(void 0===j.d)return;const Lt=Se(j.d);for(let Bt=Lt.length-1;Bt>=0;Bt--){const Et=Lt[Bt];if(Et.removeAttribute("aria-hidden"),"ION-TOAST"!==Et.tagName)break}},jt="ion-disable-focus-trap"},1288:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{H:()=>m,b:()=>Yn,c:()=>S,f:()=>yt,g:()=>E,h:()=>h,p:()=>Dr,r:()=>Qn});var F=Ve(467);let It,sn,a=!1,be=!1;const b={},d=qt=>"object"==(qt=typeof qt)||"function"===qt;function f(qt){var fn,Fn,Cn;return null!==(Cn=null===(Fn=null===(fn=qt.head)||void 0===fn?void 0:fn.querySelector('meta[name="csp-nonce"]'))||void 0===Fn?void 0:Fn.getAttribute("content"))&&void 0!==Cn?Cn:void 0}const h=(qt,fn,...Fn)=>{let Cn=null,Wn=!1,yr=!1;const fr=[],Er=te=>{for(let Ie=0;Ie<te.length;Ie++)Cn=te[Ie],Array.isArray(Cn)?Er(Cn):null!=Cn&&"boolean"!=typeof Cn&&((Wn="function"!=typeof qt&&!d(Cn))&&(Cn=String(Cn)),Wn&&yr?fr[fr.length-1].$text$+=Cn:fr.push(Wn?p(null,Cn):Cn),yr=Wn)};if(Er(Fn),fn){const te=fn.className||fn.class;te&&(fn.class="object"!=typeof te?te:Object.keys(te).filter(Ie=>te[Ie]).join(" "))}const Lr=p(qt,null);return Lr.$attrs$=fn,fr.length>0&&(Lr.$children$=fr),Lr},p=(qt,fn)=>({$flags$:0,$tag$:qt,$text$:fn,$elm$:null,$children$:null,$attrs$:null}),m={},E=qt=>bn(qt).$hostElement$,S=(qt,fn,Fn)=>{const Cn=E(qt);return{emit:Wn=>k(Cn,fn,{bubbles:!!(4&Fn),composed:!!(2&Fn),cancelable:!!(1&Fn),detail:Wn})}},k=(qt,fn,Fn)=>{const Cn=ir.ce(fn,Fn);return qt.dispatchEvent(Cn),Cn},q=new WeakMap,K=(qt,fn)=>"sc-"+qt.$tagName$,$=(qt,fn,Fn,Cn,Wn,yr)=>{if(Fn!==Cn){let fr=pt(qt,fn),Er=fn.toLowerCase();if("class"===fn){const Lr=qt.classList,te=Y(Fn),Ie=Y(Cn);Lr.remove(...te.filter(Qe=>Qe&&!Ie.includes(Qe))),Lr.add(...Ie.filter(Qe=>Qe&&!te.includes(Qe)))}else if("style"===fn){for(const Lr in Fn)(!Cn||null==Cn[Lr])&&(Lr.includes("-")?qt.style.removeProperty(Lr):qt.style[Lr]="");for(const Lr in Cn)(!Fn||Cn[Lr]!==Fn[Lr])&&(Lr.includes("-")?qt.style.setProperty(Lr,Cn[Lr]):qt.style[Lr]=Cn[Lr])}else if("ref"===fn)Cn&&Cn(qt);else if(fr||"o"!==fn[0]||"n"!==fn[1]){const Lr=d(Cn);if((fr||Lr&&null!==Cn)&&!Wn)try{if(qt.tagName.includes("-"))qt[fn]=Cn;else{const te=null==Cn?"":Cn;"list"===fn?fr=!1:(null==Fn||qt[fn]!=te)&&(qt[fn]=te)}}catch{}null==Cn||!1===Cn?(!1!==Cn||""===qt.getAttribute(fn))&&qt.removeAttribute(fn):(!fr||4&yr||Wn)&&!Lr&&qt.setAttribute(fn,Cn=!0===Cn?"":Cn)}else fn="-"===fn[2]?fn.slice(3):pt(On,Er)?Er.slice(2):Er[2]+fn.slice(3),Fn&&ir.rel(qt,fn,Fn,!1),Cn&&ir.ael(qt,fn,Cn,!1)}},ne=/\s/,Y=qt=>qt?qt.split(ne):[],we=(qt,fn,Fn,Cn)=>{const Wn=11===fn.$elm$.nodeType&&fn.$elm$.host?fn.$elm$.host:fn.$elm$,yr=qt&&qt.$attrs$||b,fr=fn.$attrs$||b;for(Cn in yr)Cn in fr||$(Wn,Cn,yr[Cn],void 0,Fn,fn.$flags$);for(Cn in fr)$(Wn,Cn,yr[Cn],fr[Cn],Fn,fn.$flags$)},Se=(qt,fn,Fn,Cn)=>{const Wn=fn.$children$[Fn];let fr,Er,yr=0;if(null!==Wn.$text$)fr=Wn.$elm$=zn.createTextNode(Wn.$text$);else{if(a||(a="svg"===Wn.$tag$),fr=Wn.$elm$=zn.createElementNS(a?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Wn.$tag$),a&&"foreignObject"===Wn.$tag$&&(a=!1),we(null,Wn,a),(qt=>null!=qt)(It)&&fr["s-si"]!==It&&fr.classList.add(fr["s-si"]=It),Wn.$children$)for(yr=0;yr<Wn.$children$.length;++yr)Er=Se(qt,Wn,yr),Er&&fr.appendChild(Er);"svg"===Wn.$tag$?a=!1:"foreignObject"===fr.tagName&&(a=!0)}return fr},oe=(qt,fn,Fn,Cn,Wn,yr)=>{let Er,fr=qt;for(fr.shadowRoot&&fr.tagName===sn&&(fr=fr.shadowRoot);Wn<=yr;++Wn)Cn[Wn]&&(Er=Se(null,Fn,Wn),Er&&(Cn[Wn].$elm$=Er,fr.insertBefore(Er,fn)))},ge=(qt,fn,Fn)=>{for(let Cn=fn;Cn<=Fn;++Cn){const Wn=qt[Cn];if(Wn){const yr=Wn.$elm$;Ce(Wn),yr&&yr.remove()}}},Q=(qt,fn)=>qt.$tag$===fn.$tag$,fe=(qt,fn)=>{const Fn=fn.$elm$=qt.$elm$,Cn=qt.$children$,Wn=fn.$children$,yr=fn.$tag$,fr=fn.$text$;null===fr?(a="svg"===yr||"foreignObject"!==yr&&a,we(qt,fn,a),null!==Cn&&null!==Wn?((qt,fn,Fn,Cn)=>{let T,Wn=0,yr=0,fr=fn.length-1,Er=fn[0],Lr=fn[fr],te=Cn.length-1,Ie=Cn[0],Qe=Cn[te];for(;Wn<=fr&&yr<=te;)null==Er?Er=fn[++Wn]:null==Lr?Lr=fn[--fr]:null==Ie?Ie=Cn[++yr]:null==Qe?Qe=Cn[--te]:Q(Er,Ie)?(fe(Er,Ie),Er=fn[++Wn],Ie=Cn[++yr]):Q(Lr,Qe)?(fe(Lr,Qe),Lr=fn[--fr],Qe=Cn[--te]):Q(Er,Qe)?(fe(Er,Qe),qt.insertBefore(Er.$elm$,Lr.$elm$.nextSibling),Er=fn[++Wn],Qe=Cn[--te]):Q(Lr,Ie)?(fe(Lr,Ie),qt.insertBefore(Lr.$elm$,Er.$elm$),Lr=fn[--fr],Ie=Cn[++yr]):(T=Se(fn&&fn[yr],Fn,yr),Ie=Cn[++yr],T&&Er.$elm$.parentNode.insertBefore(T,Er.$elm$));Wn>fr?oe(qt,null==Cn[te+1]?null:Cn[te+1].$elm$,Fn,Cn,yr,te):yr>te&&ge(fn,Wn,fr)})(Fn,Cn,fn,Wn):null!==Wn?(null!==qt.$text$&&(Fn.textContent=""),oe(Fn,null,fn,Wn,0,Wn.length-1)):null!==Cn&&ge(Cn,0,Cn.length-1),a&&"svg"===yr&&(a=!1)):qt.$text$!==fr&&(Fn.data=fr)},Ce=qt=>{qt.$attrs$&&qt.$attrs$.ref&&qt.$attrs$.ref(null),qt.$children$&&qt.$children$.map(Ce)},le=(qt,fn)=>{fn&&!qt.$onRenderResolve$&&fn["s-p"]&&fn["s-p"].push(new Promise(Fn=>qt.$onRenderResolve$=Fn))},z=(qt,fn)=>{if(qt.$flags$|=16,!(4&qt.$flags$))return le(qt,qt.$ancestorComponent$),sr(()=>ye(qt,fn));qt.$flags$|=512},ye=(qt,fn)=>{const Cn=qt.$lazyInstance$;return fn&&(qt.$flags$|=256,qt.$queuedListeners$&&(qt.$queuedListeners$.map(([yr,fr])=>Xt(Cn,yr,fr)),qt.$queuedListeners$=void 0)),je(void 0,()=>gt(qt,Cn,fn))},je=(qt,fn)=>Je(qt)?qt.then(fn):fn(),Je=qt=>qt instanceof Promise||qt&&qt.then&&"function"==typeof qt.then,gt=function(){var qt=(0,F.A)(function*(fn,Fn,Cn){var Wn;const yr=fn.$hostElement$,Er=yr["s-rc"];Cn&&(qt=>{const fn=qt.$cmpMeta$,Fn=qt.$hostElement$,Cn=fn.$flags$,yr=((qt,fn,Fn,Cn)=>{var Wn;let yr=K(fn);const fr=vn.get(yr);if(qt=11===qt.nodeType?qt:zn,fr)if("string"==typeof fr){let Lr,Er=q.get(qt=qt.head||qt);if(Er||q.set(qt,Er=new Set),!Er.has(yr)){{Lr=zn.createElement("style"),Lr.innerHTML=fr;const te=null!==(Wn=ir.$nonce$)&&void 0!==Wn?Wn:f(zn);null!=te&&Lr.setAttribute("nonce",te),qt.insertBefore(Lr,qt.querySelector("link"))}Er&&Er.add(yr)}}else qt.adoptedStyleSheets.includes(fr)||(qt.adoptedStyleSheets=[...qt.adoptedStyleSheets,fr]);return yr})(Fn.shadowRoot?Fn.shadowRoot:Fn.getRootNode(),fn);10&Cn&&(Fn["s-sc"]=yr,Fn.classList.add(yr+"-h"))})(fn);Ct(fn,Fn),Er&&(Er.map(te=>te()),yr["s-rc"]=void 0);{const te=null!==(Wn=yr["s-p"])&&void 0!==Wn?Wn:[],Ie=()=>$t(fn);0===te.length?Ie():(Promise.all(te).then(Ie),fn.$flags$|=4,te.length=0)}});return function(Fn,Cn,Wn){return qt.apply(this,arguments)}}(),Ct=(qt,fn,Fn)=>{try{fn=fn.render(),qt.$flags$&=-17,qt.$flags$|=2,((qt,fn)=>{const Fn=qt.$hostElement$,Cn=qt.$vnode$||p(null,null),Wn=(qt=>qt&&qt.$tag$===m)(fn)?fn:h(null,null,fn);sn=Fn.tagName,Wn.$tag$=null,Wn.$flags$|=4,qt.$vnode$=Wn,Wn.$elm$=Cn.$elm$=Fn.shadowRoot||Fn,It=Fn["s-sc"],fe(Cn,Wn)})(qt,fn)}catch(Cn){bt(Cn,qt.$hostElement$)}return null},$t=qt=>{const Fn=qt.$hostElement$,Wn=qt.$lazyInstance$,yr=qt.$ancestorComponent$;64&qt.$flags$||(qt.$flags$|=64,ft(Fn),Xt(Wn,"componentDidLoad"),qt.$onReadyResolve$(Fn),yr||Ut()),qt.$onInstanceResolve$(Fn),qt.$onRenderResolve$&&(qt.$onRenderResolve$(),qt.$onRenderResolve$=void 0),512&qt.$flags$&&mn(()=>z(qt,!1)),qt.$flags$&=-517},yt=qt=>{{const fn=bn(qt),Fn=fn.$hostElement$.isConnected;return Fn&&2==(18&fn.$flags$)&&z(fn,!1),Fn}},Ut=qt=>{ft(zn.documentElement),mn(()=>k(On,"appload",{detail:{namespace:"ionicpwaelements"}}))},Xt=(qt,fn,Fn)=>{if(qt&&qt[fn])try{return qt[fn](Fn)}catch(Cn){bt(Cn)}},ft=qt=>qt.classList.add("hydrated"),Bt=(qt,fn,Fn)=>{if(fn.$members$){const Cn=Object.entries(fn.$members$),Wn=qt.prototype;if(Cn.map(([yr,[fr]])=>{31&fr||2&Fn&&32&fr?Object.defineProperty(Wn,yr,{get(){return((qt,fn)=>bn(this).$instanceValues$.get(fn))(0,yr)},set(Er){((qt,fn,Fn,Cn)=>{const Wn=bn(qt),yr=Wn.$instanceValues$.get(fn),fr=Wn.$flags$,Er=Wn.$lazyInstance$;Fn=((qt,fn)=>null==qt||d(qt)?qt:4&fn?"false"!==qt&&(""===qt||!!qt):2&fn?parseFloat(qt):1&fn?String(qt):qt)(Fn,Cn.$members$[fn][0]);const Lr=Number.isNaN(yr)&&Number.isNaN(Fn);(!(8&fr)||void 0===yr)&&Fn!==yr&&!Lr&&(Wn.$instanceValues$.set(fn,Fn),Er&&2==(18&fr)&&z(Wn,!1))})(this,yr,Er,fn)},configurable:!0,enumerable:!0}):1&Fn&&64&fr&&Object.defineProperty(Wn,yr,{value(...Er){const Lr=bn(this);return Lr.$onInstancePromise$.then(()=>Lr.$lazyInstance$[yr](...Er))}})}),1&Fn){const yr=new Map;Wn.attributeChangedCallback=function(fr,Er,Lr){ir.jmp(()=>{const te=yr.get(fr);if(this.hasOwnProperty(te))Lr=this[te],delete this[te];else if(Wn.hasOwnProperty(te)&&"number"==typeof this[te]&&this[te]==Lr)return;this[te]=(null!==Lr||"boolean"!=typeof this[te])&&Lr})},qt.observedAttributes=Cn.filter(([fr,Er])=>15&Er[0]).map(([fr,Er])=>{const Lr=Er[1]||fr;return yr.set(Lr,fr),Lr})}}return qt},Et=function(){var qt=(0,F.A)(function*(fn,Fn,Cn,Wn,yr){if(!(32&Fn.$flags$)){Fn.$flags$|=32;{if((yr=_t(Cn)).then){const te=()=>{};yr=yield yr,te()}yr.isProxied||(Bt(yr,Cn,2),yr.isProxied=!0);const Lr=()=>{};Fn.$flags$|=8;try{new yr(Fn)}catch(te){bt(te)}Fn.$flags$&=-9,Lr()}if(yr.style){let Lr=yr.style;const te=K(Cn);if(!vn.has(te)){const Ie=()=>{};((qt,fn,Fn)=>{let Cn=vn.get(qt);Pr&&Fn?(Cn=Cn||new CSSStyleSheet,"string"==typeof Cn?Cn=fn:Cn.replaceSync(fn)):Cn=fn,vn.set(qt,Cn)})(te,Lr,!!(1&Cn.$flags$)),Ie()}}}const fr=Fn.$ancestorComponent$,Er=()=>z(Fn,!0);fr&&fr["s-rc"]?fr["s-rc"].push(Er):Er()});return function(Fn,Cn,Wn,yr,fr){return qt.apply(this,arguments)}}(),Yn=(qt,fn={})=>{var Fn;const Wn=[],yr=fn.exclude||[],fr=On.customElements,Er=zn.head,Lr=Er.querySelector("meta[charset]"),te=zn.createElement("style"),Ie=[];let Qe,T=!0;Object.assign(ir,fn),ir.$resourcesUrl$=new URL(fn.resourcesUrl||"./",zn.baseURI).href,qt.map(N=>{N[1].map(U=>{const L={$flags$:U[0],$tagName$:U[1],$members$:U[2],$listeners$:U[3]};L.$members$=U[2],L.$listeners$=U[3];const ie=L.$tagName$,H=class extends HTMLElement{constructor(de){super(de),Pn(de=this,L),1&L.$flags$&&de.attachShadow({mode:"open"})}connectedCallback(){Qe&&(clearTimeout(Qe),Qe=null),T?Ie.push(this):ir.jmp(()=>(qt=>{if(!(1&ir.$flags$)){const fn=bn(qt),Fn=fn.$cmpMeta$,Cn=()=>{};if(1&fn.$flags$)An(qt,fn,Fn.$listeners$);else{fn.$flags$|=1;{let Wn=qt;for(;Wn=Wn.parentNode||Wn.host;)if(Wn["s-p"]){le(fn,fn.$ancestorComponent$=Wn);break}}Fn.$members$&&Object.entries(Fn.$members$).map(([Wn,[yr]])=>{if(31&yr&&qt.hasOwnProperty(Wn)){const fr=qt[Wn];delete qt[Wn],qt[Wn]=fr}}),Et(qt,fn,Fn)}Cn()}})(this))}disconnectedCallback(){ir.jmp(()=>(qt=>{if(!(1&ir.$flags$)){const fn=bn(this),Fn=fn.$lazyInstance$;fn.$rmListeners$&&(fn.$rmListeners$.map(Cn=>Cn()),fn.$rmListeners$=void 0),Xt(Fn,"disconnectedCallback")}})())}componentOnReady(){return bn(this).$onReadyPromise$}};L.$lazyBundleId$=N[0],!yr.includes(ie)&&!fr.get(ie)&&(Wn.push(ie),fr.define(ie,Bt(H,L,1)))})});{te.innerHTML=Wn+"{visibility:hidden}.hydrated{visibility:inherit}",te.setAttribute("data-styles","");const N=null!==(Fn=ir.$nonce$)&&void 0!==Fn?Fn:f(zn);null!=N&&te.setAttribute("nonce",N),Er.insertBefore(te,Lr?Lr.nextSibling:Er.firstChild)}T=!1,Ie.length?Ie.map(N=>N.connectedCallback()):ir.jmp(()=>Qe=setTimeout(Ut,30))},An=(qt,fn,Fn,Cn)=>{Fn&&Fn.map(([Wn,yr,fr])=>{const Er=Rn(qt,Wn),Lr=Jn(fn,fr),te=Sr(Wn);ir.ael(Er,yr,Lr,te),(fn.$rmListeners$=fn.$rmListeners$||[]).push(()=>ir.rel(Er,yr,Lr,te))})},Jn=(qt,fn)=>Fn=>{try{256&qt.$flags$?qt.$lazyInstance$[fn](Fn):(qt.$queuedListeners$=qt.$queuedListeners$||[]).push([fn,Fn])}catch(Cn){bt(Cn)}},Rn=(qt,fn)=>16&fn?zn.body:qt,Sr=qt=>!!(2&qt),ur=new WeakMap,bn=qt=>ur.get(qt),Qn=(qt,fn)=>ur.set(fn.$lazyInstance$=qt,fn),Pn=(qt,fn)=>{const Fn={$flags$:0,$hostElement$:qt,$cmpMeta$:fn,$instanceValues$:new Map};return Fn.$onInstancePromise$=new Promise(Cn=>Fn.$onInstanceResolve$=Cn),Fn.$onReadyPromise$=new Promise(Cn=>Fn.$onReadyResolve$=Cn),qt["s-p"]=[],qt["s-rc"]=[],An(qt,Fn,fn.$listeners$),ur.set(qt,Fn)},pt=(qt,fn)=>fn in qt,bt=(qt,fn)=>(0,console.error)(qt,fn),rt=new Map,_t=(qt,fn,Fn)=>{const Cn=qt.$tagName$.replace(/-/g,"_"),Wn=qt.$lazyBundleId$,yr=rt.get(Wn);if(yr)return yr[Cn];if(!Fn||!BUILD.hotModuleReplacement){const fr=Er=>(rt.set(Wn,Er),Er[Cn]);switch(Wn){case"pwa-action-sheet":return Ve.e(6301).then(Ve.bind(Ve,6301)).then(fr,bt);case"pwa-camera-modal":return Ve.e(2982).then(Ve.bind(Ve,2982)).then(fr,bt);case"pwa-toast":return Ve.e(3574).then(Ve.bind(Ve,3574)).then(fr,bt);case"pwa-camera-modal-instance":return Ve.e(5640).then(Ve.bind(Ve,5640)).then(fr,bt);case"pwa-camera":return Ve.e(6086).then(Ve.bind(Ve,6086)).then(fr,bt)}}return Ve(5235)(`./${Wn}.entry.js`).then(fr=>(rt.set(Wn,fr),fr[Cn]),bt)},vn=new Map,On=typeof window<"u"?window:{},zn=On.document||{head:{}},ir={$flags$:0,$resourcesUrl$:"",jmp:qt=>qt(),raf:qt=>requestAnimationFrame(qt),ael:(qt,fn,Fn,Cn)=>qt.addEventListener(fn,Fn,Cn),rel:(qt,fn,Fn,Cn)=>qt.removeEventListener(fn,Fn,Cn),ce:(qt,fn)=>new CustomEvent(qt,fn)},Dr=qt=>Promise.resolve(qt),Pr=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Br=[],In=[],un=(qt,fn)=>Fn=>{qt.push(Fn),be||(be=!0,fn&&4&ir.$flags$?mn(on):ir.raf(on))},Tn=qt=>{for(let fn=0;fn<qt.length;fn++)try{qt[fn](performance.now())}catch(Fn){bt(Fn)}qt.length=0},on=()=>{Tn(Br),Tn(In),(be=Br.length>0)&&ir.raf(on)},mn=qt=>Dr().then(qt),sr=un(In,!0)},5402:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{R:()=>j});const j=(0,Ve(5083).F3)("VoiceRecorder",{web:()=>Ve.e(9888).then(Ve.bind(Ve,9888)).then(It=>new It.VoiceRecorderWeb)})},92:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Yl:()=>d,ZL:()=>f,aH:()=>D});var F=Ve(467),j=Ve(8326),sn=Ve(3953),a=Ve(3656),be=Ve(5374),Z=Ve(5547),M=Ve(4237),C=Ve(755),b=Ve(4234),w=Ve(7100),I=Ve(3307),D="MobilePWA",d=!1;window.p5=j;let f=(()=>{var h;class p{constructor(g,x,E,S,k,q,J){D=g.is("desktop")?"DesktopPWA":"MobilePWA",d=g.is("electron");const G="init";J.update({id:G,message:"Initialize..."}).then(()=>{S.initialize((0,F.A)(function*(){k.Callback_nakama=()=>{J.update({id:G,message:`${k.text.Nakama.Initialize}...`,forceEnd:350}),E.initialize(),q.afterLangInit(),k.Callback_nakama=null};try{let K=yield S.loadBlobFromUserPath("translate.csv",""),$=URL.createObjectURL(K);k.load_selected_lang($)}catch{k.load_selected_lang()}let V=q.CatchGETs(location.href)||{};q.initialize(),E.AddressToQRCodeAct(V),x.initialize(),x.load_settings(),S.GetFileListFromDB("tmp_files").then(K=>{K.forEach($=>S.removeFileFromUserPath($))})}))})}}return(h=p).\u0275fac=function(g){return new(g||h)(sn.rXU(a.OD),sn.rXU(Z.r),sn.rXU(M.X),sn.rXU(C.n),sn.rXU(b.y),sn.rXU(w.z3),sn.rXU(I.f))},h.\u0275cmp=sn.VBU({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(g,x){1&g&&(sn.j41(0,"ion-app"),sn.nrm(1,"ion-router-outlet"),sn.k0s())},dependencies:[be.U1,be.Rg]}),p})()},7100:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{xM:()=>_h,z3:()=>Hx,ud:()=>Mu});var F=Ve(467),j=Ve(4023),It=Ve(8326),sn=Ve(617),a=Ve(92),be=Ve(5083),Z=function(v){return v.Prompt="PROMPT",v.Camera="CAMERA",v.Photos="PHOTOS",v}(Z||{}),M=function(v){return v.Rear="REAR",v.Front="FRONT",v}(M||{}),C=function(v){return v.Uri="uri",v.Base64="base64",v.DataUrl="dataUrl",v}(C||{});class b extends be.E_{getPhoto(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(l,u){if(t.webUseInput||t.source===Z.Photos)r.fileInputExperience(t,l,u);else if(t.source===Z.Prompt){let _=document.querySelector("pwa-action-sheet");_||(_=document.createElement("pwa-action-sheet"),document.body.appendChild(_)),_.header=t.promptLabelHeader||"Photo",_.cancelable=!1,_.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],_.addEventListener("onSelection",function(){var A=(0,F.A)(function*(O){0===O.detail?r.fileInputExperience(t,l,u):r.cameraExperience(t,l,u)});return function(O){return A.apply(this,arguments)}}())}else r.cameraExperience(t,l,u)});return function(l,u){return s.apply(this,arguments)}}())})()}pickImages(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(l,u){r.multipleFileInputExperience(l,u)});return function(l,u){return s.apply(this,arguments)}}())})()}cameraExperience(t,r,s){var l=this;return(0,F.A)(function*(){if(customElements.get("pwa-camera-modal")){const u=document.createElement("pwa-camera-modal");u.facingMode=t.direction===M.Front?"user":"environment",document.body.appendChild(u);try{yield u.componentOnReady(),u.addEventListener("onPhoto",function(){var _=(0,F.A)(function*(A){const O=A.detail;null===O?s(new be.I9("User cancelled photos app")):O instanceof Error?s(O):r(yield l._getCameraPhoto(O,t)),u.dismiss(),document.body.removeChild(u)});return function(A){return _.apply(this,arguments)}}()),u.present()}catch{l.fileInputExperience(t,r,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),l.fileInputExperience(t,r,s)})()}fileInputExperience(t,r,s){let l=document.querySelector("#_capacitor-camera-input");const u=()=>{var _;null===(_=l.parentNode)||void 0===_||_.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input",l.type="file",l.hidden=!0,document.body.appendChild(l),l.addEventListener("change",_=>{const A=l.files[0];let O="jpeg";if("image/png"===A.type?O="png":"image/gif"===A.type&&(O="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const B=new FileReader;B.addEventListener("load",()=>{if("dataUrl"===t.resultType)r({dataUrl:B.result,format:O});else if("base64"===t.resultType){const ee=B.result.split(",")[1];r({base64String:ee,format:O})}u()}),B.readAsDataURL(A)}else r({webPath:URL.createObjectURL(A),format:O}),u()}),l.addEventListener("cancel",_=>{s(new be.I9("User cancelled photos app")),u()})),l.accept="image/*",l.capture=!0,t.source===Z.Photos||t.source===Z.Prompt?l.removeAttribute("capture"):t.direction===M.Front?l.capture="user":t.direction===M.Rear&&(l.capture="environment"),l.click()}multipleFileInputExperience(t,r){let s=document.querySelector("#_capacitor-camera-input-multiple");const l=()=>{var u;null===(u=s.parentNode)||void 0===u||u.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",u=>{const _=[];for(let A=0;A<s.files.length;A++){const O=s.files[A];let B="jpeg";"image/png"===O.type?B="png":"image/gif"===O.type&&(B="gif"),_.push({webPath:URL.createObjectURL(O),format:B})}t({photos:_}),l()}),s.addEventListener("cancel",u=>{r(new be.I9("User cancelled photos app")),l()})),s.accept="image/*",s.click()}_getCameraPhoto(t,r){return new Promise((s,l)=>{const u=new FileReader,_=t.type.split("/")[1];"uri"===r.resultType?s({webPath:URL.createObjectURL(t),format:_,saved:!1}):(u.readAsDataURL(t),u.onloadend=()=>{const A=u.result;s("dataUrl"===r.resultType?{dataUrl:A,format:_,saved:!1}:{base64String:A.split(",")[1],format:_,saved:!1})},u.onerror=A=>{l(A)})})}checkPermissions(){var t=this;return(0,F.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,F.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new b;const I=(0,be.F3)("Camera",{web:()=>new b});var D=Ve(5402);const d="174",S=1,k=2,q=3,Rn=0,Sr=1,Bn=2,ur=0,bn=1,Qn=2,Pn=3,pt=4,bt=5,rt=6,_t=7,vn="attached",ir=301,Dr=302,In=306,un=1e3,Tn=1001,mn=1003,fn=1005,Cn=1006,fr=1008,Lr=1009,te=1010,Ie=1011,Qe=1012,T=1013,N=1014,U=1015,L=1016,ie=1017,H=1018,de=1020,Be=35902,Xe=1021,wt=1022,Nt=1023,rn=1024,Ge=1025,He=1026,vt=1027,tt=1028,Dt=1029,Zt=1030,$n=1031,Ar=1033,Hi=33776,Ki=33777,Xs=33778,Os=33779,wi=35840,ws=35841,co=35842,Ls=35843,so=36196,ea=37492,So=37496,ca=37808,ta=37809,qo=37810,ua=37811,mo=37812,Ta=37813,To=37814,Ja=37815,Va=37816,ke=37817,mt=37818,Vt=37819,We=37820,Wt=37821,Ln=36492,fs=36494,qs=36495,na=36283,Ga=36284,Ma=36285,Ko=36286,Ro=2300,Vo=2301,jo=2400,ct=2401,Vi="srgb",ns="srgb-linear",Ms="linear",qi="srgb",Vr=7680,nt="300 es",Mt=2e3;class Mn{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(r)&&s[t].push(r)}hasEventListener(t,r){const s=this._listeners;return void 0!==s&&void 0!==s[t]&&-1!==s[t].indexOf(r)}removeEventListener(t,r){const s=this._listeners;if(void 0===s)return;const l=s[t];if(void 0!==l){const u=l.indexOf(r);-1!==u&&l.splice(u,1)}}dispatchEvent(t){const r=this._listeners;if(void 0===r)return;const s=r[t.type];if(void 0!==s){t.target=this;const l=s.slice(0);for(let u=0,_=l.length;u<_;u++)l[u].call(this,t);t.target=null}}}const Ne=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Fe=Math.PI/180,Oe=180/Math.PI;function dt(){const v=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Ne[255&v]+Ne[v>>8&255]+Ne[v>>16&255]+Ne[v>>24&255]+"-"+Ne[255&t]+Ne[t>>8&255]+"-"+Ne[t>>16&15|64]+Ne[t>>24&255]+"-"+Ne[63&r|128]+Ne[r>>8&255]+"-"+Ne[r>>16&255]+Ne[r>>24&255]+Ne[255&s]+Ne[s>>8&255]+Ne[s>>16&255]+Ne[s>>24&255]).toLowerCase()}function an(v,t,r){return Math.max(t,Math.min(r,v))}function Dn(v,t){return(v%t+t)%t}function Jr(v,t,r){return(1-r)*v+r*t}function Ns(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return v/4294967295;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int32Array:return Math.max(v/2147483647,-1);case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function _i(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return Math.round(4294967295*v);case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int32Array:return Math.round(2147483647*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}const Fo_DEG2RAD=Fe,Fo_radToDeg=function Bs(v){return v*Oe};class pr{constructor(t=0,r=0){pr.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,s=this.y,l=t.elements;return this.x=l[0]*r+l[3]*s+l[6],this.y=l[1]*r+l[4]*s+l[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=an(this.x,t.x,r.x),this.y=an(this.y,t.y,r.y),this}clampScalar(t,r){return this.x=an(this.x,t,r),this.y=an(this.y,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(an(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(an(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y;return r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const s=Math.cos(r),l=Math.sin(r),u=this.x-t.x,_=this.y-t.y;return this.x=u*s-_*l+t.x,this.y=u*l+_*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yi{constructor(t,r,s,l,u,_,A,O,B){Yi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,r,s,l,u,_,A,O,B)}set(t,r,s,l,u,_,A,O,B){const ee=this.elements;return ee[0]=t,ee[1]=l,ee[2]=A,ee[3]=r,ee[4]=u,ee[5]=O,ee[6]=s,ee[7]=_,ee[8]=B,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(t,r,s){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,l=r.elements,u=this.elements,_=s[0],A=s[3],O=s[6],B=s[1],ee=s[4],ae=s[7],pe=s[2],_e=s[5],Re=s[8],Ue=l[0],Le=l[3],Pe=l[6],ht=l[1],ut=l[4],st=l[7],Yt=l[2],At=l[5],zt=l[8];return u[0]=_*Ue+A*ht+O*Yt,u[3]=_*Le+A*ut+O*At,u[6]=_*Pe+A*st+O*zt,u[1]=B*Ue+ee*ht+ae*Yt,u[4]=B*Le+ee*ut+ae*At,u[7]=B*Pe+ee*st+ae*zt,u[2]=pe*Ue+_e*ht+Re*Yt,u[5]=pe*Le+_e*ut+Re*At,u[8]=pe*Pe+_e*st+Re*zt,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],_=t[4],A=t[5],O=t[6],B=t[7],ee=t[8];return r*_*ee-r*A*B-s*u*ee+s*A*O+l*u*B-l*_*O}invert(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],_=t[4],A=t[5],O=t[6],B=t[7],ee=t[8],ae=ee*_-A*B,pe=A*O-ee*u,_e=B*u-_*O,Re=r*ae+s*pe+l*_e;if(0===Re)return this.set(0,0,0,0,0,0,0,0,0);const Ue=1/Re;return t[0]=ae*Ue,t[1]=(l*B-ee*s)*Ue,t[2]=(A*s-l*_)*Ue,t[3]=pe*Ue,t[4]=(ee*r-l*O)*Ue,t[5]=(l*u-A*r)*Ue,t[6]=_e*Ue,t[7]=(s*O-B*r)*Ue,t[8]=(_*r-s*u)*Ue,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,s,l,u,_,A){const O=Math.cos(u),B=Math.sin(u);return this.set(s*O,s*B,-s*(O*_+B*A)+_+t,-l*B,l*O,-l*(-B*_+O*A)+A+r,0,0,1),this}scale(t,r){return this.premultiply(jc.makeScale(t,r)),this}rotate(t){return this.premultiply(jc.makeRotation(-t)),this}translate(t,r){return this.premultiply(jc.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,s,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,s=t.elements;for(let l=0;l<9;l++)if(r[l]!==s[l])return!1;return!0}fromArray(t,r=0){for(let s=0;s<9;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const jc=new Yi;function Od(v){for(let t=v.length-1;t>=0;--t)if(v[t]>=65535)return!0;return!1}function yl(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function cc(){const v=yl("canvas");return v.style.display="block",v}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Fc={};function $a(v){v in Fc||(Fc[v]=!0,console.warn(v))}const os=(new Yi).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ys=(new Yi).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Eh(){const v={enabled:!0,workingColorSpace:ns,spaces:{},convert:function(l,u,_){return!1===this.enabled||u===_||!u||!_||(this.spaces[u].transfer===qi&&(l.r=Ml(l.r),l.g=Ml(l.g),l.b=Ml(l.b)),this.spaces[u].primaries!==this.spaces[_].primaries&&(l.applyMatrix3(this.spaces[u].toXYZ),l.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===qi&&(l.r=wc(l.r),l.g=wc(l.g),l.b=wc(l.b))),l},fromWorkingColorSpace:function(l,u){return this.convert(l,this.workingColorSpace,u)},toWorkingColorSpace:function(l,u){return this.convert(l,u,this.workingColorSpace)},getPrimaries:function(l){return this.spaces[l].primaries},getTransfer:function(l){return""===l?Ms:this.spaces[l].transfer},getLuminanceCoefficients:function(l,u=this.workingColorSpace){return l.fromArray(this.spaces[u].luminanceCoefficients)},define:function(l){Object.assign(this.spaces,l)},_getMatrix:function(l,u,_){return l.copy(this.spaces[u].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(l){return this.spaces[l].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(l=this.workingColorSpace){return this.spaces[l].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],s=[.3127,.329];return v.define({[ns]:{primaries:t,whitePoint:s,transfer:Ms,toXYZ:os,fromXYZ:Ys,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Vi},outputColorSpaceConfig:{drawingBufferColorSpace:Vi}},[Vi]:{primaries:t,whitePoint:s,transfer:qi,toXYZ:os,fromXYZ:Ys,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Vi}}}),v}const xs=Eh();function Ml(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function wc(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}let Ql;class ou{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Ql&&(Ql=yl("canvas")),Ql.width=t.width,Ql.height=t.height;const s=Ql.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),r=Ql}return r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=yl("canvas");r.width=t.width,r.height=t.height;const s=r.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const l=s.getImageData(0,0,t.width,t.height),u=l.data;for(let _=0;_<u.length;_++)u[_]=255*Ml(u[_]/255);return s.putImageData(l,0,0),r}if(t.data){const r=t.data.slice(0);for(let s=0;s<r.length;s++)r[s]=r instanceof Uint8Array||r instanceof Uint8ClampedArray?Math.floor(255*Ml(r[s]/255)):Ml(r[s]);return{data:r,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let As=0;class Ha{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:As++}),this.uuid=dt(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:""},l=this.data;if(null!==l){let u;if(Array.isArray(l)){u=[];for(let _=0,A=l.length;_<A;_++)u.push(ec(l[_].isDataTexture?l[_].image:l[_]))}else u=ec(l);s.url=u}return r||(t.images[this.uuid]=s),s}}function ec(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?ou.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ia=0,_o=(()=>{class v extends Mn{constructor(r=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,l=Tn,u=Tn,_=Cn,A=fr,O=Nt,B=Lr,ee=v.DEFAULT_ANISOTROPY,ae=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ia++}),this.uuid=dt(),this.name="",this.source=new Ha(r),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=l,this.wrapT=u,this.magFilter=_,this.minFilter=A,this.anisotropy=ee,this.format=O,this.internalFormat=null,this.type=B,this.offset=new pr(0,0),this.repeat=new pr(1,1),this.center=new pr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ae,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.renderTarget=r.renderTarget,this.isRenderTargetTexture=r.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const l={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(r.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case un:r.x=r.x-Math.floor(r.x);break;case Tn:r.x=r.x<0?0:1;break;case 1002:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case un:r.y=r.y-Math.floor(r.y);break;case Tn:r.y=r.y<0?0:1;break;case 1002:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(r){!0===r&&this.pmremVersion++}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class Vs{constructor(t=0,r=0,s=0,l=1){Vs.prototype.isVector4=!0,this.x=t,this.y=r,this.z=s,this.w=l}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,s,l){return this.x=t,this.y=r,this.z=s,this.w=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,s=this.y,l=this.z,u=this.w,_=t.elements;return this.x=_[0]*r+_[4]*s+_[8]*l+_[12]*u,this.y=_[1]*r+_[5]*s+_[9]*l+_[13]*u,this.z=_[2]*r+_[6]*s+_[10]*l+_[14]*u,this.w=_[3]*r+_[7]*s+_[11]*l+_[15]*u,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,s,l,u;const O=t.elements,B=O[0],ee=O[4],ae=O[8],pe=O[1],_e=O[5],Re=O[9],Ue=O[2],Le=O[6],Pe=O[10];if(Math.abs(ee-pe)<.01&&Math.abs(ae-Ue)<.01&&Math.abs(Re-Le)<.01){if(Math.abs(ee+pe)<.1&&Math.abs(ae+Ue)<.1&&Math.abs(Re+Le)<.1&&Math.abs(B+_e+Pe-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const ut=(B+1)/2,st=(_e+1)/2,Yt=(Pe+1)/2,At=(ee+pe)/4,zt=(ae+Ue)/4,tn=(Re+Le)/4;return ut>st&&ut>Yt?ut<.01?(s=0,l=.707106781,u=.707106781):(s=Math.sqrt(ut),l=At/s,u=zt/s):st>Yt?st<.01?(s=.707106781,l=0,u=.707106781):(l=Math.sqrt(st),s=At/l,u=tn/l):Yt<.01?(s=.707106781,l=.707106781,u=0):(u=Math.sqrt(Yt),s=zt/u,l=tn/u),this.set(s,l,u,r),this}let ht=Math.sqrt((Le-Re)*(Le-Re)+(ae-Ue)*(ae-Ue)+(pe-ee)*(pe-ee));return Math.abs(ht)<.001&&(ht=1),this.x=(Le-Re)/ht,this.y=(ae-Ue)/ht,this.z=(pe-ee)/ht,this.w=Math.acos((B+_e+Pe-1)/2),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=an(this.x,t.x,r.x),this.y=an(this.y,t.y,r.y),this.z=an(this.z,t.z,r.z),this.w=an(this.w,t.w,r.w),this}clampScalar(t,r){return this.x=an(this.x,t,r),this.y=an(this.y,t,r),this.z=an(this.z,t,r),this.w=an(this.w,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(an(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this.w=t.w+(r.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class au extends Mn{constructor(t=1,r=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new Vs(0,0,t,r),this.scissorTest=!1,this.viewport=new Vs(0,0,t,r);const l={width:t,height:r,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Cn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new _o(l,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const _=s.count;for(let A=0;A<_;A++)this.textures[A]=u.clone(),this.textures[A].isRenderTargetTexture=!0,this.textures[A].renderTarget=this;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,r,s=1){if(this.width!==t||this.height!==r||this.depth!==s){this.width=t,this.height=r,this.depth=s;for(let l=0,u=this.textures.length;l<u;l++)this.textures[l].image.width=t,this.textures[l].image.height=r,this.textures[l].image.depth=s;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,s=t.textures.length;r<s;r++){this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const l=Object.assign({},t.textures[r].image);this.textures[r].source=new Ha(l)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Te extends au{constructor(t=1,r=1,s={}){super(t,r,s),this.isWebGLRenderTarget=!0}}class et extends _o{constructor(t=null,r=1,s=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:s,depth:l},this.magFilter=mn,this.minFilter=mn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ze extends _o{constructor(t=null,r=1,s=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:s,depth:l},this.magFilter=mn,this.minFilter=mn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ln{constructor(t=0,r=0,s=0,l=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=s,this._w=l}static slerpFlat(t,r,s,l,u,_,A){let O=s[l+0],B=s[l+1],ee=s[l+2],ae=s[l+3];const pe=u[_+0],_e=u[_+1],Re=u[_+2],Ue=u[_+3];if(0===A)return t[r+0]=O,t[r+1]=B,t[r+2]=ee,void(t[r+3]=ae);if(1===A)return t[r+0]=pe,t[r+1]=_e,t[r+2]=Re,void(t[r+3]=Ue);if(ae!==Ue||O!==pe||B!==_e||ee!==Re){let Le=1-A;const Pe=O*pe+B*_e+ee*Re+ae*Ue,ht=Pe>=0?1:-1,ut=1-Pe*Pe;if(ut>Number.EPSILON){const Yt=Math.sqrt(ut),At=Math.atan2(Yt,Pe*ht);Le=Math.sin(Le*At)/Yt,A=Math.sin(A*At)/Yt}const st=A*ht;if(O=O*Le+pe*st,B=B*Le+_e*st,ee=ee*Le+Re*st,ae=ae*Le+Ue*st,Le===1-A){const Yt=1/Math.sqrt(O*O+B*B+ee*ee+ae*ae);O*=Yt,B*=Yt,ee*=Yt,ae*=Yt}}t[r]=O,t[r+1]=B,t[r+2]=ee,t[r+3]=ae}static multiplyQuaternionsFlat(t,r,s,l,u,_){const A=s[l],O=s[l+1],B=s[l+2],ee=s[l+3],ae=u[_],pe=u[_+1],_e=u[_+2],Re=u[_+3];return t[r]=A*Re+ee*ae+O*_e-B*pe,t[r+1]=O*Re+ee*pe+B*ae-A*_e,t[r+2]=B*Re+ee*_e+A*pe-O*ae,t[r+3]=ee*Re-A*ae-O*pe-B*_e,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,s,l){return this._x=t,this._y=r,this._z=s,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){const s=t._x,l=t._y,u=t._z,_=t._order,A=Math.cos,O=Math.sin,B=A(s/2),ee=A(l/2),ae=A(u/2),pe=O(s/2),_e=O(l/2),Re=O(u/2);switch(_){case"XYZ":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"YXZ":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;case"ZXY":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"ZYX":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;case"YZX":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"XZY":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return!0===r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const s=r/2,l=Math.sin(s);return this._x=t.x*l,this._y=t.y*l,this._z=t.z*l,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,s=r[0],l=r[4],u=r[8],_=r[1],A=r[5],O=r[9],B=r[2],ee=r[6],ae=r[10],pe=s+A+ae;if(pe>0){const _e=.5/Math.sqrt(pe+1);this._w=.25/_e,this._x=(ee-O)*_e,this._y=(u-B)*_e,this._z=(_-l)*_e}else if(s>A&&s>ae){const _e=2*Math.sqrt(1+s-A-ae);this._w=(ee-O)/_e,this._x=.25*_e,this._y=(l+_)/_e,this._z=(u+B)/_e}else if(A>ae){const _e=2*Math.sqrt(1+A-s-ae);this._w=(u-B)/_e,this._x=(l+_)/_e,this._y=.25*_e,this._z=(O+ee)/_e}else{const _e=2*Math.sqrt(1+ae-s-A);this._w=(_-l)/_e,this._x=(u+B)/_e,this._y=(O+ee)/_e,this._z=.25*_e}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let s=t.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(an(this.dot(t),-1,1)))}rotateTowards(t,r){const s=this.angleTo(t);if(0===s)return this;const l=Math.min(1,r/s);return this.slerp(t,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const s=t._x,l=t._y,u=t._z,_=t._w,A=r._x,O=r._y,B=r._z,ee=r._w;return this._x=s*ee+_*A+l*B-u*O,this._y=l*ee+_*O+u*A-s*B,this._z=u*ee+_*B+s*O-l*A,this._w=_*ee-s*A-l*O-u*B,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const s=this._x,l=this._y,u=this._z,_=this._w;let A=_*t._w+s*t._x+l*t._y+u*t._z;if(A<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,A=-A):this.copy(t),A>=1)return this._w=_,this._x=s,this._y=l,this._z=u,this;const O=1-A*A;if(O<=Number.EPSILON){const _e=1-r;return this._w=_e*_+r*this._w,this._x=_e*s+r*this._x,this._y=_e*l+r*this._y,this._z=_e*u+r*this._z,this.normalize(),this}const B=Math.sqrt(O),ee=Math.atan2(B,A),ae=Math.sin((1-r)*ee)/B,pe=Math.sin(r*ee)/B;return this._w=_*ae+this._w*pe,this._x=s*ae+this._x*pe,this._y=l*ae+this._y*pe,this._z=u*ae+this._z*pe,this._onChangeCallback(),this}slerpQuaternions(t,r,s){return this.copy(t).slerp(r,s)}random(){const t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),s=Math.random(),l=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(l*Math.sin(t),l*Math.cos(t),u*Math.sin(r),u*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class xt{constructor(t=0,r=0,s=0){xt.prototype.isVector3=!0,this.x=t,this.y=r,this.z=s}set(t,r,s){return void 0===s&&(s=this.z),this.x=t,this.y=r,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(rs.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(rs.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,s=this.y,l=this.z,u=t.elements;return this.x=u[0]*r+u[3]*s+u[6]*l,this.y=u[1]*r+u[4]*s+u[7]*l,this.z=u[2]*r+u[5]*s+u[8]*l,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,s=this.y,l=this.z,u=t.elements,_=1/(u[3]*r+u[7]*s+u[11]*l+u[15]);return this.x=(u[0]*r+u[4]*s+u[8]*l+u[12])*_,this.y=(u[1]*r+u[5]*s+u[9]*l+u[13])*_,this.z=(u[2]*r+u[6]*s+u[10]*l+u[14])*_,this}applyQuaternion(t){const r=this.x,s=this.y,l=this.z,u=t.x,_=t.y,A=t.z,O=t.w,B=2*(_*l-A*s),ee=2*(A*r-u*l),ae=2*(u*s-_*r);return this.x=r+O*B+_*ae-A*ee,this.y=s+O*ee+A*B-u*ae,this.z=l+O*ae+u*ee-_*B,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,s=this.y,l=this.z,u=t.elements;return this.x=u[0]*r+u[4]*s+u[8]*l,this.y=u[1]*r+u[5]*s+u[9]*l,this.z=u[2]*r+u[6]*s+u[10]*l,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=an(this.x,t.x,r.x),this.y=an(this.y,t.y,r.y),this.z=an(this.z,t.z,r.z),this}clampScalar(t,r){return this.x=an(this.x,t,r),this.y=an(this.y,t,r),this.z=an(this.z,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(an(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const s=t.x,l=t.y,u=t.z,_=r.x,A=r.y,O=r.z;return this.x=l*O-u*A,this.y=u*_-s*O,this.z=s*A-l*_,this}projectOnVector(t){const r=t.lengthSq();if(0===r)return this.set(0,0,0);const s=t.dot(this)/r;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Fr.copy(this).projectOnVector(t),this.sub(Fr)}reflect(t){return this.sub(Fr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(an(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y,l=this.z-t.z;return r*r+s*s+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,s){const l=Math.sin(r)*t;return this.x=l*Math.sin(s),this.y=Math.cos(r)*t,this.z=l*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,s){return this.x=t*Math.sin(r),this.y=s,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),l=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=s,this.z=l,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,r=2*Math.random()-1,s=Math.sqrt(1-r*r);return this.x=s*Math.cos(t),this.y=r,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Fr=new xt,rs=new ln;class ot{constructor(t=new xt(1/0,1/0,1/0),r=new xt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r+=3)this.expandByPoint(ve.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,s=t.count;r<s;r++)this.expandByPoint(ve.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const s=ve.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===r&&void 0!==u&&!0!==t.isInstancedMesh)for(let _=0,A=u.count;_<A;_++)!0===t.isMesh?t.getVertexPosition(_,ve):ve.fromBufferAttribute(u,_),ve.applyMatrix4(t.matrixWorld),this.expandByPoint(ve);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),ze.copy(t.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),ze.copy(s.boundingBox)),ze.applyMatrix4(t.matrixWorld),this.union(ze)}const l=t.children;for(let u=0,_=l.length;u<_;u++)this.expandByObject(l[u],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ve),ve.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,s;return t.normal.x>0?(r=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),r<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xr),oi.subVectors(this.max,Xr),at.subVectors(t.a,Xr),kt.subVectors(t.b,Xr),En.subVectors(t.c,Xr),Sn.subVectors(kt,at),Hn.subVectors(En,kt),or.subVectors(at,En);let r=[0,-Sn.z,Sn.y,0,-Hn.z,Hn.y,0,-or.z,or.y,Sn.z,0,-Sn.x,Hn.z,0,-Hn.x,or.z,0,-or.x,-Sn.y,Sn.x,0,-Hn.y,Hn.x,0,-or.y,or.x,0];return!(!Wi(r,at,kt,En,oi)||(r=[1,0,0,0,1,0,0,0,1],!Wi(r,at,kt,En,oi)))&&(Oi.crossVectors(Sn,Hn),r=[Oi.x,Oi.y,Oi.z],Wi(r,at,kt,En,oi))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ve).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ve).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ue[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ue[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ue[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ue[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ue[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ue[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ue[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ue[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ue)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ue=[new xt,new xt,new xt,new xt,new xt,new xt,new xt,new xt],ve=new xt,ze=new ot,at=new xt,kt=new xt,En=new xt,Sn=new xt,Hn=new xt,or=new xt,Xr=new xt,oi=new xt,Oi=new xt,Qi=new xt;function Wi(v,t,r,s,l){for(let u=0,_=v.length-3;u<=_;u+=3){Qi.fromArray(v,u);const A=l.x*Math.abs(Qi.x)+l.y*Math.abs(Qi.y)+l.z*Math.abs(Qi.z),O=t.dot(Qi),B=r.dot(Qi),ee=s.dot(Qi);if(Math.max(-Math.max(O,B,ee),Math.min(O,B,ee))>A)return!1}return!0}const is=new ot,Ks=new xt,Go=new xt;class us{constructor(t=new xt,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const s=this.center;void 0!==r?s.copy(r):is.setFromPoints(t).getCenter(s);let l=0;for(let u=0,_=t.length;u<_;u++)l=Math.max(l,s.distanceToSquared(t[u]));return this.radius=Math.sqrt(l),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const s=this.center.distanceToSquared(t);return r.copy(t),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ks.subVectors(t,this.center);const r=Ks.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),l=.5*(s-this.radius);this.center.addScaledVector(Ks,l/s),this.radius+=l}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Go.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ks.copy(t.center).add(Go)),this.expandByPoint(Ks.copy(t.center).sub(Go))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const po=new xt,ia=new xt,ll=new xt,sa=new xt,fa=new xt,cl=new xt,ul=new xt;class zo{constructor(t=new xt,r=new xt(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,po)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=po.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(po.copy(this.origin).addScaledVector(this.direction,r),po.distanceToSquared(t))}distanceSqToSegment(t,r,s,l){ia.copy(t).add(r).multiplyScalar(.5),ll.copy(r).sub(t).normalize(),sa.copy(this.origin).sub(ia);const u=.5*t.distanceTo(r),_=-this.direction.dot(ll),A=sa.dot(this.direction),O=-sa.dot(ll),B=sa.lengthSq(),ee=Math.abs(1-_*_);let ae,pe,_e,Re;if(ee>0)if(ae=_*O-A,pe=_*A-O,Re=u*ee,ae>=0)if(pe>=-Re)if(pe<=Re){const Ue=1/ee;ae*=Ue,pe*=Ue,_e=ae*(ae+_*pe+2*A)+pe*(_*ae+pe+2*O)+B}else pe=u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*O)+B;else pe=-u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*O)+B;else pe<=-Re?(ae=Math.max(0,-(-_*u+A)),pe=ae>0?-u:Math.min(Math.max(-u,-O),u),_e=-ae*ae+pe*(pe+2*O)+B):pe<=Re?(ae=0,pe=Math.min(Math.max(-u,-O),u),_e=pe*(pe+2*O)+B):(ae=Math.max(0,-(_*u+A)),pe=ae>0?u:Math.min(Math.max(-u,-O),u),_e=-ae*ae+pe*(pe+2*O)+B);else pe=_>0?-u:u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*O)+B;return s&&s.copy(this.origin).addScaledVector(this.direction,ae),l&&l.copy(ia).addScaledVector(ll,pe),_e}intersectSphere(t,r){po.subVectors(t.center,this.origin);const s=po.dot(this.direction),l=po.dot(po)-s*s,u=t.radius*t.radius;if(l>u)return null;const _=Math.sqrt(u-l),A=s-_,O=s+_;return O<0?null:this.at(A<0?O:A,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/r;return s>=0?s:null}intersectPlane(t,r){const s=this.distanceToPlane(t);return null===s?null:this.at(s,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let s,l,u,_,A,O;const B=1/this.direction.x,ee=1/this.direction.y,ae=1/this.direction.z,pe=this.origin;return B>=0?(s=(t.min.x-pe.x)*B,l=(t.max.x-pe.x)*B):(s=(t.max.x-pe.x)*B,l=(t.min.x-pe.x)*B),ee>=0?(u=(t.min.y-pe.y)*ee,_=(t.max.y-pe.y)*ee):(u=(t.max.y-pe.y)*ee,_=(t.min.y-pe.y)*ee),s>_||u>l||((u>s||isNaN(s))&&(s=u),(_<l||isNaN(l))&&(l=_),ae>=0?(A=(t.min.z-pe.z)*ae,O=(t.max.z-pe.z)*ae):(A=(t.max.z-pe.z)*ae,O=(t.min.z-pe.z)*ae),s>O||A>l)||((A>s||s!=s)&&(s=A),(O<l||l!=l)&&(l=O),l<0)?null:this.at(s>=0?s:l,r)}intersectsBox(t){return null!==this.intersectBox(t,po)}intersectTriangle(t,r,s,l,u){fa.subVectors(r,t),cl.subVectors(s,t),ul.crossVectors(fa,cl);let A,_=this.direction.dot(ul);if(_>0){if(l)return null;A=1}else{if(!(_<0))return null;A=-1,_=-_}sa.subVectors(this.origin,t);const O=A*this.direction.dot(cl.crossVectors(sa,cl));if(O<0)return null;const B=A*this.direction.dot(fa.cross(sa));if(B<0||O+B>_)return null;const ee=-A*sa.dot(ul);return ee<0?null:this.at(ee/_,u)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Li{constructor(t,r,s,l,u,_,A,O,B,ee,ae,pe,_e,Re,Ue,Le){Li.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,r,s,l,u,_,A,O,B,ee,ae,pe,_e,Re,Ue,Le)}set(t,r,s,l,u,_,A,O,B,ee,ae,pe,_e,Re,Ue,Le){const Pe=this.elements;return Pe[0]=t,Pe[4]=r,Pe[8]=s,Pe[12]=l,Pe[1]=u,Pe[5]=_,Pe[9]=A,Pe[13]=O,Pe[2]=B,Pe[6]=ee,Pe[10]=ae,Pe[14]=pe,Pe[3]=_e,Pe[7]=Re,Pe[11]=Ue,Pe[15]=Le,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Li).fromArray(this.elements)}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(t){const r=this.elements,s=t.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,s){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,r,s){return this.set(t.x,r.x,s.x,0,t.y,r.y,s.y,0,t.z,r.z,s.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,s=t.elements,l=1/Al.setFromMatrixColumn(t,0).length(),u=1/Al.setFromMatrixColumn(t,1).length(),_=1/Al.setFromMatrixColumn(t,2).length();return r[0]=s[0]*l,r[1]=s[1]*l,r[2]=s[2]*l,r[3]=0,r[4]=s[4]*u,r[5]=s[5]*u,r[6]=s[6]*u,r[7]=0,r[8]=s[8]*_,r[9]=s[9]*_,r[10]=s[10]*_,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,s=t.x,l=t.y,u=t.z,_=Math.cos(s),A=Math.sin(s),O=Math.cos(l),B=Math.sin(l),ee=Math.cos(u),ae=Math.sin(u);if("XYZ"===t.order){const pe=_*ee,_e=_*ae,Re=A*ee,Ue=A*ae;r[0]=O*ee,r[4]=-O*ae,r[8]=B,r[1]=_e+Re*B,r[5]=pe-Ue*B,r[9]=-A*O,r[2]=Ue-pe*B,r[6]=Re+_e*B,r[10]=_*O}else if("YXZ"===t.order){const pe=O*ee,_e=O*ae,Re=B*ee,Ue=B*ae;r[0]=pe+Ue*A,r[4]=Re*A-_e,r[8]=_*B,r[1]=_*ae,r[5]=_*ee,r[9]=-A,r[2]=_e*A-Re,r[6]=Ue+pe*A,r[10]=_*O}else if("ZXY"===t.order){const pe=O*ee,_e=O*ae,Re=B*ee,Ue=B*ae;r[0]=pe-Ue*A,r[4]=-_*ae,r[8]=Re+_e*A,r[1]=_e+Re*A,r[5]=_*ee,r[9]=Ue-pe*A,r[2]=-_*B,r[6]=A,r[10]=_*O}else if("ZYX"===t.order){const pe=_*ee,_e=_*ae,Re=A*ee,Ue=A*ae;r[0]=O*ee,r[4]=Re*B-_e,r[8]=pe*B+Ue,r[1]=O*ae,r[5]=Ue*B+pe,r[9]=_e*B-Re,r[2]=-B,r[6]=A*O,r[10]=_*O}else if("YZX"===t.order){const pe=_*O,_e=_*B,Re=A*O,Ue=A*B;r[0]=O*ee,r[4]=Ue-pe*ae,r[8]=Re*ae+_e,r[1]=ae,r[5]=_*ee,r[9]=-A*ee,r[2]=-B*ee,r[6]=_e*ae+Re,r[10]=pe-Ue*ae}else if("XZY"===t.order){const pe=_*O,_e=_*B,Re=A*O,Ue=A*B;r[0]=O*ee,r[4]=-ae,r[8]=B*ee,r[1]=pe*ae+Ue,r[5]=_*ee,r[9]=_e*ae-Re,r[2]=Re*ae-_e,r[6]=A*ee,r[10]=Ue*ae+pe}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Gf,t,Ou)}lookAt(t,r,s){const l=this.elements;return pi.subVectors(t,r),0===pi.lengthSq()&&(pi.z=1),pi.normalize(),li.crossVectors(s,pi),0===li.lengthSq()&&(1===Math.abs(s.z)?pi.x+=1e-4:pi.z+=1e-4,pi.normalize(),li.crossVectors(s,pi)),li.normalize(),ei.crossVectors(pi,li),l[0]=li.x,l[4]=ei.x,l[8]=pi.x,l[1]=li.y,l[5]=ei.y,l[9]=pi.y,l[2]=li.z,l[6]=ei.z,l[10]=pi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,l=r.elements,u=this.elements,_=s[0],A=s[4],O=s[8],B=s[12],ee=s[1],ae=s[5],pe=s[9],_e=s[13],Re=s[2],Ue=s[6],Le=s[10],Pe=s[14],ht=s[3],ut=s[7],st=s[11],Yt=s[15],At=l[0],zt=l[4],tn=l[8],Pt=l[12],Tt=l[1],wn=l[5],er=l[9],Kn=l[13],rr=l[2],wr=l[6],tr=l[10],Wr=l[14],cr=l[3],Zr=l[7],hi=l[11],Pi=l[15];return u[0]=_*At+A*Tt+O*rr+B*cr,u[4]=_*zt+A*wn+O*wr+B*Zr,u[8]=_*tn+A*er+O*tr+B*hi,u[12]=_*Pt+A*Kn+O*Wr+B*Pi,u[1]=ee*At+ae*Tt+pe*rr+_e*cr,u[5]=ee*zt+ae*wn+pe*wr+_e*Zr,u[9]=ee*tn+ae*er+pe*tr+_e*hi,u[13]=ee*Pt+ae*Kn+pe*Wr+_e*Pi,u[2]=Re*At+Ue*Tt+Le*rr+Pe*cr,u[6]=Re*zt+Ue*wn+Le*wr+Pe*Zr,u[10]=Re*tn+Ue*er+Le*tr+Pe*hi,u[14]=Re*Pt+Ue*Kn+Le*Wr+Pe*Pi,u[3]=ht*At+ut*Tt+st*rr+Yt*cr,u[7]=ht*zt+ut*wn+st*wr+Yt*Zr,u[11]=ht*tn+ut*er+st*tr+Yt*hi,u[15]=ht*Pt+ut*Kn+st*Wr+Yt*Pi,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[4],l=t[8],u=t[12],_=t[1],A=t[5],O=t[9],B=t[13],ee=t[2],ae=t[6],pe=t[10],_e=t[14];return t[3]*(+u*O*ae-l*B*ae-u*A*pe+s*B*pe+l*A*_e-s*O*_e)+t[7]*(+r*O*_e-r*B*pe+u*_*pe-l*_*_e+l*B*ee-u*O*ee)+t[11]*(+r*B*ae-r*A*_e-u*_*ae+s*_*_e+u*A*ee-s*B*ee)+t[15]*(-l*A*ee-r*O*ae+r*A*pe+l*_*ae-s*_*pe+s*O*ee)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,s){const l=this.elements;return t.isVector3?(l[12]=t.x,l[13]=t.y,l[14]=t.z):(l[12]=t,l[13]=r,l[14]=s),this}invert(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],_=t[4],A=t[5],O=t[6],B=t[7],ee=t[8],ae=t[9],pe=t[10],_e=t[11],Re=t[12],Ue=t[13],Le=t[14],Pe=t[15],ht=ae*Le*B-Ue*pe*B+Ue*O*_e-A*Le*_e-ae*O*Pe+A*pe*Pe,ut=Re*pe*B-ee*Le*B-Re*O*_e+_*Le*_e+ee*O*Pe-_*pe*Pe,st=ee*Ue*B-Re*ae*B+Re*A*_e-_*Ue*_e-ee*A*Pe+_*ae*Pe,Yt=Re*ae*O-ee*Ue*O-Re*A*pe+_*Ue*pe+ee*A*Le-_*ae*Le,At=r*ht+s*ut+l*st+u*Yt;if(0===At)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const zt=1/At;return t[0]=ht*zt,t[1]=(Ue*pe*u-ae*Le*u-Ue*l*_e+s*Le*_e+ae*l*Pe-s*pe*Pe)*zt,t[2]=(A*Le*u-Ue*O*u+Ue*l*B-s*Le*B-A*l*Pe+s*O*Pe)*zt,t[3]=(ae*O*u-A*pe*u-ae*l*B+s*pe*B+A*l*_e-s*O*_e)*zt,t[4]=ut*zt,t[5]=(ee*Le*u-Re*pe*u+Re*l*_e-r*Le*_e-ee*l*Pe+r*pe*Pe)*zt,t[6]=(Re*O*u-_*Le*u-Re*l*B+r*Le*B+_*l*Pe-r*O*Pe)*zt,t[7]=(_*pe*u-ee*O*u+ee*l*B-r*pe*B-_*l*_e+r*O*_e)*zt,t[8]=st*zt,t[9]=(Re*ae*u-ee*Ue*u-Re*s*_e+r*Ue*_e+ee*s*Pe-r*ae*Pe)*zt,t[10]=(_*Ue*u-Re*A*u+Re*s*B-r*Ue*B-_*s*Pe+r*A*Pe)*zt,t[11]=(ee*A*u-_*ae*u-ee*s*B+r*ae*B+_*s*_e-r*A*_e)*zt,t[12]=Yt*zt,t[13]=(ee*Ue*l-Re*ae*l+Re*s*pe-r*Ue*pe-ee*s*Le+r*ae*Le)*zt,t[14]=(Re*A*l-_*Ue*l-Re*s*O+r*Ue*O+_*s*Le-r*A*Le)*zt,t[15]=(_*ae*l-ee*A*l+ee*s*O-r*ae*O-_*s*pe+r*A*pe)*zt,this}scale(t){const r=this.elements,s=t.x,l=t.y,u=t.z;return r[0]*=s,r[4]*=l,r[8]*=u,r[1]*=s,r[5]*=l,r[9]*=u,r[2]*=s,r[6]*=l,r[10]*=u,r[3]*=s,r[7]*=l,r[11]*=u,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,r,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const s=Math.cos(r),l=Math.sin(r),u=1-s,_=t.x,A=t.y,O=t.z,B=u*_,ee=u*A;return this.set(B*_+s,B*A-l*O,B*O+l*A,0,B*A+l*O,ee*A+s,ee*O-l*_,0,B*O-l*A,ee*O+l*_,u*O*O+s,0,0,0,0,1),this}makeScale(t,r,s){return this.set(t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,r,s,l,u,_){return this.set(1,s,u,0,t,1,_,0,r,l,1,0,0,0,0,1),this}compose(t,r,s){const l=this.elements,u=r._x,_=r._y,A=r._z,O=r._w,B=u+u,ee=_+_,ae=A+A,pe=u*B,_e=u*ee,Re=u*ae,Ue=_*ee,Le=_*ae,Pe=A*ae,ht=O*B,ut=O*ee,st=O*ae,Yt=s.x,At=s.y,zt=s.z;return l[0]=(1-(Ue+Pe))*Yt,l[1]=(_e+st)*Yt,l[2]=(Re-ut)*Yt,l[3]=0,l[4]=(_e-st)*At,l[5]=(1-(pe+Pe))*At,l[6]=(Le+ht)*At,l[7]=0,l[8]=(Re+ut)*zt,l[9]=(Le-ht)*zt,l[10]=(1-(pe+Ue))*zt,l[11]=0,l[12]=t.x,l[13]=t.y,l[14]=t.z,l[15]=1,this}decompose(t,r,s){const l=this.elements;let u=Al.set(l[0],l[1],l[2]).length();const _=Al.set(l[4],l[5],l[6]).length(),A=Al.set(l[8],l[9],l[10]).length();this.determinant()<0&&(u=-u),t.x=l[12],t.y=l[13],t.z=l[14],Yo.copy(this);const B=1/u,ee=1/_,ae=1/A;return Yo.elements[0]*=B,Yo.elements[1]*=B,Yo.elements[2]*=B,Yo.elements[4]*=ee,Yo.elements[5]*=ee,Yo.elements[6]*=ee,Yo.elements[8]*=ae,Yo.elements[9]*=ae,Yo.elements[10]*=ae,r.setFromRotationMatrix(Yo),s.x=u,s.y=_,s.z=A,this}makePerspective(t,r,s,l,u,_,A=Mt){const O=this.elements,B=2*u/(r-t),ee=2*u/(s-l),ae=(r+t)/(r-t),pe=(s+l)/(s-l);let _e,Re;if(A===Mt)_e=-(_+u)/(_-u),Re=-2*_*u/(_-u);else{if(2001!==A)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+A);_e=-_/(_-u),Re=-_*u/(_-u)}return O[0]=B,O[4]=0,O[8]=ae,O[12]=0,O[1]=0,O[5]=ee,O[9]=pe,O[13]=0,O[2]=0,O[6]=0,O[10]=_e,O[14]=Re,O[3]=0,O[7]=0,O[11]=-1,O[15]=0,this}makeOrthographic(t,r,s,l,u,_,A=Mt){const O=this.elements,B=1/(r-t),ee=1/(s-l),ae=1/(_-u),pe=(r+t)*B,_e=(s+l)*ee;let Re,Ue;if(A===Mt)Re=(_+u)*ae,Ue=-2*ae;else{if(2001!==A)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+A);Re=u*ae,Ue=-1*ae}return O[0]=2*B,O[4]=0,O[8]=0,O[12]=-pe,O[1]=0,O[5]=2*ee,O[9]=0,O[13]=-_e,O[2]=0,O[6]=0,O[10]=Ue,O[14]=-Re,O[3]=0,O[7]=0,O[11]=0,O[15]=1,this}equals(t){const r=this.elements,s=t.elements;for(let l=0;l<16;l++)if(r[l]!==s[l])return!1;return!0}fromArray(t,r=0){for(let s=0;s<16;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t[r+9]=s[9],t[r+10]=s[10],t[r+11]=s[11],t[r+12]=s[12],t[r+13]=s[13],t[r+14]=s[14],t[r+15]=s[15],t}}const Al=new xt,Yo=new Li,Gf=new xt(0,0,0),Ou=new xt(1,1,1),li=new xt,ei=new xt,pi=new xt,Ss=new Li,Oo=new ln;let $o=(()=>{class v{constructor(r=0,s=0,l=0,u=v.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=s,this._z=l,this._order=u}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,s,l,u=this._order){return this._x=r,this._y=s,this._z=l,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,s=this._order,l=!0){const u=r.elements,_=u[0],A=u[4],O=u[8],B=u[1],ee=u[5],ae=u[9],pe=u[2],_e=u[6],Re=u[10];switch(s){case"XYZ":this._y=Math.asin(an(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(-ae,Re),this._z=Math.atan2(-A,_)):(this._x=Math.atan2(_e,ee),this._z=0);break;case"YXZ":this._x=Math.asin(-an(ae,-1,1)),Math.abs(ae)<.9999999?(this._y=Math.atan2(O,Re),this._z=Math.atan2(B,ee)):(this._y=Math.atan2(-pe,_),this._z=0);break;case"ZXY":this._x=Math.asin(an(_e,-1,1)),Math.abs(_e)<.9999999?(this._y=Math.atan2(-pe,Re),this._z=Math.atan2(-A,ee)):(this._y=0,this._z=Math.atan2(B,_));break;case"ZYX":this._y=Math.asin(-an(pe,-1,1)),Math.abs(pe)<.9999999?(this._x=Math.atan2(_e,Re),this._z=Math.atan2(B,_)):(this._x=0,this._z=Math.atan2(-A,ee));break;case"YZX":this._z=Math.asin(an(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(-ae,ee),this._y=Math.atan2(-pe,_)):(this._x=0,this._y=Math.atan2(O,Re));break;case"XZY":this._z=Math.asin(-an(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(_e,ee),this._y=Math.atan2(O,_)):(this._x=Math.atan2(-ae,Re),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===l&&this._onChangeCallback(),this}setFromQuaternion(r,s,l){return Ss.makeRotationFromQuaternion(r),this.setFromRotationMatrix(Ss,s,l)}setFromVector3(r,s=this._order){return this.set(r.x,r.y,r.z,s)}reorder(r){return Oo.setFromEuler(this),this.setFromQuaternion(Oo,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return v.DEFAULT_ORDER="XYZ",v})();class _a{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let nl=0;const ao=new xt,Uc=new ln,Cl=new Li,oa=new xt,Dl=new xt,Ra=new xt,lu=new ln,cu=new xt(1,0,0),zf=new xt(0,1,0),Ld=new xt(0,0,1),$f={type:"added"},Bm={type:"removed"},rl={type:"childadded",child:null},kd={type:"childremoved",child:null};let Eo=(()=>{class v extends Mn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nl++}),this.uuid=dt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DEFAULT_UP.clone();const r=new xt,s=new $o,l=new ln,u=new xt(1,1,1);s._onChange(function _(){l.setFromEuler(s,!1)}),l._onChange(function A(){s.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Li},normalMatrix:{value:new Yi}}),this.matrix=new Li,this.matrixWorld=new Li,this.matrixAutoUpdate=v.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _a,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,s){this.quaternion.setFromAxisAngle(r,s)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,s){return Uc.setFromAxisAngle(r,s),this.quaternion.multiply(Uc),this}rotateOnWorldAxis(r,s){return Uc.setFromAxisAngle(r,s),this.quaternion.premultiply(Uc),this}rotateX(r){return this.rotateOnAxis(cu,r)}rotateY(r){return this.rotateOnAxis(zf,r)}rotateZ(r){return this.rotateOnAxis(Ld,r)}translateOnAxis(r,s){return ao.copy(r).applyQuaternion(this.quaternion),this.position.add(ao.multiplyScalar(s)),this}translateX(r){return this.translateOnAxis(cu,r)}translateY(r){return this.translateOnAxis(zf,r)}translateZ(r){return this.translateOnAxis(Ld,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(Cl.copy(this.matrixWorld).invert())}lookAt(r,s,l){r.isVector3?oa.copy(r):oa.set(r,s,l);const u=this.parent;this.updateWorldMatrix(!0,!1),Dl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cl.lookAt(Dl,oa,this.up):Cl.lookAt(oa,Dl,this.up),this.quaternion.setFromRotationMatrix(Cl),u&&(Cl.extractRotation(u.matrixWorld),Uc.setFromRotationMatrix(Cl),this.quaternion.premultiply(Uc.invert()))}add(r){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.removeFromParent(),r.parent=this,this.children.push(r),r.dispatchEvent($f),rl.child=r,this.dispatchEvent(rl),rl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(r);return-1!==s&&(r.parent=null,this.children.splice(s,1),r.dispatchEvent(Bm),kd.child=r,this.dispatchEvent(kd),kd.child=null),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){return this.remove(...this.children)}attach(r){return this.updateWorldMatrix(!0,!1),Cl.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),Cl.multiply(r.parent.matrixWorld)),r.applyMatrix4(Cl),r.removeFromParent(),r.parent=this,this.children.push(r),r.updateWorldMatrix(!1,!0),r.dispatchEvent($f),rl.child=r,this.dispatchEvent(rl),rl.child=null,this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,s){if(this[r]===s)return this;for(let l=0,u=this.children.length;l<u;l++){const A=this.children[l].getObjectByProperty(r,s);if(void 0!==A)return A}}getObjectsByProperty(r,s,l=[]){this[r]===s&&l.push(this);const u=this.children;for(let _=0,A=u.length;_<A;_++)u[_].getObjectsByProperty(r,s,l);return l}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dl,r,Ra),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dl,lu,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(r){r(this);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].traverseVisible(r)}traverseAncestors(r){const s=this.parent;null!==s&&(r(s),s.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,r=!0);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].updateMatrixWorld(r)}updateWorldMatrix(r,s){const l=this.parent;if(!0===r&&null!==l&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let _=0,A=u.length;_<A;_++)u[_].updateWorldMatrix(!1,!0)}}toJSON(r){const s=void 0===r||"string"==typeof r,l={};s&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function _(O,B){return void 0===O[B.uuid]&&(O[B.uuid]=B.toJSON(r)),B.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(O=>({boxInitialized:O.boxInitialized,boxMin:O.box.min.toArray(),boxMax:O.box.max.toArray(),sphereInitialized:O.sphereInitialized,sphereRadius:O.sphere.radius,sphereCenter:O.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(r),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(r)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=_(r.geometries,this.geometry);const O=this.geometry.parameters;if(void 0!==O&&void 0!==O.shapes){const B=O.shapes;if(Array.isArray(B))for(let ee=0,ae=B.length;ee<ae;ee++)_(r.shapes,B[ee]);else _(r.shapes,B)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(_(r.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const O=[];for(let B=0,ee=this.material.length;B<ee;B++)O.push(_(r.materials,this.material[B]));u.material=O}else u.material=_(r.materials,this.material);if(this.children.length>0){u.children=[];for(let O=0;O<this.children.length;O++)u.children.push(this.children[O].toJSON(r).object)}if(this.animations.length>0){u.animations=[];for(let O=0;O<this.animations.length;O++)u.animations.push(_(r.animations,this.animations[O]))}if(s){const O=A(r.geometries),B=A(r.materials),ee=A(r.textures),ae=A(r.images),pe=A(r.shapes),_e=A(r.skeletons),Re=A(r.animations),Ue=A(r.nodes);O.length>0&&(l.geometries=O),B.length>0&&(l.materials=B),ee.length>0&&(l.textures=ee),ae.length>0&&(l.images=ae),pe.length>0&&(l.shapes=pe),_e.length>0&&(l.skeletons=_e),Re.length>0&&(l.animations=Re),Ue.length>0&&(l.nodes=Ue)}return l.object=u,l;function A(O){const B=[];for(const ee in O){const ae=O[ee];delete ae.metadata,B.push(ae)}return B}}clone(r){return(new this.constructor).copy(this,r)}copy(r,s=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations.slice(),this.userData=JSON.parse(JSON.stringify(r.userData)),!0===s)for(let l=0;l<r.children.length;l++)this.add(r.children[l].clone());return this}}return v.DEFAULT_UP=new xt(0,1,0),v.DEFAULT_MATRIX_AUTO_UPDATE=!0,v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,v})();const dc=new xt,Bc=new xt,Hf=new xt,Vc=new xt,Lu=new xt,rd=new xt,me=new xt,Ae=new xt,$e=new xt,Me=new xt,Ke=new Vs,Rt=new Vs,Gt=new Vs;class Vn{constructor(t=new xt,r=new xt,s=new xt){this.a=t,this.b=r,this.c=s}static getNormal(t,r,s,l){l.subVectors(s,r),dc.subVectors(t,r),l.cross(dc);const u=l.lengthSq();return u>0?l.multiplyScalar(1/Math.sqrt(u)):l.set(0,0,0)}static getBarycoord(t,r,s,l,u){dc.subVectors(l,r),Bc.subVectors(s,r),Hf.subVectors(t,r);const _=dc.dot(dc),A=dc.dot(Bc),O=dc.dot(Hf),B=Bc.dot(Bc),ee=Bc.dot(Hf),ae=_*B-A*A;if(0===ae)return u.set(0,0,0),null;const pe=1/ae,_e=(B*O-A*ee)*pe,Re=(_*ee-A*O)*pe;return u.set(1-_e-Re,Re,_e)}static containsPoint(t,r,s,l){return null!==this.getBarycoord(t,r,s,l,Vc)&&Vc.x>=0&&Vc.y>=0&&Vc.x+Vc.y<=1}static getInterpolation(t,r,s,l,u,_,A,O){return null===this.getBarycoord(t,r,s,l,Vc)?(O.x=0,O.y=0,"z"in O&&(O.z=0),"w"in O&&(O.w=0),null):(O.setScalar(0),O.addScaledVector(u,Vc.x),O.addScaledVector(_,Vc.y),O.addScaledVector(A,Vc.z),O)}static getInterpolatedAttribute(t,r,s,l,u,_){return Ke.setScalar(0),Rt.setScalar(0),Gt.setScalar(0),Ke.fromBufferAttribute(t,r),Rt.fromBufferAttribute(t,s),Gt.fromBufferAttribute(t,l),_.setScalar(0),_.addScaledVector(Ke,u.x),_.addScaledVector(Rt,u.y),_.addScaledVector(Gt,u.z),_}static isFrontFacing(t,r,s,l){return dc.subVectors(s,r),Bc.subVectors(t,r),dc.cross(Bc).dot(l)<0}set(t,r,s){return this.a.copy(t),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(t,r,s,l){return this.a.copy(t[r]),this.b.copy(t[s]),this.c.copy(t[l]),this}setFromAttributeAndIndices(t,r,s,l){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,l),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return dc.subVectors(this.c,this.b),Bc.subVectors(this.a,this.b),.5*dc.cross(Bc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Vn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return Vn.getBarycoord(t,this.a,this.b,this.c,r)}getInterpolation(t,r,s,l,u){return Vn.getInterpolation(t,this.a,this.b,this.c,r,s,l,u)}containsPoint(t){return Vn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Vn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const s=this.a,l=this.b,u=this.c;let _,A;Lu.subVectors(l,s),rd.subVectors(u,s),Ae.subVectors(t,s);const O=Lu.dot(Ae),B=rd.dot(Ae);if(O<=0&&B<=0)return r.copy(s);$e.subVectors(t,l);const ee=Lu.dot($e),ae=rd.dot($e);if(ee>=0&&ae<=ee)return r.copy(l);const pe=O*ae-ee*B;if(pe<=0&&O>=0&&ee<=0)return _=O/(O-ee),r.copy(s).addScaledVector(Lu,_);Me.subVectors(t,u);const _e=Lu.dot(Me),Re=rd.dot(Me);if(Re>=0&&_e<=Re)return r.copy(u);const Ue=_e*B-O*Re;if(Ue<=0&&B>=0&&Re<=0)return A=B/(B-Re),r.copy(s).addScaledVector(rd,A);const Le=ee*Re-_e*ae;if(Le<=0&&ae-ee>=0&&_e-Re>=0)return me.subVectors(u,l),A=(ae-ee)/(ae-ee+(_e-Re)),r.copy(l).addScaledVector(me,A);const Pe=1/(Le+Ue+pe);return _=Ue*Pe,A=pe*Pe,r.copy(s).addScaledVector(Lu,_).addScaledVector(rd,A)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kn={h:0,s:0,l:0},zr={h:0,s:0,l:0};function Ai(v,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?v+6*(t-v)*r:r<.5?t:r<2/3?v+6*(t-v)*(2/3-r):v}class Nr{constructor(t,r,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,s)}set(t,r,s){if(void 0===r&&void 0===s){const l=t;l&&l.isColor?this.copy(l):"number"==typeof l?this.setHex(l):"string"==typeof l&&this.setStyle(l)}else this.setRGB(t,r,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Vi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,xs.toWorkingColorSpace(this,r),this}setRGB(t,r,s,l=xs.workingColorSpace){return this.r=t,this.g=r,this.b=s,xs.toWorkingColorSpace(this,l),this}setHSL(t,r,s,l=xs.workingColorSpace){if(t=Dn(t,1),r=an(r,0,1),s=an(s,0,1),0===r)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+r):s+r-s*r,_=2*s-u;this.r=Ai(_,u,t+1/3),this.g=Ai(_,u,t),this.b=Ai(_,u,t-1/3)}return xs.toWorkingColorSpace(this,l),this}setStyle(t,r=Vi){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let l;if(l=/^(\w+)\(([^\)]*)\)/.exec(t)){let u;const A=l[2];switch(l[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,r);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,r);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(t)){const u=l[1],_=u.length;if(3===_)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,r);if(6===_)return this.setHex(parseInt(u,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=Vi){const s=br[t.toLowerCase()];return void 0!==s?this.setHex(s,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ml(t.r),this.g=Ml(t.g),this.b=Ml(t.b),this}copyLinearToSRGB(t){return this.r=wc(t.r),this.g=wc(t.g),this.b=wc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Vi){return xs.fromWorkingColorSpace(mi.copy(this),t),65536*Math.round(an(255*mi.r,0,255))+256*Math.round(an(255*mi.g,0,255))+Math.round(an(255*mi.b,0,255))}getHexString(t=Vi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=xs.workingColorSpace){xs.fromWorkingColorSpace(mi.copy(this),r);const s=mi.r,l=mi.g,u=mi.b,_=Math.max(s,l,u),A=Math.min(s,l,u);let O,B;const ee=(A+_)/2;if(A===_)O=0,B=0;else{const ae=_-A;switch(B=ee<=.5?ae/(_+A):ae/(2-_-A),_){case s:O=(l-u)/ae+(l<u?6:0);break;case l:O=(u-s)/ae+2;break;case u:O=(s-l)/ae+4}O/=6}return t.h=O,t.s=B,t.l=ee,t}getRGB(t,r=xs.workingColorSpace){return xs.fromWorkingColorSpace(mi.copy(this),r),t.r=mi.r,t.g=mi.g,t.b=mi.b,t}getStyle(t=Vi){xs.fromWorkingColorSpace(mi.copy(this),t);const r=mi.r,s=mi.g,l=mi.b;return t!==Vi?`color(${t} ${r.toFixed(3)} ${s.toFixed(3)} ${l.toFixed(3)})`:`rgb(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*l)})`}offsetHSL(t,r,s){return this.getHSL(kn),this.setHSL(kn.h+t,kn.s+r,kn.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(kn),t.getHSL(zr);const s=Jr(kn.h,zr.h,r),l=Jr(kn.s,zr.s,r),u=Jr(kn.l,zr.l,r);return this.setHSL(s,l,u),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const r=this.r,s=this.g,l=this.b,u=t.elements;return this.r=u[0]*r+u[3]*s+u[6]*l,this.g=u[1]*r+u[4]*s+u[7]*l,this.b=u[2]*r+u[5]*s+u[8]*l,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mi=new Nr;Nr.NAMES=br;let Zo=0;class Zs extends Mn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zo++}),this.uuid=dt(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Nr(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vr,this.stencilZFail=Vr,this.stencilZPass=Vr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){const s=t[r];if(void 0===s){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const l=this[r];void 0!==l?l&&l.isColor?l.set(s):l&&l.isVector3&&s&&s.isVector3?l.copy(s):this[r]=s:console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`)}}toJSON(t){const r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function l(u){const _=[];for(const A in u){const O=u[A];delete O.metadata,_.push(O)}return _}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vr&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Vr&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Vr&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),r){const u=l(t.textures),_=l(t.images);u.length>0&&(s.textures=u),_.length>0&&(s.images=_)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let s=null;if(null!==r){const l=r.length;s=new Array(l);for(let u=0;u!==l;++u)s[u]=r[u].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Co extends Zs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ma=new xt,hc=new pr;let tE=0;class to{constructor(t,r,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:tE++}),this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=U,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,s){t*=this.itemSize,s*=r.itemSize;for(let l=0,u=this.itemSize;l<u;l++)this.array[t+l]=r.array[s+l];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,s=this.count;r<s;r++)hc.fromBufferAttribute(this,r),hc.applyMatrix3(t),this.setXY(r,hc.x,hc.y);else if(3===this.itemSize)for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyMatrix3(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}applyMatrix4(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyMatrix4(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyNormalMatrix(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.transformDirection(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let s=this.array[t*this.itemSize+r];return this.normalized&&(s=Ns(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=_i(s,this.array)),this.array[t*this.itemSize+r]=s,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=Ns(r,this.array)),r}setX(t,r){return this.normalized&&(r=_i(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=Ns(r,this.array)),r}setY(t,r){return this.normalized&&(r=_i(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=Ns(r,this.array)),r}setZ(t,r){return this.normalized&&(r=_i(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=Ns(r,this.array)),r}setW(t,r){return this.normalized&&(r=_i(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,s){return t*=this.itemSize,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array)),this.array[t+0]=r,this.array[t+1]=s,this}setXYZ(t,r,s,l){return t*=this.itemSize,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array),l=_i(l,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=l,this}setXYZW(t,r,s,l,u){return t*=this.itemSize,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array),l=_i(l,this.array),u=_i(u,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=l,this.array[t+3]=u,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class ku extends to{constructor(t,r,s){super(new Uint16Array(t),r,s)}}class Wf extends to{constructor(t,r,s){super(new Uint32Array(t),r,s)}}class ki extends to{constructor(t,r,s){super(new Float32Array(t),r,s)}}let Gm=0;const Rl=new Li,Hl=new Eo,xc=new xt,Pl=new ot,Th=new ot,il=new xt;class gs extends Mn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gm++}),this.uuid=dt(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(Od(t)?Wf:ku)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,s=0){this.groups.push({start:t,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new Yi).getNormalMatrix(t);s.applyNormalMatrix(u),s.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(t),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Rl.makeRotationFromQuaternion(t),this.applyMatrix4(Rl),this}rotateX(t){return Rl.makeRotationX(t),this.applyMatrix4(Rl),this}rotateY(t){return Rl.makeRotationY(t),this.applyMatrix4(Rl),this}rotateZ(t){return Rl.makeRotationZ(t),this.applyMatrix4(Rl),this}translate(t,r,s){return Rl.makeTranslation(t,r,s),this.applyMatrix4(Rl),this}scale(t,r,s){return Rl.makeScale(t,r,s),this.applyMatrix4(Rl),this}lookAt(t){return Hl.lookAt(t),Hl.updateMatrix(),this.applyMatrix4(Hl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xc).negate(),this.translate(xc.x,xc.y,xc.z),this}setFromPoints(t){const r=this.getAttribute("position");if(void 0===r){const s=[];for(let l=0,u=t.length;l<u;l++){const _=t[l];s.push(_.x,_.y,_.z||0)}this.setAttribute("position",new ki(s,3))}else{const s=Math.min(t.length,r.count);for(let l=0;l<s;l++){const u=t[l];r.setXYZ(l,u.x,u.y,u.z||0)}t.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ot);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new xt(-1/0,-1/0,-1/0),new xt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let s=0,l=r.length;s<l;s++)Pl.setFromBufferAttribute(r[s]),this.morphTargetsRelative?(il.addVectors(this.boundingBox.min,Pl.min),this.boundingBox.expandByPoint(il),il.addVectors(this.boundingBox.max,Pl.max),this.boundingBox.expandByPoint(il)):(this.boundingBox.expandByPoint(Pl.min),this.boundingBox.expandByPoint(Pl.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new us);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new xt,1/0);if(t){const s=this.boundingSphere.center;if(Pl.setFromBufferAttribute(t),r)for(let u=0,_=r.length;u<_;u++)Th.setFromBufferAttribute(r[u]),this.morphTargetsRelative?(il.addVectors(Pl.min,Th.min),Pl.expandByPoint(il),il.addVectors(Pl.max,Th.max),Pl.expandByPoint(il)):(Pl.expandByPoint(Th.min),Pl.expandByPoint(Th.max));Pl.getCenter(s);let l=0;for(let u=0,_=t.count;u<_;u++)il.fromBufferAttribute(t,u),l=Math.max(l,s.distanceToSquared(il));if(r)for(let u=0,_=r.length;u<_;u++){const A=r[u],O=this.morphTargetsRelative;for(let B=0,ee=A.count;B<ee;B++)il.fromBufferAttribute(A,B),O&&(xc.fromBufferAttribute(t,B),il.add(xc)),l=Math.max(l,s.distanceToSquared(il))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=r.position,l=r.normal,u=r.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new to(new Float32Array(4*s.count),4));const _=this.getAttribute("tangent"),A=[],O=[];for(let tn=0;tn<s.count;tn++)A[tn]=new xt,O[tn]=new xt;const B=new xt,ee=new xt,ae=new xt,pe=new pr,_e=new pr,Re=new pr,Ue=new xt,Le=new xt;function Pe(tn,Pt,Tt){B.fromBufferAttribute(s,tn),ee.fromBufferAttribute(s,Pt),ae.fromBufferAttribute(s,Tt),pe.fromBufferAttribute(u,tn),_e.fromBufferAttribute(u,Pt),Re.fromBufferAttribute(u,Tt),ee.sub(B),ae.sub(B),_e.sub(pe),Re.sub(pe);const wn=1/(_e.x*Re.y-Re.x*_e.y);isFinite(wn)&&(Ue.copy(ee).multiplyScalar(Re.y).addScaledVector(ae,-_e.y).multiplyScalar(wn),Le.copy(ae).multiplyScalar(_e.x).addScaledVector(ee,-Re.x).multiplyScalar(wn),A[tn].add(Ue),A[Pt].add(Ue),A[Tt].add(Ue),O[tn].add(Le),O[Pt].add(Le),O[Tt].add(Le))}let ht=this.groups;0===ht.length&&(ht=[{start:0,count:t.count}]);for(let tn=0,Pt=ht.length;tn<Pt;++tn){const Tt=ht[tn],wn=Tt.start;for(let Kn=wn,rr=wn+Tt.count;Kn<rr;Kn+=3)Pe(t.getX(Kn+0),t.getX(Kn+1),t.getX(Kn+2))}const ut=new xt,st=new xt,Yt=new xt,At=new xt;function zt(tn){Yt.fromBufferAttribute(l,tn),At.copy(Yt);const Pt=A[tn];ut.copy(Pt),ut.sub(Yt.multiplyScalar(Yt.dot(Pt))).normalize(),st.crossVectors(At,Pt);const wn=st.dot(O[tn])<0?-1:1;_.setXYZW(tn,ut.x,ut.y,ut.z,wn)}for(let tn=0,Pt=ht.length;tn<Pt;++tn){const Tt=ht[tn],wn=Tt.start;for(let Kn=wn,rr=wn+Tt.count;Kn<rr;Kn+=3)zt(t.getX(Kn+0)),zt(t.getX(Kn+1)),zt(t.getX(Kn+2))}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(void 0!==r){let s=this.getAttribute("normal");if(void 0===s)s=new to(new Float32Array(3*r.count),3),this.setAttribute("normal",s);else for(let pe=0,_e=s.count;pe<_e;pe++)s.setXYZ(pe,0,0,0);const l=new xt,u=new xt,_=new xt,A=new xt,O=new xt,B=new xt,ee=new xt,ae=new xt;if(t)for(let pe=0,_e=t.count;pe<_e;pe+=3){const Re=t.getX(pe+0),Ue=t.getX(pe+1),Le=t.getX(pe+2);l.fromBufferAttribute(r,Re),u.fromBufferAttribute(r,Ue),_.fromBufferAttribute(r,Le),ee.subVectors(_,u),ae.subVectors(l,u),ee.cross(ae),A.fromBufferAttribute(s,Re),O.fromBufferAttribute(s,Ue),B.fromBufferAttribute(s,Le),A.add(ee),O.add(ee),B.add(ee),s.setXYZ(Re,A.x,A.y,A.z),s.setXYZ(Ue,O.x,O.y,O.z),s.setXYZ(Le,B.x,B.y,B.z)}else for(let pe=0,_e=r.count;pe<_e;pe+=3)l.fromBufferAttribute(r,pe+0),u.fromBufferAttribute(r,pe+1),_.fromBufferAttribute(r,pe+2),ee.subVectors(_,u),ae.subVectors(l,u),ee.cross(ae),s.setXYZ(pe+0,ee.x,ee.y,ee.z),s.setXYZ(pe+1,ee.x,ee.y,ee.z),s.setXYZ(pe+2,ee.x,ee.y,ee.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let r=0,s=t.count;r<s;r++)il.fromBufferAttribute(t,r),il.normalize(),t.setXYZ(r,il.x,il.y,il.z)}toNonIndexed(){function t(A,O){const B=A.array,ee=A.itemSize,ae=A.normalized,pe=new B.constructor(O.length*ee);let _e=0,Re=0;for(let Ue=0,Le=O.length;Ue<Le;Ue++){_e=A.isInterleavedBufferAttribute?O[Ue]*A.data.stride+A.offset:O[Ue]*ee;for(let Pe=0;Pe<ee;Pe++)pe[Re++]=B[_e++]}return new to(pe,ee,ae)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new gs,s=this.index.array,l=this.attributes;for(const A in l){const B=t(l[A],s);r.setAttribute(A,B)}const u=this.morphAttributes;for(const A in u){const O=[],B=u[A];for(let ee=0,ae=B.length;ee<ae;ee++){const _e=t(B[ee],s);O.push(_e)}r.morphAttributes[A]=O}r.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let A=0,O=_.length;A<O;A++){const B=_[A];r.addGroup(B.start,B.count,B.materialIndex)}return r}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const O=this.parameters;for(const B in O)void 0!==O[B]&&(t[B]=O[B]);return t}t.data={attributes:{}};const r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const O in s)t.data.attributes[O]=s[O].toJSON(t.data);const l={};let u=!1;for(const O in this.morphAttributes){const B=this.morphAttributes[O],ee=[];for(let ae=0,pe=B.length;ae<pe;ae++)ee.push(B[ae].toJSON(t.data));ee.length>0&&(l[O]=ee,u=!0)}u&&(t.data.morphAttributes=l,t.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(t.data.groups=JSON.parse(JSON.stringify(_)));const A=this.boundingSphere;return null!==A&&(t.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(r));const l=t.attributes;for(const B in l)this.setAttribute(B,l[B].clone(r));const u=t.morphAttributes;for(const B in u){const ee=[],ae=u[B];for(let pe=0,_e=ae.length;pe<_e;pe++)ee.push(ae[pe].clone(r));this.morphAttributes[B]=ee}this.morphTargetsRelative=t.morphTargetsRelative;const _=t.groups;for(let B=0,ee=_.length;B<ee;B++){const ae=_[B];this.addGroup(ae.start,ae.count,ae.materialIndex)}const A=t.boundingBox;null!==A&&(this.boundingBox=A.clone());const O=t.boundingSphere;return null!==O&&(this.boundingSphere=O.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const id=new Li,sd=new zo,Xf=new us,qy=new xt,jd=new xt,Mh=new xt,Ah=new xt,Fd=new xt,du=new xt,Ky=new xt,qf=new xt;class Ps extends Eo{constructor(t=new gs,r=new Co){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=l.length;u<_;u++){const A=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}getVertexPosition(t,r){const s=this.geometry,u=s.morphAttributes.position,_=s.morphTargetsRelative;r.fromBufferAttribute(s.attributes.position,t);const A=this.morphTargetInfluences;if(u&&A){du.set(0,0,0);for(let O=0,B=u.length;O<B;O++){const ee=A[O];0!==ee&&(Fd.fromBufferAttribute(u[O],t),du.addScaledVector(_?Fd:Fd.sub(r),ee))}r.add(du)}return r}raycast(t,r){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),Xf.copy(s.boundingSphere),Xf.applyMatrix4(u),sd.copy(t.ray).recast(t.near),(!1!==Xf.containsPoint(sd.origin)||!(null===sd.intersectSphere(Xf,qy)||sd.origin.distanceToSquared(qy)>(t.far-t.near)**2))&&(id.copy(u).invert(),sd.copy(t.ray).applyMatrix4(id),(null===s.boundingBox||!1!==sd.intersectsBox(s.boundingBox))&&this._computeIntersections(t,r,sd)))}_computeIntersections(t,r,s){let l;const u=this.geometry,_=this.material,A=u.index,O=u.attributes.position,B=u.attributes.uv,ee=u.attributes.uv1,ae=u.attributes.normal,pe=u.groups,_e=u.drawRange;if(null!==A)if(Array.isArray(_))for(let Re=0,Ue=pe.length;Re<Ue;Re++){const Le=pe[Re],Pe=_[Le.materialIndex];for(let st=Math.max(Le.start,_e.start),Yt=Math.min(A.count,Math.min(Le.start+Le.count,_e.start+_e.count));st<Yt;st+=3)l=Kf(this,Pe,t,s,B,ee,ae,A.getX(st),A.getX(st+1),A.getX(st+2)),l&&(l.faceIndex=Math.floor(st/3),l.face.materialIndex=Le.materialIndex,r.push(l))}else for(let Le=Math.max(0,_e.start),Pe=Math.min(A.count,_e.start+_e.count);Le<Pe;Le+=3)l=Kf(this,_,t,s,B,ee,ae,A.getX(Le),A.getX(Le+1),A.getX(Le+2)),l&&(l.faceIndex=Math.floor(Le/3),r.push(l));else if(void 0!==O)if(Array.isArray(_))for(let Re=0,Ue=pe.length;Re<Ue;Re++){const Le=pe[Re],Pe=_[Le.materialIndex];for(let st=Math.max(Le.start,_e.start),Yt=Math.min(O.count,Math.min(Le.start+Le.count,_e.start+_e.count));st<Yt;st+=3)l=Kf(this,Pe,t,s,B,ee,ae,st,st+1,st+2),l&&(l.faceIndex=Math.floor(st/3),l.face.materialIndex=Le.materialIndex,r.push(l))}else for(let Le=Math.max(0,_e.start),Pe=Math.min(O.count,_e.start+_e.count);Le<Pe;Le+=3)l=Kf(this,_,t,s,B,ee,ae,Le,Le+1,Le+2),l&&(l.faceIndex=Math.floor(Le/3),r.push(l))}}function Kf(v,t,r,s,l,u,_,A,O,B){v.getVertexPosition(A,jd),v.getVertexPosition(O,Mh),v.getVertexPosition(B,Ah);const ee=function Yy(v,t,r,s,l,u,_,A){let O;if(O=1===t.side?s.intersectTriangle(_,u,l,!0,A):s.intersectTriangle(l,u,_,0===t.side,A),null===O)return null;qf.copy(A),qf.applyMatrix4(v.matrixWorld);const B=r.ray.origin.distanceTo(qf);return B<r.near||B>r.far?null:{distance:B,point:qf.clone(),object:v}}(v,t,r,s,jd,Mh,Ah,Ky);if(ee){const ae=new xt;Vn.getBarycoord(Ky,jd,Mh,Ah,ae),l&&(ee.uv=Vn.getInterpolatedAttribute(l,A,O,B,ae,new pr)),u&&(ee.uv1=Vn.getInterpolatedAttribute(u,A,O,B,ae,new pr)),_&&(ee.normal=Vn.getInterpolatedAttribute(_,A,O,B,ae,new xt),ee.normal.dot(s.direction)>0&&ee.normal.multiplyScalar(-1));const pe={a:A,b:O,c:B,normal:new xt,materialIndex:0};Vn.getNormal(jd,Mh,Ah,pe.normal),ee.face=pe,ee.barycoord=ae}return ee}class Gc extends gs{constructor(t=1,r=1,s=1,l=1,u=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:s,widthSegments:l,heightSegments:u,depthSegments:_};const A=this;l=Math.floor(l),u=Math.floor(u),_=Math.floor(_);const O=[],B=[],ee=[],ae=[];let pe=0,_e=0;function Re(Ue,Le,Pe,ht,ut,st,Yt,At,zt,tn,Pt){const Tt=st/zt,wn=Yt/tn,er=st/2,Kn=Yt/2,rr=At/2,wr=zt+1,tr=tn+1;let Wr=0,cr=0;const Zr=new xt;for(let hi=0;hi<tr;hi++){const Pi=hi*wn-Kn;for(let as=0;as<wr;as++)Zr[Ue]=(as*Tt-er)*ht,Zr[Le]=Pi*ut,Zr[Pe]=rr,B.push(Zr.x,Zr.y,Zr.z),Zr[Ue]=0,Zr[Le]=0,Zr[Pe]=At>0?1:-1,ee.push(Zr.x,Zr.y,Zr.z),ae.push(as/zt),ae.push(1-hi/tn),Wr+=1}for(let hi=0;hi<tn;hi++)for(let Pi=0;Pi<zt;Pi++){const Ts=pe+Pi+wr*(hi+1),Tr=pe+(Pi+1)+wr*(hi+1),ti=pe+(Pi+1)+wr*hi;O.push(pe+Pi+wr*hi,Ts,ti),O.push(Ts,Tr,ti),cr+=6}A.addGroup(_e,cr,Pt),_e+=cr,pe+=Wr}Re("z","y","x",-1,-1,s,r,t,_,u,0),Re("z","y","x",1,-1,s,r,-t,_,u,1),Re("x","z","y",1,1,t,s,r,l,_,2),Re("x","z","y",1,-1,t,s,-r,l,_,3),Re("x","y","z",1,-1,t,r,s,l,u,4),Re("x","y","z",-1,-1,t,r,-s,l,u,5),this.setIndex(O),this.setAttribute("position",new ki(B,3)),this.setAttribute("normal",new ki(ee,3)),this.setAttribute("uv",new ki(ae,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Gc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ud(v){const t={};for(const r in v){t[r]={};for(const s in v[r]){const l=v[r][s];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][s]=null):t[r][s]=l.clone():t[r][s]=Array.isArray(l)?l.slice():l}}return t}function Ol(v){const t={};for(let r=0;r<v.length;r++){const s=Ud(v[r]);for(const l in s)t[l]=s[l]}return t}function Zy(v){const t=v.getRenderTarget();return null===t?v.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:xs.workingColorSpace}const Lb={clone:Ud,merge:Ol};class tc extends Zs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ud(t.uniforms),this.uniformsGroups=function Ob(v){const t=[];for(let r=0;r<v.length;r++)t.push(v[r].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const l in this.uniforms){const _=this.uniforms[l].value;r.uniforms[l]=_&&_.isTexture?{type:"t",value:_.toJSON(t).uuid}:_&&_.isColor?{type:"c",value:_.getHex()}:_&&_.isVector2?{type:"v2",value:_.toArray()}:_&&_.isVector3?{type:"v3",value:_.toArray()}:_&&_.isVector4?{type:"v4",value:_.toArray()}:_&&_.isMatrix3?{type:"m3",value:_.toArray()}:_&&_.isMatrix4?{type:"m4",value:_.toArray()}:{value:_}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const s={};for(const l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}class Ho extends Eo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Li,this.projectionMatrix=new Li,this.projectionMatrixInverse=new Li,this.coordinateSystem=Mt}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const qr=new xt,es=new pr,Pa=new pr;class Lo extends Ho{constructor(t=50,r=1,s=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=l,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=2*Oe*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Fe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Oe*Math.atan(Math.tan(.5*Fe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,r,s){qr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(qr.x,qr.y).multiplyScalar(-t/qr.z),qr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(qr.x,qr.y).multiplyScalar(-t/qr.z)}getViewSize(t,r){return this.getViewBounds(t,es,Pa),r.subVectors(Pa,es)}setViewOffset(t,r,s,l,u,_){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=l,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(.5*Fe*this.fov)/this.zoom,s=2*r,l=this.aspect*s,u=-.5*l;const _=this.view;if(null!==this.view&&this.view.enabled){const O=_.fullWidth,B=_.fullHeight;u+=_.offsetX*l/O,r-=_.offsetY*s/B,l*=_.width/O,s*=_.height/B}const A=this.filmOffset;0!==A&&(u+=t*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+l,r,r-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class od extends Eo{constructor(t,r,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const l=new Lo(-90,1,t,r);l.layers=this.layers,this.add(l);const u=new Lo(-90,1,t,r);u.layers=this.layers,this.add(u);const _=new Lo(-90,1,t,r);_.layers=this.layers,this.add(_);const A=new Lo(-90,1,t,r);A.layers=this.layers,this.add(A);const O=new Lo(-90,1,t,r);O.layers=this.layers,this.add(O);const B=new Lo(-90,1,t,r);B.layers=this.layers,this.add(B)}updateCoordinateSystem(){const t=this.coordinateSystem,r=this.children.concat(),[s,l,u,_,A,O]=r;for(const B of r)this.remove(B);if(t===Mt)s.up.set(0,1,0),s.lookAt(1,0,0),l.up.set(0,1,0),l.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),_.up.set(0,0,1),_.lookAt(0,-1,0),A.up.set(0,1,0),A.lookAt(0,0,1),O.up.set(0,1,0),O.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);s.up.set(0,-1,0),s.lookAt(-1,0,0),l.up.set(0,-1,0),l.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),_.up.set(0,0,-1),_.lookAt(0,-1,0),A.up.set(0,-1,0),A.lookAt(0,0,1),O.up.set(0,-1,0),O.lookAt(0,0,-1)}for(const B of r)this.add(B),B.updateMatrixWorld()}update(t,r){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:l}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[u,_,A,O,B,ee]=this.children,ae=t.getRenderTarget(),pe=t.getActiveCubeFace(),_e=t.getActiveMipmapLevel(),Re=t.xr.enabled;t.xr.enabled=!1;const Ue=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,l),t.render(r,u),t.setRenderTarget(s,1,l),t.render(r,_),t.setRenderTarget(s,2,l),t.render(r,A),t.setRenderTarget(s,3,l),t.render(r,O),t.setRenderTarget(s,4,l),t.render(r,B),s.texture.generateMipmaps=Ue,t.setRenderTarget(s,5,l),t.render(r,ee),t.setRenderTarget(ae,pe,_e),t.xr.enabled=Re,s.texture.needsPMREMUpdate=!0}}class Do extends _o{constructor(t,r,s,l,u,_,A,O,B,ee){super(t=void 0!==t?t:[],r=void 0!==r?r:ir,s,l,u,_,A,O,B,ee),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fa extends Te{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1};this.texture=new Do([s,s,s,s,s,s],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Cn}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new Gc(5,5,5),u=new tc({name:"CubemapFromEquirect",uniforms:Ud(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=r;const _=new Ps(l,u),A=r.minFilter;return r.minFilter===fr&&(r.minFilter=Cn),new od(1,10,this).update(t,_),r.minFilter=A,_.geometry.dispose(),_.material.dispose(),this}clear(t,r,s,l){const u=t.getRenderTarget();for(let _=0;_<6;_++)t.setRenderTarget(this,_),t.clear(r,s,l);t.setRenderTarget(u)}}class sl extends Eo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ps={type:"move"};class ad{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new sl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new sl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new sl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const s of t.hand.values())this._getHandJoint(r,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,s){let l=null,u=null,_=null;const A=this._targetRay,O=this._grip,B=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(B&&t.hand){_=!0;for(const Ue of t.hand.values()){const Le=r.getJointPose(Ue,s),Pe=this._getHandJoint(B,Ue);null!==Le&&(Pe.matrix.fromArray(Le.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.rotation,Pe.scale),Pe.matrixWorldNeedsUpdate=!0,Pe.jointRadius=Le.radius),Pe.visible=null!==Le}const pe=B.joints["index-finger-tip"].position.distanceTo(B.joints["thumb-tip"].position),_e=.02,Re=.005;B.inputState.pinching&&pe>_e+Re?(B.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!B.inputState.pinching&&pe<=_e-Re&&(B.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==O&&t.gripSpace&&(u=r.getPose(t.gripSpace,s),null!==u&&(O.matrix.fromArray(u.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,u.linearVelocity?(O.hasLinearVelocity=!0,O.linearVelocity.copy(u.linearVelocity)):O.hasLinearVelocity=!1,u.angularVelocity?(O.hasAngularVelocity=!0,O.angularVelocity.copy(u.angularVelocity)):O.hasAngularVelocity=!1));null!==A&&(l=r.getPose(t.targetRaySpace,s),null===l&&null!==u&&(l=u),null!==l&&(A.matrix.fromArray(l.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,l.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(l.linearVelocity)):A.hasLinearVelocity=!1,l.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(l.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(ps)))}return null!==A&&(A.visible=null!==l),null!==O&&(O.visible=null!==u),null!==B&&(B.visible=null!==_),this}_getHandJoint(t,r){if(void 0===t.joints[r.jointName]){const s=new sl;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[r.jointName]=s,t.add(s)}return t.joints[r.jointName]}}class Jo extends Eo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $o,this.environmentIntensity=1,this.environmentRotation=new $o,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class zc{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=dt()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,s){t*=this.stride,s*=r.stride;for(let l=0,u=this.stride;l<u;l++)this.array[t+l]=r.array[s+l];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(r,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ua=new xt;class _l{constructor(t,r,s,l=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=s,this.normalized=l}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,s=this.data.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.applyMatrix4(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.applyNormalMatrix(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.transformDirection(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}getComponent(t,r){let s=this.array[t*this.data.stride+this.offset+r];return this.normalized&&(s=Ns(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=_i(s,this.array)),this.data.array[t*this.data.stride+this.offset+r]=s,this}setX(t,r){return this.normalized&&(r=_i(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=_i(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=_i(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=_i(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=Ns(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=Ns(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=Ns(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=Ns(r,this.array)),r}setXY(t,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this}setXYZ(t,r,s,l){return t=t*this.data.stride+this.offset,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array),l=_i(l,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=l,this}setXYZW(t,r,s,l,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=_i(r,this.array),s=_i(s,this.array),l=_i(l,this.array),u=_i(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=l,this.data.array[t+3]=u,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const l=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[l+u])}return new to(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new _l(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const l=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[l+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const zd=new xt,Jy=new Vs,Qy=new Vs,$m=new xt,Hm=new Li,Zf=new xt,Dh=new us,Nb=new Li,ev=new zo;class jb extends Ps{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=vn,this.bindMatrix=new Li,this.bindMatrixInverse=new Li,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new ot),this.boundingBox.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Zf),this.boundingBox.expandByPoint(Zf)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new us),this.boundingSphere.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Zf),this.boundingSphere.expandByPoint(Zf)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){const l=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Dh.copy(this.boundingSphere),Dh.applyMatrix4(l),!1!==t.ray.intersectsSphere(Dh)&&(Nb.copy(l).invert(),ev.copy(t.ray).applyMatrix4(Nb),(null===this.boundingBox||!1!==ev.intersectsBox(this.boundingBox))&&this._computeIntersections(t,r,ev)))}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Vs,r=this.geometry.attributes.skinWeight;for(let s=0,l=r.count;s<l;s++){t.fromBufferAttribute(r,s);const u=1/t.manhattanLength();u!==1/0?t.multiplyScalar(u):t.set(1,0,0,0),r.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===vn?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,r){const s=this.skeleton,l=this.geometry;Jy.fromBufferAttribute(l.attributes.skinIndex,t),Qy.fromBufferAttribute(l.attributes.skinWeight,t),zd.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let u=0;u<4;u++){const _=Qy.getComponent(u);if(0!==_){const A=Jy.getComponent(u);Hm.multiplyMatrices(s.bones[A].matrixWorld,s.boneInverses[A]),r.addScaledVector($m.copy(zd).applyMatrix4(Hm),_)}}return r.applyMatrix4(this.bindMatrixInverse)}}class tv extends Eo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends _o{constructor(t=null,r=1,s=1,l,u,_,A,O,B=mn,ee=mn,ae,pe){super(null,_,A,O,B,ee,l,u,ae,pe),this.isDataTexture=!0,this.image={data:t,width:r,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fb=new Li,iE=new Li;class Wm{constructor(t=[],r=[]){this.uuid=dt(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,l=this.bones.length;s<l;s++)this.boneInverses.push(new Li)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const s=new Li;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,r=this.boneInverses,s=this.boneMatrices,l=this.boneTexture;for(let u=0,_=t.length;u<_;u++)Fb.multiplyMatrices(t[u]?t[u].matrixWorld:iE,r[u]),Fb.toArray(s,16*u);null!==l&&(l.needsUpdate=!0)}clone(){return new Wm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const s=new Fu(r,t,t,Nt,U);return s.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=s,this}getBoneByName(t){for(let r=0,s=this.bones.length;r<s;r++){const l=this.bones[r];if(l.name===t)return l}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let s=0,l=t.bones.length;s<l;s++){const u=t.bones[s];let _=r[u];void 0===_&&(console.warn("THREE.Skeleton: No bone found with UUID:",u),_=new tv),this.bones.push(_),this.boneInverses.push((new Li).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,s=this.boneInverses;for(let l=0,u=r.length;l<u;l++)t.bones.push(r[l].uuid),t.boneInverses.push(s[l].toArray());return t}}class Ih extends to{constructor(t,r,s,l=1){super(t,r,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=l}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Rh=new Li,Ub=new Li,Xm=[],qm=new ot,nv=new Li,Jf=new Ps,Qf=new us;class Bb extends Ps{constructor(t,r,s){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Ih(new Float32Array(16*s),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let l=0;l<s;l++)this.setMatrixAt(l,nv)}computeBoundingBox(){const t=this.geometry,r=this.count;null===this.boundingBox&&(this.boundingBox=new ot),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Rh),qm.copy(t.boundingBox).applyMatrix4(Rh),this.boundingBox.union(qm)}computeBoundingSphere(){const t=this.geometry,r=this.count;null===this.boundingSphere&&(this.boundingSphere=new us),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Rh),Qf.copy(t.boundingSphere).applyMatrix4(Rh),this.boundingSphere.union(Qf)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,r){const s=r.morphTargetInfluences,l=this.morphTexture.source.data.data,_=t*(s.length+1)+1;for(let A=0;A<s.length;A++)s[A]=l[_+A]}raycast(t,r){const s=this.matrixWorld,l=this.count;if(Jf.geometry=this.geometry,Jf.material=this.material,void 0!==Jf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Qf.copy(this.boundingSphere),Qf.applyMatrix4(s),!1!==t.ray.intersectsSphere(Qf)))for(let u=0;u<l;u++){this.getMatrixAt(u,Rh),Ub.multiplyMatrices(s,Rh),Jf.matrixWorld=Ub,Jf.raycast(t,Xm);for(let _=0,A=Xm.length;_<A;_++){const O=Xm[_];O.instanceId=u,O.object=this,r.push(O)}Xm.length=0}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new Ih(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,r){const s=r.morphTargetInfluences,l=s.length+1;null===this.morphTexture&&(this.morphTexture=new Fu(new Float32Array(l*this.count),l,this.count,tt,U));const u=this.morphTexture.source.data.data;let _=0;for(let B=0;B<s.length;B++)_+=s[B];const O=l*t;u[O]=this.geometry.morphTargetsRelative?1:1-_,u.set(s,O+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const rv=new xt,Vb=new xt,iv=new Yi;class Wc{constructor(t=new xt(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,s,l){return this.normal.set(t,r,s),this.constant=l,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,s){const l=rv.subVectors(s,r).cross(Vb.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(l,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){const s=t.delta(rv),l=this.normal.dot(s);if(0===l)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;const u=-(t.start.dot(this.normal)+this.constant)/l;return u<0||u>1?null:r.copy(t.start).addScaledVector(s,u)}intersectsLine(t){const r=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return r<0&&s>0||s<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const s=r||iv.getNormalMatrix(t),l=this.coplanarPoint(rv).applyMatrix4(t),u=this.normal.applyMatrix3(s).normalize();return this.constant=-l.dot(u),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Uu=new us,ep=new xt;class tp{constructor(t=new Wc,r=new Wc,s=new Wc,l=new Wc,u=new Wc,_=new Wc){this.planes=[t,r,s,l,u,_]}set(t,r,s,l,u,_){const A=this.planes;return A[0].copy(t),A[1].copy(r),A[2].copy(s),A[3].copy(l),A[4].copy(u),A[5].copy(_),this}copy(t){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,r=Mt){const s=this.planes,l=t.elements,u=l[0],_=l[1],A=l[2],O=l[3],B=l[4],ee=l[5],ae=l[6],pe=l[7],_e=l[8],Re=l[9],Ue=l[10],Le=l[11],Pe=l[12],ht=l[13],ut=l[14],st=l[15];if(s[0].setComponents(O-u,pe-B,Le-_e,st-Pe).normalize(),s[1].setComponents(O+u,pe+B,Le+_e,st+Pe).normalize(),s[2].setComponents(O+_,pe+ee,Le+Re,st+ht).normalize(),s[3].setComponents(O-_,pe-ee,Le-Re,st-ht).normalize(),s[4].setComponents(O-A,pe-ae,Le-Ue,st-ut).normalize(),r===Mt)s[5].setComponents(O+A,pe+ae,Le+Ue,st+ut).normalize();else{if(2001!==r)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);s[5].setComponents(A,ae,Ue,ut).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Uu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const r=t.geometry;null===r.boundingSphere&&r.computeBoundingSphere(),Uu.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Uu)}intersectsSprite(t){return Uu.center.set(0,0,0),Uu.radius=.7071067811865476,Uu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Uu)}intersectsSphere(t){const r=this.planes,s=t.center,l=-t.radius;for(let u=0;u<6;u++)if(r[u].distanceToPoint(s)<l)return!1;return!0}intersectsBox(t){const r=this.planes;for(let s=0;s<6;s++){const l=r[s];if(ep.x=l.normal.x>0?t.max.x:t.min.x,ep.y=l.normal.y>0?t.max.y:t.min.y,ep.z=l.normal.z>0?t.max.z:t.min.z,l.distanceToPoint(ep)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class ol extends Zs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const kl=new xt,Oh=new xt,Jm=new Li,Hd=new zo,Bu=new us,Lh=new xt,kh=new xt;class Ec extends Eo{constructor(t=new gs,r=new ol){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[0];for(let l=1,u=r.count;l<u;l++)kl.fromBufferAttribute(r,l-1),Oh.fromBufferAttribute(r,l),s[l]=s[l-1],s[l]+=kl.distanceTo(Oh);t.setAttribute("lineDistance",new ki(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const s=this.geometry,l=this.matrixWorld,u=t.params.Line.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Bu.copy(s.boundingSphere),Bu.applyMatrix4(l),Bu.radius+=u,!1===t.ray.intersectsSphere(Bu))return;Jm.copy(l).invert(),Hd.copy(t.ray).applyMatrix4(Jm);const A=u/((this.scale.x+this.scale.y+this.scale.z)/3),O=A*A,B=this.isLineSegments?2:1,ee=s.index,pe=s.attributes.position;if(null!==ee){const _e=Math.max(0,_.start),Re=Math.min(ee.count,_.start+_.count);for(let Ue=_e,Le=Re-1;Ue<Le;Ue+=B){const Pe=ee.getX(Ue),ht=ee.getX(Ue+1),ut=Wd(this,t,Hd,O,Pe,ht,Ue);ut&&r.push(ut)}if(this.isLineLoop){const Ue=ee.getX(Re-1),Le=ee.getX(_e),Pe=Wd(this,t,Hd,O,Ue,Le,Re-1);Pe&&r.push(Pe)}}else{const _e=Math.max(0,_.start),Re=Math.min(pe.count,_.start+_.count);for(let Ue=_e,Le=Re-1;Ue<Le;Ue+=B){const Pe=Wd(this,t,Hd,O,Ue,Ue+1,Ue);Pe&&r.push(Pe)}if(this.isLineLoop){const Ue=Wd(this,t,Hd,O,Re-1,_e,Re-1);Ue&&r.push(Ue)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=l.length;u<_;u++){const A=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}}function Wd(v,t,r,s,l,u,_){const A=v.geometry.attributes.position;if(kl.fromBufferAttribute(A,l),Oh.fromBufferAttribute(A,u),r.distanceSqToSegment(kl,Oh,Lh,kh)>s)return;Lh.applyMatrix4(v.matrixWorld);const B=t.ray.origin.distanceTo(Lh);return B<t.near||B>t.far?void 0:{distance:B,point:kh.clone().applyMatrix4(v.matrixWorld),index:_,face:null,faceIndex:null,barycoord:null,object:v}}const Kc=new xt,ds=new xt;class Nl extends Ec{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[];for(let l=0,u=r.count;l<u;l+=2)Kc.fromBufferAttribute(r,l),ds.fromBufferAttribute(r,l+1),s[l]=0===l?0:s[l-1],s[l+1]=s[l]+Kc.distanceTo(ds);t.setAttribute("lineDistance",new ki(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ip extends Ec{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Vu extends Zs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const zb=new Li,Qm=new zo,sp=new us,op=new xt;class Xd extends Eo{constructor(t=new gs,r=new Vu){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){const s=this.geometry,l=this.matrixWorld,u=t.params.Points.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),sp.copy(s.boundingSphere),sp.applyMatrix4(l),sp.radius+=u,!1===t.ray.intersectsSphere(sp))return;zb.copy(l).invert(),Qm.copy(t.ray).applyMatrix4(zb);const A=u/((this.scale.x+this.scale.y+this.scale.z)/3),O=A*A,B=s.index,ae=s.attributes.position;if(null!==B)for(let Re=Math.max(0,_.start),Ue=Math.min(B.count,_.start+_.count);Re<Ue;Re++){const Le=B.getX(Re);op.fromBufferAttribute(ae,Le),Gu(op,Le,O,l,t,r,this)}else for(let Re=Math.max(0,_.start),Ue=Math.min(ae.count,_.start+_.count);Re<Ue;Re++)op.fromBufferAttribute(ae,Re),Gu(op,Re,O,l,t,r,this)}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=l.length;u<_;u++){const A=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}}function Gu(v,t,r,s,l,u,_){const A=Qm.distanceSqToPoint(v);if(A<r){const O=new xt;Qm.closestPointToPoint(v,O),O.applyMatrix4(s);const B=l.ray.origin.distanceTo(O);if(B<l.near||B>l.far)return;u.push({distance:B,distanceToRay:Math.sqrt(A),point:O,index:t,face:null,faceIndex:null,barycoord:null,object:_})}}class tg extends _o{constructor(t,r,s,l,u,_,A,O,B,ee=He){if(ee!==He&&ee!==vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&ee===He&&(s=N),void 0===s&&ee===vt&&(s=de),super(null,l,u,_,A,O,ee,s,B),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=void 0!==A?A:mn,this.minFilter=void 0!==O?O:mn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Ha(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const r=super.toJSON(t);return null!==this.compareFunction&&(r.compareFunction=this.compareFunction),r}}class gd extends gs{constructor(t=1,r=1,s=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:s,heightSegments:l};const u=t/2,_=r/2,A=Math.floor(s),O=Math.floor(l),B=A+1,ee=O+1,ae=t/A,pe=r/O,_e=[],Re=[],Ue=[],Le=[];for(let Pe=0;Pe<ee;Pe++){const ht=Pe*pe-_;for(let ut=0;ut<B;ut++)Re.push(ut*ae-u,-ht,0),Ue.push(0,0,1),Le.push(ut/A),Le.push(1-Pe/O)}for(let Pe=0;Pe<O;Pe++)for(let ht=0;ht<A;ht++){const st=ht+B*(Pe+1),Yt=ht+1+B*(Pe+1),At=ht+1+B*Pe;_e.push(ht+B*Pe,st,At),_e.push(st,Yt,At)}this.setIndex(_e),this.setAttribute("position",new ki(Re,3)),this.setAttribute("normal",new ki(Ue,3)),this.setAttribute("uv",new ki(Le,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gd(t.width,t.height,t.widthSegments,t.heightSegments)}}class ga extends Zs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Nr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new pr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Dc extends ga{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return an(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Nr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class pg extends Zs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Nr(16777215),this.specular=new Nr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new pr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class qh extends Zs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Sv extends Zs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Qc(v,t,r){return!v||!r&&v.constructor===t?v:"number"==typeof t.BYTES_PER_ELEMENT?new t(v):Array.prototype.slice.call(v)}function Tv(v){const r=v.length,s=new Array(r);for(let l=0;l!==r;++l)s[l]=l;return s.sort(function t(l,u){return v[l]-v[u]}),s}function vg(v,t,r){const s=v.length,l=new v.constructor(s);for(let u=0,_=0;_!==s;++u){const A=r[u]*t;for(let O=0;O!==t;++O)l[_++]=v[A+O]}return l}function _g(v,t,r,s){let l=1,u=v[0];for(;void 0!==u&&void 0===u[s];)u=v[l++];if(void 0===u)return;let _=u[s];if(void 0!==_)if(Array.isArray(_))do{_=u[s],void 0!==_&&(t.push(u.time),r.push(..._)),u=v[l++]}while(void 0!==u);else if(void 0!==_.toArray)do{_=u[s],void 0!==_&&(t.push(u.time),_.toArray(r,r.length)),u=v[l++]}while(void 0!==u);else do{_=u[s],void 0!==_&&(t.push(u.time),r.push(_)),u=v[l++]}while(void 0!==u)}class Kh{constructor(t,r,s,l){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new r.constructor(s),this.sampleValues=r,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let s=this._cachedIndex,l=r[s],u=r[s-1];e:{t:{let _;n:{r:if(!(t<l)){for(let A=s+2;;){if(void 0===l){if(t<u)break r;return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===A)break;if(u=l,l=r[++s],t<l)break t}_=r.length;break n}if(t>=u)break e;{const A=r[1];t<A&&(s=2,u=A);for(let O=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===O)break;if(l=u,u=r[--s-1],t>=u)break t}_=s,s=0}}for(;s<_;){const A=s+_>>>1;t<r[A]?_=A:s=A+1}if(l=r[s],u=r[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,l)}return this.interpolate_(s,u,t,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=t*l;for(let _=0;_!==l;++_)r[_]=s[u+_];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n1 extends Kh{constructor(t,r,s,l){super(t,r,s,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jo,endingEnd:jo}}intervalChanged_(t,r,s){const l=this.parameterPositions;let u=t-2,_=t+1,A=l[u],O=l[_];if(void 0===A)switch(this.getSettings_().endingStart){case ct:u=t,A=2*r-s;break;case 2402:u=l.length-2,A=r+l[u]-l[u+1];break;default:u=t,A=s}if(void 0===O)switch(this.getSettings_().endingEnd){case ct:_=t,O=2*s-r;break;case 2402:_=1,O=s+l[1]-l[0];break;default:_=t-1,O=r}const B=.5*(s-r),ee=this.valueSize;this._weightPrev=B/(r-A),this._weightNext=B/(O-s),this._offsetPrev=u*ee,this._offsetNext=_*ee}interpolate_(t,r,s,l){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,O=t*A,B=O-A,ee=this._offsetPrev,ae=this._offsetNext,pe=this._weightPrev,_e=this._weightNext,Re=(s-r)/(l-r),Ue=Re*Re,Le=Ue*Re,Pe=-pe*Le+2*pe*Ue-pe*Re,ht=(1+pe)*Le+(-1.5-2*pe)*Ue+(-.5+pe)*Re+1,ut=(-1-_e)*Le+(1.5+_e)*Ue+.5*Re,st=_e*Le-_e*Ue;for(let Yt=0;Yt!==A;++Yt)u[Yt]=Pe*_[ee+Yt]+ht*_[B+Yt]+ut*_[O+Yt]+st*_[ae+Yt];return u}}class r1 extends Kh{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t,r,s,l){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,O=t*A,B=O-A,ee=(s-r)/(l-r),ae=1-ee;for(let pe=0;pe!==A;++pe)u[pe]=_[B+pe]*ae+_[O+pe]*ee;return u}}class Av extends Kh{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ic{constructor(t,r,s,l){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Qc(r,this.TimeBufferType),this.values=Qc(s,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let s;if(r.toJSON!==this.toJSON)s=r.toJSON(t);else{s={name:t.name,times:Qc(t.times,Array),values:Qc(t.values,Array)};const l=t.getInterpolation();l!==t.DefaultInterpolation&&(s.interpolation=l)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Av(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new r1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new n1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Ro:r=this.InterpolantFactoryMethodDiscrete;break;case Vo:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ro;case this.InterpolantFactoryMethodLinear:return Vo;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const r=this.times;for(let s=0,l=r.length;s!==l;++s)r[s]+=t}return this}scale(t){if(1!==t){const r=this.times;for(let s=0,l=r.length;s!==l;++s)r[s]*=t}return this}trim(t,r){const s=this.times,l=s.length;let u=0,_=l-1;for(;u!==l&&s[u]<t;)++u;for(;-1!==_&&s[_]>r;)--_;if(++_,0!==u||_!==l){u>=_&&(_=Math.max(_,1),u=_-1);const A=this.getValueSize();this.times=s.slice(u,_),this.values=this.values.slice(u*A,_*A)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,l=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let _=null;for(let A=0;A!==u;A++){const O=s[A];if("number"==typeof O&&isNaN(O)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,A,O),t=!1;break}if(null!==_&&_>O){console.error("THREE.KeyframeTrack: Out of order keys.",this,A,O,_),t=!1;break}_=O}if(void 0!==l&&function yg(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}(l))for(let A=0,O=l.length;A!==O;++A){const B=l[A];if(isNaN(B)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,A,B),t=!1;break}}return t}optimize(){const t=this.times.slice(),r=this.values.slice(),s=this.getValueSize(),l=2302===this.getInterpolation(),u=t.length-1;let _=1;for(let A=1;A<u;++A){let O=!1;const B=t[A];if(B!==t[A+1]&&(1!==A||B!==t[0]))if(l)O=!0;else{const ae=A*s,pe=ae-s,_e=ae+s;for(let Re=0;Re!==s;++Re){const Ue=r[ae+Re];if(Ue!==r[pe+Re]||Ue!==r[_e+Re]){O=!0;break}}}if(O){if(A!==_){t[_]=t[A];const ae=A*s,pe=_*s;for(let _e=0;_e!==s;++_e)r[pe+_e]=r[ae+_e]}++_}}if(u>0){t[_]=t[u];for(let A=u*s,O=_*s,B=0;B!==s;++B)r[O+B]=r[A+B];++_}return _!==t.length?(this.times=t.slice(0,_),this.values=r.slice(0,_*s)):(this.times=t,this.values=r),this}clone(){const t=this.times.slice(),r=this.values.slice(),l=new(0,this.constructor)(this.name,t,r);return l.createInterpolant=this.createInterpolant,l}}Ic.prototype.TimeBufferType=Float32Array,Ic.prototype.ValueBufferType=Float32Array,Ic.prototype.DefaultInterpolation=Vo;class ya extends Ic{constructor(t,r,s){super(t,r,s)}}ya.prototype.ValueTypeName="bool",ya.prototype.ValueBufferType=Array,ya.prototype.DefaultInterpolation=Ro,ya.prototype.InterpolantFactoryMethodLinear=void 0,ya.prototype.InterpolantFactoryMethodSmooth=void 0;class i1 extends Ic{}i1.prototype.ValueTypeName="color";class rh extends Ic{}rh.prototype.ValueTypeName="number";class cE extends Kh{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t,r,s,l){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,O=(s-r)/(l-r);let B=t*A;for(let ee=B+A;B!==ee;B+=4)ln.slerpFlat(u,0,_,B-A,_,B,O);return u}}class yd extends Ic{InterpolantFactoryMethodLinear(t){return new cE(this.times,this.values,this.getValueSize(),t)}}yd.prototype.ValueTypeName="quaternion",yd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends Ic{constructor(t,r,s){super(t,r,s)}}Yh.prototype.ValueTypeName="string",Yh.prototype.ValueBufferType=Array,Yh.prototype.DefaultInterpolation=Ro,Yh.prototype.InterpolantFactoryMethodLinear=void 0,Yh.prototype.InterpolantFactoryMethodSmooth=void 0;class $u extends Ic{}$u.prototype.ValueTypeName="vector";class gu{constructor(t="",r=-1,s=[],l=2500){this.name=t,this.tracks=s,this.duration=r,this.blendMode=l,this.uuid=dt(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],s=t.tracks,l=1/(t.fps||1);for(let _=0,A=s.length;_!==A;++_)r.push(o1(s[_]).scale(l));const u=new this(t.name,t.duration,r,t.blendMode);return u.uuid=t.uuid,u}static toJSON(t){const r=[],s=t.tracks,l={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let u=0,_=s.length;u!==_;++u)r.push(Ic.toJSON(s[u]));return l}static CreateFromMorphTargetSequence(t,r,s,l){const u=r.length,_=[];for(let A=0;A<u;A++){let O=[],B=[];O.push((A+u-1)%u,A,(A+1)%u),B.push(0,1,0);const ee=Tv(O);O=vg(O,1,ee),B=vg(B,1,ee),!l&&0===O[0]&&(O.push(u),B.push(B[0])),_.push(new rh(".morphTargetInfluences["+r[A].name+"]",O,B).scale(1/s))}return new this(t,-1,_)}static findByName(t,r){let s=t;Array.isArray(t)||(s=t.geometry&&t.geometry.animations||t.animations);for(let l=0;l<s.length;l++)if(s[l].name===r)return s[l];return null}static CreateClipsFromMorphTargetSequences(t,r,s){const l={},u=/^([\w-]*?)([\d]+)$/;for(let A=0,O=t.length;A<O;A++){const B=t[A],ee=B.name.match(u);if(ee&&ee.length>1){const ae=ee[1];let pe=l[ae];pe||(l[ae]=pe=[]),pe.push(B)}}const _=[];for(const A in l)_.push(this.CreateFromMorphTargetSequence(A,l[A],r,s));return _}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(ae,pe,_e,Re,Ue){if(0!==_e.length){const Le=[],Pe=[];_g(_e,Le,Pe,Re),0!==Le.length&&Ue.push(new ae(pe,Le,Pe))}},l=[],u=t.name||"default",_=t.fps||30,A=t.blendMode;let O=t.length||-1;const B=t.hierarchy||[];for(let ae=0;ae<B.length;ae++){const pe=B[ae].keys;if(pe&&0!==pe.length)if(pe[0].morphTargets){const _e={};let Re;for(Re=0;Re<pe.length;Re++)if(pe[Re].morphTargets)for(let Ue=0;Ue<pe[Re].morphTargets.length;Ue++)_e[pe[Re].morphTargets[Ue]]=-1;for(const Ue in _e){const Le=[],Pe=[];for(let ht=0;ht!==pe[Re].morphTargets.length;++ht){const ut=pe[Re];Le.push(ut.time),Pe.push(ut.morphTarget===Ue?1:0)}l.push(new rh(".morphTargetInfluence["+Ue+"]",Le,Pe))}O=_e.length*_}else{const _e=".bones["+r[ae].name+"]";s($u,_e+".position",pe,"pos",l),s(yd,_e+".quaternion",pe,"rot",l),s($u,_e+".scale",pe,"scl",l)}}return 0===l.length?null:new this(u,O,l,A)}resetDuration(){let r=0;for(let s=0,l=this.tracks.length;s!==l;++s){const u=this.tracks[s];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o1(v){if(void 0===v.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function s1(v){switch(v.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rh;case"vector":case"vector2":case"vector3":case"vector4":return $u;case"color":return i1;case"quaternion":return yd;case"bool":case"boolean":return ya;case"string":return Yh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+v)}(v.type);if(void 0===v.times){const r=[],s=[];_g(v.keys,r,s,"value"),v.times=r,v.values=s}return void 0!==t.parse?t.parse(v):new t(v.name,v.times,v.values,v.interpolation)}const Kl={enabled:!1,files:{},add:function(v,t){!1!==this.enabled&&(this.files[v]=t)},get:function(v){if(!1!==this.enabled)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class a1{constructor(t,r,s){const l=this;let O,u=!1,_=0,A=0;const B=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=s,this.itemStart=function(ee){A++,!1===u&&void 0!==l.onStart&&l.onStart(ee,_,A),u=!0},this.itemEnd=function(ee){_++,void 0!==l.onProgress&&l.onProgress(ee,_,A),_===A&&(u=!1,void 0!==l.onLoad&&l.onLoad())},this.itemError=function(ee){void 0!==l.onError&&l.onError(ee)},this.resolveURL=function(ee){return O?O(ee):ee},this.setURLModifier=function(ee){return O=ee,this},this.addHandler=function(ee,ae){return B.push(ee,ae),this},this.removeHandler=function(ee){const ae=B.indexOf(ee);return-1!==ae&&B.splice(ae,2),this},this.getHandler=function(ee){for(let ae=0,pe=B.length;ae<pe;ae+=2){const _e=B[ae],Re=B[ae+1];if(_e.global&&(_e.lastIndex=0),_e.test(ee))return Re}return null}}}const l1=new a1;let aa=(()=>{class v{constructor(r){this.manager=void 0!==r?r:l1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,s){const l=this;return new Promise(function(u,_){l.load(r,u,s,_)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}return v.DEFAULT_MATERIAL_NAME="__DEFAULT",v})();const pc={};class Cv extends Error{constructor(t,r){super(t),this.response=r}}class ic extends aa{constructor(t){super(t)}load(t,r,s,l){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=Kl.get(t);if(void 0!==u)return this.manager.itemStart(t),setTimeout(()=>{r&&r(u),this.manager.itemEnd(t)},0),u;if(void 0!==pc[t])return void pc[t].push({onLoad:r,onProgress:s,onError:l});pc[t]=[],pc[t].push({onLoad:r,onProgress:s,onError:l});const _=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,O=this.responseType;fetch(_).then(B=>{if(200===B.status||0===B.status){if(0===B.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===B.body||void 0===B.body.getReader)return B;const ee=pc[t],ae=B.body.getReader(),pe=B.headers.get("X-File-Size")||B.headers.get("Content-Length"),_e=pe?parseInt(pe):0,Re=0!==_e;let Ue=0;const Le=new ReadableStream({start(Pe){!function ht(){ae.read().then(({done:ut,value:st})=>{if(ut)Pe.close();else{Ue+=st.byteLength;const Yt=new ProgressEvent("progress",{lengthComputable:Re,loaded:Ue,total:_e});for(let At=0,zt=ee.length;At<zt;At++){const tn=ee[At];tn.onProgress&&tn.onProgress(Yt)}Pe.enqueue(st),ht()}},ut=>{Pe.error(ut)})}()}});return new Response(Le)}throw new Cv(`fetch for "${B.url}" responded with ${B.status}: ${B.statusText}`,B)}).then(B=>{switch(O){case"arraybuffer":return B.arrayBuffer();case"blob":return B.blob();case"document":return B.text().then(ee=>(new DOMParser).parseFromString(ee,A));case"json":return B.json();default:if(void 0===A)return B.text();{const ae=/charset="?([^;"\s]*)"?/i.exec(A),pe=ae&&ae[1]?ae[1].toLowerCase():void 0,_e=new TextDecoder(pe);return B.arrayBuffer().then(Re=>_e.decode(Re))}}}).then(B=>{Kl.add(t,B);const ee=pc[t];delete pc[t];for(let ae=0,pe=ee.length;ae<pe;ae++){const _e=ee[ae];_e.onLoad&&_e.onLoad(B)}}).catch(B=>{const ee=pc[t];if(void 0===ee)throw this.manager.itemError(t),B;delete pc[t];for(let ae=0,pe=ee.length;ae<pe;ae++){const _e=ee[ae];_e.onError&&_e.onError(B)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Sp extends aa{constructor(t){super(t)}load(t,r,s,l){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=Kl.get(t);if(void 0!==_)return u.manager.itemStart(t),setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_;const A=yl("img");function O(){ee(),Kl.add(t,this),r&&r(this),u.manager.itemEnd(t)}function B(ae){ee(),l&&l(ae),u.manager.itemError(t),u.manager.itemEnd(t)}function ee(){A.removeEventListener("load",O,!1),A.removeEventListener("error",B,!1)}return A.addEventListener("load",O,!1),A.addEventListener("error",B,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(A.crossOrigin=this.crossOrigin),u.manager.itemStart(t),A.src=t,A}}class c1 extends aa{constructor(t){super(t)}load(t,r,s,l){const u=new _o,_=new Sp(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(t,function(A){u.image=A,u.needsUpdate=!0,void 0!==r&&r(u)},s,l),u}}class yu extends Eo{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Nr(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(r.object.target=this.target.uuid),r}}const Ep=new Li,Tp=new xt,Rv=new xt;class bg{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pr(512,512),this.map=null,this.mapPass=null,this.matrix=new Li,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tp,this._frameExtents=new pr(1,1),this._viewportCount=1,this._viewports=[new Vs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,s=this.matrix;Tp.setFromMatrixPosition(t.matrixWorld),r.position.copy(Tp),Rv.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Rv),r.updateMatrixWorld(),Ep.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ep),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Ep)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Pv extends bg{constructor(){super(new Lo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,s=2*Oe*t.angle*this.focus,l=this.mapSize.width/this.mapSize.height,u=t.distance||r.far;(s!==r.fov||l!==r.aspect||u!==r.far)&&(r.fov=s,r.aspect=l,r.far=u,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Ov extends yu{constructor(t,r,s=0,l=Math.PI/3,u=0,_=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Eo.DEFAULT_UP),this.updateMatrix(),this.target=new Eo,this.distance=s,this.angle=l,this.penumbra=u,this.decay=_,this.map=null,this.shadow=new Pv}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Rc=new Li,Zh=new xt,Mp=new xt;class dE extends bg{constructor(){super(new Lo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pr(4,2),this._viewportCount=6,this._viewports=[new Vs(2,1,1,1),new Vs(0,1,1,1),new Vs(3,1,1,1),new Vs(1,1,1,1),new Vs(3,0,1,1),new Vs(1,0,1,1)],this._cubeDirections=[new xt(1,0,0),new xt(-1,0,0),new xt(0,0,1),new xt(0,0,-1),new xt(0,1,0),new xt(0,-1,0)],this._cubeUps=[new xt(0,1,0),new xt(0,1,0),new xt(0,1,0),new xt(0,1,0),new xt(0,0,1),new xt(0,0,-1)]}updateMatrices(t,r=0){const s=this.camera,l=this.matrix,u=t.distance||s.far;u!==s.far&&(s.far=u,s.updateProjectionMatrix()),Zh.setFromMatrixPosition(t.matrixWorld),s.position.copy(Zh),Mp.copy(s.position),Mp.add(this._cubeDirections[r]),s.up.copy(this._cubeUps[r]),s.lookAt(Mp),s.updateMatrixWorld(),l.makeTranslation(-Zh.x,-Zh.y,-Zh.z),Rc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rc)}}class u1 extends yu{constructor(t,r,s=0,l=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=l,this.shadow=new dE}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class wg extends Ho{constructor(t=-1,r=1,s=1,l=-1,u=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=s,this.bottom=l,this.near=u,this.far=_,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,s,l,u,_){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=l,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let u=s-t,_=s+t,A=l+r,O=l-r;if(null!==this.view&&this.view.enabled){const B=(this.right-this.left)/this.view.fullWidth/this.zoom,ee=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=B*this.view.offsetX,_=u+B*this.view.width,A-=ee*this.view.offsetY,O=A-ee*this.view.height}this.projectionMatrix.makeOrthographic(u,_,A,O,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}class hE extends bg{constructor(){super(new wg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Lv extends yu{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Eo.DEFAULT_UP),this.updateMatrix(),this.target=new Eo,this.shadow=new hE}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class kv extends yu{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class vu{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let r="";for(let s=0,l=t.length;s<l;s++)r+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}static resolveURL(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class Sg extends aa{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,s,l){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=Kl.get(t);if(void 0!==_)return u.manager.itemStart(t),_.then?void _.then(B=>{r&&r(B),u.manager.itemEnd(t)}).catch(B=>{l&&l(B)}):(setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_);const A={};A.credentials="anonymous"===this.crossOrigin?"same-origin":"include",A.headers=this.requestHeader;const O=fetch(t,A).then(function(B){return B.blob()}).then(function(B){return createImageBitmap(B,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(B){return Kl.add(t,B),r&&r(B),u.manager.itemEnd(t),B}).catch(function(B){l&&l(B),Kl.remove(t),u.manager.itemError(t),u.manager.itemEnd(t)});Kl.add(t,O),u.manager.itemStart(t)}}class Tg extends Lo{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class y1{constructor(t,r,s){let l,u,_;switch(this.binding=t,this.valueSize=s,r){case"quaternion":l=this._slerp,u=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":l=this._select,u=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:l=this._lerp,u=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=u,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const s=this.buffer,l=this.valueSize,u=t*l+l;let _=this.cumulativeWeight;if(0===_){for(let A=0;A!==l;++A)s[u+A]=s[A];_=r}else _+=r,this._mixBufferRegion(s,u,0,r/_,l);this.cumulativeWeight=_}accumulateAdditive(t){const r=this.buffer,s=this.valueSize,l=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,l,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,s=this.buffer,l=t*r+r,u=this.cumulativeWeight,_=this.cumulativeWeightAdditive,A=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(s,l,r*this._origIndex,1-u,r),_>0&&this._mixBufferRegionAdditive(s,l,this._addIndex*r,1,r);for(let O=r,B=r+r;O!==B;++O)if(s[O]!==s[O+r]){A.setValue(s,l);break}}saveOriginalState(){const r=this.buffer,s=this.valueSize,l=s*this._origIndex;this.binding.getValue(r,l);for(let u=s,_=l;u!==_;++u)r[u]=r[l+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let s=t;s<r;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[r+s]=this.buffer[t+s]}_select(t,r,s,l,u){if(l>=.5)for(let _=0;_!==u;++_)t[r+_]=t[s+_]}_slerp(t,r,s,l){ln.slerpFlat(t,r,t,r,t,s,l)}_slerpAdditive(t,r,s,l,u){const _=this._workIndex*u;ln.multiplyQuaternionsFlat(t,_,t,r,t,s),ln.slerpFlat(t,r,t,r,t,_,l)}_lerp(t,r,s,l,u){const _=1-l;for(let A=0;A!==u;++A){const O=r+A;t[O]=t[O]*_+t[s+A]*l}}_lerpAdditive(t,r,s,l,u){for(let _=0;_!==u;++_){const A=r+_;t[A]=t[A]+t[s+_]*l}}}const Ag="\\[\\]\\.:\\/",v1=new RegExp("["+Ag+"]","g"),Cg="[^"+Ag+"]",Gv="[^"+Ag.replace("\\.","")+"]",Wv=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Cg)+/(WCOD+)?/.source.replace("WCOD",Gv)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cg)+"$"),Xv=["material","materials","bones","map"];class qv{constructor(t,r,s){const l=s||Wo.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,l)}getValue(t,r){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(t,r)}setValue(t,r){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=s.length;l!==u;++l)s[l].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].unbind()}}let Wo=(()=>{class v{constructor(r,s,l){this.path=s,this.parsedPath=l||v.parseTrackName(s),this.node=v.findNode(r,this.parsedPath.nodeName),this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,l){return r&&r.isAnimationObjectGroup?new v.Composite(r,s,l):new v(r,s,l)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(v1,"")}static parseTrackName(r){const s=Wv.exec(r);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const _=l.nodeName.substring(u+1);-1!==Xv.indexOf(_)&&(l.nodeName=l.nodeName.substring(0,u),l.objectName=_)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return l}static findNode(r,s){if(void 0===s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const l=r.skeleton.getBoneByName(s);if(void 0!==l)return l}if(r.children){const l=function(_){for(let A=0;A<_.length;A++){const O=_[A];if(O.name===s||O.uuid===s)return O;const B=l(O.children);if(B)return B}return null},u=l(r.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const l=this.resolvedProperty;for(let u=0,_=l.length;u!==_;++u)r[s++]=l[u]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const l=this.resolvedProperty;for(let u=0,_=l.length;u!==_;++u)l[u]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const l=this.resolvedProperty;for(let u=0,_=l.length;u!==_;++u)l[u]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const l=this.resolvedProperty;for(let u=0,_=l.length;u!==_;++u)l[u]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,l=s.objectName,u=s.propertyName;let _=s.propertyIndex;if(r||(r=v.findNode(this.rootNode,s.nodeName),this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(l){let ee=s.objectIndex;switch(l){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let ae=0;ae<r.length;ae++)if(r[ae].name===ee){ee=ae;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[l]}if(void 0!==ee){if(void 0===r[ee])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[ee]}}const A=r[u];if(void 0===A)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",r);let O=this.Versioning.None;this.targetObject=r,!0===r.isMaterial?O=this.Versioning.NeedsUpdate:!0===r.isObject3D&&(O=this.Versioning.MatrixWorldNeedsUpdate);let B=this.BindingType.Direct;if(void 0!==_){if("morphTargetInfluences"===u){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[_]&&(_=r.morphTargetDictionary[_])}B=this.BindingType.ArrayElement,this.resolvedProperty=A,this.propertyIndex=_}else void 0!==A.fromArray&&void 0!==A.toArray?(B=this.BindingType.HasFromToArray,this.resolvedProperty=A):Array.isArray(A)?(B=this.BindingType.EntireArray,this.resolvedProperty=A):this.propertyName=u;this.getValue=this.GetterByBindingType[B],this.setValue=this.SetterByBindingTypeAndVersioning[B][O]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=qv,v})();Wo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wo.prototype.GetterByBindingType=[Wo.prototype._getValue_direct,Wo.prototype._getValue_array,Wo.prototype._getValue_arrayElement,Wo.prototype._getValue_toArray],Wo.prototype.SetterByBindingTypeAndVersioning=[[Wo.prototype._setValue_direct,Wo.prototype._setValue_direct_setNeedsUpdate,Wo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_array,Wo.prototype._setValue_array_setNeedsUpdate,Wo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_arrayElement,Wo.prototype._setValue_arrayElement_setNeedsUpdate,Wo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_fromArray,Wo.prototype._setValue_fromArray_setNeedsUpdate,Wo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _1{constructor(t,r,s=null,l=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=s,this.blendMode=l;const u=r.tracks,_=u.length,A=new Array(_),O={endingStart:jo,endingEnd:jo};for(let B=0;B!==_;++B){const ee=u[B].createInterpolant(null);A[B]=ee,ee.settings=O}this._interpolantSettings=O,this._interpolants=A,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,s){if(t.fadeOut(r),this.fadeIn(r),s){const l=this._clip.duration,u=t._clip.duration,A=l/u;t.warp(1,u/l,r),this.warp(A,1,r)}return this}crossFadeTo(t,r,s){return t.crossFadeFrom(this,r,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,s){const l=this._mixer,u=l.time,_=this.timeScale;let A=this._timeScaleInterpolant;null===A&&(A=l._lendControlInterpolant(),this._timeScaleInterpolant=A);const O=A.parameterPositions,B=A.sampleValues;return O[0]=u,O[1]=u+s,B[0]=t/_,B[1]=r/_,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,s,l){if(!this.enabled)return void this._updateWeight(t);const u=this._startTime;if(null!==u){const O=(t-u)*s;O<0||0===s?r=0:(this._startTime=null,r=s*O)}r*=this._updateTimeScale(t);const _=this._updateTime(r),A=this._updateWeight(t);if(A>0){const O=this._interpolants,B=this._propertyBindings;if(2501===this.blendMode)for(let ee=0,ae=O.length;ee!==ae;++ee)O[ee].evaluate(_),B[ee].accumulateAdditive(A);else for(let ee=0,ae=O.length;ee!==ae;++ee)O[ee].evaluate(_),B[ee].accumulate(l,A)}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const s=this._weightInterpolant;if(null!==s){const l=s.evaluate(t)[0];r*=l,t>s.parameterPositions[1]&&(this.stopFading(),0===l&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(r*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,s=this.loop;let l=this.time+t,u=this._loopCount;const _=2202===s;if(0===t)return-1===u||!_||1&~u?l:r-l;if(2200===s){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=r)l=r;else{if(!(l<0)){this.time=l;break e}l=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===u&&(t>=0?(u=0,this._setEndings(!0,0===this.repetitions,_)):this._setEndings(0===this.repetitions,!0,_)),l>=r||l<0){const A=Math.floor(l/r);l-=r*A,u+=Math.abs(A);const O=this.repetitions-u;if(O<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,l=t>0?r:0,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===O){const B=t<0;this._setEndings(B,!B,_)}else this._setEndings(!1,!1,_);this._loopCount=u,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=l;if(_&&!(1&~u))return r-l}return l}_setEndings(t,r,s){const l=this._interpolantSettings;s?(l.endingStart=ct,l.endingEnd=ct):(l.endingStart=t?this.zeroSlopeAtStart?ct:jo:2402,l.endingEnd=r?this.zeroSlopeAtEnd?ct:jo:2402)}_scheduleFading(t,r,s){const l=this._mixer,u=l.time;let _=this._weightInterpolant;null===_&&(_=l._lendControlInterpolant(),this._weightInterpolant=_);const A=_.parameterPositions,O=_.sampleValues;return A[0]=u,O[0]=r,A[1]=u+t,O[1]=s,this}}const b1=new Float32Array(1);class Kv extends Mn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const s=t._localRoot||this._root,l=t._clip.tracks,u=l.length,_=t._propertyBindings,A=t._interpolants,O=s.uuid,B=this._bindingsByRootAndName;let ee=B[O];void 0===ee&&(ee={},B[O]=ee);for(let ae=0;ae!==u;++ae){const pe=l[ae],_e=pe.name;let Re=ee[_e];if(void 0!==Re)++Re.referenceCount,_[ae]=Re;else{if(Re=_[ae],void 0!==Re){null===Re._cacheIndex&&(++Re.referenceCount,this._addInactiveBinding(Re,O,_e));continue}Re=new y1(Wo.create(s,_e,r&&r._propertyBindings[ae].binding.parsedPath),pe.ValueTypeName,pe.getValueSize()),++Re.referenceCount,this._addInactiveBinding(Re,O,_e),_[ae]=Re}A[ae].resultBuffer=Re.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const s=(t._localRoot||this._root).uuid,l=t._clip.uuid,u=this._actionsByClip[l];this._bindAction(t,u&&u.knownActions[0]),this._addInactiveAction(t,l,s)}const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==u.useCount++&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==--u.useCount&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,s){const l=this._actions,u=this._actionsByClip;let _=u[r];if(void 0===_)_={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[r]=_;else{const A=_.knownActions;t._byClipCacheIndex=A.length,A.push(t)}t._cacheIndex=l.length,l.push(t),_.actionByRoot[s]=t}_removeInactiveAction(t){const r=this._actions,s=r[r.length-1],l=t._cacheIndex;s._cacheIndex=l,r[l]=s,r.pop(),t._cacheIndex=null;const u=t._clip.uuid,_=this._actionsByClip,A=_[u],O=A.knownActions,B=O[O.length-1],ee=t._byClipCacheIndex;B._byClipCacheIndex=ee,O[ee]=B,O.pop(),t._byClipCacheIndex=null,delete A.actionByRoot[(t._localRoot||this._root).uuid],0===O.length&&delete _[u],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==--u.referenceCount&&this._removeInactiveBinding(u)}}_lendAction(t){const r=this._actions,s=t._cacheIndex,l=this._nActiveActions++,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_takeBackAction(t){const r=this._actions,s=t._cacheIndex,l=--this._nActiveActions,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_addInactiveBinding(t,r,s){const l=this._bindingsByRootAndName,u=this._bindings;let _=l[r];void 0===_&&(_={},l[r]=_),_[s]=t,t._cacheIndex=u.length,u.push(t)}_removeInactiveBinding(t){const r=this._bindings,s=t.binding,l=s.rootNode.uuid,u=s.path,_=this._bindingsByRootAndName,A=_[l],O=r[r.length-1],B=t._cacheIndex;O._cacheIndex=B,r[B]=O,r.pop(),delete A[u],0===Object.keys(A).length&&delete _[l]}_lendBinding(t){const r=this._bindings,s=t._cacheIndex,l=this._nActiveBindings++,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_takeBackBinding(t){const r=this._bindings,s=t._cacheIndex,l=--this._nActiveBindings,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let s=t[r];return void 0===s&&(s=new r1(new Float32Array(2),new Float32Array(2),1,b1),s.__cacheIndex=r,t[r]=s),s}_takeBackControlInterpolant(t){const r=this._controlInterpolants,s=t.__cacheIndex,l=--this._nActiveControlInterpolants,u=r[l];t.__cacheIndex=l,r[l]=t,u.__cacheIndex=s,r[s]=u}clipAction(t,r,s){const l=r||this._root,u=l.uuid;let _="string"==typeof t?gu.findByName(l,t):t;const A=null!==_?_.uuid:t,O=this._actionsByClip[A];let B=null;if(void 0===s&&(s=null!==_?_.blendMode:2500),void 0!==O){const ae=O.actionByRoot[u];if(void 0!==ae&&ae.blendMode===s)return ae;B=O.knownActions[0],null===_&&(_=B._clip)}if(null===_)return null;const ee=new _1(this,_,r,s);return this._bindAction(ee,B),this._addInactiveAction(ee,A,u),ee}existingAction(t,r){const s=r||this._root,l=s.uuid,u="string"==typeof t?gu.findByName(s,t):t,A=this._actionsByClip[u?u.uuid:t];return void 0!==A&&A.actionByRoot[l]||null}stopAllAction(){const t=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)t[s].stop();return this}update(t){const r=this._actions,s=this._nActiveActions,l=this.time+=t*=this.timeScale,u=Math.sign(t),_=this._accuIndex^=1;for(let B=0;B!==s;++B)r[B]._update(l,t,u,_);const A=this._bindings,O=this._nActiveBindings;for(let B=0;B!==O;++B)A[B].apply(_);return this}setTime(t){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,s=t.uuid,l=this._actionsByClip,u=l[s];if(void 0!==u){const _=u.knownActions;for(let A=0,O=_.length;A!==O;++A){const B=_[A];this._deactivateAction(B);const ee=B._cacheIndex,ae=r[r.length-1];B._cacheIndex=null,B._byClipCacheIndex=null,ae._cacheIndex=ee,r[ee]=ae,r.pop(),this._removeInactiveBindingsForAction(B)}delete l[s]}}uncacheRoot(t){const r=t.uuid,s=this._actionsByClip;for(const _ in s){const O=s[_].actionByRoot[r];void 0!==O&&(this._deactivateAction(O),this._removeInactiveAction(O))}const u=this._bindingsByRootAndName[r];if(void 0!==u)for(const _ in u){const A=u[_];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(t,r){const s=this.existingAction(t,r);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class Zv{constructor(t=1,r=0,s=0){this.radius=t,this.phi=r,this.theta=s}set(t,r,s){return this.radius=t,this.phi=r,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=an(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,s){return this.radius=Math.sqrt(t*t+r*r+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(an(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Pc=new xt,Pp=new Li,rf=new Li;class Dg extends Nl{constructor(t){const r=bd(t),s=new gs,l=[],u=[],_=new Nr(0,0,1),A=new Nr(0,1,0);for(let B=0;B<r.length;B++){const ee=r[B];ee.parent&&ee.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),u.push(_.r,_.g,_.b),u.push(A.r,A.g,A.b))}s.setAttribute("position",new ki(l,3)),s.setAttribute("color",new ki(u,3)),super(s,new ol({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,s=this.geometry,l=s.getAttribute("position");rf.copy(this.root.matrixWorld).invert();for(let u=0,_=0;u<r.length;u++){const A=r[u];A.parent&&A.parent.isBone&&(Pp.multiplyMatrices(rf,A.matrixWorld),Pc.setFromMatrixPosition(Pp),l.setXYZ(_,Pc.x,Pc.y,Pc.z),Pp.multiplyMatrices(rf,A.parent.matrixWorld),Pc.setFromMatrixPosition(Pp),l.setXYZ(_+1,Pc.x,Pc.y,Pc.z),_+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bd(v){const t=[];!0===v.isBone&&t.push(v);for(let r=0;r<v.children.length;r++)t.push(...bd(v.children[r]));return t}class Ig extends Nl{constructor(t=10,r=10,s=4473924,l=8947848){s=new Nr(s),l=new Nr(l);const u=r/2,_=t/r,A=t/2,O=[],B=[];for(let pe=0,_e=0,Re=-A;pe<=r;pe++,Re+=_){O.push(-A,0,Re,A,0,Re),O.push(Re,0,-A,Re,0,A);const Ue=pe===u?s:l;Ue.toArray(B,_e),_e+=3,Ue.toArray(B,_e),_e+=3,Ue.toArray(B,_e),_e+=3,Ue.toArray(B,_e),_e+=3}const ee=new gs;ee.setAttribute("position",new ki(O,3)),ee.setAttribute("color",new ki(B,3)),super(ee,new ol({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xd=new xt,Sd=new xt,A1=new xt;class Rg extends Eo{constructor(t,r,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",void 0===r&&(r=1);let l=new gs;l.setAttribute("position",new ki([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const u=new ol({fog:!1,toneMapped:!1});this.lightPlane=new Ec(l,u),this.add(this.lightPlane),l=new gs,l.setAttribute("position",new ki([0,0,0,0,0,1],3)),this.targetLine=new Ec(l,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xd.setFromMatrixPosition(this.light.matrixWorld),Sd.setFromMatrixPosition(this.light.target.matrixWorld),A1.subVectors(Sd,xd),this.lightPlane.lookAt(Sd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sd),this.targetLine.scale.z=A1.length()}}class I1 extends Nl{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],l=new gs;l.setAttribute("position",new ki(r,3)),l.setAttribute("color",new ki([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(l,new ol({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,s){const l=new Nr,u=this.geometry.attributes.color.array;return l.set(t),l.toArray(u,0),l.toArray(u,3),l.set(r),l.toArray(u,6),l.toArray(u,9),l.set(s),l.toArray(u,12),l.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class wE extends Mn{constructor(t,r=null){super(),this.object=t,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function lf(v,t,r,s){const l=function n0(v){switch(v){case Lr:case te:return{byteLength:1,components:1};case Qe:case Ie:case L:return{byteLength:2,components:1};case ie:case H:return{byteLength:2,components:4};case N:case T:case U:return{byteLength:4,components:1};case Be:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${v}.`)}(s);switch(r){case Xe:case rn:return v*t;case Ge:return v*t*2;case tt:case Dt:return v*t/l.components*l.byteLength;case Zt:case $n:return v*t*2/l.components*l.byteLength;case wt:return v*t*3/l.components*l.byteLength;case Nt:case Ar:return v*t*4/l.components*l.byteLength;case Hi:case Ki:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case Xs:case Os:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ws:case Ls:return Math.max(v,16)*Math.max(t,8)/4;case wi:case co:return Math.max(v,8)*Math.max(t,8)/2;case so:case ea:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case So:case ca:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ta:return Math.floor((v+4)/5)*Math.floor((t+3)/4)*16;case qo:return Math.floor((v+4)/5)*Math.floor((t+4)/5)*16;case ua:return Math.floor((v+5)/6)*Math.floor((t+4)/5)*16;case mo:return Math.floor((v+5)/6)*Math.floor((t+5)/6)*16;case Ta:return Math.floor((v+7)/8)*Math.floor((t+4)/5)*16;case To:return Math.floor((v+7)/8)*Math.floor((t+5)/6)*16;case Ja:return Math.floor((v+7)/8)*Math.floor((t+7)/8)*16;case Va:return Math.floor((v+9)/10)*Math.floor((t+4)/5)*16;case ke:return Math.floor((v+9)/10)*Math.floor((t+5)/6)*16;case mt:return Math.floor((v+9)/10)*Math.floor((t+7)/8)*16;case Vt:return Math.floor((v+9)/10)*Math.floor((t+9)/10)*16;case We:return Math.floor((v+11)/12)*Math.floor((t+9)/10)*16;case Wt:return Math.floor((v+11)/12)*Math.floor((t+11)/12)*16;case Ln:case fs:case qs:return Math.ceil(v/4)*Math.ceil(t/4)*16;case na:case Ga:return Math.ceil(v/4)*Math.ceil(t/4)*8;case Ma:case Ko:return Math.ceil(v/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Pg(){let v=null,t=!1,r=null,s=null;function l(u,_){r(u,_),s=v.requestAnimationFrame(l)}return{start:function(){!0!==t&&null!==r&&(s=v.requestAnimationFrame(l),t=!0)},stop:function(){v.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(u){r=u},setContext:function(u){v=u}}}function Og(v){const t=new WeakMap;return{get:function l(A){return A.isInterleavedBufferAttribute&&(A=A.data),t.get(A)},remove:function u(A){A.isInterleavedBufferAttribute&&(A=A.data);const O=t.get(A);O&&(v.deleteBuffer(O.buffer),t.delete(A))},update:function _(A,O){if(A.isInterleavedBufferAttribute&&(A=A.data),A.isGLBufferAttribute){const ee=t.get(A);return void((!ee||ee.version<A.version)&&t.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version}))}const B=t.get(A);if(void 0===B)t.set(A,function r(A,O){const B=A.array,ee=A.usage,ae=B.byteLength,pe=v.createBuffer();let _e;if(v.bindBuffer(O,pe),v.bufferData(O,B,ee),A.onUploadCallback(),B instanceof Float32Array)_e=v.FLOAT;else if(B instanceof Uint16Array)_e=A.isFloat16BufferAttribute?v.HALF_FLOAT:v.UNSIGNED_SHORT;else if(B instanceof Int16Array)_e=v.SHORT;else if(B instanceof Uint32Array)_e=v.UNSIGNED_INT;else if(B instanceof Int32Array)_e=v.INT;else if(B instanceof Int8Array)_e=v.BYTE;else if(B instanceof Uint8Array)_e=v.UNSIGNED_BYTE;else{if(!(B instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+B);_e=v.UNSIGNED_BYTE}return{buffer:pe,type:_e,bytesPerElement:B.BYTES_PER_ELEMENT,version:A.version,size:ae}}(A,O));else if(B.version<A.version){if(B.size!==A.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(A,O,B){const ee=O.array,ae=O.updateRanges;if(v.bindBuffer(B,A),0===ae.length)v.bufferSubData(B,0,ee);else{ae.sort((_e,Re)=>_e.start-Re.start);let pe=0;for(let _e=1;_e<ae.length;_e++){const Re=ae[pe],Ue=ae[_e];Ue.start<=Re.start+Re.count+1?Re.count=Math.max(Re.count,Ue.start+Ue.count-Re.start):(++pe,ae[pe]=Ue)}ae.length=pe+1;for(let _e=0,Re=ae.length;_e<Re;_e++){const Ue=ae[_e];v.bufferSubData(B,Ue.start*ee.BYTES_PER_ELEMENT,ee,Ue.start,Ue.count)}O.clearUpdateRanges()}O.onUploadCallback()})(B.buffer,A,O),B.version=A.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d);const Cs={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},bi={common:{diffuse:{value:new Nr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yi},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yi}},envmap:{envMap:{value:null},envMapRotation:{value:new Yi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yi},normalScale:{value:new pr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0},uvTransform:{value:new Yi}},sprite:{diffuse:{value:new Nr(16777215)},opacity:{value:1},center:{value:new pr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yi},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0}}},xl={basic:{uniforms:Ol([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.fog]),vertexShader:Cs.meshbasic_vert,fragmentShader:Cs.meshbasic_frag},lambert:{uniforms:Ol([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.fog,bi.lights,{emissive:{value:new Nr(0)}}]),vertexShader:Cs.meshlambert_vert,fragmentShader:Cs.meshlambert_frag},phong:{uniforms:Ol([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.fog,bi.lights,{emissive:{value:new Nr(0)},specular:{value:new Nr(1118481)},shininess:{value:30}}]),vertexShader:Cs.meshphong_vert,fragmentShader:Cs.meshphong_frag},standard:{uniforms:Ol([bi.common,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.roughnessmap,bi.metalnessmap,bi.fog,bi.lights,{emissive:{value:new Nr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag},toon:{uniforms:Ol([bi.common,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.gradientmap,bi.fog,bi.lights,{emissive:{value:new Nr(0)}}]),vertexShader:Cs.meshtoon_vert,fragmentShader:Cs.meshtoon_frag},matcap:{uniforms:Ol([bi.common,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.fog,{matcap:{value:null}}]),vertexShader:Cs.meshmatcap_vert,fragmentShader:Cs.meshmatcap_frag},points:{uniforms:Ol([bi.points,bi.fog]),vertexShader:Cs.points_vert,fragmentShader:Cs.points_frag},dashed:{uniforms:Ol([bi.common,bi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cs.linedashed_vert,fragmentShader:Cs.linedashed_frag},depth:{uniforms:Ol([bi.common,bi.displacementmap]),vertexShader:Cs.depth_vert,fragmentShader:Cs.depth_frag},normal:{uniforms:Ol([bi.common,bi.bumpmap,bi.normalmap,bi.displacementmap,{opacity:{value:1}}]),vertexShader:Cs.meshnormal_vert,fragmentShader:Cs.meshnormal_frag},sprite:{uniforms:Ol([bi.sprite,bi.fog]),vertexShader:Cs.sprite_vert,fragmentShader:Cs.sprite_frag},background:{uniforms:{uvTransform:{value:new Yi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cs.background_vert,fragmentShader:Cs.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Yi}},vertexShader:Cs.backgroundCube_vert,fragmentShader:Cs.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cs.cube_vert,fragmentShader:Cs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cs.equirect_vert,fragmentShader:Cs.equirect_frag},distanceRGBA:{uniforms:Ol([bi.common,bi.displacementmap,{referencePosition:{value:new xt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cs.distanceRGBA_vert,fragmentShader:Cs.distanceRGBA_frag},shadow:{uniforms:Ol([bi.lights,bi.fog,{color:{value:new Nr(0)},opacity:{value:1}}]),vertexShader:Cs.shadow_vert,fragmentShader:Cs.shadow_frag}};xl.physical={uniforms:Ol([xl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yi},clearcoatNormalScale:{value:new pr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yi},sheen:{value:0},sheenColor:{value:new Nr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yi},transmissionSamplerSize:{value:new pr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yi},attenuationDistance:{value:0},attenuationColor:{value:new Nr(0)},specularColor:{value:new Nr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yi},anisotropyVector:{value:new pr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yi}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag};const pf={r:0,b:0,g:0},qu=new $o,Aw=new Li;function XE(v,t,r,s,l,u,_){const A=new Nr(0);let B,ee,O=!0===u?0:1,ae=null,pe=0,_e=null;function Re(ut){let st=!0===ut.isScene?ut.background:null;return st&&st.isTexture&&(st=(ut.backgroundBlurriness>0?r:t).get(st)),st}function Pe(ut,st){ut.getRGB(pf,Zy(v)),s.buffers.color.setClear(pf.r,pf.g,pf.b,st,_)}return{getClearColor:function(){return A},setClearColor:function(ut,st=1){A.set(ut),O=st,Pe(A,O)},getClearAlpha:function(){return O},setClearAlpha:function(ut){O=ut,Pe(A,O)},render:function Ue(ut){let st=!1;const Yt=Re(ut);null===Yt?Pe(A,O):Yt&&Yt.isColor&&(Pe(Yt,1),st=!0);const At=v.xr.getEnvironmentBlendMode();"additive"===At?s.buffers.color.setClear(0,0,0,1,_):"alpha-blend"===At&&s.buffers.color.setClear(0,0,0,0,_),(v.autoClear||st)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil))},addToRenderList:function Le(ut,st){const Yt=Re(st);Yt&&(Yt.isCubeTexture||Yt.mapping===In)?(void 0===ee&&(ee=new Ps(new Gc(1,1,1),new tc({name:"BackgroundCubeMaterial",uniforms:Ud(xl.backgroundCube.uniforms),vertexShader:xl.backgroundCube.vertexShader,fragmentShader:xl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),ee.geometry.deleteAttribute("normal"),ee.geometry.deleteAttribute("uv"),ee.onBeforeRender=function(At,zt,tn){this.matrixWorld.copyPosition(tn.matrixWorld)},Object.defineProperty(ee.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(ee)),qu.copy(st.backgroundRotation),qu.x*=-1,qu.y*=-1,qu.z*=-1,Yt.isCubeTexture&&!1===Yt.isRenderTargetTexture&&(qu.y*=-1,qu.z*=-1),ee.material.uniforms.envMap.value=Yt,ee.material.uniforms.flipEnvMap.value=Yt.isCubeTexture&&!1===Yt.isRenderTargetTexture?-1:1,ee.material.uniforms.backgroundBlurriness.value=st.backgroundBlurriness,ee.material.uniforms.backgroundIntensity.value=st.backgroundIntensity,ee.material.uniforms.backgroundRotation.value.setFromMatrix4(Aw.makeRotationFromEuler(qu)),ee.material.toneMapped=xs.getTransfer(Yt.colorSpace)!==qi,(ae!==Yt||pe!==Yt.version||_e!==v.toneMapping)&&(ee.material.needsUpdate=!0,ae=Yt,pe=Yt.version,_e=v.toneMapping),ee.layers.enableAll(),ut.unshift(ee,ee.geometry,ee.material,0,0,null)):Yt&&Yt.isTexture&&(void 0===B&&(B=new Ps(new gd(2,2),new tc({name:"BackgroundMaterial",uniforms:Ud(xl.background.uniforms),vertexShader:xl.background.vertexShader,fragmentShader:xl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),B.geometry.deleteAttribute("normal"),Object.defineProperty(B.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(B)),B.material.uniforms.t2D.value=Yt,B.material.uniforms.backgroundIntensity.value=st.backgroundIntensity,B.material.toneMapped=xs.getTransfer(Yt.colorSpace)!==qi,!0===Yt.matrixAutoUpdate&&Yt.updateMatrix(),B.material.uniforms.uvTransform.value.copy(Yt.matrix),(ae!==Yt||pe!==Yt.version||_e!==v.toneMapping)&&(B.material.needsUpdate=!0,ae=Yt,pe=Yt.version,_e=v.toneMapping),B.layers.enableAll(),ut.unshift(B,B.geometry,B.material,0,0,null))},dispose:function ht(){void 0!==ee&&(ee.geometry.dispose(),ee.material.dispose(),ee=void 0),void 0!==B&&(B.geometry.dispose(),B.material.dispose(),B=void 0)}}}function qp(v,t){const r=v.getParameter(v.MAX_VERTEX_ATTRIBS),s={},l=pe(null);let u=l,_=!1;function B(Tt){return v.bindVertexArray(Tt)}function ee(Tt){return v.deleteVertexArray(Tt)}function pe(Tt){const wn=[],er=[],Kn=[];for(let rr=0;rr<r;rr++)wn[rr]=0,er[rr]=0,Kn[rr]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:wn,enabledAttributes:er,attributeDivisors:Kn,object:Tt,attributes:{},index:null}}function Ue(){const Tt=u.newAttributes;for(let wn=0,er=Tt.length;wn<er;wn++)Tt[wn]=0}function Le(Tt){Pe(Tt,0)}function Pe(Tt,wn){const Kn=u.enabledAttributes,rr=u.attributeDivisors;u.newAttributes[Tt]=1,0===Kn[Tt]&&(v.enableVertexAttribArray(Tt),Kn[Tt]=1),rr[Tt]!==wn&&(v.vertexAttribDivisor(Tt,wn),rr[Tt]=wn)}function ht(){const Tt=u.newAttributes,wn=u.enabledAttributes;for(let er=0,Kn=wn.length;er<Kn;er++)wn[er]!==Tt[er]&&(v.disableVertexAttribArray(er),wn[er]=0)}function ut(Tt,wn,er,Kn,rr,wr,tr){!0===tr?v.vertexAttribIPointer(Tt,wn,er,rr,wr):v.vertexAttribPointer(Tt,wn,er,Kn,rr,wr)}function tn(){Pt(),_=!0,u!==l&&(u=l,B(u.object))}function Pt(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function A(Tt,wn,er,Kn,rr){let wr=!1;const tr=function ae(Tt,wn,er){const Kn=!0===er.wireframe;let rr=s[Tt.id];void 0===rr&&(rr={},s[Tt.id]=rr);let wr=rr[wn.id];void 0===wr&&(wr={},rr[wn.id]=wr);let tr=wr[Kn];return void 0===tr&&(tr=pe(function O(){return v.createVertexArray()}()),wr[Kn]=tr),tr}(Kn,er,wn);u!==tr&&(u=tr,B(u.object)),wr=function _e(Tt,wn,er,Kn){const rr=u.attributes,wr=wn.attributes;let tr=0;const Wr=er.getAttributes();for(const cr in Wr)if(Wr[cr].location>=0){const hi=rr[cr];let Pi=wr[cr];if(void 0===Pi&&("instanceMatrix"===cr&&Tt.instanceMatrix&&(Pi=Tt.instanceMatrix),"instanceColor"===cr&&Tt.instanceColor&&(Pi=Tt.instanceColor)),void 0===hi||hi.attribute!==Pi||Pi&&hi.data!==Pi.data)return!0;tr++}return u.attributesNum!==tr||u.index!==Kn}(Tt,Kn,er,rr),wr&&function Re(Tt,wn,er,Kn){const rr={},wr=wn.attributes;let tr=0;const Wr=er.getAttributes();for(const cr in Wr)if(Wr[cr].location>=0){let hi=wr[cr];void 0===hi&&("instanceMatrix"===cr&&Tt.instanceMatrix&&(hi=Tt.instanceMatrix),"instanceColor"===cr&&Tt.instanceColor&&(hi=Tt.instanceColor));const Pi={};Pi.attribute=hi,hi&&hi.data&&(Pi.data=hi.data),rr[cr]=Pi,tr++}u.attributes=rr,u.attributesNum=tr,u.index=Kn}(Tt,Kn,er,rr),null!==rr&&t.update(rr,v.ELEMENT_ARRAY_BUFFER),(wr||_)&&(_=!1,function st(Tt,wn,er,Kn){Ue();const rr=Kn.attributes,wr=er.getAttributes(),tr=wn.defaultAttributeValues;for(const Wr in wr){const cr=wr[Wr];if(cr.location>=0){let Zr=rr[Wr];if(void 0===Zr&&("instanceMatrix"===Wr&&Tt.instanceMatrix&&(Zr=Tt.instanceMatrix),"instanceColor"===Wr&&Tt.instanceColor&&(Zr=Tt.instanceColor)),void 0!==Zr){const hi=Zr.normalized,Pi=Zr.itemSize,as=t.get(Zr);if(void 0===as)continue;const Ts=as.buffer,Tr=as.type,ti=as.bytesPerElement,Di=Tr===v.INT||Tr===v.UNSIGNED_INT||Zr.gpuType===T;if(Zr.isInterleavedBufferAttribute){const ri=Zr.data,Bi=ri.stride,$s=Zr.offset;if(ri.isInstancedInterleavedBuffer){for(let Fi=0;Fi<cr.locationSize;Fi++)Pe(cr.location+Fi,ri.meshPerAttribute);!0!==Tt.isInstancedMesh&&void 0===Kn._maxInstanceCount&&(Kn._maxInstanceCount=ri.meshPerAttribute*ri.count)}else for(let Fi=0;Fi<cr.locationSize;Fi++)Le(cr.location+Fi);v.bindBuffer(v.ARRAY_BUFFER,Ts);for(let Fi=0;Fi<cr.locationSize;Fi++)ut(cr.location+Fi,Pi/cr.locationSize,Tr,hi,Bi*ti,($s+Pi/cr.locationSize*Fi)*ti,Di)}else{if(Zr.isInstancedBufferAttribute){for(let ri=0;ri<cr.locationSize;ri++)Pe(cr.location+ri,Zr.meshPerAttribute);!0!==Tt.isInstancedMesh&&void 0===Kn._maxInstanceCount&&(Kn._maxInstanceCount=Zr.meshPerAttribute*Zr.count)}else for(let ri=0;ri<cr.locationSize;ri++)Le(cr.location+ri);v.bindBuffer(v.ARRAY_BUFFER,Ts);for(let ri=0;ri<cr.locationSize;ri++)ut(cr.location+ri,Pi/cr.locationSize,Tr,hi,Pi*ti,Pi/cr.locationSize*ri*ti,Di)}}else if(void 0!==tr){const hi=tr[Wr];if(void 0!==hi)switch(hi.length){case 2:v.vertexAttrib2fv(cr.location,hi);break;case 3:v.vertexAttrib3fv(cr.location,hi);break;case 4:v.vertexAttrib4fv(cr.location,hi);break;default:v.vertexAttrib1fv(cr.location,hi)}}}}ht()}(Tt,wn,er,Kn),null!==rr&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.get(rr).buffer))},reset:tn,resetDefaultState:Pt,dispose:function Yt(){tn();for(const Tt in s){const wn=s[Tt];for(const er in wn){const Kn=wn[er];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete wn[er]}delete s[Tt]}},releaseStatesOfGeometry:function At(Tt){if(void 0===s[Tt.id])return;const wn=s[Tt.id];for(const er in wn){const Kn=wn[er];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete wn[er]}delete s[Tt.id]},releaseStatesOfProgram:function zt(Tt){for(const wn in s){const er=s[wn];if(void 0===er[Tt.id])continue;const Kn=er[Tt.id];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete er[Tt.id]}},initAttributes:Ue,enableAttribute:Le,disableUnusedAttributes:ht}}function Cw(v,t,r){let s;function _(B,ee,ae){0!==ae&&(v.drawArraysInstanced(s,B,ee,ae),r.update(ee,s,ae))}this.setMode=function l(B){s=B},this.render=function u(B,ee){v.drawArrays(s,B,ee),r.update(ee,s,1)},this.renderInstances=_,this.renderMultiDraw=function A(B,ee,ae){if(0===ae)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,B,0,ee,0,ae);let _e=0;for(let Re=0;Re<ae;Re++)_e+=ee[Re];r.update(_e,s,1)},this.renderMultiDrawInstances=function O(B,ee,ae,pe){if(0===ae)return;const _e=t.get("WEBGL_multi_draw");if(null===_e)for(let Re=0;Re<B.length;Re++)_(B[Re],ee[Re],pe[Re]);else{_e.multiDrawArraysInstancedWEBGL(s,B,0,ee,0,pe,0,ae);let Re=0;for(let Ue=0;Ue<ae;Ue++)Re+=ee[Ue]*pe[Ue];r.update(Re,s,1)}}}function L0(v,t,r,s){let l;function O(zt){if("highp"===zt){if(v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.HIGH_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.HIGH_FLOAT).precision>0)return"highp";zt="mediump"}return"mediump"===zt&&v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.MEDIUM_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let B=void 0!==r.precision?r.precision:"highp";const ee=O(B);ee!==B&&(console.warn("THREE.WebGLRenderer:",B,"not supported, using",ee,"instead."),B=ee);const ae=!0===r.logarithmicDepthBuffer,pe=!0===r.reverseDepthBuffer&&t.has("EXT_clip_control"),_e=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS),Re=v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==l)return l;if(!0===t.has("EXT_texture_filter_anisotropic")){const zt=t.get("EXT_texture_filter_anisotropic");l=v.getParameter(zt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else l=0;return l},getMaxPrecision:O,textureFormatReadable:function _(zt){return!(zt!==Nt&&s.convert(zt)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function A(zt){const tn=zt===L&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(zt!==Lr&&s.convert(zt)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)&&zt!==U&&!tn)},precision:B,logarithmicDepthBuffer:ae,reverseDepthBuffer:pe,maxTextures:_e,maxVertexTextures:Re,maxTextureSize:v.getParameter(v.MAX_TEXTURE_SIZE),maxCubemapSize:v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:v.getParameter(v.MAX_VERTEX_ATTRIBS),maxVertexUniforms:v.getParameter(v.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:v.getParameter(v.MAX_VARYING_VECTORS),maxFragmentUniforms:v.getParameter(v.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:Re>0,maxSamples:v.getParameter(v.MAX_SAMPLES)}}function k0(v){const t=this;let r=null,s=0,l=!1,u=!1;const _=new Wc,A=new Yi,O={value:null,needsUpdate:!1};function ee(ae,pe,_e,Re){const Ue=null!==ae?ae.length:0;let Le=null;if(0!==Ue){if(Le=O.value,!0!==Re||null===Le){const Pe=_e+4*Ue,ht=pe.matrixWorldInverse;A.getNormalMatrix(ht),(null===Le||Le.length<Pe)&&(Le=new Float32Array(Pe));for(let ut=0,st=_e;ut!==Ue;++ut,st+=4)_.copy(ae[ut]).applyMatrix4(ht,A),_.normal.toArray(Le,st),Le[st+3]=_.constant}O.value=Le,O.needsUpdate=!0}return t.numPlanes=Ue,t.numIntersection=0,Le}this.uniform=O,this.numPlanes=0,this.numIntersection=0,this.init=function(ae,pe){const _e=0!==ae.length||pe||0!==s||l;return l=pe,s=ae.length,_e},this.beginShadows=function(){u=!0,ee(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(ae,pe){r=ee(ae,pe,0)},this.setState=function(ae,pe,_e){const Re=ae.clippingPlanes,Ue=ae.clipIntersection,Le=ae.clipShadows,Pe=v.get(ae);if(!l||null===Re||0===Re.length||u&&!Le)u?ee(null):function B(){O.value!==r&&(O.value=r,O.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}();else{const ht=u?0:s,ut=4*ht;let st=Pe.clippingState||null;O.value=st,st=ee(Re,pe,ut,_e);for(let Yt=0;Yt!==ut;++Yt)st[Yt]=r[Yt];Pe.clippingState=st,this.numIntersection=Ue?this.numPlanes:0,this.numPlanes+=ht}}}function N0(v){let t=new WeakMap;function r(_,A){return 303===A?_.mapping=ir:304===A&&(_.mapping=Dr),_}function l(_){const A=_.target;A.removeEventListener("dispose",l);const O=t.get(A);void 0!==O&&(t.delete(A),O.dispose())}return{get:function s(_){if(_&&_.isTexture){const A=_.mapping;if(303===A||304===A){if(t.has(_))return r(t.get(_).texture,_.mapping);{const O=_.image;if(O&&O.height>0){const B=new Fa(O.height);return B.fromEquirectangularTexture(v,_),t.set(_,B),_.addEventListener("dispose",l),r(B.texture,_.mapping)}return null}}}return _},dispose:function u(){t=new WeakMap}}}const Wg=[.125,.215,.35,.446,.526,.582],xu=new wg,Xg=new Nr;let mf=null,Md=0,Kp=0,gf=!1;const tu=(1+Math.sqrt(5))/2,uh=1/tu,qg=[new xt(-tu,uh,0),new xt(tu,uh,0),new xt(-uh,0,tu),new xt(uh,0,tu),new xt(0,tu,-uh),new xt(0,tu,uh),new xt(-1,1,-1),new xt(1,1,-1),new xt(-1,1,1),new xt(1,1,1)],Dw=new xt;class j0{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,s=.1,l=100,u={}){const{size:_=256,position:A=Dw}=u;mf=this._renderer.getRenderTarget(),Md=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),gf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(_);const O=this._allocateTargets();return O.depthBuffer=!0,this._sceneToCubeUV(t,s,l,O,A),r>0&&this._blur(O,0,0,r),this._applyPMREM(O),this._cleanup(O),O}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Zg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Yg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(mf,Md,Kp),this._renderer.xr.enabled=gf,t.scissorTest=!1,yf(t,0,0,t.width,t.height)}_fromTexture(t,r){this._setSize(t.mapping===ir||t.mapping===Dr?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),mf=this._renderer.getRenderTarget(),Md=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),gf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=r||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,s={magFilter:Cn,minFilter:Cn,generateMipmaps:!1,type:L,format:Nt,colorSpace:ns,depthBuffer:!1},l=Kg(t,r,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Kg(t,r,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Iw(v){const t=[],r=[],s=[];let l=v;const u=v-4+1+Wg.length;for(let _=0;_<u;_++){const A=Math.pow(2,l);r.push(A);let O=1/A;_>v-4?O=Wg[_-v+4-1]:0===_&&(O=0),s.push(O);const B=1/(A-2),ee=-B,ae=1+B,pe=[ee,ee,ae,ee,ae,ae,ee,ee,ae,ae,ee,ae],_e=6,Re=6,Ue=3,Le=2,Pe=1,ht=new Float32Array(Ue*Re*_e),ut=new Float32Array(Le*Re*_e),st=new Float32Array(Pe*Re*_e);for(let At=0;At<_e;At++){const zt=At%3*2/3-1,tn=At>2?0:-1;ht.set([zt,tn,0,zt+2/3,tn,0,zt+2/3,tn+1,0,zt,tn,0,zt+2/3,tn+1,0,zt,tn+1,0],Ue*Re*At),ut.set(pe,Le*Re*At),st.set([At,At,At,At,At,At],Pe*Re*At)}const Yt=new gs;Yt.setAttribute("position",new to(ht,Ue)),Yt.setAttribute("uv",new to(ut,Le)),Yt.setAttribute("faceIndex",new to(st,Pe)),t.push(Yt),l>4&&l--}return{lodPlanes:t,sizeLods:r,sigmas:s}}(u)),this._blurMaterial=function ys(v,t,r){const s=new Float32Array(20),l=new xt(0,1,0);return new tc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,t,r)}return l}_compileMaterial(t){const r=new Ps(this._lodPlanes[0],t);this._renderer.compile(r,xu)}_sceneToCubeUV(t,r,s,l,u){const O=new Lo(90,1,r,s),B=[1,-1,1,1,1,1],ee=[1,1,1,-1,-1,-1],ae=this._renderer,pe=ae.autoClear,_e=ae.toneMapping;ae.getClearColor(Xg),ae.toneMapping=ur,ae.autoClear=!1;const Re=new Co({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Ue=new Ps(new Gc,Re);let Le=!1;const Pe=t.background;Pe?Pe.isColor&&(Re.color.copy(Pe),t.background=null,Le=!0):(Re.color.copy(Xg),Le=!0);for(let ht=0;ht<6;ht++){const ut=ht%3;0===ut?(O.up.set(0,B[ht],0),O.position.set(u.x,u.y,u.z),O.lookAt(u.x+ee[ht],u.y,u.z)):1===ut?(O.up.set(0,0,B[ht]),O.position.set(u.x,u.y,u.z),O.lookAt(u.x,u.y+ee[ht],u.z)):(O.up.set(0,B[ht],0),O.position.set(u.x,u.y,u.z),O.lookAt(u.x,u.y,u.z+ee[ht]));const st=this._cubeSize;yf(l,ut*st,ht>2?st:0,st,st),ae.setRenderTarget(l),Le&&ae.render(Ue,O),ae.render(t,O)}Ue.geometry.dispose(),Ue.material.dispose(),ae.toneMapping=_e,ae.autoClear=pe,t.background=Pe}_textureToCubeUV(t,r){const s=this._renderer,l=t.mapping===ir||t.mapping===Dr;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=Zg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Yg());const u=l?this._cubemapMaterial:this._equirectMaterial,_=new Ps(this._lodPlanes[0],u);u.uniforms.envMap.value=t;const O=this._cubeSize;yf(r,0,0,3*O,2*O),s.setRenderTarget(r),s.render(_,xu)}_applyPMREM(t){const r=this._renderer,s=r.autoClear;r.autoClear=!1;const l=this._lodPlanes.length;for(let u=1;u<l;u++){const _=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,_,qg[(l-u-1)%qg.length])}r.autoClear=s}_blur(t,r,s,l,u){const _=this._pingPongRenderTarget;this._halfBlur(t,_,r,s,l,"latitudinal",u),this._halfBlur(_,t,s,s,l,"longitudinal",u)}_halfBlur(t,r,s,l,u,_,A){const O=this._renderer,B=this._blurMaterial;"latitudinal"!==_&&"longitudinal"!==_&&console.error("blur direction must be either latitudinal or longitudinal!");const ae=new Ps(this._lodPlanes[l],B),pe=B.uniforms,_e=this._sizeLods[s]-1,Re=isFinite(u)?Math.PI/(2*_e):2*Math.PI/39,Ue=u/Re,Le=isFinite(u)?1+Math.floor(3*Ue):20;Le>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${Le} samples when the maximum is set to 20`);const Pe=[];let ht=0;for(let zt=0;zt<20;++zt){const tn=zt/Ue,Pt=Math.exp(-tn*tn/2);Pe.push(Pt),0===zt?ht+=Pt:zt<Le&&(ht+=2*Pt)}for(let zt=0;zt<Pe.length;zt++)Pe[zt]=Pe[zt]/ht;pe.envMap.value=t.texture,pe.samples.value=Le,pe.weights.value=Pe,pe.latitudinal.value="latitudinal"===_,A&&(pe.poleAxis.value=A);const{_lodMax:ut}=this;pe.dTheta.value=Re,pe.mipInt.value=ut-s;const st=this._sizeLods[l];yf(r,3*st*(l>ut-4?l-ut+4:0),4*(this._cubeSize-st),3*st,2*st),O.setRenderTarget(r),O.render(ae,xu)}}function Kg(v,t,r){const s=new Te(v,t,r);return s.texture.mapping=In,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function yf(v,t,r,s,l){v.viewport.set(t,r,s,l),v.scissor.set(t,r,s,l)}function Yg(){return new tc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zg(){return new tc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function F0(v){let t=new WeakMap,r=null;function u(A){const O=A.target;O.removeEventListener("dispose",u);const B=t.get(O);void 0!==B&&(t.delete(O),B.dispose())}return{get:function s(A){if(A&&A.isTexture){const O=A.mapping,B=303===O||304===O,ee=O===ir||O===Dr;if(B||ee){let ae=t.get(A);if(A.isRenderTargetTexture&&A.pmremVersion!==(void 0!==ae?ae.texture.pmremVersion:0))return null===r&&(r=new j0(v)),ae=B?r.fromEquirectangular(A,ae):r.fromCubemap(A,ae),ae.texture.pmremVersion=A.pmremVersion,t.set(A,ae),ae.texture;if(void 0!==ae)return ae.texture;{const _e=A.image;return B&&_e&&_e.height>0||ee&&_e&&function l(A){let O=0;for(let ee=0;ee<6;ee++)void 0!==A[ee]&&O++;return 6===O}(_e)?(null===r&&(r=new j0(v)),ae=B?r.fromEquirectangular(A):r.fromCubemap(A),ae.texture.pmremVersion=A.pmremVersion,t.set(A,ae),A.addEventListener("dispose",u),ae.texture):null}}}return A},dispose:function _(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function U0(v){const t={};function r(s){if(void 0!==t[s])return t[s];let l;switch(s){case"WEBGL_depth_texture":l=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=v.getExtension(s)}return t[s]=l,l}return{has:function(s){return null!==r(s)},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(s){const l=r(s);return null===l&&$a("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function Rw(v,t,r,s){const l={},u=new WeakMap;function _(ae){const pe=ae.target;null!==pe.index&&t.remove(pe.index);for(const Re in pe.attributes)t.remove(pe.attributes[Re]);pe.removeEventListener("dispose",_),delete l[pe.id];const _e=u.get(pe);_e&&(t.remove(_e),u.delete(pe)),s.releaseStatesOfGeometry(pe),!0===pe.isInstancedBufferGeometry&&delete pe._maxInstanceCount,r.memory.geometries--}function B(ae){const pe=[],_e=ae.index,Re=ae.attributes.position;let Ue=0;if(null!==_e){const ht=_e.array;Ue=_e.version;for(let ut=0,st=ht.length;ut<st;ut+=3){const Yt=ht[ut+0],At=ht[ut+1],zt=ht[ut+2];pe.push(Yt,At,At,zt,zt,Yt)}}else{if(void 0===Re)return;Ue=Re.version;for(let ut=0,st=Re.array.length/3-1;ut<st;ut+=3){const Yt=ut+0,At=ut+1,zt=ut+2;pe.push(Yt,At,At,zt,zt,Yt)}}const Le=new(Od(pe)?Wf:ku)(pe,1);Le.version=Ue;const Pe=u.get(ae);Pe&&t.remove(Pe),u.set(ae,Le)}return{get:function A(ae,pe){return!0===l[pe.id]||(pe.addEventListener("dispose",_),l[pe.id]=!0,r.memory.geometries++),pe},update:function O(ae){const pe=ae.attributes;for(const _e in pe)t.update(pe[_e],v.ARRAY_BUFFER)},getWireframeAttribute:function ee(ae){const pe=u.get(ae);if(pe){const _e=ae.index;null!==_e&&pe.version<_e.version&&B(ae)}else B(ae);return u.get(ae)}}}function Yp(v,t,r){let s,u,_;function B(pe,_e,Re){0!==Re&&(v.drawElementsInstanced(s,_e,u,pe*_,Re),r.update(_e,s,Re))}this.setMode=function l(pe){s=pe},this.setIndex=function A(pe){u=pe.type,_=pe.bytesPerElement},this.render=function O(pe,_e){v.drawElements(s,_e,u,pe*_),r.update(_e,s,1)},this.renderInstances=B,this.renderMultiDraw=function ee(pe,_e,Re){if(0===Re)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,_e,0,u,pe,0,Re);let Le=0;for(let Pe=0;Pe<Re;Pe++)Le+=_e[Pe];r.update(Le,s,1)},this.renderMultiDrawInstances=function ae(pe,_e,Re,Ue){if(0===Re)return;const Le=t.get("WEBGL_multi_draw");if(null===Le)for(let Pe=0;Pe<pe.length;Pe++)B(pe[Pe]/_,_e[Pe],Ue[Pe]);else{Le.multiDrawElementsInstancedWEBGL(s,_e,0,u,pe,0,Ue,0,Re);let Pe=0;for(let ht=0;ht<Re;ht++)Pe+=_e[ht]*Ue[ht];r.update(Pe,s,1)}}}function Ad(v){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function l(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function s(u,_,A){switch(r.calls++,_){case v.TRIANGLES:r.triangles+=A*(u/3);break;case v.LINES:r.lines+=A*(u/2);break;case v.LINE_STRIP:r.lines+=A*(u-1);break;case v.LINE_LOOP:r.lines+=A*u;break;case v.POINTS:r.points+=A*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_)}}}}function Jg(v,t,r){const s=new WeakMap,l=new Vs;return{update:function u(_,A,O){const B=_.morphTargetInfluences,ee=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,ae=void 0!==ee?ee.length:0;let pe=s.get(A);if(void 0===pe||pe.count!==ae){let Pt=function(){zt.dispose(),s.delete(A),A.removeEventListener("dispose",Pt)};void 0!==pe&&pe.texture.dispose();const _e=void 0!==A.morphAttributes.position,Re=void 0!==A.morphAttributes.normal,Ue=void 0!==A.morphAttributes.color,Le=A.morphAttributes.position||[],Pe=A.morphAttributes.normal||[],ht=A.morphAttributes.color||[];let ut=0;!0===_e&&(ut=1),!0===Re&&(ut=2),!0===Ue&&(ut=3);let st=A.attributes.position.count*ut,Yt=1;st>t.maxTextureSize&&(Yt=Math.ceil(st/t.maxTextureSize),st=t.maxTextureSize);const At=new Float32Array(st*Yt*4*ae),zt=new et(At,st,Yt,ae);zt.type=U,zt.needsUpdate=!0;const tn=4*ut;for(let Tt=0;Tt<ae;Tt++){const wn=Le[Tt],er=Pe[Tt],Kn=ht[Tt],rr=st*Yt*4*Tt;for(let wr=0;wr<wn.count;wr++){const tr=wr*tn;!0===_e&&(l.fromBufferAttribute(wn,wr),At[rr+tr+0]=l.x,At[rr+tr+1]=l.y,At[rr+tr+2]=l.z,At[rr+tr+3]=0),!0===Re&&(l.fromBufferAttribute(er,wr),At[rr+tr+4]=l.x,At[rr+tr+5]=l.y,At[rr+tr+6]=l.z,At[rr+tr+7]=0),!0===Ue&&(l.fromBufferAttribute(Kn,wr),At[rr+tr+8]=l.x,At[rr+tr+9]=l.y,At[rr+tr+10]=l.z,At[rr+tr+11]=4===Kn.itemSize?l.w:1)}}pe={count:ae,texture:zt,size:new pr(st,Yt)},s.set(A,pe),A.addEventListener("dispose",Pt)}if(!0===_.isInstancedMesh&&null!==_.morphTexture)O.getUniforms().setValue(v,"morphTexture",_.morphTexture,r);else{let _e=0;for(let Ue=0;Ue<B.length;Ue++)_e+=B[Ue];const Re=A.morphTargetsRelative?1:1-_e;O.getUniforms().setValue(v,"morphTargetBaseInfluence",Re),O.getUniforms().setValue(v,"morphTargetInfluences",B)}O.getUniforms().setValue(v,"morphTargetsTexture",pe.texture,r),O.getUniforms().setValue(v,"morphTargetsTextureSize",pe.size)}}}function vf(v,t,r,s){let l=new WeakMap;function A(O){const B=O.target;B.removeEventListener("dispose",A),r.remove(B.instanceMatrix),null!==B.instanceColor&&r.remove(B.instanceColor)}return{update:function u(O){const B=s.render.frame,ae=t.get(O,O.geometry);if(l.get(ae)!==B&&(t.update(ae),l.set(ae,B)),O.isInstancedMesh&&(!1===O.hasEventListener("dispose",A)&&O.addEventListener("dispose",A),l.get(O)!==B&&(r.update(O.instanceMatrix,v.ARRAY_BUFFER),null!==O.instanceColor&&r.update(O.instanceColor,v.ARRAY_BUFFER),l.set(O,B))),O.isSkinnedMesh){const pe=O.skeleton;l.get(pe)!==B&&(pe.update(),l.set(pe,B))}return ae},dispose:function _(){l=new WeakMap}}}const Qg=new _o,Zp=new tg(1,1),Jp=new et,Qp=new Ze,ey=new Do,em=[],B0=[],V0=new Float32Array(16),G0=new Float32Array(9),ty=new Float32Array(4);function dh(v,t,r){const s=v[0];if(s<=0||s>0)return v;const l=t*r;let u=em[l];if(void 0===u&&(u=new Float32Array(l),em[l]=u),0!==t){s.toArray(u,0);for(let _=1,A=0;_!==t;++_)A+=r,v[_].toArray(u,A)}return u}function Ka(v,t){if(v.length!==t.length)return!1;for(let r=0,s=v.length;r<s;r++)if(v[r]!==t[r])return!1;return!0}function Ya(v,t){for(let r=0,s=t.length;r<s;r++)v[r]=t[r]}function tm(v,t){let r=B0[t];void 0===r&&(r=new Int32Array(t),B0[t]=r);for(let s=0;s!==t;++s)r[s]=v.allocateTextureUnit();return r}function z0(v,t){const r=this.cache;r[0]!==t&&(v.uniform1f(this.addr,t),r[0]=t)}function $0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2fv(this.addr,t),Ya(r,t)}}function Pw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(v.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Ka(r,t))return;v.uniform3fv(this.addr,t),Ya(r,t)}}function Ow(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4fv(this.addr,t),Ya(r,t)}}function Yl(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix2fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;ty.set(s),v.uniformMatrix2fv(this.addr,!1,ty),Ya(r,s)}}function Lw(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix3fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;G0.set(s),v.uniformMatrix3fv(this.addr,!1,G0),Ya(r,s)}}function kw(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix4fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;V0.set(s),v.uniformMatrix4fv(this.addr,!1,V0),Ya(r,s)}}function qE(v,t){const r=this.cache;r[0]!==t&&(v.uniform1i(this.addr,t),r[0]=t)}function ny(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2iv(this.addr,t),Ya(r,t)}}function H0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Ka(r,t))return;v.uniform3iv(this.addr,t),Ya(r,t)}}function Nw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4iv(this.addr,t),Ya(r,t)}}function jw(v,t){const r=this.cache;r[0]!==t&&(v.uniform1ui(this.addr,t),r[0]=t)}function Fw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2uiv(this.addr,t),Ya(r,t)}}function W0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Ka(r,t))return;v.uniform3uiv(this.addr,t),Ya(r,t)}}function Uw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4uiv(this.addr,t),Ya(r,t)}}function Bw(v,t,r){const s=this.cache,l=r.allocateTextureUnit();let u;s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),this.type===v.SAMPLER_2D_SHADOW?(Zp.compareFunction=515,u=Zp):u=Qg,r.setTexture2D(t||u,l)}function ry(v,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),r.setTexture3D(t||Qp,l)}function Vw(v,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),r.setTextureCube(t||ey,l)}function Gw(v,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(v.uniform1i(this.addr,l),s[0]=l),r.setTexture2DArray(t||Jp,l)}function $w(v,t){v.uniform1fv(this.addr,t)}function Hw(v,t){const r=dh(t,this.size,2);v.uniform2fv(this.addr,r)}function nu(v,t){const r=dh(t,this.size,3);v.uniform3fv(this.addr,r)}function iy(v,t){const r=dh(t,this.size,4);v.uniform4fv(this.addr,r)}function Ww(v,t){const r=dh(t,this.size,4);v.uniformMatrix2fv(this.addr,!1,r)}function Xw(v,t){const r=dh(t,this.size,9);v.uniformMatrix3fv(this.addr,!1,r)}function X0(v,t){const r=dh(t,this.size,16);v.uniformMatrix4fv(this.addr,!1,r)}function q0(v,t){v.uniform1iv(this.addr,t)}function nm(v,t){v.uniform2iv(this.addr,t)}function sy(v,t){v.uniform3iv(this.addr,t)}function KE(v,t){v.uniform4iv(this.addr,t)}function K0(v,t){v.uniform1uiv(this.addr,t)}function Y0(v,t){v.uniform2uiv(this.addr,t)}function Z0(v,t){v.uniform3uiv(this.addr,t)}function rm(v,t){v.uniform4uiv(this.addr,t)}function oy(v,t,r){const s=this.cache,l=t.length,u=tm(r,l);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==l;++_)r.setTexture2D(t[_]||Qg,u[_])}function Su(v,t,r){const s=this.cache,l=t.length,u=tm(r,l);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==l;++_)r.setTexture3D(t[_]||Qp,u[_])}function qw(v,t,r){const s=this.cache,l=t.length,u=tm(r,l);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==l;++_)r.setTextureCube(t[_]||ey,u[_])}function Kw(v,t,r){const s=this.cache,l=t.length,u=tm(r,l);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==l;++_)r.setTexture2DArray(t[_]||Jp,u[_])}class Yw{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.setValue=function zw(v){switch(v){case 5126:return z0;case 35664:return $0;case 35665:return Pw;case 35666:return Ow;case 35674:return Yl;case 35675:return Lw;case 35676:return kw;case 5124:case 35670:return qE;case 35667:case 35671:return ny;case 35668:case 35672:return H0;case 35669:case 35673:return Nw;case 5125:return jw;case 36294:return Fw;case 36295:return W0;case 36296:return Uw;case 35678:case 36198:case 36298:case 36306:case 35682:return Bw;case 35679:case 36299:case 36307:return ry;case 35680:case 36300:case 36308:case 36293:return Vw;case 36289:case 36303:case 36311:case 36292:return Gw}}(r.type)}}class hh{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=function ay(v){switch(v){case 5126:return $w;case 35664:return Hw;case 35665:return nu;case 35666:return iy;case 35674:return Ww;case 35675:return Xw;case 35676:return X0;case 5124:case 35670:return q0;case 35667:case 35671:return nm;case 35668:case 35672:return sy;case 35669:case 35673:return KE;case 5125:return K0;case 36294:return Y0;case 36295:return Z0;case 36296:return rm;case 35678:case 36198:case 36298:case 36306:case 35682:return oy;case 35679:case 36299:case 36307:return Su;case 35680:case 36300:case 36308:case 36293:return qw;case 36289:case 36303:case 36311:case 36292:return Kw}}(r.type)}}class J0{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,s){const l=this.seq;for(let u=0,_=l.length;u!==_;++u){const A=l[u];A.setValue(t,r[A.id],s)}}}const Eu=/(\w+)(\])?(\[|\.)?/g;function Cd(v,t){v.seq.push(t),v.map[t.id]=t}function ly(v,t,r){const s=v.name,l=s.length;for(Eu.lastIndex=0;;){const u=Eu.exec(s);let A=u[1];const B=u[3];if("]"===u[2]&&(A|=0),void 0===B||"["===B&&Eu.lastIndex+2===l){Cd(r,void 0===B?new Yw(A,v,t):new hh(A,v,t));break}{let ae=r.map[A];void 0===ae&&(ae=new J0(A),Cd(r,ae)),r=ae}}}class Zu{constructor(t,r){this.seq=[],this.map={};const s=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let l=0;l<s;++l){const u=t.getActiveUniform(r,l);ly(u,t.getUniformLocation(r,u.name),this)}}setValue(t,r,s,l){const u=this.map[r];void 0!==u&&u.setValue(t,s,l)}setOptional(t,r,s){const l=r[s];void 0!==l&&this.setValue(t,s,l)}static upload(t,r,s,l){for(let u=0,_=r.length;u!==_;++u){const A=r[u],O=s[A.id];!1!==O.needsUpdate&&A.setValue(t,O.value,l)}}static seqWithValue(t,r){const s=[];for(let l=0,u=t.length;l!==u;++l){const _=t[l];_.id in r&&s.push(_)}return s}}function cy(v,t,r){const s=v.createShader(t);return v.shaderSource(s,r),v.compileShader(s),s}const Q0=37297;let Zw=0;const e_=new Yi;function t_(v,t,r){const s=v.getShaderParameter(t,v.COMPILE_STATUS),l=v.getShaderInfoLog(t).trim();if(s&&""===l)return"";const u=/ERROR: 0:(\d+)/.exec(l);if(u){const _=parseInt(u[1]);return r.toUpperCase()+"\n\n"+l+"\n\n"+function Jw(v,t){const r=v.split("\n"),s=[],l=Math.max(t-6,0),u=Math.min(t+6,r.length);for(let _=l;_<u;_++){const A=_+1;s.push(`${A===t?">":" "} ${A}: ${r[_]}`)}return s.join("\n")}(v.getShaderSource(t),_)}return l}function ex(v,t){const r=function Qw(v){xs._getMatrix(e_,xs.workingColorSpace,v);const t=`mat3( ${e_.elements.map(r=>r.toFixed(4))} )`;switch(xs.getTransfer(v)){case Ms:return[t,"LinearTransferOETF"];case qi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",v),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${v}( vec4 value ) {`,`\treturn ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join("\n")}function n_(v,t){let r;switch(t){case bn:r="Linear";break;case Qn:r="Reinhard";break;case Pn:r="Cineon";break;case pt:r="ACESFilmic";break;case rt:r="AgX";break;case _t:r="Neutral";break;case bt:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+v+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const im=new xt;function fh(v){return""!==v}function i_(v,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function s_(v,t){return v.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const o_=/^[ \t]*#include +<([\w\d./]+)>/gm;function _f(v){return v.replace(o_,bf)}const a_=new Map;function bf(v,t){let r=Cs[t];if(void 0===r){const s=a_.get(t);if(void 0===s)throw new Error("Can not resolve #include <"+t+">");r=Cs[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s)}return _f(r)}const wf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ph(v){return v.replace(wf,rx)}function rx(v,t,r,s){let l="";for(let u=parseInt(t);u<parseInt(r);u++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return l}function l_(v){let t=`precision ${v.precision} float;\n\tprecision ${v.precision} int;\n\tprecision ${v.precision} sampler2D;\n\tprecision ${v.precision} samplerCube;\n\tprecision ${v.precision} sampler3D;\n\tprecision ${v.precision} sampler2DArray;\n\tprecision ${v.precision} sampler2DShadow;\n\tprecision ${v.precision} samplerCubeShadow;\n\tprecision ${v.precision} sampler2DArrayShadow;\n\tprecision ${v.precision} isampler2D;\n\tprecision ${v.precision} isampler3D;\n\tprecision ${v.precision} isamplerCube;\n\tprecision ${v.precision} isampler2DArray;\n\tprecision ${v.precision} usampler2D;\n\tprecision ${v.precision} usampler3D;\n\tprecision ${v.precision} usamplerCube;\n\tprecision ${v.precision} usampler2DArray;\n\t`;return"highp"===v.precision?t+="\n#define HIGH_PRECISION":"mediump"===v.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(t+="\n#define LOW_PRECISION"),t}function ZE(v,t,r,s){const l=v.getContext(),u=r.defines;let _=r.vertexShader,A=r.fragmentShader;const O=function ix(v){let t="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===S?t="SHADOWMAP_TYPE_PCF":v.shadowMapType===k?t="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===q&&(t="SHADOWMAP_TYPE_VSM"),t}(r),B=function om(v){let t="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case ir:case Dr:t="ENVMAP_TYPE_CUBE";break;case In:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),ee=function uy(v){let t="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===Dr&&(t="ENVMAP_MODE_REFRACTION"),t}(r),ae=function sx(v){let t="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Rn:t="ENVMAP_BLENDING_MULTIPLY";break;case Sr:t="ENVMAP_BLENDING_MIX";break;case Bn:t="ENVMAP_BLENDING_ADD"}return t}(r),pe=function YE(v){const t=v.envMapCubeUVHeight;if(null===t)return null;const r=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:s,maxMip:r}}(r),_e=function tx(v){return[v.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",v.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(fh).join("\n")}(r),Re=function r_(v){const t=[];for(const r in v){const s=v[r];!1!==s&&t.push("#define "+r+" "+s)}return t.join("\n")}(u),Ue=l.createProgram();let Le,Pe,ht=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(Le=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re].filter(fh).join("\n"),Le.length>0&&(Le+="\n"),Pe=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re].filter(fh).join("\n"),Pe.length>0&&(Pe+="\n")):(Le=[l_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+ee:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+O:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fh).join("\n"),Pe=[l_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+B:"",r.envMap?"#define "+ee:"",r.envMap?"#define "+ae:"",pe?"#define CUBEUV_TEXEL_WIDTH "+pe.texelWidth:"",pe?"#define CUBEUV_TEXEL_HEIGHT "+pe.texelHeight:"",pe?"#define CUBEUV_MAX_MIP "+pe.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+O:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ur?"#define TONE_MAPPING":"",r.toneMapping!==ur?Cs.tonemapping_pars_fragment:"",r.toneMapping!==ur?n_("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Cs.colorspace_pars_fragment,ex("linearToOutputTexel",r.outputColorSpace),(xs.getLuminanceCoefficients(im),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${im.x.toFixed(4)}, ${im.y.toFixed(4)}, ${im.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(fh).join("\n")),_=_f(_),_=i_(_,r),_=s_(_,r),A=_f(A),A=i_(A,r),A=s_(A,r),_=ph(_),A=ph(A),!0!==r.isRawShaderMaterial&&(ht="#version 300 es\n",Le=[_e,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Le,Pe=["#define varying in",r.glslVersion===nt?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===nt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Pe);const st=ht+Pe+A,Yt=cy(l,l.VERTEX_SHADER,ht+Le+_),At=cy(l,l.FRAGMENT_SHADER,st);function zt(wn){if(v.debug.checkShaderErrors){const er=l.getProgramInfoLog(Ue).trim(),Kn=l.getShaderInfoLog(Yt).trim(),rr=l.getShaderInfoLog(At).trim();let wr=!0,tr=!0;if(!1===l.getProgramParameter(Ue,l.LINK_STATUS))if(wr=!1,"function"==typeof v.debug.onShaderError)v.debug.onShaderError(l,Ue,Yt,At);else{const Wr=t_(l,Yt,"vertex"),cr=t_(l,At,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(Ue,l.VALIDATE_STATUS)+"\n\nMaterial Name: "+wn.name+"\nMaterial Type: "+wn.type+"\n\nProgram Info Log: "+er+"\n"+Wr+"\n"+cr)}else""!==er?console.warn("THREE.WebGLProgram: Program Info Log:",er):(""===Kn||""===rr)&&(tr=!1);tr&&(wn.diagnostics={runnable:wr,programLog:er,vertexShader:{log:Kn,prefix:Le},fragmentShader:{log:rr,prefix:Pe}})}l.deleteShader(Yt),l.deleteShader(At),tn=new Zu(l,Ue),Pt=function nx(v,t){const r={},s=v.getProgramParameter(t,v.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){const u=v.getActiveAttrib(t,l),_=u.name;let A=1;u.type===v.FLOAT_MAT2&&(A=2),u.type===v.FLOAT_MAT3&&(A=3),u.type===v.FLOAT_MAT4&&(A=4),r[_]={type:u.type,location:v.getAttribLocation(t,_),locationSize:A}}return r}(l,Ue)}let tn,Pt;l.attachShader(Ue,Yt),l.attachShader(Ue,At),void 0!==r.index0AttributeName?l.bindAttribLocation(Ue,0,r.index0AttributeName):!0===r.morphTargets&&l.bindAttribLocation(Ue,0,"position"),l.linkProgram(Ue),this.getUniforms=function(){return void 0===tn&&zt(this),tn},this.getAttributes=function(){return void 0===Pt&&zt(this),Pt};let Tt=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===Tt&&(Tt=l.getProgramParameter(Ue,Q0)),Tt},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(Ue),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Zw++,this.cacheKey=t,this.usedTimes=1,this.program=Ue,this.vertexShader=Yt,this.fragmentShader=At,this}let ox=0;class ax{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const s=t.fragmentShader,l=this._getShaderStage(t.vertexShader),u=this._getShaderStage(s),_=this._getShaderCacheForMaterial(t);return!1===_.has(l)&&(_.add(l),l.usedTimes++),!1===_.has(u)&&(_.add(u),u.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const s of r)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let s=r.get(t);return void 0===s&&(s=new Set,r.set(t,s)),s}_getShaderStage(t){const r=this.shaderCache;let s=r.get(t);return void 0===s&&(s=new JE(t),r.set(t,s)),s}}class JE{constructor(t){this.id=ox++,this.code=t,this.usedTimes=0}}function lx(v,t,r,s,l,u,_){const A=new _a,O=new ax,B=new Set,ee=[],ae=l.logarithmicDepthBuffer,pe=l.vertexTextures;let _e=l.precision;const Re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Ue(Pt){return B.add(Pt),0===Pt?"uv":`uv${Pt}`}return{getParameters:function Le(Pt,Tt,wn,er,Kn){const rr=er.fog,wr=Kn.geometry,Wr=(Pt.isMeshStandardMaterial?r:t).get(Pt.envMap||(Pt.isMeshStandardMaterial?er.environment:null)),cr=Wr&&Wr.mapping===In?Wr.image.height:null,Zr=Re[Pt.type];null!==Pt.precision&&(_e=l.getMaxPrecision(Pt.precision),_e!==Pt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Pt.precision,"not supported, using",_e,"instead."));const hi=wr.morphAttributes.position||wr.morphAttributes.normal||wr.morphAttributes.color,Pi=void 0!==hi?hi.length:0;let Ts,Tr,ti,Di,as=0;if(void 0!==wr.morphAttributes.position&&(as=1),void 0!==wr.morphAttributes.normal&&(as=2),void 0!==wr.morphAttributes.color&&(as=3),Zr){const wo=xl[Zr];Ts=wo.vertexShader,Tr=wo.fragmentShader}else Ts=Pt.vertexShader,Tr=Pt.fragmentShader,O.update(Pt),ti=O.getVertexShaderID(Pt),Di=O.getFragmentShaderID(Pt);const ri=v.getRenderTarget(),Bi=v.state.buffers.depth.getReversed(),$s=!0===Kn.isInstancedMesh,Fi=!0===Kn.isBatchedMesh,hs=!!Pt.map,Ir=!!Wr,hn=!!Pt.aoMap,Ci=!!Pt.lightMap,Gr=!!Pt.bumpMap,gi=!!Pt.normalMap,Kr=!!Pt.displacementMap,Xi=!!Pt.emissiveMap,ci=!!Pt.metalnessMap,cn=!!Pt.roughnessMap,Ht=Pt.anisotropy>0,ar=Pt.clearcoat>0,Yr=Pt.iridescence>0,Ur=Pt.sheen>0,Zi=Pt.transmission>0,Ti=Ht&&!!Pt.anisotropyMap,Ii=ar&&!!Pt.clearcoatMap,js=ar&&!!Pt.clearcoatNormalMap,ii=ar&&!!Pt.clearcoatRoughnessMap,zi=Yr&&!!Pt.iridescenceMap,ms=Yr&&!!Pt.iridescenceThicknessMap,vs=Ur&&!!Pt.sheenColorMap,$i=Ur&&!!Pt.sheenRoughnessMap,lo=!!Pt.specularMap,Fs=!!Pt.specularColorMap,Xo=!!Pt.specularIntensityMap,Xn=Zi&&!!Pt.transmissionMap,Mi=Zi&&!!Pt.thicknessMap,$r=!!Pt.alphaMap,Us=!!Pt.extensions;let Ea=ur;Pt.toneMapped&&(null===ri||!0===ri.isXRRenderTarget)&&(Ea=v.toneMapping);const hl={shaderID:Zr,shaderType:Pt.type,shaderName:Pt.name,vertexShader:Ts,fragmentShader:Tr,defines:Pt.defines,customVertexShaderID:ti,customFragmentShaderID:Di,isRawShaderMaterial:!0===Pt.isRawShaderMaterial,glslVersion:Pt.glslVersion,precision:_e,batching:Fi,batchingColor:Fi&&null!==Kn._colorsTexture,instancing:$s,instancingColor:$s&&null!==Kn.instanceColor,instancingMorph:$s&&null!==Kn.morphTexture,supportsVertexTextures:pe,outputColorSpace:null===ri?v.outputColorSpace:!0===ri.isXRRenderTarget?ri.texture.colorSpace:ns,alphaToCoverage:!!Pt.alphaToCoverage,map:hs,matcap:!!Pt.matcap,envMap:Ir,envMapMode:Ir&&Wr.mapping,envMapCubeUVHeight:cr,aoMap:hn,lightMap:Ci,bumpMap:Gr,normalMap:gi,displacementMap:pe&&Kr,emissiveMap:Xi,normalMapObjectSpace:gi&&1===Pt.normalMapType,normalMapTangentSpace:gi&&0===Pt.normalMapType,metalnessMap:ci,roughnessMap:cn,anisotropy:Ht,anisotropyMap:Ti,clearcoat:ar,clearcoatMap:Ii,clearcoatNormalMap:js,clearcoatRoughnessMap:ii,dispersion:Pt.dispersion>0,iridescence:Yr,iridescenceMap:zi,iridescenceThicknessMap:ms,sheen:Ur,sheenColorMap:vs,sheenRoughnessMap:$i,specularMap:lo,specularColorMap:Fs,specularIntensityMap:Xo,transmission:Zi,transmissionMap:Xn,thicknessMap:Mi,gradientMap:!!Pt.gradientMap,opaque:!1===Pt.transparent&&1===Pt.blending&&!1===Pt.alphaToCoverage,alphaMap:$r,alphaTest:Pt.alphaTest>0,alphaHash:!!Pt.alphaHash,combine:Pt.combine,mapUv:hs&&Ue(Pt.map.channel),aoMapUv:hn&&Ue(Pt.aoMap.channel),lightMapUv:Ci&&Ue(Pt.lightMap.channel),bumpMapUv:Gr&&Ue(Pt.bumpMap.channel),normalMapUv:gi&&Ue(Pt.normalMap.channel),displacementMapUv:Kr&&Ue(Pt.displacementMap.channel),emissiveMapUv:Xi&&Ue(Pt.emissiveMap.channel),metalnessMapUv:ci&&Ue(Pt.metalnessMap.channel),roughnessMapUv:cn&&Ue(Pt.roughnessMap.channel),anisotropyMapUv:Ti&&Ue(Pt.anisotropyMap.channel),clearcoatMapUv:Ii&&Ue(Pt.clearcoatMap.channel),clearcoatNormalMapUv:js&&Ue(Pt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ii&&Ue(Pt.clearcoatRoughnessMap.channel),iridescenceMapUv:zi&&Ue(Pt.iridescenceMap.channel),iridescenceThicknessMapUv:ms&&Ue(Pt.iridescenceThicknessMap.channel),sheenColorMapUv:vs&&Ue(Pt.sheenColorMap.channel),sheenRoughnessMapUv:$i&&Ue(Pt.sheenRoughnessMap.channel),specularMapUv:lo&&Ue(Pt.specularMap.channel),specularColorMapUv:Fs&&Ue(Pt.specularColorMap.channel),specularIntensityMapUv:Xo&&Ue(Pt.specularIntensityMap.channel),transmissionMapUv:Xn&&Ue(Pt.transmissionMap.channel),thicknessMapUv:Mi&&Ue(Pt.thicknessMap.channel),alphaMapUv:$r&&Ue(Pt.alphaMap.channel),vertexTangents:!!wr.attributes.tangent&&(gi||Ht),vertexColors:Pt.vertexColors,vertexAlphas:!0===Pt.vertexColors&&!!wr.attributes.color&&4===wr.attributes.color.itemSize,pointsUvs:!0===Kn.isPoints&&!!wr.attributes.uv&&(hs||$r),fog:!!rr,useFog:!0===Pt.fog,fogExp2:!!rr&&rr.isFogExp2,flatShading:!0===Pt.flatShading,sizeAttenuation:!0===Pt.sizeAttenuation,logarithmicDepthBuffer:ae,reverseDepthBuffer:Bi,skinning:!0===Kn.isSkinnedMesh,morphTargets:void 0!==wr.morphAttributes.position,morphNormals:void 0!==wr.morphAttributes.normal,morphColors:void 0!==wr.morphAttributes.color,morphTargetsCount:Pi,morphTextureStride:as,numDirLights:Tt.directional.length,numPointLights:Tt.point.length,numSpotLights:Tt.spot.length,numSpotLightMaps:Tt.spotLightMap.length,numRectAreaLights:Tt.rectArea.length,numHemiLights:Tt.hemi.length,numDirLightShadows:Tt.directionalShadowMap.length,numPointLightShadows:Tt.pointShadowMap.length,numSpotLightShadows:Tt.spotShadowMap.length,numSpotLightShadowsWithMaps:Tt.numSpotLightShadowsWithMaps,numLightProbes:Tt.numLightProbes,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:Pt.dithering,shadowMapEnabled:v.shadowMap.enabled&&wn.length>0,shadowMapType:v.shadowMap.type,toneMapping:Ea,decodeVideoTexture:hs&&!0===Pt.map.isVideoTexture&&xs.getTransfer(Pt.map.colorSpace)===qi,decodeVideoTextureEmissive:Xi&&!0===Pt.emissiveMap.isVideoTexture&&xs.getTransfer(Pt.emissiveMap.colorSpace)===qi,premultipliedAlpha:Pt.premultipliedAlpha,doubleSided:2===Pt.side,flipSided:1===Pt.side,useDepthPacking:Pt.depthPacking>=0,depthPacking:Pt.depthPacking||0,index0AttributeName:Pt.index0AttributeName,extensionClipCullDistance:Us&&!0===Pt.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Us&&!0===Pt.extensions.multiDraw||Fi)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:Pt.customProgramCacheKey()};return hl.vertexUv1s=B.has(1),hl.vertexUv2s=B.has(2),hl.vertexUv3s=B.has(3),B.clear(),hl},getProgramCacheKey:function Pe(Pt){const Tt=[];if(Pt.shaderID?Tt.push(Pt.shaderID):(Tt.push(Pt.customVertexShaderID),Tt.push(Pt.customFragmentShaderID)),void 0!==Pt.defines)for(const wn in Pt.defines)Tt.push(wn),Tt.push(Pt.defines[wn]);return!1===Pt.isRawShaderMaterial&&(function ht(Pt,Tt){Pt.push(Tt.precision),Pt.push(Tt.outputColorSpace),Pt.push(Tt.envMapMode),Pt.push(Tt.envMapCubeUVHeight),Pt.push(Tt.mapUv),Pt.push(Tt.alphaMapUv),Pt.push(Tt.lightMapUv),Pt.push(Tt.aoMapUv),Pt.push(Tt.bumpMapUv),Pt.push(Tt.normalMapUv),Pt.push(Tt.displacementMapUv),Pt.push(Tt.emissiveMapUv),Pt.push(Tt.metalnessMapUv),Pt.push(Tt.roughnessMapUv),Pt.push(Tt.anisotropyMapUv),Pt.push(Tt.clearcoatMapUv),Pt.push(Tt.clearcoatNormalMapUv),Pt.push(Tt.clearcoatRoughnessMapUv),Pt.push(Tt.iridescenceMapUv),Pt.push(Tt.iridescenceThicknessMapUv),Pt.push(Tt.sheenColorMapUv),Pt.push(Tt.sheenRoughnessMapUv),Pt.push(Tt.specularMapUv),Pt.push(Tt.specularColorMapUv),Pt.push(Tt.specularIntensityMapUv),Pt.push(Tt.transmissionMapUv),Pt.push(Tt.thicknessMapUv),Pt.push(Tt.combine),Pt.push(Tt.fogExp2),Pt.push(Tt.sizeAttenuation),Pt.push(Tt.morphTargetsCount),Pt.push(Tt.morphAttributeCount),Pt.push(Tt.numDirLights),Pt.push(Tt.numPointLights),Pt.push(Tt.numSpotLights),Pt.push(Tt.numSpotLightMaps),Pt.push(Tt.numHemiLights),Pt.push(Tt.numRectAreaLights),Pt.push(Tt.numDirLightShadows),Pt.push(Tt.numPointLightShadows),Pt.push(Tt.numSpotLightShadows),Pt.push(Tt.numSpotLightShadowsWithMaps),Pt.push(Tt.numLightProbes),Pt.push(Tt.shadowMapType),Pt.push(Tt.toneMapping),Pt.push(Tt.numClippingPlanes),Pt.push(Tt.numClipIntersection),Pt.push(Tt.depthPacking)}(Tt,Pt),function ut(Pt,Tt){A.disableAll(),Tt.supportsVertexTextures&&A.enable(0),Tt.instancing&&A.enable(1),Tt.instancingColor&&A.enable(2),Tt.instancingMorph&&A.enable(3),Tt.matcap&&A.enable(4),Tt.envMap&&A.enable(5),Tt.normalMapObjectSpace&&A.enable(6),Tt.normalMapTangentSpace&&A.enable(7),Tt.clearcoat&&A.enable(8),Tt.iridescence&&A.enable(9),Tt.alphaTest&&A.enable(10),Tt.vertexColors&&A.enable(11),Tt.vertexAlphas&&A.enable(12),Tt.vertexUv1s&&A.enable(13),Tt.vertexUv2s&&A.enable(14),Tt.vertexUv3s&&A.enable(15),Tt.vertexTangents&&A.enable(16),Tt.anisotropy&&A.enable(17),Tt.alphaHash&&A.enable(18),Tt.batching&&A.enable(19),Tt.dispersion&&A.enable(20),Tt.batchingColor&&A.enable(21),Pt.push(A.mask),A.disableAll(),Tt.fog&&A.enable(0),Tt.useFog&&A.enable(1),Tt.flatShading&&A.enable(2),Tt.logarithmicDepthBuffer&&A.enable(3),Tt.reverseDepthBuffer&&A.enable(4),Tt.skinning&&A.enable(5),Tt.morphTargets&&A.enable(6),Tt.morphNormals&&A.enable(7),Tt.morphColors&&A.enable(8),Tt.premultipliedAlpha&&A.enable(9),Tt.shadowMapEnabled&&A.enable(10),Tt.doubleSided&&A.enable(11),Tt.flipSided&&A.enable(12),Tt.useDepthPacking&&A.enable(13),Tt.dithering&&A.enable(14),Tt.transmission&&A.enable(15),Tt.sheen&&A.enable(16),Tt.opaque&&A.enable(17),Tt.pointsUvs&&A.enable(18),Tt.decodeVideoTexture&&A.enable(19),Tt.decodeVideoTextureEmissive&&A.enable(20),Tt.alphaToCoverage&&A.enable(21),Pt.push(A.mask)}(Tt,Pt),Tt.push(v.outputColorSpace)),Tt.push(Pt.customProgramCacheKey),Tt.join()},getUniforms:function st(Pt){const Tt=Re[Pt.type];let wn;return wn=Tt?Lb.clone(xl[Tt].uniforms):Pt.uniforms,wn},acquireProgram:function Yt(Pt,Tt){let wn;for(let er=0,Kn=ee.length;er<Kn;er++){const rr=ee[er];if(rr.cacheKey===Tt){wn=rr,++wn.usedTimes;break}}return void 0===wn&&(wn=new ZE(v,Tt,Pt,u),ee.push(wn)),wn},releaseProgram:function At(Pt){if(0==--Pt.usedTimes){const Tt=ee.indexOf(Pt);ee[Tt]=ee[ee.length-1],ee.pop(),Pt.destroy()}},releaseShaderCache:function zt(Pt){O.remove(Pt)},programs:ee,dispose:function tn(){O.dispose()}}}function QE(){let v=new WeakMap;return{has:function t(_){return v.has(_)},get:function r(_){let A=v.get(_);return void 0===A&&(A={},v.set(_,A)),A},remove:function s(_){v.delete(_)},update:function l(_,A,O){v.get(_)[A]=O},dispose:function u(){v=new WeakMap}}}function cx(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.material.id!==t.material.id?v.material.id-t.material.id:v.z!==t.z?v.z-t.z:v.id-t.id}function c_(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.z!==t.z?t.z-v.z:v.id-t.id}function u_(){const v=[];let t=0;const r=[],s=[],l=[];function _(ae,pe,_e,Re,Ue,Le){let Pe=v[t];return void 0===Pe?(Pe={id:ae.id,object:ae,geometry:pe,material:_e,groupOrder:Re,renderOrder:ae.renderOrder,z:Ue,group:Le},v[t]=Pe):(Pe.id=ae.id,Pe.object=ae,Pe.geometry=pe,Pe.material=_e,Pe.groupOrder=Re,Pe.renderOrder=ae.renderOrder,Pe.z=Ue,Pe.group=Le),t++,Pe}return{opaque:r,transmissive:s,transparent:l,init:function u(){t=0,r.length=0,s.length=0,l.length=0},push:function A(ae,pe,_e,Re,Ue,Le){const Pe=_(ae,pe,_e,Re,Ue,Le);_e.transmission>0?s.push(Pe):!0===_e.transparent?l.push(Pe):r.push(Pe)},unshift:function O(ae,pe,_e,Re,Ue,Le){const Pe=_(ae,pe,_e,Re,Ue,Le);_e.transmission>0?s.unshift(Pe):!0===_e.transparent?l.unshift(Pe):r.unshift(Pe)},finish:function ee(){for(let ae=t,pe=v.length;ae<pe;ae++){const _e=v[ae];if(null===_e.id)break;_e.id=null,_e.object=null,_e.geometry=null,_e.material=null,_e.group=null}},sort:function B(ae,pe){r.length>1&&r.sort(ae||cx),s.length>1&&s.sort(pe||c_),l.length>1&&l.sort(pe||c_)}}}function dy(){let v=new WeakMap;return{get:function t(s,l){const u=v.get(s);let _;return void 0===u?(_=new u_,v.set(s,[_])):l>=u.length?(_=new u_,u.push(_)):_=u[l],_},dispose:function r(){v=new WeakMap}}}function xf(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new xt,color:new Nr};break;case"SpotLight":r={position:new xt,direction:new xt,color:new Nr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new xt,color:new Nr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new xt,skyColor:new Nr,groundColor:new Nr};break;case"RectAreaLight":r={color:new Nr,position:new xt,halfWidth:new xt,halfHeight:new xt}}return v[t.id]=r,r}}}let am=0;function d_(v,t){return(t.castShadow?2:0)-(v.castShadow?2:0)+(t.map?1:0)-(v.map?1:0)}function Sf(v){const t=new xf,r=function hy(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pr,shadowCameraNear:1,shadowCameraFar:1e3}}return v[t.id]=r,r}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let B=0;B<9;B++)s.probe.push(new xt);const l=new xt,u=new Li,_=new Li;return{setup:function A(B){let ee=0,ae=0,pe=0;for(let Pt=0;Pt<9;Pt++)s.probe[Pt].set(0,0,0);let _e=0,Re=0,Ue=0,Le=0,Pe=0,ht=0,ut=0,st=0,Yt=0,At=0,zt=0;B.sort(d_);for(let Pt=0,Tt=B.length;Pt<Tt;Pt++){const wn=B[Pt],er=wn.color,Kn=wn.intensity,rr=wn.distance,wr=wn.shadow&&wn.shadow.map?wn.shadow.map.texture:null;if(wn.isAmbientLight)ee+=er.r*Kn,ae+=er.g*Kn,pe+=er.b*Kn;else if(wn.isLightProbe){for(let tr=0;tr<9;tr++)s.probe[tr].addScaledVector(wn.sh.coefficients[tr],Kn);zt++}else if(wn.isDirectionalLight){const tr=t.get(wn);if(tr.color.copy(wn.color).multiplyScalar(wn.intensity),wn.castShadow){const Wr=wn.shadow,cr=r.get(wn);cr.shadowIntensity=Wr.intensity,cr.shadowBias=Wr.bias,cr.shadowNormalBias=Wr.normalBias,cr.shadowRadius=Wr.radius,cr.shadowMapSize=Wr.mapSize,s.directionalShadow[_e]=cr,s.directionalShadowMap[_e]=wr,s.directionalShadowMatrix[_e]=wn.shadow.matrix,ht++}s.directional[_e]=tr,_e++}else if(wn.isSpotLight){const tr=t.get(wn);tr.position.setFromMatrixPosition(wn.matrixWorld),tr.color.copy(er).multiplyScalar(Kn),tr.distance=rr,tr.coneCos=Math.cos(wn.angle),tr.penumbraCos=Math.cos(wn.angle*(1-wn.penumbra)),tr.decay=wn.decay,s.spot[Ue]=tr;const Wr=wn.shadow;if(wn.map&&(s.spotLightMap[Yt]=wn.map,Yt++,Wr.updateMatrices(wn),wn.castShadow&&At++),s.spotLightMatrix[Ue]=Wr.matrix,wn.castShadow){const cr=r.get(wn);cr.shadowIntensity=Wr.intensity,cr.shadowBias=Wr.bias,cr.shadowNormalBias=Wr.normalBias,cr.shadowRadius=Wr.radius,cr.shadowMapSize=Wr.mapSize,s.spotShadow[Ue]=cr,s.spotShadowMap[Ue]=wr,st++}Ue++}else if(wn.isRectAreaLight){const tr=t.get(wn);tr.color.copy(er).multiplyScalar(Kn),tr.halfWidth.set(.5*wn.width,0,0),tr.halfHeight.set(0,.5*wn.height,0),s.rectArea[Le]=tr,Le++}else if(wn.isPointLight){const tr=t.get(wn);if(tr.color.copy(wn.color).multiplyScalar(wn.intensity),tr.distance=wn.distance,tr.decay=wn.decay,wn.castShadow){const Wr=wn.shadow,cr=r.get(wn);cr.shadowIntensity=Wr.intensity,cr.shadowBias=Wr.bias,cr.shadowNormalBias=Wr.normalBias,cr.shadowRadius=Wr.radius,cr.shadowMapSize=Wr.mapSize,cr.shadowCameraNear=Wr.camera.near,cr.shadowCameraFar=Wr.camera.far,s.pointShadow[Re]=cr,s.pointShadowMap[Re]=wr,s.pointShadowMatrix[Re]=wn.shadow.matrix,ut++}s.point[Re]=tr,Re++}else if(wn.isHemisphereLight){const tr=t.get(wn);tr.skyColor.copy(wn.color).multiplyScalar(Kn),tr.groundColor.copy(wn.groundColor).multiplyScalar(Kn),s.hemi[Pe]=tr,Pe++}}Le>0&&(!0===v.has("OES_texture_float_linear")?(s.rectAreaLTC1=bi.LTC_FLOAT_1,s.rectAreaLTC2=bi.LTC_FLOAT_2):(s.rectAreaLTC1=bi.LTC_HALF_1,s.rectAreaLTC2=bi.LTC_HALF_2)),s.ambient[0]=ee,s.ambient[1]=ae,s.ambient[2]=pe;const tn=s.hash;(tn.directionalLength!==_e||tn.pointLength!==Re||tn.spotLength!==Ue||tn.rectAreaLength!==Le||tn.hemiLength!==Pe||tn.numDirectionalShadows!==ht||tn.numPointShadows!==ut||tn.numSpotShadows!==st||tn.numSpotMaps!==Yt||tn.numLightProbes!==zt)&&(s.directional.length=_e,s.spot.length=Ue,s.rectArea.length=Le,s.point.length=Re,s.hemi.length=Pe,s.directionalShadow.length=ht,s.directionalShadowMap.length=ht,s.pointShadow.length=ut,s.pointShadowMap.length=ut,s.spotShadow.length=st,s.spotShadowMap.length=st,s.directionalShadowMatrix.length=ht,s.pointShadowMatrix.length=ut,s.spotLightMatrix.length=st+Yt-At,s.spotLightMap.length=Yt,s.numSpotLightShadowsWithMaps=At,s.numLightProbes=zt,tn.directionalLength=_e,tn.pointLength=Re,tn.spotLength=Ue,tn.rectAreaLength=Le,tn.hemiLength=Pe,tn.numDirectionalShadows=ht,tn.numPointShadows=ut,tn.numSpotShadows=st,tn.numSpotMaps=Yt,tn.numLightProbes=zt,s.version=am++)},setupView:function O(B,ee){let ae=0,pe=0,_e=0,Re=0,Ue=0;const Le=ee.matrixWorldInverse;for(let Pe=0,ht=B.length;Pe<ht;Pe++){const ut=B[Pe];if(ut.isDirectionalLight){const st=s.directional[ae];st.direction.setFromMatrixPosition(ut.matrixWorld),l.setFromMatrixPosition(ut.target.matrixWorld),st.direction.sub(l),st.direction.transformDirection(Le),ae++}else if(ut.isSpotLight){const st=s.spot[_e];st.position.setFromMatrixPosition(ut.matrixWorld),st.position.applyMatrix4(Le),st.direction.setFromMatrixPosition(ut.matrixWorld),l.setFromMatrixPosition(ut.target.matrixWorld),st.direction.sub(l),st.direction.transformDirection(Le),_e++}else if(ut.isRectAreaLight){const st=s.rectArea[Re];st.position.setFromMatrixPosition(ut.matrixWorld),st.position.applyMatrix4(Le),_.identity(),u.copy(ut.matrixWorld),u.premultiply(Le),_.extractRotation(u),st.halfWidth.set(.5*ut.width,0,0),st.halfHeight.set(0,.5*ut.height,0),st.halfWidth.applyMatrix4(_),st.halfHeight.applyMatrix4(_),Re++}else if(ut.isPointLight){const st=s.point[pe];st.position.setFromMatrixPosition(ut.matrixWorld),st.position.applyMatrix4(Le),pe++}else if(ut.isHemisphereLight){const st=s.hemi[Ue];st.direction.setFromMatrixPosition(ut.matrixWorld),st.direction.transformDirection(Le),Ue++}}},state:s}}function fy(v){const t=new Sf(v),r=[],s=[],B={lightsArray:r,shadowsArray:s,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function l(ee){B.camera=ee,r.length=0,s.length=0},state:B,setupLights:function A(){t.setup(r)},setupLightsView:function O(ee){t.setupView(r,ee)},pushLight:function u(ee){r.push(ee)},pushShadow:function _(ee){s.push(ee)}}}function ux(v){let t=new WeakMap;return{get:function r(l,u=0){const _=t.get(l);let A;return void 0===_?(A=new fy(v),t.set(l,[A])):u>=_.length?(A=new fy(v),_.push(A)):A=_[u],A},dispose:function s(){t=new WeakMap}}}function f_(v,t,r){let s=new tp;const l=new pr,u=new pr,_=new Vs,A=new qh({depthPacking:3201}),O=new Sv,B={},ee=r.maxTextureSize,ae={0:1,1:0,2:2},pe=new tc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_e=pe.clone();_e.defines.HORIZONTAL_PASS=1;const Re=new gs;Re.setAttribute("position",new to(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Ue=new Ps(Re,pe),Le=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S;let Pe=this.type;function ht(At,zt){const tn=t.update(Ue);pe.defines.VSM_SAMPLES!==At.blurSamples&&(pe.defines.VSM_SAMPLES=At.blurSamples,_e.defines.VSM_SAMPLES=At.blurSamples,pe.needsUpdate=!0,_e.needsUpdate=!0),null===At.mapPass&&(At.mapPass=new Te(l.x,l.y)),pe.uniforms.shadow_pass.value=At.map.texture,pe.uniforms.resolution.value=At.mapSize,pe.uniforms.radius.value=At.radius,v.setRenderTarget(At.mapPass),v.clear(),v.renderBufferDirect(zt,null,tn,pe,Ue,null),_e.uniforms.shadow_pass.value=At.mapPass.texture,_e.uniforms.resolution.value=At.mapSize,_e.uniforms.radius.value=At.radius,v.setRenderTarget(At.map),v.clear(),v.renderBufferDirect(zt,null,tn,_e,Ue,null)}function ut(At,zt,tn,Pt){let Tt=null;const wn=!0===tn.isPointLight?At.customDistanceMaterial:At.customDepthMaterial;if(void 0!==wn)Tt=wn;else if(Tt=!0===tn.isPointLight?O:A,v.localClippingEnabled&&!0===zt.clipShadows&&Array.isArray(zt.clippingPlanes)&&0!==zt.clippingPlanes.length||zt.displacementMap&&0!==zt.displacementScale||zt.alphaMap&&zt.alphaTest>0||zt.map&&zt.alphaTest>0){const er=Tt.uuid,Kn=zt.uuid;let rr=B[er];void 0===rr&&(rr={},B[er]=rr);let wr=rr[Kn];void 0===wr&&(wr=Tt.clone(),rr[Kn]=wr,zt.addEventListener("dispose",Yt)),Tt=wr}return Tt.visible=zt.visible,Tt.wireframe=zt.wireframe,Tt.side=Pt===q?null!==zt.shadowSide?zt.shadowSide:zt.side:null!==zt.shadowSide?zt.shadowSide:ae[zt.side],Tt.alphaMap=zt.alphaMap,Tt.alphaTest=zt.alphaTest,Tt.map=zt.map,Tt.clipShadows=zt.clipShadows,Tt.clippingPlanes=zt.clippingPlanes,Tt.clipIntersection=zt.clipIntersection,Tt.displacementMap=zt.displacementMap,Tt.displacementScale=zt.displacementScale,Tt.displacementBias=zt.displacementBias,Tt.wireframeLinewidth=zt.wireframeLinewidth,Tt.linewidth=zt.linewidth,!0===tn.isPointLight&&!0===Tt.isMeshDistanceMaterial&&(v.properties.get(Tt).light=tn),Tt}function st(At,zt,tn,Pt,Tt){if(!1===At.visible)return;if(At.layers.test(zt.layers)&&(At.isMesh||At.isLine||At.isPoints)&&(At.castShadow||At.receiveShadow&&Tt===q)&&(!At.frustumCulled||s.intersectsObject(At))){At.modelViewMatrix.multiplyMatrices(tn.matrixWorldInverse,At.matrixWorld);const Kn=t.update(At),rr=At.material;if(Array.isArray(rr)){const wr=Kn.groups;for(let tr=0,Wr=wr.length;tr<Wr;tr++){const cr=wr[tr],Zr=rr[cr.materialIndex];if(Zr&&Zr.visible){const hi=ut(At,Zr,Pt,Tt);At.onBeforeShadow(v,At,zt,tn,Kn,hi,cr),v.renderBufferDirect(tn,null,Kn,hi,At,cr),At.onAfterShadow(v,At,zt,tn,Kn,hi,cr)}}}else if(rr.visible){const wr=ut(At,rr,Pt,Tt);At.onBeforeShadow(v,At,zt,tn,Kn,wr,null),v.renderBufferDirect(tn,null,Kn,wr,At,null),At.onAfterShadow(v,At,zt,tn,Kn,wr,null)}}const er=At.children;for(let Kn=0,rr=er.length;Kn<rr;Kn++)st(er[Kn],zt,tn,Pt,Tt)}function Yt(At){At.target.removeEventListener("dispose",Yt);for(const tn in B){const Pt=B[tn],Tt=At.target.uuid;Tt in Pt&&(Pt[Tt].dispose(),delete Pt[Tt])}}this.render=function(At,zt,tn){if(!1===Le.enabled||!1===Le.autoUpdate&&!1===Le.needsUpdate||0===At.length)return;const Pt=v.getRenderTarget(),Tt=v.getActiveCubeFace(),wn=v.getActiveMipmapLevel(),er=v.state;er.setBlending(0),er.buffers.color.setClear(1,1,1,1),er.buffers.depth.setTest(!0),er.setScissorTest(!1);const Kn=Pe!==q&&this.type===q,rr=Pe===q&&this.type!==q;for(let wr=0,tr=At.length;wr<tr;wr++){const Wr=At[wr],cr=Wr.shadow;if(void 0===cr){console.warn("THREE.WebGLShadowMap:",Wr,"has no shadow.");continue}if(!1===cr.autoUpdate&&!1===cr.needsUpdate)continue;l.copy(cr.mapSize);const Zr=cr.getFrameExtents();if(l.multiply(Zr),u.copy(cr.mapSize),(l.x>ee||l.y>ee)&&(l.x>ee&&(u.x=Math.floor(ee/Zr.x),l.x=u.x*Zr.x,cr.mapSize.x=u.x),l.y>ee&&(u.y=Math.floor(ee/Zr.y),l.y=u.y*Zr.y,cr.mapSize.y=u.y)),null===cr.map||!0===Kn||!0===rr){const Pi=this.type!==q?{minFilter:mn,magFilter:mn}:{};null!==cr.map&&cr.map.dispose(),cr.map=new Te(l.x,l.y,Pi),cr.map.texture.name=Wr.name+".shadowMap",cr.camera.updateProjectionMatrix()}v.setRenderTarget(cr.map),v.clear();const hi=cr.getViewportCount();for(let Pi=0;Pi<hi;Pi++){const as=cr.getViewport(Pi);_.set(u.x*as.x,u.y*as.y,u.x*as.z,u.y*as.w),er.viewport(_),cr.updateMatrices(Wr,Pi),s=cr.getFrustum(),st(zt,tn,cr.camera,Wr,this.type)}!0!==cr.isPointLightShadow&&this.type===q&&ht(cr,tn),cr.needsUpdate=!1}Pe=this.type,Le.needsUpdate=!1,v.setRenderTarget(Pt,Tt,wn)}}const p_={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function m_(v,t){const u=new function r(){let Xn=!1;const Mi=new Vs;let Cr=null;const $r=new Vs(0,0,0,0);return{setMask:function(Ni){Cr!==Ni&&!Xn&&(v.colorMask(Ni,Ni,Ni,Ni),Cr=Ni)},setLocked:function(Ni){Xn=Ni},setClear:function(Ni,Ri,Us,Ea,hl){!0===hl&&(Ni*=Ea,Ri*=Ea,Us*=Ea),Mi.set(Ni,Ri,Us,Ea),!1===$r.equals(Mi)&&(v.clearColor(Ni,Ri,Us,Ea),$r.copy(Mi))},reset:function(){Xn=!1,Cr=null,$r.set(-1,0,0,0)}}},_=new function s(){let Xn=!1,Mi=!1,Cr=null,$r=null,Ni=null;return{setReversed:function(Ri){if(Mi!==Ri){const Us=t.get("EXT_clip_control");Us.clipControlEXT(Us.LOWER_LEFT_EXT,Mi?Us.ZERO_TO_ONE_EXT:Us.NEGATIVE_ONE_TO_ONE_EXT);const Ea=Ni;Ni=null,this.setClear(Ea)}Mi=Ri},getReversed:function(){return Mi},setTest:function(Ri){Ri?ri(v.DEPTH_TEST):Bi(v.DEPTH_TEST)},setMask:function(Ri){Cr!==Ri&&!Xn&&(v.depthMask(Ri),Cr=Ri)},setFunc:function(Ri){if(Mi&&(Ri=p_[Ri]),$r!==Ri){switch(Ri){case 0:v.depthFunc(v.NEVER);break;case 1:v.depthFunc(v.ALWAYS);break;case 2:v.depthFunc(v.LESS);break;case 3:default:v.depthFunc(v.LEQUAL);break;case 4:v.depthFunc(v.EQUAL);break;case 5:v.depthFunc(v.GEQUAL);break;case 6:v.depthFunc(v.GREATER);break;case 7:v.depthFunc(v.NOTEQUAL)}$r=Ri}},setLocked:function(Ri){Xn=Ri},setClear:function(Ri){Ni!==Ri&&(Mi&&(Ri=1-Ri),v.clearDepth(Ri),Ni=Ri)},reset:function(){Xn=!1,Cr=null,$r=null,Ni=null,Mi=!1}}},A=new function l(){let Xn=!1,Mi=null,Cr=null,$r=null,Ni=null,Ri=null,Us=null,Ea=null,hl=null;return{setTest:function(wo){Xn||(wo?ri(v.STENCIL_TEST):Bi(v.STENCIL_TEST))},setMask:function(wo){Mi!==wo&&!Xn&&(v.stencilMask(wo),Mi=wo)},setFunc:function(wo,Oc,Au){(Cr!==wo||$r!==Oc||Ni!==Au)&&(v.stencilFunc(wo,Oc,Au),Cr=wo,$r=Oc,Ni=Au)},setOp:function(wo,Oc,Au){(Ri!==wo||Us!==Oc||Ea!==Au)&&(v.stencilOp(wo,Oc,Au),Ri=wo,Us=Oc,Ea=Au)},setLocked:function(wo){Xn=wo},setClear:function(wo){hl!==wo&&(v.clearStencil(wo),hl=wo)},reset:function(){Xn=!1,Mi=null,Cr=null,$r=null,Ni=null,Ri=null,Us=null,Ea=null,hl=null}}},O=new WeakMap,B=new WeakMap;let ee={},ae={},pe=new WeakMap,_e=[],Re=null,Ue=!1,Le=null,Pe=null,ht=null,ut=null,st=null,Yt=null,At=null,zt=new Nr(0,0,0),tn=0,Pt=!1,Tt=null,wn=null,er=null,Kn=null,rr=null;const wr=v.getParameter(v.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let tr=!1,Wr=0;const cr=v.getParameter(v.VERSION);-1!==cr.indexOf("WebGL")?(Wr=parseFloat(/^WebGL (\d)/.exec(cr)[1]),tr=Wr>=1):-1!==cr.indexOf("OpenGL ES")&&(Wr=parseFloat(/^OpenGL ES (\d)/.exec(cr)[1]),tr=Wr>=2);let Zr=null,hi={};const Pi=v.getParameter(v.SCISSOR_BOX),as=v.getParameter(v.VIEWPORT),Ts=(new Vs).fromArray(Pi),Tr=(new Vs).fromArray(as);function ti(Xn,Mi,Cr,$r){const Ni=new Uint8Array(4),Ri=v.createTexture();v.bindTexture(Xn,Ri),v.texParameteri(Xn,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(Xn,v.TEXTURE_MAG_FILTER,v.NEAREST);for(let Us=0;Us<Cr;Us++)Xn===v.TEXTURE_3D||Xn===v.TEXTURE_2D_ARRAY?v.texImage3D(Mi,0,v.RGBA,1,1,$r,0,v.RGBA,v.UNSIGNED_BYTE,Ni):v.texImage2D(Mi+Us,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,Ni);return Ri}const Di={};function ri(Xn){!0!==ee[Xn]&&(v.enable(Xn),ee[Xn]=!0)}function Bi(Xn){!1!==ee[Xn]&&(v.disable(Xn),ee[Xn]=!1)}Di[v.TEXTURE_2D]=ti(v.TEXTURE_2D,v.TEXTURE_2D,1),Di[v.TEXTURE_CUBE_MAP]=ti(v.TEXTURE_CUBE_MAP,v.TEXTURE_CUBE_MAP_POSITIVE_X,6),Di[v.TEXTURE_2D_ARRAY]=ti(v.TEXTURE_2D_ARRAY,v.TEXTURE_2D_ARRAY,1,1),Di[v.TEXTURE_3D]=ti(v.TEXTURE_3D,v.TEXTURE_3D,1,1),u.setClear(0,0,0,1),_.setClear(1),A.setClear(0),ri(v.DEPTH_TEST),_.setFunc(3),Gr(!1),gi(1),ri(v.CULL_FACE),hn(0);const vr={100:v.FUNC_ADD,101:v.FUNC_SUBTRACT,102:v.FUNC_REVERSE_SUBTRACT};vr[103]=v.MIN,vr[104]=v.MAX;const Ir={200:v.ZERO,201:v.ONE,202:v.SRC_COLOR,204:v.SRC_ALPHA,210:v.SRC_ALPHA_SATURATE,208:v.DST_COLOR,206:v.DST_ALPHA,203:v.ONE_MINUS_SRC_COLOR,205:v.ONE_MINUS_SRC_ALPHA,209:v.ONE_MINUS_DST_COLOR,207:v.ONE_MINUS_DST_ALPHA,211:v.CONSTANT_COLOR,212:v.ONE_MINUS_CONSTANT_COLOR,213:v.CONSTANT_ALPHA,214:v.ONE_MINUS_CONSTANT_ALPHA};function hn(Xn,Mi,Cr,$r,Ni,Ri,Us,Ea,hl,wo){if(0!==Xn){if(!1===Ue&&(ri(v.BLEND),Ue=!0),5===Xn)Ni=Ni||Mi,Ri=Ri||Cr,Us=Us||$r,(Mi!==Pe||Ni!==st)&&(v.blendEquationSeparate(vr[Mi],vr[Ni]),Pe=Mi,st=Ni),(Cr!==ht||$r!==ut||Ri!==Yt||Us!==At)&&(v.blendFuncSeparate(Ir[Cr],Ir[$r],Ir[Ri],Ir[Us]),ht=Cr,ut=$r,Yt=Ri,At=Us),(!1===Ea.equals(zt)||hl!==tn)&&(v.blendColor(Ea.r,Ea.g,Ea.b,hl),zt.copy(Ea),tn=hl),Le=Xn,Pt=!1;else if(Xn!==Le||wo!==Pt){if((100!==Pe||100!==st)&&(v.blendEquation(v.FUNC_ADD),Pe=100,st=100),wo)switch(Xn){case 1:v.blendFuncSeparate(v.ONE,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.ONE,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFuncSeparate(v.ZERO,v.SRC_COLOR,v.ZERO,v.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xn)}else switch(Xn){case 1:v.blendFuncSeparate(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.SRC_ALPHA,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFunc(v.ZERO,v.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xn)}ht=null,ut=null,Yt=null,At=null,zt.set(0,0,0),tn=0,Le=Xn,Pt=wo}}else!0===Ue&&(Bi(v.BLEND),Ue=!1)}function Gr(Xn){Tt!==Xn&&(v.frontFace(Xn?v.CW:v.CCW),Tt=Xn)}function gi(Xn){0!==Xn?(ri(v.CULL_FACE),Xn!==wn&&v.cullFace(1===Xn?v.BACK:2===Xn?v.FRONT:v.FRONT_AND_BACK)):Bi(v.CULL_FACE),wn=Xn}function Xi(Xn,Mi,Cr){Xn?(ri(v.POLYGON_OFFSET_FILL),(Kn!==Mi||rr!==Cr)&&(v.polygonOffset(Mi,Cr),Kn=Mi,rr=Cr)):Bi(v.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:_,stencil:A},enable:ri,disable:Bi,bindFramebuffer:function $s(Xn,Mi){return ae[Xn]!==Mi&&(v.bindFramebuffer(Xn,Mi),ae[Xn]=Mi,Xn===v.DRAW_FRAMEBUFFER&&(ae[v.FRAMEBUFFER]=Mi),Xn===v.FRAMEBUFFER&&(ae[v.DRAW_FRAMEBUFFER]=Mi),!0)},drawBuffers:function Fi(Xn,Mi){let Cr=_e,$r=!1;if(Xn){Cr=pe.get(Mi),void 0===Cr&&(Cr=[],pe.set(Mi,Cr));const Ni=Xn.textures;if(Cr.length!==Ni.length||Cr[0]!==v.COLOR_ATTACHMENT0){for(let Ri=0,Us=Ni.length;Ri<Us;Ri++)Cr[Ri]=v.COLOR_ATTACHMENT0+Ri;Cr.length=Ni.length,$r=!0}}else Cr[0]!==v.BACK&&(Cr[0]=v.BACK,$r=!0);$r&&v.drawBuffers(Cr)},useProgram:function hs(Xn){return Re!==Xn&&(v.useProgram(Xn),Re=Xn,!0)},setBlending:hn,setMaterial:function Ci(Xn,Mi){2===Xn.side?Bi(v.CULL_FACE):ri(v.CULL_FACE);let Cr=1===Xn.side;Mi&&(Cr=!Cr),Gr(Cr),1===Xn.blending&&!1===Xn.transparent?hn(0):hn(Xn.blending,Xn.blendEquation,Xn.blendSrc,Xn.blendDst,Xn.blendEquationAlpha,Xn.blendSrcAlpha,Xn.blendDstAlpha,Xn.blendColor,Xn.blendAlpha,Xn.premultipliedAlpha),_.setFunc(Xn.depthFunc),_.setTest(Xn.depthTest),_.setMask(Xn.depthWrite),u.setMask(Xn.colorWrite);const $r=Xn.stencilWrite;A.setTest($r),$r&&(A.setMask(Xn.stencilWriteMask),A.setFunc(Xn.stencilFunc,Xn.stencilRef,Xn.stencilFuncMask),A.setOp(Xn.stencilFail,Xn.stencilZFail,Xn.stencilZPass)),Xi(Xn.polygonOffset,Xn.polygonOffsetFactor,Xn.polygonOffsetUnits),!0===Xn.alphaToCoverage?ri(v.SAMPLE_ALPHA_TO_COVERAGE):Bi(v.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Gr,setCullFace:gi,setLineWidth:function Kr(Xn){Xn!==er&&(tr&&v.lineWidth(Xn),er=Xn)},setPolygonOffset:Xi,setScissorTest:function ci(Xn){Xn?ri(v.SCISSOR_TEST):Bi(v.SCISSOR_TEST)},activeTexture:function cn(Xn){void 0===Xn&&(Xn=v.TEXTURE0+wr-1),Zr!==Xn&&(v.activeTexture(Xn),Zr=Xn)},bindTexture:function Ht(Xn,Mi,Cr){void 0===Cr&&(Cr=null===Zr?v.TEXTURE0+wr-1:Zr);let $r=hi[Cr];void 0===$r&&($r={type:void 0,texture:void 0},hi[Cr]=$r),($r.type!==Xn||$r.texture!==Mi)&&(Zr!==Cr&&(v.activeTexture(Cr),Zr=Cr),v.bindTexture(Xn,Mi||Di[Xn]),$r.type=Xn,$r.texture=Mi)},unbindTexture:function ar(){const Xn=hi[Zr];void 0!==Xn&&void 0!==Xn.type&&(v.bindTexture(Xn.type,null),Xn.type=void 0,Xn.texture=void 0)},compressedTexImage2D:function jr(){try{v.compressedTexImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexImage3D:function Yr(){try{v.compressedTexImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texImage2D:function zi(){try{v.texImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texImage3D:function ms(){try{v.texImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},updateUBOMapping:function lo(Xn,Mi){let Cr=B.get(Mi);void 0===Cr&&(Cr=new WeakMap,B.set(Mi,Cr));let $r=Cr.get(Xn);void 0===$r&&($r=v.getUniformBlockIndex(Mi,Xn.name),Cr.set(Xn,$r))},uniformBlockBinding:function Fs(Xn,Mi){const $r=B.get(Mi).get(Xn);O.get(Mi)!==$r&&(v.uniformBlockBinding(Mi,$r,Xn.__bindingPointIndex),O.set(Mi,$r))},texStorage2D:function js(){try{v.texStorage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texStorage3D:function ii(){try{v.texStorage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texSubImage2D:function Ur(){try{v.texSubImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texSubImage3D:function Zi(){try{v.texSubImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexSubImage2D:function Ti(){try{v.compressedTexSubImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexSubImage3D:function Ii(){try{v.compressedTexSubImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},scissor:function vs(Xn){!1===Ts.equals(Xn)&&(v.scissor(Xn.x,Xn.y,Xn.z,Xn.w),Ts.copy(Xn))},viewport:function $i(Xn){!1===Tr.equals(Xn)&&(v.viewport(Xn.x,Xn.y,Xn.z,Xn.w),Tr.copy(Xn))},reset:function Xo(){v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.POLYGON_OFFSET_FILL),v.disable(v.SCISSOR_TEST),v.disable(v.STENCIL_TEST),v.disable(v.SAMPLE_ALPHA_TO_COVERAGE),v.blendEquation(v.FUNC_ADD),v.blendFunc(v.ONE,v.ZERO),v.blendFuncSeparate(v.ONE,v.ZERO,v.ONE,v.ZERO),v.blendColor(0,0,0,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(v.LESS),_.setReversed(!1),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(v.ALWAYS,0,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),v.clearStencil(0),v.cullFace(v.BACK),v.frontFace(v.CCW),v.polygonOffset(0,0),v.activeTexture(v.TEXTURE0),v.bindFramebuffer(v.FRAMEBUFFER,null),v.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),ee={},Zr=null,hi={},ae={},pe=new WeakMap,_e=[],Re=null,Ue=!1,Le=null,Pe=null,ht=null,ut=null,st=null,Yt=null,At=null,zt=new Nr(0,0,0),tn=0,Pt=!1,Tt=null,wn=null,er=null,Kn=null,rr=null,Ts.set(0,0,v.canvas.width,v.canvas.height),Tr.set(0,0,v.canvas.width,v.canvas.height),u.reset(),_.reset(),A.reset()}}}function dx(v,t,r,s,l,u,_){const A=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,O=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),B=new pr,ee=new WeakMap;let ae;const pe=new WeakMap;let _e=!1;try{_e=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Re(cn,Ht){return _e?new OffscreenCanvas(cn,Ht):yl("canvas")}function Ue(cn,Ht,ar){let jr=1;const Yr=ci(cn);if((Yr.width>ar||Yr.height>ar)&&(jr=ar/Math.max(Yr.width,Yr.height)),jr<1){if(typeof HTMLImageElement<"u"&&cn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&cn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&cn instanceof ImageBitmap||typeof VideoFrame<"u"&&cn instanceof VideoFrame){const Ur=Math.floor(jr*Yr.width),Zi=Math.floor(jr*Yr.height);void 0===ae&&(ae=Re(Ur,Zi));const Ti=Ht?Re(Ur,Zi):ae;return Ti.width=Ur,Ti.height=Zi,Ti.getContext("2d").drawImage(cn,0,0,Ur,Zi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Yr.width+"x"+Yr.height+") to ("+Ur+"x"+Zi+")."),Ti}return"data"in cn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Yr.width+"x"+Yr.height+")."),cn}return cn}function Le(cn){return cn.generateMipmaps}function Pe(cn){v.generateMipmap(cn)}function ht(cn){return cn.isWebGLCubeRenderTarget?v.TEXTURE_CUBE_MAP:cn.isWebGL3DRenderTarget?v.TEXTURE_3D:cn.isWebGLArrayRenderTarget||cn.isCompressedArrayTexture?v.TEXTURE_2D_ARRAY:v.TEXTURE_2D}function ut(cn,Ht,ar,jr,Yr=!1){if(null!==cn){if(void 0!==v[cn])return v[cn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+cn+"'")}let Ur=Ht;if(Ht===v.RED&&(ar===v.FLOAT&&(Ur=v.R32F),ar===v.HALF_FLOAT&&(Ur=v.R16F),ar===v.UNSIGNED_BYTE&&(Ur=v.R8)),Ht===v.RED_INTEGER&&(ar===v.UNSIGNED_BYTE&&(Ur=v.R8UI),ar===v.UNSIGNED_SHORT&&(Ur=v.R16UI),ar===v.UNSIGNED_INT&&(Ur=v.R32UI),ar===v.BYTE&&(Ur=v.R8I),ar===v.SHORT&&(Ur=v.R16I),ar===v.INT&&(Ur=v.R32I)),Ht===v.RG&&(ar===v.FLOAT&&(Ur=v.RG32F),ar===v.HALF_FLOAT&&(Ur=v.RG16F),ar===v.UNSIGNED_BYTE&&(Ur=v.RG8)),Ht===v.RG_INTEGER&&(ar===v.UNSIGNED_BYTE&&(Ur=v.RG8UI),ar===v.UNSIGNED_SHORT&&(Ur=v.RG16UI),ar===v.UNSIGNED_INT&&(Ur=v.RG32UI),ar===v.BYTE&&(Ur=v.RG8I),ar===v.SHORT&&(Ur=v.RG16I),ar===v.INT&&(Ur=v.RG32I)),Ht===v.RGB_INTEGER&&(ar===v.UNSIGNED_BYTE&&(Ur=v.RGB8UI),ar===v.UNSIGNED_SHORT&&(Ur=v.RGB16UI),ar===v.UNSIGNED_INT&&(Ur=v.RGB32UI),ar===v.BYTE&&(Ur=v.RGB8I),ar===v.SHORT&&(Ur=v.RGB16I),ar===v.INT&&(Ur=v.RGB32I)),Ht===v.RGBA_INTEGER&&(ar===v.UNSIGNED_BYTE&&(Ur=v.RGBA8UI),ar===v.UNSIGNED_SHORT&&(Ur=v.RGBA16UI),ar===v.UNSIGNED_INT&&(Ur=v.RGBA32UI),ar===v.BYTE&&(Ur=v.RGBA8I),ar===v.SHORT&&(Ur=v.RGBA16I),ar===v.INT&&(Ur=v.RGBA32I)),Ht===v.RGB&&ar===v.UNSIGNED_INT_5_9_9_9_REV&&(Ur=v.RGB9_E5),Ht===v.RGBA){const Zi=Yr?Ms:xs.getTransfer(jr);ar===v.FLOAT&&(Ur=v.RGBA32F),ar===v.HALF_FLOAT&&(Ur=v.RGBA16F),ar===v.UNSIGNED_BYTE&&(Ur=Zi===qi?v.SRGB8_ALPHA8:v.RGBA8),ar===v.UNSIGNED_SHORT_4_4_4_4&&(Ur=v.RGBA4),ar===v.UNSIGNED_SHORT_5_5_5_1&&(Ur=v.RGB5_A1)}return(Ur===v.R16F||Ur===v.R32F||Ur===v.RG16F||Ur===v.RG32F||Ur===v.RGBA16F||Ur===v.RGBA32F)&&t.get("EXT_color_buffer_float"),Ur}function st(cn,Ht){let ar;return cn?null===Ht||Ht===N||Ht===de?ar=v.DEPTH24_STENCIL8:Ht===U?ar=v.DEPTH32F_STENCIL8:Ht===Qe&&(ar=v.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===Ht||Ht===N||Ht===de?ar=v.DEPTH_COMPONENT24:Ht===U?ar=v.DEPTH_COMPONENT32F:Ht===Qe&&(ar=v.DEPTH_COMPONENT16),ar}function Yt(cn,Ht){return!0===Le(cn)||cn.isFramebufferTexture&&cn.minFilter!==mn&&cn.minFilter!==Cn?Math.log2(Math.max(Ht.width,Ht.height))+1:void 0!==cn.mipmaps&&cn.mipmaps.length>0?cn.mipmaps.length:cn.isCompressedTexture&&Array.isArray(cn.image)?Ht.mipmaps.length:1}function At(cn){const Ht=cn.target;Ht.removeEventListener("dispose",At),function tn(cn){const Ht=s.get(cn);if(void 0===Ht.__webglInit)return;const ar=cn.source,jr=pe.get(ar);if(jr){const Yr=jr[Ht.__cacheKey];Yr.usedTimes--,0===Yr.usedTimes&&Pt(cn),0===Object.keys(jr).length&&pe.delete(ar)}s.remove(cn)}(Ht),Ht.isVideoTexture&&ee.delete(Ht)}function zt(cn){const Ht=cn.target;Ht.removeEventListener("dispose",zt),function Tt(cn){const Ht=s.get(cn);if(cn.depthTexture&&(cn.depthTexture.dispose(),s.remove(cn.depthTexture)),cn.isWebGLCubeRenderTarget)for(let jr=0;jr<6;jr++){if(Array.isArray(Ht.__webglFramebuffer[jr]))for(let Yr=0;Yr<Ht.__webglFramebuffer[jr].length;Yr++)v.deleteFramebuffer(Ht.__webglFramebuffer[jr][Yr]);else v.deleteFramebuffer(Ht.__webglFramebuffer[jr]);Ht.__webglDepthbuffer&&v.deleteRenderbuffer(Ht.__webglDepthbuffer[jr])}else{if(Array.isArray(Ht.__webglFramebuffer))for(let jr=0;jr<Ht.__webglFramebuffer.length;jr++)v.deleteFramebuffer(Ht.__webglFramebuffer[jr]);else v.deleteFramebuffer(Ht.__webglFramebuffer);if(Ht.__webglDepthbuffer&&v.deleteRenderbuffer(Ht.__webglDepthbuffer),Ht.__webglMultisampledFramebuffer&&v.deleteFramebuffer(Ht.__webglMultisampledFramebuffer),Ht.__webglColorRenderbuffer)for(let jr=0;jr<Ht.__webglColorRenderbuffer.length;jr++)Ht.__webglColorRenderbuffer[jr]&&v.deleteRenderbuffer(Ht.__webglColorRenderbuffer[jr]);Ht.__webglDepthRenderbuffer&&v.deleteRenderbuffer(Ht.__webglDepthRenderbuffer)}const ar=cn.textures;for(let jr=0,Yr=ar.length;jr<Yr;jr++){const Ur=s.get(ar[jr]);Ur.__webglTexture&&(v.deleteTexture(Ur.__webglTexture),_.memory.textures--),s.remove(ar[jr])}s.remove(cn)}(Ht)}function Pt(cn){const Ht=s.get(cn);v.deleteTexture(Ht.__webglTexture),delete pe.get(cn.source)[Ht.__cacheKey],_.memory.textures--}let wn=0;function wr(cn,Ht){const ar=s.get(cn);if(cn.isVideoTexture&&function Kr(cn){const Ht=_.render.frame;ee.get(cn)!==Ht&&(ee.set(cn,Ht),cn.update())}(cn),!1===cn.isRenderTargetTexture&&cn.version>0&&ar.__version!==cn.version){const jr=cn.image;if(null===jr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==jr.complete)return void Tr(ar,cn,Ht);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.bindTexture(v.TEXTURE_2D,ar.__webglTexture,v.TEXTURE0+Ht)}const Zr={[un]:v.REPEAT,[Tn]:v.CLAMP_TO_EDGE,1002:v.MIRRORED_REPEAT},hi={[mn]:v.NEAREST,1004:v.NEAREST_MIPMAP_NEAREST,[fn]:v.NEAREST_MIPMAP_LINEAR,[Cn]:v.LINEAR,1007:v.LINEAR_MIPMAP_NEAREST,[fr]:v.LINEAR_MIPMAP_LINEAR},Pi={512:v.NEVER,519:v.ALWAYS,513:v.LESS,515:v.LEQUAL,514:v.EQUAL,518:v.GEQUAL,516:v.GREATER,517:v.NOTEQUAL};function as(cn,Ht){if(Ht.type===U&&!1===t.has("OES_texture_float_linear")&&(Ht.magFilter===Cn||1007===Ht.magFilter||Ht.magFilter===fn||Ht.magFilter===fr||Ht.minFilter===Cn||1007===Ht.minFilter||Ht.minFilter===fn||Ht.minFilter===fr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),v.texParameteri(cn,v.TEXTURE_WRAP_S,Zr[Ht.wrapS]),v.texParameteri(cn,v.TEXTURE_WRAP_T,Zr[Ht.wrapT]),(cn===v.TEXTURE_3D||cn===v.TEXTURE_2D_ARRAY)&&v.texParameteri(cn,v.TEXTURE_WRAP_R,Zr[Ht.wrapR]),v.texParameteri(cn,v.TEXTURE_MAG_FILTER,hi[Ht.magFilter]),v.texParameteri(cn,v.TEXTURE_MIN_FILTER,hi[Ht.minFilter]),Ht.compareFunction&&(v.texParameteri(cn,v.TEXTURE_COMPARE_MODE,v.COMPARE_REF_TO_TEXTURE),v.texParameteri(cn,v.TEXTURE_COMPARE_FUNC,Pi[Ht.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(Ht.magFilter===mn||Ht.minFilter!==fn&&Ht.minFilter!==fr||Ht.type===U&&!1===t.has("OES_texture_float_linear"))return;if(Ht.anisotropy>1||s.get(Ht).__currentAnisotropy){const ar=t.get("EXT_texture_filter_anisotropic");v.texParameterf(cn,ar.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ht.anisotropy,l.getMaxAnisotropy())),s.get(Ht).__currentAnisotropy=Ht.anisotropy}}}function Ts(cn,Ht){let ar=!1;void 0===cn.__webglInit&&(cn.__webglInit=!0,Ht.addEventListener("dispose",At));const jr=Ht.source;let Yr=pe.get(jr);void 0===Yr&&(Yr={},pe.set(jr,Yr));const Ur=function rr(cn){const Ht=[];return Ht.push(cn.wrapS),Ht.push(cn.wrapT),Ht.push(cn.wrapR||0),Ht.push(cn.magFilter),Ht.push(cn.minFilter),Ht.push(cn.anisotropy),Ht.push(cn.internalFormat),Ht.push(cn.format),Ht.push(cn.type),Ht.push(cn.generateMipmaps),Ht.push(cn.premultiplyAlpha),Ht.push(cn.flipY),Ht.push(cn.unpackAlignment),Ht.push(cn.colorSpace),Ht.join()}(Ht);if(Ur!==cn.__cacheKey){void 0===Yr[Ur]&&(Yr[Ur]={texture:v.createTexture(),usedTimes:0},_.memory.textures++,ar=!0),Yr[Ur].usedTimes++;const Zi=Yr[cn.__cacheKey];void 0!==Zi&&(Yr[cn.__cacheKey].usedTimes--,0===Zi.usedTimes&&Pt(Ht)),cn.__cacheKey=Ur,cn.__webglTexture=Yr[Ur].texture}return ar}function Tr(cn,Ht,ar){let jr=v.TEXTURE_2D;(Ht.isDataArrayTexture||Ht.isCompressedArrayTexture)&&(jr=v.TEXTURE_2D_ARRAY),Ht.isData3DTexture&&(jr=v.TEXTURE_3D);const Yr=Ts(cn,Ht),Ur=Ht.source;r.bindTexture(jr,cn.__webglTexture,v.TEXTURE0+ar);const Zi=s.get(Ur);if(Ur.version!==Zi.__version||!0===Yr){r.activeTexture(v.TEXTURE0+ar);const Ti=xs.getPrimaries(xs.workingColorSpace),Ii=""===Ht.colorSpace?null:xs.getPrimaries(Ht.colorSpace),js=""===Ht.colorSpace||Ti===Ii?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Ht.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ht.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Ht.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,js);let ii=Ue(Ht.image,!1,l.maxTextureSize);ii=Xi(Ht,ii);const zi=u.convert(Ht.format,Ht.colorSpace),ms=u.convert(Ht.type);let $i,vs=ut(Ht.internalFormat,zi,ms,Ht.colorSpace,Ht.isVideoTexture);as(jr,Ht);const lo=Ht.mipmaps,Fs=!0!==Ht.isVideoTexture,Xo=void 0===Zi.__version||!0===Yr,Xn=Ur.dataReady,Mi=Yt(Ht,ii);if(Ht.isDepthTexture)vs=st(Ht.format===vt,Ht.type),Xo&&(Fs?r.texStorage2D(v.TEXTURE_2D,1,vs,ii.width,ii.height):r.texImage2D(v.TEXTURE_2D,0,vs,ii.width,ii.height,0,zi,ms,null));else if(Ht.isDataTexture)if(lo.length>0){Fs&&Xo&&r.texStorage2D(v.TEXTURE_2D,Mi,vs,lo[0].width,lo[0].height);for(let Cr=0,$r=lo.length;Cr<$r;Cr++)$i=lo[Cr],Fs?Xn&&r.texSubImage2D(v.TEXTURE_2D,Cr,0,0,$i.width,$i.height,zi,ms,$i.data):r.texImage2D(v.TEXTURE_2D,Cr,vs,$i.width,$i.height,0,zi,ms,$i.data);Ht.generateMipmaps=!1}else Fs?(Xo&&r.texStorage2D(v.TEXTURE_2D,Mi,vs,ii.width,ii.height),Xn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,ii.width,ii.height,zi,ms,ii.data)):r.texImage2D(v.TEXTURE_2D,0,vs,ii.width,ii.height,0,zi,ms,ii.data);else if(Ht.isCompressedTexture)if(Ht.isCompressedArrayTexture){Fs&&Xo&&r.texStorage3D(v.TEXTURE_2D_ARRAY,Mi,vs,lo[0].width,lo[0].height,ii.depth);for(let Cr=0,$r=lo.length;Cr<$r;Cr++)if($i=lo[Cr],Ht.format!==Nt)if(null!==zi)if(Fs){if(Xn)if(Ht.layerUpdates.size>0){const Ni=lf($i.width,$i.height,Ht.format,Ht.type);for(const Ri of Ht.layerUpdates){const Us=$i.data.subarray(Ri*Ni/$i.data.BYTES_PER_ELEMENT,(Ri+1)*Ni/$i.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Cr,0,0,Ri,$i.width,$i.height,1,zi,Us)}Ht.clearLayerUpdates()}else r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Cr,0,0,0,$i.width,$i.height,ii.depth,zi,$i.data)}else r.compressedTexImage3D(v.TEXTURE_2D_ARRAY,Cr,vs,$i.width,$i.height,ii.depth,0,$i.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Fs?Xn&&r.texSubImage3D(v.TEXTURE_2D_ARRAY,Cr,0,0,0,$i.width,$i.height,ii.depth,zi,ms,$i.data):r.texImage3D(v.TEXTURE_2D_ARRAY,Cr,vs,$i.width,$i.height,ii.depth,0,zi,ms,$i.data)}else{Fs&&Xo&&r.texStorage2D(v.TEXTURE_2D,Mi,vs,lo[0].width,lo[0].height);for(let Cr=0,$r=lo.length;Cr<$r;Cr++)$i=lo[Cr],Ht.format!==Nt?null!==zi?Fs?Xn&&r.compressedTexSubImage2D(v.TEXTURE_2D,Cr,0,0,$i.width,$i.height,zi,$i.data):r.compressedTexImage2D(v.TEXTURE_2D,Cr,vs,$i.width,$i.height,0,$i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fs?Xn&&r.texSubImage2D(v.TEXTURE_2D,Cr,0,0,$i.width,$i.height,zi,ms,$i.data):r.texImage2D(v.TEXTURE_2D,Cr,vs,$i.width,$i.height,0,zi,ms,$i.data)}else if(Ht.isDataArrayTexture)if(Fs){if(Xo&&r.texStorage3D(v.TEXTURE_2D_ARRAY,Mi,vs,ii.width,ii.height,ii.depth),Xn)if(Ht.layerUpdates.size>0){const Cr=lf(ii.width,ii.height,Ht.format,Ht.type);for(const $r of Ht.layerUpdates){const Ni=ii.data.subarray($r*Cr/ii.data.BYTES_PER_ELEMENT,($r+1)*Cr/ii.data.BYTES_PER_ELEMENT);r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,$r,ii.width,ii.height,1,zi,ms,Ni)}Ht.clearLayerUpdates()}else r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,0,ii.width,ii.height,ii.depth,zi,ms,ii.data)}else r.texImage3D(v.TEXTURE_2D_ARRAY,0,vs,ii.width,ii.height,ii.depth,0,zi,ms,ii.data);else if(Ht.isData3DTexture)Fs?(Xo&&r.texStorage3D(v.TEXTURE_3D,Mi,vs,ii.width,ii.height,ii.depth),Xn&&r.texSubImage3D(v.TEXTURE_3D,0,0,0,0,ii.width,ii.height,ii.depth,zi,ms,ii.data)):r.texImage3D(v.TEXTURE_3D,0,vs,ii.width,ii.height,ii.depth,0,zi,ms,ii.data);else if(Ht.isFramebufferTexture){if(Xo)if(Fs)r.texStorage2D(v.TEXTURE_2D,Mi,vs,ii.width,ii.height);else{let Cr=ii.width,$r=ii.height;for(let Ni=0;Ni<Mi;Ni++)r.texImage2D(v.TEXTURE_2D,Ni,vs,Cr,$r,0,zi,ms,null),Cr>>=1,$r>>=1}}else if(lo.length>0){if(Fs&&Xo){const Cr=ci(lo[0]);r.texStorage2D(v.TEXTURE_2D,Mi,vs,Cr.width,Cr.height)}for(let Cr=0,$r=lo.length;Cr<$r;Cr++)$i=lo[Cr],Fs?Xn&&r.texSubImage2D(v.TEXTURE_2D,Cr,0,0,zi,ms,$i):r.texImage2D(v.TEXTURE_2D,Cr,vs,zi,ms,$i);Ht.generateMipmaps=!1}else if(Fs){if(Xo){const Cr=ci(ii);r.texStorage2D(v.TEXTURE_2D,Mi,vs,Cr.width,Cr.height)}Xn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,zi,ms,ii)}else r.texImage2D(v.TEXTURE_2D,0,vs,zi,ms,ii);Le(Ht)&&Pe(jr),Zi.__version=Ur.version,Ht.onUpdate&&Ht.onUpdate(Ht)}cn.__version=Ht.version}function Di(cn,Ht,ar,jr,Yr,Ur){const Zi=u.convert(ar.format,ar.colorSpace),Ti=u.convert(ar.type),Ii=ut(ar.internalFormat,Zi,Ti,ar.colorSpace),js=s.get(Ht),ii=s.get(ar);if(ii.__renderTarget=Ht,!js.__hasExternalTextures){const zi=Math.max(1,Ht.width>>Ur),ms=Math.max(1,Ht.height>>Ur);Yr===v.TEXTURE_3D||Yr===v.TEXTURE_2D_ARRAY?r.texImage3D(Yr,Ur,Ii,zi,ms,Ht.depth,0,Zi,Ti,null):r.texImage2D(Yr,Ur,Ii,zi,ms,0,Zi,Ti,null)}r.bindFramebuffer(v.FRAMEBUFFER,cn),gi(Ht)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,jr,Yr,ii.__webglTexture,0,Gr(Ht)):(Yr===v.TEXTURE_2D||Yr>=v.TEXTURE_CUBE_MAP_POSITIVE_X&&Yr<=v.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&v.framebufferTexture2D(v.FRAMEBUFFER,jr,Yr,ii.__webglTexture,Ur),r.bindFramebuffer(v.FRAMEBUFFER,null)}function ri(cn,Ht,ar){if(v.bindRenderbuffer(v.RENDERBUFFER,cn),Ht.depthBuffer){const jr=Ht.depthTexture,Ur=st(Ht.stencilBuffer,jr&&jr.isDepthTexture?jr.type:null),Zi=Ht.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Ti=Gr(Ht);gi(Ht)?A.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Ti,Ur,Ht.width,Ht.height):ar?v.renderbufferStorageMultisample(v.RENDERBUFFER,Ti,Ur,Ht.width,Ht.height):v.renderbufferStorage(v.RENDERBUFFER,Ur,Ht.width,Ht.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,Zi,v.RENDERBUFFER,cn)}else{const jr=Ht.textures;for(let Yr=0;Yr<jr.length;Yr++){const Ur=jr[Yr],Zi=u.convert(Ur.format,Ur.colorSpace),Ti=u.convert(Ur.type),Ii=ut(Ur.internalFormat,Zi,Ti,Ur.colorSpace),js=Gr(Ht);ar&&!1===gi(Ht)?v.renderbufferStorageMultisample(v.RENDERBUFFER,js,Ii,Ht.width,Ht.height):gi(Ht)?A.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,js,Ii,Ht.width,Ht.height):v.renderbufferStorage(v.RENDERBUFFER,Ii,Ht.width,Ht.height)}}v.bindRenderbuffer(v.RENDERBUFFER,null)}function $s(cn){const Ht=s.get(cn),ar=!0===cn.isWebGLCubeRenderTarget;if(Ht.__boundDepthTexture!==cn.depthTexture){const jr=cn.depthTexture;if(Ht.__depthDisposeCallback&&Ht.__depthDisposeCallback(),jr){const Yr=()=>{delete Ht.__boundDepthTexture,delete Ht.__depthDisposeCallback,jr.removeEventListener("dispose",Yr)};jr.addEventListener("dispose",Yr),Ht.__depthDisposeCallback=Yr}Ht.__boundDepthTexture=jr}if(cn.depthTexture&&!Ht.__autoAllocateDepthBuffer){if(ar)throw new Error("target.depthTexture not supported in Cube render targets");!function Bi(cn,Ht){if(Ht&&Ht.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(v.FRAMEBUFFER,cn),!Ht.depthTexture||!Ht.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const jr=s.get(Ht.depthTexture);jr.__renderTarget=Ht,(!jr.__webglTexture||Ht.depthTexture.image.width!==Ht.width||Ht.depthTexture.image.height!==Ht.height)&&(Ht.depthTexture.image.width=Ht.width,Ht.depthTexture.image.height=Ht.height,Ht.depthTexture.needsUpdate=!0),wr(Ht.depthTexture,0);const Yr=jr.__webglTexture,Ur=Gr(Ht);if(Ht.depthTexture.format===He)gi(Ht)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Yr,0,Ur):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Yr,0);else{if(Ht.depthTexture.format!==vt)throw new Error("Unknown depthTexture format");gi(Ht)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Yr,0,Ur):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Yr,0)}}(Ht.__webglFramebuffer,cn)}else if(ar){Ht.__webglDepthbuffer=[];for(let jr=0;jr<6;jr++)if(r.bindFramebuffer(v.FRAMEBUFFER,Ht.__webglFramebuffer[jr]),void 0===Ht.__webglDepthbuffer[jr])Ht.__webglDepthbuffer[jr]=v.createRenderbuffer(),ri(Ht.__webglDepthbuffer[jr],cn,!1);else{const Yr=cn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Ur=Ht.__webglDepthbuffer[jr];v.bindRenderbuffer(v.RENDERBUFFER,Ur),v.framebufferRenderbuffer(v.FRAMEBUFFER,Yr,v.RENDERBUFFER,Ur)}}else if(r.bindFramebuffer(v.FRAMEBUFFER,Ht.__webglFramebuffer),void 0===Ht.__webglDepthbuffer)Ht.__webglDepthbuffer=v.createRenderbuffer(),ri(Ht.__webglDepthbuffer,cn,!1);else{const jr=cn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Yr=Ht.__webglDepthbuffer;v.bindRenderbuffer(v.RENDERBUFFER,Yr),v.framebufferRenderbuffer(v.FRAMEBUFFER,jr,v.RENDERBUFFER,Yr)}r.bindFramebuffer(v.FRAMEBUFFER,null)}const Ir=[],hn=[];function Gr(cn){return Math.min(l.maxSamples,cn.samples)}function gi(cn){const Ht=s.get(cn);return cn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Ht.__useRenderToTexture}function Xi(cn,Ht){const ar=cn.colorSpace,jr=cn.format,Yr=cn.type;return!0===cn.isCompressedTexture||!0===cn.isVideoTexture||ar!==ns&&""!==ar&&(xs.getTransfer(ar)===qi?(jr!==Nt||Yr!==Lr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ar)),Ht}function ci(cn){return typeof HTMLImageElement<"u"&&cn instanceof HTMLImageElement?(B.width=cn.naturalWidth||cn.width,B.height=cn.naturalHeight||cn.height):typeof VideoFrame<"u"&&cn instanceof VideoFrame?(B.width=cn.displayWidth,B.height=cn.displayHeight):(B.width=cn.width,B.height=cn.height),B}this.allocateTextureUnit=function Kn(){const cn=wn;return cn>=l.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+cn+" texture units while this GPU supports only "+l.maxTextures),wn+=1,cn},this.resetTextureUnits=function er(){wn=0},this.setTexture2D=wr,this.setTexture2DArray=function tr(cn,Ht){const ar=s.get(cn);cn.version>0&&ar.__version!==cn.version?Tr(ar,cn,Ht):r.bindTexture(v.TEXTURE_2D_ARRAY,ar.__webglTexture,v.TEXTURE0+Ht)},this.setTexture3D=function Wr(cn,Ht){const ar=s.get(cn);cn.version>0&&ar.__version!==cn.version?Tr(ar,cn,Ht):r.bindTexture(v.TEXTURE_3D,ar.__webglTexture,v.TEXTURE0+Ht)},this.setTextureCube=function cr(cn,Ht){const ar=s.get(cn);cn.version>0&&ar.__version!==cn.version?function ti(cn,Ht,ar){if(6!==Ht.image.length)return;const jr=Ts(cn,Ht),Yr=Ht.source;r.bindTexture(v.TEXTURE_CUBE_MAP,cn.__webglTexture,v.TEXTURE0+ar);const Ur=s.get(Yr);if(Yr.version!==Ur.__version||!0===jr){r.activeTexture(v.TEXTURE0+ar);const Zi=xs.getPrimaries(xs.workingColorSpace),Ti=""===Ht.colorSpace?null:xs.getPrimaries(Ht.colorSpace),Ii=""===Ht.colorSpace||Zi===Ti?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Ht.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ht.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Ht.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ii);const js=Ht.isCompressedTexture||Ht.image[0].isCompressedTexture,ii=Ht.image[0]&&Ht.image[0].isDataTexture,zi=[];for(let $r=0;$r<6;$r++)zi[$r]=js||ii?ii?Ht.image[$r].image:Ht.image[$r]:Ue(Ht.image[$r],!0,l.maxCubemapSize),zi[$r]=Xi(Ht,zi[$r]);const ms=zi[0],vs=u.convert(Ht.format,Ht.colorSpace),$i=u.convert(Ht.type),lo=ut(Ht.internalFormat,vs,$i,Ht.colorSpace),Fs=!0!==Ht.isVideoTexture,Xo=void 0===Ur.__version||!0===jr,Xn=Yr.dataReady;let Cr,Mi=Yt(Ht,ms);if(as(v.TEXTURE_CUBE_MAP,Ht),js){Fs&&Xo&&r.texStorage2D(v.TEXTURE_CUBE_MAP,Mi,lo,ms.width,ms.height);for(let $r=0;$r<6;$r++){Cr=zi[$r].mipmaps;for(let Ni=0;Ni<Cr.length;Ni++){const Ri=Cr[Ni];Ht.format!==Nt?null!==vs?Fs?Xn&&r.compressedTexSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni,0,0,Ri.width,Ri.height,vs,Ri.data):r.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni,lo,Ri.width,Ri.height,0,Ri.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fs?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni,0,0,Ri.width,Ri.height,vs,$i,Ri.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni,lo,Ri.width,Ri.height,0,vs,$i,Ri.data)}}}else{if(Cr=Ht.mipmaps,Fs&&Xo){Cr.length>0&&Mi++;const $r=ci(zi[0]);r.texStorage2D(v.TEXTURE_CUBE_MAP,Mi,lo,$r.width,$r.height)}for(let $r=0;$r<6;$r++)if(ii){Fs?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,0,0,0,zi[$r].width,zi[$r].height,vs,$i,zi[$r].data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,0,lo,zi[$r].width,zi[$r].height,0,vs,$i,zi[$r].data);for(let Ni=0;Ni<Cr.length;Ni++){const Us=Cr[Ni].image[$r].image;Fs?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni+1,0,0,Us.width,Us.height,vs,$i,Us.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni+1,lo,Us.width,Us.height,0,vs,$i,Us.data)}}else{Fs?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,0,0,0,vs,$i,zi[$r]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,0,lo,vs,$i,zi[$r]);for(let Ni=0;Ni<Cr.length;Ni++){const Ri=Cr[Ni];Fs?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni+1,0,0,vs,$i,Ri.image[$r]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+$r,Ni+1,lo,vs,$i,Ri.image[$r])}}}Le(Ht)&&Pe(v.TEXTURE_CUBE_MAP),Ur.__version=Yr.version,Ht.onUpdate&&Ht.onUpdate(Ht)}cn.__version=Ht.version}(ar,cn,Ht):r.bindTexture(v.TEXTURE_CUBE_MAP,ar.__webglTexture,v.TEXTURE0+Ht)},this.rebindTextures=function Fi(cn,Ht,ar){const jr=s.get(cn);void 0!==Ht&&Di(jr.__webglFramebuffer,cn,cn.texture,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,0),void 0!==ar&&$s(cn)},this.setupRenderTarget=function hs(cn){const Ht=cn.texture,ar=s.get(cn),jr=s.get(Ht);cn.addEventListener("dispose",zt);const Yr=cn.textures,Ur=!0===cn.isWebGLCubeRenderTarget,Zi=Yr.length>1;if(Zi||(void 0===jr.__webglTexture&&(jr.__webglTexture=v.createTexture()),jr.__version=Ht.version,_.memory.textures++),Ur){ar.__webglFramebuffer=[];for(let Ti=0;Ti<6;Ti++)if(Ht.mipmaps&&Ht.mipmaps.length>0){ar.__webglFramebuffer[Ti]=[];for(let Ii=0;Ii<Ht.mipmaps.length;Ii++)ar.__webglFramebuffer[Ti][Ii]=v.createFramebuffer()}else ar.__webglFramebuffer[Ti]=v.createFramebuffer()}else{if(Ht.mipmaps&&Ht.mipmaps.length>0){ar.__webglFramebuffer=[];for(let Ti=0;Ti<Ht.mipmaps.length;Ti++)ar.__webglFramebuffer[Ti]=v.createFramebuffer()}else ar.__webglFramebuffer=v.createFramebuffer();if(Zi)for(let Ti=0,Ii=Yr.length;Ti<Ii;Ti++){const js=s.get(Yr[Ti]);void 0===js.__webglTexture&&(js.__webglTexture=v.createTexture(),_.memory.textures++)}if(cn.samples>0&&!1===gi(cn)){ar.__webglMultisampledFramebuffer=v.createFramebuffer(),ar.__webglColorRenderbuffer=[],r.bindFramebuffer(v.FRAMEBUFFER,ar.__webglMultisampledFramebuffer);for(let Ti=0;Ti<Yr.length;Ti++){const Ii=Yr[Ti];ar.__webglColorRenderbuffer[Ti]=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,ar.__webglColorRenderbuffer[Ti]);const js=u.convert(Ii.format,Ii.colorSpace),ii=u.convert(Ii.type),zi=ut(Ii.internalFormat,js,ii,Ii.colorSpace,!0===cn.isXRRenderTarget),ms=Gr(cn);v.renderbufferStorageMultisample(v.RENDERBUFFER,ms,zi,cn.width,cn.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ti,v.RENDERBUFFER,ar.__webglColorRenderbuffer[Ti])}v.bindRenderbuffer(v.RENDERBUFFER,null),cn.depthBuffer&&(ar.__webglDepthRenderbuffer=v.createRenderbuffer(),ri(ar.__webglDepthRenderbuffer,cn,!0)),r.bindFramebuffer(v.FRAMEBUFFER,null)}}if(Ur){r.bindTexture(v.TEXTURE_CUBE_MAP,jr.__webglTexture),as(v.TEXTURE_CUBE_MAP,Ht);for(let Ti=0;Ti<6;Ti++)if(Ht.mipmaps&&Ht.mipmaps.length>0)for(let Ii=0;Ii<Ht.mipmaps.length;Ii++)Di(ar.__webglFramebuffer[Ti][Ii],cn,Ht,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,Ii);else Di(ar.__webglFramebuffer[Ti],cn,Ht,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,0);Le(Ht)&&Pe(v.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Zi){for(let Ti=0,Ii=Yr.length;Ti<Ii;Ti++){const js=Yr[Ti],ii=s.get(js);r.bindTexture(v.TEXTURE_2D,ii.__webglTexture),as(v.TEXTURE_2D,js),Di(ar.__webglFramebuffer,cn,js,v.COLOR_ATTACHMENT0+Ti,v.TEXTURE_2D,0),Le(js)&&Pe(v.TEXTURE_2D)}r.unbindTexture()}else{let Ti=v.TEXTURE_2D;if((cn.isWebGL3DRenderTarget||cn.isWebGLArrayRenderTarget)&&(Ti=cn.isWebGL3DRenderTarget?v.TEXTURE_3D:v.TEXTURE_2D_ARRAY),r.bindTexture(Ti,jr.__webglTexture),as(Ti,Ht),Ht.mipmaps&&Ht.mipmaps.length>0)for(let Ii=0;Ii<Ht.mipmaps.length;Ii++)Di(ar.__webglFramebuffer[Ii],cn,Ht,v.COLOR_ATTACHMENT0,Ti,Ii);else Di(ar.__webglFramebuffer,cn,Ht,v.COLOR_ATTACHMENT0,Ti,0);Le(Ht)&&Pe(Ti),r.unbindTexture()}cn.depthBuffer&&$s(cn)},this.updateRenderTargetMipmap=function vr(cn){const Ht=cn.textures;for(let ar=0,jr=Ht.length;ar<jr;ar++){const Yr=Ht[ar];if(Le(Yr)){const Ur=ht(cn),Zi=s.get(Yr).__webglTexture;r.bindTexture(Ur,Zi),Pe(Ur),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ci(cn){if(cn.samples>0)if(!1===gi(cn)){const Ht=cn.textures,ar=cn.width,jr=cn.height;let Yr=v.COLOR_BUFFER_BIT;const Ur=cn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Zi=s.get(cn),Ti=Ht.length>1;if(Ti)for(let Ii=0;Ii<Ht.length;Ii++)r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ii,v.RENDERBUFFER,null),r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ii,v.TEXTURE_2D,null,0);r.bindFramebuffer(v.READ_FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Zi.__webglFramebuffer);for(let Ii=0;Ii<Ht.length;Ii++){if(cn.resolveDepthBuffer&&(cn.depthBuffer&&(Yr|=v.DEPTH_BUFFER_BIT),cn.stencilBuffer&&cn.resolveStencilBuffer&&(Yr|=v.STENCIL_BUFFER_BIT)),Ti){v.framebufferRenderbuffer(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,Zi.__webglColorRenderbuffer[Ii]);const js=s.get(Ht[Ii]).__webglTexture;v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,js,0)}v.blitFramebuffer(0,0,ar,jr,0,0,ar,jr,Yr,v.NEAREST),!0===O&&(Ir.length=0,hn.length=0,Ir.push(v.COLOR_ATTACHMENT0+Ii),cn.depthBuffer&&!1===cn.resolveDepthBuffer&&(Ir.push(Ur),hn.push(Ur),v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,hn)),v.invalidateFramebuffer(v.READ_FRAMEBUFFER,Ir))}if(r.bindFramebuffer(v.READ_FRAMEBUFFER,null),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),Ti)for(let Ii=0;Ii<Ht.length;Ii++){r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ii,v.RENDERBUFFER,Zi.__webglColorRenderbuffer[Ii]);const js=s.get(Ht[Ii]).__webglTexture;r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ii,v.TEXTURE_2D,js,0)}r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Zi.__webglMultisampledFramebuffer)}else cn.depthBuffer&&!1===cn.resolveDepthBuffer&&O&&v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,[cn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=$s,this.setupFrameBufferTexture=Di,this.useMultisampledRTT=gi}function hx(v,t){return{convert:function r(s,l=""){let u;const _=xs.getTransfer(l);if(s===Lr)return v.UNSIGNED_BYTE;if(s===ie)return v.UNSIGNED_SHORT_4_4_4_4;if(s===H)return v.UNSIGNED_SHORT_5_5_5_1;if(s===Be)return v.UNSIGNED_INT_5_9_9_9_REV;if(s===te)return v.BYTE;if(s===Ie)return v.SHORT;if(s===Qe)return v.UNSIGNED_SHORT;if(s===T)return v.INT;if(s===N)return v.UNSIGNED_INT;if(s===U)return v.FLOAT;if(s===L)return v.HALF_FLOAT;if(s===Xe)return v.ALPHA;if(s===wt)return v.RGB;if(s===Nt)return v.RGBA;if(s===rn)return v.LUMINANCE;if(s===Ge)return v.LUMINANCE_ALPHA;if(s===He)return v.DEPTH_COMPONENT;if(s===vt)return v.DEPTH_STENCIL;if(s===tt)return v.RED;if(s===Dt)return v.RED_INTEGER;if(s===Zt)return v.RG;if(s===$n)return v.RG_INTEGER;if(s===Ar)return v.RGBA_INTEGER;if(s===Hi||s===Ki||s===Xs||s===Os)if(_===qi){if(u=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===Hi)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ki)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Xs)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Os)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=t.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===Hi)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ki)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Xs)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Os)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===wi||s===ws||s===co||s===Ls){if(u=t.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===wi)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ws)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===co)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Ls)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===so||s===ea||s===So){if(u=t.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===so||s===ea)return _===qi?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===So)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===ca||s===ta||s===qo||s===ua||s===mo||s===Ta||s===To||s===Ja||s===Va||s===ke||s===mt||s===Vt||s===We||s===Wt){if(u=t.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===ca)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ta)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===qo)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ua)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===mo)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Ta)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===To)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Ja)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Va)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ke)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===mt)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Vt)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===We)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Wt)return _===qi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===Ln||s===fs||s===qs){if(u=t.get("EXT_texture_compression_bptc"),null===u)return null;if(s===Ln)return _===qi?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===fs)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===qs)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===na||s===Ga||s===Ma||s===Ko){if(u=t.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===Ln)return u.COMPRESSED_RED_RGTC1_EXT;if(s===Ga)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Ma)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Ko)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===de?v.UNSIGNED_INT_24_8:void 0!==v[s]?v[s]:null}}}class px{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,r,s){if(null===this.texture){const l=new _o;t.properties.get(l).__webglTexture=r.texture,(r.depthNear!==s.depthNear||r.depthFar!==s.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=l}}getMesh(t){if(null!==this.texture&&null===this.mesh){const r=t.cameras[0].viewport,s=new tc({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Ps(new gd(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class mx extends Mn{constructor(t,r){super();const s=this;let l=null,u=1,_=null,A="local-floor",O=1,B=null,ee=null,ae=null,pe=null,_e=null,Re=null;const Ue=new px,Le=r.getContextAttributes();let Pe=null,ht=null;const ut=[],st=[],Yt=new pr;let At=null;const zt=new Lo;zt.viewport=new Vs;const tn=new Lo;tn.viewport=new Vs;const Pt=[zt,tn],Tt=new Tg;let wn=null,er=null;function Kn(Tr){const ti=st.indexOf(Tr.inputSource);if(-1===ti)return;const Di=ut[ti];void 0!==Di&&(Di.update(Tr.inputSource,Tr.frame,B||_),Di.dispatchEvent({type:Tr.type,data:Tr.inputSource}))}function rr(){l.removeEventListener("select",Kn),l.removeEventListener("selectstart",Kn),l.removeEventListener("selectend",Kn),l.removeEventListener("squeeze",Kn),l.removeEventListener("squeezestart",Kn),l.removeEventListener("squeezeend",Kn),l.removeEventListener("end",rr),l.removeEventListener("inputsourceschange",wr);for(let Tr=0;Tr<ut.length;Tr++){const ti=st[Tr];null!==ti&&(st[Tr]=null,ut[Tr].disconnect(ti))}wn=null,er=null,Ue.reset(),t.setRenderTarget(Pe),_e=null,pe=null,ae=null,l=null,ht=null,Ts.stop(),s.isPresenting=!1,t.setPixelRatio(At),t.setSize(Yt.width,Yt.height,!1),s.dispatchEvent({type:"sessionend"})}function wr(Tr){for(let ti=0;ti<Tr.removed.length;ti++){const Di=Tr.removed[ti],ri=st.indexOf(Di);ri>=0&&(st[ri]=null,ut[ri].disconnect(Di))}for(let ti=0;ti<Tr.added.length;ti++){const Di=Tr.added[ti];let ri=st.indexOf(Di);if(-1===ri){for(let $s=0;$s<ut.length;$s++){if($s>=st.length){st.push(Di),ri=$s;break}if(null===st[$s]){st[$s]=Di,ri=$s;break}}if(-1===ri)break}const Bi=ut[ri];Bi&&Bi.connect(Di)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Tr){let ti=ut[Tr];return void 0===ti&&(ti=new ad,ut[Tr]=ti),ti.getTargetRaySpace()},this.getControllerGrip=function(Tr){let ti=ut[Tr];return void 0===ti&&(ti=new ad,ut[Tr]=ti),ti.getGripSpace()},this.getHand=function(Tr){let ti=ut[Tr];return void 0===ti&&(ti=new ad,ut[Tr]=ti),ti.getHandSpace()},this.setFramebufferScaleFactor=function(Tr){u=Tr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Tr){A=Tr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return B||_},this.setReferenceSpace=function(Tr){B=Tr},this.getBaseLayer=function(){return null!==pe?pe:_e},this.getBinding=function(){return ae},this.getFrame=function(){return Re},this.getSession=function(){return l},this.setSession=function(){var Tr=(0,F.A)(function*(ti){if(l=ti,null!==l){if(Pe=t.getRenderTarget(),l.addEventListener("select",Kn),l.addEventListener("selectstart",Kn),l.addEventListener("selectend",Kn),l.addEventListener("squeeze",Kn),l.addEventListener("squeezestart",Kn),l.addEventListener("squeezeend",Kn),l.addEventListener("end",rr),l.addEventListener("inputsourceschange",wr),!0!==Le.xrCompatible&&(yield r.makeXRCompatible()),At=t.getPixelRatio(),t.getSize(Yt),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ri=null,Bi=null,$s=null;Le.depth&&($s=Le.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,ri=Le.stencil?vt:He,Bi=Le.stencil?de:N);const Fi={colorFormat:r.RGBA8,depthFormat:$s,scaleFactor:u};ae=new XRWebGLBinding(l,r),pe=ae.createProjectionLayer(Fi),l.updateRenderState({layers:[pe]}),t.setPixelRatio(1),t.setSize(pe.textureWidth,pe.textureHeight,!1),ht=new Te(pe.textureWidth,pe.textureHeight,{format:Nt,type:Lr,depthTexture:new tg(pe.textureWidth,pe.textureHeight,Bi,void 0,void 0,void 0,void 0,void 0,void 0,ri),stencilBuffer:Le.stencil,colorSpace:t.outputColorSpace,samples:Le.antialias?4:0,resolveDepthBuffer:!1===pe.ignoreDepthValues,resolveStencilBuffer:!1===pe.ignoreDepthValues})}else _e=new XRWebGLLayer(l,r,{antialias:Le.antialias,alpha:!0,depth:Le.depth,stencil:Le.stencil,framebufferScaleFactor:u}),l.updateRenderState({baseLayer:_e}),t.setPixelRatio(1),t.setSize(_e.framebufferWidth,_e.framebufferHeight,!1),ht=new Te(_e.framebufferWidth,_e.framebufferHeight,{format:Nt,type:Lr,colorSpace:t.outputColorSpace,stencilBuffer:Le.stencil,resolveDepthBuffer:!1===_e.ignoreDepthValues,resolveStencilBuffer:!1===_e.ignoreDepthValues});ht.isXRRenderTarget=!0,this.setFoveation(O),B=null,_=yield l.requestReferenceSpace(A),Ts.setContext(l),Ts.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(ti){return Tr.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==l)return l.environmentBlendMode},this.getDepthTexture=function(){return Ue.getDepthTexture()};const tr=new xt,Wr=new xt;function Zr(Tr,ti){null===ti?Tr.matrixWorld.copy(Tr.matrix):Tr.matrixWorld.multiplyMatrices(ti.matrixWorld,Tr.matrix),Tr.matrixWorldInverse.copy(Tr.matrixWorld).invert()}this.updateCamera=function(Tr){if(null===l)return;let ti=Tr.near,Di=Tr.far;null!==Ue.texture&&(Ue.depthNear>0&&(ti=Ue.depthNear),Ue.depthFar>0&&(Di=Ue.depthFar)),Tt.near=tn.near=zt.near=ti,Tt.far=tn.far=zt.far=Di,(wn!==Tt.near||er!==Tt.far)&&(l.updateRenderState({depthNear:Tt.near,depthFar:Tt.far}),wn=Tt.near,er=Tt.far),zt.layers.mask=2|Tr.layers.mask,tn.layers.mask=4|Tr.layers.mask,Tt.layers.mask=zt.layers.mask|tn.layers.mask;const ri=Tr.parent,Bi=Tt.cameras;Zr(Tt,ri);for(let $s=0;$s<Bi.length;$s++)Zr(Bi[$s],ri);2===Bi.length?function cr(Tr,ti,Di){tr.setFromMatrixPosition(ti.matrixWorld),Wr.setFromMatrixPosition(Di.matrixWorld);const ri=tr.distanceTo(Wr),Bi=ti.projectionMatrix.elements,$s=Di.projectionMatrix.elements,Fi=Bi[14]/(Bi[10]-1),hs=Bi[14]/(Bi[10]+1),vr=(Bi[9]+1)/Bi[5],Ir=(Bi[9]-1)/Bi[5],hn=(Bi[8]-1)/Bi[0],Ci=($s[8]+1)/$s[0],Gr=Fi*hn,gi=Fi*Ci,Kr=ri/(-hn+Ci),Xi=Kr*-hn;if(ti.matrixWorld.decompose(Tr.position,Tr.quaternion,Tr.scale),Tr.translateX(Xi),Tr.translateZ(Kr),Tr.matrixWorld.compose(Tr.position,Tr.quaternion,Tr.scale),Tr.matrixWorldInverse.copy(Tr.matrixWorld).invert(),-1===Bi[10])Tr.projectionMatrix.copy(ti.projectionMatrix),Tr.projectionMatrixInverse.copy(ti.projectionMatrixInverse);else{const ci=Fi+Kr,cn=hs+Kr;Tr.projectionMatrix.makePerspective(Gr-Xi,gi+(ri-Xi),vr*hs/cn*ci,Ir*hs/cn*ci,ci,cn),Tr.projectionMatrixInverse.copy(Tr.projectionMatrix).invert()}}(Tt,zt,tn):Tt.projectionMatrix.copy(zt.projectionMatrix),function hi(Tr,ti,Di){null===Di?Tr.matrix.copy(ti.matrixWorld):(Tr.matrix.copy(Di.matrixWorld),Tr.matrix.invert(),Tr.matrix.multiply(ti.matrixWorld)),Tr.matrix.decompose(Tr.position,Tr.quaternion,Tr.scale),Tr.updateMatrixWorld(!0),Tr.projectionMatrix.copy(ti.projectionMatrix),Tr.projectionMatrixInverse.copy(ti.projectionMatrixInverse),Tr.isPerspectiveCamera&&(Tr.fov=2*Oe*Math.atan(1/Tr.projectionMatrix.elements[5]),Tr.zoom=1)}(Tr,Tt,ri)},this.getCamera=function(){return Tt},this.getFoveation=function(){if(null!==pe||null!==_e)return O},this.setFoveation=function(Tr){O=Tr,null!==pe&&(pe.fixedFoveation=Tr),null!==_e&&void 0!==_e.fixedFoveation&&(_e.fixedFoveation=Tr)},this.hasDepthSensing=function(){return null!==Ue.texture},this.getDepthSensingMesh=function(){return Ue.getMesh(Tt)};let Pi=null;const Ts=new Pg;Ts.setAnimationLoop(function as(Tr,ti){if(ee=ti.getViewerPose(B||_),Re=ti,null!==ee){const Di=ee.views;null!==_e&&(t.setRenderTargetFramebuffer(ht,_e.framebuffer),t.setRenderTarget(ht));let ri=!1;Di.length!==Tt.cameras.length&&(Tt.cameras.length=0,ri=!0);for(let Fi=0;Fi<Di.length;Fi++){const hs=Di[Fi];let vr=null;if(null!==_e)vr=_e.getViewport(hs);else{const hn=ae.getViewSubImage(pe,hs);vr=hn.viewport,0===Fi&&(t.setRenderTargetTextures(ht,hn.colorTexture,pe.ignoreDepthValues?void 0:hn.depthStencilTexture),t.setRenderTarget(ht))}let Ir=Pt[Fi];void 0===Ir&&(Ir=new Lo,Ir.layers.enable(Fi),Ir.viewport=new Vs,Pt[Fi]=Ir),Ir.matrix.fromArray(hs.transform.matrix),Ir.matrix.decompose(Ir.position,Ir.quaternion,Ir.scale),Ir.projectionMatrix.fromArray(hs.projectionMatrix),Ir.projectionMatrixInverse.copy(Ir.projectionMatrix).invert(),Ir.viewport.set(vr.x,vr.y,vr.width,vr.height),0===Fi&&(Tt.matrix.copy(Ir.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale)),!0===ri&&Tt.cameras.push(Ir)}const Bi=l.enabledFeatures;if(Bi&&Bi.includes("depth-sensing")&&"gpu-optimized"==l.depthUsage&&ae){const Fi=ae.getDepthInformation(Di[0]);Fi&&Fi.isValid&&Fi.texture&&Ue.init(t,Fi,l.renderState)}}for(let Di=0;Di<ut.length;Di++){const ri=st[Di],Bi=ut[Di];null!==ri&&void 0!==Bi&&Bi.update(ri,ti,B||_)}Pi&&Pi(Tr,ti),ti.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:ti}),Re=null}),this.setAnimationLoop=function(Tr){Pi=Tr},this.dispose=function(){}}}const Dd=new $o,lm=new Li;function g_(v,t){function r(Le,Pe){!0===Le.matrixAutoUpdate&&Le.updateMatrix(),Pe.value.copy(Le.matrix)}function u(Le,Pe){Le.opacity.value=Pe.opacity,Pe.color&&Le.diffuse.value.copy(Pe.color),Pe.emissive&&Le.emissive.value.copy(Pe.emissive).multiplyScalar(Pe.emissiveIntensity),Pe.map&&(Le.map.value=Pe.map,r(Pe.map,Le.mapTransform)),Pe.alphaMap&&(Le.alphaMap.value=Pe.alphaMap,r(Pe.alphaMap,Le.alphaMapTransform)),Pe.bumpMap&&(Le.bumpMap.value=Pe.bumpMap,r(Pe.bumpMap,Le.bumpMapTransform),Le.bumpScale.value=Pe.bumpScale,1===Pe.side&&(Le.bumpScale.value*=-1)),Pe.normalMap&&(Le.normalMap.value=Pe.normalMap,r(Pe.normalMap,Le.normalMapTransform),Le.normalScale.value.copy(Pe.normalScale),1===Pe.side&&Le.normalScale.value.negate()),Pe.displacementMap&&(Le.displacementMap.value=Pe.displacementMap,r(Pe.displacementMap,Le.displacementMapTransform),Le.displacementScale.value=Pe.displacementScale,Le.displacementBias.value=Pe.displacementBias),Pe.emissiveMap&&(Le.emissiveMap.value=Pe.emissiveMap,r(Pe.emissiveMap,Le.emissiveMapTransform)),Pe.specularMap&&(Le.specularMap.value=Pe.specularMap,r(Pe.specularMap,Le.specularMapTransform)),Pe.alphaTest>0&&(Le.alphaTest.value=Pe.alphaTest);const ht=t.get(Pe),ut=ht.envMap,st=ht.envMapRotation;ut&&(Le.envMap.value=ut,Dd.copy(st),Dd.x*=-1,Dd.y*=-1,Dd.z*=-1,ut.isCubeTexture&&!1===ut.isRenderTargetTexture&&(Dd.y*=-1,Dd.z*=-1),Le.envMapRotation.value.setFromMatrix4(lm.makeRotationFromEuler(Dd)),Le.flipEnvMap.value=ut.isCubeTexture&&!1===ut.isRenderTargetTexture?-1:1,Le.reflectivity.value=Pe.reflectivity,Le.ior.value=Pe.ior,Le.refractionRatio.value=Pe.refractionRatio),Pe.lightMap&&(Le.lightMap.value=Pe.lightMap,Le.lightMapIntensity.value=Pe.lightMapIntensity,r(Pe.lightMap,Le.lightMapTransform)),Pe.aoMap&&(Le.aoMap.value=Pe.aoMap,Le.aoMapIntensity.value=Pe.aoMapIntensity,r(Pe.aoMap,Le.aoMapTransform))}return{refreshFogUniforms:function s(Le,Pe){Pe.color.getRGB(Le.fogColor.value,Zy(v)),Pe.isFog?(Le.fogNear.value=Pe.near,Le.fogFar.value=Pe.far):Pe.isFogExp2&&(Le.fogDensity.value=Pe.density)},refreshMaterialUniforms:function l(Le,Pe,ht,ut,st){Pe.isMeshBasicMaterial||Pe.isMeshLambertMaterial?u(Le,Pe):Pe.isMeshToonMaterial?(u(Le,Pe),function ae(Le,Pe){Pe.gradientMap&&(Le.gradientMap.value=Pe.gradientMap)}(Le,Pe)):Pe.isMeshPhongMaterial?(u(Le,Pe),function ee(Le,Pe){Le.specular.value.copy(Pe.specular),Le.shininess.value=Math.max(Pe.shininess,1e-4)}(Le,Pe)):Pe.isMeshStandardMaterial?(u(Le,Pe),function pe(Le,Pe){Le.metalness.value=Pe.metalness,Pe.metalnessMap&&(Le.metalnessMap.value=Pe.metalnessMap,r(Pe.metalnessMap,Le.metalnessMapTransform)),Le.roughness.value=Pe.roughness,Pe.roughnessMap&&(Le.roughnessMap.value=Pe.roughnessMap,r(Pe.roughnessMap,Le.roughnessMapTransform)),Pe.envMap&&(Le.envMapIntensity.value=Pe.envMapIntensity)}(Le,Pe),Pe.isMeshPhysicalMaterial&&function _e(Le,Pe,ht){Le.ior.value=Pe.ior,Pe.sheen>0&&(Le.sheenColor.value.copy(Pe.sheenColor).multiplyScalar(Pe.sheen),Le.sheenRoughness.value=Pe.sheenRoughness,Pe.sheenColorMap&&(Le.sheenColorMap.value=Pe.sheenColorMap,r(Pe.sheenColorMap,Le.sheenColorMapTransform)),Pe.sheenRoughnessMap&&(Le.sheenRoughnessMap.value=Pe.sheenRoughnessMap,r(Pe.sheenRoughnessMap,Le.sheenRoughnessMapTransform))),Pe.clearcoat>0&&(Le.clearcoat.value=Pe.clearcoat,Le.clearcoatRoughness.value=Pe.clearcoatRoughness,Pe.clearcoatMap&&(Le.clearcoatMap.value=Pe.clearcoatMap,r(Pe.clearcoatMap,Le.clearcoatMapTransform)),Pe.clearcoatRoughnessMap&&(Le.clearcoatRoughnessMap.value=Pe.clearcoatRoughnessMap,r(Pe.clearcoatRoughnessMap,Le.clearcoatRoughnessMapTransform)),Pe.clearcoatNormalMap&&(Le.clearcoatNormalMap.value=Pe.clearcoatNormalMap,r(Pe.clearcoatNormalMap,Le.clearcoatNormalMapTransform),Le.clearcoatNormalScale.value.copy(Pe.clearcoatNormalScale),1===Pe.side&&Le.clearcoatNormalScale.value.negate())),Pe.dispersion>0&&(Le.dispersion.value=Pe.dispersion),Pe.iridescence>0&&(Le.iridescence.value=Pe.iridescence,Le.iridescenceIOR.value=Pe.iridescenceIOR,Le.iridescenceThicknessMinimum.value=Pe.iridescenceThicknessRange[0],Le.iridescenceThicknessMaximum.value=Pe.iridescenceThicknessRange[1],Pe.iridescenceMap&&(Le.iridescenceMap.value=Pe.iridescenceMap,r(Pe.iridescenceMap,Le.iridescenceMapTransform)),Pe.iridescenceThicknessMap&&(Le.iridescenceThicknessMap.value=Pe.iridescenceThicknessMap,r(Pe.iridescenceThicknessMap,Le.iridescenceThicknessMapTransform))),Pe.transmission>0&&(Le.transmission.value=Pe.transmission,Le.transmissionSamplerMap.value=ht.texture,Le.transmissionSamplerSize.value.set(ht.width,ht.height),Pe.transmissionMap&&(Le.transmissionMap.value=Pe.transmissionMap,r(Pe.transmissionMap,Le.transmissionMapTransform)),Le.thickness.value=Pe.thickness,Pe.thicknessMap&&(Le.thicknessMap.value=Pe.thicknessMap,r(Pe.thicknessMap,Le.thicknessMapTransform)),Le.attenuationDistance.value=Pe.attenuationDistance,Le.attenuationColor.value.copy(Pe.attenuationColor)),Pe.anisotropy>0&&(Le.anisotropyVector.value.set(Pe.anisotropy*Math.cos(Pe.anisotropyRotation),Pe.anisotropy*Math.sin(Pe.anisotropyRotation)),Pe.anisotropyMap&&(Le.anisotropyMap.value=Pe.anisotropyMap,r(Pe.anisotropyMap,Le.anisotropyMapTransform))),Le.specularIntensity.value=Pe.specularIntensity,Le.specularColor.value.copy(Pe.specularColor),Pe.specularColorMap&&(Le.specularColorMap.value=Pe.specularColorMap,r(Pe.specularColorMap,Le.specularColorMapTransform)),Pe.specularIntensityMap&&(Le.specularIntensityMap.value=Pe.specularIntensityMap,r(Pe.specularIntensityMap,Le.specularIntensityMapTransform))}(Le,Pe,st)):Pe.isMeshMatcapMaterial?(u(Le,Pe),function Re(Le,Pe){Pe.matcap&&(Le.matcap.value=Pe.matcap)}(Le,Pe)):Pe.isMeshDepthMaterial?u(Le,Pe):Pe.isMeshDistanceMaterial?(u(Le,Pe),function Ue(Le,Pe){const ht=t.get(Pe).light;Le.referencePosition.value.setFromMatrixPosition(ht.matrixWorld),Le.nearDistance.value=ht.shadow.camera.near,Le.farDistance.value=ht.shadow.camera.far}(Le,Pe)):Pe.isMeshNormalMaterial?u(Le,Pe):Pe.isLineBasicMaterial?(function _(Le,Pe){Le.diffuse.value.copy(Pe.color),Le.opacity.value=Pe.opacity,Pe.map&&(Le.map.value=Pe.map,r(Pe.map,Le.mapTransform))}(Le,Pe),Pe.isLineDashedMaterial&&function A(Le,Pe){Le.dashSize.value=Pe.dashSize,Le.totalSize.value=Pe.dashSize+Pe.gapSize,Le.scale.value=Pe.scale}(Le,Pe)):Pe.isPointsMaterial?function O(Le,Pe,ht,ut){Le.diffuse.value.copy(Pe.color),Le.opacity.value=Pe.opacity,Le.size.value=Pe.size*ht,Le.scale.value=.5*ut,Pe.map&&(Le.map.value=Pe.map,r(Pe.map,Le.uvTransform)),Pe.alphaMap&&(Le.alphaMap.value=Pe.alphaMap,r(Pe.alphaMap,Le.alphaMapTransform)),Pe.alphaTest>0&&(Le.alphaTest.value=Pe.alphaTest)}(Le,Pe,ht,ut):Pe.isSpriteMaterial?function B(Le,Pe){Le.diffuse.value.copy(Pe.color),Le.opacity.value=Pe.opacity,Le.rotation.value=Pe.rotation,Pe.map&&(Le.map.value=Pe.map,r(Pe.map,Le.mapTransform)),Pe.alphaMap&&(Le.alphaMap.value=Pe.alphaMap,r(Pe.alphaMap,Le.alphaMapTransform)),Pe.alphaTest>0&&(Le.alphaTest.value=Pe.alphaTest)}(Le,Pe):Pe.isShadowMaterial?(Le.color.value.copy(Pe.color),Le.opacity.value=Pe.opacity):Pe.isShaderMaterial&&(Pe.uniformsNeedUpdate=!1)}}}function y_(v,t,r,s){let l={},u={},_=[];const A=v.getParameter(v.MAX_UNIFORM_BUFFER_BINDINGS);function _e(ht,ut,st,Yt){const At=ht.value,zt=ut+"_"+st;if(void 0===Yt[zt])return Yt[zt]="number"==typeof At||"boolean"==typeof At?At:At.clone(),!0;{const tn=Yt[zt];if("number"==typeof At||"boolean"==typeof At){if(tn!==At)return Yt[zt]=At,!0}else if(!1===tn.equals(At))return tn.copy(At),!0}return!1}function Ue(ht){const ut={boundary:0,storage:0};return"number"==typeof ht||"boolean"==typeof ht?(ut.boundary=4,ut.storage=4):ht.isVector2?(ut.boundary=8,ut.storage=8):ht.isVector3||ht.isColor?(ut.boundary=16,ut.storage=12):ht.isVector4?(ut.boundary=16,ut.storage=16):ht.isMatrix3?(ut.boundary=48,ut.storage=48):ht.isMatrix4?(ut.boundary=64,ut.storage=64):ht.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ht),ut}function Le(ht){const ut=ht.target;ut.removeEventListener("dispose",Le);const st=_.indexOf(ut.__bindingPointIndex);_.splice(st,1),v.deleteBuffer(l[ut.id]),delete l[ut.id],delete u[ut.id]}return{bind:function O(ht,ut){s.uniformBlockBinding(ht,ut.program)},update:function B(ht,ut){let st=l[ht.id];void 0===st&&(function Re(ht){const ut=ht.uniforms;let st=0;for(let zt=0,tn=ut.length;zt<tn;zt++){const Pt=Array.isArray(ut[zt])?ut[zt]:[ut[zt]];for(let Tt=0,wn=Pt.length;Tt<wn;Tt++){const er=Pt[Tt],Kn=Array.isArray(er.value)?er.value:[er.value];for(let rr=0,wr=Kn.length;rr<wr;rr++){const Wr=Ue(Kn[rr]),cr=st%16,Zr=cr%Wr.boundary,hi=cr+Zr;st+=Zr,0!==hi&&16-hi<Wr.storage&&(st+=16-hi),er.__data=new Float32Array(Wr.storage/Float32Array.BYTES_PER_ELEMENT),er.__offset=st,st+=Wr.storage}}}const At=st%16;At>0&&(st+=16-At),ht.__size=st,ht.__cache={}}(ht),st=function ee(ht){const ut=function ae(){for(let ht=0;ht<A;ht++)if(-1===_.indexOf(ht))return _.push(ht),ht;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();ht.__bindingPointIndex=ut;const st=v.createBuffer(),Yt=ht.__size,At=ht.usage;return v.bindBuffer(v.UNIFORM_BUFFER,st),v.bufferData(v.UNIFORM_BUFFER,Yt,At),v.bindBuffer(v.UNIFORM_BUFFER,null),v.bindBufferBase(v.UNIFORM_BUFFER,ut,st),st}(ht),l[ht.id]=st,ht.addEventListener("dispose",Le)),s.updateUBOMapping(ht,ut.program);const At=t.render.frame;u[ht.id]!==At&&(function pe(ht){const st=ht.uniforms,Yt=ht.__cache;v.bindBuffer(v.UNIFORM_BUFFER,l[ht.id]);for(let At=0,zt=st.length;At<zt;At++){const tn=Array.isArray(st[At])?st[At]:[st[At]];for(let Pt=0,Tt=tn.length;Pt<Tt;Pt++){const wn=tn[Pt];if(!0===_e(wn,At,Pt,Yt)){const er=wn.__offset,Kn=Array.isArray(wn.value)?wn.value:[wn.value];let rr=0;for(let wr=0;wr<Kn.length;wr++){const tr=Kn[wr],Wr=Ue(tr);"number"==typeof tr||"boolean"==typeof tr?(wn.__data[0]=tr,v.bufferSubData(v.UNIFORM_BUFFER,er+rr,wn.__data)):tr.isMatrix3?(wn.__data[0]=tr.elements[0],wn.__data[1]=tr.elements[1],wn.__data[2]=tr.elements[2],wn.__data[3]=0,wn.__data[4]=tr.elements[3],wn.__data[5]=tr.elements[4],wn.__data[6]=tr.elements[5],wn.__data[7]=0,wn.__data[8]=tr.elements[6],wn.__data[9]=tr.elements[7],wn.__data[10]=tr.elements[8],wn.__data[11]=0):(tr.toArray(wn.__data,rr),rr+=Wr.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(v.UNIFORM_BUFFER,er,wn.__data)}}}v.bindBuffer(v.UNIFORM_BUFFER,null)}(ht),u[ht.id]=At)},dispose:function Pe(){for(const ht in l)v.deleteBuffer(l[ht]);_=[],l={},u={}}}}class v_{constructor(t={}){const{canvas:r=cc(),context:s=null,depth:l=!0,stencil:u=!1,alpha:_=!1,antialias:A=!1,premultipliedAlpha:O=!0,preserveDrawingBuffer:B=!1,powerPreference:ee="default",failIfMajorPerformanceCaveat:ae=!1,reverseDepthBuffer:pe=!1}=t;let _e;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_e=s.getContextAttributes().alpha}else _e=_;const Re=new Uint32Array(4),Ue=new Int32Array(4);let Le=null,Pe=null;const ht=[],ut=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vi,this.toneMapping=ur,this.toneMappingExposure=1;const st=this;let Yt=!1,At=0,zt=0,tn=null,Pt=-1,Tt=null;const wn=new Vs,er=new Vs;let Kn=null;const rr=new Nr(0);let wr=0,tr=r.width,Wr=r.height,cr=1,Zr=null,hi=null;const Pi=new Vs(0,0,tr,Wr),as=new Vs(0,0,tr,Wr);let Ts=!1;const Tr=new tp;let ti=!1,Di=!1;this.transmissionResolutionScale=1;const ri=new Li,Bi=new Li,$s=new xt,Fi=new Vs,hs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let vr=!1;function Ir(){return null===tn?cr:1}let Gr,gi,Kr,Xi,ci,cn,Ht,ar,jr,Yr,Ur,Zi,Ti,Ii,js,ii,zi,ms,vs,$i,lo,Fs,Xo,Xn,hn=s;function Ci(en,qn){return r.getContext(en,qn)}try{const en={alpha:!0,depth:l,stencil:u,antialias:A,premultipliedAlpha:O,preserveDrawingBuffer:B,powerPreference:ee,failIfMajorPerformanceCaveat:ae};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${d}`),r.addEventListener("webglcontextlost",$r,!1),r.addEventListener("webglcontextrestored",Ni,!1),r.addEventListener("webglcontextcreationerror",Ri,!1),null===hn){const qn="webgl2";if(hn=Ci(qn,en),null===hn)throw Ci(qn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(en){throw console.error("THREE.WebGLRenderer: "+en.message),en}function Mi(){Gr=new U0(hn),Gr.init(),Fs=new hx(hn,Gr),gi=new L0(hn,Gr,t,Fs),Kr=new m_(hn,Gr),gi.reverseDepthBuffer&&pe&&Kr.buffers.depth.setReversed(!0),Xi=new Ad(hn),ci=new QE,cn=new dx(hn,Gr,Kr,ci,gi,Fs,Xi),Ht=new N0(st),ar=new F0(st),jr=new Og(hn),Xo=new qp(hn,jr),Yr=new Rw(hn,jr,Xi,Xo),Ur=new vf(hn,Yr,jr,Xi),vs=new Jg(hn,gi,cn),ii=new k0(ci),Zi=new lx(st,Ht,ar,Gr,gi,Xo,ii),Ti=new g_(st,ci),Ii=new dy,js=new ux(Gr),ms=new XE(st,Ht,ar,Kr,Ur,_e,O),zi=new f_(st,Ur,gi),Xn=new y_(hn,Xi,gi,Kr),$i=new Cw(hn,Gr,Xi),lo=new Yp(hn,Gr,Xi),Xi.programs=Zi.programs,st.capabilities=gi,st.extensions=Gr,st.properties=ci,st.renderLists=Ii,st.shadowMap=zi,st.state=Kr,st.info=Xi}Mi();const Cr=new mx(st,hn);function $r(en){en.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Yt=!0}function Ni(){console.log("THREE.WebGLRenderer: Context Restored."),Yt=!1;const en=Xi.autoReset,qn=zi.enabled,dr=zi.autoUpdate,mr=zi.needsUpdate,Zn=zi.type;Mi(),Xi.autoReset=en,zi.enabled=qn,zi.autoUpdate=dr,zi.needsUpdate=mr,zi.type=Zn}function Ri(en){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",en.statusMessage)}function Us(en){const qn=en.target;qn.removeEventListener("dispose",Us),function Ea(en){(function hl(en){const qn=ci.get(en).programs;void 0!==qn&&(qn.forEach(function(dr){Zi.releaseProgram(dr)}),en.isShaderMaterial&&Zi.releaseShaderCache(en))})(en),ci.remove(en)}(qn)}function wo(en,qn,dr){!0===en.transparent&&2===en.side&&!1===en.forceSinglePass?(en.side=1,en.needsUpdate=!0,Nf(en,qn,dr),en.side=0,en.needsUpdate=!0,Nf(en,qn,dr),en.side=2):Nf(en,qn,dr)}this.xr=Cr,this.getContext=function(){return hn},this.getContextAttributes=function(){return hn.getContextAttributes()},this.forceContextLoss=function(){const en=Gr.get("WEBGL_lose_context");en&&en.loseContext()},this.forceContextRestore=function(){const en=Gr.get("WEBGL_lose_context");en&&en.restoreContext()},this.getPixelRatio=function(){return cr},this.setPixelRatio=function(en){void 0!==en&&(cr=en,this.setSize(tr,Wr,!1))},this.getSize=function(en){return en.set(tr,Wr)},this.setSize=function(en,qn,dr=!0){Cr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(tr=en,Wr=qn,r.width=Math.floor(en*cr),r.height=Math.floor(qn*cr),!0===dr&&(r.style.width=en+"px",r.style.height=qn+"px"),this.setViewport(0,0,en,qn))},this.getDrawingBufferSize=function(en){return en.set(tr*cr,Wr*cr).floor()},this.setDrawingBufferSize=function(en,qn,dr){tr=en,Wr=qn,cr=dr,r.width=Math.floor(en*dr),r.height=Math.floor(qn*dr),this.setViewport(0,0,en,qn)},this.getCurrentViewport=function(en){return en.copy(wn)},this.getViewport=function(en){return en.copy(Pi)},this.setViewport=function(en,qn,dr,mr){en.isVector4?Pi.set(en.x,en.y,en.z,en.w):Pi.set(en,qn,dr,mr),Kr.viewport(wn.copy(Pi).multiplyScalar(cr).round())},this.getScissor=function(en){return en.copy(as)},this.setScissor=function(en,qn,dr,mr){en.isVector4?as.set(en.x,en.y,en.z,en.w):as.set(en,qn,dr,mr),Kr.scissor(er.copy(as).multiplyScalar(cr).round())},this.getScissorTest=function(){return Ts},this.setScissorTest=function(en){Kr.setScissorTest(Ts=en)},this.setOpaqueSort=function(en){Zr=en},this.setTransparentSort=function(en){hi=en},this.getClearColor=function(en){return en.copy(ms.getClearColor())},this.setClearColor=function(){ms.setClearColor(...arguments)},this.getClearAlpha=function(){return ms.getClearAlpha()},this.setClearAlpha=function(){ms.setClearAlpha(...arguments)},this.clear=function(en=!0,qn=!0,dr=!0){let mr=0;if(en){let Zn=!1;if(null!==tn){const ni=tn.texture.format;Zn=ni===Ar||ni===$n||ni===Dt}if(Zn){const ni=tn.texture.type,Ei=ni===Lr||ni===N||ni===Qe||ni===de||ni===ie||ni===H,Gi=ms.getClearColor(),ji=ms.getClearAlpha(),_s=Gi.r,bs=Gi.g,ss=Gi.b;Ei?(Re[0]=_s,Re[1]=bs,Re[2]=ss,Re[3]=ji,hn.clearBufferuiv(hn.COLOR,0,Re)):(Ue[0]=_s,Ue[1]=bs,Ue[2]=ss,Ue[3]=ji,hn.clearBufferiv(hn.COLOR,0,Ue))}else mr|=hn.COLOR_BUFFER_BIT}qn&&(mr|=hn.DEPTH_BUFFER_BIT),dr&&(mr|=hn.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),hn.clear(mr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",$r,!1),r.removeEventListener("webglcontextrestored",Ni,!1),r.removeEventListener("webglcontextcreationerror",Ri,!1),ms.dispose(),Ii.dispose(),js.dispose(),ci.dispose(),Ht.dispose(),ar.dispose(),Ur.dispose(),Xo.dispose(),Xn.dispose(),Zi.dispose(),Cr.dispose(),Cr.removeEventListener("sessionstart",kf),Cr.removeEventListener("sessionend",W_),Rd.stop()},this.renderBufferDirect=function(en,qn,dr,mr,Zn,ni){null===qn&&(qn=hs);const Ei=Zn.isMesh&&Zn.matrixWorld.determinant()<0,Gi=function lT(en,qn,dr,mr,Zn){!0!==qn.isScene&&(qn=hs),cn.resetTextureUnits();const ni=qn.fog,Gi=null===tn?st.outputColorSpace:!0===tn.isXRRenderTarget?tn.texture.colorSpace:ns,ji=(mr.isMeshStandardMaterial?ar:Ht).get(mr.envMap||(mr.isMeshStandardMaterial?qn.environment:null)),_s=!0===mr.vertexColors&&!!dr.attributes.color&&4===dr.attributes.color.itemSize,bs=!!dr.attributes.tangent&&(!!mr.normalMap||mr.anisotropy>0),ss=!!dr.morphAttributes.position,no=!!dr.morphAttributes.normal,Hs=!!dr.morphAttributes.color;let Uo=ur;mr.toneMapped&&(null===tn||!0===tn.isXRRenderTarget)&&(Uo=st.toneMapping);const Ds=dr.morphAttributes.position||dr.morphAttributes.normal||dr.morphAttributes.color,Ws=void 0!==Ds?Ds.length:0,ts=ci.get(mr),No=Pe.state.lights;!0!==ti||!0!==Di&&en===Tt||ii.setState(mr,en,en===Tt&&mr.id===Pt);let ro=!1;mr.version===ts.__version?(ts.needsLights&&ts.lightsStateVersion!==No.state.version||ts.outputColorSpace!==Gi||Zn.isBatchedMesh&&!1===ts.batching||!Zn.isBatchedMesh&&!0===ts.batching||Zn.isBatchedMesh&&!0===ts.batchingColor&&null===Zn.colorTexture||Zn.isBatchedMesh&&!1===ts.batchingColor&&null!==Zn.colorTexture||Zn.isInstancedMesh&&!1===ts.instancing||!Zn.isInstancedMesh&&!0===ts.instancing||Zn.isSkinnedMesh&&!1===ts.skinning||!Zn.isSkinnedMesh&&!0===ts.skinning||Zn.isInstancedMesh&&!0===ts.instancingColor&&null===Zn.instanceColor||Zn.isInstancedMesh&&!1===ts.instancingColor&&null!==Zn.instanceColor||Zn.isInstancedMesh&&!0===ts.instancingMorph&&null===Zn.morphTexture||Zn.isInstancedMesh&&!1===ts.instancingMorph&&null!==Zn.morphTexture||ts.envMap!==ji||!0===mr.fog&&ts.fog!==ni||void 0!==ts.numClippingPlanes&&(ts.numClippingPlanes!==ii.numPlanes||ts.numIntersection!==ii.numIntersection)||ts.vertexAlphas!==_s||ts.vertexTangents!==bs||ts.morphTargets!==ss||ts.morphNormals!==no||ts.morphColors!==Hs||ts.toneMapping!==Uo||ts.morphTargetsCount!==Ws)&&(ro=!0):(ro=!0,ts.__version=mr.version);let Lc=ts.currentProgram;!0===ro&&(Lc=Nf(mr,qn,Zn));let iu=!1,jl=!1,bh=!1;const Qo=Lc.getUniforms(),yc=ts.uniforms;if(Kr.useProgram(Lc.program)&&(iu=!0,jl=!0,bh=!0),mr.id!==Pt&&(Pt=mr.id,jl=!0),iu||Tt!==en){Kr.buffers.depth.getReversed()?(ri.copy(en.projectionMatrix),function uc(v){const t=v.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(ri),function su(v){const t=v.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(ri),Qo.setValue(hn,"projectionMatrix",ri)):Qo.setValue(hn,"projectionMatrix",en.projectionMatrix),Qo.setValue(hn,"viewMatrix",en.matrixWorldInverse);const Fl=Qo.map.cameraPosition;void 0!==Fl&&Fl.setValue(hn,$s.setFromMatrixPosition(en.matrixWorld)),gi.logarithmicDepthBuffer&&Qo.setValue(hn,"logDepthBufFC",2/(Math.log(en.far+1)/Math.LN2)),(mr.isMeshPhongMaterial||mr.isMeshToonMaterial||mr.isMeshLambertMaterial||mr.isMeshBasicMaterial||mr.isMeshStandardMaterial||mr.isShaderMaterial)&&Qo.setValue(hn,"isOrthographic",!0===en.isOrthographicCamera),Tt!==en&&(Tt=en,jl=!0,bh=!0)}if(Zn.isSkinnedMesh){Qo.setOptional(hn,Zn,"bindMatrix"),Qo.setOptional(hn,Zn,"bindMatrixInverse");const io=Zn.skeleton;io&&(null===io.boneTexture&&io.computeBoneTexture(),Qo.setValue(hn,"boneTexture",io.boneTexture,cn))}Zn.isBatchedMesh&&(Qo.setOptional(hn,Zn,"batchingTexture"),Qo.setValue(hn,"batchingTexture",Zn._matricesTexture,cn),Qo.setOptional(hn,Zn,"batchingIdTexture"),Qo.setValue(hn,"batchingIdTexture",Zn._indirectTexture,cn),Qo.setOptional(hn,Zn,"batchingColorTexture"),null!==Zn._colorsTexture&&Qo.setValue(hn,"batchingColorTexture",Zn._colorsTexture,cn));const vc=dr.morphAttributes;if((void 0!==vc.position||void 0!==vc.normal||void 0!==vc.color)&&vs.update(Zn,dr,Lc),(jl||ts.receiveShadow!==Zn.receiveShadow)&&(ts.receiveShadow=Zn.receiveShadow,Qo.setValue(hn,"receiveShadow",Zn.receiveShadow)),mr.isMeshGouraudMaterial&&null!==mr.envMap&&(yc.envMap.value=ji,yc.flipEnvMap.value=ji.isCubeTexture&&!1===ji.isRenderTargetTexture?-1:1),mr.isMeshStandardMaterial&&null===mr.envMap&&null!==qn.environment&&(yc.envMapIntensity.value=qn.environmentIntensity),jl&&(Qo.setValue(hn,"toneMappingExposure",st.toneMappingExposure),ts.needsLights&&function Z_(en,qn){en.ambientLightColor.needsUpdate=qn,en.lightProbe.needsUpdate=qn,en.directionalLights.needsUpdate=qn,en.directionalLightShadows.needsUpdate=qn,en.pointLights.needsUpdate=qn,en.pointLightShadows.needsUpdate=qn,en.spotLights.needsUpdate=qn,en.spotLightShadows.needsUpdate=qn,en.rectAreaLights.needsUpdate=qn,en.hemisphereLights.needsUpdate=qn}(yc,bh),ni&&!0===mr.fog&&Ti.refreshFogUniforms(yc,ni),Ti.refreshMaterialUniforms(yc,mr,cr,Wr,Pe.state.transmissionRenderTarget[en.id]),Zu.upload(hn,Ay(ts),yc,cn)),mr.isShaderMaterial&&!0===mr.uniformsNeedUpdate&&(Zu.upload(hn,Ay(ts),yc,cn),mr.uniformsNeedUpdate=!1),mr.isSpriteMaterial&&Qo.setValue(hn,"center",Zn.center),Qo.setValue(hn,"modelViewMatrix",Zn.modelViewMatrix),Qo.setValue(hn,"normalMatrix",Zn.normalMatrix),Qo.setValue(hn,"modelMatrix",Zn.matrixWorld),mr.isShaderMaterial||mr.isRawShaderMaterial){const io=mr.uniformsGroups;for(let Fl=0,Cy=io.length;Fl<Cy;Fl++){const Bo=io[Fl];Xn.update(Bo,Lc),Xn.bind(Bo,Lc)}}return Lc}(en,qn,dr,mr,Zn);Kr.setMaterial(mr,Ei);let ji=dr.index,_s=1;if(!0===mr.wireframe){if(ji=Yr.getWireframeAttribute(dr),void 0===ji)return;_s=2}const bs=dr.drawRange,ss=dr.attributes.position;let no=bs.start*_s,Hs=(bs.start+bs.count)*_s;null!==ni&&(no=Math.max(no,ni.start*_s),Hs=Math.min(Hs,(ni.start+ni.count)*_s)),null!==ji?(no=Math.max(no,0),Hs=Math.min(Hs,ji.count)):null!=ss&&(no=Math.max(no,0),Hs=Math.min(Hs,ss.count));const Uo=Hs-no;if(Uo<0||Uo===1/0)return;Xo.setup(Zn,mr,Gi,dr,ji);let Ds,Ws=$i;if(null!==ji&&(Ds=jr.get(ji),Ws=lo,Ws.setIndex(Ds)),Zn.isMesh)!0===mr.wireframe?(Kr.setLineWidth(mr.wireframeLinewidth*Ir()),Ws.setMode(hn.LINES)):Ws.setMode(hn.TRIANGLES);else if(Zn.isLine){let ts=mr.linewidth;void 0===ts&&(ts=1),Kr.setLineWidth(ts*Ir()),Ws.setMode(Zn.isLineSegments?hn.LINES:Zn.isLineLoop?hn.LINE_LOOP:hn.LINE_STRIP)}else Zn.isPoints?Ws.setMode(hn.POINTS):Zn.isSprite&&Ws.setMode(hn.TRIANGLES);if(Zn.isBatchedMesh)if(null!==Zn._multiDrawInstances)$a("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ws.renderMultiDrawInstances(Zn._multiDrawStarts,Zn._multiDrawCounts,Zn._multiDrawCount,Zn._multiDrawInstances);else if(Gr.get("WEBGL_multi_draw"))Ws.renderMultiDraw(Zn._multiDrawStarts,Zn._multiDrawCounts,Zn._multiDrawCount);else{const ts=Zn._multiDrawStarts,No=Zn._multiDrawCounts,ro=Zn._multiDrawCount,Lc=ji?jr.get(ji).bytesPerElement:1,iu=ci.get(mr).currentProgram.getUniforms();for(let jl=0;jl<ro;jl++)iu.setValue(hn,"_gl_DrawID",jl),Ws.render(ts[jl]/Lc,No[jl])}else if(Zn.isInstancedMesh)Ws.renderInstances(no,Uo,Zn.count);else if(dr.isInstancedBufferGeometry){const No=Math.min(dr.instanceCount,void 0!==dr._maxInstanceCount?dr._maxInstanceCount:1/0);Ws.renderInstances(no,Uo,No)}else Ws.render(no,Uo)},this.compile=function(en,qn,dr=null){null===dr&&(dr=en),Pe=js.get(dr),Pe.init(qn),ut.push(Pe),dr.traverseVisible(function(Zn){Zn.isLight&&Zn.layers.test(qn.layers)&&(Pe.pushLight(Zn),Zn.castShadow&&Pe.pushShadow(Zn))}),en!==dr&&en.traverseVisible(function(Zn){Zn.isLight&&Zn.layers.test(qn.layers)&&(Pe.pushLight(Zn),Zn.castShadow&&Pe.pushShadow(Zn))}),Pe.setupLights();const mr=new Set;return en.traverse(function(Zn){if(!(Zn.isMesh||Zn.isPoints||Zn.isLine||Zn.isSprite))return;const ni=Zn.material;if(ni)if(Array.isArray(ni))for(let Ei=0;Ei<ni.length;Ei++){const Gi=ni[Ei];wo(Gi,dr,Zn),mr.add(Gi)}else wo(ni,dr,Zn),mr.add(ni)}),Pe=ut.pop(),mr},this.compileAsync=function(en,qn,dr=null){const mr=this.compile(en,qn,dr);return new Promise(Zn=>{function ni(){mr.forEach(function(Ei){ci.get(Ei).currentProgram.isReady()&&mr.delete(Ei)}),0!==mr.size?setTimeout(ni,10):Zn(en)}null!==Gr.get("KHR_parallel_shader_compile")?ni():setTimeout(ni,10)})};let Oc=null;function kf(){Rd.stop()}function W_(){Rd.start()}const Rd=new Pg;function My(en,qn,dr,mr){if(!1===en.visible)return;if(en.layers.test(qn.layers))if(en.isGroup)dr=en.renderOrder;else if(en.isLOD)!0===en.autoUpdate&&en.update(qn);else if(en.isLight)Pe.pushLight(en),en.castShadow&&Pe.pushShadow(en);else if(en.isSprite){if(!en.frustumCulled||Tr.intersectsSprite(en)){mr&&Fi.setFromMatrixPosition(en.matrixWorld).applyMatrix4(Bi);const Ei=Ur.update(en),Gi=en.material;Gi.visible&&Le.push(en,Ei,Gi,dr,Fi.z,null)}}else if((en.isMesh||en.isLine||en.isPoints)&&(!en.frustumCulled||Tr.intersectsObject(en))){const Ei=Ur.update(en),Gi=en.material;if(mr&&(void 0!==en.boundingSphere?(null===en.boundingSphere&&en.computeBoundingSphere(),Fi.copy(en.boundingSphere.center)):(null===Ei.boundingSphere&&Ei.computeBoundingSphere(),Fi.copy(Ei.boundingSphere.center)),Fi.applyMatrix4(en.matrixWorld).applyMatrix4(Bi)),Array.isArray(Gi)){const ji=Ei.groups;for(let _s=0,bs=ji.length;_s<bs;_s++){const ss=ji[_s],no=Gi[ss.materialIndex];no&&no.visible&&Le.push(en,Ei,no,dr,Fi.z,ss)}}else Gi.visible&&Le.push(en,Ei,Gi,dr,Fi.z,null)}const ni=en.children;for(let Ei=0,Gi=ni.length;Ei<Gi;Ei++)My(ni[Ei],qn,dr,mr)}function X_(en,qn,dr,mr){const Zn=en.opaque,ni=en.transmissive,Ei=en.transparent;Pe.setupLightsView(dr),!0===ti&&ii.setGlobalState(st.clippingPlanes,dr),mr&&Kr.viewport(wn.copy(mr)),Zn.length>0&&vm(Zn,qn,dr),ni.length>0&&vm(ni,qn,dr),Ei.length>0&&vm(Ei,qn,dr),Kr.buffers.depth.setTest(!0),Kr.buffers.depth.setMask(!0),Kr.buffers.color.setMask(!0),Kr.setPolygonOffset(!1)}function q_(en,qn,dr,mr){if(null!==(!0===dr.isScene?dr.overrideMaterial:null))return;void 0===Pe.state.transmissionRenderTarget[mr.id]&&(Pe.state.transmissionRenderTarget[mr.id]=new Te(1,1,{generateMipmaps:!0,type:Gr.has("EXT_color_buffer_half_float")||Gr.has("EXT_color_buffer_float")?L:Lr,minFilter:fr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xs.workingColorSpace}));const ni=Pe.state.transmissionRenderTarget[mr.id],Ei=mr.viewport||wn;ni.setSize(Ei.z*st.transmissionResolutionScale,Ei.w*st.transmissionResolutionScale);const Gi=st.getRenderTarget();st.setRenderTarget(ni),st.getClearColor(rr),wr=st.getClearAlpha(),wr<1&&st.setClearColor(16777215,.5),st.clear(),vr&&ms.render(dr);const ji=st.toneMapping;st.toneMapping=ur;const _s=mr.viewport;if(void 0!==mr.viewport&&(mr.viewport=void 0),Pe.setupLightsView(mr),!0===ti&&ii.setGlobalState(st.clippingPlanes,mr),vm(en,dr,mr),cn.updateMultisampleRenderTarget(ni),cn.updateRenderTargetMipmap(ni),!1===Gr.has("WEBGL_multisampled_render_to_texture")){let bs=!1;for(let ss=0,no=qn.length;ss<no;ss++){const Hs=qn[ss],Uo=Hs.object,Ds=Hs.geometry,Ws=Hs.material,ts=Hs.group;if(2===Ws.side&&Uo.layers.test(mr.layers)){const No=Ws.side;Ws.side=1,Ws.needsUpdate=!0,K_(Uo,dr,mr,Ds,Ws,ts),Ws.side=No,Ws.needsUpdate=!0,bs=!0}}!0===bs&&(cn.updateMultisampleRenderTarget(ni),cn.updateRenderTargetMipmap(ni))}st.setRenderTarget(Gi),st.setClearColor(rr,wr),void 0!==_s&&(mr.viewport=_s),st.toneMapping=ji}function vm(en,qn,dr){const mr=!0===qn.isScene?qn.overrideMaterial:null;for(let Zn=0,ni=en.length;Zn<ni;Zn++){const Ei=en[Zn],Gi=Ei.object,ji=Ei.geometry,_s=null===mr?Ei.material:mr,bs=Ei.group;Gi.layers.test(dr.layers)&&K_(Gi,qn,dr,ji,_s,bs)}}function K_(en,qn,dr,mr,Zn,ni){en.onBeforeRender(st,qn,dr,mr,Zn,ni),en.modelViewMatrix.multiplyMatrices(dr.matrixWorldInverse,en.matrixWorld),en.normalMatrix.getNormalMatrix(en.modelViewMatrix),Zn.onBeforeRender(st,qn,dr,mr,en,ni),!0===Zn.transparent&&2===Zn.side&&!1===Zn.forceSinglePass?(Zn.side=1,Zn.needsUpdate=!0,st.renderBufferDirect(dr,qn,mr,Zn,en,ni),Zn.side=0,Zn.needsUpdate=!0,st.renderBufferDirect(dr,qn,mr,Zn,en,ni),Zn.side=2):st.renderBufferDirect(dr,qn,mr,Zn,en,ni),en.onAfterRender(st,qn,dr,mr,Zn,ni)}function Nf(en,qn,dr){!0!==qn.isScene&&(qn=hs);const mr=ci.get(en),Zn=Pe.state.lights,Ei=Zn.state.version,Gi=Zi.getParameters(en,Zn.state,Pe.state.shadowsArray,qn,dr),ji=Zi.getProgramCacheKey(Gi);let _s=mr.programs;mr.environment=en.isMeshStandardMaterial?qn.environment:null,mr.fog=qn.fog,mr.envMap=(en.isMeshStandardMaterial?ar:Ht).get(en.envMap||mr.environment),mr.envMapRotation=null!==mr.environment&&null===en.envMap?qn.environmentRotation:en.envMapRotation,void 0===_s&&(en.addEventListener("dispose",Us),_s=new Map,mr.programs=_s);let bs=_s.get(ji);if(void 0!==bs){if(mr.currentProgram===bs&&mr.lightsStateVersion===Ei)return Y_(en,Gi),bs}else Gi.uniforms=Zi.getUniforms(en),en.onBeforeCompile(Gi,st),bs=Zi.acquireProgram(Gi,ji),_s.set(ji,bs),mr.uniforms=Gi.uniforms;const ss=mr.uniforms;return(!en.isShaderMaterial&&!en.isRawShaderMaterial||!0===en.clipping)&&(ss.clippingPlanes=ii.uniform),Y_(en,Gi),mr.needsLights=function J_(en){return en.isMeshLambertMaterial||en.isMeshToonMaterial||en.isMeshPhongMaterial||en.isMeshStandardMaterial||en.isShadowMaterial||en.isShaderMaterial&&!0===en.lights}(en),mr.lightsStateVersion=Ei,mr.needsLights&&(ss.ambientLightColor.value=Zn.state.ambient,ss.lightProbe.value=Zn.state.probe,ss.directionalLights.value=Zn.state.directional,ss.directionalLightShadows.value=Zn.state.directionalShadow,ss.spotLights.value=Zn.state.spot,ss.spotLightShadows.value=Zn.state.spotShadow,ss.rectAreaLights.value=Zn.state.rectArea,ss.ltc_1.value=Zn.state.rectAreaLTC1,ss.ltc_2.value=Zn.state.rectAreaLTC2,ss.pointLights.value=Zn.state.point,ss.pointLightShadows.value=Zn.state.pointShadow,ss.hemisphereLights.value=Zn.state.hemi,ss.directionalShadowMap.value=Zn.state.directionalShadowMap,ss.directionalShadowMatrix.value=Zn.state.directionalShadowMatrix,ss.spotShadowMap.value=Zn.state.spotShadowMap,ss.spotLightMatrix.value=Zn.state.spotLightMatrix,ss.spotLightMap.value=Zn.state.spotLightMap,ss.pointShadowMap.value=Zn.state.pointShadowMap,ss.pointShadowMatrix.value=Zn.state.pointShadowMatrix),mr.currentProgram=bs,mr.uniformsList=null,bs}function Ay(en){if(null===en.uniformsList){const qn=en.currentProgram.getUniforms();en.uniformsList=Zu.seqWithValue(qn.seq,en.uniforms)}return en.uniformsList}function Y_(en,qn){const dr=ci.get(en);dr.outputColorSpace=qn.outputColorSpace,dr.batching=qn.batching,dr.batchingColor=qn.batchingColor,dr.instancing=qn.instancing,dr.instancingColor=qn.instancingColor,dr.instancingMorph=qn.instancingMorph,dr.skinning=qn.skinning,dr.morphTargets=qn.morphTargets,dr.morphNormals=qn.morphNormals,dr.morphColors=qn.morphColors,dr.morphTargetsCount=qn.morphTargetsCount,dr.numClippingPlanes=qn.numClippingPlanes,dr.numIntersection=qn.numClipIntersection,dr.vertexAlphas=qn.vertexAlphas,dr.vertexTangents=qn.vertexTangents,dr.toneMapping=qn.toneMapping}Rd.setAnimationLoop(function Au(en){Oc&&Oc(en)}),typeof self<"u"&&Rd.setContext(self),this.setAnimationLoop=function(en){Oc=en,Cr.setAnimationLoop(en),null===en?Rd.stop():Rd.start()},Cr.addEventListener("sessionstart",kf),Cr.addEventListener("sessionend",W_),this.render=function(en,qn){if(void 0!==qn&&!0!==qn.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Yt)return;if(!0===en.matrixWorldAutoUpdate&&en.updateMatrixWorld(),null===qn.parent&&!0===qn.matrixWorldAutoUpdate&&qn.updateMatrixWorld(),!0===Cr.enabled&&!0===Cr.isPresenting&&(!0===Cr.cameraAutoUpdate&&Cr.updateCamera(qn),qn=Cr.getCamera()),!0===en.isScene&&en.onBeforeRender(st,en,qn,tn),Pe=js.get(en,ut.length),Pe.init(qn),ut.push(Pe),Bi.multiplyMatrices(qn.projectionMatrix,qn.matrixWorldInverse),Tr.setFromProjectionMatrix(Bi),Di=this.localClippingEnabled,ti=ii.init(this.clippingPlanes,Di),Le=Ii.get(en,ht.length),Le.init(),ht.push(Le),!0===Cr.enabled&&!0===Cr.isPresenting){const ni=st.xr.getDepthSensingMesh();null!==ni&&My(ni,qn,-1/0,st.sortObjects)}My(en,qn,0,st.sortObjects),Le.finish(),!0===st.sortObjects&&Le.sort(Zr,hi),vr=!1===Cr.enabled||!1===Cr.isPresenting||!1===Cr.hasDepthSensing(),vr&&ms.addToRenderList(Le,en),this.info.render.frame++,!0===ti&&ii.beginShadows(),zi.render(Pe.state.shadowsArray,en,qn),!0===ti&&ii.endShadows(),!0===this.info.autoReset&&this.info.reset();const mr=Le.opaque,Zn=Le.transmissive;if(Pe.setupLights(),qn.isArrayCamera){const ni=qn.cameras;if(Zn.length>0)for(let Ei=0,Gi=ni.length;Ei<Gi;Ei++)q_(mr,Zn,en,ni[Ei]);vr&&ms.render(en);for(let Ei=0,Gi=ni.length;Ei<Gi;Ei++){const ji=ni[Ei];X_(Le,en,ji,ji.viewport)}}else Zn.length>0&&q_(mr,Zn,en,qn),vr&&ms.render(en),X_(Le,en,qn);null!==tn&&0===zt&&(cn.updateMultisampleRenderTarget(tn),cn.updateRenderTargetMipmap(tn)),!0===en.isScene&&en.onAfterRender(st,en,qn),Xo.resetDefaultState(),Pt=-1,Tt=null,ut.pop(),ut.length>0?(Pe=ut[ut.length-1],!0===ti&&ii.setGlobalState(st.clippingPlanes,Pe.state.camera)):Pe=null,ht.pop(),Le=ht.length>0?ht[ht.length-1]:null},this.getActiveCubeFace=function(){return At},this.getActiveMipmapLevel=function(){return zt},this.getRenderTarget=function(){return tn},this.setRenderTargetTextures=function(en,qn,dr){ci.get(en.texture).__webglTexture=qn,ci.get(en.depthTexture).__webglTexture=dr;const mr=ci.get(en);mr.__hasExternalTextures=!0,mr.__autoAllocateDepthBuffer=void 0===dr,mr.__autoAllocateDepthBuffer||!0===Gr.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mr.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(en,qn){const dr=ci.get(en);dr.__webglFramebuffer=qn,dr.__useDefaultFramebuffer=void 0===qn};const Pd=hn.createFramebuffer();this.setRenderTarget=function(en,qn=0,dr=0){tn=en,At=qn,zt=dr;let mr=!0,Zn=null,ni=!1,Ei=!1;if(en){const ji=ci.get(en);if(void 0!==ji.__useDefaultFramebuffer)Kr.bindFramebuffer(hn.FRAMEBUFFER,null),mr=!1;else if(void 0===ji.__webglFramebuffer)cn.setupRenderTarget(en);else if(ji.__hasExternalTextures)cn.rebindTextures(en,ci.get(en.texture).__webglTexture,ci.get(en.depthTexture).__webglTexture);else if(en.depthBuffer){const ss=en.depthTexture;if(ji.__boundDepthTexture!==ss){if(null!==ss&&ci.has(ss)&&(en.width!==ss.image.width||en.height!==ss.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");cn.setupDepthRenderbuffer(en)}}const _s=en.texture;(_s.isData3DTexture||_s.isDataArrayTexture||_s.isCompressedArrayTexture)&&(Ei=!0);const bs=ci.get(en).__webglFramebuffer;en.isWebGLCubeRenderTarget?(Zn=Array.isArray(bs[qn])?bs[qn][dr]:bs[qn],ni=!0):Zn=en.samples>0&&!1===cn.useMultisampledRTT(en)?ci.get(en).__webglMultisampledFramebuffer:Array.isArray(bs)?bs[dr]:bs,wn.copy(en.viewport),er.copy(en.scissor),Kn=en.scissorTest}else wn.copy(Pi).multiplyScalar(cr).floor(),er.copy(as).multiplyScalar(cr).floor(),Kn=Ts;if(0!==dr&&(Zn=Pd),Kr.bindFramebuffer(hn.FRAMEBUFFER,Zn)&&mr&&Kr.drawBuffers(en,Zn),Kr.viewport(wn),Kr.scissor(er),Kr.setScissorTest(Kn),ni){const ji=ci.get(en.texture);hn.framebufferTexture2D(hn.FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_CUBE_MAP_POSITIVE_X+qn,ji.__webglTexture,dr)}else if(Ei){const ji=ci.get(en.texture);hn.framebufferTextureLayer(hn.FRAMEBUFFER,hn.COLOR_ATTACHMENT0,ji.__webglTexture,dr,qn)}else if(null!==en&&0!==dr){const ji=ci.get(en.texture);hn.framebufferTexture2D(hn.FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_2D,ji.__webglTexture,dr)}Pt=-1},this.readRenderTargetPixels=function(en,qn,dr,mr,Zn,ni,Ei){if(!en||!en.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Gi=ci.get(en).__webglFramebuffer;if(en.isWebGLCubeRenderTarget&&void 0!==Ei&&(Gi=Gi[Ei]),Gi){Kr.bindFramebuffer(hn.FRAMEBUFFER,Gi);try{const ji=en.texture,_s=ji.format,bs=ji.type;if(!gi.textureFormatReadable(_s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!gi.textureTypeReadable(bs))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");qn>=0&&qn<=en.width-mr&&dr>=0&&dr<=en.height-Zn&&hn.readPixels(qn,dr,mr,Zn,Fs.convert(_s),Fs.convert(bs),ni)}finally{const ji=null!==tn?ci.get(tn).__webglFramebuffer:null;Kr.bindFramebuffer(hn.FRAMEBUFFER,ji)}}},this.readRenderTargetPixelsAsync=function(){var en=(0,F.A)(function*(qn,dr,mr,Zn,ni,Ei,Gi){if(!qn||!qn.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ji=ci.get(qn).__webglFramebuffer;if(qn.isWebGLCubeRenderTarget&&void 0!==Gi&&(ji=ji[Gi]),ji){const _s=qn.texture,bs=_s.format,ss=_s.type;if(!gi.textureFormatReadable(bs))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!gi.textureTypeReadable(ss))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(dr>=0&&dr<=qn.width-Zn&&mr>=0&&mr<=qn.height-ni){Kr.bindFramebuffer(hn.FRAMEBUFFER,ji);const no=hn.createBuffer();hn.bindBuffer(hn.PIXEL_PACK_BUFFER,no),hn.bufferData(hn.PIXEL_PACK_BUFFER,Ei.byteLength,hn.STREAM_READ),hn.readPixels(dr,mr,Zn,ni,Fs.convert(bs),Fs.convert(ss),0);const Hs=null!==tn?ci.get(tn).__webglFramebuffer:null;Kr.bindFramebuffer(hn.FRAMEBUFFER,Hs);const Uo=hn.fenceSync(hn.SYNC_GPU_COMMANDS_COMPLETE,0);return hn.flush(),yield function vl(v,t,r){return new Promise(function(s,l){setTimeout(function u(){switch(v.clientWaitSync(t,v.SYNC_FLUSH_COMMANDS_BIT,0)){case v.WAIT_FAILED:l();break;case v.TIMEOUT_EXPIRED:setTimeout(u,r);break;default:s()}},r)})}(hn,Uo,4),hn.bindBuffer(hn.PIXEL_PACK_BUFFER,no),hn.getBufferSubData(hn.PIXEL_PACK_BUFFER,0,Ei),hn.deleteBuffer(no),hn.deleteSync(Uo),Ei}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(qn,dr,mr,Zn,ni,Ei,Gi){return en.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(en,qn=null,dr=0){!0!==en.isTexture&&($a("WebGLRenderer: copyFramebufferToTexture function signature has changed."),qn=arguments[0]||null,en=arguments[1]);const mr=Math.pow(2,-dr),Zn=Math.floor(en.image.width*mr),ni=Math.floor(en.image.height*mr),Ei=null!==qn?qn.x:0,Gi=null!==qn?qn.y:0;cn.setTexture2D(en,0),hn.copyTexSubImage2D(hn.TEXTURE_2D,dr,0,0,Ei,Gi,Zn,ni),Kr.unbindTexture()};const Q_=hn.createFramebuffer(),Wx=hn.createFramebuffer();this.copyTextureToTexture=function(en,qn,dr=null,mr=null,Zn=0,ni=null){let Ei,Gi,ji,_s,bs,ss,no,Hs,Uo;!0!==en.isTexture&&($a("WebGLRenderer: copyTextureToTexture function signature has changed."),mr=arguments[0]||null,en=arguments[1],qn=arguments[2],ni=arguments[3]||0,dr=null),null===ni&&(0!==Zn?($a("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ni=Zn,Zn=0):ni=0);const Ds=en.isCompressedTexture?en.mipmaps[ni]:en.image;if(null!==dr)Ei=dr.max.x-dr.min.x,Gi=dr.max.y-dr.min.y,ji=dr.isBox3?dr.max.z-dr.min.z:1,_s=dr.min.x,bs=dr.min.y,ss=dr.isBox3?dr.min.z:0;else{const vc=Math.pow(2,-Zn);Ei=Math.floor(Ds.width*vc),Gi=Math.floor(Ds.height*vc),ji=en.isDataArrayTexture?Ds.depth:en.isData3DTexture?Math.floor(Ds.depth*vc):1,_s=0,bs=0,ss=0}null!==mr?(no=mr.x,Hs=mr.y,Uo=mr.z):(no=0,Hs=0,Uo=0);const Ws=Fs.convert(qn.format),ts=Fs.convert(qn.type);let No;qn.isData3DTexture?(cn.setTexture3D(qn,0),No=hn.TEXTURE_3D):qn.isDataArrayTexture||qn.isCompressedArrayTexture?(cn.setTexture2DArray(qn,0),No=hn.TEXTURE_2D_ARRAY):(cn.setTexture2D(qn,0),No=hn.TEXTURE_2D),hn.pixelStorei(hn.UNPACK_FLIP_Y_WEBGL,qn.flipY),hn.pixelStorei(hn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,qn.premultiplyAlpha),hn.pixelStorei(hn.UNPACK_ALIGNMENT,qn.unpackAlignment);const ro=hn.getParameter(hn.UNPACK_ROW_LENGTH),Lc=hn.getParameter(hn.UNPACK_IMAGE_HEIGHT),iu=hn.getParameter(hn.UNPACK_SKIP_PIXELS),jl=hn.getParameter(hn.UNPACK_SKIP_ROWS),bh=hn.getParameter(hn.UNPACK_SKIP_IMAGES);hn.pixelStorei(hn.UNPACK_ROW_LENGTH,Ds.width),hn.pixelStorei(hn.UNPACK_IMAGE_HEIGHT,Ds.height),hn.pixelStorei(hn.UNPACK_SKIP_PIXELS,_s),hn.pixelStorei(hn.UNPACK_SKIP_ROWS,bs),hn.pixelStorei(hn.UNPACK_SKIP_IMAGES,ss);const Qo=en.isDataArrayTexture||en.isData3DTexture,yc=qn.isDataArrayTexture||qn.isData3DTexture;if(en.isDepthTexture){const vc=ci.get(en),io=ci.get(qn),Fl=ci.get(vc.__renderTarget),Cy=ci.get(io.__renderTarget);Kr.bindFramebuffer(hn.READ_FRAMEBUFFER,Fl.__webglFramebuffer),Kr.bindFramebuffer(hn.DRAW_FRAMEBUFFER,Cy.__webglFramebuffer);for(let Bo=0;Bo<ji;Bo++)Qo&&(hn.framebufferTextureLayer(hn.READ_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,ci.get(en).__webglTexture,Zn,ss+Bo),hn.framebufferTextureLayer(hn.DRAW_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,ci.get(qn).__webglTexture,ni,Uo+Bo)),hn.blitFramebuffer(_s,bs,Ei,Gi,no,Hs,Ei,Gi,hn.DEPTH_BUFFER_BIT,hn.NEAREST);Kr.bindFramebuffer(hn.READ_FRAMEBUFFER,null),Kr.bindFramebuffer(hn.DRAW_FRAMEBUFFER,null)}else if(0!==Zn||en.isRenderTargetTexture||ci.has(en)){const vc=ci.get(en),io=ci.get(qn);Kr.bindFramebuffer(hn.READ_FRAMEBUFFER,Q_),Kr.bindFramebuffer(hn.DRAW_FRAMEBUFFER,Wx);for(let Fl=0;Fl<ji;Fl++)Qo?hn.framebufferTextureLayer(hn.READ_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,vc.__webglTexture,Zn,ss+Fl):hn.framebufferTexture2D(hn.READ_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_2D,vc.__webglTexture,Zn),yc?hn.framebufferTextureLayer(hn.DRAW_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,io.__webglTexture,ni,Uo+Fl):hn.framebufferTexture2D(hn.DRAW_FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_2D,io.__webglTexture,ni),0!==Zn?hn.blitFramebuffer(_s,bs,Ei,Gi,no,Hs,Ei,Gi,hn.COLOR_BUFFER_BIT,hn.NEAREST):yc?hn.copyTexSubImage3D(No,ni,no,Hs,Uo+Fl,_s,bs,Ei,Gi):hn.copyTexSubImage2D(No,ni,no,Hs,_s,bs,Ei,Gi);Kr.bindFramebuffer(hn.READ_FRAMEBUFFER,null),Kr.bindFramebuffer(hn.DRAW_FRAMEBUFFER,null)}else yc?en.isDataTexture||en.isData3DTexture?hn.texSubImage3D(No,ni,no,Hs,Uo,Ei,Gi,ji,Ws,ts,Ds.data):qn.isCompressedArrayTexture?hn.compressedTexSubImage3D(No,ni,no,Hs,Uo,Ei,Gi,ji,Ws,Ds.data):hn.texSubImage3D(No,ni,no,Hs,Uo,Ei,Gi,ji,Ws,ts,Ds):en.isDataTexture?hn.texSubImage2D(hn.TEXTURE_2D,ni,no,Hs,Ei,Gi,Ws,ts,Ds.data):en.isCompressedTexture?hn.compressedTexSubImage2D(hn.TEXTURE_2D,ni,no,Hs,Ds.width,Ds.height,Ws,Ds.data):hn.texSubImage2D(hn.TEXTURE_2D,ni,no,Hs,Ei,Gi,Ws,ts,Ds);hn.pixelStorei(hn.UNPACK_ROW_LENGTH,ro),hn.pixelStorei(hn.UNPACK_IMAGE_HEIGHT,Lc),hn.pixelStorei(hn.UNPACK_SKIP_PIXELS,iu),hn.pixelStorei(hn.UNPACK_SKIP_ROWS,jl),hn.pixelStorei(hn.UNPACK_SKIP_IMAGES,bh),0===ni&&qn.generateMipmaps&&hn.generateMipmap(No),Kr.unbindTexture()},this.copyTextureToTexture3D=function(en,qn,dr=null,mr=null,Zn=0){return!0!==en.isTexture&&($a("WebGLRenderer: copyTextureToTexture3D function signature has changed."),dr=arguments[0]||null,mr=arguments[1]||null,en=arguments[2],qn=arguments[3],Zn=arguments[4]||0),$a('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(en,qn,dr,mr,Zn)},this.initRenderTarget=function(en){void 0===ci.get(en).__webglFramebuffer&&cn.setupRenderTarget(en)},this.initTexture=function(en){en.isCubeTexture?cn.setTextureCube(en,0):en.isData3DTexture?cn.setTexture3D(en,0):en.isDataArrayTexture||en.isCompressedArrayTexture?cn.setTexture2DArray(en,0):cn.setTexture2D(en,0),Kr.unbindTexture()},this.resetState=function(){At=0,zt=0,tn=null,Kr.reset(),Xo.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mt}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const r=this.getContext();r.drawingBufferColorspace=xs._getDrawingBufferColorSpace(t),r.unpackColorSpace=xs._getUnpackColorSpace()}}const __={type:"change"},cm={type:"start"},um={type:"end"},Id=new zo,b_=new Wc,gx=Math.cos(70*Fo_DEG2RAD),Za=new xt,Zl=2*Math.PI,py=1e-6;class my extends wE{constructor(t,r=null){super(t,r),this.state=-1,this.enabled=!0,this.target=new xt,this.cursor=new xt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new xt,this._lastQuaternion=new ln,this._lastTargetPosition=new xt,this._quat=(new ln).setFromUnitVectors(t.up,new xt(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Zv,this._sphericalDelta=new Zv,this._scale=1,this._panOffset=new xt,this._rotateStart=new pr,this._rotateEnd=new pr,this._rotateDelta=new pr,this._panStart=new pr,this._panEnd=new pr,this._panDelta=new pr,this._dollyStart=new pr,this._dollyEnd=new pr,this._dollyDelta=new pr,this._dollyDirection=new xt,this._mouse=new pr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=w_.bind(this),this._onPointerDown=Mf.bind(this),this._onPointerUp=x_.bind(this),this._onContextMenu=gy.bind(this),this._onMouseWheel=dm.bind(this),this._onKeyDown=eT.bind(this),this._onTouchStart=vx.bind(this),this._onTouchMove=S_.bind(this),this._onMouseDown=yx.bind(this),this._onMouseMove=Af.bind(this),this._interceptControlDown=_x.bind(this),this._interceptControlUp=E_.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(__),this.update(),this.state=-1}update(t=null){const r=this.object.position;Za.copy(r).sub(this.target),Za.applyQuaternion(this._quat),this._spherical.setFromVector3(Za),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,l=this.maxAzimuthAngle;isFinite(s)&&isFinite(l)&&(s<-Math.PI?s+=Zl:s>Math.PI&&(s-=Zl),l<-Math.PI?l+=Zl:l>Math.PI&&(l-=Zl),this._spherical.theta=s<=l?Math.max(s,Math.min(l,this._spherical.theta)):this._spherical.theta>(s+l)/2?Math.max(s,this._spherical.theta):Math.min(l,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let u=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const _=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),u=_!=this._spherical.radius}if(Za.setFromSpherical(this._spherical),Za.applyQuaternion(this._quatInverse),r.copy(this.target).add(Za),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let _=null;if(this.object.isPerspectiveCamera){const A=Za.length();_=this._clampDistance(A*this._scale);const O=A-_;this.object.position.addScaledVector(this._dollyDirection,O),this.object.updateMatrixWorld(),u=!!O}else if(this.object.isOrthographicCamera){const A=new xt(this._mouse.x,this._mouse.y,0);A.unproject(this.object);const O=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),u=O!==this.object.zoom;const B=new xt(this._mouse.x,this._mouse.y,0);B.unproject(this.object),this.object.position.sub(B).add(A),this.object.updateMatrixWorld(),_=Za.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==_&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(_).add(this.object.position):(Id.origin.copy(this.object.position),Id.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Id.direction))<gx?this.object.lookAt(this.target):(b_.setFromNormalAndCoplanarPoint(this.object.up,this.target),Id.intersectPlane(b_,this.target))))}else if(this.object.isOrthographicCamera){const _=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),_!==this.object.zoom&&(this.object.updateProjectionMatrix(),u=!0)}return this._scale=1,this._performCursorZoom=!1,!!(u||this._lastPosition.distanceToSquared(this.object.position)>py||8*(1-this._lastQuaternion.dot(this.object.quaternion))>py||this._lastTargetPosition.distanceToSquared(this.target)>py)&&(this.dispatchEvent(__),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?Zl/60*this.autoRotateSpeed*t:Zl/60/60*this.autoRotateSpeed}_getZoomScale(t){const r=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,r){Za.setFromMatrixColumn(r,0),Za.multiplyScalar(-t),this._panOffset.add(Za)}_panUp(t,r){!0===this.screenSpacePanning?Za.setFromMatrixColumn(r,1):(Za.setFromMatrixColumn(r,0),Za.crossVectors(this.object.up,Za)),Za.multiplyScalar(t),this._panOffset.add(Za)}_pan(t,r){const s=this.domElement;if(this.object.isPerspectiveCamera){Za.copy(this.object.position).sub(this.target);let u=Za.length();u*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*u/s.clientHeight,this.object.matrix),this._panUp(2*r*u/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),u=r-s.top,A=s.height;this._mouse.x=(t-s.left)/s.width*2-1,this._mouse.y=-u/A*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Zl*this._rotateDelta.x/r.clientHeight),this._rotateUp(Zl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let r=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0}r&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._rotateStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,l=t.pageY-r.y,u=Math.sqrt(s*s+l*l);this._dollyStart.set(0,u)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const s=this._getSecondPointerPosition(t);this._rotateEnd.set(.5*(t.pageX+s.x),.5*(t.pageY+s.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Zl*this._rotateDelta.x/r.clientHeight),this._rotateUp(Zl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panEnd.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,l=t.pageY-r.y,u=Math.sqrt(s*s+l*l);this._dollyEnd.set(0,u),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return void this._pointers.splice(r,1)}_isTrackingPointer(t){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return!0;return!1}_trackPointer(t){let r=this._pointerPositions[t.pointerId];void 0===r&&(r=new pr,this._pointerPositions[t.pointerId]=r),r.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){return this._pointerPositions[t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(t){const s={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(t.deltaMode){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function Mf(v){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(v.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(v)&&(this._addPointer(v),"touch"===v.pointerType?this._onTouchStart(v):this._onMouseDown(v)))}function w_(v){!1!==this.enabled&&("touch"===v.pointerType?this._onTouchMove(v):this._onMouseMove(v))}function x_(v){switch(this._removePointer(v),this._pointers.length){case 0:this.domElement.releasePointerCapture(v.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(um),this.state=-1;break;case 1:const t=this._pointers[0],r=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:r.x,pageY:r.y})}}function yx(v){let t;switch(v.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(v),this.state=1;break;case 0:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}break;case 2:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(cm)}function Af(v){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(v);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(v);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(v)}}function dm(v){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(v.preventDefault(),this.dispatchEvent(cm),this._handleMouseWheel(this._customWheelEvent(v)),this.dispatchEvent(um))}function eT(v){!1!==this.enabled&&this._handleKeyDown(v)}function vx(v){switch(this._trackPointer(v),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(v),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(v),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(v),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(v),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(cm)}function S_(v){switch(this._trackPointer(v),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(v),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(v),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(v),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(v),this.update();break;default:this.state=-1}}function gy(v){!1!==this.enabled&&v.preventDefault()}function _x(v){"Control"===v.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function E_(v){"Control"===v.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M_(v,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),v;if(2===t||1===t){let r=v.getIndex();if(null===r){const _=[],A=v.getAttribute("position");if(void 0===A)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),v;for(let O=0;O<A.count;O++)_.push(O);v.setIndex(_),r=v.getIndex()}const s=r.count-2,l=[];if(2===t)for(let _=1;_<=s;_++)l.push(r.getX(0)),l.push(r.getX(_)),l.push(r.getX(_+1));else for(let _=0;_<s;_++)_%2==0?(l.push(r.getX(_)),l.push(r.getX(_+1)),l.push(r.getX(_+2))):(l.push(r.getX(_+2)),l.push(r.getX(_+1)),l.push(r.getX(_)));l.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const u=v.clone();return u.setIndex(l),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),v}class xx extends aa{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Ex(r)}),this.register(function(r){return new mh(r)}),this.register(function(r){return new I_(r)}),this.register(function(r){return new hm(r)}),this.register(function(r){return new Rx(r)}),this.register(function(r){return new Tx(r)}),this.register(function(r){return new Mx(r)}),this.register(function(r){return new Ax(r)}),this.register(function(r){return new Cx(r)}),this.register(function(r){return new by(r)}),this.register(function(r){return new Dx(r)}),this.register(function(r){return new C_(r)}),this.register(function(r){return new Ix(r)}),this.register(function(r){return new D_(r)}),this.register(function(r){return new Cf(r)}),this.register(function(r){return new Px(r)}),this.register(function(r){return new R_(r)})}load(t,r,s,l){const u=this;let _;if(""!==this.resourcePath)_=this.resourcePath;else if(""!==this.path){const B=vu.extractUrlBase(t);_=vu.resolveURL(B,this.path)}else _=vu.extractUrlBase(t);this.manager.itemStart(t);const A=function(B){l?l(B):console.error(B),u.manager.itemError(t),u.manager.itemEnd(t)},O=new ic(this.manager);O.setPath(this.path),O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(t,function(B){try{u.parse(B,_,function(ee){r(ee),u.manager.itemEnd(t)},A)}catch(ee){A(ee)}},s,A)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,s,l){let u;const _={},A={},O=new TextDecoder;if("string"==typeof t)u=JSON.parse(t);else if(t instanceof ArrayBuffer)if(O.decode(new Uint8Array(t,0,4))===P_){try{_[Es.KHR_BINARY_GLTF]=new gh(t)}catch(ae){return void(l&&l(ae))}u=JSON.parse(_[Es.KHR_BINARY_GLTF].content)}else u=JSON.parse(O.decode(t));else u=t;if(void 0===u.asset||u.asset.version[0]<2)return void(l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const B=new jx(u,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});B.fileLoader.setRequestHeader(this.requestHeader);for(let ee=0;ee<this.pluginCallbacks.length;ee++){const ae=this.pluginCallbacks[ee](B);ae.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),A[ae.name]=ae,_[ae.name]=!0}if(u.extensionsUsed)for(let ee=0;ee<u.extensionsUsed.length;++ee){const ae=u.extensionsUsed[ee],pe=u.extensionsRequired||[];switch(ae){case Es.KHR_MATERIALS_UNLIT:_[ae]=new _y;break;case Es.KHR_DRACO_MESH_COMPRESSION:_[ae]=new If(u,this.dracoLoader);break;case Es.KHR_TEXTURE_TRANSFORM:_[ae]=new aT;break;case Es.KHR_MESH_QUANTIZATION:_[ae]=new O_;break;default:pe.indexOf(ae)>=0&&void 0===A[ae]&&console.warn('THREE.GLTFLoader: Unknown extension "'+ae+'".')}}B.setExtensions(_),B.setPlugins(A),B.parse(s,l)}parseAsync(t,r){const s=this;return new Promise(function(l,u){s.parse(t,r,l,u)})}}function Sx(){let v={};return{get:function(t){return v[t]},add:function(t,r){v[t]=r},remove:function(t){delete v[t]},removeAll:function(){v={}}}}const Es={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Cf{constructor(t){this.parser=t,this.name=Es.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let s=0,l=r.length;s<l;s++){const u=r[s];u.extensions&&u.extensions[this.name]&&void 0!==u.extensions[this.name].light&&t._addNodeRef(this.cache,u.extensions[this.name].light)}}_loadLight(t){const r=this.parser,s="light:"+t;let l=r.cache.get(s);if(l)return l;const u=r.json,O=((u.extensions&&u.extensions[this.name]||{}).lights||[])[t];let B;const ee=new Nr(16777215);void 0!==O.color&&ee.setRGB(O.color[0],O.color[1],O.color[2],ns);const ae=void 0!==O.range?O.range:0;switch(O.type){case"directional":B=new Lv(ee),B.target.position.set(0,0,-1),B.add(B.target);break;case"point":B=new u1(ee),B.distance=ae;break;case"spot":B=new Ov(ee),B.distance=ae,O.spot=O.spot||{},O.spot.innerConeAngle=void 0!==O.spot.innerConeAngle?O.spot.innerConeAngle:0,O.spot.outerConeAngle=void 0!==O.spot.outerConeAngle?O.spot.outerConeAngle:Math.PI/4,B.angle=O.spot.outerConeAngle,B.penumbra=1-O.spot.innerConeAngle/O.spot.outerConeAngle,B.target.position.set(0,0,-1),B.add(B.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+O.type)}return B.position.set(0,0,0),va(B,O),void 0!==O.intensity&&(B.intensity=O.intensity),B.name=r.createUniqueName(O.name||"light_"+t),l=Promise.resolve(B),r.cache.add(s,l),l}getDependency(t,r){if("light"===t)return this._loadLight(r)}createNodeAttachment(t){const r=this,s=this.parser,u=s.json.nodes[t],A=(u.extensions&&u.extensions[this.name]||{}).light;return void 0===A?null:this._loadLight(A).then(function(O){return s._getNodeRef(r.cache,A,O)})}}class _y{constructor(){this.name=Es.KHR_MATERIALS_UNLIT}getMaterialType(){return Co}extendParams(t,r,s){const l=[];t.color=new Nr(1,1,1),t.opacity=1;const u=r.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){const _=u.baseColorFactor;t.color.setRGB(_[0],_[1],_[2],ns),t.opacity=_[3]}void 0!==u.baseColorTexture&&l.push(s.assignTexture(t,"map",u.baseColorTexture,Vi))}return Promise.all(l)}}class by{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name].emissiveStrength;return void 0!==u&&(r.emissiveIntensity=u),Promise.resolve()}}class Ex{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];if(void 0!==_.clearcoatFactor&&(r.clearcoat=_.clearcoatFactor),void 0!==_.clearcoatTexture&&u.push(s.assignTexture(r,"clearcoatMap",_.clearcoatTexture)),void 0!==_.clearcoatRoughnessFactor&&(r.clearcoatRoughness=_.clearcoatRoughnessFactor),void 0!==_.clearcoatRoughnessTexture&&u.push(s.assignTexture(r,"clearcoatRoughnessMap",_.clearcoatRoughnessTexture)),void 0!==_.clearcoatNormalTexture&&(u.push(s.assignTexture(r,"clearcoatNormalMap",_.clearcoatNormalTexture)),void 0!==_.clearcoatNormalTexture.scale)){const A=_.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new pr(A,A)}return Promise.all(u)}}class mh{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name];return r.dispersion=void 0!==u.dispersion?u.dispersion:0,Promise.resolve()}}class C_{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];return void 0!==_.iridescenceFactor&&(r.iridescence=_.iridescenceFactor),void 0!==_.iridescenceTexture&&u.push(s.assignTexture(r,"iridescenceMap",_.iridescenceTexture)),void 0!==_.iridescenceIor&&(r.iridescenceIOR=_.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==_.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=_.iridescenceThicknessMinimum),void 0!==_.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=_.iridescenceThicknessMaximum),void 0!==_.iridescenceThicknessTexture&&u.push(s.assignTexture(r,"iridescenceThicknessMap",_.iridescenceThicknessTexture)),Promise.all(u)}}class Tx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[];r.sheenColor=new Nr(0,0,0),r.sheenRoughness=0,r.sheen=1;const _=l.extensions[this.name];if(void 0!==_.sheenColorFactor){const A=_.sheenColorFactor;r.sheenColor.setRGB(A[0],A[1],A[2],ns)}return void 0!==_.sheenRoughnessFactor&&(r.sheenRoughness=_.sheenRoughnessFactor),void 0!==_.sheenColorTexture&&u.push(s.assignTexture(r,"sheenColorMap",_.sheenColorTexture,Vi)),void 0!==_.sheenRoughnessTexture&&u.push(s.assignTexture(r,"sheenRoughnessMap",_.sheenRoughnessTexture)),Promise.all(u)}}class Mx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];return void 0!==_.transmissionFactor&&(r.transmission=_.transmissionFactor),void 0!==_.transmissionTexture&&u.push(s.assignTexture(r,"transmissionMap",_.transmissionTexture)),Promise.all(u)}}class Ax{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];r.thickness=void 0!==_.thicknessFactor?_.thicknessFactor:0,void 0!==_.thicknessTexture&&u.push(s.assignTexture(r,"thicknessMap",_.thicknessTexture)),r.attenuationDistance=_.attenuationDistance||1/0;const A=_.attenuationColor||[1,1,1];return r.attenuationColor=(new Nr).setRGB(A[0],A[1],A[2],ns),Promise.all(u)}}class Cx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name];return r.ior=void 0!==u.ior?u.ior:1.5,Promise.resolve()}}class Dx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];r.specularIntensity=void 0!==_.specularFactor?_.specularFactor:1,void 0!==_.specularTexture&&u.push(s.assignTexture(r,"specularIntensityMap",_.specularTexture));const A=_.specularColorFactor||[1,1,1];return r.specularColor=(new Nr).setRGB(A[0],A[1],A[2],ns),void 0!==_.specularColorTexture&&u.push(s.assignTexture(r,"specularColorMap",_.specularColorTexture,Vi)),Promise.all(u)}}class D_{constructor(t){this.parser=t,this.name=Es.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];return r.bumpScale=void 0!==_.bumpFactor?_.bumpFactor:1,void 0!==_.bumpTexture&&u.push(s.assignTexture(r,"bumpMap",_.bumpTexture)),Promise.all(u)}}class Ix{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],_=l.extensions[this.name];return void 0!==_.anisotropyStrength&&(r.anisotropy=_.anisotropyStrength),void 0!==_.anisotropyRotation&&(r.anisotropyRotation=_.anisotropyRotation),void 0!==_.anisotropyTexture&&u.push(s.assignTexture(r,"anisotropyMap",_.anisotropyTexture)),Promise.all(u)}}class I_{constructor(t){this.parser=t,this.name=Es.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,s=r.json,l=s.textures[t];if(!l.extensions||!l.extensions[this.name])return null;const u=l.extensions[this.name],_=r.options.ktx2Loader;if(!_){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,u.source,_)}}class hm{constructor(t){this.parser=t,this.name=Es.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,l=s.json,u=l.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],A=l.images[_.source];let O=s.textureLoader;if(A.uri){const B=s.options.manager.getHandler(A.uri);null!==B&&(O=B)}return this.detectSupport().then(function(B){if(B)return s.loadTextureImage(t,_.source,O);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Rx{constructor(t){this.parser=t,this.name=Es.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,l=s.json,u=l.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],A=l.images[_.source];let O=s.textureLoader;if(A.uri){const B=s.options.manager.getHandler(A.uri);null!==B&&(O=B)}return this.detectSupport().then(function(B){if(B)return s.loadTextureImage(t,_.source,O);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Px{constructor(t){this.name=Es.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,s=r.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const l=s.extensions[this.name],u=this.parser.getDependency("buffer",l.buffer),_=this.parser.options.meshoptDecoder;if(!_||!_.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return u.then(function(A){const ee=l.count,ae=l.byteStride,pe=new Uint8Array(A,l.byteOffset||0,l.byteLength||0);return _.decodeGltfBufferAsync?_.decodeGltfBufferAsync(ee,ae,pe,l.mode,l.filter).then(function(_e){return _e.buffer}):_.ready.then(function(){const _e=new ArrayBuffer(ee*ae);return _.decodeGltfBuffer(new Uint8Array(_e),ee,ae,pe,l.mode,l.filter),_e})})}return null}}class R_{constructor(t){this.name=Es.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,s=r.nodes[t];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;const l=r.meshes[s.mesh];for(const B of l.primitives)if(B.mode!==ac.TRIANGLES&&B.mode!==ac.TRIANGLE_STRIP&&B.mode!==ac.TRIANGLE_FAN&&void 0!==B.mode)return null;const _=s.extensions[this.name].attributes,A=[],O={};for(const B in _)A.push(this.parser.getDependency("accessor",_[B]).then(ee=>(O[B]=ee,O[B])));return A.length<1?null:(A.push(this.parser.createNodeMesh(t)),Promise.all(A).then(B=>{const ee=B.pop(),ae=ee.isGroup?ee.children:[ee],pe=B[0].count,_e=[];for(const Re of ae){const Ue=new Li,Le=new xt,Pe=new ln,ht=new xt(1,1,1),ut=new Bb(Re.geometry,Re.material,pe);for(let st=0;st<pe;st++)O.TRANSLATION&&Le.fromBufferAttribute(O.TRANSLATION,st),O.ROTATION&&Pe.fromBufferAttribute(O.ROTATION,st),O.SCALE&&ht.fromBufferAttribute(O.SCALE,st),ut.setMatrixAt(st,Ue.compose(Le,Pe,ht));for(const st in O)if("_COLOR_0"===st){const Yt=O[st];ut.instanceColor=new Ih(Yt.array,Yt.itemSize,Yt.normalized)}else"TRANSLATION"!==st&&"ROTATION"!==st&&"SCALE"!==st&&Re.geometry.setAttribute(st,O[st]);Eo.prototype.copy.call(ut,Re),this.parser.assignFinalMaterial(ut),_e.push(ut)}return ee.isGroup?(ee.clear(),ee.add(..._e),ee):_e[0]}))}}const P_="glTF";class gh{constructor(t){this.name=Es.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,12),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==P_)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-12,u=new DataView(t,12);let _=0;for(;_<l;){const A=u.getUint32(_,!0);_+=4;const O=u.getUint32(_,!0);if(_+=4,1313821514===O){const B=new Uint8Array(t,12+_,A);this.content=s.decode(B)}else if(5130562===O){const B=12+_;this.body=t.slice(B,B+A)}_+=A}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class If{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Es.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const s=this.json,l=this.dracoLoader,u=t.extensions[this.name].bufferView,_=t.extensions[this.name].attributes,A={},O={},B={};for(const ee in _){const ae=wy[ee]||ee.toLowerCase();A[ae]=_[ee]}for(const ee in t.attributes){const ae=wy[ee]||ee.toLowerCase();if(void 0!==_[ee]){const pe=s.accessors[t.attributes[ee]];B[ae]=Rf[pe.componentType].name,O[ae]=!0===pe.normalized}}return r.getDependency("bufferView",u).then(function(ee){return new Promise(function(ae,pe){l.decodeDracoFile(ee,function(_e){for(const Re in _e.attributes){const Le=O[Re];void 0!==Le&&(_e.attributes[Re].normalized=Le)}ae(_e)},A,B,ns,pe)})})}}class aT{constructor(){this.name=Es.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(void 0===r.texCoord||r.texCoord===t.channel)&&void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.texCoord&&(t.channel=r.texCoord),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class O_{constructor(){this.name=Es.KHR_MESH_QUANTIZATION}}class L_ extends Kh{constructor(t,r,s,l){super(t,r,s,l)}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=t*l*3+l;for(let _=0;_!==l;_++)r[_]=s[u+_];return r}interpolate_(t,r,s,l){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,O=2*A,B=3*A,ee=l-r,ae=(s-r)/ee,pe=ae*ae,_e=pe*ae,Re=t*B,Ue=Re-B,Le=-2*_e+3*pe,Pe=_e-pe,ht=1-Le,ut=Pe-pe+ae;for(let st=0;st!==A;st++)u[st]=ht*_[Ue+st+A]+ut*(_[Ue+st+O]*ee)+Le*_[Re+st+A]+Pe*(_[Re+st]*ee);return u}}const k_=new ln;class Ox extends L_{interpolate_(t,r,s,l){const u=super.interpolate_(t,r,s,l);return k_.fromArray(u).normalize().toArray(u),u}}const ac={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Rf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N_={9728:mn,9729:Cn,9984:1004,9985:1007,9986:fn,9987:fr},yh={33071:Tn,33648:1002,10497:un},Pf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wy={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lx={CUBICSPLINE:void 0,LINEAR:Vo,STEP:Ro};function La(v,t,r){for(const s in r.extensions)void 0===v[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=r.extensions[s])}function va(v,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(v.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xy(v,t){if(v.updateMorphTargets(),void 0!==t.weights)for(let r=0,s=t.weights.length;r<s;r++)v.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(v.morphTargetInfluences.length===r.length){v.morphTargetDictionary={};for(let s=0,l=r.length;s<l;s++)v.morphTargetDictionary[r[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function kx(v){let t;const r=v.extensions&&v.extensions[Es.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+fm(r.attributes):v.indices+":"+fm(v.attributes)+":"+v.mode,void 0!==v.targets)for(let s=0,l=v.targets.length;s<l;s++)t+=":"+fm(v.targets[s]);return t}function fm(v){let t="";const r=Object.keys(v).sort();for(let s=0,l=r.length;s<l;s++)t+=r[s]+":"+v[r[s]]+";";return t}function Sy(v){switch(v){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Nx=new Li;class jx{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Sx,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,l=-1,u=!1,_=-1;if(typeof navigator<"u"){const A=navigator.userAgent;s=!0===/^((?!chrome|android).)*safari/i.test(A);const O=A.match(/Version\/(\d+)/);l=s&&O?parseInt(O[1],10):-1,u=A.indexOf("Firefox")>-1,_=u?A.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||s&&l<17||u&&_<98?new c1(this.options.manager):new Sg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ic(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const s=this,l=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(_){return _._markDefs&&_._markDefs()}),Promise.all(this._invokeAll(function(_){return _.beforeRoot&&_.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(_){const A={scene:_[0][l.scene||0],scenes:_[0],animations:_[1],cameras:_[2],asset:l.asset,parser:s,userData:{}};return La(u,A,l),va(A,l),Promise.all(s._invokeAll(function(O){return O.afterRoot&&O.afterRoot(A)})).then(function(){for(const O of A.scenes)O.updateMatrixWorld();t(A)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],s=this.json.meshes||[];for(let l=0,u=r.length;l<u;l++){const _=r[l].joints;for(let A=0,O=_.length;A<O;A++)t[_[A]].isBone=!0}for(let l=0,u=t.length;l<u;l++){const _=t[l];void 0!==_.mesh&&(this._addNodeRef(this.meshCache,_.mesh),void 0!==_.skin&&(s[_.mesh].isSkinnedMesh=!0)),void 0!==_.camera&&this._addNodeRef(this.cameraCache,_.camera)}}_addNodeRef(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,s){if(t.refs[r]<=1)return s;const l=s.clone(),u=(_,A)=>{const O=this.associations.get(_);null!=O&&this.associations.set(A,O);for(const[B,ee]of _.children.entries())u(ee,A.children[B])};return u(s,l),l.name+="_instance_"+t.uses[r]++,l}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let s=0;s<r.length;s++){const l=t(r[s]);if(l)return l}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const s=[];for(let l=0;l<r.length;l++){const u=t(r[l]);u&&s.push(u)}return s}getDependency(t,r){const s=t+":"+r;let l=this.cache.get(s);if(!l){switch(t){case"scene":l=this.loadScene(r);break;case"node":l=this._invokeOne(function(u){return u.loadNode&&u.loadNode(r)});break;case"mesh":l=this._invokeOne(function(u){return u.loadMesh&&u.loadMesh(r)});break;case"accessor":l=this.loadAccessor(r);break;case"bufferView":l=this._invokeOne(function(u){return u.loadBufferView&&u.loadBufferView(r)});break;case"buffer":l=this.loadBuffer(r);break;case"material":l=this._invokeOne(function(u){return u.loadMaterial&&u.loadMaterial(r)});break;case"texture":l=this._invokeOne(function(u){return u.loadTexture&&u.loadTexture(r)});break;case"skin":l=this.loadSkin(r);break;case"animation":l=this._invokeOne(function(u){return u.loadAnimation&&u.loadAnimation(r)});break;case"camera":l=this.loadCamera(r);break;default:if(l=this._invokeOne(function(u){return u!=this&&u.getDependency&&u.getDependency(t,r)}),!l)throw new Error("Unknown type: "+t)}this.cache.add(s,l)}return l}getDependencies(t){let r=this.cache.get(t);if(!r){const s=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(u,_){return s.getDependency(t,_)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],s=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[Es.KHR_BINARY_GLTF].body);const l=this.options;return new Promise(function(u,_){s.load(vu.resolveURL(r.uri,l.path),u,void 0,function(){_(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(s){const u=r.byteOffset||0;return s.slice(u,u+(r.byteLength||0))})}loadAccessor(t){const r=this,s=this.json,l=this.json.accessors[t];if(void 0===l.bufferView&&void 0===l.sparse){const _=Pf[l.type],O=!0===l.normalized,B=new(0,Rf[l.componentType])(l.count*_);return Promise.resolve(new to(B,_,O))}const u=[];return u.push(void 0!==l.bufferView?this.getDependency("bufferView",l.bufferView):null),void 0!==l.sparse&&(u.push(this.getDependency("bufferView",l.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",l.sparse.values.bufferView))),Promise.all(u).then(function(_){const A=_[0],O=Pf[l.type],B=Rf[l.componentType],ee=B.BYTES_PER_ELEMENT,pe=l.byteOffset||0,_e=void 0!==l.bufferView?s.bufferViews[l.bufferView].byteStride:void 0,Re=!0===l.normalized;let Ue,Le;if(_e&&_e!==ee*O){const Pe=Math.floor(pe/_e),ht="InterleavedBuffer:"+l.bufferView+":"+l.componentType+":"+Pe+":"+l.count;let ut=r.cache.get(ht);ut||(Ue=new B(A,Pe*_e,l.count*_e/ee),ut=new zc(Ue,_e/ee),r.cache.add(ht,ut)),Le=new _l(ut,O,pe%_e/ee,Re)}else Ue=null===A?new B(l.count*O):new B(A,pe,l.count*O),Le=new to(Ue,O,Re);if(void 0!==l.sparse){const st=l.sparse.values.byteOffset||0,Yt=new(0,Rf[l.sparse.indices.componentType])(_[1],l.sparse.indices.byteOffset||0,l.sparse.count*Pf.SCALAR),At=new B(_[2],st,l.sparse.count*O);null!==A&&(Le=new to(Le.array.slice(),Le.itemSize,Le.normalized)),Le.normalized=!1;for(let zt=0,tn=Yt.length;zt<tn;zt++){const Pt=Yt[zt];if(Le.setX(Pt,At[zt*O]),O>=2&&Le.setY(Pt,At[zt*O+1]),O>=3&&Le.setZ(Pt,At[zt*O+2]),O>=4&&Le.setW(Pt,At[zt*O+3]),O>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Le.normalized=Re}return Le})}loadTexture(t){const r=this.json,u=r.textures[t].source,_=r.images[u];let A=this.textureLoader;if(_.uri){const O=this.options.manager.getHandler(_.uri);null!==O&&(A=O)}return this.loadTextureImage(t,u,A)}loadTextureImage(t,r,s){const l=this,u=this.json,_=u.textures[t],A=u.images[r],O=(A.uri||A.bufferView)+":"+_.sampler;if(this.textureCache[O])return this.textureCache[O];const B=this.loadImageSource(r,s).then(function(ee){ee.flipY=!1,ee.name=_.name||A.name||"",""===ee.name&&"string"==typeof A.uri&&!1===A.uri.startsWith("data:image/")&&(ee.name=A.uri);const pe=(u.samplers||{})[_.sampler]||{};return ee.magFilter=N_[pe.magFilter]||Cn,ee.minFilter=N_[pe.minFilter]||fr,ee.wrapS=yh[pe.wrapS]||un,ee.wrapT=yh[pe.wrapT]||un,ee.generateMipmaps=!ee.isCompressedTexture&&ee.minFilter!==mn&&ee.minFilter!==Cn,l.associations.set(ee,{textures:t}),ee}).catch(function(){return null});return this.textureCache[O]=B,B}loadImageSource(t,r){const l=this.json,u=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(ae=>ae.clone());const _=l.images[t],A=self.URL||self.webkitURL;let O=_.uri||"",B=!1;if(void 0!==_.bufferView)O=this.getDependency("bufferView",_.bufferView).then(function(ae){B=!0;const pe=new Blob([ae],{type:_.mimeType});return O=A.createObjectURL(pe),O});else if(void 0===_.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const ee=Promise.resolve(O).then(function(ae){return new Promise(function(pe,_e){let Re=pe;!0===r.isImageBitmapLoader&&(Re=function(Ue){const Le=new _o(Ue);Le.needsUpdate=!0,pe(Le)}),r.load(vu.resolveURL(ae,u.path),Re,void 0,_e)})}).then(function(ae){return!0===B&&A.revokeObjectURL(O),va(ae,_),ae.userData.mimeType=_.mimeType||function B_(v){return v.search(/\.jpe?g($|\?)/i)>0||0===v.search(/^data\:image\/jpeg/)?"image/jpeg":v.search(/\.webp($|\?)/i)>0||0===v.search(/^data\:image\/webp/)?"image/webp":v.search(/\.ktx2($|\?)/i)>0||0===v.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(_.uri),ae}).catch(function(ae){throw console.error("THREE.GLTFLoader: Couldn't load texture",O),ae});return this.sourceCache[t]=ee,ee}assignTexture(t,r,s,l){const u=this;return this.getDependency("texture",s.index).then(function(_){if(!_)return null;if(void 0!==s.texCoord&&s.texCoord>0&&((_=_.clone()).channel=s.texCoord),u.extensions[Es.KHR_TEXTURE_TRANSFORM]){const A=void 0!==s.extensions?s.extensions[Es.KHR_TEXTURE_TRANSFORM]:void 0;if(A){const O=u.associations.get(_);_=u.extensions[Es.KHR_TEXTURE_TRANSFORM].extendTexture(_,A),u.associations.set(_,O)}}return void 0!==l&&(_.colorSpace=l),t[r]=_,_})}assignFinalMaterial(t){const r=t.geometry;let s=t.material;const l=void 0===r.attributes.tangent,u=void 0!==r.attributes.color,_=void 0===r.attributes.normal;if(t.isPoints){const A="PointsMaterial:"+s.uuid;let O=this.cache.get(A);O||(O=new Vu,Zs.prototype.copy.call(O,s),O.color.copy(s.color),O.map=s.map,O.sizeAttenuation=!1,this.cache.add(A,O)),s=O}else if(t.isLine){const A="LineBasicMaterial:"+s.uuid;let O=this.cache.get(A);O||(O=new ol,Zs.prototype.copy.call(O,s),O.color.copy(s.color),O.map=s.map,this.cache.add(A,O)),s=O}if(l||u||_){let A="ClonedMaterial:"+s.uuid+":";l&&(A+="derivative-tangents:"),u&&(A+="vertex-colors:"),_&&(A+="flat-shading:");let O=this.cache.get(A);O||(O=s.clone(),u&&(O.vertexColors=!0),_&&(O.flatShading=!0),l&&(O.normalScale&&(O.normalScale.y*=-1),O.clearcoatNormalScale&&(O.clearcoatNormalScale.y*=-1)),this.cache.add(A,O),this.associations.set(O,this.associations.get(s))),s=O}t.material=s}getMaterialType(){return ga}loadMaterial(t){const r=this,l=this.extensions,u=this.json.materials[t];let _;const A={},B=[];if((u.extensions||{})[Es.KHR_MATERIALS_UNLIT]){const ae=l[Es.KHR_MATERIALS_UNLIT];_=ae.getMaterialType(),B.push(ae.extendParams(A,u,r))}else{const ae=u.pbrMetallicRoughness||{};if(A.color=new Nr(1,1,1),A.opacity=1,Array.isArray(ae.baseColorFactor)){const pe=ae.baseColorFactor;A.color.setRGB(pe[0],pe[1],pe[2],ns),A.opacity=pe[3]}void 0!==ae.baseColorTexture&&B.push(r.assignTexture(A,"map",ae.baseColorTexture,Vi)),A.metalness=void 0!==ae.metallicFactor?ae.metallicFactor:1,A.roughness=void 0!==ae.roughnessFactor?ae.roughnessFactor:1,void 0!==ae.metallicRoughnessTexture&&(B.push(r.assignTexture(A,"metalnessMap",ae.metallicRoughnessTexture)),B.push(r.assignTexture(A,"roughnessMap",ae.metallicRoughnessTexture))),_=this._invokeOne(function(pe){return pe.getMaterialType&&pe.getMaterialType(t)}),B.push(Promise.all(this._invokeAll(function(pe){return pe.extendMaterialParams&&pe.extendMaterialParams(t,A)})))}!0===u.doubleSided&&(A.side=2);const ee=u.alphaMode||"OPAQUE";if("BLEND"===ee?(A.transparent=!0,A.depthWrite=!1):(A.transparent=!1,"MASK"===ee&&(A.alphaTest=void 0!==u.alphaCutoff?u.alphaCutoff:.5)),void 0!==u.normalTexture&&_!==Co&&(B.push(r.assignTexture(A,"normalMap",u.normalTexture)),A.normalScale=new pr(1,1),void 0!==u.normalTexture.scale)){const ae=u.normalTexture.scale;A.normalScale.set(ae,ae)}if(void 0!==u.occlusionTexture&&_!==Co&&(B.push(r.assignTexture(A,"aoMap",u.occlusionTexture)),void 0!==u.occlusionTexture.strength&&(A.aoMapIntensity=u.occlusionTexture.strength)),void 0!==u.emissiveFactor&&_!==Co){const ae=u.emissiveFactor;A.emissive=(new Nr).setRGB(ae[0],ae[1],ae[2],ns)}return void 0!==u.emissiveTexture&&_!==Co&&B.push(r.assignTexture(A,"emissiveMap",u.emissiveTexture,Vi)),Promise.all(B).then(function(){const ae=new _(A);return u.name&&(ae.name=u.name),va(ae,u),r.associations.set(ae,{materials:t}),u.extensions&&La(l,ae,u),ae})}createUniqueName(t){const r=Wo.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,s=this.extensions,l=this.primitiveCache;function u(A){return s[Es.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(A,r).then(function(O){return mm(O,A,r)})}const _=[];for(let A=0,O=t.length;A<O;A++){const B=t[A],ee=kx(B),ae=l[ee];if(ae)_.push(ae.promise);else{let pe;pe=B.extensions&&B.extensions[Es.KHR_DRACO_MESH_COMPRESSION]?u(B):mm(new gs,B,r),l[ee]={primitive:B,promise:pe},_.push(pe)}}return Promise.all(_)}loadMesh(t){const r=this,l=this.extensions,u=this.json.meshes[t],_=u.primitives,A=[];for(let O=0,B=_.length;O<B;O++){const ee=void 0===_[O].material?(void 0===(v=this.cache).DefaultMaterial&&(v.DefaultMaterial=new ga({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),v.DefaultMaterial):this.getDependency("material",_[O].material);A.push(ee)}var v;return A.push(r.loadGeometries(_)),Promise.all(A).then(function(O){const B=O.slice(0,O.length-1),ee=O[O.length-1],ae=[];for(let _e=0,Re=ee.length;_e<Re;_e++){const Ue=ee[_e],Le=_[_e];let Pe;const ht=B[_e];if(Le.mode===ac.TRIANGLES||Le.mode===ac.TRIANGLE_STRIP||Le.mode===ac.TRIANGLE_FAN||void 0===Le.mode)Pe=!0===u.isSkinnedMesh?new jb(Ue,ht):new Ps(Ue,ht),!0===Pe.isSkinnedMesh&&Pe.normalizeSkinWeights(),Le.mode===ac.TRIANGLE_STRIP?Pe.geometry=M_(Pe.geometry,1):Le.mode===ac.TRIANGLE_FAN&&(Pe.geometry=M_(Pe.geometry,2));else if(Le.mode===ac.LINES)Pe=new Nl(Ue,ht);else if(Le.mode===ac.LINE_STRIP)Pe=new Ec(Ue,ht);else if(Le.mode===ac.LINE_LOOP)Pe=new ip(Ue,ht);else{if(Le.mode!==ac.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Le.mode);Pe=new Xd(Ue,ht)}Object.keys(Pe.geometry.morphAttributes).length>0&&xy(Pe,u),Pe.name=r.createUniqueName(u.name||"mesh_"+t),va(Pe,u),Le.extensions&&La(l,Pe,Le),r.assignFinalMaterial(Pe),ae.push(Pe)}for(let _e=0,Re=ae.length;_e<Re;_e++)r.associations.set(ae[_e],{meshes:t,primitives:_e});if(1===ae.length)return u.extensions&&La(l,ae[0],u),ae[0];const pe=new sl;u.extensions&&La(l,pe,u),r.associations.set(pe,{meshes:t});for(let _e=0,Re=ae.length;_e<Re;_e++)pe.add(ae[_e]);return pe})}loadCamera(t){let r;const s=this.json.cameras[t],l=s[s.type];if(l)return"perspective"===s.type?r=new Lo(Fo_radToDeg(l.yfov),l.aspectRatio||1,l.znear||1,l.zfar||2e6):"orthographic"===s.type&&(r=new wg(-l.xmag,l.xmag,l.ymag,-l.ymag,l.znear,l.zfar)),s.name&&(r.name=this.createUniqueName(s.name)),va(r,s),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const r=this.json.skins[t],s=[];for(let l=0,u=r.joints.length;l<u;l++)s.push(this._loadNodeShallow(r.joints[l]));return s.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(s).then(function(l){const u=l.pop(),_=l,A=[],O=[];for(let B=0,ee=_.length;B<ee;B++){const ae=_[B];if(ae){A.push(ae);const pe=new Li;null!==u&&pe.fromArray(u.array,16*B),O.push(pe)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[B])}return new Wm(A,O)})}loadAnimation(t){const s=this,l=this.json.animations[t],u=l.name?l.name:"animation_"+t,_=[],A=[],O=[],B=[],ee=[];for(let ae=0,pe=l.channels.length;ae<pe;ae++){const _e=l.channels[ae],Re=l.samplers[_e.sampler],Ue=_e.target,Pe=void 0!==l.parameters?l.parameters[Re.input]:Re.input,ht=void 0!==l.parameters?l.parameters[Re.output]:Re.output;void 0!==Ue.node&&(_.push(this.getDependency("node",Ue.node)),A.push(this.getDependency("accessor",Pe)),O.push(this.getDependency("accessor",ht)),B.push(Re),ee.push(Ue))}return Promise.all([Promise.all(_),Promise.all(A),Promise.all(O),Promise.all(B),Promise.all(ee)]).then(function(ae){const pe=ae[0],_e=ae[1],Re=ae[2],Ue=ae[3],Le=ae[4],Pe=[];for(let ht=0,ut=pe.length;ht<ut;ht++){const st=pe[ht],Yt=_e[ht],At=Re[ht],zt=Ue[ht],tn=Le[ht];if(void 0===st)continue;st.updateMatrix&&st.updateMatrix();const Pt=s._createAnimationTracks(st,Yt,At,zt,tn);if(Pt)for(let Tt=0;Tt<Pt.length;Tt++)Pe.push(Pt[Tt])}return new gu(u,void 0,Pe)})}createNodeMesh(t){const s=this,l=this.json.nodes[t];return void 0===l.mesh?null:s.getDependency("mesh",l.mesh).then(function(u){const _=s._getNodeRef(s.meshCache,l.mesh,u);return void 0!==l.weights&&_.traverse(function(A){if(A.isMesh)for(let O=0,B=l.weights.length;O<B;O++)A.morphTargetInfluences[O]=l.weights[O]}),_})}loadNode(t){const s=this,l=this.json.nodes[t],u=s._loadNodeShallow(t),_=[],A=l.children||[];for(let B=0,ee=A.length;B<ee;B++)_.push(s.getDependency("node",A[B]));const O=void 0===l.skin?Promise.resolve(null):s.getDependency("skin",l.skin);return Promise.all([u,Promise.all(_),O]).then(function(B){const ee=B[0],ae=B[1],pe=B[2];null!==pe&&ee.traverse(function(_e){_e.isSkinnedMesh&&_e.bind(pe,Nx)});for(let _e=0,Re=ae.length;_e<Re;_e++)ee.add(ae[_e]);return ee})}_loadNodeShallow(t){const s=this.extensions,l=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const u=this.json.nodes[t],_=u.name?l.createUniqueName(u.name):"",A=[],O=l._invokeOne(function(B){return B.createNodeMesh&&B.createNodeMesh(t)});return O&&A.push(O),void 0!==u.camera&&A.push(l.getDependency("camera",u.camera).then(function(B){return l._getNodeRef(l.cameraCache,u.camera,B)})),l._invokeAll(function(B){return B.createNodeAttachment&&B.createNodeAttachment(t)}).forEach(function(B){A.push(B)}),this.nodeCache[t]=Promise.all(A).then(function(B){let ee;if(ee=!0===u.isBone?new tv:B.length>1?new sl:1===B.length?B[0]:new Eo,ee!==B[0])for(let ae=0,pe=B.length;ae<pe;ae++)ee.add(B[ae]);if(u.name&&(ee.userData.name=u.name,ee.name=_),va(ee,u),u.extensions&&La(s,ee,u),void 0!==u.matrix){const ae=new Li;ae.fromArray(u.matrix),ee.applyMatrix4(ae)}else void 0!==u.translation&&ee.position.fromArray(u.translation),void 0!==u.rotation&&ee.quaternion.fromArray(u.rotation),void 0!==u.scale&&ee.scale.fromArray(u.scale);return l.associations.has(ee)||l.associations.set(ee,{}),l.associations.get(ee).nodes=t,ee}),this.nodeCache[t]}loadScene(t){const r=this.extensions,s=this.json.scenes[t],l=this,u=new sl;s.name&&(u.name=l.createUniqueName(s.name)),va(u,s),s.extensions&&La(r,u,s);const _=s.nodes||[],A=[];for(let O=0,B=_.length;O<B;O++)A.push(l.getDependency("node",_[O]));return Promise.all(A).then(function(O){for(let ee=0,ae=O.length;ee<ae;ee++)u.add(O[ee]);return l.associations=(ee=>{const ae=new Map;for(const[pe,_e]of l.associations)(pe instanceof Zs||pe instanceof _o)&&ae.set(pe,_e);return ee.traverse(pe=>{const _e=l.associations.get(pe);null!=_e&&ae.set(pe,_e)}),ae})(u),u})}_createAnimationTracks(t,r,s,l,u){const _=[],A=t.name?t.name:t.uuid,O=[];let B;switch(Qu[u.path]===Qu.weights?t.traverse(function(pe){pe.morphTargetInfluences&&O.push(pe.name?pe.name:pe.uuid)}):O.push(A),Qu[u.path]){case Qu.weights:B=rh;break;case Qu.rotation:B=yd;break;case Qu.position:case Qu.scale:B=$u;break;default:B=1===s.itemSize?rh:$u}const ee=void 0!==l.interpolation?Lx[l.interpolation]:Vo,ae=this._getArrayFromAccessor(s);for(let pe=0,_e=O.length;pe<_e;pe++){const Re=new B(O[pe]+"."+Qu[u.path],r.array,ae,ee);"CUBICSPLINE"===l.interpolation&&this._createCubicSplineTrackInterpolant(Re),_.push(Re)}return _}_getArrayFromAccessor(t){let r=t.array;if(t.normalized){const s=Sy(r.constructor),l=new Float32Array(r.length);for(let u=0,_=r.length;u<_;u++)l[u]=r[u]*s;r=l}return r}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){return new(this instanceof yd?Ox:L_)(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mm(v,t,r){const s=t.attributes,l=[];function u(_,A){return r.getDependency("accessor",_).then(function(O){v.setAttribute(A,O)})}for(const _ in s){const A=wy[_]||_.toLowerCase();A in v.attributes||l.push(u(s[_],A))}if(void 0!==t.indices&&!v.index){const _=r.getDependency("accessor",t.indices).then(function(A){v.setIndex(A)});l.push(_)}return xs.workingColorSpace!==ns&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${xs.workingColorSpace}" not supported.`),va(v,t),function pm(v,t,r){const s=t.attributes,l=new ot;if(void 0===s.POSITION)return;{const A=r.json.accessors[s.POSITION],O=A.min,B=A.max;if(void 0===O||void 0===B)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(l.set(new xt(O[0],O[1],O[2]),new xt(B[0],B[1],B[2])),A.normalized){const ee=Sy(Rf[A.componentType]);l.min.multiplyScalar(ee),l.max.multiplyScalar(ee)}}const u=t.targets;if(void 0!==u){const A=new xt,O=new xt;for(let B=0,ee=u.length;B<ee;B++){const ae=u[B];if(void 0!==ae.POSITION){const pe=r.json.accessors[ae.POSITION],_e=pe.min,Re=pe.max;if(void 0!==_e&&void 0!==Re){if(O.setX(Math.max(Math.abs(_e[0]),Math.abs(Re[0]))),O.setY(Math.max(Math.abs(_e[1]),Math.abs(Re[1]))),O.setZ(Math.max(Math.abs(_e[2]),Math.abs(Re[2]))),pe.normalized){const Ue=Sy(Rf[pe.componentType]);O.multiplyScalar(Ue)}A.max(O)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(A)}v.boundingBox=l;const _=new us;l.getCenter(_.center),_.radius=l.min.distanceTo(l.max)/2,v.boundingSphere=_}(v,t,r),Promise.all(l).then(function(){return void 0!==t.targets?function U_(v,t,r){let s=!1,l=!1,u=!1;for(let B=0,ee=t.length;B<ee;B++){const ae=t[B];if(void 0!==ae.POSITION&&(s=!0),void 0!==ae.NORMAL&&(l=!0),void 0!==ae.COLOR_0&&(u=!0),s&&l&&u)break}if(!s&&!l&&!u)return Promise.resolve(v);const _=[],A=[],O=[];for(let B=0,ee=t.length;B<ee;B++){const ae=t[B];if(s){const pe=void 0!==ae.POSITION?r.getDependency("accessor",ae.POSITION):v.attributes.position;_.push(pe)}if(l){const pe=void 0!==ae.NORMAL?r.getDependency("accessor",ae.NORMAL):v.attributes.normal;A.push(pe)}if(u){const pe=void 0!==ae.COLOR_0?r.getDependency("accessor",ae.COLOR_0):v.attributes.color;O.push(pe)}}return Promise.all([Promise.all(_),Promise.all(A),Promise.all(O)]).then(function(B){const ae=B[1],pe=B[2];return s&&(v.morphAttributes.position=B[0]),l&&(v.morphAttributes.normal=ae),u&&(v.morphAttributes.color=pe),v.morphTargetsRelative=!0,v})}(v,t.targets,r):v})}const ed=/^[og]\s*(.+)?/,gm=/^mtllib /,V_=/^usemtl /,Of=/^usemap /,G_=/\s+/,z_=new xt,Lf=new xt,Ey=new xt,Tu=new xt,Sl=new xt,Ty=new Nr;function ym(){const v={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,r){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==r);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==r,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(l,u){const _=this._finalize(!1);_&&(_.inherited||_.groupCount<=0)&&this.materials.splice(_.index,1);const A={index:this.materials.length,name:l||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:void 0!==_?_.smooth:this.smooth,groupStart:void 0!==_?_.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(O){const B={index:"number"==typeof O?O:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return B.clone=this.clone.bind(B),B}};return this.materials.push(A),A},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(l){const u=this.currentMaterial();if(u&&-1===u.groupEnd&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),l&&this.materials.length>1)for(let _=this.materials.length-1;_>=0;_--)this.materials[_].groupCount<=0&&this.materials.splice(_,1);return l&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),u}},s&&s.name&&"function"==typeof s.clone){const l=s.clone(0);l.inherited=!0,this.object.materials.push(l)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseNormalIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseUVIndex:function(t,r){const s=parseInt(t,10);return 2*(s>=0?s-1:s+r/2)},addVertex:function(t,r,s){const l=this.vertices,u=this.object.geometry.vertices;u.push(l[t+0],l[t+1],l[t+2]),u.push(l[r+0],l[r+1],l[r+2]),u.push(l[s+0],l[s+1],l[s+2])},addVertexPoint:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addVertexLine:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addNormal:function(t,r,s){const l=this.normals,u=this.object.geometry.normals;u.push(l[t+0],l[t+1],l[t+2]),u.push(l[r+0],l[r+1],l[r+2]),u.push(l[s+0],l[s+1],l[s+2])},addFaceNormal:function(t,r,s){const l=this.vertices,u=this.object.geometry.normals;z_.fromArray(l,t),Lf.fromArray(l,r),Ey.fromArray(l,s),Sl.subVectors(Ey,Lf),Tu.subVectors(z_,Lf),Sl.cross(Tu),Sl.normalize(),u.push(Sl.x,Sl.y,Sl.z),u.push(Sl.x,Sl.y,Sl.z),u.push(Sl.x,Sl.y,Sl.z)},addColor:function(t,r,s){const l=this.colors,u=this.object.geometry.colors;void 0!==l[t]&&u.push(l[t+0],l[t+1],l[t+2]),void 0!==l[r]&&u.push(l[r+0],l[r+1],l[r+2]),void 0!==l[s]&&u.push(l[s+0],l[s+1],l[s+2])},addUV:function(t,r,s){const l=this.uvs,u=this.object.geometry.uvs;u.push(l[t+0],l[t+1]),u.push(l[r+0],l[r+1]),u.push(l[s+0],l[s+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const r=this.uvs;this.object.geometry.uvs.push(r[t+0],r[t+1])},addFace:function(t,r,s,l,u,_,A,O,B){const ee=this.vertices.length;let ae=this.parseVertexIndex(t,ee),pe=this.parseVertexIndex(r,ee),_e=this.parseVertexIndex(s,ee);if(this.addVertex(ae,pe,_e),this.addColor(ae,pe,_e),void 0!==A&&""!==A){const Re=this.normals.length;ae=this.parseNormalIndex(A,Re),pe=this.parseNormalIndex(O,Re),_e=this.parseNormalIndex(B,Re),this.addNormal(ae,pe,_e)}else this.addFaceNormal(ae,pe,_e);if(void 0!==l&&""!==l){const Re=this.uvs.length;ae=this.parseUVIndex(l,Re),pe=this.parseUVIndex(u,Re),_e=this.parseUVIndex(_,Re),this.addUV(ae,pe,_e),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const r=this.vertices.length;for(let s=0,l=t.length;s<l;s++){const u=this.parseVertexIndex(t[s],r);this.addVertexPoint(u),this.addColor(u)}},addLineGeometry:function(t,r){this.object.geometry.type="Line";const s=this.vertices.length,l=this.uvs.length;for(let u=0,_=t.length;u<_;u++)this.addVertexLine(this.parseVertexIndex(t[u],s));for(let u=0,_=r.length;u<_;u++)this.addUVLine(this.parseUVIndex(r[u],l))}};return v.startObject("",!1),v}class $_ extends aa{constructor(t){super(t),this.materials=null}load(t,r,s,l){const u=this,_=new ic(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(A){try{r(u.parse(A))}catch(O){l?l(O):console.error(O),u.manager.itemError(t)}},s,l)}setMaterials(t){return this.materials=t,this}parse(t){const r=new ym;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let l=[];for(let A=0,O=s.length;A<O;A++){const B=s[A].trimStart();if(0===B.length)continue;const ee=B.charAt(0);if("#"!==ee)if("v"===ee){const ae=B.split(G_);switch(ae[0]){case"v":r.vertices.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3])),ae.length>=7?(Ty.setRGB(parseFloat(ae[4]),parseFloat(ae[5]),parseFloat(ae[6]),Vi),r.colors.push(Ty.r,Ty.g,Ty.b)):r.colors.push(void 0,void 0,void 0);break;case"vn":r.normals.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3]));break;case"vt":r.uvs.push(parseFloat(ae[1]),parseFloat(ae[2]))}}else if("f"===ee){const pe=B.slice(1).trim().split(G_),_e=[];for(let Ue=0,Le=pe.length;Ue<Le;Ue++){const Pe=pe[Ue];if(Pe.length>0){const ht=Pe.split("/");_e.push(ht)}}const Re=_e[0];for(let Ue=1,Le=_e.length-1;Ue<Le;Ue++){const Pe=_e[Ue],ht=_e[Ue+1];r.addFace(Re[0],Pe[0],ht[0],Re[1],Pe[1],ht[1],Re[2],Pe[2],ht[2])}}else if("l"===ee){const ae=B.substring(1).trim().split(" ");let pe=[];const _e=[];if(-1===B.indexOf("/"))pe=ae;else for(let Re=0,Ue=ae.length;Re<Ue;Re++){const Le=ae[Re].split("/");""!==Le[0]&&pe.push(Le[0]),""!==Le[1]&&_e.push(Le[1])}r.addLineGeometry(pe,_e)}else if("p"===ee){const pe=B.slice(1).trim().split(" ");r.addPointGeometry(pe)}else if(null!==(l=ed.exec(B))){const ae=(" "+l[0].slice(1).trim()).slice(1);r.startObject(ae)}else if(V_.test(B))r.object.startMaterial(B.substring(7).trim(),r.materialLibraries);else if(gm.test(B))r.materialLibraries.push(B.substring(7).trim());else if(Of.test(B))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===ee){if(l=B.split(" "),l.length>1){const pe=l[1].trim().toLowerCase();r.object.smooth="0"!==pe&&"off"!==pe}else r.object.smooth=!0;const ae=r.object.currentMaterial();ae&&(ae.smooth=r.object.smooth)}else{if("\0"===B)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+B+'"')}}r.finalize();const u=new sl;if(u.materialLibraries=[].concat(r.materialLibraries),1==!(1===r.objects.length&&0===r.objects[0].geometry.vertices.length))for(let A=0,O=r.objects.length;A<O;A++){const B=r.objects[A],ee=B.geometry,ae=B.materials,pe="Line"===ee.type,_e="Points"===ee.type;let Re=!1;if(0===ee.vertices.length)continue;const Ue=new gs;Ue.setAttribute("position",new ki(ee.vertices,3)),ee.normals.length>0&&Ue.setAttribute("normal",new ki(ee.normals,3)),ee.colors.length>0&&(Re=!0,Ue.setAttribute("color",new ki(ee.colors,3))),!0===ee.hasUVIndices&&Ue.setAttribute("uv",new ki(ee.uvs,2));const Le=[];for(let ht=0,ut=ae.length;ht<ut;ht++){const st=ae[ht],Yt=st.name+"_"+st.smooth+"_"+Re;let At=r.materials[Yt];if(null!==this.materials)if(At=this.materials.create(st.name),!pe||!At||At instanceof ol){if(_e&&At&&!(At instanceof Vu)){const zt=new Vu({size:10,sizeAttenuation:!1});Zs.prototype.copy.call(zt,At),zt.color.copy(At.color),zt.map=At.map,At=zt}}else{const zt=new ol;Zs.prototype.copy.call(zt,At),zt.color.copy(At.color),At=zt}void 0===At&&(At=pe?new ol:_e?new Vu({size:1,sizeAttenuation:!1}):new pg,At.name=st.name,At.flatShading=!st.smooth,At.vertexColors=Re,r.materials[Yt]=At),Le.push(At)}let Pe;if(Le.length>1){for(let ht=0,ut=ae.length;ht<ut;ht++){const st=ae[ht];Ue.addGroup(st.groupStart,st.groupCount,ht)}Pe=pe?new Nl(Ue,Le):_e?new Xd(Ue,Le):new Ps(Ue,Le)}else Pe=pe?new Nl(Ue,Le[0]):_e?new Xd(Ue,Le[0]):new Ps(Ue,Le[0]);Pe.name=B.name,u.add(Pe)}else if(r.vertices.length>0){const A=new Vu({size:1,sizeAttenuation:!1}),O=new gs;O.setAttribute("position",new ki(r.vertices,3)),r.colors.length>0&&void 0!==r.colors[0]&&(O.setAttribute("color",new ki(r.colors,3)),A.vertexColors=!0);const B=new Xd(O,A);u.add(B)}return u}}class H_ extends aa{constructor(t){super(t)}load(t,r,s,l){const u=this,_=new ic(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(A){try{r(u.parse(A))}catch(O){l?l(O):console.error(O),u.manager.itemError(t)}},s,l)}parse(t){function s(B,ee,ae){for(let pe=0,_e=B.length;pe<_e;pe++)if(B[pe]!==ee.getUint8(ae+pe))return!1;return!0}const O=function A(B){if("string"==typeof B){const ee=new Uint8Array(B.length);for(let ae=0;ae<B.length;ae++)ee[ae]=255&B.charCodeAt(ae);return ee.buffer||ee}return B}(t);return function r(B){const ee=new DataView(B);if(84+50*ee.getUint32(80,!0)===ee.byteLength)return!0;const Re=[115,111,108,105,100];for(let Ue=0;Ue<5;Ue++)if(s(Re,ee,Ue))return!1;return!0}(O)?function l(B){const ee=new DataView(B),ae=ee.getUint32(80,!0);let pe,_e,Re,Le,Pe,ht,ut,st,Ue=!1;for(let wn=0;wn<70;wn++)1129270351==ee.getUint32(wn,!1)&&82==ee.getUint8(wn+4)&&61==ee.getUint8(wn+5)&&(Ue=!0,Le=new Float32Array(3*ae*3),Pe=ee.getUint8(wn+6)/255,ht=ee.getUint8(wn+7)/255,ut=ee.getUint8(wn+8)/255,st=ee.getUint8(wn+9)/255);const zt=new gs,tn=new Float32Array(3*ae*3),Pt=new Float32Array(3*ae*3),Tt=new Nr;for(let wn=0;wn<ae;wn++){const er=84+50*wn,Kn=ee.getFloat32(er,!0),rr=ee.getFloat32(er+4,!0),wr=ee.getFloat32(er+8,!0);if(Ue){const tr=ee.getUint16(er+48,!0);32768&tr?(pe=Pe,_e=ht,Re=ut):(pe=(31&tr)/31,_e=(tr>>5&31)/31,Re=(tr>>10&31)/31)}for(let tr=1;tr<=3;tr++){const Wr=er+12*tr,cr=3*wn*3+3*(tr-1);tn[cr]=ee.getFloat32(Wr,!0),tn[cr+1]=ee.getFloat32(Wr+4,!0),tn[cr+2]=ee.getFloat32(Wr+8,!0),Pt[cr]=Kn,Pt[cr+1]=rr,Pt[cr+2]=wr,Ue&&(Tt.setRGB(pe,_e,Re,Vi),Le[cr]=Tt.r,Le[cr+1]=Tt.g,Le[cr+2]=Tt.b)}}return zt.setAttribute("position",new to(tn,3)),zt.setAttribute("normal",new to(Pt,3)),Ue&&(zt.setAttribute("color",new to(Le,3)),zt.hasColors=!0,zt.alpha=st),zt}(O):function u(B){const ee=new gs,ae=/solid([\s\S]*?)endsolid/g,pe=/facet([\s\S]*?)endfacet/g,_e=/solid\s(.+)/;let Re=0;const Ue=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,Le=new RegExp("vertex"+Ue+Ue+Ue,"g"),Pe=new RegExp("normal"+Ue+Ue+Ue,"g"),ht=[],ut=[],st=[],Yt=new xt;let At,zt=0,tn=0,Pt=0;for(;null!==(At=ae.exec(B));){tn=Pt;const Tt=At[0],wn=null!==(At=_e.exec(Tt))?At[1]:"";for(st.push(wn);null!==(At=pe.exec(Tt));){let rr=0,wr=0;const tr=At[0];for(;null!==(At=Pe.exec(tr));)Yt.x=parseFloat(At[1]),Yt.y=parseFloat(At[2]),Yt.z=parseFloat(At[3]),wr++;for(;null!==(At=Le.exec(tr));)ht.push(parseFloat(At[1]),parseFloat(At[2]),parseFloat(At[3])),ut.push(Yt.x,Yt.y,Yt.z),rr++,Pt++;1!==wr&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+Re),3!==rr&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+Re),Re++}const er=tn,Kn=Pt-tn;ee.userData.groupNames=st,ee.addGroup(er,Kn,zt),zt++}return ee.setAttribute("position",new ki(ht,3)),ee.setAttribute("normal",new ki(ut,3)),ee}(function _(B){return"string"!=typeof B?(new TextDecoder).decode(B):B}(t))}}var ru=Ve(3953),vh=Ve(5374),Fx=Ve(3656),Ux=Ve(9900),Bx=Ve(4234),Vx=Ve(345),Gx=Ve(755),zx=Ve(3307),$x=Ve(5547),Mu=!1;const _h=8e4;let Hx=(()=>{var v;class t{constructor(s,l,u,_,A,O,B,ee,ae){var pe=this;this.modalCtrl=s,this.p5toast=l,this.lang=u,this.sanitizer=_,this.indexed=A,this.alertCtrl=O,this.navCtrl=B,this.p5loading=ee,this.noti=ae,this.windowOnFocusAct={},this.WindowOnBlurAct={},this.FocusOnPortal=!0,this.portalHint=!0,this.BlockMainShortcut=!1,this.TodoTags={},this.TodoTagsKey=[],this.PIPableInfo={PIPableCanvas:void 0,PIPautoP5:void 0,framerate:void 0},this.PortalBottonTabAct={Todo:void 0,Subscribes:void 0,Arcade:void 0,Community:void 0},this.GodotCache={},this.ArcadeLoaded=!1,this.ArcadeWithFullScreen=!1,this.ToggleChatInput=!0,this.NeedBackgroundMode=!1,this.IsBackgroundMode=!1,this.arcadeChat={logs:[],text:""},this.ArcadeOnMessageLnId=13,this.InGameTargetPath="",this.ArcadeObject={QRCode:void 0},this.CacheShortCut={},this.WebsocketRetryTerm=70,this.useVoiceRecording="",this.videoPIP=!1,this.WaitingConnect=!1,this.useVideo=void 0,this.useCCTV=void 0,this.CCTVHost=!1,this.InitEnd=!1,this.PeerConnected=!1,this.ShowChatInterface=!1,this.DisableChatInput=!1,this.instCallLog={logs:[],text:""},this.PageDismissAct={},this.isOthersVideoExtended=!1,ae.GlobalCallback=this,Mu=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Re=>{Mu=!!Re.matches}),this.CustomLocalAddress=localStorage.getItem("useQRCodeBasic")||"https://is2you2.github.io/pjcone_pwa/",window.onfocus=()=>{let Re=Object.keys(this.windowOnFocusAct);for(let Ue of Re)this.windowOnFocusAct[Ue]()},window.onblur=()=>{let Re=Object.keys(this.WindowOnBlurAct);for(let Ue of Re)this.WindowOnBlurAct[Ue]()};const _e=()=>{this.ArcadeWithFullScreen=!!document.fullscreenElement};document.onfullscreenchange=_e,document.onwebkitfullscreenchange=_e,document.onmozfullscreenchange=_e,document.onMSFullscreenChange=_e,this.autoPIPVideoElement=document.createElement("video"),document.body.appendChild(this.autoPIPVideoElement),this.autoPIPVideoElement.style.display="none",this.autoPIPVideoElement.autoplay=!0,this.autoPIPVideoElement.onloadeddata=(0,F.A)(function*(){try{yield pe.autoPIPVideoElement.requestPictureInPicture()}catch{pe.OnCloseAutoPIPModeAct()}}),this.autoPIPVideoElement.onleavepictureinpicture=()=>{this.CleanPIPableInfo(),this.OnCloseAutoPIPModeAct()}}toggleBlockMainShortcut(s){this.BlockMainShortcut=s,this.portalHint=!s}initialize(){const s=localStorage.getItem("ShowHint");null!==s&&(this.ShowHint="1"==s),void 0===this.ShowHint&&(this.ShowHint="DesktopPWA"==a.aH),this.p5toast.HTMLEncode||(this.p5toast.HTMLEncode=this.HTMLEncode),this.p5key=new It(l=>{l.setup=()=>{l.noCanvas(),l.noLoop(),this.p5KeyShortCut={}},l.keyPressed=u=>{if(!this.BlockMainShortcut&&this.p5KeyShortCut){switch(u.code){case"Backspace":this.p5KeyShortCut.Backspace&&this.p5KeyShortCut.Backspace();break;case"Backquote":this.p5KeyShortCut.Backquote&&this.p5KeyShortCut.Backquote(u);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":case"Digit0":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":case"Numpad6":case"Numpad7":case"Numpad8":case"Numpad9":case"Numpad0":if(this.p5KeyShortCut.Digit){const _=(Number(u.code.slice(-1))-1+10)%10;this.p5KeyShortCut.Digit(_)}break;case"KeyQ":case"KeyW":case"KeyE":case"KeyR":case"KeyT":this.p5KeyShortCut.BottomTab&&this.p5KeyShortCut.BottomTab(u.code.slice(-1));break;case"KeyA":this.p5KeyShortCut.AddAct&&this.p5KeyShortCut.AddAct(u);break;case"KeyS":this.p5KeyShortCut.SKeyAct&&this.p5KeyShortCut.SKeyAct(u);break;case"KeyD":this.p5KeyShortCut.DeleteAct&&this.p5KeyShortCut.DeleteAct(u);break;case"KeyF":this.p5KeyShortCut.FKeyAct&&this.p5KeyShortCut.FKeyAct();break;case"KeyZ":case"KeyX":case"KeyC":case"KeyV":this.p5KeyShortCut.HistoryAct&&this.p5KeyShortCut.HistoryAct(u)}"Enter"===u.key&&this.p5KeyShortCut.EnterAct&&this.p5KeyShortCut.EnterAct(u)}}})}AddTodoTags(s){try{for(let u=0,_=null===(l=s.tags)||void 0===l?void 0:l.length;u<_;u++){var l;const A=s.tags[u];this.TodoTags[A]||(this.TodoTags[A]=[],this.TagKeysToForm()),this.TodoTags[A].includes(s.id)||this.TodoTags[A].push(s.id)}}catch(u){console.log("AddTodoTags_on error: ",u)}}RemoveTodoTags(s){try{if(s&&s.tags)for(let l=0,u=s.tags.length;l<u;l++){const _=s.tags[l];if(this.TodoTags[_])for(let A=0,O=this.TodoTags[_].length;A<O;A++)if(s.id==this.TodoTags[_][A]){this.TodoTags[_].splice(A,1);break}this.TodoTags[_].length||(delete this.TodoTags[_],this.TagKeysToForm())}}catch(l){console.log("RemoveTodoTags_on error: ",l)}}TagKeysToForm(){const s=Object.keys(this.TodoTags);this.TodoTagsKey.length=0;for(let l=0,u=s.length;l<u;l++)this.TodoTagsKey.push({force_name:s[l],color:"#bbbbbb88",value:l})}SetPIPableInfo(s,l,u){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=s,this.PIPableInfo.PIPautoP5=l,this.PIPableInfo.framerate=u)}CleanPIPableInfo(){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=null,this.PIPableInfo.PIPautoP5=null,this.PIPableInfo.framerate=null)}OnCloseAutoPIPModeAct(){var s;null===(s=this.stream)||void 0===s||s.getTracks().forEach(l=>l.stop()),this.stream=null}CraeteAutoPIPMode(){try{var s,l;this.stream=this.PIPableInfo.PIPableCanvas.captureStream(null!==(s=this.PIPableInfo.framerate)&&void 0!==s?s:24),this.autoPIPVideoElement.srcObject=this.stream,null===(l=this.PIPableInfo.PIPautoP5)||void 0===l||l.redraw()}catch(u){console.log("error_CraeteAutoPIPMode: ",u),this.OnCloseAutoPIPModeAct()}}RemoveAutoPIPMode(s=!0){var l=this;return(0,F.A)(function*(){s&&l.CleanPIPableInfo();try{var u;yield null===(u=document)||void 0===u?void 0:u.exitPictureInPicture()}catch{}l.OnCloseAutoPIPModeAct()})()}afterLangInit(){this.NeedBackgroundMode="DesktopPWA"!=a.aH}RemoveAllModals(s=(()=>{})){var l=this;return(0,F.A)(function*(){let u="init";for(;u;)u=yield l.modalCtrl.getTop(),u&&(yield u.dismiss(),u=null);s&&s()})()}CatchGETs(s){const l=s.split("?");if(l.length>1){const u=l[1].split("&");let _={};for(let A=0,O=u.length;A<O;A++){const B=u[A].split("=");_[B[0]]||(_[B[0]]=[]),_[B[0]].push(decodeURIComponent(B[1]))}return _}}readasQRCodeFromString(s){try{let l=new j({content:s,padding:4,width:8,height:8,color:Mu?"#bbb":"#444",background:Mu?"#111":"#fff",ecl:"M"}).svg();return this.sanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${btoa(l)}`)}catch(l){console.log("readasQRCodeFromString: ",l),this.p5toast.show({text:`${this.lang.text.GlobalAct.failed_to_gen_qr}: ${(l.statusText?`${l.statusText}(${l.status})`:l.status)||l}`})}}CreateGodotIFrame(s,l,u=!1){var _=this;return new Promise(function(){var A=(0,F.A)(function*(O){var B,ee,ae,pe,_e,Re;let Ue=function(){var st=(0,F.A)(function*(){try{if("godot"!=window.godot)throw"No godot";if(!_.godot_window.start_load_pck)throw"No act ready";yield _.indexed.GetGodotIndexedDB(),O()}catch{setTimeout(()=>{Ue()},1e3)}});return function(){return st.apply(this,arguments)}}();null===(B=_.godot_window)||void 0===B||null===(ee=B.quit_godot)||void 0===ee||ee.call(B),u&&(null===(ae=_.godot_window)||void 0===ae||null===(pe=ae.quit_ionic)||void 0===pe||pe.call(ae)),null===(_e=_.godot_splash)||void 0===_e||_e.remove(),null===(Re=_.godot)||void 0===Re||Re.remove(),window.godot="",Object.keys(_.GodotCache).forEach(Yt=>{URL.revokeObjectURL(_.GodotCache[Yt]),delete _.GodotCache[Yt]}),_.GodotCache.html="assets/html/index.html";try{if(!localStorage.getItem("useCache"))throw"\uc624\ud504\ub77c\uc778 \uce90\uc2dc \uc6b0\ud68c\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c";const At=yield(yield fetch("assets/html/index.audio.worklet.js")).blob(),zt=URL.createObjectURL(At);_.GodotCache.audio=zt;const Pt=yield(yield fetch("assets/html/index.wasm")).blob(),Tt=URL.createObjectURL(Pt);_.GodotCache.wasm=Tt;const er=yield(yield fetch("assets/html/index.pck")).blob(),Kn=URL.createObjectURL(er);_.GodotCache.pck=Kn;const wr=yield(yield fetch("assets/html/index.png")).blob(),tr=URL.createObjectURL(wr);_.GodotCache.png=tr;let cr=yield(yield fetch("assets/html/index.js")).text();cr=cr.replace("`${loadPath}.audio.worklet.js`",`'${zt}'`).replace(/`\${loadPath}\.wasm`/g,`'${Tt}'`).replace("this.config.mainPack || `${exe}.pck`;",`'${Kn}'`);const Zr=new Blob([cr],{type:"application/javascript"}),hi=URL.createObjectURL(Zr);_.GodotCache.js=hi;let as=yield(yield fetch("assets/html/index.html")).text();as=as.replace('<script src="index.js"><\/script>',`<script src="${hi}"><\/script>`).replace('src="index.png"',`src="${tr}"`);const Ts=new Blob([as],{type:"text/html"}),Tr=URL.createObjectURL(Ts);_.GodotCache.html=Tr}catch(st){console.log("\uace0\ub3c4\uc5d4\uc9c4 \uc624\ud504\ub77c\uc778 \ud398\uc774\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",st)}let Le=document.createElement("iframe");Le.id="godot",Le.setAttribute("src",_.GodotCache.html),Le.setAttribute("frameborder","0"),Le.setAttribute("class","full_screen"),Le.setAttribute("allow","fullscreen; encrypted-media"),Le.setAttribute("scrolling","no"),Le.setAttribute("withCredentials","true"),s.indexOf("PostViewer_")>=0&&(Le.style.borderRadius="16px"),l.isMobile=_.NeedBackgroundMode,s.indexOf("content_viewer_canvas")>=0&&(l.create_thumbnail_p5=(st,Yt)=>{Object.keys(_.GodotCache).forEach(zt=>{URL.revokeObjectURL(_.GodotCache[zt]),delete _.GodotCache[zt]}),new It(At=>{At.setup=()=>{At.noCanvas(),At.pixelDensity(1),At.smooth(),At.loadImage("data:image/png;base64,"+st,function(){var zt=(0,F.A)(function*(tn){let Pt=At.createCanvas(tn.width,tn.height);At.image(tn,0,0),At.textSize(16),At.textWrap(At.CHAR);let Tt=At.height/24;At.push(),At.translate(Tt/6,Tt/6),At.fill(0),At.text(_.godot_window.filename,Tt,Tt,At.width-2*Tt,At.height-2*Tt),At.filter(At.BLUR,1,!1),At.pop(),At.fill(255),At.text(_.godot_window.filename,Tt,Tt,At.width-2*Tt,At.height-2*Tt);let wn=Pt.elt.toDataURL("image/png").replace("image/png","image/octet-stream");try{var er,Kn;if(!(null!==(er=_.godot_window)&&void 0!==er&&er.alt_path||null!==(Kn=_.godot_window)&&void 0!==Kn&&Kn.path))throw"\uacbd\ub85c \uc5c6\ub294 \ud30c\uc77c";yield _.indexed.saveBase64ToUserPath(wn,`${_.godot_window.alt_path||_.godot_window.path}_thumbnail.png`),_.modulate_thumbnail(Yt,"")}catch(rr){console.log("p.saveFrames: ",rr)}At.remove()});return function(tn){return zt.apply(this,arguments)}}(),zt=>{console.error("create_thumbnail_load thumbnail failed: ",zt),At.remove()})}})}),l.fullscr_tog=st=>{_.ArcadeWithFullScreen=null!=st?st:!_.ArcadeWithFullScreen};let Pe,ht=50;yield new Promise(st=>{const Yt=()=>{Pe=document.getElementById(s),Pe?st(void 0):setTimeout(()=>{ht--,ht>0?Yt():st(void 0)},100)};Yt()}),Pe.appendChild(Le),_.godot_window=Le.contentWindow||Le.contentDocument,Object.keys(l).forEach(st=>_.godot_window[st]=l[st]),_.godot=Le,yield Ue()});return function(O){return A.apply(this,arguments)}}())}ToggleFullScreen(s){this.ArcadeWithFullScreen=null!=s?s:!this.ArcadeWithFullScreen;const l=document.documentElement;this.ArcadeWithFullScreen?l.requestFullscreen?l.requestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():l.msRequestFullscreen&&l.msRequestFullscreen():document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}CreateArcadeFrame(s){var l=this;return(0,F.A)(function*(){yield l.AnonymousUserCreateName(),l.ArcadeLoaded=!0,l.ArcadeChatLog=null,l.arcadeChat.logs.length=0,l.arcadeChat.text="",l.noti.Current="arcade",l.ToggleChatInput=!0,"DesktopPWA"==a.aH?l.ArcadeWithFullScreen=!0:l.ToggleFullScreen(!0),yield l.CreateGodotIFrameWithDuplicateAct(s,"arcade_pck_loaded",{path:"tmp_files/duplicate/arcade.pck",force:!0,ws_send:_=>{var A;null===(A=l.ArcadeWS)||void 0===A||A.send(_)},get_reqInfo:()=>l.CacheJoinedGameInfo,update_reqInfo:_=>{let A=JSON.parse(_);l.ArcadeWS.send(JSON.stringify({type:"update_reqInfo",socketId:l.ArcadeSocketId,keys:["data"],data:A}))},webrtc_send:_=>{l.WebRTCService.send(_)},open_modal:()=>{l.ArcadeQRAddress=`${l.CustomLocalAddress}?token=${l.CheckIfCanBlankSocketAddress(l.ArcadeWSAddress)},${12013==l.ArcadeSquarePort?"":l.ArcadeSquarePort},${l.ArcadeSocketId}`,l.ArcadeQRCodeSRC=l.readasQRCodeFromString(l.ArcadeQRAddress),l.OpenArcadeQRCode()},close_modal:()=>{var _;null===(_=l.ArcadeObject.QRCode)||void 0===_||_.dismiss()},select_file:_=>{var A;l.InGameTargetPath=_,null===(A=document.getElementById("arcade_ingame_load"))||void 0===A||A.click()},focus_chat_input:()=>{var _;null===(_=l.GodotRelativeArcadeChatInputFocus)||void 0===_||_.call(l)},quit_game:()=>{l.quit_godot_frame()},toggle_chat:_=>{l.ToggleChatInput=null!=_?_:!l.ToggleChatInput,l.ToggleChatInput?setTimeout(()=>{var A;l.ToggleChatInput&&(l.DomArcadeChatInput=null===(A=document.getElementById("arcadeInput"))||void 0===A?void 0:A.childNodes[1].childNodes[1].childNodes[1],l.DomArcadeChatInput&&(l.DomArcadeChatInput.onfocus=()=>{l.toggleBlockMainShortcut(!0),l.portalHint=!1,l.NeedBackgroundMode&&document.fullscreenElement&&(l.ArcadeWithFullScreen=!1)},l.DomArcadeChatInput.onblur=()=>{l.toggleBlockMainShortcut(!1),l.portalHint=!0,l.NeedBackgroundMode&&document.fullscreenElement&&(l.ArcadeWithFullScreen=!0)},l.DomArcadeChatInput.onpaste=O=>{var B;let ee=[];for(const ae of O.clipboardData.files)ee.push({file:ae});if(1==ee.length)return null===(B=l.ArcadeSendAttachFunc)||void 0===B||B.call(l,{target:{files:[ee[0].file]}},"arcade_chat"),!1}),l.auto_scroll_down())},500):l.ClearSignals()},get_pid:()=>l.ArcadeWSPeerId,get_pid_color:()=>(l.ArcadeWSPeerId.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),show_toast:_=>{l.p5toast.show({text:_})},check_mobile:()=>l.NeedBackgroundMode,kick_user:_=>{var A;null===(A=l.ArcadeWS)||void 0===A||A.send(JSON.stringify({type:"kick",pid:_}))}})})()}quit_godot_frame(){var s,l;this.ArcadeLoaded=!1,null===(s=this.godot)||void 0===s||s.remove(),this.godot=null,this.ToggleFullScreen(!1),null===(l=this.ArcadeWS)||void 0===l||l.close(1e3,"user_quit"),delete this.windowOnFocusAct.ArcadePIP,delete this.WindowOnBlurAct.ArcadePIP}AnonymousUserCreateName(){var s=this;return(0,F.A)(function*(){s.CallbackNakama.users.self.display_name||(s.toggleBlockMainShortcut(!0),yield new Promise(function(){var l=(0,F.A)(function*(u){let _="";const A=yield s.alertCtrl.create({header:s.lang.text.Profile.name_placeholder,inputs:[{placeholder:s.lang.text.Profile.noname_user,type:"text"}],buttons:[{text:s.lang.text.UserFsDir.OK,handler:O=>{_=O[0]}}]});A.onDidDismiss().then(()=>{s.CallbackNakama.users.self.display_name=_,s.CallbackNakama.save_profile_to_server(),u(void 0)}),A.present()});return function(u){return l.apply(this,arguments)}}()),s.toggleBlockMainShortcut(!1))})()}ClearSignals(){this.DomArcadeChatInput&&(this.DomArcadeChatInput.onfocus=null,this.DomArcadeChatInput.onblur=null,this.DomArcadeChatInput.onpaste=null),this.DomArcadeChatInput=null,this.ArcadeChatLog=null}ConvertPathToGodot(s){return`godot/app_userdata/Client/${s}`}auto_scroll_down(s){this.ArcadeChatLog||(this.ArcadeChatLog=document.getElementById("arcadeChatLog")),this.ArcadeChatLog&&setTimeout(()=>{let l=this.ArcadeChatLog.scrollHeight;l<this.ArcadeChatLog.scrollTop+this.ArcadeChatLog.clientHeight+120&&this.ArcadeChatLog.scrollTo({top:l,behavior:"smooth"})},s||0)}CreateGodotIFrameWithDuplicateAct(s,l,u,_,A){var O=this;return(0,F.A)(function*(){if(O.ArcadeLoaded&&!u.force)O.p5toast.show({text:O.lang.text.Arcade.ArcadeOpened}),null==A||A();else{try{if(s.blob)throw"\uc900\ube44\ub41c blob \uc815\ubcf4";if(!s.url)throw"\ud30c\uc77c \uc815\ubcf4\uc5d0 URL\uc774 \uc5c6\uc74c";try{s.blob=yield O.downloadWithProgressAsBlob(s.url)}catch(ae){throw ae}}catch(ae){console.log("pck \uc5f4\ub78c \uc624\ub958: ",ae)}const B=O.ConvertPathToGodot(u.path);let ee=!1;if(O.indexed.godotDB)try{yield O.indexed.GetGodotIndexedDB(),yield O.indexed.saveBlobToUserPath(s.blob,B,O.indexed.godotDB),ee=!0}catch(ae){console.log("\ub0b4\ubd80 \ud30c\uc77c \uc5c6\uc74c: ",ae)}if(yield O.CreateGodotIFrame(l,u,!0),!ee){try{yield O.indexed.GetGodotIndexedDB(),yield O.indexed.saveBlobToUserPath(s.blob,B,O.indexed.godotDB)}catch{}yield O.CreateGodotIFrame(l,u)}O.PIPableInfo.PIPableCanvas=O.godot_window.document.getElementById("canvas"),O.PIPableInfo.framerate=45,O.godot_window.onblur=O.WindowOnBlurAct.pipmode,O.godot_window.onfocus=O.windowOnFocusAct.pipmode,null==_||_(),u.force&&(O.WebRTCService.dataChannelOnMsgAct=ae=>{var pe,_e;null===(pe=O.godot_window)||void 0===pe||null===(_e=pe.webrtc_recv)||void 0===_e||_e.call(pe,ae)}),O.godot_window.start_load_pck()}})()}downloadWithProgressAsBlob(s,l,u){var _=this;return(0,F.A)(function*(){let O=0;const B=s.split("/").pop(),ee=u||s;yield _.p5loading.update({id:ee,message:`${_.lang.text.Arcade.TryingDownload}: ${B}`});const ae=function(){var pe=(0,F.A)(function*(){try{const _e=yield fetch(s,{signal:null==l?void 0:l.signal,cache:"default"}),Re=_e.headers.get("Content-Length");if(!Re)throw console.log("Content-Length not available"),`${_e.statusText} (${_e.status})`;const Ue=parseInt(Re,10);let Le=0;const Pe=_e.body.getReader(),ht=[];for(;;){const{done:st,value:Yt}=yield Pe.read();if(st)break;ht.push(Yt),Le+=Yt.length;const At=Le/Ue;_.p5loading.update({id:ee,message:`${_.lang.text.Arcade.TryingDownload}: ${B}: ${(100*At).toFixed(1)}%`,progress:At}),yield new Promise(tn=>setTimeout(tn,0))}const ut=new Blob(ht);return _.p5loading.remove(ee),ut}catch{if(O<5)return O++,console.log(`Retry ${O} of 5...`),yield new Promise(Re=>setTimeout(Re,1e3)),ae();throw console.log("Max retries reached. Download failed."),_.p5loading.remove(ee),"Download failed after multiple retries."}});return function(){return pe.apply(this,arguments)}}();return ae()})()}ToggleBackgroundMode(s){var l,u,_;this.IsBackgroundMode=null!=s?s:!this.IsBackgroundMode,null===(l=this.BackgroundAudioDiv)||void 0===l||l.remove(),this.BackgroundAudioDiv=null,null===(u=this.BGModeAudio)||void 0===u||u.pause(),null===(_=this.BGModeAudio)||void 0===_||_.remove(),this.BGModeAudio=null,this.IsBackgroundMode?(this.WindowOnBlurAct.bgmode=()=>{this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio))},this.windowOnFocusAct.bgmode=()=>{var A,O,B;this.WebRTCService.OnUse||(null===(A=this.BackgroundAudioDiv)||void 0===A||A.remove(),this.BackgroundAudioDiv=null,null===(O=this.BGModeAudio)||void 0===O||O.pause(),null===(B=this.BGModeAudio)||void 0===B||B.remove(),this.BGModeAudio=null)},this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOn,progress:null,forceEnd:1e3})):(delete this.windowOnFocusAct.bgmode,delete this.WindowOnBlurAct.bgmode,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOff,progress:1,forceEnd:1e3}))}forceUseBackgroundMode(){return this.WindowOnBlurAct.bgmode?(this.WindowOnBlurAct.bgmode(),delete this.WindowOnBlurAct.bgmode,delete this.windowOnFocusAct.bgmode):this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio)),this.IsBackgroundMode=!0,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeIng,progress:null,forceEnd:350}),!1}CreateInfoSocket(s){this.ArcadeUserInputAddress?(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var l;null===(l=this.ArcadeWS)||void 0===l||l.send(JSON.stringify({type:"initInfo",act:"arcade",url:s}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct()):this.p5toast.show({text:this.lang.text.Arcade.NoWSAddress})}CatchWebSocketAddressFromServerInfo(s){return`${s.useSSL?"wss":"ws"}://${s.address}`}CreateArcadeWSOnMsgAct(){var s=this;const l="arcade",u=()=>{window.focus(),this.noti.Current!=l&&this.SelectArcadeTab()};this.ArcadeWS.onmessage=_=>{var A,O,B;let ee;ee="string"==typeof _.data?_.data:_.data.text();try{var ae,pe;let Ue=JSON.parse(ee);switch(null===(ae=this.godot_window)||void 0===ae||null===(pe=ae.ws_recv)||void 0===pe||pe.call(ae,ee),Ue.type){case"text":{let ht=Ue.msg.split(" "),ut=[],st="";const Yt=this.ArcadeWSPeerId==Ue.uid,At=Yt?Ue.name?`${Ue.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Ue.name||this.lang.text.MinimalChat.name_stranger_group,zt=Ue.uid?(Ue.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"888888":"444444";for(let Pt=0,Tt=ht.length;Pt<Tt;Pt++)0==ht[Pt].indexOf("http://")||0==ht[Pt].indexOf("https://")?(ut.push({text:" "+st+" "}),st="",ut.push({href:!0,text:ht[Pt]})):st+=" "+ht[Pt];st&&ut.push({text:" "+st}),this.arcadeChat.logs.push({color:zt,text:ut,target:At,isMe:Yt}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:At,body:Ue.msg,smallIcon_ln:"favicon",bgcolor:zt},l,u),this.auto_scroll_down()}break;case"file":{var _e,Re;const ht=this.ArcadeWSPeerId==Ue.uid,ut=ht?Ue.name?`${Ue.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Ue.name||this.lang.text.MinimalChat.name_stranger_group,st=Ue.uid?(Ue.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"888888":"444444";this.arcadeChat.logs.push({color:st,file:Ue,target:ut,isMe:ht}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:ut,body:this.lang.text.MinimalChat.user_send_attach,image:"image"==(null===(_e=Ue.info)||void 0===_e?void 0:_e.viewer)?null===(Re=Ue.info)||void 0===Re?void 0:Re.url:void 0,smallIcon_ln:"favicon",bgcolor:st},l,u),this.auto_scroll_down()}break;case"req_info":this.ArcadeWSPeerId=Ue.uid,this.ArcadeJoinedChannel=Ue.channel_id;const Le=Ue.url;this.CacheJoinedGameInfo=JSON.stringify(Ue),function(){var ht=(0,F.A)(function*(){try{var ut;s.SelectArcadeTab&&s.SelectArcadeTab();const st=yield s.downloadWithProgressAsBlob(Le);yield s.CreateArcadeFrame({blob:st}),null===(ut=s.ArcadeWS)||void 0===ut||ut.send(JSON.stringify({type:"join",channel:Ue.channel_id,name:s.CallbackNakama.users.self.display_name}))}catch(st){console.log("\ube60\ub978 \uc9c4\uc785 \uc2dc\uc791 \uc624\ub958: ",st)}});return function(){return ht.apply(this,arguments)}}()();break;case"init_id":this.ArcadeJoinedChannel=Ue.id,this.ArcadeWSPeerId=Ue.uid,null===(A=this.afterInitAct)||void 0===A||A.call(this),this.ArcadeSocketId=Ue.socketId,null===(O=this.ArcadeWS)||void 0===O||O.send(JSON.stringify({type:"join",channel:this.ArcadeJoinedChannel,name:this.CallbackNakama.users.self.display_name}));break;case"socket_react":switch(Ue.act){case"WEBRTC_REPLY_INIT_SIGNAL":this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Reply),this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL(Ue.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),"EOL"==Ue.data_str&&(this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Offer),this.WebRTCService.CreateAnswer({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Ice);break;case"WEBRTC_REPLY_INIT_SIGNAL_PART":this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL_PART({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_ICE_CANDIDATES":this.WebRTCService.WEBRTC_ICE_CANDIDATES(Ue.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_datachannel),null===(B=this.ArcadeWS)||void 0===B||B.send(JSON.stringify({type:"init_end",channel:this.ArcadeJoinedChannel}));break;case"WEBRTC_INIT_REQ_SIGNAL":this.WebRTCService.WEBRTC_INIT_REQ_SIGNAL({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_RECEIVE_ANSWER":this.WebRTCService.WEBRTC_RECEIVE_ANSWER(Ue.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})}break;case"join":{const ut=this.ArcadeWSPeerId==Ue.uid?Ue.name?`${Ue.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Ue.name||this.lang.text.MinimalChat.name_stranger_group,st=Ue.uid?(Ue.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"888888":"444444";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_join}],target:ut,isSystem:!0}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:this.lang.text.MinimalChat.user_join,body:ut+` | ${this.lang.text.MinimalChat.user_join_comment}`,smallIcon_ln:"favicon",bgcolor:st},l,u),this.auto_scroll_down()}break;case"leave":{const ut=this.ArcadeWSPeerId==Ue.uid?Ue.name?`${Ue.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Ue.name||this.lang.text.MinimalChat.name_stranger_group,st=Ue.uid?(Ue.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"888888":"444444";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_out}],target:ut,isSystem:!0}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:this.lang.text.MinimalChat.user_out,body:ut+` | ${this.lang.text.MinimalChat.user_out_comment}`,smallIcon_ln:"favicon",bgcolor:st},l,u),this.auto_scroll_down()}}}catch{}}}CreateArcadeWSCloseAct(){this.ArcadeWS.onerror=s=>{console.log("\uc544\ucf00\uc774\ub4dc \uc18c\ucf13 \uc624\ub958: ",s),this.ArcadeWS.close()},this.ArcadeWS.onclose=s=>{switch(s.reason){case"max_limit":this.p5toast.show({text:this.lang.text.MinimalChat.block});break;case"expired":this.p5toast.show({text:this.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",s.reason)}this.ArcadeSocketId=null,this.CacheJoinedGameInfo=void 0,this.ArcadeWSPeerId=null,this.ArcadeJoinedChannel=null,this.WebRTCService.close_webrtc(),this.ArcadeQRAddress=null,this.ArcadeQRCodeSRC=null,this.ArcadeWS.onopen=null,this.ArcadeWS.onmessage=null,this.ArcadeWS.onclose=null,this.afterInitAct=null,this.ArcadeWS=null}}LoadGameFile(s){this.indexed.saveBlobToUserPath(s.target.files[0],this.ConvertPathToGodot(this.InGameTargetPath),this.indexed.godotDB).then(_=>{var A,O;null===(A=this.godot_window)||void 0===A||null===(O=A.after_file_selected)||void 0===O||O.call(A,this.InGameTargetPath)});const u=document.getElementById("arcade_ingame_load");u&&(u.value=null)}OpenArcadeQRCode(){this.ArcadeObject.QRCode.onDidDismiss().then(()=>{this.RestoreShortCutAct("arcade-qrcode")}),this.StoreShortCutAct("arcade-qrcode"),this.ArcadeObject.QRCode.present()}JoinArcadeWithSocketInfo(s){this.ArcadeWSAddress=s.address,this.ArcadeSquarePort=s.square_port,this.ArcadeCdnPort=s.cdn_port,this.ArcadeFilePort=s.apache_port,this.ArcadeSocketId=s.socketId,this.ArcadeWS?this.p5toast.show({text:this.lang.text.Arcade.AlreadyUseWS}):(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var l;null===(l=this.ArcadeWS)||void 0===l||l.send(JSON.stringify({type:"reqInfo",socketId:this.ArcadeSocketId}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct())}req_file_part_base64(s,l,u){let _="",A=new Uint8Array(s.contents.slice(l*_h,(l+1)*_h));for(let B=0,ee=A.byteLength;B<ee;B++)_+=String.fromCharCode(A[B]);let O=btoa(_);return this.indexed.saveTextFileToUserPath(JSON.stringify({type:"upload",index:l}),`${u}.history`),O}save_file_part(s,l,u){this.indexed.saveBase64ToUserPath(","+u,`${s}_part/${l}.part`),this.indexed.saveTextFileToUserPath(JSON.stringify({type:"download",index:l}),`${s}.history`)}remove_req_file_info(s,l){delete s.content.transfer_index,this.indexed.removeFileFromUserPath(`${l}.history`)}modulate_thumbnail(s,l,u){var _=this;return(0,F.A)(function*(){try{let A=yield _.indexed.loadBlobFromUserPath(`${s.path}_thumbnail.png`,"image/png");const O=URL.createObjectURL(A);return s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(O),void setTimeout(()=>{URL.revokeObjectURL(O),l&&URL.revokeObjectURL(l)},100)}catch{}switch(s.viewer){case"image":try{if(s.size>1e6)return;if(!s.url)throw"No URL";if(s.thumbnail)return;if(!(yield fetch(s.url,{method:"HEAD",signal:null==u?void 0:u.signal})).ok)throw"Not ok";s.thumbnail=s.url}catch{l&&(s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(l))}break;case"text":if(s.url){const A=yield fetch(s.url,{signal:null==u?void 0:u.signal}).then(O=>O.text());s.text=A.substring(0,45).split("\n")}else new It(A=>{A.setup=()=>{A.noCanvas(),A.loadStrings(l,O=>{const ee=O.join("\n").substring(0,45);s.text=ee.split("\n"),URL.revokeObjectURL(l),A.remove()},O=>{console.log("\ud14d\uc2a4\ud2b8 \uc5f4\ub78c \ubd88\uac00: ",O),s.text=[_.lang.text.ChatRoom.downloaded],URL.revokeObjectURL(l),A.remove()})}})}l&&setTimeout(()=>{URL.revokeObjectURL(l)},100)})()}set_viewer_category(s){try{if(this.set_viewer_category_from_ext(s),"disabled"==s.viewer)if(0==s.type.indexOf("image/"))s.viewer="image";else if(0==s.type.indexOf("audio/"))s.viewer="audio";else if(0==s.type.indexOf("video/"))s.viewer="video";else{if(0!=s.type.indexOf("text/"))throw"\uc790\ub3d9\uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \ud0c0\uc785";s.viewer="text"}}catch(l){console.log("\ubd88\ud655\uc2e4\ud55c \ud0c0\uc785 \uc9c0\uc815: ",l,"/ type: ",s.type)}}set_viewer_category_from_ext(s){switch(s.file_ext){case"obj":case"stl":case"glb":case"vrm":case"gltf":s.viewer="model";break;case"pck":s.viewer="godot";break;case"png":case"jpeg":case"jpg":case"webp":case"gif":case"svg":s.viewer="image";break;case"wav":case"ogg":case"mp3":case"aac":s.viewer="audio";break;case"mp4":case"ogv":s.viewer="video";break;case"webm":try{s.viewer=0==s.type.indexOf("video/")?"video":"audio"}catch(l){console.log("\ud30c\uc77c \ud655\uc7a5\uc790 \uac80\ud1a0 \uc624\ub958: ",l,"/",s),s.viewer="disabled"}break;case"sh":case"c":case"cs":case"ts":case"js":case"cc":case"php":case"h":case"cpp":case"rs":case"java":case"gd":case"shader":case"py":case"ino":case"pde":case"asm":case"bas":case"pas":case"asp":case"html":case"xml":case"css":case"scss":case"pl":case"md":case"markdown":case"prop":case"properties":case"json":case"yml":s.viewer="code";break;case"csv":case"conf":case"log":case"txt":case"gitignore":s.viewer="text";break;case"pdf":s.viewer="pdf";break;default:s.viewer="disabled"}}GetBase64ThroughFileReader(s){return new Promise((l,u)=>{var _;let A=new FileReader;A=null!==(_=A._realReader)&&void 0!==_?_:A,A.onload=O=>{A.onload=null,A.onerror=null,l(O.target.result.replace(/"|\\|=/g,""))},A.onerror=O=>{A.onload=null,A.onerror=null,u(O)},A.readAsDataURL(s)})}Base64ToBlob(s,l=""){const u=atob(s.split(",")[1]),_=new ArrayBuffer(u.length),A=new Int8Array(_);for(let B=0,ee=u.length;B<ee;B++)A[B]=u.charCodeAt(B);return new Blob([A],{type:l})}upload_file_to_storage(s,l,u,_,A,O,B){var ee=this;return(0,F.A)(function*(){const ae=O||`upload_file_to_storage_${Date.now()}`;let _e,Re,pe=!1;A&&(_e=yield ee.try_upload_to_user_custom_fs(s,null==l?void 0:l.user_id,ae,B));try{var Ue;if(_e)throw pe=!0,"\uc0ac\uc6a9\uc790 \uc9c0\uc815\uc11c\ubc84\uc5d0\uc11c \uc774\ubbf8 \uc131\uacf5\ud568";const Le=(new Date).getTime(),ht=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),ut=s.override_name||`${null==l?void 0:l.user_id.replace(/\//g,"_")}_${Le}_${ht}.${s.file_ext}`,st=null!==(Ue=s.override_path)&&void 0!==Ue?Ue:`${null==l?void 0:l.user_id}/${Le}`.replace(/_/g,"/");_e=`${u}//${_}:${(null==l?void 0:l.apache_port)||9002}/cdn/`;const Yt=ut.replace(/\//g,"_");Re=setInterval((0,F.A)(function*(){try{const wn=yield fetch(`${u}//${_}:${(null==l?void 0:l.cdn_port)||9001}/filesize/${Yt}`,{method:"POST"}),Kn=Number(yield wn.text())/s.size,rr=Math.floor(100*Kn);ee.p5loading.update({id:ae,message:`${B?B+": ":""}${s.filename}: ${rr||0}%`,progress:Kn})}catch(wn){console.log("\ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",wn),clearInterval(Re)}}),700);let At=new FormData;const zt=new File([s.blob],ut);At.append("files",zt),At.append("path",st),At.append("filename",s.override_filename||`${ht}.${s.file_ext}`);let tn=yield fetch(`${u}//${_}:${(null==l?void 0:l.cdn_port)||9001}/cdn/${ut}`,{method:"POST",body:At});if(_e+=(yield tn.text()),!tn.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";ee.p5loading.update({id:ae,message:`${B?B+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(Re);const Tt=yield fetch(_e,{method:"HEAD"});if(O||ee.p5loading.remove(ae),!Tt.ok)throw"\uc694\uccad \uc2e4\ud328";pe=!0}catch(Le){clearInterval(Re),ee.p5loading.update({id:ae,message:`${ee.lang.text.GlobalAct.CancelingUpload}: ${s.filename}`,forceEnd:350}),console.log("cdn \ud30c\uc77c \uc5c5\ub85c\ub4dc \ub2e8\uacc4 \uc2e4\ud328:",Le)}return pe?_e:void 0})()}remove_file_from_storage(s,l){return(0,F.A)(function*(){try{let u=s.split("/cdn/");const _=u.pop();let A=u.shift(),O=new FormData;O.append("uuid",l.user_id),O.append("path",_);const B=A.lastIndexOf(":");B>5&&(A=A.substring(0,B)),yield fetch(`${A}:${(null==l?void 0:l.cdn_port)||9001}/remove/`,{method:"POST",body:O})}catch(u){console.log("remove_file_from_storage: ",u)}})()}remove_files_from_storage_with_key(s,l,u){return(0,F.A)(function*(){try{if(!s)throw"\ub300\uc0c1 \uc8fc\uc18c \uc5c6\uc74c";const _=s.lastIndexOf(":");_>5&&(s=s.substring(0,_));let A=new FormData;A.append("uuid",u.user_id),A.append("target_id",l),yield fetch(`${s}:${(null==u?void 0:u.cdn_port)||9001}/remove_key/`,{method:"POST",body:A})}catch(_){throw console.log("remove_files_from_storage_with_key: ",_),_}})()}try_upload_to_user_custom_fs(s,l,u,_,A){var O=this;return(0,F.A)(function*(){var B;const ee=u||`try_upload_to_user_custom_fs_${Date.now()}`;yield O.p5loading.update({id:ee,message:`${O.lang.text.Settings.TryToFallbackFS}: ${s.filename}`,progress:null});const ae=(new Date).getTime(),_e=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),Re=s.override_name||`${l.replace(/\//g,"_")}_${ae}_${_e}.${s.file_ext}`,Ue=null!==(B=s.override_path)&&void 0!==B?B:`${l}/${ae}`.replace(/_/g,"/");let Le=new FormData;const Pe=new File([s.blob],Re);let ht;Le.append("files",Pe),Le.append("path",Ue),Le.append("filename",s.override_filename||`${_e}.${s.file_ext}`),A||(A=localStorage.getItem("fallback_fs"));try{if(!A)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";const ut=A.split(","),st=ut.shift(),Yt=ut.shift(),At=ut.shift(),zt=st.split("://"),tn=zt.pop();let Pt=zt.shift();Pt?Pt+=":":Pt=O.checkProtocolFromAddress(tn)?"https:":"http:";let Tt=`${Pt}//${tn}:${At||9002}/cdn`;const wn=Re.replace(/\//g,"_");ht=setInterval((0,F.A)(function*(){try{const wr=yield fetch(`${Pt}//${tn}:${Yt||9001}/filesize/${wn}`,{method:"POST"}),Wr=Number(yield wr.text())/s.size,cr=Math.floor(100*Wr);O.p5loading.update({id:ee,message:`${_?_+": ":""}${s.filename}: ${cr||0}%`,progress:Wr})}catch(wr){console.log("FFS \ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",wr),clearInterval(ht)}}),700);const er=yield fetch(`${Pt}//${tn}:${Yt||9001}/cdn/${Re}`,{method:"POST",body:Le});if(Tt+=(yield er.text()),!er.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";O.p5loading.update({id:ee,message:`${_?_+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(ht);const rr=yield fetch(Tt,{method:"HEAD"});if(u||O.p5loading.remove(ee),rr.ok)return Tt;throw"\uc694\uccad \uc2e4\ud328"}catch{return clearInterval(ht),void O.p5loading.remove(ee)}})()}GetHrefThumbnail(s,l,u){var _=this;return(0,F.A)(function*(){let A=null;0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(_.checkProtocolFromAddress(s)?"https://":"http://")+s);try{let B=localStorage.getItem("fallback_fs").split("://"),ee=B.shift(),pe=B.pop().split(":").pop();if(!pe)throw"\uc9c0\uc815\ub41c FFS \uc5c6\uc74c";let _e=yield fetch(`${ee||_.checkProtocolFromAddress(pe)?"https":"http"}://${pe}:9001/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!_e.ok)throw"FFS \uc6b0\ud68c \uc2e4\ud328";A=yield _e.json()}catch{if(!l)throw"\ub300\uc0c1 \uc11c\ubc84 \uc5c6\uc74c";try{const B=yield fetch(`${l}/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!B.ok)throw`${B.statusText} (${B.status})`;A=yield B.json()}catch(B){console.log("GetHrefThumbnail: ",B)}}return A})()}checkProtocolFromAddress(s){return!!s.replace(/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/g,"")}load_openmodel_file(s,l,u,_,A){var O=this;return(0,F.A)(function*(){return yield new Promise((B,ee)=>{const ae=_.createDiv();ae.style("width","100%"),ae.style("height","100%"),ae.parent(s);const pe=_.createDiv();pe.style("position","absolute"),pe.style("top","0px"),pe.style("right","0px"),pe.style("margin","8px"),pe.style("display","flex"),pe.style("width","fit-content"),pe.style("flex-direction","column"),pe.style("gap","8px"),pe.parent(s);const _e=vr=>{vr.style("padding","8px"),vr.style("border-radius","8px"),vr.style("size","16px"),vr.style("width","100%"),vr.style("background-color","#888b"),vr.style("color","white")};let Re;const Ue=_.createButton(O.lang.text.GlobalAct.ToggleWireframe);_e(Ue),Ue.mouseClicked(()=>{var vr;null===(vr=Re)||void 0===vr||vr()}),Ue.parent(pe);let Le=[],Pe=!1;const ht=_.createDiv();ht.style("overflow","hidden"),ht.style("width","100%"),ht.style("height","fit-content"),ht.style("border-radius","8px"),ht.parent(pe);const ut=_.createDiv();ut.style("display","flex"),ut.style("width","100%"),ut.style("height","fit-content"),ut.style("max-height","160px"),ut.style("overflow-y","auto"),ut.style("flex-direction","column"),ut.style("gap","0px"),ut.parent(ht);const st=_.createButton(O.lang.text.GlobalAct.ToggleObjVisible);let Yt;st.style("background-color","#888b"),st.style("color","white"),st.style("padding","8px"),st.parent(ut),st.mouseClicked(()=>{Pe=!Pe;for(let vr=0,Ir=Le.length;vr<Ir;vr++)Pe?Le[vr].show():Le[vr].hide()});const At=_.createButton(O.lang.text.GlobalAct.ToggleSkeleton);_e(At),At.mouseClicked(()=>{var vr;null===(vr=Yt)||void 0===vr||vr()}),At.parent(pe),At.hide();const zt=_.createDiv();zt.style("position","absolute"),zt.style("top","0px"),zt.style("left","0px"),zt.style("margin","8px"),zt.style("display","flex"),zt.style("width","fit-content"),zt.style("flex-direction","column"),zt.style("gap","2px"),zt.style("pointer-events","none"),zt.style("color","white"),zt.parent(s);const tn=_.createDiv();tn.parent(zt);const Pt=_.createDiv();Pt.parent(zt);const Tt=_.createDiv();Tt.parent(zt);let wn,er=[],Kn=!1;const wr=A||"openmodel",tr=s.clientWidth,Wr=s.clientHeight,cr=new Lo(70,tr/Wr,.01,50);cr.position.set(1,1,3),cr.lookAt(new xt);const Zr=new Jo,hi=new Nr(4473924);Zr.background=hi;const Pi=new kv(16777215,1);Zr.add(Pi);const as=new Ig(10,10,12303291);Zr.add(as);const Ts=new I1(1);Zr.add(Ts);const Tr=new Lv(16777215,3);Tr.position.set(5,5,5),Zr.add(Tr),Tr.shadow.bias=-.005,Tr.shadow.mapSize.width=512,Tr.shadow.mapSize.height=512;const ti=new Rg(Tr,2);let ri,Bi;switch(Zr.add(ti),new my(cr,ae.elt).autoRotate=!0,l.file_ext){case"obj":ri=new $_;break;case"stl":ri=new H_;break;default:ri=new xx}ri.load(u,vr=>{let Ir;switch(O.p5loading.remove(wr),l.file_ext){case"obj":Ir=vr,Zr.add(Ir),At.remove();break;case"stl":const Ci=new ga({color:22015});Ir=new Ps(vr,Ci),Zr.add(Ir),At.remove();break;default:Ir=vr.scene,Zr.add(Ir);let Gr=!1;Ir.traverse(gi=>{gi.isSkinnedMesh&&(Gr=!0)}),Gr?(At.show(),Bi=new Dg(Ir),Bi.visible=!1,Zr.add(Bi),Yt=()=>{Bi.visible=!Bi.visible,At.style("background-color",Bi.visible?"var(--toast-background-color)":"#888b")}):At.remove(),vr.animations&&vr.animations.length>0&&(wn=new Kv(Ir),(vr=>{const Ir=_.createDiv();Ir.style("overflow","hidden"),Ir.style("width","100%"),Ir.style("height","fit-content"),Ir.style("border-radius","8px"),Ir.parent(pe);const hn=_.createDiv();hn.style("display","flex"),hn.style("width","100%"),hn.style("height","fit-content"),hn.style("max-height","160px"),hn.style("overflow-y","auto"),hn.style("flex-direction","column"),hn.style("gap","0px"),hn.style("size","16px"),hn.parent(Ir);const Ci=_.createButton(O.lang.text.GlobalAct.PlayAnim);Ci.style("background-color","#888b"),Ci.style("color","white"),Ci.style("padding","8px"),Ci.parent(hn),Ci.mouseClicked(()=>{Kn=!Kn;for(let Gr=0,gi=er.length;Gr<gi;Gr++)Kn?er[Gr].show():er[Gr].hide()});for(let Gr=0,gi=vr.length;Gr<gi;Gr++){const Kr=_.createButton(vr[Gr].name);Kr.style("background-color","#666b"),Kr.style("color","white"),Kr.style("padding","8px"),Kr.mouseClicked(()=>{wn.stopAllAction(),er.forEach(ci=>ci.style("background-color","#666b"));const Xi=wn.clipAction(vr[Gr]);Kr.style("background-color","var(--toast-background-color)"),Xi.play()}),Kr.hide(),Kr.parent(hn),er.push(Kr)}})(vr.animations))}{let Ci=0,Gr=0,gi=0,Kr=[];Zr.traverse(Xi=>{if(Xi.isMesh){Ci++,Kr.push(Xi);const ci=Xi.geometry;ci.isBufferGeometry?(Gr+=ci.attributes.position.count,gi+=ci.index?ci.index.count/3:ci.attributes.position.count/3):ci.isGeometry&&(Gr+=ci.vertices.length,gi+=ci.faces.length)}});for(let Xi=0,ci=Kr.length;Xi<ci;Xi++){const cn=_.createButton(Kr[Xi].name);cn.style("background-color","#666b"),cn.style("color","white"),cn.style("padding","8px"),cn.mouseClicked(()=>{Kr[Xi].visible=!Kr[Xi].visible,cn.style("background-color",Kr[Xi].visible?"#666b":"var(--toast-background-color)")}),cn.hide(),cn.parent(ut),Le.push(cn)}tn.html(`Objects: ${Ci}`),Pt.html(`Vertices: ${Gr}`),Tt.html(`Triangles: ${gi}`)}Re=()=>{let Ci;Ir.traverse(Gr=>{Gr.isMesh&&(Gr.material.wireframe=!Gr.material.wireframe,Ci=Gr.material.wireframe)}),Ue.style("background-color",Ci?"var(--toast-background-color)":"#888b")},B({resized:()=>{try{hs.setSize(0,0),cr.aspect=s.clientWidth/s.clientHeight,cr.updateProjectionMatrix(),hs.setSize(s.clientWidth,s.clientHeight)}catch(Ci){console.log("\ubaa8\ub378\ud30c\uc77c_\ud654\uba74 \ud06c\uae30 \ubcc0\uacbd \uc624\ub958: ",Ci)}},snapshot:()=>hs.domElement.toDataURL("image/png"),cleanup:()=>{for(hs.setAnimationLoop(null);Zr.children.length>0;)Zr.remove(Zr.children[0]);hs.dispose(),hs.domElement=null},canvas:hs.domElement,setpipinfo:()=>O.SetPIPableInfo(hs.domElement)})},vr=>{const Ir=vr.loaded/vr.total;O.p5loading.update({id:wr,message:`${O.lang.text.ContentViewer.OnLoadContent}: ${l.filename||l.name} (${Math.floor(100*Ir)}%)`,progress:Ir})},vr=>{O.p5loading.update({id:wr,message:`${O.lang.text.ContentViewer.OnFailedLoadContent}: ${(vr.statusText?`${vr.statusText}(${vr.status})`:vr.status)||vr}`,progress:null,forceEnd:500}),ee(vr)});let $s=0;const hs=new v_({antialias:!0,preserveDrawingBuffer:!0});hs.setSize(tr,Wr),hs.setAnimationLoop(vr=>{var Ir;const hn=(vr-$s)/1e3;$s=vr,null===(Ir=wn)||void 0===Ir||Ir.update(hn),hs.render(Zr,cr)}),hs.shadowMap.enabled=!0,hs.shadowMap.type=S,ae.elt.appendChild(hs.domElement)})})()}StoreShortCutAct(s){this.CacheShortCut[s]=this.p5KeyShortCut,this.p5KeyShortCut={}}GetConnectedAddress(){return`${location.protocol}//${location.host}${window.sub_path}`}GetHeaderAddress(){var s=this;return(0,F.A)(function*(){let l;try{let u=s.GetConnectedAddress(),_=new AbortController;const A=setTimeout(()=>{_.abort("\uc8fc\uc18c \uac80\ud1a0 \uc2dc\uac04 \ucd08\uacfc"),_=null},250);let O=yield fetch(u,{method:"HEAD",signal:_.signal});if(clearTimeout(A),!O.ok)throw"\uc8fc\uc18c \uc5c6\uc74c";l=u}catch{l=s.CustomLocalAddress||"https://is2you2.github.io/pjcone_pwa/"}return l})()}RestoreShortCutAct(s){this.CacheShortCut[s]&&Object.keys(this.CacheShortCut[s]).length&&(this.p5KeyShortCut=this.CacheShortCut[s]),delete this.CacheShortCut[s]}ClearShortCutAct(){let s=Object.keys(this.CacheShortCut);for(let l of s)delete this.CacheShortCut[l]}from_camera(s,l,u){var _=this;return(0,F.A)(function*(){const A=u||`from_camera_${Date.now()}`;let O={};_.p5loading.update({id:A,message:_.lang.text.ChatRoom.LoadImageFromCamera});try{const B=yield I.getPhoto({quality:90,resultType:C.Base64,source:Z.Camera});O.filename=`Camera_${(new Date).toLocaleString().replace(/[:|.|\/]/g,"_")}.${B.format}`,O.file_ext=B.format,O.base64="data:image/jpeg;base64,"+B.base64String,_.p5loading.update({id:A,image:O.base64}),O.thumbnail=_.sanitizer.bypassSecurityTrustUrl(O.base64),O.type=`image/${B.format}`,O.typeheader="image",O.content_related_creator=[{user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"camera"}],O.content_creator={user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"camera"},O.path=`${s}${O.filename}`,O.viewer="image";let ae=yield _.indexed.saveBase64ToUserPath(O.base64,O.path);O.blob=new Blob([ae],{type:O.type}),O.size=O.blob.size}catch(B){throw _.p5loading.update({id:A,message:`${_.lang.text.GlobalAct.ErrorFromCamera}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`,image:null,forceEnd:350}),console.log("\uce74\uba54\ub77c \ud589\ub3d9 \uc2e4\ud328: ",B),B}return _.p5loading.remove(A),O})()}download_file(s,l){var u=this;return(0,F.A)(function*(){const _=`download_file_${l||Date.now()}`;if(yield u.p5loading.update({id:_,message:`${u.lang.text.ContentViewer.Download}: ${s.filename||s.name}`,forceEnd:null}),yield u.indexed.checkIfFileExist(s.alt_path||s.path))u.indexed.DownloadFileFromUserPath(s.alt_path||s.path,s.type,s.filename||s.name);else if(s.url)try{const O=yield u.downloadWithProgressAsBlob(s.url,void 0,_),B=URL.createObjectURL(O);let ee=document.createElement("a");ee.target="_blank",ee.href=B,ee.download=s.filename||s.name,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),ee.remove(),URL.revokeObjectURL(B)}catch(O){console.log("\ub2e4\uc6b4\ubc1b\uae30 \uc2e4\ud328: ",O),u.p5toast.show({text:`${s.filename||s.name} ${u.lang.text.Nakama.FailedDownload}: ${(O.statusText?`${O.statusText}(${O.status})`:O.status)||O}`,lateable:!0})}u.p5loading.remove(_)})()}selected_blobFile_callback_act(s,l,u,_="loaded",A=[]){let O={};return O.filename=s.name,O.file_ext=s.name.split(".").pop()||s.type||this.lang.text.ChatRoom.unknown_ext,O.size=s.size,O.type=s.type||s.type_override,O.path=`${l}${O.filename}`,O.blob=s,O.content_related_creator=[...A],O.content_related_creator.length<2&&O.content_related_creator.push({user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_}),O.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_},this.set_viewer_category(O),O}voidDraw_fileAct_callback(s,l,u,_){var A=this;return(0,F.A)(function*(){let O={};O.filename=s.data.name,O.file_ext=s.data.file_ext||"png",O.type=s.data.type||"image/png",O.viewer="image",_?(O.content_related_creator=_,O.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}):(O.content_related_creator=[{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}],O.content_creator={timestamp:(new Date).getTime(),display_name:A.CallbackNakama.users.self.display_name,various:"voidDraw"}),O.typeheader="image",O.path=`${l}${O.filename}`;const B=URL.createObjectURL(s.data.img);O.thumbnail=A.sanitizer.bypassSecurityTrustUrl(B),yield A.indexed.saveBlobToUserPath(s.data.img,O.path);const ee=new Blob([s.data.img],{type:O.type});return O.blob=new File([ee],s.data.name),O.size=O.blob.size,A.p5loading.remove(s.data.loadingCtrl),setTimeout(()=>{URL.revokeObjectURL(B)},2500),O})()}TextEditorNewFileName(){let s=new Date;return`texteditor_${s.getUTCFullYear()}-${("0"+(s.getMonth()+1)).slice(-2)}-${("0"+s.getDate()).slice(-2)}_${("0"+s.getHours()).slice(-2)}-${("0"+s.getMinutes()).slice(-2)}-${("0"+s.getSeconds()).slice(-2)}.txt`}TextEditorAfterAct(s,l){let u={};return"html"===(u.content_creator={user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"textedit"},u.content_related_creator=[],u.content_related_creator.push(u.content_creator),u.blob=s.blob,u.path=s.path,u.size=s.blob.size,u.filename=s.blob.name||this.TextEditorNewFileName(),u.file_ext=u.filename.split(".").pop(),u.viewer="text",u.file_ext)?(u.type="text/html",u.viewer="code"):u.type="text/plain",u.typeheader="text",u}open_custom_site(s,l){try{let O,u=s.split("://"),A=u.pop().split(":");A.length>1&&A.pop();try{O="https"==u[0]||"wss"==u[0]}catch{O=this.checkProtocolFromAddress(A[0])}A[0]="//"+A[0],A.unshift(O?"https":"http"),window.open(A.join(":")+`:${l||9001}`,"_blank","noopener,noreferrer")}catch{}}open_link(s){0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(this.checkProtocolFromAddress(s)?"https://":"http://")+s),s&&window.open(s,"_blank","noopener,noreferrer");const l=document.activeElement;l&&l.blur()}GetValueFromClipboard(s){var l=this;return(0,F.A)(function*(){let u={type:"text/plain",value:""};const _=s||"clipboardAct";yield l.p5loading.update({id:_,message:l.lang.text.GlobalAct.ClipboardPaste,image:null,forceEnd:null});try{const A=yield navigator.clipboard.read();for(let O of A)for(let B of O.types){let ee=yield O.getType(B);if("image/png"==B){u.type=B;let ae=new File([ee],"image.png",{type:B});u.value=ae;const pe=URL.createObjectURL(ae);l.p5loading.update({id:_,image:pe}),setTimeout(()=>{URL.revokeObjectURL(pe)},100);break}if("text/plain"==B){u.type=B,u.value=yield ee.text();break}}return l.p5loading.remove(_),u}catch(A){return console.error("\ud074\ub9bd\ubcf4\ub4dc\uc5d0\uc11c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",A),l.p5toast.show({text:`${l.lang.text.GlobalAct.FailedToReadClipboard}: ${(A.statusText?`${A.statusText}(${A.status})`:A.status)||A}`}),u.type="error",u.value=A,l.p5loading.remove(_),u}})()}WriteValueToClipboard(s,l,u,_){var A=this;return(0,F.A)(function*(){if(!l)return;const O=_||"clipboardAct";yield A.p5loading.update({id:O,message:A.lang.text.GlobalAct.ClipboardCopy,image:null,forceEnd:null});try{let B={},ee=l;switch(s){case"text/plain":ee=new Blob([l],{type:s}),l=A.truncateString(A.HTMLEncode(l),80);break;default:if(!(s.indexOf("image/")>=0))break;{const pe=yield createImageBitmap(ee),_e=document.createElement("canvas");_e.width=Math.min(2*window.innerWidth,1024),_e.height=pe.height/pe.width*_e.width,_e.getContext("2d").drawImage(pe,0,0,_e.width,_e.height),ee=yield new Promise(Ue=>{_e.toBlob(Le=>Ue(Le),"image/png")}),s="image/png"}case"image/png":const ae=URL.createObjectURL(ee);A.p5loading.update({id:O,image:ae}),setTimeout(()=>{URL.revokeObjectURL(ae)},100)}B[s]=ee,yield navigator.clipboard.write([new ClipboardItem(B)]),A.p5loading.update({id:O,message:`${A.lang.text.GlobalAct.PCClipboard}: ${u||l}`}),A.p5loading.remove(O)}catch(B){throw console.log("\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud558\uae30 \uc624\ub958: ",B),A.p5toast.show({text:`${A.lang.text.GlobalAct.ClipboardFailed}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`}),A.p5loading.update({id:O,forceEnd:350}),B}})()}truncateString(s,l){return(null==s?void 0:s.length)>l?s.slice(0,l-1)+"\u2026":s}HTMLEncode(s){let l=(s=[...s]).length,u=[];for(;l--;){let _=s[l].codePointAt(0);u[l]=_<65||_>127||_>90&&_<97?"&#"+_+";":s[l]}return u.join("")}HTMLDecode(s){const l={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};return(s=s.replace(/&[a-zA-Z]+;/g,u=>l[u]||u)).replace(/&#(\d+);/g,(u,_)=>String.fromCodePoint(Number(_)))}StopAndSaveVoiceRecording(){var s=this;return(0,F.A)(function*(){try{let l=yield D.R.stopRecording();s.useVoiceRecording=null;let u=s.Base64ToBlob(`${l.value.mimeType},${l.value.recordDataBase64}`);return u.name=`${s.lang.text.ChatRoom.VoiceRecord}.${l.value.mimeType.split("/").pop().split(";")[0]}`,u.type_override=l.value.mimeType,u}catch(l){throw s.useVoiceRecording=null,s.p5toast.show({text:`${s.lang.text.AddPost.FailedToSaveVoice}:${(l.statusText?`${l.statusText}(${l.status})`:l.status)||l}`}),l}})()}InstantCallSend(s){this.InstantCallWSClient&&this.InstantCallWSClient.readyState==this.InstantCallWSClient.OPEN&&this.InstantCallWSClient.send(s)}ActLikeModal(s,l){var u=this;return(0,F.A)(function*(){yield u.RemoveAllModals(),u.navCtrl.navigateForward(s,{animation:sn.V5,state:l})})()}subscribeToPush(s){var l=this;return(0,F.A)(function*(){return yield(yield navigator.serviceWorker.register(`${window.sub_path}assets/sw.js`)).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l.urlBase64ToUint8Array(s)})})()}urlBase64ToUint8Array(s){const u=(s+"=".repeat((4-s.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_=atob(u);return new Uint8Array([..._].map(A=>A.charCodeAt(0)))}unsubscribeFromPush(s){return(0,F.A)(function*(){const l=yield navigator.serviceWorker.getRegistration(`${window.sub_path}assets/sw.js`);if(!l)return;const u=yield l.pushManager.getSubscription();u?(yield u.unsubscribe())?yield fetch(`${s}/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:u.endpoint})}):console.warn("\uad6c\ub3c5 \ucde8\uc18c \uc2e4\ud328"):console.log("\ud604\uc7ac \ud478\uc2dc \uad6c\ub3c5 \uc5c6\uc74c")})()}CheckIfCanBlankSocketAddress(s){let l=this.CustomLocalAddress.split("://");const u=l.pop().split("/")[0].split(":")[0];let _=l.pop()||this.checkProtocolFromAddress(u),A=s.split("://");const O=A.pop();let B=A.pop()||this.checkProtocolFromAddress(O);return("https"==_&&"wss"==B||"http"==_&&"ws"==B)&&u==O?"":s}}return(v=t).\u0275fac=function(s){return new(s||v)(ru.KVO(vh.W3),ru.KVO(Ux.G),ru.KVO(Bx.y),ru.KVO(Vx.up),ru.KVO(Gx.n),ru.KVO(vh.hG),ru.KVO(Fx.q9),ru.KVO(zx.f),ru.KVO($x.r))},v.\u0275prov=ru.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}),t})()},755:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{n:()=>a});var F=Ve(467),j=Ve(3953),It=Ve(9900),sn=Ve(4234);let a=(()=>{var be;class Z{constructor(C,b){this.p5toast=C,this.lang=b,this.PortalTabCallback=[]}RunInitCallBacks(){for(;this.PortalTabCallback.length;){const C=this.PortalTabCallback.shift();null==C||C()}}initialize(C=(()=>{})){if(this.ionicDB)return this.RunInitCallBacks(),void C();let b=indexedDB.open("/ionicfs",10),w=()=>{b.onsuccess=null,b.onupgradeneeded=null,b.onerror=null};b.onsuccess=I=>{I.target.result.close(),indexedDB.open("/ionicfs",11).onsuccess=f=>{this.ionicDB=f.target.result,this.RunInitCallBacks(),C(),w()}},b.onupgradeneeded=I=>{I.target.result.createObjectStore("FILE_DATA")},b.onerror=I=>{indexedDB.open("/ionicfs",11).onsuccess=d=>{this.ionicDB=d.target.result,this.RunInitCallBacks(),C(),w()}}}GetGodotIndexedDB(){var C=this;return(0,F.A)(function*(){if(!C.godotDB)return new Promise((b,w)=>{let I=indexedDB.open("/userfs",21),D=()=>{I.onsuccess=null,I.onerror=null};I.onsuccess=d=>{C.godotDB=I.result,D(),b(void 0)},I.onerror=d=>{console.error("IndexedDB initialized failed: ",d),D(),w(d)}})})()}createRecursiveDirectory(C,b=this.ionicDB){let w=C.lastIndexOf("/"),I=C.substring(0,w);I&&this.checkIfFileExist(I).then(D=>{if(D)return void this.createRecursiveDirectory(I,b);let d=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${I}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),this.createRecursiveDirectory(I,b),f()},d.onerror=h=>{console.error("IndexedDB createRecursiveDirectory failed: ",h),f()}})}createDirectory(C){return new Promise((b,w)=>{this.checkIfFileExist(C).then(I=>{I&&w(this.lang.text.UserFsDir.AlreadyExistFolder);let D=this.ionicDB.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${C}`),d=()=>{D.onsuccess=null,D.onerror=null};D.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),d(),b(void 0)},D.onerror=f=>{console.error("IndexedDB createRecursiveDirectory failed: ",f),d(),w(f)}})})}saveTextFileToUserPath(C,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:(new TextEncoder).encode(C)},`/userfs/${b}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),f(),I(h)},d.onerror=h=>{f(),D(h)}})}saveBase64ToUserPath(C,b,w=this.ionicDB){return new Promise((I,D)=>{let d=atob(C.split(",")[1]),f=new ArrayBuffer(d.length),h=new Int8Array(f);for(let m=0,g=d.length;m<g;m++)h[m]=d.charCodeAt(m);this.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,I(h)},p.onerror=m=>{p.onsuccess=null,p.onerror=null,D(m)}})}saveInt8ArrayToUserPath(C,b,w=this.ionicDB){return new Promise((I,D)=>{this.createRecursiveDirectory(b,w);let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:C},`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I()},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}saveBlobToUserPath(C,b,w=this.ionicDB){var I=this;return new Promise(function(){var D=(0,F.A)(function*(d,f){let h;try{let m=yield C.arrayBuffer();h=new Int8Array(m)}catch(m){f(m)}I.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,d(h)},p.onerror=m=>{p.onsuccess=null,p.onerror=null,f(m)}});return function(d,f){return D.apply(this,arguments)}}())}saveFileToUserPath(C,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put(C,`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I(f)},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}checkIfFileExist(C,b=this.ionicDB){return new Promise((w,I)=>{let D=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").count(`/userfs/${C}`);D.onsuccess=d=>{let f=d.target.result;D.onsuccess=null,D.onerror=null,w(f)},D.onerror=d=>{D.onsuccess=null,D.onerror=null,I(d)}})}GetFileListFromDB(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").getAllKeys();return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;for(let h=f.length-1;h>=0;h--)f[h].includes(C)?f[h]=f[h].substring(8):f.splice(h,1);w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}GetFileInfoFromDB(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}loadTextFromUserPath(C,b=((I,D)=>{}),w=this.ionicDB){return new Promise(I=>{let D=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{if(d.target.result){let f=(new TextDecoder).decode(d.target.result.contents);D.onsuccess=null,D.onerror=null,b(!0,f),I(f)}else D.onsuccess=null,D.onerror=null,b(!1,`No file: , ${C}`),I(void 0)},D.onerror=d=>{console.error("IndexedDB loadTextFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null,I(void 0)}})}loadBlobFromUserPath(C,b,w=this.ionicDB){let I=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((D,d)=>{I.onsuccess=f=>{try{let h=new Blob([f.target.result.contents],{type:b});I.onsuccess=null,I.onerror=null,D(h)}catch(h){I.onsuccess=null,I.onerror=null,d(h)}},I.onerror=f=>{I.onsuccess=null,I.onerror=null,d(f)}})}DownloadFileFromUserPath(C,b,w,I=this.ionicDB){let D=I.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{try{let f=new Blob([d.target.result.contents],{type:b||"application/octet-stream"}),h=URL.createObjectURL(f),p=document.createElement("a");p.download=w,p.href=h,document.body.appendChild(p),p.click(),document.body.removeChild(p),p.remove(),URL.revokeObjectURL(h)}catch(f){console.error("DownloadFileFromUserPath: ",f),this.p5toast.show({text:`${this.lang.text.IndexedDB.FailedToDownloadFile}: ${(f.statusText?`${f.statusText}(${f.status})`:f.status)||f}`})}D.onsuccess=null,D.onerror=null},D.onerror=d=>{console.error("IndexedDB DownloadFileFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null}}removeFileFromUserPath(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").delete(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{w.onsuccess=null,w.onerror=null,I(d)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}}return(be=Z).\u0275fac=function(C){return new(C||be)(j.KVO(It.G),j.KVO(sn.y))},be.\u0275prov=j.jDH({token:be,factory:be.\u0275fac,providedIn:"root"}),Z})()},4234:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{y:()=>a});var F=Ve(467),j=Ve(8326),sn=Ve(3953);let a=(()=>{var be;class Z{constructor(){this.text={Portal:{},Main:{},Arcade:{},Subscribes:{},ChatRoom:{},Profile:{},GroupServer:{},Settings:{},Community:{},MinimalChat:{},voidDraw:{},PostViewer:{},TodoDetail:{},InstantCall:{},ContentViewer:{},WebRTCDevManager:{}},this.setable=[],this.lang=navigator.language.split("-")[0];let C=localStorage.getItem("lang");C&&(this.lang=C)}load_selected_lang(C="assets/data/translate.csv"){var b=this;return(0,F.A)(function*(){return yield new Promise((w,I)=>{new j(D=>{D.setup=()=>{D.noCanvas(),D.loadTable(C,"csv","header",d=>{try{let h,f=Object.keys(d.rows[0].obj);b.setable.length=0;for(let p of f)"#"!=p&&b.setable.push({value:p,display_name:d.rows[0].obj[p]});d.columns.includes(b.lang)||(b.lang=b.setable[0].value),localStorage.setItem("lang",b.lang);for(let p=0,m=d.rows.length;p<m;p++)"#"==d.rows[p].obj["#"].charAt(0)?(h=d.rows[p].obj["#"].substring(3),b.text[h]||(b.text[h]={})):h&&(b.text[h][d.rows[p].obj["#"]]=d.rows[p].obj[b.lang]);b.Callback_nakama&&b.Callback_nakama(),C&&URL.revokeObjectURL(C),D.remove(),w(void 0)}catch(f){console.log("\uc0ac\uc6a9\uc790 \uc5b8\uc5b4 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",f),C&&URL.revokeObjectURL(C),D.remove(),b.load_selected_lang(),w(void 0)}},d=>{console.error("\ub0b4\ubd80 \ubb38\uc11c \uc77d\uae30 \uc2e4\ud328: ",d),C&&URL.revokeObjectURL(C),D.remove(),I(d)})}})})})()}}return(be=Z).\u0275fac=function(C){return new(C||be)},be.\u0275prov=sn.jDH({token:be,factory:be.\u0275fac,providedIn:"root"}),Z})()},5547:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{r:()=>be});var F=Ve(467),j=Ve(92),It=Ve(3953),sn=Ve(755),a=Ve(3307);let be=(()=>{var Z;class M{constructor(b,w){this.indexed=b,this.p5loading=w,this.settings={silent:{favicon:!0,diychat:!0,simplechat:!0,todo:!0,engineppt:!0,arcade:!0,voidDraw:!0},simplify:!1,vibrate:!1},this.Current="",this.WebNoties={}}change_silent_settings(b){this.settings.silent[b]=!this.settings.silent[b],this.indexed.saveTextFileToUserPath(JSON.stringify(this.settings),"notification_settings.json")}load_settings(){this.indexed.loadTextFromUserPath("notification_settings.json",(b,w)=>{b&&w&&(this.settings=JSON.parse(w)),"boolean"==typeof this.settings.silent&&(this.settings.silent={favicon:this.settings.silent,diychat:this.settings.silent,simplechat:this.settings.silent,todo:this.settings.silent,engineppt:this.settings.silent,arcade:this.settings.silent,voidDraw:this.settings.silent})})}initialize(){var b=this;return(0,F.A)(function*(){b.ClearNoti(11),"serviceWorker"in navigator?(Notification.requestPermission().then(w=>{"granted"===w?console.log("\uc54c\ub9bc \uad8c\ud55c\uc774 \ud5c8\uc6a9\ub428."):(console.log("\uc54c\ub9bc \uad8c\ud55c\uc774 \uac70\ubd80\ub428."),b.settings.simplify=!0)},w=>{console.error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800: ",w)}),navigator.serviceWorker.addEventListener("message",w=>{if(w.data.reply){if("12"===w.data.id){let D={msg:w.data.reply};if(!D.msg.trim())return;D.name=b.NakamaCallback.users.self.display_name,b.Sq_client.send(JSON.stringify(D))}}else{if(w.data.action)switch(w.data.action){case"done":{let D;try{if(!w.data.data.isOfficial)throw"\uc6d0\uaca9 \ud560 \uc77c \uc544\ub2d8";D=`todo/${w.data.data.id}_${w.data.data.isOfficial}_${w.data.data.target}/info.todo`}catch{D=`todo/${w.data.data.id}/info.todo`}b.indexed.loadTextFromUserPath(D).then(d=>{var f;let h=JSON.parse(d);null===(f=b.NakamaCallback)||void 0===f||f.doneTodo(h)}).catch(d=>{console.log("\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",d)})}break;case"delete":{let D;try{if(!w.data.data.isOfficial)throw"\uc6d0\uaca9 \ud560 \uc77c \uc544\ub2d8";D=`todo/${w.data.data.id}_${w.data.data.isOfficial}_${w.data.data.target}/info.todo`}catch{D=`todo/${w.data.data.id}/info.todo`}b.indexed.loadTextFromUserPath(D).then(d=>{var f;let h=JSON.parse(d);null===(f=b.NakamaCallback)||void 0===f||f.deleteTodoFromStorage(!0,h)}).catch(d=>{console.log("\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",d)})}}else if(window.swRegListenerCallback[w.data.id])window.swRegListenerCallback[w.data.id]();else{var I;const D=null===(I=w.data)||void 0===I||null===(I=I.data)||void 0===I?void 0:I.data;!function(){var f=(0,F.A)(function*(){try{const h=b.GlobalCallback.CatchGETs(D.url)||{},p=yield b.NakamaCallback.AddressToQRCodeAct(h,!0);yield b.NakamaCallback.act_from_QRInfo(p)}catch(h){console.log("\uc54c\ub9bc \ud074\ub9ad \ud589\ub3d9 \uc624\ub958: ",h)}});return function(){return f.apply(this,arguments)}}()()}delete window.swRegListenerCallback[w.data.id]}})):console.log("Service Worker is not supported in this browser.")})()}PushLocal(b,w,I=(()=>{}),D=!1){var d=this;return(0,F.A)(function*(){const f=document.hasFocus();if(!D){if(f&&d.Current===w||!d.settings.silent[b.smallIcon_ln||w||"favicon"])return;const p=d.settings.simplify||f;if(p)return void d.p5loading.update({id:`${b.id||w}`,message:b.body?`${b.title}: ${b.body}`:b.title,clickable:I,image:b.image||b.icon||(b.smallIcon_ln?`assets/icon/${b.smallIcon_ln}.png`:void 0),progress:1,forceEnd:3500,bgcolor:b.bgcolor,soundAlert:p})}const h={badge:b.icon||`assets/badge/${b.smallIcon_ln||w||"favicon"}.png`,body:b.body,icon:b.icon||`assets/icon/${b.smallIcon_ln||w||"favicon"}.png`,image:b.image,silent:!d.settings.silent[b.smallIcon_ln]||!1,tag:`${b.id}`,actions:b.actions_wm,data:b.data_wm,requireInteraction:!!b.actions_wm};try{if(d.WebNoties[b.id]){try{d.WebNoties[b.id].close()}catch{}delete d.WebNoties[b.id]}if(j.Yl)delete h.actions,d.WebNoties[b.id]=new Notification(b.title,{...h}),d.WebNoties[b.id].onclick=()=>{I(),window.focus(),d.WebNoties[b.id].close()};else{yield window.swReg.showNotification(b.title,{...h});let p=yield window.swReg.getNotifications();for(let m=0,g=p.length;m<g;m++)if(p[m].tag==`${b.id}`){d.WebNoties[b.id]=p[m];break}window.swRegListenerCallback[b.id]=()=>{I(),window.focus(),d.WebNoties[b.id].close()}}}catch(p){console.log("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958: ",p)}})()}ClearNoti(b){this.p5loading.remove(`${b}`),this.WebNoties[b]&&this.WebNoties[b].close()}}return(Z=M).\u0275fac=function(b){return new(b||Z)(It.KVO(sn.n),It.KVO(a.f))},Z.\u0275prov=It.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),M})()},4237:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{I:()=>Er,X:()=>Lr});var I,D,F=Ve(467),j=Object.defineProperty,It=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,be=(te,Ie,Qe)=>Ie in te?j(te,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Qe}):te[Ie]=Qe,Z=(te,Ie)=>{for(var Qe in Ie||(Ie={}))sn.call(Ie,Qe)&&be(te,Qe,Ie[Qe]);if(It)for(var Qe of It(Ie))a.call(Ie,Qe)&&be(te,Qe,Ie[Qe]);return te},M=(te,Ie,Qe)=>new Promise((T,N)=>{var U=H=>{try{ie(Qe.next(H))}catch(de){N(de)}},L=H=>{try{ie(Qe.throw(H))}catch(de){N(de)}},ie=H=>H.done?T(H.value):Promise.resolve(H.value).then(U,L);ie((Qe=Qe.apply(te,Ie)).next())}),C=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof C<"u"&&C,b_searchParams="URLSearchParams"in C,b_iterable="Symbol"in C&&"iterator"in Symbol,b_blob="FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch{return!1}}(),b_formData="FormData"in C,b_arrayBuffer="ArrayBuffer"in C;function d(te){if("string"!=typeof te&&(te=String(te)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(te)||""===te)throw new TypeError('Invalid character in header field name: "'+te+'"');return te.toLowerCase()}function f(te){return"string"!=typeof te&&(te=String(te)),te}function h(te){var Ie={next:function(){var Qe=te.shift();return{done:void 0===Qe,value:Qe}}};return b_iterable&&(Ie[Symbol.iterator]=function(){return Ie}),Ie}function p(te){this.map={},te instanceof p?te.forEach(function(Ie,Qe){this.append(Qe,Ie)},this):Array.isArray(te)?te.forEach(function(Ie){this.append(Ie[0],Ie[1])},this):te&&Object.getOwnPropertyNames(te).forEach(function(Ie){this.append(Ie,te[Ie])},this)}function m(te){if(te.bodyUsed)return Promise.reject(new TypeError("Already read"));te.bodyUsed=!0}function g(te){return new Promise(function(Ie,Qe){te.onload=function(){Ie(te.result)},te.onerror=function(){Qe(te.error)}})}function x(te){var Ie=new FileReader,Qe=g(Ie);return Ie.readAsArrayBuffer(te),Qe}function k(te){if(te.slice)return te.slice(0);var Ie=new Uint8Array(te.byteLength);return Ie.set(new Uint8Array(te)),Ie.buffer}function q(){return this.bodyUsed=!1,this._initBody=function(te){this.bodyUsed=this.bodyUsed,this._bodyInit=te,te?"string"==typeof te?this._bodyText=te:b_blob&&Blob.prototype.isPrototypeOf(te)?this._bodyBlob=te:b_formData&&FormData.prototype.isPrototypeOf(te)?this._bodyFormData=te:b_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)?this._bodyText=te.toString():b_arrayBuffer&&b_blob&&function w(te){return te&&DataView.prototype.isPrototypeOf(te)}(te)?(this._bodyArrayBuffer=k(te.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(te)||D(te))?this._bodyArrayBuffer=k(te):this._bodyText=te=Object.prototype.toString.call(te):this._bodyText="",this.headers.get("content-type")||("string"==typeof te?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b_blob&&(this.blob=function(){var te=m(this);if(te)return te;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(x)}),this.text=function(){var te=m(this);if(te)return te;if(this._bodyBlob)return function E(te){var Ie=new FileReader,Qe=g(Ie);return Ie.readAsText(te),Qe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function S(te){for(var Ie=new Uint8Array(te),Qe=new Array(Ie.length),T=0;T<Ie.length;T++)Qe[T]=String.fromCharCode(Ie[T]);return Qe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b_formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}b_arrayBuffer&&(I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],D=ArrayBuffer.isView||function(te){return te&&I.indexOf(Object.prototype.toString.call(te))>-1}),p.prototype.append=function(te,Ie){te=d(te),Ie=f(Ie);var Qe=this.map[te];this.map[te]=Qe?Qe+", "+Ie:Ie},p.prototype.delete=function(te){delete this.map[d(te)]},p.prototype.get=function(te){return te=d(te),this.has(te)?this.map[te]:null},p.prototype.has=function(te){return this.map.hasOwnProperty(d(te))},p.prototype.set=function(te,Ie){this.map[d(te)]=f(Ie)},p.prototype.forEach=function(te,Ie){for(var Qe in this.map)this.map.hasOwnProperty(Qe)&&te.call(Ie,this.map[Qe],Qe,this)},p.prototype.keys=function(){var te=[];return this.forEach(function(Ie,Qe){te.push(Qe)}),h(te)},p.prototype.values=function(){var te=[];return this.forEach(function(Ie){te.push(Ie)}),h(te)},p.prototype.entries=function(){var te=[];return this.forEach(function(Ie,Qe){te.push([Qe,Ie])}),h(te)},b_iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var J=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(te,Ie){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Qe=(Ie=Ie||{}).body;if(te instanceof V){if(te.bodyUsed)throw new TypeError("Already read");this.url=te.url,this.credentials=te.credentials,Ie.headers||(this.headers=new p(te.headers)),this.method=te.method,this.mode=te.mode,this.signal=te.signal,!Qe&&null!=te._bodyInit&&(Qe=te._bodyInit,te.bodyUsed=!0)}else this.url=String(te);if(this.credentials=Ie.credentials||this.credentials||"same-origin",(Ie.headers||!this.headers)&&(this.headers=new p(Ie.headers)),this.method=function G(te){var Ie=te.toUpperCase();return J.indexOf(Ie)>-1?Ie:te}(Ie.method||this.method||"GET"),this.mode=Ie.mode||this.mode||null,this.signal=Ie.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Qe)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Qe),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==Ie.cache&&"no-cache"!==Ie.cache)){var T=/([?&])_=[^&]*/;T.test(this.url)?this.url=this.url.replace(T,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function K(te){var Ie=new FormData;return te.trim().split("&").forEach(function(Qe){if(Qe){var T=Qe.split("="),N=T.shift().replace(/\+/g," "),U=T.join("=").replace(/\+/g," ");Ie.append(decodeURIComponent(N),decodeURIComponent(U))}}),Ie}function $(te){var Ie=new p;return te.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(T){return 0===T.indexOf("\n")?T.substr(1,T.length):T}).forEach(function(T){var N=T.split(":"),U=N.shift().trim();if(U){var L=N.join(":").trim();Ie.append(U,L)}}),Ie}function ne(te,Ie){if(!(this instanceof ne))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Ie||(Ie={}),this.type="default",this.status=void 0===Ie.status?200:Ie.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===Ie.statusText?"":""+Ie.statusText,this.headers=new p(Ie.headers),this.url=Ie.url||"",this._initBody(te)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},q.call(V.prototype),q.call(ne.prototype),ne.prototype.clone=function(){return new ne(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},ne.error=function(){var te=new ne(null,{status:0,statusText:""});return te.type="error",te};var Y=[301,302,303,307,308];ne.redirect=function(te,Ie){if(-1===Y.indexOf(Ie))throw new RangeError("Invalid status code");return new ne(null,{status:Ie,headers:{location:te}})};var we=C.DOMException;try{new we}catch{(we=function(Ie,Qe){this.message=Ie,this.name=Qe;var T=Error(Ie);this.stack=T.stack}).prototype=Object.create(Error.prototype),we.prototype.constructor=we}function Se(te,Ie){return new Promise(function(Qe,T){var N=new V(te,Ie);if(N.signal&&N.signal.aborted)return T(new we("Aborted","AbortError"));var U=new XMLHttpRequest;function L(){U.abort()}U.onload=function(){var H={status:U.status,statusText:U.statusText,headers:$(U.getAllResponseHeaders()||"")};H.url="responseURL"in U?U.responseURL:H.headers.get("X-Request-URL");var de="response"in U?U.response:U.responseText;setTimeout(function(){Qe(new ne(de,H))},0)},U.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},U.onabort=function(){setTimeout(function(){T(new we("Aborted","AbortError"))},0)},U.open(N.method,function ie(H){try{return""===H&&C.location.href?C.location.href:H}catch{return H}}(N.url),!0),"include"===N.credentials?U.withCredentials=!0:"omit"===N.credentials&&(U.withCredentials=!1),"responseType"in U&&(b_blob?U.responseType="blob":b_arrayBuffer&&N.headers.get("Content-Type")&&-1!==N.headers.get("Content-Type").indexOf("application/octet-stream")&&(U.responseType="arraybuffer")),!Ie||"object"!=typeof Ie.headers||Ie.headers instanceof p?N.headers.forEach(function(H,de){U.setRequestHeader(de,H)}):Object.getOwnPropertyNames(Ie.headers).forEach(function(H){U.setRequestHeader(H,f(Ie.headers[H]))}),N.signal&&(N.signal.addEventListener("abort",L),U.onreadystatechange=function(){4===U.readyState&&N.signal.removeEventListener("abort",L)}),U.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}Se.polyfill=!0,C.fetch||(C.fetch=Se,C.Headers=p,C.Request=V,C.Response=ne);var oe="function"==typeof atob,ge="function"==typeof btoa,re="function"==typeof Buffer,Q="function"==typeof TextDecoder?new TextDecoder:void 0,fe="function"==typeof TextEncoder?new TextEncoder:void 0,it=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),le=(te=>{let Ie={};return te.forEach((Qe,T)=>Ie[Qe]=T),Ie})(it),z=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ye=String.fromCharCode.bind(String),je="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):te=>new Uint8Array(Array.prototype.slice.call(te,0)),gt=te=>te.replace(/[^A-Za-z0-9\+\/]/g,""),$t=ge?te=>btoa(te):re?te=>Buffer.from(te,"binary").toString("base64"):te=>{let Ie,Qe,T,N,U="";const L=te.length%3;for(let ie=0;ie<te.length;){if((Qe=te.charCodeAt(ie++))>255||(T=te.charCodeAt(ie++))>255||(N=te.charCodeAt(ie++))>255)throw new TypeError("invalid character found");Ie=Qe<<16|T<<8|N,U+=it[Ie>>18&63]+it[Ie>>12&63]+it[Ie>>6&63]+it[63&Ie]}return L?U.slice(0,L-3)+"===".substring(L):U},yt=re?te=>Buffer.from(te).toString("base64"):te=>{let Qe=[];for(let T=0,N=te.length;T<N;T+=4096)Qe.push(ye.apply(null,te.subarray(T,T+4096)));return $t(Qe.join(""))},Ut=te=>{if(te.length<2)return(Ie=te.charCodeAt(0))<128?te:Ie<2048?ye(192|Ie>>>6)+ye(128|63&Ie):ye(224|Ie>>>12&15)+ye(128|Ie>>>6&63)+ye(128|63&Ie);var Ie=65536+1024*(te.charCodeAt(0)-55296)+(te.charCodeAt(1)-56320);return ye(240|Ie>>>18&7)+ye(128|Ie>>>12&63)+ye(128|Ie>>>6&63)+ye(128|63&Ie)},Xt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,jt=re?te=>Buffer.from(te,"utf8").toString("base64"):fe?te=>yt(fe.encode(te)):te=>$t((te=>te.replace(Xt,Ut))(te)),Lt=(te,Ie=!1)=>Ie?(te=>te.replace(/=/g,"").replace(/[+\/]/g,Ie=>"+"==Ie?"-":"_"))(jt(te)):jt(te),Bt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Et=te=>{switch(te.length){case 4:var Qe=((7&te.charCodeAt(0))<<18|(63&te.charCodeAt(1))<<12|(63&te.charCodeAt(2))<<6|63&te.charCodeAt(3))-65536;return ye(55296+(Qe>>>10))+ye(56320+(1023&Qe));case 3:return ye((15&te.charCodeAt(0))<<12|(63&te.charCodeAt(1))<<6|63&te.charCodeAt(2));default:return ye((31&te.charCodeAt(0))<<6|63&te.charCodeAt(1))}},Yn=oe?te=>atob(gt(te)):re?te=>Buffer.from(te,"base64").toString("binary"):te=>{if(te=te.replace(/\s+/g,""),!z.test(te))throw new TypeError("malformed base64.");te+="==".slice(2-(3&te.length));let Ie,T,N,Qe="";for(let U=0;U<te.length;)Ie=le[te.charAt(U++)]<<18|le[te.charAt(U++)]<<12|(T=le[te.charAt(U++)])<<6|(N=le[te.charAt(U++)]),Qe+=64===T?ye(Ie>>16&255):64===N?ye(Ie>>16&255,Ie>>8&255):ye(Ie>>16&255,Ie>>8&255,255&Ie);return Qe},An=re?te=>je(Buffer.from(te,"base64")):te=>je(Yn(te).split("").map(Ie=>Ie.charCodeAt(0))),Jn=re?te=>Buffer.from(te,"base64").toString("utf8"):Q?te=>Q.decode(An(te)):te=>(te=>te.replace(Bt,Et))(Yn(te)),Sr=te=>Jn((te=>gt(te.replace(/[-_]/g,Ie=>"-"==Ie?"+":"/")))(te));function Bn(te,Ie,Qe){const T=Z(Z({},{method:te}),Ie);if(T.headers=Z({},Ie.headers),typeof XMLHttpRequest<"u"){const N=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");null!=N&&N.set||(T.credentials="cocos-ignore")}return Object.keys(T.headers).includes("Accept")||(T.headers.Accept="application/json"),Object.keys(T.headers).includes("Content-Type")||(T.headers["Content-Type"]="application/json"),Object.keys(T.headers).forEach(N=>{T.headers[N]||delete T.headers[N]}),Qe&&(T.body=Qe),T}var ur=class{constructor(te,Ie,Qe){this.serverKey=te,this.basePath=Ie,this.timeoutMs=Qe}healthcheck(te,Ie={}){const U=this.buildFullUrl(this.basePath,"/healthcheck",new Map),L=Bn("GET",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(U,L).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}deleteAccount(te,Ie={}){const U=this.buildFullUrl(this.basePath,"/v2/account",new Map),L=Bn("DELETE",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(U,L).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}getAccount(te,Ie={}){const U=this.buildFullUrl(this.basePath,"/v2/account",new Map),L=Bn("GET",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(U,L).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}updateAccount(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account",N),ie=Bn("PUT",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}authenticateApple(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateCustom(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateDevice(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateEmail(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateFacebook(te,Ie,Qe,T,N,U,L={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const H=new Map;H.set("create",T),H.set("username",N),H.set("sync",U);let de="";de=JSON.stringify(Qe||{});const Be=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",H),Xe=Bn("POST",L,de);return te&&(Xe.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateGoogle(te,Ie,Qe,T,N,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let H="";H=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",ie),Be=Bn("POST",U,H);return te&&(Be.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}authenticateSteam(te,Ie,Qe,T,N,U,L={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const H=new Map;H.set("create",T),H.set("username",N),H.set("sync",U);let de="";de=JSON.stringify(Qe||{});const Be=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",H),Xe=Bn("POST",L,de);return te&&(Xe.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}linkApple(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/apple",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkCustom(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/custom",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkDevice(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/device",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkEmail(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/email",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkFacebook(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const U=new Map;U.set("sync",Qe);let L="";L=JSON.stringify(Ie||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGameCenter(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGoogle(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/google",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkSteam(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/steam",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}sessionRefresh(te,Ie,Qe,T={}){if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const U=new Map;let L="";L=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Basic "+Lt(te+":"+Ie)),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}unlinkApple(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkCustom(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkDevice(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkEmail(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebook(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGoogle(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkSteam(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listChannelMessages(te,Ie,Qe,T,N,U={}){if(null==Ie)throw new Error("'channelId' is a required parameter but is null or undefined.");const L="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(Ie))),ie=new Map;ie.set("limit",Qe),ie.set("forward",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,L,ie),Be=Bn("GET",U,"");return te&&(Be.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}event(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/event",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteFriends(te,Ie,Qe,T={}){const U=new Map;U.set("ids",Ie),U.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend",U),H=Bn("DELETE",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}listFriends(te,Ie,Qe,T,N={}){const L=new Map;L.set("limit",Ie),L.set("state",Qe),L.set("cursor",T);const H=this.buildFullUrl(this.basePath,"/v2/friend",L),de=Bn("GET",N,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Be=>{if(204==Be.status)return Be;if(Be.status>=200&&Be.status<300)return Be.json();throw Be}),new Promise((Be,Xe)=>setTimeout(Xe,this.timeoutMs,"Request timed out."))])}addFriends(te,Ie,Qe,T={}){const U=new Map;U.set("ids",Ie),U.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend",U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}blockFriends(te,Ie,Qe,T={}){const U=new Map;U.set("ids",Ie),U.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend/block",U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}importFacebookFriends(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const U=new Map;U.set("reset",Qe);let L="";L=JSON.stringify(Ie||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/facebook",U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(te,Ie,Qe,T={}){const U=new Map;U.set("limit",Ie),U.set("cursor",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend/friends",U),H=Bn("GET",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}importSteamFriends(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const U=new Map;U.set("reset",Qe);let L="";L=JSON.stringify(Ie||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/steam",U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}listGroups(te,Ie,Qe,T,N,U,L,ie={}){const de=new Map;de.set("name",Ie),de.set("cursor",Qe),de.set("limit",T),de.set("lang_tag",N),de.set("members",U),de.set("open",L);const Xe=this.buildFullUrl(this.basePath,"/v2/group",de),wt=Bn("GET",ie,"");return te&&(wt.headers.Authorization="Bearer "+te),Promise.race([fetch(Xe,wt).then(Nt=>{if(204==Nt.status)return Nt;if(Nt.status>=200&&Nt.status<300)return Nt.json();throw Nt}),new Promise((Nt,rn)=>setTimeout(rn,this.timeoutMs,"Request timed out."))])}createGroup(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/group",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteGroup(te,Ie,Qe={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}updateGroup(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;let L="";L=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("PUT",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}addGroupUsers(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;U.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}banGroupUsers(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;U.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;U.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}joinGroup(te,Ie,Qe={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}kickGroupUsers(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;U.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}leaveGroup(te,Ie,Qe={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(Ie))),U=new Map;U.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}listGroupUsers(te,Ie,Qe,T,N,U={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const L="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(Ie))),ie=new Map;ie.set("limit",Qe),ie.set("state",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,L,ie),Be=Bn("GET",U,"");return te&&(Be.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/facebookinstant",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listSubscriptions(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription/apple",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription/google",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}getSubscription(te,Ie,Qe={}){if(null==Ie)throw new Error("'productId' is a required parameter but is null or undefined.");const T="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("GET",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(te,Ie,Qe={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const T="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(te,Ie,Qe,T,N,U,L={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),H=new Map;H.set("owner_ids",Qe),H.set("limit",T),H.set("cursor",N),H.set("expiry",U);const Be=this.buildFullUrl(this.basePath,ie,H),Xe=Bn("GET",L,"");return te&&(Xe.headers.Authorization="Bearer "+te),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),U=new Map;let L="";L=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(te,Ie,Qe,T,N,U,L={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))).replace("{ownerId}",encodeURIComponent(String(Qe))),H=new Map;H.set("limit",T),H.set("expiry",N),H.set("cursor",U);const Be=this.buildFullUrl(this.basePath,ie,H),Xe=Bn("GET",L,"");return te&&(Xe.headers.Authorization="Bearer "+te),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}listMatches(te,Ie,Qe,T,N,U,L,ie={}){const de=new Map;de.set("limit",Ie),de.set("authoritative",Qe),de.set("label",T),de.set("min_size",N),de.set("max_size",U),de.set("query",L);const Xe=this.buildFullUrl(this.basePath,"/v2/match",de),wt=Bn("GET",ie,"");return te&&(wt.headers.Authorization="Bearer "+te),Promise.race([fetch(Xe,wt).then(Nt=>{if(204==Nt.status)return Nt;if(Nt.status>=200&&Nt.status<300)return Nt.json();throw Nt}),new Promise((Nt,rn)=>setTimeout(rn,this.timeoutMs,"Request timed out."))])}deleteNotifications(te,Ie,Qe={}){const N=new Map;N.set("ids",Ie);const L=this.buildFullUrl(this.basePath,"/v2/notification",N),ie=Bn("DELETE",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listNotifications(te,Ie,Qe,T={}){const U=new Map;U.set("limit",Ie),U.set("cacheable_cursor",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/notification",U),H=Bn("GET",T,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}rpcFunc2(te,Ie,Qe,T,N={}){if(null==Ie)throw new Error("'id' is a required parameter but is null or undefined.");const U="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Ie))),L=new Map;L.set("payload",Qe),L.set("http_key",T);const H=this.buildFullUrl(this.basePath,U,L),de=Bn("GET",N,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Be=>{if(204==Be.status)return Be;if(Be.status>=200&&Be.status<300)return Be.json();throw Be}),new Promise((Be,Xe)=>setTimeout(Xe,this.timeoutMs,"Request timed out."))])}rpcFunc(te,Ie,Qe,T,N={}){if(null==Ie)throw new Error("'id' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const U="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Ie))),L=new Map;L.set("http_key",T);let ie="";ie=JSON.stringify(Qe||{});const H=this.buildFullUrl(this.basePath,U,L),de=Bn("POST",N,ie);return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Be=>{if(204==Be.status)return Be;if(Be.status>=200&&Be.status<300)return Be.json();throw Be}),new Promise((Be,Xe)=>setTimeout(Xe,this.timeoutMs,"Request timed out."))])}sessionLogout(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/session/logout",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}readStorageObjects(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Bn("POST",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}writeStorageObjects(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Bn("PUT",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(te,Ie,Qe={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let U="";U=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage/delete",N),ie=Bn("PUT",Qe,U);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listStorageObjects(te,Ie,Qe,T,N,U={}){if(null==Ie)throw new Error("'collection' is a required parameter but is null or undefined.");const L="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(Ie))),ie=new Map;ie.set("user_id",Qe),ie.set("limit",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,L,ie),Be=Bn("GET",U,"");return te&&(Be.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}listStorageObjects2(te,Ie,Qe,T,N,U={}){if(null==Ie)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'userId' is a required parameter but is null or undefined.");const L="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(Ie))).replace("{userId}",encodeURIComponent(String(Qe))),ie=new Map;ie.set("limit",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,L,ie),Be=Bn("GET",U,"");return te&&(Be.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}listTournaments(te,Ie,Qe,T,N,U,L,ie={}){const de=new Map;de.set("category_start",Ie),de.set("category_end",Qe),de.set("start_time",T),de.set("end_time",N),de.set("limit",U),de.set("cursor",L);const Xe=this.buildFullUrl(this.basePath,"/v2/tournament",de),wt=Bn("GET",ie,"");return te&&(wt.headers.Authorization="Bearer "+te),Promise.race([fetch(Xe,wt).then(Nt=>{if(204==Nt.status)return Nt;if(Nt.status>=200&&Nt.status<300)return Nt.json();throw Nt}),new Promise((Nt,rn)=>setTimeout(rn,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(te,Ie,Qe={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecords(te,Ie,Qe,T,N,U,L={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),H=new Map;H.set("owner_ids",Qe),H.set("limit",T),H.set("cursor",N),H.set("expiry",U);const Be=this.buildFullUrl(this.basePath,ie,H),Xe=Bn("GET",L,"");return te&&(Xe.headers.Authorization="Bearer "+te),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),U=new Map;let L="";L=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("POST",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(te,Ie,Qe,T={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),U=new Map;let L="";L=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,U),H=Bn("PUT",T,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Be)=>setTimeout(Be,this.timeoutMs,"Request timed out."))])}joinTournament(te,Ie,Qe={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(L,ie).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(te,Ie,Qe,T,N,U,L={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(Ie))).replace("{ownerId}",encodeURIComponent(String(Qe))),H=new Map;H.set("limit",T),H.set("expiry",N),H.set("cursor",U);const Be=this.buildFullUrl(this.basePath,ie,H),Xe=Bn("GET",L,"");return te&&(Xe.headers.Authorization="Bearer "+te),Promise.race([fetch(Be,Xe).then(wt=>{if(204==wt.status)return wt;if(wt.status>=200&&wt.status<300)return wt.json();throw wt}),new Promise((wt,Nt)=>setTimeout(Nt,this.timeoutMs,"Request timed out."))])}getUsers(te,Ie,Qe,T,N={}){const L=new Map;L.set("ids",Ie),L.set("usernames",Qe),L.set("facebook_ids",T);const H=this.buildFullUrl(this.basePath,"/v2/user",L),de=Bn("GET",N,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Be=>{if(204==Be.status)return Be;if(Be.status>=200&&Be.status<300)return Be.json();throw Be}),new Promise((Be,Xe)=>setTimeout(Xe,this.timeoutMs,"Request timed out."))])}listUserGroups(te,Ie,Qe,T,N,U={}){if(null==Ie)throw new Error("'userId' is a required parameter but is null or undefined.");const L="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(Ie))),ie=new Map;ie.set("limit",Qe),ie.set("state",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,L,ie),Be=Bn("GET",U,"");return te&&(Be.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Be).then(Xe=>{if(204==Xe.status)return Xe;if(Xe.status>=200&&Xe.status<300)return Xe.json();throw Xe}),new Promise((Xe,wt)=>setTimeout(wt,this.timeoutMs,"Request timed out."))])}buildFullUrl(te,Ie,Qe){let T=te+Ie+"?";for(let[N,U]of Qe)U instanceof Array?T+=U.reduce((L,ie)=>L+encodeURIComponent(N)+"="+encodeURIComponent(ie)+"&",""):null!=U&&(T+=encodeURIComponent(N)+"="+encodeURIComponent(U)+"&");return T}},bn=class{constructor(te,Ie,Qe){this.created=Qe,this.token=te,this.refresh_token=Ie,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(te,Ie)}isexpired(te){return this.expires_at-te<0}isrefreshexpired(te){return this.refresh_expires_at-te<0}update(te,Ie){const Qe=te.split(".");if(3!=Qe.length)throw"jwt is not valid.";const T=JSON.parse(Yn(Qe[1])),N=Math.floor(parseInt(T.exp));if(Ie){const U=Ie.split(".");if(3!=U.length)throw"refresh jwt is not valid.";const L=JSON.parse(Yn(U[1])),ie=Math.floor(parseInt(L.exp));this.refresh_expires_at=ie,this.refresh_token=Ie}this.token=te,this.expires_at=N,this.username=T.usn,this.user_id=T.uid,this.vars=T.vrs}static restore(te,Ie){return new bn(te,Ie,!1)}},Qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(pt=0;pt<64;pt++)Pn[Qn.charCodeAt(pt)]=pt;var pt,bt=function(te){var Qe,Ie=new Uint8Array(te),T=Ie.length,N="";for(Qe=0;Qe<T;Qe+=3)N+=Qn[Ie[Qe]>>2],N+=Qn[(3&Ie[Qe])<<4|Ie[Qe+1]>>4],N+=Qn[(15&Ie[Qe+1])<<2|Ie[Qe+2]>>6],N+=Qn[63&Ie[Qe+2]];return T%3==2?N=N.substring(0,N.length-1)+"=":T%3==1&&(N=N.substring(0,N.length-2)+"=="),N},rt=function(te){var T,U,L,ie,H,Ie=.75*te.length,Qe=te.length,N=0;"="===te[te.length-1]&&(Ie--,"="===te[te.length-2]&&Ie--);var de=new ArrayBuffer(Ie),Be=new Uint8Array(de);for(T=0;T<Qe;T+=4)U=Pn[te.charCodeAt(T)],L=Pn[te.charCodeAt(T+1)],ie=Pn[te.charCodeAt(T+2)],H=Pn[te.charCodeAt(T+3)],Be[N++]=U<<2|L>>4,Be[N++]=(15&L)<<4|ie>>2,Be[N++]=(3&ie)<<6|63&H;return de},_t=class{get onClose(){return this._socket.onclose}set onClose(te){this._socket.onclose=te}get onError(){return this._socket.onerror}set onError(te){this._socket.onerror=te}get onMessage(){return this._socket.onmessage}set onMessage(te){te?this._socket.onmessage=Ie=>{const Qe=JSON.parse(Ie.data);Qe.match_data&&Qe.match_data.data?Qe.match_data.data=new Uint8Array(rt(Qe.match_data.data)):Qe.party_data&&Qe.party_data.data&&(Qe.party_data.data=new Uint8Array(rt(Qe.party_data.data))),te(Qe)}:te=null}get onOpen(){return this._socket.onopen}set onOpen(te){this._socket.onopen=te}isOpen(){var te;return(null==(te=this._socket)?void 0:te.readyState)==WebSocket.OPEN}connect(te,Ie,Qe,T,N){const U=`${te}${Ie}:${Qe}/ws?lang=en&status=${encodeURIComponent(T.toString())}&token=${encodeURIComponent(N)}`;this._socket=new WebSocket(U)}close(){this._socket.close(),this._socket=void 0}send(te){if(te.match_data_send){te.match_data_send.op_code=te.match_data_send.op_code.toString();let Ie=te.match_data_send.data;Ie&&Ie instanceof Uint8Array?te.match_data_send.data=bt(Ie.buffer):Ie&&(te.match_data_send.data=$t(Ie))}else if(te.party_data_send){te.party_data_send.op_code=te.party_data_send.op_code.toString();let Ie=te.party_data_send.data;Ie&&Ie instanceof Uint8Array?te.party_data_send.data=bt(Ie.buffer):Ie&&(te.party_data_send.data=$t(Ie))}this._socket.send(JSON.stringify(te))}},vn=class{constructor(te,Ie,Qe=!1,T=!1,N=new _t,U=vn.DefaultSendTimeoutMs){this.host=te,this.port=Ie,this.useSSL=Qe,this.verbose=T,this.adapter=N,this.sendTimeoutMs=U,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=vn.DefaultHeartbeatTimeoutMs}generatecid(){const te=this.nextCid.toString();return++this.nextCid,te}connect(te,Ie=!1,Qe=vn.DefaultConnectTimeoutMs){return this.adapter.isOpen()?Promise.resolve(te):(this.adapter.connect(this.useSSL?"wss://":"ws://",this.host,this.port,Ie,te.token),this.adapter.onClose=N=>{this.ondisconnect(N)},this.adapter.onError=N=>{this.onerror(N)},this.adapter.onMessage=N=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(N)),N.cid){const U=this.cIds[N.cid];if(!U)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",N));delete this.cIds[N.cid],N.error?U.reject(N.error):U.resolve(N)}else N.notifications?N.notifications.notifications.forEach(U=>{U.content=U.content?JSON.parse(U.content):void 0,this.onnotification(U)}):N.match_data?(N.match_data.op_code=parseInt(N.match_data.op_code),this.onmatchdata(N.match_data)):N.match_presence_event?this.onmatchpresence(N.match_presence_event):N.matchmaker_ticket?this.onmatchmakerticket(N.matchmaker_ticket):N.matchmaker_matched?this.onmatchmakermatched(N.matchmaker_matched):N.status_presence_event?this.onstatuspresence(N.status_presence_event):N.stream_presence_event?this.onstreampresence(N.stream_presence_event):N.stream_data?this.onstreamdata(N.stream_data):N.channel_message?(N.channel_message.content=JSON.parse(N.channel_message.content),this.onchannelmessage(N.channel_message)):N.channel_presence_event?this.onchannelpresence(N.channel_presence_event):N.party_data?(N.party_data.op_code=parseInt(N.party_data.op_code),this.onpartydata(N.party_data)):N.party_close?this.onpartyclose(N.party_close):N.party_join_request?this.onpartyjoinrequest(N.party_join_request):N.party_leader?this.onpartyleader(N.party_leader):N.party_matchmaker_ticket?this.onpartymatchmakerticket(N.party_matchmaker_ticket):N.party_presence_event?this.onpartypresence(N.party_presence_event):N.party?this.onparty(N.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",N)},new Promise((N,U)=>{this.adapter.onOpen=L=>{this.verbose&&window&&window.console&&console.log(L),this.pingPong(),N(te)},this.adapter.onError=L=>{U(L),this.adapter.close()},setTimeout(()=>{U("The socket timed out when trying to connect.")},Qe)}))}disconnect(te=!0){this.adapter.isOpen()&&this.adapter.close(),te&&this.ondisconnect({})}setHeartbeatTimeoutMs(te){this._heartbeatTimeoutMs=te}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(te){this.verbose&&window&&window.console&&console.log(te)}onerror(te){this.verbose&&window&&window.console&&console.log(te)}onchannelmessage(te){this.verbose&&window&&window.console&&console.log(te)}onchannelpresence(te){this.verbose&&window&&window.console&&console.log(te)}onnotification(te){this.verbose&&window&&window.console&&console.log(te)}onmatchdata(te){this.verbose&&window&&window.console&&console.log(te)}onmatchpresence(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakermatched(te){this.verbose&&window&&window.console&&console.log(te)}onparty(te){this.verbose&&window&&window.console&&console.log(te)}onpartyclose(te){this.verbose&&window&&window.console&&console.log("Party closed: "+te)}onpartyjoinrequest(te){this.verbose&&window&&window.console&&console.log(te)}onpartydata(te){this.verbose&&window&&window.console&&console.log(te)}onpartyleader(te){this.verbose&&window&&window.console&&console.log(te)}onpartymatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onpartypresence(te){this.verbose&&window&&window.console&&console.log(te)}onstatuspresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreampresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreamdata(te){this.verbose&&window&&window.console&&console.log(te)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(te,Ie=vn.DefaultSendTimeoutMs){const Qe=te;return new Promise((T,N)=>{if(this.adapter.isOpen())if(Qe.match_data_send)this.adapter.send(Qe),T();else if(Qe.party_data_send)this.adapter.send(Qe),T();else{Qe.channel_message_send?Qe.channel_message_send.content=JSON.stringify(Qe.channel_message_send.content):Qe.channel_message_update&&(Qe.channel_message_update.content=JSON.stringify(Qe.channel_message_update.content));const U=this.generatecid();this.cIds[U]={resolve:T,reject:N},setTimeout(()=>{N("The socket timed out while waiting for a response.")},Ie),Qe.cid=U,this.adapter.send(Qe)}else N("Socket connection has not been established yet.");if(this.verbose&&window&&window.console){const U=Z({},Qe);U.match_data_send&&U.match_data_send.data?U.match_data_send.data=Sr(U.match_data_send.data):U.party_data_send&&U.party_data_send.data&&(U.party_data_send.data=Sr(U.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(U))}})}acceptPartyMember(te,Ie){return this.send({party_accept:{party_id:te,presence:Ie}})}addMatchmaker(te,Ie,Qe,T,N){return M(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:Ie,max_count:Qe,query:te,string_properties:T,numeric_properties:N}})).matchmaker_ticket})}addMatchmakerParty(te,Ie,Qe,T,N,U){return M(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:te,min_count:Qe,max_count:T,query:Ie,string_properties:N,numeric_properties:U}})).party_matchmaker_ticket})}closeParty(te){return M(this,null,function*(){return yield this.send({party_close:{party_id:te}})})}createMatch(te){return M(this,null,function*(){return(yield this.send({match_create:{name:te}})).match})}createParty(te,Ie){return M(this,null,function*(){return(yield this.send({party_create:{open:te,max_size:Ie}})).party})}followUsers(te){return M(this,null,function*(){return(yield this.send({status_follow:{user_ids:te}})).status})}joinChat(te,Ie,Qe,T){return M(this,null,function*(){return(yield this.send({channel_join:{target:te,type:Ie,persistence:Qe,hidden:T}})).channel})}joinMatch(te,Ie,Qe){return M(this,null,function*(){const T={match_join:{metadata:Qe}};return Ie?T.match_join.token=Ie:T.match_join.match_id=te,(yield this.send(T)).match})}joinParty(te){return M(this,null,function*(){return yield this.send({party_join:{party_id:te}})})}leaveChat(te){return this.send({channel_leave:{channel_id:te}})}leaveMatch(te){return this.send({match_leave:{match_id:te}})}leaveParty(te){return this.send({party_leave:{party_id:te}})}listPartyJoinRequests(te){return M(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:te}})).party_join_request})}promotePartyMember(te,Ie){return M(this,null,function*(){return(yield this.send({party_promote:{party_id:te,presence:Ie}})).party_leader})}removeChatMessage(te,Ie){return M(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:te,message_id:Ie}})).channel_message_ack})}removeMatchmaker(te){return this.send({matchmaker_remove:{ticket:te}})}removeMatchmakerParty(te,Ie){return this.send({party_matchmaker_remove:{party_id:te,ticket:Ie}})}removePartyMember(te,Ie){return M(this,null,function*(){return this.send({party_remove:{party_id:te,presence:Ie}})})}rpc(te,Ie,Qe){return M(this,null,function*(){return(yield this.send({rpc:{id:te,payload:Ie,http_key:Qe}})).rpc})}sendMatchState(te,Ie,Qe,T,N){return M(this,null,function*(){return this.send({match_data_send:{match_id:te,op_code:Ie,data:Qe,presences:null!=T?T:[],reliable:N}})})}sendPartyData(te,Ie,Qe){return this.send({party_data_send:{party_id:te,op_code:Ie,data:Qe}})}unfollowUsers(te){return this.send({status_unfollow:{user_ids:te}})}updateChatMessage(te,Ie,Qe){return M(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:te,message_id:Ie,content:Qe}})).channel_message_ack})}updateStatus(te){return this.send({status_update:{status:te}})}writeChatMessage(te,Ie){return M(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:te,content:Ie}})).channel_message_ack})}pingPong(){return M(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{return void(this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()))}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},On=vn;On.DefaultHeartbeatTimeoutMs=1e4,On.DefaultSendTimeoutMs=1e4,On.DefaultConnectTimeoutMs=3e4;var In=class{constructor(te="defaultkey",Ie="127.0.0.1",Qe="7350",T=!1,N=7e3,U=!0){this.serverkey=te,this.host=Ie,this.port=Qe,this.useSSL=T,this.timeout=N,this.autoRefreshSession=U,this.expiredTimespanMs=3e5,this.apiClient=new ur(te,`${T?"https://":"http://"}${Ie}:${Qe}`,N)}addGroupUsers(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addGroupUsers(te.token,Ie,Qe).then(T=>void 0!==T)})}addFriends(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addFriends(te.token,Ie,Qe).then(T=>void 0!==T)})}authenticateApple(te,Ie,Qe){return M(this,arguments,function*(T,N,U,L={},ie={}){return this.apiClient.authenticateApple(this.serverkey,"",{token:T,vars:L},N,U,ie).then(de=>new bn(de.token||"",de.refresh_token||"",de.created||!1))})}authenticateCustom(te,Ie,Qe,T={},N={}){return this.apiClient.authenticateCustom(this.serverkey,"",{id:te,vars:T},Ie,Qe,N).then(L=>new bn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateDevice(te,Ie,Qe,T){return this.apiClient.authenticateDevice(this.serverkey,"",{id:te,vars:T},Ie,Qe).then(U=>new bn(U.token||"",U.refresh_token||"",U.created||!1))}authenticateEmail(te,Ie,Qe,T,N){return this.apiClient.authenticateEmail(this.serverkey,"",{email:te,password:Ie,vars:N},Qe,T).then(L=>new bn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateFacebookInstantGame(te,Ie,Qe,T,N={}){const U={signed_player_info:te,vars:T};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:U.signed_player_info,vars:U.vars},Ie,Qe,N).then(L=>new bn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateFacebook(te,Ie,Qe,T,N,U={}){return this.apiClient.authenticateFacebook(this.serverkey,"",{token:te,vars:N},Ie,Qe,T,U).then(ie=>new bn(ie.token||"",ie.refresh_token||"",ie.created||!1))}authenticateGoogle(te,Ie,Qe,T){return M(this,arguments,function*(N,U,L,ie,H={}){const de={token:N,vars:ie},Be=yield this.apiClient.authenticateGoogle(this.serverkey,"",de,U,L,H);return new bn(Be.token||"",Be.refresh_token||"",Be.created||!1)})}authenticateGameCenter(te,Ie,Qe,T,N,U,L,ie,H){return M(this,arguments,function*(de,Be,Xe,wt,Nt,rn,Ge,He,vt,tt={}){const Dt={bundle_id:de,player_id:Be,public_key_url:Xe,salt:wt,signature:Nt,timestamp_seconds:rn,vars:vt},Zt=yield this.apiClient.authenticateGameCenter(this.serverkey,"",Dt,He,Ge,tt);return new bn(Zt.token||"",Zt.refresh_token||"",Zt.created||!1)})}authenticateSteam(te,Ie,Qe,T,N){return M(this,null,function*(){return this.apiClient.authenticateSteam(this.serverkey,"",{token:te,vars:N,sync:T},Ie,Qe).then(L=>new bn(L.token||"",L.refresh_token||"",L.created||!1))})}banGroupUsers(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.banGroupUsers(te.token,Ie,Qe).then(T=>void 0!==T)})}blockFriends(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.blockFriends(te.token,Ie,Qe).then(T=>Promise.resolve(null!=T))})}createGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.createGroup(te.token,Ie).then(Qe=>Promise.resolve({avatar_url:Qe.avatar_url,create_time:Qe.create_time,creator_id:Qe.creator_id,description:Qe.description,edge_count:Qe.edge_count?Number(Qe.edge_count):0,id:Qe.id,lang_tag:Qe.lang_tag,max_count:Qe.max_count?Number(Qe.max_count):0,metadata:Qe.metadata?JSON.parse(Qe.metadata):void 0,name:Qe.name,open:Qe.open,update_time:Qe.update_time}))})}createSocket(te=!1,Ie=!1,Qe=new _t,T=On.DefaultSendTimeoutMs){return new On(this.host,this.port,te,Ie,Qe,T)}deleteAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteAccount(te.token).then(Ie=>void 0!==Ie)})}deleteFriends(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteFriends(te.token,Ie,Qe).then(T=>void 0!==T)})}deleteGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteGroup(te.token,Ie).then(Qe=>void 0!==Qe)})}deleteNotifications(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteNotifications(te.token,Ie).then(Qe=>Promise.resolve(null!=Qe))})}deleteStorageObjects(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteStorageObjects(te.token,Ie).then(Qe=>Promise.resolve(null!=Qe))})}deleteTournamentRecord(te,Ie){return M(this,null,function*(){return this.apiClient.deleteTournamentRecord(te.token,Ie)})}demoteGroupUsers(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.demoteGroupUsers(te.token,Ie,Qe).then(T=>Promise.resolve(null!=T))})}emitEvent(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.event(te.token,Ie).then(Qe=>Promise.resolve(null!=Qe))})}getAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getAccount(te.token)})}getSubscription(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getSubscription(te.token,Ie)})}importFacebookFriends(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importFacebookFriends(te.token,Ie).then(Qe=>void 0!==Qe)})}importSteamFriends(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importSteamFriends(te.token,Ie,Qe).then(T=>void 0!==T)})}getUsers(te,Ie,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getUsers(te.token,Ie,Qe,T).then(N=>{var U={users:[]};return null==N.users||N.users.forEach(L=>{U.users.push({avatar_url:L.avatar_url,create_time:L.create_time,display_name:L.display_name,edge_count:L.edge_count?Number(L.edge_count):0,facebook_id:L.facebook_id,gamecenter_id:L.gamecenter_id,google_id:L.google_id,id:L.id,lang_tag:L.lang_tag,location:L.location,online:L.online,steam_id:L.steam_id,timezone:L.timezone,update_time:L.update_time,username:L.username,metadata:L.metadata?JSON.parse(L.metadata):void 0})}),Promise.resolve(U)})})}joinGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinGroup(te.token,Ie,{}).then(Qe=>void 0!==Qe)})}joinTournament(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinTournament(te.token,Ie,{}).then(Qe=>void 0!==Qe)})}kickGroupUsers(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.kickGroupUsers(te.token,Ie,Qe).then(T=>Promise.resolve(null!=T))})}leaveGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.leaveGroup(te.token,Ie,{}).then(Qe=>void 0!==Qe)})}listChannelMessages(te,Ie,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listChannelMessages(te.token,Ie,Qe,T,N).then(U=>{var L={messages:[],next_cursor:U.next_cursor,prev_cursor:U.prev_cursor,cacheable_cursor:U.cacheable_cursor};return null==U.messages||U.messages.forEach(ie=>{L.messages.push({channel_id:ie.channel_id,code:ie.code?Number(ie.code):0,create_time:ie.create_time,message_id:ie.message_id,persistent:ie.persistent,sender_id:ie.sender_id,update_time:ie.update_time,username:ie.username,content:ie.content?JSON.parse(ie.content):void 0,group_id:ie.group_id,room_name:ie.room_name,user_id_one:ie.user_id_one,user_id_two:ie.user_id_two})}),Promise.resolve(L)})})}listGroupUsers(te,Ie,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroupUsers(te.token,Ie,T,Qe,N).then(U=>{var L={group_users:[],cursor:U.cursor};return null==U.group_users||U.group_users.forEach(ie=>{L.group_users.push({user:{avatar_url:ie.user.avatar_url,create_time:ie.user.create_time,display_name:ie.user.display_name,edge_count:ie.user.edge_count?Number(ie.user.edge_count):0,facebook_id:ie.user.facebook_id,gamecenter_id:ie.user.gamecenter_id,google_id:ie.user.google_id,id:ie.user.id,lang_tag:ie.user.lang_tag,location:ie.user.location,online:ie.user.online,steam_id:ie.user.steam_id,timezone:ie.user.timezone,update_time:ie.user.update_time,username:ie.user.username,metadata:ie.user.metadata?JSON.parse(ie.user.metadata):void 0},state:ie.state?Number(ie.state):0})}),Promise.resolve(L)})})}listUserGroups(te,Ie,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listUserGroups(te.token,Ie,Qe,T,N).then(U=>{var L={user_groups:[],cursor:U.cursor};return null==U.user_groups||U.user_groups.forEach(ie=>{L.user_groups.push({group:{avatar_url:ie.group.avatar_url,create_time:ie.group.create_time,creator_id:ie.group.creator_id,description:ie.group.description,edge_count:ie.group.edge_count?Number(ie.group.edge_count):0,id:ie.group.id,lang_tag:ie.group.lang_tag,max_count:ie.group.max_count,metadata:ie.group.metadata?JSON.parse(ie.group.metadata):void 0,name:ie.group.name,open:ie.group.open,update_time:ie.group.update_time},state:ie.state?Number(ie.state):0})}),Promise.resolve(L)})})}listGroups(te,Ie,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroups(te.token,Ie,Qe,T).then(N=>{var U={groups:[]};return null==N.groups||(U.cursor=N.cursor,N.groups.forEach(L=>{U.groups.push({avatar_url:L.avatar_url,create_time:L.create_time,creator_id:L.creator_id,description:L.description,edge_count:L.edge_count?Number(L.edge_count):0,id:L.id,lang_tag:L.lang_tag,max_count:L.max_count,metadata:L.metadata?JSON.parse(L.metadata):void 0,name:L.name,open:L.open,update_time:L.update_time})})),Promise.resolve(U)})})}linkApple(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkApple(te.token,Ie).then(Qe=>void 0!==Qe)})}linkCustom(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkCustom(te.token,Ie).then(Qe=>void 0!==Qe)})}linkDevice(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkDevice(te.token,Ie).then(Qe=>void 0!==Qe)})}linkEmail(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkEmail(te.token,Ie).then(Qe=>void 0!==Qe)})}linkFacebook(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebook(te.token,Ie).then(Qe=>void 0!==Qe)})}linkFacebookInstantGame(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebookInstantGame(te.token,Ie).then(Qe=>void 0!==Qe)})}linkGoogle(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGoogle(te.token,Ie).then(Qe=>void 0!==Qe)})}linkGameCenter(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGameCenter(te.token,Ie).then(Qe=>void 0!==Qe)})}linkSteam(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkSteam(te.token,Ie).then(Qe=>void 0!==Qe)})}listFriends(te,Ie,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriends(te.token,Qe,Ie,T).then(N=>{var U={friends:[],cursor:N.cursor};return null==N.friends||N.friends.forEach(L=>{U.friends.push({user:{avatar_url:L.user.avatar_url,create_time:L.user.create_time,display_name:L.user.display_name,edge_count:L.user.edge_count?Number(L.user.edge_count):0,facebook_id:L.user.facebook_id,gamecenter_id:L.user.gamecenter_id,google_id:L.user.google_id,id:L.user.id,lang_tag:L.user.lang_tag,location:L.user.location,online:L.user.online,steam_id:L.user.steam_id,timezone:L.user.timezone,update_time:L.user.update_time,username:L.user.username,metadata:L.user.metadata?JSON.parse(L.user.metadata):void 0,facebook_instant_game_id:L.user.facebook_instant_game_id},state:L.state})}),Promise.resolve(U)})})}listFriendsOfFriends(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriendsOfFriends(te.token,Ie,Qe).then(T=>{var N={friends_of_friends:[],cursor:T.cursor};return null==T.friends_of_friends||T.friends_of_friends.forEach(U=>{N.friends_of_friends.push({referrer:U.referrer,user:{avatar_url:U.user.avatar_url,create_time:U.user.create_time,display_name:U.user.display_name,edge_count:U.user.edge_count?Number(U.user.edge_count):0,facebook_id:U.user.facebook_id,gamecenter_id:U.user.gamecenter_id,google_id:U.user.google_id,id:U.user.id,lang_tag:U.user.lang_tag,location:U.user.location,online:U.user.online,steam_id:U.user.steam_id,timezone:U.user.timezone,update_time:U.user.update_time,username:U.user.username,metadata:U.user.metadata?JSON.parse(U.user.metadata):void 0,facebook_instant_game_id:U.user.facebook_instant_game_id}})}),Promise.resolve(N)})})}listLeaderboardRecords(te,Ie,Qe,T,N,U){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecords(te.token,Ie,Qe,T,N,U).then(L=>{var ie={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,rank_count:L.rank_count?Number(L.rank_count):0,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{ie.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{ie.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(ie)})})}listLeaderboardRecordsAroundOwner(te,Ie,Qe,T,N,U){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecordsAroundOwner(te.token,Ie,Qe,T,N,U).then(L=>{var ie={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,rank_count:L.rank_count?Number(L.rank_count):0,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{ie.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{ie.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(ie)})})}listMatches(te,Ie,Qe,T,N,U,L){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listMatches(te.token,Ie,Qe,T,N,U,L)})}listNotifications(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listNotifications(te.token,Ie,Qe).then(T=>{var N={cacheable_cursor:T.cacheable_cursor,notifications:[]};return null==T.notifications||T.notifications.forEach(U=>{N.notifications.push({code:U.code?Number(U.code):0,create_time:U.create_time,id:U.id,persistent:U.persistent,sender_id:U.sender_id,subject:U.subject,content:U.content?JSON.parse(U.content):void 0})}),Promise.resolve(N)})})}listStorageObjects(te,Ie,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listStorageObjects(te.token,Ie,Qe,T,N).then(U=>{var L={objects:[],cursor:U.cursor};return null==U.objects||U.objects.forEach(ie=>{L.objects.push({collection:ie.collection,key:ie.key,permission_read:ie.permission_read?Number(ie.permission_read):0,permission_write:ie.permission_write?Number(ie.permission_write):0,value:ie.value?JSON.parse(ie.value):void 0,version:ie.version,user_id:ie.user_id,create_time:ie.create_time,update_time:ie.update_time})}),Promise.resolve(L)})})}listTournaments(te,Ie,Qe,T,N,U,L){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournaments(te.token,Ie,Qe,T,N,U,L).then(ie=>{var H={cursor:ie.cursor,tournaments:[]};return null!=ie.tournaments&&ie.tournaments.forEach(de=>{H.tournaments.push({id:de.id,title:de.title,description:de.description,duration:de.duration?Number(de.duration):0,category:de.category?Number(de.category):0,sort_order:de.sort_order?Number(de.sort_order):0,size:de.size?Number(de.size):0,max_size:de.max_size?Number(de.max_size):0,max_num_score:de.max_num_score?Number(de.max_num_score):0,can_enter:de.can_enter,end_active:de.end_active?Number(de.end_active):0,next_reset:de.next_reset?Number(de.next_reset):0,metadata:de.metadata?JSON.parse(de.metadata):void 0,create_time:de.create_time,start_time:de.start_time,end_time:de.end_time,start_active:de.start_active,authoritative:de.authoritative})}),Promise.resolve(H)})})}listSubscriptions(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listSubscriptions(te.token,{cursor:Ie,limit:Qe})})}listTournamentRecords(te,Ie,Qe,T,N,U){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecords(te.token,Ie,Qe,T,N,U).then(L=>{var ie={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{ie.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{ie.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(ie)})})}listTournamentRecordsAroundOwner(te,Ie,Qe,T,N,U){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecordsAroundOwner(te.token,Ie,Qe,T,N,U).then(L=>{var ie={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{ie.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{ie.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(ie)})})}promoteGroupUsers(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.promoteGroupUsers(te.token,Ie,Qe)})}readStorageObjects(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.readStorageObjects(te.token,Ie).then(Qe=>{var T={objects:[]};return null==Qe.objects||Qe.objects.forEach(N=>{T.objects.push({collection:N.collection,key:N.key,permission_read:N.permission_read?Number(N.permission_read):0,permission_write:N.permission_write?Number(N.permission_write):0,value:N.value?JSON.parse(N.value):void 0,version:N.version,user_id:N.user_id,create_time:N.create_time,update_time:N.update_time})}),Promise.resolve(T)})})}rpc(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.rpcFunc(te.token,Ie,JSON.stringify(Qe)).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0}))})}rpcHttpKey(te,Ie,Qe){return M(this,null,function*(){return this.apiClient.rpcFunc2("",Ie,Qe&&JSON.stringify(Qe)||"",te).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0})).catch(T=>{throw T})})}sessionLogout(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.sessionLogout(te.token,{refresh_token:Qe,token:Ie}).then(T=>void 0!==T)})}sessionRefresh(te){return M(this,arguments,function*(Ie,Qe={}){if(!Ie)return console.error("Cannot refresh a null session."),Ie;Ie.created&&Ie.expires_at-Ie.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),Ie.created&&Ie.refresh_expires_at-Ie.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const T=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:Ie.refresh_token,vars:Qe});return Ie.update(T.token,T.refresh_token),Ie})}unlinkApple(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkApple(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkCustom(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkCustom(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkDevice(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkDevice(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkEmail(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkEmail(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkFacebook(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebook(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkFacebookInstantGame(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebookInstantGame(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkGoogle(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGoogle(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkGameCenter(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGameCenter(te.token,Ie).then(Qe=>void 0!==Qe)})}unlinkSteam(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkSteam(te.token,Ie).then(Qe=>void 0!==Qe)})}updateAccount(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateAccount(te.token,Ie).then(Qe=>void 0!==Qe)})}updateGroup(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateGroup(te.token,Ie,Qe).then(T=>void 0!==T)})}validatePurchaseApple(te,Ie,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseApple(te.token,{receipt:Ie,persist:Qe})})}validatePurchaseFacebookInstant(te,Ie,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseFacebookInstant(te.token,{signed_request:Ie,persist:Qe})})}validatePurchaseGoogle(te,Ie,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseGoogle(te.token,{purchase:Ie,persist:Qe})})}validatePurchaseHuawei(te,Ie,Qe,T=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseHuawei(te.token,{purchase:Ie,signature:Qe,persist:T})})}validateSubscriptionApple(te,Ie,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionApple(te.token,{receipt:Ie,persist:Qe})})}validateSubscriptionGoogle(te,Ie,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionGoogle(te.token,{receipt:Ie,persist:Qe})})}writeLeaderboardRecord(te,Ie,Qe){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.writeLeaderboardRecord(te.token,Ie,{metadata:Qe.metadata?JSON.stringify(Qe.metadata):void 0,score:Qe.score,subscore:Qe.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}writeStorageObjects(te,Ie){return M(this,null,function*(){this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te));var Qe={objects:[]};return Ie.forEach(T=>{Qe.objects.push({collection:T.collection,key:T.key,permission_read:T.permission_read,permission_write:T.permission_write,value:JSON.stringify(T.value),version:T.version})}),this.apiClient.writeStorageObjects(te.token,Qe)})}writeTournamentRecord(te,Ie,Qe){return M(this,null,function*(){return this.apiClient.writeTournamentRecord(te.token,Ie,{metadata:Qe.metadata?JSON.stringify(Qe.metadata):void 0,score:Qe.score,subscore:Qe.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}},un=Ve(8326),Tn=Ve(617),on=Ve(7100),mn=Ve(3953),sr=Ve(9900),qt=Ve(8065),fn=Ve(755),Fn=Ve(5547),Cn=Ve(5374),Wn=Ve(3656),yr=Ve(4234),fr=Ve(3307),Er=function(te){return te[te.MANAGE_TODO=10]="MANAGE_TODO",te[te.EDIT_PROFILE=11]="EDIT_PROFILE",te[te.MANAGE_POST=12]="MANAGE_POST",te[te.ADD_CHANNEL=14]="ADD_CHANNEL",te[te.NAME_OVERRIDED=15]="NAME_OVERRIDED",te[te.CHATROOM_CHECKED=102]="CHATROOM_CHECKED",te}(Er||{});let Lr=(()=>{var te;class Ie{constructor(T,N,U,L,ie,H,de,Be,Xe){this.p5toast=T,this.statusBar=N,this.indexed=U,this.noti=L,this.alertCtrl=ie,this.lang=H,this.global=de,this.navCtrl=Be,this.p5loading=Xe,this.AutoConnect=!1,this.profile={content:{type:void 0,path:void 0}},this.servers={official:{},unofficial:{}},this.showServer=!1,this.OnInit=!0,this.NeedLocalPush=[],this.HasRemovedChannel=!1,this.TogglingSession=!1,this.noti_origin={},this.AfterLoginActDone=!1,this.AfterLoginAct=[],this.RemoteTodoCounter={},this.PromotedGroup={},this.users={self:{},deleted:{},official:{},unofficial:{}},this.notifications_rearrange=[],this.groups={official:{},unofficial:{}},this.channels_orig={local:{},official:{},unofficial:{}},this.noti_id=2e3,this.registered_id=[],this.channels=[],this.socket_reactive={},this.on_socket_connected={},this.on_socket_disconnected={},this.match_act={},this.opened_page_info={},this.subscribe_lock=!1,this.has_new_channel_msg=!1,this.has_new_post=!1,this.posts_orig={local:{target:{me:{}}},official:{},unofficial:{}},this.posts=[],this.HyperLinkDescList=[],this.isRequestingLinkInfo=!1,this.TranslateDescList=[],this.isTranslating=!1,this.OnTransfer={},this.OnTransferMessage={},this.usernameOverride={local:{target:{}}},this.post_counter={local:{target:{me:0}},official:{},unofficial:{}},this.AutoConnect=!localStorage.getItem("autoConnect"),de.CallbackNakama=this,L.NakamaCallback=this}initialize(){var T=this;return(0,F.A)(function*(){yield T.set_all_todo_notification();const N=yield T.indexed.loadTextFromUserPath("servers/self/profile.json");N&&(T.users.self=JSON.parse(N));try{let de=(yield T.indexed.loadTextFromUserPath("servers/self/profile.img")).replace(/"|\\|=/g,"");de&&(T.users.self.img=de)}catch{}yield T.LoadOverridesOffline();let U=yield T.indexed.loadTextFromUserPath("servers/groups.json");U&&(T.groups=JSON.parse(U)),T.rearrange_group_list().forEach(function(){var de=(0,F.A)(function*(Be){let Xe=yield T.indexed.loadTextFromUserPath(`servers/${Be.server.isOfficial}/${Be.server.target}/groups/${Be.id}.img`);if(Xe&&(Be.img=Xe.replace(/"|=|\\/g,"")),"missing"!=Be.status){delete Be.status;let wt=Be.server.isOfficial,Nt=Be.server.target;if(T.CreateEmptyForm(wt,Nt),Be.users)for(let rn=0,Ge=Be.users.length;rn<Ge;rn++)Be.users[rn].is_me||(Be.users[rn].user=T.load_other_user(Be.users[rn].user.id,wt,Nt))}});return function(Be){return de.apply(this,arguments)}}()),yield T.load_channel_list(),T.load_posts_counter(),yield T.CheckIfLostLocal(),T.rearrange_channels();const ie=yield T.indexed.loadTextFromUserPath("servers/list.json");if(ie&&(T.statusBar.groupServer=JSON.parse(ie)),T.catch_group_server_header("offline"),"https://is2you2.github.io"!=window.location.origin&&window.location.origin.indexOf("://localhost")<0){const de=window.location.host.split(":")[0];yield T.add_group_server({name:de,useSSL:"https:"==window.location.protocol,address:de,is_auto_added:!0})}const H=yield T.indexed.loadTextFromUserPath("servers/list_detail.csv");if(H)H.split("\n").forEach(Be=>{const Xe=Be.split(",");let Nt={isOfficial:Xe[1],name:Xe[2],target:Xe[3],address:Xe[4],nakama_port:Xe[5]?+Xe[5]:void 0,cdn_port:Xe[7]?+Xe[7]:void 0,apache_port:Xe[8]?+Xe[8]:void 0,square_port:Xe[9]?+Xe[9]:void 0,webrtc_port:Xe[10]?+Xe[10]:void 0,webpush_port:Xe[11]?+Xe[11]:void 0,webpush_tog:Xe[12]?"true"==Xe[12]:void 0,libretranslate_port:Xe[13]?+Xe[13]:void 0,useSSL:"true"==Xe[6]};T.servers[Nt.isOfficial][Nt.target]={},T.servers[Nt.isOfficial][Nt.target].info=Nt,T.init_server(Nt),T.AutoConnect&&T.users.self.online&&(T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode(),T.init_session(Nt))});else{const de=location.href.split("?").length>1;(T.users.self.online||de)&&(yield T.toggle_all_session(),Object.keys(T.statusBar.groupServer).forEach(Xe=>{T.servers[Xe]?Object.keys(T.statusBar.groupServer[Xe]).forEach(Nt=>{T.servers[Xe][Nt]||delete T.statusBar.groupServer[Xe][Nt]}):delete T.statusBar.groupServer[Xe]}))}})()}CheckShowServerInfo(){let T=0;Object.keys(this.servers).forEach(U=>{const L=Object.keys(this.servers[U]).length;T+=L}),this.showServer=T>1}CheckIfLostLocal(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("servers/local/target/channels");for(let U of N)try{let L=U.split("/");if(5==L.length){let ie=L.pop();T.channels_orig.local.target||(T.channels_orig.local.target={}),T.channels_orig.local.target[ie]||(T.channels_orig.local.target[ie]={CDN:0,id:ie,info:{isOfficial:"local",target:"target",name:T.lang.text.Nakama.DamagedChannel},local:!0,redirect:{type:0},server:{isOfficial:"local",target:"target",name:"\uc0ad\uc81c\ub41c \uc11c\ubc84"},status:"online",title:T.lang.text.Nakama.DamagedChannel})}}catch(L){console.log("\ub85c\uceec \ucc44\ub110 \uc7ac\uac80\ud1a0 \ub2e8\uacc4 \uc624\ub958: ",L)}})()}set_all_todo_notification(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("info.todo");for(let U=0,L=N.length;U<L;U++){let ie=yield T.indexed.loadTextFromUserPath(N[U]);if(ie){let H=JSON.parse(ie);T.registered_id.push(H.noti_id),T.set_todo_notification(H)}}})()}getGodotDBRecursive(){var T=this;return(0,F.A)(function*(){try{if(void 0===T.indexed.godotDB)throw"Retry catch godotDB";return}catch{return yield new Promise(U=>{setTimeout(()=>{U(void 0)},100)}),yield T.getGodotDBRecursive()}})()}open_add_todo_page(T="",N="portal/main/add-todo-menu"){this.AddTodoLinkAct?this.AddTodoLinkAct(T):this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(N,{animation:Tn.V5,state:{data:T}})})}open_others_profile(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("others-profile",{animation:Tn.V5,state:T})})}set_todo_notification(T,N=!1){var U=this;if(this.RemoveLocalPushSchedule(T),((null!=N?N:T.startFrom||T.limit)>Date.now()||N)&&(N&&(T.force_noti=N),this.NeedLocalPush.push(T)),!this.p5todotimer&&this.NeedLocalPush.length){let ie=[];this.global.windowOnFocusAct["todo-timer"]=()=>{ie.forEach(de=>clearTimeout(de)),ie.length=0};const H=de=>{const Be=de.custom_color;let Xe;switch(de.importance){case"0":Xe="58a192";break;case"1":Xe="ddbb41";break;case"2":Xe="b95437"}return Be?Be.substring(1):Xe};this.global.WindowOnBlurAct["todo-timer"]=()=>{for(let de=this.NeedLocalPush.length-1;de>=0;de--){const Be=this.NeedLocalPush[de],wt=new Date(Be.startFrom||Be.limit).getTime()-(new Date).getTime();if(wt>0&&wt<2147483647){let Nt=setTimeout((0,F.A)(function*(){var rn,Ge;let He;try{let Dt;try{Dt=`todo/${Be.id}_${Be.remote.isOfficial}_${Be.remote.target}/thumbnail.png`}catch{Dt=`todo/${Be.id}/thumbnail.png`}let Zt=yield U.indexed.loadBlobFromUserPath(Dt,"image/png");He=URL.createObjectURL(Zt)}catch{}const vt=H(Be),tt=[{title:U.lang.text.TodoDetail.TodoComplete,action:"done"},{title:U.lang.text.TodoDetail.remove,action:"delete"}];yield U.noti.PushLocal({id:Be.noti_id,title:Be.title,body:Be.description,image:He,actions_wm:tt,data_wm:{id:Be.id,isOfficial:null===(rn=Be.remote)||void 0===rn?void 0:rn.isOfficial,target:null===(Ge=Be.remote)||void 0===Ge?void 0:Ge.target},smallIcon_ln:"todo",bgcolor:vt},void 0,Dt=>{U.open_add_todo_page(JSON.stringify(Be),"add-todo-menu")},Be.force_noti),setTimeout(()=>{try{URL.revokeObjectURL(He)}catch{}},1e3),U.NeedLocalPush.splice(de,1)}),wt);ie.push(Nt)}}},this.p5todotimer=new un(de=>{de.setup=()=>{de.noCanvas(),de.frameRate(.5)},de.draw=()=>{const Be=Date.now();for(let Xe=this.NeedLocalPush.length-1;Xe>=0;Xe--)(this.NeedLocalPush[Xe].startFrom||this.NeedLocalPush[Xe].limit)<Be&&function(){var rn=(0,F.A)(function*(){let Ge;try{let tt;try{tt=`todo/${U.NeedLocalPush[Xe].id}_${U.NeedLocalPush[Xe].remote.isOfficial}_${U.NeedLocalPush[Xe].remote.target}/thumbnail.png`}catch{tt=`todo/${U.NeedLocalPush[Xe].id}/thumbnail.png`}let Dt=yield U.indexed.loadBlobFromUserPath(tt,"image/png");Ge=URL.createObjectURL(Dt)}catch{}const He=JSON.stringify(U.NeedLocalPush[Xe]),vt=H(U.NeedLocalPush[Xe]);yield U.noti.PushLocal({id:U.NeedLocalPush[Xe].noti_id,title:U.NeedLocalPush[Xe].title,body:U.NeedLocalPush[Xe].description,image:Ge,smallIcon_ln:"todo",bgcolor:vt},void 0,tt=>{U.open_add_todo_page(He,"add-todo-menu")},U.NeedLocalPush[Xe].force_noti),setTimeout(()=>{try{URL.revokeObjectURL(Ge)}catch{}},1e3),U.NeedLocalPush.splice(Xe,1)});return function(){return rn.apply(this,arguments)}}()();this.NeedLocalPush.length||(de.remove(),this.p5todotimer=null)}})}}RemoveLocalPushSchedule(T){for(let N=this.NeedLocalPush.length-1;N>=0;N--)if(this.NeedLocalPush[N].id==T.id){this.NeedLocalPush.splice(N,1);break}}init_server(T){this.servers[T.isOfficial][T.target]||(this.servers[T.isOfficial][T.target]={}),this.servers[T.isOfficial][T.target].client=new In(T.key||"defaultkey",T.address,(T.nakama_port||7350).toString(),T.useSSL||!1,3e5,!0)}go_to_chatroom(T,N){return this.has_new_channel_msg=!1,T.update&&delete T.update,this.ChatroomLinkAct?this.ChatroomLinkAct(T,N):(this.SelectSubscribesTab&&this.SelectSubscribesTab(!1),this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/subscribes/chat-room",{state:{info:T,file:N}})})),!1}add_new_group(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("add-group",{animation:Tn.V5})})}SaveLocalAct(T,N=!1){this.channels_orig.local||(this.channels_orig.local={}),this.channels_orig.local.target||(this.channels_orig.local.target={});let U=this.CreateRandomLocalId(T.volatile);this.channels_orig.local.target[U]={id:U,local:!0,title:T.name,redirect:{type:0},volatile:T.volatile,status:"certified",info:{...T,status:"certified"}},T.img&&this.indexed.saveTextFileToUserPath(T.img,`servers/local/target/groups/${U}.img`),this.rearrange_channels(),N||setTimeout(()=>{this.navCtrl.pop()},500)}CreateRandomLocalId(T){let N="";for(let L=0,ie=16;L<ie;L++){let H=Math.floor(62*Math.random());N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(H)}return T&&(N="tmp_files_"+N),this.channels_orig.local.target[N]?this.CreateRandomLocalId(T):N}clear_removed_groups(){var T=this;this.HasRemovedChannel&&this.alertCtrl.create({header:this.lang.text.Nakama.RemovedChannels,message:this.lang.text.Nakama.ClearMissings,buttons:[{text:this.lang.text.UserFsDir.Delete,cssClass:"redfont",handler:()=>{!function(){var U=(0,F.A)(function*(){const L=`subscribes_remove_1:1_${Date.now()}`;for(let wt=T.channels.length-1;wt>=0;wt--)if("missing"==T.channels[wt].status){var ie,H;const Nt=T.channels[wt].server.isOfficial,rn=T.channels[wt].server.target,Ge=T.channels[wt];let vt,He=Ge.title;He=2==(null===(ie=Ge.redirect)||void 0===ie?void 0:ie.type)?He||T.lang.text.Profile.noname_user:He||T.lang.text.ChatRoom.noname_chatroom,yield T.p5loading.update({id:L});try{vt=T.servers[Nt][rn].info}catch(Zt){console.log("\uc0ad\uc81c\ub41c \uc11c\ubc84\uc758 \ucc44\ub110 \uc0ad\uc81c: ",Zt)}try{yield T.remove_group_list(T.groups[Nt][rn][Ge.group_id],Nt,rn,!0)}catch{}delete T.channels_orig[Nt][rn][Ge.id];try{yield T.remove_channel_files(Nt,rn,Ge.id,void 0,L)}catch{}let tt=`${Ge.id}_${T.users.self.display_name}`;try{tt=`${Ge.info.id}_${vt.session.user_id}`}catch{}if(0==(null===(H=Ge.id)||void 0===H?void 0:H.indexOf("4.")))try{tt=`${Ge.user_id_one!=T.servers[Nt][rn].session.user_id?Ge.user_id_one:Ge.user_id_two}_${T.servers[Nt][rn].session.user_id}`}catch{}try{var de;let Zt=localStorage.getItem("fallback_fs");if(!Zt)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let $n=Zt.split("://"),lr=$n.pop().split(":"),Ar=$n.pop();Ar?Ar+=":":Ar=T.global.checkProtocolFromAddress(lr[0])?"https:":"http:";const Hi=null===(de=lr[1])||void 0===de?void 0:de.split(","),Ki=`${Ar}//${lr[0]}:${(null==Hi?void 0:Hi[1])||9002}/`;lr&&(yield T.global.remove_files_from_storage_with_key(Ki,tt,{}))}catch{}try{var Be,Xe;let Zt=T.GetNodejsServerAddress(null===(Be=vt)||void 0===Be?void 0:Be.isOfficial,null===(Xe=vt)||void 0===Xe?void 0:Xe.target,"apache_port");yield T.global.remove_files_from_storage_with_key(Zt,tt,{apache_port:vt.apache_port,cdn_port:vt.cdn_port,user_id:T.servers[Nt][rn].session.user_id})}catch{}let Dt=yield T.indexed.GetFileListFromDB(`servers/${Nt}/${rn}/channels/${Ge.id}`);for(let Zt=0,$n=Dt.length;Zt<$n;Zt++){yield T.p5loading.update({id:L,message:`${T.lang.text.UserFsDir.DeleteFile}: ${He} (${Dt[Zt].split("/").pop()})`,progress:Zt/$n});try{yield T.indexed.removeFileFromUserPath(Dt[Zt])}catch{}}T.rearrange_channels()}T.p5loading.remove(L)});return function(){return U.apply(this,arguments)}}()()}}]}).then(N=>N.present())}open_profile_page(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("group-server",{animation:Tn.V5,state:T})})}open_post(T,N,U=""){T.router=U,this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(U+"post-viewer",{animation:Tn.V5,state:{data:T,index:N+1}})})}init_all_sessions(){var T=this;return(0,F.A)(function*(){T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode();const N="nakama_login";let U=Object.keys(T.servers.official);for(let ie=0,H=U.length;ie<H;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.unofficial[U[ie]].info.name}`,forceEnd:null},!0),yield T.init_session(T.servers.official[U[ie]].info);let L=Object.keys(T.servers.unofficial);for(let ie=0,H=L.length;ie<H;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.unofficial[L[ie]].info.name}`,forceEnd:null},!0),yield T.init_session(T.servers.unofficial[L[ie]].info);return U.length+L.length})()}logout_all_server(){let T=Object.keys(this.statusBar.groupServer);for(let N=0,U=T.length;N<U;N++){let L=Object.keys(this.statusBar.groupServer[T[N]]);for(let ie=0,H=L.length;ie<H;ie++)"online"==this.statusBar.groupServer[T[N]][L[ie]]&&(this.servers[T[N]][L[ie]].socket?this.servers[T[N]][L[ie]].socket.disconnect(!0):this.link_group(T[N],L[ie],!1))}this.AfterLoginActDone=!1}toggle_all_session(){var T=this;return(0,F.A)(function*(){if(T.TogglingSession)return;const N="nakama_login";if(T.TogglingSession=!0,"online"==T.statusBar.settings.groupServer)T.logout_all_server(),T.p5toast.show({text:T.lang.text.Nakama.SessionLogout});else{yield T.p5loading.update({id:N,message:T.lang.text.Nakama.PendingLogin,forceEnd:null});try{(yield T.init_all_sessions())||(yield T.p5loading.update({id:N,message:T.lang.text.Nakama.NoLoginServer},!0))}catch(U){console.log("\ud14c\uc2a4\ud2b8 \uc11c\ubc84 \uc5f0\uacb0 \uc624\ub958: ",U)}}T.p5loading.remove(N),T.TogglingSession=!1})()}link_group(T,N,U="offline"==this.statusBar.groupServer[T][N]){var L=this;return(0,F.A)(function*(){if(U)L.statusBar.groupServer[T][N]="pending",L.catch_group_server_header("pending"),L.users.self.online&&(yield L.init_session(L.servers[T][N].info));else{L.channels_orig[T]&&L.channels_orig[T][N]&&Object.keys(L.channels_orig[T][N]).forEach(H=>{"missing"!=L.channels_orig[T][N][H].status&&delete L.channels_orig[T][N][H].status}),L.groups[T]&&L.groups[T][N]&&Object.keys(L.groups[T][N]).forEach(H=>{"missing"!=L.groups[T][N][H].status&&(L.groups[T][N][H].status="offline")}),L.set_group_statusBar("offline",T,N),L.statusBar.groupServer[T][N]="offline",L.catch_group_server_header("offline");try{yield L.servers[T][N].client.sessionLogout(L.servers[T][N].session,L.servers[T][N].session.token,L.servers[T][N].session.refresh_token)}catch{}L.noti_origin[T]&&L.noti_origin[T][N]&&delete L.noti_origin[T][N],L.rearrange_notifications(),L.channels_orig[T]&&L.channels_orig[T][N]&&Object.keys(L.channels_orig[T][N]).forEach(H=>{"missing"!=L.channels_orig[T][N][H].status&&delete L.channels_orig[T][N][H].status})}L.indexed.saveTextFileToUserPath(JSON.stringify(L.statusBar.groupServer),"servers/list.json")})()}get_all_online_server(){let T=[];return Object.keys(this.servers.official).forEach(L=>{"online"==this.statusBar.groupServer.official[L]&&T.push(this.servers.official[L])}),Object.keys(this.servers.unofficial).forEach(L=>{"online"==this.statusBar.groupServer.unofficial[L]&&T.push(this.servers.unofficial[L])}),T}get_all_server_info(T=!1,N=!1,U=!1){let L=[],ie=Object.keys(this.servers.official);return T&&ie.forEach(de=>{N?("online"==this.statusBar.groupServer.official[de]||"pending"==this.statusBar.groupServer.official[de]&&!U)&&L.push(this.servers.official[de].info):this.servers.official[de]&&L.push(this.servers.official[de].info)}),Object.keys(this.servers.unofficial).forEach(de=>{N?("online"==this.statusBar.groupServer.unofficial[de]||"pending"==this.statusBar.groupServer.unofficial[de]&&!U)&&L.push(this.servers.unofficial[de].info):this.servers.unofficial[de]&&L.push(this.servers.unofficial[de].info)}),L}add_group_server(T,N=(()=>{})){var U=this;if(this.statusBar.groupServer.unofficial[T.target||T.name])return void(T.is_auto_added||this.p5toast.show({text:`${this.lang.text.Nakama.AlreadyHaveTargetName}: ${T.target||T.name}`}));T.target=T.target||T.name,T.address=T.address||"192.168.0.1",T.nakama_port=T.nakama_port,T.cdn_port=T.cdn_port,T.apache_port=T.apache_port,T.square_port=T.square_port,T.webrtc_port=T.webrtc_port,T.webpush_port=T.webpush_port,T.useSSL=T.useSSL||!1,T.isOfficial=T.isOfficial||"unofficial",T.key=T.key||"";let L=(new Date).getTime().toString();return L+=`,${T.isOfficial}`,L+=`,${T.name}`,L+=`,${T.target}`,L+=`,${T.address}`,L+=`,${T.nakama_port||""}`,L+=`,${T.useSSL||""}`,L+=`,${T.cdn_port||""}`,L+=`,${T.apache_port||""}`,L+=`,${T.square_port||""}`,L+=`,${T.webrtc_port||""}`,L+=`,${T.webpush_port||""}`,L+=`,${T.libretranslate_port||""}`,new Promise(function(){var ie=(0,F.A)(function*(H){yield U.AutoGenWebRTCInfo(T),"official"!=T.isOfficial?U.indexed.loadTextFromUserPath("servers/list_detail.csv",function(){var de=(0,F.A)(function*(Be,Xe){let wt=[];Be&&Xe&&(wt=Xe.split("\n")),wt.push(L),U.indexed.saveTextFileToUserPath(wt.join("\n"),"servers/list_detail.csv").then(()=>{U.init_server(T),U.servers[T.isOfficial][T.target].info={...T},N()}),U.statusBar.groupServer[T.isOfficial][T.target]="offline",yield U.indexed.saveTextFileToUserPath(JSON.stringify(U.statusBar.groupServer),"servers/list.json"),H()});return function(Be,Xe){return de.apply(this,arguments)}}()):(U.init_server(T),U.servers[T.isOfficial][T.target].info={...T},U.statusBar.groupServer[T.isOfficial][T.target]="offline",H())});return function(H){return ie.apply(this,arguments)}}())}modify_group_server(T){var N=this;return(0,F.A)(function*(){let U=(new Date).getTime().toString();U+=`,${T.isOfficial}`,U+=`,${T.name}`,U+=`,${T.target}`,U+=`,${T.address}`,U+=`,${T.nakama_port||""}`,U+=`,${T.useSSL||""}`,U+=`,${T.cdn_port||""}`,U+=`,${T.apache_port||""}`,U+=`,${T.square_port||""}`,U+=`,${T.webrtc_port||""}`,U+=`,${T.webpush_port||""}`,U+=`,${T.webpush_tog||""}`,U+=`,${T.libretranslate_port||""}`;const L=yield N.indexed.loadTextFromUserPath("servers/list_detail.csv");let ie=[];L&&(ie=L.split("\n"));for(let H=0,de=ie.length;H<de;H++)if(ie[H].split(",")[3]==T.target){ie.splice(H,1);break}ie.push(U),yield N.indexed.saveTextFileToUserPath(ie.join("\n"),"servers/list_detail.csv")})()}AutoGenWebRTCInfo(T){var N=this;return(0,F.A)(function*(){let U={urls:[`stun:${T.address}:${T.webrtc_port||3478}`,`turn:${T.address}:${T.webrtc_port||3478}`],username:"username",credential:"password"};yield N.SaveWebRTCServer(U,!0)})()}SaveWebRTCServer(T,N=!1){var U=this;return(0,F.A)(function*(){let L=(yield U.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",ie=JSON.parse(L),H=!1;for(let Be=0,Xe=Object.keys(ie).length;Be<Xe;Be++)if(U.catch_address_from_rtc_server_address(T)==U.catch_address_from_rtc_server_address(ie[Be])){ie[Be]=T,H=!0;break}return(!H||N)&&(H||ie.push(T),U.p5loading.toast(U.lang.text.Nakama.SaveWebRTCServer,"webrtc_server_save"),yield U.indexed.saveTextFileToUserPath(JSON.stringify(ie),"servers/webrtc_server.json")),H})()}RemoveWebRTCServer(T){var N=this;return(0,F.A)(function*(){let U=(yield N.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",L=JSON.parse(U);for(let H=0,de=Object.keys(L).length;H<de;H++){let Be=N.catch_address_from_rtc_server_address(L[H]);T==Be&&L.splice(H,1)}yield N.indexed.saveTextFileToUserPath(JSON.stringify(L),"servers/webrtc_server.json")})()}catch_address_from_rtc_server_address(T){let N;try{let U=T.urls[0];(U.indexOf("stun:")>=0||U.indexOf("turn:")>=0)&&(U=U.substring(5));let L=U.lastIndexOf(":");N=U.substring(0,L)}catch(U){console.error("webrtc \uc11c\ubc84 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",U)}return N}catch_group_server_header(T){let N=T;this.statusBar.settings.groupServer=T,setTimeout(()=>{Object.keys(this.statusBar.groupServer.official).forEach(L=>{switch(this.statusBar.groupServer.official[L]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),"online"!=N&&Object.keys(this.statusBar.groupServer.unofficial).forEach(ie=>{switch(this.statusBar.groupServer.unofficial[ie]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),this.statusBar.settings.groupServer=N},1500)}init_session(T){var N=this;return(0,F.A)(function*(){N.CreateEmptyForm(T.isOfficial,T.target),N.CheckShowServerInfo(),N.TogglingSession=!0;try{N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!1),yield N.after_login(T.isOfficial,T.target,T.useSSL)}catch(U){switch(U.status){case 400:N.p5toast.show({text:N.lang.text.Nakama.NeedLoginInfo}),N.open_profile_page(),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 401:N.p5toast.show({text:N.lang.text.Nakama.NeedAccountReset}),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 404:try{const L=N.GetNodejsServerAddress(T.isOfficial,T.target,"webpush_port"),ie=yield fetch(`${L}/GetRegLimitInfo`,{method:"POST"});if(!ie.ok)throw`${ie.statusText} (${ie.status})`;const H=yield ie.text(),de=JSON.parse(H);if(de.count<=0)throw`${N.lang.text.Nakama.RegLimited}: ${T.name}`;if(de.useApproval){const Be={email:N.users.self.email,password:N.users.self.password,title:`${N.lang.text.AdminTools.useApproval} (${N.lang.lang})`},Xe=yield fetch(`${L}/PushReqApprovalUser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!Xe.ok)throw`${Xe.statusText} (${Xe.status})`;N.p5toast.show({text:`${N.lang.text.Nakama.RegAfterApproval}: ${T.name}`,lateable:!0})}else{const Be={email:N.users.self.email},Xe=yield fetch(`${L}/AutoRegCountAct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!Xe.ok)throw`${Xe.statusText} (${Xe.status})`;if(N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!0),N.users.self.display_name&&N.servers[T.isOfficial][T.target].client.updateAccount(N.servers[T.isOfficial][T.target].session,{display_name:N.users.self.display_name,lang_tag:navigator.language.split("-")[0]||N.lang.lang}),N.p5toast.show({text:`${N.lang.text.Nakama.RegisterUserSucc}: ${T.name}`,lateable:!0}),N.users.self.img)try{yield N.servers[T.isOfficial][T.target].client.writeStorageObjects(N.servers[T.isOfficial][T.target].session,[{collection:"user_public",key:"profile_image",permission_read:2,permission_write:1,value:{img:N.users.self.img}}])}catch(wt){console.error("\uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",wt)}yield N.after_login(T.isOfficial,T.target,T.useSSL)}}catch(L){console.log("init_session_\uc0c8\ub85c \uac00\uc785\uc911 \uc624\ub958: ",L),N.p5toast.show({text:`${L}`,lateable:!0})}break;default:N.p5toast.show({text:`(${T.name}) ${N.lang.text.Nakama.UnexpectedLoginErr}: ${(U.statusText?`${U.statusText}(${U.status})`:U.status)||U}`}),N.set_group_statusBar("offline",T.isOfficial,T.target),N.p5loading.remove("nakama_login")}}N.TogglingSession=!1})()}CreateEmptyForm(T,N){this.groups[T]||(this.groups[T]={}),this.groups[T][N]||(this.groups[T][N]={}),this.channels_orig[T]||(this.channels_orig[T]={}),this.channels_orig[T][N]||(this.channels_orig[T][N]={}),this.usernameOverride[T]||(this.usernameOverride[T]={}),this.usernameOverride[T][N]||(this.usernameOverride[T][N]={}),this.OnTransfer[T]||(this.OnTransfer[T]={}),this.OnTransfer[T][N]||(this.OnTransfer[T][N]={}),this.noti_origin[T]||(this.noti_origin[T]={}),this.noti_origin[T][N]||(this.noti_origin[T][N]={}),this.RemoteTodoCounter[T]||(this.RemoteTodoCounter[T]={}),this.RemoteTodoCounter[T][N]||(this.RemoteTodoCounter[T][N]=[]),this.PromotedGroup[T]||(this.PromotedGroup[T]={}),this.PromotedGroup[T][N]||(this.PromotedGroup[T][N]={})}after_login(T,N,U){var L=this;return(0,F.A)(function*(){L.set_group_statusBar("pending",T,N),L.servers[T][N].socket=L.servers[T][N].client.createSocket(U),L.servers[T][N].client.getAccount(L.servers[T][N].session).then(H=>{let de=JSON.parse(H.user.metadata);L.servers[T][N].info.is_admin=de.is_admin,Object.keys(H.user).forEach(Xe=>{"display_name"==Xe?L.users.self[Xe]=H.user[Xe]:L.users.self.display_name||(L.users.self[Xe]=H.user[Xe])}),L.save_self_profile()}),L.servers[T][N].client.readStorageObjects(L.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:L.servers[T][N].session.user_id}]}).then(H=>{H.objects.length?L.socket_reactive.profile?(L.users.self.img=H.objects[0].value.img,L.socket_reactive.profile(H.objects[0].value.img)):(L.users.self.img=H.objects[0].value.img,L.indexed.saveTextFileToUserPath(JSON.stringify(L.users.self.img),"servers/self/profile.img")):L.socket_reactive.profile&&L.socket_reactive.profile("")}),yield L.SyncTodoCounter(T,N),L.LoadOverrideName(T,N),yield L.connect_to(T,N);for(let H=0,de=L.AfterLoginAct.length;H<de;H++)try{yield L.AfterLoginAct[H]()}catch(Be){console.error("\uc9c4\uc785 \ub3d9\uc791 \uc624\ub958: ",Be)}L.AfterLoginAct.length=0,L.AfterLoginActDone=!0,yield L.redirect_channel(T,N),yield L.get_group_list_from_server(T,N),L.rearrange_group_list(),yield L.load_server_todo(T,N),L.set_group_statusBar("online",T,N),yield L.load_posts_counter([L.servers[T][N].info]),yield L.update_notifications(T,N);let ie=Object.keys(L.users[T][N]||{});ie&&L.servers[T][N].client.getUsers(L.servers[T][N].session,ie).then(H=>{for(let de=0,Be=H.users.length;de<Be;de++)L.save_other_user(H.users[de],T,N)}).catch(H=>{console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",H)}),L.p5loading.remove("nakama_login")})()}load_server_todo(T,N){var U=this;return(0,F.A)(function*(){let L=[];yield new Promise(function(){var Be=(0,F.A)(function*(Xe){const wt=U.RemoteTodoCounter[T][N];wt.length||Xe(void 0);let Nt=[];for(let rn=wt.length-1;rn>=0;rn--){const Ge=`RemoteTodo_${wt[rn]}`;Nt.push({collection:"server_todo",key:Ge,user_id:U.servers[T][N].session.user_id}),L.push(Ge)}try{const rn=yield U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:Nt});if(rn.objects.length)for(let Ge=0,He=rn.objects.length;Ge<He;Ge++)yield U.modify_remote_info_as_local(rn.objects[Ge].value,T,N),yield U.p5loading.update({id:"nakama_login",message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.Main.Title})`,progress:(He-Ge-1)/wt.length})}catch(rn){console.log("\uc11c\ubc84 \ud574\uc57c\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",rn)}Xe()});return function(Xe){return Be.apply(this,arguments)}}());const ie=yield U.indexed.GetFileListFromDB("todo/RemoteTodo_");for(let Be=0,Xe=ie.length;Be<Xe;Be++){yield U.p5loading.update({id:"nakama_login",message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.Main.Title})`,progress:Be/Xe});try{if(ie[Be].indexOf("info.todo")>=0){const wt=yield U.indexed.loadTextFromUserPath(ie[Be]),Nt=JSON.parse(wt);if(Nt.remote.isOfficial==T&&Nt.remote.target==N){if(L.includes(Nt.id)){const Ge=L.indexOf(Nt.id);L.splice(Ge,1);continue}var H,de;(yield U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:[{collection:"server_todo",key:Nt.id,user_id:U.servers[T][N].session.user_id}]})).objects.length||((yield U.indexed.GetFileListFromDB(`todo/${Nt.id}_${T}_${N}`)).forEach(He=>U.indexed.removeFileFromUserPath(He)),U.RemoveLocalPushSchedule(Nt),U.noti.ClearNoti(Nt.id),null===(H=(de=U.global).p5removeTodo)||void 0===H||H.call(de,wt))}}}catch{}}U.p5loading.remove("nakama_login")})()}getRemoteTodoCounter(T,N){var U=this;return(0,F.A)(function*(){try{U.RemoteTodoCounter[T][N].sort((H,de)=>H-de);let L=U.RemoteTodoCounter[T][N].length;if(!L)throw"\uc815\ud574\uc9c4 \uac12\uc774 \uc5c6\uc5b4?";let ie=U.RemoteTodoCounter[T][N][L-1]+1;return U.RemoteTodoCounter[T][N].push(ie),ie}catch{let ie=yield U.SyncTodoCounter(T,N),H=0;return ie&&ie.objects.length&&ie.objects[0].value.data.length?H=ie.objects[0].value.data.pop()+1:U.RemoteTodoCounter[T][N]=[0],H}})()}SyncTodoCounter(T,N){var U=this;return(0,F.A)(function*(){try{let L=yield U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:[{collection:"server_todo",key:"RemoteTodo_Counter",user_id:U.servers[T][N].session.user_id}]});return U.RemoteTodoCounter[T][N]=L.objects[0].value.data,L}catch{}})()}removeRemoteTodoCounter(T,N,U){var L=this;return(0,F.A)(function*(){try{let ie=L.RemoteTodoCounter[T][N].indexOf(U);ie>=0&&L.RemoteTodoCounter[T][N].splice(ie,1)}catch{}yield L.updateRemoteCounter(T,N)})()}updateRemoteCounter(T,N){var U=this;return(0,F.A)(function*(){if(U.RemoteTodoCounter[T][N].length){for(let L=U.RemoteTodoCounter[T][N].length-1;L>=0;L--)(void 0===U.RemoteTodoCounter[T][N][L]||null==U.RemoteTodoCounter[T][N][L])&&U.RemoteTodoCounter[T][N].splice(L,1);U.RemoteTodoCounter[T][N].sort((L,ie)=>L-ie);for(let L=U.RemoteTodoCounter[T][N].length-2;L>=0;L--)U.RemoteTodoCounter[T][N][L+1]==U.RemoteTodoCounter[T][N][L]&&U.RemoteTodoCounter[T][N].splice(L,1)}yield U.servers[T][N].client.writeStorageObjects(U.servers[T][N].session,[{collection:"server_todo",key:"RemoteTodo_Counter",permission_read:2,permission_write:1,value:{data:U.RemoteTodoCounter[T][N]}}])})()}modify_remote_info_as_local(T,N,U){var L=this;return(0,F.A)(function*(){var ie,H;T.remote.name=L.servers[N][U].info.name,T.remote.isOfficial=N,T.remote.target=U,L.set_todo_notification(T);try{T.is_me=T.remote.creator_id==L.servers[N][U].session.user_id}catch{}null===(ie=(H=L.global).p5todoAddtodo)||void 0===ie||ie.call(H,JSON.stringify(T));let de=yield L.indexed.loadTextFromUserPath(`todo/${T.id}_${N}_${U}/info.todo`);if(de){let Be=JSON.parse(de);if(T.written<=Be.written&&Be.modified){if(Be.done)return void L.doneTodo(T,!0);if(Be.removed)return void L.deleteTodoFromStorage(!0,Be,!0);delete Be.modified,L.global.p5todoAddtodo(JSON.stringify(Be));try{const Xe=L.GetNodejsServerAddress(N,U,"webpush_port");let wt;for(let rn=0,Ge=Be.attach.length;rn<Ge;rn++)if("image"==Be.attach[rn].viewer&&Be.attach[rn].url){wt=Be.attach[rn].url;break}let Nt=[L.servers[N][U].session.user_id];yield L.remove_schedule_webpush(Xe,{todo_id:Be.id},Nt),yield L.schedule_webpush(Xe,{id:Be.noti_id,title:Be.title,body:Be.description,icon:"todo",image:wt,todo_id:Be.id,time:Be.startFrom||Be.limit,data:{url:`/?todo=${de}&address=${L.GetNodejsServerAddress(N,U,"nakama_port")}`}},Nt)}catch{}yield L.indexed.saveTextFileToUserPath(JSON.stringify(Be),`todo/${Be.id}_${N}_${U}/info.todo`);try{const Xe=yield L.servers[Be.remote.isOfficial][Be.remote.target].client.writeStorageObjects(L.servers[Be.remote.isOfficial][Be.remote.target].session,[{collection:"server_todo",key:Be.id,permission_read:2,permission_write:1,value:Be}]);yield L.servers[Be.remote.isOfficial][Be.remote.target].client.rpc(L.servers[Be.remote.isOfficial][Be.remote.target].session,"send_noti_fn",{receiver_id:[L.servers[Be.remote.isOfficial][Be.remote.target].session.user_id],title:"manage_todo",content:{type:"add",collection:Xe.acks[0].collection,key:Xe.acks[0].key},code:Er.MANAGE_TODO,persistent:!1})}catch(Xe){console.log("\ud560 \uc77c \uc218\uc815 \uc804\ud30c \uc624\ub958: ",Xe)}}else L.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${U}/info.todo`)}else L.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${U}/info.todo`)})()}doneTodo(T,N=!1){var U=this;return(0,F.A)(function*(){var L,ie;T.done=!0;const H=`nakama_doneTodo_${Date.now()}`;if(null===(L=(ie=U.global).p5todoAddtodo)||void 0===L||L.call(ie,JSON.stringify(T)),T.remote){N||U.p5loading.update({id:H});try{yield U.servers[T.remote.isOfficial][T.remote.target].client.rpc(U.servers[T.remote.isOfficial][T.remote.target].session,"send_noti_fn",{receiver_id:[U.servers[T.remote.isOfficial][T.remote.target].session.user_id],title:"manage_todo",content:{type:"done",id:T.id},code:Er.MANAGE_TODO,persistent:!1}),N||U.p5loading.remove(H)}catch{let Be;T.modified=!0;try{Be=`todo/${T.id}_${T.remote.isOfficial}_${T.remote.target}/info.todo`}catch{Be=`todo/${T.id}/info.todo`}return yield U.indexed.saveTextFileToUserPath(JSON.stringify(T),Be),void(N||U.p5loading.remove(H))}}yield U.deleteTodoFromStorage(!1,T,N,H)})()}deleteTodoFromStorage(T,N,U=!1,L){var ie=this;return(0,F.A)(function*(){const H=L||`nakama_deleteTodoFromStorage_${Date.now()}`;if(U||ie.p5loading.update({id:H,message:`${ie.lang.text.TodoDetail.RemoveTodo}: ${N.title}`}),N.attach&&N.attach.length)for(let rn=0,Ge=N.attach.length;rn<Ge;rn++)N.attach[rn].url&&""!==N.attach[rn].type&&ie.global.remove_file_from_storage(N.attach[rn].url,{});if(N.remote)try{if(!ie.servers[N.remote.isOfficial][N.remote.target])throw"Server deleted.";try{const rn=N.remote.isOfficial,Ge=N.remote.target;if(yield ie.servers[rn][Ge].client.deleteStorageObjects(ie.servers[rn][Ge].session,{object_ids:[{collection:"server_todo",key:N.id}]}),N.attach)for(let He=0,vt=N.attach.length;He<vt;He++)N.attach[He].url?""!==N.attach[He].type&&ie.global.remove_file_from_storage(N.attach[He].url,{cdn_port:ie.servers[rn][Ge].info.cdn_port,user_id:ie.servers[rn][Ge].session.user_id}):yield ie.sync_remove_file(N.attach[He].path,rn,Ge,"todo_attach");T&&(yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:[ie.servers[N.remote.isOfficial][N.remote.target].session.user_id],title:"manage_todo",content:{type:"delete",id:N.id},code:Er.MANAGE_TODO,persistent:!1}))}catch(rn){console.error("\ud574\uc57c\ud560 \uc77c \uc0ad\uc81c \uc694\uccad\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",rn)}try{if(N.remote.creator_id!=ie.servers[N.remote.isOfficial][N.remote.target].session.user_id){let rn=(new Date).getTime();try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_done_fn",{id:N.id,creator_id:N.remote.creator_id,user_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id,timestamp:rn,isDelete:T})}catch{}try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:[N.remote.creator_id],title:"Manage_todo_add",content:{type:"worker",id:N.id,isDelete:T,timeAt:rn},code:Er.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch{}}}catch{}if(N.workers){try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_delete_fn",{id:N.id,workers:N.workers})}catch{}try{let rn=[];for(let Ge=0,He=N.workers.length;Ge<He;Ge++)rn.push(N.workers[Ge].id);yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:rn,title:"Manage_todo_add",content:{type:T?"delete":"done",id:N.id},code:Er.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch(rn){console.log("\uc791\uc5c5\uc790\uc5d0\uac8c \uace0\uc9c0 \uc624\ub958: ",rn)}}try{const rn=ie.GetNodejsServerAddress(N.remote.isOfficial,N.remote.target,"webpush_port"),Ge=[...N.workers||[],ie.servers[N.remote.isOfficial][N.remote.target].session.user_id];yield ie.remove_schedule_webpush(rn,{todo_id:N.id},Ge)}catch(rn){console.log("\uc6d0\uaca9 \ud560 \uc77c \uc54c\ub9bc \ucde8\uc18c \uc2e4\ud328: ",rn)}yield ie.removeRemoteTodoCounter(N.remote.isOfficial,N.remote.target,Number(N.id.split("_").pop()))}catch{var de,Be;let Ge;N.modified=!0,N.removed=!0;try{Ge=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}/info.todo`}catch{Ge=`todo/${N.id}/info.todo`}yield ie.indexed.saveTextFileToUserPath(JSON.stringify(N),Ge),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id);try{const He=ie.GetNodejsServerAddress(N.remote.isOfficial,N.remote.target,"webpush_port");ie.send_webpush(He,{id:N.noti_id,icon:"remove"},[ie.servers[N.remote.isOfficial][N.remote.target].session.user_id])}catch{}return T&&(null===(de=(Be=ie.global).p5removeTodo)||void 0===de||de.call(Be,JSON.stringify(N))),void(U||ie.p5loading.remove(H))}try{var Xe;let rn=localStorage.getItem("fallback_fs");if(!rn)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Ge=rn.split("://"),He=Ge.pop().split(":"),vt=Ge.pop();vt?vt+=":":vt=ie.global.checkProtocolFromAddress(He[0])?"https:":"http:";const tt=null===(Xe=He[1])||void 0===Xe?void 0:Xe.split(","),Dt=`${vt}//${He[0]}:${(null==tt?void 0:tt[2])||5e3}/`;let $n=[localStorage.getItem("fallback_fs_push_tog")];yield ie.remove_schedule_webpush(Dt,{todo_id:N.id},$n)}catch(rn){console.log("FFS \ud560 \uc77c \uc54c\ub9bc \uc0ad\uc81c \uc808\ucc28 \uc624\ub958: ",rn)}let wt;ie.global.RemoveTodoTags(N);try{wt=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}`}catch{wt=`todo/${N.id}`}(yield ie.indexed.GetFileListFromDB(wt)).forEach(rn=>ie.indexed.removeFileFromUserPath(rn)),ie.RemoveLocalPushSchedule(N),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id),T&&ie.global.p5todo&&ie.global.p5removeTodo(JSON.stringify(N)),U||ie.p5loading.remove(H)})()}load_groups(T,N,U,L=!1){var ie=this;return(0,F.A)(function*(){let H=ie.groups[T][N][U].channel_id;try{if("missing"!=ie.groups[T][N][U].status){let de=yield ie.servers[T][N].client.listGroupUsers(ie.servers[T][N].session,U);if(de.group_users.length){let Be=!0;for(let Xe=0,wt=de.group_users.length;Xe<wt;Xe++)if(de.group_users[Xe].user.id==ie.servers[T][N].session.user_id){switch(de.group_users[Xe].state){case 0:case 1:case 2:ie.groups[T][N][U].status="online";break;case 3:ie.groups[T][N][U].status="pending";break;default:console.log("\uc774\ud574\ud560 \uc218 \uc5c6\ub294 \ucf54\ub4dc \ubc18\ud658: ",de.group_users[Xe].state),ie.groups[T][N][U].status="missing"}ie.PromotedGroup[T]||(ie.PromotedGroup[T]={}),ie.PromotedGroup[T][N]||(ie.PromotedGroup[T][N]={}),de.group_users[Xe].state<2?ie.PromotedGroup[T][N][U]=!0:delete ie.PromotedGroup[T][N][U],Be=!1,de.group_users[Xe].is_me=!0;break}Be&&(ie.groups[T][N][U].status="missing",H&&(ie.channels_orig[T][N][H].status="missing"),ie.save_channels_with_less_info())}else ie.groups[T][N][U].status="missing",ie.channels_orig[T][N][H].status="missing",ie.save_channels_with_less_info();de.group_users.length&&(ie.groups[T][N][U].users=de.group_users);for(let Be=0,Xe=de.group_users.length;Be<Xe;Be++)if(de.group_users[Be].is_me)de.group_users[Be].user=ie.users.self;else try{if(L)throw"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub9cc \ubc1b\uc74c";let wt=yield ie.servers[T][N].client.readStorageObjects(ie.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:de.group_users[Be].user.id}]});wt.objects.length?de.group_users[Be].user.img=wt.objects[0].value.img:delete de.group_users[Be].user.img,ie.save_other_user(de.group_users[Be].user,T,N)}catch(wt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",wt),ie.save_other_user(de.group_users[Be].user,T,N)}ie.save_groups_with_less_info()}}catch(de){console.log("load_groups_error: ",de)}})()}collectLinkedUser(T){const N=T.info.isOfficial,U=T.info.target;let L=[];try{L.push(T.session.user_id)}catch(ie){console.log("\ub098 \uc790\uc2e0\uc758 \uc815\ubcf4 \uc218\uc9d1 \uc624\ub958: ",ie)}try{let ie=this.channels_orig[N][U];const H=Object.keys(ie);for(let de of H)switch(ie[de].redirect.type){case 2:T.session.user_id==ie[de].user_id_one?L.includes(ie[de].user_id_two)||L.push(ie[de].user_id_two):L.includes(ie[de].user_id_one)||L.push(ie[de].user_id_one);break;case 3:const Xe=this.groups[N][U][ie[de].group_id].users;for(let wt of Xe)!wt.is_me&&!L.includes(wt.user.id)&&L.push(wt.user.id)}}catch(ie){console.log("\ub4f1\ub85d\ub41c \uadf8\ub8f9 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958:",ie)}return L}save_profile_to_server(){var T=this;return(0,F.A)(function*(){let N=T.get_all_online_server();for(let U=0,L=N.length;U<L;U++){let ie=T.collectLinkedUser(N[U]);try{yield N[U].client.updateAccount(N[U].session,{display_name:T.users.self.display_name});try{yield T.servers[N[U].info.isOfficial][N[U].info.target].client.rpc(T.servers[N[U].info.isOfficial][N[U].info.target].session,"send_noti_fn",{receiver_id:ie,title:"edit_profile",content:{type:"info"},code:Er.EDIT_PROFILE,persistent:!1})}catch(H){console.log("\uc140\ud504 \uc54c\ub9bc \uc2e4\ud328: ",H)}}catch(H){console.log("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",H)}}T.save_self_profile()})()}save_self_profile(){let T={...this.users.self};delete T.img,this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/self/profile.json")}rearrange_all_user(){let T=[];return Object.keys(this.users).forEach(U=>{"self"!=U&&Object.keys(this.users[U]).forEach(ie=>{Object.keys(this.users[U][ie]).forEach(de=>{T.push(this.users[U][ie][de])})})}),T}load_other_user(T,N,U,L=(H=>{}),ie=!1){try{if(this.servers[N][U].session.user_id==T)return L(this.users.self),this.users.self}catch{}if(this.users[N][U]||(this.users[N][U]={}),this.users[N][U][T]&&!ie)return L(this.users[N][U][T]),this.users[N][U][T];this.users[N][U][T]={};let H=()=>{this.indexed.loadTextFromUserPath(`servers/${N}/${U}/users/${T}/profile.json`,(Be,Xe)=>{if(Be&&Xe){let wt=JSON.parse(Xe);Object.keys(wt).forEach(rn=>this.users[N][U][T][rn]=wt[rn])}L(this.users[N][U][T])})};try{this.servers[N][U].client.getUsers(this.servers[N][U].session,[T]).then(Be=>{Be.users.length?(Object.keys(Be.users[0]).forEach(wt=>this.users[N][U][T][wt]=Be.users[0][wt]),this.users[N][U][T].img||(this.users[N][U][T].img=null),this.save_other_user(this.users[N][U][T],N,U)):(this.indexed.removeFileFromUserPath(`${N}/${U}/users/${T}`),this.indexed.removeFileFromUserPath(`${N}/${U}/users/${T}/profile.json`),this.indexed.removeFileFromUserPath(`${N}/${U}/users/${T}/profile.img`)),L(this.users[N][U][T])}).catch(Be=>{H()})}catch{H()}let de=()=>{this.users[N][U][T].img&&(delete this.users[N][U][T].img,this.save_other_user(this.users[N][U][T],N,U)),this.indexed.loadTextFromUserPath(`servers/${N}/${U}/users/${T}/profile.img`,(Be,Xe)=>{Be&&Xe&&(this.users[N][U][T].img=Xe.replace(/"|=|\\/g,""))})};try{this.servers[N][U].client.readStorageObjects(this.servers[N][U].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T}]}).then(Be=>{Be.objects.length&&this.users[N][U][T].img!=Be.objects[0].value.img&&(this.users[N][U][T].img=Be.objects[0].value.img,this.save_other_user(this.users[N][U][T],N,U))}).catch(Be=>{de()})}catch{de()}return this.users[N][U][T]}save_other_user(T,N,U){if(this.servers[N][U].session.user_id==T.id)return;let L=JSON.parse(JSON.stringify(T));T.id!=this.servers[N][U].session.user_id&&(delete L.img,delete L.online,delete L.todo_checked,delete L.todo_done,this.users[N][U]||(this.users[N][U]={}),this.users[N][U][T.id]||(this.users[N][U][T.id]={}),Object.keys(T).forEach(H=>this.users[N][U][T.id][H]=T[H]),this.indexed.saveTextFileToUserPath(JSON.stringify(L),`servers/${N}/${U}/users/${L.id}/profile.json`),T.img?this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${U}/users/${T.id}/profile.img`):void 0===T.img&&this.indexed.removeFileFromUserPath(`servers/${N}/${U}/users/${T.id}/profile.img`))}update_notifications(T,N){var U=this;return(0,F.A)(function*(){let L=yield U.servers[T][N].client.listNotifications(U.servers[T][N].session,1);U.noti_origin[T][N]={};for(let ie=0,H=L.notifications.length;ie<H;ie++)U.act_on_notification(L.notifications[ie],T,N);U.rearrange_notifications()})()}rearrange_notifications(){let T=[];return Object.keys(this.noti_origin).forEach(U=>{Object.keys(this.noti_origin[U]).forEach(ie=>{Object.keys(this.noti_origin[U][ie]).forEach(de=>{T.push(this.noti_origin[U][ie][de])})})}),T.sort((U,L)=>U.create_time<L.create_time?1:U.create_time>L.create_time?-1:0),this.notifications_rearrange=T,T}add_channel(T,N,U,L=!1){var ie=this;return(0,F.A)(function*(){if(!ie.channels_orig[N][U][T.id]){ie.channels_orig[N][U][T.id]={};try{L&&(yield ie.servers[N][U].client.rpc(ie.servers[N][U].session,"send_noti_fn",{receiver_id:[ie.servers[N][U].session.user_id],title:"add_channel",content:{type:"add",id:T.redirect.id},code:Er.ADD_CHANNEL,persistent:!1}))}catch(de){console.log("\uc0c8 \ucc44\ub110 \uc0dd\uc131\ub428 \uc140\ud504 \uc804\ud30c \uc2e4\ud328: ",de)}}switch(Object.keys(T).forEach(de=>ie.channels_orig[N][U][T.id][de]=T[de]),ie.channels_orig[N][U][T.id].cnoti_id||(ie.channels_orig[N][U][T.id].cnoti_id=ie.get_noti_id()),ie.channels_orig[N][U][T.id].redirect.type){case 2:let de=ie.channels_orig[N][U][T.id].redirect.id;ie.channels_orig[N][U][T.id].color=(de.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6);let Be=ie.load_other_user(de,N,U).online?"online":"pending";ie.channels_orig[N][U][T.id].status=Be;break;case 3:try{ie.channels_orig[N][U][T.id].color=(ie.channels_orig[N][U][T.id].redirect.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),"missing"==ie.channels_orig[N][U][T.id].status&&delete ie.channels_orig[N][U][T.id].status}catch(Xe){console.error("\uadf8\ub8f9 \ucc44\ub110 \uc0dd\uc131 \uc624\ub958: ",Xe)}break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc885\ub958: ",ie.channels_orig[N][U][T.id])}})()}add_group_user_without_duplicate(T,N,U,L){let ie=!1;this.groups[U][L][N].users||(this.groups[U][L][N].users=[]);for(let H=0,de=this.groups[U][L][N].users.length;H<de;H++)if(this.groups[U][L][N].users[H].user.id==T.user.id){ie=!0;break}ie||this.groups[U][L][N].users.push(T)}load_channel_list(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.loadTextFromUserPath("servers/channels.json");N&&(T.channels_orig=JSON.parse(N),Object.keys(T.channels_orig).forEach(L=>{Object.keys(T.channels_orig[L]).forEach(H=>{T.CreateEmptyForm(L,H),Object.keys(T.channels_orig[L][H]).forEach(Be=>{try{if(T.channels_orig[L][H][Be].volatile)throw delete T.channels_orig[L][H][Be],`\ud718\ubc1c\uc131 \ucc44\ub110 \ubb34\uc2dc: ${Be}`;2==T.channels_orig[L][H][Be].redirect.type&&(T.channels_orig[L][H][Be].info=T.load_other_user(T.channels_orig[L][H][Be].redirect.id,L,H)),"missing"!=T.channels_orig[L][H][Be].status&&(delete T.channels_orig[L][H][Be].status,0==T.channels_orig[L][H][Be].redirect.type&&(T.channels_orig[L][H][Be].status="certified")),T.channels_orig[L][H][Be].is_new&&!T.subscribe_lock&&(T.has_new_channel_msg=!0)}catch{}})})}))})()}get_noti_id(){return this.noti_id=this.check_If_RegisteredId(this.noti_id+1),this.registered_id.push(this.noti_id),this.noti_id}check_If_RegisteredId(T){let N=!1;for(let U=0,L=this.registered_id.length;U<L;U++)if(this.registered_id[U]==T){N=!0;break}return N?this.check_If_RegisteredId(T+1):T}removeRegisteredId(T){for(let N=0,U=this.registered_id.length;N<U;N++)if(this.registered_id[N]==T){this.registered_id.splice(N,1);break}}redirect_channel(T,N){var U=this;return(0,F.A)(function*(){if(U.channels_orig[T][N]){let L=Object.keys(U.channels_orig[T][N]);for(let ie=0,H=L.length;ie<H;ie++)try{yield U.p5loading.update({id:"nakama_login",message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.Subscribes.Title})`,progress:ie/H}),"missing"!=U.channels_orig[T][N][L[ie]].status&&2===(yield U.servers[T][N].socket.joinChat(U.channels_orig[T][N][L[ie]].redirect.id,U.channels_orig[T][N][L[ie]].redirect.type,U.channels_orig[T][N][L[ie]].redirect.persistence,!1),U.channels_orig[T][N][L[ie]].cnoti_id||(U.channels_orig[T][N][L[ie]].cnoti_id=U.get_noti_id()),U.channels_orig[T][N][L[ie]].color=(U.channels_orig[T][N][L[ie]].info.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),U.channels_orig[T][N][L[ie]].redirect.type)&&(U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:U.channels_orig[T][N][L[ie]].redirect.id}]}).then(de=>{let Be=U.load_other_user(U.channels_orig[T][N][L[ie]].redirect.id,T,N);Be.img=de.objects.length?de.objects[0].value.img:void 0,U.save_other_user(Be,T,N)}),U.channels_orig[T][N][L[ie]].update||U.servers[T][N].client.listChannelMessages(U.servers[T][N].session,L[ie],1,!1).then(de=>{de.messages.length&&U.update_from_channel_msg(de.messages[0],T,N)}))}catch{U.channels_orig[T][N][L[ie]].status="missing",U.p5loading.remove("nakama_login")}}})()}rearrange_channels(){this.HasRemovedChannel=!1;let T=[];return Object.keys(this.channels_orig).forEach(U=>{Object.keys(this.channels_orig[U]).forEach(ie=>{Object.keys(this.channels_orig[U][ie]).forEach(de=>{this.channels_orig[U][ie][de].server={isOfficial:U,target:ie};try{this.channels_orig[U][ie][de].server.name=this.servers[U][ie].info.name}catch{this.channels_orig[U][ie][de].server.name=this.lang.text.Nakama.DeletedServer}try{switch(this.channels_orig[U][ie][de].info||(this.channels_orig[U][ie][de].info={}),this.HasRemovedChannel=this.HasRemovedChannel||"missing"==this.channels_orig[U][ie][de].status,this.channels_orig[U][ie][de].redirect.type){case 1:break;case 2:let Be=this.load_other_user(this.channels_orig[U][ie][de].redirect.id,U,ie);Object.keys(Be).forEach(wt=>this.channels_orig[U][ie][de].info[wt]=Be[wt]),this.channels_orig[U][ie][de].title=this.channels_orig[U][ie][de].info.display_name;break;case 3:this.groups[U][ie]&&this.groups[U][ie][this.channels_orig[U][ie][de].redirect.id]?(this.channels_orig[U][ie][de].info=this.groups[U][ie][this.channels_orig[U][ie][de].redirect.id],this.channels_orig[U][ie][de].title=this.groups[U][ie][this.channels_orig[U][ie][de].redirect.id].name,"missing"==this.groups[U][ie][this.channels_orig[U][ie][de].redirect.id].status&&(this.channels_orig[U][ie][de].status=this.groups[U][ie][this.channels_orig[U][ie][de].redirect.id].status)):this.channels_orig[U][ie][de].status="missing";break;case 0:this.channels_orig[U][ie][de].info||(this.channels_orig[U][ie][de].info={}),this.channels_orig[U][ie][de].info.name=this.channels_orig[U][ie][de].title,this.channels_orig[U][ie][de].info.img||this.indexed.loadTextFromUserPath(`servers/${U}/${ie}/groups/${de}.img`,(wt,Nt)=>{wt&&Nt&&(this.channels_orig[U][ie][de].info.img=Nt)})}}catch{}this.channels_orig[U][ie][de].info.isOfficial=U,this.channels_orig[U][ie][de].info.target=ie,this.channels_orig[U][ie][de].last_comment_time||(this.channels_orig[U][ie][de].last_comment_time=Date.now()),T.push(this.channels_orig[U][ie][de])})})}),T.sort((U,L)=>{let ie=new Date(U.last_comment_time||0).getTime(),H=new Date(L.last_comment_time||0).getTime();return ie<H?1:ie>H?-1:0}),T.sort((U,L)=>U.is_new?L.is_new?0:-1:L.is_new?1:0),this.channels=T,this.save_channels_with_less_info(),T}save_channels_with_less_info(){let T=JSON.parse(JSON.stringify(this.channels_orig));Object.keys(T).forEach(U=>{Object.keys(T[U]).forEach(ie=>{let H=Object.keys(T[U][ie]);H.forEach(de=>{delete T[U][ie][de].img,delete T[U][ie][de].group,delete T[U][ie][de].info,delete T[U][ie][de].update,delete T[U][ie][de].presences,delete T[U][ie][de].cnoti_id,delete T[U][ie][de].color,delete T[U][ie][de].isOfficial,delete T[U][ie][de].target,T[U][ie][de].is_new||delete T[U][ie][de].is_new}),H.length||delete T[U][ie]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/channels.json")}limit_image_size(T,N=(U=>{})){new un(L=>{L.setup=()=>{L.noCanvas(),L.loadImage(T,H=>{H.resize(window.innerWidth,window.innerWidth*H.height/H.width),H.canvas.toDataURL().length>245e3&&ie(H),N(H),L.remove()},H=>{this.p5toast.show({text:this.lang.text.Nakama.CannotOpenImg}),L.remove()})};let ie=H=>{H.resize(.95*H.width,.95*H.height),H.canvas.toDataURL().length>245e3&&ie(H)}})}try_add_group(T){var N=this;return new Promise(function(){var U=(0,F.A)(function*(L,ie){let H=[],de=N.get_all_server_info(!0,!0);for(let Be of de)H.push(N.servers[Be.isOfficial][Be.target]);for(let Be=0,Xe=H.length;Be<Xe;Be++)try{let wt=yield H[Be].client.joinGroup(H[Be].session,T.id);if(!wt)return void console.log("\uadf8\ub8f9 join \uc2e4\ud328... \ubca4 \ub2f9\ud588\uc744 \ub54c\uc778\ub4ef? \ud5a5\ud6c4\uc5d0 \uac80\ud1a0 \ud544");wt=yield H[Be].client.listGroups(H[Be].session,decodeURIComponent(T.name));for(let Nt=0,rn=wt.groups.length;Nt<rn;Nt++)if(wt.groups[Nt].id==T.id){let Ge=wt.groups[Nt];Ge.status=Ge.open?"online":"pending",Ge.server=N.servers[H[Be].info.isOfficial][H[Be].info.target].info;try{yield N.load_groups(H[Be].info.isOfficial,H[Be].info.target,wt.groups[Nt].id,!0)}catch(He){console.warn("\uadf8\ub8f9 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",He)}try{let He=yield N.servers[H[Be].info.isOfficial][H[Be].info.target].client.readStorageObjects(N.servers[H[Be].info.isOfficial][H[Be].info.target].session,{object_ids:[{collection:"group_public",key:`group_${wt.groups[Nt].id}`,user_id:wt.groups[Nt].creator_id}]});He.objects.length?Ge.img=He.objects[0].value.img:delete Ge.img}catch(He){console.warn("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \ud655\uc778 \uc624\ub958: ",He)}if(N.save_group_info(Ge,H[Be].info.isOfficial,H[Be].info.target),yield N.servers[H[Be].info.isOfficial][H[Be].info.target].client.rpc(N.servers[H[Be].info.isOfficial][H[Be].info.target].session,"send_noti_fn",{receiver_id:[N.servers[H[Be].info.isOfficial][H[Be].info.target].session.user_id],title:"add_channel",content:{type:"add",id:wt.groups[Nt].id},code:Er.ADD_CHANNEL,persistent:!1}),Ge.open){let He=yield N.join_chat_with_modulation(Ge.id,3,H[Be].info.isOfficial,H[Be].info.target);(!N.opened_page_info.channel||N.opened_page_info.channel.isOfficial!=H[Be].info.isOfficial||N.opened_page_info.channel.target!=H[Be].info.target||N.opened_page_info.channel.id!=He.id)&&N.servers[H[Be].info.isOfficial][H[Be].info.target].client.listChannelMessages(N.servers[H[Be].info.isOfficial][H[Be].info.target].session,He.id,1,!1).then(vt=>{vt.messages.length&&N.update_from_channel_msg(vt.messages[0],H[Be].info.isOfficial,H[Be].info.target),N.save_group_info(Ge,H[Be].info.isOfficial,H[Be].info.target),N.go_to_chatroom(He)}).catch(vt=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",vt)})}L();break}}catch(wt){if(400===(console.log(`try_add_group: ${wt.statusText} (${wt.status})`),wt.status)){try{let Nt=yield N.join_chat_with_modulation(T.id,3,H[Be].info.isOfficial,H[Be].info.target);N.servers[H[Be].info.isOfficial][H[Be].info.target].client.listChannelMessages(N.servers[H[Be].info.isOfficial][H[Be].info.target].session,Nt.id,1,!1).then(rn=>{rn.messages.length&&N.update_from_channel_msg(rn.messages[0],H[Be].info.isOfficial,H[Be].info.target),N.go_to_chatroom(Nt)}).catch(rn=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",rn)})}catch(Nt){console.log("\uadf8\ub8f9 \ucc38\uac00 \uc2e4\ud328: ",Nt),N.p5toast.show({text:`(Code: ${Nt.code}) ${Nt.message}`})}L()}}ie(N.lang.text.Nakama.GroupAllListDone)});return function(L,ie){return U.apply(this,arguments)}}())}save_group_info(T,N,U){this.groups[N][U]||(this.groups[N][U]={}),this.groups[N][U][T.id]=T,this.save_groups_with_less_info(),this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${U}/groups/${T.id}.img`),T.owner==this.servers[N][U].session.user_id&&T.img&&this.servers[N][U].client.writeStorageObjects(this.servers[N][U].session,[{collection:"group_public",key:`group_${T.id}`,value:{img:T.img},permission_read:2,permission_write:1}])}save_groups_with_less_info(T=(()=>{})){let N=JSON.parse(JSON.stringify(this.groups));Object.keys(N).forEach(L=>{Object.keys(N[L]).forEach(H=>{let de=Object.keys(N[L][H]);de.forEach(Be=>{if(delete N[L][H][Be].server,delete N[L][H][Be].img,N[L][H][Be].users)for(let Xe=0,wt=N[L][H][Be].users.length;Xe<wt;Xe++)if(N[L][H][Be].users[Xe]){delete N[L][H][Be].users[Xe].state;try{N[L][H][Be].users[Xe].user.id?(N[L][H][Be].users[Xe].user={id:N[L][H][Be].users[Xe].user.id},this.servers[L][H]&&this.servers[L][H].session&&N[L][H][Be].users[Xe].user.id==this.servers[L][H].session.user_id&&(N[L][H][Be].users[Xe].is_me=!0)):N[L][H][Be].users[Xe].is_me||N[L][H][Be].users.splice(Xe,1)}catch{}}}),de.length||delete N[L][H]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(N),"servers/groups.json").then(()=>{T()})}remove_group_list(T,N,U,L=!1){var ie=this;return(0,F.A)(function*(){try{let de=T.creator_id==ie.servers[N][U].session.user_id;if(!ie.servers[N][U]||!de)throw"not a group creator";try{let Xe=`${T.server.useSSL?"https":"http"}://${T.server.address}`,wt=ie.servers[N][U].info;yield ie.global.remove_files_from_storage_with_key(Xe,T.id,{cdn_port:wt.cdn_port,apache_port:wt.apache_port,user_id:ie.servers[N][U].session.user_id})}catch{}(yield ie.servers[N][U].client.deleteGroup(ie.servers[N][U].session,T.id))||console.log("\uadf8\ub8f9 \uc0ad\uc81c \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),ie.remove_channel_files(N,U,T.channel_id,de);try{throw yield ie.servers[N][U].client.deleteStorageObjects(ie.servers[N][U].session,{object_ids:[{collection:"group_public",key:`group_${T.id}`}]}),"Remove group image well"}catch{throw"No group image found"}}catch{try{var H;let Be=localStorage.getItem("fallback_fs");if(!Be)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Xe=Be.split("://"),wt=Xe.pop().split(":"),Nt=Xe.pop();Nt?Nt+=":":Nt=ie.global.checkProtocolFromAddress(wt[0])?"https:":"http:";const rn=null===(H=wt[1])||void 0===H?void 0:H.split(",");let Ge=`${Nt}//${wt[0]}:${(null==rn?void 0:rn[1])||9002}/`;wt[0]&&(yield ie.global.remove_files_from_storage_with_key(Ge,`${T.id}_${ie.servers[N][U].session.user_id}`,{}))}catch{}try{let Be=`${T.server.useSSL?"https":"http"}://${T.server.address}`;if(T.server.address){let Xe=ie.servers[N][U].info;yield ie.global.remove_files_from_storage_with_key(Be,`${T.id}_${ie.servers[N][U].session.user_id}`,{cdn_port:Xe.cdn_port,apache_port:Xe.apache_port,user_id:ie.servers[N][U].session.user_id})}}catch{}}try{if(L){yield ie.indexed.removeFileFromUserPath(`servers/${N}/${U}/groups/${T.id}.img`);try{delete ie.groups[N][U][T.id],ie.save_groups_with_less_info()}catch{}}}catch{}try{delete ie.PromotedGroup[N][U][T.id]}catch{}})()}remove_channel_files(T,N,U,L,ie){var H=this;return(0,F.A)(function*(){var de,Be;const Xe=ie||"remove_channel_files",wt=(null===(de=H.channels_orig[T][N][U])||void 0===de?void 0:de.title)||("4"==U.charAt(0)?null===(Be=H.users[T][N][U.split(".").find(Nt=>Nt in H.users[T][N])])||void 0===Be?void 0:Be.display_name:void 0);try{yield H.p5loading.update({id:Xe,message:`${H.lang.text.GroupDetail.BreakupGroup}: ${wt}`,forceEnd:null}),yield H.servers[T][N].client.rpc(H.servers[T][N].session,"remove_channel_file",{collection:`file_${U.replace(/[.]/g,"_")}`,is_creator:L}),H.p5loading.update({id:Xe,progress:1},!0)}catch(Nt){H.p5loading.update({id:Xe,message:`${H.lang.text.AdminTools.FailedClear}: ${(Nt.statusText?`${Nt.statusText}(${Nt.status})`:Nt.status)||Nt}`,progress:0},!0)}ie||H.p5loading.remove(Xe)})()}get_group_list_from_server(T,N,U){var L=this;return(0,F.A)(function*(){const ie="nakama_login";yield L.p5loading.update({id:ie,message:`${L.lang.text.Nakama.SyncingChannel}: ${L.servers[T][N].info.name} (${L.lang.text.AddGroup.GroupInfo})`,progress:null});let H=yield L.servers[T][N].client.listUserGroups(L.servers[T][N].session,L.servers[T][N].session.user_id),de=[];try{for(let Xe=0,wt=H.user_groups.length;Xe<wt;Xe++)(void 0===U||U==H.user_groups[Xe].group.id)&&(L.groups[T][N][H.user_groups[Xe].group.id]||(L.groups[T][N][H.user_groups[Xe].group.id]={}),de.push({collection:"group_public",key:`group_${H.user_groups[Xe].group.id}`,user_id:H.user_groups[Xe].group.creator_id}),L.groups[T][N][H.user_groups[Xe].group.id]={...L.groups[T][N][H.user_groups[Xe].group.id],...H.user_groups[Xe].group},U&&"missing"==L.groups[T][N][H.user_groups[Xe].group.id].status&&(L.groups[T][N][H.user_groups[Xe].group.id].status="online"),L.load_groups(T,N,H.user_groups[Xe].group.id,!0).then(()=>{L.join_chat_with_modulation(H.user_groups[Xe].group.id,3,T,N).then(()=>{Xe==wt-1&&L.rearrange_channels()})}));let Be=yield L.servers[T][N].client.readStorageObjects(L.servers[T][N].session,{object_ids:de});for(let Xe=0,wt=Be.objects.length;Xe<wt;Xe++){U||(yield L.p5loading.update({id:ie,message:`${L.lang.text.Nakama.SyncingChannel}: ${L.servers[T][N].info.name} (${L.lang.text.AddGroup.GroupInfo})`,progress:Xe/de.length}));const Nt=Be.objects[Xe].key.substring(6);L.groups[T][N][Nt].img=Be.objects[Xe].value.img,yield L.indexed.saveTextFileToUserPath(Be.objects[Xe].value.img,`servers/${T}/${N}/groups/${Nt}.img`);for(let rn=de.length-1;rn>=0;rn--)if(de[rn].key==Be.objects[Xe].key){de.splice(rn,1);break}}for(let Xe=0,wt=de.length;Xe<wt;Xe++){U||(yield L.p5loading.update({id:ie,message:`${L.lang.text.Nakama.SyncingChannel}: ${L.servers[T][N].info.name} (${L.lang.text.AddGroup.GroupInfo})`,progress:Xe/de.length}));const Nt=de[Xe].key.substring(6);delete L.groups[T][N][Nt].img,L.indexed.removeFileFromUserPath(`servers/${T}/${N}/groups/${Nt}.img`)}L.rearrange_channels()}catch(Be){console.error("\uc0ac\uc6a9\uc790 \uadf8\ub8f9 \uac00\uc838\uc624\uae30 \uc624\ub958: ",Be),L.p5loading.remove(ie)}U&&L.p5loading.remove(ie)})()}rearrange_group_list(T=!0){let N=[];return Object.keys(this.groups).forEach(L=>{Object.keys(this.groups[L]).forEach(H=>{Object.keys(this.groups[L][H]).forEach(Be=>{try{this.groups[L][H][Be].server=this.servers[L][H].info,N.push(this.groups[L][H][Be])}catch{this.groups[L][H][Be].server={name:this.lang.text.Nakama.DeletedServer,isOfficial:L,target:H},T&&N.push(this.groups[L][H][Be])}})})}),N}set_group_statusBar(T,N,U){this.statusBar.groupServer[N]||(this.statusBar.groupServer[N]={}),this.statusBar.groupServer[N][U]=T,this.catch_group_server_header(T),this.StatusBarChangedCallback&&this.StatusBarChangedCallback()}count_channel_online_member(T,N,U){var L=this;return(0,F.A)(function*(){let ie="pending";try{if("offline"==L.statusBar.groupServer[N][U])throw"\uc11c\ubc84 \uc624\ud504\ub77c\uc778";if(T.group_id){var H;let de=null===(H=L.groups[N][U][T.group_id].users)||void 0===H?void 0:H.length;if(L.groups[N][U][T.group_id].max_count<=1)return ie=L.users.self.online?"online":"offline",void("missing"!=L.channels_orig[N][U][T.channel_id||T.id].status&&(L.channels_orig[N][U][T.channel_id||T.id].status=ie));if(void 0!==de)for(let Be=0;Be<de;Be++){let Xe=L.groups[N][U][T.group_id].users[Be].user.id||L.servers[N][U].session.user_id;if(Xe!=L.servers[N][U].session.user_id&&(yield new Promise(Nt=>{L.load_other_user(Xe,N,U,rn=>Nt(rn))})).online){ie="online";break}}else ie="pending"}else if(T.user_id_one)if(L.channels_orig[N][U][T.channel_id||T.id])try{let de=L.channels_orig[N][U][T.channel_id||T.id].redirect.id,Be=yield L.servers[N][U].client.getUsers(L.servers[N][U].session,[de]);Object.keys(Be.users[0]).forEach(wt=>{L.users[N][U][de][wt]=Be.users[0][wt]}),ie=L.load_other_user(de,N,U).online?"online":"pending"}catch(de){console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c (\ud0c8\ud1f4): ",de)}else try{let de=yield L.join_chat_with_modulation(T.user_id_one!=L.servers[N][U].session.user_id?T.user_id_one:T.user_id_two,2,N,U);ie=L.load_other_user(L.channels_orig[N][U][de.id].redirect.id,N,U).online?"online":"pending"}catch(de){console.error(de)}}catch{ie="offline"==L.statusBar.groupServer[N][U]?"offline":"missing"}L.channels_orig[N][U][T.channel_id||T.id]||(L.channels_orig[N][U][T.channel_id||T.id]={}),"missing"!=L.channels_orig[N][U][T.channel_id||T.id].status&&(L.channels_orig[N][U][T.channel_id||T.id].status=ie)})()}remove_server(T,N,U){var L=this;return(0,F.A)(function*(){const ie="nakama_remove_server";L.p5loading.update({id:ie,message:L.lang.text.Nakama.RemovingAccount});const H=L.servers[T][N].info;H.webpush_tog&&(H.webpush_tog=!1,yield L.GetPushPubKey(H.isOfficial,H.target));try{const wt=L.servers[T][N].session.user_id,Nt=`${H.useSSL?"https":"http"}://${H.address}`;try{if(U)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";yield L.global.remove_files_from_storage_with_key(Nt,wt,{cdn_port:H.cdn_port,apache_port:H.apache_port,user_id:L.servers[T][N].session.user_id})}catch{}try{var de;if(U)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";const rn=localStorage.getItem("fallback_fs");if(!rn)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Ge=rn.split("://"),He=Ge.pop().split(":"),vt=Ge.pop();vt?vt+=":":vt=L.global.checkProtocolFromAddress(He[0])?"https:":"http:";const tt=null===(de=He[1])||void 0===de?void 0:de.split(",");let Dt=`${vt}//${He[0]}:${(null==tt?void 0:tt[1])||9002}/`;yield L.global.remove_files_from_storage_with_key(Dt,wt,{})}catch{}yield L.servers[T][N].client.rpc(L.servers[T][N].session,"remove_account_fn",{user_id:wt}).catch(rn=>{})}catch{}if(L.p5loading.update({id:ie,message:L.lang.text.Nakama.LogoutAccount}),"online"==L.statusBar.groupServer[T][N])try{L.servers[T][N].socket.disconnect(!0)}catch{L.link_group(T,N,!1)}L.p5loading.update({id:ie,message:L.lang.text.Nakama.RemovingNotification});try{delete L.noti_origin[T][N]}catch{}L.rearrange_notifications(),L.p5loading.update({id:ie,message:L.lang.text.Nakama.MissingChannels});try{let wt=Object.keys(L.channels_orig[T][N]);L.channels_orig.deleted||(L.channels_orig.deleted={}),L.channels_orig.deleted[N]||(L.channels_orig.deleted[N]={}),wt.forEach(Nt=>{L.channels_orig[T][N][Nt].info.status="missing",L.channels_orig[T][N][Nt].status="missing",L.channels_orig.deleted[N][Nt]=JSON.parse(JSON.stringify(L.channels_orig[T][N][Nt]))}),delete L.channels_orig[T][N]}catch{}L.save_channels_with_less_info();let Be=yield L.indexed.GetFileListFromDB(`servers/${T}/${N}`);for(let wt=0,Nt=Be.length;wt<Nt;wt++)try{let rn=yield L.indexed.GetFileInfoFromDB(Be[wt]),Ge=Be[wt].replace("/official/","/deleted/").replace(`/${T}/`,"/deleted/");yield L.indexed.saveFileToUserPath(rn,Ge),yield L.indexed.removeFileFromUserPath(Be[wt]),L.p5loading.update({id:ie,message:`${L.lang.text.Nakama.MissingChannelFiles}: ${Be[wt]}`})}catch(rn){console.log("\ud30c\uc77c \uc774\uad00 \uc2e4\ud328: ",rn)}L.post_counter.deleted||(L.post_counter.deleted={});try{const wt=yield L.indexed.loadTextFromUserPath("servers/post_counter.json"),Nt=JSON.parse(wt);L.post_counter.deleted[N]=Nt[T][N]}catch{}delete L.post_counter[T][N],delete L.posts_orig[T][N],L.rearrange_posts(),yield L.save_post_counter(),L.p5loading.update({id:ie,message:L.lang.text.Nakama.MissingGroups});try{L.groups.deleted||(L.groups.deleted={}),L.groups.deleted[N]||(L.groups.deleted[N]={}),L.groups.deleted[N]=JSON.parse(JSON.stringify(L.groups[T][N])),Object.keys(L.groups.deleted[N]).forEach(Nt=>{L.groups.deleted[N][Nt].server.name=L.lang.text.Nakama.DeletedServer,L.groups.deleted[N][Nt].server.isOfficial="deleted",L.groups.deleted[N][Nt].status="missing",L.groups.deleted[N][Nt]=JSON.parse(JSON.stringify(L.groups[T][N][Nt]))}),delete L.groups[T][N]}catch{}L.p5loading.update({id:ie,message:L.lang.text.Nakama.DeletingServerInfo}),L.set_group_statusBar("offline",T,N),delete L.statusBar.groupServer[T][N],yield L.RemoveWebRTCServer(L.servers[T][N].info.address),delete L.servers[T][N],L.save_groups_with_less_info(),L.indexed.saveTextFileToUserPath(JSON.stringify(L.statusBar.groupServer),"servers/list.json");let Xe=yield L.indexed.loadTextFromUserPath("servers/list_detail.csv");if(Xe){let wt=Xe.split("\n");for(let Nt=0,rn=wt.length;Nt<rn;Nt++)if(wt[Nt].split(",")[3]==N){wt.splice(Nt,1);break}L.indexed.saveTextFileToUserPath(wt.join("\n"),"servers/list_detail.csv")}L.noti.ClearNoti(9),L.p5loading.remove(ie),L.CheckShowServerInfo()})()}connect_to(T="official",N="default"){var U=this;return(0,F.A)(function*(){yield U.servers[T][N].socket.connect(U.servers[T][N].session,!0);let L=U.servers[T][N].socket;Object.keys(U.on_socket_connected).forEach(de=>U.on_socket_connected[de]()),L.onnotification=de=>{U.act_on_notification(de,T,N),U.rearrange_notifications()};let H=[];return L.onchannelpresence=de=>{if(void 0!==de.joins){de.joins.forEach(Xe=>{U.servers[T][N].session.user_id!=Xe.user_id&&(U.load_other_user(Xe.user_id,T,N).online=!0)});let Be=!0;for(let Xe of de.joins)if(Xe.user_id!=U.servers[T][N].session.user_id){Be=!1;break}(!H.includes(de.channel_id)||!Be)&&(H.push(de.channel_id),U.count_channel_online_member(de,T,N))}else if(void 0!==de.leaves){let Be=[];de.leaves.forEach(Xe=>{U.servers[T][N].session.user_id!=Xe.user_id&&U.servers[T][N].client.getUsers(U.servers[T][N].session,[Xe.user_id]).then(wt=>{let Nt=Object.keys(wt.users[0]);delete U.load_other_user(Xe.user_id,T,N).online,Nt.forEach(rn=>{U.users[T][N][Xe.user_id][rn]=wt.users[0][rn]}),Be.push(Xe.user_id),Be.forEach(rn=>U.load_other_user(rn,T,N)),U.count_channel_online_member(de,T,N)}).catch(wt=>{console.log("\uc0ac\uc6a9\uc790\uac00 \ud0c8\ud1f4\ud568: ",wt)})})}U.socket_reactive["others-online"]&&U.socket_reactive["others-online"]()},L.onchannelmessage=de=>{U.channels_orig[T][N][de.channel_id]?(U.update_from_channel_msg(de,T,N),U.rearrange_channels()):de.user_id_one?U.join_chat_with_modulation(de.sender_id,2,T,N):de.group_id&&U.join_chat_with_modulation(de.group_id,3,T,N)},L.ondisconnect=de=>{U.OnSocketDisconnect(T,N)},L})()}OnSocketDisconnect(T,N){this.link_group(T,N,!1),Object.keys(this.on_socket_disconnected).forEach(L=>this.on_socket_disconnected[L]())}saveListedMessage(T,N,U,L,ie){let H={},de=JSON.parse(JSON.stringify(T)),Be=ie||!1;for(;de.length;){let Xe=de.shift();H.target!=Xe.msgDate&&(H.msg&&(this.saveMessageByDate(H,N,U,L,Be),Be=!0),H.target=Xe.msgDate,H.msg=[]),delete Xe.content.text,delete Xe.content.img,delete Xe.content.local_comp,delete Xe.content.path,delete Xe.msgDate,delete Xe.displayDate,delete Xe.msgTime,delete Xe.isLastRead,delete Xe.showInfo,H.msg.push(Xe)}this.saveMessageByDate(H,N,U,L,Be)}saveMessageByDate(T,N,U,L,ie=!1){if(!T.msg||!T.msg.length)return;const H=JSON.parse(JSON.stringify(T)),de=H.target.split("-");this.indexed.loadTextFromUserPath(`servers/${U}/${L}/channels/${N.id}/chats/${de[0]}/${de[1]}/${de[2]}`,(Be,Xe)=>{let wt=[],Nt=[];Be&&Xe&&(wt=JSON.parse(Xe)),H.msg.forEach(He=>{for(let vt=wt.length-1;vt>=0;vt--)if(wt[vt].message_id==He.message_id){wt.splice(vt,1);break}Nt.push(He)});let rn=[];if("local"!=U){const He=new Date(Nt[0].create_time).getTime();for(let vt=wt.length-1;vt>=0;vt--)if(ie&&He<new Date(wt[vt].create_time).getTime()){let tt=wt.splice(vt,1);tt[0].code=2,rn.push(tt[0])}}let Ge=[...wt,...rn,...Nt];Ge.sort((He,vt)=>He.create_time<vt.create_time?-1:He.create_time>vt.create_time?1:0),this.indexed.saveTextFileToUserPath(JSON.stringify(Ge),`servers/${U}/${L}/channels/${N.id}/chats/${de[0]}/${de[1]}/${de[2]}`)})}CatchQouteMsgUserName(T,N,U){if(T.content.qoute)try{if("local"==T.content.qoute.user_id)throw"\ub85c\uceec \uba54\uc2dc\uc9c0";T.content.qoute.username=this.users[N][U][T.content.qoute.user_id].display_name}catch{T.content.qoute.username=this.users.self.display_name}}ModulateTimeDate(T){let N=new Date(T.create_time),U=N.toLocaleDateString(this.lang.lang);T.displayDate=U,T.msgDate=`${N.getFullYear()}-${("00"+(N.getMonth()+1)).slice(-2)}-${("00"+N.getDate()).slice(-2)}`,T.msgTime=`${("00"+N.getHours()).slice(-2)}:${("00"+N.getMinutes()).slice(-2)}`}join_chat_with_modulation(T,N,U,L,ie=!1){var H=this;return(0,F.A)(function*(){H.channels_orig[U][L]||(H.channels_orig[U][L]={});let de=yield H.servers[U][L].socket.joinChat(T,N,!0,!1);try{switch(de.redirect={id:T,type:N,persistence:!0},de.server={isOfficial:U,target:L},N){case 2:de.title=H.GetOverrideName(T,U,L)||H.load_other_user(T,U,L).display_name,de.info=H.load_other_user(T,U,L);break;case 3:de.title=H.groups[U][L][T].name,de.info=H.groups[U][L][T],H.groups[U][L][T].channel_id=de.id;break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc815\ubcf4: ",N)}if(yield H.add_channel(de,U,L,ie),ie&&H.rearrange_channels(),!H.opened_page_info.channel||H.opened_page_info.channel.isOfficial!=U||H.opened_page_info.channel.target!=L||H.opened_page_info.channel.id!=de.id){let Be=yield H.servers[U][L].client.listChannelMessages(H.servers[U][L].session,de.id,1,!1);try{Be.messages.length&&(yield H.update_from_channel_msg(Be.messages[0],U,L,ie))}catch{}}return H.save_groups_with_less_info(),H.count_channel_online_member(de,U,L),de}catch(Be){let Xe="";throw Xe=3===Be.code?H.lang.text.Nakama.AddChannelFailed_Code3:Be.message,H.p5toast.show({text:`${H.lang.text.Nakama.AddChannelFailed}: ${Xe}`}),`${H.lang.text.Nakama.AddChannelFailed}: ${Xe}`}})()}update_from_channel_msg(T,N,U,L=!1){var ie=this;return(0,F.A)(function*(){let H=T.sender_id==ie.servers[N][U].session.user_id,de=T.message_id!=ie.channels_orig[N][U][T.channel_id].last_comment_id,Be=ie.modulation_channel_message(T,N,U,!0),Xe=!1;switch(Be.code){case 0:Be.content.gupdate&&(ie.update_group_info(Be,N,U),Xe=!0),de&&!Xe&&(ie.channels_orig[N][U][T.channel_id].is_new=!H,ie.subscribe_lock||(ie.has_new_channel_msg=!H));break;case 1:case 2:break;case 6:var wt;H&&(delete ie.PromotedGroup[N][U][Be.group_id],null===(wt=ie.socket_reactive.add_todo_menu)||void 0===wt||wt.UpdateWorkerList());case 3:case 4:case 5:case 7:case 9:let vt;if(ie.socket_reactive.group_detail&&(vt=yield ie.socket_reactive.group_detail.update_GroupUsersList(N,U)),H&&(7==Be.code||9==Be.code)){vt||(vt=(yield ie.servers[N][U].client.listGroupUsers(ie.servers[N][U].session,Be.group_id)).group_users);for(let tt of vt)if(tt.user.id==ie.servers[N][U].session.user_id){var Nt;tt.state<2?ie.PromotedGroup[N][U][Be.group_id]=!0:delete ie.PromotedGroup[N][U][Be.group_id],null===(Nt=ie.socket_reactive.add_todo_menu)||void 0===Nt||Nt.UpdateWorkerList();break}}if(3==Be.code||4==Be.code||7==Be.code||9==Be.code)break;if(ie.noti_origin[N]&&ie.noti_origin[N][U]){let tt=Object.keys(ie.noti_origin[N][U]),Dt=[];tt.forEach(Zt=>{-5==ie.noti_origin[N][U][Zt].code&&ie.noti_origin[N][U][Zt].sender_id==Be.sender_id&&Dt.push(Zt)});try{(yield ie.servers[N][U].client.deleteNotifications(ie.servers[N][U].session,Dt))||console.log("\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc54c\ub9bc \uc0ad\uc81c \ud6c4 \uc624\ub958"),ie.update_notifications(N,U)}catch(Zt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",Zt)}}H&&(ie.channels_orig[N][U][Be.channel_id].status="missing");break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",Be)}const rn=Be.content.filename?`(${ie.lang.text.ChatRoom.attachments}) `:"";if(!H&&de&&!Xe&&0==Be.code){var Ge;let vt={id:ie.channels_orig[N][U][T.channel_id].cnoti_id,title:ie.channels_orig[N][U][T.channel_id].info.name||ie.GetOverrideName(ie.channels_orig[N][U][T.channel_id].info.id,N,U)||ie.channels_orig[N][U][T.channel_id].info.display_name||ie.channels_orig[N][U][T.channel_id].title||ie.lang.text.ChatRoom.noname_chatroom,body:rn+Be.content.msg||Be.content.noti||"",smallIcon_ln:"diychat",image:null===(Ge=ie.groups[N][U][T.group_id])||void 0===Ge?void 0:Ge.img,bgcolor:ie.channels_orig[N][U][T.channel_id].color};Be.content.url&&Be.content.type&&0==Be.content.type.indexOf("image/")&&(vt.image=Be.content.url),ie.noti.PushLocal(vt,ie.channels_orig[N][U][T.channel_id].cnoti_id,tt=>{ie.go_to_chatroom(ie.channels_orig[N][U][T.channel_id])})}H&&ie.noti.ClearNoti(ie.channels_orig[N][U][T.channel_id].cnoti_id),ie.ModulateTimeDate(Be),ie.check_sender_and_show_name(Be,N,U);let He=T.content.msg;ie.content_to_hyperlink(Be,N,U),!L&&ie.channels_orig[N][U][Be.channel_id].update&&ie.channels_orig[N][U][Be.channel_id].update(Be),Xe||(ie.channels_orig[N][U][T.channel_id].last_comment_time=T.update_time,ie.channels_orig[N][U][Be.channel_id].last_comment_id=Be.message_id),ie.saveListedMessage([Be],ie.channels_orig[N][U][Be.channel_id],N,U),Xe||(Be.content.hasLink&&(He=`${ie.lang.text.ChatRoom.memoMsgHere}: ${Be.content.hasLink.title}`),2!=Be.code&&(ie.channels_orig[N][U][Be.channel_id].last_comment=rn+(He||Be.content.noti||"")))})()}rearrange_posts(){this.posts.length=0;let T=Object.keys(this.posts_orig);for(let N=0,U=T.length;N<U;N++){let L=Object.keys(this.posts_orig[T[N]]);for(let ie=0,H=L.length;ie<H;ie++){let de=Object.keys(this.posts_orig[T[N]][L[ie]]);for(let Be=0,Xe=de.length;Be<Xe;Be++){let wt=Object.keys(this.posts_orig[T[N]][L[ie]][de[Be]]);for(let Nt=0,rn=wt.length;Nt<rn;Nt++)this.posts.push(this.posts_orig[T[N]][L[ie]][de[Be]][wt[Nt]])}}}this.posts.sort((N,U)=>N.create_time<U.create_time?1:N.create_time>U.create_time?-1:0)}RemoveCurrentPostAttach(T,N){this.p5loading.toast(`${this.lang.text.AddPost.RemoveAttach}: ${N.attachments[T].filename}`,"add_post"),N.attachments.splice(T,1);let U=N.content.split("\n");for(let L=U.length-1;L>=0;L--){let ie=!1,H=U[L].length-1,de=0;try{de=Number(U[L].substring(1,H)),ie="{"==U[L].charAt(0)&&"}"==U[L].charAt(H)&&!isNaN(de)}catch{}if(ie)if(T==de){if(""==U[L+1])try{U.splice(L+1,1)}catch{}U.splice(L,1)}else T<de&&(U[L]=`{${de-1}}`)}N.content=U.join("\n")}AddPost(T,N,U,L=!1,ie){var H=this;return(0,F.A)(function*(){const de=T.server.isOfficial,Be=T.server.target;let Xe={};try{const He=H.servers[de][Be].info;Xe.cdn_port=He.cdn_port,Xe.apache_port=He.apache_port,Xe.user_id=H.servers[de][Be].session.user_id}catch{Xe={}}for(let He=0,vt=T.attachments.length;He<vt;He++)delete T.attachments[He].thumbnail;if(T.mainImage){if(H.p5loading.update({id:N,message:H.lang.text.AddPost.SyncMainImage}),T.mainImage.path=`servers/${de}/${Be}/posts/${T.creator_id}/${T.id}/MainImage.${T.mainImage.file_ext}`,T.mainImage.thumbnail=ie,!T.mainImage.blob)try{const vt=yield(yield fetch(ie)).blob();T.mainImage.blob=vt}catch{}if(H.p5loading.update({id:N,image:ie}),L)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let He;if(H.p5loading.update({id:N,message:`${H.lang.text.AddPost.SyncMainImage}: ${T.mainImage.filename}`}),He=yield H.global.try_upload_to_user_custom_fs(T.mainImage,`${H.users.self.display_name}/${T.id}`,N,T.title),!He)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.mainImage.path,delete T.mainImage.partsize,T.mainImage.url=He}catch{try{yield H.indexed.saveBlobToUserPath(T.mainImage.blob,T.mainImage.path)}catch(vt){console.log("\uba54\uc778\uc0ac\uc9c4 \ud30c\uc77c \uae68\uc9d0\ucc98\ub9ac: ",vt),delete T.mainImage}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const He=H.servers[de][Be].info.address,vt=H.servers[de][Be].info.useSSL?"https:":"http:",tt=yield H.global.upload_file_to_storage(T.mainImage,{user_id:`${H.servers[de][Be].session.user_id}/${T.id}`,cdn_port:Xe.cdn_port,apache_port:Xe.apache_port},vt,He,1==T.CDN,N,T.title);if(!tt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.mainImage.partsize,T.mainImage.url=tt}catch{yield H.sync_save_file(T.mainImage,de,Be,"server_post",`${T.id}_mainImage`)}}const wt=T.attachments.length;if(wt){H.p5loading.update({id:N,message:H.lang.text.AddPost.SyncAttaches});for(let He=wt-1;He>=0;He--)if(L)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let vt;if(H.p5loading.update({id:N,message:`${H.lang.text.AddPost.SyncAttaches}: [${He}]${T.attachments[He].filename}`}),vt=yield H.global.try_upload_to_user_custom_fs(T.attachments[He],`${H.users.self.display_name}/${T.id}`,N,T.title),!vt)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.attachments[He].path,delete T.attachments[He].partsize,T.attachments[He].url=vt}catch{try{T.attachments[He].path=`servers/${de}/${Be}/posts/${T.creator_id}/${T.id}/[${He}]${T.attachments[He].filename}`,yield H.indexed.saveBlobToUserPath(T.attachments[He].blob,T.attachments[He].path)}catch(tt){H.p5toast.show({text:`{${He}} ${H.lang.text.AddPost.AttachError}: ${(tt.statusText?`${tt.statusText}(${tt.status})`:tt.status)||tt}`,lateable:!0}),H.RemoveCurrentPostAttach(He,T)}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const vt=H.servers[de][Be].info.address,tt=H.servers[de][Be].info.useSSL?"https:":"http:",Dt=yield H.global.upload_file_to_storage(T.attachments[He],{user_id:`${H.servers[de][Be].session.user_id}/${T.id}`,cdn_port:Xe.cdn_port,apache_port:Xe.apache_port},tt,vt,1==T.CDN,N,T.title);if(!Dt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.attachments[He].path,delete T.attachments[He].partsize,T.attachments[He].url=Dt}catch(vt){try{"SQL \uac15\uc81c"==vt&&T.attachments[He].url&&!T.attachments[He].blob&&(T.attachments[He].blob=yield(yield fetch(T.attachments[He].url)).blob()),yield H.sync_save_file(T.attachments[He],de,Be,"server_post",`${T.id}_attach_${He}`)}catch(tt){H.p5toast.show({text:`{${He}} ${H.lang.text.AddPost.AttachError}: ${(tt.statusText?`${tt.statusText}(${tt.status})`:tt.status)||tt}`,lateable:!0}),H.RemoveCurrentPostAttach(He,T)}}}if(T.OutSource&&(yield H.global.remove_file_from_storage(T.OutSource,Xe),T.OutSource=void 0),U=U&&"me"!=T.creator_id){const He=new Blob([JSON.stringify(T)],{type:"text/plain"}),vt={blob:He,filename:`${T.id}.json`,file_ext:"json",size:He.size};try{const tt=H.servers[de][Be].info.address,Dt=H.servers[de][Be].session.user_id,Zt=H.servers[de][Be].info.useSSL?"https:":"http:",$n=yield H.global.upload_file_to_storage(vt,{user_id:`${Dt}/${T.id}`,cdn_port:Xe.cdn_port,apache_port:Xe.apache_port},Zt,tt,1==T.CDN,N,T.title);if(!$n)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=$n}catch{try{const Dt=H.users.self.display_name,Zt=yield H.global.try_upload_to_user_custom_fs(vt,`${Dt}/${T.id}`,N,T.title);if(!Zt)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=Zt}catch(Dt){T.OutSource=void 0,U=!1,H.p5toast.show({text:`${H.lang.text.AddPost.OutLinkFailed}: ${(Dt.statusText?`${Dt.statusText}(${Dt.status})`:Dt.status)||Dt}`})}}}let Nt=JSON.parse(JSON.stringify(T));Nt.mainImage&&(delete Nt.mainImage.blob,delete Nt.mainImage.thumbnail);for(let He=Nt.attachments.length-1;He>=0;He--)delete Nt.attachments[He].blob;delete Nt.server;try{H.posts_orig[de][Be]||(H.posts_orig[de][Be]={}),H.posts_orig[de][Be][T.creator_id]||(H.posts_orig[de][Be][T.creator_id]={}),H.posts_orig[de][Be][T.creator_id][T.id]=T}catch(He){H.p5toast.show({text:`${H.lang.text.AddPost.SyncErr}: ${(He.statusText?`${He.statusText}(${He.status})`:He.status)||He}`}),console.log(He)}const rn=JSON.stringify(Nt);yield H.indexed.saveTextFileToUserPath(rn,`servers/${de}/${Be}/posts/${T.creator_id}/${T.id}/info.json`),delete Nt.is_me;const Ge=JSON.stringify(Nt);if(!L){let He=new Blob([Ge],{type:"application/json"}),vt={filename:"info.json"};vt.blob=He,vt.size=He.size,vt.type="application/json",vt.file_ext="json",vt.typeheader="text",vt.path=`servers/${de}/${Be}/posts/${T.creator_id}/${T.id}/info.json`,yield H.sync_save_file(vt,de,Be,"server_post",T.id)}})()}EditPost(T){this.CommunityGoToEditPost&&this.CommunityGoToEditPost(T),this.socket_reactive.try_load_post&&this.socket_reactive.try_load_post()}RemovePost(T,N=!1,U){var L=this;return(0,F.A)(function*(){var ie;const H=JSON.parse(JSON.stringify(T)),de=H.server.isOfficial,Be=H.server.target,Xe=U||`nakama_RemovePost_${Date.now()}`,wt="online"==(null===(ie=L.statusBar.groupServer[de])||void 0===ie?void 0:ie[Be]);N||(yield L.p5loading.update({id:Xe,message:L.lang.text.PostViewer.RemovePost,forceEnd:null}));let Nt=yield L.indexed.GetFileListFromDB(`servers/${de}/${Be}/posts/${T.creator_id}/${T.id}`);for(let He=0,vt=Nt.length;He<vt;He++)N||L.p5loading.update({id:Xe,message:`${L.lang.text.PostViewer.RemovePost}: ${Nt[He]}`,progress:He/vt}),yield L.indexed.removeFileFromUserPath(Nt[He]);N||L.p5loading.update({id:Xe,progress:null});let rn={};try{const He=L.servers[de][Be].info;rn.cdn_port=He.cdn_port,rn.apache_port=He.apache_port,rn.user_id=L.servers[de][Be].session.user_id}catch{rn={}}if(T.OutSource&&L.global.remove_file_from_storage(T.OutSource,rn),T.attachments)for(let He=0,vt=T.attachments.length;He<vt;He++)try{if(N||L.p5loading.update({id:Xe,message:`${L.lang.text.PostViewer.RemovePost}: ${T.attachments[He].filename}`,progress:He/vt}),T.attachments[He].url&&""!==T.attachments[He].type)N||L.global.remove_file_from_storage(T.attachments[He].url,rn);else try{T.server.local||(yield L.sync_remove_file(`${T.id}_attach_${He}`,de,Be,"server_post","",`${T.id}_attach_${He}`))}catch{}}catch{}if(N||L.p5loading.update({id:Xe,progress:null}),T.mainImage)try{if(T.mainImage.url&&""!==T.mainImage.type)N||L.global.remove_file_from_storage(T.mainImage.url,rn);else try{T.server.local||(yield L.sync_remove_file(`${T.id}_mainImage`,de,Be,"server_post","",`${T.id}_mainImage`))}catch{}}catch{}try{T.server.local||N||(yield L.sync_remove_file(T.id,de,Be,"server_post","",`${T.id}`))}catch{}N||L.p5loading.update({id:Xe,message:`${L.lang.text.PostViewer.RemovePost}: ${T.title}`}),!N&&!U&&L.p5loading.remove(Xe);try{delete L.posts_orig[de][Be][T.creator_id][T.id]}catch{}if(!N)try{let He=L.collectLinkedUser(L.servers[de][Be]);yield L.servers[de][Be].client.rpc(L.servers[de][Be].session,"send_noti_fn",{code:Er.MANAGE_POST,title:"post_remove",receiver_id:He,content:{type:"remove",user_id:T.creator_id,post_id:T.id},persistent:!1})}catch{}if(L.rearrange_posts(),L.socket_reactive.try_load_post&&L.socket_reactive.try_load_post(),!wt&&!H.offlineAct&&!T.server.local){var Ge;let He=Number(yield L.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;H.id=`LocalPost_${He}`;try{yield L.indexed.saveTextFileToUserPath(`${He+1}`,"servers/local/target/posts/me/counter.txt")}catch(vt){L.p5toast.show({text:`${L.lang.text.AddPost.SyncErr}: ${(vt.statusText?`${vt.statusText}(${vt.status})`:vt.status)||vt}`}),console.log(vt)}H.offlineAct="remove",H.originalInfo=T,H.creator_id="me",H.server={name:L.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0},yield L.AddPost(H,Xe,!0,!0,null===(Ge=H.mainImage)||void 0===Ge?void 0:Ge.thumbnail),L.rearrange_posts(),L.p5loading.remove(Xe)}})()}content_to_hyperlink(T,N,U){if(!T.content.msg||"object"==typeof T.content.msg)return;let L=T.content.msg.split("\n");T.content.msg=[],L.forEach(ie=>{T.content.msg.push([{text:ie}])});for(let ie=0,H=T.content.msg.length;ie<H;ie++)if(T.content.msg[ie][0].text){const de=/(https?:\/\/[^\s]+|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[^\s]*)?/g,Be=T.content.msg[ie][0].text,Xe=Be.match(de);if(Xe){const wt="%extractURL",rn=Be.replace(de,wt).split(wt);let Ge=[];for(;rn.length||Xe.length;){{let He=rn.shift();He&&Ge.push({text:He})}{let He=Xe.shift();He&&Ge.push({text:He,href:!0})}}T.content.msg[ie]=Ge}else T.content.msg[ie]=[{text:Be}];try{let wt=T.content.msg[ie][0].text.match(/[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6DC}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F90C}-\u{1F93A}\u{1F93C}-\u{1F945}\u{1F947}-\u{1F9FF}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}]+/gu)[0].replace(/[0-9]/g,"");1==T.content.msg.length&&T.content.msg[ie][0].text.length==wt.length&&(T.content.msg[ie][0].size=48)}catch{}}}ServerBaseMessageWork(T,N,U,L,ie){try{const H=T.content.lo||this.lang.lang;if(H==this.lang.lang)throw"\ubc88\uc5ed\ud560 \ud544\uc694\uac00 \uc5c6\ub294 \ub3d9\uc77c \uc5b8\uc5b4";this.TranslateDescList.push({msg:T,source:H.split("_").shift(),isOfficial:N,target:U,cont:L,callback:ie}),this.RequestTranslateText()}catch{try{let Be,de=T.content.msg,Xe=!1;for(let wt of de){for(let Nt of wt)if(Nt.href){Be=Nt.text,Xe=!0;break}if(Xe)break}Xe&&this.HyperLinkDescList.push({msg:T,url:Be,isOfficial:N,target:U,cont:L,callback:ie}),this.RequestHyperLinkInfo()}catch{}}}RequestHyperLinkInfo(){var T=this;return(0,F.A)(function*(){if(!T.isRequestingLinkInfo){for(T.isRequestingLinkInfo=!0;T.HyperLinkDescList.length;){var N;const U=T.HyperLinkDescList.pop();if(U.cont.signal.aborted){console.log("\ub354 \uc774\uc0c1 \ud398\uc774\uc9c0 \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",U.cont.signal.reason);continue}let L,ie;try{L=T.servers[U.isOfficial][U.target].info,ie=T.GetNodejsServerAddress(L.isOfficial,L.target,"cdn_port")}catch{}if(!U.msg.content.hasLink){try{let H=yield T.global.GetHrefThumbnail(U.url,ie,U.cont);if(!H||H.error)throw H;U.msg.content.hasLink=H,T.saveListedMessage([U.msg],T.channels_orig[U.isOfficial][U.target][U.msg.channel_id],U.isOfficial,U.target)}catch(H){H&&console.log("href \uac04\ub7b5\uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc2e4\ud328: ",H)}null===(N=U.callback)||void 0===N||N.call(U)}}T.isRequestingLinkInfo=!1}})()}RequestTranslateText(){var T=this;return(0,F.A)(function*(){if(!T.isTranslating){for(T.isTranslating=!0;T.TranslateDescList.length;){var N,U;const L=T.TranslateDescList.pop();if(L.cont.signal.aborted){console.log("\ub354 \uc774\uc0c1 \ubc88\uc5ed \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",L.cont.signal.reason);continue}let ie;try{ie=T.servers[L.isOfficial][L.target].info}catch{}const de=`http://${ie.address}:${ie.libretranslate_port||5050}/translate`,Be=T.deserialize_text(L.msg);if(!Be)throw"\ubc88\uc5ed \uac00\ub2a5\ud55c \uba54\uc2dc\uc9c0 \uc544\ub2d8";let Xe={q:Be,source:L.source,target:T.lang.lang,format:"text"};if(null===(N=L.msg)||void 0===N||null===(N=N.content)||void 0===N||!N.hasLink){try{const rn=(yield(yield fetch(de,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)})).json()).translatedText;L.msg.content.hasLink={title:rn},T.saveListedMessage([L.msg],T.channels_orig[L.isOfficial][L.target][L.msg.channel_id],L.isOfficial,L.target)}catch(wt){wt&&console.log("\uba54\uc2dc\uc9c0 \ubc88\uc5ed \uc2e4\ud328: ",wt)}null===(U=L.callback)||void 0===U||U.call(L)}}T.isTranslating=!1}})()}check_sender_and_show_name(T,N,U){try{T.color="#"+(T.sender_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),T.sender_id==this.servers[N][U].session.user_id?(T.user_display_name=this.users.self.display_name,T.is_me=!0):T.user_display_name=this.load_other_user(T.sender_id,N,U).display_name,T.user_display_name=T.user_display_name||this.lang.text.Profile.noname_user}catch(L){console.log("\ubc1c\uc2e0\uc790 \uccb4\ud06c \uc624\ub958: ",L)}}modulation_channel_message(T,N,U,L=!1){var ie=this;this.translate_updates(T);let de,H=!1;try{H=T.sender_id==this.servers[N][U].session.user_id}catch{}try{de=H?this.users.self:this.load_other_user(T.sender_id,N,U)}catch{de=this.users.self}let Be=function(){var Xe=(0,F.A)(function*(){if(L){let wt=yield ie.servers[N][U].client.listGroupUsers(ie.servers[N][U].session,T.group_id);for(let Nt of wt.group_users)if(Nt.user.id==ie.servers[N][U].session.user_id){Nt.is_me=!0,Nt.user=ie.users.self;break}ie.groups[N][U][T.group_id].users=wt.group_users,ie.count_channel_online_member(T,N,U)}});return function(){return Xe.apply(this,arguments)}}();switch(T.code){case 0:if(T.content.filename){try{T.content.transfer_index=this.OnTransfer[N][U][T.channel_id][T.message_id]}catch{}try{this.OnTransferMessage[T.message_id]=T}catch{}}break;case 1:case 2:break;case 3:case 4:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserJoin}: ${de.display_name}`,L&&Be();break;case 5:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserOut}: ${de.display_name}`,L&&Be();break;case 6:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserKick}: ${de.display_name}`,L&&Be();break;case 7:T.content.user_update=de,T.content.noti=`${this.lang.text.OtherProfile.PromoteSucc}: ${de.display_name}`;break;case 9:T.content.user_update=de,T.content.noti=`${this.lang.text.OtherProfile.DemoteSucc}: ${de.display_name}`;break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",T)}return T}update_group_info(T,N,U){switch(this.translate_updates(T),T.content.gupdate){case"gimage_modify":this.servers[N][U].client.readStorageObjects(this.servers[N][U].session,{object_ids:[{collection:"group_public",key:`group_${T.group_id}`,user_id:this.groups[N][U][T.group_id].creator_id}]}).then(L=>{L.objects.length?(this.groups[N][U][T.group_id].img=L.objects[0].value.img.replace(/"|=|\\/g,""),this.indexed.saveTextFileToUserPath(L.objects[0].value.img,`servers/${N}/${U}/groups/${T.group_id}.img`)):"missing"!=this.groups[N][U][T.group_id].status&&(delete this.groups[N][U][T.group_id].img,this.indexed.removeFileFromUserPath(`servers/${N}/${U}/groups/${T.group_id}.img`))});break;case"remove":case"force_remove":this.groups[N][U][T.group_id].status="missing",this.save_groups_with_less_info(),this.channels_orig[N][U][T.channel_id].status="missing",this.servers[N][U].socket.leaveChat(T.channel_id);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \ud589\ub3d9: ",T)}}translate_updates(T){if(T.content.gupdate)switch(T.content.gupdate){case"gimage_modify":T.content.noti=this.lang.text.GroupDetail.GroupImageChanged;break;case"remove":T.content.noti=this.lang.text.GroupDetail.GroupRemoved;break;case"force_remove":T.content.noti=this.lang.text.GroupDetail.GroupForceRemoved}}check_notifications(T,N,U){var L=this;return(0,F.A)(function*(){let ie=L.servers[N][U];switch(T.code){case 0:case-2:break;case 1:let H=`<div style="text-align: center"><img src="${decodeURIComponent(T.content.uri)}" alt="noti_image" style="border-radius: 2px"/></div>`,de=`<div>${decodeURIComponent(L.global.HTMLEncode(T.content.msg))}</div>`;L.alertCtrl.create({header:L.servers[N][U].info.name,message:new Tn.Vk(T.content.uri?H+de:de),buttons:[{text:L.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var wt=(0,F.A)(function*(){try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id])}catch{}L.noti.ClearNoti(T.code),L.update_notifications(N,U)});return function(){return wt.apply(this,arguments)}}()()}}]}).then(Xe=>Xe.present());break;case-1:case-3:case-4:case-6:L.noti.ClearNoti(T.code);try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.update_notifications(N,U)}catch(Xe){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",Xe)}break;case-5:try{let Xe=yield ie.client.getUsers(ie.session,[T.sender_id]);if(Xe.users.length){let wt="";wt+=`${L.lang.text.Nakama.ReqContServer}: ${T.server.name}<br>`,wt+=`${L.lang.text.Nakama.ReqContUserName}: ${Xe.users[0].display_name}`,L.alertCtrl.create({header:L.lang.text.Nakama.ReqContTitle,message:wt,buttons:[{text:L.lang.text.Nakama.ReqContAccept,handler:()=>{!function(){var rn=(0,F.A)(function*(){try{(yield ie.client.addGroupUsers(ie.session,T.content.group_id,[Xe.users[0].id]))||console.log("\ubc34\uc778 \uacbd\uc6b0\uc778 \uac83 \uac19\uc74c, \ud655\uc778 \ud544\uc694"),L.noti.ClearNoti(T.code);try{let He=yield ie.client.deleteNotifications(ie.session,[T.id]);He?L.update_notifications(N,U):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",He)}catch(He){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",He)}}catch(Ge){console.error("\uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958: ",Ge)}});return function(){return rn.apply(this,arguments)}}()()}},{text:L.lang.text.Nakama.ReqContReject,handler:()=>{!function(){var rn=(0,F.A)(function*(){try{(yield ie.client.kickGroupUsers(ie.session,T.content.group_id,[Xe.users[0].id]))||console.log("\uadf8\ub8f9 \ucc38\uc5ec \uac70\uc808\uc744 kick\ud55c \uacbd\uc6b0 \uc624\ub958"),yield ie.client.deleteNotifications(ie.session,[T.id]),L.update_notifications(N,U)}catch(Ge){console.error("\uc0ac\uc6a9\uc790 \uac15\ud1f4 \uc624\ub958: ",Ge)}});return function(){return rn.apply(this,arguments)}}()()},cssClass:"redfont"}]}).then(Nt=>Nt.present())}else try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.p5toast.show({text:L.lang.text.Nakama.UserNotFound}),L.update_notifications(N,U)}catch(wt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",wt)}}catch(Xe){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc624\ub958: ",Xe)}break;case-7:L.LoginAgain(L.noti_origin,N,U);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \uad6c\ubd84: ",T.code);try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id])}catch{}L.update_notifications(N,U)}})()}act_on_notification(T,N,U){var L=this;return(0,F.A)(function*(){let ie=!1;switch(T.server=L.servers[N][U].info,T.code){case 404:L.remove_server(N,U,!1);break;case Er.MANAGE_POST:switch(T.content.type){case"add":try{let Nt=T.content.user_id==L.servers[N][U].session.user_id;if(!L.users[N][U][T.content.user_id]&&!Nt)throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let rn=yield L.load_server_post_with_id(T.content.post_id,N,U,T.content.user_id,Nt);L.rearrange_posts(),!Nt&&rn&&null!=rn&&rn.title&&(L.p5toast.show({text:`${L.lang.text.AddPost.Title}: ${rn.title}`}),L.has_new_post=!0)}catch{}break;case"remove":L.RemovePost({id:T.content.post_id,creator_id:T.content.user_id,attachments:[],server:{isOfficial:N,target:U}},!0)}return;case 1:T.request=`${L.lang.text.Nakama.ServerNoti}: ${decodeURIComponent(T.content.msg)}`;let H=decodeURIComponent(T.content.msg),de=decodeURIComponent(T.content.uri);L.noti.PushLocal({id:T.code,title:L.servers[N][U].info.name,body:H,image:de,smallIcon_ln:"diychat"},"global_noti_all",wt=>{let Nt=`<div style="text-align: center"><img src="${de}" alt="noti_image" style="border-radius: 2px"/></div>`,rn=`<div>${L.global.HTMLEncode(H)}</div>`;L.alertCtrl.create({header:L.servers[N][U].info.name,message:new Tn.Vk(de?Nt+rn:rn),buttons:[{text:L.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var vt=(0,F.A)(function*(){try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id])}catch{}L.noti.ClearNoti(T.code),L.update_notifications(N,U)});return function(){return vt.apply(this,arguments)}}()()}}]}).then(He=>He.present())});break;case 0:T.request=`${T.code}-${T.subject}`;break;case-1:let Be;T.request=`${T.code}-${T.subject}`,2===(T.content&&T.content.username&&(Be=2),Be)?L.join_chat_with_modulation(T.sender_id,Be,N,U).then(()=>{L.rearrange_channels()}):(console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \ud589\ub3d9\ucc98\ub9ac: ",T,Be),T.request=`${T.code}-${T.subject}`),ie=!0;try{(yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.update_notifications(N,U)}catch(wt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",wt)}break;case-2:case-3:T.request=`${T.code}-${T.subject}`;break;case-4:L.socket_reactive.group_detail&&L.socket_reactive.group_detail.info.id==T.content.group_id&&L.socket_reactive.group_detail.update_from_notification(T);try{L.groups[N][U][T.content.group_id].status="online"}catch{try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}}T.request=`${T.code}-${T.subject}`;try{let wt=yield L.servers[N][U].client.readStorageObjects(L.servers[N][U].session,{object_ids:[{collection:"group_public",key:`group_${T.content.group_id}`,user_id:L.groups[N][U][T.content.group_id].creator_id}]});wt.objects.length&&(L.groups[N][U][T.content.group_id].img=wt.objects[0].value.img,L.indexed.saveTextFileToUserPath(wt.objects[0].value.img,`servers/${N}/${U}/groups/${T.content.group_id}.img`))}catch(wt){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",wt)}try{yield L.load_groups(N,U,T.content.group_id,!0)}catch(wt){console.error("\uadf8\ub8f9 \uc0ac\uc6a9\uc790 \uac00\uc838\uc624\uae30 \uc624\ub958: ",wt)}L.join_chat_with_modulation(T.content.group_id,3,N,U,!0),L.noti.PushLocal({id:T.code,title:`${L.groups[N][U][T.content.group_id].name}: ${L.lang.text.Nakama.LocalNotiTitle}`,body:T.subject,icon:L.groups[N][U][T.content.group_id.img],smallIcon_ln:"diychat"},void 0,wt=>{L.check_notifications(T,N,U)});break;case-5:let Xe=L.groups[N][U][T.content.group_id];if(Xe)T.request=`${L.lang.text.Nakama.ReqContTitle}: ${Xe.name}`;else{ie=!0;try{let wt=yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]);wt?L.update_notifications(N,U):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",wt)}catch(wt){console.error("\uc54c\ub9bc \uc81c\uac70 \uc624\ub958: ",wt)}}L.socket_reactive.group_detail&&L.socket_reactive.group_detail.info.id==T.content.group_id&&L.socket_reactive.group_detail.update_from_notification(T),L.noti.PushLocal({id:T.code,title:`${L.groups[N][U][T.content.group_id].name}: ${L.lang.text.Nakama.ReqContTitle}`,icon:L.groups[N][U][T.content.group_id].img,smallIcon_ln:"diychat"},void 0,wt=>{L.socket_reactive.group_detail.info.id!=T.content.group_id&&L.global.ActLikeModal("group-detail",{info:L.groups[N][U][T.content.group_id],server:{isOfficial:N,target:U}})});break;case-6:T.request=`${T.code}-${T.subject}`;break;case-7:T.request=`${L.servers[N][U].info.name}: ${L.lang.text.Nakama.SessionLogout}`,L.LoginAgain(T,N,U);break;case Er.MANAGE_TODO:{const wt="add_todo";switch(T.content.type){case"add":L.servers[N][U].client.readStorageObjects(L.servers[N][U].session,{object_ids:[{collection:T.content.collection,key:T.content.key,user_id:T.content.sender_id||L.servers[N][U].session.user_id}]}).then(function(){var Ge=(0,F.A)(function*(He){if(He.objects.length){try{let Dt,tt=He.objects[0].value;try{if(Dt=yield L.indexed.loadTextFromUserPath(`todo/${tt.id}_${N}_${U}/info.todo`),!Dt)throw"empty"}catch{Dt=yield L.indexed.loadTextFromUserPath(`todo/${tt.id}/info.todo`)}let Zt=JSON.parse(Dt);L.global.RemoveTodoTags(Zt),L.global.AddTodoTags(tt),L.removeRegisteredId(Zt.noti_id),L.noti.ClearNoti(Zt.noti_id)}catch{}yield L.modify_remote_info_as_local(He.objects[0].value,N,U);let vt=He.objects[0].value;L.noti.ClearNoti(vt.noti_id),L.set_todo_notification(vt),yield L.p5loading.update({id:wt,message:`${L.lang.text.Main.Title}: ${vt.title}`,progress:1,forceEnd:350})}});return function(He){return Ge.apply(this,arguments)}}());break;case"done":L.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${U}/info.todo`,function(){var Ge=(0,F.A)(function*(He,vt){if(He&&vt){let tt=JSON.parse(vt);tt.done=!0,yield L.modify_remote_info_as_local(tt,N,U),L.indexed.GetFileListFromDB(`todo/${tt.id}`).then(Dt=>{Dt.forEach(Zt=>L.indexed.removeFileFromUserPath(Zt)),L.RemoveLocalPushSchedule(tt),L.removeRegisteredId(tt.noti_id),L.noti.ClearNoti(tt.noti_id),L.SyncTodoCounter(N,U)})}else L.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var tt=(0,F.A)(function*(Dt,Zt){if(Dt&&Zt){let $n=JSON.parse(Zt);$n.done=!0,yield L.modify_remote_info_as_local($n,N,U),L.indexed.GetFileListFromDB(`todo/${$n.id}`).then(lr=>{lr.forEach(Ar=>L.indexed.removeFileFromUserPath(Ar)),L.RemoveLocalPushSchedule($n),L.removeRegisteredId($n.noti_id),L.noti.ClearNoti($n.noti_id),L.SyncTodoCounter(N,U)})}});return function(Dt,Zt){return tt.apply(this,arguments)}}())});return function(He,vt){return Ge.apply(this,arguments)}}());break;case"delete":L.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${U}/info.todo`,(Ge,He)=>{if(Ge&&He){let vt=JSON.parse(He);L.global.RemoveTodoTags(vt),L.indexed.GetFileListFromDB(`todo/${vt.id}`).then(tt=>{var Dt,Zt;tt.forEach($n=>L.indexed.removeFileFromUserPath($n)),L.RemoveLocalPushSchedule(vt),L.removeRegisteredId(vt.noti_id),L.noti.ClearNoti(vt.noti_id),null===(Dt=(Zt=L.global).p5removeTodo)||void 0===Dt||Dt.call(Zt,JSON.stringify(vt))}),L.SyncTodoCounter(N,U)}else L.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,(vt,tt)=>{if(vt&&tt){let Dt=JSON.parse(tt);L.global.RemoveTodoTags(Dt),L.indexed.GetFileListFromDB(`todo/${Dt.id}`).then(Zt=>{var $n,lr;Zt.forEach(Ar=>L.indexed.removeFileFromUserPath(Ar)),L.RemoveLocalPushSchedule(Dt),L.removeRegisteredId(Dt.noti_id),L.noti.ClearNoti(Dt.noti_id),null===($n=(lr=L.global).p5removeTodo)||void 0===$n||$n.call(lr,JSON.stringify(Dt))}),L.SyncTodoCounter(N,U)}})});break;case"worker":let Nt=T.content.isDelete;L.AddTodoManageUpdateAct&&L.AddTodoManageUpdateAct(T.content.id,T.sender_id,Nt,T.content.timeAt);let rn=Nt?L.lang.text.Main.WorkerAbandon:L.lang.text.Main.WorkerDone;yield L.p5loading.update({id:wt,message:`${rn}: ${L.GetOverrideName(T.sender_id,N,U)||L.users[N][U][T.sender_id].display_name}`,progress:1,forceEnd:350}),L.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${U}/info.todo`,function(){var Ge=(0,F.A)(function*(He,vt){if(He&&vt){let tt=JSON.parse(vt);for(let Dt=0,Zt=tt.workers.length;Dt<Zt;Dt++)if((tt.workers[Dt].user_id||tt.workers[Dt].id)==T.sender_id){tt.workers[Dt].isDelete=Nt,tt.workers[Dt].timestamp=T.content.timeAt;break}yield L.modify_remote_info_as_local(tt,N,U),L.SyncTodoCounter(N,U)}else L.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var tt=(0,F.A)(function*(Dt,Zt){if(Dt&&Zt){let $n=JSON.parse(Zt);for(let lr=0,Ar=$n.workers.length;lr<Ar;lr++)if(($n.workers[lr].user_id||$n.workers[lr].id)==T.sender_id){$n.workers[lr].isDelete=Nt,$n.workers[lr].timestamp=T.content.timeAt;break}yield L.modify_remote_info_as_local($n,N,U),L.SyncTodoCounter(N,U)}});return function(Dt,Zt){return tt.apply(this,arguments)}}())});return function(He,vt){return Ge.apply(this,arguments)}}())}L.SyncTodoCounter(N,U);try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}}break;case Er.EDIT_PROFILE:switch(T.content.type){case"info":try{if(L.servers[N][U].session.user_id==T.sender_id)L.servers[N][U].client.getAccount(L.servers[N][U].session).then(wt=>{Object.keys(wt.user).forEach(rn=>L.users.self[rn]=wt.user[rn]),L.save_self_profile()}).catch(wt=>{console.log("\ub0b4 \ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",wt)});else try{let wt=yield L.servers[N][U].client.getUsers(L.servers[N][U].session,[T.sender_id]);wt.users.length?L.save_other_user(wt.users[0],N,U):(delete L.users[N][U][T.sender_id],L.indexed.removeFileFromUserPath(`servers/${N}/${U}/users/${T.sender_id}/profile.json`))}catch(wt){console.log("\uc54c\ub9bc\uc5d0 \ubc18\uc751\ud558\uae30 \uc624\ub958: ",wt)}}catch(wt){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",wt)}break;case"image":if(L.servers[N][U].session.user_id==T.sender_id)L.servers[N][U].client.readStorageObjects(L.servers[N][U].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:L.servers[N][U].session.user_id}]}).then(wt=>{wt.objects.length?(L.indexed.saveTextFileToUserPath(JSON.stringify(wt.objects[0].value.img),"servers/self/profile.img"),L.users.self.img=wt.objects[0].value.img.replace(/"|=|\\/g,"")):L.indexed.removeFileFromUserPath("servers/self/profile.img")}).catch(wt=>{console.log("\ub0b4 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",wt)});else try{let wt=yield L.servers[N][U].client.readStorageObjects(L.servers[N][U].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T.sender_id}]});if(wt.objects.length)try{if(L.servers[N][U].session.user_id==T.sender_id)throw"me";L.load_other_user(T.sender_id,N,U).img=wt.objects[0].value.img.replace(/"|\\|=/g,""),L.indexed.saveTextFileToUserPath(L.users[N][U][T.sender_id].img,`servers/${N}/${U}/users/${T.sender_id}/profile.img`)}catch{L.users.self.img=wt.objects[0].value.img.replace(/"|\\|=/g,""),yield L.indexed.saveTextFileToUserPath(L.users.self.img,"servers/self/profile.img")}else try{if(L.servers[N][U].session.user_id==T.sender_id)throw"me";delete L.users[N][U][T.sender_id].img,L.indexed.removeFileFromUserPath(`servers/${N}/${U}/users/${T.sender_id}/profile.img`)}catch{delete L.users.self.img}}catch(wt){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",wt)}}try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}break;case Er.ADD_CHANNEL:L.get_group_list_from_server(N,U,T.content.id);try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}break;case Er.NAME_OVERRIDED:L.LoadOverrideName(N,U);try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}break;case Er.CHATROOM_CHECKED:delete L.channels_orig[N][U][T.content.id].is_new,L.noti.ClearNoti(L.channels_orig[N][U][T.content.id].cnoti_id),L.rearrange_channels();{let wt=Object.keys(L.channels_orig[N][U]),Nt=!1;for(let rn of wt)if(L.channels_orig[N][U][rn].is_new){Nt=!0;break}Nt||(L.has_new_channel_msg=!1)}try{yield L.servers[N][U].client.deleteNotifications(L.servers[N][U].session,[T.id]),L.update_notifications(N,U)}catch{}break;default:console.log("\ud655\uc778\ub418\uc9c0 \uc54a\uc740 \uc2e4\uc2dc\uac04 \uc54c\ub9bc_nakama_noti: ",T),T.request=`${T.code}-${T.subject}`}ie||(L.noti_origin[N][U][T.id]=T)})()}LoginAgain(T,N,U){this.alertCtrl.create({header:this.servers[N][U].info.name,message:this.lang.text.Nakama.LoginAgain,buttons:[{text:this.lang.text.Profile.login_toggle,handler:()=>{try{delete this.noti_origin[N][U][T.id]}catch{}this.rearrange_notifications(),this.link_group(N,U,!0)}}]}).then(L=>L.present())}WriteStorage_From_channel(T,N,U,L,ie=0,H){var de=this;return(0,F.A)(function*(){let Be=JSON.parse(JSON.stringify(T)),Xe=yield yield de.indexed.GetFileInfoFromDB(N),wt=Math.ceil(Xe.contents.length/on.xM);const Nt=H||`ForceSQL_write_${Date.now()}`;if(de.p5loading.update({id:Nt,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Be.content.filename}`}),de.OnTransfer[U][L][T.channel_id]||(de.OnTransfer[U][L][T.channel_id]={}),de.OnTransfer[U][L][T.channel_id][T.message_id]||(de.OnTransfer[U][L][T.channel_id][T.message_id]={index:wt}),!de.OnTransfer[U][L][T.channel_id][T.message_id].OnTransfer){T.content.transfer_index||(T.content.transfer_index=de.OnTransfer[U][L][T.channel_id][T.message_id]);for(let rn=ie;rn<wt;rn++)try{de.p5loading.update({id:Nt,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Be.content.filename}`,progress:rn/wt});let Ge=de.global.req_file_part_base64(Xe,rn,N);yield de.servers[U][L].client.writeStorageObjects(de.servers[U][L].session,[{collection:`file_${Be.channel_id.replace(/[.]/g,"_")}`,key:`msg_${Be.message_id}_${rn}`,permission_read:2,permission_write:1,value:{data:Ge}}]),de.OnTransfer[U][L][T.channel_id][T.message_id].index=wt-1-rn,de.OnTransfer[U][L][T.channel_id][T.message_id].OnTransfer="upload"}catch(Ge){console.log("WriteStorage_From_channel: ",Ge),de.noti.PushLocal({id:7,title:de.lang.text.Nakama.FailedUpload,body:`${Be.content.filename}: ${(Ge.statusText?`${Ge.statusText}(${Ge.status})`:Ge.status)||Ge}`,smallIcon_ln:"diychat"},de.noti.Current),de.p5toast.show({text:`${de.lang.text.Nakama.FailedUpload}: ${(Ge.statusText?`${Ge.statusText}(${Ge.status})`:Ge.status)||Ge}`});break}setTimeout(()=>{de.p5loading.remove(Nt),delete de.OnTransfer[U][L][T.channel_id][T.message_id],de.global.remove_req_file_info(T,N),de.noti.PushLocal({id:7,title:de.lang.text.ChatRoom.SendFile,body:Be.content.filename,smallIcon_ln:"diychat"},de.noti.Current)},100)}})()}ReadStorage_From_channel(T,N,U,L,ie=0){var H=this;return(0,F.A)(function*(){let de=JSON.parse(JSON.stringify(T));const Be=`ForceSQL_read_${Date.now()}`;if(H.p5loading.update({id:Be,message:`${H.lang.text.ChatRoom.forceSQL}: ${H.lang.text.ChatRoom.SavingFile}: ${de.content.filename}`}),H.OnTransfer[U][L][T.channel_id]||(H.OnTransfer[U][L][T.channel_id]={}),H.OnTransfer[U][L][T.channel_id][T.message_id]||(H.OnTransfer[U][L][T.channel_id][T.message_id]={index:de.content.partsize}),H.OnTransfer[U][L][T.channel_id][T.message_id].OnTransfer)return;T.content.transfer_index||(T.content.transfer_index=H.OnTransfer[U][L][T.channel_id][T.message_id]);let Xe=!0;for(let wt=ie,Nt=de.content.partsize;wt<Nt;wt++)try{H.p5loading.update({id:Be,progress:wt/Nt});let rn=yield H.servers[U][L].client.readStorageObjects(H.servers[U][L].session,{object_ids:[{collection:`file_${de.channel_id.replace(/[.]/g,"_")}`,key:`msg_${de.message_id}_${wt}`,user_id:de.sender_id}]});H.global.save_file_part(N,wt,rn.objects[0].value.data),H.OnTransfer[U][L][T.channel_id][T.message_id].index=Nt-1-wt,H.OnTransfer[U][L][T.channel_id][T.message_id].OnTransfer="download"}catch(rn){console.log("ReadStorage_From_channel: ",rn),Xe=!1,H.p5loading.update({id:Be,message:`${de.content.filename} ${H.lang.text.Nakama.FailedDownload}: ${(rn.statusText?`${rn.statusText}(${rn.status})`:rn.status)||rn}`,progress:0});break}if(Xe){if(T.content.url)T.content.thumbnail=T.content.url;else{T.content.text=[H.lang.text.ChatRoom.SavingFile],delete T.content.transfer_index,delete H.OnTransfer[U][L][de.channel_id][de.message_id].index;let Nt=[],rn=0;yield new Promise(function(){var Ge=(0,F.A)(function*(He){for(let vt=0,tt=de.content.partsize;vt<tt;vt++)try{let Dt=yield H.indexed.GetFileInfoFromDB(`${N}_part/${vt}.part`);rn+=Dt.contents.length,Nt[vt]=Dt}catch(Dt){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",Dt);break}try{let vt=new Int8Array(rn),tt=0;for(let Dt=0,Zt=Nt.length;Dt<Zt;Dt++)vt.set(Nt[Dt].contents,tt),tt+=Nt[Dt].contents.length;yield H.indexed.saveInt8ArrayToUserPath(vt,N);for(let Dt=0,Zt=de.content.partsize;Dt<Zt;Dt++)H.indexed.removeFileFromUserPath(`${N}_part/${Dt}.part`);yield H.indexed.removeFileFromUserPath(`${N}_part`),H.global.remove_req_file_info(de,N),T.content.text=[H.lang.text.ChatRoom.FileSaved]}catch(vt){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",vt)}He(void 0)});return function(He){return Ge.apply(this,arguments)}}()),H.noti.ClearNoti(8)}let wt;if(de.content.path=N,"godot"!=de.content.viewer){let Nt=yield H.indexed.loadBlobFromUserPath(N,T.content.type||"");wt=URL.createObjectURL(Nt)}yield H.global.modulate_thumbnail((H.OnTransferMessage[de.message_id]||T).content,wt),delete H.OnTransfer[U][L][de.channel_id][de.message_id],delete H.OnTransferMessage[de.message_id]}return H.p5loading.remove(Be),Xe})()}sync_save_file(T,N,U,L,ie=""){var H=this;return(0,F.A)(function*(){try{var de;if("online"!=H.statusBar.groupServer[N][U])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";null!==(de=T.blob)&&void 0!==de&&de.size&&(yield H.indexed.saveBlobToUserPath(T.blob,T.path));let Be=yield H.indexed.GetFileInfoFromDB(T.path);T.partsize=Math.ceil((T.size||Be.contents.length)/on.xM),delete T.blob,yield H.servers[N][U].client.writeStorageObjects(H.servers[N][U].session,[{collection:L,key:ie||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),permission_read:2,permission_write:1,value:T}]);for(let Xe=0;Xe<T.partsize;Xe++){let wt=H.global.req_file_part_base64(Be,Xe,T.path);yield H.servers[N][U].client.writeStorageObjects(H.servers[N][U].session,[{collection:L,key:ie?`${ie}_${Xe}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${Xe}`,permission_read:2,permission_write:1,value:{data:wt}}])}H.indexed.removeFileFromUserPath(`${T.path}.history`),H.noti.PushLocal({id:7,title:H.lang.text.ChatRoom.SendFile,body:T.filename,smallIcon_ln:"diychat"},H.noti.Current)}catch(Be){throw console.log("SyncSaveFailed: ",Be),H.noti.PushLocal({id:7,title:H.lang.text.Nakama.FailedUpload,body:`${T.filename}: ${(Be.statusText?`${Be.statusText}(${Be.status})`:Be.status)||Be}`,smallIcon_ln:"diychat"},H.noti.Current),Be}})()}sync_load_file(T,N,U,L,ie="",H="",de=!0){var Be=this;return(0,F.A)(function*(){try{if("online"!=Be.statusBar.groupServer[N][U])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let wt=(yield Be.servers[N][U].client.readStorageObjects(Be.servers[N][U].session,{object_ids:[{collection:L,key:H||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||Be.servers[N][U].session.user_id}]})).objects[0].value,Nt=!0;for(let rn=0;rn<wt.partsize;rn++)try{let Ge=yield Be.servers[N][U].client.readStorageObjects(Be.servers[N][U].session,{object_ids:[{collection:L,key:H?`${H}_${rn}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${rn}`,user_id:ie||Be.servers[N][U].session.user_id}]});Be.global.save_file_part(T.alt_path||T.path,rn,Ge.objects[0].value.data)}catch(Ge){console.log("sync_load_file failed: ",Ge),Nt=!1,de&&Be.p5toast.show({text:`${T.filename||T.name} ${Be.lang.text.Nakama.FailedDownload}: ${(Ge.statusText?`${Ge.statusText}(${Ge.status})`:Ge.status)||Ge}`,lateable:!0}),T.url&&(T.thumbnail=T.url);break}if(Nt){delete T.url,T.text=[Be.lang.text.ChatRoom.SavingFile];let rn=[],Ge=0;yield new Promise(function(){var He=(0,F.A)(function*(vt,tt){let Dt=!1;for(let Zt=0,$n=wt.partsize;Zt<$n;Zt++)try{let lr=yield Be.indexed.GetFileInfoFromDB(`${T.alt_path||T.path}_part/${Zt}.part`);Ge+=lr.contents.length,rn[Zt]=lr}catch(lr){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",lr),Dt=!0;break}try{if(Dt)throw"\ud30c\uc77c \ubcd1\ud569 \uc2e4\ud328";let Zt=new Int8Array(Ge),$n=0;for(let lr=0,Ar=rn.length;lr<Ar;lr++)Zt.set(rn[lr].contents,$n),$n+=rn[lr].contents.length;yield Be.indexed.saveInt8ArrayToUserPath(Zt,T.alt_path||T.path);for(let lr=0,Ar=wt.partsize;lr<Ar;lr++)Be.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part/${lr}.part`);yield Be.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part`)}catch(Zt){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",Zt),tt()}vt(void 0)});return function(vt,tt){return He.apply(this,arguments)}}()),Be.noti.ClearNoti(8),Be.indexed.removeFileFromUserPath(`${T.alt_path||T.path}.history`)}return{from:"remote",value:yield Be.indexed.loadBlobFromUserPath(T.alt_path||T.path,wt.type||"")}}catch{try{return{from:"local",value:yield Be.indexed.loadBlobFromUserPath(T.alt_path||T.path,T.type||"")}}catch(wt){return{from:"failed",value:null,error:wt}}}})()}sync_remove_file(T,N,U,L,ie="",H=""){var de=this;return(0,F.A)(function*(){try{yield de.indexed.removeFileFromUserPath(T)}catch{}try{if("online"!=de.statusBar.groupServer[N][U])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let Xe=(yield de.servers[N][U].client.readStorageObjects(de.servers[N][U].session,{object_ids:[{collection:L,key:T.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||de.servers[N][U].session.user_id}]})).objects[0].value;try{yield de.servers[N][U].client.rpc(de.servers[N][U].session,"remove_channel_file",{collection:L,key:(H||Xe.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120))+"_"})}catch(wt){console.log("SQL \uac15\uc81c \ud30c\uc77c \uc0ad\uc81c \uc624\ub958: ",wt)}yield de.servers[N][U].client.deleteStorageObjects(de.servers[N][U].session,{object_ids:[{collection:L,key:H||Xe.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)}]})}catch{}})()}open_url_link(T,N,U=!0){var L=this;return(0,F.A)(function*(){T&&(T.target.style.color="var(--ion-color-primary)");const ie=yield L.global.GetHeaderAddress();if(N)if(0==N.indexOf("https://is2you2.github.io/pjcone_pwa/?")||0==N.indexOf(`${ie}?`)||0==N.indexOf(`${L.global.CustomLocalAddress}?`)){const H=L.global.CatchGETs(N)||{};try{return yield L.AddressToQRCodeAct(H),!0}catch(de){console.log("open_url_link: ",de),L.p5toast.show({text:`${L.lang.text.AddGroup.DiffFormat}: ${(de.statusText?`${de.statusText}(${de.status})`:de.status)||de}`})}}else U&&L.global.open_link(N);return!1})()}AddressToQRCodeAct(T,N=!1){var U=this;return(0,F.A)(function*(){let L=[];if(T.open_profile&&L.push({type:"open_profile"}),T.server)for(let ie=0,H=T.server.length;ie<H;ie++){let de=T.server[ie].split(","),Xe=de[0].split("://"),wt="https"==Xe.shift(),Nt=Xe.shift().split(":"),rn=Nt[0],Ge=Number(Nt[1]);L.push({type:"server",value:{address:rn||"192.168.0.1",useSSL:wt||!1,nakama_port:Ge||7350,cdn_port:de[2],apache_port:de[3],square_port:de[4],webrtc_port:de[5],webpush_port:de[6],libretranslate_port:de[7],key:de[1]||"",isOfficial:"unofficial"}})}if(T.group)for(let ie=0,H=T.group.length;ie<H;ie++){let de=T.group[ie].split(",");L.push({type:"group",name:de[0],id:de[1]})}if(T.todo&&L.push({type:"todo",value:T.todo[0],address:T.address[0]}),T.group_dedi){let ie=T.group_dedi[0].split(",");L.push({type:"group_dedi",value:{address:ie[0],channel:ie[1]}})}if(T.open_prv_channel){let ie=T.open_prv_channel[0].split(",");L.push({type:"open_prv_channel",user_id:ie[0]})}if(T.postViewer&&L.push({type:"postViewer",address:T.postViewer[0]}),T.fileviewer){let ie=T.fileviewer[0].split(",");const H=ie.pop(),de=ie.join(",");L.push({type:"fileviewer",url:de,viewer:H})}if(T.voiddraw&&L.push({type:"voiddraw"}),T.token){let ie=T.token[0].split(",");L.push({type:"token",address:ie[0],square_port:Number(ie[1]||12013),socketId:ie[2]})}if(N)return L;yield U.act_from_QRInfo(L)})()}GenerateQRCode(T,N=this.global.CustomLocalAddress){return(0,F.A)(function*(){return`${N}?server=${T.useSSL?"https":"http"}://${T.address||""}${T.nakama_port?`:${T.nakama_port}`:""},${T.key||""},${T.cdn_port||""},${T.apache_port||""},${T.square_port||""},${T.webrtc_port||""},${T.webpush_port||""},${T.libretranslate_port||""}`.replace(/ /g,"%20")})()}act_from_QRInfo(T,N=""){var U=this;return(0,F.A)(function*(){for(let H=0,de=20;H<de&&!U.lang.text.WebRTCDevManager.SecurityError;H++)yield new Promise(Be=>setTimeout(Be,1e3));for(let H=0,de=T.length;H<de;H++)switch(T[H].type){case"open_profile":U.open_profile_page();break;case"server":if(U.CheckIfHasServer(`${T[H].value.useSSL?"https":"http"}://${T[H].value.address}:${T[H].value.port||7350}`))U.users.self.online||U.open_profile_page();else{let rn=!1;U.global.PageDismissAct["quick-server-detail"]=function(){var He=(0,F.A)(function*(vt){U.global.RestoreShortCutAct("quick-server-detail"),delete U.global.PageDismissAct["quick-server-detail"],vt&&(U.init_server(vt),yield U.init_session(vt)),rn=!0});return function(vt){return He.apply(this,arguments)}}(),U.global.StoreShortCutAct("quick-server-detail"),U.global.ActLikeModal("server-detail",{data:T[H].value,quick:!0}),U.p5toast.show({text:U.lang.text.Nakama.AddNewServer}),yield function(){var He=(0,F.A)(function*(){for(;!rn;)yield new Promise(vt=>setTimeout(vt,0))});return function(){return He.apply(this,arguments)}}()()}break;case"todo":try{const rn=JSON.parse(T[H].value),Ge=U.CheckIfHasServer(T[H].address);rn.remote.isOfficial=Ge.isOfficial,rn.remote.target=Ge.target,rn.remote.name=Ge.name,U.open_add_todo_page(JSON.stringify(rn))}catch(rn){console.log("\ud560 \uc77c \uc11c\ubc84 \uc870\uc815 \uc624\ub958: ",rn),U.open_add_todo_page(T[H].value)}break;case"group_dedi":let wt;if(yield U.global.RemoveAllModals(),yield U.global.AnonymousUserCreateName(),T[H].value.address)wt=T[H].value.address;else if(U.global.CustomLocalAddress.indexOf("https://is2you2.github.io/")>=0){const Ge="https:"==location.protocol?"wss:":"ws:",He=location.host.split(":")[0];wt=`${Ge}//${He}:12013`,T[H].value.address=`${Ge}//${He}`}else{let rn=U.global.CustomLocalAddress.split("://");const Ge=rn.pop().split("/")[0],vt="https"==(rn.pop()||(U.global.checkProtocolFromAddress(Ge)?"https":"http"))?"wss:":"ws:",tt=Ge.split(":")[0];wt=`${vt}//${tt}:12013`,T[H].value.address=`${vt}//${tt}`}U.navCtrl.navigateForward("minimal-chat",{animation:Tn.V5,state:{address:wt,channel:T[H].value.channel,quick:!0}});break;case"group":if(U.AfterLoginActDone)yield U.try_add_group(T[H]);else if(U.AfterLoginAct.push((0,F.A)(function*(){yield U.try_add_group(T[H])})),U.users.self.online){let rn="";for(let He=0,vt=T.length;He<vt;H++){var L;if("server"==(null===(L=T[He])||void 0===L?void 0:L.type)){rn=`${T[He].value.useSSL?"https":"http"}://${T[He].value.address}`;break}}let Ge=U.CheckIfHasServer(rn);U.init_session(Ge)}else U.p5toast.show({text:U.lang.text.Nakama.NeedLogin}),U.open_profile_page();break;case"open_prv_channel":{let rn="";for(let He=0,vt=T.length;He<vt;H++){var ie;if("server"==(null===(ie=T[He])||void 0===ie?void 0:ie.type)){rn=`${T[He].value.useSSL?"https":"http"}://${T[He].value.address}`;break}}let Ge=U.CheckIfHasServer(rn);if(Ge)if(U.AfterLoginActDone){let He=yield U.join_chat_with_modulation(T[H].user_id,2,Ge.isOfficial,Ge.target,!0);U.go_to_chatroom(He)}else U.AfterLoginAct.push((0,F.A)(function*(){yield U.navCtrl.pop();let He=yield U.join_chat_with_modulation(T[H].user_id,2,Ge.isOfficial,Ge.target,!0);U.go_to_chatroom(He)})),U.users.self.online?U.init_session(Ge):(U.p5toast.show({text:U.lang.text.Nakama.NeedLogin}),U.open_profile_page());else U.p5toast.show({text:U.lang.text.Nakama.NoLoginServer})}break;case"postViewer":let Nt=yield fetch(T[H].address);if(Nt.ok){let rn=yield Nt.text(),Ge=JSON.parse(rn);Ge.quick=!0,U.open_post(Ge,-2,N)}else U.p5toast.show({text:`${U.lang.text.AddPost.NoPostOutLink}: ${Nt.statusText}`});break;case"voiddraw":U.global.PageDismissAct["voiddraw-local"]=()=>{delete U.global.PageDismissAct["voiddraw-local"]},U.global.ActLikeModal(N+"void-draw",{quick:!0,saveClipboard:!0,dismiss:"voiddraw-local"});break;case"token":{let rn;const Ge=T[H].square_port||12013;if(T[H].address)rn=`${T[H].address.indexOf("ws://")<0&&T[H].address.indexOf("wss://")<0?`${U.global.checkProtocolFromAddress(T[H].address)?"wss://":"ws://"}${T[H].address}`:T[H].address}:${Ge}`;else if(U.global.CustomLocalAddress.indexOf("https://is2you2.github.io/")>=0){const Dt="https:"==location.protocol?"wss:":"ws:",Zt=location.host.split(":")[0];rn=`${Dt}//${Zt}:${Ge}`,T[H].address=`${Dt}//${Zt}`}else{let tt=U.global.CustomLocalAddress.split("://");const Dt=tt.pop().split("/")[0],$n="https"==(tt.pop()||(U.global.checkProtocolFromAddress(Dt)?"https":"http"))?"wss:":"ws:",lr=Dt.split(":")[0];rn=`${$n}//${lr}:${Ge}`,T[H].address=`${$n}//${lr}`}const He=T[H].socketId;let vt=new WebSocket(rn);vt.onopen=()=>{vt.send(JSON.stringify({type:"reqInfo",socketId:He}))},vt.onmessage=tt=>{let Dt;Dt="string"==typeof tt.data?tt.data:tt.data.text();try{const Zt=JSON.parse(Dt);if("req_info"===Zt.type)switch(Zt.act){case"voiddraw":U.global.PageDismissAct["voiddraw-remote"]=()=>{delete U.global.PageDismissAct["voiddraw-remote"]},U.global.ActLikeModal(N+"void-draw",{remote:{address:T[H].address,channel:Zt.channel_id,port:Zt.port||3478,username:Zt.username,password:Zt.credential},quick:!0,saveClipboard:!0,dismiss:"voiddraw-remote"});break;case"instc":U.global.RemoveAllModals((0,F.A)(function*(){yield U.global.AnonymousUserCreateName(),U.navCtrl.navigateForward(N+"instant-call",{animation:Tn.NC,state:{address:T[H].address,channel:Zt.channel_id,port:Zt.port,username:Zt.username,password:Zt.password,square_port:Ge,useVideo:Zt.useVideo,useCCTV:Zt.useCCTV,users:Zt.users||[],quick:!0}})}));break;case"arcade":T[H].cdn_port=Zt.cdn_port||9001,T[H].apache_port=Zt.apache_port||9002,U.global.JoinArcadeWithSocketInfo(T[H]);case"quick_prv":U.act_from_QRInfo([{type:"server",value:Zt.server_value},{type:"open_prv_channel",user_id:Zt.user_id,address:Zt.address}]);case"quick_post":U.act_from_QRInfo([{type:"postViewer",address:Zt.address}]);break;case"quick_group":U.act_from_QRInfo([{type:"server",value:Zt.server_value},{type:"group",id:Zt.id,name:Zt.name}]);break;case"quick_fileviewer":U.act_from_QRInfo([{type:"fileviewer",url:Zt.url.replace(/ /g,"%20"),viewer:Zt.viewer}])}}catch(Zt){console.log("\ube60\ub978 \uc9c4\uc785 \uc18c\ucf13 \ud589\ub3d9 \uc624\ub958: ",Zt),vt.close(1e3,Zt)}vt.close(1e3,"done")},vt.onerror=tt=>{vt.close(1e3,"onerror")},vt.onclose=tt=>{switch(console.log("\uc18c\ucf13 \ud589\ub3d9 \uc885\ub8cc: ",tt),tt.reason){case"max_limit":U.p5toast.show({text:U.lang.text.MinimalChat.block});break;case"expired":U.p5toast.show({text:U.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",tt.reason)}vt.onopen=null,vt.onmessage=null,vt.onclose=null,vt.onerror=null,vt=null}}break;case"fileviewer":U.global.PageDismissAct["quick-fileviewer"]=rn=>{delete U.global.PageDismissAct["quick-fileviewer"]},U.global.ActLikeModal(N+"ionic-viewer",{info:{content:{filename:T[H].url.split("/").pop(),file_ext:T[H].url.split(".").pop(),url:T[H].url,viewer:T[H].viewer}},relevance:[{content:{filename:T[H].url.split("/").pop(),file_ext:T[H].url.split(".").pop(),url:T[H].url,viewer:T[H].viewer}}],noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"quick-fileviewer"});break;default:throw"\uc9c0\uc815\ub41c \ud2c0 \uc544\ub2d8"}})()}TempQRCodeGenerateWS(T,N){var U,L,ie=this;return null===(U=this.TempWS)||void 0===U||null===(L=U.close)||void 0===L||L.call(U,1e3,"\uc784\uc2dc QR \uc0dd\uc131 \uc9c1\uc804 \ucd08\uae30\ud654"),new Promise(function(){var H=(0,F.A)(function*(de,Be){yield new Promise(rn=>setTimeout(rn,100));const Xe=ie.GetNodejsServerAddress(T.isOfficial,T.target,"square_port");let wt,Nt;ie.TempWS=new WebSocket(Xe),ie.TempWS.onopen=()=>{ie.TempWS.send(JSON.stringify({type:"initInfo",act:N.act}))},ie.TempWS.onmessage=rn=>{const Ge=JSON.parse(rn.data);switch(Ge.type){case"init_id":wt=Ge.socketId,Nt=Ge.id,ie.TempWS.send(JSON.stringify({type:"update_reqInfo",socketId:Ge.socketId,...N}));break;case"update_reqInfo":ie.TempWS.send(JSON.stringify({type:"join",channel:Nt})),de(`${ie.global.CustomLocalAddress}?token=${ie.global.CheckIfCanBlankSocketAddress(`${T.useSSL?"wss":"ws"}://${T.address}`)},${12013==T.square_port?"":T.square_port||""},${wt}`)}},ie.TempWS.onerror=rn=>{Be(rn)},ie.TempWS.onclose=rn=>{console.log("TempQRCodeGenerateWS \uc18c\ucf13 \ub2eb\ud798 \ucd94\uc801: ",`${rn.reason} (${rn.code})`),ie.TempWS.onopen=null,ie.TempWS.onmessage=null,ie.TempWS.onerror=null,ie.TempWS.onclose=null,Be(`${rn.reason} (${rn.code})`)}});return function(de,Be){return H.apply(this,arguments)}}())}CheckIfHasServer(T){let N=!1;try{let U=T.split("://"),L="https"==U.shift(),ie=U.shift().split(":"),H=ie[0],de=Number(ie[1])||7350,Be=this.get_all_server_info(!0);for(let Xe of Be)if(Xe.address==H&&Xe.useSSL==L&&(Xe.nakama_port||7350)==de){N=Xe;break}}catch{}return N}load_local_post_with_id(T,N,U,L){var ie=this;return(0,F.A)(function*(){let H=yield ie.indexed.loadTextFromUserPath(`servers/${N}/${U}/posts/${L}/${T}/info.json`);try{try{if(ie.posts_orig[N][U][L][T])throw"exist"}catch(Be){if("exist"==Be)throw"\uc774\ubbf8 \uc788\ub294 \uac8c\uc2dc\ubb3c"}let de=JSON.parse(H);try{de.server={name:ie.servers[N][U].info.name,isOfficial:N,target:U}}catch{de.server={name:ie.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0}}if(de.mainImage)try{if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let Be=yield ie.indexed.loadBlobFromUserPath(de.mainImage.path,de.mainImage.type);de.mainImage.blob=Be;const Xe=URL.createObjectURL(Be);de.mainImage.thumbnail=Xe,setTimeout(()=>{URL.revokeObjectURL(Xe)},5e3)}}catch{}return ie.posts_orig[N][U][L][T]=de,!0}catch{return!1}})()}GetOverrideName(T,N,U){let L;try{L=this.usernameOverride[N][U][T]}catch{}return L}SaveOverrideName(T,N,U,L){var ie=this;return(0,F.A)(function*(){N?ie.usernameOverride[U][L][T]=N:delete ie.usernameOverride[U][L][T];let H=JSON.stringify(ie.usernameOverride[U][L]),Be={blob:new Blob([H],{type:"application/json"}),path:`servers/${U}/${L}/users/override_name.json`};yield ie.sync_save_file(Be,U,L,"usernameOverride","override");try{yield ie.servers[U][L].client.rpc(ie.servers[U][L].session,"send_noti_fn",{receiver_id:[ie.servers[U][L].session.user_id],title:"name_overrided",content:{},code:Er.NAME_OVERRIDED,persistent:!1})}catch{}})()}LoadOverrideName(T,N){var U=this;return(0,F.A)(function*(){let L={path:`servers/${T}/${N}/users/override_name.json`},ie=yield U.sync_load_file(L,T,N,"usernameOverride",void 0,"override",!1);if(ie.value){let H=yield ie.value.text(),de=JSON.parse(H),Be=Object.keys(de);U.usernameOverride[T][N]={};for(let Xe of Be)U.usernameOverride[T][N][Xe]=de[Xe]}})()}LoadOverridesOffline(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("override_name.json");for(let U of N)try{let L=U.split("/");T.usernameOverride[L[1]]||(T.usernameOverride[L[1]]={}),T.usernameOverride[L[1]][L[2]]||(T.usernameOverride[L[1]][L[2]]={});let H=yield(yield T.indexed.loadBlobFromUserPath(U,"")).text(),de=JSON.parse(H);T.usernameOverride[L[1]][L[2]]=de}catch{}})()}load_server_post_with_id(T,N,U,L,ie){var H=this;return(0,F.A)(function*(){let de;try{let Xe={path:`servers/${N}/${U}/posts/${L}/${T}/info.json`,type:"application/json"};const wt=yield H.sync_load_file(Xe,N,U,"server_post",L,T,!1);if(wt.error)return!1;const Nt=yield wt.value.text();de=JSON.parse(Nt),de.is_me=de.is_me||ie;const rn=new Blob([JSON.stringify(de)],{type:"application/json"});if(de.OutSource&&!de.is_me)throw"\ub2e4\ub978 \uc0ac\ub78c\uc758 \uc678\ubd80 \uac8c\uc2dc\ubb3c \uc815\ubcf4 \ubb34\uc2dc";H.indexed.saveBlobToUserPath(rn,Xe.path),de.server={isOfficial:N,target:U};try{de.server.name=H.servers[N][U].info.name}catch{de.server.name=H.lang.text.Nakama.DeletedServer}if(de.mainImage)if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let Ge={path:de.mainImage.path,alt_path:`servers/${N}/${U}/posts/${L}/${T}/MainImage.png`,type:"image/png"};const He=yield H.sync_load_file(Ge,N,U,"server_post",L,`${T}_mainImage`,!1);de.mainImage.blob=He.value;const vt=URL.createObjectURL(He.value);de.mainImage.thumbnail=vt,setTimeout(()=>{URL.revokeObjectURL(vt)},5e3)}try{de.creator_name=H.load_other_user(L,N,U).display_name||de.creator_name}catch{}if(H.posts_orig[N]||(H.posts_orig[N]={}),H.posts_orig[N][U]||(H.posts_orig[N][U]={}),H.posts_orig[N][U][L]||(H.posts_orig[N][U][L]={}),("deleted"!=N||de.is_me)&&(H.posts_orig[N][U][L][T]=de),"local"==wt.from)try{if(!(yield H.servers[N][U].client.readStorageObjects(H.servers[N][U].session,{object_ids:[{collection:"server_post",key:T,user_id:L}]})).objects.length)throw"Not RemoteExist"}catch(Ge){if("Not RemoteExist"==Ge)throw"RemoveSelf"}return de}catch(Xe){var Be;return"RemoveSelf"==Xe?H.RemovePost(H.posts_orig[N][U][L][T],!0):de&&null!==(Be=de)&&void 0!==Be&&Be.creator_id&&((yield H.indexed.GetFileListFromDB(`servers/${N}/${U}/posts/${de.creator_id}/${de.id}`)).forEach(Nt=>H.indexed.removeFileFromUserPath(Nt)),delete H.posts_orig[N][U][L][T],H.rearrange_posts()),!1}})()}deserialize_text(T){let N="";if(!T.content.msg)return N;for(let U=0,L=T.content.msg.length;U<L;U++){for(let ie=0,H=T.content.msg[U].length;ie<H;ie++)N+=T.content.msg[U][ie].text;U+1<L&&(N+="\n")}return N}load_posts_counter(T){var N=this;return(0,F.A)(function*(){let U={};try{let H=yield N.indexed.loadTextFromUserPath("servers/post_counter.json"),de=JSON.parse(H);U=H,N.post_counter=de}catch{}let L=Number(yield N.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;N.post_counter.local.target.me=L;let ie=T||N.get_all_server_info(!0,!0);for(let H=0,de=ie.length;H<de;H++){let Be=ie[H].isOfficial,Xe=ie[H].target;(!N.post_counter[Be][Xe]||T)&&(N.post_counter[Be][Xe]={});try{let wt=yield N.servers[Be][Xe].client.readStorageObjects(N.servers[Be][Xe].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:N.servers[Be][Xe].session.user_id}]}),Nt=0;wt.objects.length&&(Nt=wt.objects[0].value.counter),N.post_counter[Be][Xe][N.servers[Be][Xe].session.user_id]=Nt}catch(wt){console.log("\ub0b4 \uc11c\ubc84 \uac8c\uc2dc\ubb3c \uce74\uc6b4\ud130 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",wt)}if(N.users[Be][Xe]){let wt=Object.keys(N.users[Be][Xe]);for(let Nt=0,rn=wt.length;Nt<rn;Nt++)try{let Ge=yield N.servers[Be][Xe].client.readStorageObjects(N.servers[Be][Xe].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:wt[Nt]}]}),He=0;Ge.objects.length&&(He=Ge.objects[0].value.counter),N.post_counter[Be][Xe][wt[Nt]]=He;try{if(!N.posts_orig[Be][Xe])throw"\uc544\uc9c1 \uc900\ube44\ub418\uc9c0 \uc54a\uc74c";let vt=Object.keys(N.posts_orig[Be][Xe][wt[Nt]]);for(let tt of vt){let Zt=(yield N.servers[Be][Xe].client.readStorageObjects(N.servers[Be][Xe].session,{object_ids:[{collection:"server_post",key:tt,user_id:wt[Nt]}]})).objects[0].value,$n=yield N.sync_load_file(Zt,Be,Xe,"server_post",wt[Nt],tt,!1);if("remote"!==$n.from)throw tt;{let Ar=yield $n.value.text();JSON.parse(Ar).OutSource&&delete N.posts_orig[Be][Xe][wt[Nt]][tt]}}}catch(vt){try{delete N.posts_orig[Be][Xe][wt[Nt]][vt]}catch{}}}catch{delete N.post_counter[Be][Xe][wt[Nt]]}N.rearrange_posts()}U!=JSON.stringify(N.post_counter)&&(yield N.save_post_counter(),N.has_new_post=!0)}})()}save_post_counter(){var T=this;return(0,F.A)(function*(){yield T.indexed.saveTextFileToUserPath(JSON.stringify(T.post_counter),"servers/post_counter.json")})()}send_webpush(T,N,U){return(0,F.A)(function*(){try{N.users=U;const L=yield fetch(`${T}/send_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!L.ok)throw`${L.statusText} (${L.status})`}catch(L){console.log("onerror_send_webpush: ",L)}})()}schedule_webpush(T,N,U){return(0,F.A)(function*(){try{N.users=U;const L=yield fetch(`${T}/schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!L.ok)throw`${L.statusText} (${L.status})`}catch(L){console.log("onerror_schedule_webpush: ",L)}})()}remove_schedule_webpush(T,N,U){return(0,F.A)(function*(){try{N.users=U;const L=yield fetch(`${T}/remove_schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!L.ok)throw`${L.statusText} (${L.status})`}catch(L){console.log("onerror_remove_schedule_webpush: ",L)}})()}GetNodejsServerAddress(T,N,U){if(!T||!N)throw"\uacf5\ubc31 \uc11c\ubc84 \uc815\ubcf4";const L=this.servers[T][N].info.useSSL?"https":"http",ie=this.servers[T][N].info.address;let H;switch(U){case"cdn_port":H=9001;break;case"apache_port":H=9002;break;case"square_port":H=12013;break;case"webrtc_port":H=3478;break;case"webpush_port":H=5e3;break;case"nakama_port":H=7350}return`${L}://${ie}:${this.servers[T][N].info[U]||H}`}GetPushPubKey(T,N){var U=this;return(0,F.A)(function*(){const de=`${U.servers[T][N].info.useSSL?"https":"http"}://${U.servers[T][N].info.address}:${U.servers[T][N].info.webpush_port||5e3}`;try{if(U.servers[T][N].info.webpush_tog){const Be=yield fetch(`${de}/get_webpush_key`,{method:"POST"});let Xe;if(!Be.ok)throw`${Be.statusText} (${Be.status})`;Xe=(yield Be.json()).pubkey;const wt=yield U.global.subscribeToPush(Xe),Nt={uuid:U.servers[U.servers[T][N].info.isOfficial][U.servers[T][N].info.target].session.user_id,subscription:wt},rn=yield fetch(`${de}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)});if(!rn.ok)throw`${rn.statusText} (${rn.status})`}else yield U.global.unsubscribeFromPush(de)}catch(Be){console.log("error_GetPushPubKey: ",Be),U.p5toast.show({text:`${U.lang.text.GroupServer.WebpushPubkey}: ${Be}`}),U.servers[T][N].info.webpush_tog=!U.servers[T][N].info.webpush_tog}yield U.modify_group_server(U.servers[T][N].info)})()}RemoveNotiPubKey(){var T=this;return(0,F.A)(function*(){try{const N=T.get_all_server_info(!0);let U;for(let L of N)if(L.webpush_tog){U=L;break}U&&(U.webpush_tog=!1,yield T.GetPushPubKey(U.isOfficial,U.target))}catch(N){console.log("\uc11c\ubc84\uc5d0\uc11c \uc54c\ub9bc \uc81c\uac70\ud558\uae30 \uc2e4\ud328: ",N)}})()}}return(te=Ie).\u0275fac=function(T){return new(T||te)(mn.KVO(sr.G),mn.KVO(qt.j),mn.KVO(fn.n),mn.KVO(Fn.r),mn.KVO(Cn.hG),mn.KVO(yr.y),mn.KVO(on.z3),mn.KVO(Wn.q9),mn.KVO(fr.f))},te.\u0275prov=mn.jDH({token:te,factory:te.\u0275fac,providedIn:"root"}),Ie})()},3307:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{f:()=>Z});var F=Ve(467),j=Ve(8326),sn=Ve(3953),a=Ve(4234);!function be(){("http:"!=window.location.protocol||0==window.location.host.indexOf("localhost"))&&Ve.e(925).then(Ve.t.bind(Ve,925,23))}();let Z=(()=>{var M;class C{constructor(w){this.lang=w,this.loadingStack={},this.stackKeys=[],this.queued=[]}create(w){var I=this;return(0,F.A)(function*(){I.CurrentLoading?I.AddLoadingInfo?I.AddLoadingInfo(w):I.queued.push(w):yield new Promise(D=>{I.CurrentLoading=new j(d=>{d.setup=()=>{if(d.noCanvas(),"http:"!=window.location.protocol||0==window.location.host.indexOf("localhost")){let h=new j.Oscillator(372);I.SoundAlert=()=>{if(w.soundAlert)try{h.freq(372),h.start(),h.freq(500,.1),h.freq(320,.15),h.stop(.2)}catch(p){console.log("\uc624\uc2e4\ub808\uc774\ud130 \uc900\ube44\uc911: ",p)}}}I.parentDiv=d.createDiv(),I.parentDiv.style("position: absolute; left: 0; top: 0; z-index: 1"),I.parentDiv.style("width: 100%; height: fit-content"),I.parentDiv.style("padding: 16px;"),I.parentDiv.style("display: flex; flex-direction: column"),I.parentDiv.style("gap: 8px"),I.parentDiv.style("justify-content: center;"),I.parentDiv.style("pointer-events: none"),I.parentDiv.style("user-select: none"),I.AddLoadingInfo=h=>{var p;I.loadingStack[h.id]=h,I.stackKeys=Object.keys(I.loadingStack);const m=d.createDiv();I.loadingStack[h.id].element=m,m.style("width: 100%; height: fit-content"),m.style("word-break: break-all"),m.style("background: "+(h.bgcolor?`#${h.bgcolor}88`:"var(--toast-background-color)")),m.style("border-radius: 32px"),m.style("padding: 8px"),m.style("color: white"),m.parent(I.parentDiv),h.clickable?(m.style("cursor: pointer"),m.style("pointer-events: fill"),m.mouseClicked(()=>{var k;null===(k=h.clickable)||void 0===k||k.call(h),m.style("cursor: auto"),m.style("pointer-events: none"),h.forceEnd=350})):(m.style("cursor: auto"),m.style("pointer-events: none")),(void 0!==h.clickable||h.soundAlert)&&(null===(p=I.SoundAlert)||void 0===p||p.call(I));const g=d.createDiv();g.style("display: flex; flex-direction: row;"),g.parent(m);const x=d.createImg(h.image,"ld_img");x.style("width: 32px; height: 32px;"),x.style("margin-left: 8px"),x.style("object-fit: cover"),x.style("border-radius: 24px;"),h.image||x.hide(),h.imageElement=x,x.parent(g);const E=d.createDiv();E.style("display: flex; flex-direction: row;"),E.style("gap: 4px"),E.style("overflow: hidden"),E.style("flex-grow: 1"),E.style("align-items: center"),E.style("margin-right: 8px"),E.parent(g);const S=d.createDiv(h.message||I.lang.text.TodoDetail.WIP);if(S.style("margin-left: 16px"),S.style("flex-grow: 1"),S.style("overflow: hidden"),S.style("white-space: nowrap"),S.style("text-overflow: ellipsis"),h.messageElement=S,S.parent(E),void 0===h.clickable){const k=d.createDiv();k.style("width: 24px; height: 24px;"),k.style("flex-shrink: 0"),k.style("border-radius: 50%"),null===h.progress&&(h.progress=void 0);const q=Math.floor(100*h.progress)||0;k.style(`background: conic-gradient(var(--loading-done-color) 0% ${q}%, var(--loading-waiting-color) ${q}% 100%)`),h.progressElement=k,h.nullProgress=0,k.parent(E)}h.fade=0,null===h.forceEnd&&delete h.forceEnd},I.AddLoadingInfo(w),D(void 0)},d.draw=()=>{for(let p=I.queued.length-1;p>=0;p--)I.AddLoadingInfo(I.queued[p]),I.queued.splice(p,1);for(let p of I.stackKeys){if(void 0===I.loadingStack[p].progress){var h;I.loadingStack[p].nullProgress=(I.loadingStack[p].nullProgress+2)%120;const m=I.loadingStack[p].nullProgress;null===(h=I.loadingStack[p].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-waiting-color) 0% ${m-20}%, var(--loading-done-color) ${m-20}% ${m}%, var(--loading-waiting-color) ${m}% 100%)`)}void 0!==I.loadingStack[p].forceEnd&&I.loadingStack[p].forceEnd>0&&(I.loadingStack[p].forceEnd-=7),I.loadingStack[p].forceEnd<=0?I.loadingStack[p].fade>0?(I.loadingStack[p].fade-=.07,I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`),I.loadingStack[p].fade<=0&&(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack))):(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack)):I.loadingStack[p].fade<1&&(I.loadingStack[p].fade+=.07,I.loadingStack[p].fade>=1&&(I.loadingStack[p].fade=1),I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`))}I.stackKeys.length||f()};let f=()=>{d.remove(),I.parentDiv=null,I.CurrentLoading=null,I.AddLoadingInfo=null,I.stackKeys.length=0}})})})()}update(w,I=!1){var D=this;return(0,F.A)(function*(){if(D.stackKeys.includes(w.id)){var d;if(w.clickable?(D.loadingStack[w.id].element.style("cursor: pointer"),D.loadingStack[w.id].element.style("pointer-events: fill"),D.loadingStack[w.id].element.mouseClicked(()=>{var p;null===(p=w.clickable)||void 0===p||p.call(w),D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none"),D.loadingStack[w.id].forceEnd=350})):(D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none")),(void 0!==w.clickable||w.soundAlert)&&(null===(d=D.SoundAlert)||void 0===d||d.call(D)),null!=w.bgcolor&&D.loadingStack[w.id].element.style("background: "+(w.bgcolor?`#${w.bgcolor}88`:"var(--toast-background-color)")),void 0!==w.forceEnd)if(null===w.forceEnd)D.loadingStack[w.id].forceEnd=void 0;else if(D.loadingStack[w.id].forceEnd=w.forceEnd,D.loadingStack[w.id].progress){var f;D.loadingStack[w.id].progress=1,null===(f=D.loadingStack[w.id].progressElement)||void 0===f||f.style("background: conic-gradient(var(--loading-done-color) 0% 100%")}if(void 0!==w.message&&(null===w.message?(delete D.loadingStack[w.id],D.loadingStack[w.id].messageElement.html()):(D.loadingStack[w.id].message=w.message,D.loadingStack[w.id].messageElement.html(w.message))),void 0!==w.progress)if(null===w.progress)delete D.loadingStack[w.id].progress;else{var h;D.loadingStack[w.id].progress=w.progress;const p=Math.floor(100*w.progress);null===(h=D.loadingStack[w.id].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-done-color) 0% ${p}%, var(--loading-waiting-color) ${p}% 100%)`)}void 0!==w.image&&(null===w.image?(delete D.loadingStack[w.id].image,D.loadingStack[w.id].imageElement.hide(),D.loadingStack[w.id].imageElement.removeAttribute("src")):(D.loadingStack[w.id].image=w.image,D.loadingStack[w.id].imageElement.attribute("src",w.image),D.loadingStack[w.id].imageElement.show()))}else I||(yield D.create(w))})()}toast(w,I,D=1e3){const d=I||`AsToast_${Date.now()}`;this.update({id:d,message:w,forceEnd:D})}remove(w){this.update({id:w,forceEnd:350},!0)}}return(M=C).\u0275fac=function(w){return new(w||M)(sn.KVO(a.y))},M.\u0275prov=sn.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),C})()},9900:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{G:()=>be});var F=Ve(8326),It=Ve(7100),sn=Ve(3953),a=function(Z){return Z[Z.Idle=0]="Idle",Z[Z.DivFadeIn=1]="DivFadeIn",Z[Z.BorderAlert=2]="BorderAlert",Z[Z.Reading=3]="Reading",Z[Z.FadeOut=4]="FadeOut",Z}(a||{});let be=(()=>{var Z;class M{constructor(){this.isShowing=!1,this.stack=[],this.alert=[],this.status=a.Idle}show(b){let w;b.time=(new Date).getTime(),b.lateable||(this.AlertNow=b,this.status=a.DivFadeIn),this.alert.length&&(w=this.alert[this.alert.length-1]),this.AlertNow&&this.AlertNow.text==b.text?this.status=a.DivFadeIn:w&&w.text==b.text||this.alert.push(b),this.isShowing?this.status==a.FadeOut&&(this.status=a.DivFadeIn):(this.CurrentToast=new F(D=>{let d,f,h,p=0,m=0,g=0;D.setup=()=>{D.noCanvas(),d=D.createDiv(),d.style("position: absolute; left: 0; top: 0; z-index: 2"),d.style("width: 100%; height: fit-content"),d.style("padding: 32px;"),d.style("display: flex; justify-content: center;"),d.style("pointer-events: none"),x(),h=D.createDiv(),h.parent(d),h.style("display: flex; justify-content: center;"),h.style("width: fit-content; height: fit-content"),h.style("border-radius: 24px"),h.style("background: var(--toast-background-color)"),h.style("padding: 4px"),f=D.createDiv(),f.parent(h),f.style("display: flex; justify-content: center;"),f.style("width: fit-content; height: fit-content"),f.style("word-break: break-all"),f.style("background: var(--toast-background-color)"),f.style("border-radius: 20px"),f.style("padding: 12px"),f.style("color: white"),this.AlertNow||(this.AlertNow=this.alert.shift()),f.html(this.HTMLEncode(this.AlertNow.text)),E(),this.status=a.DivFadeIn},D.draw=()=>{switch(this.status){case a.DivFadeIn:p<1?p+=1:(p=1,m=1,this.status=a.BorderAlert,f.html(this.HTMLEncode(this.AlertNow.text)));break;case a.BorderAlert:if(m>0)m-=.03;else{let k;m=0,k=this.AlertNow.duration?1e3*this.AlertNow.duration:24*(new TextEncoder).encode(this.AlertNow.text).length,g=D.millis()+k+960,this.status=a.Reading}break;case a.Reading:D.millis()>g&&(this.alert.length?(this.stack.push(this.AlertNow),this.AlertNow=this.alert.shift(),f.html(this.HTMLEncode(this.AlertNow.text)),this.status=a.DivFadeIn):this.status=a.FadeOut);break;case a.FadeOut:p>0?p-=.04:S()}x(),E()};let x=()=>{d.style(`opacity: ${p}`)},E=()=>{let k=D.lerpColor(D.color("#"+(It.ud?"30564e88":"b9543788")),D.color("#ffd94ebb"),m).levels;h.style(`padding: ${4*m}px`),f.style(`padding: ${D.lerp(16,12,m)}px`),f.style(`border-radius: ${D.lerp(24,20,m)}px`),h.style(`background: rgba(${k[0]}, ${k[1]}, ${k[2]}, ${k[3]/255})`)},S=()=>{this.stack=[...this.stack,this.AlertNow,...this.alert],this.AlertNow=null,this.alert.length=0,this.isShowing=!1,this.CurrentToast.remove()}}),this.isShowing=!0)}hide(){this.status=a.FadeOut}}return(Z=M).\u0275fac=function(b){return new(b||Z)},Z.\u0275prov=sn.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),M})()},8065:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{j:()=>j});var F=Ve(3953);let j=(()=>{var It;class sn{constructor(){this.colors={offline:"#888888",missing:"#880000",pending:"#dddd0c",online:"#4ff14f",certified:"#00ffff"},this.chatroom={},this.project={},this.task={},this.settings={groupServer:"offline",dedicatedServer:"offline",dedicated_groupchat:"offline"},this.tools={},this.groupServer={official:{default:"offline"},unofficial:{}},setInterval(()=>{},350)}}return(It=sn).\u0275fac=function(be){return new(be||It)},It.\u0275prov=F.jDH({token:It,factory:It.\u0275fac,providedIn:"root"}),sn})()},6197:(Rr,Un,Ve)=>{"use strict";var F=Ve(345),j=Ve(3953),It=Ve(9858),sn=Ve(3656),a=Ve(5374),be=Ve(92);const Z=[{path:"",redirectTo:"portal",pathMatch:"full"},{path:"minimal-chat",loadChildren:()=>Promise.all([Ve.e(2076),Ve.e(5502)]).then(Ve.bind(Ve,5502)).then(ot=>ot.MinimalChatPageModule)},{path:"others-profile",loadChildren:()=>Ve.e(4722).then(Ve.bind(Ve,4722)).then(ot=>ot.OthersProfilePageModule)},{path:"user-fs-dir",loadChildren:()=>Ve.e(6556).then(Ve.bind(Ve,6556)).then(ot=>ot.UserFsDirPageModule)},{path:"group-server",loadChildren:()=>Ve.e(36).then(Ve.bind(Ve,36)).then(ot=>ot.GroupServerPageModule)},{path:"add-todo-menu",loadChildren:()=>Promise.all([Ve.e(2076),Ve.e(8163)]).then(Ve.bind(Ve,8163)).then(ot=>ot.AddTodoMenuPageModule)},{path:"chat-room",loadChildren:()=>Promise.all([Ve.e(2076),Ve.e(6991)]).then(Ve.bind(Ve,6991)).then(ot=>ot.ChatRoomPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([Ve.e(222),Ve.e(526)]).then(Ve.bind(Ve,526)).then(ot=>ot.PostViewerPageModule)},{path:"share-content-to-other",loadChildren:()=>Ve.e(9406).then(Ve.bind(Ve,9406)).then(ot=>ot.ShareContentToOtherPageModule)},{path:"webrtc-manage-io-dev",loadChildren:()=>Ve.e(5436).then(Ve.bind(Ve,5436)).then(ot=>ot.WebrtcManageIoDevPageModule)},{path:"portal",loadChildren:()=>Promise.all([Ve.e(4020),Ve.e(8180)]).then(Ve.bind(Ve,8180)).then(ot=>ot.PortalPageModule)},{path:"group-detail",loadChildren:()=>Ve.e(3267).then(Ve.bind(Ve,3267)).then(ot=>ot.GroupDetailPageModule)},{path:"instant-call",loadChildren:()=>Promise.all([Ve.e(4020),Ve.e(6524),Ve.e(2076)]).then(Ve.bind(Ve,6524)).then(ot=>ot.InstantCallPageModule)},{path:"add-group",loadChildren:()=>Ve.e(7601).then(Ve.bind(Ve,7601)).then(ot=>ot.AddGroupPageModule)},{path:"void-draw",loadChildren:()=>Promise.all([Ve.e(6042),Ve.e(4020),Ve.e(2655)]).then(Ve.bind(Ve,2655)).then(ot=>ot.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([Ve.e(6042),Ve.e(4803),Ve.e(222)]).then(Ve.bind(Ve,4803)).then(ot=>ot.IonicViewerPageModule)},{path:"server-detail",loadChildren:()=>Ve.e(3456).then(Ve.bind(Ve,3456)).then(ot=>ot.ServerDetailPageModule)},{path:"qrcode-modal",loadChildren:()=>Promise.all([Ve.e(2076),Ve.e(3992)]).then(Ve.bind(Ve,1611)).then(ot=>ot.QRCodeModalPageModule)}];let M=(()=>{var ot;class ue{}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({imports:[It.iI.forRoot(Z,{preloadingStrategy:It.Kp}),It.iI]}),ue})();var C=Ve(177),b=Ve(9030),w=Ve(8810),I=Ve(3726),D=Ve(7673),d=Ve(8793),f=Ve(1413),h=Ve(1985),p=Ve(5343);const m=new h.c(p.l);var x=Ve(6365),E=Ve(8750),S=Ve(983),k=Ve(9326),q=Ve(6648);function J(...ot){const ue=(0,k.lI)(ot),ve=(0,k.R0)(ot,1/0),ze=ot;return ze.length?1===ze.length?(0,E.Tg)(ze[0]):(0,x.U)(ve)((0,q.H)(ze,ue)):S.w}var G=Ve(6354),V=Ve(5964),K=Ve(5558),$=Ve(17),ne=Ve(8071),Y=Ve(9974);const Se={connector:()=>new f.B};function oe(ot,ue=Se){const{connector:ve}=ue;return(0,Y.N)((ze,at)=>{const kt=ve();(0,E.Tg)(ot(function we(ot){return new h.c(ue=>ot.subscribe(ue))}(kt))).subscribe(at),at.add(ze.subscribe(kt))})}var Q=Ve(6697),fe=Ve(8141),Ce=Ve(8359);class it extends Ce.yU{constructor(ue,ve){super()}schedule(ue,ve=0){return this}}const le={setInterval(ot,ue,...ve){const{delegate:ze}=le;return null!=ze&&ze.setInterval?ze.setInterval(ot,ue,...ve):setInterval(ot,ue,...ve)},clearInterval(ot){const{delegate:ue}=le;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ot)},delegate:void 0};var z=Ve(7908);const je={now:()=>(je.delegate||Date).now(),delegate:void 0};class Je{constructor(ue,ve=Je.now){this.schedulerActionCtor=ue,this.now=ve}schedule(ue,ve=0,ze){return new this.schedulerActionCtor(this,ue).schedule(ze,ve)}}Je.now=je.now;const Ct=new class gt extends Je{constructor(ue,ve=Je.now){super(ue,ve),this.actions=[],this._active=!1}flush(ue){const{actions:ve}=this;if(this._active)return void ve.push(ue);let ze;this._active=!0;do{if(ze=ue.execute(ue.state,ue.delay))break}while(ue=ve.shift());if(this._active=!1,ze){for(;ue=ve.shift();)ue.unsubscribe();throw ze}}}(class ye extends it{constructor(ue,ve){super(ue,ve),this.scheduler=ue,this.work=ve,this.pending=!1}schedule(ue,ve=0){var ze;if(this.closed)return this;this.state=ue;const at=this.id,kt=this.scheduler;return null!=at&&(this.id=this.recycleAsyncId(kt,at,ve)),this.pending=!0,this.delay=ve,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(kt,this.id,ve),this}requestAsyncId(ue,ve,ze=0){return le.setInterval(ue.flush.bind(ue,this),ze)}recycleAsyncId(ue,ve,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return ve;null!=ve&&le.clearInterval(ve)}execute(ue,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(ue,ve);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ve){let at,ze=!1;try{this.work(ue)}catch(kt){ze=!0,at=kt||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),at}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ve}=this,{actions:ze}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.o)(ze,this),null!=ue&&(this.id=this.recycleAsyncId(ve,ue,null)),this.delay=null,super.unsubscribe()}}}),$t=Ct;var yt=Ve(4360),Xt=Ve(3703),ft=Ve(1397);function jt(ot,ue){return ue?ve=>(0,d.x)(ue.pipe((0,Q.s)(1),function Ut(){return(0,Y.N)((ot,ue)=>{ot.subscribe((0,yt._)(ue,p.l))})}()),ve.pipe(jt(ot))):(0,ft.Z)((ve,ze)=>(0,E.Tg)(ot(ve,ze)).pipe((0,Q.s)(1),(0,Xt.u)(ve)))}var Lt=Ve(9470);const yn="Service workers are disabled or not supported by this browser";class An{constructor(ue){if(this.serviceWorker=ue,ue){const ze=(0,I.R)(ue,"controllerchange").pipe((0,G.T)(()=>ue.controller)),at=(0,b.v)(()=>(0,D.of)(ue.controller)),kt=(0,d.x)(at,ze);this.worker=kt.pipe((0,V.p)(Xr=>!!Xr)),this.registration=this.worker.pipe((0,K.n)(()=>ue.getRegistration()));const or=(0,I.R)(ue,"message").pipe((0,G.T)(Xr=>Xr.data)).pipe((0,V.p)(Xr=>Xr&&Xr.type)).pipe(function re(ot){return ot?ue=>oe(ot)(ue):ue=>function ge(ot,ue){const ve=(0,ne.T)(ot)?ot:()=>ot;return(0,ne.T)(ue)?oe(ue,{connector:ve}):ze=>new $.G(ze,ve)}(new f.B)(ue)}());or.connect(),this.events=or}else this.worker=this.events=this.registration=function Yn(ot){return(0,b.v)(()=>(0,w.$)(new Error(ot)))}(yn)}postMessage(ue,ve){return this.worker.pipe((0,Q.s)(1),(0,fe.M)(ze=>{ze.postMessage({action:ue,...ve})})).toPromise().then(()=>{})}postMessageWithOperation(ue,ve,ze){const at=this.waitForOperationCompleted(ze),kt=this.postMessage(ue,ve);return Promise.all([kt,at]).then(([,En])=>En)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(ue){let ve;return ve="string"==typeof ue?ze=>ze.type===ue:ze=>ue.includes(ze.type),this.events.pipe((0,V.p)(ve))}nextEventOfType(ue){return this.eventsOfType(ue).pipe((0,Q.s)(1))}waitForOperationCompleted(ue){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,V.p)(ve=>ve.nonce===ue),(0,Q.s)(1),(0,G.T)(ve=>{if(void 0!==ve.result)return ve.result;throw new Error(ve.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Jn=(()=>{var ot;class ue{get isEnabled(){return this.sw.isEnabled}constructor(ze){if(this.sw=ze,this.pushManager=null,this.subscriptionChanges=new f.B,!ze.isEnabled)return this.messages=m,this.notificationClicks=m,void(this.subscription=m);this.messages=this.sw.eventsOfType("PUSH").pipe((0,G.T)(kt=>kt.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,G.T)(kt=>kt.data)),this.pushManager=this.sw.registration.pipe((0,G.T)(kt=>kt.pushManager));const at=this.pushManager.pipe((0,K.n)(kt=>kt.getSubscription()));this.subscription=J(at,this.subscriptionChanges)}requestSubscription(ze){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(yn));const at={userVisibleOnly:!0};let kt=this.decodeBase64(ze.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),En=new Uint8Array(new ArrayBuffer(kt.length));for(let Sn=0;Sn<kt.length;Sn++)En[Sn]=kt.charCodeAt(Sn);return at.applicationServerKey=En,this.pushManager.pipe((0,K.n)(Sn=>Sn.subscribe(at)),(0,Q.s)(1)).toPromise().then(Sn=>(this.subscriptionChanges.next(Sn),Sn))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Q.s)(1),(0,K.n)(at=>{if(null===at)throw new Error("Not subscribed to push notifications.");return at.unsubscribe().then(kt=>{if(!kt)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(yn))}decodeBase64(ze){return atob(ze)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(An))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})(),Rn=(()=>{var ot;class ue{get isEnabled(){return this.sw.isEnabled}constructor(ze){if(this.sw=ze,!ze.isEnabled)return this.versionUpdates=m,void(this.unrecoverable=m);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yn));const ze=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:ze},ze)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yn));const ze=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:ze},ze)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(An))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();const Sr=new j.nKC("");function Bn(ot,ue,ve,ze){return()=>{if(!(0,C.UE)(ze)||!("serviceWorker"in navigator)||!1===ve.enabled)return;const at=ot.get(j.SKi),kt=ot.get(j.o8S);let En;if(at.runOutsideAngular(()=>{const Sn=navigator.serviceWorker,Hn=()=>{var or;return null===(or=Sn.controller)||void 0===or?void 0:or.postMessage({action:"INITIALIZE"})};Sn.addEventListener("controllerchange",Hn),kt.onDestroy(()=>{Sn.removeEventListener("controllerchange",Hn)})}),"function"==typeof ve.registrationStrategy)En=ve.registrationStrategy();else{const[Sn,...Hn]=(ve.registrationStrategy||"registerWhenStable:30000").split(":");switch(Sn){case"registerImmediately":En=(0,D.of)(null);break;case"registerWithDelay":En=ur(+Hn[0]||0);break;case"registerWhenStable":En=Hn[0]?J(bn(ot),ur(+Hn[0])):bn(ot);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${ve.registrationStrategy}`)}}at.runOutsideAngular(()=>En.pipe((0,Q.s)(1)).subscribe(()=>navigator.serviceWorker.register(ue,{scope:ve.scope}).catch(Sn=>console.error("Service worker registration failed with:",Sn))))}}function ur(ot){return(0,D.of)(null).pipe(function Kt(ot,ue=Ct){const ve=function Et(ot=0,ue,ve=$t){let ze=-1;return null!=ue&&((0,Lt.m)(ue)?ve=ue:ze=ue),new h.c(at=>{let kt=function Bt(ot){return ot instanceof Date&&!isNaN(ot)}(ot)?+ot-ve.now():ot;kt<0&&(kt=0);let En=0;return ve.schedule(function(){at.closed||(at.next(En++),0<=ze?this.schedule(void 0,ze):at.complete())},kt)})}(ot,ue);return jt(()=>ve)}(ot))}function bn(ot){return ot.get(j.o8S).isStable.pipe((0,V.p)(ve=>ve))}function Qn(ot,ue){return new An((0,C.UE)(ue)&&!1!==ot.enabled?navigator.serviceWorker:void 0)}class Pn{}function pt(ot,ue={}){return(0,j.EmA)([Jn,Rn,{provide:Sr,useValue:ot},{provide:Pn,useValue:ue},{provide:An,useFactory:Qn,deps:[Pn,j.Agw]},{provide:j.hnV,useFactory:Bn,deps:[j.zZn,Sr,Pn,j.Agw],multi:!0}])}let bt=(()=>{var ot;class ue{static register(ze,at={}){return{ngModule:ue,providers:[pt(ze,at)]}}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({providers:[Jn,Rn]}),ue})();var _t=Ve(9969);function ir(ot){return new j.wOt(3e3,!1)}function tt(ot){switch(ot.length){case 0:return new _t.sf;case 1:return ot[0];default:return new _t.ui(ot)}}function Dt(ot,ue,ve=new Map,ze=new Map){const at=[],kt=[];let En=-1,Sn=null;if(ue.forEach(Hn=>{const or=Hn.get("offset"),Xr=or==En,oi=Xr&&Sn||new Map;Hn.forEach((Oi,Qi)=>{let Wi=Qi,is=Oi;if("offset"!==Qi)switch(Wi=ot.normalizePropertyName(Wi,at),is){case _t.FX:is=ve.get(Qi);break;case _t.kp:is=ze.get(Qi);break;default:is=ot.normalizeStyleValue(Qi,Wi,is,at)}oi.set(Wi,is)}),Xr||kt.push(oi),Sn=oi,En=or}),at.length)throw function U(ot){return new j.wOt(3502,!1)}();return kt}function Zt(ot,ue,ve,ze){switch(ue){case"start":ot.onStart(()=>ze(ve&&$n(ve,"start",ot)));break;case"done":ot.onDone(()=>ze(ve&&$n(ve,"done",ot)));break;case"destroy":ot.onDestroy(()=>ze(ve&&$n(ve,"destroy",ot)))}}function $n(ot,ue,ve){const ze=ve.totalTime,kt=lr(ot.element,ot.triggerName,ot.fromState,ot.toState,ue||ot.phaseName,null==ze?ot.totalTime:ze,!!ve.disabled),En=ot._data;return null!=En&&(kt._data=En),kt}function lr(ot,ue,ve,ze,at="",kt=0,En){return{element:ot,triggerName:ue,fromState:ve,toState:ze,phaseName:at,totalTime:kt,disabled:!!En}}function Ar(ot,ue,ve){let ze=ot.get(ue);return ze||ot.set(ue,ze=ve),ze}function Hi(ot){const ue=ot.indexOf(":");return[ot.substring(1,ue),ot.slice(ue+1)]}const Ki=typeof document>"u"?null:document.documentElement;function Xs(ot){const ue=ot.parentNode||ot.host||null;return ue===Ki?null:ue}let wi=null,ws=!1;function ea(ot,ue){for(;ue;){if(ue===ot)return!0;ue=Xs(ue)}return!1}function So(ot,ue,ve){if(ve)return Array.from(ot.querySelectorAll(ue));const ze=ot.querySelector(ue);return ze?[ze]:[]}let ta=(()=>{var ot;class ue{validateStyleProperty(ze){return function co(ot){wi||(wi=function so(){return typeof document<"u"?document.body:null}()||{},ws=!!wi.style&&"WebkitAppearance"in wi.style);let ue=!0;return wi.style&&!function Os(ot){return"ebkit"==ot.substring(1,6)}(ot)&&(ue=ot in wi.style,!ue&&ws&&(ue="Webkit"+ot.charAt(0).toUpperCase()+ot.slice(1)in wi.style)),ue}(ze)}containsElement(ze,at){return ea(ze,at)}getParentElement(ze){return Xs(ze)}query(ze,at,kt){return So(ze,at,kt)}computeStyle(ze,at,kt){return kt||""}animate(ze,at,kt,En,Sn,Hn=[],or){return new _t.sf(kt,En)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();class qo{}qo.NOOP=new ta;class ua{}const Ta=1e3,Va="ng-enter",ke="ng-leave",mt="ng-trigger",Vt=".ng-trigger",We="ng-animating",Wt=".ng-animating";function Ln(ot){if("number"==typeof ot)return ot;const ue=ot.match(/^(-?[\.\d]+)(m?s)/);return!ue||ue.length<2?0:fs(parseFloat(ue[1]),ue[2])}function fs(ot,ue){return"s"===ue?ot*Ta:ot}function qs(ot,ue,ve){return ot.hasOwnProperty("duration")?ot:function na(ot,ue,ve){let at,kt=0,En="";if("string"==typeof ot){const Sn=ot.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Sn)return ue.push(ir()),{duration:0,delay:0,easing:""};at=fs(parseFloat(Sn[1]),Sn[2]);const Hn=Sn[3];null!=Hn&&(kt=fs(parseFloat(Hn),Sn[4]));const or=Sn[5];or&&(En=or)}else at=ot;if(!ve){let Sn=!1,Hn=ue.length;at<0&&(ue.push(function Dr(){return new j.wOt(3100,!1)}()),Sn=!0),kt<0&&(ue.push(function Pr(){return new j.wOt(3101,!1)}()),Sn=!0),Sn&&ue.splice(Hn,0,ir())}return{duration:at,delay:kt,easing:En}}(ot,ue,ve)}function Ko(ot,ue,ve){ue.forEach((ze,at)=>{const kt=ct(at);ve&&!ve.has(at)&&ve.set(at,ot.style[kt]),ot.style[kt]=ze})}function ka(ot,ue){ue.forEach((ve,ze)=>{const at=ct(ze);ot.style[at]=""})}function Qa(ot){return Array.isArray(ot)?1==ot.length?ot[0]:(0,_t.K2)(ot):ot}const Ro=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vo(ot){let ue=[];if("string"==typeof ot){let ve;for(;ve=Ro.exec(ot);)ue.push(ve[1]);Ro.lastIndex=0}return ue}function oo(ot,ue,ve){const ze=`${ot}`,at=ze.replace(Ro,(kt,En)=>{let Sn=ue[En];return null==Sn&&(ve.push(function In(ot){return new j.wOt(3003,!1)}()),Sn=""),Sn.toString()});return at==ze?ot:at}const jo=/-+([a-z0-9])/g;function ct(ot){return ot.replace(jo,(...ue)=>ue[1].toUpperCase())}function Nn(ot,ue,ve){switch(ue.type){case _t.If.Trigger:return ot.visitTrigger(ue,ve);case _t.If.State:return ot.visitState(ue,ve);case _t.If.Transition:return ot.visitTransition(ue,ve);case _t.If.Sequence:return ot.visitSequence(ue,ve);case _t.If.Group:return ot.visitGroup(ue,ve);case _t.If.Animate:return ot.visitAnimate(ue,ve);case _t.If.Keyframes:return ot.visitKeyframes(ue,ve);case _t.If.Style:return ot.visitStyle(ue,ve);case _t.If.Reference:return ot.visitReference(ue,ve);case _t.If.AnimateChild:return ot.visitAnimateChild(ue,ve);case _t.If.AnimateRef:return ot.visitAnimateRef(ue,ve);case _t.If.Query:return ot.visitQuery(ue,ve);case _t.If.Stagger:return ot.visitStagger(ue,ve);default:throw function un(ot){return new j.wOt(3004,!1)}()}}function jn(ot,ue){return window.getComputedStyle(ot)[ue]}const hr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _r extends ua{normalizePropertyName(ue,ve){return ct(ue)}normalizeStyleValue(ue,ve,ze,at){let kt="";const En=ze.toString().trim();if(hr.has(ve)&&0!==ze&&"0"!==ze)if("number"==typeof ze)kt="px";else{const Sn=ze.match(/^[+-]?[\d\.]+([a-z]*)$/);Sn&&0==Sn[1].length&&at.push(function Tn(ot,ue){return new j.wOt(3005,!1)}())}return En+kt}}const Vi="*";const Js=new Set(["true","1"]),Vr=new Set(["false","0"]);function da(ot,ue){const ve=Js.has(ot)||Vr.has(ot),ze=Js.has(ue)||Vr.has(ue);return(at,kt)=>{let En=ot==Vi||ot==at,Sn=ue==Vi||ue==kt;return!En&&ve&&"boolean"==typeof at&&(En=at?Js.has(ot):Vr.has(ot)),!Sn&&ze&&"boolean"==typeof kt&&(Sn=kt?Js.has(ue):Vr.has(ue)),En&&Sn}}const uo=new RegExp("s*:selfs*,?","g");function El(ot,ue,ve,ze){return new ha(ot).build(ue,ve,ze)}class ha{constructor(ue){this._driver=ue}build(ue,ve,ze){const at=new el(ve);return this._resetContextStyleTimingState(at),Nn(this,Qa(ue),at)}_resetContextStyleTimingState(ue){ue.currentQuerySelector="",ue.collectedStyles=new Map,ue.collectedStyles.set("",new Map),ue.currentTime=0}visitTrigger(ue,ve){let ze=ve.queryCount=0,at=ve.depCount=0;const kt=[],En=[];return"@"==ue.name.charAt(0)&&ve.errors.push(function on(){return new j.wOt(3006,!1)}()),ue.definitions.forEach(Sn=>{if(this._resetContextStyleTimingState(ve),Sn.type==_t.If.State){const Hn=Sn,or=Hn.name;or.toString().split(/\s*,\s*/).forEach(Xr=>{Hn.name=Xr,kt.push(this.visitState(Hn,ve))}),Hn.name=or}else if(Sn.type==_t.If.Transition){const Hn=this.visitTransition(Sn,ve);ze+=Hn.queryCount,at+=Hn.depCount,En.push(Hn)}else ve.errors.push(function mn(){return new j.wOt(3007,!1)}())}),{type:_t.If.Trigger,name:ue.name,states:kt,transitions:En,queryCount:ze,depCount:at,options:null}}visitState(ue,ve){const ze=this.visitStyle(ue.styles,ve),at=ue.options&&ue.options.params||null;if(ze.containsDynamicStyles){const kt=new Set,En=at||{};ze.styles.forEach(Sn=>{Sn instanceof Map&&Sn.forEach(Hn=>{Vo(Hn).forEach(or=>{En.hasOwnProperty(or)||kt.add(or)})})}),kt.size&&ve.errors.push(function sr(ot,ue){return new j.wOt(3008,!1)}(0,kt.values()))}return{type:_t.If.State,name:ue.name,style:ze,options:at?{params:at}:null}}visitTransition(ue,ve){ve.queryCount=0,ve.depCount=0;const ze=Nn(this,Qa(ue.animation),ve),at=function ns(ot,ue){const ve=[];return"string"==typeof ot?ot.split(/\s*,\s*/).forEach(ze=>function Ms(ot,ue,ve){if(":"==ot[0]){const Hn=function qi(ot,ue){switch(ot){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(ve,ze)=>parseFloat(ze)>parseFloat(ve);case":decrement":return(ve,ze)=>parseFloat(ze)<parseFloat(ve);default:return ue.push(function Ie(ot){return new j.wOt(3016,!1)}()),"* => *"}}(ot,ve);if("function"==typeof Hn)return void ue.push(Hn);ot=Hn}const ze=ot.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==ze||ze.length<4)return ve.push(function te(ot){return new j.wOt(3015,!1)}()),ue;const at=ze[1],kt=ze[2],En=ze[3];ue.push(da(at,En)),"<"==kt[0]&&(at!=Vi||En!=Vi)&&ue.push(da(En,at))}(ze,ve,ue)):ve.push(ot),ve}(ue.expr,ve.errors);return{type:_t.If.Transition,matchers:at,animation:ze,queryCount:ve.queryCount,depCount:ve.depCount,options:za(ue.options)}}visitSequence(ue,ve){return{type:_t.If.Sequence,steps:ue.steps.map(ze=>Nn(this,ze,ve)),options:za(ue.options)}}visitGroup(ue,ve){const ze=ve.currentTime;let at=0;const kt=ue.steps.map(En=>{ve.currentTime=ze;const Sn=Nn(this,En,ve);return at=Math.max(at,ve.currentTime),Sn});return ve.currentTime=at,{type:_t.If.Group,steps:kt,options:za(ue.options)}}visitAnimate(ue,ve){const ze=function Aa(ot,ue){if(ot.hasOwnProperty("duration"))return ot;if("number"==typeof ot)return ml(qs(ot,ue).duration,0,"");const ve=ot;if(ve.split(/\s+/).some(kt=>"{"==kt.charAt(0)&&"{"==kt.charAt(1))){const kt=ml(0,0,"");return kt.dynamic=!0,kt.strValue=ve,kt}const at=qs(ve,ue);return ml(at.duration,at.delay,at.easing)}(ue.timings,ve.errors);ve.currentAnimateTimings=ze;let at,kt=ue.styles?ue.styles:(0,_t.iF)({});if(kt.type==_t.If.Keyframes)at=this.visitKeyframes(kt,ve);else{let En=ue.styles,Sn=!1;if(!En){Sn=!0;const or={};ze.easing&&(or.easing=ze.easing),En=(0,_t.iF)(or)}ve.currentTime+=ze.duration+ze.delay;const Hn=this.visitStyle(En,ve);Hn.isEmptyStep=Sn,at=Hn}return ve.currentAnimateTimings=null,{type:_t.If.Animate,timings:ze,style:at,options:null}}visitStyle(ue,ve){const ze=this._makeStyleAst(ue,ve);return this._validateStyleAst(ze,ve),ze}_makeStyleAst(ue,ve){const ze=[],at=Array.isArray(ue.styles)?ue.styles:[ue.styles];for(let Sn of at)"string"==typeof Sn?Sn===_t.kp?ze.push(Sn):ve.errors.push(new j.wOt(3002,!1)):ze.push(new Map(Object.entries(Sn)));let kt=!1,En=null;return ze.forEach(Sn=>{if(Sn instanceof Map&&(Sn.has("easing")&&(En=Sn.get("easing"),Sn.delete("easing")),!kt))for(let Hn of Sn.values())if(Hn.toString().indexOf("{{")>=0){kt=!0;break}}),{type:_t.If.Style,styles:ze,easing:En,offset:ue.offset,containsDynamicStyles:kt,options:null}}_validateStyleAst(ue,ve){const ze=ve.currentAnimateTimings;let at=ve.currentTime,kt=ve.currentTime;ze&&kt>0&&(kt-=ze.duration+ze.delay),ue.styles.forEach(En=>{"string"!=typeof En&&En.forEach((Sn,Hn)=>{const or=ve.collectedStyles.get(ve.currentQuerySelector),Xr=or.get(Hn);let oi=!0;Xr&&(kt!=at&&kt>=Xr.startTime&&at<=Xr.endTime&&(ve.errors.push(function Fn(ot,ue,ve,ze,at){return new j.wOt(3010,!1)}()),oi=!1),kt=Xr.startTime),oi&&or.set(Hn,{startTime:kt,endTime:at}),ve.options&&function Bl(ot,ue,ve){const ze=ue.params||{},at=Vo(ot);at.length&&at.forEach(kt=>{ze.hasOwnProperty(kt)||ve.push(function Br(ot){return new j.wOt(3001,!1)}())})}(Sn,ve.options,ve.errors)})})}visitKeyframes(ue,ve){const ze={type:_t.If.Keyframes,styles:[],options:null};if(!ve.currentAnimateTimings)return ve.errors.push(function Cn(){return new j.wOt(3011,!1)}()),ze;let kt=0;const En=[];let Sn=!1,Hn=!1,or=0;const Xr=ue.steps.map(Go=>{const us=this._makeStyleAst(Go,ve);let po=null!=us.offset?us.offset:function al(ot){if("string"==typeof ot)return null;let ue=null;if(Array.isArray(ot))ot.forEach(ve=>{if(ve instanceof Map&&ve.has("offset")){const ze=ve;ue=parseFloat(ze.get("offset")),ze.delete("offset")}});else if(ot instanceof Map&&ot.has("offset")){const ve=ot;ue=parseFloat(ve.get("offset")),ve.delete("offset")}return ue}(us.styles),ia=0;return null!=po&&(kt++,ia=us.offset=po),Hn=Hn||ia<0||ia>1,Sn=Sn||ia<or,or=ia,En.push(ia),us});Hn&&ve.errors.push(function Wn(){return new j.wOt(3012,!1)}()),Sn&&ve.errors.push(function yr(){return new j.wOt(3200,!1)}());const oi=ue.steps.length;let Oi=0;kt>0&&kt<oi?ve.errors.push(function fr(){return new j.wOt(3202,!1)}()):0==kt&&(Oi=1/(oi-1));const Qi=oi-1,Wi=ve.currentTime,is=ve.currentAnimateTimings,Ks=is.duration;return Xr.forEach((Go,us)=>{const po=Oi>0?us==Qi?1:Oi*us:En[us],ia=po*Ks;ve.currentTime=Wi+is.delay+ia,is.duration=ia,this._validateStyleAst(Go,ve),Go.offset=po,ze.styles.push(Go)}),ze}visitReference(ue,ve){return{type:_t.If.Reference,animation:Nn(this,Qa(ue.animation),ve),options:za(ue.options)}}visitAnimateChild(ue,ve){return ve.depCount++,{type:_t.If.AnimateChild,options:za(ue.options)}}visitAnimateRef(ue,ve){return{type:_t.If.AnimateRef,animation:this.visitReference(ue.animation,ve),options:za(ue.options)}}visitQuery(ue,ve){const ze=ve.currentQuerySelector,at=ue.options||{};ve.queryCount++,ve.currentQuery=ue;const[kt,En]=function go(ot){const ue=!!ot.split(/\s*,\s*/).find(ve=>":self"==ve);return ue&&(ot=ot.replace(uo,"")),ot=ot.replace(/@\*/g,Vt).replace(/@\w+/g,ve=>Vt+"-"+ve.slice(1)).replace(/:animating/g,Wt),[ot,ue]}(ue.selector);ve.currentQuerySelector=ze.length?ze+" "+kt:kt,Ar(ve.collectedStyles,ve.currentQuerySelector,new Map);const Sn=Nn(this,Qa(ue.animation),ve);return ve.currentQuery=null,ve.currentQuerySelector=ze,{type:_t.If.Query,selector:kt,limit:at.limit||0,optional:!!at.optional,includeSelf:En,animation:Sn,originalSelector:ue.selector,options:za(ue.options)}}visitStagger(ue,ve){ve.currentQuery||ve.errors.push(function Er(){return new j.wOt(3013,!1)}());const ze="full"===ue.timings?{duration:0,delay:0,easing:"full"}:qs(ue.timings,ve.errors,!0);return{type:_t.If.Stagger,animation:Nn(this,Qa(ue.animation),ve),timings:ze,options:null}}}class el{constructor(ue){this.errors=ue,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function za(ot){return ot?(ot={...ot}).params&&(ot.params=function fi(ot){return ot?{...ot}:null}(ot.params)):ot={},ot}function ml(ot,ue,ve){return{duration:ot,delay:ue,easing:ve}}function Rs(ot,ue,ve,ze,at,kt,En=null,Sn=!1){return{type:1,element:ot,keyframes:ue,preStyleProps:ve,postStyleProps:ze,duration:at,delay:kt,totalTime:at+kt,easing:En,subTimeline:Sn}}class ho{constructor(){this._map=new Map}get(ue){return this._map.get(ue)||[]}append(ue,ve){let ze=this._map.get(ue);ze||this._map.set(ue,ze=[]),ze.push(...ve)}has(ue){return this._map.has(ue)}clear(){this._map.clear()}}const ks=new RegExp(":enter","g"),Mo=new RegExp(":leave","g");function gl(ot,ue,ve,ze,at,kt=new Map,En=new Map,Sn,Hn,or=[]){return(new Tl).buildKeyframes(ot,ue,ve,ze,at,kt,En,Sn,Hn,or)}class Tl{buildKeyframes(ue,ve,ze,at,kt,En,Sn,Hn,or,Xr=[]){or=or||new ho;const oi=new Gl(ue,ve,or,at,kt,Xr,[]);oi.options=Hn;const Oi=Hn.delay?Ln(Hn.delay):0;oi.currentTimeline.delayNextStep(Oi),oi.currentTimeline.setStyles([En],null,oi.errors,Hn),Nn(this,ze,oi);const Qi=oi.timelines.filter(Wi=>Wi.containsAnimation());if(Qi.length&&Sn.size){let Wi;for(let is=Qi.length-1;is>=0;is--){const Ks=Qi[is];if(Ks.element===ve){Wi=Ks;break}}Wi&&!Wi.allowOnlyTimelineStyles()&&Wi.setStyles([Sn],null,oi.errors,Hn)}return Qi.length?Qi.map(Wi=>Wi.buildKeyframes()):[Rs(ve,[],[],[],0,Oi,"",!1)]}visitTrigger(ue,ve){}visitState(ue,ve){}visitTransition(ue,ve){}visitAnimateChild(ue,ve){const ze=ve.subInstructions.get(ve.element);if(ze){const at=ve.createSubContext(ue.options),kt=ve.currentTimeline.currentTime,En=this._visitSubInstructions(ze,at,at.options);kt!=En&&ve.transformIntoNewTimeline(En)}ve.previousNode=ue}visitAnimateRef(ue,ve){const ze=ve.createSubContext(ue.options);ze.transformIntoNewTimeline(),this._applyAnimationRefDelays([ue.options,ue.animation.options],ve,ze),this.visitReference(ue.animation,ze),ve.transformIntoNewTimeline(ze.currentTimeline.currentTime),ve.previousNode=ue}_applyAnimationRefDelays(ue,ve,ze){for(const kt of ue){const En=null==kt?void 0:kt.delay;if(En){var at;const Sn="number"==typeof En?En:Ln(oo(En,null!==(at=null==kt?void 0:kt.params)&&void 0!==at?at:{},ve.errors));ze.delayNextStep(Sn)}}}_visitSubInstructions(ue,ve,ze){let kt=ve.currentTimeline.currentTime;const En=null!=ze.duration?Ln(ze.duration):null,Sn=null!=ze.delay?Ln(ze.delay):null;return 0!==En&&ue.forEach(Hn=>{const or=ve.appendInstructionToTimeline(Hn,En,Sn);kt=Math.max(kt,or.duration+or.delay)}),kt}visitReference(ue,ve){ve.updateOptions(ue.options,!0),Nn(this,ue.animation,ve),ve.previousNode=ue}visitSequence(ue,ve){const ze=ve.subContextCount;let at=ve;const kt=ue.options;if(kt&&(kt.params||kt.delay)&&(at=ve.createSubContext(kt),at.transformIntoNewTimeline(),null!=kt.delay)){at.previousNode.type==_t.If.Style&&(at.currentTimeline.snapshotCurrentStyles(),at.previousNode=Da);const En=Ln(kt.delay);at.delayNextStep(En)}ue.steps.length&&(ue.steps.forEach(En=>Nn(this,En,at)),at.currentTimeline.applyStylesToKeyframe(),at.subContextCount>ze&&at.transformIntoNewTimeline()),ve.previousNode=ue}visitGroup(ue,ve){const ze=[];let at=ve.currentTimeline.currentTime;const kt=ue.options&&ue.options.delay?Ln(ue.options.delay):0;ue.steps.forEach(En=>{const Sn=ve.createSubContext(ue.options);kt&&Sn.delayNextStep(kt),Nn(this,En,Sn),at=Math.max(at,Sn.currentTimeline.currentTime),ze.push(Sn.currentTimeline)}),ze.forEach(En=>ve.currentTimeline.mergeTimelineCollectedStyles(En)),ve.transformIntoNewTimeline(at),ve.previousNode=ue}_visitTiming(ue,ve){if(ue.dynamic){const ze=ue.strValue;return qs(ve.params?oo(ze,ve.params,ve.errors):ze,ve.errors)}return{duration:ue.duration,delay:ue.delay,easing:ue.easing}}visitAnimate(ue,ve){const ze=ve.currentAnimateTimings=this._visitTiming(ue.timings,ve),at=ve.currentTimeline;ze.delay&&(ve.incrementTime(ze.delay),at.snapshotCurrentStyles());const kt=ue.style;kt.type==_t.If.Keyframes?this.visitKeyframes(kt,ve):(ve.incrementTime(ze.duration),this.visitStyle(kt,ve),at.applyStylesToKeyframe()),ve.currentAnimateTimings=null,ve.previousNode=ue}visitStyle(ue,ve){const ze=ve.currentTimeline,at=ve.currentAnimateTimings;!at&&ze.hasCurrentStyleProperties()&&ze.forwardFrame();const kt=at&&at.easing||ue.easing;ue.isEmptyStep?ze.applyEmptyStep(kt):ze.setStyles(ue.styles,kt,ve.errors,ve.options),ve.previousNode=ue}visitKeyframes(ue,ve){const ze=ve.currentAnimateTimings,at=ve.currentTimeline.duration,kt=ze.duration,Sn=ve.createSubContext().currentTimeline;Sn.easing=ze.easing,ue.styles.forEach(Hn=>{Sn.forwardTime((Hn.offset||0)*kt),Sn.setStyles(Hn.styles,Hn.easing,ve.errors,ve.options),Sn.applyStylesToKeyframe()}),ve.currentTimeline.mergeTimelineCollectedStyles(Sn),ve.transformIntoNewTimeline(at+kt),ve.previousNode=ue}visitQuery(ue,ve){const ze=ve.currentTimeline.currentTime,at=ue.options||{},kt=at.delay?Ln(at.delay):0;kt&&(ve.previousNode.type===_t.If.Style||0==ze&&ve.currentTimeline.hasCurrentStyleProperties())&&(ve.currentTimeline.snapshotCurrentStyles(),ve.previousNode=Da);let En=ze;const Sn=ve.invokeQuery(ue.selector,ue.originalSelector,ue.limit,ue.includeSelf,!!at.optional,ve.errors);ve.currentQueryTotal=Sn.length;let Hn=null;Sn.forEach((or,Xr)=>{ve.currentQueryIndex=Xr;const oi=ve.createSubContext(ue.options,or);kt&&oi.delayNextStep(kt),or===ve.element&&(Hn=oi.currentTimeline),Nn(this,ue.animation,oi),oi.currentTimeline.applyStylesToKeyframe(),En=Math.max(En,oi.currentTimeline.currentTime)}),ve.currentQueryIndex=0,ve.currentQueryTotal=0,ve.transformIntoNewTimeline(En),Hn&&(ve.currentTimeline.mergeTimelineCollectedStyles(Hn),ve.currentTimeline.snapshotCurrentStyles()),ve.previousNode=ue}visitStagger(ue,ve){const ze=ve.parentContext,at=ve.currentTimeline,kt=ue.timings,En=Math.abs(kt.duration),Sn=En*(ve.currentQueryTotal-1);let Hn=En*ve.currentQueryIndex;switch(kt.duration<0?"reverse":kt.easing){case"reverse":Hn=Sn-Hn;break;case"full":Hn=ze.currentStaggerTime}const Xr=ve.currentTimeline;Hn&&Xr.delayNextStep(Hn);const oi=Xr.currentTime;Nn(this,ue.animation,ve),ve.previousNode=ue,ze.currentStaggerTime=at.currentTime-oi+(at.startTime-ze.currentTimeline.startTime)}}const Da={};class Gl{constructor(ue,ve,ze,at,kt,En,Sn,Hn){this._driver=ue,this.element=ve,this.subInstructions=ze,this._enterClassName=at,this._leaveClassName=kt,this.errors=En,this.timelines=Sn,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Da,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Hn||new di(this._driver,ve,0),Sn.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(ue,ve){if(!ue)return;const ze=ue;let at=this.options;null!=ze.duration&&(at.duration=Ln(ze.duration)),null!=ze.delay&&(at.delay=Ln(ze.delay));const kt=ze.params;if(kt){let En=at.params;En||(En=this.options.params={}),Object.keys(kt).forEach(Sn=>{(!ve||!En.hasOwnProperty(Sn))&&(En[Sn]=oo(kt[Sn],En,this.errors))})}}_copyOptions(){const ue={};if(this.options){const ve=this.options.params;if(ve){const ze=ue.params={};Object.keys(ve).forEach(at=>{ze[at]=ve[at]})}}return ue}createSubContext(ue=null,ve,ze){const at=ve||this.element,kt=new Gl(this._driver,at,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(at,ze||0));return kt.previousNode=this.previousNode,kt.currentAnimateTimings=this.currentAnimateTimings,kt.options=this._copyOptions(),kt.updateOptions(ue),kt.currentQueryIndex=this.currentQueryIndex,kt.currentQueryTotal=this.currentQueryTotal,kt.parentContext=this,this.subContextCount++,kt}transformIntoNewTimeline(ue){return this.previousNode=Da,this.currentTimeline=this.currentTimeline.fork(this.element,ue),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(ue,ve,ze){const at={duration:null!=ve?ve:ue.duration,delay:this.currentTimeline.currentTime+(null!=ze?ze:0)+ue.delay,easing:""},kt=new tl(this._driver,ue.element,ue.keyframes,ue.preStyleProps,ue.postStyleProps,at,ue.stretchStartingKeyframe);return this.timelines.push(kt),at}incrementTime(ue){this.currentTimeline.forwardTime(this.currentTimeline.duration+ue)}delayNextStep(ue){ue>0&&this.currentTimeline.delayNextStep(ue)}invokeQuery(ue,ve,ze,at,kt,En){let Sn=[];if(at&&Sn.push(this.element),ue.length>0){ue=(ue=ue.replace(ks,"."+this._enterClassName)).replace(Mo,"."+this._leaveClassName);let or=this._driver.query(this.element,ue,1!=ze);0!==ze&&(or=ze<0?or.slice(or.length+ze,or.length):or.slice(0,ze)),Sn.push(...or)}return!kt&&0==Sn.length&&En.push(function Lr(ot){return new j.wOt(3014,!1)}()),Sn}}class di{constructor(ue,ve,ze,at){this._driver=ue,this.element=ve,this.startTime=ze,this._elementTimelineStylesLookup=at,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(ve),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(ve,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(ue){const ve=1===this._keyframes.size&&this._pendingStyles.size;this.duration||ve?(this.forwardTime(this.currentTime+ue),ve&&this.snapshotCurrentStyles()):this.startTime+=ue}fork(ue,ve){return this.applyStylesToKeyframe(),new di(this._driver,ue,ve||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(ue){this.applyStylesToKeyframe(),this.duration=ue,this._loadKeyframe()}_updateStyle(ue,ve){this._localTimelineStyles.set(ue,ve),this._globalTimelineStyles.set(ue,ve),this._styleSummary.set(ue,{time:this.currentTime,value:ve})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(ue){ue&&this._previousKeyframe.set("easing",ue);for(let[ve,ze]of this._globalTimelineStyles)this._backFill.set(ve,ze||_t.kp),this._currentKeyframe.set(ve,_t.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(ue,ve,ze,at){ve&&this._previousKeyframe.set("easing",ve);const kt=at&&at.params||{},En=function X(ot,ue){const ve=new Map;let ze;return ot.forEach(at=>{if("*"===at){var kt;null!==(kt=ze)&&void 0!==kt||(ze=ue.keys());for(let En of ze)ve.set(En,_t.kp)}else for(let[En,Sn]of at)ve.set(En,Sn)}),ve}(ue,this._globalTimelineStyles);for(let[Hn,or]of En){const Xr=oo(or,kt,ze);var Sn;this._pendingStyles.set(Hn,Xr),this._localTimelineStyles.has(Hn)||this._backFill.set(Hn,null!==(Sn=this._globalTimelineStyles.get(Hn))&&void 0!==Sn?Sn:_t.kp),this._updateStyle(Hn,Xr)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((ue,ve)=>{this._currentKeyframe.set(ve,ue)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((ue,ve)=>{this._currentKeyframe.has(ve)||this._currentKeyframe.set(ve,ue)}))}snapshotCurrentStyles(){for(let[ue,ve]of this._localTimelineStyles)this._pendingStyles.set(ue,ve),this._updateStyle(ue,ve)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const ue=[];for(let ve in this._currentKeyframe)ue.push(ve);return ue}mergeTimelineCollectedStyles(ue){ue._styleSummary.forEach((ve,ze)=>{const at=this._styleSummary.get(ze);(!at||ve.time>at.time)&&this._updateStyle(ze,ve.value)})}buildKeyframes(){this.applyStylesToKeyframe();const ue=new Set,ve=new Set,ze=1===this._keyframes.size&&0===this.duration;let at=[];this._keyframes.forEach((Sn,Hn)=>{const or=new Map([...this._backFill,...Sn]);or.forEach((Xr,oi)=>{Xr===_t.FX?ue.add(oi):Xr===_t.kp&&ve.add(oi)}),ze||or.set("offset",Hn/this.duration),at.push(or)});const kt=[...ue.values()],En=[...ve.values()];if(ze){const Sn=at[0],Hn=new Map(Sn);Sn.set("offset",0),Hn.set("offset",1),at=[Sn,Hn]}return Rs(this.element,at,kt,En,this.duration,this.startTime,this.easing,!1)}}class tl extends di{constructor(ue,ve,ze,at,kt,En,Sn=!1){super(ue,ve,En.delay),this.keyframes=ze,this.preStyleProps=at,this.postStyleProps=kt,this._stretchStartingKeyframe=Sn,this.timings={duration:En.duration,delay:En.delay,easing:En.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let ue=this.keyframes,{delay:ve,duration:ze,easing:at}=this.timings;if(this._stretchStartingKeyframe&&ve){const kt=[],En=ze+ve,Sn=ve/En,Hn=new Map(ue[0]);Hn.set("offset",0),kt.push(Hn);const or=new Map(ue[0]);or.set("offset",R(Sn)),kt.push(or);const Xr=ue.length-1;for(let oi=1;oi<=Xr;oi++){let Oi=new Map(ue[oi]);const Qi=Oi.get("offset");Oi.set("offset",R((ve+Qi*ze)/En)),kt.push(Oi)}ze=En,ve=0,at="",ue=kt}return Rs(this.element,ue,this.preStyleProps,this.postStyleProps,ze,ve,at,!0)}}function R(ot,ue=3){const ve=Math.pow(10,ue-1);return Math.round(ot*ve)/ve}function se(ot,ue,ve,ze,at,kt,En,Sn,Hn,or,Xr,oi,Oi){return{type:0,element:ot,triggerName:ue,isRemovalTransition:at,fromState:ve,fromStyles:kt,toState:ze,toStyles:En,timelines:Sn,queriedElements:Hn,preStyleProps:or,postStyleProps:Xr,totalTime:oi,errors:Oi}}const he={};class De{constructor(ue,ve,ze){this._triggerName=ue,this.ast=ve,this._stateStyles=ze}match(ue,ve,ze,at){return function nt(ot,ue,ve,ze,at){return ot.some(kt=>kt(ue,ve,ze,at))}(this.ast.matchers,ue,ve,ze,at)}buildStyles(ue,ve,ze){let at=this._stateStyles.get("*");return void 0!==ue&&(at=this._stateStyles.get(null==ue?void 0:ue.toString())||at),at?at.buildStyles(ve,ze):new Map}build(ue,ve,ze,at,kt,En,Sn,Hn,or,Xr){var oi;const Oi=[],Qi=this.ast.options&&this.ast.options.params||he,is=this.buildStyles(ze,Sn&&Sn.params||he,Oi),Ks=Hn&&Hn.params||he,Go=this.buildStyles(at,Ks,Oi),us=new Set,po=new Map,ia=new Map,ll="void"===at,sa={params:Mt(Ks,Qi),delay:null===(oi=this.ast.options)||void 0===oi?void 0:oi.delay},fa=Xr?[]:gl(ue,ve,this.ast.animation,kt,En,is,Go,sa,or,Oi);let cl=0;return fa.forEach(ul=>{cl=Math.max(ul.duration+ul.delay,cl)}),Oi.length?se(ve,this._triggerName,ze,at,ll,is,Go,[],[],po,ia,cl,Oi):(fa.forEach(ul=>{const zo=ul.element,Li=Ar(po,zo,new Set);ul.preStyleProps.forEach(Yo=>Li.add(Yo));const Al=Ar(ia,zo,new Set);ul.postStyleProps.forEach(Yo=>Al.add(Yo)),zo!==ve&&us.add(zo)}),se(ve,this._triggerName,ze,at,ll,is,Go,fa,[...us.values()],po,ia,cl))}}function Mt(ot,ue){const ve={...ue};return Object.entries(ot).forEach(([ze,at])=>{null!=at&&(ve[ze]=at)}),ve}class Qt{constructor(ue,ve,ze){this.styles=ue,this.defaultParams=ve,this.normalizer=ze}buildStyles(ue,ve){const ze=new Map,at=Mt(ue,this.defaultParams);return this.styles.styles.forEach(kt=>{"string"!=typeof kt&&kt.forEach((En,Sn)=>{En&&(En=oo(En,at,ve));const Hn=this.normalizer.normalizePropertyName(Sn,ve);En=this.normalizer.normalizeStyleValue(Sn,Hn,En,ve),ze.set(Sn,En)})}),ze}}class Mn{constructor(ue,ve,ze){this.name=ue,this.ast=ve,this._normalizer=ze,this.transitionFactories=[],this.states=new Map,ve.states.forEach(at=>{this.states.set(at.name,new Qt(at.style,at.options&&at.options.params||{},ze))}),xe(this.states,"true","1"),xe(this.states,"false","0"),ve.transitions.forEach(at=>{this.transitionFactories.push(new De(ue,at,this.states))}),this.fallbackTransition=function Ne(ot,ue,ve){return new De(ot,{type:_t.If.Transition,animation:{type:_t.If.Sequence,steps:[],options:null},matchers:[(En,Sn)=>!0],options:null,queryCount:0,depCount:0},ue)}(ue,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(ue,ve,ze,at){return this.transitionFactories.find(En=>En.match(ue,ve,ze,at))||null}matchStyles(ue,ve,ze){return this.fallbackTransition.buildStyles(ue,ve,ze)}}function xe(ot,ue,ve){ot.has(ue)?ot.has(ve)||ot.set(ve,ot.get(ue)):ot.has(ve)&&ot.set(ue,ot.get(ve))}const Fe=new ho;class Oe{constructor(ue,ve,ze){this.bodyNode=ue,this._driver=ve,this._normalizer=ze,this._animations=new Map,this._playersById=new Map,this.players=[]}register(ue,ve){const ze=[],kt=El(this._driver,ve,ze,[]);if(ze.length)throw function L(ot){return new j.wOt(3503,!1)}();this._animations.set(ue,kt)}_buildPlayer(ue,ve,ze){const at=ue.element,kt=Dt(this._normalizer,ue.keyframes,ve,ze);return this._driver.animate(at,kt,ue.duration,ue.delay,ue.easing,[],!0)}create(ue,ve,ze={}){const at=[],kt=this._animations.get(ue);let En;const Sn=new Map;if(kt?(En=gl(this._driver,ve,kt,Va,ke,new Map,new Map,ze,Fe,at),En.forEach(Xr=>{const oi=Ar(Sn,Xr.element,new Map);Xr.postStyleProps.forEach(Oi=>oi.set(Oi,null))})):(at.push(function ie(){return new j.wOt(3300,!1)}()),En=[]),at.length)throw function H(ot){return new j.wOt(3504,!1)}();Sn.forEach((Xr,oi)=>{Xr.forEach((Oi,Qi)=>{Xr.set(Qi,this._driver.computeStyle(oi,Qi,_t.kp))})});const or=tt(En.map(Xr=>{const oi=Sn.get(Xr.element);return this._buildPlayer(Xr,new Map,oi)}));return this._playersById.set(ue,or),or.onDestroy(()=>this.destroy(ue)),this.players.push(or),or}destroy(ue){const ve=this._getPlayer(ue);ve.destroy(),this._playersById.delete(ue);const ze=this.players.indexOf(ve);ze>=0&&this.players.splice(ze,1)}_getPlayer(ue){const ve=this._playersById.get(ue);if(!ve)throw function de(ot){return new j.wOt(3301,!1)}();return ve}listen(ue,ve,ze,at){const kt=lr(ve,"","","");return Zt(this._getPlayer(ue),ze,kt,at),()=>{}}command(ue,ve,ze,at){if("register"==ze)return void this.register(ue,at[0]);if("create"==ze)return void this.create(ue,ve,at[0]||{});const kt=this._getPlayer(ue);switch(ze){case"play":kt.play();break;case"pause":kt.pause();break;case"reset":kt.reset();break;case"restart":kt.restart();break;case"finish":kt.finish();break;case"init":kt.init();break;case"setPosition":kt.setPosition(parseFloat(at[0]));break;case"destroy":this.destroy(ue)}}}const dt="ng-animate-queued",Dn="ng-animate-disabled",xi=[],vi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ji={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},cs="__ng_removed";class yo{get params(){return this.options.params}constructor(ue,ve=""){this.namespaceId=ve;const ze=ue&&ue.hasOwnProperty("value");if(this.value=function ui(ot){return null!=ot?ot:null}(ze?ue.value:ue),ze){const{value:kt,...En}=ue;this.options=En}else this.options={};this.options.params||(this.options.params={})}absorbOptions(ue){const ve=ue.params;if(ve){const ze=this.options.params;Object.keys(ve).forEach(at=>{null==ze[at]&&(ze[at]=ve[at])})}}}const vo="void",Po=new yo(vo);class Ao{constructor(ue,ve,ze){this.id=ue,this.hostElement=ve,this._engine=ze,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+ue,pr(ve,this._hostClassName)}listen(ue,ve,ze,at){if(!this._triggers.has(ve))throw function Be(ot,ue){return new j.wOt(3302,!1)}();if(null==ze||0==ze.length)throw function Xe(ot){return new j.wOt(3303,!1)}();if(!function fo(ot){return"start"==ot||"done"==ot}(ze))throw function wt(ot,ue){return new j.wOt(3400,!1)}();const kt=Ar(this._elementListeners,ue,[]),En={name:ve,phase:ze,callback:at};kt.push(En);const Sn=Ar(this._engine.statesByElement,ue,new Map);return Sn.has(ve)||(pr(ue,mt),pr(ue,mt+"-"+ve),Sn.set(ve,Po)),()=>{this._engine.afterFlush(()=>{const Hn=kt.indexOf(En);Hn>=0&&kt.splice(Hn,1),this._triggers.has(ve)||Sn.delete(ve)})}}register(ue,ve){return!this._triggers.has(ue)&&(this._triggers.set(ue,ve),!0)}_getTrigger(ue){const ve=this._triggers.get(ue);if(!ve)throw function Nt(ot){return new j.wOt(3401,!1)}();return ve}trigger(ue,ve,ze,at=!0){const kt=this._getTrigger(ve),En=new Bs(this.id,ve,ue);let Sn=this._engine.statesByElement.get(ue);Sn||(pr(ue,mt),pr(ue,mt+"-"+ve),this._engine.statesByElement.set(ue,Sn=new Map));let Hn=Sn.get(ve);const or=new yo(ze,this.id);if(!(ze&&ze.hasOwnProperty("value"))&&Hn&&or.absorbOptions(Hn.options),Sn.set(ve,or),Hn||(Hn=Po),or.value!==vo&&Hn.value===or.value){if(!function zl(ot,ue){const ve=Object.keys(ot),ze=Object.keys(ue);if(ve.length!=ze.length)return!1;for(let at=0;at<ve.length;at++){const kt=ve[at];if(!ue.hasOwnProperty(kt)||ot[kt]!==ue[kt])return!1}return!0}(Hn.params,or.params)){const is=[],Ks=kt.matchStyles(Hn.value,Hn.params,is),Go=kt.matchStyles(or.value,or.params,is);is.length?this._engine.reportError(is):this._engine.afterFlush(()=>{ka(ue,Ks),Ko(ue,Go)})}return}const Oi=Ar(this._engine.playersByElement,ue,[]);Oi.forEach(is=>{is.namespaceId==this.id&&is.triggerName==ve&&is.queued&&is.destroy()});let Qi=kt.matchTransition(Hn.value,or.value,ue,or.params),Wi=!1;if(!Qi){if(!at)return;Qi=kt.fallbackTransition,Wi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:ue,triggerName:ve,transition:Qi,fromState:Hn,toState:or,player:En,isFallbackTransition:Wi}),Wi||(pr(ue,dt),En.onStart(()=>{Yi(ue,dt)})),En.onDone(()=>{let is=this.players.indexOf(En);is>=0&&this.players.splice(is,1);const Ks=this._engine.playersByElement.get(ue);if(Ks){let Go=Ks.indexOf(En);Go>=0&&Ks.splice(Go,1)}}),this.players.push(En),Oi.push(En),En}deregister(ue){this._triggers.delete(ue),this._engine.statesByElement.forEach(ve=>ve.delete(ue)),this._elementListeners.forEach((ve,ze)=>{this._elementListeners.set(ze,ve.filter(at=>at.name!=ue))})}clearElementCache(ue){this._engine.statesByElement.delete(ue),this._elementListeners.delete(ue);const ve=this._engine.playersByElement.get(ue);ve&&(ve.forEach(ze=>ze.destroy()),this._engine.playersByElement.delete(ue))}_signalRemovalForInnerTriggers(ue,ve){const ze=this._engine.driver.query(ue,Vt,!0);ze.forEach(at=>{if(at[cs])return;const kt=this._engine.fetchNamespacesByElement(at);kt.size?kt.forEach(En=>En.triggerLeaveAnimation(at,ve,!1,!0)):this.clearElementCache(at)}),this._engine.afterFlushAnimationsDone(()=>ze.forEach(at=>this.clearElementCache(at)))}triggerLeaveAnimation(ue,ve,ze,at){const kt=this._engine.statesByElement.get(ue),En=new Map;if(kt){const Sn=[];if(kt.forEach((Hn,or)=>{if(En.set(or,Hn.value),this._triggers.has(or)){const Xr=this.trigger(ue,or,vo,at);Xr&&Sn.push(Xr)}}),Sn.length)return this._engine.markElementAsRemoved(this.id,ue,!0,ve,En),ze&&tt(Sn).onDone(()=>this._engine.processLeaveNode(ue)),!0}return!1}prepareLeaveAnimationListeners(ue){const ve=this._elementListeners.get(ue),ze=this._engine.statesByElement.get(ue);if(ve&&ze){const at=new Set;ve.forEach(kt=>{const En=kt.name;if(at.has(En))return;at.add(En);const Hn=this._triggers.get(En).fallbackTransition,or=ze.get(En)||Po,Xr=new yo(vo),oi=new Bs(this.id,En,ue);this._engine.totalQueuedPlayers++,this._queue.push({element:ue,triggerName:En,transition:Hn,fromState:or,toState:Xr,player:oi,isFallbackTransition:!0})})}}removeNode(ue,ve){const ze=this._engine;if(ue.childElementCount&&this._signalRemovalForInnerTriggers(ue,ve),this.triggerLeaveAnimation(ue,ve,!0))return;let at=!1;if(ze.totalAnimations){const kt=ze.players.length?ze.playersByQueriedElement.get(ue):[];if(kt&&kt.length)at=!0;else{let En=ue;for(;En=En.parentNode;)if(ze.statesByElement.get(En)){at=!0;break}}}if(this.prepareLeaveAnimationListeners(ue),at)ze.markElementAsRemoved(this.id,ue,!1,ve);else{const kt=ue[cs];(!kt||kt===vi)&&(ze.afterFlush(()=>this.clearElementCache(ue)),ze.destroyInnerAnimations(ue),ze._onRemovalComplete(ue,ve))}}insertNode(ue,ve){pr(ue,this._hostClassName)}drainQueuedTransitions(ue){const ve=[];return this._queue.forEach(ze=>{const at=ze.player;if(at.destroyed)return;const kt=ze.element,En=this._elementListeners.get(kt);En&&En.forEach(Sn=>{if(Sn.name==ze.triggerName){const Hn=lr(kt,ze.triggerName,ze.fromState.value,ze.toState.value);Hn._data=ue,Zt(ze.player,Sn.phase,Hn,Sn.callback)}}),at.markedForDestroy?this._engine.afterFlush(()=>{at.destroy()}):ve.push(ze)}),this._queue=[],ve.sort((ze,at)=>{const kt=ze.transition.ast.depCount,En=at.transition.ast.depCount;return 0==kt||0==En?kt-En:this._engine.driver.containsElement(ze.element,at.element)?1:-1})}destroy(ue){this.players.forEach(ve=>ve.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,ue)}}class ra{_onRemovalComplete(ue,ve){this.onRemovalComplete(ue,ve)}constructor(ue,ve,ze){this.bodyNode=ue,this.driver=ve,this._normalizer=ze,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(at,kt)=>{}}get queuedPlayers(){const ue=[];return this._namespaceList.forEach(ve=>{ve.players.forEach(ze=>{ze.queued&&ue.push(ze)})}),ue}createNamespace(ue,ve){const ze=new Ao(ue,ve,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,ve)?this._balanceNamespaceList(ze,ve):(this.newHostElements.set(ve,ze),this.collectEnterElement(ve)),this._namespaceLookup[ue]=ze}_balanceNamespaceList(ue,ve){const ze=this._namespaceList,at=this.namespacesByHostElement;if(ze.length-1>=0){let En=!1,Sn=this.driver.getParentElement(ve);for(;Sn;){const Hn=at.get(Sn);if(Hn){const or=ze.indexOf(Hn);ze.splice(or+1,0,ue),En=!0;break}Sn=this.driver.getParentElement(Sn)}En||ze.unshift(ue)}else ze.push(ue);return at.set(ve,ue),ue}register(ue,ve){let ze=this._namespaceLookup[ue];return ze||(ze=this.createNamespace(ue,ve)),ze}registerTrigger(ue,ve,ze){let at=this._namespaceLookup[ue];at&&at.register(ve,ze)&&this.totalAnimations++}destroy(ue,ve){ue&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const ze=this._fetchNamespace(ue);this.namespacesByHostElement.delete(ze.hostElement);const at=this._namespaceList.indexOf(ze);at>=0&&this._namespaceList.splice(at,1),ze.destroy(ve),delete this._namespaceLookup[ue]}))}_fetchNamespace(ue){return this._namespaceLookup[ue]}fetchNamespacesByElement(ue){const ve=new Set,ze=this.statesByElement.get(ue);if(ze)for(let at of ze.values())if(at.namespaceId){const kt=this._fetchNamespace(at.namespaceId);kt&&ve.add(kt)}return ve}trigger(ue,ve,ze,at){if(eo(ve)){const kt=this._fetchNamespace(ue);if(kt)return kt.trigger(ve,ze,at),!0}return!1}insertNode(ue,ve,ze,at){if(!eo(ve))return;const kt=ve[cs];if(kt&&kt.setForRemoval){kt.setForRemoval=!1,kt.setForMove=!0;const En=this.collectedLeaveElements.indexOf(ve);En>=0&&this.collectedLeaveElements.splice(En,1)}if(ue){const En=this._fetchNamespace(ue);En&&En.insertNode(ve,ze)}at&&this.collectEnterElement(ve)}collectEnterElement(ue){this.collectedEnterElements.push(ue)}markElementAsDisabled(ue,ve){ve?this.disabledNodes.has(ue)||(this.disabledNodes.add(ue),pr(ue,Dn)):this.disabledNodes.has(ue)&&(this.disabledNodes.delete(ue),Yi(ue,Dn))}removeNode(ue,ve,ze){if(eo(ve)){const at=ue?this._fetchNamespace(ue):null;at?at.removeNode(ve,ze):this.markElementAsRemoved(ue,ve,!1,ze);const kt=this.namespacesByHostElement.get(ve);kt&&kt.id!==ue&&kt.removeNode(ve,ze)}else this._onRemovalComplete(ve,ze)}markElementAsRemoved(ue,ve,ze,at,kt){this.collectedLeaveElements.push(ve),ve[cs]={namespaceId:ue,setForRemoval:at,hasAnimation:ze,removedBeforeQueried:!1,previousTriggersValues:kt}}listen(ue,ve,ze,at,kt){return eo(ve)?this._fetchNamespace(ue).listen(ve,ze,at,kt):()=>{}}_buildInstruction(ue,ve,ze,at,kt){return ue.transition.build(this.driver,ue.element,ue.fromState.value,ue.toState.value,ze,at,ue.fromState.options,ue.toState.options,ve,kt)}destroyInnerAnimations(ue){let ve=this.driver.query(ue,Vt,!0);ve.forEach(ze=>this.destroyActiveAnimationsForElement(ze)),0!=this.playersByQueriedElement.size&&(ve=this.driver.query(ue,Wt,!0),ve.forEach(ze=>this.finishActiveQueriedAnimationOnElement(ze)))}destroyActiveAnimationsForElement(ue){const ve=this.playersByElement.get(ue);ve&&ve.forEach(ze=>{ze.queued?ze.markedForDestroy=!0:ze.destroy()})}finishActiveQueriedAnimationOnElement(ue){const ve=this.playersByQueriedElement.get(ue);ve&&ve.forEach(ze=>ze.finish())}whenRenderingDone(){return new Promise(ue=>{if(this.players.length)return tt(this.players).onDone(()=>ue());ue()})}processLeaveNode(ue){var ve;const ze=ue[cs];if(ze&&ze.setForRemoval){if(ue[cs]=vi,ze.namespaceId){this.destroyInnerAnimations(ue);const at=this._fetchNamespace(ze.namespaceId);at&&at.clearElementCache(ue)}this._onRemovalComplete(ue,ze.setForRemoval)}null!==(ve=ue.classList)&&void 0!==ve&&ve.contains(Dn)&&this.markElementAsDisabled(ue,!1),this.driver.query(ue,".ng-animate-disabled",!0).forEach(at=>{this.markElementAsDisabled(at,!1)})}flush(ue=-1){let ve=[];if(this.newHostElements.size&&(this.newHostElements.forEach((ze,at)=>this._balanceNamespaceList(ze,at)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let ze=0;ze<this.collectedEnterElements.length;ze++)pr(this.collectedEnterElements[ze],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const ze=[];try{ve=this._flushAnimations(ze,ue)}finally{for(let at=0;at<ze.length;at++)ze[at]()}}else for(let ze=0;ze<this.collectedLeaveElements.length;ze++)this.processLeaveNode(this.collectedLeaveElements[ze]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(ze=>ze()),this._flushFns=[],this._whenQuietFns.length){const ze=this._whenQuietFns;this._whenQuietFns=[],ve.length?tt(ve).onDone(()=>{ze.forEach(at=>at())}):ze.forEach(at=>at())}}reportError(ue){throw function rn(ot){return new j.wOt(3402,!1)}()}_flushAnimations(ue,ve){const ze=new ho,at=[],kt=new Map,En=[],Sn=new Map,Hn=new Map,or=new Map,Xr=new Set;this.disabledNodes.forEach(li=>{Xr.add(li);const ei=this.driver.query(li,".ng-animate-queued",!0);for(let pi=0;pi<ei.length;pi++)Xr.add(ei[pi])});const oi=this.bodyNode,Oi=Array.from(this.statesByElement.keys()),Qi=Fo(Oi,this.collectedEnterElements),Wi=new Map;let is=0;Qi.forEach((li,ei)=>{const pi=Va+is++;Wi.set(ei,pi),li.forEach(Ss=>pr(Ss,pi))});const Ks=[],Go=new Set,us=new Set;for(let li=0;li<this.collectedLeaveElements.length;li++){const ei=this.collectedLeaveElements[li],pi=ei[cs];pi&&pi.setForRemoval&&(Ks.push(ei),Go.add(ei),pi.hasAnimation?this.driver.query(ei,".ng-star-inserted",!0).forEach(Ss=>Go.add(Ss)):us.add(ei))}const po=new Map,ia=Fo(Oi,Array.from(Go));ia.forEach((li,ei)=>{const pi=ke+is++;po.set(ei,pi),li.forEach(Ss=>pr(Ss,pi))}),ue.push(()=>{Qi.forEach((li,ei)=>{const pi=Wi.get(ei);li.forEach(Ss=>Yi(Ss,pi))}),ia.forEach((li,ei)=>{const pi=po.get(ei);li.forEach(Ss=>Yi(Ss,pi))}),Ks.forEach(li=>{this.processLeaveNode(li)})});const ll=[],sa=[];for(let li=this._namespaceList.length-1;li>=0;li--)this._namespaceList[li].drainQueuedTransitions(ve).forEach(pi=>{const Ss=pi.player,Oo=pi.element;if(ll.push(Ss),this.collectedEnterElements.length){const oa=Oo[cs];if(oa&&oa.setForMove){if(oa.previousTriggersValues&&oa.previousTriggersValues.has(pi.triggerName)){const Dl=oa.previousTriggersValues.get(pi.triggerName),Ra=this.statesByElement.get(pi.element);if(Ra&&Ra.has(pi.triggerName)){const lu=Ra.get(pi.triggerName);lu.value=Dl,Ra.set(pi.triggerName,lu)}}return void Ss.destroy()}}const $o=!oi||!this.driver.containsElement(oi,Oo),_a=po.get(Oo),nl=Wi.get(Oo),ao=this._buildInstruction(pi,ze,nl,_a,$o);if(ao.errors&&ao.errors.length)return void sa.push(ao);if($o)return Ss.onStart(()=>ka(Oo,ao.fromStyles)),Ss.onDestroy(()=>Ko(Oo,ao.toStyles)),void at.push(Ss);if(pi.isFallbackTransition)return Ss.onStart(()=>ka(Oo,ao.fromStyles)),Ss.onDestroy(()=>Ko(Oo,ao.toStyles)),void at.push(Ss);const Uc=[];ao.timelines.forEach(oa=>{oa.stretchStartingKeyframe=!0,this.disabledNodes.has(oa.element)||Uc.push(oa)}),ao.timelines=Uc,ze.append(Oo,ao.timelines),En.push({instruction:ao,player:Ss,element:Oo}),ao.queriedElements.forEach(oa=>Ar(Sn,oa,[]).push(Ss)),ao.preStyleProps.forEach((oa,Dl)=>{if(oa.size){let Ra=Hn.get(Dl);Ra||Hn.set(Dl,Ra=new Set),oa.forEach((lu,cu)=>Ra.add(cu))}}),ao.postStyleProps.forEach((oa,Dl)=>{let Ra=or.get(Dl);Ra||or.set(Dl,Ra=new Set),oa.forEach((lu,cu)=>Ra.add(cu))})});if(sa.length){const li=[];sa.forEach(ei=>{li.push(function He(ot,ue){return new j.wOt(3505,!1)}())}),ll.forEach(ei=>ei.destroy()),this.reportError(li)}const fa=new Map,cl=new Map;En.forEach(li=>{const ei=li.element;ze.has(ei)&&(cl.set(ei,ei),this._beforeAnimationBuild(li.player.namespaceId,li.instruction,fa))}),at.forEach(li=>{const ei=li.element;this._getPreviousPlayers(ei,!1,li.namespaceId,li.triggerName,null).forEach(Ss=>{Ar(fa,ei,[]).push(Ss),Ss.destroy()})});const ul=Ks.filter(li=>yl(li,Hn,or)),zo=new Map;_i(zo,this.driver,us,or,_t.kp).forEach(li=>{yl(li,Hn,or)&&ul.push(li)});const Al=new Map;Qi.forEach((li,ei)=>{_i(Al,this.driver,new Set(li),Hn,_t.FX)}),ul.forEach(li=>{var ei,pi;const Ss=zo.get(li),Oo=Al.get(li);zo.set(li,new Map([...null!==(ei=null==Ss?void 0:Ss.entries())&&void 0!==ei?ei:[],...null!==(pi=null==Oo?void 0:Oo.entries())&&void 0!==pi?pi:[]]))});const Yo=[],Gf=[],Ou={};En.forEach(li=>{const{element:ei,player:pi,instruction:Ss}=li;if(ze.has(ei)){if(Xr.has(ei))return pi.onDestroy(()=>Ko(ei,Ss.toStyles)),pi.disabled=!0,pi.overrideTotalTime(Ss.totalTime),void at.push(pi);let Oo=Ou;if(cl.size>1){let _a=ei;const nl=[];for(;_a=_a.parentNode;){const ao=cl.get(_a);if(ao){Oo=ao;break}nl.push(_a)}nl.forEach(ao=>cl.set(ao,Oo))}const $o=this._buildAnimation(pi.namespaceId,Ss,fa,kt,Al,zo);if(pi.setRealPlayer($o),Oo===Ou)Yo.push(pi);else{const _a=this.playersByElement.get(Oo);_a&&_a.length&&(pi.parentPlayer=tt(_a)),at.push(pi)}}else ka(ei,Ss.fromStyles),pi.onDestroy(()=>Ko(ei,Ss.toStyles)),Gf.push(pi),Xr.has(ei)&&at.push(pi)}),Gf.forEach(li=>{const ei=kt.get(li.element);if(ei&&ei.length){const pi=tt(ei);li.setRealPlayer(pi)}}),at.forEach(li=>{li.parentPlayer?li.syncPlayerEvents(li.parentPlayer):li.destroy()});for(let li=0;li<Ks.length;li++){const ei=Ks[li],pi=ei[cs];if(Yi(ei,ke),pi&&pi.hasAnimation)continue;let Ss=[];if(Sn.size){let $o=Sn.get(ei);$o&&$o.length&&Ss.push(...$o);let _a=this.driver.query(ei,Wt,!0);for(let nl=0;nl<_a.length;nl++){let ao=Sn.get(_a[nl]);ao&&ao.length&&Ss.push(...ao)}}const Oo=Ss.filter($o=>!$o.destroyed);Oo.length?jc(this,ei,Oo):this.processLeaveNode(ei)}return Ks.length=0,Yo.forEach(li=>{this.players.push(li),li.onDone(()=>{li.destroy();const ei=this.players.indexOf(li);this.players.splice(ei,1)}),li.play()}),Yo}afterFlush(ue){this._flushFns.push(ue)}afterFlushAnimationsDone(ue){this._whenQuietFns.push(ue)}_getPreviousPlayers(ue,ve,ze,at,kt){let En=[];if(ve){const Sn=this.playersByQueriedElement.get(ue);Sn&&(En=Sn)}else{const Sn=this.playersByElement.get(ue);if(Sn){const Hn=!kt||kt==vo;Sn.forEach(or=>{or.queued||!Hn&&or.triggerName!=at||En.push(or)})}}return(ze||at)&&(En=En.filter(Sn=>!(ze&&ze!=Sn.namespaceId||at&&at!=Sn.triggerName))),En}_beforeAnimationBuild(ue,ve,ze){const kt=ve.element,En=ve.isRemovalTransition?void 0:ue,Sn=ve.isRemovalTransition?void 0:ve.triggerName;for(const Hn of ve.timelines){const or=Hn.element,Xr=or!==kt,oi=Ar(ze,or,[]);this._getPreviousPlayers(or,Xr,En,Sn,ve.toState).forEach(Qi=>{const Wi=Qi.getRealPlayer();Wi.beforeDestroy&&Wi.beforeDestroy(),Qi.destroy(),oi.push(Qi)})}ka(kt,ve.fromStyles)}_buildAnimation(ue,ve,ze,at,kt,En){const Sn=ve.triggerName,Hn=ve.element,or=[],Xr=new Set,oi=new Set,Oi=ve.timelines.map(Wi=>{const is=Wi.element;Xr.add(is);const Ks=is[cs];if(Ks&&Ks.removedBeforeQueried)return new _t.sf(Wi.duration,Wi.delay);const Go=is!==Hn,us=function Od(ot){const ue=[];return nd(ot,ue),ue}((ze.get(is)||xi).map(fa=>fa.getRealPlayer())).filter(fa=>!!fa.element&&fa.element===is),po=kt.get(is),ia=En.get(is),ll=Dt(this._normalizer,Wi.keyframes,po,ia),sa=this._buildPlayer(Wi,ll,us);if(Wi.subTimeline&&at&&oi.add(is),Go){const fa=new Bs(ue,Sn,is);fa.setRealPlayer(sa),or.push(fa)}return sa});or.forEach(Wi=>{Ar(this.playersByQueriedElement,Wi.element,[]).push(Wi),Wi.onDone(()=>function Qs(ot,ue,ve){let ze=ot.get(ue);if(ze){if(ze.length){const at=ze.indexOf(ve);ze.splice(at,1)}0==ze.length&&ot.delete(ue)}return ze}(this.playersByQueriedElement,Wi.element,Wi))}),Xr.forEach(Wi=>pr(Wi,We));const Qi=tt(Oi);return Qi.onDestroy(()=>{Xr.forEach(Wi=>Yi(Wi,We)),Ko(Hn,ve.toStyles)}),oi.forEach(Wi=>{Ar(at,Wi,[]).push(Qi)}),Qi}_buildPlayer(ue,ve,ze){return ve.length>0?this.driver.animate(ue.element,ve,ue.duration,ue.delay,ue.easing,ze):new _t.sf(ue.duration,ue.delay)}}class Bs{constructor(ue,ve,ze){this.namespaceId=ue,this.triggerName=ve,this.element=ze,this._player=new _t.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(ue){this._containsRealPlayer||(this._player=ue,this._queuedCallbacks.forEach((ve,ze)=>{ve.forEach(at=>Zt(ue,ze,void 0,at))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(ue.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(ue){this.totalTime=ue}syncPlayerEvents(ue){const ve=this._player;ve.triggerCallback&&ue.onStart(()=>ve.triggerCallback("start")),ue.onDone(()=>this.finish()),ue.onDestroy(()=>this.destroy())}_queueEvent(ue,ve){Ar(this._queuedCallbacks,ue,[]).push(ve)}onDone(ue){this.queued&&this._queueEvent("done",ue),this._player.onDone(ue)}onStart(ue){this.queued&&this._queueEvent("start",ue),this._player.onStart(ue)}onDestroy(ue){this.queued&&this._queueEvent("destroy",ue),this._player.onDestroy(ue)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(ue){this.queued||this._player.setPosition(ue)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(ue){const ve=this._player;ve.triggerCallback&&ve.triggerCallback(ue)}}function eo(ot){return ot&&1===ot.nodeType}function Ns(ot,ue){const ve=ot.style.display;return ot.style.display=null!=ue?ue:"none",ve}function _i(ot,ue,ve,ze,at){const kt=[];ve.forEach(Hn=>kt.push(Ns(Hn)));const En=[];ze.forEach((Hn,or)=>{const Xr=new Map;Hn.forEach(oi=>{const Oi=ue.computeStyle(or,oi,at);Xr.set(oi,Oi),(!Oi||0==Oi.length)&&(or[cs]=Ji,En.push(or))}),ot.set(or,Xr)});let Sn=0;return ve.forEach(Hn=>Ns(Hn,kt[Sn++])),En}function Fo(ot,ue){const ve=new Map;if(ot.forEach(Sn=>ve.set(Sn,[])),0==ue.length)return ve;const at=new Set(ue),kt=new Map;function En(Sn){if(!Sn)return 1;let Hn=kt.get(Sn);if(Hn)return Hn;const or=Sn.parentNode;return Hn=ve.has(or)?or:at.has(or)?1:En(or),kt.set(Sn,Hn),Hn}return ue.forEach(Sn=>{const Hn=En(Sn);1!==Hn&&ve.get(Hn).push(Sn)}),ve}function pr(ot,ue){var ve;null===(ve=ot.classList)||void 0===ve||ve.add(ue)}function Yi(ot,ue){var ve;null===(ve=ot.classList)||void 0===ve||ve.remove(ue)}function jc(ot,ue,ve){tt(ve).onDone(()=>ot.processLeaveNode(ue))}function nd(ot,ue){for(let ve=0;ve<ot.length;ve++){const ze=ot[ve];ze instanceof _t.ui?nd(ze.players,ue):ue.push(ze)}}function yl(ot,ue,ve){const ze=ve.get(ot);if(!ze)return!1;let at=ue.get(ot);return at?ze.forEach(kt=>at.add(kt)):ue.set(ot,ze),ve.delete(ot),!0}class cc{constructor(ue,ve,ze){this._driver=ve,this._normalizer=ze,this._triggerCache={},this.onRemovalComplete=(at,kt)=>{},this._transitionEngine=new ra(ue.body,ve,ze),this._timelineEngine=new Oe(ue.body,ve,ze),this._transitionEngine.onRemovalComplete=(at,kt)=>this.onRemovalComplete(at,kt)}registerTrigger(ue,ve,ze,at,kt){const En=ue+"-"+at;let Sn=this._triggerCache[En];if(!Sn){const Hn=[],Xr=El(this._driver,kt,Hn,[]);if(Hn.length)throw function N(ot,ue){return new j.wOt(3404,!1)}();Sn=function Jt(ot,ue,ve){return new Mn(ot,ue,ve)}(at,Xr,this._normalizer),this._triggerCache[En]=Sn}this._transitionEngine.registerTrigger(ve,at,Sn)}register(ue,ve){this._transitionEngine.register(ue,ve)}destroy(ue,ve){this._transitionEngine.destroy(ue,ve)}onInsert(ue,ve,ze,at){this._transitionEngine.insertNode(ue,ve,ze,at)}onRemove(ue,ve,ze){this._transitionEngine.removeNode(ue,ve,ze)}disableAnimations(ue,ve){this._transitionEngine.markElementAsDisabled(ue,ve)}process(ue,ve,ze,at){if("@"==ze.charAt(0)){const[kt,En]=Hi(ze);this._timelineEngine.command(kt,ve,En,at)}else this._transitionEngine.trigger(ue,ve,ze,at)}listen(ue,ve,ze,at,kt){if("@"==ze.charAt(0)){const[En,Sn]=Hi(ze);return this._timelineEngine.listen(En,ve,Sn,kt)}return this._transitionEngine.listen(ue,ve,ze,at,kt)}flush(ue=-1){this._transitionEngine.flush(ue)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(ue){this._transitionEngine.afterFlushAnimationsDone(ue)}}class $a{constructor(ue,ve,ze){this._element=ue,this._startStyles=ve,this._endStyles=ze,this._state=0;let at=$a.initialStylesByElement.get(ue);at||$a.initialStylesByElement.set(ue,at=new Map),this._initialStyles=at}start(){this._state<1&&(this._startStyles&&Ko(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ko(this._element,this._initialStyles),this._endStyles&&(Ko(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&($a.initialStylesByElement.delete(this._element),this._startStyles&&(ka(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ka(this._element,this._endStyles),this._endStyles=null),Ko(this._element,this._initialStyles),this._state=3)}}function vl(ot){let ue=null;return ot.forEach((ve,ze)=>{(function uc(ot){return"display"===ot||"position"===ot})(ze)&&(ue=ue||new Map,ue.set(ze,ve))}),ue}$a.initialStylesByElement=new WeakMap;class su{constructor(ue,ve,ze,at){this.element=ue,this.keyframes=ve,this.options=ze,this._specialStyles=at,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=ze.duration,this._delay=ze.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ue=>ue()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const ue=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,ue,this.options),this._finalKeyframe=ue.length?ue[ue.length-1]:new Map;const ve=()=>this._onFinish();this.domPlayer.addEventListener("finish",ve),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",ve)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(ue){const ve=[];return ue.forEach(ze=>{ve.push(Object.fromEntries(ze))}),ve}_triggerWebAnimation(ue,ve,ze){return ue.animate(this._convertKeyframesToObject(ve),ze)}onStart(ue){this._originalOnStartFns.push(ue),this._onStartFns.push(ue)}onDone(ue){this._originalOnDoneFns.push(ue),this._onDoneFns.push(ue)}onDestroy(ue){this._onDestroyFns.push(ue)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(ue=>ue()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(ue=>ue()),this._onDestroyFns=[])}setPosition(ue){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=ue*this.time}getPosition(){var ue;return+(null!==(ue=this.domPlayer.currentTime)&&void 0!==ue?ue:0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const ue=new Map;this.hasStarted()&&this._finalKeyframe.forEach((ze,at)=>{"offset"!==at&&ue.set(at,this._finished?ze:jn(this.element,at))}),this.currentSnapshot=ue}triggerCallback(ue){const ve="start"===ue?this._onStartFns:this._onDoneFns;ve.forEach(ze=>ze()),ve.length=0}}class os{validateStyleProperty(ue){return!0}validateAnimatableStyleProperty(ue){return!0}containsElement(ue,ve){return ea(ue,ve)}getParentElement(ue){return Xs(ue)}query(ue,ve,ze){return So(ue,ve,ze)}computeStyle(ue,ve,ze){return jn(ue,ve)}animate(ue,ve,ze,at,kt,En=[]){const Hn={duration:ze,delay:at,fill:0==at?"both":"forwards"};kt&&(Hn.easing=kt);const or=new Map,Xr=En.filter(Qi=>Qi instanceof su);(function pn(ot,ue){return 0===ot||0===ue})(ze,at)&&Xr.forEach(Qi=>{Qi.currentSnapshot.forEach((Wi,is)=>or.set(is,Wi))});let oi=function Ga(ot){return ot.length?ot[0]instanceof Map?ot:ot.map(ue=>new Map(Object.entries(ue))):[]}(ve).map(Qi=>new Map(Qi));oi=function xn(ot,ue,ve){if(ve.size&&ue.length){let ze=ue[0],at=[];if(ve.forEach((kt,En)=>{ze.has(En)||at.push(En),ze.set(En,kt)}),at.length)for(let kt=1;kt<ue.length;kt++){let En=ue[kt];at.forEach(Sn=>En.set(Sn,jn(ot,Sn)))}}return ue}(ue,oi,or);const Oi=function Fc(ot,ue){let ve=null,ze=null;return Array.isArray(ue)&&ue.length?(ve=vl(ue[0]),ue.length>1&&(ze=vl(ue[ue.length-1]))):ue instanceof Map&&(ve=vl(ue)),ve||ze?new $a(ot,ve,ze):null}(ue,oi);return new su(ue,oi,Hn,Oi)}}const Ml="@.disabled";class wc{constructor(ue,ve,ze,at){this.namespaceId=ue,this.delegate=ve,this.engine=ze,this._onDestroy=at,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(ue){var ve,ze;null===(ve=(ze=this.delegate).destroyNode)||void 0===ve||ve.call(ze,ue)}destroy(){var ue;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),null===(ue=this._onDestroy)||void 0===ue||ue.call(this)}createElement(ue,ve){return this.delegate.createElement(ue,ve)}createComment(ue){return this.delegate.createComment(ue)}createText(ue){return this.delegate.createText(ue)}appendChild(ue,ve){this.delegate.appendChild(ue,ve),this.engine.onInsert(this.namespaceId,ve,ue,!1)}insertBefore(ue,ve,ze,at=!0){this.delegate.insertBefore(ue,ve,ze),this.engine.onInsert(this.namespaceId,ve,ue,at)}removeChild(ue,ve,ze){this.engine.onRemove(this.namespaceId,ve,this.delegate)}selectRootElement(ue,ve){return this.delegate.selectRootElement(ue,ve)}parentNode(ue){return this.delegate.parentNode(ue)}nextSibling(ue){return this.delegate.nextSibling(ue)}setAttribute(ue,ve,ze,at){this.delegate.setAttribute(ue,ve,ze,at)}removeAttribute(ue,ve,ze){this.delegate.removeAttribute(ue,ve,ze)}addClass(ue,ve){this.delegate.addClass(ue,ve)}removeClass(ue,ve){this.delegate.removeClass(ue,ve)}setStyle(ue,ve,ze,at){this.delegate.setStyle(ue,ve,ze,at)}removeStyle(ue,ve,ze){this.delegate.removeStyle(ue,ve,ze)}setProperty(ue,ve,ze){"@"==ve.charAt(0)&&ve==Ml?this.disableAnimations(ue,!!ze):this.delegate.setProperty(ue,ve,ze)}setValue(ue,ve){this.delegate.setValue(ue,ve)}listen(ue,ve,ze){return this.delegate.listen(ue,ve,ze)}disableAnimations(ue,ve){this.engine.disableAnimations(ue,ve)}}class Ql extends wc{constructor(ue,ve,ze,at,kt){super(ve,ze,at,kt),this.factory=ue,this.namespaceId=ve}setProperty(ue,ve,ze){"@"==ve.charAt(0)?"."==ve.charAt(1)&&ve==Ml?this.disableAnimations(ue,ze=void 0===ze||!!ze):this.engine.process(this.namespaceId,ue,ve.slice(1),ze):this.delegate.setProperty(ue,ve,ze)}listen(ue,ve,ze){if("@"==ve.charAt(0)){const at=function ou(ot){switch(ot){case"body":return document.body;case"document":return document;case"window":return window;default:return ot}}(ue);let kt=ve.slice(1),En="";return"@"!=kt.charAt(0)&&([kt,En]=function As(ot){const ue=ot.indexOf(".");return[ot.substring(0,ue),ot.slice(ue+1)]}(kt)),this.engine.listen(this.namespaceId,at,kt,En,Sn=>{this.factory.scheduleListenerCallback(Sn._data||-1,ze,Sn)})}return this.delegate.listen(ue,ve,ze)}}class Ha{constructor(ue,ve,ze){this.delegate=ue,this.engine=ve,this._zone=ze,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,ve.onRemovalComplete=(at,kt)=>{const En=null==kt?void 0:kt.parentNode(at);En&&kt.removeChild(En,at)}}createRenderer(ue,ve){var ze;const kt=this.delegate.createRenderer(ue,ve);if(!ue||null==ve||null===(ze=ve.data)||void 0===ze||!ze.animation){const Xr=this._rendererCache;let oi=Xr.get(kt);return oi||(oi=new wc("",kt,this.engine,()=>Xr.delete(kt)),Xr.set(kt,oi)),oi}const En=ve.id,Sn=ve.id+"-"+this._currentId;this._currentId++,this.engine.register(Sn,ue);const Hn=Xr=>{Array.isArray(Xr)?Xr.forEach(Hn):this.engine.registerTrigger(En,Sn,ue,Xr.name,Xr)};return ve.data.animation.forEach(Hn),new Ql(this,Sn,kt,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(ue,ve,ze){if(ue>=0&&ue<this._microtaskId)return void this._zone.run(()=>ve(ze));const at=this._animationCallbacksBuffer;0==at.length&&queueMicrotask(()=>{this._zone.run(()=>{at.forEach(kt=>{const[En,Sn]=kt;En(Sn)}),this._animationCallbacksBuffer=[]})}),at.push([ve,ze])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let ec=(()=>{var ot;class ue extends cc{constructor(ze,at,kt){super(ze,at,kt)}ngOnDestroy(){this.flush()}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(C.qQ),j.KVO(qo),j.KVO(ua))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();const Vs=[{provide:ua,useFactory:function Ia(){return new _r}},{provide:cc,useClass:ec},{provide:j._9s,useFactory:function _o(ot,ue,ve){return new Ha(ot,ue,ve)},deps:[F.B7,cc,j.SKi]}],au=[{provide:qo,useFactory:()=>new os},{provide:j.bc$,useValue:"BrowserAnimations"},...Vs],Te=[{provide:qo,useClass:ta},{provide:j.bc$,useValue:"NoopAnimations"},...Vs];let et=(()=>{var ot;class ue{static withConfig(ze){return{ngModule:ue,providers:ze.disableAnimations?Te:au}}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({providers:au,imports:[F.Bb]}),ue})(),ln=(()=>{var ot;class ue{}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot,bootstrap:[be.ZL]}),ot.\u0275inj=j.G2t({providers:[{provide:It.b,useClass:sn.jM},sn.y8],imports:[F.Bb,et,a.bv.forRoot({mode:"md",innerHTMLTemplatesEnabled:!0,experimentalCloseWatcher:!0,hardwareBackButton:!0}),M,bt.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerImmediately"})]}),ue})();var xt=Ve(1288);(0,j.SmG)(),F.sG().bootstrapModule(ln).catch(ot=>console.log(ot)),window,typeof window>"u"?Promise.resolve():(0,xt.p)().then(()=>(0,xt.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined))},8326:(Rr,Un,Ve)=>{var F=Ve(4756);Rr.exports=function a(be,Z,M){function C(I,D){if(!Z[I]){if(!be[I]){var d=void 0;if(!D&&d)return require(I,!0);if(b)return b(I,!0);throw(D=new Error("Cannot find module '"+I+"'")).code="MODULE_NOT_FOUND",D}d=Z[I]={exports:{}},be[I][0].call(d.exports,function(f){return C(be[I][1][f]||f)},d,d.exports,a,be,Z,M)}return Z[I].exports}for(var b=void 0,w=0;w<M.length;w++)C(M[w]);return C}({1:[function(a,be,Z){"use strict";Z.byteLength=function(p){return 3*((p=d(p))[0]+(p=p[1]))/4-p},Z.toByteArray=function(f){var h,p,g,q,m=(g=d(f))[0],x=new b(3*(m+(q=g=g[1]))/4-q),E=0,S=0<g?m-4:m;for(p=0;p<S;p+=4)h=C[f.charCodeAt(p)]<<18|C[f.charCodeAt(p+1)]<<12|C[f.charCodeAt(p+2)]<<6|C[f.charCodeAt(p+3)],x[E++]=h>>16&255,x[E++]=h>>8&255,x[E++]=255&h;return 2===g&&(h=C[f.charCodeAt(p)]<<2|C[f.charCodeAt(p+1)]>>4,x[E++]=255&h),1===g&&(h=C[f.charCodeAt(p)]<<10|C[f.charCodeAt(p+1)]<<4|C[f.charCodeAt(p+2)]>>2,x[E++]=h>>8&255,x[E++]=255&h),x},Z.fromByteArray=function(f){for(var h,p=f.length,m=p%3,g=[],x=0,E=p-m;x<E;x+=16383)g.push(function(S,k,q){for(var G=[],V=k;V<q;V+=3)G.push(M[(K=(S[V]<<16&16711680)+(S[V+1]<<8&65280)+(255&S[V+2]))>>18&63]+M[K>>12&63]+M[K>>6&63]+M[63&K]);var K;return G.join("")}(f,x,E<x+16383?E:x+16383));return 1==m?g.push(M[(h=f[p-1])>>2]+M[h<<4&63]+"=="):2==m&&g.push(M[(h=(f[p-2]<<8)+f[p-1])>>10]+M[h>>4&63]+M[h<<2&63]+"="),g.join("")};for(var M=[],C=[],b=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0;I<64;++I)M[I]=w[I],C[w.charCodeAt(I)]=I;function d(f){var h=f.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=(f=-1===(f=f.indexOf("="))?h:f)===h?0:4-f%4,[f,h]}C[45]=62,C[95]=63},{}],2:[function(a,be,Z){},{}],3:[function(a,be,Z){},{}],4:[function(a,be,Z){(function(d){"use strict";var C=a("base64-js"),b=a("ieee754"),w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,I=(Z.Buffer=d,Z.SlowBuffer=function(le){return+le!=le&&(le=0),d.alloc(+le)},Z.INSPECT_MAX_BYTES=50,2147483647);function D(le){if(I<le)throw new RangeError('The value "'+le+'" is invalid for option "size"');return le=new Uint8Array(le),Object.setPrototypeOf(le,d.prototype),le}function d(le,z,ye){if("number"!=typeof le)return f(le,z,ye);if("string"==typeof z)throw new TypeError('The "string" argument must be of type string. Received type number');return p(le)}function f(le,z,ye){if("string"==typeof le){var je=le,Je=z;if(d.isEncoding(Je="string"==typeof Je&&""!==Je?Je:"utf8"))return(je=(Ct=D(gt=0|x(je,Je))).write(je,Je))!==gt?Ct.slice(0,je):Ct;throw new TypeError("Unknown encoding: "+Je)}if(ArrayBuffer.isView(le))return m(le);if(null!=le){if(fe(le,ArrayBuffer)||le&&fe(le.buffer,ArrayBuffer)){var gt=le,Ct=ye;if((je=z)<0||gt.byteLength<je)throw new RangeError('"offset" is outside of buffer bounds');if(gt.byteLength<je+(Ct||0))throw new RangeError('"length" is outside of buffer bounds');return gt=void 0===je&&void 0===Ct?new Uint8Array(gt):void 0===Ct?new Uint8Array(gt,je):new Uint8Array(gt,je,Ct),Object.setPrototypeOf(gt,d.prototype),gt}if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(Je=le.valueOf&&le.valueOf())&&Je!==le)return d.from(Je,z,ye);var $t=d.isBuffer(yt=le)?(0!==(Xt=D(Ut=0|g(yt.length))).length&&yt.copy(Xt,0,0,Ut),Xt):void 0!==yt.length?"number"!=typeof yt.length||Ce(yt.length)?D(0):m(yt):"Buffer"===yt.type&&Array.isArray(yt.data)?m(yt.data):void 0;if($t)return $t;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return d.from(le[Symbol.toPrimitive]("string"),z,ye)}var yt,Ut,Xt;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function h(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function p(le){return h(le),D(le<0?0:0|g(le))}function m(le){for(var z=le.length<0?0:0|g(le.length),ye=D(z),je=0;je<z;je+=1)ye[je]=255&le[je];return ye}function g(le){if(I<=le)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return 0|le}function x(le,z){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||fe(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var ye=le.length,je=2<arguments.length&&!0===arguments[2];if(!je&&0===ye)return 0;for(var Je=!1;;)switch(z){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return ge(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ye;case"hex":return ye>>>1;case"base64":return re(le).length;default:if(Je)return je?-1:ge(le).length;z=(""+z).toLowerCase(),Je=!0}}function E(le,z,ye){var je,Je=!1;if((z=void 0===z||z<0?0:z)>this.length||(ye=void 0===ye||ye>this.length?this.length:ye)<=0||(ye>>>=0)<=(z>>>=0))return"";for(le=le||"utf8";;)switch(le){case"hex":var Ct=ye,Xt=this.length;(!Ct||Ct<0||Xt<Ct)&&(Ct=Xt);for(var $t="",yt=Et=!(Et=z)||Et<0?0:Et;yt<Ct;++yt)$t+=it[this[yt]];return $t;case"utf8":case"utf-8":return V(this,z,ye);case"ascii":var ft=(Xt=z,ye),jt="";ft=Math.min(this.length,ft);for(var Lt=Xt;Lt<ft;++Lt)jt+=String.fromCharCode(127&this[Lt]);return jt;case"latin1":case"binary":var Et=z,Kt=ye,yn="";Kt=Math.min(this.length,Kt);for(var Yn=Et;Yn<Kt;++Yn)yn+=String.fromCharCode(this[Yn]);return yn;case"base64":return An=this,je=ye,0===(Jn=z)&&je===An.length?C.fromByteArray(An):C.fromByteArray(An.slice(Jn,je));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var An=z,Jn=ye,Rn=this.slice(An,Jn),Sr="",Bn=0;Bn<Rn.length;Bn+=2)Sr+=String.fromCharCode(Rn[Bn]+256*Rn[Bn+1]);return Sr;default:if(Je)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Je=!0}}function S(le,z,ye){var je=le[z];le[z]=le[ye],le[ye]=je}function k(le,z,ye,je,Je){if(0===le.length)return-1;if("string"==typeof ye?(je=ye,ye=0):2147483647<ye?ye=2147483647:ye<-2147483648&&(ye=-2147483648),(ye=(ye=Ce(ye=+ye)?Je?0:le.length-1:ye)<0?le.length+ye:ye)>=le.length){if(Je)return-1;ye=le.length-1}else if(ye<0){if(!Je)return-1;ye=0}if("string"==typeof z&&(z=d.from(z,je)),d.isBuffer(z))return 0===z.length?-1:q(le,z,ye,je,Je);if("number"==typeof z)return z&=255,"function"==typeof Uint8Array.prototype.indexOf?(Je?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(le,z,ye):q(le,[z],ye,je,Je);throw new TypeError("val must be string, number or Buffer")}function q(le,z,ye,je,Je){var gt=1,Ct=le.length,$t=z.length;if(void 0!==je&&("ucs2"===(je=String(je).toLowerCase())||"ucs-2"===je||"utf16le"===je||"utf-16le"===je)){if(le.length<2||z.length<2)return-1;Ct/=gt=2,$t/=2,ye/=2}function yt(Lt,Bt){return 1===gt?Lt[Bt]:Lt.readUInt16BE(Bt*gt)}if(Je)for(var Ut=-1,Xt=ye;Xt<Ct;Xt++)if(yt(le,Xt)===yt(z,-1===Ut?0:Xt-Ut)){if(Xt-(Ut=-1===Ut?Xt:Ut)+1===$t)return Ut*gt}else-1!==Ut&&(Xt-=Xt-Ut),Ut=-1;else for(Xt=ye=Ct<ye+$t?Ct-$t:ye;0<=Xt;Xt--){for(var ft=!0,jt=0;jt<$t;jt++)if(yt(le,Xt+jt)!==yt(z,jt)){ft=!1;break}if(ft)return Xt}return-1}function J(le,z,ye,je){return Q(function(Je){for(var gt=[],Ct=0;Ct<Je.length;++Ct)gt.push(255&Je.charCodeAt(Ct));return gt}(z),le,ye,je)}function G(le,z,ye,je){return Q(function(Je,gt){for(var Ct,$t,yt=[],Ut=0;Ut<Je.length&&!((gt-=2)<0);++Ut)Ct=($t=Je.charCodeAt(Ut))>>8,yt.push($t%=256),yt.push(Ct);return yt}(z,le.length-ye),le,ye,je)}function V(le,z,ye){ye=Math.min(le.length,ye);for(var je=[],Je=z;Je<ye;){var gt,Ct,$t,yt,Ut=le[Je],Xt=null,ft=239<Ut?4:223<Ut?3:191<Ut?2:1;if(Je+ft<=ye)switch(ft){case 1:Ut<128&&(Xt=Ut);break;case 2:128==(192&(gt=le[Je+1]))&&127<(yt=(31&Ut)<<6|63&gt)&&(Xt=yt);break;case 3:Ct=le[Je+2],128==(192&(gt=le[Je+1]))&&128==(192&Ct)&&2047<(yt=(15&Ut)<<12|(63&gt)<<6|63&Ct)&&(yt<55296||57343<yt)&&(Xt=yt);break;case 4:Ct=le[Je+2],$t=le[Je+3],128==(192&(gt=le[Je+1]))&&128==(192&Ct)&&128==(192&$t)&&65535<(yt=(15&Ut)<<18|(63&gt)<<12|(63&Ct)<<6|63&$t)&&yt<1114112&&(Xt=yt)}null===Xt?(Xt=65533,ft=1):65535<Xt&&(je.push((Xt-=65536)>>>10&1023|55296),Xt=56320|1023&Xt),je.push(Xt),Je+=ft}var jt=je,Lt=jt.length;if(Lt<=K)return String.fromCharCode.apply(String,jt);for(var Bt="",Et=0;Et<Lt;)Bt+=String.fromCharCode.apply(String,jt.slice(Et,Et+=K));return Bt}Z.kMaxLength=I,(d.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(le,z),42===le.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=f,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(le,z,ye){return h(le),le<=0||void 0===z?D(le):"string"==typeof ye?D(le).fill(z,ye):D(le).fill(z)},d.allocUnsafe=p,d.allocUnsafeSlow=p,d.isBuffer=function(le){return null!=le&&!0===le._isBuffer&&le!==d.prototype},d.compare=function(le,z){if(fe(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),fe(z,Uint8Array)&&(z=d.from(z,z.offset,z.byteLength)),!d.isBuffer(le)||!d.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===z)return 0;for(var ye=le.length,je=z.length,Je=0,gt=Math.min(ye,je);Je<gt;++Je)if(le[Je]!==z[Je]){ye=le[Je],je=z[Je];break}return ye<je?-1:je<ye?1:0},d.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(le,z){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return d.alloc(0);if(void 0===z)for(Je=z=0;Je<le.length;++Je)z+=le[Je].length;for(var ye=d.allocUnsafe(z),je=0,Je=0;Je<le.length;++Je){var gt=le[Je];if(fe(gt,Uint8Array)&&(gt=d.from(gt)),!d.isBuffer(gt))throw new TypeError('"list" argument must be an Array of Buffers');gt.copy(ye,je),je+=gt.length}return ye},d.byteLength=x,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<le;z+=2)S(this,z,z+1);return this},d.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<le;z+=4)S(this,z,z+3),S(this,z+1,z+2);return this},d.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<le;z+=8)S(this,z,z+7),S(this,z+1,z+6),S(this,z+2,z+5),S(this,z+3,z+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var le=this.length;return 0===le?"":0===arguments.length?V(this,0,le):E.apply(this,arguments)},d.prototype.equals=function(le){if(d.isBuffer(le))return this===le||0===d.compare(this,le);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var z="",le=Z.INSPECT_MAX_BYTES;return z=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(z+=" ... "),"<Buffer "+z+">"},w&&(d.prototype[w]=d.prototype.inspect),d.prototype.compare=function(le,z,ye,je,Je){if(fe(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),!d.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(void 0===ye&&(ye=le?le.length:0),void 0===je&&(je=0),void 0===Je&&(Je=this.length),(z=void 0===z?0:z)<0||ye>le.length||je<0||Je>this.length)throw new RangeError("out of range index");if(Je<=je&&ye<=z)return 0;if(Je<=je)return-1;if(ye<=z)return 1;if(this===le)return 0;for(var gt=(Je>>>=0)-(je>>>=0),Ct=(ye>>>=0)-(z>>>=0),$t=Math.min(gt,Ct),yt=this.slice(je,Je),Ut=le.slice(z,ye),Xt=0;Xt<$t;++Xt)if(yt[Xt]!==Ut[Xt]){gt=yt[Xt],Ct=Ut[Xt];break}return gt<Ct?-1:Ct<gt?1:0},d.prototype.includes=function(le,z,ye){return-1!==this.indexOf(le,z,ye)},d.prototype.indexOf=function(le,z,ye){return k(this,le,z,ye,!0)},d.prototype.lastIndexOf=function(le,z,ye){return k(this,le,z,ye,!1)},d.prototype.write=function(le,z,ye,je){if(void 0===z)je="utf8",ye=this.length,z=0;else if(void 0===ye&&"string"==typeof z)je=z,ye=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(ye)?(ye>>>=0,void 0===je&&(je="utf8")):(je=ye,ye=void 0)}var Je=this.length-z;if((void 0===ye||Je<ye)&&(ye=Je),0<le.length&&(ye<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");je=je||"utf8";for(var gt,Ct,$t,yt=!1;;)switch(je){case"hex":var Xt=le,ft=z,jt=ye,Lt=(ft=Number(ft)||0,this.length-ft);(!jt||Lt<(jt=Number(jt)))&&(jt=Lt),(Lt=Xt.length)/2<jt&&(jt=Lt/2);for(var Bt=0;Bt<jt;++Bt){var Et=parseInt(Xt.substr(2*Bt,2),16);if(Ce(Et))return Bt;this[ft+Bt]=Et}return Bt;case"utf8":case"utf-8":return $t=ye,Q(ge(le,(Ct=this).length-(Lt=z)),Ct,Lt,$t);case"ascii":case"latin1":case"binary":return J(this,le,z,ye);case"base64":return Ct=this,$t=z,gt=ye,Q(re(le),Ct,$t,gt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,le,z,ye);default:if(yt)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),yt=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;function $(le,z,ye){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(ye<le+z)throw new RangeError("Trying to access beyond buffer length")}function ne(le,z,ye,je,Je,gt){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Je<z||z<gt)throw new RangeError('"value" argument is out of bounds');if(ye+je>le.length)throw new RangeError("Index out of range")}function Y(le,z,ye,je){if(ye+je>le.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function we(le,z,ye,je,Je){return z=+z,ye>>>=0,Je||Y(le,0,ye,4),b.write(le,z,ye,je,23,4),ye+4}function Se(le,z,ye,je,Je){return z=+z,ye>>>=0,Je||Y(le,0,ye,8),b.write(le,z,ye,je,52,8),ye+8}d.prototype.slice=function(le,z){var ye=this.length;return(le=~~le)<0?(le+=ye)<0&&(le=0):ye<le&&(le=ye),(z=void 0===z?ye:~~z)<0?(z+=ye)<0&&(z=0):ye<z&&(z=ye),z<le&&(z=le),ye=this.subarray(le,z),Object.setPrototypeOf(ye,d.prototype),ye},d.prototype.readUIntLE=function(le,z,ye){le>>>=0,z>>>=0,ye||$(le,z,this.length);for(var je=this[le],Je=1,gt=0;++gt<z&&(Je*=256);)je+=this[le+gt]*Je;return je},d.prototype.readUIntBE=function(le,z,ye){le>>>=0,z>>>=0,ye||$(le,z,this.length);for(var je=this[le+--z],Je=1;0<z&&(Je*=256);)je+=this[le+--z]*Je;return je},d.prototype.readUInt8=function(le,z){return le>>>=0,z||$(le,1,this.length),this[le]},d.prototype.readUInt16LE=function(le,z){return le>>>=0,z||$(le,2,this.length),this[le]|this[le+1]<<8},d.prototype.readUInt16BE=function(le,z){return le>>>=0,z||$(le,2,this.length),this[le]<<8|this[le+1]},d.prototype.readUInt32LE=function(le,z){return le>>>=0,z||$(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},d.prototype.readUInt32BE=function(le,z){return le>>>=0,z||$(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},d.prototype.readIntLE=function(le,z,ye){le>>>=0,z>>>=0,ye||$(le,z,this.length);for(var je=this[le],Je=1,gt=0;++gt<z&&(Je*=256);)je+=this[le+gt]*Je;return(Je*=128)<=je&&(je-=Math.pow(2,8*z)),je},d.prototype.readIntBE=function(le,z,ye){le>>>=0,z>>>=0,ye||$(le,z,this.length);for(var je=z,Je=1,gt=this[le+--je];0<je&&(Je*=256);)gt+=this[le+--je]*Je;return(Je*=128)<=gt&&(gt-=Math.pow(2,8*z)),gt},d.prototype.readInt8=function(le,z){return le>>>=0,z||$(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},d.prototype.readInt16LE=function(le,z){return le>>>=0,z||$(le,2,this.length),32768&(z=this[le]|this[le+1]<<8)?4294901760|z:z},d.prototype.readInt16BE=function(le,z){return le>>>=0,z||$(le,2,this.length),32768&(z=this[le+1]|this[le]<<8)?4294901760|z:z},d.prototype.readInt32LE=function(le,z){return le>>>=0,z||$(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},d.prototype.readInt32BE=function(le,z){return le>>>=0,z||$(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},d.prototype.readFloatLE=function(le,z){return le>>>=0,z||$(le,4,this.length),b.read(this,le,!0,23,4)},d.prototype.readFloatBE=function(le,z){return le>>>=0,z||$(le,4,this.length),b.read(this,le,!1,23,4)},d.prototype.readDoubleLE=function(le,z){return le>>>=0,z||$(le,8,this.length),b.read(this,le,!0,52,8)},d.prototype.readDoubleBE=function(le,z){return le>>>=0,z||$(le,8,this.length),b.read(this,le,!1,52,8)},d.prototype.writeUIntLE=function(le,z,ye,je){le=+le,z>>>=0,ye>>>=0,je||ne(this,le,z,ye,Math.pow(2,8*ye)-1,0);var Je=1,gt=0;for(this[z]=255&le;++gt<ye&&(Je*=256);)this[z+gt]=le/Je&255;return z+ye},d.prototype.writeUIntBE=function(le,z,ye,je){le=+le,z>>>=0,ye>>>=0,je||ne(this,le,z,ye,Math.pow(2,8*ye)-1,0);var Je=ye-1,gt=1;for(this[z+Je]=255&le;0<=--Je&&(gt*=256);)this[z+Je]=le/gt&255;return z+ye},d.prototype.writeUInt8=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,1,255,0),this[z]=255&le,z+1},d.prototype.writeUInt16LE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,2,65535,0),this[z]=255&le,this[z+1]=le>>>8,z+2},d.prototype.writeUInt16BE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,2,65535,0),this[z]=le>>>8,this[z+1]=255&le,z+2},d.prototype.writeUInt32LE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,4,4294967295,0),this[z+3]=le>>>24,this[z+2]=le>>>16,this[z+1]=le>>>8,this[z]=255&le,z+4},d.prototype.writeUInt32BE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,4,4294967295,0),this[z]=le>>>24,this[z+1]=le>>>16,this[z+2]=le>>>8,this[z+3]=255&le,z+4},d.prototype.writeIntLE=function(le,z,ye,je){le=+le,z>>>=0,je||ne(this,le,z,ye,(je=Math.pow(2,8*ye-1))-1,-je);var Je=0,gt=1,Ct=0;for(this[z]=255&le;++Je<ye&&(gt*=256);)le<0&&0===Ct&&0!==this[z+Je-1]&&(Ct=1),this[z+Je]=(le/gt|0)-Ct&255;return z+ye},d.prototype.writeIntBE=function(le,z,ye,je){le=+le,z>>>=0,je||ne(this,le,z,ye,(je=Math.pow(2,8*ye-1))-1,-je);var Je=ye-1,gt=1,Ct=0;for(this[z+Je]=255&le;0<=--Je&&(gt*=256);)le<0&&0===Ct&&0!==this[z+Je+1]&&(Ct=1),this[z+Je]=(le/gt|0)-Ct&255;return z+ye},d.prototype.writeInt8=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,1,127,-128),this[z]=255&(le=le<0?255+le+1:le),z+1},d.prototype.writeInt16LE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,2,32767,-32768),this[z]=255&le,this[z+1]=le>>>8,z+2},d.prototype.writeInt16BE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,2,32767,-32768),this[z]=le>>>8,this[z+1]=255&le,z+2},d.prototype.writeInt32LE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,4,2147483647,-2147483648),this[z]=255&le,this[z+1]=le>>>8,this[z+2]=le>>>16,this[z+3]=le>>>24,z+4},d.prototype.writeInt32BE=function(le,z,ye){return le=+le,z>>>=0,ye||ne(this,le,z,4,2147483647,-2147483648),this[z]=(le=le<0?4294967295+le+1:le)>>>24,this[z+1]=le>>>16,this[z+2]=le>>>8,this[z+3]=255&le,z+4},d.prototype.writeFloatLE=function(le,z,ye){return we(this,le,z,!0,ye)},d.prototype.writeFloatBE=function(le,z,ye){return we(this,le,z,!1,ye)},d.prototype.writeDoubleLE=function(le,z,ye){return Se(this,le,z,!0,ye)},d.prototype.writeDoubleBE=function(le,z,ye){return Se(this,le,z,!1,ye)},d.prototype.copy=function(le,z,ye,je){if(!d.isBuffer(le))throw new TypeError("argument should be a Buffer");if(ye=ye||0,je||0===je||(je=this.length),z>=le.length&&(z=le.length),(je=0<je&&je<ye?ye:je)===ye||0===le.length||0===this.length)return 0;if((z=z||0)<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length);var Je=(je=le.length-z<je-ye?le.length-z+ye:je)-ye;if(this===le&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(z,ye,je);else if(this===le&&ye<z&&z<je)for(var gt=Je-1;0<=gt;--gt)le[gt+z]=this[gt+ye];else Uint8Array.prototype.set.call(le,this.subarray(ye,je),z);return Je},d.prototype.fill=function(le,z,ye,je){if("string"==typeof le){if("string"==typeof z?(je=z,z=0,ye=this.length):"string"==typeof ye&&(je=ye,ye=this.length),void 0!==je&&"string"!=typeof je)throw new TypeError("encoding must be a string");if("string"==typeof je&&!d.isEncoding(je))throw new TypeError("Unknown encoding: "+je);var Je;1===le.length&&(Je=le.charCodeAt(0),("utf8"===je&&Je<128||"latin1"===je)&&(le=Je))}else"number"==typeof le?le&=255:"boolean"==typeof le&&(le=Number(le));if(z<0||this.length<z||this.length<ye)throw new RangeError("Out of range index");var gt;if(!(ye<=z))if(z>>>=0,ye=void 0===ye?this.length:ye>>>0,"number"==typeof(le=le||0))for(gt=z;gt<ye;++gt)this[gt]=le;else{var Ct=d.isBuffer(le)?le:d.from(le,je),$t=Ct.length;if(0===$t)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(gt=0;gt<ye-z;++gt)this[gt+z]=Ct[gt%$t]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function ge(le,z){z=z||1/0;for(var ye,je=le.length,Je=null,gt=[],Ct=0;Ct<je;++Ct){if(55295<(ye=le.charCodeAt(Ct))&&ye<57344){if(!Je){if(56319<ye){-1<(z-=3)&&gt.push(239,191,189);continue}if(Ct+1===je){-1<(z-=3)&&gt.push(239,191,189);continue}Je=ye;continue}if(ye<56320){-1<(z-=3)&&gt.push(239,191,189),Je=ye;continue}ye=65536+(Je-55296<<10|ye-56320)}else Je&&-1<(z-=3)&&gt.push(239,191,189);if(Je=null,ye<128){if(--z<0)break;gt.push(ye)}else if(ye<2048){if((z-=2)<0)break;gt.push(ye>>6|192,63&ye|128)}else if(ye<65536){if((z-=3)<0)break;gt.push(ye>>12|224,ye>>6&63|128,63&ye|128)}else{if(!(ye<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;gt.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,63&ye|128)}}return gt}function re(le){return C.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(le))}function Q(le,z,ye,je){for(var Je=0;Je<je&&!(Je+ye>=z.length||Je>=le.length);++Je)z[Je+ye]=le[Je];return Je}function fe(le,z){return le instanceof z||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===z.name}function Ce(le){return le!=le}var it=function(){for(var le="0123456789abcdef",z=new Array(256),ye=0;ye<16;++ye)for(var je=16*ye,Je=0;Je<16;++Je)z[je+Je]=le[ye]+le[Je];return z}()}).call(this,a("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(a,be,Z){be.exports=function(M){if("function"!=typeof M)throw TypeError(String(M)+" is not a function");return M}},{}],6:[function(a,be,Z){var M=a("../internals/is-object");be.exports=function(C){if(M(C)||null===C)return C;throw TypeError("Can't set "+String(C)+" as a prototype")}},{"../internals/is-object":75}],7:[function(b,be,Z){var M=b("../internals/well-known-symbol"),C=b("../internals/object-create"),w=(b=b("../internals/object-define-property"),M("unscopables")),I=Array.prototype;null==I[w]&&b.f(I,w,{configurable:!0,value:C(null)}),be.exports=function(D){I[w][D]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(a,be,Z){"use strict";var M=a("../internals/string-multibyte").charAt;be.exports=function(C,b,w){return b+(w?M(C,b).length:1)}},{"../internals/string-multibyte":125}],9:[function(a,be,Z){be.exports=function(M,C,b){if(M instanceof C)return M;throw TypeError("Incorrect "+(b?b+" ":"")+"invocation")}},{}],10:[function(a,be,Z){var M=a("../internals/is-object");be.exports=function(C){if(M(C))return C;throw TypeError(String(C)+" is not an object")}},{"../internals/is-object":75}],11:[function(a,be,Z){be.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(Y,be,Z){"use strict";function M(Se){return D(Se)&&d(we,f(Se))}var C,b=Y("../internals/array-buffer-native"),w=Y("../internals/descriptors"),I=Y("../internals/global"),D=Y("../internals/is-object"),d=Y("../internals/has"),f=Y("../internals/classof"),h=Y("../internals/create-non-enumerable-property"),p=Y("../internals/redefine"),m=Y("../internals/object-define-property").f,g=Y("../internals/object-get-prototype-of"),x=Y("../internals/object-set-prototype-of"),K=Y("../internals/well-known-symbol"),E=(Y=Y("../internals/uid"),I.Int8Array),S=E&&E.prototype,k=(k=I.Uint8ClampedArray)&&k.prototype,q=E&&g(E),J=S&&g(S),G=Object.prototype,V=G.isPrototypeOf,$=(K=K("toStringTag"),Y("TYPED_ARRAY_TAG")),ne=b&&!!x&&"Opera"!==f(I.opera),we=(Y=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(C in we)I[C]||(ne=!1);if((!ne||"function"!=typeof q||q===Function.prototype)&&(q=function(){throw TypeError("Incorrect invocation")},ne))for(C in we)I[C]&&x(I[C],q);if((!ne||!J||J===G)&&(J=q.prototype,ne))for(C in we)I[C]&&x(I[C].prototype,J);if(ne&&g(k)!==J&&x(k,J),w&&!d(J,K))for(C in Y=!0,m(J,K,{get:function(){return D(this)?this[$]:void 0}}),we)I[C]&&h(I[C],$,C);be.exports={NATIVE_ARRAY_BUFFER_VIEWS:ne,TYPED_ARRAY_TAG:Y&&$,aTypedArray:function(Se){if(M(Se))return Se;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Se){if(x){if(V.call(q,Se))return Se}else for(var oe in we)if(d(we,C)&&(oe=I[oe])&&(Se===oe||V.call(oe,Se)))return Se;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Se,oe,ge){if(w){if(ge)for(var re in we)(re=I[re])&&d(re.prototype,Se)&&delete re.prototype[Se];J[Se]&&!ge||p(J,Se,!ge&&ne&&S[Se]||oe)}},exportTypedArrayStaticMethod:function(Se,oe,ge){var re,Q;if(w){if(x){if(ge)for(re in we)(Q=I[re])&&d(Q,Se)&&delete Q[Se];if(q[Se]&&!ge)return;try{return p(q,Se,!ge&&ne&&E[Se]||oe)}catch{}}for(re in we)!(Q=I[re])||Q[Se]&&!ge||p(Q,Se,oe)}},isView:function(Se){return"DataView"===(Se=f(Se))||d(we,Se)},isTypedArray:M,TypedArray:q,TypedArrayPrototype:J}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(ye,be,Z){"use strict";function M(ft){return[255&ft]}function C(ft){return[255&ft,ft>>8&255]}function b(ft){return[255&ft,ft>>8&255,ft>>16&255,ft>>24&255]}function w(ft){return ft[3]<<24|ft[2]<<16|ft[1]<<8|ft[0]}function I(ft){return gt(ft,23,4)}function D(ft){return gt(ft,52,8)}function d(ft,jt){Y(ft[fe],jt,{get:function(){return oe(this)[jt]}})}function f(yn,jt,Kt,Bt){if((Kt=G(Kt))+jt>(yn=oe(yn)).byteLength)throw Je(Ce);return yn=oe(yn.buffer).bytes.slice(Kt+=yn.byteOffset,Kt+jt),Bt?yn:yn.reverse()}function h(ft,jt,Lt,Bt,Et,Kt){if((Lt=G(Lt))+jt>(ft=oe(ft)).byteLength)throw Je(Ce);for(var yn=oe(ft.buffer).bytes,Yn=Lt+ft.byteOffset,An=Bt(+Et),Jn=0;Jn<jt;Jn++)yn[Yn+Jn]=An[Kt?Jn:jt-Jn-1]}var p=ye("../internals/global"),m=ye("../internals/descriptors"),g=ye("../internals/array-buffer-native"),x=ye("../internals/create-non-enumerable-property"),E=ye("../internals/redefine-all"),S=ye("../internals/fails"),k=ye("../internals/an-instance"),q=ye("../internals/to-integer"),J=ye("../internals/to-length"),G=ye("../internals/to-index"),V=ye("../internals/ieee754"),K=ye("../internals/object-get-prototype-of"),$=ye("../internals/object-set-prototype-of"),ne=ye("../internals/object-get-own-property-names").f,Y=ye("../internals/object-define-property").f,we=ye("../internals/array-fill"),Se=ye("../internals/set-to-string-tag"),oe=(ye=ye("../internals/internal-state")).get,ge=ye.set,re="ArrayBuffer",Q="DataView",fe="prototype",Ce="Wrong index",it=p[re],le=it,z=p[Q],je=(ye=z&&z[fe],Object.prototype),Je=p.RangeError,gt=V.pack,Ct=V.unpack;if(g){if(!S(function(){it(1)})||!S(function(){new it(-1)})||S(function(){return new it,new it(1.5),new it(NaN),it.name!=re})){p=(le=function(Lt){return k(this,le),new it(G(Lt))})[fe]=it[fe];for(var $t,yt=ne(it),Ut=0;yt.length>Ut;)($t=yt[Ut++])in le||x(le,$t,it[$t]);p.constructor=le}$&&K(ye)!==je&&$(ye,je),V=new z(new le(2));var Xt=ye.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||E(ye,{setInt8:function(jt,Lt){Xt.call(this,jt,Lt<<24>>24)},setUint8:function(jt,Lt){Xt.call(this,jt,Lt<<24>>24)}},{unsafe:!0})}else le=function(ft){k(this,le,re),ft=G(ft),ge(this,{bytes:we.call(new Array(ft),0),byteLength:ft}),m||(this.byteLength=ft)},z=function(ft,Et,Lt){k(this,z,Q),k(ft,le,Q);var Bt=oe(ft).byteLength;if((Et=q(Et))<0||Bt<Et)throw Je("Wrong offset");if(Bt<Et+(Lt=void 0===Lt?Bt-Et:J(Lt)))throw Je("Wrong length");ge(this,{buffer:ft,byteLength:Lt,byteOffset:Et}),m||(this.buffer=ft,this.byteLength=Lt,this.byteOffset=Et)},m&&(d(le,"byteLength"),d(z,"buffer"),d(z,"byteLength"),d(z,"byteOffset")),E(z[fe],{getInt8:function(ft){return f(this,1,ft)[0]<<24>>24},getUint8:function(ft){return f(this,1,ft)[0]},getInt16:function(ft){return((ft=f(this,2,ft,1<arguments.length?arguments[1]:void 0))[1]<<8|ft[0])<<16>>16},getUint16:function(ft){return(ft=f(this,2,ft,1<arguments.length?arguments[1]:void 0))[1]<<8|ft[0]},getInt32:function(ft){return w(f(this,4,ft,1<arguments.length?arguments[1]:void 0))},getUint32:function(ft){return w(f(this,4,ft,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ft){return Ct(f(this,4,ft,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ft){return Ct(f(this,8,ft,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ft,jt){h(this,1,ft,M,jt)},setUint8:function(ft,jt){h(this,1,ft,M,jt)},setInt16:function(ft,jt){h(this,2,ft,C,jt,2<arguments.length?arguments[2]:void 0)},setUint16:function(ft,jt){h(this,2,ft,C,jt,2<arguments.length?arguments[2]:void 0)},setInt32:function(ft,jt){h(this,4,ft,b,jt,2<arguments.length?arguments[2]:void 0)},setUint32:function(ft,jt){h(this,4,ft,b,jt,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ft,jt){h(this,4,ft,I,jt,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ft,jt){h(this,8,ft,D,jt,2<arguments.length?arguments[2]:void 0)}});Se(le,re),Se(z,Q),be.exports={ArrayBuffer:le,DataView:z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(a,be,Z){"use strict";var M=a("../internals/to-object"),C=a("../internals/to-absolute-index"),b=a("../internals/to-length"),w=Math.min;be.exports=[].copyWithin||function(m,D){var d=M(this),f=b(d.length),h=C(m,f),p=C(D,f),g=w((void 0===(m=2<arguments.length?arguments[2]:void 0)?f:C(m,f))-p,f-h),x=1;for(p<h&&h<p+g&&(x=-1,p+=g-1,h+=g-1);0<g--;)p in d?d[h]=d[p]:delete d[h],h+=x,p+=x;return d}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(a,be,Z){"use strict";var M=a("../internals/to-object"),C=a("../internals/to-absolute-index"),b=a("../internals/to-length");be.exports=function(w){for(var f,I=M(this),D=b(I.length),d=C(1<(f=arguments.length)?arguments[1]:void 0,D),h=void 0===(f=2<f?arguments[2]:void 0)?D:C(f,D);d<h;)I[d++]=w;return I}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(b,be,Z){"use strict";var M=b("../internals/array-iteration").forEach,C=b("../internals/array-method-is-strict");b=b("../internals/array-method-uses-to-length"),C=C("forEach"),b=b("forEach"),be.exports=C&&b?[].forEach:function(w){return M(this,w,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(a,be,Z){"use strict";var M=a("../internals/function-bind-context"),C=a("../internals/to-object"),b=a("../internals/call-with-safe-iteration-closing"),w=a("../internals/is-array-iterator-method"),I=a("../internals/to-length"),D=a("../internals/create-property"),d=a("../internals/get-iterator-method");be.exports=function(k){var h,p,m,g,x,E,S=C(k),q=(k="function"==typeof this?this:Array,arguments.length),J=1<q?arguments[1]:void 0,G=void 0!==J,V=d(S),K=0;if(G&&(J=M(J,2<q?arguments[2]:void 0,2)),null==V||k==Array&&w(V))for(p=new k(h=I(S.length));K<h;K++)E=G?J(S[K],K):S[K],D(p,K,E);else for(x=(g=V.call(S)).next,p=new k;!(m=x.call(g)).done;K++)E=G?b(g,J,[m.value,K],!0):m.value,D(p,K,E);return p.length=K,p}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(a,be,Z){function M(I){return function(D,d,f){var h,p=C(D),m=b(p.length),g=w(f,m);if(I&&d!=d){for(;g<m;)if((h=p[g++])!=h)return!0}else for(;g<m;g++)if((I||g in p)&&p[g]===d)return I||g||0;return!I&&-1}}var C=a("../internals/to-indexed-object"),b=a("../internals/to-length"),w=a("../internals/to-absolute-index");be.exports={includes:M(!0),indexOf:M(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(a,be,Z){function M(f){var h=1==f,p=2==f,m=3==f,g=4==f,x=6==f,E=5==f||x;return function(S,k,q,J){for(var G,V,K=w(S),$=b(K),ne=C(k,q,3),Y=I($.length),we=0,Se=(k=J||D,h?k(S,Y):p?k(S,0):void 0);we<Y;we++)if((E||we in $)&&(V=ne(G=$[we],we,K),f))if(h)Se[we]=V;else if(V)switch(f){case 3:return!0;case 5:return G;case 6:return we;case 2:d.call(Se,G)}else if(g)return!1;return x?-1:m||g?g:Se}}var C=a("../internals/function-bind-context"),b=a("../internals/indexed-object"),w=a("../internals/to-object"),I=a("../internals/to-length"),D=a("../internals/array-species-create"),d=[].push;be.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(f,be,Z){"use strict";var M=f("../internals/to-indexed-object"),C=f("../internals/to-integer"),b=f("../internals/to-length"),d=f("../internals/array-method-is-strict"),w=(f=f("../internals/array-method-uses-to-length"),Math.min),I=[].lastIndexOf,D=!!I&&1/[1].lastIndexOf(1,-0)<0;d=d("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0}),be.exports=!D&&d&&f?I:function(h){if(D)return I.apply(this,arguments)||0;var p=M(this),m=b(p.length),g=m-1;for((g=1<arguments.length?w(g,C(arguments[1])):g)<0&&(g=m+g);0<=g;g--)if(g in p&&p[g]===h)return g||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(a,be,Z){var M=a("../internals/fails"),C=a("../internals/well-known-symbol"),b=a("../internals/engine-v8-version"),w=C("species");be.exports=function(I){return 51<=b||!M(function(){var D=[];return(D.constructor={})[w]=function(){return{foo:1}},1!==D[I](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(a,be,Z){"use strict";var M=a("../internals/fails");be.exports=function(C,b){var w=[][C];return!!w&&M(function(){w.call(null,b||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(a,be,Z){function M(d){throw d}var C=a("../internals/descriptors"),b=a("../internals/fails"),w=a("../internals/has"),I=Object.defineProperty,D={};be.exports=function(d,f){var h,p,m,g;return w(D,d)?D[d]:(h=[][d],p=!!w(f=f||{},"ACCESSORS")&&f.ACCESSORS,m=w(f,0)?f[0]:M,g=w(f,1)?f[1]:void 0,D[d]=!!h&&!b(function(){if(p&&!C)return!0;var x={length:-1};p?I(x,1,{enumerable:!0,get:M}):x[1]=1,h.call(x,m,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(a,be,Z){function M(D){return function(d,f,h,p){C(f);var m=b(d),g=w(m),x=I(m.length),E=D?x-1:0,S=D?-1:1;if(h<2)for(;;){if(E in g){p=g[E],E+=S;break}if(E+=S,D?E<0:x<=E)throw TypeError("Reduce of empty array with no initial value")}for(;D?0<=E:E<x;E+=S)E in g&&(p=f(p,g[E],E,m));return p}}var C=a("../internals/a-function"),b=a("../internals/to-object"),w=a("../internals/indexed-object"),I=a("../internals/to-length");be.exports={left:M(!1),right:M(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(a,be,Z){var M=a("../internals/is-object"),C=a("../internals/is-array"),b=a("../internals/well-known-symbol")("species");be.exports=function(w,I){var D;return new(void 0===(D=C(w)&&("function"==typeof(D=w.constructor)&&(D===Array||C(D.prototype))||M(D)&&null===(D=D[b]))?void 0:D)?Array:D)(0===I?0:I)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(a,be,Z){var M=a("../internals/an-object");be.exports=function(C,b,w,I){try{return I?b(M(w)[0],w[1]):b(w)}catch(D){throw void 0!==(I=C.return)&&M(I.call(C)),D}}},{"../internals/an-object":10}],27:[function(a,be,Z){var M=a("../internals/well-known-symbol")("iterator"),C=!1;try{var b=0,w={next:function(){return{done:!!b++}},return:function(){C=!0}};w[M]=function(){return this},Array.from(w,function(){throw 2})}catch{}be.exports=function(I,D){if(!D&&!C)return!1;var d=!1;try{var f={};f[M]=function(){return{next:function(){return{done:d=!0}}}},I(f)}catch{}return d}},{"../internals/well-known-symbol":150}],28:[function(a,be,Z){var M={}.toString;be.exports=function(C){return M.call(C).slice(8,-1)}},{}],29:[function(a,be,Z){var M=a("../internals/to-string-tag-support"),C=a("../internals/classof-raw"),b=a("../internals/well-known-symbol")("toStringTag"),w="Arguments"==C(function(){return arguments}());be.exports=M?C:function(I){var D;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(D=function(d,f){try{return d[f]}catch{}}(I=Object(I),b))?D:w?C(I):"Object"==(D=C(I))&&"function"==typeof I.callee?"Arguments":D}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(m,be,Z){"use strict";var M=m("../internals/object-define-property").f,C=m("../internals/object-create"),b=m("../internals/redefine-all"),w=m("../internals/function-bind-context"),I=m("../internals/an-instance"),D=m("../internals/iterate"),d=m("../internals/define-iterator"),f=m("../internals/set-species"),h=m("../internals/descriptors"),p=m("../internals/internal-metadata").fastKey,g=(m=m("../internals/internal-state")).set,x=m.getterFor;be.exports={getConstructor:function(E,S,k,q){function J($,ne,Y){var we,Se=K($),oe=G($,ne);return oe?oe.value=Y:(Se.last=oe={index:we=p(ne,!0),key:ne,value:Y,previous:ne=Se.last,next:void 0,removed:!1},Se.first||(Se.first=oe),ne&&(ne.next=oe),h?Se.size++:$.size++,"F"!==we&&(Se.index[we]=oe)),$}function G(we,ne){we=K(we);var Y,Se=p(ne);if("F"!==Se)return we.index[Se];for(Y=we.first;Y;Y=Y.next)if(Y.key==ne)return Y}var V=E(function($,ne){I($,V,S),g($,{type:S,index:C(null),first:void 0,last:void 0,size:0}),h||($.size=0),null!=ne&&D(ne,$[q],$,k)}),K=x(S);return b(V.prototype,{clear:function(){for(var $=K(this),ne=$.index,Y=$.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=void 0),delete ne[Y.index],Y=Y.next;$.first=$.last=void 0,h?$.size=0:this.size=0},delete:function(Se){var ne,Y,we=K(this);return(Se=G(this,Se))&&(ne=Se.next,Y=Se.previous,delete we.index[Se.index],Se.removed=!0,Y&&(Y.next=ne),ne&&(ne.previous=Y),we.first==Se&&(we.first=ne),we.last==Se&&(we.last=Y),h?we.size--:this.size--),!!Se},forEach:function($){for(var ne,Y=K(this),we=w($,1<arguments.length?arguments[1]:void 0,3);ne=ne?ne.next:Y.first;)for(we(ne.value,ne.key,this);ne&&ne.removed;)ne=ne.previous},has:function($){return!!G(this,$)}}),b(V.prototype,k?{get:function($){return($=G(this,$))&&$.value},set:function($,ne){return J(this,0===$?0:$,ne)}}:{add:function($){return J(this,$=0===$?0:$,$)}}),h&&M(V.prototype,"size",{get:function(){return K(this).size}}),V},setStrong:function(E,S,k){var q=S+" Iterator",J=x(S),G=x(q);d(E,S,function(V,K){g(this,{type:q,target:V,state:J(V),kind:K,last:void 0})},function(){for(var V=G(this),K=V.kind,$=V.last;$&&$.removed;)$=$.previous;return V.target&&(V.last=$=$?$.next:V.state.first)?"keys"==K?{value:$.key,done:!1}:"values"==K?{value:$.value,done:!1}:{value:[$.key,$.value],done:!1}:{value:V.target=void 0,done:!0}},k?"entries":"values",!k,!0),f(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(g,be,Z){"use strict";function M(J){return J.frozen||(J.frozen=new C)}function C(){this.entries=[]}function b(J,G){return S(J.entries,function(V){return V[0]===G})}var w=g("../internals/redefine-all"),I=g("../internals/internal-metadata").getWeakData,D=g("../internals/an-object"),d=g("../internals/is-object"),f=g("../internals/an-instance"),h=g("../internals/iterate"),p=g("../internals/array-iteration"),m=g("../internals/has"),x=(g=g("../internals/internal-state")).set,E=g.getterFor,S=p.find,k=p.findIndex,q=0;C.prototype={get:function(J){if(J=b(this,J))return J[1]},has:function(J){return!!b(this,J)},set:function(J,G){var V=b(this,J);V?V[1]=G:this.entries.push([J,G])},delete:function(J){var G=k(this.entries,function(V){return V[0]===J});return~G&&this.entries.splice(G,1),!!~G}},be.exports={getConstructor:function(J,G,V,K){function $(we,Se,oe){var ge=Y(we),re=I(D(Se),!0);return!0===re?M(ge).set(Se,oe):re[ge.id]=oe,we}var ne=J(function(we,Se){f(we,ne,G),x(we,{type:G,id:q++,frozen:void 0}),null!=Se&&h(Se,we[K],we,V)}),Y=E(G);return w(ne.prototype,{delete:function(we){var Se,oe=Y(this);return!!d(we)&&(!0===(Se=I(we))?M(oe).delete(we):Se&&m(Se,oe.id)&&delete Se[oe.id])},has:function(we){var Se,oe=Y(this);return!!d(we)&&(!0===(Se=I(we))?M(oe).has(we):Se&&m(Se,oe.id))}}),w(ne.prototype,V?{get:function(we){var Se,oe=Y(this);if(d(we))return!0===(Se=I(we))?M(oe).get(we):Se?Se[oe.id]:void 0},set:function(we,Se){return $(this,we,Se)}}:{add:function(we){return $(this,we,!0)}}),ne}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/global"),b=a("../internals/is-forced"),w=a("../internals/redefine"),I=a("../internals/internal-metadata"),D=a("../internals/iterate"),d=a("../internals/an-instance"),f=a("../internals/is-object"),h=a("../internals/fails"),p=a("../internals/check-correctness-of-iteration"),m=a("../internals/set-to-string-tag"),g=a("../internals/inherit-if-required");be.exports=function(x,E,S){function k(re){var Q=Se[re];w(Se,re,"add"==re?function(fe){return Q.call(this,0===fe?0:fe),this}:"delete"==re?function(fe){return!(ne&&!f(fe))&&Q.call(this,0===fe?0:fe)}:"get"==re?function(fe){return ne&&!f(fe)?void 0:Q.call(this,0===fe?0:fe)}:"has"==re?function(fe){return!(ne&&!f(fe))&&Q.call(this,0===fe?0:fe)}:function(fe,Ce){return Q.call(this,0===fe?0:fe,Ce),this})}var q,J,G,V,K,$=-1!==x.indexOf("Map"),ne=-1!==x.indexOf("Weak"),Y=$?"set":"add",we=C[x],Se=we&&we.prototype,oe=we,ge={};return b(x,"function"!=typeof we||!(ne||Se.forEach&&!h(function(){(new we).entries().next()})))?(oe=S.getConstructor(E,x,$,Y),I.REQUIRED=!0):b(x,!0)&&(J=(q=new oe)[Y](ne?{}:-0,1)!=q,G=h(function(){q.has(1)}),V=p(function(re){new we(re)}),K=!ne&&h(function(){for(var re=new we,Q=5;Q--;)re[Y](Q,Q);return!re.has(-0)}),V||(((oe=E(function(re,Q){return d(re,oe,x),re=g(new we,re,oe),null!=Q&&D(Q,re[Y],re,$),re})).prototype=Se).constructor=oe),(G||K)&&(k("delete"),k("has"),$&&k("get")),(K||J)&&k(Y),ne&&Se.clear&&delete Se.clear),ge[x]=oe,M({global:!0,forced:oe!=we},ge),m(oe,x),ne||S.setStrong(oe,x,$),oe}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(a,be,Z){var M=a("../internals/has"),C=a("../internals/own-keys"),b=a("../internals/object-get-own-property-descriptor"),w=a("../internals/object-define-property");be.exports=function(I,D){for(var d=C(D),f=w.f,h=b.f,p=0;p<d.length;p++){var m=d[p];M(I,m)||f(I,m,h(D,m))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(a,be,Z){var M=a("../internals/well-known-symbol")("match");be.exports=function(C){var b=/./;try{"/./"[C](b)}catch{try{return b[M]=!1,"/./"[C](b)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(a,be,Z){a=a("../internals/fails"),be.exports=!a(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},{"../internals/fails":51}],36:[function(a,be,Z){var M=a("../internals/require-object-coercible"),C=/"/g;be.exports=function(d,w,I,D){d=String(M(d));var f="<"+w;return""!==I&&(f+=" "+I+'="'+String(D).replace(C,"&quot;")+'"'),f+">"+d+"</"+w+">"}},{"../internals/require-object-coercible":115}],37:[function(a,be,Z){"use strict";function M(){return this}var C=a("../internals/iterators-core").IteratorPrototype,b=a("../internals/object-create"),w=a("../internals/create-property-descriptor"),I=a("../internals/set-to-string-tag"),D=a("../internals/iterators");be.exports=function(d,f,h){return f+=" Iterator",d.prototype=b(C,{next:w(1,h)}),I(d,f,!1,!0),D[f]=M,d}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/object-define-property"),b=a("../internals/create-property-descriptor");be.exports=M?function(w,I,D){return C.f(w,I,b(1,D))}:function(w,I,D){return w[I]=D,w}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(a,be,Z){be.exports=function(M,C){return{enumerable:!(1&M),configurable:!(2&M),writable:!(4&M),value:C}}},{}],40:[function(a,be,Z){"use strict";var M=a("../internals/to-primitive"),C=a("../internals/object-define-property"),b=a("../internals/create-property-descriptor");be.exports=function(w,I,D){(I=M(I))in w?C.f(w,I,b(0,D)):w[I]=D}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(g,be,Z){"use strict";function M(){return this}var C=g("../internals/export"),b=g("../internals/create-iterator-constructor"),w=g("../internals/object-get-prototype-of"),I=g("../internals/object-set-prototype-of"),D=g("../internals/set-to-string-tag"),d=g("../internals/create-non-enumerable-property"),f=g("../internals/redefine"),h=g("../internals/well-known-symbol"),p=g("../internals/is-pure"),m=g("../internals/iterators"),x=(g=g("../internals/iterators-core")).IteratorPrototype,E=g.BUGGY_SAFARI_ITERATORS,S=h("iterator"),k="values",q="entries";be.exports=function(J,G,V,ge,$,ne,Y){function we(le){if(le===$&&Ce)return Ce;if(!E&&le in Q)return Q[le];switch(le){case"keys":case k:case q:return function(){return new V(this,le)}}return function(){return new V(this)}}b(V,G,ge),ge=G+" Iterator";var Se,oe,re=!1,Q=J.prototype,fe=Q[S]||Q["@@iterator"]||$&&Q[$],Ce=!E&&fe||we($),it="Array"==G&&Q.entries||fe;if(it&&(it=w(it.call(new J)),x!==Object.prototype&&it.next&&(p||w(it)===x||(I?I(it,x):"function"!=typeof it[S]&&d(it,S,M)),D(it,ge,!0,!0),p&&(m[ge]=M))),$==k&&fe&&fe.name!==k&&(re=!0,Ce=function(){return fe.call(this)}),p&&!Y||Q[S]===Ce||d(Q,S,Ce),m[G]=Ce,$)if(Se={values:we(k),keys:ne?Ce:we("keys"),entries:we(q)},Y)for(oe in Se)!E&&!re&&oe in Q||f(Q,oe,Se[oe]);else C({target:G,proto:!0,forced:E||re},Se);return Se}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(a,be,Z){var M=a("../internals/path"),C=a("../internals/has"),b=a("../internals/well-known-symbol-wrapped"),w=a("../internals/object-define-property").f;be.exports=function(I){var D=M.Symbol||(M.Symbol={});C(D,I)||w(D,I,{value:b.f(I)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(a,be,Z){a=a("../internals/fails"),be.exports=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(C,be,Z){var M=C("../internals/global"),b=(C=C("../internals/is-object"),M.document),w=C(b)&&C(b.createElement);be.exports=function(I){return w?b.createElement(I):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(a,be,Z){be.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(a,be,Z){a=a("../internals/engine-user-agent"),be.exports=/(iphone|ipod|ipad).*applewebkit/i.test(a)},{"../internals/engine-user-agent":47}],47:[function(a,be,Z){a=a("../internals/get-built-in"),be.exports=a("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(b,be,Z){var M,C,w=b("../internals/global");b=b("../internals/engine-user-agent"),(w=(w=(w=w.process)&&w.versions)&&w.v8)?C=(M=w.split("."))[0]+M[1]:b&&(!(M=b.match(/Edge\/(\d+)/))||74<=M[1])&&(M=b.match(/Chrome\/(\d+)/))&&(C=M[1]),be.exports=C&&+C},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(a,be,Z){be.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(a,be,Z){var M=a("../internals/global"),C=a("../internals/object-get-own-property-descriptor").f,b=a("../internals/create-non-enumerable-property"),w=a("../internals/redefine"),I=a("../internals/set-global"),D=a("../internals/copy-constructor-properties"),d=a("../internals/is-forced");be.exports=function(f,h){var p,m,g,x=f.target,E=f.global,S=f.stat,k=E?M:S?M[x]||I(x,{}):(M[x]||{}).prototype;if(k)for(p in h){if(m=h[p],g=f.noTargetGet?(g=C(k,p))&&g.value:k[p],!d(E?p:x+(S?".":"#")+p,f.forced)&&void 0!==g){if(typeof m==typeof g)continue;D(m,g)}(f.sham||g&&g.sham)&&b(m,"sham",!0),w(k,p,m,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(a,be,Z){be.exports=function(M){try{return!!M()}catch{return!0}}},{}],52:[function(h,be,Z){"use strict";h("../modules/es.regexp.exec");var M=h("../internals/redefine"),C=h("../internals/fails"),b=h("../internals/well-known-symbol"),w=h("../internals/regexp-exec"),I=h("../internals/create-non-enumerable-property"),D=b("species"),d=!C(function(){var g=/./;return g.exec=function(){var x=[];return x.groups={a:"7"},x},"7"!=="".replace(g,"$<a>")}),f="$0"==="a".replace(/./,"$0"),p=!!/./[h=b("replace")]&&""===/./[h]("a","$0"),m=!C(function(){var g=(x=/(?:)/).exec,x=(x.exec=function(){return g.apply(this,arguments)},"ab".split(x));return 2!==x.length||"a"!==x[0]||"b"!==x[1]});be.exports=function(g,x,E,S){var k,q,J=b(g),G=!C(function(){var K={};return K[J]=function(){return 7},7!=""[g](K)}),V=G&&!C(function(){var K=!1,$=/a/;return"split"===g&&(($={constructor:{}}).constructor[D]=function(){return $},$.flags="",$[J]=/./[J]),$.exec=function(){return K=!0,null},$[J](""),!K});G&&V&&("replace"!==g||d&&f&&!p)&&("split"!==g||m)||(k=/./[J],E=(V=E(J,""[g],function(K,$,ne,Y,we){return $.exec===w?G&&!we?{done:!0,value:k.call($,ne,Y)}:{done:!0,value:K.call(ne,$,Y)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}))[0],q=V[1],M(String.prototype,g,E),M(RegExp.prototype,J,2==x?function(K,$){return q.call(K,this,$)}:function(K){return q.call(K,this)})),S&&I(RegExp.prototype[J],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(a,be,Z){"use strict";var C=a("../internals/is-array"),b=a("../internals/to-length"),w=a("../internals/function-bind-context");be.exports=function M(I,D,d,f,h,p,m,g){for(var x,E=h,S=0,k=!!m&&w(m,g,3);S<f;){if(S in d){if(x=k?k(d[S],S,D):d[S],0<p&&C(x))E=M(I,D,x,b(x.length),E,p-1)-1;else{if(9007199254740991<=E)throw TypeError("Exceed the acceptable array length");I[E]=x}E++}S++}return E}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(a,be,Z){a=a("../internals/fails"),be.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(a,be,Z){var M=a("../internals/a-function");be.exports=function(C,b,w){if(M(C),void 0===b)return C;switch(w){case 0:return function(){return C.call(b)};case 1:return function(I){return C.call(b,I)};case 2:return function(I,D){return C.call(b,I,D)};case 3:return function(I,D,d){return C.call(b,I,D,d)}}return function(){return C.apply(b,arguments)}}},{"../internals/a-function":5}],56:[function(a,be,Z){"use strict";var M=a("../internals/a-function"),C=a("../internals/is-object"),b=[].slice,w={};be.exports=Function.bind||function(I){var D=M(this),d=b.call(arguments,1),f=function(){var h=d.concat(b.call(arguments));if(this instanceof f){var p=D,m=h.length,g=h;if(!(m in w)){for(var x=[],E=0;E<m;E++)x[E]="a["+E+"]";w[m]=Function("C,a","return new C("+x.join(",")+")")}return w[m](p,g)}return D.apply(I,h)};return C(D.prototype)&&(f.prototype=D.prototype),f}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(a,be,Z){function M(w){return"function"==typeof w?w:void 0}var C=a("../internals/path"),b=a("../internals/global");be.exports=function(w,I){return arguments.length<2?M(C[w])||M(b[w]):C[w]&&C[w][I]||b[w]&&b[w][I]}},{"../internals/global":60,"../internals/path":106}],58:[function(a,be,Z){var M=a("../internals/classof"),C=a("../internals/iterators"),b=a("../internals/well-known-symbol")("iterator");be.exports=function(w){if(null!=w)return w[b]||w["@@iterator"]||C[M(w)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(a,be,Z){var M=a("../internals/an-object"),C=a("../internals/get-iterator-method");be.exports=function(b){var w=C(b);if("function"!=typeof w)throw TypeError(String(b)+" is not iterable");return M(w.call(b))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(a,be,Z){(function(M){function C(b){return b&&b.Math==Math&&b}be.exports=C("object"==typeof globalThis&&globalThis)||C("object"==typeof window&&window)||C("object"==typeof self&&self)||C("object"==typeof M&&M)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(a,be,Z){var M={}.hasOwnProperty;be.exports=function(C,b){return M.call(C,b)}},{}],62:[function(a,be,Z){be.exports={}},{}],63:[function(a,be,Z){var M=a("../internals/global");be.exports=function(C,b){var w=M.console;w&&w.error&&(1===arguments.length?w.error(C):w.error(C,b))}},{"../internals/global":60}],64:[function(a,be,Z){a=a("../internals/get-built-in"),be.exports=a("document","documentElement")},{"../internals/get-built-in":57}],65:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/fails"),b=a("../internals/document-create-element");be.exports=!M&&!C(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(a,be,Z){var M=Math.abs,C=Math.pow,b=Math.floor,w=Math.log,I=Math.LN2;be.exports={pack:function(D,d,E){var h,p,m,g=new Array(E),x=8*E-d-1,S=(E=(1<<x)-1)>>1,k=23===d?C(2,-24)-C(2,-77):0,q=D<0||0===D&&1/D<0?1:0,J=0;for((D=M(D))!=D||D===1/0?(p=D!=D?1:0,h=E):(h=b(w(D)/I),D*(m=C(2,-h))<1&&(h--,m*=2),2<=(D+=1<=h+S?k/m:k*C(2,1-S))*m&&(h++,m/=2),E<=h+S?(p=0,h=E):1<=h+S?(p=(D*m-1)*C(2,d),h+=S):(p=D*C(2,S-1)*C(2,d),h=0));8<=d;g[J++]=255&p,p/=256,d-=8);for(h=h<<d|p,x+=d;0<x;g[J++]=255&h,h/=256,x-=8);return g[--J]|=128*q,g},unpack:function(D,d){var f,E,h=D.length,p=(1<<(E=8*h-d-1))-1,m=p>>1,g=E-7,x=h-1,S=127&(E=D[x--]);for(E>>=7;0<g;S=256*S+D[x],x--,g-=8);for(f=S&(1<<-g)-1,S>>=-g,g+=d;0<g;f=256*f+D[x],x--,g-=8);if(0===S)S=1-m;else{if(S===p)return f?NaN:E?-1/0:1/0;f+=C(2,d),S-=m}return(E?-1:1)*f*C(2,S-d)}}},{}],67:[function(a,be,Z){var M=a("../internals/fails"),C=a("../internals/classof-raw"),b="".split;be.exports=M(function(){return!Object("z").propertyIsEnumerable(0)})?function(w){return"String"==C(w)?b.call(w,""):Object(w)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(a,be,Z){var M=a("../internals/is-object"),C=a("../internals/object-set-prototype-of");be.exports=function(b,w,I){return C&&"function"==typeof(w=w.constructor)&&w!==I&&M(w=w.prototype)&&w!==I.prototype&&C(b,w),b}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(M,be,Z){M=M("../internals/shared-store");var C=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(b){return C.call(b)}),be.exports=M.inspectSource},{"../internals/shared-store":121}],70:[function(a,be,Z){function M(g){I(g,f,{value:{objectID:"O"+ ++h,weakData:{}}})}var C=a("../internals/hidden-keys"),b=a("../internals/is-object"),w=a("../internals/has"),I=a("../internals/object-define-property").f,D=a("../internals/uid"),d=a("../internals/freezing"),f=D("meta"),h=0,p=Object.isExtensible||function(){return!0},m=be.exports={REQUIRED:!1,fastKey:function(g,x){if(!b(g))return"symbol"==typeof g?g:("string"==typeof g?"S":"P")+g;if(!w(g,f)){if(!p(g))return"F";if(!x)return"E";M(g)}return g[f].objectID},getWeakData:function(g,x){if(!w(g,f)){if(!p(g))return!0;if(!x)return!1;M(g)}return g[f].weakData},onFreeze:function(g){return d&&m.REQUIRED&&p(g)&&!w(g,f)&&M(g),g}};C[f]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(E,be,Z){var M,C,b,w,I,D,d,f,h=E("../internals/native-weak-map"),S=E("../internals/global"),p=E("../internals/is-object"),m=E("../internals/create-non-enumerable-property"),g=E("../internals/has"),x=E("../internals/shared-key");E=E("../internals/hidden-keys"),S=S.WeakMap,d=h?(M=new S,C=M.get,b=M.has,w=M.set,I=function(k,q){return w.call(M,k,q),q},D=function(k){return C.call(M,k)||{}},function(k){return b.call(M,k)}):(E[f=x("state")]=!0,I=function(k,q){return m(k,f,q),q},D=function(k){return g(k,f)?k[f]:{}},function(k){return g(k,f)}),be.exports={set:I,get:D,has:d,enforce:function(k){return d(k)?D(k):I(k,{})},getterFor:function(k){return function(q){if(p(q)&&(q=D(q)).type===k)return q;throw TypeError("Incompatible receiver, "+k+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(a,be,Z){var M=a("../internals/well-known-symbol"),C=a("../internals/iterators"),b=M("iterator"),w=Array.prototype;be.exports=function(I){return void 0!==I&&(C.Array===I||w[b]===I)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(a,be,Z){var M=a("../internals/classof-raw");be.exports=Array.isArray||function(C){return"Array"==M(C)}},{"../internals/classof-raw":28}],74:[function(a,be,Z){function M(f,h){return(f=I[w(f)])==d||f!=D&&("function"==typeof h?C(h):!!h)}var C=a("../internals/fails"),b=/#|\.prototype\./,w=M.normalize=function(f){return String(f).replace(b,".").toLowerCase()},I=M.data={},D=M.NATIVE="N",d=M.POLYFILL="P";be.exports=M},{"../internals/fails":51}],75:[function(a,be,Z){be.exports=function(M){return"object"==typeof M?null!==M:"function"==typeof M}},{}],76:[function(a,be,Z){be.exports=!1},{}],77:[function(a,be,Z){var M=a("../internals/is-object"),C=a("../internals/classof-raw"),b=a("../internals/well-known-symbol")("match");be.exports=function(w){var I;return M(w)&&(void 0!==(I=w[b])?!!I:"RegExp"==C(w))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(a,be,Z){function M(f,h){this.stopped=f,this.result=h}var C=a("../internals/an-object"),b=a("../internals/is-array-iterator-method"),w=a("../internals/to-length"),I=a("../internals/function-bind-context"),D=a("../internals/get-iterator-method"),d=a("../internals/call-with-safe-iteration-closing");(be.exports=function(f,h,p,m,g){var x,E,S,k,q,J,G=I(h,p,m?2:1);if(g)x=f;else{if("function"!=typeof(h=D(f)))throw TypeError("Target is not iterable");if(b(h)){for(E=0,S=w(f.length);E<S;E++)if((k=m?G(C(J=f[E])[0],J[1]):G(f[E]))&&k instanceof M)return k;return new M(!1)}x=h.call(f)}for(q=x.next;!(J=q.call(x)).done;)if("object"==typeof(k=d(x,G,J.value,m))&&k&&k instanceof M)return k;return new M(!1)}).stop=function(f){return new M(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(D,be,Z){"use strict";var M,C,b=D("../internals/object-get-prototype-of"),w=D("../internals/create-non-enumerable-property"),I=D("../internals/has"),d=D("../internals/well-known-symbol"),f=(D=D("../internals/is-pure"),d=d("iterator"),!1);[].keys&&("next"in(C=[].keys())?(b=b(b(C)))!==Object.prototype&&(M=b):f=!0),null==M&&(M={}),D||I(M,d)||w(M,d,function(){return this}),be.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(a,be,Z){be.exports={}},{}],81:[function(a,be,Z){be.exports=Math.sign||function(M){return 0==(M=+M)||M!=M?M:M<0?-1:1}},{}],82:[function(m,be,Z){var M,C,b,w,I,D,d,f,h=m("../internals/global"),q=m("../internals/object-get-own-property-descriptor").f,k=m("../internals/classof-raw"),p=m("../internals/task").set,g=(m=m("../internals/engine-is-ios"),h.MutationObserver||h.WebKitMutationObserver),x=h.process,E=h.Promise,S="process"==k(x);k=q(h,"queueMicrotask"),(q=k&&k.value)||(M=function(){var J,G;for(S&&(J=x.domain)&&J.exit();C;){G=C.fn,C=C.next;try{G()}catch(V){throw C?w():b=void 0,V}}b=void 0,J&&J.enter()},w=S?function(){x.nextTick(M)}:g&&!m?(I=!0,D=document.createTextNode(""),new g(M).observe(D,{characterData:!0}),function(){D.data=I=!I}):E&&E.resolve?(d=E.resolve(void 0),f=d.then,function(){f.call(d,M)}):function(){p.call(h,M)}),be.exports=q||function(J){J={fn:J,next:void 0},b&&(b.next=J),C||(C=J,w()),b=J}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(a,be,Z){a=a("../internals/global"),be.exports=a.Promise},{"../internals/global":60}],84:[function(a,be,Z){a=a("../internals/fails"),be.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(a,be,Z){var M=a("../internals/fails"),C=a("../internals/well-known-symbol"),b=a("../internals/is-pure"),w=C("iterator");be.exports=!M(function(){var I=new URL("b?a=1&b=2&c=3","http://a"),D=I.searchParams,d="";return I.pathname="c%20d",D.forEach(function(f,h){D.delete("b"),d+=h+f}),b&&!I.toJSON||!D.sort||"http://a/c%20d?a=1&c=3"!==I.href||"3"!==D.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!D[w]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(M,be,Z){var C=M("../internals/global");M=M("../internals/inspect-source"),be.exports="function"==typeof(C=C.WeakMap)&&/native code/.test(M(C))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(a,be,Z){"use strict";function M(b){var w,I;this.promise=new b(function(D,d){if(void 0!==w||void 0!==I)throw TypeError("Bad Promise constructor");w=D,I=d}),this.resolve=C(w),this.reject=C(I)}var C=a("../internals/a-function");be.exports.f=function(b){return new M(b)}},{"../internals/a-function":5}],88:[function(a,be,Z){var M=a("../internals/is-regexp");be.exports=function(C){if(M(C))throw TypeError("The method doesn't accept regular expressions");return C}},{"../internals/is-regexp":77}],89:[function(a,be,Z){var M=a("../internals/global").isFinite;be.exports=Number.isFinite||function(C){return"number"==typeof C&&M(C)}},{"../internals/global":60}],90:[function(a,be,Z){"use strict";var M=a("../internals/descriptors"),C=a("../internals/fails"),b=a("../internals/object-keys"),w=a("../internals/object-get-own-property-symbols"),I=a("../internals/object-property-is-enumerable"),D=a("../internals/to-object"),d=a("../internals/indexed-object"),f=Object.assign,h=Object.defineProperty;be.exports=!f||C(function(){var p,m,g,x;return!(!M||1===f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(m={},x="abcdefghijklmnopqrst",(p={})[g=Symbol()]=7,x.split("").forEach(function(E){m[E]=E}),7!=f({},p)[g]||b(f({},m)).join("")!=x)})?function(p,m){for(var g=D(p),x=arguments.length,E=1,S=w.f,k=I.f;E<x;)for(var q,J=d(arguments[E++]),G=S?b(J).concat(S(J)):b(J),V=G.length,K=0;K<V;)q=G[K++],M&&!k.call(J,q)||(g[q]=J[q]);return g}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(h,be,Z){function M(){}var C,b=h("../internals/an-object"),w=h("../internals/object-define-properties"),I=h("../internals/enum-bug-keys"),D=h("../internals/hidden-keys"),d=h("../internals/html"),f=h("../internals/document-create-element"),p=(h=h("../internals/shared-key"),"prototype"),m="script",g=h("IE_PROTO"),x=function(S){return"<"+m+">"+S+"</"+m+">"},E=function(){try{C=document.domain&&new ActiveXObject("htmlfile")}catch{}E=C?((S=C).write(x("")),S.close(),k=S.parentWindow.Object,S=null,k):(S=f("iframe"),k="java"+m+":",S.style.display="none",d.appendChild(S),S.src=String(k),(k=S.contentWindow.document).open(),k.write(x("document.F=Object")),k.close(),k.F);for(var S,k,q=I.length;q--;)delete E[p][I[q]];return E()};D[g]=!0,be.exports=Object.create||function(S,k){var q;return null!==S?(M[p]=b(S),q=new M,M[p]=null,q[g]=S):q=E(),void 0===k?q:w(q,k)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/object-define-property"),b=a("../internals/an-object"),w=a("../internals/object-keys");be.exports=M?Object.defineProperties:function(I,D){b(I);for(var d,f=w(D),h=f.length,p=0;p<h;)C.f(I,d=f[p++],D[d]);return I}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/ie8-dom-define"),b=a("../internals/an-object"),w=a("../internals/to-primitive"),I=Object.defineProperty;Z.f=M?I:function(D,d,f){if(b(D),d=w(d,!0),b(f),C)try{return I(D,d,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(D[d]=f.value),D}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/object-property-is-enumerable"),b=a("../internals/create-property-descriptor"),w=a("../internals/to-indexed-object"),I=a("../internals/to-primitive"),D=a("../internals/has"),d=a("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;Z.f=M?f:function(h,p){if(h=w(h),p=I(p,!0),d)try{return f(h,p)}catch{}if(D(h,p))return b(!C.f.call(h,p),h[p])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(a,be,Z){var M=a("../internals/to-indexed-object"),C=a("../internals/object-get-own-property-names").f,b={}.toString,w="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];be.exports.f=function(I){if(!w||"[object Window]"!=b.call(I))return C(M(I));try{return C(I)}catch{return w.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(a,be,Z){var M=a("../internals/object-keys-internal"),C=a("../internals/enum-bug-keys").concat("length","prototype");Z.f=Object.getOwnPropertyNames||function(b){return M(b,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(a,be,Z){Z.f=Object.getOwnPropertySymbols},{}],98:[function(w,be,Z){var M=w("../internals/has"),C=w("../internals/to-object"),b=w("../internals/shared-key"),I=(w=w("../internals/correct-prototype-getter"),b("IE_PROTO")),D=Object.prototype;be.exports=w?Object.getPrototypeOf:function(d){return d=C(d),M(d,I)?d[I]:"function"==typeof d.constructor&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?D:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(a,be,Z){var M=a("../internals/has"),C=a("../internals/to-indexed-object"),b=a("../internals/array-includes").indexOf,w=a("../internals/hidden-keys");be.exports=function(I,D){var d,f=C(I),h=0,p=[];for(d in f)!M(w,d)&&M(f,d)&&p.push(d);for(;D.length>h;)!M(f,d=D[h++])||~b(p,d)||p.push(d);return p}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(a,be,Z){var M=a("../internals/object-keys-internal"),C=a("../internals/enum-bug-keys");be.exports=Object.keys||function(b){return M(b,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(a,be,Z){"use strict";var M={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,b=C&&!M.call({1:2},1);Z.f=b?function(w){return!!(w=C(this,w))&&w.enumerable}:M},{}],102:[function(a,be,Z){var M=a("../internals/an-object"),C=a("../internals/a-possible-prototype");be.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b,w=!1,I={};try{(b=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(I,[]),w=I instanceof Array}catch{}return function(D,d){return M(D),C(d),w?b.call(D,d):D.__proto__=d,D}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(a,be,Z){function M(D){return function(d){for(var f,h=w(d),p=b(h),m=p.length,g=0,x=[];g<m;)f=p[g++],C&&!I.call(h,f)||x.push(D?[f,h[f]]:h[f]);return x}}var C=a("../internals/descriptors"),b=a("../internals/object-keys"),w=a("../internals/to-indexed-object"),I=a("../internals/object-property-is-enumerable").f;be.exports={entries:M(!0),values:M(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(a,be,Z){"use strict";var M=a("../internals/to-string-tag-support"),C=a("../internals/classof");be.exports=M?{}.toString:function(){return"[object "+C(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(a,be,Z){var M=a("../internals/get-built-in"),C=a("../internals/object-get-own-property-names"),b=a("../internals/object-get-own-property-symbols"),w=a("../internals/an-object");be.exports=M("Reflect","ownKeys")||function(I){var D=C.f(w(I)),d=b.f;return d?D.concat(d(I)):D}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(a,be,Z){a=a("../internals/global"),be.exports=a},{"../internals/global":60}],107:[function(a,be,Z){be.exports=function(M){try{return{error:!1,value:M()}}catch(C){return{error:!0,value:C}}}},{}],108:[function(a,be,Z){var M=a("../internals/an-object"),C=a("../internals/is-object"),b=a("../internals/new-promise-capability");be.exports=function(w,I){return M(w),C(I)&&I.constructor===w?I:((0,(w=b.f(w)).resolve)(I),w.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(a,be,Z){var M=a("../internals/redefine");be.exports=function(C,b,w){for(var I in b)M(C,I,b[I],w);return C}},{"../internals/redefine":110}],110:[function(D,be,Z){var M=D("../internals/global"),C=D("../internals/create-non-enumerable-property"),b=D("../internals/has"),w=D("../internals/set-global"),I=D("../internals/inspect-source"),d=(D=D("../internals/internal-state")).get,f=D.enforce,h=String(String).split("String");(be.exports=function(p,m,g,k){var E=!!k&&!!k.unsafe,S=!!k&&!!k.enumerable;k=!!k&&!!k.noTargetGet,"function"==typeof g&&("string"!=typeof m||b(g,"name")||C(g,"name",m),f(g).source=h.join("string"==typeof m?m:"")),p===M?S?p[m]=g:w(m,g):(E?!k&&p[m]&&(S=!0):delete p[m],S?p[m]=g:C(p,m,g))})(Function.prototype,"toString",function(){return"function"==typeof this&&d(this).source||I(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(a,be,Z){var M=a("./classof-raw"),C=a("./regexp-exec");be.exports=function(b,w){var I=b.exec;if("function"==typeof I){if("object"!=typeof(I=I.call(b,w)))throw TypeError("RegExp exec method returned something other than an Object or null");return I}if("RegExp"!==M(b))throw TypeError("RegExp#exec called on incompatible receiver");return C.call(b,w)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(w,be,Z){"use strict";var M,C,b=w("./regexp-flags"),I=(w=w("./regexp-sticky-helpers"),RegExp.prototype.exec),D=String.prototype.replace,d=I,f=(C=/b*/g,I.call(M=/a/,"a"),I.call(C,"a"),0!==M.lastIndex||0!==C.lastIndex),h=w.UNSUPPORTED_Y||w.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];be.exports=d=f||p||h?function(m){var g,x,E,S,k=this,q=h&&k.sticky,J=b.call(k),G=k.source,V=0,K=m;return q&&(-1===(J=J.replace("y","")).indexOf("g")&&(J+="g"),K=String(m).slice(k.lastIndex),0<k.lastIndex&&(!k.multiline||k.multiline&&"\n"!==m[k.lastIndex-1])&&(G="(?: "+G+")",K=" "+K,V++),x=new RegExp("^(?:"+G+")",J)),p&&(x=new RegExp("^"+G+"$(?!\\s)",J)),f&&(g=k.lastIndex),E=I.call(q?x:k,K),q?E?(E.input=E.input.slice(V),E[0]=E[0].slice(V),E.index=k.lastIndex,k.lastIndex+=E[0].length):k.lastIndex=0:f&&E&&(k.lastIndex=k.global?E.index+E[0].length:g),p&&E&&1<E.length&&D.call(E[0],x,function(){for(S=1;S<arguments.length-2;S++)void 0===arguments[S]&&(E[S]=void 0)}),E}:d},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(a,be,Z){"use strict";var M=a("../internals/an-object");be.exports=function(){var C=M(this),b="";return C.global&&(b+="g"),C.ignoreCase&&(b+="i"),C.multiline&&(b+="m"),C.dotAll&&(b+="s"),C.unicode&&(b+="u"),C.sticky&&(b+="y"),b}},{"../internals/an-object":10}],114:[function(a,be,Z){"use strict";function M(C,b){return RegExp(C,b)}a=a("./fails"),Z.UNSUPPORTED_Y=a(function(){var C=M("a","y");return C.lastIndex=2,null!=C.exec("abcd")}),Z.BROKEN_CARET=a(function(){var C=M("^r","gy");return C.lastIndex=2,null!=C.exec("str")})},{"./fails":51}],115:[function(a,be,Z){be.exports=function(M){if(null==M)throw TypeError("Can't call method on "+M);return M}},{}],116:[function(a,be,Z){be.exports=Object.is||function(M,C){return M===C?0!==M||1/M==1/C:M!=M&&C!=C}},{}],117:[function(a,be,Z){var M=a("../internals/global"),C=a("../internals/create-non-enumerable-property");be.exports=function(b,w){try{C(M,b,w)}catch{M[b]=w}return w}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(a,be,Z){"use strict";var M=a("../internals/get-built-in"),C=a("../internals/object-define-property"),b=a("../internals/well-known-symbol"),w=a("../internals/descriptors"),I=b("species");be.exports=function(d){d=M(d),w&&d&&!d[I]&&(0,C.f)(d,I,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(a,be,Z){var M=a("../internals/object-define-property").f,C=a("../internals/has"),b=a("../internals/well-known-symbol")("toStringTag");be.exports=function(w,I,D){w&&!C(w=D?w:w.prototype,b)&&M(w,b,{configurable:!0,value:I})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(a,be,Z){var M=a("../internals/shared"),C=a("../internals/uid"),b=M("keys");be.exports=function(w){return b[w]||(b[w]=C(w))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(M,be,Z){var b=M("../internals/global"),C=(M=M("../internals/set-global"),"__core-js_shared__");b=b[C]||M(C,{}),be.exports=b},{"../internals/global":60,"../internals/set-global":117}],122:[function(a,be,Z){var M=a("../internals/is-pure"),C=a("../internals/shared-store");(be.exports=function(b,w){return C[b]||(C[b]=void 0!==w?w:{})})("versions",[]).push({version:"3.6.5",mode:M?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(a,be,Z){var M=a("../internals/an-object"),C=a("../internals/a-function"),b=a("../internals/well-known-symbol")("species");be.exports=function(D,I){return void 0===(D=M(D).constructor)||null==(D=M(D)[b])?I:C(D)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(a,be,Z){var M=a("../internals/fails");be.exports=function(C){return M(function(){var b=""[C]('"');return b!==b.toLowerCase()||3<b.split('"').length})}},{"../internals/fails":51}],125:[function(a,be,Z){function M(w){return function(f,h){f=String(b(f)),h=C(h);var d,p=f.length;return h<0||p<=h?w?"":void 0:(d=f.charCodeAt(h))<55296||56319<d||h+1===p||(p=f.charCodeAt(h+1))<56320||57343<p?w?f.charAt(h):d:w?f.slice(h,h+2):p-56320+(d-55296<<10)+65536}}var C=a("../internals/to-integer"),b=a("../internals/require-object-coercible");be.exports={codeAt:M(!1),charAt:M(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(a,be,Z){a=a("../internals/engine-user-agent"),be.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a)},{"../internals/engine-user-agent":47}],127:[function(a,be,Z){function M(D){return function(p,x,g){var m=(p=String(w(p))).length;return g=void 0===g?" ":String(g),(x=C(x))<=m||""==g?p:((m=b.call(g,I((x-=m)/g.length))).length>x&&(m=m.slice(0,x)),D?p+m:m+p)}}var C=a("../internals/to-length"),b=a("../internals/string-repeat"),w=a("../internals/require-object-coercible"),I=Math.ceil;be.exports={start:M(!1),end:M(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(a,be,Z){"use strict";function M(E){return E+22+75*(E<26)}function C(E){var S,k=[],q=(E=function(fe){for(var Ce=[],it=0,le=fe.length;it<le;){var z,ye=fe.charCodeAt(it++);55296<=ye&&ye<=56319&&it<le?56320==(64512&(z=fe.charCodeAt(it++)))?Ce.push(((1023&ye)<<10)+(1023&z)+65536):(Ce.push(ye),it--):Ce.push(ye)}return Ce}(E)).length,J=128,G=0,V=72;for(Y=0;Y<E.length;Y++)(S=E[Y])<128&&k.push(x(S));var K=k.length,$=K;for(K&&k.push("-");$<q;){for(var ne=b,Y=0;Y<E.length;Y++)J<=(S=E[Y])&&S<ne&&(ne=S);var we=$+1;if(ne-J>g((b-G)/we))throw RangeError(p);for(G+=(ne-J)*we,J=ne,Y=0;Y<E.length;Y++){if((S=E[Y])<J&&++G>b)throw RangeError(p);if(S==J){for(var Se=G,oe=w;;oe+=w){var ge=oe<=V?1:V+I<=oe?I:oe-V;if(Se<ge)break;var re=Se-ge,Q=w-ge;k.push(x(M(ge+re%Q))),Se=g(re/Q)}k.push(x(M(Se))),V=function(fe,Ce,it){var le=0;for(fe=it?g(fe/d):fe>>1,fe+=g(fe/Ce);m*I>>1<fe;le+=w)fe=g(fe/m);return g(le+(m+1)*fe/(fe+D))}(G,we,$==K),G=0,++$}}++G,++J}return k.join("")}var b=2147483647,w=36,I=26,D=38,d=700,f=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",m=w-1,g=Math.floor,x=String.fromCharCode;be.exports=function(E){for(var S,k=[],q=E.toLowerCase().replace(h,".").split("."),J=0;J<q.length;J++)k.push(f.test(S=q[J])?"xn--"+C(S):S);return k.join(".")}},{}],129:[function(a,be,Z){"use strict";var M=a("../internals/to-integer"),C=a("../internals/require-object-coercible");be.exports="".repeat||function(b){var w=String(C(this)),I="",D=M(b);if(D<0||D==1/0)throw RangeError("Wrong number of repetitions");for(;0<D;(D>>>=1)&&(w+=w))1&D&&(I+=w);return I}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(a,be,Z){var M=a("../internals/fails"),C=a("../internals/whitespaces");be.exports=function(b){return M(function(){return!!C[b]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[b]()||C[b].name!==b})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(b,be,Z){function M(D){return function(d){return d=String(C(d)),1&D&&(d=d.replace(w,"")),2&D?d.replace(I,""):d}}var C=b("../internals/require-object-coercible"),w=(b="["+b("../internals/whitespaces")+"]",RegExp("^"+b+b+"*")),I=RegExp(b+b+"*$");be.exports={start:M(1),end:M(2),trim:M(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(m,be,Z){function M($){return function(){K($)}}function C($){K($.data)}function b($){I.postMessage($+"",g.protocol+"//"+g.host)}var w,I=m("../internals/global"),D=m("../internals/fails"),d=m("../internals/classof-raw"),f=m("../internals/function-bind-context"),h=m("../internals/html"),p=m("../internals/document-create-element"),g=(m=m("../internals/engine-is-ios"),I.location),x=I.setImmediate,E=I.clearImmediate,S=I.process,k=I.MessageChannel,q=I.Dispatch,J=0,G={},V="onreadystatechange",K=function($){var ne;G.hasOwnProperty($)&&(ne=G[$],delete G[$],ne())};x&&E||(x=function($){for(var ne=[],Y=1;Y<arguments.length;)ne.push(arguments[Y++]);return G[++J]=function(){("function"==typeof $?$:Function($)).apply(void 0,ne)},w(J),J},E=function($){delete G[$]},"process"==d(S)?w=function($){S.nextTick(M($))}:q&&q.now?w=function($){q.now(M($))}:k&&!m?(m=(d=new k).port2,d.port1.onmessage=C,w=f(m.postMessage,m,1)):!I.addEventListener||"function"!=typeof postMessage||I.importScripts||D(b)||"file:"===g.protocol?w=V in p("script")?function($){h.appendChild(p("script"))[V]=function(){h.removeChild(this),K($)}}:function($){setTimeout(M($),0)}:(w=b,I.addEventListener("message",C,!1))),be.exports={set:x,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(a,be,Z){var M=a("../internals/classof-raw");be.exports=function(C){if("number"!=typeof C&&"Number"!=M(C))throw TypeError("Incorrect invocation");return+C}},{"../internals/classof-raw":28}],134:[function(a,be,Z){var M=a("../internals/to-integer"),C=Math.max,b=Math.min;be.exports=function(w,I){return(w=M(w))<0?C(w+I,0):b(w,I)}},{"../internals/to-integer":137}],135:[function(a,be,Z){var M=a("../internals/to-integer"),C=a("../internals/to-length");be.exports=function(w){if(void 0===w)return 0;w=M(w);var I=C(w);if(w!==I)throw RangeError("Wrong length or index");return I}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(a,be,Z){var M=a("../internals/indexed-object"),C=a("../internals/require-object-coercible");be.exports=function(b){return M(C(b))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(a,be,Z){var M=Math.ceil,C=Math.floor;be.exports=function(b){return isNaN(b=+b)?0:(0<b?C:M)(b)}},{}],138:[function(a,be,Z){var M=a("../internals/to-integer"),C=Math.min;be.exports=function(b){return 0<b?C(M(b),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(a,be,Z){var M=a("../internals/require-object-coercible");be.exports=function(C){return Object(M(C))}},{"../internals/require-object-coercible":115}],140:[function(a,be,Z){var M=a("../internals/to-positive-integer");be.exports=function(C,b){if((C=M(C))%b)throw RangeError("Wrong offset");return C}},{"../internals/to-positive-integer":141}],141:[function(a,be,Z){var M=a("../internals/to-integer");be.exports=function(C){if((C=M(C))<0)throw RangeError("The argument can't be less than 0");return C}},{"../internals/to-integer":137}],142:[function(a,be,Z){var M=a("../internals/is-object");be.exports=function(C,b){if(!M(C))return C;var w,I;if(b&&"function"==typeof(w=C.toString)&&!M(I=w.call(C))||"function"==typeof(w=C.valueOf)&&!M(I=w.call(C))||!b&&"function"==typeof(w=C.toString)&&!M(I=w.call(C)))return I;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(a,be,Z){var M={};M[a("../internals/well-known-symbol")("toStringTag")]="z",be.exports="[object z]"===String(M)},{"../internals/well-known-symbol":150}],144:[function(a,be,Z){"use strict";function M(Et,Kt){for(var yn=0,Yn=Kt.length,An=new(ft(Et))(Yn);yn<Yn;)An[yn]=Kt[yn++];return An}function C(Et,Kt){z(Et,Kt,{get:function(){return it(this)[Kt]}})}function b(Et){return Et instanceof gt||"ArrayBuffer"==(Et=K(Et))||"SharedArrayBuffer"==Et}function w(Et,Kt){return jt(Et)&&"symbol"!=typeof Kt&&Kt in Et&&String(+Kt)==String(Kt)}function I(Et,Kt){return w(Et,Kt=G(Kt,!0))?E(2,Et[Kt]):ye(Et,Kt)}function D(Et,Kt,yn){return!(w(Et,Kt=G(Kt,!0))&&$(yn)&&V(yn,"value"))||V(yn,"get")||V(yn,"set")||yn.configurable||V(yn,"writable")&&!yn.writable||V(yn,"enumerable")&&!yn.enumerable?z(Et,Kt,yn):(Et[Kt]=yn.value,Et)}var d=a("../internals/export"),f=a("../internals/global"),h=a("../internals/descriptors"),p=a("../internals/typed-array-constructors-require-wrappers"),m=a("../internals/array-buffer-view-core"),g=a("../internals/array-buffer"),x=a("../internals/an-instance"),E=a("../internals/create-property-descriptor"),S=a("../internals/create-non-enumerable-property"),k=a("../internals/to-length"),q=a("../internals/to-index"),J=a("../internals/to-offset"),G=a("../internals/to-primitive"),V=a("../internals/has"),K=a("../internals/classof"),$=a("../internals/is-object"),ne=a("../internals/object-create"),Y=a("../internals/object-set-prototype-of"),we=a("../internals/object-get-own-property-names").f,Se=a("../internals/typed-array-from"),oe=a("../internals/array-iteration").forEach,ge=a("../internals/set-species"),re=a("../internals/object-define-property"),Q=a("../internals/object-get-own-property-descriptor"),fe=a("../internals/internal-state"),Ce=a("../internals/inherit-if-required"),it=fe.get,le=fe.set,z=re.f,ye=Q.f,je=Math.round,Je=f.RangeError,gt=g.ArrayBuffer,Ct=g.DataView,$t=m.NATIVE_ARRAY_BUFFER_VIEWS,yt=m.TYPED_ARRAY_TAG,Ut=m.TypedArray,Xt=m.TypedArrayPrototype,ft=m.aTypedArrayConstructor,jt=m.isTypedArray,Lt="BYTES_PER_ELEMENT",Bt="Wrong length";h?($t||(Q.f=I,re.f=D,C(Xt,"buffer"),C(Xt,"byteOffset"),C(Xt,"byteLength"),C(Xt,"length")),d({target:"Object",stat:!0,forced:!$t},{getOwnPropertyDescriptor:I,defineProperty:D}),be.exports=function(bn,Kt,yn){function Yn(Pn,pt){z(Pn,pt,{get:function(){var bt=this,rt=pt;return(bt=it(bt)).view[Rn](rt*An+bt.byteOffset,!0)},set:function(bt){var rt=this,_t=pt;rt=it(rt),yn&&(bt=(bt=je(bt))<0?0:255<bt?255:255&bt),rt.view[Sr](_t*An+rt.byteOffset,bt,!0)},enumerable:!0})}var An=bn.match(/\d+$/)[0]/8,Jn=bn+(yn?"Clamped":"")+"Array",Rn="get"+bn,Sr="set"+bn,Bn=f[Jn],ur=Bn,Qn=(bn=ur&&ur.prototype,{});$t?p&&(ur=Kt(function(Pn,pt,bt,rt){return x(Pn,ur,Jn),Ce($(pt)?b(pt)?void 0!==rt?new Bn(pt,J(bt,An),rt):void 0!==bt?new Bn(pt,J(bt,An)):new Bn(pt):jt(pt)?M(ur,pt):Se.call(ur,pt):new Bn(q(pt)),Pn,ur)}),Y&&Y(ur,Ut),oe(we(Bn),function(Pn){Pn in ur||S(ur,Pn,Bn[Pn])}),ur.prototype=bn):(ur=Kt(function(Pn,pt,bt,rt){x(Pn,ur,Jn);var _t,vn,On=0,zn=0;if($(pt)){if(!b(pt))return jt(pt)?M(ur,pt):Se.call(ur,pt);var ir=pt;if(zn=J(bt,An),bt=pt.byteLength,void 0===rt){if(bt%An||(_t=bt-zn)<0)throw Je(Bt)}else if(bt<(_t=k(rt)*An)+zn)throw Je(Bt);vn=_t/An}else vn=q(pt),ir=new gt(_t=vn*An);for(le(Pn,{buffer:ir,byteOffset:zn,byteLength:_t,length:vn,view:new Ct(ir)});On<vn;)Yn(Pn,On++)}),Y&&Y(ur,Ut),bn=ur.prototype=ne(Xt)),bn.constructor!==ur&&S(bn,"constructor",ur),yt&&S(bn,yt,Jn),Qn[Jn]=ur,d({global:!0,forced:ur!=Bn,sham:!$t},Qn),Lt in ur||S(ur,Lt,An),Lt in bn||S(bn,Lt,An),ge(Jn)}):be.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(w,be,Z){var M=w("../internals/global"),C=w("../internals/fails"),b=w("../internals/check-correctness-of-iteration"),I=(w=w("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,M.ArrayBuffer),D=M.Int8Array;be.exports=!w||!C(function(){D(1)})||!C(function(){new D(-1)})||!b(function(d){new D,new D(null),new D(1.5),new D(d)},!0)||C(function(){return 1!==new D(new I(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(a,be,Z){var M=a("../internals/to-object"),C=a("../internals/to-length"),b=a("../internals/get-iterator-method"),w=a("../internals/is-array-iterator-method"),I=a("../internals/function-bind-context"),D=a("../internals/array-buffer-view-core").aTypedArrayConstructor;be.exports=function(d){var f,h,p,m,g,x,E=M(d),S=arguments.length,k=1<S?arguments[1]:void 0,q=void 0!==k,J=b(E);if(null!=J&&!w(J))for(x=(g=J.call(E)).next,E=[];!(m=x.call(g)).done;)E.push(m.value);for(q&&2<S&&(k=I(k,arguments[2],2)),h=C(E.length),p=new(D(this))(h),f=0;f<h;f++)p[f]=q?k(E[f],f):E[f];return p}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(a,be,Z){var M=0,C=Math.random();be.exports=function(b){return"Symbol("+String(void 0===b?"":b)+")_"+(++M+C).toString(36)}},{}],148:[function(a,be,Z){a=a("../internals/native-symbol"),be.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(a,be,Z){a=a("../internals/well-known-symbol"),Z.f=a},{"../internals/well-known-symbol":150}],150:[function(D,be,Z){var M=D("../internals/global"),C=D("../internals/shared"),b=D("../internals/has"),w=D("../internals/uid"),I=D("../internals/native-symbol"),d=(D=D("../internals/use-symbol-as-uid"),C("wks")),f=M.Symbol,h=D?f:f&&f.withoutSetter||w;be.exports=function(p){return b(d,p)||(d[p]=I&&b(f,p)?f[p]:h("Symbol."+p)),d[p]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(a,be,Z){be.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],152:[function(b,be,Z){"use strict";var M=b("../internals/export"),C=b("../internals/global"),I=b("../internals/array-buffer"),w=(b=b("../internals/set-species"),"ArrayBuffer");M({global:!0,forced:C[w]!==(I=I[w])},{ArrayBuffer:I}),b(w)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(E,be,Z){"use strict";var M=E("../internals/export"),C=E("../internals/fails"),b=E("../internals/is-array"),w=E("../internals/is-object"),I=E("../internals/to-object"),D=E("../internals/to-length"),d=E("../internals/create-property"),f=E("../internals/array-species-create"),h=E("../internals/array-method-has-species-support"),x=E("../internals/well-known-symbol"),p=(E=E("../internals/engine-v8-version"),x("isConcatSpreadable")),m=9007199254740991,g="Maximum allowed index exceeded";x=51<=E||!C(function(){var S=[];return S[p]=!1,S.concat()[0]!==S}),E=h("concat"),M({target:"Array",proto:!0,forced:!x||!E},{concat:function(S){for(var k,q,J,G,V,K=I(this),$=f(K,0),ne=0,Y=-1,we=arguments.length;Y<we;Y++)if(V=void 0,w(G=J=-1===Y?K:arguments[Y])&&(void 0!==(V=G[p])?V:b(G))){if(q=D(J.length),m<ne+q)throw TypeError(g);for(k=0;k<q;k++,ne++)k in J&&d($,ne,J[k])}else{if(m<=ne)throw TypeError(g);d($,ne++,J)}return $.length=ne,$}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/array-copy-within");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{copyWithin:C}),b("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").every,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("every"),w=w("every"),M({target:"Array",proto:!0,forced:!b||!w},{every:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/array-fill");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{fill:C}),b("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").filter,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("filter"),w=w("filter"),M({target:"Array",proto:!0,forced:!b||!w},{filter:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/array-iteration").findIndex,b=D("../internals/add-to-unscopables"),w=(D=D("../internals/array-method-uses-to-length"),"findIndex"),I=!0;D=D(w),w in[]&&Array(1)[w](function(){I=!1}),M({target:"Array",proto:!0,forced:I||!D},{findIndex:function(d){return C(this,d,1<arguments.length?arguments[1]:void 0)}}),b(w)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/flatten-into-array"),b=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/a-function"),D=a("../internals/array-species-create");M({target:"Array",proto:!0},{flatMap:function(d){var f,h=b(this),p=w(h.length);return I(d),(f=D(h,0)).length=C(f,h,h,p,0,1,d,1<arguments.length?arguments[1]:void 0),f}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/flatten-into-array"),b=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/to-integer"),D=a("../internals/array-species-create");M({target:"Array",proto:!0},{flat:function(){var d=arguments.length?arguments[0]:void 0,f=b(this),h=w(f.length),p=D(f,0);return p.length=C(p,f,f,h,0,void 0===d?1:I(d)),p}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(C,be,Z){"use strict";var M=C("../internals/export");C=C("../internals/array-for-each"),M({target:"Array",proto:!0,forced:[].forEach!=C},{forEach:C})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(a,be,Z){var M=a("../internals/export"),C=a("../internals/array-from");M({target:"Array",stat:!0,forced:!a("../internals/check-correctness-of-iteration")(function(b){Array.from(b)})},{from:C})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/array-includes").includes,b=a("../internals/add-to-unscopables");M({target:"Array",proto:!0,forced:!a("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(w){return C(this,w,1<arguments.length?arguments[1]:void 0)}}),b("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/array-includes").indexOf,I=D("../internals/array-method-is-strict"),b=(D=D("../internals/array-method-uses-to-length"),[].indexOf),w=!!b&&1/[1].indexOf(1,-0)<0;I=I("indexOf"),D=D("indexOf",{ACCESSORS:!0,1:0}),M({target:"Array",proto:!0,forced:w||!I||!D},{indexOf:function(d){return w?b.apply(this,arguments)||0:C(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(I,be,Z){"use strict";var M=I("../internals/to-indexed-object"),C=I("../internals/add-to-unscopables"),b=I("../internals/iterators"),w=I("../internals/internal-state"),D=(I=I("../internals/define-iterator"),"Array Iterator"),d=w.set,f=w.getterFor(D);be.exports=I(Array,"Array",function(h,p){d(this,{type:D,target:M(h),index:0,kind:p})},function(){var h=f(this),p=h.target,m=h.kind,g=h.index++;return!p||g>=p.length?{value:h.target=void 0,done:!0}:"keys"==m?{value:g,done:!1}:"values"==m?{value:p[g],done:!1}:{value:[g,p[g]],done:!1}},"values"),b.Arguments=b.Array,C("keys"),C("values"),C("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(I,be,Z){"use strict";var M=I("../internals/export"),w=I("../internals/indexed-object"),C=I("../internals/to-indexed-object"),b=(I=I("../internals/array-method-is-strict"),[].join);w=w!=Object,I=I("join",","),M({target:"Array",proto:!0,forced:w||!I},{join:function(D){return b.call(C(this),void 0===D?",":D)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(C,be,Z){C("../internals/export")({target:"Array",proto:!0,forced:(C=C("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:C})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").map,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("map"),w=w("map"),M({target:"Array",proto:!0,forced:!b||!w},{map:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(p,be,Z){"use strict";var M=p("../internals/export"),C=p("../internals/is-object"),b=p("../internals/is-array"),w=p("../internals/to-absolute-index"),I=p("../internals/to-length"),D=p("../internals/to-indexed-object"),d=p("../internals/create-property"),f=p("../internals/well-known-symbol"),h=p("../internals/array-method-has-species-support"),m=(p=p("../internals/array-method-uses-to-length"),h=h("slice"),p=p("slice",{ACCESSORS:!0,0:0,1:2}),f("species")),g=[].slice,x=Math.max;M({target:"Array",proto:!0,forced:!h||!p},{slice:function(E,S){var k,q,J,G=D(this),V=I(G.length),K=w(E,V),$=w(void 0===S?V:S,V);if(b(G)&&((k="function"==typeof(k=G.constructor)&&(k===Array||b(k.prototype))||C(k)&&null===(k=k[m])?void 0:k)===Array||void 0===k))return g.call(G,K,$);for(q=new(void 0===k?Array:k)(x($-K,0)),J=0;K<$;K++,J++)K in G&&d(q,J,G[K]);return q.length=J,q}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").some,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("some"),w=w("some"),M({target:"Array",proto:!0,forced:!b||!w},{some:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(h,be,Z){"use strict";var M=h("../internals/export"),C=h("../internals/to-absolute-index"),b=h("../internals/to-integer"),w=h("../internals/to-length"),I=h("../internals/to-object"),D=h("../internals/array-species-create"),d=h("../internals/create-property"),f=h("../internals/array-method-has-species-support"),p=(h=h("../internals/array-method-uses-to-length"),f=f("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),m=Math.min;M({target:"Array",proto:!0,forced:!f||!h},{splice:function(ne,x){var E,S,k,q,J,G,V=I(this),K=w(V.length),$=C(ne,K);if(0===(ne=arguments.length)?E=S=0:S=1===ne?(E=0,K-$):(E=ne-2,m(p(b(x),0),K-$)),9007199254740991<K+E-S)throw TypeError("Maximum allowed length exceeded");for(k=D(V,S),q=0;q<S;q++)(J=$+q)in V&&d(k,q,V[J]);if(E<(k.length=S)){for(q=$;q<K-S;q++)G=q+E,(J=q+S)in V?V[G]=V[J]:delete V[G];for(q=K;K-S+E<q;q--)delete V[q-1]}else if(S<E)for(q=K-S;$<q;q--)G=q+E-1,(J=q+S-1)in V?V[G]=V[J]:delete V[G];for(q=0;q<E;q++)V[q+$]=arguments[q+2];return V.length=K-S+E,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(a,be,Z){a("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(a,be,Z){a("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(C,be,Z){var M=C("../internals/descriptors"),b=(C=C("../internals/object-define-property").f,Function.prototype),w=b.toString,I=/^\s*function ([^ (]*)/;!M||"name"in b||C(b,"name",{configurable:!0,get:function(){try{return w.call(this).match(I)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(C,be,Z){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),be.exports=M("Map",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(M,be,Z){M=M("../internals/export");var C=Math.hypot,b=Math.abs,w=Math.sqrt;M({target:"Math",stat:!0,forced:!!C&&C(1/0,NaN)!==1/0},{hypot:function(I,D){for(var d,f,h=0,p=0,m=arguments.length,g=0;p<m;)g<(d=b(arguments[p++]))?(h=h*(f=g/d)*f+1,g=d):h+=0<d?(f=d/g)*f:d;return g===1/0?1/0:g*w(h)}})},{"../internals/export":50}],177:[function(M,be,Z){M=M("../internals/export");var C=Math.log,b=Math.LN2;M({target:"Math",stat:!0},{log2:function(w){return C(w)/b}})},{"../internals/export":50}],178:[function(a,be,Z){a("../internals/export")({target:"Math",stat:!0},{sign:a("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(a,be,Z){"use strict";function M(Y){var we,Se,oe,ge,re,Q,fe,Ce=h(Y,!1);if("string"==typeof Ce&&2<Ce.length)if(43===(Y=(Ce=S(Ce)).charCodeAt(0))||45===Y){if(88===(we=Ce.charCodeAt(2))||120===we)return NaN}else if(48===Y){switch(Ce.charCodeAt(1)){case 66:case 98:Se=2,oe=49;break;case 79:case 111:Se=8,oe=55;break;default:return+Ce}for(re=(ge=Ce.slice(2)).length,Q=0;Q<re;Q++)if((fe=ge.charCodeAt(Q))<48||oe<fe)return NaN;return parseInt(ge,Se)}return+Ce}var C=a("../internals/descriptors"),b=a("../internals/global"),w=a("../internals/is-forced"),I=a("../internals/redefine"),D=a("../internals/has"),d=a("../internals/classof-raw"),f=a("../internals/inherit-if-required"),h=a("../internals/to-primitive"),p=a("../internals/fails"),m=a("../internals/object-create"),g=a("../internals/object-get-own-property-names").f,x=a("../internals/object-get-own-property-descriptor").f,E=a("../internals/object-define-property").f,S=a("../internals/string-trim").trim,k="Number",q=b[k],J=q.prototype,G=d(m(J))==k;if(w(k,!q(" 0o1")||!q("0b1")||q("+0x1"))){for(var V,K=function(we){we=arguments.length<1?0:we;var Se=this;return Se instanceof K&&(G?p(function(){J.valueOf.call(Se)}):d(Se)!=k)?f(new q(M(we)),Se,K):M(we)},$=C?g(q):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ne=0;$.length>ne;ne++)D(q,V=$[ne])&&!D(K,V)&&E(K,V,x(q,V));(K.prototype=J).constructor=K,I(b,k,K)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(a,be,Z){a("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(a,be,Z){a("../internals/export")({target:"Number",stat:!0},{isFinite:a("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(D,be,Z){"use strict";function M(h,p,m){return 0===p?m:p%2==1?M(h,p-1,m*h):M(h*h,p/2,m)}var C=D("../internals/export"),b=D("../internals/to-integer"),w=D("../internals/this-number-value"),I=D("../internals/string-repeat"),d=(D=D("../internals/fails"),1..toFixed),f=Math.floor;C({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!D(function(){d.call({})})},{toFixed:function(k){function p(V,K){for(var $=-1,ne=K;++$<6;)q[$]=(ne+=V*q[$])%1e7,ne=f(ne/1e7)}function m(V){for(var K=6,$=0;0<=--K;)q[K]=f(($+=q[K])/V),$=$%V*1e7}function g(){for(var V,K=6,$="";0<=--K;)""===$&&0!==K&&0===q[K]||(V=String(q[K]),$=""===$?V:$+I.call("0",7-V.length)+V);return $}var x,E,S=w(this),q=(k=b(k),[0,0,0,0,0,0]),J="",G="0";if(k<0||20<k)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(J="-",S=-S),1e-21<S)if(S=(x=function(V){for(var K=0,$=V;4096<=$;)K+=12,$/=4096;for(;2<=$;)K+=1,$/=2;return K}(S*M(2,69,1))-69)<0?S*M(2,-x,1):S/M(2,x,1),S*=4503599627370496,0<(x=52-x)){for(p(0,S),E=k;7<=E;)p(1e7,0),E-=7;for(p(M(10,E,1),0),E=x-1;23<=E;)m(1<<23),E-=23;m(1<<E),p(1,1),m(2),G=g()}else p(0,S),p(1<<-x,0),G=g()+I.call("0",k);return 0<k?J+((S=G.length)<=k?"0."+I.call("0",k-S)+G:G.slice(0,S-k)+"."+G.slice(S-k)):J+G}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(C,be,Z){var M=C("../internals/export");C=C("../internals/object-assign"),M({target:"Object",stat:!0,forced:Object.assign!==C},{assign:C})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(a,be,Z){var M=a("../internals/export"),C=a("../internals/object-to-array").entries;M({target:"Object",stat:!0},{entries:function(b){return C(b)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(a,be,Z){var M=a("../internals/export"),C=a("../internals/iterate"),b=a("../internals/create-property");M({target:"Object",stat:!0},{fromEntries:function(w){var I={};return C(w,function(D,d){b(I,D,d)},void 0,!0),I}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(w,be,Z){var M=w("../internals/export"),I=w("../internals/fails"),C=w("../internals/to-indexed-object"),b=w("../internals/object-get-own-property-descriptor").f;w=w("../internals/descriptors"),I=I(function(){b(1)}),M({target:"Object",stat:!0,forced:!w||I,sham:!w},{getOwnPropertyDescriptor:function(D,d){return b(C(D),d)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/fails");b=b("../internals/object-get-own-property-names-external").f,M({target:"Object",stat:!0,forced:C(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:b})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(I,be,Z){var M=I("../internals/export"),C=I("../internals/fails"),b=I("../internals/to-object"),w=I("../internals/object-get-prototype-of");I=I("../internals/correct-prototype-getter"),M({target:"Object",stat:!0,forced:C(function(){w(1)}),sham:!I},{getPrototypeOf:function(D){return w(b(D))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(a,be,Z){var M=a("../internals/export"),C=a("../internals/to-object"),b=a("../internals/object-keys");M({target:"Object",stat:!0,forced:a("../internals/fails")(function(){b(1)})},{keys:function(w){return b(C(w))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(b,be,Z){var M=b("../internals/to-string-tag-support"),C=b("../internals/redefine");b=b("../internals/object-to-string"),M||C(Object.prototype,"toString",b,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(yn,be,Z){"use strict";var M,C,b,w,I=yn("../internals/export"),D=yn("../internals/is-pure"),d=yn("../internals/global"),f=yn("../internals/get-built-in"),h=yn("../internals/native-promise-constructor"),p=yn("../internals/redefine"),m=yn("../internals/redefine-all"),g=yn("../internals/set-to-string-tag"),x=yn("../internals/set-species"),E=yn("../internals/is-object"),S=yn("../internals/a-function"),k=yn("../internals/an-instance"),q=yn("../internals/classof-raw"),J=yn("../internals/inspect-source"),G=yn("../internals/iterate"),V=yn("../internals/check-correctness-of-iteration"),K=yn("../internals/species-constructor"),$=yn("../internals/task").set,ne=yn("../internals/microtask"),Y=yn("../internals/promise-resolve"),we=yn("../internals/host-report-errors"),Se=yn("../internals/new-promise-capability"),oe=yn("../internals/perform"),ge=yn("../internals/internal-state"),re=yn("../internals/is-forced"),Yn=yn("../internals/well-known-symbol"),Q=yn("../internals/engine-v8-version"),fe=Yn("species"),Ce="Promise",it=ge.get,le=ge.set,z=ge.getterFor(Ce),ye=h,je=d.TypeError,Je=d.document,gt=d.process,Ct=f("fetch"),$t=Se.f,yt=$t,Ut="process"==q(gt),Xt=!!(Je&&Je.createEvent&&d.dispatchEvent),ft="unhandledrejection",An=(Yn=(yn=re(Ce,function(){var Qn,Pn;return J(ye)===String(ye)&&(66===Q||!Ut&&"function"!=typeof PromiseRejectionEvent)||!((!D||ye.prototype.finally)&&(51<=Q&&/native code/.test(ye)||(Pn=function(pt){pt(function(){},function(){})},((Qn=ye.resolve(1)).constructor={})[fe]=Pn,Qn.then(function(){})instanceof Pn)))}))||!V(function(Qn){ye.all(Qn).catch(function(){})}),function(Qn){var Pn;return!(!E(Qn)||"function"!=typeof(Pn=Qn.then))&&Pn}),Jn=function(Qn,Pn,pt){var bt;Pn.notified||(Pn.notified=!0,bt=Pn.reactions,ne(function(){for(var rt,_t,vn=Pn.value,On=1==Pn.state,zn=0;bt.length>zn;){var ir,Dr,Pr,Br=bt[zn++],In=On?Br.ok:Br.fail,un=Br.resolve,Tn=Br.reject,on=Br.domain;try{In?(On||(2===Pn.rejection&&function(mn,sr){$.call(d,function(){Ut?gt.emit("rejectionHandled",mn):Rn("rejectionhandled",mn,sr.value)})}(Qn,Pn),Pn.rejection=1),!0===In?ir=vn:(on&&on.enter(),ir=In(vn),on&&(on.exit(),Pr=!0)),ir===Br.promise?Tn(je("Promise-chain cycle")):(Dr=An(ir))?Dr.call(ir,un,Tn):un(ir)):Tn(vn)}catch(mn){on&&!Pr&&on.exit(),Tn(mn)}}Pn.reactions=[],Pn.notified=!1,pt&&!Pn.rejection&&(rt=Qn,_t=Pn,$.call(d,function(){var mn=_t.value,sr=Sr(_t);if(sr&&(sr=oe(function(){Ut?gt.emit("unhandledRejection",mn,rt):Rn(ft,rt,mn)}),_t.rejection=Ut||Sr(_t)?2:1,sr.error))throw sr.value}))}))},Rn=function(Qn,Pn,pt){var bt;Xt?((bt=Je.createEvent("Event")).promise=Pn,bt.reason=pt,bt.initEvent(Qn,!1,!0),d.dispatchEvent(bt)):bt={promise:Pn,reason:pt},(Pn=d["on"+Qn])?Pn(bt):Qn===ft&&we("Unhandled promise rejection",pt)},Sr=function(Qn){return 1!==Qn.rejection&&!Qn.parent},Bn=function(Qn,Pn,pt,bt){return function(rt){Qn(Pn,pt,rt,bt)}},ur=function(Qn,Pn,pt,bt){Pn.done||(Pn.done=!0,(Pn=bt||Pn).value=pt,Pn.state=2,Jn(Qn,Pn,!0))},bn=function(Qn,Pn,pt,bt){if(!Pn.done){Pn.done=!0,bt&&(Pn=bt);try{if(Qn===pt)throw je("Promise can't be resolved itself");var rt=An(pt);rt?ne(function(){var _t={done:!1};try{rt.call(pt,Bn(bn,Qn,_t,Pn),Bn(ur,Qn,_t,Pn))}catch(vn){ur(Qn,_t,vn,Pn)}}):(Pn.value=pt,Pn.state=1,Jn(Qn,Pn,!1))}catch(_t){ur(Qn,{done:!1},_t,Pn)}}};yn&&(ye=function(Qn){k(this,ye,Ce),S(Qn),M.call(this);var Pn=it(this);try{Qn(Bn(bn,this,Pn),Bn(ur,this,Pn))}catch(pt){ur(this,Pn,pt)}},(M=function(Qn){le(this,{type:Ce,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(ye.prototype,{then:function(Qn,Pn){var pt=z(this),bt=$t(K(this,ye));return bt.ok="function"!=typeof Qn||Qn,bt.fail="function"==typeof Pn&&Pn,bt.domain=Ut?gt.domain:void 0,pt.parent=!0,pt.reactions.push(bt),0!=pt.state&&Jn(this,pt,!1),bt.promise},catch:function(Qn){return this.then(void 0,Qn)}}),C=function(){var Qn=new M,Pn=it(Qn);this.promise=Qn,this.resolve=Bn(bn,Qn,Pn),this.reject=Bn(ur,Qn,Pn)},Se.f=$t=function(Qn){return Qn===ye||Qn===b?new C:yt(Qn)},D||"function"!=typeof h||(w=h.prototype.then,p(h.prototype,"then",function(Qn,Pn){var pt=this;return new ye(function(bt,rt){w.call(pt,bt,rt)}).then(Qn,Pn)},{unsafe:!0}),"function"==typeof Ct&&I({global:!0,enumerable:!0,forced:!0},{fetch:function(Qn){return Y(ye,Ct.apply(d,arguments))}}))),I({global:!0,wrap:!0,forced:yn},{Promise:ye}),g(ye,Ce,!1,!0),x(Ce),b=f(Ce),I({target:Ce,stat:!0,forced:yn},{reject:function(Qn){var Pn=$t(this);return Pn.reject.call(void 0,Qn),Pn.promise}}),I({target:Ce,stat:!0,forced:D||yn},{resolve:function(Qn){return Y(D&&this===b?ye:this,Qn)}}),I({target:Ce,stat:!0,forced:Yn},{all:function(Qn){var Pn=this,pt=$t(Pn),bt=pt.resolve,rt=pt.reject,_t=oe(function(){var vn=S(Pn.resolve),On=[],zn=0,ir=1;G(Qn,function(Dr){var Pr=zn++,Br=!1;On.push(void 0),ir++,vn.call(Pn,Dr).then(function(In){Br||(Br=!0,On[Pr]=In,--ir||bt(On))},rt)}),--ir||bt(On)});return _t.error&&rt(_t.value),pt.promise},race:function(Qn){var Pn=this,pt=$t(Pn),bt=pt.reject,rt=oe(function(){var _t=S(Pn.resolve);G(Qn,function(vn){_t.call(Pn,vn).then(pt.resolve,bt)})});return rt.error&&bt(rt.value),pt.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(d,be,Z){var M=d("../internals/export"),m=d("../internals/get-built-in"),C=d("../internals/a-function"),b=d("../internals/an-object"),w=d("../internals/is-object"),I=d("../internals/object-create"),D=d("../internals/function-bind"),f=(d=d("../internals/fails"),m("Reflect","construct")),h=d(function(){function g(){}return!(f(function(){},[],g)instanceof g)}),p=!d(function(){f(function(){})});M({target:"Reflect",stat:!0,forced:m=h||p,sham:m},{construct:function(g,x){C(g),b(x);var E=arguments.length<3?g:C(arguments[2]);if(p&&!h)return f(g,x,E);if(g==E){switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(D.apply(g,S))}return E=I(w(S=E.prototype)?S:Object.prototype),S=Function.apply.call(g,E,x),w(S)?S:E}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(a,be,Z){var M=a("../internals/export"),C=a("../internals/is-object"),b=a("../internals/an-object"),w=a("../internals/has"),I=a("../internals/object-get-own-property-descriptor"),D=a("../internals/object-get-prototype-of");M({target:"Reflect",stat:!0},{get:function d(f,h){var p,m=arguments.length<3?f:arguments[2];return b(f)===m?f[h]:(p=I.f(f,h))?w(p,"value")?p.value:void 0===p.get?void 0:p.get.call(m):C(p=D(f))?d(p,h,m):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(a,be,Z){var M=a("../internals/descriptors"),C=a("../internals/global"),b=a("../internals/is-forced"),w=a("../internals/inherit-if-required"),I=a("../internals/object-define-property").f,D=a("../internals/object-get-own-property-names").f,d=a("../internals/is-regexp"),f=a("../internals/regexp-flags"),h=a("../internals/regexp-sticky-helpers"),p=a("../internals/redefine"),m=a("../internals/fails"),g=a("../internals/internal-state").set,x=a("../internals/set-species"),E=a("../internals/well-known-symbol")("match"),S=C.RegExp,k=S.prototype,q=/a/g,J=/a/g,G=new S(q)!==q,V=h.UNSUPPORTED_Y;if(M&&b("RegExp",!G||V||m(function(){return J[E]=!1,S(q)!=q||S(J)==J||"/a/i"!=S(q,"i")}))){for(var K=function(Y,we){var Se,oe=this instanceof K,ge=d(Y),re=void 0===we;return!oe&&ge&&Y.constructor===K&&re?Y:(G?ge&&!re&&(Y=Y.source):Y instanceof K&&(re&&(we=f.call(Y)),Y=Y.source),V&&(Se=!!we&&-1<we.indexOf("y"))&&(we=we.replace(/y/g,"")),ge=w(G?new S(Y,we):S(Y,we),oe?this:k,K),V&&Se&&g(ge,{sticky:Se}),ge)},$=D(S),ne=0;$.length>ne;)!function(Y){Y in K||I(K,Y,{configurable:!0,get:function(){return S[Y]},set:function(we){S[Y]=we}})}($[ne++]);(k.constructor=K).prototype=k,p(C,"RegExp",K)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(C,be,Z){"use strict";var M=C("../internals/export");C=C("../internals/regexp-exec"),M({target:"RegExp",proto:!0,forced:/./.exec!==C},{exec:C})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(w,be,Z){"use strict";var M=w("../internals/redefine"),C=w("../internals/an-object"),d=w("../internals/fails"),b=w("../internals/regexp-flags"),I=(w="toString",RegExp.prototype),D=I[w];((d=d(function(){return"/a/b"!=D.call({source:"a",flags:"b"})}))||D.name!=w)&&M(RegExp.prototype,w,function(){var h=C(this),p=String(h.source),m=h.flags;return"/"+p+"/"+String(void 0===m&&h instanceof RegExp&&!("flags"in I)?b.call(h):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(C,be,Z){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),be.exports=M("Set",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".endsWith),f=Math.min;h=h("endsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"endsWith"))&&!M.writable||h)},{endsWith:function(p){var m=String(I(this)),g=(w(p),1<arguments.length?arguments[1]:void 0),x=b(m.length);return g=void 0===g?x:f(b(g),x),x=String(p),d?d.call(m,x,g):m.slice(g-x.length,g)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/not-a-regexp"),b=a("../internals/require-object-coercible");M({target:"String",proto:!0,forced:!a("../internals/correct-is-regexp-logic")("includes")},{includes:function(w){return!!~String(b(this)).indexOf(C(w),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(b,be,Z){"use strict";var M=b("../internals/string-multibyte").charAt,C=b("../internals/internal-state"),w=(b=b("../internals/define-iterator"),"String Iterator"),I=C.set,D=C.getterFor(w);b(String,"String",function(d){I(this,{type:w,string:String(d),index:0})},function(){var d=D(this),f=d.string,h=d.index;return h>=f.length?{value:void 0,done:!0}:(f=M(f,h),d.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(a,be,Z){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),b=a("../internals/to-length"),w=a("../internals/require-object-coercible"),I=a("../internals/advance-string-index"),D=a("../internals/regexp-exec-abstract");M("match",1,function(d,f,h){return[function(p){var m=w(this),g=null==p?void 0:p[d];return void 0!==g?g.call(p,m):new RegExp(p)[d](String(m))},function(p){var m=h(f,p,this);if(m.done)return m.value;var g=C(p),x=String(this);if(!g.global)return D(g,x);for(var E=g.unicode,S=[],k=g.lastIndex=0;null!==(q=D(g,x));){var q=String(q[0]);""===(S[k]=q)&&(g.lastIndex=I(x,b(g.lastIndex),E)),k++}return 0===k?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/string-pad").start;M({target:"String",proto:!0,forced:a("../internals/string-pad-webkit-bug")},{padStart:function(b){return C(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(a,be,Z){a("../internals/export")({target:"String",proto:!0},{repeat:a("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(a,be,Z){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),b=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/to-integer"),D=a("../internals/require-object-coercible"),d=a("../internals/advance-string-index"),f=a("../internals/regexp-exec-abstract"),h=Math.max,p=Math.min,m=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;M("replace",2,function(E,S,k,q){var J=q.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,G=q.REPLACE_KEEPS_$0,V=J?"$":"$0";return[function(K,$){var ne=D(this),Y=null==K?void 0:K[E];return void 0!==Y?Y.call(K,ne,$):S.call(String(ne),K,$)},function(K,$){if(!J&&G||"string"==typeof $&&-1===$.indexOf(V)){var ne=k(S,K,this,$);if(ne.done)return ne.value}for(var Y,we=C(K),Se=String(this),oe="function"==typeof $,ge=(oe||($=String($)),we.global),re=(ge&&(Y=we.unicode,we.lastIndex=0),[]);null!==(le=f(we,Se))&&(re.push(le),ge);)""===String(le[0])&&(we.lastIndex=d(Se,w(we.lastIndex),Y));for(var Q,fe="",Ce=0,it=0;it<re.length;it++){for(var le=re[it],z=String(le[0]),ye=h(p(I(le.index),Se.length),0),je=[],Je=1;Je<le.length;Je++)je.push(void 0===(Q=le[Je])?Q:String(Q));var gt=le.groups,Ct=oe?(Ct=[z].concat(je,ye,Se),void 0!==gt&&Ct.push(gt),String($.apply(void 0,Ct))):function($t,yt,Ut,Xt,ft,jt){var Lt=Ut+$t.length,Bt=Xt.length,Et=x;return void 0!==ft&&(ft=b(ft),Et=g),S.call(jt,Et,function(Kt,yn){var Yn;switch(yn.charAt(0)){case"$":return"$";case"&":return $t;case"`":return yt.slice(0,Ut);case"'":return yt.slice(Lt);case"<":Yn=ft[yn.slice(1,-1)];break;default:var An,Jn=+yn;if(0==Jn)return Kt;if(Bt<Jn)return 0!==(An=m(Jn/10))&&An<=Bt?void 0===Xt[An-1]?yn.charAt(1):Xt[An-1]+yn.charAt(1):Kt;Yn=Xt[Jn-1]}return void 0===Yn?"":Yn})}(z,Se,ye,je,gt,$);Ce<=ye&&(fe+=Se.slice(Ce,ye)+Ct,Ce=ye+z.length)}return fe+Se.slice(Ce)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(a,be,Z){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),b=a("../internals/require-object-coercible"),w=a("../internals/same-value"),I=a("../internals/regexp-exec-abstract");M("search",1,function(D,d,f){return[function(h){var p=b(this),m=null==h?void 0:h[D];return void 0!==m?m.call(h,p):new RegExp(h)[D](String(p))},function(h){var p,m=f(d,h,this);return m.done?m.value:(m=C(h),h=String(this),w(p=m.lastIndex,0)||(m.lastIndex=0),h=I(m,h),w(m.lastIndex,p)||(m.lastIndex=p),null===h?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(p,be,Z){"use strict";var M=p("../internals/fix-regexp-well-known-symbol-logic"),C=p("../internals/is-regexp"),b=p("../internals/an-object"),w=p("../internals/require-object-coercible"),I=p("../internals/species-constructor"),D=p("../internals/advance-string-index"),d=p("../internals/to-length"),f=p("../internals/regexp-exec-abstract"),h=p("../internals/regexp-exec"),m=(p=p("../internals/fails"),[].push),g=Math.min,x=4294967295,E=!p(function(){return!RegExp(x,"y")});M("split",2,function(S,k,q){var J="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(G,V){var K=String(w(this)),$=void 0===V?x:V>>>0;if(0==$)return[];if(void 0===G)return[K];if(!C(G))return k.call(K,G,$);for(var ne,Y,we,Se=[],oe=(V=(G.ignoreCase?"i":"")+(G.multiline?"m":"")+(G.unicode?"u":"")+(G.sticky?"y":""),0),ge=new RegExp(G.source,V+"g");(ne=h.call(ge,K))&&!(oe<(Y=ge.lastIndex)&&(Se.push(K.slice(oe,ne.index)),1<ne.length&&ne.index<K.length&&m.apply(Se,ne.slice(1)),we=ne[0].length,oe=Y,Se.length>=$));)ge.lastIndex===ne.index&&ge.lastIndex++;return oe===K.length?!we&&ge.test("")||Se.push(""):Se.push(K.slice(oe)),Se.length>$?Se.slice(0,$):Se}:"0".split(void 0,0).length?function(G,V){return void 0===G&&0===V?[]:k.call(this,G,V)}:k;return[function(G,V){var K=w(this),$=null==G?void 0:G[S];return void 0!==$?$.call(G,K,V):J.call(String(K),G,V)},function(ne,V){if((K=q(J,ne,this,V,J!==k)).done)return K.value;var K=b(ne),$=String(this),Y=(ne=I(K,RegExp),K.unicode),Se=new ne(E?K:"^(?:"+K.source+")",(K.ignoreCase?"i":"")+(K.multiline?"m":"")+(K.unicode?"u":"")+(E?"y":"g")),oe=void 0===V?x:V>>>0;if(0==oe)return[];if(0===$.length)return null===f(Se,$)?[$]:[];for(var ge=0,re=0,Q=[];re<$.length;){Se.lastIndex=E?re:0;var fe,Ce=f(Se,E?$:$.slice(re));if(null===Ce||(fe=g(d(Se.lastIndex+(E?0:re)),$.length))===ge)re=D($,re,Y);else{if(Q.push($.slice(ge,re)),Q.length===oe)return Q;for(var it=1;it<=Ce.length-1;it++)if(Q.push(Ce[it]),Q.length===oe)return Q;re=ge=fe}}return Q.push($.slice(ge)),Q}]},!E)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".startsWith),f=Math.min;h=h("startsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"startsWith"))&&!M.writable||h)},{startsWith:function(x){var m=String(I(this)),g=(w(x),b(f(1<arguments.length?arguments[1]:void 0,m.length)));return x=String(x),d?d.call(m,x,g):m.slice(g,g+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/create-html");M({target:"String",proto:!0,forced:a("../internals/string-html-forced")("sub")},{sub:function(){return C(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(a,be,Z){"use strict";var M=a("../internals/export"),C=a("../internals/string-trim").trim;M({target:"String",proto:!0,forced:a("../internals/string-trim-forced")("trim")},{trim:function(){return C(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(g,be,Z){"use strict";var M,C,b,w,I,D=g("../internals/export"),d=g("../internals/descriptors"),f=g("../internals/global"),h=g("../internals/has"),p=g("../internals/is-object"),m=g("../internals/object-define-property").f,x=(g=g("../internals/copy-constructor-properties"),f.Symbol);!d||"function"!=typeof x||"description"in x.prototype&&void 0===x().description||(M={},g(C=function(){var E=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),S=this instanceof C?new x(E):void 0===E?x():x(E);return""===E&&(M[S]=!0),S},x),(f=C.prototype=x.prototype).constructor=C,b=f.toString,w="Symbol(test)"==String(x("test")),I=/^Symbol\((.*)\)[^)]+$/,m(f,"description",{configurable:!0,get:function(){var E=p(this)?this.valueOf():this,S=b.call(E);return h(M,E)?"":""===(E=w?S.slice(7,-1):S.replace(I,"$1"))?void 0:E}}),D({global:!0,forced:!0},{Symbol:C}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(a,be,Z){a("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(yt,be,Z){"use strict";function M(rt,_t){var vn=Yn[rt]=K(jt[$t]);return Ut(vn,{type:Ct,tag:rt,description:_t}),h||(vn.description=_t),vn}function C(rt,On){k(rt);var vn=J(On);return On=$(vn).concat(bt(vn)),Je(On,function(zn){h&&!pt.call(vn,zn)||Pn(rt,zn,vn[zn])}),rt}function b(On,zn){var vn;if(On=J(On),zn=G(zn,!0),On!==ft||!x(Yn,zn)||x(An,zn))return!(vn=Bt(On,zn))||!x(Yn,zn)||x(On,gt)&&On[gt][zn]||(vn.enumerable=!0),vn}function w(_t){_t=Kt(J(_t));var vn=[];return Je(_t,function(On){x(Yn,On)||x(Ce,On)||vn.push(On)}),vn}var I=yt("../internals/export"),D=yt("../internals/global"),d=yt("../internals/get-built-in"),f=yt("../internals/is-pure"),h=yt("../internals/descriptors"),p=yt("../internals/native-symbol"),m=yt("../internals/use-symbol-as-uid"),g=yt("../internals/fails"),x=yt("../internals/has"),E=yt("../internals/is-array"),S=yt("../internals/is-object"),k=yt("../internals/an-object"),q=yt("../internals/to-object"),J=yt("../internals/to-indexed-object"),G=yt("../internals/to-primitive"),V=yt("../internals/create-property-descriptor"),K=yt("../internals/object-create"),$=yt("../internals/object-keys"),ne=yt("../internals/object-get-own-property-names"),Y=yt("../internals/object-get-own-property-names-external"),we=yt("../internals/object-get-own-property-symbols"),Se=yt("../internals/object-get-own-property-descriptor"),oe=yt("../internals/object-define-property"),ge=yt("../internals/object-property-is-enumerable"),re=yt("../internals/create-non-enumerable-property"),Q=yt("../internals/redefine"),fe=yt("../internals/shared"),Sr=yt("../internals/shared-key"),Ce=yt("../internals/hidden-keys"),it=yt("../internals/uid"),le=yt("../internals/well-known-symbol"),z=yt("../internals/well-known-symbol-wrapped"),ye=yt("../internals/define-well-known-symbol"),je=yt("../internals/set-to-string-tag"),Bn=yt("../internals/internal-state"),Je=yt("../internals/array-iteration").forEach,gt=Sr("hidden"),Ct="Symbol",$t="prototype",Ut=(yt=le("toPrimitive"),Bn.set),Xt=Bn.getterFor(Ct),ft=Object[$t],jt=D.Symbol,Lt=d("JSON","stringify"),Bt=Se.f,Et=oe.f,Kt=Y.f,yn=ge.f,Yn=fe("symbols"),An=fe("op-symbols"),Jn=fe("string-to-symbol-registry"),Rn=fe("symbol-to-string-registry"),ur=(Sr=fe("wks"),!(Bn=D.QObject)||!Bn[$t]||!Bn[$t].findChild),bn=h&&g(function(){return 7!=K(Et({},"a",{get:function(){return Et(this,"a",{value:7}).a}})).a})?function(rt,_t,vn){var On=Bt(ft,_t);On&&delete ft[_t],Et(rt,_t,vn),On&&rt!==ft&&Et(ft,_t,On)}:Et,Qn=m?function(rt){return"symbol"==typeof rt}:function(rt){return Object(rt)instanceof jt},Pn=function(rt,_t,vn){return rt===ft&&Pn(An,_t,vn),k(rt),_t=G(_t,!0),k(vn),(x(Yn,_t)?(vn.enumerable?(x(rt,gt)&&rt[gt][_t]&&(rt[gt][_t]=!1),vn=K(vn,{enumerable:V(0,!1)})):(x(rt,gt)||Et(rt,gt,V(1,{})),rt[gt][_t]=!0),bn):Et)(rt,_t,vn)},pt=function(_t){_t=G(_t,!0);var vn=yn.call(this,_t);return!(this===ft&&x(Yn,_t)&&!x(An,_t))&&(!(vn||!x(this,_t)||!x(Yn,_t)||x(this,gt)&&this[gt][_t])||vn)},bt=function(vn){var _t=vn===ft,On=(vn=Kt(_t?An:J(vn)),[]);return Je(vn,function(zn){!x(Yn,zn)||_t&&!x(ft,zn)||On.push(Yn[zn])}),On};p||(Q((jt=function(){if(this instanceof jt)throw TypeError("Symbol is not a constructor");var rt=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,_t=it(rt),vn=function(On){this===ft&&vn.call(An,On),x(this,gt)&&x(this[gt],_t)&&(this[gt][_t]=!1),bn(this,_t,V(1,On))};return h&&ur&&bn(ft,_t,{configurable:!0,set:vn}),M(_t,rt)})[$t],"toString",function(){return Xt(this).tag}),Q(jt,"withoutSetter",function(rt){return M(it(rt),rt)}),ge.f=pt,oe.f=Pn,Se.f=b,ne.f=Y.f=w,we.f=bt,z.f=function(rt){return M(le(rt),rt)},h&&(Et(jt[$t],"description",{configurable:!0,get:function(){return Xt(this).description}}),f||Q(ft,"propertyIsEnumerable",pt,{unsafe:!0}))),I({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:jt}),Je($(Sr),function(rt){ye(rt)}),I({target:Ct,stat:!0,forced:!p},{for:function(vn){var _t;return vn=String(vn),x(Jn,vn)?Jn[vn]:(_t=jt(vn),Jn[vn]=_t,Rn[_t]=vn,_t)},keyFor:function(rt){if(!Qn(rt))throw TypeError(rt+" is not a symbol");if(x(Rn,rt))return Rn[rt]},useSetter:function(){ur=!0},useSimple:function(){ur=!1}}),I({target:"Object",stat:!0,forced:!p,sham:!h},{create:function(rt,_t){return void 0===_t?K(rt):C(K(rt),_t)},defineProperty:Pn,defineProperties:C,getOwnPropertyDescriptor:b}),I({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:w,getOwnPropertySymbols:bt}),I({target:"Object",stat:!0,forced:g(function(){we.f(1)})},{getOwnPropertySymbols:function(rt){return we.f(q(rt))}}),Lt&&I({target:"JSON",stat:!0,forced:!p||g(function(){var rt=jt();return"[null]"!=Lt([rt])||"{}"!=Lt({a:rt})||"{}"!=Lt(Object(rt))})},{stringify:function(rt,_t,vn){for(var On,zn=[rt],ir=1;ir<arguments.length;)zn.push(arguments[ir++]);if((S(On=_t)||void 0!==rt)&&!Qn(rt))return E(_t)||(_t=function(Dr,Pr){if("function"==typeof On&&(Pr=On.call(this,Dr,Pr)),!Qn(Pr))return Pr}),zn[1]=_t,Lt.apply(null,zn)}}),jt[$t][yt]||re(jt[$t],yt,jt[$t].valueOf),je(jt,Ct),Ce[gt]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-copy-within"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("copyWithin",function(w,I){return C.call(b(this),w,I,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").every,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("every",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-fill"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("fill",function(w){return C.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").filter,b=a("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("filter",function(D){for(var d=C(w(this),D,1<arguments.length?arguments[1]:void 0),f=(D=b(this,this.constructor),0),h=d.length,p=new(I(D))(h);f<h;)p[f]=d[f++];return p})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").findIndex,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("findIndex",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").find,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("find",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(a,be,Z){a("../internals/typed-array-constructor")("Float32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],220:[function(a,be,Z){a("../internals/typed-array-constructor")("Float64",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],221:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").forEach,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("forEach",function(w){C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-includes").includes,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("includes",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-includes").indexOf,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("indexOf",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(a,be,Z){a("../internals/typed-array-constructor")("Int16",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],225:[function(a,be,Z){a("../internals/typed-array-constructor")("Int32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],226:[function(C,be,Z){"use strict";function M(){return b.call(D(this))}var h=C("../internals/global"),f=C("../internals/array-buffer-view-core"),d=C("../modules/es.array.iterator"),b=(C=C("../internals/well-known-symbol")("iterator"),d.values),w=d.keys,I=d.entries,D=f.aTypedArray;d=f.exportTypedArrayMethod,h=!!(f=(h=h.Uint8Array)&&h.prototype[C])&&("values"==f.name||null==f.name),d("entries",function(){return I.call(D(this))}),d("keys",function(){return w.call(D(this))}),d("values",M,!h),d(C,M,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=[].join;(C=C.exportTypedArrayMethod)("join",function(w){return b.apply(M(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-last-index-of"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("lastIndexOf",function(w){return C.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").map,b=a("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("map",function(D){return C(w(this),D,1<arguments.length?arguments[1]:void 0,function(d,f){return new(I(b(d,d.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-reduce").right,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduceRight",function(w){return C(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-reduce").left,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduce",function(w){return C(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=(C=C.exportTypedArrayMethod,Math.floor);C("reverse",function(){for(var w,I=M(this).length,D=b(I/2),d=0;d<D;)w=this[d],this[d++]=this[--I],this[I]=w;return this})},{"../internals/array-buffer-view-core":12}],233:[function(I,be,Z){"use strict";var M=I("../internals/array-buffer-view-core"),C=I("../internals/to-length"),b=I("../internals/to-offset"),w=I("../internals/to-object"),D=(I=I("../internals/fails"),M.aTypedArray);(0,M.exportTypedArrayMethod)("set",function(d){D(this);var f=b(1<arguments.length?arguments[1]:void 0,1),h=this.length,p=w(d),m=C(p.length),g=0;if(h<m+f)throw RangeError("Wrong length");for(;g<m;)this[f+g]=p[g++]},I(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(C,be,Z){"use strict";var I=C("../internals/array-buffer-view-core"),M=C("../internals/species-constructor"),b=(C=C("../internals/fails"),I.aTypedArray),w=I.aTypedArrayConstructor,D=[].slice;(I=I.exportTypedArrayMethod)("slice",function(d,f){for(var h=D.call(b(this),d,f),p=(d=M(this,this.constructor),0),m=h.length,g=new(w(d))(m);p<m;)g[p]=h[p++];return g},C(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").some,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("some",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=[].sort;(C=C.exportTypedArrayMethod)("sort",function(w){return b.call(M(this),w)})},{"../internals/array-buffer-view-core":12}],237:[function(a,be,Z){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/to-length"),b=a("../internals/to-absolute-index"),w=a("../internals/species-constructor"),I=M.aTypedArray;(0,M.exportTypedArrayMethod)("subarray",function(p,d){var f=I(this),h=f.length;return p=b(p,h),new(w(f,f.constructor))(f.buffer,f.byteOffset+p*f.BYTES_PER_ELEMENT,C((void 0===d?h:b(d,h))-p))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(C,be,Z){"use strict";var I=C("../internals/global"),M=C("../internals/array-buffer-view-core"),b=(C=C("../internals/fails"),I.Int8Array),w=M.aTypedArray,D=(I=M.exportTypedArrayMethod,[].toLocaleString),d=[].slice,f=!!b&&C(function(){D.call(new b(1))});I("toLocaleString",function(){return D.apply(f?d.call(w(this)):w(this),arguments)},C(function(){return[1,2].toLocaleString()!=new b([1,2]).toLocaleString()})||!C(function(){b.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(C,be,Z){"use strict";var M=C("../internals/array-buffer-view-core").exportTypedArrayMethod,I=C("../internals/fails"),b=(C=(C=C("../internals/global").Uint8Array)&&C.prototype||{},[].toString),w=[].join;I(function(){b.call({})})&&(b=function(){return w.call(this)}),M("toString",b,I=C.toString!=b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(a,be,Z){a("../internals/typed-array-constructor")("Uint16",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],241:[function(a,be,Z){a("../internals/typed-array-constructor")("Uint32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],242:[function(a,be,Z){a("../internals/typed-array-constructor")("Uint8",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],243:[function(a,be,Z){a("../internals/typed-array-constructor")("Uint8",function(M){return function(C,b,w){return M(this,C,b,w)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(x,k,Z){"use strict";function M(q){return function(){return q(this,arguments.length?arguments[0]:void 0)}}var C,b,w,I,D,E=x("../internals/global"),d=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),h=x("../internals/collection"),p=x("../internals/collection-weak"),m=x("../internals/is-object"),g=x("../internals/internal-state").enforce,S=(x=x("../internals/native-weak-map"),E=!E.ActiveXObject&&"ActiveXObject"in E,Object.isExtensible);k=k.exports=h("WeakMap",M,p),x&&E&&(C=p.getConstructor(M,"WeakMap",!0),f.REQUIRED=!0,b=(h=k.prototype).delete,w=h.has,I=h.get,D=h.set,d(h,{delete:function(q){var J;return m(q)&&!S(q)?((J=g(this)).frozen||(J.frozen=new C),b.call(this,q)||J.frozen.delete(q)):b.call(this,q)},has:function(q){var J;return m(q)&&!S(q)?((J=g(this)).frozen||(J.frozen=new C),w.call(this,q)||J.frozen.has(q)):w.call(this,q)},get:function(q){var J;return!m(q)||S(q)||((J=g(this)).frozen||(J.frozen=new C),w.call(this,q))?I.call(this,q):J.frozen.get(q)},set:function(q,J){var G;return!m(q)||S(q)||((G=g(this)).frozen||(G.frozen=new C),w.call(this,q))?D.call(this,q,J):G.frozen.set(q,J),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(a,be,Z){var M,C=a("../internals/global"),b=a("../internals/dom-iterables"),w=a("../internals/array-for-each"),I=a("../internals/create-non-enumerable-property");for(M in b){var D;if((D=(D=C[M])&&D.prototype)&&D.forEach!==w)try{I(D,"forEach",w)}catch{D.forEach=w}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(D,be,Z){var M,C=D("../internals/global"),b=D("../internals/dom-iterables"),w=D("../modules/es.array.iterator"),I=D("../internals/create-non-enumerable-property"),d=(D=D("../internals/well-known-symbol"))("iterator"),f=D("toStringTag"),h=w.values;for(M in b){var p=C[M],m=p&&p.prototype;if(m){if(m[d]!==h)try{I(m,d,h)}catch{m[d]=h}if(m[f]||I(m,f,M),b[M])for(var g in w)if(m[g]!==w[g])try{I(m,g,w[g])}catch{m[g]=w[g]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(gt,be,Z){"use strict";function M(Ct){try{return decodeURIComponent(Ct)}catch{return Ct}}function C(Ct){return ye[Ct]}function b(Ct){return encodeURIComponent(Ct).replace(z,C)}function w(Ct){this.entries.length=0,je(this.entries,Ct)}function I(Ct,$t){if(Ct<$t)throw TypeError("Not enough arguments")}function D(){E(this,D,oe);var Ct,$t,yt,Ut,Xt,ft,jt,Lt,Bt=0<arguments.length?arguments[0]:void 0,Et=[];if(re(this,{type:oe,entries:Et,updateURL:function(){},updateSearchParams:w}),void 0!==Bt)if(G(Bt))if("function"==typeof(Ct=ne(Bt)))for(yt=($t=Ct.call(Bt)).next;!(Ut=yt.call($t)).done;){if((ft=(Xt=(Ut=$(J(Ut.value))).next).call(Ut)).done||(jt=Xt.call(Ut)).done||!Xt.call(Ut).done)throw TypeError("Expected sequence with length 2");Et.push({key:ft.value+"",value:jt.value+""})}else for(Lt in Bt)S(Bt,Lt)&&Et.push({key:Lt,value:Bt[Lt]+""});else je(Et,"string"==typeof Bt?"?"===Bt.charAt(0)?Bt.slice(1):Bt:Bt+"")}gt("../modules/es.array.iterator");var d=gt("../internals/export"),Se=gt("../internals/get-built-in"),f=gt("../internals/native-url"),h=gt("../internals/redefine"),p=gt("../internals/redefine-all"),m=gt("../internals/set-to-string-tag"),g=gt("../internals/create-iterator-constructor"),x=gt("../internals/internal-state"),E=gt("../internals/an-instance"),S=gt("../internals/has"),k=gt("../internals/function-bind-context"),q=gt("../internals/classof"),J=gt("../internals/an-object"),G=gt("../internals/is-object"),V=gt("../internals/object-create"),K=gt("../internals/create-property-descriptor"),$=gt("../internals/get-iterator"),ne=gt("../internals/get-iterator-method"),Y=(gt=gt("../internals/well-known-symbol"),Se("fetch")),we=Se("Headers"),oe=(Se=gt("iterator"),"URLSearchParams"),ge=oe+"Iterator",re=x.set,Q=x.getterFor(oe),fe=x.getterFor(ge),Ce=/\+/g,it=Array(4),le=function(Ct){var $t,yt=Ct.replace(Ce," "),Ut=4;try{return decodeURIComponent(yt)}catch{for(;Ut;)yt=yt.replace(($t=Ut--,it[$t-1]||(it[$t-1]=RegExp("((?:%[\\da-f]{2}){"+$t+"})","gi"))),M);return yt}},z=/[!'()~]|%20/g,ye={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},je=function(Ct,$t){if($t)for(var yt,Ut=$t.split("&"),Xt=0;Xt<Ut.length;)(yt=Ut[Xt++]).length&&(yt=yt.split("="),Ct.push({key:le(yt.shift()),value:le(yt.join("="))}))},Je=g(function(Ct,$t){re(this,{type:ge,iterator:$(Q(Ct).entries),kind:$t})},"Iterator",function(){var $t,Ct=($t=fe(this)).kind,yt=($t=$t.iterator.next()).value;return $t.done||($t.value="keys"===Ct?yt.key:"values"===Ct?yt.value:[yt.key,yt.value]),$t});p(gt=D.prototype,{append:function(Ct,$t){I(arguments.length,2);var yt=Q(this);yt.entries.push({key:Ct+"",value:$t+""}),yt.updateURL()},delete:function(Ct){I(arguments.length,1);for(var $t=Q(this),yt=$t.entries,Ut=Ct+"",Xt=0;Xt<yt.length;)yt[Xt].key===Ut?yt.splice(Xt,1):Xt++;$t.updateURL()},get:function(Ct){I(arguments.length,1);for(var $t=Q(this).entries,yt=Ct+"",Ut=0;Ut<$t.length;Ut++)if($t[Ut].key===yt)return $t[Ut].value;return null},getAll:function(Ct){I(arguments.length,1);for(var $t=Q(this).entries,yt=Ct+"",Ut=[],Xt=0;Xt<$t.length;Xt++)$t[Xt].key===yt&&Ut.push($t[Xt].value);return Ut},has:function(Ct){I(arguments.length,1);for(var $t=Q(this).entries,yt=Ct+"",Ut=0;Ut<$t.length;)if($t[Ut++].key===yt)return!0;return!1},set:function(Ct,$t){I(arguments.length,1);for(var yt,Ut=Q(this),Xt=Ut.entries,ft=!1,jt=Ct+"",Lt=$t+"",Bt=0;Bt<Xt.length;Bt++)(yt=Xt[Bt]).key===jt&&(ft?Xt.splice(Bt--,1):(ft=!0,yt.value=Lt));ft||Xt.push({key:jt,value:Lt}),Ut.updateURL()},sort:function(){for(var Ct,$t,yt=Q(this),Ut=yt.entries,Xt=Ut.slice(),ft=Ut.length=0;ft<Xt.length;ft++){for(Ct=Xt[ft],$t=0;$t<ft;$t++)if(Ut[$t].key>Ct.key){Ut.splice($t,0,Ct);break}$t===ft&&Ut.push(Ct)}yt.updateURL()},forEach:function(Ct){for(var $t,yt=Q(this).entries,Ut=k(Ct,1<arguments.length?arguments[1]:void 0,3),Xt=0;Xt<yt.length;)Ut(($t=yt[Xt++]).value,$t.key,this)},keys:function(){return new Je(this,"keys")},values:function(){return new Je(this,"values")},entries:function(){return new Je(this,"entries")}},{enumerable:!0}),h(gt,Se,gt.entries),h(gt,"toString",function(){for(var Ct,$t=Q(this).entries,yt=[],Ut=0;Ut<$t.length;)Ct=$t[Ut++],yt.push(b(Ct.key)+"="+b(Ct.value));return yt.join("&")},{enumerable:!0}),m(D,oe),d({global:!0,forced:!f},{URLSearchParams:D}),f||"function"!=typeof Y||"function"!=typeof we||d({global:!0,enumerable:!0,forced:!0},{fetch:function(Xt){var $t,yt,Ut;return Xt=[Xt],1<arguments.length&&(G($t=arguments[1])&&q(yt=$t.body)===oe&&((Ut=$t.headers?new we($t.headers):new we).has("content-type")||Ut.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),$t=V($t,{body:K(0,String(yt)),headers:K(0,Ut)})),Xt.push($t)),Y.apply(this,Xt)}}),be.exports={URLSearchParams:D,getState:Q}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function($,be,Z){"use strict";function M(L){var ie,H,de,Be;if("number"==typeof L){for(ie=[],H=0;H<4;H++)ie.unshift(L%256),L=ge(L/256);return ie.join(".")}if("object"!=typeof L)return L;for(ie="",de=jt(L),H=0;H<8;H++)Be&&0===L[H]||(Be=Be&&!1,de===H?(ie+=H?":":"::",Be=!0):(ie+=L[H].toString(16),H<7&&(ie+=":")));return"["+ie+"]"}function C(L){return!L.host||L.cannotBeABaseURL||"file"==L.scheme}function b(L,ie,H,de){var Be,Xe,wt,Nt=H||Qn,rn=0,Ge="",He=!1,vt=!1,tt=!1;for(H||(L.scheme="",L.username="",L.password="",L.host=null,L.port=null,L.path=[],L.query=null,L.fragment=null,L.cannotBeABaseURL=!1,ie=ie.replace(Ut,"")),ie=ie.replace(Xt,""),Be=q(ie);rn<=Be.length;){switch(Xe=Be[rn],Nt){case Qn:if(!Xe||!le.test(Xe)){if(H)return fe;Nt=pt;continue}Ge+=Xe.toLowerCase(),Nt=Pn;break;case Pn:if(Xe&&(z.test(Xe)||"+"==Xe||"-"==Xe||"."==Xe))Ge+=Xe.toLowerCase();else{if(":"!=Xe){if(H)return fe;Ge="",Nt=pt,rn=0;continue}if(H&&(An(L)!=S(Yn,Ge)||"file"==Ge&&(Jn(L)||null!==L.port)||"file"==L.scheme&&!L.host))return;if(L.scheme=Ge,H)return void(An(L)&&Yn[L.scheme]==L.port&&(L.port=null));Ge="","file"==L.scheme?Nt=In:An(L)&&de&&de.scheme==L.scheme?Nt=bt:An(L)?Nt=On:"/"==Be[rn+1]?(Nt=rt,rn++):(L.cannotBeABaseURL=!0,L.path.push(""),Nt=sr)}break;case pt:if(!de||de.cannotBeABaseURL&&"#"!=Xe)return fe;if(de.cannotBeABaseURL&&"#"==Xe){L.scheme=de.scheme,L.path=de.path.slice(),L.query=de.query,L.fragment="",L.cannotBeABaseURL=!0,Nt=fn;break}Nt="file"==de.scheme?In:_t;continue;case bt:if("/"!=Xe||"/"!=Be[rn+1]){Nt=_t;continue}Nt=zn,rn++;break;case rt:if("/"==Xe){Nt=ir;break}Nt=mn;continue;case _t:if(L.scheme=de.scheme,Xe==D)L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query=de.query;else if("/"==Xe||"\\"==Xe&&An(L))Nt=vn;else if("?"==Xe)L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query="",Nt=qt;else{if("#"!=Xe){L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.path.pop(),Nt=mn;continue}L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query=de.query,L.fragment="",Nt=fn}break;case vn:if(!An(L)||"/"!=Xe&&"\\"!=Xe){if("/"!=Xe){L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,Nt=mn;continue}Nt=ir}else Nt=zn;break;case On:if(Nt=zn,"/"!=Xe||"/"!=Ge.charAt(rn+1))continue;rn++;break;case zn:if("/"==Xe||"\\"==Xe)break;Nt=ir;continue;case ir:if("@"==Xe){He&&(Ge="%40"+Ge),He=!0;for(var Dt=q(Ge),Zt=0;Zt<Dt.length;Zt++){var $n=Dt[Zt];":"!=$n||tt?($n=yn($n,Kt),tt?L.password+=$n:L.username+=$n):tt=!0}Ge=""}else if(Xe==D||"/"==Xe||"?"==Xe||"#"==Xe||"\\"==Xe&&An(L)){if(He&&""==Ge)return Q;rn-=q(Ge).length+1,Ge="",Nt=Dr}else Ge+=Xe;break;case Dr:case Pr:if(H&&"file"==L.scheme){Nt=Tn;continue}if(":"!=Xe||vt){if(Xe==D||"/"==Xe||"?"==Xe||"#"==Xe||"\\"==Xe&&An(L)){if(An(L)&&""==Ge)return Ce;if(H&&""==Ge&&(Jn(L)||null!==L.port))return;if(wt=ft(L,Ge))return wt;if(Ge="",Nt=on,H)return;continue}"["==Xe?vt=!0:"]"==Xe&&(vt=!1),Ge+=Xe}else{if(""==Ge)return Ce;if(wt=ft(L,Ge))return wt;if(Ge="",Nt=Br,H==Pr)return}break;case Br:if(!ye.test(Xe)){if(Xe==D||"/"==Xe||"?"==Xe||"#"==Xe||"\\"==Xe&&An(L)||H){if(""!=Ge){var lr=parseInt(Ge,10);if(65535<lr)return it;L.port=An(L)&&lr===Yn[L.scheme]?null:lr,Ge=""}if(H)return;Nt=on;continue}return it}Ge+=Xe;break;case In:if(L.scheme="file","/"==Xe||"\\"==Xe)Nt=un;else{if(!de||"file"!=de.scheme){Nt=mn;continue}if(Xe==D)L.host=de.host,L.path=de.path.slice(),L.query=de.query;else if("?"==Xe)L.host=de.host,L.path=de.path.slice(),L.query="",Nt=qt;else{if("#"!=Xe){Sr(Be.slice(rn).join(""))||(L.host=de.host,L.path=de.path.slice(),Bn(L)),Nt=mn;continue}L.host=de.host,L.path=de.path.slice(),L.query=de.query,L.fragment="",Nt=fn}}break;case un:if("/"==Xe||"\\"==Xe){Nt=Tn;break}de&&"file"==de.scheme&&!Sr(Be.slice(rn).join(""))&&(Rn(de.path[0],!0)?L.path.push(de.path[0]):L.host=de.host),Nt=mn;continue;case Tn:if(Xe==D||"/"==Xe||"\\"==Xe||"?"==Xe||"#"==Xe){if(!H&&Rn(Ge))Nt=mn;else{if(""==Ge){if(L.host="",H)return}else{if(wt=ft(L,Ge))return wt;if("localhost"==L.host&&(L.host=""),H)return;Ge=""}Nt=on}continue}Ge+=Xe;break;case on:if(An(L)){if(Nt=mn,"/"!=Xe&&"\\"!=Xe)continue}else if(H||"?"!=Xe)if(H||"#"!=Xe){if(Xe!=D&&(Nt=mn,"/"!=Xe))continue}else L.fragment="",Nt=fn;else L.query="",Nt=qt;break;case mn:if(Xe==D||"/"==Xe||"\\"==Xe&&An(L)||!H&&("?"==Xe||"#"==Xe)){if(bn(Ge)?(Bn(L),"/"==Xe||"\\"==Xe&&An(L)||L.path.push("")):ur(Ge)?"/"==Xe||"\\"==Xe&&An(L)||L.path.push(""):("file"==L.scheme&&!L.path.length&&Rn(Ge)&&(L.host&&(L.host=""),Ge=Ge.charAt(0)+":"),L.path.push(Ge)),Ge="","file"==L.scheme&&(Xe==D||"?"==Xe||"#"==Xe))for(;1<L.path.length&&""===L.path[0];)L.path.shift();"?"==Xe?(L.query="",Nt=qt):"#"==Xe&&(L.fragment="",Nt=fn)}else Ge+=yn(Xe,Et);break;case sr:"?"==Xe?(L.query="",Nt=qt):"#"==Xe?(L.fragment="",Nt=fn):Xe!=D&&(L.path[0]+=yn(Xe,Lt));break;case qt:H||"#"!=Xe?Xe!=D&&("'"==Xe&&An(L)?L.query+="%27":L.query+="#"==Xe?"%23":yn(Xe,Lt)):(L.fragment="",Nt=fn);break;case fn:Xe!=D&&(L.fragment+=yn(Xe,Bt))}rn++}}function w(Xe){var ie,H,de=E(this,w,"URL"),Be=1<arguments.length?arguments[1]:void 0,wt=(Xe=String(Xe),Se(de,{type:"URL"}));if(void 0!==Be)if(Be instanceof w)ie=oe(Be);else if(H=b(ie={},String(Be)))throw TypeError(H);if(H=b(wt,Xe,null,ie))throw TypeError(H);var Nt=wt.searchParams=new Y;(Be=we(Nt)).updateSearchParams(wt.query),Be.updateURL=function(){wt.query=String(Nt)||null},p||(de.href=Cn.call(de),de.origin=Wn.call(de),de.protocol=yr.call(de),de.username=fr.call(de),de.password=Er.call(de),de.host=Lr.call(de),de.hostname=te.call(de),de.port=Ie.call(de),de.pathname=Qe.call(de),de.search=T.call(de),de.searchParams=N.call(de),de.hash=U.call(de))}function I(L,ie){return{get:L,set:ie,configurable:!0,enumerable:!0}}$("../modules/es.string.iterator");var D,d,f,h=$("../internals/export"),p=$("../internals/descriptors"),m=$("../internals/native-url"),Fn=$("../internals/global"),g=$("../internals/object-define-properties"),x=$("../internals/redefine"),E=$("../internals/an-instance"),S=$("../internals/has"),k=$("../internals/object-assign"),q=$("../internals/array-from"),J=$("../internals/string-multibyte").codeAt,G=$("../internals/string-punycode-to-ascii"),V=$("../internals/set-to-string-tag"),K=$("../modules/web.url-search-params"),ne=($=$("../internals/internal-state"),Fn.URL),Y=K.URLSearchParams,we=K.getState,Se=$.set,oe=$.getterFor("URL"),ge=Math.floor,re=Math.pow,Q="Invalid authority",fe="Invalid scheme",Ce="Invalid host",it="Invalid port",le=/[A-Za-z]/,z=/[\d+-.A-Za-z]/,ye=/\d/,je=/^(0x|0X)/,Je=/^[0-7]+$/,gt=/^\d+$/,Ct=/^[\dA-Fa-f]+$/,$t=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,yt=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Ut=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Xt=/[\u0009\u000A\u000D]/g,ft=function(L,ie){var H,de,Be;if("["==ie.charAt(0))return"]"==ie.charAt(ie.length-1)&&(H=function(Xe){var He,vt,tt,Dt,Zt,$n,lr,wt=[0,0,0,0,0,0,0,0],Nt=0,rn=null,Ge=0,Ar=function(){return Xe.charAt(Ge)};if(":"==Ar()){if(":"!=Xe.charAt(1))return;Ge+=2,rn=++Nt}for(;Ar();){if(8==Nt)return;if(":"!=Ar()){for(He=vt=0;vt<4&&Ct.test(Ar());)He=16*He+parseInt(Ar(),16),Ge++,vt++;if("."==Ar()){if(0==vt||(Ge-=vt,Nt>6))return;for(tt=0;Ar();){if(Dt=null,tt>0){if(!("."==Ar()&&tt<4))return;Ge++}if(!ye.test(Ar()))return;for(;ye.test(Ar());){if(Zt=parseInt(Ar(),10),null===Dt)Dt=Zt;else{if(0==Dt)return;Dt=10*Dt+Zt}if(Dt>255)return;Ge++}wt[Nt]=256*wt[Nt]+Dt,(2==++tt||4==tt)&&Nt++}if(4!=tt)return;break}if(":"==Ar()){if(Ge++,!Ar())return}else if(Ar())return;wt[Nt++]=He}else{if(null!==rn)return;Ge++,rn=++Nt}}if(null!==rn)for($n=Nt-rn,Nt=7;0!=Nt&&$n>0;)lr=wt[Nt],wt[Nt--]=wt[rn+$n-1],wt[rn+--$n]=lr;else if(8!=Nt)return;return wt}(ie.slice(1,-1)))?void(L.host=H):Ce;if(An(L))return ie=G(ie),$t.test(ie)||null===(H=function(Xe){var Nt,rn,Ge,He,vt,tt,Dt,wt=Xe.split(".");if(wt.length&&""==wt[wt.length-1]&&wt.pop(),(Nt=wt.length)>4)return Xe;for(rn=[],Ge=0;Ge<Nt;Ge++){if(""==(He=wt[Ge]))return Xe;if(vt=10,He.length>1&&"0"==He.charAt(0)&&(vt=je.test(He)?16:8,He=He.slice(8==vt?1:2)),""===He)tt=0;else{if(!(10==vt?gt:8==vt?Je:Ct).test(He))return Xe;tt=parseInt(He,vt)}rn.push(tt)}for(Ge=0;Ge<Nt;Ge++)if(tt=rn[Ge],Ge==Nt-1){if(tt>=re(256,5-Nt))return null}else if(tt>255)return null;for(Dt=rn.pop(),Ge=0;Ge<rn.length;Ge++)Dt+=rn[Ge]*re(256,3-Ge);return Dt}(ie))?Ce:void(L.host=H);if(yt.test(ie))return Ce;for(H="",de=q(ie),Be=0;Be<de.length;Be++)H+=yn(de[Be],Lt);L.host=H},jt=function(L){for(var ie=null,H=1,de=null,Be=0,Xe=0;Xe<8;Xe++)0!==L[Xe]?(H<Be&&(ie=de,H=Be),de=null,Be=0):(null===de&&(de=Xe),++Be);return H<Be&&(ie=de,H=Be),ie},Lt={},Bt=k({},Lt,{" ":1,'"':1,"<":1,">":1,"`":1}),Et=k({},Bt,{"#":1,"?":1,"{":1,"}":1}),Kt=k({},Et,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),yn=function(L,ie){var H=J(L,0);return 32<H&&H<127&&!S(ie,L)?L:encodeURIComponent(L)},Yn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},An=function(L){return S(Yn,L.scheme)},Jn=function(L){return""!=L.username||""!=L.password},Rn=function(L,ie){return 2==L.length&&le.test(L.charAt(0))&&(":"==(L=L.charAt(1))||!ie&&"|"==L)},Sr=function(L){return 1<L.length&&Rn(L.slice(0,2))&&(2==L.length||"/"===(L=L.charAt(2))||"\\"===L||"?"===L||"#"===L)},Bn=function(L){var ie=L.path,H=ie.length;!H||"file"==L.scheme&&1==H&&Rn(ie[0],!0)||ie.pop()},ur=function(L){return"."===L||"%2e"===L.toLowerCase()},bn=function(L){return".."===(L=L.toLowerCase())||"%2e."===L||".%2e"===L||"%2e%2e"===L},Qn={},Pn={},pt={},bt={},rt={},_t={},vn={},On={},zn={},ir={},Dr={},Pr={},Br={},In={},un={},Tn={},on={},mn={},sr={},qt={},fn={},Cn=(Fn=w.prototype,function(){var L=oe(this),ie=L.scheme,H=L.username,de=L.password,Be=L.host,Xe=L.port,wt=L.path,Nt=L.query,rn=L.fragment,Ge=ie+":";return null!==Be?(Ge+="//",Jn(L)&&(Ge+=H+(de?":"+de:"")+"@"),Ge+=M(Be),null!==Xe&&(Ge+=":"+Xe)):"file"==ie&&(Ge+="//"),Ge+=L.cannotBeABaseURL?wt[0]:wt.length?"/"+wt.join("/"):"",null!==Nt&&(Ge+="?"+Nt),null!==rn&&(Ge+="#"+rn),Ge}),Wn=function(){var L=oe(this),ie=L.scheme,H=L.port;if("blob"==ie)try{return new URL(ie.path[0]).origin}catch{return"null"}return"file"!=ie&&An(L)?ie+"://"+M(L.host)+(null!==H?":"+H:""):"null"},yr=function(){return oe(this).scheme+":"},fr=function(){return oe(this).username},Er=function(){return oe(this).password},Lr=function(){var L=(ie=oe(this)).host,ie=ie.port;return null===L?"":null===ie?M(L):M(L)+":"+ie},te=function(){var L=oe(this).host;return null===L?"":M(L)},Ie=function(){var L=oe(this).port;return null===L?"":String(L)},Qe=function(){var L=oe(this),ie=L.path;return L.cannotBeABaseURL?ie[0]:ie.length?"/"+ie.join("/"):""},T=function(){var L=oe(this).query;return L?"?"+L:""},N=function(){return oe(this).searchParams},U=function(){var L=oe(this).fragment;return L?"#"+L:""};p&&g(Fn,{href:I(Cn,function(H){var ie=oe(this);if(H=b(ie,H=String(H)))throw TypeError(H);we(ie.searchParams).updateSearchParams(ie.query)}),origin:I(Wn),protocol:I(yr,function(L){b(oe(this),String(L)+":",Qn)}),username:I(fr,function(L){var ie=oe(this),H=q(String(L));if(!C(ie)){ie.username="";for(var de=0;de<H.length;de++)ie.username+=yn(H[de],Kt)}}),password:I(Er,function(L){var ie=oe(this),H=q(String(L));if(!C(ie)){ie.password="";for(var de=0;de<H.length;de++)ie.password+=yn(H[de],Kt)}}),host:I(Lr,function(L){var ie=oe(this);ie.cannotBeABaseURL||b(ie,String(L),Dr)}),hostname:I(te,function(L){var ie=oe(this);ie.cannotBeABaseURL||b(ie,String(L),Pr)}),port:I(Ie,function(L){var ie=oe(this);C(ie)||(""==(L=String(L))?ie.port=null:b(ie,L,Br))}),pathname:I(Qe,function(L){var ie=oe(this);ie.cannotBeABaseURL||(ie.path=[],b(ie,L+"",on))}),search:I(T,function(L){var ie=oe(this);""==(L=String(L))?ie.query=null:("?"==L.charAt(0)&&(L=L.slice(1)),ie.query="",b(ie,L,qt)),we(ie.searchParams).updateSearchParams(ie.query)}),searchParams:I(N),hash:I(U,function(L){var ie=oe(this);""==(L=String(L))?ie.fragment=null:("#"==L.charAt(0)&&(L=L.slice(1)),ie.fragment="",b(ie,L,fn))})}),x(Fn,"toJSON",function(){return Cn.call(this)},{enumerable:!0}),x(Fn,"toString",function(){return Cn.call(this)},{enumerable:!0}),ne&&(f=ne.revokeObjectURL,(d=ne.createObjectURL)&&x(w,"createObjectURL",function(L){return d.apply(ne,arguments)}),f&&x(w,"revokeObjectURL",function(L){return f.apply(ne,arguments)})),V(w,"URL"),h({global:!0,forced:!m,sham:!p},{URL:w})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(a,be,Z){"use strict";be.exports=a("./").polyfill()},{"./":250}],250:[function(a,be,Z){(function(M,C){var w;w=function(){"use strict";function I(ft){return"function"==typeof ft}var D=Array.isArray||function(ft){return"[object Array]"===Object.prototype.toString.call(ft)},d=0,f=void 0,h=void 0,p=function(ft,jt){k[d]=ft,k[d+1]=jt,2===(d+=2)&&(h?h(q):Y())},m=typeof window<"u"?window:void 0,g=(g=m||{}).MutationObserver||g.WebKitMutationObserver,x=typeof self>"u"&&void 0!==M&&"[object process]"==={}.toString.call(M),E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var ft=setTimeout;return function(){return ft(q,1)}}var k=new Array(1e3);function q(){for(var ft=0;ft<d;ft+=2)(0,k[ft])(k[ft+1]),k[ft]=void 0,k[ft+1]=void 0;d=0}var G,V,K,Y=void 0;function $(ft,jt){var Lt,Bt=this,Et=new this.constructor(Se),Kt=(void 0===Et[we]&&Ct(Et),Bt._state);return Kt?(Lt=arguments[Kt-1],p(function(){return Je(Kt,Et,Lt,Bt._result)})):ye(Bt,Et,ft,jt),Et}function ne(ft){var jt;return ft&&"object"==typeof ft&&ft.constructor===this?ft:(Ce(jt=new this(Se),ft),jt)}Y=x?function(){return M.nextTick(q)}:g?(V=0,x=new g(q),K=document.createTextNode(""),x.observe(K,{characterData:!0}),function(){K.data=V=++V%2}):E?((G=new MessageChannel).port1.onmessage=q,function(){return G.port2.postMessage(0)}):(void 0===m&&"function"==typeof a?function J(){try{var ft=Function("return this")().require("vertx");return void 0!==(f=ft.runOnLoop||ft.runOnContext)?function(){f(q)}:S()}catch{return S()}}:S)();var we=Math.random().toString(36).substring(2);function Se(){}var oe=void 0,ge=1,re=2;function Q(ft,jt,Lt){p(function(Bt){var Et=!1,Kt=function(yn,Yn,An,Jn){try{yn.call(Yn,function(yn){Et||(Et=!0,(jt!==yn?Ce:le)(Bt,yn))},function(yn){Et||(Et=!0,z(Bt,yn))})}catch(Rn){return Rn}}(Lt,jt);!Et&&Kt&&(Et=!0,z(Bt,Kt))},ft)}function fe(ft,jt,Lt){var Bt,Et;jt.constructor===ft.constructor&&Lt===$&&jt.constructor.resolve===ne?(Bt=ft,(Et=jt)._state===ge?le(Bt,Et._result):Et._state===re?z(Bt,Et._result):ye(Et,void 0,function(Kt){return Ce(Bt,Kt)},function(Kt){return z(Bt,Kt)})):void 0!==Lt&&I(Lt)?Q(ft,jt,Lt):le(ft,jt)}function Ce(ft,jt){if(ft===jt)z(ft,new TypeError("You cannot resolve a promise with itself"));else if(Lt=typeof jt,null===jt||"object"!=Lt&&"function"!=Lt)le(ft,jt);else{Lt=void 0;try{Lt=jt.then}catch(Bt){return void z(ft,Bt)}fe(ft,jt,Lt)}var Lt}function it(ft){ft._onerror&&ft._onerror(ft._result),je(ft)}function le(ft,jt){ft._state===oe&&(ft._result=jt,ft._state=ge,0!==ft._subscribers.length&&p(je,ft))}function z(ft,jt){ft._state===oe&&(ft._state=re,ft._result=jt,p(it,ft))}function ye(ft,jt,Lt,Bt){var Et=ft._subscribers,Kt=Et.length;ft._onerror=null,Et[Kt]=jt,Et[Kt+ge]=Lt,Et[Kt+re]=Bt,0===Kt&&ft._state&&p(je,ft)}function je(ft){var jt=ft._subscribers,Lt=ft._state;if(0!==jt.length){for(var Bt,Et=void 0,Kt=ft._result,yn=0;yn<jt.length;yn+=3)Et=jt[yn+Lt],(Bt=jt[yn])?Je(Lt,Bt,Et,Kt):Et(Kt);ft._subscribers.length=0}}function Je(ft,jt,Lt,Bt){var Et=I(Lt),Kt=void 0,yn=void 0,Yn=!0;if(Et){try{Kt=Lt(Bt)}catch(An){Yn=!1,yn=An}if(jt===Kt)return void z(jt,new TypeError("A promises callback cannot return that same promise."))}else Kt=Bt;jt._state===oe&&(Et&&Yn?Ce(jt,Kt):!1===Yn?z(jt,yn):ft===ge?le(jt,Kt):ft===re&&z(jt,Kt))}var gt=0;function Ct(ft){ft[we]=gt++,ft._state=void 0,ft._result=void 0,ft._subscribers=[]}yt.prototype._enumerate=function(ft){for(var jt=0;this._state===oe&&jt<ft.length;jt++)this._eachEntry(ft[jt],jt)},yt.prototype._eachEntry=function(ft,jt){var Lt=this._instanceConstructor,Bt=Lt.resolve;if(Bt===ne){var Et,Kt=void 0,yn=void 0,Yn=!1;try{Kt=ft.then}catch(An){Yn=!0,yn=An}Kt===$&&ft._state!==oe?this._settledAt(ft._state,jt,ft._result):"function"!=typeof Kt?(this._remaining--,this._result[jt]=ft):Lt===Ut?(Et=new Lt(Se),Yn?z(Et,yn):fe(Et,ft,Kt),this._willSettleAt(Et,jt)):this._willSettleAt(new Lt(function(An){return An(ft)}),jt)}else this._willSettleAt(Bt(ft),jt)},yt.prototype._settledAt=function(ft,jt,Lt){var Bt=this.promise;Bt._state===oe&&(this._remaining--,ft===re?z(Bt,Lt):this._result[jt]=Lt),0===this._remaining&&le(Bt,this._result)},yt.prototype._willSettleAt=function(ft,jt){var Lt=this;ye(ft,void 0,function(Bt){return Lt._settledAt(ge,jt,Bt)},function(Bt){return Lt._settledAt(re,jt,Bt)})};var $t=yt;function yt(ft,jt){this._instanceConstructor=ft,this.promise=new ft(Se),this.promise[we]||Ct(this.promise),D(jt)?(this.length=jt.length,this._remaining=jt.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(jt),0!==this._remaining)||le(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}Xt.prototype.catch=function(ft){return this.then(null,ft)},Xt.prototype.finally=function(ft){var jt=this.constructor;return I(ft)?this.then(function(Lt){return jt.resolve(ft()).then(function(){return Lt})},function(Lt){return jt.resolve(ft()).then(function(){throw Lt})}):this.then(ft,ft)};var Ut=Xt;function Xt(ft){if(this[we]=gt++,this._result=this._state=void 0,this._subscribers=[],Se!==ft){if("function"!=typeof ft)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Xt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var jt=this;try{ft(function(Lt){Ce(jt,Lt)},function(Lt){z(jt,Lt)})}catch(Lt){z(jt,Lt)}}}return Ut.prototype.then=$,Ut.all=function(ft){return new $t(this,ft).promise},Ut.race=function(ft){var jt=this;return D(ft)?new jt(function(Lt,Bt){for(var Et=ft.length,Kt=0;Kt<Et;Kt++)jt.resolve(ft[Kt]).then(Lt,Bt)}):new jt(function(Lt,Bt){return Bt(new TypeError("You must pass an array to race."))})},Ut.resolve=ne,Ut.reject=function(ft){var jt=new this(Se);return z(jt,ft),jt},Ut._setScheduler=function(ft){h=ft},Ut._setAsap=function(ft){p=ft},Ut._asap=p,Ut.polyfill=function(){var ft=void 0;if(void 0!==C)ft=C;else if(typeof self<"u")ft=self;else try{ft=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var jt=ft.Promise;if(jt){var Lt=null;try{Lt=Object.prototype.toString.call(jt.resolve())}catch{}if("[object Promise]"===Lt&&!jt.cast)return}ft.Promise=Ut},Ut.Promise=Ut},"object"==typeof Z&&void 0!==be?be.exports=w():this.ES6Promise=w()}).call(this,a("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(a,be,Z){var C;C=function(b,w){"use strict";function d(h){try{delete window[h]}catch{window[h]=void 0}}function f(h){(h=document.getElementById(h))&&document.getElementsByTagName("head")[0].removeChild(h)}w.exports=function(h){var p=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],m=h,g=p.timeout||5e3,x=p.jsonpCallback||"callback",E=void 0;return new Promise(function(S,k){var q=p.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),J=x+"_"+q,G=(window[q]=function(V){S({ok:!0,json:function(){return Promise.resolve(V)}}),E&&clearTimeout(E),f(J),d(q)},m+=-1===m.indexOf("?")?"?":"&",document.createElement("script"));G.setAttribute("src",""+m+x+"="+q),p.charset&&G.setAttribute("charset",p.charset),G.id=J,document.getElementsByTagName("head")[0].appendChild(G),E=setTimeout(function(){k(new Error("JSONP request to "+h+" timed out")),d(q),f(J),window[q]=function(){d(q)}},g),G.onerror=function(){k(new Error("JSONP request to "+h+" failed")),d(q),f(J),E&&clearTimeout(E)}})}},void 0!==Z&&void 0!==be?C(0,be):(C(C={exports:{}},C),this.fetchJsonp=C.exports)},{}],252:[function(a,be,Z){var M=function(C){"use strict";var b,w,I,D,d,f,p,m,g,x;if(!(void 0===C||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return b=function(){return C.URL||C.webkitURL||C},w=(x=C.document).createElementNS("http://www.w3.org/1999/xhtml","a"),I="download"in w,D=/constructor/i.test(C.HTMLElement)||C.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(E){(C.setImmediate||C.setTimeout)(function(){throw E},0)},4e4,p=function(E){setTimeout(function(){"string"==typeof E?b().revokeObjectURL(E):E.remove()},4e4)},m=function(E){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(E.type)?new Blob(["\ufeff",E],{type:E.type}):E},x=(g=function(E,S,V){V||(E=m(E));var q,J,G=this,K=(V="application/octet-stream"===E.type,function(){for(var $=G,ne="writestart progress write writeend".split(" "),we=(ne=[].concat(ne)).length;we--;){var Se=$["on"+ne[we]];if("function"==typeof Se)try{Se.call($,$)}catch(oe){f(oe)}}});G.readyState=G.INIT,I?(q=b().createObjectURL(E),setTimeout(function(){var $,ne;w.href=q,w.download=S,$=w,ne=new MouseEvent("click"),$.dispatchEvent(ne),K(),p(q),G.readyState=G.DONE})):(d||V&&D)&&C.FileReader?((J=new FileReader).onloadend=function(){var $=d?J.result:J.result.replace(/^data:[^;]*;/,"data:attachment/file;");C.open($,"_blank")||(C.location.href=$),$=void 0,G.readyState=G.DONE,K()},J.readAsDataURL(E),G.readyState=G.INIT):(q=q||b().createObjectURL(E),!V&&C.open(q,"_blank")||(C.location.href=q),G.readyState=G.DONE,K(),p(q))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(E,S,k){return S=S||E.name||"download",k||(E=m(E)),navigator.msSaveOrOpenBlob(E,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(E,S,k){return new g(E,S||E.name||"download",k)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);void 0!==be&&be.exports&&(be.exports.saveAs=M)},{}],253:[function(a,be,Z){var M,C=Object.defineProperty,b=(C(Z,"__esModule",{value:!0}),Z),w={GIFEncoder:()=>K,applyPalette:()=>function(oe,ge,re="rgb565"){if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<ge.length)throw new Error("applyPalette() only works with 256 colors or less");const Q=new Uint32Array(oe.buffer),fe=Q.length,Ce="rgb444"===re?4096:65536,it=new Uint8Array(fe),le=new Array(Ce);if("rgba4444"===re)for(let Xt=0;Xt<fe;Xt++){var Je,z=(Je=Q[Xt])>>24&255,ye=Je>>16&255,je=Je>>8&255,gt=(gt=p(Je&=255,je,ye,z))in le?le[gt]:le[gt]=function(ft,jt,Lt,Bt,Et){let Kt=0,yn=1e100;for(let Rn=0;Rn<Et.length;Rn++){var An=Et[Rn],Jn=J(An[3]-Bt);Jn>yn||(Jn+=J(An[0]-ft))>yn||(Jn+=J(An[1]-jt))>yn||(Jn+=J(An[2]-Lt))>yn||(yn=Jn,Kt=Rn)}return Kt}(Je,je,ye,z,ge);it[Xt]=gt}else{const Xt="rgb444"===re?m:h;for(let ft=0;ft<fe;ft++){var yt,Ct=(yt=Q[ft])>>16&255,$t=yt>>8&255,Ut=(Ut=Xt(yt&=255,$t,Ct))in le?le[Ut]:le[Ut]=function(jt,Lt,Bt,Et){let Kt=0,yn=1e100;for(let Rn=0;Rn<Et.length;Rn++){var An=Et[Rn],Jn=J(An[0]-jt);Jn>yn||(Jn+=J(An[1]-Lt))>yn||(Jn+=J(An[2]-Bt))>yn||(yn=Jn,Kt=Rn)}return Kt}(yt,$t,Ct,ge);it[ft]=Ut}}return it},default:()=>Se,nearestColor:()=>function(oe,ge,re=k){return oe[G(oe,ge,re)]},nearestColorIndex:()=>G,nearestColorIndexWithDistance:()=>V,prequantize:()=>function(oe,{roundRGB:ge=5,roundAlpha:re=10,oneBitAlpha:Q=null}={}){const fe=new Uint32Array(oe.buffer);for(let ye=0;ye<fe.length;ye++){let je=(z=fe[ye])>>24&255;var it=z>>16&255,le=z>>8&255,z=255&z;je=q(je,re),Q&&(je=je<=("number"==typeof Q?Q:127)?0:255),z=q(z,ge),le=q(le,ge),it=q(it,ge),fe[ye]=je<<24|it<<16|le<<8|z}},quantize:()=>function(oe,ge,re={}){var{format:Q="rgb565",clearAlpha:fe=!0,clearAlphaColor:Ce=0,clearAlphaThreshold:it=0,oneBitAlpha:le=!1}=re;if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");oe=new Uint32Array(oe.buffer);let z=!1!==re.useSqrt;const ye="rgba4444"===Q,je=function(Sr,Bn){const bn=new Array("rgb444"===Bn?4096:65536),Qn=Sr.length;if("rgba4444"===Bn)for(let un=0;un<Qn;++un){var rt,Pn=(rt=Sr[un])>>24&255,pt=rt>>16&255,bt=rt>>8&255,_t=p(rt&=255,bt,pt,Pn);let Tn=_t in bn?bn[_t]:bn[_t]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=rt,Tn.gc+=bt,Tn.bc+=pt,Tn.ac+=Pn,Tn.cnt++}else if("rgb444"===Bn)for(let un=0;un<Qn;++un){var zn,vn=(zn=Sr[un])>>16&255,On=zn>>8&255,ir=m(zn&=255,On,vn);let Tn=ir in bn?bn[ir]:bn[ir]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=zn,Tn.gc+=On,Tn.bc+=vn,Tn.cnt++}else for(let un=0;un<Qn;++un){var Br,Dr=(Br=Sr[un])>>16&255,Pr=Br>>8&255,In=h(Br&=255,Pr,Dr);let Tn=In in bn?bn[In]:bn[In]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=Br,Tn.gc+=Pr,Tn.bc+=Dr,Tn.cnt++}return bn}(oe,Q),Je=je.length,gt=Je-1,Ct=new Uint32Array(Je+1);for(var $t=0,yt=0;yt<Je;++yt){const Sr=je[yt];null!=Sr&&(An=1/Sr.cnt,ye&&(Sr.ac*=An),Sr.rc*=An,Sr.gc*=An,Sr.bc*=An,je[$t++]=Sr)}var Ut,Xt,ft;for(x(ge)/$t<.022&&(z=!1),yt=0;yt<$t-1;++yt)je[yt].fw=yt+1,je[yt+1].bk=yt,z&&(je[yt].cnt=Math.sqrt(je[yt].cnt));for(z&&(je[yt].cnt=Math.sqrt(je[yt].cnt)),yt=0;yt<$t;++yt){E(je,yt,!1);var jt=je[yt].err;for(Xt=++Ct[0];1<Xt&&!(je[Ut=Ct[ft=Xt>>1]].err<=jt);Xt=ft)Ct[Xt]=Ut;Ct[Xt]=yt}var Lt,Bt=$t-ge;for(yt=0;yt<Bt;){for(;;){var Et=Ct[1];if((Lt=je[Et]).tm>=Lt.mtm&&je[Lt.nn].mtm<=Lt.tm)break;for(Lt.mtm==gt?Et=Ct[1]=Ct[Ct[0]--]:(E(je,Et,!1),Lt.tm=yt),jt=je[Et].err,Xt=1;(ft=Xt+Xt)<=Ct[0]&&(ft<Ct[0]&&je[Ct[ft]].err>je[Ct[ft+1]].err&&ft++,!(jt<=je[Ut=Ct[ft]].err));Xt=ft)Ct[Xt]=Ut;Ct[Xt]=Et}var Kt=je[Lt.nn],yn=Lt.cnt,Yn=Kt.cnt,An=1/(yn+Yn);ye&&(Lt.ac=An*(yn*Lt.ac+Yn*Kt.ac)),Lt.rc=An*(yn*Lt.rc+Yn*Kt.rc),Lt.gc=An*(yn*Lt.gc+Yn*Kt.gc),Lt.bc=An*(yn*Lt.bc+Yn*Kt.bc),Lt.cnt+=Kt.cnt,Lt.mtm=++yt,je[Kt.bk].fw=Kt.fw,je[Kt.fw].bk=Kt.bk,Kt.mtm=gt}let Jn=[];for(yt=0;;0){let Sr=g(Math.round(je[yt].rc),0,255),Bn=g(Math.round(je[yt].gc),0,255),ur=g(Math.round(je[yt].bc),0,255),bn=255;ye&&(bn=g(Math.round(je[yt].ac),0,255),le&&(bn=bn<=(Rn="number"==typeof le?le:127)?0:255),fe&&bn<=it&&(Sr=Bn=ur=Ce,bn=0));var Rn=ye?[Sr,Bn,ur,bn]:[Sr,Bn,ur];if(function(Qn,Pn){for(let rt=0;rt<Qn.length;rt++){var pt=(bt=Qn[rt])[0]===Pn[0]&&bt[1]===Pn[1]&&bt[2]===Pn[2],bt=!(4<=bt.length&&4<=Pn.length)||bt[3]===Pn[3];if(pt&&bt)return!0}return!1}(Jn,Rn)||Jn.push(Rn),0==(yt=je[yt].fw))break}return Jn},snapColorsToPalette:()=>function(oe,ge,re=5){if(oe.length&&ge.length){var Q=oe.map(z=>z.slice(0,3)),fe=re*re,Ce=oe[0].length;for(let z=0;z<ge.length;z++){let ye=ge[z];ye=ye.length<Ce?[ye[0],ye[1],ye[2],255]:ye.length>Ce?ye.slice(0,3):ye.slice();var le,it=(le=V(Q,ye.slice(0,3),k))[0];0<(le=le[1])&&le<=fe&&(oe[it]=ye)}}}};for(M in w)C(b,M,{get:w[M],enumerable:!0});var I={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function D(oe=256){let ge=0,re=new Uint8Array(oe);return{get buffer(){return re.buffer},reset(){ge=0},bytesView:()=>re.subarray(0,ge),bytes:()=>re.slice(0,ge),writeByte(fe){Q(ge+1),re[ge]=fe,ge++},writeBytes(fe,Ce=0,it=fe.length){Q(ge+it);for(let le=0;le<it;le++)re[ge++]=fe[le+Ce]},writeBytesView(fe,Ce=0,it=fe.byteLength){Q(ge+it),re.set(fe.subarray(Ce,Ce+it),ge),ge+=it}};function Q(fe){var Ce=re.length;if(!(fe<=Ce)){fe=Math.max(fe,Ce*(Ce<1048576?2:1.125)>>>0),0!=Ce&&(fe=Math.max(fe,256));const it=re;re=new Uint8Array(fe),0<ge&&re.set(it.subarray(0,ge),0)}}}var d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(oe,ge,re,ye,fe=D(512),Ce=new Uint8Array(256),it=new Int32Array(5003),le=new Int32Array(5003)){var z=it.length;ye=Math.max(2,ye),Ce.fill(0),le.fill(0),it.fill(-1);let je=0,Je=0;var gt=ye+1;const Ct=gt;let $t=!1,yt=Ct,Ut=(1<<yt)-1;var Xt=1<<gt-1;const ft=1+Xt;let jt=2+Xt,Lt=0,Bt=re[0],Et=0;for(let Rn=z;Rn<65536;Rn*=2)++Et;Et=8-Et,fe.writeByte(ye),Jn(Xt);var Kt=re.length;for(let Rn=1;Rn<Kt;Rn++)e:{var yn=re[Rn],Yn=(yn<<12)+Bt;let Sr=yn<<Et^Bt;if(it[Sr]===Yn)Bt=le[Sr];else{for(var An=0===Sr?1:z-Sr;0<=it[Sr];)if((Sr-=An)<0&&(Sr+=z),it[Sr]===Yn){Bt=le[Sr];break e}Jn(Bt),Bt=yn,jt<4096?(le[Sr]=jt++,it[Sr]=Yn):(it.fill(-1),jt=2+Xt,$t=!0,Jn(Xt))}}return Jn(Bt),Jn(ft),fe.writeByte(0),fe.bytesView();function Jn(Rn){for(je&=d[Je],0<Je?je|=Rn<<Je:je=Rn,Je+=yt;8<=Je;)Ce[Lt++]=255&je,254<=Lt&&(fe.writeByte(Lt),fe.writeBytesView(Ce,0,Lt),Lt=0),je>>=8,Je-=8;if((jt>Ut||$t)&&($t?(yt=Ct,Ut=(1<<yt)-1,$t=!1):(++yt,Ut=12===yt?1<<yt:(1<<yt)-1)),Rn==ft){for(;0<Je;)Ce[Lt++]=255&je,254<=Lt&&(fe.writeByte(Lt),fe.writeBytesView(Ce,0,Lt),Lt=0),je>>=8,Je-=8;0<Lt&&(fe.writeByte(Lt),fe.writeBytesView(Ce,0,Lt),Lt=0)}}};function h(oe,ge,re){return oe<<8&63488|ge<<2&992|re>>3}function p(oe,ge,re,Q){return oe>>4|240&ge|(240&re)<<4|(240&Q)<<8}function m(oe,ge,re){return oe>>4<<8|240&ge|re>>4}function g(oe,ge,re){return oe<ge?ge:re<oe?re:oe}function x(oe){return oe*oe}function E(oe,ge,re){var Q=0,fe=1e100;const Ce=oe[ge];for(var it=Ce.cnt,le=Ce.ac,z=Ce.rc,ye=Ce.gc,je=Ce.bc,Je=Ce.fw;0!=Je;Je=oe[Je].fw){var gt,$t,Ct=oe[Je];fe<=($t=it*($t=Ct.cnt)/(it+$t))||(gt=0,re&&fe<=(gt+=$t*x(Ct.ac-le))||fe<=(gt+=$t*x(Ct.rc-z))||fe<=(gt+=$t*x(Ct.gc-ye))||fe<=(gt+=$t*x(Ct.bc-je))||(fe=gt,Q=Je))}Ce.err=fe,Ce.nn=Q}function k(oe,ge){for(var re=0,Q=0;Q<oe.length;Q++){var fe=oe[Q]-ge[Q];re+=fe*fe}return re}function q(oe,ge){return 1<ge?Math.round(oe/ge)*ge:oe}function J(oe){return oe*oe}function G(oe,ge,re=k){let Q=1/0,fe=-1;for(let it=0;it<oe.length;it++){var Ce=re(ge,oe[it]);Ce<Q&&(Q=Ce,fe=it)}return fe}function V(oe,ge,re=k){let Q=1/0,fe=-1;for(let it=0;it<oe.length;it++){var Ce=re(ge,oe[it]);Ce<Q&&(Q=Ce,fe=it)}return[fe,Q]}function K(oe={}){const{initialCapacity:ge=4096,auto:re=!0}=oe,Q=D(ge),fe=new Uint8Array(256),Ce=new Int32Array(5003),it=new Int32Array(5003);let le=!1;return{reset(){Q.reset(),le=!1},finish(){Q.writeByte(I.trailer)},bytes:()=>Q.bytes(),bytesView:()=>Q.bytesView(),get buffer(){return Q.buffer},get stream(){return Q},writeHeader:z,writeFrame(ye,je,Je,Bt={}){var{transparent:Ct=!1,transparentIndex:$t=0,delay:An=0,palette:yt=null,repeat:Kt=0,colorDepth:Ut=8,dispose:Xt=-1}=Bt;let ft=!1;if(re?le||(ft=!0,z(),le=!0):ft=!!Bt.first,je=Math.max(0,Math.floor(je)),Je=Math.max(0,Math.floor(Je)),ft){if(!yt)throw new Error("First frame must include a { palette } option");var[Bt,yn,Lt,Yn,Et=8]=[Q,je,Je,yt,Ut];Et=128|Et-1<<4|(Yn=we(Yn.length)-1),ne(Bt,yn),ne(Bt,Lt),Bt.writeBytes([Et,0,0]),$(Q,yt),0<=Kt&&(yn=Kt,(Yn=Q).writeByte(33),Yn.writeByte(255),Yn.writeByte(11),Y(Yn,"NETSCAPE2.0"),Yn.writeByte(3),Yn.writeByte(1),ne(Yn,yn),Yn.writeByte(0))}var jt,Lt,Et=Xt,Kt=Lt=Math.round(An/10),yn=Ct,Yn=$t,An=((Bt=Q).writeByte(33),Bt.writeByte(249),Bt.writeByte(4),Yn<0&&(Yn=0,yn=!1),yn=yn?(jt=1,2):jt=0,0<=Et&&(yn=7&Et),Bt.writeByte((yn<<=2)|jt),ne(Bt,Kt),Bt.writeByte(Yn||0),Bt.writeByte(0),!!yt&&!ft);Ct=je,$t=Je,jt=An?yt:null,(Xt=Q).writeByte(44),ne(Xt,0),ne(Xt,0),ne(Xt,Ct),ne(Xt,$t),jt?(Ct=we(jt.length)-1,Xt.writeByte(128|Ct)):Xt.writeByte(0),An&&$(Q,yt),[Kt,Bt,$t,Ct,Xt=8,An,yt,ye]=[Q,ye,je,Je,Ut,fe,Ce,it],f($t,Ct,Bt,Xt,Kt,An,yt,ye)}};function z(){Y(Q,"GIF89a")}}function $(oe,ge){var re=1<<we(ge.length);for(let Q=0;Q<re;Q++){let fe=[0,0,0];Q<ge.length&&(fe=ge[Q]),oe.writeByte(fe[0]),oe.writeByte(fe[1]),oe.writeByte(fe[2])}}function ne(oe,ge){oe.writeByte(255&ge),oe.writeByte(ge>>8&255)}function Y(oe,ge){for(var re=0;re<ge.length;re++)oe.writeByte(ge.charCodeAt(re))}function we(oe){return Math.max(Math.ceil(Math.log2(oe)),1)}var Se=K},{}],254:[function(a,be,Z){Z.read=function(M,C,b,w,E){var D,d,f=8*E-w-1,h=(1<<f)-1,p=h>>1,m=-7,g=b?E-1:0,x=b?-1:1;for(E=M[C+g],g+=x,D=E&(1<<-m)-1,E>>=-m,m+=f;0<m;D=256*D+M[C+g],g+=x,m-=8);for(d=D&(1<<-m)-1,D>>=-m,m+=w;0<m;d=256*d+M[C+g],g+=x,m-=8);if(0===D)D=1-p;else{if(D===h)return d?NaN:1/0*(E?-1:1);d+=Math.pow(2,w),D-=p}return(E?-1:1)*d*Math.pow(2,D-w)},Z.write=function(M,C,b,w,I,S){var d,f,h=8*S-I-1,p=(1<<h)-1,m=p>>1,g=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,x=w?0:S-1,E=w?1:-1;for(S=C<0||0===C&&1/C<0?1:0,C=Math.abs(C),isNaN(C)||C===1/0?(f=isNaN(C)?1:0,d=p):(d=Math.floor(Math.log(C)/Math.LN2),C*(w=Math.pow(2,-d))<1&&(d--,w*=2),2<=(C+=1<=d+m?g/w:g*Math.pow(2,1-m))*w&&(d++,w/=2),p<=d+m?(f=0,d=p):1<=d+m?(f=(C*w-1)*Math.pow(2,I),d+=m):(f=C*Math.pow(2,m-1)*Math.pow(2,I),d=0));8<=I;M[b+x]=255&f,x+=E,f/=256,I-=8);for(d=d<<I|f,h+=I;0<h;M[b+x]=255&d,x+=E,d/=256,h-=8);M[b+x-E]|=128*S}},{}],255:[function(a,be,Z){"use strict";var M;function C(pt,bt){return pt.b===bt.b&&pt.a===bt.a}function b(pt,bt){return pt.b<bt.b||pt.b===bt.b&&pt.a<=bt.a}function w(pt,bt,rt){var _t=bt.b-pt.b,vn=rt.b-bt.b;return 0<_t+vn?_t<vn?bt.a-pt.a+_t/(_t+vn)*(pt.a-rt.a):bt.a-rt.a+vn/(_t+vn)*(rt.a-pt.a):0}function I(pt,bt,rt){var _t=bt.b-pt.b,vn=rt.b-bt.b;return 0<_t+vn?(bt.a-rt.a)*_t+(bt.a-pt.a)*vn:0}function D(pt,bt){return pt.a<bt.a||pt.a===bt.a&&pt.b<=bt.b}function d(pt,bt,rt){var _t=bt.a-pt.a,vn=rt.a-bt.a;return 0<_t+vn?_t<vn?bt.b-pt.b+_t/(_t+vn)*(pt.b-rt.b):bt.b-rt.b+vn/(_t+vn)*(rt.b-pt.b):0}function f(pt,bt,rt){var _t=bt.a-pt.a,vn=rt.a-bt.a;return 0<_t+vn?(bt.b-rt.b)*_t+(bt.b-pt.b)*vn:0}function h(pt,bt,rt,_t){return(pt=pt<0?0:pt)<=(rt=rt<0?0:rt)?0===rt?(bt+_t)/2:bt+pt/(pt+rt)*(_t-bt):_t+rt/(pt+rt)*(bt-_t)}function p(pt){var bt=S(pt.b);return q(bt,pt.c),q(bt.b,pt.c),J(bt,pt.a),bt}function m(pt,bt){var rt=!1,_t=!1;pt!==bt&&(bt.a!==pt.a&&(_t=!0,V(bt.a,pt.a)),bt.d!==pt.d&&(rt=!0,K(bt.d,pt.d)),k(bt,pt),_t||(q(bt,pt.a),pt.a.c=pt),rt||(J(bt,pt.d),pt.d.a=pt))}function g(pt){var bt=pt.b,rt=!1;pt.d!==pt.b.d&&(rt=!0,K(pt.d,pt.b.d)),pt.c===pt?V(pt.a,null):(pt.b.d.a=pt.b.e,pt.a.c=pt.c,k(pt,pt.b.e),rt||J(pt,pt.d)),bt.c===bt?(V(bt.a,null),K(bt.d,null)):(pt.d.a=bt.b.e,bt.a.c=bt.c,k(bt,bt.b.e)),G(pt)}function x(pt){var bt=S(pt),rt=bt.b;return k(bt,pt.e),bt.a=pt.b.a,q(rt,bt.a),bt.d=rt.d=pt.d,bt=bt.b,k(pt.b,pt.b.b.e),k(pt.b,bt),pt.b.a=bt.a,bt.b.a.c=bt.b,bt.b.d=pt.b.d,bt.f=pt.f,bt.b.f=pt.b.f,bt}function E(pt,bt){var rt=!1,_t=S(pt),vn=_t.b;return bt.d!==pt.d&&(rt=!0,K(bt.d,pt.d)),k(_t,pt.e),k(vn,bt),_t.a=pt.b.a,vn.a=bt.a,_t.d=vn.d=pt.d,pt.d.a=vn,rt||J(_t,pt.d),_t}function S(pt){var bt=new Lt,rt=new Lt;return(((rt.h=pt.b.h).b.h=bt).h=pt).b.h=rt,bt.b=rt,((bt.c=bt).e=rt).b=bt,(rt.c=rt).e=bt}function k(pt,bt){var rt=pt.c,_t=bt.c;rt.b.e=bt,(_t.b.e=pt).c=_t,bt.c=rt}function q(pt,bt){var rt=bt.f,_t=new Et(bt,rt);for(rt.e=_t,rt=(bt.f=_t).c=pt;rt.a=_t,(rt=rt.c)!==pt;);}function J(pt,bt){var rt=bt.d,_t=new jt(bt,rt);for(rt.b=_t,(bt.d=_t).a=pt,_t.c=bt.c,rt=pt;rt.d=_t,(rt=rt.e)!==pt;);}function G(pt){var bt=pt.h;(bt.b.h=pt=pt.b.h).b.h=bt}function V(pt,bt){for(var rt=pt.c,_t=rt;_t.a=bt,(_t=_t.c)!==rt;);((_t=pt.e).f=rt=pt.f).e=_t}function K(pt,bt){for(var rt=pt.a,_t=rt;_t.d=bt,(_t=_t.e)!==rt;);((_t=pt.b).d=rt=pt.d).b=_t}function $(pt){var bt=0;return Math.abs(pt[1])>Math.abs(pt[0])&&(bt=1),Math.abs(pt[2])>Math.abs(pt[bt])?2:bt}function ne(pt,bt){pt.f+=bt.f,pt.b.f+=bt.b.f}function Y(pt,bt,rt){return rt=rt.a,(bt=bt.a).b.a===(pt=pt.a)?rt.b.a===pt?b(bt.a,rt.a)?I(rt.b.a,bt.a,rt.a)<=0:0<=I(bt.b.a,rt.a,bt.a):I(rt.b.a,pt,rt.a)<=0:rt.b.a===pt?0<=I(bt.b.a,pt,bt.a):(bt=w(bt.b.a,pt,bt.a),(pt=w(rt.b.a,pt,rt.a))<=bt)}function we(pt){pt.a.i=null;var bt=pt.e;bt.a.c=bt.c,bt.c.a=bt.a,pt.e=null}function Se(pt,bt){g(pt.a),pt.c=!1,(pt.a=bt).i=pt}function oe(pt){for(var bt=pt.a.a;(pt=Pn(pt)).a.a===bt;);return pt.c&&(Se(pt,bt=E(Qn(pt).a.b,pt.a.e)),pt=Pn(pt)),pt}function ge(pt,bt,rt){var _t=new bn;return _t.a=rt,_t.e=$t(pt.f,bt.e,_t),rt.i=_t}function re(pt,bt){switch(pt.s){case 100130:return!!(1&bt);case 100131:return 0!==bt;case 100132:return 0<bt;case 100133:return bt<0;case 100134:return 2<=bt||bt<=-2}return!1}function Q(pt){var bt=pt.a,rt=bt.d;rt.c=pt.d,rt.a=bt,we(pt)}function fe(pt,bt,rt){for(bt=(pt=bt).a;pt!==rt;){pt.c=!1;var _t=Qn(pt),vn=_t.a;if(vn.a!==bt.a){if(!_t.c){Q(pt);break}Se(_t,vn=E(bt.c.b,vn.b))}bt.c!==vn&&(m(vn.b.e,vn),m(bt,vn)),Q(pt),bt=_t.a,pt=_t}return bt}function Ce(pt,bt,rt,_t,vn,On){for(var zn=!0;ge(pt,bt,rt.b),(rt=rt.c)!==_t;);for(null===vn&&(vn=Qn(bt).a.b.c);(rt=(_t=Qn(bt)).a.b).a===vn.a;)rt.c!==vn&&(m(rt.b.e,rt),m(vn.b.e,rt)),_t.f=bt.f-rt.f,_t.d=re(pt,_t.f),bt.b=!0,!zn&&ye(pt,bt)&&(ne(rt,vn),we(bt),g(vn)),zn=!1,bt=_t,vn=rt;bt.b=!0,On&&Je(pt,bt)}function it(pt,bt,rt,_t,vn){var On=[bt.g[0],bt.g[1],bt.g[2]];bt.d=null,bt.d=pt.o&&pt.o(On,rt,_t,pt.c)||null,null===bt.d&&(vn?pt.n||(ft(pt,100156),pt.n=!0):bt.d=rt[0])}function le(pt,bt,rt){var _t=[null,null,null,null];_t[0]=bt.a.d,_t[1]=rt.a.d,it(pt,bt.a,_t,[.5,.5,0,0],!1),m(bt,rt)}function z(pt,bt,rt,_t,vn){var On=Math.abs(bt.b-pt.b)+Math.abs(bt.a-pt.a),zn=Math.abs(rt.b-pt.b)+Math.abs(rt.a-pt.a),ir=vn+1;_t[vn]=.5*zn/(On+zn),_t[ir]=.5*On/(On+zn),pt.g[0]+=_t[vn]*bt.g[0]+_t[ir]*rt.g[0],pt.g[1]+=_t[vn]*bt.g[1]+_t[ir]*rt.g[1],pt.g[2]+=_t[vn]*bt.g[2]+_t[ir]*rt.g[2]}function ye(pt,bt){var rt=Qn(bt),_t=bt.a,vn=rt.a;if(b(_t.a,vn.a)){if(0<I(vn.b.a,_t.a,vn.a))return;if(C(_t.a,vn.a)){if(_t.a!==vn.a){rt=pt.e;var On=_t.a.h;if(0<=On){var zn=(rt=rt.b).d,ir=rt.e,Dr=rt.c,Pr=Dr[On];zn[Pr]=zn[rt.a],(Dr[zn[Pr]]=Pr)<=--rt.a&&(Pr<=1||b(ir[zn[Pr>>1]],ir[zn[Pr]])?Bn:ur)(rt,Pr),ir[On]=null,Dr[On]=rt.b,rt.b=On}else for(rt.c[-(On+1)]=null;0<rt.a&&null===rt.c[rt.d[rt.a-1]];)--rt.a;le(pt,vn.b.e,_t)}}else x(vn.b),m(_t,vn.b.e),bt.b=rt.b=!0}else{if(I(_t.b.a,vn.a,_t.a)<0)return;Pn(bt).b=bt.b=!0,x(_t.b),m(vn.b.e,_t)}return 1}function je(pt,bt){var rt=Qn(bt),_t=bt.a,vn=rt.a,On=_t.a,zn=vn.a,ir=_t.b.a,Dr=vn.b.a,Pr=new Et;if(I(ir,pt.a,On),I(Dr,pt.a,zn),!(On===zn||Math.min(On.a,ir.a)>Math.max(zn.a,Dr.a))){if(b(On,zn)){if(0<I(Dr,On,zn))return}else if(I(ir,zn,On)<0)return;var Br,In,un=ir,Tn=On,on=Dr,mn=zn;if(b(un,Tn)||(Br=un,un=Tn,Tn=Br),b(on,mn)||(Br=on,on=mn,mn=Br),b(un,on)||(Br=un,un=on,on=Br,Br=Tn,Tn=mn,mn=Br),b(on,Tn)?b(Tn,mn)?((Br=w(un,on,Tn))+(In=w(on,Tn,mn))<0&&(Br=-Br,In=-In),Pr.b=h(Br,on.b,In,Tn.b)):((Br=I(un,on,Tn))+(In=-I(un,mn,Tn))<0&&(Br=-Br,In=-In),Pr.b=h(Br,on.b,In,mn.b)):Pr.b=(on.b+Tn.b)/2,D(un,Tn)||(Br=un,un=Tn,Tn=Br),D(on,mn)||(Br=on,on=mn,mn=Br),D(un,on)||(Br=un,un=on,on=Br,Br=Tn,Tn=mn,mn=Br),D(on,Tn)?D(Tn,mn)?((Br=d(un,on,Tn))+(In=d(on,Tn,mn))<0&&(Br=-Br,In=-In),Pr.a=h(Br,on.a,In,Tn.a)):((Br=f(un,on,Tn))+(In=-f(un,mn,Tn))<0&&(Br=-Br,In=-In),Pr.a=h(Br,on.a,In,mn.a)):Pr.a=(on.a+Tn.a)/2,b(Pr,pt.a)&&(Pr.b=pt.a.b,Pr.a=pt.a.a),un=b(On,zn)?On:zn,b(un,Pr)&&(Pr.b=un.b,Pr.a=un.a),C(Pr,On)||C(Pr,zn))return ye(pt,bt),0;if(!C(ir,pt.a)&&0<=I(ir,pt.a,Pr)||!C(Dr,pt.a)&&I(Dr,pt.a,Pr)<=0){if(Dr===pt.a)x(_t.b),m(vn.b,_t),_t=Qn(bt=oe(bt)).a,fe(pt,Qn(bt),rt),Ce(pt,bt,_t.b.e,_t,_t,!0);else{if(ir!==pt.a)return 0<=I(ir,pt.a,Pr)&&(Pn(bt).b=bt.b=!0,x(_t.b),_t.a.b=pt.a.b,_t.a.a=pt.a.a),void(I(Dr,pt.a,Pr)<=0&&(bt.b=rt.b=!0,x(vn.b),vn.a.b=pt.a.b,vn.a.a=pt.a.a));for(x(vn.b),m(_t.e,vn.b.e),zn=(On=rt=bt).a.b.a;(On=Pn(On)).a.b.a===zn;);On=Qn(bt=On).a.b.c,rt.a=vn.b.e,Ce(pt,bt,(vn=fe(pt,rt,null)).c,_t.b.c,On,!0)}return 1}x(_t.b),x(vn.b),m(vn.b.e,_t),_t.a.b=Pr.b,_t.a.a=Pr.a,_t.a.h=yn(pt.e,_t.a),vn=[0,0,0,0],Pr=[On.d,ir.d,zn.d,Dr.d],(_t=_t.a).g[0]=_t.g[1]=_t.g[2]=0,z(_t,On,ir,vn,0),z(_t,zn,Dr,vn,2),it(pt,_t,Pr,vn,!0),Pn(bt).b=bt.b=rt.b=!0}}function Je(pt,bt){for(var rt=Qn(bt);;){for(;rt.b;)rt=Qn(bt=rt);if(!(bt.b||null!==(bt=Pn(rt=bt))&&bt.b))break;bt.b=!1;var _t=bt.a,vn=rt.a;if(On=_t.b.a!==vn.b.a)e:{var On,zn=Qn(On=bt),ir=On.a,Dr=zn.a,Pr=void 0;if(b(ir.b.a,Dr.b.a)){if(I(ir.b.a,Dr.b.a,ir.a)<0){On=!1;break e}Pn(On).b=On.b=!0,Pr=x(ir),m(Dr.b,Pr),Pr.d.c=On.d}else{if(0<I(Dr.b.a,ir.b.a,Dr.a)){On=!1;break e}On.b=zn.b=!0,Pr=x(Dr),m(ir.e,Dr.b),Pr.b.d.c=On.d}On=!0}if(On&&(rt.c?(we(rt),g(vn),vn=(rt=Qn(bt)).a):bt.c&&(we(bt),g(_t),_t=(bt=Pn(rt)).a)),_t.a!==vn.a)if(_t.b.a===vn.b.a||bt.c||rt.c||_t.b.a!==pt.a&&vn.b.a!==pt.a)ye(pt,bt);else if(je(pt,bt))break;_t.a===vn.a&&_t.b.a===vn.b.a&&(ne(vn,_t),we(bt),g(_t),bt=Pn(rt))}}function gt(pt,bt){var rt=new bn,_t=p(pt.b);_t.a.b=4e150,_t.a.a=bt,_t.b.a.b=-4e150,_t.b.a.a=bt,pt.a=_t.b.a,rt.a=_t,rt.f=0,rt.d=!1,rt.c=!1,rt.h=!0,rt.b=!1,_t=$t(_t=pt.f,_t.a,rt),rt.e=_t}function Ct(pt){this.a=new yt,this.b=pt,this.c=Y}function $t(pt,bt,rt){for(;null!==(bt=bt.c).b&&!pt.c(pt.b,bt.b,rt););return pt=new yt(rt,bt.a,bt),bt.a.c=pt,bt.a=pt}function yt(pt,bt,rt){this.b=pt||null,this.a=bt||this,this.c=rt||this}function Ut(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Xt(pt,bt){if(pt.d!==bt)for(;pt.d!==bt;)if(pt.d<bt)switch(pt.d){case 0:ft(pt,100151),pt.u(null);break;case 1:ft(pt,100152),pt.t()}else switch(pt.d){case 2:ft(pt,100154),pt.v();break;case 1:ft(pt,100153),pt.w()}}function ft(pt,bt){pt.p&&pt.p(bt,pt.c)}function jt(pt,bt){this.b=pt||this,this.d=bt||this,this.a=null,this.c=!1}function Lt(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Bt(){this.c=new Et,this.a=new jt,this.b=new Lt,this.d=new Lt,this.b.b=this.d,this.d.b=this.b}function Et(pt,bt){this.e=pt||this,this.f=bt||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Kt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new An}function yn(pt,bt){var rt,_t,vn;return pt.e?(2*(_t=++(rt=pt.b).a)>rt.f&&(rt.f*=2,rt.c=Jn(rt.c,rt.f+1)),0===rt.b?vn=_t:(vn=rt.b,rt.b=rt.c[rt.b]),rt.e[vn]=bt,rt.c[vn]=_t,rt.d[_t]=vn,rt.h&&ur(rt,_t),vn):(rt=pt.a++,pt.c[rt]=bt,-(rt+1))}function Yn(pt){if(0===pt.a)return Sr(pt.b);var bt=pt.c[pt.d[pt.a-1]];if(0!==pt.b.a&&b(Rn(pt.b),bt))return Sr(pt.b);for(;--pt.a,0<pt.a&&null===pt.c[pt.d[pt.a-1]];);return bt}function An(){this.d=Jn([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Jn(pt,bt){for(var rt=Array(bt),_t=0;_t<pt.length;_t++)rt[_t]=pt[_t];for(;_t<bt;_t++)rt[_t]=0;return rt}function Rn(pt){return pt.e[pt.d[1]]}function Sr(pt){var bt=pt.d,rt=pt.e,_t=pt.c,vn=bt[1],On=rt[vn];return 0<pt.a&&(bt[1]=bt[pt.a],_t[bt[1]]=1,rt[vn]=null,_t[vn]=pt.b,pt.b=vn,0<--pt.a&&Bn(pt,1)),On}function Bn(pt,bt){for(var rt=pt.d,_t=pt.e,vn=pt.c,On=bt,zn=rt[On];;){var ir=On<<1,Dr=(ir<pt.a&&b(_t[rt[ir+1]],_t[rt[ir]])&&(ir+=1),rt[ir]);if(ir>pt.a||b(_t[zn],_t[Dr])){vn[rt[On]=zn]=On;break}vn[rt[On]=Dr]=On,On=ir}}function ur(pt,bt){for(var rt=pt.d,_t=pt.e,vn=pt.c,On=bt,zn=rt[On];;){var ir=On>>1,Dr=rt[ir];if(0==ir||b(_t[Dr],_t[zn])){vn[rt[On]=zn]=On;break}vn[rt[On]=Dr]=On,On=ir}}function bn(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Qn(pt){return pt.e.c.b}function Pn(pt){return pt.e.a.b}(M=Ut.prototype).x=function(){Xt(this,0)},M.B=function(pt,bt){switch(pt){case 100142:return;case 100140:switch(bt){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=bt)}break;case 100141:return void(this.m=!!bt);default:return void ft(this,100900)}ft(this,100901)},M.y=function(pt){switch(pt){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ft(this,100900)}return!1},M.A=function(pt,bt,rt){this.j[0]=pt,this.j[1]=bt,this.j[2]=rt},M.z=function(pt,bt){var rt=bt||null;switch(pt){case 100100:case 100106:this.h=rt;break;case 100104:case 100110:this.l=rt;break;case 100101:case 100107:this.k=rt;break;case 100102:case 100108:this.i=rt;break;case 100103:case 100109:this.p=rt;break;case 100105:case 100111:this.o=rt;break;case 100112:this.r=rt;break;default:ft(this,100900)}},M.C=function(pt,bt){var rt=!1,_t=[0,0,0];Xt(this,2);for(var vn=0;vn<3;++vn){var On=pt[vn];On<-1e150&&(On=-1e150,rt=!0),1e150<On&&(On=1e150,rt=!0),_t[vn]=On}rt&&ft(this,100155),null===(rt=this.q)?m(rt=p(this.b),rt.b):(x(rt),rt=rt.e),rt.a.d=bt,rt.a.g[0]=_t[0],rt.a.g[1]=_t[1],rt.a.g[2]=_t[2],rt.f=1,rt.b.f=-1,this.q=rt},M.u=function(pt){Xt(this,0),this.d=1,this.b=new Bt,this.c=pt},M.t=function(){Xt(this,1),this.d=2,this.q=null},M.v=function(){Xt(this,2),this.d=1},M.w=function(){Xt(this,1),this.d=0;var pt,bt,On=!1,zn=[rt=this.j[0],_t=this.j[1],vn=this.j[2]];if(0===rt&&0===_t&&0===vn){for(var _t=[-2e150,-2e150,-2e150],ir=[2e150,2e150,2e150],vn=[],Dr=[],rt=(On=this.b.c).e;rt!==On;rt=rt.e)for(var Pr=0;Pr<3;++Pr){var Br=rt.g[Pr];Br<ir[Pr]&&(ir[Pr]=Br,Dr[Pr]=rt),Br>_t[Pr]&&(_t[Pr]=Br,vn[Pr]=rt)}if(_t[1]-ir[1]>_t[rt=0]-ir[0]&&(rt=1),ir[rt=_t[2]-ir[2]>_t[rt]-ir[rt]?2:rt]>=_t[rt])zn[0]=0,zn[1]=0,zn[2]=1;else{for(ir=Dr[rt],Dr=[_t=0,0,0],ir=[ir.g[0]-(vn=vn[rt]).g[0],ir.g[1]-vn.g[1],ir.g[2]-vn.g[2]],Pr=[0,0,0],rt=On.e;rt!==On;rt=rt.e)Pr[0]=rt.g[0]-vn.g[0],Pr[1]=rt.g[1]-vn.g[1],Pr[2]=rt.g[2]-vn.g[2],Dr[0]=ir[1]*Pr[2]-ir[2]*Pr[1],Dr[1]=ir[2]*Pr[0]-ir[0]*Pr[2],Dr[2]=ir[0]*Pr[1]-ir[1]*Pr[0],_t<(Br=Dr[0]*Dr[0]+Dr[1]*Dr[1]+Dr[2]*Dr[2])&&(_t=Br,zn[0]=Dr[0],zn[1]=Dr[1],zn[2]=Dr[2]);_t<=0&&(zn[0]=zn[1]=zn[2]=0,zn[$(ir)]=1)}On=!0}for(_t=((Dr=$(zn))+1)%3,vn=(Dr+2)%3,Dr=0<zn[Dr]?1:-1,zn=(rt=this.b.c).e;zn!==rt;zn=zn.e)zn.b=zn.g[_t],zn.a=Dr*zn.g[vn];if(On){for(zn=0,rt=(On=this.b.a).b;rt!==On;rt=rt.b)if(!((_t=rt.a).f<=0))for(;zn+=(_t.a.b-_t.b.a.b)*(_t.a.a+_t.b.a.a),(_t=_t.e)!==rt.a;);if(zn<0)for(On=(zn=this.b.c).e;On!==zn;On=On.e)On.a=-On.a}for(this.n=!1,rt=(zn=this.b.b).h;rt!==zn;rt=On)On=rt.h,_t=rt.e,C(rt.a,rt.b.a)&&rt.e.e!==rt&&(le(this,_t,rt),g(rt),_t=(rt=_t).e),_t.e===rt&&(_t!==rt&&(_t!==On&&_t!==On.b||(On=On.h),g(_t)),rt!==On&&rt!==On.b||(On=On.h),g(rt));for(this.e=zn=new Kt,rt=(On=this.b.c).e;rt!==On;rt=rt.e)rt.h=yn(zn,rt);var In=zn;In.d=[];for(var un=0;un<In.a;un++)In.d[un]=un;In.d.sort(function(mn){return function(sr,qt){return b(mn[sr],mn[qt])?1:-1}}(In.c)),In.e=!0;for(var Tn=In.b,on=Tn.a;1<=on;--on)Bn(Tn,on);for(Tn.h=!0,this.f=new Ct(this),gt(this,-4e150),gt(this,4e150);null!==(zn=Yn(this.e));){for(;;){e:if(0===(rt=this.e).a)On=Rn(rt.b);else if(On=rt.c[rt.d[rt.a-1]],0!==rt.b.a&&b(rt=Rn(rt.b),On)){On=rt;break e}if(null===On||!C(On,zn))break;On=Yn(this.e),le(this,zn.c,On.c)}!function mn(sr,qt){for(var fn,Fn=(sr.a=qt).c;null===Fn.i;)if((Fn=Fn.c)===qt.c){Fn=sr;var Cn=qt;(Er=new bn).a=Cn.c.b;for(var Lr=(Wn=Fn.f).a;null!==(Lr=Lr.a).b&&!Wn.c(Wn.b,Er,Lr.b););var Wn,yr,fr=Qn(Wn=Lr.b),Er=Wn.a;return Lr=fr.a,void(0===I(Er.b.a,Cn,Er.a)?C((Er=Wn.a).a,Cn)||C(Er.b.a,Cn)||(x(Er.b),Wn.c&&(g(Er.c),Wn.c=!1),m(Cn.c,Er),mn(Fn,Cn)):(yr=b(Lr.b.a,Er.b.a)?Wn:fr,fr=void 0,Wn.d||yr.c?(fr=yr===Wn?E(Cn.c.b,Er.e):E(Lr.b.c.b,Cn.c).b,yr.c?Se(yr,fr):((Wn=ge(Er=Fn,Wn,fr)).f=Pn(Wn).f+Wn.a.f,Wn.d=re(Er,Wn.f)),mn(Fn,Cn)):Ce(Fn,Wn,Cn.c,Cn.c,null,!0)))}Wn=(Er=Qn(Fn=oe(Fn.i))).a,(Er=fe(sr,Er,null)).c===Wn?(Er=(Wn=Er).c,Lr=Qn(Fn),fn=!1,(fr=Fn.a).b.a!==(yr=Lr.a).b.a&&je(sr,Fn),C(fr.a,sr.a)&&(m(Er.b.e,fr),Er=Qn(Fn=oe(Fn)).a,fe(sr,Qn(Fn),Lr),fn=!0),C(yr.a,sr.a)&&(m(Wn,yr.b.e),Wn=fe(sr,Lr,null),fn=!0),fn?Ce(sr,Fn,Wn.c,Er,Er,!0):(Cn=b(yr.a,fr.a)?yr.b.e:fr,Ce(sr,Fn,Cn=E(Wn.c.b,Cn),Cn.c,Cn.c,!1),Cn.b.i.c=!0,Je(sr,Fn))):Ce(sr,Fn,Er.c,Wn,Wn,!0)}(this,zn)}for(this.a=this.f.a.a.b.a.a,zn=0;null!==(On=this.f.a.a.b);)On.h||++zn,we(On);for(this.f=null,(zn=this.e).b=null,zn.d=null,this.e=zn.c=null,rt=(zn=this.b).a.b;rt!==zn.a;rt=On)On=rt.b,(rt=rt.a).e.e===rt&&(ne(rt.c,rt),g(rt));if(!this.n){if(zn=this.b,this.m)for(rt=zn.b.h;rt!==zn.b;rt=On)On=rt.h,rt.b.d.c!==rt.d.c?rt.f=rt.d.c?1:-1:g(rt);else for(rt=zn.a.b;rt!==zn.a;rt=On)if(On=rt.b,rt.c){for(rt=rt.a;b(rt.b.a,rt.a);rt=rt.c.b);for(;b(rt.a,rt.b.a);rt=rt.e);for(_t=rt.c.b,vn=void 0;rt.e!==_t;)if(b(rt.b.a,_t.a)){for(;_t.e!==rt&&(b((bt=_t.e).b.a,bt.a)||I(_t.a,_t.b.a,_t.e.b.a)<=0);)_t=(vn=E(_t.e,_t)).b;_t=_t.c.b}else{for(;_t.e!==rt&&(b((pt=rt.c.b).a,pt.b.a)||0<=I(rt.b.a,rt.a,rt.c.b.a));)rt=(vn=E(rt,rt.c.b)).b;rt=rt.e}for(;_t.e.e!==rt;)_t=(vn=E(_t.e,_t)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(On=(zn=this.b).a.b;On!==zn.a;On=On.b)if(On.c){for(this.h&&this.h(2,this.c),rt=On.a;this.k&&this.k(rt.a.d,this.c),(rt=rt.e)!==On.a;);this.i&&this.i(this.c)}}else{for(On=!!this.l,rt=!1,_t=-1,vn=(zn=this.b).a.d;vn!==zn.a;vn=vn.d)if(vn.c)for(rt||(this.h&&this.h(4,this.c),rt=!0),Dr=vn.a;On&&_t!==(ir=Dr.b.d.c?0:1)&&(_t=ir,this.l&&this.l(!!_t,this.c)),this.k&&this.k(Dr.a.d,this.c),(Dr=Dr.e)!==vn.a;);rt&&this.i&&this.i(this.c)}if(this.r){for(rt=(zn=this.b).a.b;rt!==zn.a;rt=On)if(On=rt.b,!rt.c){for(vn=(_t=rt.a).e,Dr=void 0;vn=(Dr=vn).e,(Dr.d=null)===Dr.b.d&&(Dr.c===Dr?V(Dr.a,null):(Dr.a.c=Dr.c,k(Dr,Dr.b.e)),(ir=Dr.b).c===ir?V(ir.a,null):(ir.a.c=ir.c,k(ir,ir.b.e)),G(Dr)),Dr!==_t;);_t=rt.d,((rt=rt.b).d=_t).b=rt}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Ut,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Ut.prototype.gluDeleteTess=Ut.prototype.x,Ut.prototype.gluTessProperty=Ut.prototype.B,Ut.prototype.gluGetTessProperty=Ut.prototype.y,Ut.prototype.gluTessNormal=Ut.prototype.A,Ut.prototype.gluTessCallback=Ut.prototype.z,Ut.prototype.gluTessVertex=Ut.prototype.C,Ut.prototype.gluTessBeginPolygon=Ut.prototype.u,Ut.prototype.gluTessBeginContour=Ut.prototype.t,Ut.prototype.gluTessEndContour=Ut.prototype.v,Ut.prototype.gluTessEndPolygon=Ut.prototype.w,void 0!==be&&(be.exports=this.libtess)},{}],256:[function(a,be,Z){"use strict";function C(b,w,I,D){for(var d=b[w++],f=1<<d,h=1+f,p=1+h,m=d+1,g=(1<<m)-1,x=0,E=0,S=0,k=b[w++],q=new Int32Array(4096),J=null;;){for(;x<16&&0!==k;)E|=b[w++]<<x,x+=8,1===k?k=b[w++]:--k;if(x<m)break;var G=E&g;if(E>>=m,x-=m,G==f)p=1+h,g=(1<<(m=d+1))-1,J=null;else{if(G==h)break;for(var V=G<p?G:J,K=0,$=V;f<$;)$=q[$]>>8,++K;var ne=$;if(D<S+K+(V!==G?1:0))return void console.log("Warning, gif stream longer than expected.");I[S++]=ne;var Y=S+=K;for(V!==G&&(I[S++]=ne),$=V;K--;)I[--Y]=255&($=q[$]),$>>=8;null!==J&&p<4096&&(q[p++]=J<<8|ne,g+1<=p&&m<12&&(++m,g=g<<1|1)),J=G}}S!==D&&console.log("Warning, gif stream shorter than expected.")}try{Z.GifWriter=function M(b,w,I,D){var d=0,f=void 0===(D=void 0===D?{}:D).loop?null:D.loop,h=void 0===D.palette?null:D.palette;if(w<=0||I<=0||65535<w||65535<I)throw new Error("Width/Height invalid.");function p(J){if((J=J.length)<2||256<J||J&J-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return J}b[d++]=71,b[d++]=73,b[d++]=70,b[d++]=56,b[d++]=57,b[d++]=97;var m=0,g=0;if(null!==h){for(var x=p(h);x>>=1;)++m;if(x=1<<m,--m,void 0!==D.background){if(x<=(g=D.background))throw new Error("Background index out of range.");if(0===g)throw new Error("Background index explicitly passed as 0.")}}if(b[d++]=255&w,b[d++]=w>>8&255,b[d++]=255&I,b[d++]=I>>8&255,b[d++]=(null!==h?128:0)|m,b[d++]=g,b[d++]=0,null!==h)for(var E=0,S=h.length;E<S;++E){var k=h[E];b[d++]=k>>16&255,b[d++]=k>>8&255,b[d++]=255&k}if(null!==f){if(f<0||65535<f)throw new Error("Loop count invalid.");b[d++]=33,b[d++]=255,b[d++]=11,b[d++]=78,b[d++]=69,b[d++]=84,b[d++]=83,b[d++]=67,b[d++]=65,b[d++]=80,b[d++]=69,b[d++]=50,b[d++]=46,b[d++]=48,b[d++]=3,b[d++]=1,b[d++]=255&f,b[d++]=f>>8&255,b[d++]=0}var q=!1;this.addFrame=function(J,G,V,K,$,ne){if(!0===q&&(--d,q=!1),ne=void 0===ne?{}:ne,J<0||G<0||65535<J||65535<G)throw new Error("x/y invalid.");if(V<=0||K<=0||65535<V||65535<K)throw new Error("Width/Height invalid.");if($.length<V*K)throw new Error("Not enough pixels for the frame size.");var Y=!0,we=ne.palette;if(null==we&&(Y=!1,we=h),null==we)throw new Error("Must supply either a local or global palette.");for(var oe=p(we),Se=0;oe>>=1;)++Se;oe=1<<Se;var ge=void 0===ne.delay?0:ne.delay,re=void 0===ne.disposal?0:ne.disposal;if(re<0||3<re)throw new Error("Disposal out of range.");var Q=!1,fe=0;if(null!=ne.transparent&&(Q=!0,(fe=ne.transparent)<0||oe<=fe))throw new Error("Transparent color index.");if(0===re&&!Q&&0===ge||(b[d++]=33,b[d++]=249,b[d++]=4,b[d++]=re<<2|(!0===Q?1:0),b[d++]=255&ge,b[d++]=ge>>8&255,b[d++]=fe,b[d++]=0),b[d++]=44,b[d++]=255&J,b[d++]=J>>8&255,b[d++]=255&G,b[d++]=G>>8&255,b[d++]=255&V,b[d++]=V>>8&255,b[d++]=255&K,b[d++]=K>>8&255,b[d++]=!0===Y?128|Se-1:0,!0===Y)for(var Ce=0,it=we.length;Ce<it;++Ce){var le=we[Ce];b[d++]=le>>16&255,b[d++]=le>>8&255,b[d++]=255&le}return d=function(z,ye,je,Je){z[ye++]=je;var gt=ye++,Ct=1<<je,$t=Ct-1,yt=1+Ct,Ut=1+yt,Xt=je+1,ft=0,jt=0;function Lt(Sr){for(;Sr<=ft;)z[ye++]=255&jt,jt>>=8,ft-=8,ye===gt+256&&(z[gt]=255,gt=ye++)}function Bt(Sr){jt|=Sr<<ft,ft+=Xt,Lt(8)}var Et=Je[0]&$t,Kt={};Bt(Ct);for(var yn=1,Yn=Je.length;yn<Yn;++yn){var An=Je[yn]&$t,Jn=Et<<8|An,Rn=Kt[Jn];if(void 0===Rn){for(jt|=Et<<ft,ft+=Xt;8<=ft;)z[ye++]=255&jt,jt>>=8,ft-=8,ye===gt+256&&(z[gt]=255,gt=ye++);4096===Ut?(Bt(Ct),Ut=1+yt,Xt=je+1,Kt={}):(1<<Xt<=Ut&&++Xt,Kt[Jn]=Ut++),Et=An}else Et=Rn}return Bt(Et),Bt(yt),Lt(1),gt+1===ye?z[gt]=0:(z[gt]=ye-gt-1,z[ye++]=0),ye}(b,d,Se<2?2:Se,$)},this.end=function(){return!1===q&&(b[d++]=59,q=!0),d},this.getOutputBuffer=function(){return b},this.setOutputBuffer=function(J){b=J},this.getOutputBufferPosition=function(){return d},this.setOutputBufferPosition=function(J){d=J}},Z.GifReader=function(b){var w=0;if(71!==b[w++]||73!==b[w++]||70!==b[w++]||56!==b[w++]||56!=(b[w++]+1&253)||97!==b[w++])throw new Error("Invalid GIF 87a/89a header.");var I=b[w++]|b[w++]<<8,D=b[w++]|b[w++]<<8,d=b[w++],h=(w++,w++,null),p=null,m=(d>>7&&(h=w,w+=3*(p=1<<1+(7&d))),!0),g=[],x=0,E=null,S=0,k=null;for(this.width=I,this.height=D;m&&w<b.length;)switch(b[w++]){case 33:switch(b[w++]){case 255:if(11!==b[w]||78==b[w+1]&&69==b[w+2]&&84==b[w+3]&&83==b[w+4]&&67==b[w+5]&&65==b[w+6]&&80==b[w+7]&&69==b[w+8]&&50==b[w+9]&&46==b[w+10]&&48==b[w+11]&&3==b[w+12]&&1==b[w+13]&&0==b[w+16])w+=14,k=b[w++]|b[w++]<<8,w++;else for(w+=12;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}break;case 249:if(4!==b[w++]||0!==b[w+4])throw new Error("Invalid graphics extension block.");var q=b[w++];x=b[w++]|b[w++]<<8,E=b[w++],!(1&q)&&(E=null),S=q>>2&7,w++;break;case 254:for(;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}break;default:throw new Error("Unknown graphic control label: 0x"+b[w-1].toString(16))}break;case 44:var J,G=b[w++]|b[w++]<<8,V=b[w++]|b[w++]<<8,K=b[w++]|b[w++]<<8,$=b[w++]|b[w++]<<8,ne=(ge=b[w++])>>6&1,we=h,Se=p,oe=!1,ge=(ge>>7&&(oe=!0,we=w,w+=3*(Se=1<<1+(7&ge))),w);for(w++;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}g.push({x:G,y:V,width:K,height:$,has_local_palette:oe,palette_offset:we,palette_size:Se,data_offset:ge,data_length:w-ge,transparent_index:E,interlaced:!!ne,delay:x,disposal:S});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+b[w-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return k},this.frameInfo=function(re){if(re<0||re>=g.length)throw new Error("Frame index out of range.");return g[re]},this.decodeAndBlitFrameBGRA=function(re,Q){for(var fe=(re=this.frameInfo(re)).width*re.height,Ce=new Uint8Array(fe),it=(C(b,re.data_offset,Ce,fe),re.palette_offset),le=re.transparent_index,z=(null===le&&(le=256),re.width),ye=I-z,je=z,Je=4*(re.y*I+re.x),gt=4*((re.y+re.height)*I+re.x),Ct=Je,$t=4*ye,yt=(!0===re.interlaced&&($t+=4*I*7),8),Ut=0,Xt=Ce.length;Ut<Xt;++Ut){var ft,jt,Lt=Ce[Ut];0===je&&(je=z,gt<=(Ct+=$t)&&($t=4*ye+4*I*(yt-1),Ct=Je+(z+ye)*(yt<<1),yt>>=1)),Lt===le?Ct+=4:(ft=b[it+3*Lt],jt=b[it+3*Lt+1],Q[Ct++]=Lt=b[it+3*Lt+2],Q[Ct++]=jt,Q[Ct++]=ft,Q[Ct++]=255),--je}},this.decodeAndBlitFrameRGBA=function(re,Q){for(var fe=(re=this.frameInfo(re)).width*re.height,Ce=new Uint8Array(fe),it=(C(b,re.data_offset,Ce,fe),re.palette_offset),le=re.transparent_index,z=(null===le&&(le=256),re.width),ye=I-z,je=z,Je=4*(re.y*I+re.x),gt=4*((re.y+re.height)*I+re.x),Ct=Je,$t=4*ye,yt=(!0===re.interlaced&&($t+=4*I*7),8),Ut=0,Xt=Ce.length;Ut<Xt;++Ut){var ft,jt,Lt=Ce[Ut];0===je&&(je=z,gt<=(Ct+=$t)&&($t=4*ye+4*I*(yt-1),Ct=Je+(z+ye)*(yt<<1),yt>>=1)),Lt===le?Ct+=4:(ft=b[it+3*Lt],jt=b[it+3*Lt+1],Lt=b[it+3*Lt+2],Q[Ct++]=ft,Q[Ct++]=jt,Q[Ct++]=Lt,Q[Ct++]=255),--je}}}}catch{}},{}],257:[function(a,be,Z){(function(M){var b;b=function(w){"use strict";function I(De){if(null==this)throw TypeError();var X,se=String(this),he=se.length;if(!((De=(De=De?Number(De):0)!=De?0:De)<0||he<=De))return 55296<=(X=se.charCodeAt(De))&&X<=56319&&De+1<he&&56320<=(he=se.charCodeAt(De+1))&&he<=57343?1024*(X-55296)+he-56320+65536:X}String.prototype.codePointAt||((D=function(){try{var R={},X=Object.defineProperty,se=X(R,R,R)&&X}catch{}return se}())?D(String.prototype,"codePointAt",{value:I,configurable:!0,writable:!0}):String.prototype.codePointAt=I);var D;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function p(R,X){this.source=R,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=X,this.destLen=0,this.ltree=new h,this.dtree=new h}var m=new h,g=new h,x=new Uint8Array(30),E=new Uint16Array(30),S=new Uint8Array(30),k=new Uint16Array(30),q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=new h,G=new Uint8Array(320);function V(R,X,se,he){for(var De,Ye=0;Ye<se;++Ye)R[Ye]=0;for(Ye=0;Ye<30-se;++Ye)R[Ye+se]=Ye/se|0;for(De=he,Ye=0;Ye<30;++Ye)X[Ye]=De,De+=1<<R[Ye]}var K=new Uint16Array(16);function $(R,X,se,he){for(var De,Ye=0;Ye<16;++Ye)R.table[Ye]=0;for(Ye=0;Ye<he;++Ye)R.table[X[se+Ye]]++;for(Ye=De=R.table[0]=0;Ye<16;++Ye)K[Ye]=De,De+=R.table[Ye];for(Ye=0;Ye<he;++Ye)X[se+Ye]&&(R.trans[K[X[se+Ye]]++]=Ye)}function ne(R,X,se){if(!X)return se;for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;var he=R.tag&65535>>>16-X;return R.tag>>>=X,R.bitcount-=X,he+se}function Y(R,X){for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;for(var se=0,he=0,De=0,Ye=R.tag;he=2*he+(1&Ye),Ye>>>=1,se+=X.table[++De],0<=(he-=X.table[De]););return R.tag=Ye,R.bitcount-=De,X.trans[se+he]}function we(R,X,se){for(;;){if(256===(he=Y(R,X)))return 0;if(he<256)R.dest[R.destLen++]=he;else for(var De,Ye=ne(R,x[he-=257],E[he]),he=Y(R,se),nt=De=R.destLen-ne(R,S[he],k[he]);nt<De+Ye;++nt)R.dest[R.destLen++]=R.dest[nt]}}for(var Se=m,oe=g,ge=0;ge<7;++ge)Se.table[ge]=0;for(Se.table[7]=24,Se.table[8]=152,Se.table[9]=112,ge=0;ge<24;++ge)Se.trans[ge]=256+ge;for(ge=0;ge<144;++ge)Se.trans[24+ge]=ge;for(ge=0;ge<8;++ge)Se.trans[168+ge]=280+ge;for(ge=0;ge<112;++ge)Se.trans[176+ge]=144+ge;for(ge=0;ge<5;++ge)oe.table[ge]=0;for(oe.table[5]=32,ge=0;ge<32;++ge)oe.trans[ge]=ge;V(x,E,4,3),V(S,k,2,1),x[28]=0,E[28]=258;var re=function(R,X){var se,he,De,Ye=new p(R,X);do{switch(void 0,(he=Ye).bitcount--||(he.tag=he.source[he.sourceIndex++],he.bitcount=7),De=1&he.tag,he.tag>>>=1,he=De,ne(Ye,2,0)){case 0:se=function(Gn){for(var ai,Jr;8<Gn.bitcount;)Gn.sourceIndex--,Gn.bitcount-=8;if((ai=256*Gn.source[Gn.sourceIndex+1]+Gn.source[Gn.sourceIndex])!==(65535&~(256*Gn.source[Gn.sourceIndex+3]+Gn.source[Gn.sourceIndex+2])))return-3;for(Gn.sourceIndex+=4,Jr=ai;Jr;--Jr)Gn.dest[Gn.destLen++]=Gn.source[Gn.sourceIndex++];return Gn.bitcount=0,0}(Ye);break;case 1:se=we(Ye,m,g);break;case 2:an=dt=Oe=Dn=nt=Fe=void 0;for(var nt,Mt=Ye,Qt=Ye.ltree,Jt=Ye.dtree,Mn=ne(Mt,5,257),Ne=ne(Mt,5,1),xe=ne(Mt,4,4),Fe=0;Fe<19;++Fe)G[Fe]=0;for(Fe=0;Fe<xe;++Fe){var Oe=ne(Mt,3,0);G[q[Fe]]=Oe}for($(J,G,0,19),nt=0;nt<Mn+Ne;){var dt=Y(Mt,J);switch(dt){case 16:for(var an=G[nt-1],Dn=ne(Mt,2,3);Dn;--Dn)G[nt++]=an;break;case 17:for(Dn=ne(Mt,3,3);Dn;--Dn)G[nt++]=0;break;case 18:for(Dn=ne(Mt,7,11);Dn;--Dn)G[nt++]=0;break;default:G[nt++]=dt}}$(Qt,G,0,Mn),$(Jt,G,Mn,Ne),se=we(Ye,Ye.ltree,Ye.dtree);break;default:se=-3}if(0!==se)throw new Error("Data error")}while(!he);return Ye.destLen<Ye.dest.length?"function"==typeof Ye.dest.slice?Ye.dest.slice(0,Ye.destLen):Ye.dest.subarray(0,Ye.destLen):Ye.dest};function Q(R,X,se,he,De){return Math.pow(1-De,3)*R+3*Math.pow(1-De,2)*De*X+3*(1-De)*Math.pow(De,2)*se+Math.pow(De,3)*he}function fe(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Ce(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function it(R){throw new Error(R)}function le(R,X){R||it(X)}fe.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},fe.prototype.addPoint=function(R,X){"number"==typeof R&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=R,this.x2=R),R<this.x1&&(this.x1=R),R>this.x2&&(this.x2=R)),"number"==typeof X&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=X,this.y2=X),X<this.y1&&(this.y1=X),X>this.y2&&(this.y2=X))},fe.prototype.addX=function(R){this.addPoint(R,null)},fe.prototype.addY=function(R){this.addPoint(null,R)},fe.prototype.addBezier=function(R,X,se,he,De,Ye,nt,Mt){var Qt=[R,X],Jt=[se,he],Mn=[De,Ye],Ne=[nt,Mt];this.addPoint(R,X),this.addPoint(nt,Mt);for(var xe=0;xe<=1;xe++){var Fe,Oe=6*Qt[xe]-12*Jt[xe]+6*Mn[xe],dt=-3*Qt[xe]+9*Jt[xe]-9*Mn[xe]+3*Ne[xe],an=3*Jt[xe]-3*Qt[xe];0==dt?0==Oe||0<(Fe=-an/Oe)&&Fe<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],Fe)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],Fe))):(Fe=Math.pow(Oe,2)-4*an*dt)<0||(0<(an=(-Oe+Math.sqrt(Fe))/(2*dt))&&an<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],an)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],an))),0<(an=(-Oe-Math.sqrt(Fe))/(2*dt))&&an<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],an)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],Ne[xe],an))))}},fe.prototype.addQuad=function(R,X,se,he,De,Ye){this.addBezier(R,X,se=R+2/3*(se-R),he=X+2/3*(he-X),se+1/3*(De-R),he+1/3*(Ye-X),De,Ye)},Ce.prototype.moveTo=function(R,X){this.commands.push({type:"M",x:R,y:X})},Ce.prototype.lineTo=function(R,X){this.commands.push({type:"L",x:R,y:X})},Ce.prototype.curveTo=Ce.prototype.bezierCurveTo=function(R,X,se,he,De,Ye){this.commands.push({type:"C",x1:R,y1:X,x2:se,y2:he,x:De,y:Ye})},Ce.prototype.quadTo=Ce.prototype.quadraticCurveTo=function(R,X,se,he){this.commands.push({type:"Q",x1:R,y1:X,x:se,y:he})},Ce.prototype.close=Ce.prototype.closePath=function(){this.commands.push({type:"Z"})},Ce.prototype.extend=function(R){var X;if(R.commands)R=R.commands;else if(R instanceof fe)return this.moveTo((X=R).x1,X.y1),this.lineTo(X.x2,X.y1),this.lineTo(X.x2,X.y2),this.lineTo(X.x1,X.y2),void this.close();Array.prototype.push.apply(this.commands,R)},Ce.prototype.getBoundingBox=function(){for(var R=new fe,X=0,se=0,he=0,De=0,Ye=0;Ye<this.commands.length;Ye++){var nt=this.commands[Ye];switch(nt.type){case"M":R.addPoint(nt.x,nt.y),X=he=nt.x,se=De=nt.y;break;case"L":R.addPoint(nt.x,nt.y),he=nt.x,De=nt.y;break;case"Q":R.addQuad(he,De,nt.x1,nt.y1,nt.x,nt.y),he=nt.x,De=nt.y;break;case"C":R.addBezier(he,De,nt.x1,nt.y1,nt.x2,nt.y2,nt.x,nt.y),he=nt.x,De=nt.y;break;case"Z":he=X,De=se;break;default:throw new Error("Unexpected path command "+nt.type)}}return R.isEmpty()&&R.addPoint(0,0),R},Ce.prototype.draw=function(R){R.beginPath();for(var X=0;X<this.commands.length;X+=1){var se=this.commands[X];"M"===se.type?R.moveTo(se.x,se.y):"L"===se.type?R.lineTo(se.x,se.y):"C"===se.type?R.bezierCurveTo(se.x1,se.y1,se.x2,se.y2,se.x,se.y):"Q"===se.type?R.quadraticCurveTo(se.x1,se.y1,se.x,se.y):"Z"===se.type&&R.closePath()}this.fill&&(R.fillStyle=this.fill,R.fill()),this.stroke&&(R.strokeStyle=this.stroke,R.lineWidth=this.strokeWidth,R.stroke())},Ce.prototype.toPathData=function(R){function X(){for(var Ye=arguments,nt="",Mt=0;Mt<arguments.length;Mt+=1){var Qt=Ye[Mt];0<=Qt&&0<Mt&&(nt+=" "),nt+=Math.round(Qt)===Qt?""+Math.round(Qt):Qt.toFixed(R)}return nt}R=void 0!==R?R:2;for(var se="",he=0;he<this.commands.length;he+=1){var De=this.commands[he];"M"===De.type?se+="M"+X(De.x,De.y):"L"===De.type?se+="L"+X(De.x,De.y):"C"===De.type?se+="C"+X(De.x1,De.y1,De.x2,De.y2,De.x,De.y):"Q"===De.type?se+="Q"+X(De.x1,De.y1,De.x,De.y):"Z"===De.type&&(se+="Z")}return se},Ce.prototype.toSVG=function(R){var X=(X='<path d="')+this.toPathData(R)+'"';return this.fill&&"black"!==this.fill&&(X+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(X+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),X+"/>"},Ce.prototype.toDOMElement=function(X){X=this.toPathData(X);var se=document.createElementNS("http://www.w3.org/2000/svg","path");return se.setAttribute("d",X),se};var z={fail:it,argument:le,assert:le},ye={},je={},Je={};function gt(R){return function(){return R}}je.BYTE=function(R){return z.argument(0<=R&&R<=255,"Byte value should be between 0 and 255."),[R]},Je.BYTE=gt(1),je.CHAR=function(R){return[R.charCodeAt(0)]},Je.CHAR=gt(1),je.CHARARRAY=function(R){for(var X=[],se=0;se<R.length;se+=1)X[se]=R.charCodeAt(se);return X},Je.CHARARRAY=function(R){return R.length},je.USHORT=function(R){return[R>>8&255,255&R]},Je.USHORT=gt(2),je.SHORT=function(R){return[(R=32768<=R?-(65536-R):R)>>8&255,255&R]},Je.SHORT=gt(2),je.UINT24=function(R){return[R>>16&255,R>>8&255,255&R]},Je.UINT24=gt(3),je.ULONG=function(R){return[R>>24&255,R>>16&255,R>>8&255,255&R]},Je.ULONG=gt(4),je.LONG=function(R){return[(R=2147483648<=R?-(4294967296-R):R)>>24&255,R>>16&255,R>>8&255,255&R]},Je.LONG=gt(4),je.FIXED=je.ULONG,Je.FIXED=Je.ULONG,je.FWORD=je.SHORT,Je.FWORD=Je.SHORT,je.UFWORD=je.USHORT,Je.UFWORD=Je.USHORT,je.LONGDATETIME=function(R){return[0,0,0,0,R>>24&255,R>>16&255,R>>8&255,255&R]},Je.LONGDATETIME=gt(8),je.TAG=function(R){return z.argument(4===R.length,"Tag should be exactly 4 ASCII characters."),[R.charCodeAt(0),R.charCodeAt(1),R.charCodeAt(2),R.charCodeAt(3)]},Je.TAG=gt(4),je.Card8=je.BYTE,Je.Card8=Je.BYTE,je.Card16=je.USHORT,Je.Card16=Je.USHORT,je.OffSize=je.BYTE,Je.OffSize=Je.BYTE,je.SID=je.USHORT,Je.SID=Je.USHORT,je.NUMBER=function(R){return-107<=R&&R<=107?[R+139]:108<=R&&R<=1131?[247+((R-=108)>>8),255&R]:-1131<=R&&R<=-108?[251+((R=-R-108)>>8),255&R]:-32768<=R&&R<=32767?je.NUMBER16(R):je.NUMBER32(R)},Je.NUMBER=function(R){return je.NUMBER(R).length},je.NUMBER16=function(R){return[28,R>>8&255,255&R]},Je.NUMBER16=gt(3),je.NUMBER32=function(R){return[29,R>>24&255,R>>16&255,R>>8&255,255&R]},Je.NUMBER32=gt(5),je.REAL=function(R){for(var X=R.toString(),se=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(X),he=(se&&(se=parseFloat("1e"+((se[2]?+se[2]:0)+se[1].length)),X=(Math.round(R*se)/se).toString()),""),De=0,Ye=X.length;De<Ye;De+=1){var nt=X[De];he+="e"===nt?"-"===X[++De]?"c":"b":"."===nt?"a":"-"===nt?"e":nt}for(var Mt=[30],Qt=0,Jt=(he+=1&he.length?"f":"ff").length;Qt<Jt;Qt+=2)Mt.push(parseInt(he.substr(Qt,2),16));return Mt},Je.REAL=function(R){return je.REAL(R).length},je.NAME=je.CHARARRAY,Je.NAME=Je.CHARARRAY,je.STRING=je.CHARARRAY,Je.STRING=Je.CHARARRAY,ye.UTF8=function(R,X,se){for(var he=[],De=se,Ye=0;Ye<De;Ye++,X+=1)he[Ye]=R.getUint8(X);return String.fromCharCode.apply(null,he)},ye.UTF16=function(R,X,se){for(var he=[],De=se/2,Ye=0;Ye<De;Ye++,X+=2)he[Ye]=R.getUint16(X);return String.fromCharCode.apply(null,he)},je.UTF16=function(R){for(var X=[],se=0;se<R.length;se+=1){var he=R.charCodeAt(se);X[X.length]=he>>8&255,X[X.length]=255&he}return X},Je.UTF16=function(R){return 2*R.length};var Ct,$t={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},yt=(ye.MACSTRING=function(R,X,se,he){var De=$t[he];if(void 0!==De){for(var Ye="",nt=0;nt<se;nt++){var Mt=R.getUint8(X+nt);Ye+=Mt<=127?String.fromCharCode(Mt):De[127&Mt]}return Ye}},"function"==typeof WeakMap&&new WeakMap);function Ut(R){return-128<=R&&R<=127}je.MACSTRING=function(R,X){var se=function(nt){if(!Ct)for(var Mt in Ct={},$t)Ct[Mt]=new String(Mt);var Qt=Ct[nt];if(void 0!==Qt){if(yt){var Jt=yt.get(Qt);if(void 0!==Jt)return Jt}var Mn=$t[nt];if(void 0!==Mn){for(var Ne={},xe=0;xe<Mn.length;xe++)Ne[Mn.charCodeAt(xe)]=xe+128;return yt&&yt.set(Qt,Ne),Ne}}}(X);if(void 0!==se){for(var he=[],De=0;De<R.length;De++){var Ye=R.charCodeAt(De);if(128<=Ye&&void 0===(Ye=se[Ye]))return;he[De]=Ye}return he}},Je.MACSTRING=function(R,X){return void 0!==(R=je.MACSTRING(R,X))?R.length:0},je.VARDELTAS=function(R){for(var he=0,X=[];he<R.length;){var se=R[he];he=(0===se?function(De,Ye,nt){for(var Mt=0,Qt=De.length;Ye<Qt&&Mt<64&&0===De[Ye];)++Ye,++Mt;return nt.push(128|Mt-1),Ye}:-128<=se&&se<=127?function(De,Ye,nt){for(var Mt=0,Qt=De.length,Jt=Ye;Jt<Qt&&Mt<64;){var Mn=De[Jt];if(!Ut(Mn)||0===Mn&&Jt+1<Qt&&0===De[Jt+1])break;++Jt,++Mt}nt.push(Mt-1);for(var Ne=Ye;Ne<Jt;++Ne)nt.push(De[Ne]+256&255);return Jt}:function(De,Ye,nt){for(var Mt=0,Qt=De.length,Jt=Ye;Jt<Qt&&Mt<64;){var Mn=De[Jt];if(0===Mn||Ut(Mn)&&Jt+1<Qt&&Ut(De[Jt+1]))break;++Jt,++Mt}nt.push(64|Mt-1);for(var Ne=Ye;Ne<Jt;++Ne){var xe=De[Ne];nt.push(xe+65536>>8&255,xe+256&255)}return Jt})(R,he,X)}return X},je.INDEX=function(R){for(var X=1,se=[X],he=[],De=0;De<R.length;De+=1){var Ye=je.OBJECT(R[De]);Array.prototype.push.apply(he,Ye),se.push(X+=Ye.length)}if(0===he.length)return[0,0];for(var nt=[],Mt=1+Math.floor(Math.log(X)/Math.log(2))/8|0,Qt=[void 0,je.BYTE,je.USHORT,je.UINT24,je.ULONG][Mt],Jt=0;Jt<se.length;Jt+=1){var Mn=Qt(se[Jt]);Array.prototype.push.apply(nt,Mn)}return Array.prototype.concat(je.Card16(R.length),je.OffSize(Mt),nt,he)},Je.INDEX=function(R){return je.INDEX(R).length},je.DICT=function(R){for(var X=[],se=Object.keys(R),he=se.length,De=0;De<he;De+=1){var Ye=parseInt(se[De],0),nt=R[Ye];X=(X=X.concat(je.OPERAND(nt.value,nt.type))).concat(je.OPERATOR(Ye))}return X},Je.DICT=function(R){return je.DICT(R).length},je.OPERATOR=function(R){return R<1200?[R]:[12,R-1200]},je.OPERAND=function(R,X){var se=[];if(Array.isArray(X))for(var he=0;he<X.length;he+=1)z.argument(R.length===X.length,"Not enough arguments given for type"+X),se=se.concat(je.OPERAND(R[he],X[he]));else if("SID"===X)se=se.concat(je.NUMBER(R));else if("offset"===X)se=se.concat(je.NUMBER32(R));else if("number"===X)se=se.concat(je.NUMBER(R));else{if("real"!==X)throw new Error("Unknown operand type "+X);se=se.concat(je.REAL(R))}return se},je.OP=je.BYTE,Je.OP=Je.BYTE;var Xt="function"==typeof WeakMap&&new WeakMap;function ft(R,X,se){for(var he=0;he<X.length;he+=1){var De=X[he];this[De.name]=De.value}if(this.tableName=R,this.fields=X,se)for(var Ye=Object.keys(se),nt=0;nt<Ye.length;nt+=1){var Mt=Ye[nt];void 0!==this[Mt]&&(this[Mt]=se[Mt])}}function jt(R,X,se){void 0===se&&(se=X.length);var he=new Array(X.length+1);he[0]={name:R+"Count",type:"USHORT",value:se};for(var De=0;De<X.length;De++)he[De+1]={name:R+De,type:"USHORT",value:X[De]};return he}function Lt(R,X,se){var he=X.length,De=new Array(he+1);De[0]={name:R+"Count",type:"USHORT",value:he};for(var Ye=0;Ye<he;Ye++)De[Ye+1]={name:R+Ye,type:"TABLE",value:se(X[Ye],Ye)};return De}function Bt(R,X,se){var he=X.length,De=[];De[0]={name:R+"Count",type:"USHORT",value:he};for(var Ye=0;Ye<he;Ye++)De=De.concat(se(X[Ye],Ye));return De}function Et(R){1===R.format?ft.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(jt("glyph",R.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function Kt(R){ft.call(this,"scriptListTable",Bt("scriptRecord",R,function(X,se){var he=X.script,De=he.defaultLangSys;return z.assert(!!De,"Unable to write GSUB: script "+X.tag+" has no default language system."),[{name:"scriptTag"+se,type:"TAG",value:X.tag},{name:"script"+se,type:"TABLE",value:new ft("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ft("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:De.reqFeatureIndex}].concat(jt("featureIndex",De.featureIndexes)))}].concat(Bt("langSys",he.langSysRecords,function(Ye,nt){var Mt=Ye.langSys;return[{name:"langSysTag"+nt,type:"TAG",value:Ye.tag},{name:"langSys"+nt,type:"TABLE",value:new ft("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Mt.reqFeatureIndex}].concat(jt("featureIndex",Mt.featureIndexes)))}]})))}]}))}function yn(R){ft.call(this,"featureListTable",Bt("featureRecord",R,function(X,se){var he=X.feature;return[{name:"featureTag"+se,type:"TAG",value:X.tag},{name:"feature"+se,type:"TABLE",value:new ft("featureTable",[{name:"featureParams",type:"USHORT",value:he.featureParams}].concat(jt("lookupListIndex",he.lookupListIndexes)))}]}))}function Yn(R,X){ft.call(this,"lookupListTable",Lt("lookup",R,function(se){var he=X[se.lookupType];return z.assert(!!he,"Unable to write GSUB lookup type "+se.lookupType+" tables."),new ft("lookupTable",[{name:"lookupType",type:"USHORT",value:se.lookupType},{name:"lookupFlag",type:"USHORT",value:se.lookupFlag}].concat(Lt("subtable",se.subtables,he)))}))}je.CHARSTRING=function(R){if(Xt){var X=Xt.get(R);if(void 0!==X)return X}for(var Ye=[],se=R.length,he=0;he<se;he+=1){var De=R[he];Ye=Ye.concat(je[De.type](De.value))}return Xt&&Xt.set(R,Ye),Ye},Je.CHARSTRING=function(R){return je.CHARSTRING(R).length},je.OBJECT=function(R){var X=je[R.type];return z.argument(void 0!==X,"No encoding function for type "+R.type),X(R.value)},Je.OBJECT=function(R){var X=Je[R.type];return z.argument(void 0!==X,"No sizeOf function for type "+R.type),X(R.value)},je.TABLE=function(R){for(var X=[],se=R.fields.length,he=[],De=[],Ye=0;Ye<se;Ye+=1){var nt=R.fields[Ye],Mt=(z.argument(void 0!==(Qt=je[nt.type]),"No encoding function for field type "+nt.type+" ("+nt.name+")"),R[nt.name]),Qt=Qt(Mt=void 0===Mt?nt.value:Mt);"TABLE"===nt.type?(De.push(X.length),X=X.concat([0,0]),he.push(Qt)):X=X.concat(Qt)}for(var Jt=0;Jt<he.length;Jt+=1){var Mn=De[Jt],Ne=X.length;z.argument(Ne<65536,"Table "+R.tableName+" too big."),X[Mn]=Ne>>8,X[Mn+1]=255&Ne,X=X.concat(he[Jt])}return X},Je.TABLE=function(R){for(var X=0,se=R.fields.length,he=0;he<se;he+=1){var De=R.fields[he],Ye=Je[De.type],nt=(z.argument(void 0!==Ye,"No sizeOf function for field type "+De.type+" ("+De.name+")"),R[De.name]);X+=Ye(nt=void 0===nt?De.value:nt),"TABLE"===De.type&&(X+=2)}return X},je.RECORD=je.TABLE,Je.RECORD=Je.TABLE,je.LITERAL=function(R){return R},Je.LITERAL=function(R){return R.length},ft.prototype.encode=function(){return je.TABLE(this)},ft.prototype.sizeOf=function(){return Je.TABLE(this)};var An={Table:ft,Record:ft,Coverage:(Et.prototype=Object.create(ft.prototype)).constructor=Et,ScriptList:(Kt.prototype=Object.create(ft.prototype)).constructor=Kt,FeatureList:(yn.prototype=Object.create(ft.prototype)).constructor=yn,LookupList:(Yn.prototype=Object.create(ft.prototype)).constructor=Yn,ushortList:jt,tableList:Lt,recordList:Bt};function Jn(R,X){return R.getUint8(X)}function Rn(R,X){return R.getUint16(X,!1)}function Sr(R,X){return R.getUint32(X,!1)}function Bn(R,X){return R.getInt16(X,!1)+R.getUint16(X+2,!1)/65535}var ur={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function bn(R,X){this.data=R,this.offset=X,this.relativeOffset=0}bn.prototype.parseByte=function(){var R=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},bn.prototype.parseChar=function(){var R=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},bn.prototype.parseCard8=bn.prototype.parseByte,bn.prototype.parseCard16=bn.prototype.parseUShort=function(){var R=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},bn.prototype.parseSID=bn.prototype.parseUShort,bn.prototype.parseOffset16=bn.prototype.parseUShort,bn.prototype.parseShort=function(){var R=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},bn.prototype.parseF2Dot14=function(){var R=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,R},bn.prototype.parseOffset32=bn.prototype.parseULong=function(){var R=Sr(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},bn.prototype.parseFixed=function(){var R=Bn(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},bn.prototype.parseString=function(R){var X=this.data,se=this.offset+this.relativeOffset,he="";this.relativeOffset+=R;for(var De=0;De<R;De++)he+=String.fromCharCode(X.getUint8(se+De));return he},bn.prototype.parseTag=function(){return this.parseString(4)},bn.prototype.parseLongDateTime=function(){var R=Sr(this.data,this.offset+this.relativeOffset+4);return R-=2082844800,this.relativeOffset+=8,R},bn.prototype.parseVersion=function(R){var X=Rn(this.data,this.offset+this.relativeOffset),se=Rn(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,X+se/(R=void 0===R?4096:R)/10},bn.prototype.skip=function(R,X){this.relativeOffset+=ur[R]*(X=void 0===X?1:X)},bn.prototype.parseULongList=function(R){void 0===R&&(R=this.parseULong());for(var X=new Array(R),se=this.data,he=this.offset+this.relativeOffset,De=0;De<R;De++)X[De]=se.getUint32(he),he+=4;return this.relativeOffset+=4*R,X},bn.prototype.parseOffset16List=bn.prototype.parseUShortList=function(R){void 0===R&&(R=this.parseUShort());for(var X=new Array(R),se=this.data,he=this.offset+this.relativeOffset,De=0;De<R;De++)X[De]=se.getUint16(he),he+=2;return this.relativeOffset+=2*R,X},bn.prototype.parseShortList=function(R){for(var X=new Array(R),se=this.data,he=this.offset+this.relativeOffset,De=0;De<R;De++)X[De]=se.getInt16(he),he+=2;return this.relativeOffset+=2*R,X},bn.prototype.parseByteList=function(R){for(var X=new Array(R),se=this.data,he=this.offset+this.relativeOffset,De=0;De<R;De++)X[De]=se.getUint8(he++);return this.relativeOffset+=R,X},bn.prototype.parseList=function(R,X){X||(X=R,R=this.parseUShort());for(var se=new Array(R),he=0;he<R;he++)se[he]=X.call(this);return se},bn.prototype.parseList32=function(R,X){X||(X=R,R=this.parseULong());for(var se=new Array(R),he=0;he<R;he++)se[he]=X.call(this);return se},bn.prototype.parseRecordList=function(R,X){X||(X=R,R=this.parseUShort());for(var se=new Array(R),he=Object.keys(X),De=0;De<R;De++){for(var Ye={},nt=0;nt<he.length;nt++){var Mt=he[nt];Ye[Mt]=X[Mt].call(this)}se[De]=Ye}return se},bn.prototype.parseRecordList32=function(R,X){X||(X=R,R=this.parseULong());for(var se=new Array(R),he=Object.keys(X),De=0;De<R;De++){for(var Ye={},nt=0;nt<he.length;nt++){var Mt=he[nt];Ye[Mt]=X[Mt].call(this)}se[De]=Ye}return se},bn.prototype.parseStruct=function(R){if("function"==typeof R)return R.call(this);for(var X=Object.keys(R),se={},he=0;he<X.length;he++){var De=X[he];se[De]=R[De].call(this)}return se},bn.prototype.parseValueRecord=function(R){var X;if(0!==(R=void 0===R?this.parseUShort():R))return X={},1&R&&(X.xPlacement=this.parseShort()),2&R&&(X.yPlacement=this.parseShort()),4&R&&(X.xAdvance=this.parseShort()),8&R&&(X.yAdvance=this.parseShort()),16&R&&(X.xPlaDevice=void 0,this.parseShort()),32&R&&(X.yPlaDevice=void 0,this.parseShort()),64&R&&(X.xAdvDevice=void 0,this.parseShort()),128&R&&(X.yAdvDevice=void 0,this.parseShort()),X},bn.prototype.parseValueRecordList=function(){for(var R=this.parseUShort(),X=this.parseUShort(),se=new Array(X),he=0;he<X;he++)se[he]=this.parseValueRecord(R);return se},bn.prototype.parsePointer=function(R){var X=this.parseOffset16();if(0<X)return new bn(this.data,this.offset+X).parseStruct(R)},bn.prototype.parsePointer32=function(R){var X=this.parseOffset32();if(0<X)return new bn(this.data,this.offset+X).parseStruct(R)},bn.prototype.parseListOfLists=function(R){for(var X=this.parseOffset16List(),se=X.length,he=this.relativeOffset,De=new Array(se),Ye=0;Ye<se;Ye++){var nt=X[Ye];if(0===nt)De[Ye]=void 0;else if(this.relativeOffset=nt,R){for(var Mt=this.parseOffset16List(),Qt=new Array(Mt.length),Jt=0;Jt<Mt.length;Jt++)this.relativeOffset=nt+Mt[Jt],Qt[Jt]=R.call(this);De[Ye]=Qt}else De[Ye]=this.parseUShortList()}return this.relativeOffset=he,De},bn.prototype.parseCoverage=function(){var R=this.offset+this.relativeOffset,X=this.parseUShort(),se=this.parseUShort();if(1===X)return{format:1,glyphs:this.parseUShortList(se)};if(2!==X)throw new Error("0x"+R.toString(16)+": Coverage format must be 1 or 2.");for(var he=new Array(se),De=0;De<se;De++)he[De]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:he}},bn.prototype.parseClassDef=function(){var R=this.offset+this.relativeOffset,X=this.parseUShort();if(1===X)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===X)return{format:2,ranges:this.parseRecordList({start:bn.uShort,end:bn.uShort,classId:bn.uShort})};throw new Error("0x"+R.toString(16)+": ClassDef format must be 1 or 2.")},bn.list=function(R,X){return function(){return this.parseList(R,X)}},bn.list32=function(R,X){return function(){return this.parseList32(R,X)}},bn.recordList=function(R,X){return function(){return this.parseRecordList(R,X)}},bn.recordList32=function(R,X){return function(){return this.parseRecordList32(R,X)}},bn.pointer=function(R){return function(){return this.parsePointer(R)}},bn.pointer32=function(R){return function(){return this.parsePointer32(R)}},bn.tag=bn.prototype.parseTag,bn.byte=bn.prototype.parseByte,bn.uShort=bn.offset16=bn.prototype.parseUShort,bn.uShortList=bn.prototype.parseUShortList,bn.uLong=bn.offset32=bn.prototype.parseULong,bn.uLongList=bn.prototype.parseULongList,bn.struct=bn.prototype.parseStruct,bn.coverage=bn.prototype.parseCoverage,bn.classDef=bn.prototype.parseClassDef;var Qn={reserved:bn.uShort,reqFeatureIndex:bn.uShort,featureIndexes:bn.uShortList},Pn=(bn.prototype.parseScriptList=function(){return this.parsePointer(bn.recordList({tag:bn.tag,script:bn.pointer({defaultLangSys:bn.pointer(Qn),langSysRecords:bn.recordList({tag:bn.tag,langSys:bn.pointer(Qn)})})}))||[]},bn.prototype.parseFeatureList=function(){return this.parsePointer(bn.recordList({tag:bn.tag,feature:bn.pointer({featureParams:bn.offset16,lookupListIndexes:bn.uShortList})}))||[]},bn.prototype.parseLookupList=function(R){return this.parsePointer(bn.list(bn.pointer(function(){var X=this.parseUShort(),se=(z.argument(1<=X&&X<=9,"GPOS/GSUB lookup type "+X+" unknown."),this.parseUShort()),he=16&se;return{lookupType:X,lookupFlag:se,subtables:this.parseList(bn.pointer(R[X])),markFilteringSet:he?this.parseUShort():void 0}})))||[]},bn.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var R=this.parseUShort(),X=this.parseUShort();return z.argument(1===R&&X<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:bn.offset32,featureTableSubstitutionOffset:bn.offset32})})||[]},{getByte:Jn,getCard8:Jn,getUShort:Rn,getCard16:Rn,getShort:function(R,X){return R.getInt16(X,!1)},getULong:Sr,getFixed:Bn,getTag:function(R,X){for(var se="",he=X;he<X+4;he+=1)se+=String.fromCharCode(R.getInt8(he));return se},getOffset:function(R,X,se){for(var he=0,De=0;De<se;De+=1)he=(he<<=8)+R.getUint8(X+De);return he},getBytes:function(R,X,se){for(var he=[],De=X;De<se;De+=1)he.push(R.getUint8(De));return he},bytesToString:function(R){for(var X="",se=0;se<R.length;se+=1)X+=String.fromCharCode(R[se]);return X},Parser:bn}),pt_parse=function(R,X){for(var se={},he=(se.version=Pn.getUShort(R,X),z.argument(0===se.version,"cmap table version should be 0."),se.numTables=Pn.getUShort(R,X+2),-1),De=se.numTables-1;0<=De;--De){var Ye=Pn.getUShort(R,X+4+8*De),nt=Pn.getUShort(R,X+4+8*De+2);if(3===Ye&&(0===nt||1===nt||10===nt)||0===Ye&&(0===nt||1===nt||2===nt||3===nt||4===nt)){he=Pn.getULong(R,X+4+8*De+4);break}}if(-1===he)throw new Error("No valid cmap sub-tables found.");var Mt=new Pn.Parser(R,X+he);if(se.format=Mt.parseUShort(),12===se.format){var Qt,Jt=se,Mn=Mt;Mn.parseUShort(),Jt.length=Mn.parseULong(),Jt.language=Mn.parseULong(),Jt.groupCount=Qt=Mn.parseULong(),Jt.glyphIndexMap={};for(var Ne=0;Ne<Qt;Ne+=1)for(var xe=Mn.parseULong(),Fe=Mn.parseULong(),Oe=Mn.parseULong(),dt=xe;dt<=Fe;dt+=1)Jt.glyphIndexMap[dt]=Oe,Oe++}else{if(4!==se.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+se.format+").");var an=se,Dn=R,Gn=X,ai=he;an.length=Mt.parseUShort(),an.language=Mt.parseUShort(),an.segCount=Jr=Mt.parseUShort()>>1,Mt.skip("uShort",3),an.glyphIndexMap={};for(var Jr,xi=new Pn.Parser(Dn,Gn+ai+14),vi=new Pn.Parser(Dn,Gn+ai+16+2*Jr),Ji=new Pn.Parser(Dn,Gn+ai+16+4*Jr),cs=new Pn.Parser(Dn,Gn+ai+16+6*Jr),yo=Gn+ai+16+8*Jr,vo=0;vo<Jr-1;vo+=1)for(var Po=void 0,Ao=xi.parseUShort(),ra=vi.parseUShort(),Bs=Ji.parseShort(),Qs=cs.parseUShort(),ui=ra;ui<=Ao;ui+=1)0!==Qs?(yo=(yo=cs.offset+cs.relativeOffset-2)+Qs+2*(ui-ra),0!==(Po=Pn.getUShort(Dn,yo))&&(Po=Po+Bs&65535)):Po=ui+Bs&65535,an.glyphIndexMap[ui]=Po}return se},pt_make=function(R){for(var X=!0,se=R.length-1;0<se;--se)if(65535<R.get(se).unicode){console.log("Adding CMAP format 12 (needed!)"),X=!1;break}var he,De,Ye=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:X?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:X?12:20}],nt=(Ye=(Ye=X?Ye:Ye.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new An.Table("cmap",Ye));for(nt.segments=[],se=0;se<R.length;se+=1){for(var Mt=R.get(se),Qt=0;Qt<Mt.unicodes.length;Qt+=1)nt.segments.push({end:he=Mt.unicodes[Qt],start:he,delta:-(he-(De=se)),offset:0,glyphIndex:De});nt.segments=nt.segments.sort(function(Gn,ai){return Gn.start-ai.start})}nt.segments.push({end:65535,start:65535,delta:1,offset:0});var Jt=nt.segments.length,Mn=0,Ne=[],xe=[],Fe=[],Oe=[],dt=[],an=[];for(se=0;se<Jt;se+=1){var Dn=nt.segments[se];Dn.end<=65535&&Dn.start<=65535?(Ne=Ne.concat({name:"end_"+se,type:"USHORT",value:Dn.end}),xe=xe.concat({name:"start_"+se,type:"USHORT",value:Dn.start}),Fe=Fe.concat({name:"idDelta_"+se,type:"SHORT",value:Dn.delta}),Oe=Oe.concat({name:"idRangeOffset_"+se,type:"USHORT",value:Dn.offset}),void 0!==Dn.glyphId&&(dt=dt.concat({name:"glyph_"+se,type:"USHORT",value:Dn.glyphId}))):Mn+=1,X||void 0===Dn.glyphIndex||(an=(an=(an=an.concat({name:"cmap12Start_"+se,type:"ULONG",value:Dn.start})).concat({name:"cmap12End_"+se,type:"ULONG",value:Dn.end})).concat({name:"cmap12Glyph_"+se,type:"ULONG",value:Dn.glyphIndex}))}return nt.segCountX2=2*(Jt-Mn),nt.searchRange=2*Math.pow(2,Math.floor(Math.log(Jt-Mn)/Math.log(2))),nt.entrySelector=Math.log(nt.searchRange/2)/Math.log(2),nt.rangeShift=nt.segCountX2-nt.searchRange,nt.fields=nt.fields.concat(Ne),nt.fields.push({name:"reservedPad",type:"USHORT",value:0}),nt.fields=nt.fields.concat(xe),nt.fields=nt.fields.concat(Fe),nt.fields=nt.fields.concat(Oe),nt.fields=nt.fields.concat(dt),nt.cmap4Length=14+2*Ne.length+2+2*xe.length+2*Fe.length+2*Oe.length+2*dt.length,X||(Ye=16+4*an.length,nt.cmap12Offset=20+nt.cmap4Length,nt.fields=nt.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Ye},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:an.length/3}]),nt.fields=nt.fields.concat(an)),nt},bt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],rt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],_t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],vn=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function On(R){this.font=R}function zn(R){this.cmap=R}function ir(R,X){this.encoding=R,this.charset=X}function Dr(R){switch(R.version){case 1:this.names=vn.slice();break;case 2:this.names=new Array(R.numberOfGlyphs);for(var X=0;X<R.numberOfGlyphs;X++)this.names[X]=R.glyphNameIndex[X]<vn.length?vn[R.glyphNameIndex[X]]:R.names[R.glyphNameIndex[X]-vn.length];break;case 2.5:this.names=new Array(R.numberOfGlyphs);for(var se=0;se<R.numberOfGlyphs;se++)this.names[se]=vn[se+R.glyphNameIndex[se]];break;default:this.names=[]}}On.prototype.charToGlyphIndex=function(R){var X=R.codePointAt(0),se=this.font.glyphs;if(se)for(var he=0;he<se.length;he+=1)for(var De=se.get(he),Ye=0;Ye<De.unicodes.length;Ye+=1)if(De.unicodes[Ye]===X)return he;return null},zn.prototype.charToGlyphIndex=function(R){return this.cmap.glyphIndexMap[R.codePointAt(0)]||0},ir.prototype.charToGlyphIndex=function(R){return R=R.codePointAt(0),this.charset.indexOf(R=this.encoding[R])},Dr.prototype.nameToGlyphIndex=function(R){return this.names.indexOf(R)},Dr.prototype.glyphIndexToName=function(R){return this.names[R]};var Pr_line=function(R,X,se,he,De){R.beginPath(),R.moveTo(X,se),R.lineTo(he,De),R.stroke()};function Br(R){this.bindConstructorValues(R)}function In(R,X,se){Object.defineProperty(R,X,{get:function(){return R[se]},set:function(he){R[se]=he},enumerable:!0,configurable:!0})}function un(R,X){if(this.font=R,this.glyphs={},Array.isArray(X))for(var se=0;se<X.length;se++)this.glyphs[se]=X[se];this.length=X&&X.length||0}Br.prototype.bindConstructorValues=function(R){var X;this.index=R.index||0,this.name=R.name||null,this.unicode=R.unicode||void 0,this.unicodes=R.unicodes||void 0!==R.unicode?[R.unicode]:[],R.xMin&&(this.xMin=R.xMin),R.yMin&&(this.yMin=R.yMin),R.xMax&&(this.xMax=R.xMax),R.yMax&&(this.yMax=R.yMax),R.advanceWidth&&(this.advanceWidth=R.advanceWidth),Object.defineProperty(this,"path",(X=(R=R.path)||new Ce,{configurable:!0,get:function(){return X="function"==typeof X?X():X},set:function(se){X=se}}))},Br.prototype.addUnicode=function(R){0===this.unicodes.length&&(this.unicode=R),this.unicodes.push(R)},Br.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Br.prototype.getPath=function(R,X,se,he,De){R=void 0!==R?R:0,X=void 0!==X?X:0,se=void 0!==se?se:72;for(var Ye,nt,Mt=(he=he||{}).xScale,Qt=he.yScale,Jt=((Ye=he.hinting&&De&&De.hinting?this.path&&De.hinting.exec(this,se):Ye)?(nt=De.hinting.getCommands(Ye),R=Math.round(R),X=Math.round(X),Mt=Qt=1):(nt=this.path.commands,he=1/this.path.unitsPerEm*se,void 0===Mt&&(Mt=he),void 0===Qt&&(Qt=he)),new Ce),Mn=0;Mn<nt.length;Mn+=1){var Ne=nt[Mn];"M"===Ne.type?Jt.moveTo(R+Ne.x*Mt,X+-Ne.y*Qt):"L"===Ne.type?Jt.lineTo(R+Ne.x*Mt,X+-Ne.y*Qt):"Q"===Ne.type?Jt.quadraticCurveTo(R+Ne.x1*Mt,X+-Ne.y1*Qt,R+Ne.x*Mt,X+-Ne.y*Qt):"C"===Ne.type?Jt.curveTo(R+Ne.x1*Mt,X+-Ne.y1*Qt,R+Ne.x2*Mt,X+-Ne.y2*Qt,R+Ne.x*Mt,X+-Ne.y*Qt):"Z"===Ne.type&&Jt.closePath()}return Jt},Br.prototype.getContours=function(){if(void 0===this.points)return[];for(var R=[],X=[],se=0;se<this.points.length;se+=1){var he=this.points[se];X.push(he),he.lastPointOfContour&&(R.push(X),X=[])}return z.argument(0===X.length,"There are still points left in the current contour."),R},Br.prototype.getMetrics=function(){for(var R=this.path.commands,X=[],se=[],he=0;he<R.length;he+=1){var De=R[he];"Z"!==De.type&&(X.push(De.x),se.push(De.y)),"Q"!==De.type&&"C"!==De.type||(X.push(De.x1),se.push(De.y1)),"C"===De.type&&(X.push(De.x2),se.push(De.y2))}var Ye={xMin:Math.min.apply(null,X),yMin:Math.min.apply(null,se),xMax:Math.max.apply(null,X),yMax:Math.max.apply(null,se),leftSideBearing:this.leftSideBearing};return isFinite(Ye.xMin)||(Ye.xMin=0),isFinite(Ye.xMax)||(Ye.xMax=this.advanceWidth),isFinite(Ye.yMin)||(Ye.yMin=0),isFinite(Ye.yMax)||(Ye.yMax=0),Ye.rightSideBearing=this.advanceWidth-Ye.leftSideBearing-(Ye.xMax-Ye.xMin),Ye},Br.prototype.draw=function(R,X,se,he,De){this.getPath(X,se,he,De).draw(R)},Br.prototype.drawPoints=function(R,X,se,he){function De(Mn,Ne,xe,Fe){var Oe=2*Math.PI;R.beginPath();for(var dt=0;dt<Mn.length;dt+=1)R.moveTo(Ne+Mn[dt].x*Fe,xe+Mn[dt].y*Fe),R.arc(Ne+Mn[dt].x*Fe,xe+Mn[dt].y*Fe,2,0,Oe,!1);R.closePath(),R.fill()}X=void 0!==X?X:0,se=void 0!==se?se:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24);for(var Ye=[],nt=[],Mt=this.path,Qt=0;Qt<Mt.commands.length;Qt+=1){var Jt=Mt.commands[Qt];void 0!==Jt.x&&Ye.push({x:Jt.x,y:-Jt.y}),void 0!==Jt.x1&&nt.push({x:Jt.x1,y:-Jt.y1}),void 0!==Jt.x2&&nt.push({x:Jt.x2,y:-Jt.y2})}R.fillStyle="blue",De(Ye,X,se,he),R.fillStyle="red",De(nt,X,se,he)},Br.prototype.drawMetrics=function(R,X,se,he){X=void 0!==X?X:0,se=void 0!==se?se:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24),R.lineWidth=1,R.strokeStyle="black",Pr_line(R,X,-1e4,X,1e4),Pr_line(R,-1e4,se,1e4,se);var De=this.xMin||0,Ye=this.yMin||0,nt=this.xMax||0,Mt=this.yMax||0,Qt=this.advanceWidth||0;R.strokeStyle="blue",Pr_line(R,X+De*he,-1e4,X+De*he,1e4),Pr_line(R,X+nt*he,-1e4,X+nt*he,1e4),Pr_line(R,-1e4,se+-Ye*he,1e4,se+-Ye*he),Pr_line(R,-1e4,se+-Mt*he,1e4,se+-Mt*he),R.strokeStyle="green",Pr_line(R,X+Qt*he,-1e4,X+Qt*he,1e4)},un.prototype.get=function(R){return"function"==typeof this.glyphs[R]&&(this.glyphs[R]=this.glyphs[R]()),this.glyphs[R]},un.prototype.push=function(R,X){this.glyphs[R]=X,this.length++};var Tn={GlyphSet:un,glyphLoader:function(R,X){return new Br({index:X,font:R})},ttfGlyphLoader:function(R,X,se,he,De,Ye){return function(){var nt=new Br({index:X,font:R});return nt.path=function(){se(nt,he,De);var Mt=Ye(R.glyphs,nt);return Mt.unitsPerEm=R.unitsPerEm,Mt},In(nt,"xMin","_xMin"),In(nt,"xMax","_xMax"),In(nt,"yMin","_yMin"),In(nt,"yMax","_yMax"),nt}},cffGlyphLoader:function(R,X,se,he){return function(){var De=new Br({index:X,font:R});return De.path=function(){var Ye=se(R,De,he);return Ye.unitsPerEm=R.unitsPerEm,Ye},De}}};function on(R){return R.length<1240?107:R.length<33900?1131:32768}function mn(R,X,se){var he,De=[],Ye=[],nt=Pn.getCard16(R,X);if(0!==nt){for(var Mt=Pn.getByte(R,X+2),Qt=X+(nt+1)*Mt+2,Jt=X+3,Mn=0;Mn<nt+1;Mn+=1)De.push(Pn.getOffset(R,Jt,Mt)),Jt+=Mt;he=Qt+De[nt]}else he=X+2;for(var Ne=0;Ne<De.length-1;Ne+=1){var xe=Pn.getBytes(R,Qt+De[Ne],Qt+De[Ne+1]);se&&(xe=se(xe)),Ye.push(xe)}return{objects:Ye,startOffset:X,endOffset:he}}function sr(R,X){if(28===X)return R.parseByte()<<8|R.parseByte();if(29===X)return R.parseByte()<<24|R.parseByte()<<16|R.parseByte()<<8|R.parseByte();if(30===X){for(var se=R,he="",De=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var Ye=(nt=se.parseByte())>>4,nt=15&nt;if(15==Ye||(he+=De[Ye],15==nt))break;he+=De[nt]}return parseFloat(he)}if(32<=X&&X<=246)return X-139;if(247<=X&&X<=250)return 256*(X-247)+R.parseByte()+108;if(251<=X&&X<=254)return 256*-(X-251)-R.parseByte()-108;throw new Error("Invalid b0 "+X)}function qt(R,X,se){var he=new Pn.Parser(R,X=void 0!==X?X:0),De=[],Ye=[];for(se=void 0!==se?se:R.length;he.relativeOffset<se;){var nt=he.parseByte();nt<=21?(12===nt&&(nt=1200+he.parseByte()),De.push([nt,Ye]),Ye=[]):Ye.push(sr(he,nt))}for(var Mt=De,Qt={},Jt=0;Jt<Mt.length;Jt+=1){var xe,Mn=Mt[Jt][0],Ne=Mt[Jt][1];if(xe=1===Ne.length?Ne[0]:Ne,Qt.hasOwnProperty(Mn)&&!isNaN(Qt[Mn]))throw new Error("Object "+Qt+" already has key "+Mn);Qt[Mn]=xe}return Qt}function fn(R,X){return X<=390?bt[X]:R[X-391]}function Fn(R,X,se){for(var he,De={},Ye=0;Ye<X.length;Ye+=1){var nt=X[Ye];if(Array.isArray(nt.type)){var Mt=[];Mt.length=nt.type.length;for(var Qt=0;Qt<nt.type.length;Qt++)void 0===(he=void 0!==R[nt.op]?R[nt.op][Qt]:void 0)&&(he=void 0!==nt.value&&void 0!==nt.value[Qt]?nt.value[Qt]:null),"SID"===nt.type[Qt]&&(he=fn(se,he)),Mt[Qt]=he;De[nt.name]=Mt}else void 0===(he=R[nt.op])&&(he=void 0!==nt.value?nt.value:null),"SID"===nt.type&&(he=fn(se,he)),De[nt.name]=he}return De}var Cn=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Wn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function yr(R,X,se,he){return Fn(qt(R,X,se),Wn,he)}function fr(R,X,se,he){for(var De=[],Ye=0;Ye<se.length;Ye+=1){var nt,Mt=((Mt=he,nt=Fn(qt(nt=new DataView(new Uint8Array(se[Ye]).buffer),0,nt.byteLength),Cn,Mt))._subrs=[],nt._subrsBias=0,nt.private[0]),Qt=nt.private[1];0!==Mt&&0!==Qt&&(Mt=yr(R,Qt+X,Mt,he),nt._defaultWidthX=Mt.defaultWidthX,nt._nominalWidthX=Mt.nominalWidthX,0!==Mt.subrs&&(Qt=mn(R,Qt+Mt.subrs+X),nt._subrs=Qt.objects,nt._subrsBias=on(nt._subrs)),nt._privateDict=Mt),De.push(nt)}return De}function Er(R,X,se){var he,De,Ye,nt,Mt,Qt,Jt,Mn,Ne,xe=new Ce,Fe=[],Oe=0,dt=!1,an=!1,Dn=0,Gn=0,ai=(Ne=(R.isCIDFont?(Mt=R.tables.cff.topDict._fdSelect[X.index],Mt=R.tables.cff.topDict._fdArray[Mt],Qt=Mt._subrs,Jt=Mt._subrsBias,Mn=Mt._defaultWidthX,Mt):(Qt=R.tables.cff.topDict._subrs,Jt=R.tables.cff.topDict._subrsBias,Mn=R.tables.cff.topDict._defaultWidthX,R.tables.cff.topDict))._nominalWidthX,Mn);function Jr(vi,Ji){an&&xe.closePath(),xe.moveTo(vi,Ji),an=!0}function xi(){Fe.length%2==0||dt||(ai=Fe.shift()+Ne),Oe+=Fe.length>>1,Fe.length=0,dt=!0}return function vi(Ji){for(var cs,yo,vo,Po,Ao,ra,Bs,Qs,ui,eo,fo,Ns,_i=0;_i<Ji.length;){var Fo=Ji[_i];switch(_i+=1,Fo){case 1:case 3:case 18:case 23:xi();break;case 4:1<Fe.length&&!dt&&(ai=Fe.shift()+Ne,dt=!0),Gn+=Fe.pop(),Jr(Dn,Gn);break;case 5:for(;0<Fe.length;)Dn+=Fe.shift(),Gn+=Fe.shift(),xe.lineTo(Dn,Gn);break;case 6:for(;0<Fe.length&&(Dn+=Fe.shift(),xe.lineTo(Dn,Gn),0!==Fe.length);)Gn+=Fe.shift(),xe.lineTo(Dn,Gn);break;case 7:for(;0<Fe.length&&(Gn+=Fe.shift(),xe.lineTo(Dn,Gn),0!==Fe.length);)Dn+=Fe.shift(),xe.lineTo(Dn,Gn);break;case 8:for(;0<Fe.length;)he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),Gn=nt+Fe.shift(),xe.curveTo(he,De,Ye,nt,Dn,Gn);break;case 10:Ao=Fe.pop()+Jt,(ra=Qt[Ao])&&vi(ra);break;case 11:return;case 12:switch(Fo=Ji[_i],_i+=1,Fo){case 35:he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Bs=Ye+Fe.shift(),Qs=nt+Fe.shift(),ui=Bs+Fe.shift(),eo=Qs+Fe.shift(),fo=ui+Fe.shift(),Ns=eo+Fe.shift(),Dn=fo+Fe.shift(),Gn=Ns+Fe.shift(),Fe.shift(),xe.curveTo(he,De,Ye,nt,Bs,Qs),xe.curveTo(ui,eo,fo,Ns,Dn,Gn);break;case 34:he=Dn+Fe.shift(),De=Gn,Ye=he+Fe.shift(),nt=De+Fe.shift(),Bs=Ye+Fe.shift(),Qs=nt,ui=Bs+Fe.shift(),eo=nt,fo=ui+Fe.shift(),Ns=Gn,Dn=fo+Fe.shift(),xe.curveTo(he,De,Ye,nt,Bs,Qs),xe.curveTo(ui,eo,fo,Ns,Dn,Gn);break;case 36:he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Bs=Ye+Fe.shift(),Qs=nt,ui=Bs+Fe.shift(),eo=nt,fo=ui+Fe.shift(),Ns=eo+Fe.shift(),Dn=fo+Fe.shift(),xe.curveTo(he,De,Ye,nt,Bs,Qs),xe.curveTo(ui,eo,fo,Ns,Dn,Gn);break;case 37:he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Bs=Ye+Fe.shift(),Qs=nt+Fe.shift(),ui=Bs+Fe.shift(),eo=Qs+Fe.shift(),fo=ui+Fe.shift(),Ns=eo+Fe.shift(),Math.abs(fo-Dn)>Math.abs(Ns-Gn)?Dn=fo+Fe.shift():Gn=Ns+Fe.shift(),xe.curveTo(he,De,Ye,nt,Bs,Qs),xe.curveTo(ui,eo,fo,Ns,Dn,Gn);break;default:console.log("Glyph "+X.index+": unknown operator 1200"+Fo),Fe.length=0}break;case 14:0<Fe.length&&!dt&&(ai=Fe.shift()+Ne,dt=!0),an&&(xe.closePath(),an=!1);break;case 19:case 20:xi(),_i+=Oe+7>>3;break;case 21:2<Fe.length&&!dt&&(ai=Fe.shift()+Ne,dt=!0),Gn+=Fe.pop(),Jr(Dn+=Fe.pop(),Gn);break;case 22:1<Fe.length&&!dt&&(ai=Fe.shift()+Ne,dt=!0),Jr(Dn+=Fe.pop(),Gn);break;case 24:for(;2<Fe.length;)he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),Gn=nt+Fe.shift(),xe.curveTo(he,De,Ye,nt,Dn,Gn);Dn+=Fe.shift(),Gn+=Fe.shift(),xe.lineTo(Dn,Gn);break;case 25:for(;6<Fe.length;)Dn+=Fe.shift(),Gn+=Fe.shift(),xe.lineTo(Dn,Gn);he=Dn+Fe.shift(),De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),Gn=nt+Fe.shift(),xe.curveTo(he,De,Ye,nt,Dn,Gn);break;case 26:for(Fe.length%2&&(Dn+=Fe.shift());0<Fe.length;)he=Dn,De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye,Gn=nt+Fe.shift(),xe.curveTo(he,De,Ye,nt,Dn,Gn);break;case 27:for(Fe.length%2&&(Gn+=Fe.shift());0<Fe.length;)he=Dn+Fe.shift(),De=Gn,Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),xe.curveTo(he,De,Ye,nt,Dn,Gn=nt);break;case 28:Fe.push(((cs=Ji[_i])<<24|(yo=Ji[_i+1])<<16)>>16),_i+=2;break;case 29:Ao=Fe.pop()+R.gsubrsBias,(ra=R.gsubrs[Ao])&&vi(ra);break;case 30:for(;0<Fe.length&&(he=Dn,De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),Gn=nt+(1===Fe.length?Fe.shift():0),xe.curveTo(he,De,Ye,nt,Dn,Gn),0!==Fe.length);)he=Dn+Fe.shift(),De=Gn,Ye=he+Fe.shift(),nt=De+Fe.shift(),Gn=nt+Fe.shift(),Dn=Ye+(1===Fe.length?Fe.shift():0),xe.curveTo(he,De,Ye,nt,Dn,Gn);break;case 31:for(;0<Fe.length&&(he=Dn+Fe.shift(),De=Gn,Ye=he+Fe.shift(),nt=De+Fe.shift(),Gn=nt+Fe.shift(),Dn=Ye+(1===Fe.length?Fe.shift():0),xe.curveTo(he,De,Ye,nt,Dn,Gn),0!==Fe.length);)he=Dn,De=Gn+Fe.shift(),Ye=he+Fe.shift(),nt=De+Fe.shift(),Dn=Ye+Fe.shift(),Gn=nt+(1===Fe.length?Fe.shift():0),xe.curveTo(he,De,Ye,nt,Dn,Gn);break;default:Fo<32?console.log("Glyph "+X.index+": unknown operator "+Fo):Fo<247?Fe.push(Fo-139):Fo<251?(cs=Ji[_i],_i+=1,Fe.push(256*(Fo-247)+cs+108)):Fo<255?(cs=Ji[_i],_i+=1,Fe.push(256*-(Fo-251)-cs-108)):(cs=Ji[_i],yo=Ji[_i+1],vo=Ji[_i+2],Po=Ji[_i+3],_i+=4,Fe.push((cs<<24|yo<<16|vo<<8|Po)/65536))}}}(se),X.advanceWidth=ai,xe}function Lr(R,X){var se,he=bt.indexOf(R);return 0<=he&&(se=he),0<=(he=X.indexOf(R))?se=he+bt.length:(se=bt.length+X.length,X.push(R)),se}function te(R,X,se){for(var he={},De=0;De<R.length;De+=1){var Ye=R[De],nt=X[Ye.name];void 0===nt||function Mt(Qt,Jt){if(Qt===Jt)return 1;if(Array.isArray(Qt)&&Array.isArray(Jt)&&Qt.length===Jt.length){for(var Mn=0;Mn<Qt.length;Mn+=1)if(!Mt(Qt[Mn],Jt[Mn]))return;return 1}}(nt,Ye.value)||("SID"===Ye.type&&(nt=Lr(nt,se)),he[Ye.op]={name:Ye.name,type:Ye.type,value:nt})}return he}function Ie(R,X){var se=new An.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return se.dict=te(Cn,R,X),se}function Qe(R){var X=new An.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return X.topDicts=[{name:"topDict_0",type:"TABLE",value:R}],X}var N_parse=function(R,X,se){se.tables.cff={},(De={}).formatMajor=Pn.getCard8(Mt=R,he=X),De.formatMinor=Pn.getCard8(Mt,he+1),De.size=Pn.getCard8(Mt,he+2),De.offsetSize=Pn.getCard8(Mt,he+3),De.startOffset=he,De.endOffset=he+4;var Mt=mn(R,De.endOffset,Pn.bytesToString),he=mn(R,Mt.endOffset),De=mn(R,he.endOffset,Pn.bytesToString);if(Mt=mn(R,De.endOffset),se.gsubrs=Mt.objects,se.gsubrsBias=on(se.gsubrs),1!==(Mt=fr(R,X,he.objects,De.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Mt.length);if((se.tables.cff.topDict=he=Mt[0])._privateDict&&(se.defaultWidthX=he._privateDict.defaultWidthX,se.nominalWidthX=he._privateDict.nominalWidthX),void 0!==he.ros[0]&&void 0!==he.ros[1]&&(se.isCIDFont=!0),se.isCIDFont){var Ye=he.fdSelect;if(0===(Mt=he.fdArray)||0===Ye)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");Mt=fr(R,X,mn(R,Mt+=X).objects,De.objects),he._fdArray=Mt,he._fdSelect=function(xe,Fe,Oe,dt){var an,Dn=[],Gn=new Pn.Parser(xe,Fe);if(0===(xe=Gn.parseCard8()))for(var ai=0;ai<Oe;ai++){if(dt<=(an=Gn.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+an+" (FD count "+dt+")");Dn.push(an)}else{if(3!==xe)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+xe);var Jr,xi=Gn.parseCard16(),vi=Gn.parseCard16();if(0!==vi)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+vi);for(var Ji=0;Ji<xi;Ji++){if(an=Gn.parseCard8(),Jr=Gn.parseCard16(),dt<=an)throw new Error("CFF table CID Font FDSelect has bad FD index value "+an+" (FD count "+dt+")");if(Oe<Jr)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Jr);for(;vi<Jr;vi++)Dn.push(an);vi=Jr}if(Jr!==Oe)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Jr)}return Dn}(R,Ye+=X,se.numGlyphs,Mt.length)}Mt=yr(R,Ye=X+he.private[1],he.private[0],De.objects);var nt=(se.defaultWidthX=Mt.defaultWidthX,se.nominalWidthX=Mt.nominalWidthX,0!==Mt.subrs?(Ye=mn(R,Ye+Mt.subrs),se.subrs=Ye.objects,se.subrsBias=on(se.subrs)):(se.subrs=[],se.subrsBias=0),mn(R,X+he.charStrings));se.nGlyphs=nt.objects.length,Mt=function(Mn,Ne,xe,Fe){var Oe=new Pn.Parser(Mn,Ne),dt=(--xe,[".notdef"]);if(0===(Mn=Oe.parseCard8()))for(var an=0;an<xe;an+=1)Dn=Oe.parseSID(),dt.push(fn(Fe,Dn));else if(1===Mn)for(;dt.length<=xe;)for(var Dn=Oe.parseSID(),Gn=Oe.parseCard8(),ai=0;ai<=Gn;ai+=1)dt.push(fn(Fe,Dn)),Dn+=1;else{if(2!==Mn)throw new Error("Unknown charset format "+Mn);for(;dt.length<=xe;){Dn=Oe.parseSID(),Gn=Oe.parseCard16();for(var Jr=0;Jr<=Gn;Jr+=1)dt.push(fn(Fe,Dn)),Dn+=1}}return dt}(R,X+he.charset,se.nGlyphs,De.objects),se.cffEncoding=0===he.encoding?new ir(rt,Mt):1===he.encoding?new ir(_t,Mt):function(Mn,Ne,xe){var Fe={},Oe=new Pn.Parser(Mn,Ne);if(0===(Mn=Oe.parseCard8()))for(var dt=Oe.parseCard8(),an=0;an<dt;an+=1)Fe[Gn=Oe.parseCard8()]=an;else{if(1!==Mn)throw new Error("Unknown encoding format "+Mn);for(var Dn=Oe.parseCard8(),Gn=1,ai=0;ai<Dn;ai+=1)for(var Jr=Oe.parseCard8(),xi=Oe.parseCard8(),vi=Jr;vi<=Jr+xi;vi+=1)Fe[vi]=Gn,Gn+=1}return new ir(Fe,xe)}(R,X+he.encoding,Mt),se.encoding=se.encoding||se.cffEncoding,se.glyphs=new Tn.GlyphSet(se);for(var Qt=0;Qt<se.nGlyphs;Qt+=1)se.glyphs.push(Qt,Tn.cffGlyphLoader(se,Qt,Er,nt.objects[Qt]))},N_make=function(R,Mn){for(var se,he=new An.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),De={version:Mn.version,fullName:Mn.fullName,familyName:Mn.familyName,weight:Mn.weightName,fontBBox:Mn.fontBBox||[0,0,0,0],fontMatrix:[De=1/Mn.unitsPerEm,0,0,De,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Ye=[],nt=1;nt<R.length;nt+=1)se=R.get(nt),Ye.push(se.name);var Mt,Qt,Jt=[],Ne=(he.header=new An.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),he.nameIndex=function(xe){var Fe=new An.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Fe.names=[];for(var Oe=0;Oe<xe.length;Oe+=1)Fe.names.push({name:"name_"+Oe,type:"NAME",value:xe[Oe]});return Fe}([Mn.postScriptName]),Mn=Ie(De,Jt),he.topDictIndex=Qe(Mn),he.globalSubrIndex=new An.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),he.charsets=function(xe,Fe){for(var Oe=new An.Record("Charsets",[{name:"format",type:"Card8",value:0}]),dt=0;dt<xe.length;dt+=1){var an=Lr(xe[dt],Fe);Oe.fields.push({name:"glyph_"+dt,type:"SID",value:an})}return Oe}(Ye,Jt),he.charStringsIndex=function T(R){for(var X=new An.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),se=0;se<R.length;se+=1){var he=R.get(se),De=function(Ye){for(var nt=[],Mt=Ye.path,Qt=(nt.push({name:"width",type:"NUMBER",value:Ye.advanceWidth}),0),Jt=0,Mn=0;Mn<Mt.commands.length;Mn+=1){var Ne,xe,Fe,Oe,dt=void 0,an=void 0,Dn=Mt.commands[Mn];"M"===(Dn="Q"===Dn.type?{type:"C",x:Dn.x,y:Dn.y,x1:1/3*Qt+2/3*Dn.x1,y1:1/3*Jt+2/3*Dn.y1,x2:1/3*Dn.x+2/3*Dn.x1,y2:1/3*Dn.y+2/3*Dn.y1}:Dn).type?(dt=Math.round(Dn.x-Qt),an=Math.round(Dn.y-Jt),nt.push({name:"dx",type:"NUMBER",value:dt}),nt.push({name:"dy",type:"NUMBER",value:an}),nt.push({name:"rmoveto",type:"OP",value:21}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y)):"L"===Dn.type?(dt=Math.round(Dn.x-Qt),an=Math.round(Dn.y-Jt),nt.push({name:"dx",type:"NUMBER",value:dt}),nt.push({name:"dy",type:"NUMBER",value:an}),nt.push({name:"rlineto",type:"OP",value:5}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y)):"C"===Dn.type&&(Ne=Math.round(Dn.x1-Qt),xe=Math.round(Dn.y1-Jt),Fe=Math.round(Dn.x2-Dn.x1),Oe=Math.round(Dn.y2-Dn.y1),dt=Math.round(Dn.x-Dn.x2),an=Math.round(Dn.y-Dn.y2),nt.push({name:"dx1",type:"NUMBER",value:Ne}),nt.push({name:"dy1",type:"NUMBER",value:xe}),nt.push({name:"dx2",type:"NUMBER",value:Fe}),nt.push({name:"dy2",type:"NUMBER",value:Oe}),nt.push({name:"dx",type:"NUMBER",value:dt}),nt.push({name:"dy",type:"NUMBER",value:an}),nt.push({name:"rrcurveto",type:"OP",value:8}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y))}return nt.push({name:"endchar",type:"OP",value:14}),nt}(he);X.charStrings.push({name:he.name,type:"CHARSTRING",value:De})}return X}(R),he.privateDict=(Ne={},Mt=Jt,(Qt=new An.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=te(Wn,Ne,Mt),Qt),he.stringIndex=function(xe){var Fe=new An.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Fe.strings=[];for(var Oe=0;Oe<xe.length;Oe+=1)Fe.strings.push({name:"string_"+Oe,type:"STRING",value:xe[Oe]});return Fe}(Jt),he.header.sizeOf()+he.nameIndex.sizeOf()+he.topDictIndex.sizeOf()+he.stringIndex.sizeOf()+he.globalSubrIndex.sizeOf());return De.charset=Ne,De.encoding=0,De.charStrings=De.charset+he.charsets.sizeOf(),De.private[1]=De.charStrings+he.charStringsIndex.sizeOf(),Mn=Ie(De,Jt),he.topDictIndex=Qe(Mn),he},U_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.fontRevision=Math.round(1e3*he.parseFixed())/1e3,se.checkSumAdjustment=he.parseULong(),se.magicNumber=he.parseULong(),z.argument(1594834165===se.magicNumber,"Font header has wrong magic number."),se.flags=he.parseUShort(),se.unitsPerEm=he.parseUShort(),se.created=he.parseLongDateTime(),se.modified=he.parseLongDateTime(),se.xMin=he.parseShort(),se.yMin=he.parseShort(),se.xMax=he.parseShort(),se.yMax=he.parseShort(),se.macStyle=he.parseUShort(),se.lowestRecPPEM=he.parseUShort(),se.fontDirectionHint=he.parseShort(),se.indexToLocFormat=he.parseShort(),se.glyphDataFormat=he.parseShort(),se},U_make=function(R){var X=Math.round((new Date).getTime()/1e3)+2082844800,se=X;return R.createdTimestamp&&(se=R.createdTimestamp+2082844800),new An.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:se},{name:"modified",type:"LONGDATETIME",value:X},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],R)},L_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.ascender=he.parseShort(),se.descender=he.parseShort(),se.lineGap=he.parseShort(),se.advanceWidthMax=he.parseUShort(),se.minLeftSideBearing=he.parseShort(),se.minRightSideBearing=he.parseShort(),se.xMaxExtent=he.parseShort(),se.caretSlopeRise=he.parseShort(),se.caretSlopeRun=he.parseShort(),se.caretOffset=he.parseShort(),he.relativeOffset+=8,se.metricDataFormat=he.parseShort(),se.numberOfHMetrics=he.parseUShort(),se},L_make=function(R){return new An.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],R)},ie_parse=function(R,X,se,he,De){for(var Ye,nt,Mt=new Pn.Parser(R,X),Qt=0;Qt<he;Qt+=1){Qt<se&&(Ye=Mt.parseUShort(),nt=Mt.parseShort());var Jt=De.get(Qt);Jt.advanceWidth=Ye,Jt.leftSideBearing=nt}},ie_make=function(R){for(var X=new An.Table("hmtx",[]),se=0;se<R.length;se+=1){var he=(De=R.get(se)).advanceWidth||0,De=De.leftSideBearing||0;X.fields.push({name:"advanceWidth_"+se,type:"USHORT",value:he}),X.fields.push({name:"leftSideBearing_"+se,type:"SHORT",value:De})}return X},H_make=function(R){for(var X=new An.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:R.length}]),se="",he=12+4*R.length,De=0;De<R.length;++De){var Ye=se.indexOf(R[De]);Ye<0&&(Ye=se.length,se+=R[De]),X.fields.push({name:"offset "+De,type:"USHORT",value:he+Ye}),X.fields.push({name:"length "+De,type:"USHORT",value:R[De].length})}return X.fields.push({name:"stringPool",type:"CHARARRAY",value:se}),X},H_parse=function(R,X){for(var se=new Pn.Parser(R,X),he=se.parseULong(),De=(z.argument(1===he,"Unsupported ltag table version."),se.skip("uLong",1),se.parseULong()),Ye=[],nt=0;nt<De;nt++){for(var Mt="",Qt=X+se.parseUShort(),Jt=se.parseUShort(),Mn=Qt;Mn<Qt+Jt;++Mn)Mt+=String.fromCharCode(R.getInt8(Mn));Ye.push(Mt)}return Ye},de_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.numGlyphs=he.parseUShort(),1===se.version&&(se.maxPoints=he.parseUShort(),se.maxContours=he.parseUShort(),se.maxCompositePoints=he.parseUShort(),se.maxCompositeContours=he.parseUShort(),se.maxZones=he.parseUShort(),se.maxTwilightPoints=he.parseUShort(),se.maxStorage=he.parseUShort(),se.maxFunctionDefs=he.parseUShort(),se.maxInstructionDefs=he.parseUShort(),se.maxStackElements=he.parseUShort(),se.maxSizeOfInstructions=he.parseUShort(),se.maxComponentElements=he.parseUShort(),se.maxComponentDepth=he.parseUShort()),se},de_make=function(R){return new An.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:R}])},Be=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Xe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},wt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Nt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},rn="utf-16",Ge={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},He={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function vt(R,X,se){switch(R){case 0:return rn;case 1:return He[se]||Ge[X];case 3:if(1===X||10===X)return rn}}function tt(R){var X,se={};for(X in R)se[R[X]]=parseInt(X);return se}function Dt(R,X,se,he,De,Ye){return new An.Record("NameRecord",[{name:"platformID",type:"USHORT",value:R},{name:"encodingID",type:"USHORT",value:X},{name:"languageID",type:"USHORT",value:se},{name:"nameID",type:"USHORT",value:he},{name:"length",type:"USHORT",value:De},{name:"offset",type:"USHORT",value:Ye}])}function Zt(R,X){if((se=function(Ye,nt){var Mt=Ye.length,Qt=nt.length-Mt+1;e:for(var Jt=0;Jt<Qt;Jt++)for(;Jt<Qt;Jt++){for(var Mn=0;Mn<Mt;Mn++)if(nt[Jt+Mn]!==Ye[Mn])continue e;return Jt}return-1}(R,X))<0)for(var se=X.length,he=0,De=R.length;he<De;++he)X.push(R[he]);return se}var $n_parse=function(R,X,se){for(var he={},De=new Pn.Parser(R,X),Ye=(X=De.parseUShort(),De.parseUShort()),nt=De.offset+De.parseUShort(),Mt=0;Mt<Ye;Mt++){var Oe=De.parseUShort(),Qt=De.parseUShort(),Jt=De.parseUShort(),Mn=De.parseUShort(),Ne=(Mn=Be[Mn]||Mn,De.parseUShort()),xe=De.parseUShort(),Fe=function(an,Dn,Gn){switch(an){case 0:if(65535===Dn)return"und";if(Gn)return Gn[Dn];break;case 1:return Xe[Dn];case 3:return Nt[Dn]}}(Oe,Jt,se);void 0!==(Oe=vt(Oe,Qt,Jt))&&void 0!==Fe&&(Qt=void 0,(Qt=Oe===rn?ye.UTF16(R,nt+xe,Ne):ye.MACSTRING(R,nt+xe,Ne,Oe))&&((Jt=void 0===(Jt=he[Mn])?he[Mn]={}:Jt)[Fe]=Qt))}return 1===X&&De.parseUShort(),he},$n_make=function(R,X){var se,he=[],De={},Ye=tt(Be);for(se in R){var nt=Ye[se];if(void 0===nt&&(nt=se),xe=parseInt(nt),isNaN(xe))throw new Error('Name table entry "'+se+'" does not exist, see nameTableNames for complete list.');De[xe]=R[se],he.push(xe)}for(var Mt=tt(Xe),Qt=tt(Nt),Jt=[],Mn=[],Ne=0;Ne<he.length;Ne++){var xe,Fe,Oe=De[xe=he[Ne]];for(Fe in Oe){var Jr,dt=Oe[Fe],an=Mt[Fe],Dn=wt[an],Gn=vt(Jr=1,Dn,an),ai=(void 0===(Gn=je.MACSTRING(dt,Gn))&&(Jr=0,(an=X.indexOf(Fe))<0&&(an=X.length,X.push(Fe)),Dn=4,Gn=je.UTF16(dt)),Zt(Gn,Mn));void 0!==(Jt.push(Dt(Jr,Dn,an,xe,Gn.length,ai)),Jr=Qt[Fe])&&(an=Zt(Dn=je.UTF16(dt),Mn),Jt.push(Dt(3,1,Jr,xe,Dn.length,an)))}}Jt.sort(function(Ji,cs){return Ji.platformID-cs.platformID||Ji.encodingID-cs.encodingID||Ji.languageID-cs.languageID||Ji.nameID-cs.nameID});for(var xi=new An.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Jt.length},{name:"stringOffset",type:"USHORT",value:6+12*Jt.length}]),vi=0;vi<Jt.length;vi++)xi.fields.push({name:"record_"+vi,type:"RECORD",value:Jt[vi]});return xi.fields.push({name:"strings",type:"LITERAL",value:Mn}),xi},lr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Ar_parse=function(R,X){var se={},he=new Pn.Parser(R,X);se.version=he.parseUShort(),se.xAvgCharWidth=he.parseShort(),se.usWeightClass=he.parseUShort(),se.usWidthClass=he.parseUShort(),se.fsType=he.parseUShort(),se.ySubscriptXSize=he.parseShort(),se.ySubscriptYSize=he.parseShort(),se.ySubscriptXOffset=he.parseShort(),se.ySubscriptYOffset=he.parseShort(),se.ySuperscriptXSize=he.parseShort(),se.ySuperscriptYSize=he.parseShort(),se.ySuperscriptXOffset=he.parseShort(),se.ySuperscriptYOffset=he.parseShort(),se.yStrikeoutSize=he.parseShort(),se.yStrikeoutPosition=he.parseShort(),se.sFamilyClass=he.parseShort(),se.panose=[];for(var De=0;De<10;De++)se.panose[De]=he.parseByte();return se.ulUnicodeRange1=he.parseULong(),se.ulUnicodeRange2=he.parseULong(),se.ulUnicodeRange3=he.parseULong(),se.ulUnicodeRange4=he.parseULong(),se.achVendID=String.fromCharCode(he.parseByte(),he.parseByte(),he.parseByte(),he.parseByte()),se.fsSelection=he.parseUShort(),se.usFirstCharIndex=he.parseUShort(),se.usLastCharIndex=he.parseUShort(),se.sTypoAscender=he.parseShort(),se.sTypoDescender=he.parseShort(),se.sTypoLineGap=he.parseShort(),se.usWinAscent=he.parseUShort(),se.usWinDescent=he.parseUShort(),1<=se.version&&(se.ulCodePageRange1=he.parseULong(),se.ulCodePageRange2=he.parseULong()),2<=se.version&&(se.sxHeight=he.parseShort(),se.sCapHeight=he.parseShort(),se.usDefaultChar=he.parseUShort(),se.usBreakChar=he.parseUShort(),se.usMaxContent=he.parseUShort()),se},Ar_make=function(R){return new An.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],R)},Ar_getUnicodeRange=function(R){for(var X=0;X<lr.length;X+=1){var se=lr[X];if(R>=se.begin&&R<se.end)return X}return-1},Hi_parse=function(R,X){var se={},he=new Pn.Parser(R,X);switch(se.version=he.parseVersion(),se.italicAngle=he.parseFixed(),se.underlinePosition=he.parseShort(),se.underlineThickness=he.parseShort(),se.isFixedPitch=he.parseULong(),se.minMemType42=he.parseULong(),se.maxMemType42=he.parseULong(),se.minMemType1=he.parseULong(),se.maxMemType1=he.parseULong(),se.version){case 1:se.names=vn.slice();break;case 2:se.numberOfGlyphs=he.parseUShort(),se.glyphNameIndex=new Array(se.numberOfGlyphs);for(var De=0;De<se.numberOfGlyphs;De++)se.glyphNameIndex[De]=he.parseUShort();se.names=[];for(var Ye,nt=0;nt<se.numberOfGlyphs;nt++)se.glyphNameIndex[nt]>=vn.length&&(Ye=he.parseChar(),se.names.push(he.parseString(Ye)));break;case 2.5:se.numberOfGlyphs=he.parseUShort(),se.offset=new Array(se.numberOfGlyphs);for(var Mt=0;Mt<se.numberOfGlyphs;Mt++)se.offset[Mt]=he.parseChar()}return se},Hi_make=function(){return new An.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Ki=new Array(9),Xs=(Ki[1]=function(){var R=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{substFormat:1,coverage:this.parsePointer(bn.coverage),deltaGlyphId:this.parseUShort()}:2===X?{substFormat:2,coverage:this.parsePointer(bn.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+R.toString(16)+": lookup type 1 format must be 1 or 2.")},Ki[2]=function(){var R=this.parseUShort();return z.argument(1===R,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(bn.coverage),sequences:this.parseListOfLists()}},Ki[3]=function(){var R=this.parseUShort();return z.argument(1===R,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(bn.coverage),alternateSets:this.parseListOfLists()}},Ki[4]=function(){var R=this.parseUShort();return z.argument(1===R,"GSUB ligature table identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(bn.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:bn.uShort,lookupListIndex:bn.uShort});Ki[5]=function(){var R,X,se=this.offset+this.relativeOffset,he=this.parseUShort();return 1===he?{substFormat:he,coverage:this.parsePointer(bn.coverage),ruleSets:this.parseListOfLists(function(){var De=this.parseUShort(),Ye=this.parseUShort();return{input:this.parseUShortList(De-1),lookupRecords:this.parseRecordList(Ye,Xs)}})}:2===he?{substFormat:he,coverage:this.parsePointer(bn.coverage),classDef:this.parsePointer(bn.classDef),classSets:this.parseListOfLists(function(){var De=this.parseUShort(),Ye=this.parseUShort();return{classes:this.parseUShortList(De-1),lookupRecords:this.parseRecordList(Ye,Xs)}})}:3===he?(R=this.parseUShort(),X=this.parseUShort(),{substFormat:he,coverages:this.parseList(R,bn.pointer(bn.coverage)),lookupRecords:this.parseRecordList(X,Xs)}):void z.assert(!1,"0x"+se.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Ki[6]=function(){var R=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{substFormat:1,coverage:this.parsePointer(bn.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Xs)}})}:2===X?{substFormat:2,coverage:this.parsePointer(bn.coverage),backtrackClassDef:this.parsePointer(bn.classDef),inputClassDef:this.parsePointer(bn.classDef),lookaheadClassDef:this.parsePointer(bn.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Xs)}})}:3===X?{substFormat:3,backtrackCoverage:this.parseList(bn.pointer(bn.coverage)),inputCoverage:this.parseList(bn.pointer(bn.coverage)),lookaheadCoverage:this.parseList(bn.pointer(bn.coverage)),lookupRecords:this.parseRecordList(Xs)}:void z.assert(!1,"0x"+R.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Ki[7]=function(){var R=this.parseUShort(),X=(z.argument(1===R,"GSUB Extension Substitution subtable identifier-format must be 1"),R=this.parseUShort(),new bn(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:R,extension:Ki[R].call(X)}},Ki[8]=function(){var R=this.parseUShort();return z.argument(1===R,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(bn.coverage),backtrackCoverage:this.parseList(bn.pointer(bn.coverage)),lookaheadCoverage:this.parseList(bn.pointer(bn.coverage)),substitutes:this.parseUShortList()}};var Os=new Array(9);Os[1]=function(R){return new An.Table("substitutionTable",1===R.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(R.coverage)},{name:"deltaGlyphID",type:"USHORT",value:R.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new An.Coverage(R.coverage)}].concat(An.ushortList("substitute",R.substitute)))},Os[3]=function(R){return z.assert(1===R.substFormat,"Lookup type 3 substFormat must be 1."),new An.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(R.coverage)}].concat(An.tableList("altSet",R.alternateSets,function(X){return new An.Table("alternateSetTable",An.ushortList("alternate",X))})))},Os[4]=function(R){return z.assert(1===R.substFormat,"Lookup type 4 substFormat must be 1."),new An.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(R.coverage)}].concat(An.tableList("ligSet",R.ligatureSets,function(X){return new An.Table("ligatureSetTable",An.tableList("ligature",X,function(se){return new An.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:se.ligGlyph}].concat(An.ushortList("component",se.components,se.components.length+1)))}))})))};var wi_parse=function(R,X){return X=(R=new bn(R,X=X||0)).parseVersion(1),z.argument(1===X||1.1===X,"Unsupported GSUB table version."),1===X?{version:X,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(Ki)}:{version:X,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(Ki),variations:R.parseFeatureVariationsList()}},wi_make=function(R){return new An.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new An.ScriptList(R.scripts)},{name:"features",type:"TABLE",value:new An.FeatureList(R.features)},{name:"lookups",type:"TABLE",value:new An.LookupList(R.lookups,Os)}])},ws_parse=function(R,X){for(var se=new Pn.Parser(R,X),he=se.parseULong(),De=(z.argument(1===he,"Unsupported META table version."),se.parseULong(),se.parseULong(),se.parseULong()),Ye={},nt=0;nt<De;nt++){var Mt=se.parseTag(),Jt=se.parseULong(),Qt=se.parseULong();Jt=ye.UTF8(R,X+Jt,Qt),Ye[Mt]=Jt}return Ye},ws_make=function(R){var X,se=Object.keys(R).length,he="",De=16+12*se,Ye=new An.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:De},{name:"numTags",type:"ULONG",value:se}]);for(X in R){var nt=he.length;he+=R[X],Ye.fields.push({name:"tag "+X,type:"TAG",value:X}),Ye.fields.push({name:"offset "+X,type:"ULONG",value:De+nt}),Ye.fields.push({name:"length "+X,type:"ULONG",value:R[X].length})}return Ye.fields.push({name:"stringPool",type:"CHARARRAY",value:he}),Ye};function co(R){return Math.log(R)/Math.log(2)|0}function Ls(R){for(;R.length%4!=0;)R.push(0);for(var X=0,se=0;se<R.length;se+=4)X+=(R[se]<<24)+(R[se+1]<<16)+(R[se+2]<<8)+R[se+3];return X%Math.pow(2,32)}function so(R,X,se,he){return new An.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==R?R:""},{name:"checkSum",type:"ULONG",value:void 0!==X?X:0},{name:"offset",type:"ULONG",value:void 0!==se?se:0},{name:"length",type:"ULONG",value:void 0!==he?he:0}])}function ea(R){for(var X=new An.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),se=(X.tables=R,X.numTables=R.length,Math.pow(2,co(X.numTables))),he=(X.searchRange=16*se,X.entrySelector=co(se),X.rangeShift=16*X.numTables-X.searchRange,[]),De=[],Ye=X.sizeOf()+so().sizeOf()*X.numTables;Ye%4!=0;)Ye+=1,De.push({name:"padding",type:"BYTE",value:0});for(var nt=0;nt<R.length;nt+=1){var Mt=R[nt],Qt=(z.argument(4===Mt.tableName.length,"Table name"+Mt.tableName+" is invalid."),Mt.sizeOf()),Jt=so(Mt.tableName,Ls(Mt.encode()),Ye,Qt);for(he.push({name:Jt.tag+" Table Record",type:"RECORD",value:Jt}),De.push({name:Mt.tableName+" table",type:"RECORD",value:Mt}),Ye+=Qt,z.argument(!isNaN(Ye),"Something went wrong calculating the offset.");Ye%4!=0;)Ye+=1,De.push({name:"padding",type:"BYTE",value:0})}return he.sort(function(Mn,Ne){return Mn.value.tag>Ne.value.tag?1:-1}),X.fields=X.fields.concat(he),X.fields=X.fields.concat(De),X}function So(R,X,se){for(var he=0;he<X.length;he+=1){var De=R.charToGlyphIndex(X[he]);if(0<De)return R.glyphs.get(De).getMetrics()}return se}var ca_fontToTable=function(R){for(var X,se=[],he=[],De=[],Ye=[],nt=[],Mt=[],Qt=[],Jt=0,Mn=0,Ne=0,xe=0,Fe=0,Oe=0;Oe<R.glyphs.length;Oe+=1){var dt=R.glyphs.get(Oe),an=0|dt.unicode;if(isNaN(dt.advanceWidth))throw new Error("Glyph "+dt.name+" ("+Oe+"): advanceWidth is not a number.");if((an<X||void 0===X)&&0<an&&(X=an),Jt<an&&(Jt=an),(an=Ar_getUnicodeRange(an))<32)Mn|=1<<an;else if(an<64)Ne|=1<<an-32;else if(an<96)xe|=1<<an-64;else{if(!(an<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Fe|=1<<an-96}".notdef"!==dt.name&&(an=dt.getMetrics(),se.push(an.xMin),he.push(an.yMin),De.push(an.xMax),Ye.push(an.yMax),Mt.push(an.leftSideBearing),Qt.push(an.rightSideBearing),nt.push(dt.advanceWidth))}var Dn,Gn={xMin:Math.min.apply(null,se),yMin:Math.min.apply(null,he),xMax:Math.max.apply(null,De),yMax:Math.max.apply(null,Ye),advanceWidthMax:Math.max.apply(null,nt),advanceWidthAvg:function(Fo){for(var pr=0,Yi=0;Yi<Fo.length;Yi+=1)pr+=Fo[Yi];return pr/Fo.length}(nt),minLeftSideBearing:Math.min.apply(null,Mt),maxLeftSideBearing:Math.max.apply(null,Mt),minRightSideBearing:Math.min.apply(null,Qt)},ai=(Gn.ascender=R.ascender,Gn.descender=R.descender,U_make({flags:3,unitsPerEm:R.unitsPerEm,xMin:Gn.xMin,yMin:Gn.yMin,xMax:Gn.xMax,yMax:Gn.yMax,lowestRecPPEM:3,createdTimestamp:R.createdTimestamp})),Jr=L_make({ascender:Gn.ascender,descender:Gn.descender,advanceWidthMax:Gn.advanceWidthMax,minLeftSideBearing:Gn.minLeftSideBearing,minRightSideBearing:Gn.minRightSideBearing,xMaxExtent:Gn.maxLeftSideBearing+(Gn.xMax-Gn.xMin),numberOfHMetrics:R.glyphs.length}),xi=de_make(R.glyphs.length),vi=Ar_make({xAvgCharWidth:Math.round(Gn.advanceWidthAvg),usWeightClass:R.tables.os2.usWeightClass,usWidthClass:R.tables.os2.usWidthClass,usFirstCharIndex:X,usLastCharIndex:Jt,ulUnicodeRange1:Mn,ulUnicodeRange2:Ne,ulUnicodeRange3:xe,ulUnicodeRange4:Fe,fsSelection:R.tables.os2.fsSelection,sTypoAscender:Gn.ascender,sTypoDescender:Gn.descender,sTypoLineGap:0,usWinAscent:Gn.yMax,usWinDescent:Math.abs(Gn.yMin),ulCodePageRange1:1,sxHeight:So(R,"xyvw",{yMax:Math.round(Gn.ascender/2)}).yMax,sCapHeight:So(R,"HIKLEFJMNTZBDPRAGOQSUVWXY",Gn).yMax,usDefaultChar:R.hasChar(" ")?32:0,usBreakChar:R.hasChar(" ")?32:0}),Ji=ie_make(R.glyphs),cs=pt_make(R.glyphs),Bs=(Qs=R.getEnglishName("fontFamily"))+" "+(ui=R.getEnglishName("fontSubfamily")),yo=(yo=R.getEnglishName("postScriptName"))||Qs.replace(/\s/g,"")+"-"+ui,vo={};for(Dn in R.names)vo[Dn]=R.names[Dn];vo.uniqueID||(vo.uniqueID={en:R.getEnglishName("manufacturer")+":"+Bs}),vo.postScriptName||(vo.postScriptName={en:yo}),vo.preferredFamily||(vo.preferredFamily=R.names.fontFamily),vo.preferredSubfamily||(vo.preferredSubfamily=R.names.fontSubfamily);var Po=$n_make(vo,Ao=[]),Ao=0<Ao.length?H_make(Ao):void 0,ra=Hi_make(),Qs=(Bs=N_make(R.glyphs,{version:R.getEnglishName("version"),fullName:Bs,familyName:Qs,weightName:ui,postScriptName:yo,unitsPerEm:R.unitsPerEm,fontBBox:[0,Gn.yMin,Gn.ascender,Gn.advanceWidthMax]}),R.metas&&0<Object.keys(R.metas).length?ws_make(R.metas):void 0),ui=[ai,Jr,xi,vi,Po,cs,ra,Bs,Ji];Ao&&ui.push(Ao),R.tables.gsub&&ui.push(wi_make(R.tables.gsub)),Qs&&ui.push(Qs);for(var eo=Ls((yo=ea(ui)).encode()),fo=yo.fields,Ns=!1,_i=0;_i<fo.length;_i+=1)if("head table"===fo[_i].name){fo[_i].value.checkSumAdjustment=2981146554-eo,Ns=!0;break}if(Ns)return yo;throw new Error("Could not find head table with checkSum to adjust.")};function ta(R,X){for(var se=0,he=R.length-1;se<=he;){var De=se+he>>>1,Ye=R[De].tag;if(Ye===X)return De;Ye<X?se=1+De:he=De-1}return-se-1}function qo(R,X){for(var se=0,he=R.length-1;se<=he;){var De=se+he>>>1,Ye=R[De];if(Ye===X)return De;Ye<X?se=1+De:he=De-1}return-se-1}function ua(R,X){for(var se=0,he=R.length-1;se<=he;){var De,Ye=se+he>>>1,nt=(De=R[Ye]).start;if(nt===X)return De;nt<X?se=1+Ye:he=Ye-1}if(0<se)return X>(De=R[se-1]).end?0:De}function mo(R,X){this.font=R,this.tableName=X}function Ta(R){mo.call(this,R,"gpos")}function To(R){mo.call(this,R,"gsub")}function Ja(R,X,se){for(var he=R.subtables,De=0;De<he.length;De++){var Ye=he[De];if(Ye.substFormat===X)return Ye}if(se)return he.push(se),se}function Va(R){for(var X=new ArrayBuffer(R.length),se=new Uint8Array(X),he=0;he<R.length;++he)se[he]=R[he];return X}function ke(R,X){if(!R)throw X}function mt(R,X,se,he,De){var Ye=0<(X&he)?(Ye=R.parseByte(),se+(Ye=X&De?Ye:-Ye)):0<(X&De)?se:se+R.parseShort();return Ye}function Vt(R,X,se){var he,De=new Pn.Parser(X,se);if(R.numberOfContours=De.parseShort(),R._xMin=De.parseShort(),R._yMin=De.parseShort(),R._xMax=De.parseShort(),R._yMax=De.parseShort(),0<R.numberOfContours){for(var Ye=R.endPointIndices=[],nt=0;nt<R.numberOfContours;nt+=1)Ye.push(De.parseUShort());R.instructionLength=De.parseUShort(),R.instructions=[];for(var Mt=0;Mt<R.instructionLength;Mt+=1)R.instructions.push(De.parseByte());for(var Qt=Ye[Ye.length-1]+1,Jt=[],Mn=0;Mn<Qt;Mn+=1)if(he=De.parseByte(),Jt.push(he),0<(8&he))for(var Ne=De.parseByte(),xe=0;xe<Ne;xe+=1)Jt.push(he),Mn+=1;if(z.argument(Jt.length===Qt,"Bad flags."),0<Ye.length){var Fe,Oe=[];if(0<Qt){for(var dt=0;dt<Qt;dt+=1)(Fe={}).onCurve=!!(1&(he=Jt[dt])),Fe.lastPointOfContour=0<=Ye.indexOf(dt),Oe.push(Fe);for(var an=0,Dn=0;Dn<Qt;Dn+=1)(Fe=Oe[Dn]).x=mt(De,he=Jt[Dn],an,2,16),an=Fe.x;for(var Gn=0,ai=0;ai<Qt;ai+=1)(Fe=Oe[ai]).y=mt(De,he=Jt[ai],Gn,4,32),Gn=Fe.y}R.points=Oe}else R.points=[]}else if(0===R.numberOfContours)R.points=[];else{R.isComposite=!0,R.points=[],R.components=[];for(var Jr=!0;Jr;){Jt=De.parseUShort();var xi={glyphIndex:De.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Jt)?0<(2&Jt)?(xi.dx=De.parseShort(),xi.dy=De.parseShort()):xi.matchedPoints=[De.parseUShort(),De.parseUShort()]:0<(2&Jt)?(xi.dx=De.parseChar(),xi.dy=De.parseChar()):xi.matchedPoints=[De.parseByte(),De.parseByte()],0<(8&Jt)?xi.xScale=xi.yScale=De.parseF2Dot14():0<(64&Jt)?(xi.xScale=De.parseF2Dot14(),xi.yScale=De.parseF2Dot14()):0<(128&Jt)&&(xi.xScale=De.parseF2Dot14(),xi.scale01=De.parseF2Dot14(),xi.scale10=De.parseF2Dot14(),xi.yScale=De.parseF2Dot14()),R.components.push(xi),Jr=!!(32&Jt)}if(256&Jt){R.instructionLength=De.parseUShort(),R.instructions=[];for(var vi=0;vi<R.instructionLength;vi+=1)R.instructions.push(De.parseByte())}}}function We(R,X){for(var se=[],he=0;he<R.length;he+=1){var De;se.push(De={x:X.xScale*(De=R[he]).x+X.scale01*De.y+X.dx,y:X.scale10*De.x+X.yScale*De.y+X.dy,onCurve:De.onCurve,lastPointOfContour:De.lastPointOfContour})}return se}function Wt(R){var X=new Ce;if(R)for(var se=function(Ne){for(var xe=[],Fe=[],Oe=0;Oe<Ne.length;Oe+=1){var dt=Ne[Oe];Fe.push(dt),dt.lastPointOfContour&&(xe.push(Fe),Fe=[])}return z.argument(0===Fe.length,"There are still points left in the current contour."),xe}(R),he=0;he<se.length;++he){var De,Ye=se[he],Mt=Ye[0];(nt=Ye[Ye.length-1]).onCurve?X.moveTo(nt.x,nt.y):Mt.onCurve?X.moveTo(Mt.x,Mt.y):X.moveTo((De={x:.5*(nt.x+Mt.x),y:.5*(nt.y+Mt.y)}).x,De.y);for(var Qt=0;Qt<Ye.length;++Qt){var Jt,nt=Mt;Mt=Ye[(Qt+1)%Ye.length],nt.onCurve?X.lineTo(nt.x,nt.y):(Jt=Mt,Mt.onCurve||(Jt={x:.5*(nt.x+Mt.x),y:.5*(nt.y+Mt.y)}),X.quadraticCurveTo(nt.x,nt.y,Jt.x,Jt.y))}X.closePath()}return X}function Ln(R,X){if(X.isComposite)for(var se=0;se<X.components.length;se+=1){var De=R.get((he=X.components[se]).glyphIndex);if(De.getPath(),De.points){var Ye=void 0;if(void 0===he.matchedPoints)Ye=We(De.points,he);else{if(he.matchedPoints[0]>X.points.length-1||he.matchedPoints[1]>De.points.length-1)throw Error("Matched points out of range in "+X.name);var he,nt=X.points[he.matchedPoints[0]],Mt=We([Mt=De.points[he.matchedPoints[1]]],he={xScale:he.xScale,scale01:he.scale01,scale10:he.scale10,yScale:he.yScale,dx:0,dy:0})[0];he.dx=nt.x-Mt.x,he.dy=nt.y-Mt.y,Ye=We(De.points,he)}X.points=X.points.concat(Ye)}}return Wt(X.points)}(Ta.prototype=mo.prototype={searchTag:ta,binSearch:qo,getTable:function(R){var X=this.font.tables[this.tableName];return!X&&R?this.font.tables[this.tableName]=this.createDefaultTable():X},getScriptNames:function(){var R=this.getTable();return R?R.scripts.map(function(X){return X.tag}):[]},getDefaultScriptName:function(){var R=this.getTable();if(R){for(var X=!1,se=0;se<R.scripts.length;se++){var he=R.scripts[se].tag;if("DFLT"===he)return he;"latn"===he&&(X=!0)}return X?"latn":void 0}},getScriptTable:function(R,X){var se,he=this.getTable(X);if(he)return se=he.scripts,0<=(he=ta(he.scripts,R=R||"DFLT"))?se[he].script:X?(se.splice(-1-he,0,X={tag:R,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),X.script):void 0},getLangSysTable:function(De,X,se){var he;if(De=this.getScriptTable(De,se))return X&&"dflt"!==X&&"DFLT"!==X?0<=(he=ta(De.langSysRecords,X))?De.langSysRecords[he].langSys:se?(De.langSysRecords.splice(-1-he,0,se={tag:X,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),se.langSys):void 0:De.defaultLangSys},getFeatureTable:function(R,X,se,he){if(R=this.getLangSysTable(R,X,he)){for(var De,Ye=R.featureIndexes,nt=this.font.tables[this.tableName].features,Mt=0;Mt<Ye.length;Mt++)if((De=nt[Ye[Mt]]).tag===se)return De.feature;if(he)return z.assert(0===(X=nt.length)||se>=nt[X-1].tag,"Features must be added in alphabetical order."),nt.push(De={tag:se,feature:{params:0,lookupListIndexes:[]}}),Ye.push(X),De.feature}},getLookupTables:function(Ye,X,se,he,De){var nt=[];if(Ye=this.getFeatureTable(Ye,X,se,De)){for(var Mt,Qt=Ye.lookupListIndexes,Jt=this.font.tables[this.tableName].lookups,Mn=0;Mn<Qt.length;Mn++)(Mt=Jt[Qt[Mn]]).lookupType===he&&nt.push(Mt);if(0===nt.length&&De)return X=Jt.length,Jt.push(Mt={lookupType:he,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Qt.push(X),[Mt]}return nt},getGlyphClass:function(R,X){switch(R.format){case 1:return R.startGlyph<=X&&X<R.startGlyph+R.classes.length?R.classes[X-R.startGlyph]:0;case 2:var se=ua(R.ranges,X);return se?se.classId:0}},getCoverageIndex:function(R,X){switch(R.format){case 1:var se=qo(R.glyphs,X);return 0<=se?se:-1;case 2:return(se=ua(R.ranges,X))?se.index+X-se.start:-1}},expandCoverage:function(R){if(1===R.format)return R.glyphs;for(var X=[],se=R.ranges,he=0;he<se.length;he++)for(var De=se[he],nt=De.end,Mt=De.start;Mt<=nt;Mt++)X.push(Mt);return X}}).init=function(){var R=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(R)},Ta.prototype.getKerningValue=function(R,X,se){for(var he=0;he<R.length;he++)for(var De=R[he].subtables,Ye=0;Ye<De.length;Ye++){var nt=De[Ye],Mt=this.getCoverageIndex(nt.coverage,X);if(!(Mt<0))switch(nt.posFormat){case 1:for(var Qt=nt.pairSets[Mt],Jt=0;Jt<Qt.length;Jt++){var Mn=Qt[Jt];if(Mn.secondGlyph===se)return Mn.value1&&Mn.value1.xAdvance||0}break;case 2:var xe=this.getGlyphClass(nt.classDef1,X),Ne=this.getGlyphClass(nt.classDef2,se);return(xe=nt.classRecords[xe][Ne]).value1&&xe.value1.xAdvance||0}}return 0},Ta.prototype.getKerningTables=function(R,X){if(this.font.tables.gpos)return this.getLookupTables(R,X,"kern",2)},(To.prototype=mo.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},To.prototype.getSingle=function(R,X,se){for(var he=[],De=this.getLookupTables(X,se,R,1),Ye=0;Ye<De.length;Ye++)for(var nt=De[Ye].subtables,Mt=0;Mt<nt.length;Mt++){var Qt=nt[Mt],Jt=this.expandCoverage(Qt.coverage),Mn=void 0;if(1===Qt.substFormat){var Ne=Qt.deltaGlyphId;for(Mn=0;Mn<Jt.length;Mn++){var xe=Jt[Mn];he.push({sub:xe,by:xe+Ne})}}else{var Fe=Qt.substitute;for(Mn=0;Mn<Jt.length;Mn++)he.push({sub:Jt[Mn],by:Fe[Mn]})}}return he},To.prototype.getAlternates=function(R,X,se){for(var he=[],De=this.getLookupTables(X,se,R,3),Ye=0;Ye<De.length;Ye++)for(var nt=De[Ye].subtables,Mt=0;Mt<nt.length;Mt++)for(var Qt=nt[Mt],Jt=this.expandCoverage(Qt.coverage),Mn=Qt.alternateSets,Ne=0;Ne<Jt.length;Ne++)he.push({sub:Jt[Ne],by:Mn[Ne]});return he},To.prototype.getLigatures=function(R,X,se){for(var he=[],De=this.getLookupTables(X,se,R,4),Ye=0;Ye<De.length;Ye++)for(var nt=De[Ye].subtables,Mt=0;Mt<nt.length;Mt++)for(var Qt=nt[Mt],Jt=this.expandCoverage(Qt.coverage),Mn=Qt.ligatureSets,Ne=0;Ne<Jt.length;Ne++)for(var xe=Jt[Ne],Fe=Mn[Ne],Oe=0;Oe<Fe.length;Oe++){var dt=Fe[Oe];he.push({sub:[xe].concat(dt.components),by:dt.ligGlyph})}return he},To.prototype.addSingle=function(R,X,se,he){se=Ja(this.getLookupTables(se,he,R,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),z.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(R=this.binSearch(se.coverage.glyphs,he=X.sub))<0&&(se.coverage.glyphs.splice(R=-1-R,0,he),se.substitute.splice(R,0,0)),se.substitute[R]=X.by},To.prototype.addAlternate=function(R,X,se,he){se=Ja(this.getLookupTables(se,he,R,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),z.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(R=this.binSearch(se.coverage.glyphs,he=X.sub))<0&&(se.coverage.glyphs.splice(R=-1-R,0,he),se.alternateSets.splice(R,0,0)),se.alternateSets[R]=X.by},To.prototype.addLigature=function(Ye,Qt,Mt,De){(De=(Mt=this.getLookupTables(Mt,De,Ye,4,!0)[0]).subtables[0])||(Mt.subtables[0]=De={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),z.assert(1===De.coverage.format,"Ligature: unable to modify coverage table format "+De.coverage.format),Ye=Qt.sub[0];var nt=Qt.sub.slice(1);if(Mt={ligGlyph:Qt.by,components:nt},0<=(Qt=this.binSearch(De.coverage.glyphs,Ye))){for(var Jt=De.ligatureSets[Qt],Mn=0;Mn<Jt.length;Mn++)if(function(Ne,xe){var Fe=Ne.length;if(Fe===xe.length){for(var Oe=0;Oe<Fe;Oe++)if(Ne[Oe]!==xe[Oe])return;return 1}}(Jt[Mn].components,nt))return;Jt.push(Mt)}else De.coverage.glyphs.splice(Qt=-1-Qt,0,Ye),De.ligatureSets.splice(Qt,0,[Mt])},To.prototype.getFeature=function(R,X,se){if(/ss\d\d/.test(R))return this.getSingle(R,X,se);switch(R){case"aalt":case"salt":return this.getSingle(R,X,se).concat(this.getAlternates(R,X,se));case"dlig":case"liga":case"rlig":return this.getLigatures(R,X,se)}},To.prototype.add=function(R,X,se,he){if(/ss\d\d/.test(R))return this.addSingle(R,X,se,he);switch(R){case"aalt":case"salt":return"number"==typeof X.by?this.addSingle(R,X,se,he):this.addAlternate(R,X,se,he);case"dlig":case"liga":case"rlig":return this.addLigature(R,X,se,he)}};var fs={getPath:Wt,parse:function(R,X,se,he){for(var De=new Tn.GlyphSet(he),Ye=0;Ye<se.length-1;Ye+=1){var nt=se[Ye];De.push(Ye,nt!==se[Ye+1]?Tn.ttfGlyphLoader(he,Ye,Vt,R,X+nt,Ln):Tn.glyphLoader(he,Ye))}return De}};function qs(R){this.font=R,this.getCommands=function(X){return fs.getPath(X).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function na(R){return R}function Ga(R){return Math.sign(R)*Math.round(Math.abs(R))}function Ma(R){return Math.sign(R)*Math.round(Math.abs(2*R))/2}function Ko(R){return Math.sign(R)*(Math.round(Math.abs(R)+.5)-.5)}function ka(R){return Math.sign(R)*Math.ceil(Math.abs(R))}function Qa(R){return Math.sign(R)*Math.floor(Math.abs(R))}function Bl(R){var X=this.srPeriod,se=this.srPhase,he=1;return R<0&&(R=-R,he=-1),R+=this.srThreshold-se,R=Math.trunc(R/X)*X,(R+=se)<0?se*he:R*he}var Ro={x:1,y:0,axis:"x",distance:function(R,X,se,he){return(se?R.xo:R.x)-(he?X.xo:X.x)},interpolate:function(R,X,se,he){var De,Ye,nt,Mt,Qt,Jt,Mn;if(!he||he===this)return De=R.xo-X.xo,Ye=R.xo-se.xo,Qt=X.x-X.xo,Jt=se.x-se.xo,0===(Mn=(nt=Math.abs(De))+(Mt=Math.abs(Ye)))?void(R.x=R.xo+(Qt+Jt)/2):void(R.x=R.xo+(Qt*Mt+Jt*nt)/Mn);De=he.distance(R,X,!0,!0),Ye=he.distance(R,se,!0,!0),Qt=he.distance(X,X,!1,!0),Jt=he.distance(se,se,!1,!0),0===(Mn=(nt=Math.abs(De))+(Mt=Math.abs(Ye)))?Ro.setRelative(R,R,(Qt+Jt)/2,he,!0):Ro.setRelative(R,R,(Qt*Mt+Jt*nt)/Mn,he,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(R,X,se,he,De){var Ye,nt;he&&he!==this?(Ye=De?X.xo:X.x,nt=De?X.yo:X.y,R.x=(Ye+=se*he.x)+(R.y-(nt+=se*he.y))/he.normalSlope):R.x=(De?X.xo:X.x)+se},slope:0,touch:function(R){R.xTouched=!0},touched:function(R){return R.xTouched},untouch:function(R){R.xTouched=!1}},Vo={x:0,y:1,axis:"y",distance:function(R,X,se,he){return(se?R.yo:R.y)-(he?X.yo:X.y)},interpolate:function(R,X,se,he){var De,Ye,nt,Mt,Qt,Jt,Mn;if(!he||he===this)return De=R.yo-X.yo,Ye=R.yo-se.yo,Qt=X.y-X.yo,Jt=se.y-se.yo,0===(Mn=(nt=Math.abs(De))+(Mt=Math.abs(Ye)))?void(R.y=R.yo+(Qt+Jt)/2):void(R.y=R.yo+(Qt*Mt+Jt*nt)/Mn);De=he.distance(R,X,!0,!0),Ye=he.distance(R,se,!0,!0),Qt=he.distance(X,X,!1,!0),Jt=he.distance(se,se,!1,!0),0===(Mn=(nt=Math.abs(De))+(Mt=Math.abs(Ye)))?Vo.setRelative(R,R,(Qt+Jt)/2,he,!0):Vo.setRelative(R,R,(Qt*Mt+Jt*nt)/Mn,he,!0)},normalSlope:0,setRelative:function(R,X,se,he,De){var Ye,nt;he&&he!==this?(Ye=De?X.xo:X.x,nt=De?X.yo:X.y,R.y=(nt+=se*he.y)+he.normalSlope*(R.x-(Ye+=se*he.x))):R.y=(De?X.yo:X.y)+se},slope:Number.POSITIVE_INFINITY,touch:function(R){R.yTouched=!0},touched:function(R){return R.yTouched},untouch:function(R){R.yTouched=!1}};function oo(R,X){this.x=R,this.y=X,this.axis=void 0,this.slope=X/R,this.normalSlope=-R/X,Object.freeze(this)}function jo(R,X){var se=Math.sqrt(R*R+X*X);return X/=se,1==(R/=se)&&0===X?Ro:0===R&&1===X?Vo:new oo(R,X)}function ct(R,X,se,he){this.x=this.xo=Math.round(64*R)/64,this.y=this.yo=Math.round(64*X)/64,this.lastPointOfContour=se,this.onCurve=he,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ro),Object.freeze(Vo),oo.prototype.distance=function(R,X,se,he){return this.x*Ro.distance(R,X,se,he)+this.y*Vo.distance(R,X,se,he)},oo.prototype.interpolate=function(R,De,Ye,he){var nt=he.distance(R,De,!0,!0),Mt=he.distance(R,Ye,!0,!0),Qt=(De=he.distance(De,De,!1,!0),Ye=he.distance(Ye,Ye,!1,!0),(nt=Math.abs(nt))+(Mt=Math.abs(Mt)));this.setRelative(R,R,0===Qt?(De+Ye)/2:(De*Mt+Ye*nt)/Qt,he,!0)},oo.prototype.setRelative=function(R,Ye,Qt,Jt,Mt){var nt=Mt?Ye.xo:Ye.x,Mn=(Mt=Mt?Ye.yo:Ye.y,Ye=nt+Qt*(Jt=Jt||this).x,nt=Mt+Qt*Jt.y,Mt=Jt.normalSlope,R.y);R.x=((Qt=this.slope)*(Jt=R.x)-Mt*Ye+nt-Mn)/(Qt-Mt),R.y=Qt*(R.x-Jt)+Mn},oo.prototype.touch=function(R){R.xTouched=!0,R.yTouched=!0},ct.prototype.nextTouched=function(R){for(var X=this.nextPointOnContour;!R.touched(X)&&X!==this;)X=X.nextPointOnContour;return X},ct.prototype.prevTouched=function(R){for(var X=this.prevPointOnContour;!R.touched(X)&&X!==this;)X=X.prevPointOnContour;return X};var Ot=Object.freeze(new ct(0,0)),pn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function xn(R,X){switch(this.env=R,this.stack=[],this.prog=X,R){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ro,this.round=Ga}}function Nn(R){for(var X=R.tZone=new Array(R.gZone.length),se=0;se<X.length;se++)X[se]=new ct(0,0)}function jn(R,X){var se,he=R.prog,De=R.ip,Ye=1;do{if(88===(se=he[++De]))Ye++;else if(89===se)Ye--;else if(64===se)De+=he[De+1]+1;else if(65===se)De+=2*he[De+1]+1;else if(176<=se&&se<=183)De+=se-176+1;else if(184<=se&&se<=191)De+=2*(se-184+1);else if(X&&1===Ye&&27===se)break}while(0<Ye);R.ip=De}function hr(R,X){w.DEBUG&&console.log(X.step,"SVTCA["+R.axis+"]"),X.fv=X.pv=X.dpv=R}function _r(R,X){w.DEBUG&&console.log(X.step,"SPVTCA["+R.axis+"]"),X.pv=X.dpv=R}function Mr(R,X){w.DEBUG&&console.log(X.step,"SFVTCA["+R.axis+"]"),X.fv=R}function Or(R,X){var se,he=(De=X.stack).pop(),De=De.pop(),Ye=X.z2[he],nt=X.z1[De];w.DEBUG&&console.log("SPVTL["+R+"]",he,De),he=R?(se=Ye.y-nt.y,nt.x-Ye.x):(se=nt.x-Ye.x,nt.y-Ye.y),X.pv=X.dpv=jo(se,he)}function si(R,X){var se,he=(De=X.stack).pop(),De=De.pop(),Ye=X.z2[he],nt=X.z1[De];w.DEBUG&&console.log("SFVTL["+R+"]",he,De),he=R?(se=Ye.y-nt.y,nt.x-Ye.x):(se=nt.x-Ye.x,nt.y-Ye.y),X.fv=jo(se,he)}function Qr(R){w.DEBUG&&console.log(R.step,"POP[]"),R.stack.pop()}function yi(R,X){var se=X.stack.pop(),he=X.z0[se],De=X.fv,Ye=X.pv,nt=(w.DEBUG&&console.log(X.step,"MDAP["+R+"]",se),Ye.distance(he,Ot));R&&(nt=X.round(nt)),De.setRelative(he,Ot,nt,Ye),De.touch(he),X.rp0=X.rp1=se}function Si(R,X){var se,he,De,Ye=X.z2,nt=Ye.length-2;w.DEBUG&&console.log(X.step,"IUP["+R.axis+"]");for(var Mt=0;Mt<nt;Mt++)R.touched(se=Ye[Mt])||(he=se.prevTouched(R))!==se&&(he===(De=se.nextTouched(R))&&R.setRelative(se,se,R.distance(he,he,!1,!0),R,!0),R.interpolate(se,he,De,R))}function Vi(R,X){for(var se=X.stack,De=(R?X.z0:X.z1)[R?X.rp1:X.rp2],Ye=X.fv,nt=X.pv,Mt=X.loop,Qt=X.z2;Mt--;){var Jt=se.pop(),Mn=Qt[Jt],Ne=nt.distance(De,De,!1,!0);Ye.setRelative(Mn,Mn,Ne,nt),Ye.touch(Mn),w.DEBUG&&console.log(X.step,(1<X.loop?"loop "+(X.loop-Mt)+": ":"")+"SHP["+(R?"rp1":"rp2")+"]",Jt)}X.loop=1}function ns(R,X){for(var he=(R?X.z0:X.z1)[R?X.rp1:X.rp2],De=X.fv,Ye=X.pv,nt=X.stack.pop(),Mt=X.z2[X.contours[nt]],Qt=Mt,Jt=(w.DEBUG&&console.log(X.step,"SHC["+R+"]",nt),Ye.distance(he,he,!1,!0));Qt!==he&&De.setRelative(Qt,Qt,Jt,Ye),(Qt=Qt.nextPointOnContour)!==Mt;);}function Ms(R,X){var se,he,De=(R?X.z0:X.z1)[De=R?X.rp1:X.rp2],Ye=X.fv,nt=X.pv,Mt=(Mt=X.stack).pop();switch(w.DEBUG&&console.log(X.step,"SHZ["+R+"]",Mt),Mt){case 0:se=X.tZone;break;case 1:se=X.gZone;break;default:throw new Error("Invalid zone")}for(var Qt=nt.distance(De,De,!1,!0),Jt=se.length-2,Mn=0;Mn<Jt;Mn++)Ye.setRelative(he=se[Mn],he,Qt,nt)}function qi(R,X){var se=(he=X.stack).pop()/64,he=he.pop(),De=X.z1[he],nt=X.fv;nt.setRelative(De,X.z0[X.rp0],se,X.pv),nt.touch(De),w.DEBUG&&console.log(X.step,"MSIRP["+R+"]",se,he),X.rp1=X.rp0,X.rp2=he,R&&(X.rp0=he)}function Js(R,X){var Mt=(se=X.stack).pop(),se=se.pop(),he=X.z0[se],De=X.fv,Ye=X.pv,nt=X.cvt[Mt];w.DEBUG&&console.log(X.step,"MIAP["+R+"]",Mt,"(",nt,")",se),Mt=Ye.distance(he,Ot),R&&(Math.abs(Mt-nt)<X.cvCutIn&&(Mt=nt),Mt=X.round(Mt)),De.setRelative(he,Ot,Mt,Ye),0===X.zp0&&(he.xo=he.x,he.yo=he.y),De.touch(he),X.rp0=X.rp1=se}function Vr(R,X){var se=X.stack,he=se.pop(),De=X.z2[he];w.DEBUG&&console.log(X.step,"GC["+R+"]",he),se.push(64*X.dpv.distance(De,Ot,R,!1))}function da(R,X){var se=(he=X.stack).pop(),he=he.pop(),Ye=X.dpv.distance(Ye=X.z0[he],X.z1[se],R,R);w.DEBUG&&console.log(X.step,"MD["+R+"]",se,he,"->",Ye),X.stack.push(Math.round(64*Ye))}function Na(R,X){var se=X.stack,he=se.pop(),De=X.fv,Ye=X.pv,nt=X.ppem,Mt=X.deltaBase+16*(R-1),Qt=X.deltaShift,Jt=X.z0;w.DEBUG&&console.log(X.step,"DELTAP["+R+"]",he,se);for(var Mn=0;Mn<he;Mn++){var Ne=se.pop(),xe=se.pop();Mt+((240&xe)>>4)===nt&&(0<=(xe=(15&xe)-8)&&xe++,w.DEBUG&&console.log(X.step,"DELTAPFIX",Ne,"by",xe*Qt),De.setRelative(Ne=Jt[Ne],Ne,xe*Qt,Ye))}}function uo(R,X){var se=X.stack,he=se.pop();w.DEBUG&&console.log(X.step,"ROUND[]"),se.push(64*X.round(he/64))}function El(R,X){var se=X.stack,he=se.pop(),De=X.ppem,Ye=X.deltaBase+16*(R-1),nt=X.deltaShift;w.DEBUG&&console.log(X.step,"DELTAC["+R+"]",he,se);for(var Mt=0;Mt<he;Mt++){var Qt=se.pop(),Jt=se.pop();Ye+((240&Jt)>>4)===De&&(0<=(Jt=(15&Jt)-8)&&Jt++,Jt*=nt,w.DEBUG&&console.log(X.step,"DELTACFIX",Qt,"by",Jt),X.cvt[Qt]+=Jt)}}function bc(R,X){var se,he=(De=X.stack).pop(),De=De.pop(),Ye=X.z2[he],nt=X.z1[De];w.DEBUG&&console.log(X.step,"SDPVTL["+R+"]",he,De),he=R?(se=Ye.y-nt.y,nt.x-Ye.x):(se=nt.x-Ye.x,nt.y-Ye.y),X.dpv=jo(se,he)}function ha(R,X){var se=X.stack,he=X.prog,De=X.ip;w.DEBUG&&console.log(X.step,"PUSHB["+R+"]");for(var Ye=0;Ye<R;Ye++)se.push(he[++De]);X.ip=De}function go(R,X){var se=X.ip,he=X.prog,De=X.stack;w.DEBUG&&console.log(X.ip,"PUSHW["+R+"]");for(var Ye=0;Ye<R;Ye++){var nt=he[++se]<<8|he[++se];32768&nt&&(nt=-(1+(65535^nt))),De.push(nt)}X.ip=se}function fi(R,X,se,he,De,Ye){var nt,Mt,Mn,Jt=Ye.stack,Qt=R&&Jt.pop(),Ne=(Jt=Jt.pop(),Ye.z1[Jt]),xe=Ye.minDis,Fe=Ye.fv,Oe=Ye.dpv,dt=nt=Oe.distance(Ne,Mn=Ye.z0[Mn=Ye.rp0],!0,!0),an=0<=dt?1:-1;dt=Math.abs(dt),R&&(Mt=Ye.cvt[Qt],he&&Math.abs(dt-Mt)<Ye.cvCutIn&&(dt=Mt)),se&&dt<xe&&(dt=xe),he&&(dt=Ye.round(dt)),Fe.setRelative(Ne,Mn,an*dt,Oe),Fe.touch(Ne),w.DEBUG&&console.log(Ye.step,(R?"MIRP[":"MDRP[")+(X?"M":"m")+(se?">":"_")+(he?"R":"_")+(0===De?"Gr":1===De?"Bl":2===De?"Wh":"")+"]",R?Qt+"("+Ye.cvt[Qt]+","+Mt+")":"",Jt,"(d =",nt,"->",an*dt,")"),Ye.rp1=Ye.rp0,Ye.rp2=Jt,X&&(Ye.rp0=Jt)}qs.prototype.exec=function(R,X){if("number"!=typeof X)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var se=this.font,he=this._prepState;if(!he||he.ppem!==X){var De=this._fpgmState;if(!De){xn.prototype=pn,(De=this._fpgmState=new xn("fpgm",se.tables.fpgm)).funcs=[],De.font=se,w.DEBUG&&(console.log("---EXEC FPGM---"),De.step=-1);try{Aa(De)}catch(Jt){return console.log("Hinting error in FPGM:"+Jt),void(this._errorState=3)}}xn.prototype=De,(he=this._prepState=new xn("prep",se.tables.prep)).ppem=X;var Ye=se.tables.cvt;if(Ye)for(var nt=he.cvt=new Array(Ye.length),Mt=X/se.unitsPerEm,Qt=0;Qt<Ye.length;Qt++)nt[Qt]=Ye[Qt]*Mt;else he.cvt=[];w.DEBUG&&(console.log("---EXEC PREP---"),he.step=-1);try{Aa(he)}catch(Jt){this._errorState<2&&console.log("Hinting error in PREP:"+Jt),this._errorState=2}}if(!(1<this._errorState))try{return el(R,he)}catch(Jt){this._errorState<1&&(console.log("Hinting error:"+Jt),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var el=function(R,X){var se=X.ppem/X.font.unitsPerEm,he=se,De=R.components;if(xn.prototype=X,De){for(var Ye=X.font,nt=[],Mt=[],Qt=0;Qt<De.length;Qt++){var Jt=De[Qt],Mn=Ye.glyphs.get(Jt.glyphIndex),Ne=new xn("glyf",Mn.instructions);w.DEBUG&&(console.log("---EXEC COMP "+Qt+"---"),Ne.step=-1),al(Mn,Ne,se,he);for(var xe=Math.round(Jt.dx*se),Fe=Math.round(Jt.dy*he),Oe=Ne.gZone,dt=Ne.contours,an=0;an<Oe.length;an++){var Dn=Oe[an];Dn.xTouched=Dn.yTouched=!1,Dn.xo=Dn.x=Dn.x+xe,Dn.yo=Dn.y=Dn.y+Fe}var Gn=nt.length;nt.push.apply(nt,Oe);for(var ai=0;ai<dt.length;ai++)Mt.push(dt[ai]+Gn)}R.instructions&&!Ne.inhibitGridFit&&((Ne=new xn("glyf",R.instructions)).gZone=Ne.z0=Ne.z1=Ne.z2=nt,Ne.contours=Mt,nt.push(new ct(0,0),new ct(Math.round(R.advanceWidth*se),0)),w.DEBUG&&(console.log("---EXEC COMPOSITE---"),Ne.step=-1),Aa(Ne),nt.length-=2)}else Ne=new xn("glyf",R.instructions),w.DEBUG&&(console.log("---EXEC GLYPH---"),Ne.step=-1),al(R,Ne,se,he),nt=Ne.gZone;return nt},al=function(R,X,se,he){for(var De,Ye,Mt=R.points||[],Qt=Mt.length,Jt=X.gZone=X.z0=X.z1=X.z2=[],Mn=X.contours=[],Ne=0;Ne<Qt;Ne++)Jt[Ne]=new ct((De=Mt[Ne]).x*se,De.y*he,De.lastPointOfContour,De.onCurve);for(var xe=0;xe<Qt;xe++)De=Jt[xe],Ye||(Ye=De,Mn.push(xe)),De.lastPointOfContour?((De.nextPointOnContour=Ye).prevPointOnContour=De,Ye=void 0):(De.nextPointOnContour=Jt[xe+1]).prevPointOnContour=De;if(!X.inhibitGridFit){if(w.DEBUG){console.log("PROCESSING GLYPH",X.stack);for(var Fe=0;Fe<Qt;Fe++)console.log(Fe,Jt[Fe].x,Jt[Fe].y)}if(Jt.push(new ct(0,0),new ct(Math.round(R.advanceWidth*se),0)),Aa(X),Jt.length-=2,w.DEBUG){console.log("FINISHED GLYPH",X.stack);for(var Oe=0;Oe<Qt;Oe++)console.log(Oe,Jt[Oe].x,Jt[Oe].y)}}},Aa=function(R){var X=R.prog;if(X){var se,he=X.length;for(R.ip=0;R.ip<he;R.ip++){if(w.DEBUG&&R.step++,!(se=za[X[R.ip]]))throw new Error("unknown instruction: 0x"+Number(X[R.ip]).toString(16));se(R)}}},za=[hr.bind(void 0,Vo),hr.bind(void 0,Ro),_r.bind(void 0,Vo),_r.bind(void 0,Ro),Mr.bind(void 0,Vo),Mr.bind(void 0,Ro),Or.bind(void 0,0),Or.bind(void 0,1),si.bind(void 0,0),si.bind(void 0,1),function(R){var X=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",X,se),R.pv=R.dpv=jo(se,X)},function(R){var X=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",X,se),R.fv=jo(se,X)},function(R){var X=R.stack,se=R.pv;w.DEBUG&&console.log(R.step,"GPV[]"),X.push(16384*se.x),X.push(16384*se.y)},function(R){var X=R.stack,se=R.fv;w.DEBUG&&console.log(R.step,"GFV[]"),X.push(16384*se.x),X.push(16384*se.y)},function(R){R.fv=R.pv,w.DEBUG&&console.log(R.step,"SFVTPV[]")},function(X){var se=(nt=X.stack).pop(),he=nt.pop(),De=nt.pop(),Ye=nt.pop(),nt=nt.pop(),Mt=(Qt=X.z0)[se],Qt=Qt[he],Jt=(Mn=X.z1)[De],Mn=Mn[Ye],Ne=(X=X.z2[nt],w.DEBUG&&console.log("ISECT[], ",se,he,De,Ye,nt),se=Mt.x,he=Mt.y,Mt=Jt.y,se*(Ye=Qt.y)-he*(De=Qt.x)),xe=(nt=Jt.x)*(Jt=Mn.y)-Mt*(Qt=Mn.x);X.x=(Ne*(nt-Qt)-xe*(se-De))/(Mn=(se-De)*(Mt-Jt)-(he-Ye)*(nt-Qt)),X.y=(Ne*(Mt-Jt)-xe*(he-Ye))/Mn},function(R){R.rp0=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP0[]",R.rp0)},function(R){R.rp1=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP1[]",R.rp1)},function(R){R.rp2=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP2[]",R.rp2)},function(R){var X=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP0[]",X),R.zp0=X){case 0:R.tZone||Nn(R),R.z0=R.tZone;break;case 1:R.z0=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var X=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP1[]",X),R.zp1=X){case 0:R.tZone||Nn(R),R.z1=R.tZone;break;case 1:R.z1=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var X=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP2[]",X),R.zp2=X){case 0:R.tZone||Nn(R),R.z2=R.tZone;break;case 1:R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var X=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZPS[]",X),R.zp0=R.zp1=R.zp2=X){case 0:R.tZone||Nn(R),R.z0=R.z1=R.z2=R.tZone;break;case 1:R.z0=R.z1=R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){R.loop=R.stack.pop(),w.DEBUG&&console.log(R.step,"SLOOP[]",R.loop)},function(R){w.DEBUG&&console.log(R.step,"RTG[]"),R.round=Ga},function(R){w.DEBUG&&console.log(R.step,"RTHG[]"),R.round=Ko},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SMD[]",X),R.minDis=X/64},function(R){w.DEBUG&&console.log(R.step,"ELSE[]"),jn(R,!1)},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"JMPR[]",X),R.ip+=X-1},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SCVTCI[]",X),R.cvCutIn=X/64},void 0,void 0,function(R){var X=R.stack;w.DEBUG&&console.log(R.step,"DUP[]"),X.push(X[X.length-1])},Qr,function(R){w.DEBUG&&console.log(R.step,"CLEAR[]"),R.stack.length=0},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"SWAP[]"),X.push(se),X.push(he)},function(R){var X=R.stack;w.DEBUG&&console.log(R.step,"DEPTH[]"),X.push(X.length)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"CINDEX[]",se),X.push(X[X.length-se])},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"MINDEX[]",se),X.push(X.splice(X.length-se,1)[0])},void 0,void 0,void 0,function(R){var X=(he=R.stack).pop(),se=he.pop(),he=(w.DEBUG&&console.log(R.step,"LOOPCALL[]",X,se),R.ip),De=R.prog;R.prog=R.funcs[X];for(var Ye=0;Ye<se;Ye++)Aa(R),w.DEBUG&&console.log(++R.step,Ye+1<se?"next loopcall":"done loopcall",Ye);R.ip=he,R.prog=De},function(R){var X=R.stack.pop(),se=(w.DEBUG&&console.log(R.step,"CALL[]",X),R.ip),he=R.prog;R.prog=R.funcs[X],Aa(R),R.ip=se,R.prog=he,w.DEBUG&&console.log(++R.step,"returning from",X)},function(R){if("fpgm"!==R.env)throw new Error("FDEF not allowed here");var X=R.prog,se=R.ip,he=(he=R.stack).pop(),De=se;for(w.DEBUG&&console.log(R.step,"FDEF[]",he);45!==X[++se];);R.ip=se,R.funcs[he]=X.slice(De+1,se)},void 0,yi.bind(void 0,0),yi.bind(void 0,1),Si.bind(void 0,Vo),Si.bind(void 0,Ro),Vi.bind(void 0,0),Vi.bind(void 0,1),ns.bind(void 0,0),ns.bind(void 0,1),Ms.bind(void 0,0),Ms.bind(void 0,1),function(R){for(var X=R.stack,se=R.loop,he=R.fv,De=X.pop()/64,Ye=R.z2;se--;){var nt=X.pop(),Mt=Ye[nt];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-se)+": ":"")+"SHPIX[]",nt,De),he.setRelative(Mt,Mt,De),he.touch(Mt)}R.loop=1},function(R){for(var X=R.stack,se=R.rp1,he=R.rp2,De=R.loop,Ye=R.z0[se],nt=R.z1[he],Mt=R.fv,Qt=R.dpv,Jt=R.z2;De--;){var Mn=X.pop(),Ne=Jt[Mn];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-De)+": ":"")+"IP[]",Mn,se,"<->",he),Mt.interpolate(Ne,Ye,nt,Qt),Mt.touch(Ne)}R.loop=1},qi.bind(void 0,0),qi.bind(void 0,1),function(R){for(var X=R.stack,he=R.z0[R.rp0],De=R.loop,Ye=R.fv,nt=R.pv,Mt=R.z1;De--;){var Qt=X.pop(),Jt=Mt[Qt];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-De)+": ":"")+"ALIGNRP[]",Qt),Ye.setRelative(Jt,he,0,nt),Ye.touch(Jt)}R.loop=1},function(R){w.DEBUG&&console.log(R.step,"RTDG[]"),R.round=Ma},Js.bind(void 0,0),Js.bind(void 0,1),function(R){var X=R.prog,se=R.ip,he=R.stack,De=X[++se];w.DEBUG&&console.log(R.step,"NPUSHB[]",De);for(var Ye=0;Ye<De;Ye++)he.push(X[++se]);R.ip=se},function(R){var X=R.ip,se=R.prog,he=R.stack,De=se[++X];w.DEBUG&&console.log(R.step,"NPUSHW[]",De);for(var Ye=0;Ye<De;Ye++){var nt=se[++X]<<8|se[++X];32768&nt&&(nt=-(1+(65535^nt))),he.push(nt)}R.ip=X},function(R){var he=R.stack,X=(X=R.store)||(R.store=[]),se=he.pop();he=he.pop(),w.DEBUG&&console.log(R.step,"WS",se,he),X[he]=se},function(De){var X=De.stack,se=De.store,he=X.pop();w.DEBUG&&console.log(De.step,"RS",he),X.push(De=se&&se[he]||0)},function(R){var X=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"WCVTP",X,se),R.cvt[se]=X/64},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"RCVT",se),X.push(64*R.cvt[se])},Vr.bind(void 0,0),Vr.bind(void 0,1),void 0,da.bind(void 0,0),da.bind(void 0,1),function(R){w.DEBUG&&console.log(R.step,"MPPEM[]"),R.stack.push(R.ppem)},void 0,function(R){w.DEBUG&&console.log(R.step,"FLIPON[]"),R.autoFlip=!0},void 0,void 0,function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"LT[]",se,he),X.push(he<se?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"LTEQ[]",se,he),X.push(he<=se?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"GT[]",se,he),X.push(se<he?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"GTEQ[]",se,he),X.push(se<=he?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"EQ[]",se,he),X.push(se===he?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"NEQ[]",se,he),X.push(se!==he?1:0)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"ODD[]",se),X.push(Math.trunc(se)%2?1:0)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"EVEN[]",se),X.push(Math.trunc(se)%2?0:1)},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"IF[]",X),X||(jn(R,!0),w.DEBUG&&console.log(R.step,"EIF[]"))},function(R){w.DEBUG&&console.log(R.step,"EIF[]")},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"AND[]",se,he),X.push(se&&he?1:0)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"OR[]",se,he),X.push(se||he?1:0)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"NOT[]",se),X.push(se?0:1)},Na.bind(void 0,1),function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SDB[]",X),R.deltaBase=X},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SDS[]",X),R.deltaShift=Math.pow(.5,X)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"ADD[]",se,he),X.push(he+se)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"SUB[]",se,he),X.push(he-se)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"DIV[]",se,he),X.push(64*he/se)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"MUL[]",se,he),X.push(he*se/64)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"ABS[]",se),X.push(Math.abs(se))},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"NEG[]",se),X.push(-se)},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"FLOOR[]",se),X.push(64*Math.floor(se/64))},function(R){var X=R.stack,se=X.pop();w.DEBUG&&console.log(R.step,"CEILING[]",se),X.push(64*Math.ceil(se/64))},uo.bind(void 0,0),uo.bind(void 0,1),uo.bind(void 0,2),uo.bind(void 0,3),void 0,void 0,void 0,void 0,function(R){var X=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"WCVTF[]",X,se),R.cvt[se]=X*R.ppem/R.font.unitsPerEm},Na.bind(void 0,2),Na.bind(void 0,3),El.bind(void 0,1),El.bind(void 0,2),El.bind(void 0,3),function(R){var X,se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SROUND[]",se),R.round=Bl,192&se){case 0:X=.5;break;case 64:X=1;break;case 128:X=2;break;default:throw new Error("invalid SROUND value")}switch(R.srPeriod=X,48&se){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*X;break;case 32:R.srPhase=.5*X;break;case 48:R.srPhase=.75*X;break;default:throw new Error("invalid SROUND value")}R.srThreshold=0==(se&=15)?0:(se/8-.5)*X},function(R){var X,se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"S45ROUND[]",se),R.round=Bl,192&se){case 0:X=Math.sqrt(2)/2;break;case 64:X=Math.sqrt(2);break;case 128:X=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(R.srPeriod=X,48&se){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*X;break;case 32:R.srPhase=.5*X;break;case 48:R.srPhase=.75*X;break;default:throw new Error("invalid S45ROUND value")}R.srThreshold=0==(se&=15)?0:(se/8-.5)*X},void 0,void 0,function(R){w.DEBUG&&console.log(R.step,"ROFF[]"),R.round=na},void 0,function(R){w.DEBUG&&console.log(R.step,"RUTG[]"),R.round=ka},function(R){w.DEBUG&&console.log(R.step,"RDTG[]"),R.round=Qa},Qr,Qr,void 0,void 0,void 0,void 0,void 0,function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANCTRL[]",X)},bc.bind(void 0,0),bc.bind(void 0,1),function(R){var X=R.stack,se=X.pop(),he=0;w.DEBUG&&console.log(R.step,"GETINFO[]",se),1&se&&(he=35),32&se&&(he|=4096),X.push(he)},void 0,function(R){var X=R.stack,se=X.pop(),he=X.pop(),De=X.pop();w.DEBUG&&console.log(R.step,"ROLL[]"),X.push(he),X.push(se),X.push(De)},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"MAX[]",se,he),X.push(Math.max(he,se))},function(R){var X=R.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(R.step,"MIN[]",se,he),X.push(Math.min(he,se))},function(R){var X=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANTYPE[]",X)},function(R){var X=R.stack.pop(),se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"INSTCTRL[]",X,se),X){case 1:return void(R.inhibitGridFit=!!se);case 2:return void(R.ignoreCvt=!!se);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ha.bind(void 0,1),ha.bind(void 0,2),ha.bind(void 0,3),ha.bind(void 0,4),ha.bind(void 0,5),ha.bind(void 0,6),ha.bind(void 0,7),ha.bind(void 0,8),go.bind(void 0,1),go.bind(void 0,2),go.bind(void 0,3),go.bind(void 0,4),go.bind(void 0,5),go.bind(void 0,6),go.bind(void 0,7),go.bind(void 0,8),fi.bind(void 0,0,0,0,0,0),fi.bind(void 0,0,0,0,0,1),fi.bind(void 0,0,0,0,0,2),fi.bind(void 0,0,0,0,0,3),fi.bind(void 0,0,0,0,1,0),fi.bind(void 0,0,0,0,1,1),fi.bind(void 0,0,0,0,1,2),fi.bind(void 0,0,0,0,1,3),fi.bind(void 0,0,0,1,0,0),fi.bind(void 0,0,0,1,0,1),fi.bind(void 0,0,0,1,0,2),fi.bind(void 0,0,0,1,0,3),fi.bind(void 0,0,0,1,1,0),fi.bind(void 0,0,0,1,1,1),fi.bind(void 0,0,0,1,1,2),fi.bind(void 0,0,0,1,1,3),fi.bind(void 0,0,1,0,0,0),fi.bind(void 0,0,1,0,0,1),fi.bind(void 0,0,1,0,0,2),fi.bind(void 0,0,1,0,0,3),fi.bind(void 0,0,1,0,1,0),fi.bind(void 0,0,1,0,1,1),fi.bind(void 0,0,1,0,1,2),fi.bind(void 0,0,1,0,1,3),fi.bind(void 0,0,1,1,0,0),fi.bind(void 0,0,1,1,0,1),fi.bind(void 0,0,1,1,0,2),fi.bind(void 0,0,1,1,0,3),fi.bind(void 0,0,1,1,1,0),fi.bind(void 0,0,1,1,1,1),fi.bind(void 0,0,1,1,1,2),fi.bind(void 0,0,1,1,1,3),fi.bind(void 0,1,0,0,0,0),fi.bind(void 0,1,0,0,0,1),fi.bind(void 0,1,0,0,0,2),fi.bind(void 0,1,0,0,0,3),fi.bind(void 0,1,0,0,1,0),fi.bind(void 0,1,0,0,1,1),fi.bind(void 0,1,0,0,1,2),fi.bind(void 0,1,0,0,1,3),fi.bind(void 0,1,0,1,0,0),fi.bind(void 0,1,0,1,0,1),fi.bind(void 0,1,0,1,0,2),fi.bind(void 0,1,0,1,0,3),fi.bind(void 0,1,0,1,1,0),fi.bind(void 0,1,0,1,1,1),fi.bind(void 0,1,0,1,1,2),fi.bind(void 0,1,0,1,1,3),fi.bind(void 0,1,1,0,0,0),fi.bind(void 0,1,1,0,0,1),fi.bind(void 0,1,1,0,0,2),fi.bind(void 0,1,1,0,0,3),fi.bind(void 0,1,1,0,1,0),fi.bind(void 0,1,1,0,1,1),fi.bind(void 0,1,1,0,1,2),fi.bind(void 0,1,1,0,1,3),fi.bind(void 0,1,1,1,0,0),fi.bind(void 0,1,1,1,0,1),fi.bind(void 0,1,1,1,0,2),fi.bind(void 0,1,1,1,0,3),fi.bind(void 0,1,1,1,1,0),fi.bind(void 0,1,1,1,1,1),fi.bind(void 0,1,1,1,1,2),fi.bind(void 0,1,1,1,1,3)],ml=Array.from||function(R){return R.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Rs(R){(R=R||{}).empty||(ke(R.familyName,"When creating a new Font object, familyName is required."),ke(R.styleName,"When creating a new Font object, styleName is required."),ke(R.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ke(R.ascender,"When creating a new Font object, ascender is required."),ke(R.descender,"When creating a new Font object, descender is required."),ke(R.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:R.familyName||" "},fontSubfamily:{en:R.styleName||" "},fullName:{en:R.fullName||R.familyName+" "+R.styleName},postScriptName:{en:R.postScriptName||(R.familyName+R.styleName).replace(/\s/g,"")},designer:{en:R.designer||" "},designerURL:{en:R.designerURL||" "},manufacturer:{en:R.manufacturer||" "},manufacturerURL:{en:R.manufacturerURL||" "},license:{en:R.license||" "},licenseURL:{en:R.licenseURL||" "},version:{en:R.version||"Version 0.1"},description:{en:R.description||" "},copyright:{en:R.copyright||" "},trademark:{en:R.trademark||" "}},this.unitsPerEm=R.unitsPerEm||1e3,this.ascender=R.ascender,this.descender=R.descender,this.createdTimestamp=R.createdTimestamp,this.tables={os2:{usWeightClass:R.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:R.widthClass||this.usWidthClasses.MEDIUM,fsSelection:R.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Tn.GlyphSet(this,R.glyphs||[]),this.encoding=new On(this),this.position=new Ta(this),this.substitution=new To(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new qs(this):void 0)}})}Rs.prototype.hasChar=function(R){return null!==this.encoding.charToGlyphIndex(R)},Rs.prototype.charToGlyphIndex=function(R){return this.encoding.charToGlyphIndex(R)},Rs.prototype.charToGlyph=function(R){return R=this.charToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},Rs.prototype.stringToGlyphs=function(R,X){X=X||this.defaultRenderOptions;for(var se=ml(R),he=[],De=0;De<se.length;De+=1)he.push(this.charToGlyphIndex(se[De]));var nt=he.length;if(X.features){R=X.script||this.substitution.getDefaultScriptName();var Mt=[];X.features.liga&&(Mt=Mt.concat(this.substitution.getFeature("liga",R,X.language))),X.features.rlig&&(Mt=Mt.concat(this.substitution.getFeature("rlig",R,X.language)));for(var Qt=0;Qt<nt;Qt+=1)for(var Jt=0;Jt<Mt.length;Jt++){for(var Mn=Mt[Jt],Ne=Mn.sub,xe=Ne.length,Fe=0;Fe<xe&&Ne[Fe]===he[Qt+Fe];)Fe++;Fe===xe&&(he.splice(Qt,xe,Mn.by),nt=nt-xe+1)}}for(var Oe=new Array(nt),dt=this.glyphs.get(0),an=0;an<nt;an+=1)Oe[an]=this.glyphs.get(he[an])||dt;return Oe},Rs.prototype.nameToGlyphIndex=function(R){return this.glyphNames.nameToGlyphIndex(R)},Rs.prototype.nameToGlyph=function(R){return R=this.nameToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},Rs.prototype.glyphIndexToName=function(R){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(R):""},Rs.prototype.getKerningValue=function(R,X){R=R.index||R,X=X.index||X;var se=this.position.defaultKerningTables;return se?this.position.getKerningValue(se,R,X):this.kerningPairs[R+","+X]||0},Rs.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Rs.prototype.forEachGlyph=function(R,X,se,he,De,Ye){X=void 0!==X?X:0,se=void 0!==se?se:0;var nt,Mt=1/this.unitsPerEm*(he=void 0!==he?he:72),Qt=this.stringToGlyphs(R,De=De||this.defaultRenderOptions);De.kerning&&(R=De.script||this.position.getDefaultScriptName(),nt=this.position.getKerningTables(R,De.language));for(var Jt=0;Jt<Qt.length;Jt+=1){var Mn=Qt[Jt];Ye.call(this,Mn,X,se,he,De),Mn.advanceWidth&&(X+=Mn.advanceWidth*Mt),De.kerning&&Jt<Qt.length-1&&(X+=(nt?this.position.getKerningValue(nt,Mn.index,Qt[Jt+1].index):this.getKerningValue(Mn,Qt[Jt+1]))*Mt),De.letterSpacing?X+=De.letterSpacing*he:De.tracking&&(X+=De.tracking/1e3*he)}return X},Rs.prototype.getPath=function(R,X,se,he,De){var Ye=new Ce;return this.forEachGlyph(R,X,se,he,De,function(nt,Mt,Qt,Jt){nt=nt.getPath(Mt,Qt,Jt,De,this),Ye.extend(nt)}),Ye},Rs.prototype.getPaths=function(R,X,se,he,De){var Ye=[];return this.forEachGlyph(R,X,se,he,De,function(nt,Mt,Qt,Jt){nt=nt.getPath(Mt,Qt,Jt,De,this),Ye.push(nt)}),Ye},Rs.prototype.getAdvanceWidth=function(R,X,se){return this.forEachGlyph(R,0,0,X,se,function(){})},Rs.prototype.draw=function(R,X,se,he,De,Ye){this.getPath(X,se,he,De,Ye).draw(R)},Rs.prototype.drawPoints=function(R,X,se,he,De,Ye){this.forEachGlyph(X,se,he,De,Ye,function(nt,Mt,Qt,Jt){nt.drawPoints(R,Mt,Qt,Jt)})},Rs.prototype.drawMetrics=function(R,X,se,he,De,Ye){this.forEachGlyph(X,se,he,De,Ye,function(nt,Mt,Qt,Jt){nt.drawMetrics(R,Mt,Qt,Jt)})},Rs.prototype.getEnglishName=function(R){if(R=this.names[R])return R.en},Rs.prototype.validate=function(){var R=this;function X(se){(se=R.getEnglishName(se))&&se.trim()}X("fontFamily"),X("weightName"),X("manufacturer"),X("copyright"),X("version")},Rs.prototype.toTables=function(){return ca_fontToTable(this)},Rs.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Rs.prototype.toArrayBuffer=function(){for(var R=this.toTables().encode(),X=new ArrayBuffer(R.length),se=new Uint8Array(X),he=0;he<R.length;he++)se[he]=R[he];return X},Rs.prototype.download=function(R){var X=this.getEnglishName("fontFamily"),se=this.getEnglishName("fontSubfamily"),he=(R=R||X.replace(/\s/g,"")+"-"+se+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,he.byteLength,function(De){De.root.getFile(R,{create:!0},function(Ye){Ye.createWriter(function(nt){var Mt=new DataView(he);Mt=new Blob([Mt],{type:"font/opentype"}),nt.write(Mt),nt.addEventListener("writeend",function(){location.href=Ye.toURL()},!1)})})},function(De){throw new Error(De.name+": "+De.message)})):(X=a("fs"),se=function(De){for(var Ye=new M(De.byteLength),nt=new Uint8Array(De),Mt=0;Mt<Ye.length;++Mt)Ye[Mt]=nt[Mt];return Ye}(he),X.writeFileSync(R,se))},Rs.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Rs.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Rs.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Nc_parse=function(R,X,se){for(var he,Ye,nt,Mt=new Pn.Parser(R,X),Qt=Mt.parseULong(),Jt=(z.argument(65536===Qt,"Unsupported fvar table version."),Mt.parseOffset16()),Mn=(Mt.skip("uShort",1),Mt.parseUShort()),Ne=Mt.parseUShort(),xe=Mt.parseUShort(),Fe=Mt.parseUShort(),Oe=[],dt=0;dt<Mn;dt++)Oe.push((Ye=se,nt={},he=new Pn.Parser(he=R,X+Jt+dt*Ne),nt.tag=he.parseTag(),nt.minValue=he.parseFixed(),nt.defaultValue=he.parseFixed(),nt.maxValue=he.parseFixed(),he.skip("uShort",1),nt.name=Ye[he.parseUShort()]||{},nt));for(var an=[],Dn=X+Jt+Mn*Ne,Gn=0;Gn<xe;Gn++)an.push(function(ai,Jr,xi,vi){var Ji={},cs=new Pn.Parser(ai,Jr);Ji.name=vi[cs.parseUShort()]||{},cs.skip("uShort",1),Ji.coordinates={};for(var yo=0;yo<xi.length;++yo)Ji.coordinates[xi[yo].tag]=cs.parseFixed();return Ji}(R,Dn+Gn*Fe,Oe,se));return{axes:Oe,instances:an}},Ca=new Array(10);Ca[1]=function(){var R=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{posFormat:1,coverage:this.parsePointer(bn.coverage),value:this.parseValueRecord()}:2===X?{posFormat:2,coverage:this.parsePointer(bn.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+R.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Ca[2]=function(){var R,X,se,he,Ye=this.offset+this.relativeOffset,De=this.parseUShort(),nt=(z.assert(1===De||2===De,"0x"+Ye.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),Ye=this.parsePointer(bn.coverage),this.parseUShort()),Mt=this.parseUShort();return 1===De?{posFormat:De,coverage:Ye,valueFormat1:nt,valueFormat2:Mt,pairSets:this.parseList(bn.pointer(bn.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(nt),value2:this.parseValueRecord(Mt)}})))}:2===De?(R=this.parsePointer(bn.classDef),X=this.parsePointer(bn.classDef),se=this.parseUShort(),he=this.parseUShort(),{posFormat:De,coverage:Ye,valueFormat1:nt,valueFormat2:Mt,classDef1:R,classDef2:X,class1Count:se,class2Count:he,classRecords:this.parseList(se,bn.list(he,function(){return{value1:this.parseValueRecord(nt),value2:this.parseValueRecord(Mt)}}))}):void 0},Ca[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Ca[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Ca[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Ca[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Ca[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Ca[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Ca[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var Vl_parse=function(R,X){return X=(R=new bn(R,X=X||0)).parseVersion(1),z.argument(1===X||1.1===X,"Unsupported GPOS table version "+X),1===X?{version:X,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(Ca)}:{version:X,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(Ca),variations:R.parseFeatureVariationsList()}},Mo_parse=function(R,X){if(0===(X=(R=new Pn.Parser(R,X)).parseUShort())){var se=R,he={},Ne=(se.skip("uShort"),se.parseUShort()),De=(z.argument(0===Ne,"Unsupported kern sub-table version."),se.skip("uShort",2),se.parseUShort());se.skip("uShort",3);for(var Ye=0;Ye<De;Ye+=1){var nt=se.parseUShort(),Mt=se.parseUShort(),Qt=se.parseShort();he[nt+","+Mt]=Qt}return he}if(1!==X)throw new Error("Unsupported kern table version ("+X+").");var Jt=R,Mn={};if(Jt.skip("uShort"),1<Jt.parseULong()&&console.warn("Only the first kern subtable is supported."),Jt.skip("uLong"),Ne=255&Jt.parseUShort(),Jt.skip("uShort"),0==Ne){var xe=Jt.parseUShort();Jt.skip("uShort",3);for(var Fe=0;Fe<xe;Fe+=1){var Oe=Jt.parseUShort(),dt=Jt.parseUShort(),an=Jt.parseShort();Mn[Oe+","+dt]=an}}return Mn},gl_parse=function(R,X,se,he){for(var De=new Pn.Parser(R,X),Ye=he?De.parseUShort:De.parseULong,nt=[],Mt=0;Mt<se+1;Mt+=1){var Qt=Ye.call(De);he&&(Qt*=2),nt.push(Qt)}return nt};function Tl(R,X){a("fs").readFile(R,function(se,he){if(se)return X(se.message);X(null,Va(he))})}function Da(R,X){var se=new XMLHttpRequest;se.open("get",R,!0),se.responseType="arraybuffer",se.onload=function(){return se.response?X(null,se.response):X("Font could not be loaded: "+se.statusText)},se.onerror=function(){X("Font could not be loaded")},se.send()}function Gl(R,X){for(var se=[],he=12,De=0;De<X;De+=1){var Ye=Pn.getTag(R,he),nt=Pn.getULong(R,he+4),Mt=Pn.getULong(R,he+8),Qt=Pn.getULong(R,he+12);se.push({tag:Ye,checksum:nt,offset:Mt,length:Qt,compression:!1}),he+=16}return se}function di(se,X){if("WOFF"!==X.compression)return{data:se,offset:X.offset};se=new Uint8Array(se.buffer,X.offset+2,X.compressedLength-2);var he=new Uint8Array(X.length);if(re(se,he),he.byteLength!==X.length)throw new Error("Decompression error: "+X.tag+" decompressed length doesn't match recorded length");return{data:new DataView(he.buffer,0),offset:0}}function tl(Gn){var X,se,he,De,Ye,nt,Mt,Qt,Jt,Mn,Ne,xe,Fe,Oe,dt=new Rs({empty:!0}),an=new DataView(Gn,0),Dn=[];if("\0\x01\0\0"===(Gn=Pn.getTag(an,0))||"true"===Gn||"typ1"===Gn)dt.outlinesFormat="truetype",Dn=Gl(an,he=Pn.getUShort(an,4));else if("OTTO"===Gn)dt.outlinesFormat="cff",Dn=Gl(an,he=Pn.getUShort(an,4));else{if("wOFF"!==Gn)throw new Error("Unsupported OpenType signature "+Gn);if("\0\x01\0\0"===(ai=Pn.getTag(an,4)))dt.outlinesFormat="truetype";else{if("OTTO"!==ai)throw new Error("Unsupported OpenType flavor "+Gn);dt.outlinesFormat="cff"}Dn=function(Qs,ui){for(var eo=[],fo=44,Ns=0;Ns<ui;Ns+=1){var _i=Pn.getTag(Qs,fo),Fo=Pn.getULong(Qs,fo+4),pr=Pn.getULong(Qs,fo+8),Yi=Pn.getULong(Qs,fo+12);eo.push({tag:_i,offset:Fo,compression:pr<Yi&&"WOFF",compressedLength:pr,length:Yi}),fo+=20}return eo}(an,he=Pn.getUShort(an,12))}for(var Jr=0;Jr<he;Jr+=1){var xi=Dn[Jr],vi=void 0;switch(xi.tag){case"cmap":vi=di(an,xi),dt.tables.cmap=pt_parse(vi.data,vi.offset),dt.encoding=new zn(dt.tables.cmap);break;case"cvt ":vi=di(an,xi),Oe=new Pn.Parser(vi.data,vi.offset),dt.tables.cvt=Oe.parseShortList(xi.length/2);break;case"fvar":Ye=xi;break;case"fpgm":vi=di(an,xi),Oe=new Pn.Parser(vi.data,vi.offset),dt.tables.fpgm=Oe.parseByteList(xi.length);break;case"head":vi=di(an,xi),dt.tables.head=U_parse(vi.data,vi.offset),dt.unitsPerEm=dt.tables.head.unitsPerEm,X=dt.tables.head.indexToLocFormat;break;case"hhea":vi=di(an,xi),dt.tables.hhea=L_parse(vi.data,vi.offset),dt.ascender=dt.tables.hhea.ascender,dt.descender=dt.tables.hhea.descender,dt.numberOfHMetrics=dt.tables.hhea.numberOfHMetrics;break;case"hmtx":Jt=xi;break;case"ltag":vi=di(an,xi),se=H_parse(vi.data,vi.offset);break;case"maxp":vi=di(an,xi),dt.tables.maxp=de_parse(vi.data,vi.offset),dt.numGlyphs=dt.tables.maxp.numGlyphs;break;case"name":xe=xi;break;case"OS/2":vi=di(an,xi),dt.tables.os2=Ar_parse(vi.data,vi.offset);break;case"post":vi=di(an,xi),dt.tables.post=Hi_parse(vi.data,vi.offset),dt.glyphNames=new Dr(dt.tables.post);break;case"prep":vi=di(an,xi),Oe=new Pn.Parser(vi.data,vi.offset),dt.tables.prep=Oe.parseByteList(xi.length);break;case"glyf":nt=xi;break;case"loca":Ne=xi;break;case"CFF ":De=xi;break;case"kern":Mn=xi;break;case"GPOS":Mt=xi;break;case"GSUB":Qt=xi;break;case"meta":Fe=xi}}if(ai=di(an,xe),dt.tables.name=$n_parse(ai.data,ai.offset,se),dt.names=dt.tables.name,nt&&Ne)Gn=0===X,ai=di(an,Ne),ai=gl_parse(ai.data,ai.offset,dt.numGlyphs,Gn),Gn=di(an,nt),dt.glyphs=fs.parse(Gn.data,Gn.offset,ai,dt);else{if(!De)throw new Error("Font doesn't contain TrueType or CFF outlines.");Gn=di(an,De),N_parse(Gn.data,Gn.offset,dt)}for(var ai=di(an,Jt),Ji=(ie_parse(ai.data,ai.offset,dt.numberOfHMetrics,dt.numGlyphs,dt.glyphs),dt),cs=Ji.tables.cmap.glyphIndexMap,yo=Object.keys(cs),vo=0;vo<yo.length;vo+=1){var Po,Ao=yo[vo];(Po=Ji.glyphs.get(cs[Ao])).addUnicode(parseInt(Ao))}for(var Bs=0;Bs<Ji.glyphs.length;Bs+=1)Po=Ji.glyphs.get(Bs),Ji.cffEncoding?Po.name=Ji.isCIDFont?"gid"+Bs:Ji.cffEncoding.charset[Bs]:Ji.glyphNames.names&&(Po.name=Ji.glyphNames.glyphIndexToName(Bs));return Mn?(Gn=di(an,Mn),dt.kerningPairs=Mo_parse(Gn.data,Gn.offset)):dt.kerningPairs={},Mt&&(ai=di(an,Mt),dt.tables.gpos=Vl_parse(ai.data,ai.offset),dt.position.init()),Qt&&(Gn=di(an,Qt),dt.tables.gsub=wi_parse(Gn.data,Gn.offset)),Ye&&(ai=di(an,Ye),dt.tables.fvar=Nc_parse(ai.data,ai.offset,dt.names)),Fe&&(Gn=di(an,Fe),dt.tables.meta=ws_parse(Gn.data,Gn.offset),dt.metas=dt.tables.meta),dt}w.Font=Rs,w.Glyph=Br,w.Path=Ce,w.BoundingBox=fe,w._parse=Pn,w.parse=tl,w.load=function(R,X){(typeof window>"u"?Tl:Da)(R,function(se,he){if(se)return X(se);var De;try{De=tl(he)}catch(Ye){return X(Ye,null)}return X(null,De)})},w.loadSync=function(R){return tl(Va(a("fs").readFileSync(R)))},Object.defineProperty(w,"__esModule",{value:!0})},b("object"==typeof Z&&void 0!==be?Z:this.opentype={})}).call(this,a("buffer").Buffer)},{buffer:4,fs:2}],258:[function(a,be,Z){(function(M){function C(I,D){for(var d=0,f=I.length-1;0<=f;f--){var h=I[f];"."===h?I.splice(f,1):".."===h?(I.splice(f,1),d++):d&&(I.splice(f,1),d--)}if(D)for(;d--;)I.unshift("..");return I}function b(I,D){if(I.filter)return I.filter(D);for(var d=[],f=0;f<I.length;f++)D(I[f],f,I)&&d.push(I[f]);return d}Z.resolve=function(){for(var I="",D=!1,d=arguments.length-1;-1<=d&&!D;d--){var f=0<=d?arguments[d]:M.cwd();if("string"!=typeof f)throw new TypeError("Arguments to path.resolve must be strings");f&&(I=f+"/"+I,D="/"===f.charAt(0))}return(D?"/":"")+(I=C(b(I.split("/"),function(h){return!!h}),!D).join("/"))||"."},Z.normalize=function(I){var D=Z.isAbsolute(I),d="/"===w(I,-1);return(I=(I=C(b(I.split("/"),function(f){return!!f}),!D).join("/"))||D?I:".")&&d&&(I+="/"),(D?"/":"")+I},Z.isAbsolute=function(I){return"/"===I.charAt(0)},Z.join=function(){var I=Array.prototype.slice.call(arguments,0);return Z.normalize(b(I,function(D,d){if("string"!=typeof D)throw new TypeError("Arguments to path.join must be strings");return D}).join("/"))},Z.relative=function(I,D){function d(E){for(var S=0;S<E.length&&""===E[S];S++);for(var k=E.length-1;0<=k&&""===E[k];k--);return k<S?[]:E.slice(S,k-S+1)}I=Z.resolve(I).substr(1),D=Z.resolve(D).substr(1);for(var f=d(I.split("/")),h=d(D.split("/")),p=Math.min(f.length,h.length),m=p,g=0;g<p;g++)if(f[g]!==h[g]){m=g;break}var x=[];for(g=m;g<f.length;g++)x.push("..");return(x=x.concat(h.slice(m))).join("/")},Z.sep="/",Z.delimiter=":",Z.dirname=function(I){if("string"!=typeof I&&(I+=""),0===I.length)return".";for(var D=47===I.charCodeAt(0),d=-1,f=!0,h=I.length-1;1<=h;--h)if(47===I.charCodeAt(h)){if(!f){d=h;break}}else f=!1;return-1===d?D?"/":".":D&&1===d?"/":I.slice(0,d)},Z.basename=function(I,D){return I=function(d){"string"!=typeof d&&(d+="");for(var f=0,h=-1,p=!0,m=d.length-1;0<=m;--m)if(47===d.charCodeAt(m)){if(!p){f=m+1;break}}else-1===h&&(p=!1,h=m+1);return-1===h?"":d.slice(f,h)}(I),D&&I.substr(-1*D.length)===D?I.substr(0,I.length-D.length):I},Z.extname=function(I){"string"!=typeof I&&(I+="");for(var D=-1,d=0,f=-1,h=!0,p=0,m=I.length-1;0<=m;--m){var g=I.charCodeAt(m);if(47===g){if(h)continue;d=m+1;break}-1===f&&(h=!1,f=m+1),46===g?-1===D?D=m:1!==p&&(p=1):-1!==D&&(p=-1)}return-1===D||-1===f||0===p||1===p&&D===f-1&&D===d+1?"":I.slice(D,f)};var w=function(I,D,d){return I.substr(D,d)}}).call(this,a("_process"))},{_process:259}],259:[function(a,b,Z){var M,C;function w(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}b=b.exports={};try{M="function"==typeof setTimeout?setTimeout:w}catch{M=w}try{C="function"==typeof clearTimeout?clearTimeout:I}catch{C=I}function D(S){if(M===setTimeout)return setTimeout(S,0);if((M===w||!M)&&setTimeout)return(M=setTimeout)(S,0);try{return M(S,0)}catch{try{return M.call(null,S,0)}catch{return M.call(this,S,0)}}}var d,f=[],h=!1,p=-1;function m(){h&&d&&(h=!1,d.length?f=d.concat(f):p=-1,f.length&&g())}function g(){if(!h){for(var S=D(m),k=(h=!0,f.length);k;){for(d=f,f=[];++p<k;)d&&d[p].run();p=-1,k=f.length}d=null,h=!1,function(q){if(C===clearTimeout)return clearTimeout(q);if((C===I||!C)&&clearTimeout)return(C=clearTimeout)(q);try{C(q)}catch{try{return C.call(null,q)}catch{return C.call(this,q)}}}(S)}}function x(S,k){this.fun=S,this.array=k}function E(){}b.nextTick=function(S){var k=new Array(arguments.length-1);if(1<arguments.length)for(var q=1;q<arguments.length;q++)k[q-1]=arguments[q];f.push(new x(S,k)),1!==f.length||h||D(g)},x.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=E,b.addListener=E,b.once=E,b.off=E,b.removeListener=E,b.removeAllListeners=E,b.emit=E,b.prependListener=E,b.prependOnceListener=E,b.listeners=function(S){return[]},b.binding=function(S){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(S){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],260:[function(a,be,Z){be=function(M){"use strict";var C,b=Object.prototype,w=b.hasOwnProperty,I=(J="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",D=J.asyncIterator||"@@asyncIterator",d=J.toStringTag||"@@toStringTag";function f(ge,ye,Q,je){var Ce,it,le,z;return ye=ye&&ye.prototype instanceof S?ye:S,ye=Object.create(ye.prototype),je=new we(je||[]),ye._invoke=(Ce=ge,it=Q,le=je,z=p,function(Je,gt){if(z===g)throw new Error("Generator is already running");if(z===x){if("throw"===Je)throw gt;return oe()}for(le.method=Je,le.arg=gt;;){var Ct=le.delegate;if(Ct&&(Ct=function $t(yt,Ut){var Xt=yt.iterator[Ut.method];if(Xt===C){if(Ut.delegate=null,"throw"===Ut.method){if(yt.iterator.return&&(Ut.method="return",Ut.arg=C,$t(yt,Ut),"throw"===Ut.method))return E;Ut.method="throw",Ut.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}return"throw"===(Xt=h(Xt,yt.iterator,Ut.arg)).type?(Ut.method="throw",Ut.arg=Xt.arg,Ut.delegate=null,E):(Xt=Xt.arg)?Xt.done?(Ut[yt.resultName]=Xt.value,Ut.next=yt.nextLoc,"return"!==Ut.method&&(Ut.method="next",Ut.arg=C),Ut.delegate=null,E):Xt:(Ut.method="throw",Ut.arg=new TypeError("iterator result is not an object"),Ut.delegate=null,E)}(Ct,le))){if(Ct===E)continue;return Ct}if("next"===le.method)le.sent=le._sent=le.arg;else if("throw"===le.method){if(z===p)throw z=x,le.arg;le.dispatchException(le.arg)}else"return"===le.method&&le.abrupt("return",le.arg);if(z=g,"normal"===(Ct=h(Ce,it,le)).type){if(z=le.done?x:m,Ct.arg!==E)return{value:Ct.arg,done:le.done}}else"throw"===Ct.type&&(z=x,le.method="throw",le.arg=Ct.arg)}}),ye}function h(ge,re,Q){try{return{type:"normal",arg:ge.call(re,Q)}}catch(fe){return{type:"throw",arg:fe}}}M.wrap=f;var p="suspendedStart",m="suspendedYield",g="executing",x="completed",E={};function S(){}function k(){}function q(){}var J,G,V=((J={})[I]=function(){return this},(G=(G=Object.getPrototypeOf)&&G(G(Se([]))))&&G!==b&&w.call(G,I)&&(J=G),q.prototype=S.prototype=Object.create(J));function K(ge){["next","throw","return"].forEach(function(re){ge[re]=function(Q){return this._invoke(re,Q)}})}function $(ge){var re;this._invoke=function(Q,fe){function Ce(){return new Promise(function(it,le){!function z($t,je,Je,gt){var Ct;if("throw"!==($t=h(ge[$t],ge,je)).type)return(je=(Ct=$t.arg).value)&&"object"==typeof je&&w.call(je,"__await")?Promise.resolve(je.__await).then(function(yt){z("next",yt,Je,gt)},function(yt){z("throw",yt,Je,gt)}):Promise.resolve(je).then(function(yt){Ct.value=yt,Je(Ct)},function(yt){return z("throw",yt,Je,gt)});gt($t.arg)}(Q,fe,it,le)})}return re=re?re.then(Ce,Ce):Ce()}}function ne(ge){var re={tryLoc:ge[0]};1 in ge&&(re.catchLoc=ge[1]),2 in ge&&(re.finallyLoc=ge[2],re.afterLoc=ge[3]),this.tryEntries.push(re)}function Y(ge){var re=ge.completion||{};re.type="normal",delete re.arg,ge.completion=re}function we(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(ne,this),this.reset(!0)}function Se(ge){if(ge){var re,Q=ge[I];if(Q)return Q.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length))return re=-1,(Q=function fe(){for(;++re<ge.length;)if(w.call(ge,re))return fe.value=ge[re],fe.done=!1,fe;return fe.value=C,fe.done=!0,fe}).next=Q}return{next:oe}}function oe(){return{value:C,done:!0}}return(k.prototype=V.constructor=q).constructor=k,q[d]=k.displayName="GeneratorFunction",M.isGeneratorFunction=function(ge){return!!(ge="function"==typeof ge&&ge.constructor)&&(ge===k||"GeneratorFunction"===(ge.displayName||ge.name))},M.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,q):(ge.__proto__=q,d in ge||(ge[d]="GeneratorFunction")),ge.prototype=Object.create(V),ge},M.awrap=function(ge){return{__await:ge}},K($.prototype),$.prototype[D]=function(){return this},M.AsyncIterator=$,M.async=function(ge,re,Q,fe){var Ce=new $(f(ge,re,Q,fe));return M.isGeneratorFunction(re)?Ce:Ce.next().then(function(it){return it.done?it.value:Ce.next()})},K(V),V[d]="Generator",V[I]=function(){return this},V.toString=function(){return"[object Generator]"},M.keys=function(ge){var re,Q=[];for(re in ge)Q.push(re);return Q.reverse(),function fe(){for(;Q.length;){var Ce=Q.pop();if(Ce in ge)return fe.value=Ce,fe.done=!1,fe}return fe.done=!0,fe}},M.values=Se,we.prototype={constructor:we,reset:function(ge){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(Y),!ge)for(var re in this)"t"===re.charAt(0)&&w.call(this,re)&&!isNaN(+re.slice(1))&&(this[re]=C)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if("throw"===ge.type)throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var re=this;function Q(ye,je){return it.type="throw",it.arg=ge,re.next=ye,je&&(re.method="next",re.arg=C),!!je}for(var fe=this.tryEntries.length-1;0<=fe;--fe){var Ce=this.tryEntries[fe],it=Ce.completion;if("root"===Ce.tryLoc)return Q("end");if(Ce.tryLoc<=this.prev){var le=w.call(Ce,"catchLoc"),z=w.call(Ce,"finallyLoc");if(le&&z){if(this.prev<Ce.catchLoc)return Q(Ce.catchLoc,!0);if(this.prev<Ce.finallyLoc)return Q(Ce.finallyLoc)}else if(le){if(this.prev<Ce.catchLoc)return Q(Ce.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<Ce.finallyLoc)return Q(Ce.finallyLoc)}}}},abrupt:function(ge,re){for(var Q=this.tryEntries.length-1;0<=Q;--Q){var fe=this.tryEntries[Q];if(fe.tryLoc<=this.prev&&w.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var Ce=fe;break}}var it=(Ce=Ce&&("break"===ge||"continue"===ge)&&Ce.tryLoc<=re&&re<=Ce.finallyLoc?null:Ce)?Ce.completion:{};return it.type=ge,it.arg=re,Ce?(this.method="next",this.next=Ce.finallyLoc,E):this.complete(it)},complete:function(ge,re){if("throw"===ge.type)throw ge.arg;return"break"===ge.type||"continue"===ge.type?this.next=ge.arg:"return"===ge.type?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):"normal"===ge.type&&re&&(this.next=re),E},finish:function(ge){for(var re=this.tryEntries.length-1;0<=re;--re){var Q=this.tryEntries[re];if(Q.finallyLoc===ge)return this.complete(Q.completion,Q.afterLoc),Y(Q),E}},catch:function(ge){for(var re=this.tryEntries.length-1;0<=re;--re){var Q,fe,Ce=this.tryEntries[re];if(Ce.tryLoc===ge)return"throw"===(Q=Ce.completion).type&&(fe=Q.arg,Y(Ce)),fe}throw new Error("illegal catch attempt")},delegateYield:function(ge,re,Q){return this.delegate={iterator:Se(ge),resultName:re,nextLoc:Q},"next"===this.method&&(this.arg=C),E}},M}("object"==typeof be?be.exports:{});try{regeneratorRuntime=be}catch{Function("r","regeneratorRuntime = r")(be)}},{}],261:[function(a,be,Z){!function(M){"use strict";var C,b,w,I,D,d,f,h,p,m;function g(Y){if("string"!=typeof Y&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Y))throw new TypeError("Invalid character in header field name");return Y.toLowerCase()}function x(Y){return"string"!=typeof Y?String(Y):Y}function E(Y){var we={next:function(){var Se=Y.shift();return{done:void 0===Se,value:Se}}};return b&&(we[Symbol.iterator]=function(){return we}),we}function S(Y){this.map={},Y instanceof S?Y.forEach(function(we,Se){this.append(Se,we)},this):Array.isArray(Y)?Y.forEach(function(we){this.append(we[0],we[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(we){this.append(we,Y[we])},this)}function k(Y){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}function q(Y){return new Promise(function(we,Se){Y.onload=function(){we(Y.result)},Y.onerror=function(){Se(Y.error)}})}function J(Y){var we=new FileReader,Se=q(we);return we.readAsArrayBuffer(Y),Se}function G(Y){var we;return Y.slice?Y.slice(0):((we=new Uint8Array(Y.byteLength)).set(new Uint8Array(Y)),we.buffer)}function V(){return this.bodyUsed=!1,this._initBody=function(Y){if(this._bodyInit=Y)if("string"==typeof Y)this._bodyText=Y;else if(w&&Blob.prototype.isPrototypeOf(Y))this._bodyBlob=Y;else if(I&&FormData.prototype.isPrototypeOf(Y))this._bodyFormData=Y;else if(C&&URLSearchParams.prototype.isPrototypeOf(Y))this._bodyText=Y.toString();else if(D&&w&&f(Y))this._bodyArrayBuffer=G(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!D||!ArrayBuffer.prototype.isPrototypeOf(Y)&&!h(Y))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=G(Y)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof Y?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w&&(this.blob=function(){var Y=k(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(J)}),this.text=function(){var Y,we,Se=k(this);if(Se)return Se;if(this._bodyBlob)return Se=this._bodyBlob,we=q(Y=new FileReader),Y.readAsText(Se),we;if(this._bodyArrayBuffer)return Promise.resolve(function(oe){for(var ge=new Uint8Array(oe),re=new Array(ge.length),Q=0;Q<ge.length;Q++)re[Q]=String.fromCharCode(ge[Q]);return re.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},I&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}function K(Y,we){var Se,oe=(we=we||{}).body;if(Y instanceof K){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,we.headers||(this.headers=new S(Y.headers)),this.method=Y.method,this.mode=Y.mode,oe||null==Y._bodyInit||(oe=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=we.credentials||this.credentials||"omit",!we.headers&&this.headers||(this.headers=new S(we.headers)),this.method=(Se=(Y=we.method||this.method||"GET").toUpperCase(),-1<p.indexOf(Se)?Se:Y),this.mode=we.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(oe)}function $(Y){var we=new FormData;return Y.trim().split("&").forEach(function(Se){var oe;Se&&(oe=(Se=Se.split("=")).shift().replace(/\+/g," "),Se=Se.join("=").replace(/\+/g," "),we.append(decodeURIComponent(oe),decodeURIComponent(Se)))}),we}function ne(Y,we){we=we||{},this.type="default",this.status=void 0===we.status?200:we.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in we?we.statusText:"OK",this.headers=new S(we.headers),this.url=we.url||"",this._initBody(Y)}M.fetch||(C="URLSearchParams"in M,b="Symbol"in M&&"iterator"in Symbol,w="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch{return!1}}(),I="FormData"in M,(D="ArrayBuffer"in M)&&(d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(Y){return Y&&DataView.prototype.isPrototypeOf(Y)},h=ArrayBuffer.isView||function(Y){return Y&&-1<d.indexOf(Object.prototype.toString.call(Y))}),S.prototype.append=function(Y,we){Y=g(Y),we=x(we);var Se=this.map[Y];this.map[Y]=Se?Se+","+we:we},S.prototype.delete=function(Y){delete this.map[g(Y)]},S.prototype.get=function(Y){return Y=g(Y),this.has(Y)?this.map[Y]:null},S.prototype.has=function(Y){return this.map.hasOwnProperty(g(Y))},S.prototype.set=function(Y,we){this.map[g(Y)]=x(we)},S.prototype.forEach=function(Y,we){for(var Se in this.map)this.map.hasOwnProperty(Se)&&Y.call(we,this.map[Se],Se,this)},S.prototype.keys=function(){var Y=[];return this.forEach(function(we,Se){Y.push(Se)}),E(Y)},S.prototype.values=function(){var Y=[];return this.forEach(function(we){Y.push(we)}),E(Y)},S.prototype.entries=function(){var Y=[];return this.forEach(function(we,Se){Y.push([Se,we])}),E(Y)},b&&(S.prototype[Symbol.iterator]=S.prototype.entries),p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],K.prototype.clone=function(){return new K(this,{body:this._bodyInit})},V.call(K.prototype),V.call(ne.prototype),ne.prototype.clone=function(){return new ne(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},ne.error=function(){var Y=new ne(null,{status:0,statusText:""});return Y.type="error",Y},m=[301,302,303,307,308],ne.redirect=function(Y,we){if(-1===m.indexOf(we))throw new RangeError("Invalid status code");return new ne(null,{status:we,headers:{location:Y}})},M.Headers=S,M.Request=K,M.Response=ne,M.fetch=function(Y,we){return new Promise(function(Se,oe){var ge=new K(Y,we),re=new XMLHttpRequest;re.onload=function(){var Q,fe={status:re.status,statusText:re.statusText,headers:(fe=re.getAllResponseHeaders()||"",Q=new S,fe.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(le){var z=(le=le.split(":")).shift().trim();z&&(le=le.join(":").trim(),Q.append(z,le))}),Q)},Ce=(fe.url="responseURL"in re?re.responseURL:fe.headers.get("X-Request-URL"),"response"in re?re.response:re.responseText);Se(new ne(Ce,fe))},re.onerror=function(){oe(new TypeError("Network request failed"))},re.ontimeout=function(){oe(new TypeError("Network request failed"))},re.open(ge.method,ge.url,!0),"include"===ge.credentials?re.withCredentials=!0:"omit"===ge.credentials&&(re.withCredentials=!1),"responseType"in re&&w&&(re.responseType="blob"),ge.headers.forEach(function(Q,fe){re.setRequestHeader(fe,Q)}),re.send(void 0===ge._bodyInit?null:ge._bodyInit)})},M.fetch.polyfill=!0)}(typeof self<"u"?self:this)},{}],262:[function(a,be,Z){"use strict";a("core-js/modules/es.function.name"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M,C=w(a("../core/main")),b=w(a("../color/color_conversion"));function w(d){return d&&d.__esModule?d:{default:d}}var I=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],D=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];C.default.prototype._rgbColorName=function(p){p=b.default._rgbaToHSBA(p);var f,h,m=[(M=p)[0],p[1],p[2]];0!==m[0]&&(m[0]=Math.round(100*m[0]),(p=m[0].toString().split(""))[h=p.length-1]=parseInt(p[h]),p[h]<2.5?p[h]=0:2.5<=p[h]&&p[h]<7.5&&(p[h]=5),2===p.length?(p[0]=parseInt(p[0]),7.5<=p[h]&&(p[h]=0,p[0]=p[0]+1),m[0]=10*p[0]+p[1]):m[0]=7.5<=p[h]?10:p[h]),m[2]=m[2]/255;for(var g=m.length-1;1<=g;g--)m[g]=m[g]<=.25?0:.25<m[g]&&m[g]<.75?.5:1;if(0===m[0]&&0===m[1]&&1===m[2]){for(var x=2;0<=x;x--)M[x]=Math.round(1e4*M[x])/1e4;for(var E=0;E<I.length;E++){if(I[E].h===M[0]&&I[E].s===M[1]&&I[E].b===M[2]){f=I[E].name;break}f="white"}}else for(var S=0;S<D.length;S++)if(D[S].h===m[0]&&D[S].s===m[1]&&D[S].b===m[2]){f=D[S].name;break}return f},Z.default=a=C.default},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.replace"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a},C="_Description",b="_fallbackDesc",w="_fallbackTable",I="_Label",D="_labelDesc",d="_labelTable";function f(h){if("label"===h||"fallback"===h)throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}M.default.prototype.describe=function(h,p){var m;M.default._validateParameters("describe",arguments),"string"==typeof h&&(m=this.canvas.id,h=f(h),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),p===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},M.default.prototype.describeElement=function(h,p,m){var g,x;M.default._validateParameters("describeElement",arguments),"string"==typeof p&&"string"==typeof h&&(g=this.canvas.id,p=f(p),x=function(E){if("label"===E||"fallback"===E)throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(p,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==x&&(this.descriptions.fallbackElements[h].innerHTML=x):this._describeElementHTML("fallback",h,x),m===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==x&&(this.descriptions.labelElements[h].innerHTML=x):this._describeElementHTML("label",h,x)))},M.default.prototype._describeHTML=function(h,p){var m,g=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(g+C))?this.dummyDOM.querySelector("#"+g+w).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+b,'"></p>')):(m='<div id="'.concat(g).concat(C,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(b,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(g)).innerHTML=m),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(b)),this.descriptions.fallback.innerHTML=p):"label"===h&&(this.dummyDOM.querySelector("#".concat(g+I))?this.dummyDOM.querySelector("#".concat(g+d))&&this.dummyDOM.querySelector("#".concat(g+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(D,'"></p>')):(m='<div id="'.concat(g).concat(I,'" class="p5Label"><p id="').concat(g).concat(D,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",m)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+D),this.descriptions.label.innerHTML=p)},M.default.prototype._describeElementHTML=function(h,p,m){var g,x=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(x+C))?this.dummyDOM.querySelector("#"+x+w)||this.dummyDOM.querySelector("#"+x+b).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(x).concat(C,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).innerHTML=g),(g=document.createElement("tr")).id=x+"_fte_"+p,this.dummyDOM.querySelector("#"+x+w).appendChild(g),this.descriptions.fallbackElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(p)),this.descriptions.fallbackElements[p].innerHTML=m):"label"===h&&(this.dummyDOM.querySelector("#".concat(x+I))?this.dummyDOM.querySelector("#".concat(x+d))||this.dummyDOM.querySelector("#"+x+D).insertAdjacentHTML("afterend",'<table id="'.concat(x+d,'"></table>')):(g='<div id="'.concat(x).concat(I,'" class="p5Label"><table id="').concat(x).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",g)),(h=document.createElement("tr")).id=x+"_lte_"+p,this.dummyDOM.querySelector("#"+x+d).appendChild(h),this.descriptions.labelElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(p)),this.descriptions.labelElements[p].innerHTML=m)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.map"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.map"),a("core-js/modules/es.string.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype._updateGridOutput=function(M){var C,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p="",m=0;for(f in d){var g,x=0;for(g in d[f]){var E='<li id="'.concat(D,"shape").concat(m,'">').concat(d[f][g].color," ").concat(f,",");"line"===f?E+=" location = ".concat(d[f][g].pos,", length = ").concat(d[f][g].length," pixels"):(E+=" location = ".concat(d[f][g].pos),"point"!==f&&(E+=", area = ".concat(d[f][g].area," %")),E+="</li>"),h+=E,x++,m++}p=1<x?"".concat(p," ").concat(x," ").concat(f,"s"):"".concat(p," ").concat(x," ").concat(f)}return{numShapes:[m,p],details:h}}(M,this.ingredients.shapes)).numShapes,f=this.width,h=this.height,d="".concat(d=this.ingredients.colors.background," canvas, ").concat(f," by ").concat(h," pixels, contains ").concat(D[0]),w=d="".concat(d,1===D[0]?" shape: ":" shapes: ").concat(D[1]),I=function(D,d){var f,h,p=0,m="",g=Array.from(Array(10),function(){return Array(10)});for(f in d)for(var x in d[f]){var E;E="line"!==f?'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f,"</a>"):'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f," midpoint</a>"),d[f][x].loc.locY<g.length&&d[f][x].loc.locX<g[d[f][x].loc.locY].length&&(g[d[f][x].loc.locY][d[f][x].loc.locX]=g[d[f][x].loc.locY][d[f][x].loc.locX]?g[d[f][x].loc.locY][d[f][x].loc.locX]+"  "+E:E,p++)}for(h in g){var S,k="<tr>";for(S in g[h])k+="<td>",void 0!==g[h][S]&&(k+=g[h][S]),k+="</td>";m=m+k+"</tr>"}return m}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),I!==C.map.innerHTML&&(C.map.innerHTML=I),b.details!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=b.details),this._accessibleOutputs[M]=C)},Z.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.to-fixed"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function b(w,I,D){return 10===(I=Math.floor(w[0]/I*10))&&(I-=1),10===(w=Math.floor(w[1]/D*10))&&(w-=1),{locX:I,locY:w}}M.default.prototype.textOutput=function(w){M.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},M.default.prototype.gridOutput=function(w){M.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},M.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},M.default.prototype._createOutput=function(w,I){var D,d,f,h=this.canvas.id,p=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");"Fallback"===I?(D=h+w,this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===I&&(D=h+w+(p=I),this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"+I))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(d,'"></div>'))),this._accessibleOutputs[D]={},"textOutput"===w?(p="#".concat(h,"gridOutput").concat(p),f='<div id="'.concat(D,'">Text Output<div id="').concat(D,'Summary" aria-label="text output summary"><p id="').concat(D,'_summary"></p><ul id="').concat(D,'_list"></ul></div><table id="').concat(D,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].list=this.dummyDOM.querySelector("#".concat(D,"_list"))):"gridOutput"===w&&(p="#".concat(h,"textOutput").concat(p),f='<div id="'.concat(D,'">Grid Output<p id="').concat(D,'_summary" aria-label="grid output summary"><table id="').concat(D,'_map" summary="grid output content"></table><ul id="').concat(D,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].map=this.dummyDOM.querySelector("#".concat(D,"_map"))),this._accessibleOutputs[D].shapeDetails=this.dummyDOM.querySelector("#".concat(D,"_shapeDetails")),this._accessibleOutputs[D].summary=this.dummyDOM.querySelector("#".concat(D,"_summary"))},M.default.prototype._updateAccsOutput=function(){var w=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(w+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(w+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(w+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(w+"gridOutputLabel"))},M.default.prototype._accsBackground=function(w){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==w&&(this.ingredients.colors.backgroundRGBA=w,this.ingredients.colors.background=this._rgbColorName(w))},M.default.prototype._accsCanvasColors=function(w,I){"fill"===w?this.ingredients.colors.fillRGBA!==I&&(this.ingredients.colors.fillRGBA=I,this.ingredients.colors.fill=this._rgbColorName(I)):"stroke"===w&&this.ingredients.colors.strokeRGBA!==I&&(this.ingredients.colors.strokeRGBA=I,this.ingredients.colors.stroke=this._rgbColorName(I))},M.default.prototype._accsOutput=function(w,I){"ellipse"===w&&I[2]===I[3]?w="circle":"rectangle"===w&&I[2]===I[3]&&(w="square");var D,d,g,x,E,f={},h=!0,p=(x=I,g="rectangle"===(g=w)||"ellipse"===g||"arc"===g||"circle"===g||"square"===g?(E=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):"triangle"===g?(E=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):"quadrilateral"===g?(E=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):"line"===g?(E=(x[0]+x[2])/2,(x[1]+x[3])/2):(E=x[0],x[1]),[E,g]);if("line"===w?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(I[0],I[1],I[2],I[3])),D=this._getPos(I[0],[1]),d=this._getPos(I[2],[3]),f.loc=b(p,this.width,this.height),f.pos=D===d?"at ".concat(D):"from ".concat(D," to ").concat(d)):("point"===w?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(w,I)),f.pos=this._getPos.apply(this,function C(w){return function(I){if(Array.isArray(I)){for(var D=0,d=new Array(I.length);D<I.length;D++)d[D]=I[D];return d}}(w)||function(I){if(Symbol.iterator in Object(I)||"[object Arguments]"===Object.prototype.toString.call(I))return Array.from(I)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(p)),f.loc=b(p,this.width,this.height)),this.ingredients.shapes[w]){if(this.ingredients.shapes[w]!==[f]){for(var m in this.ingredients.shapes[w])JSON.stringify(this.ingredients.shapes[w][m])===JSON.stringify(f)&&(h=!1);!0===h&&this.ingredients.shapes[w].push(f)}}else this.ingredients.shapes[w]=[f]},M.default.prototype._getPos=function(d,D){d=new DOMPointReadOnly(d,D),D=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),D=(d=d.matrixTransform(D)).x,d=d.y;var f=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return D<.4*f?d<.4*h?"top left":.6*h<d?"bottom left":"mid left":.6*f<D?d<.4*h?"top right":.6*h<d?"bottom right":"mid right":d<.4*h?"top middle":.6*h<d?"bottom middle":"middle"},M.default.prototype._getArea=function(w,I){var D,d,f=0,h=("arc"===w?(f=(D=((I[5]-I[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*I[2]*I[3]/8,"open"!==I[6]&&"chord"!==I[6]||(d=I[0],x=I[1],h=I[0]+I[2]/2*Math.cos(I[4]).toFixed(2),E=I[1]+I[3]/2*Math.sin(I[4]).toFixed(2),m=I[0]+I[2]/2*Math.cos(I[5]).toFixed(2),p=I[1]+I[3]/2*Math.sin(I[5]).toFixed(2),d=Math.abs(d*(E-p)+h*(p-x)+m*(x-E))/2,D>Math.PI?f+=d:f-=d)):"ellipse"===w||"circle"===w?f=3.14*I[2]/2*I[3]/2:"line"===w||"point"===w?f=0:"quadrilateral"===w?f=Math.abs((I[6]+I[0])*(I[7]-I[1])+(I[0]+I[2])*(I[1]-I[3])+(I[2]+I[4])*(I[3]-I[5])+(I[4]+I[6])*(I[5]-I[7]))/2:"rectangle"===w||"square"===w?f=I[2]*I[3]:"triangle"===w&&(f=Math.abs(I[0]*(I[3]-I[5])+I[2]*(I[5]-I[1])+I[4]*(I[1]-I[3]))/2),this.width*this._pixelDensity),p=this.height*this._pixelDensity,m=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,p),new DOMPoint(0,p)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=m.map(function(S){return S.matrixTransform(g)}),E=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*f/E)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.concat"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype._updateTextOutput=function(M){var C,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<li><a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][m].color," ").concat(f,"</a>");"line"===f?g+=", ".concat(d[f][m].pos,", ").concat(d[f][m].length," pixels long.</li>"):(g+=", at ".concat(d[f][m].pos),"point"!==f&&(g+=", covering ".concat(d[f][m].area,"% of the canvas")),g+=".</li>"),h+=g,p++}return{numShapes:p,listShapes:h}}(M,this.ingredients.shapes)).numShapes,d=this.ingredients.colors.background,h=this.height,f="Your output is a, ".concat(f=this.width," by ").concat(h," pixels, ").concat(d," canvas containing the following"),w=f=1===D?"".concat(f," shape:"):"".concat(f," ").concat(D," shapes:"),I=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<tr id="'.concat(D,"shape").concat(p,'"><th>').concat(d[f][m].color," ").concat(f,"</th>");"line"===f?g+="<td>location = ".concat(d[f][m].pos,"</td><td>length = ").concat(d[f][m].length," pixels</td></tr>"):(g+="<td>location = ".concat(d[f][m].pos,"</td>"),"point"!==f&&(g+="<td> area = ".concat(d[f][m].area,"%</td>")),g+="</tr>"),h+=g,p++}return h}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),b.listShapes!==C.list.innerHTML&&(C.list.innerHTML=b.listShapes),I!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=I),this._accessibleOutputs[M]=C)},Z.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(a,be,Z){"use strict";var M=(M=a("./core/main"))&&M.__esModule?M:{default:M};a("./core/constants"),a("./core/environment"),a("./core/friendly_errors/stacktrace"),a("./core/friendly_errors/validate_params"),a("./core/friendly_errors/file_errors"),a("./core/friendly_errors/fes_core"),a("./core/friendly_errors/sketch_reader"),a("./core/helpers"),a("./core/legacy"),a("./core/preload"),a("./core/p5.Element"),a("./core/p5.Graphics"),a("./core/p5.Renderer"),a("./core/p5.Renderer2D"),a("./core/rendering"),a("./core/shim"),a("./core/structure"),a("./core/transform"),a("./core/shape/2d_primitives"),a("./core/shape/attributes"),a("./core/shape/curves"),a("./core/shape/vertex"),a("./accessibility/outputs"),a("./accessibility/textOutput"),a("./accessibility/gridOutput"),a("./accessibility/color_namer"),a("./color/color_conversion"),a("./color/creating_reading"),a("./color/p5.Color"),a("./color/setting"),a("./data/p5.TypedDict"),a("./data/local_storage.js"),a("./dom/dom"),a("./accessibility/describe"),a("./events/acceleration"),a("./events/keyboard"),a("./events/mouse"),a("./events/touch"),a("./image/filters"),a("./image/image"),a("./image/loading_displaying"),a("./image/p5.Image"),a("./image/pixels"),a("./io/files"),a("./io/p5.Table"),a("./io/p5.TableRow"),a("./io/p5.XML"),a("./math/calculation"),a("./math/math"),a("./math/noise"),a("./math/p5.Vector"),a("./math/random"),a("./math/trigonometry"),a("./typography/attributes"),a("./typography/loading_displaying"),a("./typography/p5.Font"),a("./utilities/array_functions"),a("./utilities/conversion"),a("./utilities/string_functions"),a("./utilities/time_date"),a("./webgl/3d_primitives"),a("./webgl/interaction"),a("./webgl/light"),a("./webgl/loading"),a("./webgl/material"),a("./webgl/p5.Camera"),a("./webgl/p5.DataArray"),a("./webgl/p5.Geometry"),a("./webgl/p5.Matrix"),a("./webgl/p5.Quat"),a("./webgl/p5.RendererGL.Immediate"),a("./webgl/p5.RendererGL"),a("./webgl/p5.RendererGL.Retained"),a("./webgl/p5.Framebuffer"),a("./webgl/p5.Shader"),a("./webgl/p5.RenderBuffer"),a("./webgl/p5.Texture"),a("./webgl/text"),a("./core/init"),be.exports=M.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.ColorConversion={_hsbaToHSLA:function(M){var b=M[1],w=M[2],I=(2-b)*w/2;return 0!=I&&(1==I?b=0:I<.5?b/=2-b:b=b*w/(2-2*I)),[M[0],b,I,M[3]]},_hsbaToRGBA:function(M){var C,b,w,I,D,d=6*M[0],f=M[1],h=M[2];return 0===f?[h,h,h,M[3]]:(b=h*(1-f),w=h*(1-f*(d-(C=Math.floor(d)))),f=h*(1-f*(1+C-d)),d=1===C?(I=w,D=h,b):2===C?(I=b,D=h,f):3===C?(I=b,D=w,h):4===C?(I=f,D=b,h):5===C?(I=h,D=b,w):(I=h,D=f,b),[I,D,d,M[3]])},_hslaToHSBA:function(M){var b=M[1],w=M[2],I=w<.5?(1+b)*w:w+b-w*b;return[M[0],b=2*(I-w)/I,I,M[3]]},_hslaToRGBA:function(M){var C,b=6*M[0],w=M[1],I=M[2];return 0===w?[I,I,I,M[3]]:[(C=function(D,d,f){return D<0?D+=6:6<=D&&(D-=6),D<1?d+(f-d)*D:D<3?f:D<4?d+(f-d)*(4-D):d})(2+b,w=2*I-(I=I<.5?(1+w)*I:I+w-I*w),I),C(b,w,I),C(b-2,w,I),M[3]]},_rgbaToHSBA:function(M){var C,b,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d-Math.min(w,I,D);return 0==f?b=C=0:(b=f/d,w===d?C=(I-D)/f:I===d?C=2+(D-w)/f:D===d&&(C=4+(w-I)/f),C<0?C+=6:6<=C&&(C-=6)),[C/6,b,d,M[3]]},_rgbaToHSLA:function(M){var C,b,h,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d+(h=Math.min(w,I,D));return 0==(h=d-h)?b=C=0:(b=f<1?h/f:h/(2-f),w===d?C=(I-D)/h:I===d?C=2+(D-w)/h:D===d&&(C=4+(w-I)/h),C<0?C+=6:6<=C&&(C-=6)),[C/6,b,f/2,M[3]]}},Z.default=a=a.default.ColorConversion},{"../core/main":283}],269:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.map"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Color"),a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),b.default.prototype.alpha=function(d){return b.default._validateParameters("alpha",arguments),this.color(d)._getAlpha()},b.default.prototype.blue=function(d){return b.default._validateParameters("blue",arguments),this.color(d)._getBlue()},b.default.prototype.brightness=function(d){return b.default._validateParameters("brightness",arguments),this.color(d)._getBrightness()},b.default.prototype.color=function(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return b.default._validateParameters("color",h),h[0]instanceof b.default.Color?h[0]:(d=Array.isArray(h[0])?h[0]:h,new b.default.Color(this,d))},b.default.prototype.green=function(d){return b.default._validateParameters("green",arguments),this.color(d)._getGreen()},b.default.prototype.hue=function(d){return b.default._validateParameters("hue",arguments),this.color(d)._getHue()},b.default.prototype.lerpColor=function(d,f,h){b.default._validateParameters("lerpColor",arguments),d instanceof b.default.Color||(d=color(d)),f instanceof b.default.Color||(f=color(f));var p,m,g,x=this._colorMode,E=this._colorMaxes;if(x===w.RGB)m=d.levels.map(function(S){return S/255}),g=f.levels.map(function(S){return S/255});else if(x===w.HSB)d._getBrightness(),f._getBrightness(),m=d.hsba,g=f.hsba;else{if(x!==w.HSL)throw new Error("".concat(x," cannot be used for interpolation."));d._getLightness(),f._getLightness(),m=d.hsla,g=f.hsla}return h=Math.max(Math.min(h,1),0),void 0===this.lerp&&(this.lerp=function(S,k,q){return q*(k-S)+S}),x===w.RGB?p=this.lerp(m[0],g[0],h):(.5<Math.abs(m[0]-g[0])&&(m[0]>g[0]?g[0]+=1:m[0]+=1),1<=(p=this.lerp(m[0],g[0],h))&&--p),d=this.lerp(m[1],g[1],h),f=this.lerp(m[2],g[2],h),m=this.lerp(m[3],g[3],h),this.color(p*=E[x][0],d*=E[x][1],f*=E[x][2],m*=E[x][3])},b.default.prototype.paletteLerp=function(d,f){var h=d[0];if(f<h[1])return this.color(h[0]);for(var p=1;p<d.length;p++){var m,g=d[p];if(f<g[1])return this.lerpColor(this.color((m=d[p-1])[0]),this.color(g[0]),(f-m[1])/(g[1]-m[1]))}return this.color(d[d.length-1][0])},b.default.prototype.lightness=function(d){return b.default._validateParameters("lightness",arguments),this.color(d)._getLightness()},b.default.prototype.red=function(d){return b.default._validateParameters("red",arguments),this.color(d)._getRed()},b.default.prototype.saturation=function(d){return b.default._validateParameters("saturation",arguments),this.color(d)._getSaturation()};var D=b.default;Z.default=D},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(p,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}p("core-js/modules/es.symbol"),p("core-js/modules/es.symbol.description"),p("core-js/modules/es.symbol.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.iterator"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.get-own-property-descriptor"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.iterator"),p("core-js/modules/es.string.trim"),p("core-js/modules/es.weak-map"),p("core-js/modules/web.dom-collections.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=d(p("../core/main")),w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var k=D();if(k&&k.has(S))return k.get(S);var q,J={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in S){var V;Object.prototype.hasOwnProperty.call(S,q)&&((V=G?Object.getOwnPropertyDescriptor(S,q):null)&&(V.get||V.set)?Object.defineProperty(J,q,V):J[q]=S[q])}return J.default=S,k&&k.set(S,J),J}(p("../core/constants")),I=d(p("./color_conversion"));function D(){var S;return"function"!=typeof WeakMap?null:(D=function(){return S},S=new WeakMap)}function d(S){return S&&S.__esModule?S:{default:S}}function f(S,k){for(var q=0;q<k.length;q++){var J=k[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(S,J.key,J)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},E=(p=/\s*/,/(\d{1,3})/),m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(m.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",E.source,",",E.source,",",E.source,"\\)$"].join(p.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),RGBA:new RegExp(["^rgba\\(",E.source,",",E.source,",",E.source,",",m.source,"\\)$"].join(p.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSL:new RegExp(["^hsl\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSLA:new RegExp(["^hsla\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSB:new RegExp(["^hsb\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSBA:new RegExp(["^hsba\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i")};b.default.Color=function(){function S(G,V){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(G._colorMode,G._colorMaxes),![w.RGB,w.HSL,w.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=S._parseInputs.apply(this,V),this._calculateLevels()}var k,q,J;return k=S,J=[{key:"_parseInputs",value:function(G,V,K,$){var ne,Y=arguments.length,we=this.mode,Se=this.maxes[we],oe=[];if(3<=Y){for(oe[0]=G/Se[0],oe[1]=V/Se[1],oe[2]=K/Se[2],oe[3]="number"==typeof $?$/Se[3]:1,ne=oe.length-1;0<=ne;--ne){var ge=oe[ne];ge<0?oe[ne]=0:1<ge&&(oe[ne]=1)}return we===w.HSL?I.default._hslaToRGBA(oe):we===w.HSB?I.default._hsbaToRGBA(oe):oe}if(1===Y&&"string"==typeof G){if(K=G.trim().toLowerCase(),h[K])return S._parseInputs.call(this,h[K]);if(x.HEX3.test(K))return(oe=x.HEX3.exec(K).slice(1).map(function(re){return parseInt(re+re,16)/255}))[3]=1,oe;if(x.HEX6.test(K))return(oe=x.HEX6.exec(K).slice(1).map(function(re){return parseInt(re,16)/255}))[3]=1,oe;if(x.HEX4.test(K))return x.HEX4.exec(K).slice(1).map(function(re){return parseInt(re+re,16)/255});if(x.HEX8.test(K))return x.HEX8.exec(K).slice(1).map(function(re){return parseInt(re,16)/255});if(x.RGB.test(K))return(oe=x.RGB.exec(K).slice(1).map(function(re){return re/255}))[3]=1,oe;if(x.RGB_PERCENT.test(K))return(oe=x.RGB_PERCENT.exec(K).slice(1).map(function(re){return parseFloat(re)/100}))[3]=1,oe;if(x.RGBA.test(K))return x.RGBA.exec(K).slice(1).map(function(re,Q){return 3===Q?parseFloat(re):re/255});if(x.RGBA_PERCENT.test(K))return x.RGBA_PERCENT.exec(K).slice(1).map(function(re,Q){return 3===Q?parseFloat(re):parseFloat(re)/100});if(x.HSL.test(K)?(oe=x.HSL.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:parseInt(re,10)/100}))[3]=1:x.HSLA.test(K)&&(oe=x.HSLA.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:3===Q?parseFloat(re):parseInt(re,10)/100})),(oe=oe.map(function(re){return Math.max(Math.min(re,1),0)})).length)return I.default._hslaToRGBA(oe);if(x.HSB.test(K)?(oe=x.HSB.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:parseInt(re,10)/100}))[3]=1:x.HSBA.test(K)&&(oe=x.HSBA.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:3===Q?parseFloat(re):parseInt(re,10)/100})),oe.length){for(ne=oe.length-1;0<=ne;--ne)oe[ne]=Math.max(Math.min(oe[ne],1),0);return I.default._hsbaToRGBA(oe)}oe=[1,1,1,1]}else{if(1!==Y&&2!==Y||"number"!=typeof G)throw new Error("".concat(arguments,"is not a valid color representation."));oe[0]=G/Se[2],oe[1]=G/Se[2],oe[2]=G/Se[2],oe[3]="number"==typeof V?V/Se[3]:1,oe=oe.map(function(re){return Math.max(Math.min(re,1),0)})}return oe}}],(q=[{key:"toString",value:function(G){var V=this.levels,K=this._array,$=K[3];switch(G){case"#rrggbb":return"#".concat(V[0]<16?"0".concat(V[0].toString(16)):V[0].toString(16),V[1]<16?"0".concat(V[1].toString(16)):V[1].toString(16),V[2]<16?"0".concat(V[2].toString(16)):V[2].toString(16));case"#rrggbbaa":return"#".concat(V[0]<16?"0".concat(V[0].toString(16)):V[0].toString(16),V[1]<16?"0".concat(V[1].toString(16)):V[1].toString(16),V[2]<16?"0".concat(V[2].toString(16)):V[2].toString(16),V[3]<16?"0".concat(V[3].toString(16)):V[3].toString(16));case"#rgb":return"#".concat(Math.round(15*K[0]).toString(16),Math.round(15*K[1]).toString(16),Math.round(15*K[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*K[0]).toString(16),Math.round(15*K[1]).toString(16),Math.round(15*K[2]).toString(16),Math.round(15*K[3]).toString(16));case"rgb":return"rgb(".concat(V[0],", ",V[1],", ",V[2],")");case"rgb%":return"rgb(".concat((100*K[0]).toPrecision(3),"%, ",(100*K[1]).toPrecision(3),"%, ",(100*K[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*K[0]).toPrecision(3),"%, ",(100*K[1]).toPrecision(3),"%, ",(100*K[2]).toPrecision(3),"%, ",(100*K[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],", ",$,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*$).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],", ",$,")");case"hsla%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*$).toPrecision(3),"%)");default:return"rgba(".concat(V[0],",",V[1],",",V[2],",",$,")")}}},{key:"setRed",value:function(G){this._array[0]=G/this.maxes[w.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(G){this._array[1]=G/this.maxes[w.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(G){this._array[2]=G/this.maxes[w.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(G){this._array[3]=G/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var G=this._array,V=this.levels=new Array(G.length),K=G.length-1;0<=K;--K)V[K]=Math.round(255*G[K]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(G,V){this.mode=G,this.maxes=V}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[w.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[w.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[w.RGB][1]}},{key:"_getHue",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[w.HSB][0]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[w.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[w.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[w.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[w.HSB][1]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[w.HSL][1])}}])&&f(k.prototype,q),J&&f(k,J),S}(),Z.default=E=b.default.Color},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.fill"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Color"),b.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},b.default.prototype.endClip=function(){this._renderer.endClip()},b.default.prototype.clip=function(d,f){this._renderer.beginClip(f),d(),this._renderer.endClip(f)},b.default.prototype.background=function(){var d;return(d=this._renderer).background.apply(d,arguments),this},b.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},b.default.prototype.colorMode=function(d,f,h,p,m){return b.default._validateParameters("colorMode",arguments),d!==w.RGB&&d!==w.HSB&&d!==w.HSL||(this._colorMode=d,d=this._colorMaxes[d],2===arguments.length?(d[0]=f,d[1]=f,d[2]=f,d[3]=f):4===arguments.length?(d[0]=f,d[1]=h,d[2]=p):5===arguments.length&&(d[0]=f,d[1]=h,d[2]=p,d[3]=m)),this},b.default.prototype.fill=function(){var d;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(d=this._renderer).fill.apply(d,arguments),this},b.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},b.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},b.default.prototype.stroke=function(){var d;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(d=this._renderer).stroke.apply(d,arguments),this},b.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},b.default.prototype.noErase=function(){return this._renderer.noErase(),this};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.QUADRATIC=Z.LINEAR=Z._CTX_MIDDLE=Z._DEFAULT_LEADMULT=Z._DEFAULT_TEXT_FILL=Z.WORD=Z.CHAR=Z.BOLDITALIC=Z.BOLD=Z.ITALIC=Z.NORMAL=Z.BLUR=Z.ERODE=Z.DILATE=Z.POSTERIZE=Z.INVERT=Z.OPAQUE=Z.GRAY=Z.THRESHOLD=Z.BURN=Z.DODGE=Z.SOFT_LIGHT=Z.HARD_LIGHT=Z.OVERLAY=Z.REPLACE=Z.SCREEN=Z.MULTIPLY=Z.EXCLUSION=Z.SUBTRACT=Z.DIFFERENCE=Z.LIGHTEST=Z.DARKEST=Z.ADD=Z.REMOVE=Z.BLEND=Z.UP_ARROW=Z.TAB=Z.SHIFT=Z.RIGHT_ARROW=Z.RETURN=Z.OPTION=Z.LEFT_ARROW=Z.ESCAPE=Z.ENTER=Z.DOWN_ARROW=Z.DELETE=Z.CONTROL=Z.BACKSPACE=Z.ALT=Z.AUTO=Z.HSL=Z.HSB=Z.RGB=Z.MITER=Z.BEVEL=Z.ROUND=Z.SQUARE=Z.PROJECT=Z.PIE=Z.CHORD=Z.OPEN=Z.CLOSE=Z.TESS=Z.QUAD_STRIP=Z.QUADS=Z.TRIANGLE_STRIP=Z.TRIANGLE_FAN=Z.TRIANGLES=Z.LINE_LOOP=Z.LINE_STRIP=Z.LINES=Z.POINTS=Z.BASELINE=Z.BOTTOM=Z.TOP=Z.CENTER=Z.LEFT=Z.RIGHT=Z.RADIUS=Z.CORNERS=Z.CORNER=Z.RAD_TO_DEG=Z.DEG_TO_RAD=Z.RADIANS=Z.DEGREES=Z.TWO_PI=Z.TAU=Z.QUARTER_PI=Z.PI=Z.HALF_PI=Z.WAIT=Z.TEXT=Z.MOVE=Z.HAND=Z.CROSS=Z.ARROW=Z.WEBGL2=Z.WEBGL=Z.P2D=Z.VERSION=void 0,Z.RGBA=Z.HALF_FLOAT=Z.FLOAT=Z.UNSIGNED_INT=Z.UNSIGNED_BYTE=Z.COVER=Z.CONTAIN=Z.FALLBACK=Z.LABEL=Z.AXES=Z.GRID=Z._DEFAULT_FILL=Z._DEFAULT_STROKE=Z.PORTRAIT=Z.LANDSCAPE=Z.SMOOTH=Z.FLAT=Z.MIRROR=Z.CLAMP=Z.REPEAT=Z.NEAREST=Z.IMAGE=Z.IMMEDIATE=Z.TEXTURE=Z.FILL=Z.STROKE=Z.CURVE=Z.BEZIER=void 0;var M=Math.PI,C=(Z.VERSION="1.11.3",Z.P2D="p2d",Z.WEBGL="webgl",Z.WEBGL2="webgl2",Z.ARROW="default",Z.CROSS="crosshair",Z.HAND="pointer",Z.MOVE="move",Z.TEXT="text",Z.WAIT="wait",M/2);Z.HALF_PI=C,Z.PI=C=M,Z.QUARTER_PI=C=M/4,Z.TAU=C=2*M,Z.TWO_PI=C=2*M,Z.DEGREES="degrees",Z.RADIANS="radians",Z.DEG_TO_RAD=C=M/180,Z.RAD_TO_DEG=C=180/M,Z.CORNER="corner",Z.CORNERS="corners",Z.RADIUS="radius",Z.RIGHT="right",Z.LEFT="left",Z.CENTER="center",Z.TOP="top",Z.BOTTOM="bottom",Z.BASELINE="alphabetic",Z.POINTS=0,Z.LINES=1,Z.LINE_STRIP=3,Z.LINE_LOOP=2,Z.TRIANGLES=4,Z.TRIANGLE_FAN=6,Z.TRIANGLE_STRIP=5,Z.QUADS="quads",Z.QUAD_STRIP="quad_strip",Z.TESS="tess",Z.CLOSE="close",Z.OPEN="open",Z.CHORD="chord",Z.PIE="pie",Z.PROJECT="square",Z.SQUARE="butt",Z.ROUND="round",Z.BEVEL="bevel",Z.MITER="miter",Z.RGB="rgb",Z.HSB="hsb",Z.HSL="hsl",Z.AUTO="auto",Z.ALT=18,Z.BACKSPACE=8,Z.CONTROL=17,Z.DELETE=46,Z.DOWN_ARROW=40,Z.ENTER=13,Z.ESCAPE=27,Z.LEFT_ARROW=37,Z.OPTION=18,Z.RETURN=13,Z.RIGHT_ARROW=39,Z.SHIFT=16,Z.TAB=9,Z.UP_ARROW=38,Z.BLEND="source-over",Z.REMOVE="destination-out",Z.ADD="lighter",Z.DARKEST="darken",Z.LIGHTEST="lighten",Z.DIFFERENCE="difference",Z.SUBTRACT="subtract",Z.EXCLUSION="exclusion",Z.MULTIPLY="multiply",Z.SCREEN="screen",Z.REPLACE="copy",Z.OVERLAY="overlay",Z.HARD_LIGHT="hard-light",Z.SOFT_LIGHT="soft-light",Z.DODGE="color-dodge",Z.BURN="color-burn",Z.THRESHOLD="threshold",Z.GRAY="gray",Z.OPAQUE="opaque",Z.INVERT="invert",Z.POSTERIZE="posterize",Z.DILATE="dilate",Z.ERODE="erode",Z.BLUR="blur",Z.NORMAL="normal",Z.ITALIC="italic",Z.BOLD="bold",Z.BOLDITALIC="bold italic",Z.CHAR="CHAR",Z.WORD="WORD",Z._DEFAULT_TEXT_FILL="#000000",Z._DEFAULT_LEADMULT=1.25,Z._CTX_MIDDLE="middle",Z.LINEAR="linear",Z.QUADRATIC="quadratic",Z.BEZIER="bezier",Z.CURVE="curve",Z.STROKE="stroke",Z.FILL="fill",Z.TEXTURE="texture",Z.IMMEDIATE="immediate",Z.IMAGE="image",Z.NEAREST="nearest",Z.REPEAT="repeat",Z.CLAMP="clamp",Z.MIRROR="mirror",Z.FLAT="flat",Z.SMOOTH="smooth",Z.LANDSCAPE="landscape",Z.PORTRAIT="portrait",Z._DEFAULT_STROKE="#000000",Z._DEFAULT_FILL="#FFFFFF",Z.GRID="grid",Z.AXES="axes",Z.LABEL="label",Z.FALLBACK="fallback",Z.CONTAIN="contain",Z.COVER="cover",Z.UNSIGNED_BYTE="unsigned-byte",Z.UNSIGNED_INT="unsigned-int",Z.FLOAT="float",Z.HALF_FLOAT="half-float",Z.RGBA="rgba"},{}],273:[function(a,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function C(m){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.search"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.search"),a("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(w=a("./main"))&&w.__esModule?w:{default:w},w=function(m){if(m&&m.__esModule)return m;if(null===m||"object"!==C(m)&&"function"!=typeof m)return{default:m};var g=I();if(g&&g.has(m))return g.get(m);var x,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in m){var k;Object.prototype.hasOwnProperty.call(m,x)&&((k=S?Object.getOwnPropertyDescriptor(m,x):null)&&(k.get||k.set)?Object.defineProperty(E,x,k):E[x]=m[x])}return E.default=m,g&&g.set(m,E),E}(a("./constants"));function I(){var m;return"function"!=typeof WeakMap?null:(I=function(){return m},m=new WeakMap)}var D=[w.ARROW,w.CROSS,w.HAND,w.MOVE,w.TEXT,w.WAIT],d=(b.default.prototype._frameRate=0,b.default.prototype._lastFrameTime=window.performance.now(),b.default.prototype._targetFrameRate=60,window.print),f=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function p(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}b.default.prototype.print=function(){var m;arguments.length?(m=console).log.apply(m,arguments):f||(d(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(f=!0))},b.default.prototype.frameCount=0,b.default.prototype.deltaTime=0,b.default.prototype.focused=document.hasFocus(),b.default.prototype.cursor=function(m,g,x){var E,S="auto",k=this._curElement.elt;D.includes(m)?S=m:"string"==typeof m&&(E="",g&&x&&"number"==typeof g&&"number"==typeof x&&(E="".concat(g," ").concat(x)),S="http://"===m.substring(0,7)||"https://"===m.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(m)?"url(".concat(m,") ").concat(E,", auto"):m),k.style.cursor=S},b.default.prototype.frameRate=function(m){return b.default._validateParameters("frameRate",arguments),"number"!=typeof m||m<0?this._frameRate:(this._setProperty("_targetFrameRate",m),0===m&&this._setProperty("_frameRate",m),this)},b.default.prototype.getFrameRate=function(){return this.frameRate()},b.default.prototype.setFrameRate=function(m){return this.frameRate(m)},b.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},b.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},b.default.prototype.webglVersion=w.P2D,b.default.prototype.displayWidth=screen.width,b.default.prototype.displayHeight=screen.height,b.default.prototype.windowWidth=0,b.default.prototype.windowHeight=0,b.default.prototype._onresize=function(m){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p());var g=this._isGlobal?window:this;"function"!=typeof g.windowResized||void 0===(g=g.windowResized(m))||g||m.preventDefault()},b.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p())},b.default.prototype.width=0,b.default.prototype.height=0,b.default.prototype.fullscreen=function(m){if(b.default._validateParameters("fullscreen",arguments),void 0===m)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(m){if(m=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},b.default.prototype.pixelDensity=function(m){var g;return b.default._validateParameters("pixelDensity",arguments),"number"==typeof m?(m!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=m),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},b.default.prototype.displayDensity=function(){return window.devicePixelRatio},b.default.prototype.getURL=function(){return location.href},b.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(m){return""!==m})},b.default.prototype.getURLParams=function(){for(var m,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};null!=(m=g.exec(location.search));)m.index===g.lastIndex&&g.lastIndex++,x[m[1]]=m[2];return x},Z.default=a=b.default},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.starts-with"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.starts-with"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(D=a("../main"))&&D.__esModule?D:{default:D};function C(d,f){f=f||console.log.bind(console),b||I(),b.some(function(h){var p;if(d.message&&null!==d.message.match("\\W?".concat(h.name,"\\W")))return p="function"===h.type?"".concat(h.name,"()"):h.name,f("Did you just try to use p5.js's ".concat(p," ").concat(h.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(w)),!0})}a("../internationalization");var b=null,I=null,w=(M.default._friendlyError=M.default._checkForUserDefinedFunctions=M.default._fesErrorMonitor=function(){},b=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),D=(I=function(){function d(h){return Object.getOwnPropertyNames(h).filter(function(p){return"_"!==p[0]&&!(p in f)&&(f[p]=!0)}).map(function(p){var m="function"==typeof h[p]?"function":p===p.toUpperCase()?"constant":"variable";return{name:p,type:m}})}var f={};(b=[].concat(d(M.default.prototype),d(a("../constants")))).sort(function(h,p){return p.name.length-h.name.length})},M.default.prototype._helpForMisusedAtTopLevelCode=C,"complete"!==document.readyState&&(window.addEventListener("error",C,!1),window.addEventListener("load",function(){window.removeEventListener("error",C,!1)})),M.default);Z.default=D},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(M=a("../main"))&&M.__esModule?M:{default:M};a("../internationalization"),M.default._friendlyFileLoadError=function(){},Z.default=a=M.default},{"../internationalization":281,"../main":283}],276:[function(a,be,Z){"use strict";function M(z){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(z)}function C(z){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(ye){return M(ye)}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":M(ye)})(z)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=function re(z){return z&&z.__esModule?z:{default:z}}(a("../main"));function oe(){var z;return"function"!=typeof WeakMap?null:(oe=function(){return z},z=new WeakMap)}a("../internationalization"),function ge(z){if(z&&z.__esModule)return z;if(null===z||"object"!==C(z)&&"function"!=typeof z)return{default:z};var ye=oe();if(ye&&ye.has(z))return ye.get(z);var je,Je,gt={},Ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(je in z)Object.prototype.hasOwnProperty.call(z,je)&&((Je=Ct?Object.getOwnPropertyDescriptor(z,je):null)&&(Je.get||Je.set)?Object.defineProperty(gt,je,Je):gt[je]=z[je]);return gt.default=z,ye&&ye.set(z,gt),gt}(a("../constants")),b.default._fesCodeReader=function(){},Z.default=b.default},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(a,be,Z){"use strict";function M(){var C=/(^|@)\S+:\d+/,b=/^\s*at .*(\S+:\d+|\(native\))/m,w=/^(eval@)?(\[native code])?$/;return{parse:function(I){return void 0!==I.stacktrace||void 0!==I["opera#sourceloc"]?this.parseOpera(I):I.stack&&I.stack.match(b)?this.parseV8OrIE(I):I.stack?this.parseFFOrSafari(I):void 0},extractLocation:function(I){return-1===I.indexOf(":")?[I]:[(I=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(I.replace(/[()]/g,"")))[1],I[2]||void 0,I[3]||void 0]},parseV8OrIE:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(b)},this).map(function(D){var f=(d=(D=-1<D.indexOf("(eval ")?D.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):D).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),d=(d=f?d.replace(f[0],""):d).split(/\s+/).slice(1);return f=this.extractLocation(f?f[1]:d.pop()),{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseFFOrSafari:function(I){return I.stack.split("\n").filter(function(D){return!D.match(w)},this).map(function(D){var d,f;return-1===(D=-1<D.indexOf(" > eval")?D.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):D).indexOf("@")&&-1===D.indexOf(":")?{functionName:D}:{functionName:(f=D.match(d=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(D.replace(d,"")))[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseOpera:function(I){return!I.stacktrace||-1<I.message.indexOf("\n")&&I.message.split("\n").length>I.stacktrace.split("\n").length?this.parseOpera9(I):I.stack?this.parseOpera11(I):this.parseOpera10(I)},parseOpera9:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)/i,d=I.message.split("\n"),f=[],h=2,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera10:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=I.stacktrace.split("\n"),f=[],h=0,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera11:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(C)&&!D.match(/^Error created at/)},this).map(function(D){var d,h=D.split("@"),f=this.extractLocation(h.pop());return{functionName:(h=h.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(d=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):d)||"[arguments not available]"===d?void 0:d.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)}}}a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../main"))&&a.__esModule?a:{default:a}).default._getErrorStackParser=function(){return new M},Z.default=a=a.default},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(a,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(C=a("../main"))&&C.__esModule?C:{default:C};function b(){var I;return"function"!=typeof WeakMap?null:(b=function(){return I},I=new WeakMap)}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}(function(I){if(!(I&&I.__esModule||null===I||"object"!==w(I)&&"function"!=typeof I)){var D=b();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}f.default=I,D&&D.set(I,f)}})(a("../constants")),a("../internationalization"),C.default._validateParameters=C.default._clearValidateParamsCache=function(){},Z.default=a=C.default},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(a,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}function C(I){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=function(I){if(I&&I.__esModule)return I;if(null===I||"object"!==C(I)&&"function"!=typeof I)return{default:I};var D=w();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}return f.default=I,D&&D.set(I,f),f}(a("./constants"));function w(){var I;return"function"!=typeof WeakMap?null:(w=function(){return I},I=new WeakMap)}Z.default={modeAdjust:function(I,D,d,f,h){var p;return h===b.CORNER?p={x:I,y:D,w:Math.abs(d),h:Math.abs(f)}:h===b.CORNERS?p={x:Math.min(I,d),y:Math.min(D,f),w:Math.abs(d-I),h:Math.abs(f-D)}:h===b.RADIUS?p={x:I-(d=Math.abs(d)),y:D-(f=Math.abs(f)),w:2*d,h:2*f}:h===b.CENTER&&(p={x:I-.5*(d=Math.abs(d)),y:D-.5*(f=Math.abs(f)),w:d,h:f}),p}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(a,be,Z){"use strict";a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator");var M=(C=a("../core/main"))&&C.__esModule?C:{default:C};a("./internationalization");var C=Promise.resolve();Promise.all([new Promise(function(b,w){"complete"===document.readyState?b():window.addEventListener("load",b,!1)}),C]).then(function(){var b;void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(b=new Event("p5Ready"),window.dispatchEvent(b),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!M.default.instance&&new M.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(a,be,Z){"use strict";a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.setTranslatorLanguage=Z.currentTranslatorLanguage=Z.availableTranslatorLanguages=Z.initialize=Z.translator=void 0;var M,b=I(a("i18next")),w=I(a("i18next-browser-languagedetector"));function I(f){return f&&f.__esModule?f:{default:f}}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var d=function(){function f(g,x){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(g,x)}var h,p;return h=f,(p=[{key:"fetchWithTimeout",value:function(g,x){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(g,x),new Promise(function(S,k){return setTimeout(function(){return k(new Error("timeout"))},E)})])}},{key:"init",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=g,this.options=x}},{key:"read",value:function(g,x,E){var S=this.options.loadPath;g===this.options.fallback?E(null,M[g][x]):undefined.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:x}),this.loadUrl(S,E)):E("Not found",!1)}},{key:"loadUrl",value:function(g,x){this.fetchWithTimeout(g).then(function(E){if(E.ok)return E.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(E){return x(null,E)}).catch(x)}}])&&D(h.prototype,p),f}();d.type="backend",Z.translator=function(f,h){console.debug("p5.js translator called before translations were loaded"),b.default.t(f,h)},Z.initialize=function(){return b.default.use(w.default).use(d).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:M}).then(function(f){Z.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},Z.availableTranslatorLanguages=function(){return b.default.languages},Z.currentTranslatorLanguage=function(f){return b.default.language},Z.setTranslatorLanguage=function(f){return b.default.changeLanguage(f||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("./main"))&&a.__esModule?a:{default:a}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},a.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},a.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},a.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},Z.default=a=a.default},{"./main":283}],283:[function(a,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,a("./shim");var b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(a("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var D,d=function(){function f(g,S){var E=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},S=Object.getOwnPropertyNames(f.prototype._registeredMethods);var k=!0,q=!1,J=void 0;try{for(var G,V=S[Symbol.iterator]();!(k=(G=V.next()).done);k=!0){var K=G.value;this._registeredMethods[K]=f.prototype._registeredMethods[K].slice()}}catch(Q){q=!0,J=Q}finally{try{k||null==V.return||V.return()}finally{if(q)throw J}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),f.prototype.callRegisteredHooksFor=function(Q){var fe=this||f.prototype,Ce=this._isGlobal?window:this;if(fe._registeredMethods.hasOwnProperty(Q)){fe=fe._registeredMethods[Q];var it=!0,le=void(Q=!1);try{for(var z,ye=fe[Symbol.iterator]();!(it=(z=ye.next()).done);it=!0){var je=z.value;"function"==typeof je&&je.call(Ce)}}catch(Ct){Q=!0,le=Ct}finally{try{it||null==ye.return||ye.return()}finally{if(Q)throw le}}}},this._start=function(){E._userNode&&"string"==typeof E._userNode&&(E._userNode=document.getElementById(E._userNode));var Q=E._isGlobal?window:E;if(Q.preload){E.callRegisteredHooksFor("beforePreload");var fe,Ce=document.getElementById(E._loadingScreenId),it=(Ce||((Ce=document.createElement("div")).innerHTML="Loading...",Ce.style.position="absolute",Ce.id=E._loadingScreenId,(E._userNode||document.body).appendChild(Ce)),E._preloadMethods);for(fe in it){it[fe]=it[fe]||f;var le=it[fe];le!==f.prototype&&le!==f||(E._isGlobal&&(window[fe]=E._wrapPreload(E,fe)),le=E),E._registeredPreloadMethods[fe]=le[fe],le[fe]=E._wrapPreload(le,fe)}Q.preload(),E._runIfPreloadsAreDone()}else E._setup(),E._recording||E._draw()},this._runIfPreloadsAreDone=function(){var Q,fe=this._isGlobal?window:this;0===fe._preloadCount&&((Q=document.getElementById(fe._loadingScreenId))&&Q.parentNode.removeChild(Q),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),fe._setup(),this._recording||fe._draw()))},this._decrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||"function"!=typeof Q.preload||(Q._setProperty("_preloadCount",Q._preloadCount-1),Q._runIfPreloadsAreDone())},this._wrapPreload=function(Q,fe){var Ce=this;return function(){Ce._incrementPreload();for(var it=arguments.length,le=new Array(it),z=0;z<it;z++)le[z]=arguments[z];return Ce._registeredPreloadMethods[fe].apply(Q,le)}},this._incrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||Q._setProperty("_preloadCount",Q._preloadCount+1)},this._setup=function(){E.callRegisteredHooksFor("beforeSetup"),E.createCanvas(E._defaultCanvasSize.width,E._defaultCanvasSize.height,"p2d");var Q=E._isGlobal?window:E;if("function"==typeof Q.preload)for(var fe in E._preloadMethods)Q[fe]=E._preloadMethods[fe][fe],Q[fe]&&E&&(Q[fe]=Q[fe].bind(E));E._millisStart=window.performance.now(),Q._preloadDone=!0,"function"==typeof Q.setup&&Q.setup();var Ce=document.getElementsByTagName("canvas"),it=!0,le=!1,z=void 0;try{for(var ye,je=Ce[Symbol.iterator]();!(it=(ye=je.next()).done);it=!0){var Je=ye.value;"true"===Je.dataset.hidden&&(Je.style.visibility="",delete Je.dataset.hidden)}}catch(gt){le=!0,z=gt}finally{try{it||null==je.return||je.return()}finally{if(le)throw z}}E._lastTargetFrameTime=window.performance.now(),E._lastRealFrameTime=window.performance.now(),E._setupDone=!0,(E._accessibleOutputs.grid||E._accessibleOutputs.text)&&E._updateAccsOutput(),E.callRegisteredHooksFor("afterSetup")},this._draw=function(fe){fe=fe||window.performance.now();var it=1e3/E._targetFrameRate;(!E._loop||it-5<=fe-E._lastTargetFrameTime)&&(E.deltaTime=fe-E._lastRealFrameTime,E._setProperty("deltaTime",E.deltaTime),E._frameRate=1e3/E.deltaTime,E.redraw(),E._lastTargetFrameTime=Math.max(E._lastTargetFrameTime+it,fe),E._lastRealFrameTime=fe,void 0!==E._updateMouseCoords&&(E._updateMouseCoords(),E._setProperty("movedX",0),E._setProperty("movedY",0))),E._loop&&(E._requestAnimId=window.requestAnimationFrame(E._draw))},this._setProperty=function(Q,fe){E[Q]=fe,E._isGlobal&&(window[Q]=fe)},this.remove=function(){if(E._startListener&&window.removeEventListener("load",E._startListener,!1),(Q=document.getElementById(E._loadingScreenId))&&(Q.parentNode.removeChild(Q),E._incrementPreload()),E._curElement){for(var fe in E._loop=!1,E._requestAnimId&&window.cancelAnimationFrame(E._requestAnimId),E._events)window.removeEventListener(fe,E._events[fe]);var Ce=!0,Q=!1,it=void 0;try{for(var le,z=E._elements[Symbol.iterator]();!(Ce=(le=z.next()).done);Ce=!0){var ye,je=le.value;for(ye in je.elt&&je.elt.parentNode&&je.elt.parentNode.removeChild(je.elt),je._events)je.elt.removeEventListener(ye,je._events[ye])}}catch(yt){Q=!0,it=yt}finally{try{Ce||null==z.return||z.return()}finally{if(Q)throw it}}var Je=E;E._registeredMethods.remove.forEach(function(yt){void 0!==yt&&yt.call(Je)})}if(E._isGlobal){for(var gt in f.prototype)try{delete window[gt]}catch{window[gt]=void 0}for(var Ct in E)if(E.hasOwnProperty(Ct))try{delete window[Ct]}catch{window[Ct]=void 0}f.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(Q){void 0!==Q&&Q.call(this)},this),this._setupPromisePreloads();var $,ne,Y=this._createFriendlyGlobalFunctionBinder();if(g)g(this),f._checkForUserDefinedFunctions(this);else{for(var we in this._isGlobal=!0,f.instance=this,f.prototype)"function"==typeof f.prototype[we]?($=we.substring(2),this._events.hasOwnProperty($)||(Math.hasOwnProperty(we)&&Math[we]===f.prototype[we]?Y(we,f.prototype[we]):Y(we,f.prototype[we].bind(this)))):Y(we,f.prototype[we]);for(var Se in this)this.hasOwnProperty(Se)&&Y(Se,this[Se])}for(ne in this._events){var oe=this["_on".concat(ne)];oe&&(oe=oe.bind(this),window.addEventListener(ne,oe,{passive:!1}),this._events[ne]=oe)}function ge(){E._setProperty("focused",!0)}function re(){E._setProperty("focused",!1)}window.addEventListener("focus",ge),window.addEventListener("blur",re),this.registerMethod("remove",function(){window.removeEventListener("focus",ge),window.removeEventListener("blur",re)}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,p;return h=f,(p=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=b.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,x){f.prototype._preloadMethods.hasOwnProperty(g)||(f.prototype._preloadMethods[g]=x)}},{key:"registerMethod",value:function(g,x){var E=this||f.prototype;E._registeredMethods.hasOwnProperty(g)||(E._registeredMethods[g]=[]),E._registeredMethods[g].push(x)}},{key:"unregisterMethod",value:function(g,x){var E=this||f.prototype;if(E._registeredMethods.hasOwnProperty(g)){for(var S=E._registeredMethods[g],k=[],q=0;q<S.length;q++)S[q]===x&&k.push(q);for(var J=k.length-1;0<=J;J--)S.splice(k[J],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},x=g.globalObject||window;return g.log||console.log.bind(console),function(E,S){x[E]=S}}}])&&I(h.prototype,p),f}();for(D in d.instance=null,d.disableFriendlyErrors=!1,b)d.prototype[D]=b[D];d.VERSION=b.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={},Z.default=d},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("./main"))&&a.__esModule?a:{default:a};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Element=function(){function b(d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.elt=d,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var w,I,D;return w=b,D=[{key:"_adjustListener",value:function(d,f,h){return!1===f?M.default.Element._detachListener(d,h):M.default.Element._attachListener(d,f,h),this}},{key:"_attachListener",value:function(d,f,h){h._events[d]&&M.default.Element._detachListener(d,h),f=f.bind(h),h.elt.addEventListener(d,f,!1),h._events[d]=f}},{key:"_detachListener",value:function(d,f){f.elt.removeEventListener(d,f._events[d],!1),f._events[d]=null}}],(I=[{key:"parent",value:function(d){return void 0===d?this.elt.parentNode:("string"==typeof d?("#"===d[0]&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof M.default.Element&&(d=d.elt),d.appendChild(this.elt),this)}},{key:"id",value:function(d){return void 0===d?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(d){return void 0===d?this.elt.className:(this.elt.className=d,this)}},{key:"mousePressed",value:function(d){return M.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),d.call(this,f)},this),this}},{key:"doubleClicked",value:function(d){return M.default.Element._adjustListener("dblclick",d,this),this}},{key:"mouseWheel",value:function(d){return M.default.Element._adjustListener("wheel",d,this),this}},{key:"mouseReleased",value:function(d){return M.default.Element._adjustListener("mouseup",d,this),this}},{key:"mouseClicked",value:function(d){return M.default.Element._adjustListener("click",d,this),this}},{key:"mouseMoved",value:function(d){return M.default.Element._adjustListener("mousemove",d,this),this}},{key:"mouseOver",value:function(d){return M.default.Element._adjustListener("mouseover",d,this),this}},{key:"mouseOut",value:function(d){return M.default.Element._adjustListener("mouseout",d,this),this}},{key:"touchStarted",value:function(d){return M.default.Element._adjustListener("touchstart",d,this),this}},{key:"touchMoved",value:function(d){return M.default.Element._adjustListener("touchmove",d,this),this}},{key:"touchEnded",value:function(d){return M.default.Element._adjustListener("touchend",d,this),this}},{key:"dragOver",value:function(d){return M.default.Element._adjustListener("dragover",d,this),this}},{key:"dragLeave",value:function(d){return M.default.Element._adjustListener("dragleave",d,this),this}},{key:"_setProperty",value:function(d,f){this[d]=f}}])&&C(w.prototype,I),D&&C(w,D),b}(),Z.default=a=M.default.Element},{"./main":283}],285:[function(a,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(g=a("./main"))&&g.__esModule?g:{default:g},w=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=I();if(E&&E.has(x))return E.get(x);var S,k={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(k,S,J):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(a("./constants"));function I(){var x;return"function"!=typeof WeakMap?null:(I=function(){return x},x=new WeakMap)}function D(x,E){for(var S=0;S<E.length;S++){var k=E[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(x,E)}function h(x,E){return!E||"object"!==C(E)&&"function"!=typeof E?p(x):E}function p(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function m(x){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}b.default.Graphics=function(x){var E=q;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var k=function f(x){return function(){var E,S=m(x);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=m(this).constructor,Reflect.construct(S,arguments,E)):S.apply(this,arguments))}}(q);function q(J,G,Se,K,$){var ne;if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");we=$||document.createElement("canvas"),(ne=k.call(this,we,K)).canvas=we;var Y,we=Se||w.P2D;for(Y in Se=K._userNode||document.body,$||Se.appendChild(ne.canvas),b.default.prototype)ne[Y]||(ne[Y]="function"==typeof b.default.prototype[Y]?b.default.prototype[Y].bind(p(ne)):b.default.prototype[Y]);return b.default.prototype._initializeInstanceVariables.apply(p(ne)),ne.width=J,ne.height=G,ne._pixelDensity=K._pixelDensity,we===w.WEBGL?(ne._renderer=new b.default.RendererGL(ne.canvas,p(ne),!1),J=($=ne._renderer._adjustDimensions(J,G)).adjustedWidth,G=$.adjustedHeight):ne._renderer=new b.default.Renderer2D(ne.canvas,p(ne),!1),K._elements.push(p(ne)),Object.defineProperty(p(ne),"deltaTime",{get:function(){return this._pInst.deltaTime}}),ne._renderer.resize(J,G),ne._renderer._applyDefaults(),h(ne,p(ne))}return E=q,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var J,G=this._pInst._elements.indexOf(this);for(J in-1!==G&&this._pInst._elements.splice(G,1),this._events)this.elt.removeEventListener(J,this._events[J]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(J){return new b.default.Framebuffer(this,J)}}])&&D(E.prototype,x),q}(b.default.Element);var g=b.default.Graphics;Z.default=g},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(a,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(m=a("./main"))&&m.__esModule?m:{default:m},b=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==I(x)&&"function"!=typeof x)return{default:x};var E=w();if(E&&E.has(x))return E.get(x);var S,k={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(k,S,J):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(a("../core/constants"));function w(){var x;return"function"!=typeof WeakMap?null:(w=function(){return x},x=new WeakMap)}function I(x){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}function D(x,E){for(var S=0;S<E.length;S++){var k=E[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(x,E)}function h(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}var m=function(x){var E=q;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var k=function f(x){return function(){var E,S,k=p(x);return E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=p(this).constructor,Reflect.construct(k,arguments,E)):k.apply(this,arguments),k=this,!(S=E)||"object"!==I(S)&&"function"!=typeof S?h(k):S}}(q);function q(J,G,V){var K;if(this instanceof q)return(K=k.call(this,J,G)).canvas=J,K._pixelsState=G,V?(K._isMainCanvas=!0,K._pInst._setProperty("_curElement",h(K)),K._pInst._setProperty("canvas",K.canvas),K._pInst._setProperty("width",K.width),K._pInst._setProperty("height",K.height)):(K.canvas.style.display="none",K._styles=[]),K._clipping=!1,K._clipInvert=!1,K._textSize=12,K._textLeading=15,K._textFont="sans-serif",K._textStyle=b.NORMAL,K._textAscent=null,K._textDescent=null,K._textAlign=b.LEFT,K._textBaseline=b.BASELINE,K._textWrap=b.WORD,K._rectMode=b.CORNER,K._ellipseMode=b.CENTER,K._curveTightness=0,K._imageMode=b.CORNER,K._tint=null,K._doStroke=!0,K._doFill=!0,K._strokeSet=!1,K._fillSet=!1,K._leadingSet=!1,K._pushPopDepth=0,K;throw new TypeError("Cannot call a class as a function")}return E=q,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(J){this._pushPopDepth--,J.properties&&Object.assign(this,J.properties)}},{key:"beginClip",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=J.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(J,G){this.width=J,this.height=G,this.elt.width=J*this._pInst._pixelDensity,this.elt.height=G*this._pInst._pixelDensity,this.elt.style.width="".concat(J,"px"),this.elt.style.height="".concat(G,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(J,G,V,K){var $=this._pixelsState,ne=$._pixelDensity,Y=this.canvas;if(void 0===J&&void 0===G)J=G=0,V=$.width,K=$.height;else if(J*=ne,G*=ne,void 0===V&&void 0===K)return J<0||G<0||J>=Y.width||G>=Y.height?[0,0,0,0]:this._getPixel(J,G);return($=new C.default.Image(V*ne,K*ne)).pixelDensity(ne),$.canvas.getContext("2d").drawImage(Y,J,G,V*ne,K*ne,0,0,V*ne,K*ne),$}},{key:"textLeading",value:function(J){return"number"==typeof J?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",J),this._pInst):this._textLeading}},{key:"textStyle",value:function(J){return J?(J!==b.NORMAL&&J!==b.ITALIC&&J!==b.BOLD&&J!==b.BOLDITALIC||this._setProperty("_textStyle",J),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(J,G){return void 0!==J?(this._setProperty("_textAlign",J),void 0!==G&&this._setProperty("_textBaseline",G),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(J){return this._setProperty("_textWrap",J),this._textWrap}},{key:"text",value:function(J,G,V,K,$){var ne,Y,we,Se,oe=this._pInst,ge=this._textWrap,re=Number.MAX_VALUE,Q=V;if((this._doFill||this._doStroke)&&void 0!==J){if(ne=(J=(J="string"!=typeof J?J.toString():J).replace(/(\t)/g,"  ")).split("\n"),void 0!==K){switch(this._rectMode===b.CENTER&&(G-=K/2),this._textAlign){case b.CENTER:G+=K/2;break;case b.RIGHT:G+=K}if(void 0!==$){this._rectMode===b.CENTER&&(V-=$/2,Q-=$/2),J=V;var fe=oe.textAscent();switch(this._textBaseline){case b.BOTTOM:Se=V+$,V=Math.max(Se,V),Q+=fe;break;case b.CENTER:Se=V+$/2,V=Math.max(Se,V),Q+=fe/2}re=V+$-fe,this._textBaseline===b.CENTER&&(re=J+$-fe/2)}else this._textBaseline!==b.BOTTOM&&this._textBaseline!==b.CENTER||(Q=V-(J=oe.textSize()*this._textLeading)/2,re=V+J/2);if(ge===b.WORD){for(var Ce=[],it=0;it<ne.length;it++){for(var le="",z=ne[it].split(" "),ye=0;ye<z.length;ye++)Y="".concat(le+z[ye])+" ",le=K<(we=this.textWidth(Y))&&0<le.length?(Ce.push(le),"".concat(z[ye])+" "):Y;Ce.push(le)}var je=0;this._textBaseline===b.CENTER?je=(Ce.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(je=(Ce.length-1)*oe.textLeading());for(var Je=0;Je<ne.length;Je++){le="",z=ne[Je].split(" ");for(var gt=0;gt<z.length;gt++)Y="".concat(le+z[gt])+" ",K<(we=this.textWidth(Y))&&0<le.length?(this._renderText(oe,le.trim(),G,V-je,re,Q),le="".concat(z[gt])+" ",V+=oe.textLeading()):le=Y;this._renderText(oe,le.trim(),G,V-je,re,Q),V+=oe.textLeading()}}else{for(var Ct=[],$t=0;$t<ne.length;$t++)for(var yt=ne[$t].split(le=""),Ut=0;Ut<yt.length;Ut++)Y="".concat(le+yt[Ut]),(we=this.textWidth(Y))<=K?le+=yt[Ut]:K<we&&0<le.length&&(Ct.push(le),le="".concat(yt[Ut]));Ct.push(le);var Xt=0;this._textBaseline===b.CENTER?Xt=(Ct.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Xt=(Ct.length-1)*oe.textLeading());for(var ft=0;ft<ne.length;ft++){yt=ne[ft].split(le="");for(var jt=0;jt<yt.length;jt++)Y="".concat(le+yt[jt]),(we=this.textWidth(Y))<=K?le+=yt[jt]:K<we&&0<le.length&&(this._renderText(oe,le.trim(),G,V-Xt,re,Q),V+=oe.textLeading(),le="".concat(yt[jt]))}this._renderText(oe,le.trim(),G,V-Xt,re,Q),V+=oe.textLeading()}}else{var Lt=0;this._textBaseline===b.CENTER?Lt=(ne.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Lt=(ne.length-1)*oe.textLeading());for(var Bt=0;Bt<ne.length;Bt++)this._renderText(oe,ne[Bt],G,V-Lt,re,Q-Lt),V+=oe.textLeading()}return oe}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===I(J)&&J.font&&J.font.supported}},{key:"_updateTextMetrics",value:function(){var J,G,V,K,$,ne;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((J=document.createElement("span")).style.fontFamily=this._textFont,J.style.fontSize="".concat(this._textSize,"px"),J.innerHTML="ABCjgq|",(ne=document.createElement("div")).style.display="inline-block",ne.style.width="1px",ne.style.height="0px",(G=document.createElement("div")).appendChild(J),G.appendChild(ne),G.style.height="0px",G.style.overflow="hidden",document.body.appendChild(G),ne.style.verticalAlign="baseline",K=g(ne),$=g(J),V=K[1]-$[1],ne.style.verticalAlign="bottom",K=g(ne),$=g(J),ne=K[1]-$[1]-V,document.body.removeChild(G),this._setProperty("_textAscent",V),this._setProperty("_textDescent",ne)),this}}])&&D(E.prototype,x),q}(C.default.Element);function g(x){var E=0,S=0;if(x.offsetParent)for(;E+=x.offsetLeft,S+=x.offsetTop,x=x.offsetParent;);else E+=x.offsetLeft,S+=x.offsetTop;return[E,S]}m.prototype.textSize=function(x){return"number"==typeof x?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*b._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},C.default.Renderer=m,Z.default=a=C.default.Renderer},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(x,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(g=x("./main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var k,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=J?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(q,k,G):q[k]=E[k])}return q.default=E,S&&S.set(E,q),q}(x("./constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){for(var k=0;k<S.length;k++){var q=S[k];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function d(E,S,k){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,J,G){if(V=function(K,$){for(;!Object.prototype.hasOwnProperty.call(K,$)&&null!==(K=p(K)););return K}(V,J))return(V=Object.getOwnPropertyDescriptor(V,J)).get?V.get.call(G):V.value})(E,S,k||E)}function f(E,S){return(f=Object.setPrototypeOf||function(k,q){return k.__proto__=q,k})(E,S)}function p(E){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}x("./p5.Renderer");var m="rgba(0,0,0,0)",g=function(E){var S=J;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&f(S,E);var q=function h(E){return function(){var S,k=p(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=p(this).constructor,Reflect.construct(k,arguments,S)):k.apply(this,arguments),k=this,!S||"object"!==C(S)&&"function"!=typeof S){if(void 0!==k)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(J);function J(G,V,K){if(this instanceof J)return(G=q.call(this,G,V,K)).drawingContext=G.canvas.getContext("2d"),G._pInst._setProperty("drawingContext",G.drawingContext),G;throw new TypeError("Cannot call a class as a function")}return S=J,(E=[{key:"getFilterGraphicsLayer",value:function(){return this.filterGraphicsLayer||(this.filterGraphicsLayer=new b.default.Graphics(this.width,this.height,w.WEBGL,(this._pInst instanceof b.default.Graphics?this._pInst:this)._pInst)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=w.BLEND,this._setFill(w._DEFAULT_FILL),this._setStroke(w._DEFAULT_STROKE),this.drawingContext.lineCap=w.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(G,V){d(p(J.prototype),"resize",this).call(this,G,V),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var G,V;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof b.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(G=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(G,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(G=this._getFill(),V=(V=this._pInst).color.apply(V,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(V.levels),V=V.toString(),this._setFill(V),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(G),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setFill(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",G.levels)}},{key:"stroke",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setStroke(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",G.levels)}},{key:"erase",value:function(G,V){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,G).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,V).toString(),this.drawingContext.strokeStyle=G,V=this._cachedBlendMode,this.blendMode(w.REMOVE),this._cachedBlendMode=V,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(p(J.prototype),"beginClip",this).call(this,G),this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=G,G=this._cachedBlendMode,this.blendMode(w.BLEND),this._cachedBlendMode=G,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),d(p(J.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(G,V,K,$,ne,Y,we,Se,oe){G.gifProperties&&G._animateGif(this._pInst);try{b.default.MediaElement&&G instanceof b.default.MediaElement&&G._ensureCanvas();var ge=(ge=this._tint&&G.canvas?this._getTintedImageCanvas(G):ge)||G.canvas||G.elt,re=1;G.width&&0<G.width&&(re=ge.width/G.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(ge,re*V,re*K,re*$,re*ne,Y,we,Se,oe),this._isErasing&&this._pInst.erase()}catch(Q){if("NS_ERROR_NOT_AVAILABLE"!==Q.name)throw Q}}},{key:"_getTintedImageCanvas",value:function(G){if(!G.canvas)return G;G.tintCanvas||(G.tintCanvas=document.createElement("canvas")),G.tintCanvas.width!==G.canvas.width&&(G.tintCanvas.width=G.canvas.width),G.tintCanvas.height!==G.canvas.height&&(G.tintCanvas.height=G.canvas.height);var V=G.tintCanvas.getContext("2d");return V.save(),V.clearRect(0,0,G.canvas.width,G.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(V.drawImage(G.canvas,0,0),V.globalCompositeOperation="luminosity",V.drawImage(G.canvas,0,0),V.globalCompositeOperation="color",V.drawImage(G.canvas,0,0),V.globalCompositeOperation="multiply",V.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),V.fillRect(0,0,G.canvas.width,G.canvas.height),V.globalCompositeOperation="destination-in"),V.globalAlpha=this._tint[3]/255,V.drawImage(G.canvas,0,0),V.restore(),G.tintCanvas}},{key:"blendMode",value:function(G){if(G===w.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(G!==w.BLEND&&G!==w.REMOVE&&G!==w.DARKEST&&G!==w.LIGHTEST&&G!==w.DIFFERENCE&&G!==w.MULTIPLY&&G!==w.EXCLUSION&&G!==w.SCREEN&&G!==w.REPLACE&&G!==w.OVERLAY&&G!==w.HARD_LIGHT&&G!==w.SOFT_LIGHT&&G!==w.DODGE&&G!==w.BURN&&G!==w.ADD)throw new Error("Mode ".concat(G," not recognized."));this._cachedBlendMode=G,this.drawingContext.globalCompositeOperation=G}}},{key:"blend",value:function(){for(var G=this.drawingContext.globalCompositeOperation,V=arguments.length,K=new Array(V),$=0;$<V;$++)K[$]=arguments[$];var ne=K[K.length-1],Y=Array.prototype.slice.call(K,0,K.length-1);this.drawingContext.globalCompositeOperation=ne,b.default.prototype.copy.apply(this,Y),this.drawingContext.globalCompositeOperation=G}},{key:"_getPixel",value:function(G,V){return[(G=this.drawingContext.getImageData(G,V,1,1).data)[0],G[1],G[2],G[3]]}},{key:"loadPixels",value:function(){var V,G=this._pixelsState,K=this.drawingContext.getImageData(0,0,K=this.width*(V=G._pixelDensity),V*=this.height);G._setProperty("imageData",K),G._setProperty("pixels",K.data)}},{key:"set",value:function(G,V,K){G=Math.floor(G),V=Math.floor(V);var $=this._pixelsState;if(K instanceof b.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale($._pixelDensity,$._pixelDensity),this.drawingContext.clearRect(G,V,K.width,K.height),this.drawingContext.drawImage(K.canvas,G,V),this.drawingContext.restore();else{var ne=0,Y=0,we=0,Se=0,oe=4*(V*$._pixelDensity*(this.width*$._pixelDensity)+G*$._pixelDensity);if($.imageData||$.loadPixels(),"number"==typeof K)oe<$.pixels.length&&(we=Y=ne=K,Se=255);else if(Array.isArray(K)){if(K.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");oe<$.pixels.length&&(ne=K[0],Y=K[1],we=K[2],Se=K[3])}else K instanceof b.default.Color&&oe<$.pixels.length&&(ne=K.levels[0],Y=K.levels[1],we=K.levels[2],Se=K.levels[3]);for(var ge=0;ge<$._pixelDensity;ge++)for(var re=0;re<$._pixelDensity;re++)$.pixels[oe=4*((V*$._pixelDensity+re)*this.width*$._pixelDensity+(G*$._pixelDensity+ge))]=ne,$.pixels[oe+1]=Y,$.pixels[oe+2]=we,$.pixels[oe+3]=Se}}},{key:"updatePixels",value:function(G,V,K,$){var ne=this._pixelsState,Y=ne._pixelDensity;void 0===G&&void 0===V&&void 0===K&&void 0===$&&(V=G=0,K=this.width,$=this.height),G*=Y,V*=Y,K*=Y,$*=Y,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=ne.imageData),this.drawingContext.putImageData(ne.imageData,0,0,G,V,K,$)}},{key:"arc",value:function(oe,ge,re,Q,ne,Y,we){var Se=this.drawingContext,fe=(oe+=re/2,ge+=Q/2,re/=2,Q/=2,!(we===w.CHORD||we===w.OPEN||(Y-ne)%w.TWO_PI==0));return this._doFill&&(this._clipping||Se.beginPath(),Se.ellipse(oe,ge,re,Q,0,ne,Y),fe&&Se.lineTo(oe,ge),Se.closePath(),this._clipping||Se.fill()),this._doStroke&&(this._clipping||Se.beginPath(),Se.ellipse(oe,ge,re,Q,0,ne,Y),we===w.PIE&&fe&&Se.lineTo(oe,ge),we!==w.PIE&&we!==w.CHORD||Se.closePath(),this._clipping||Se.stroke()),this}},{key:"ellipse",value:function(Se){var V=this.drawingContext,K=this._doFill,$=this._doStroke,ne=parseFloat(Se[0]),Y=parseFloat(Se[1]),we=parseFloat(Se[2]);if(Se=parseFloat(Se[3]),K&&!$){if(this._getFill()===m)return this}else if(!K&&$&&this._getStroke()===m)return this;ne+=we/2,Y+=Se/2,we/=2,Se/=2,this._clipping||V.beginPath(),V.ellipse(ne,Y,we,Se,0,0,2*Math.PI),V.closePath(),!this._clipping&&K&&V.fill(),!this._clipping&&$&&V.stroke()}},{key:"line",value:function(G,V,K,$){var ne=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(this._clipping||ne.beginPath(),ne.moveTo(G,V),ne.lineTo(K,$),ne.stroke()),this}},{key:"point",value:function(G,V){var K,$,ne=this.drawingContext;return this._doStroke&&this._getStroke()!==m?(K=this._getStroke(),$=this._getFill(),this._clipping||this._setFill(K),this._clipping||ne.beginPath(),ne.arc(G,V,ne.lineWidth/2,0,w.TWO_PI,!1),void(this._clipping||(ne.fill(),this._setFill($)))):this}},{key:"quad",value:function(G,V,K,$,ne,Y,we,Se){var oe=this.drawingContext,ge=this._doFill,re=this._doStroke;if(ge&&!re){if(this._getFill()===m)return this}else if(!ge&&re&&this._getStroke()===m)return this;return this._clipping||oe.beginPath(),oe.moveTo(G,V),oe.lineTo(K,$),oe.lineTo(ne,Y),oe.lineTo(we,Se),oe.closePath(),!this._clipping&&ge&&oe.fill(),!this._clipping&&re&&oe.stroke(),this}},{key:"rect",value:function(re){var V,K,$=re[0],ne=re[1],Y=re[2],we=re[3],Se=re[4],oe=re[5],ge=re[6],Q=(re=re[7],this.drawingContext),fe=this._doFill,Ce=this._doStroke;if(fe&&!Ce){if(this._getFill()===m)return this}else if(!fe&&Ce&&this._getStroke()===m)return this;return this._clipping||Q.beginPath(),void 0===Se?Q.rect($,ne,Y,we):(void 0===oe&&(oe=Se),void 0===ge&&(ge=oe),void 0===re&&(re=ge),Ce=(fe=Math.abs(Y))/2,K=(V=Math.abs(we))/2,Q.roundRect($,ne,Y,we,[Se=V<2*(Se=fe<2*Se?Ce:Se)?K:Se,oe=V<2*(oe=fe<2*oe?Ce:oe)?K:oe,ge=V<2*(ge=fe<2*ge?Ce:ge)?K:ge,re=V<2*(re=fe<2*re?Ce:re)?K:re])),!this._clipping&&this._doFill&&Q.fill(),!this._clipping&&this._doStroke&&Q.stroke(),this}},{key:"triangle",value:function(ge){var V=this.drawingContext,K=this._doFill,$=this._doStroke,ne=ge[0],Y=ge[1],we=ge[2],Se=ge[3],oe=ge[4];if(ge=ge[5],K&&!$){if(this._getFill()===m)return this}else if(!K&&$&&this._getStroke()===m)return this;this._clipping||V.beginPath(),V.moveTo(ne,Y),V.lineTo(we,Se),V.lineTo(oe,ge),V.closePath(),!this._clipping&&K&&V.fill(),!this._clipping&&$&&V.stroke()}},{key:"endShape",value:function(G,V,K,$,ne,Y,we){if(0!==V.length&&(this._doStroke||this._doFill)){var Se,oe,ge,re=G===w.CLOSE,Q=(re&&!Y&&V.push(V[0]),V.length);if(K&&null===we){if(3<Q){var fe=[],Ce=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[1][0],V[1][1]),oe=1;oe+2<Q;oe++)fe[0]=[(Se=V[oe])[0],Se[1]],fe[1]=[Se[0]+(Ce*V[oe+1][0]-Ce*V[oe-1][0])/6,Se[1]+(Ce*V[oe+1][1]-Ce*V[oe-1][1])/6],fe[2]=[V[oe+1][0]+(Ce*V[oe][0]-Ce*V[oe+2][0])/6,V[oe+1][1]+(Ce*V[oe][1]-Ce*V[oe+2][1])/6],fe[3]=[V[oe+1][0],V[oe+1][1]],this.drawingContext.bezierCurveTo(fe[1][0],fe[1][1],fe[2][0],fe[2][1],fe[3][0],fe[3][1]);re&&this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this._doFillStrokeClose(re)}}else if($&&null===we){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<Q;oe++)V[oe].isVert?V[oe].moveTo?this.drawingContext.moveTo(V[oe][0],V[oe][1]):this.drawingContext.lineTo(V[oe][0],V[oe][1]):this.drawingContext.bezierCurveTo(V[oe][0],V[oe][1],V[oe][2],V[oe][3],V[oe][4],V[oe][5]);this._doFillStrokeClose(re)}else if(ne&&null===we){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<Q;oe++)V[oe].isVert?V[oe].moveTo?this.drawingContext.moveTo(V[oe][0],V[oe][1]):this.drawingContext.lineTo(V[oe][0],V[oe][1]):this.drawingContext.quadraticCurveTo(V[oe][0],V[oe][1],V[oe][2],V[oe][3]);this._doFillStrokeClose(re)}else if(we===w.POINTS)for(oe=0;oe<Q;oe++)Se=V[oe],this._doStroke&&this._pInst.stroke(Se[6]),this._pInst.point(Se[0],Se[1]);else if(we===w.LINES)for(oe=0;oe+1<Q;oe+=2)Se=V[oe],this._doStroke&&this._pInst.stroke(V[oe+1][6]),this._pInst.line(Se[0],Se[1],V[oe+1][0],V[oe+1][1]);else if(we===w.TRIANGLES)for(oe=0;oe+2<Q;oe+=3)Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(V[oe+2][0],V[oe+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(V[oe+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(V[oe+2][6]),this.drawingContext.stroke());else if(we===w.TRIANGLE_STRIP)for(oe=0;oe+1<Q;oe++)Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(Se[0],Se[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+1][5]),oe+2<Q&&(this.drawingContext.lineTo(V[oe+2][0],V[oe+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+2][5])),this._doFillStrokeClose(re);else if(we===w.TRIANGLE_FAN){if(2<Q){for(this._clipping||this.drawingContext.beginPath(),oe=2;oe<Q;oe++)Se=V[oe],this.drawingContext.moveTo(V[0][0],V[0][1]),this.drawingContext.lineTo(V[oe-1][0],V[oe-1][1]),this.drawingContext.lineTo(Se[0],Se[1]),this.drawingContext.lineTo(V[0][0],V[0][1]),oe<Q-1&&(this._doFill&&Se[5]!==V[oe+1][5]||this._doStroke&&Se[6]!==V[oe+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(Se[5]),this.drawingContext.fill(),this._pInst.fill(V[oe+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(Se[6]),this.drawingContext.stroke(),this._pInst.stroke(V[oe+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(re)}}else if(we===w.QUADS)for(oe=0;oe+3<Q;oe+=4){for(Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(Se[0],Se[1]),ge=1;ge<4;ge++)this.drawingContext.lineTo(V[oe+ge][0],V[oe+ge][1]);this.drawingContext.lineTo(Se[0],Se[1]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+3][6]),this._doFillStrokeClose(re)}else if(we===w.QUAD_STRIP){if(3<Q)for(oe=0;oe+1<Q;oe+=2)Se=V[oe],this._clipping||this.drawingContext.beginPath(),oe+3<Q?(this.drawingContext.moveTo(V[oe+2][0],V[oe+2][1]),this.drawingContext.lineTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(V[oe+3][0],V[oe+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+3][6])):(this.drawingContext.moveTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1])),this._doFillStrokeClose(re)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[0][0],V[0][1]),oe=1;oe<Q;oe++)(Se=V[oe]).isVert&&(Se.moveTo?(re&&this.drawingContext.closePath(),this.drawingContext.moveTo(Se[0],Se[1])):this.drawingContext.lineTo(Se[0],Se[1]));this._doFillStrokeClose(re)}Y=ne=$=K=!1,re&&V.pop()}return this}},{key:"strokeCap",value:function(G){return G!==w.ROUND&&G!==w.SQUARE&&G!==w.PROJECT||(this.drawingContext.lineCap=G),this}},{key:"strokeJoin",value:function(G){return G!==w.ROUND&&G!==w.BEVEL&&G!==w.MITER||(this.drawingContext.lineJoin=G),this}},{key:"strokeWeight",value:function(G){return this.drawingContext.lineWidth=void 0===G||0===G?1e-4:G,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(G){G!==this._cachedFillStyle&&(this.drawingContext.fillStyle=G,this._cachedFillStyle=G)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(G){G!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=G,this._cachedStrokeStyle=G)}},{key:"bezier",value:function(G,V,K,$,ne,Y,we,Se){return this._pInst.beginShape(),this._pInst.vertex(G,V),this._pInst.bezierVertex(K,$,ne,Y,we,Se),this._pInst.endShape(),this}},{key:"curve",value:function(G,V,K,$,ne,Y,we,Se){return this._pInst.beginShape(),this._pInst.curveVertex(G,V),this._pInst.curveVertex(K,$),this._pInst.curveVertex(ne,Y),this._pInst.curveVertex(we,Se),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(G){G&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(G,V,K,$,ne,Y){this.drawingContext.transform(G,V,K,$,ne,Y)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(G){this.drawingContext.rotate(G)}},{key:"scale",value:function(G,V){return this.drawingContext.scale(G,V),this}},{key:"translate",value:function(G,V){return G instanceof b.default.Vector&&(V=G.y,G=G.x),this.drawingContext.translate(G,V),this}},{key:"_renderText",value:function(G,V,K,$,ne,Y){if(!($<Y||ne<=$))return G.push(),this._isOpenType()?this._textFont._renderPath(V,K,$,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(V,K,$),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(w._DEFAULT_TEXT_FILL),this.drawingContext.fillText(V,K,$))),G.pop(),G}},{key:"textWidth",value:function(G){return this._isOpenType()?this._textFont._textWidth(G,this._textSize):this.drawingContext.measureText(G).width}},{key:"_applyTextProperties",value:function(){var G=this._pInst,V=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),V=this._textFont,this._isOpenType()&&(V=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),V||"sans-serif");return/\s/.exec(V)&&(V='"'.concat(V,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(V),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===w.CENTER?w._CTX_MIDDLE:this._textBaseline,G}},{key:"push",value:function(){return this.drawingContext.save(),d(p(J.prototype),"push",this).call(this)}},{key:"pop",value:function(G){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d(p(J.prototype),"pop",this).call(this,G)}}])&&D(S.prototype,E),J}(b.default.Renderer);g.prototype.text=function(E,S,k,V,J){var G;return void 0!==V&&this.drawingContext.textBaseline===w.BASELINE&&(G=!0,this.drawingContext.textBaseline=w.TOP),V=b.default.Renderer.prototype.text.apply(this,arguments),G&&(this.drawingContext.textBaseline=w.BASELINE),V},b.default.Renderer2D=g,Z.default=x=b.default.Renderer2D},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator");var M=(a=a("./main"))&&a.__esModule?a:{default:a};function C(){return{}}M.default.prototype._promisePreloads=[];var b=!(M.default.prototype.registerPromisePreload=function(w){M.default.prototype._promisePreloads.push(w)});M.default.prototype._setupPromisePreloads=function(){var w=!0,I=!1,D=void 0;try{for(var d,f=this._promisePreloads[Symbol.iterator]();!(w=(d=f.next()).done);w=!0){var h=d.value,p=this,m=h.method,g=h.addCallbacks,x=h.legacyPreloadSetup,E=h.target||this,S=E[m].bind(E);if(E===M.default.prototype){if(b)continue;p=null,S=E[m]}E[m]=this._wrapPromisePreload(p,S,g),x&&(E[x.method]=this._legacyPreloadGenerator(p,x,E[m]))}}catch(k){I=!0,D=k}finally{try{w||null==f.return||f.return()}finally{if(I)throw D}}b=!0},M.default.prototype._wrapPromisePreload=function(w,I,D){var d=function(){for(var f=this,h=(this._incrementPreload(),null),p=null,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];if(D)for(var E=g.length-1;0<=E&&!p&&"function"==typeof g[E];E--)p=h,h=g.pop();var S=Promise.resolve(I.apply(this,g));return h&&S.then(h),p&&S.catch(p),S.then(function(){return f._decrementPreload()}),S};return w?d.bind(w):d},M.default.prototype._legacyPreloadGenerator=function(w,f,D){var d=f.createBaseObject||C;return f=function(){var h=this;this._incrementPreload();for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];var x=d.apply(this,m);return D.apply(this,m).then(function(E){Object.assign(x,E),h._decrementPreload()}),x},w?f.bind(w):f}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(a,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(d=a("./main"))&&d.__esModule?d:{default:d},b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==I(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(a("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("./p5.Graphics"),a("./p5.Renderer2D"),a("../webgl/p5.RendererGL");var D="defaultCanvas0",d=(C.default.prototype.createCanvas=function(f,h,p,m){var g,x,E;if(C.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(p=b.P2D,m=arguments[2]):g=p||b.P2D,m)(E=document.getElementById(D))&&E.parentNode.removeChild(E),E=m,this._defaultGraphicsCreated=!1;else{if(g===b.WEBGL)(E=document.getElementById(D))&&(E.parentNode.removeChild(E),x=this._renderer,this._elements=this._elements.filter(function(k){return k!==x})),(E=document.createElement("canvas")).id=D,E.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)E=this.canvas;else{E=m||document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;D="defaultCanvas".concat(S),E.id=D,E.classList.add("p5Canvas")}this._setupDone||(E.dataset.hidden=!0,E.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(p=document.createElement("main"),document.body.appendChild(p)),document.getElementsByTagName("main")[0])).appendChild(E)}return g===b.WEBGL?(this._setProperty("_renderer",new C.default.RendererGL(E,this,!0)),this._elements.push(this._renderer),f=(m=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=m.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new C.default.Renderer2D(E,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,h),this._renderer._applyDefaults(),this._renderer},C.default.prototype.resizeCanvas=function(f,h,p){if(C.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,g,x,E={};for(m in this.drawingContext){var S=this.drawingContext[m];"object"!==I(S)&&"function"!=typeof S&&(E[m]=S)}for(x in this._renderer instanceof C.default.RendererGL&&(f=(g=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=g.adjustedHeight),this.width=f,this.height=h,this._renderer.resize(f,h),E)try{this.drawingContext[x]=E[x]}catch{}p||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},C.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},C.default.prototype.createGraphics=function(f,h){for(var p=arguments.length,m=new Array(2<p?p-2:0),g=2;g<p;g++)m[g-2]=arguments[g];return m[0]instanceof HTMLCanvasElement&&(m[1]=m[0],m[0]=b.P2D),C.default._validateParameters("createGraphics",arguments),new C.default.Graphics(f,h,m[0],this,m[1])},C.default.prototype.createFramebuffer=function(f){return new C.default.Framebuffer(this,f)},C.default.prototype.clearDepth=function(f){this._assert3d("clearDepth"),this._renderer.clearDepth(f)},C.default.prototype.blendMode=function(f){C.default._validateParameters("blendMode",arguments),f===b.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=b.BLEND),this._renderer.blendMode(f)},C.default);Z.default=d},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(a,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=d(a("../main")),w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(a("../constants")),I=d(a("../helpers"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){return h&&h.__esModule?h:{default:h}}a("../friendly_errors/fes_core"),a("../friendly_errors/file_errors"),a("../friendly_errors/validate_params"),b.default.prototype._normalizeArcAngles=function(h,p,m,g,x){var E;return h-=w.TWO_PI*Math.floor(h/w.TWO_PI),p-=w.TWO_PI*Math.floor(p/w.TWO_PI),E=Math.min(Math.abs(h-p),w.TWO_PI-Math.abs(h-p)),x&&(h=h<=w.HALF_PI?Math.atan(m/g*Math.tan(h)):h>w.HALF_PI&&h<=3*w.HALF_PI?Math.atan(m/g*Math.tan(h))+w.PI:Math.atan(m/g*Math.tan(h))+w.TWO_PI,p=p<=w.HALF_PI?Math.atan(m/g*Math.tan(p)):p>w.HALF_PI&&p<=3*w.HALF_PI?Math.atan(m/g*Math.tan(p))+w.PI:Math.atan(m/g*Math.tan(p))+w.TWO_PI),p<h&&(p+=w.TWO_PI),{start:h,stop:p,correspondToSamePoint:E<1e-5}},b.default.prototype.arc=function(h,p,m,g,x,E,S,k){return b.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==E&&(x=this._toRadians(x),E=this._toRadians(E),h=I.default.modeAdjust(h,p,m,g,this._renderer._ellipseMode),(p=this._normalizeArcAngles(x,E,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,k]):(this._renderer.arc(h.x,h.y,h.w,h.h,p.start,p.stop,S,k),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,p.start,p.stop,S]))),this},b.default.prototype.ellipse=function(h,p,m,g,x){return b.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},b.default.prototype.circle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];b.default._validateParameters("circle",p);var g=p.slice(0,2);return g.push(p[2],p[2]),this._renderEllipse.apply(this,function f(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(g))},b.default.prototype._renderEllipse=function(h,p,m,g,x){return(this._renderer._doStroke||this._renderer._doFill)&&(h=I.default.modeAdjust(h,p,m,g=void 0===g?m:g,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},b.default.prototype.line=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("line",m),this._renderer._doStroke&&(h=this._renderer).line.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},b.default.prototype.point=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("point",m),this._renderer._doStroke&&(1===m.length&&m[0]instanceof b.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((h=this._renderer).point.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},b.default.prototype.quad=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((h=this._renderer).quad.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},b.default.prototype.rect=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("rect",p),this._renderRect.apply(this,p)},b.default.prototype.square=function(h,p,m,g,x,E,S){return b.default._validateParameters("square",arguments),this._renderRect.call(this,h,p,m,m,g,x,E,S)},b.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var h=I.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),p=(this._renderer._rectMode===w.CORNER&&(h.w=arguments[2],h.h=arguments[3]),[h.x,h.y,h.w,h.h]),m=4;m<arguments.length;m++)p[m]=arguments[m];this._renderer.rect(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},b.default.prototype.triangle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("triangle",p),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",p),this},Z.default=a=b.default},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype.ellipseMode=function(d){return b.default._validateParameters("ellipseMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._ellipseMode=d),this},b.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},b.default.prototype.rectMode=function(d){return b.default._validateParameters("rectMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._rectMode=d),this},b.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},b.default.prototype.strokeCap=function(d){return b.default._validateParameters("strokeCap",arguments),d!==w.ROUND&&d!==w.SQUARE&&d!==w.PROJECT||this._renderer.strokeCap(d),this},b.default.prototype.strokeJoin=function(d){return b.default._validateParameters("strokeJoin",arguments),d!==w.ROUND&&d!==w.BEVEL&&d!==w.MITER||this._renderer.strokeJoin(d),this},b.default.prototype.strokeWeight=function(d){return b.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(d),this};var D=b.default;Z.default=D},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(C=a("../main"))&&C.__esModule?C:{default:C};a("../friendly_errors/fes_core"),a("../friendly_errors/file_errors"),a("../friendly_errors/validate_params"),M.default.prototype.bezier=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("bezier",I),(this._renderer._doStroke||this._renderer._doFill)&&(b=this._renderer).bezier.apply(b,I),this},M.default.prototype.bezierDetail=function(b){return M.default._validateParameters("bezierDetail",arguments),this._bezierDetail=b,this},M.default.prototype.bezierPoint=function(b,w,I,D,d){M.default._validateParameters("bezierPoint",arguments);var f=1-d;return Math.pow(f,3)*b+3*Math.pow(f,2)*d*w+3*f*Math.pow(d,2)*I+Math.pow(d,3)*D},M.default.prototype.bezierTangent=function(b,w,I,D,d){M.default._validateParameters("bezierTangent",arguments);var f=1-d;return 3*D*Math.pow(d,2)-3*I*Math.pow(d,2)+6*I*f*d-6*w*f*d+3*w*Math.pow(f,2)-3*b*Math.pow(f,2)},M.default.prototype.curve=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("curve",I),this._renderer._doStroke&&(b=this._renderer).curve.apply(b,I),this},M.default.prototype.curveDetail=function(b){return M.default._validateParameters("curveDetail",arguments),this._curveDetail=b<3?3:b,this},M.default.prototype.curveTightness=function(b){return M.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=b,this},M.default.prototype.curvePoint=function(b,w,I,D,d){M.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,h=d*d*d,p=d*d;return b*((f-1)/2*h+(1-f)*p+(f-1)/2*d)+w*((f+3)/2*h+(-5-f)/2*p+1)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2*d)+D*((1-f)/2*h+(f-1)/2*p)},M.default.prototype.curveTangent=function(b,w,I,D,p){M.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,h=p*p*3;return b*((f-1)/2*h+(1-f)*(p*=2)+(f-1)/2)+w*((f+3)/2*h+(-5-f)/2*p)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2)+D*((1-f)/2*h+(f-1)/2*p)};var C=M.default;Z.default=C},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(a,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(E=a("../main"))&&E.__esModule?E:{default:E},w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var k=I();if(k&&k.has(S))return k.get(S);var q,J={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in S){var V;Object.prototype.hasOwnProperty.call(S,q)&&((V=G?Object.getOwnPropertyDescriptor(S,q):null)&&(V.get||V.set)?Object.defineProperty(J,q,V):J[q]=S[q])}return J.default=S,k&&k.set(S,J),J}(a("../constants"));function I(){var S;return"function"!=typeof WeakMap?null:(I=function(){return S},S=new WeakMap)}var D=null,d=[],f=[],h=!1,p=!1,m=!1,g=!1,x=!0,E=(b.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(f=[],g=!0),this},b.default.prototype.beginShape=function(S){var k;return b.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(k=this._renderer).beginShape.apply(k,arguments):(D=S===w.POINTS||S===w.LINES||S===w.TRIANGLES||S===w.TRIANGLE_FAN||S===w.TRIANGLE_STRIP||S===w.QUADS||S===w.QUAD_STRIP?S:null,d=[],f=[]),this},b.default.prototype.bezierVertex=function(){for(var S,k=arguments.length,q=new Array(k),J=0;J<k;J++)q[J]=arguments[J];if(b.default._validateParameters("bezierVertex",q),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,q);else if(0===d.length)b.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var G=[],V=0;V<q.length;V++)G[V]=q[V];G.isVert=!1,(g?f:d).push(G)}return this},b.default.prototype.curveVertex=function(){for(var S,k=arguments.length,q=new Array(k),J=0;J<k;J++)q[J]=arguments[J];return b.default._validateParameters("curveVertex",q),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,q):(p=!0,this.vertex(q[0],q[1])),this},b.default.prototype.endContour=function(){if(!this._renderer.isP3D){var S=f[0].slice();S.isVert=f[0].isVert,S.moveTo=!1,f.push(S),x&&(d.push(d[0]),x=!1);for(var k=0;k<f.length;k++)d.push(f[k])}return this},b.default.prototype.endShape=function(S){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(b.default._validateParameters("endShape",arguments),k<1&&(console.log("\u{1f338} p5.js says: You can not have less than one instance"),k=1),this._renderer.isP3D)this._renderer.endShape(S,p,h,m,g,D,k);else{if(1!==k&&console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode"),0===d.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(k=S===w.CLOSE)&&!g&&d.push(d[0]),this._renderer.endShape(S,d,p,h,m,g,D),x=!(g=m=h=p=!1),k&&d.pop()}return this},b.default.prototype.quadraticVertex=function(){for(var S,k=arguments.length,q=new Array(k),J=0;J<k;J++)q[J]=arguments[J];if(b.default._validateParameters("quadraticVertex",q),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,q);else{if(this._contourInited)return(S={}).x=q[0],S.y=q[1],S.x3=q[2],S.y3=q[3],S.type=w.QUADRATIC,this._contourVertices.push(S),this;if(0<d.length){m=!0;for(var G=[],V=0;V<q.length;V++)G[V]=q[V];G.isVert=!1,(g?f:d).push(G)}else b.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},b.default.prototype.vertex=function(S,k,q,J,G){var V;return this._renderer.isP3D?(V=this._renderer).vertex.apply(V,arguments):((V=[]).isVert=!0,V[0]=S,V[1]=k,V[2]=0,V[3]=0,V[4]=0,V[5]=this._renderer._getFill(),V[6]=this._renderer._getStroke(),q&&(V.moveTo=q),(g?(0===f.length&&(V.moveTo=!0),f):d).push(V)),this},b.default.prototype.normal=function(S,k,q){var J;return this._assert3d("normal"),b.default._validateParameters("normal",arguments),(J=this._renderer).normal.apply(J,arguments),this},b.default);Z.default=E},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(a,be,Z){},{}],295:[function(a,be,Z){"use strict";a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.assign"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("./main"))&&a.__esModule?a:{default:a}).default.prototype.noLoop=function(){this._loop=!1},a.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},a.default.prototype.isLooping=function(){return this._loop},a.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},a.default.prototype.pop=function(){var M=this._styles.pop();M?(this._renderer.pop(M.renderer),Object.assign(this,M.props)):console.warn("pop() was called without matching push()")},a.default.prototype.redraw=function(M){if(!this._inUserDraw&&this._setupDone){var C=parseInt(M),b=((isNaN(C)||C<1)&&(C=1),this._isGlobal?window:this);if("function"==typeof b.draw){void 0===b.setup&&b.scale(b._pixelDensity,b._pixelDensity);for(var w=0;w<C;w++){b.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),b._renderer.isP3D&&b._renderer._update(),b._setProperty("frameCount",b.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{b.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},Z.default=a=a.default},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("./main"))&&a.__esModule?a:{default:a};M.default.prototype.applyMatrix=function(){var b=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||b?(b=this._renderer).applyMatrix.apply(b,function C(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(b=this._renderer).applyMatrix.apply(b,arguments),this},M.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},M.default.prototype.rotate=function(b,w){return M.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(b),w),this},M.default.prototype.rotateX=function(b){return this._assert3d("rotateX"),M.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(b)),this},M.default.prototype.rotateY=function(b){return this._assert3d("rotateY"),M.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(b)),this},M.default.prototype.rotateZ=function(b){return this._assert3d("rotateZ"),M.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(b)),this},M.default.prototype.scale=function(b,w,I){var D;return M.default._validateParameters("scale",arguments),b instanceof M.default.Vector?(b=(D=b).x,w=D.y,I=D.z):Array.isArray(b)&&(b=(D=b)[0],w=D[1],I=D[2]||1),isNaN(w)?w=I=b:isNaN(I)&&(I=1),this._renderer.scale(b,w,I),this},M.default.prototype.shearX=function(b){return M.default._validateParameters("shearX",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,0,Math.tan(b),1,0,0),this},M.default.prototype.shearY=function(b){return M.default._validateParameters("shearY",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,Math.tan(b),0,1,0,0),this},M.default.prototype.translate=function(b,w,I){return M.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(b,w,I):this._renderer.translate(b,w),this},Z.default=a=M.default},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(a,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator");var C=(a=a("../core/main"))&&a.__esModule?a:{default:a};function b(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}C.default.prototype.storeItem=function(I,D){"string"!=typeof I&&console.log("The argument that you passed to storeItem() - ".concat(I," is not a string.")),I.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(I," must not end with 'p5TypeID'.")),void 0===D&&console.log("You cannot store undefined variables using storeItem().");var d=w(D);switch(d){case"number":case"boolean":D=D.toString();break;case"object":D instanceof C.default.Color?d="p5.Color":D instanceof C.default.Vector&&(d="p5.Vector",D=[D.x,D.y,D.z]),D=JSON.stringify(D)}localStorage.setItem(I,D),I="".concat(I,"p5TypeID"),localStorage.setItem(I,d)},C.default.prototype.getItem=function(I){var D=localStorage.getItem(I),d=localStorage.getItem("".concat(I,"p5TypeID"));if(void 0===d)console.log("Unable to determine type of item stored under ".concat(I,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==D)switch(d){case"number":D=parseFloat(D);break;case"boolean":D="true"===D;break;case"object":D=JSON.parse(D);break;case"p5.Color":D=JSON.parse(D),D=this.color.apply(this,b(D.levels));break;case"p5.Vector":D=JSON.parse(D),D=this.createVector.apply(this,b(D))}return D},C.default.prototype.clearStorage=function(){var I=this;Object.keys(localStorage).forEach(function(D){D.endsWith("p5TypeID")&&I.removeItem(D.replace("p5TypeID",""))})},C.default.prototype.removeItem=function(I){"string"!=typeof I&&console.log("The argument that you passed to removeItem() - ".concat(I," is not a string.")),localStorage.removeItem(I),localStorage.removeItem("".concat(I,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(a,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function C(m){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.object.keys"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(a=a("../core/main"))&&a.__esModule?a:{default:a};function w(m,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&I(m,g)}function I(m,g){return(I=Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(m,g)}function D(m){return function(){var g,x=d(m);if(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=d(this).constructor,Reflect.construct(x,arguments,g)):x.apply(this,arguments),x=this,!g||"object"!==C(g)&&"function"!=typeof g){if(void 0!==x)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function d(m){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function h(m,g){for(var x=0;x<g.length;x++){var E=g[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function p(m,g,x){g&&h(m.prototype,g),x&&h(m,x)}b.default.prototype.createStringDict=function(m,g){return b.default._validateParameters("createStringDict",arguments),new b.default.StringDict(m,g)},b.default.prototype.createNumberDict=function(m,g){return b.default._validateParameters("createNumberDict",arguments),new b.default.NumberDict(m,g)},b.default.TypedDict=function(){function m(g,x){return f(this,m),g instanceof Object?this.data=g:(this.data={},this.data[g]=x),this}return p(m,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,x){this._validate(x)?this.data[g]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var x in g)this.set(x,g[x])}},{key:"create",value:function(g,x){g instanceof Object&&void 0===x?this._addObj(g):void 0!==g?this.set(g,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var x,E="";for(x in this.data)E+="".concat(x,",").concat(this.data[x],"\n");var S=new Blob([E],{type:"text/csv"});b.default.prototype.downloadFile(S,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,x){b.default.prototype.saveJSON(this.data,g,x)}},{key:"_validate",value:function(g){return!0}}]),m}(),b.default.StringDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"string"==typeof x}}]),g}(),b.default.NumberDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"number"==typeof x}},{key:"add",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]+=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,E){this.add(x,-E)}},{key:"mult",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]*=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]/=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var E,S=this.data[Object.keys(this.data)[0]];for(E in this.data)this.data[E]*x<S*x&&(S=this.data[E]);return S}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var E=Object.keys(this.data)[0],S=1;S<Object.keys(this.data).length;S++)Object.keys(this.data)[S]*x<E*x&&(E=Object.keys(this.data)[S]);return E}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),Z.default=a=b.default.TypedDict},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(a,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(a=a("../core/main"))&&a.__esModule?a:{default:a};function b(S,k){for(var q=0;q<k.length;q++){var J=k[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(S,J.key,J)}}function w(S,k,q){k&&b(S.prototype,k),q&&b(S,q)}function I(S,k){return(I=Object.setPrototypeOf||function(q,J){return q.__proto__=J,q})(S,k)}function d(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function f(S){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(S)}function h(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function p(S){return(p="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}function m(S,k,q){return(k._userNode||document.body).appendChild(S),q=new(q?C.default.MediaElement:C.default.Element)(S,k),k._elements.push(q),q}C.default.prototype.select=function(S,k){return C.default._validateParameters("select",arguments),(k=this._getContainer(k).querySelector(S))?this._wrapElement(k):null},C.default.prototype.selectAll=function(S,k){C.default._validateParameters("selectAll",arguments);var q=[],J=this._getContainer(k).querySelectorAll(S);if(J)for(var G=0;G<J.length;G++){var V=this._wrapElement(J[G]);q.push(V)}return q},C.default.prototype._getContainer=function(S){var k=document;return"string"==typeof S?k=document.querySelector(S)||document:S instanceof C.default.Element?k=S.elt:S instanceof HTMLElement&&(k=S),k},C.default.prototype._wrapElement=function(S){var k,q=Array.prototype.slice.call(S.children);return"INPUT"===S.tagName&&"checkbox"===S.type?((k=new C.default.Element(S,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},k):"VIDEO"===S.tagName||"AUDIO"===S.tagName?new C.default.MediaElement(S,this):"SELECT"===S.tagName?this.createSelect(new C.default.Element(S,this)):0<q.length&&q.every(function(J){return"INPUT"===J.tagName||"LABEL"===J.tagName})&&("DIV"===S.tagName||"SPAN"===S.tagName)?this.createRadio(new C.default.Element(S,this)):new C.default.Element(S,this)},C.default.prototype.removeElements=function(S){C.default._validateParameters("removeElements",arguments),this._elements.filter(function(k){return!(k.elt instanceof HTMLCanvasElement)}).map(function(k){return k.remove()})},C.default.Element.prototype.changed=function(S){return C.default.Element._adjustListener("change",S,this),this},C.default.Element.prototype.input=function(S){return C.default.Element._adjustListener("input",S,this),this},C.default.prototype.createDiv=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("div");return k.innerHTML=S,m(k,this)},C.default.prototype.createP=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("p");return k.innerHTML=S,m(k,this)},C.default.prototype.createSpan=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("span");return k.innerHTML=S,m(k,this)},C.default.prototype.createImg=function(){C.default._validateParameters("createImg",arguments);var S,k=document.createElement("img"),q=arguments;return 1<q.length&&"string"==typeof q[1]&&(k.alt=q[1]),2<q.length&&"string"==typeof q[2]&&(k.crossOrigin=q[2]),k.src=q[0],S=m(k,this),k.addEventListener("load",function(){S.width=k.offsetWidth||k.width,S.height=k.offsetHeight||k.height;var J=q[q.length-1];"function"==typeof J&&J(S)}),S},C.default.prototype.createA=function(S,k,q){C.default._validateParameters("createA",arguments);var J=document.createElement("a");return J.href=S,J.innerHTML=k,q&&(J.target=q),m(J,this)},C.default.prototype.createSlider=function(S,k,q,J){C.default._validateParameters("createSlider",arguments);var G=document.createElement("input");return G.type="range",G.min=S,G.max=k,0===J?G.step=1e-18:J&&(G.step=J),"number"==typeof q&&(G.value=q),m(G,this)},C.default.prototype.createButton=function(S,k){C.default._validateParameters("createButton",arguments);var q=document.createElement("button");return q.innerHTML=S,k&&(q.value=k),m(q,this)},C.default.prototype.createCheckbox=function(){for(var S=arguments.length,k=new Array(S),q=0;q<S;q++)k[q]=arguments[q];C.default._validateParameters("createCheckbox",k);var J=document.createElement("div"),G=document.createElement("input"),V=(G.type="checkbox",document.createElement("label")),K=(V.appendChild(G),J.appendChild(V),m(J,this));return K.checked=function(){var $=K.elt.firstElementChild.getElementsByTagName("input")[0];if($){if(0===arguments.length)return $.checked;$.checked=!(arguments.length<=0||!arguments[0])}return K},this.value=function($){return K.value=$,this},k[0]&&(K.value(k[0]),(J=document.createElement("span")).innerHTML=k[0],V.appendChild(J)),k[1]&&(G.checked=!0),K},C.default.prototype.createSelect=function(){for(var S,k=arguments.length,q=new Array(k),J=0;J<k;J++)q[J]=arguments[J];C.default._validateParameters("createSelect",q);var G,V=q[0];return V instanceof C.default.Element&&V.elt instanceof HTMLSelectElement?this.elt=(S=V).elt:V instanceof HTMLSelectElement?(S=m(V,this),this.elt=V):(G=document.createElement("select"),V&&"boolean"==typeof V&&G.setAttribute("multiple","true"),S=m(G,this),this.elt=G),S.option=function(K,$){var ne;if(void 0!==K){for(var Y,we=0;we<this.elt.length;we+=1)if(this.elt[we].textContent===K){ne=we;break}void 0!==ne?!1===$?this.elt.remove(ne):this.elt[ne].value=$:((Y=document.createElement("option")).textContent=K,Y.value=void 0===$?K:$,this.elt.appendChild(Y),this._pInst._elements.push(Y))}},S.selected=function(K){if(void 0!==K){for(var $=0;$<this.elt.length;$+=1)this.elt[$].value.toString()===K.toString()&&(this.elt.selectedIndex=$);return this}if(this.elt.getAttribute("multiple")){var ne=[],Y=!0,we=!1,Se=void 0;try{for(var oe,ge=this.elt.selectedOptions[Symbol.iterator]();!(Y=(oe=ge.next()).done);Y=!0)ne.push(oe.value.value)}catch(Q){we=!0,Se=Q}finally{try{Y||null==ge.return||ge.return()}finally{if(we)throw Se}}return ne}return this.elt.value},S.disable=function(K){if("string"==typeof K)for(var $=0;$<this.elt.length;$++)this.elt[$].value.toString()===K&&(this.elt[$].disabled=!0,this.elt[$].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(K){if("string"==typeof K)for(var $=0;$<this.elt.length;$++)this.elt[$].value.toString()===K&&(this.elt[$].disabled=!1,this.elt[$].selected=!1);else{this.elt.disabled=!1;for(var ne=0;ne<this.elt.length;ne++)this.elt[ne].disabled=!1,this.elt[ne].selected=!1}return this},S};var g=0;function x(S,K,q,J){var G=document.createElement(K),V=("string"==typeof(q=q||"")&&(q=[q]),!0),$=void(K=!1);try{for(var ne,Y=q[Symbol.iterator]();!(V=(ne=Y.next()).done);V=!0){var we=ne.value,Se=document.createElement("source");Se.setAttribute("src",we),G.appendChild(Se)}}catch(ge){K=!0,$=ge}finally{try{V||null==Y.return||Y.return()}finally{if(K)throw $}}"function"==typeof J&&G.addEventListener("canplaythrough",function ge(){J(),G.removeEventListener("canplaythrough",ge)});var oe=m(G,S,!0);return oe.loadedmetadata=!1,G.addEventListener("loadedmetadata",function(){oe.width=G.videoWidth,oe.height=G.videoHeight,0===oe.elt.width&&(oe.elt.width=G.videoWidth),0===oe.elt.height&&(oe.elt.height=G.videoHeight),oe.presetPlaybackRate&&(oe.elt.playbackRate=oe.presetPlaybackRate,delete oe.presetPlaybackRate),oe.loadedmetadata=!0}),oe}function E(S,k,q,J){h(this,E),this.callback=S,this.time=k,this.id=q,this.val=J}C.default.prototype.createRadio=function(){function S(K){return K instanceof HTMLInputElement&&"radio"===K.type}function k(K){return K instanceof HTMLLabelElement}var q,J,G,V=arguments.length<=0?void 0:arguments[0];return V instanceof C.default.Element&&(V.elt instanceof HTMLDivElement||V.elt instanceof HTMLSpanElement)?(q=V,this.elt=V.elt):V instanceof HTMLDivElement||V instanceof HTMLSpanElement?(q=m(V,this),J=this.elt=V,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(G=arguments.length<=1?void 0:arguments[1])):("string"==typeof V&&(G=V),J=document.createElement("div"),q=m(J,this),this.elt=J),q._name=G||"radioOption_".concat(g++),q._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(K){return S(K)||k(K)&&S(K.firstElementChild)}).map(function(K){return S(K)?K:K.firstElementChild})},q.option=function(K,$){var ne,Y,we,Se=!0,oe=!1,ge=void 0;try{for(var re,Q=q._getOptionsArray()[Symbol.iterator]();!(Se=(re=Q.next()).done);Se=!0){var fe=re.value;if(fe.value===K){ne=fe;break}}}catch(Ce){oe=!0,ge=Ce}finally{try{Se||null==Q.return||Q.return()}finally{if(oe)throw ge}}return void 0===ne&&((ne=document.createElement("input")).setAttribute("type","radio"),ne.setAttribute("value",K)),ne.setAttribute("name",q._name),k(ne.parentElement)?Y=ne.parentElement:(Y=document.createElement("label")).insertAdjacentElement("afterbegin",ne),Y.lastElementChild instanceof HTMLSpanElement?we=Y.lastElementChild:(we=document.createElement("span"),ne.insertAdjacentElement("afterend",we)),we.innerHTML=void 0===$?K:$,this.elt.appendChild(Y),ne},q.remove=function(K){var $=!0,ne=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!($=(we=Se.next()).done);$=!0){var oe=we.value;if(oe.value===K)return void(k(oe.parentElement)?oe.parentElement:oe).remove()}}catch(ge){ne=!0,Y=ge}finally{try{$||null==Se.return||Se.return()}finally{if(ne)throw Y}}},q.value=function(){var K="",$=!0,ne=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!($=(we=Se.next()).done);$=!0){var oe=we.value;if(oe.checked){K=oe.value;break}}}catch(ge){ne=!0,Y=ge}finally{try{$||null==Se.return||Se.return()}finally{if(ne)throw Y}}return K},q.selected=function(K){var $=null;if(void 0===K){var ne=!0,Y=!1,we=void 0;try{for(var Se,oe=q._getOptionsArray()[Symbol.iterator]();!(ne=(Se=oe.next()).done);ne=!0){var ge=Se.value;if(ge.checked){$=ge;break}}}catch(it){Y=!0,we=it}finally{try{ne||null==oe.return||oe.return()}finally{if(Y)throw we}}}else{q._getOptionsArray().forEach(function(z){z.checked=!1,z.removeAttribute("checked")});var re=!0;Y=!1,we=void 0;try{for(var Q,fe=q._getOptionsArray()[Symbol.iterator]();!(re=(Q=fe.next()).done);re=!0){var Ce=Q.value;Ce.value===K&&(Ce.setAttribute("checked",!0),Ce.checked=!0,$=Ce)}}catch(z){Y=!0,we=z}finally{try{re||null==fe.return||fe.return()}finally{if(Y)throw we}}}return $},q.disable=function(){var K=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],$=!0,ne=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!($=(we=Se.next()).done);$=!0)we.value.setAttribute("disabled",K)}catch(oe){ne=!0,Y=oe}finally{try{$||null==Se.return||Se.return()}finally{if(ne)throw Y}}},q},C.default.prototype.createColorPicker=function(S){C.default._validateParameters("createColorPicker",arguments);var k=document.createElement("input");return k.type="color",S?S instanceof C.default.Color?k.value=S.toString("#rrggbb"):(C.default.prototype._colorMode="rgb",C.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},k.value=C.default.prototype.color(S).toString("#rrggbb")):k.value="#000000",(k=m(k,this)).color=function(){return S&&(S.mode&&(C.default.prototype._colorMode=S.mode),S.maxes&&(C.default.prototype._colorMaxes=S.maxes)),C.default.prototype.color(this.elt.value)},k},C.default.prototype.createInput=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",q=(C.default._validateParameters("createInput",arguments),document.createElement("input"));return q.setAttribute("value",S),q.setAttribute("type",k),m(q,this)},C.default.prototype.createFileInput=function(S){var k,q=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(C.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(k=document.createElement("input")).setAttribute("type","file"),q&&k.setAttribute("multiple",!0),k.addEventListener("change",function(J){var G=!0,V=!1,K=void 0;try{for(var $,ne=J.target.files[Symbol.iterator]();!(G=($=ne.next()).done);G=!0)C.default.File._load($.value,S)}catch(we){V=!0,K=we}finally{try{G||null==ne.return||ne.return()}finally{if(V)throw K}}},!1),m(k,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},C.default.prototype.createVideo=function(S,k){return C.default._validateParameters("createVideo",arguments),x(this,"video",S,k)},C.default.prototype.createAudio=function(S,k){return C.default._validateParameters("createAudio",arguments),x(this,"audio",S,k)},C.default.prototype.VIDEO="video",C.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(S){var k=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return k?new Promise(function(q,J){k.call(navigator,S,q,J)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),C.default.prototype.createCapture=function(){for(var S=arguments.length,k=new Array(S),q=0;q<S;q++)k[q]=arguments[q];if(C.default._validateParameters("createCapture",k),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var J,G=!0,V=!0,K=!1,$=0,ne=k;$<ne.length;$++){var Y=ne[$];Y===C.default.prototype.VIDEO?V=!1:Y===C.default.prototype.AUDIO?G=!1:"object"===p(Y)?(void 0!==Y.flipped&&(K=Y.flipped,delete Y.flipped),we=Object.assign({},we,Y)):"function"==typeof Y&&(J=Y)}var we=Object.assign({},{video:G,audio:V},we),Se=document.createElement("video"),oe=(Se.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(we).then(function(ge){try{"srcObject"in Se?Se.srcObject=ge:Se.src=window.URL.createObjectURL(ge)}catch{Se.src=ge}}).catch(function(ge){"NotFoundError"===ge.name&&C.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===ge.name&&C.default._friendlyError("Access to the camera was denied","createCapture"),console.error(ge)}),m(Se,this,!0));return oe.loadedmetadata=!1,Se.addEventListener("loadedmetadata",function(){Se.play(),Se.width?(oe.width=Se.width,oe.height=Se.height,K&&(oe.elt.style.transform="scaleX(-1)")):(oe.width=oe.elt.width=Se.videoWidth,oe.height=oe.elt.height=Se.videoHeight),oe.loadedmetadata=!0,J&&J(Se.srcObject)}),oe.flipped=K,oe},C.default.prototype.createElement=function(S,k){return C.default._validateParameters("createElement",arguments),S=document.createElement(S),void 0!==k&&(S.innerHTML=k),m(S,this)},C.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},C.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},C.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},C.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},C.default.Element.prototype.child=function(S){return void 0===S?this.elt.childNodes:("string"==typeof S?("#"===S[0]&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof C.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},C.default.Element.prototype.center=function(S){var k=this.elt.style.display,q="none"===this.elt.style.display,J="none"===this.parent().style.display,G={x:this.elt.offsetLeft,y:this.elt.offsetTop},V=(q&&this.show(),J&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),K=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===S||void 0===S?this.position(V/2+this.parent().offsetLeft,K/2+this.parent().offsetTop):"horizontal"===S?this.position(V/2+this.parent().offsetLeft,G.y):"vertical"===S&&this.position(G.x,K/2+this.parent().offsetTop),this.style("display",k),q&&this.hide(),J&&this.parent().hide(),this},C.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},C.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},C.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},C.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},C.default.Element.prototype.style=function(S,k){if(void 0===(k=k instanceof C.default.Color?"rgba("+k.levels[0]+","+k.levels[1]+","+k.levels[2]+","+k.levels[3]/255+")":k)){if(-1===S.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(S);for(var q=S.split(";"),J=0;J<q.length;J++){var G=q[J].split(":");G[0]&&G[1]&&(this.elt.style[G[0].trim()]=G[1].trim())}}else this.elt.style[S]=k,"width"!==S&&"height"!==S&&"left"!==S&&"top"!==S||(k=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(k,10)));return this},C.default.Element.prototype.attribute=function(S,k){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===k?this.elt.getAttribute(S):(this.elt.setAttribute(S,k),this);if(void 0===k)return this.elt.firstChild.getAttribute(S);for(var q=0;q<this.elt.childNodes.length;q++)this.elt.childNodes[q].setAttribute(S,k)},C.default.Element.prototype.removeAttribute=function(S){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var k=0;k<this.elt.childNodes.length;k++)this.elt.childNodes[k].removeAttribute(S);return this.elt.removeAttribute(S),this},C.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},C.default.Element.prototype.show=function(){return this.elt.style.display="block",this},C.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},C.default.Element.prototype.size=function(S,k){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var q=S,J=k,G=C.default.prototype.AUTO;if(q!==G||J!==G){if(q===G?q=k*this.width/this.height:J===G&&(J=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var V,K={},$=this.elt.getContext("2d");for(V in $)K[V]=$[V];for(V in this.elt.setAttribute("width",q*this._pInst._pixelDensity),this.elt.setAttribute("height",J*this._pInst._pixelDensity),this.elt.style.width=q+"px",this.elt.style.height=J+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),K)this.elt.getContext("2d")[V]=K[V]}else this.elt.style.width=q+"px",this.elt.style.height=J+"px",this.elt.width=q,this.elt.height=J;this.width=q,this.height=J,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",q),this._pInst._setProperty("height",J))}return this},C.default.Element.prototype.remove=function(){this instanceof C.default.MediaElement&&(this.stop(),null!==(k=this.elt.srcObject)&&k.getTracks().forEach(function(q){q.stop()}));var S,k=this._pInst._elements.indexOf(this);for(S in-1!==k&&this._pInst._elements.splice(k,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},C.default.Element.prototype.drop=function(S,k){var q;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",q=function(J){J.preventDefault()}),this.elt.addEventListener("dragleave",q)),C.default.Element._attachListener("drop",function(G){G.preventDefault(),"function"==typeof k&&k.call(this,G),G=G.dataTransfer.files;var V=!0,K=!1,$=void 0;try{for(var ne,Y=G[Symbol.iterator]();!(V=(ne=Y.next()).done);V=!0)C.default.File._load(ne.value,S)}catch(Se){K=!0,$=Se}finally{try{V||null==Y.return||Y.return()}finally{if(K)throw $}}},this)):console.log("The File APIs are not fully supported in this browser."),this},C.default.Element.prototype.draggable=function(S){var k,q="ontouchstart"in window,J=0,G=0,V=0,K=0,$=q?"touchend":"mouseup",ne=q?"touchmove":"mousemove";function Y(Se){var oe;Se=Se||window.event,K=q?(oe=Se.changedTouches,J=V-parseInt(oe[0].clientX),G=K-parseInt(oe[0].clientY),V=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(J=V-parseInt(Se.clientX),G=K-parseInt(Se.clientY),V=parseInt(Se.clientX),parseInt(Se.clientY)),S.style.left=S.offsetLeft-J+"px",S.style.top=S.offsetTop-G+"px"}function we(){document.removeEventListener($,we,!1),document.removeEventListener(ne,Y,!1)}return void 0===S?k=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,k=this.elt),k.addEventListener(q?"touchstart":"mousedown",function(Se){var oe;return Se=Se||window.event,K=q?(oe=Se.changedTouches,V=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(V=parseInt(Se.clientX),parseInt(Se.clientY)),document.addEventListener($,we,!1),document.addEventListener(ne,Y,!1),!1},!1),k.style.cursor="move",this},a=function(S){var k=J;if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),S&&I(k,S);var q=function D(S){return function(){var k,q,J=f(S);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=f(this).constructor,Reflect.construct(J,arguments,k)):J.apply(this,arguments),J=this,!(q=k)||"object"!==p(q)&&"function"!=typeof q?d(J):q}}(J);function J(G,V){h(this,J);var K=d(V=q.call(this,G,V));return V.elt.crossOrigin="anonymous",V._prevTime=0,V._cueIDCounter=0,V._cues=[],V.pixels=[],V._pixelsState=d(V),V._pixelDensity=1,V._modified=!1,V._frameOnCanvas=-1,Object.defineProperty(K,"src",{get:function(){var $=K.elt.children[0].src,ne=K.elt.src===window.location.href?"":K.elt.src;return $===window.location.href?ne:$},set:function($){for(var ne=0;ne<K.elt.children.length;ne++)K.elt.removeChild(K.elt.children[ne]);var Y=document.createElement("source");Y.src=$,G.appendChild(Y),K.elt.src=$,K.modified=!0}}),K._onended=function(){},K.elt.onended=function(){K._onended(K)},V}return w(J,[{key:"play",value:function(){var G;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(G=this.elt.play())&&G.catch&&G.catch(function(V){"NotAllowedError"===V.name?console.error(V):console.error("Media play method encountered an unexpected error",V)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var G=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(G)},{passive:!0,once:!0})}},{key:"autoplay",value:function(G){var V=this,K=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",G),G&&!K&&(G=function(){return V._setupAutoplayFailDetection()},4===this.elt.readyState?G():this.elt.addEventListener("canplay",G,{passive:!0,once:!0})),this}},{key:"volume",value:function(G){if(void 0===G)return this.elt.volume;this.elt.volume=G}},{key:"speed",value:function(G){if(void 0===G)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=G:this.presetPlaybackRate=G}},{key:"time",value:function(G){return void 0===G?this.elt.currentTime:(this.elt.currentTime=G,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&this._frameOnCanvas!==this._pInst.frameCount&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype.loadPixels.apply(this,V)}},{key:"updatePixels",value:function(G,V,K,$){return this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.updatePixels.call(this,G,V,K,$)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype.get.apply(this,V)}},{key:"_getPixel",value:function(){this.loadPixels();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype._getPixel.apply(this,V)}},{key:"set",value:function(G,V,K){this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.set.call(this,G,V,K),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];C.default.prototype.copy.apply(this,V)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];C.default.Image.prototype.mask.apply(this,V)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(G){this._modified=G}},{key:"onended",value:function(G){return this._onended=G,this}},{key:"connect",value:function(G){var V,K;if("function"==typeof C.default.prototype.getAudioContext)V=C.default.prototype.getAudioContext(),K=C.default.soundOut.input;else try{K=(V=G.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=V.createMediaElementSource(this.elt),this.audioSourceNode.connect(K)),this.audioSourceNode.connect(G?G.input?G.input:G:K)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(G,ne,K){var $=this._cueIDCounter++;return ne=new E(ne,G,$,K),this._cues.push(ne),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),$}},{key:"removeCue",value:function(G){for(var V=0;V<this._cues.length;V++)this._cues[V].id===G&&(console.log(G),this._cues.splice(V,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var G=this.time(),V=0;V<this._cues.length;V++){var K=this._cues[V].time;this._prevTime<K&&K<=G&&this._cues[V].callback(this._cues[V].val)}this._prevTime=G}}]),J}(C.default.Element),C.default.MediaElement=a,a=function(){function S(k,q){h(this,S),this.file=k,this._pInst=q,q=k.type.split("/"),this.type=q[0],this.subtype=q[1],this.name=k.name,this.size=k.size,this.data=void 0}return w(S,null,[{key:"_createLoader",value:function(k,q){var J=new FileReader;return J.onload=function(G){var V,K=new C.default.File(k);"application/json"===K.file.type?K.data=JSON.parse(G.target.result):"text/xml"===K.file.type?(V=(new DOMParser).parseFromString(G.target.result,"text/xml"),K.data=new C.default.XML(V.documentElement)):K.data=G.target.result,q(K)},J}},{key:"_load",value:function(k,q){var J;/^text\//.test(k.type)||"application/json"===k.type?C.default.File._createLoader(k,q).readAsText(k):/^(video|audio)\//.test(k.type)?((J=new C.default.File(k)).data=URL.createObjectURL(k),q(J)):C.default.File._createLoader(k,q).readAsDataURL(k)}}]),S}(),C.default.File=a,Z.default=a=C.default},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(p,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(p=p("../core/main"))&&p.__esModule?p:{default:p};M.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",M.default.prototype.accelerationX=0,M.default.prototype.accelerationY=0,M.default.prototype.accelerationZ=0,M.default.prototype.pAccelerationX=0,M.default.prototype.pAccelerationY=0,M.default.prototype.pAccelerationZ=0,M.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},M.default.prototype.rotationX=0,M.default.prototype.rotationY=0,M.default.prototype.rotationZ=0,M.default.prototype.pRotationX=0,M.default.prototype.pRotationY=0;var C=M.default.prototype.pRotationZ=0,b=0,w=0,I="clockwise",D="clockwise",d="clockwise",f=(M.default.prototype.pRotateDirectionX=void 0,M.default.prototype.pRotateDirectionY=void 0,M.default.prototype.pRotateDirectionZ=void 0,M.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},M.default.prototype.turnAxis=void 0,.5),h=30;M.default.prototype.setMoveThreshold=function(m){M.default._validateParameters("setMoveThreshold",arguments),f=m},M.default.prototype.setShakeThreshold=function(m){M.default._validateParameters("setShakeThreshold",arguments),h=m},M.default.prototype._ondeviceorientation=function(m){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(m.beta)),this._setProperty("rotationY",this._fromDegrees(m.gamma)),this._setProperty("rotationZ",this._fromDegrees(m.alpha)),this._handleMotion()},M.default.prototype._ondevicemotion=function(m){this._updatePAccelerations(),this._setProperty("accelerationX",2*m.acceleration.x),this._setProperty("accelerationY",2*m.acceleration.y),this._setProperty("accelerationZ",2*m.acceleration.z),this._handleMotion()},M.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var m,g,x,E,S,k=this._isGlobal?window:this;"function"==typeof k.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&k.deviceMoved(),"function"==typeof k.deviceTurned&&(g=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,m=C+180,0<g-x&&g-x<270||g-x<-270?I="clockwise":(g-x<0||270<g-x)&&(I="counter-clockwise"),I!==this.pRotateDirectionX&&(m=g),90<Math.abs(g-m)&&Math.abs(g-m)<270&&(m=g,this._setProperty("turnAxis","X"),k.deviceTurned()),this.pRotateDirectionX=I,C=m-180,x=this._toDegrees(this.rotationY)+180,g=this._toDegrees(this.pRotationY)+180,m=b+180,0<x-g&&x-g<270||x-g<-270?D="clockwise":(x-g<0||270<x-this.pRotationY)&&(D="counter-clockwise"),D!==this.pRotateDirectionY&&(m=x),90<Math.abs(x-m)&&Math.abs(x-m)<270&&(m=x,this._setProperty("turnAxis","Y"),k.deviceTurned()),this.pRotateDirectionY=D,b=m-180,0<(g=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&g-x<270||g-x<-270?d="clockwise":(g-x<0||270<g-x)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(w=g),90<Math.abs(g-w)&&Math.abs(g-w)<270&&(w=g,this._setProperty("turnAxis","Z"),k.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)),"function"==typeof k.deviceShaken&&(null!==this.pAccelerationX&&(E=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),h<E+S&&k.deviceShaken())},Z.default=p=M.default},{"../core/main":283}],301:[function(a,be,Z){"use strict";a("core-js/modules/es.array.for-each"),a("core-js/modules/es.string.repeat"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.string.repeat"),a("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.isKeyPressed=!1,M.default.prototype.keyIsPressed=!1,M.default.prototype.key="",M.default.prototype.keyCode=0,M.default.prototype._onkeydown=function(C){var b;C.repeat||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",C.which),this._downKeys[C.which]=!0,this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),C.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(C.which)),"function"!=typeof(b=this._isGlobal?window:this).keyPressed||C.charCode||!1===b.keyPressed(C)&&C.preventDefault())},M.default.prototype._onkeyup=function(C){var b=this,w=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[C.which]=!1,"Meta"===C.key&&this._metaKeys&&(this._metaKeys.forEach(function(I){b._downKeys[I]=!1}),this._metaKeys=[]),this._isGlobal?window:this);"function"==typeof w.keyReleased&&!1===w.keyReleased(C)&&C.preventDefault()},M.default.prototype._onkeypress=function(C){var b;C.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",C.which),this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),"function"==typeof(b=this._isGlobal?window:this).keyTyped&&!1===b.keyTyped(C)&&C.preventDefault())},M.default.prototype._onblur=function(C){this._downKeys={}},M.default.prototype.keyIsDown=function(C){return M.default._validateParameters("keyIsDown",arguments),this._downKeys[C]||!1},M.default.prototype._areDownKeys=function(){for(var C in this._downKeys)if(this._downKeys.hasOwnProperty(C)&&!0===this._downKeys[C])return!0;return!1},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(a,be,Z){"use strict";function M(D){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(D)}function C(D){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(D)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(b=a("../core/main"))&&b.__esModule?b:{default:b},w=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!==C(D)&&"function"!=typeof D)return{default:D};var d=I();if(d&&d.has(D))return d.get(D);var f,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in D){var m;Object.prototype.hasOwnProperty.call(D,f)&&((m=p?Object.getOwnPropertyDescriptor(D,f):null)&&(m.get||m.set)?Object.defineProperty(h,f,m):h[f]=D[f])}return h.default=D,d&&d.set(D,h),h}(a("../core/constants"));function I(){var D;return"function"!=typeof WeakMap?null:(I=function(){return D},D=new WeakMap)}b.default.prototype.movedX=0,b.default.prototype.movedY=0,b.default.prototype._hasMouseInteracted=!1,b.default.prototype.mouseX=0,b.default.prototype.mouseY=0,b.default.prototype.pmouseX=0,b.default.prototype.pmouseY=0,b.default.prototype.winMouseX=0,b.default.prototype.winMouseY=0,b.default.prototype.pwinMouseX=0,b.default.prototype.pwinMouseY=0,b.default.prototype.mouseButton=0,b.default.prototype.mouseIsPressed=!1,b.default.prototype._updateNextMouseCoords=function(D){var d,f,h,p,m;null!==this._curElement&&(!D.touches||0<D.touches.length)&&(f=this.width,h=this.height,(p=D)&&!p.clientX&&(p.touches?p=p.touches[0]:p.changedTouches&&(p=p.changedTouches[0])),m=(d=this._curElement.elt).getBoundingClientRect(),h={x:(p.clientX-m.left)/(f=d.scrollWidth/f||1),y:(p.clientY-m.top)/(d=d.scrollHeight/h||1),winX:p.clientX,winY:p.clientY,id:p.identifier},this._setProperty("movedX",D.movementX),this._setProperty("movedY",D.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},b.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},b.default.prototype._setMouseButton=function(D){this._setProperty("mouseButton",1===D.button?w.CENTER:2===D.button?w.RIGHT:w.LEFT)},b.default.prototype._onmousemove=function(D){var d=this._isGlobal?window:this;this._updateNextMouseCoords(D),this.mouseIsPressed?"function"==typeof d.mouseDragged?!1===d.mouseDragged(D)&&D.preventDefault():"function"==typeof d.touchMoved&&!1===d.touchMoved(D)&&D.preventDefault():"function"==typeof d.mouseMoved&&!1===d.mouseMoved(D)&&D.preventDefault()},b.default.prototype._onmousedown=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(D),this._updateNextMouseCoords(D),this.touchstart||("function"==typeof d.mousePressed?!1===d.mousePressed(D)&&D.preventDefault():"function"==typeof d.touchStarted&&!1===d.touchStarted(D)&&D.preventDefault(),this.touchstart=!1)},b.default.prototype._onmouseup=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof d.mouseReleased?!1===d.mouseReleased(D)&&D.preventDefault():"function"==typeof d.touchEnded&&!1===d.touchEnded(D)&&D.preventDefault(),this.touchend=!1)},b.default.prototype._ondragend=b.default.prototype._onmouseup,b.default.prototype._ondragover=b.default.prototype._onmousemove,b.default.prototype._onclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.mouseClicked&&!1===d.mouseClicked(D)&&D.preventDefault()},b.default.prototype._ondblclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.doubleClicked&&!1===d.doubleClicked(D)&&D.preventDefault()},b.default.prototype._mouseWheelDeltaY=0,b.default.prototype._pmouseWheelDeltaY=0,b.default.prototype._onwheel=function(D){var d=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",D.deltaY),"function"==typeof d.mouseWheel&&(D.delta=D.deltaY,!1===d.mouseWheel(D)&&D.preventDefault())},b.default.prototype.requestPointerLock=function(){var D=this._curElement.elt;return D.requestPointerLock=D.requestPointerLock||D.mozRequestPointerLock,D.requestPointerLock?(D.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},b.default.prototype.exitPointerLock=function(){document.exitPointerLock()},Z.default=a=b.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.touches=[],a.default.prototype._updateTouchCoords=function(M){if(null!==this._curElement){for(var C=[],b=0;b<M.touches.length;b++)C[b]=function(m,p,g,d){var f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=m.getBoundingClientRect();return p=m.scrollWidth/p||1,m=m.scrollHeight/g||1,{x:((g=d.touches[f]||d.changedTouches[f]).clientX-h.left)/p,y:(g.clientY-h.top)/m,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,M,b);this._setProperty("touches",C)}},a.default.prototype._ontouchstart=function(M){var C=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(M),this._updateNextMouseCoords(M),this._updateMouseCoords(),"function"==typeof C.touchStarted&&(!1===C.touchStarted(M)&&M.preventDefault(),this.touchstart=!0)},a.default.prototype._ontouchmove=function(M){var C=this._isGlobal?window:this;this._updateTouchCoords(M),this._updateNextMouseCoords(M),"function"==typeof C.touchMoved?!1===C.touchMoved(M)&&M.preventDefault():"function"==typeof C.mouseDragged&&!1===C.mouseDragged(M)&&M.preventDefault()},a.default.prototype._ontouchend=function(M){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(M),this._updateNextMouseCoords(M);var C=this._isGlobal?window:this;"function"==typeof C.touchEnded&&(!1===C.touchEnded(M)&&M.preventDefault(),this.touchend=!0)},Z.default=a=a.default},{"../core/main":283}],304:[function(a,be,Z){"use strict";a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.int32-array"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.int32-array"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M,C,b,w,I={_toPixels:function(D){var d,f;return D instanceof ImageData?D.data:D.getContext("2d")?D.getContext("2d").getImageData(0,0,D.width,D.height).data:D.getContext("webgl")?(f=(d=D.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,f=new Uint8Array(f),d.readPixels(0,0,D.width,D.height,d.RGBA,d.UNSIGNED_BYTE,f),f):void 0},_getARGB:function(D,d){return D[3+(d*=4)]<<24&4278190080|D[d]<<16&16711680|D[1+d]<<8&65280|255&D[2+d]},_setPixels:function(D,d){for(var f,h=0,p=D.length;h<p;h++)D[0+(f=4*h)]=(16711680&d[h])>>>16,D[1+f]=(65280&d[h])>>>8,D[2+f]=255&d[h],D[3+f]=(4278190080&d[h])>>>24},_toImageData:function(D){return D instanceof ImageData?D:D.getContext("2d").getImageData(0,0,D.width,D.height)},_createImageData:function(D,d){return I._tmpCanvas=document.createElement("canvas"),I._tmpCtx=I._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(D,d)},apply:function(D,m,f){var h=D.getContext("2d"),p=h.getImageData(0,0,D.width,D.height);(m=m(p,f))instanceof ImageData?h.putImageData(m,0,0,0,0,D.width,D.height):h.putImageData(p,0,0,0,0,D.width,D.height)},threshold:function(D){for(var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,f=I._toPixels(D),h=Math.floor(255*d),p=0;p<f.length;p+=4)f[p]=f[p+1]=f[p+2]=h<=.2126*f[p]+.7152*f[p+1]+.0722*f[p+2]?255:0},gray:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=d[f+1]=d[f+2]=.2126*d[f]+.7152*d[f+1]+.0722*d[f+2]},opaque:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f+3]=255;return d},invert:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2]},posterize:function(D){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,f=I._toPixels(D);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=d-1,p=0;p<f.length;p+=4){var g=f[p+1],x=f[p+2];f[p]=255*(f[p]*d>>8)/h,f[p+1]=255*(g*d>>8)/h,f[p+2]=255*(x*d>>8)/h}},dilate:function(D){for(var d,f,h,p,m,g,x,E,S,k=I._toPixels(D),q=0,J=k.length?k.length/4:0,G=new Int32Array(J);q<J;)for(f=(d=q)+D.width;q<f;)p=h=I._getARGB(k,q),(S=q-1)<d&&(S=q),f<=(E=q+1)&&(E=q),(m=q-D.width)<0&&(m=0),J<=(g=q+D.width)&&(g=q),m=I._getARGB(k,m),S=I._getARGB(k,S),g=I._getARGB(k,g),(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(x=77*((S=I._getARGB(k,E))>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(h=m,p=E),p<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,p=S),G[q++]=h;I._setPixels(k,G)},erode:function(D){for(var d,f,h,p,m,g,x,E,S,k=I._toPixels(D),q=0,J=k.length?k.length/4:0,G=new Int32Array(J);q<J;)for(f=(d=q)+D.width;q<f;)p=h=I._getARGB(k,q),(S=q-1)<d&&(S=q),f<=(E=q+1)&&(E=q),(m=q-D.width)<0&&(m=0),J<=(g=q+D.width)&&(g=q),m=I._getARGB(k,m),S=I._getARGB(k,S),g=I._getARGB(k,g),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(h=S,p=x),(x=77*((S=I._getARGB(k,E))>>16&255)+151*(S>>8&255)+28*(255&S))<p&&(h=S,p=x),(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<p&&(h=m,p=E),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<p&&(h=g,p=S),G[q++]=h;I._setPixels(k,G)},blur:function(D,d){for(var f,h,p,m,g,x,E,S,k,q,J=I._toPixels(D),G=D.width,V=D.height,K=G*V,$=new Int32Array(K),ne=0;ne<K;ne++)$[ne]=I._getARGB(J,ne);var Y,we,Se,oe,ge,re,Q,fe,Ce=new Int32Array(K),it=new Int32Array(K),le=new Int32Array(K),z=new Int32Array(K),ye=0,je=3.5*d|0;if(M!==(je=je<1?1:je<248?je:248)){C=1+(M=je)<<1,b=new Int32Array(C),w=new Array(C);for(var Je=0;Je<C;Je++)w[Je]=new Int32Array(256);for(var gt=1,Ct=je-1;gt<je;gt++){b[je+gt]=b[Ct]=re=Ct*Ct,Q=w[je+gt],fe=w[Ct--];for(var $t=0;$t<256;$t++)Q[$t]=fe[$t]=re*$t}ge=b[je]=je*je,Q=w[je];for(var yt=0;yt<256;yt++)Q[yt]=ge*yt}for(we=0;we<V;we++){for(Y=0;Y<G;Y++){if(m=p=h=g=f=0,(x=Y-M)<0)q=-x,x=0;else{if(G<=x)break;q=0}for(Se=q;Se<C&&!(G<=x);Se++){var Ut=$[x+ye];g+=(oe=w[Se])[(-16777216&Ut)>>>24],h+=oe[(16711680&Ut)>>16],p+=oe[(65280&Ut)>>8],m+=oe[255&Ut],f+=b[Se],x++}Ce[E=ye+Y]=g/f,it[E]=h/f,le[E]=p/f,z[E]=m/f}ye+=G}for(k=(S=-M)*G,we=ye=0;we<V;we++){for(Y=0;Y<G;Y++){if(m=p=h=g=f=0,S<0)q=E=-S,x=Y;else{if(V<=S)break;q=0,E=S,x=Y+k}for(Se=q;Se<C&&!(V<=E);Se++)g+=(oe=w[Se])[Ce[x]],h+=oe[it[x]],p+=oe[le[x]],m+=oe[z[x]],f+=b[Se],E++,x+=G;$[Y+ye]=g/f<<24|h/f<<16|p/f<<8|m/f}ye+=G,k+=G,S++}I._setPixels(J,$)}};Z.default=I},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(a("../core/main")),C=b(a("omggif"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.createImage=function(I,D){return M.default._validateParameters("createImage",arguments),new M.default.Image(I,D)},M.default.prototype.saveCanvas=function(){for(var I,D,d,f,h,p,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];switch(M.default._validateParameters("saveCanvas",g),g[0]instanceof HTMLCanvasElement?(I=g[0],g.shift()):g[0]instanceof M.default.Element?(I=g[0].elt,g.shift()):g[0]instanceof M.default.Framebuffer?((h=this.createGraphics((f=g[0]).width,f.height)).pixelDensity(pixelDensity()),f.loadPixels(),h.loadPixels(),h.pixels.set(f.pixels),h.updatePixels(),I=h.elt,g.shift()):I=this._curElement&&this._curElement.elt,1<=g.length&&(D=g[0]),d=(d=2<=g.length?g[1]:d)||M.default.prototype._checkFileExtension(D,d)[1]||"png"){default:p="image/png";break;case"webp":p="image/webp";break;case"jpeg":case"jpg":p="image/jpeg"}I.toBlob(function(E){M.default.prototype.downloadFile(E,D,d),h&&h.remove()},p)},M.default.prototype.encodeAndDownloadGif=function(I,D){for(var d=I.gifProperties,h=(1===(f=d.loopLimit)?f=null:null===f&&(f=0),new Uint8Array(I.width*I.height*d.numFrames)),p=[],m={},g=0;g<d.numFrames;g++){for(var x=new Set,E=d.frames[g].image.data,S=E.length,k=new Uint32Array(I.width*I.height),q=0,J=0;q<S;q+=4,J++){var G=E[q+0]<<16|E[q+1]<<8|E[q+2];x.add(G),k[J]=G}var V=w(x).sort().toString();void 0===m[V]?m[V]={freq:1,frames:[g]}:(m[V].freq+=1,m[V].frames.push(g)),p.push(k)}for(var ne=[],K=Object.keys(m).sort(function(le,z){return m[z].freq-m[le].freq}),$=K[0].split(",").map(function(le){return parseInt(le)}),Y=(ne=ne.concat(m[$].frames),new Set($)),we=1;we<K.length;we++){var Se=K[we].split(",").map(function(le){return parseInt(le)}).filter(function(le){return!Y.has(le)});if($.length+Se.length<=256){for(var oe=0;oe<Se.length;oe++)$.push(Se[oe]),Y.add(Se[oe]);ne=ne.concat(m[K[we]].frames)}}ne=new Set(ne);for(var ge={},re=0;re<$.length;re++)ge[$[re]]||(ge[$[re]]=re);for(var Q=1;Q<$.length;)Q<<=1;$.length=Q;for(var f={loop:f,palette:new Uint32Array($)},fe=new C.default.GifWriter(h,I.width,I.height,f),Ce={},it=0;it<d.numFrames;it++)!function(z){var ye=!ne.has(z),je=ye?[]:$,Je=new Uint8Array(I.width*I.height),gt={},Ct=new Set,$t=(p[z].forEach(function(jt,Lt){ye?(void 0===gt[jt]&&(gt[jt]=je.length,je.push(jt)),Je[Lt]=gt[jt]):Je[Lt]=ge[jt],0<z&&p[z-1][Lt]!==jt&&Ct.add(jt)}),{});if(0<(yt=je.filter(function(jt){return!Ct.has(jt)})).length){var yt,Ut=(ye?gt:ge)[yt=yt[0]];if(0<z){for(var Xt=0;Xt<p[z].length;Xt++)p[z-1][Xt]===p[z][Xt]&&(Je[Xt]=Ut);$t.transparent=Ut,Ce.frameOpts.disposal=1}}if($t.delay=d.frames[z].delay/10,ye){for(var ft=1;ft<je.length;)ft<<=1;je.length=ft,$t.palette=new Uint32Array(je)}0<z&&fe.addFrame(0,0,I.width,I.height,Ce.pixelPaletteIndex,Ce.frameOpts),Ce={pixelPaletteIndex:Je,frameOpts:$t}}(it);Ce.frameOpts.disposal=1,fe.addFrame(0,0,I.width,I.height,Ce.pixelPaletteIndex,Ce.frameOpts),f=new Blob([h.slice(0,fe.end())],{type:"image/gif"}),M.default.prototype.downloadFile(f,D,"gif")},M.default.prototype.saveFrames=function(I,D,d,p,h){M.default._validateParameters("saveFrames",arguments),d=M.default.prototype.constrain(d=d||3,0,15),d*=1e3,p=M.default.prototype.constrain(p||15,0,22);var m=0,g=M.default.prototype._makeFrame,x=this._curElement.elt,E=[],S=setInterval(function(){E.push(g(I+m,D,x)),m++},1e3/p);setTimeout(function(){if(clearInterval(S),h)h(E);else for(var k=0,q=E;k<q.length;k++){var J=q[k];M.default.prototype.downloadFile(J.imageData,J.filename,J.ext)}E=[]},.01+d)},M.default.prototype._makeFrame=function(I,D,h){var f;if(h=this?this._curElement.elt:h,D)switch(D.toLowerCase()){case"png":default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}else D="png",f="image/png";h=(h=h.toDataURL(f)).replace(f,"image/octet-stream");var p={};return p.imageData=h,p.filename=I,p.ext=D,p},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(a,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.copy-within"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint8-clamped-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.copy-within"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint8-clamped-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,a("regenerator-runtime/runtime");var b=h(a("../core/main")),w=h(a("../core/helpers")),I=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=f();if(E&&E.has(x))return E.get(x);var S,k={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(k,S,J):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(a("../core/constants")),D=h(a("omggif")),d=a("gifenc");function f(){var x;return"function"!=typeof WeakMap?null:(f=function(){return x},x=new WeakMap)}function h(x){return x&&x.__esModule?x:{default:x}}function p(x,E,S,k,q,J,G){try{var V=x[J](G),K=V.value}catch($){return void S($)}V.done?E(K):Promise.resolve(K).then(k,q)}function g(x,E){return 0<x&&x<E?x:E}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),b.default.prototype.loadImage=function(x,E,S){b.default._validateParameters("loadImage",arguments);var k=new b.default.Image(1,1,this),q=this,J=new Request(x,{method:"GET",mode:"cors"});return fetch(x,J).then(function(G){var V,K=G.headers.get("content-type");null===K&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),K&&K.includes("image/gif")?G.arrayBuffer().then(function($){if($){$=new Uint8Array($);for(var ne=k,Y=E,we=S,Se=function(ye){q._decrementPreload()}.bind(q),oe=new D.default.GifReader($),ge=(ne.width=ne.canvas.width=oe.width,ne.height=ne.canvas.height=oe.height,[]),re=oe.numFrames(),Q=new Uint8ClampedArray(ne.width*ne.height*4),fe=0;fe<re;fe++){var Ce=oe.frameInfo(fe),it=ne.drawingContext.getImageData(0,0,ne.width,ne.height),le=(Q=it.data.slice(),function(ye,je){try{je.decodeAndBlitFrameRGBA(ye,Q)}catch(Je){b.default._friendlyFileLoadError(8,ne.src),"function"==typeof we?we(Je):console.error(Je)}}(fe,oe),new ImageData(Q,ne.width,ne.height));0===(ne.drawingContext.putImageData(le,0,0),le=Ce.delay)&&(le=10),ge.push({image:ne.drawingContext.getImageData(0,0,ne.width,ne.height),delay:10*le}),2===Ce.disposal?ne.drawingContext.clearRect(Ce.x,Ce.y,Ce.width,Ce.height):3===Ce.disposal&&ne.drawingContext.putImageData(it,0,0,Ce.x,Ce.y,Ce.width,Ce.height)}null===($=oe.loopCount())?$=1:0===$&&($=null),ne.drawingContext.putImageData(ge[0].image,0,0),1<ge.length&&(ne.gifProperties={displayIndex:0,loopLimit:$,loopCount:0,frames:ge,numFrames:re,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof Y&&Y(ne),Se()}},function($){"function"==typeof S?(S($),q._decrementPreload()):console.error($)}):((V=new Image).onload=function(){k.width=k.canvas.width=V.width,k.height=k.canvas.height=V.height,k.drawingContext.drawImage(V,0,0),k.modified=!0,"function"==typeof E&&E(k),q._decrementPreload()},V.onerror=function($){b.default._friendlyFileLoadError(0,V.src),"function"==typeof S?(S($),q._decrementPreload()):console.error($)},0!==x.indexOf("data:image/")&&(V.crossOrigin="Anonymous"),V.src=x),k.modified=!0}).catch(function(G){b.default._friendlyFileLoadError(0,x),"function"==typeof S?(S(G),q._decrementPreload()):console.error(G)}),k},b.default.prototype.saveGif=function(){x=F.mark(function S(k,q){var J,G,V,K,$,ne,Y,we,Se,oe,ge,re,Q,fe,Ce,it,le,z,ye,je,Je,gt,Ct,$t,yt,Ut,Xt=arguments;return F.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(J=2<Xt.length&&void 0!==Xt[2]?Xt[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof k)throw TypeError("fileName parameter must be a string");ft.next=3;break;case 3:if("number"!=typeof q)throw TypeError("Duration parameter must be a number");ft.next=5;break;case 5:if(V=J&&J.units||"seconds",K=J&&J.silent||!1,$=J&&J.notificationDuration||0,ne=J&&J.notificationID||"progressBar","number"!=typeof(G=J&&J.delay||0))throw TypeError("Delay parameter must be a number");ft.next=12;break;case 12:if("seconds"!==V&&"frames"!==V)throw TypeError('Units parameter must be either "frames" or "seconds"');ft.next=14;break;case 14:if("boolean"!=typeof K)throw TypeError("Silent parameter must be a boolean");ft.next=16;break;case 16:if("number"!=typeof $)throw TypeError("Notification duration parameter must be a number");ft.next=18;break;case 18:if("string"!=typeof ne)throw TypeError("Notification ID parameter must be a string");ft.next=20;break;case 20:return this._recording=!0,Y=(Y=1/(oe=(oe=this._targetFrameRate)!==1/0&&void 0!==oe&&0!==oe?oe:60)*1e3)<20?20:Y,Se=(we="seconds"===V?q*oe:q)+(oe="seconds"===V?G*oe:G),this.frameCount=oe,ge=this._pixelDensity,this.pixelDensity(1),re=[],null!==document.getElementById(ne)&&document.getElementById(ne).remove(),K||((Q=this.createP("")).id(ne),Q.style("font-size","16px"),Q.style("font-family","Montserrat"),Q.style("background-color","#ffffffa0"),Q.style("padding","8px"),Q.style("border-radius","10px"),Q.position(0,0)),this._renderer instanceof b.default.RendererGL&&(Ce=this.drawingContext,fe=new Uint8Array(Ce.drawingBufferWidth*Ce.drawingBufferHeight*4)),this.noLoop(),ft.next=39,Promise.resolve();case 39:if(oe<Se)return this.redraw(),$t=void 0,$t=this._renderer instanceof b.default.RendererGL?(fe=new Uint8Array(Ce.drawingBufferWidth*Ce.drawingBufferHeight*4),Ce.readPixels(0,0,Ce.drawingBufferWidth,Ce.drawingBufferHeight,Ce.RGBA,Ce.UNSIGNED_BYTE,fe),function(jt,Lt,Bt){for(var Et=parseInt(Bt/2),Kt=4*Lt,yn=new Uint8Array(4*Lt),Yn=0;Yn<Et;++Yn){var An=Yn*Kt,Jn=(Bt-Yn-1)*Kt;yn.set(jt.subarray(An,An+Kt)),jt.copyWithin(An,Jn,Jn+Kt),jt.set(yn,Jn)}return jt}(fe,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,re.push($t),oe++,K||Q.html("Saved frame <b>"+re.length.toString()+"</b> out of "+we.toString()),ft.next=48,new Promise(function(jt){return setTimeout(jt,0)});ft.next=50;break;case 48:ft.next=39;break;case 50:K||Q.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(ge),it=(0,d.GIFEncoder)(),le=function(jt){for(var Lt=new Uint8Array(jt.length*jt[0].length),Bt=0;Bt<jt.length;Bt++)Lt.set(jt[Bt],Bt*jt[0].length);var Et=(0,d.quantize)(Lt,256,{format:"rgba4444",oneBitAlpha:!0});return 256===Et.length?Et[Et.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Et.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Et}(re),z={},ye=function(jt){for(var Lt=jt.length/4,Bt=new Uint8Array(Lt),Et=0;Et<Lt;Et++){var Kt=jt[4*Et]<<24|jt[4*Et+1]<<16|jt[4*Et+2]<<8|jt[4*Et+3];void 0===z[Kt]&&(z[Kt]=(0,d.nearestColorIndex)(le,jt.slice(4*Et,4*(Et+1)))),Bt[Et]=z[Kt]}return Bt},je=le.length-1,Je=[],gt=0;case 60:if(!(gt<re.length)){ft.next=71;break}if(Ct=ye(re[gt]),$t=Ct.slice(),0===gt)it.writeFrame(Ct,this.width,this.height,{palette:le,delay:Y,dispose:1});else{for(yt=0;yt<Ct.length;yt++)Ct[yt]===Je[yt]&&(Ct[yt]=je);it.writeFrame(Ct,this.width,this.height,{delay:Y,transparent:!0,transparentIndex:je,dispose:1})}return Je=$t,K||Q.html("Rendered frame <b>"+gt.toString()+"</b> out of "+we.toString()),ft.next=68,new Promise(function(jt){return setTimeout(jt,0)});case 68:gt++,ft.next=60;break;case 71:it.finish(),Ut=it.bytesView(),Ut=new Blob([Ut],{type:"image/gif"}),re=[],this._recording=!1,this.loop(),K||(Q.html("Done. Downloading your gif!\u{1f338}"),0<$&&setTimeout(function(){return Q.remove()},1e3*$)),b.default.prototype.downloadFile(Ut,k,"gif");case 80:case"end":return ft.stop()}},S,this)});var x,E=function(){var S=this,k=arguments;return new Promise(function(q,J){var G=x.apply(S,k);function V($){p(G,q,J,V,K,"next",$)}function K($){p(G,q,J,V,K,"throw",$)}V(void 0)})};return function(S,k){return E.apply(this,arguments)}}(),b.default.prototype.image=function(x,E,S,k,oe,ge,re,Q,Ce,$,ne,Y){b.default._validateParameters("image",arguments);var fe=x.width,we=x.height,Se=(Y=Y||I.CENTER,ne=ne||I.CENTER,x.elt&&(fe=void 0!==fe?fe:x.elt.width,we=void 0!==we?we:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(fe=void 0!==fe?fe:x.elt.videoWidth,we=void 0!==we?we:x.elt.videoHeight),k||fe);oe=oe||we,ge=ge||0,re=re||0,Q=g(void 0!==Q?Q:fe,fe),fe=g(void 0!==Ce?Ce:we,we),Ce=1,x.elt&&!x.canvas&&x.elt.style.width&&(Ce=x.elt.videoWidth&&!k?x.elt.videoWidth:x.elt.width,Ce/=parseInt(x.elt.style.width,10)),ge*=Ce,re*=Ce,fe*=Ce,Q*=Ce,we=function m(x,E,S,k,q,J,G,V,K,$,ne){var Y,we,Se,oe,ge,re,Q,fe,Ce;return x===I.COVER&&(Y=E,Se=S,Q=J,fe=G,re=V,Ce=K,we=$,oe=ne,Q/=ge=Math.max(Q/we,fe/oe),fe/=ge,ge=re,re=Ce,Y===I.CENTER?ge+=(we-Q)/2:Y===I.RIGHT&&(ge+=we-Q),Se===I.CENTER?re+=(oe-fe)/2:Se===I.BOTTOM&&(re+=oe-fe),V=(Ce={x:ge,y:re,w:Q,h:fe}).x,K=Ce.y,$=Ce.w,ne=Ce.h),x===I.CONTAIN&&(Y=E,we=S,Se=k,oe=q,ge=J,re=G,Q=$,fe=ne,Q/=Ce=Math.max(Q/ge,fe/re),fe/=Ce,Ce=Se,Se=oe,Y===I.CENTER?Ce+=(ge-Q)/2:Y===I.RIGHT&&(Ce+=ge-Q),we===I.CENTER?Se+=(re-fe)/2:we===I.BOTTOM&&(Se+=re-fe),k=(x={x:Ce,y:Se,w:Q,h:fe}).x,q=x.y,J=x.w,G=x.h),{sx:V,sy:K,sw:$,sh:ne,dx:k,dy:q,dw:J,dh:G}}($,ne,Y,(we=w.default.modeAdjust(E,S,Se,oe,this._renderer._imageMode)).x,we.y,we.w,we.h,ge,re,Q,fe),this._renderer.image(x,we.sx,we.sy,we.sw,we.sh,we.dx,we.dy,we.dw,we.dh)},b.default.prototype.tint=function(){for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];b.default._validateParameters("tint",E);var k=this.color.apply(this,E);this._renderer._tint=k.levels},b.default.prototype.noTint=function(){this._renderer._tint=null},b.default.prototype._getTintedImageCanvas=b.default.Renderer2D.prototype._getTintedImageCanvas,b.default.prototype.imageMode=function(x){b.default._validateParameters("imageMode",arguments),x!==I.CORNER&&x!==I.CORNERS&&x!==I.CENTER||(this._renderer._imageMode=x)},Z.default=a=b.default},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(a("../core/main")),C=b(a("./filters"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I,D){for(var d=0;d<D.length;d++){var f=D[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,f.key,f)}}M.default.Image=function(){function I(h,p){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var D,d;return D=I,(d=[{key:"pixelDensity",value:function(h){return void 0!==h?(h<=0&&(M.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var p,m=this.gifProperties;g=g._lastRealFrameTime||window.performance.now(),0===m.lastChangeTime&&(m.lastChangeTime=g),m.playing&&(m.timeDisplayed=g-m.lastChangeTime,m.timeDisplayed>=(p=m.frames[m.displayIndex].delay)&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=g,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),null!==m.loopLimit&&m.loopCount>=m.loopLimit?m.playing=!1:(this.drawingContext.putImageData(m.frames[g=m.displayIndex%m.numFrames].image,0,0),m.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(h,p){this[h]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){M.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,p,m,g){M.default.Renderer2D.prototype.updatePixels.call(this,h,p,m,g),this.setModified(!0)}},{key:"get",value:function(h,p,m,g){return M.default._validateParameters("p5.Image.get",arguments),M.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return M.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(h,p,m){M.default.Renderer2D.prototype.set.call(this,h,p,m),this.setModified(!0)}},{key:"resize",value:function(h,p){0===h&&0===p?(h=this.canvas.width,p=this.canvas.height):0===h?h=this.canvas.width*p/this.canvas.height:0===p&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=h,m.height=p,this.gifProperties)for(var g=this.gifProperties,x=0;x<g.numFrames;x++){for(var E=this.drawingContext.createImageData(h,p),S=(V=V=G=J=q=void 0,g.frames[x].image),k=E,q=0,J=0;J<k.height;J++)for(var G=0;G<k.width;G++){var V=Math.floor(G*S.width/k.width);V=4*(Math.floor(J*S.height/k.height)*S.width+V),k.data[q++]=S.data[V++],k.data[q++]=S.data[V++],k.data[q++]=S.data[V++],k.data[q++]=S.data[+V]}g.frames[x].image=E}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(h){var p=this.drawingContext.globalCompositeOperation,m=this._pixelDensity,g=1,x=[h=void 0===h?this:h,0,0,(g=h instanceof M.default.Renderer?h._pInst._pixelDensity:g)*h.width,g*h.height,0,0,m*this.width,m*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var E=0;E<this.gifProperties.frames.length;E++)this.drawingContext.putImageData(this.gifProperties.frames[E].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[E].image=this.drawingContext.getImageData(0,0,m*this.width,m*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(h,p){C.default.apply(this.canvas,C.default[h],p),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default._validateParameters("p5.Image.blend",arguments),M.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,p){this.gifProperties?M.default.prototype.encodeAndDownloadGif(this,h):M.default.prototype.saveCanvas(this.canvas,h,p)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var p;this.gifProperties&&(h<(p=this.gifProperties).numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=h;else{var g=!0,x=void(p=!1);try{for(var E,S=m.frames[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)E.value.delay=h}catch(q){p=!0,x=q}finally{try{g||null==S.return||S.return()}finally{if(p)throw x}}}}}}])&&w(D.prototype,d),I}(),Z.default=a=M.default.Image},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(a,be,Z){"use strict";a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.filter"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(a("../core/main")),C=b(a("./filters"));function b(w){return w&&w.__esModule?w:{default:w}}a("../color/p5.Color"),M.default.prototype.pixels=[],M.default.prototype.blend=function(){for(var w,I=arguments.length,D=new Array(I),d=0;d<I;d++)D[d]=arguments[d];M.default._validateParameters("blend",D),this._renderer?(w=this._renderer).blend.apply(w,D):M.default.Renderer2D.prototype.blend.apply(this,D)},M.default.prototype.copy=function(){for(var w,I,D,d,f,h,p,m,g,x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];if(M.default._validateParameters("copy",E),9===E.length)w=E[0],I=E[1],D=E[2],d=E[3],f=E[4],h=E[5],p=E[6],m=E[7],g=E[8];else{if(8!==E.length)throw new Error("Signature not supported");w=this,I=E[0],D=E[1],d=E[2],f=E[3],h=E[4],p=E[5],m=E[6],g=E[7]}M.default.prototype._copyHelper(this,w,I,D,d,f,h,p,m,g)},M.default.prototype._copyHelper=function(w,I,D,d,f,h,p,m,g,x){var E=I.canvas.width/I.width,S=0,k=0;I._renderer&&I._renderer.isP3D&&(S=I.width/2,k=I.height/2),w._renderer&&w._renderer.isP3D?(w.push(),w.resetMatrix(),w.noLights(),w.blendMode(w.BLEND),w.imageMode(w.CORNER),M.default.RendererGL.prototype.image.call(w._renderer,I,D+S,d+k,f,h,p,m,g,x),w.pop()):w.drawingContext.drawImage(I.canvas,E*(D+S),E*(d+k),E*f,E*h,p,m,g,x)},M.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},M.default.prototype.filter=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("filter",I);var p=function(){var m,g={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof M.default.Shader?g.shader=arguments.length<=0?void 0:arguments[0]:(g.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(g.value=arguments.length<=1?void 0:arguments[1]),!1===((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])&&(g.useWebGL=!1)),g}.apply(void 0,I),d=p.shader,f=p.operation,h=p.value;p=p.useWebGL,this._renderer.isP3D&&d?M.default.RendererGL.prototype.filter.call(this._renderer,d):p||this._renderer.isP3D?(!p&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?M.default.RendererGL.prototype.filter.call(this._renderer,f,h):((d=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),d.filter.apply(d,I),this.copy(d._renderer,0,0,this.width,this.height,0,0,this.width,this.height),d.clear())):C.default.apply(void 0!==this.canvas?this.canvas:this.elt,C.default[f],h)},M.default.prototype.get=function(w,I,D,d){var f;return M.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},M.default.prototype.loadPixels=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("loadPixels",I),this._renderer.loadPixels()},M.default.prototype.set=function(w,I,D){this._renderer.set(w,I,D)},M.default.prototype.updatePixels=function(w,I,D,d){M.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(w,I,D,d)},Z.default=a=M.default},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(a,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=I(a("../core/main")),b=(a("whatwg-fetch"),a("es6-promise/auto"),I(a("fetch-jsonp"))),w=I(a("file-saver"));function I(h){return h&&h.__esModule?h:{default:h}}function D(h){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}function d(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(h,p){p&&!0!==p&&"true"!==p||(p="");var m="";return(h=h||"untitled")&&h.includes(".")&&(m=h.split(".").pop()),p&&m!==p&&(m=p,h="".concat(h,".").concat(m)),[h,m]}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),C.default.prototype.loadJSON=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];C.default._validateParameters("loadJSON",p);for(var g,x,E,S=p[0],k={},q="json",J=1;J<p.length;J++){var G=p[J];"string"==typeof G?"jsonp"!==G&&"json"!==G||(q=G):"function"==typeof G?g?x=G:g=G:"object"===D(G)&&(G.hasOwnProperty("jsonpCallback")||G.hasOwnProperty("jsonpCallbackFunction"))&&(q="jsonp",E=G)}var V=this;return this.httpDo(S,"GET",E,q,function(K){for(var $ in K)k[$]=K[$];void 0!==g&&g(K),V._decrementPreload()},function(K){if(C.default._friendlyFileLoadError(5,S),!x)throw K;x(K)}),k},C.default.prototype.loadStrings=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];C.default._validateParameters("loadStrings",p);for(var g,x,E=[],S=1;S<p.length;S++){var k=p[S];"function"==typeof k&&(void 0===g?g=k:void 0===x&&(x=k))}var q=this;return C.default.prototype.httpDo.call(this,p[0],"GET","text",function(J){for(var G=J.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),V=0,K=G.length;V<K;V+=32768)Array.prototype.push.apply(E,G.slice(V,Math.min(V+32768,K)));void 0!==g&&g(E),q._decrementPreload()},function(J){if(C.default._friendlyFileLoadError(3,J),!x)throw J;x(J)}),E},C.default.prototype.loadTable=function(h){var p,m,g,x=[],E=!1,S=h.substring(h.lastIndexOf(".")+1,h.length);"csv"===S?g=",":"ssv"===S?g=";":"tsv"===S&&(g="\t");for(var k=1;k<arguments.length;k++)"function"==typeof arguments[k]?void 0===p?p=arguments[k]:void 0===m&&(m=arguments[k]):"string"==typeof arguments[k]&&(x.push(arguments[k]),"header"===arguments[k]&&(E=!0),"csv"===arguments[k]?g=",":"ssv"===arguments[k]?g=";":"tsv"===arguments[k]&&(g="\t"));var q=new C.default.Table,J=this;return this.httpDo(h,"GET","table",function(G){for(var V,K,$={},Y=[],we=0,Se=null,oe=function(){$.currentState=0,$.token=""},ge=function(){Se.push($.token),oe()},re=function(){$.currentState=4,Y.push(Se),Se=null};;){if(null==(V=G[we++])){if($.escaped)throw new Error("Unclosed quote in file.");if(Se){ge(),re();break}}if(null===Se&&($.escaped=!1,Se=[],oe()),0===$.currentState){if('"'===V){$.escaped=!0,$.currentState=1;continue}$.currentState=1}if(1===$.currentState&&$.escaped)if('"'===V)'"'===G[we]?($.token+='"',we++):($.escaped=!1,$.currentState=2);else{if("\r"===V)continue;$.token+=V}else"\r"===V?("\n"===G[we]&&we++,ge(),re()):"\n"===V?(ge(),re()):V===g?ge():1===$.currentState&&($.token+=V)}if(E)q.columns=Y.shift();else for(var Q=0;Q<Y[0].length;Q++)q.columns[Q]="null";for(var fe=0;fe<Y.length;fe++)(1!==Y[fe].length||"undefined"!==Y[fe][0]&&""!==Y[fe][0])&&((K=new C.default.TableRow).arr=Y[fe],K.obj=function(Ce,it){if(void 0===(it=it||[]))for(var le=0;le<Ce.length;le++)it[le.toString()]=le;return Object.fromEntries(it.map(function(z,ye){return[z,Ce[ye]]}))}(Y[fe],q.columns),q.addRow(K));"function"==typeof p&&p(q),J._decrementPreload()},function(G){C.default._friendlyFileLoadError(2,h),m?m(G):console.error(G)}),q},C.default.prototype.loadXML=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];for(var g,x,E=new C.default.XML,S=1;S<p.length;S++){var k=p[S];"function"==typeof k&&(void 0===g?g=k:void 0===x&&(x=k))}var q=this;return this.httpDo(p[0],"GET","xml",function(J){for(var G in J)E[G]=J[G];void 0!==g&&g(E),q._decrementPreload()},function(J){if(C.default._friendlyFileLoadError(1,J),!x)throw J;x(J)}),E},C.default.prototype.loadBytes=function(h,p,m){var g={},x=this;return this.httpDo(h,"GET","arrayBuffer",function(E){g.bytes=new Uint8Array(E),"function"==typeof p&&p(g),x._decrementPreload()},function(E){if(C.default._friendlyFileLoadError(6,h),!m)throw E;m(E)}),g},C.default.prototype.httpGet=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return C.default._validateParameters("httpGet",p),p.splice(1,0,"GET"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpPost=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return C.default._validateParameters("httpPost",p),p.splice(1,0,"POST"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpDo=function(){for(var h,p,m,g={},x=0,E="text/plain",S=arguments.length-1;0<S&&"function"==typeof(S<0||arguments.length<=S?void 0:arguments[S]);S--)x++;var q=arguments.length<=0?void 0:arguments[0];if(2==(k=arguments.length-x)&&"string"==typeof q&&"object"===D(arguments.length<=1?void 0:arguments[1]))ne=new Request(q,arguments.length<=1?void 0:arguments[1]),p=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var J,G="GET",V=1;V<arguments.length;V++){var K=V<0||arguments.length<=V?void 0:arguments[V];if("string"==typeof K)"GET"===K||"POST"===K||"PUT"===K||"DELETE"===K?G=K:"json"===K||"jsonp"===K||"binary"===K||"arrayBuffer"===K||"xml"===K||"text"===K||"table"===K?h=K:J=K;else if("number"==typeof K)J=K.toString();else if("object"===D(K))if(K.hasOwnProperty("jsonpCallback")||K.hasOwnProperty("jsonpCallbackFunction"))for(var $ in K)g[$]=K[$];else E=K instanceof C.default.XML?(J=K.serialize(),"application/xml"):(J=JSON.stringify(K),"application/json");else"function"==typeof K&&(p?m=K:p=K)}var k="GET"===G?new Headers:new Headers({"Content-Type":E}),ne=new Request(q,{method:G,mode:"cors",body:J,headers:k})}return(k=(k="jsonp"===(h=h||(q.includes("json")?"json":q.includes("xml")?"xml":"text"))?(0,b.default)(q,g):fetch(ne)).then(function(Y){if(!Y.ok)throw(we=new Error(Y.body)).status=Y.status,we.ok=!1,we;var we=0;switch((we="jsonp"!==h?Y.headers.get("content-length"):we)&&64e6<we&&C.default._friendlyFileLoadError(7,q),h){case"json":case"jsonp":return Y.json();case"binary":return Y.blob();case"arrayBuffer":return Y.arrayBuffer();case"xml":return Y.text().then(function(Se){return Se=(new DOMParser).parseFromString(Se,"text/xml"),new C.default.XML(Se.documentElement)});default:return Y.text()}})).then(p||function(){}),k.catch(m||console.error),k},window.URL=window.URL||window.webkitURL,C.default.prototype._pWriters=[],C.default.prototype.createWriter=function(h,p){var m,g;for(g in C.default.prototype._pWriters)if(C.default.prototype._pWriters[g].name===h)return m=new C.default.PrintWriter(h+this.millis(),p),C.default.prototype._pWriters.push(m),m;return m=new C.default.PrintWriter(h,p),C.default.prototype._pWriters.push(m),m},C.default.PrintWriter=function(h,p){var m=this;this.name=h,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,"\n")},this.clear=function(){this.content=""},this.close=function(){var g,x=[];for(g in x.push(this.content),C.default.prototype.writeFile(x,h,p),C.default.prototype._pWriters)C.default.prototype._pWriters[g].name===this.name&&C.default.prototype._pWriters.splice(g,1);m.clear(),m={}}},C.default.prototype.save=function(h,p,m){var g=arguments,x=(this._curElement||this).elt;if(0===g.length)C.default.prototype.saveCanvas(x);else if(g[0]instanceof C.default.Renderer||g[0]instanceof C.default.Graphics)C.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(1===g.length&&"string"==typeof g[0])C.default.prototype.saveCanvas(x,g[0]);else switch(f(g[1],g[2])[1]){case"json":return void C.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void C.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?C.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof C.default.Table?C.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof C.default.Image?C.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof C.default.SoundFile&&C.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},C.default.prototype.saveJSON=function(h,p,m){C.default._validateParameters("saveJSON",arguments),m=m?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(m.split("\n"),p,"json")},C.default.prototype.saveJSONObject=C.default.prototype.saveJSON,C.default.prototype.saveJSONArray=C.default.prototype.saveJSON,C.default.prototype.saveStrings=function(h,p,m,g){C.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(p,m||"txt"),E=0;E<h.length;E++)x.write(g?h[E]+"\r\n":h[E]+"\n");x.close(),x.clear()},C.default.prototype.saveTable=function(h,p,m){C.default._validateParameters("saveTable",arguments),g=void 0===m?p.substring(p.lastIndexOf(".")+1,p.length):m;var g,x=this.createWriter(p,g),E=h.columns,S="tsv"===g?"\t":",";if("html"!==g){if("0"!==E[0]){for(var k=0;k<E.length;k++)x.write(k<E.length-1?E[k]+S:E[k]);x.write("\n")}for(var q=0;q<h.rows.length;q++){var J=void 0;for(J=0;J<h.rows[q].arr.length;J++)J<h.rows[q].arr.length-1?"csv"===g&&String(h.rows[q].arr[J]).includes(",")?x.write('"'+h.rows[q].arr[J]+'"'+S):x.write(h.rows[q].arr[J]+S):"csv"===g&&String(h.rows[q].arr[J]).includes(",")?x.write('"'+h.rows[q].arr[J]+'"'):x.write(h.rows[q].arr[J]);x.write("\n")}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),"0"!==E[0]){x.print("    <tr>");for(var G=0;G<E.length;G++){var V=d(E[G]);x.print("      <td>".concat(V)),x.print("      </td>")}x.print("    </tr>")}for(var K=0;K<h.rows.length;K++){x.print("    <tr>");for(var $=0;$<h.columns.length;$++){var ne=d(h.rows[K].getString($));x.print("      <td>".concat(ne)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},C.default.prototype.writeFile=function(x,p,m){var g="application/octet-stream";C.default.prototype._isSafari()&&(g="text/plain"),x=new Blob(x,{type:g}),C.default.prototype.downloadFile(x,p,m)},C.default.prototype.downloadFile=function(h,x,E){var g;E=(x=f(x,E))[0],h instanceof Blob?w.default.saveAs(h,E):((g=document.createElement("a")).href=h,g.download=E,g.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},g.style.display="none",document.body.appendChild(g),C.default.prototype._isSafari()&&(h=(h='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(h)),g.click())},C.default.prototype._checkFileExtension=f,C.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},Z.default=a=C.default},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Table=function(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=d}var w,I;return w=b,(I=[{key:"addRow",value:function(d){if(void 0===(d=d||new M.default.TableRow).arr||void 0===d.obj)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d}},{key:"removeRow",value:function(d){this.rows[d].table=null,d=this.rows.splice(d+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(d)}},{key:"getRow",value:function(d){return this.rows[d]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(d,f){if("string"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[f]===d)return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[f]===d)return this.rows[p];return null}},{key:"findRows",value:function(d,f){var h=[];if("string"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].obj[f]===d&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[f]===d&&h.push(this.rows[m]);return h}},{key:"matchRow",value:function(d,f){if("number"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[f].match(d))return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[f].match(d))return this.rows[p];return null}},{key:"matchRows",value:function(d,f){var h=[];if("number"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].arr[f].match(d)&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[f].match(d)&&h.push(this.rows[m]);return h}},{key:"getColumn",value:function(d){var f=[];if("string"==typeof d)for(var h=0;h<this.rows.length;h++)f.push(this.rows[h].obj[d]);else for(var p=0;p<this.rows.length;p++)f.push(this.rows[p].arr[d]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(d){this.columns.push(d||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(d,f){for(var h=[],p=0;p<d.length;p++)h.push(d.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(h.join("|"),"g");if(void 0===f)for(var g=0;g<this.columns.length;g++)for(var x=0;x<this.rows.length;x++){var E=(E=this.rows[x].arr[g]).replace(m,"");this.rows[x].arr[g]=E,this.rows[x].obj[this.columns[g]]=E}else if("string"==typeof f)for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].obj[f]).replace(m,""),q=(this.rows[S].obj[f]=k,this.columns.indexOf(f));this.rows[S].arr[q]=k}else for(var J=0;J<this.rows.length;J++){var G=(G=this.rows[J].arr[f]).replace(m,"");this.rows[J].arr[f]=G,this.rows[J].obj[this.columns[f]]=G}}},{key:"trim",value:function(d){var f=new RegExp(" ","g");if(void 0===d)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[h]).replace(f,"");this.rows[p].arr[h]=m,this.rows[p].obj[this.columns[h]]=m}else if("string"==typeof d)for(var g=0;g<this.rows.length;g++){var x=(x=this.rows[g].obj[d]).replace(f,""),E=(this.rows[g].obj[d]=x,this.columns.indexOf(d));this.rows[g].arr[E]=x}else for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].arr[d]).replace(f,"");this.rows[S].arr[d]=k,this.rows[S].obj[this.columns[d]]=k}}},{key:"removeColumn",value:function(p){var f,h;"string"==typeof p?h=this.columns.indexOf(f=p):f=this.columns[h=p],p=this.columns.splice(h+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr,x=g.splice(h+1,g.length);g.pop(),this.rows[m].arr=g.concat(x),delete this.rows[m].obj[f]}}},{key:"set",value:function(d,f,h){this.rows[d].set(f,h)}},{key:"setNum",value:function(d,f,h){this.rows[d].setNum(f,h)}},{key:"setString",value:function(d,f,h){this.rows[d].setString(f,h)}},{key:"get",value:function(d,f){return this.rows[d].get(f)}},{key:"getNum",value:function(d,f){return this.rows[d].getNum(f)}},{key:"getString",value:function(d,f){return this.rows[d].getString(f)}},{key:"getObject",value:function(d){for(var f,h={},p=0;p<this.rows.length;p++)if(f=this.rows[p].obj,"string"==typeof d){if(!(0<=this.columns.indexOf(d)))throw new Error('This table has no column named "'.concat(d,'"'));h[f[d]]=f}else h[p]=this.rows[p].obj;return h}},{key:"getArray",value:function(){for(var d=[],f=0;f<this.rows.length;f++)d.push(this.rows[f].arr);return d}}])&&C(w.prototype,I),b}(),Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(a,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.TableRow=function(){function C(D,d){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");var f=[];D&&(f=D.split(d=d||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var b,w;return b=C,(w=[{key:"set",value:function(D,d){if("string"==typeof D){var f=this.table.columns.indexOf(D);if(!(0<=f))throw new Error('This table has no column named "'.concat(D,'"'));this.obj[D]=d,this.arr[f]=d}else{if(!(D<this.table.columns.length))throw new Error("Column #".concat(D," is out of the range of this table"));this.arr[D]=d,this.obj[f=this.table.columns[D]]=d}}},{key:"setNum",value:function(D,d){d=parseFloat(d),this.set(D,d)}},{key:"setString",value:function(D,d){d=d.toString(),this.set(D,d)}},{key:"get",value:function(D){return("string"==typeof D?this.obj:this.arr)[D]}},{key:"getNum",value:function(D){var d=parseFloat("string"==typeof D?this.obj[D]:this.arr[D]);if("NaN"===d.toString())throw"Error: ".concat(this.obj[D]," is NaN (Not a Number)");return d}},{key:"getString",value:function(D){return("string"==typeof D?this.obj:this.arr)[D].toString()}}])&&M(b.prototype,w),C}(),Z.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.XML=function(){function w(f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");f?this.DOM=f:(f=document.implementation.createDocument(null,"doc"),this.DOM=f.createElement("root"))}var I,D;return I=w,(D=[{key:"getParent",value:function(){return new M.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(f){var h=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(f);m.innerHTML=h;for(var g=0;g<p.length;g++)m.setAttribute(p[g].nodeName,p[g].nodeValue);this.DOM=m}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var f=[],h=0;h<this.DOM.childNodes.length;h++)f.push(this.DOM.childNodes[h].nodeName);return f}},{key:"getChildren",value:function(f){return function b(w){for(var I=[],D=0;D<w.length;D++)I.push(new M.default.XML(w[D]));return I}(f?this.DOM.getElementsByTagName(f):this.DOM.children)}},{key:"getChild",value:function(f){if("string"!=typeof f)return new M.default.XML(this.DOM.children[f]);var h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.children[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value;if(E.tagName===f)return new M.default.XML(E)}}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"addChild",value:function(f){f instanceof M.default.XML&&this.DOM.appendChild(f.DOM)}},{key:"removeChild",value:function(f){var h=-1;if("string"==typeof f){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===f){h=p;break}}else h=f;-1!==h&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.attributes[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)f.push(g.value.nodeName)}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}},{key:"hasAttribute",value:function(f){var h={},p=!0,m=!1,g=void 0;try{for(var x,E=this.DOM.attributes[Symbol.iterator]();!(p=(x=E.next()).done);p=!0){var S=x.value;h[S.nodeName]=S.nodeValue}}catch(k){m=!0,g=k}finally{try{p||null==E.return||E.return()}finally{if(m)throw g}}return!!h[f]}},{key:"getNum",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(q){g=!0,x=q}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return Number(p[f])||h||0}},{key:"getString",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(q){g=!0,x=q}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return p[f]?String(p[f]):h||null}},{key:"setAttribute",value:function(f,h){this.DOM.setAttribute(f,h)}},{key:"getContent",value:function(f){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||f||null}},{key:"setContent",value:function(f){this.DOM.children.length||(this.DOM.textContent=f)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&C(I.prototype,D),w}(),Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.string.includes"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.abs=Math.abs,M.default.prototype.ceil=Math.ceil,M.default.prototype.constrain=function(b,w,I){return M.default._validateParameters("constrain",arguments),Math.max(Math.min(b,I),w)},M.default.prototype.dist=function(){for(var b=arguments.length,w=new Array(b),I=0;I<b;I++)w[I]=arguments[I];return M.default._validateParameters("dist",w),4===w.length?Math.hypot(w[2]-w[0],w[3]-w[1]):6===w.length?Math.hypot(w[3]-w[0],w[4]-w[1],w[5]-w[2]):void 0},M.default.prototype.exp=Math.exp,M.default.prototype.floor=Math.floor,M.default.prototype.lerp=function(b,w,I){return M.default._validateParameters("lerp",arguments),I*(w-b)+b},M.default.prototype.log=Math.log,M.default.prototype.mag=function(b,w){return M.default._validateParameters("mag",arguments),Math.hypot(b,w)},M.default.prototype.map=function(b,w,I,D,d,f){return M.default._validateParameters("map",arguments),b=(b-w)/(I-w)*(d-D)+D,f?D<d?this.constrain(b,D,d):this.constrain(b,d,D):b},M.default.prototype.max=function(){for(var b=function(d){return Math.max.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.min=function(){for(var b=function(d){return Math.min.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.norm=function(b,w,I){return M.default._validateParameters("norm",arguments),this.map(b,w,I,0,1)},M.default.prototype.pow=Math.pow,M.default.prototype.round=function(b,w){return w?(w=Math.pow(10,w),Math.round(b*w)/w):Math.round(b)},M.default.prototype.sq=function(b){return b*b},M.default.prototype.sqrt=Math.sqrt,M.default.prototype.fract=function(D){M.default._validateParameters("fract",arguments);var w,I=0;return D=Number(D),isNaN(D)||Math.abs(D)===1/0?D:(D<0&&(D=-D,I=1),String(D).includes(".")&&!String(D).includes("e")?(w=+("0"+(w=String(D)).slice(w.indexOf("."))),Math.abs(I-w)):D<1?Math.abs(I-D):0)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(w,I,D){return(C=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(d,f,h){var p=[null];return p.push.apply(p,f),f=new(Function.bind.apply(d,p)),h&&b(f,h.prototype),f}).apply(null,arguments)}function b(w,I){return(b=Object.setPrototypeOf||function(D,d){return D.__proto__=d,D})(w,I)}M.default.prototype.createVector=function(w,I,D){return this instanceof M.default?C(M.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new M.default.Vector(w,I,D)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(D,be,Z){"use strict";function M(d){return.5*(1-Math.cos(d*Math.PI))}Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,D=(D=D("../core/main"))&&D.__esModule?D:{default:D};var C,b=4095,w=4,I=.5;D.default.prototype.noise=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==C){C=new Array(4096);for(var p=0;p<4096;p++)C[p]=Math.random()}d<0&&(d=-d),f<0&&(f=-f),h<0&&(h=-h);for(var m,g,x=Math.floor(d),E=Math.floor(f),S=Math.floor(h),k=d-x,q=f-E,J=h-S,G=0,V=.5,K=0;K<w;K++){var $=x+(E<<4)+(S<<8),ne=M(k),Y=M(q),we=C[$&b];we+=ne*(C[$+1&b]-we),m=C[$+16&b],we+=Y*((m+=ne*(C[$+16+1&b]-m))-we),m=C[($+=256)&b],m+=ne*(C[$+1&b]-m),g=C[$+16&b],m+=Y*((g+=ne*(C[$+16+1&b]-g))-m),G+=(we+=M(J)*(m-we))*V,V*=I,x<<=1,E<<=1,S<<=1,1<=(k*=2)&&(x++,k--),1<=(q*=2)&&(E++,q--),1<=(J*=2)&&(S++,J--)}return G},D.default.prototype.noiseDetail=function(d,f){0<d&&(w=d),0<f&&(I=f)},D.default.prototype.noiseSeed=function(d){p=4294967296;var h,p,m_rand=function(){return(h=(1664525*h+1013904223)%p)/p};(function(x){h=(null==x?Math.random()*p:x)>>>0})(d),C=new Array(4096);for(var g=0;g<4096;g++)C[g]=m_rand()},Z.default=D=D.default},{"../core/main":283}],316:[function(a,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.number.epsilon"),a("core-js/modules/es.number.is-finite"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.some"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.number.epsilon"),a("core-js/modules/es.number.is-finite"),a("core-js/modules/es.string.sub"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(d=a("../core/main"))&&d.__esModule?d:{default:d},w=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(a("../core/constants"));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}b.default.Vector=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var x,E,S="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,E=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,E=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=E,this.z=S}var h,p,m;return h=f,m=[{key:"fromAngle",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new b.default.Vector(x*Math.cos(g),x*Math.sin(g),0)}},{key:"fromAngles",value:function(J,k){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,S=Math.cos(k),q=(k=Math.sin(k),Math.cos(J));return J=Math.sin(J),new b.default.Vector(E*J*k,-E*q,E*J*S)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*w.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*w.TWO_PI,x=2*Math.random()-1,E=(S=Math.sqrt(1-x*x))*Math.cos(g),S=S*Math.sin(g);return new b.default.Vector(E,S,x)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),q.add(k),q}},{key:"rem",value:function(g,x){if(g instanceof b.default.Vector&&x instanceof b.default.Vector)return(g=g.copy()).rem(x),g}},{key:"sub",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),q.sub(k),q}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),q.mult(k),q}},{key:"rotate",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return 2===x.length?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),q.set(S)),q.rotate(k),q}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),q.div(k),q}},{key:"dot",value:function(g,x){return g.dot(x)}},{key:"cross",value:function(g,x){return g.cross(x)}},{key:"dist",value:function(g,x){return g.dist(x)}},{key:"lerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2],J=x[3];return J?J.set(S):(J=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),J.lerp(k,q),J}},{key:"slerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2],J=x[3];return J?J.set(S):(J=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),J.slerp(k,q),J}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1];return x.length<2?k=S.copy():(k instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),k.set(S)),k.normalize()}},{key:"limit",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),q.set(S)),q.limit(k)}},{key:"setMag",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),q.set(S)),q.setMag(k)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,x){return g.angleBetween(x)}},{key:"reflect",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),q.set(S)),q.reflect(k)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,x){var E;return g instanceof b.default.Vector?E=g:Array.isArray(g)?E=(new b.default.Vector).set(g):b.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),E.equals(x)}}],(p=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,x,E){return g instanceof b.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=x||0,this.z=E||0),this}},{key:"copy",value:function(){return this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new b.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,x,E){return g instanceof b.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=x||0,this.z+=E||0),this}},{key:"calculateRemainder2D",value:function(g,x){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(g,x,E){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),0!==E&&(this.z=this.z%E),this}},{key:"rem",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,k,q,J=x[0],G=x[1],V=x[2];if(J instanceof b.default.Vector){if([J.x,J.y,J.z].every(Number.isFinite))return S=parseFloat(J.x),k=parseFloat(J.y),q=parseFloat(J.z),this.calculateRemainder3D(S,k,q)}else if(Array.isArray(J)){if(J.every(Number.isFinite))return 2===J.length?this.calculateRemainder2D(J[0],J[1]):3===J.length?this.calculateRemainder3D(J[0],J[1],J[2]):void 0}else if(1===x.length){if(Number.isFinite(J)&&0!==J)return this.x=this.x%J,this.y=this.y%J,this.z=this.z%J,this}else if(2===x.length){if(x.every(Number.isFinite))return this.calculateRemainder2D(J,G)}else if(3===x.length&&x.every(Number.isFinite))return this.calculateRemainder3D(J,G,V)}},{key:"sub",value:function(g,x,E){return g instanceof b.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=x||0,this.z-=E||0),this}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,k=x[0],q=x[1],J=x[2];return k instanceof b.default.Vector?Number.isFinite(k.x)&&Number.isFinite(k.y)&&Number.isFinite(k.z)&&"number"==typeof k.x&&"number"==typeof k.y&&"number"==typeof k.z?(this.x*=k.x,this.y*=k.y,this.z*=k.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(k)?k.every(function(G){return Number.isFinite(G)})&&k.every(function(G){return"number"==typeof G})?1===k.length?(this.x*=k[0],this.y*=k[0],this.z*=k[0]):2===k.length?(this.x*=k[0],this.y*=k[1]):3===k.length&&(this.x*=k[0],this.y*=k[1],this.z*=k[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(S=x).every(function(G){return Number.isFinite(G)})&&S.every(function(G){return"number"==typeof G})?(1===x.length&&(this.x*=k,this.y*=k,this.z*=k),2===x.length&&(this.x*=k,this.y*=q),3===x.length&&(this.x*=k,this.y*=q,this.z*=J)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],q=x[2];if(S instanceof b.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&"number"==typeof S.x&&"number"==typeof S.y&&"number"==typeof S.z){var J=0===S.z&&0===this.z;if(0===S.x||0===S.y||!J&&0===S.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,J||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(Number.isFinite)&&S.every(function(G){return"number"==typeof G})){if(S.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===S.length?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):2===S.length?(this.x/=S[0],this.y/=S[1]):3===S.length&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(G){return"number"==typeof G})){if(x.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===x.length&&(this.x/=S,this.y/=S,this.z/=S),2===x.length&&(this.x/=S,this.y/=k),3===x.length&&(this.x/=S,this.y/=k,this.z/=q)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,x=this.y,E=this.z;return g*g+x*x+E*E}},{key:"dot",value:function(g,x,E){return g instanceof b.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(x||0)+this.z*(E||0)}},{key:"cross",value:function(S){var x=this.y*S.z-this.z*S.y,E=this.z*S.x-this.x*S.z;return S=this.x*S.y-this.y*S.x,this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,x,E,S):new b.default.Vector(x,E,S)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return 0!==g&&this.mult(1/g),this}},{key:"limit",value:function(g){var x=this.magSq();return g*g<x&&this.div(Math.sqrt(x)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var x=this.mag();return this.x=x*Math.cos(g),this.y=x*Math.sin(g),this}},{key:"rotate",value:function(x){x=this.heading()+x;var E=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*E,this.y=Math.sin(x)*E,this}},{key:"angleBetween",value:function(g){var x;return this.magSq()*g.magSq()==0?NaN:(x=this.cross(g),g=Math.atan2(x.mag(),this.dot(g))*Math.sign(x.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,x,E,S){return g instanceof b.default.Vector?this.lerp(g.x,g.y,g.z,x):(this.x+=(g-this.x)*S||0,this.y+=(x-this.y)*S||0,this.z+=(E-this.z)*S||0,this)}},{key:"slerp",value:function(g,x){if(0!==x){if(1===x)return this.set(g);var E=this.mag(),S=g.mag();if(E*S==0)this.mult(1-x).add(g.x*x,g.y*x,g.z*x);else{var k=this.cross(g),q=k.mag(),J=Math.atan2(q,this.dot(g));if(0<q)k.x/=q,k.y/=q,k.z/=q;else{if(J<.5*Math.PI)return this.mult(1-x).add(g.x*x,g.y*x,g.z*x),this;0===this.z&&0===g.z?k.set(0,0,1):0!==this.x?k.set(this.y,-this.x,0).normalize():k.set(1,0,0)}q=k.cross(this),k=(g=1-x+x*S/E)*Math.cos(x*J),S=g*Math.sin(x*J),this.x=this.x*k+q.x*S,this.y=this.y*k+q.y*S,this.z=this.z*k+q.z*S}}return this}},{key:"reflect",value:function(g){return g=b.default.Vector.normalize(g),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(q,x,E){var S,k;return q=q instanceof b.default.Vector?(S=q.x||0,k=q.y||0,q.z||0):Array.isArray(q)?(S=q[0]||0,k=q[1]||0,q[2]||0):(S=q||0,k=x||0,E||0),this.x===S&&this.y===k&&this.z===q}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(g){return Math.abs(+(g||0))<=Number.EPSILON?0:g}}])&&D(h.prototype,p),m&&D(h,m),f}();var d=b.default.Vector;Z.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(I,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I},C="_lcg_random_state",b=4294967296,w=0;M.default.prototype._lcg=function(D){return this[D]=(1664525*this[D]+1013904223)%b,this[D]/b},M.default.prototype._lcgSetSeed=function(D,d){this[D]=(null==d?Math.random()*b:d)>>>0},M.default.prototype.randomSeed=function(D){this._lcgSetSeed(C,D),this._gaussian_previous=!1},M.default.prototype.random=function(D,d){var f,h;return M.default._validateParameters("random",arguments),f=null!=this[C]?this._lcg(C):Math.random(),void 0===D?f:void 0===d?Array.isArray(D)?D[Math.floor(f*D.length)]:f*D:(d<D&&(h=D,D=d,d=h),f*(d-D)+D)},M.default.prototype.randomGaussian=function(D){var d,f,h,p,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)d=w,this._gaussian_previous=!1;else{for(;1<=(p=(f=this.random(2)-1)*f+(h=this.random(2)-1)*h););d=f*(p=Math.sqrt(-2*Math.log(p)/p)),w=h*p,this._gaussian_previous=!0}return d*m+(D||0)},Z.default=I=M.default},{"../core/main":283}],318:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype._angleMode=w.RADIANS,b.default.prototype.acos=function(d){return this._fromRadians(Math.acos(d))},b.default.prototype.asin=function(d){return this._fromRadians(Math.asin(d))},b.default.prototype.atan=function(d){return this._fromRadians(Math.atan(d))},b.default.prototype.atan2=function(d,f){return this._fromRadians(Math.atan2(d,f))},b.default.prototype.cos=function(d){return Math.cos(this._toRadians(d))},b.default.prototype.sin=function(d){return Math.sin(this._toRadians(d))},b.default.prototype.tan=function(d){return Math.tan(this._toRadians(d))},b.default.prototype.degrees=function(d){return d*w.RAD_TO_DEG},b.default.prototype.radians=function(d){return d*w.DEG_TO_RAD},b.default.prototype.angleMode=function(d){if(b.default._validateParameters("angleMode",arguments),void 0===d)return this._angleMode;d!==w.DEGREES&&d!==w.RADIANS||d!==this._angleMode&&(d===w.RADIANS?(this._setProperty("pRotationX",this.pRotationX*w.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*w.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*w.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*w.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*w.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*w.RAD_TO_DEG)),this._angleMode=d)},b.default.prototype._toRadians=function(d){return this._angleMode===w.DEGREES?d*w.DEG_TO_RAD:d},b.default.prototype._toDegrees=function(d){return this._angleMode===w.RADIANS?d*w.RAD_TO_DEG:d},b.default.prototype._fromRadians=function(d){return this._angleMode===w.DEGREES?d*w.RAD_TO_DEG:d},b.default.prototype._fromDegrees=function(d){return this._angleMode===w.RADIANS?d*w.DEG_TO_RAD:d};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(a,be,Z){"use strict";a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.textAlign=function(C,b){var w;return M.default._validateParameters("textAlign",arguments),(w=this._renderer).textAlign.apply(w,arguments)},M.default.prototype.textLeading=function(C){var b;return M.default._validateParameters("textLeading",arguments),(b=this._renderer).textLeading.apply(b,arguments)},M.default.prototype.textSize=function(C){var b;return M.default._validateParameters("textSize",arguments),(b=this._renderer).textSize.apply(b,arguments)},M.default.prototype.textStyle=function(C){var b;return M.default._validateParameters("textStyle",arguments),(b=this._renderer).textStyle.apply(b,arguments)},M.default.prototype.textWidth=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];if(b[0]+="",M.default._validateParameters("textWidth",b),0===b[0].length)return 0;for(var I=b[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),D=[],d=0;d<I.length;d++)D.push(this._renderer.textWidth(I[d]));return Math.max.apply(Math,D)},M.default.prototype.textAscent=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("textAscent",b),this._renderer.textAscent()},M.default.prototype.textDescent=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("textDescent",b),this._renderer.textDescent()},M.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},M.default.prototype.textWrap=function(C){return M.default._validateParameters("textWrap",[C]),this._renderer.textWrap(C)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(a,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=d(a("../core/constants")),I=d(a("opentype.js"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&((g=E?Object.getOwnPropertyDescriptor(h,m):null)&&(g.get||g.set)?Object.defineProperty(x,m,g):x[m]=h[m]);return x.default=h,p&&p.set(h,x),x}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),b.default.prototype.loadFont=function(h,p,m){b.default._validateParameters("loadFont",arguments);var g=new b.default.Font(this),x=this;return I.load(h,function(k,q){if(k)return b.default._friendlyFileLoadError(4,h),void 0!==m?m(k):void console.error(k,h);g.font=q,void 0!==p&&p(g),x._decrementPreload();var J=(q=(k=h.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:k.slice(q+1);["ttf","otf","woff","woff2"].includes(J)&&(J=k.slice(0,-1!==q?q:0),(k=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(J,";\nsrc: url(").concat(h,");\n}\n"))),document.head.appendChild(k))}),g},b.default.prototype.text=function(h,p,m,g,x){var E;return b.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(E=this._renderer).text.apply(E,arguments):this},b.default.prototype.textFont=function(h,p){if(b.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),p&&(this._renderer._setProperty("_textSize",p),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",p*w._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=b.default;Z.default=f},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(a,be,Z){"use strict";function M(G){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(G)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(C=a("../core/main"))&&C.__esModule?C:{default:C},b=function(G){if(G&&G.__esModule)return G;if(null===G||"object"!==I(G)&&"function"!=typeof G)return{default:G};var V=w();if(V&&V.has(G))return V.get(G);var K,$={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(K in G){var Y;Object.prototype.hasOwnProperty.call(G,K)&&((Y=ne?Object.getOwnPropertyDescriptor(G,K):null)&&(Y.get||Y.set)?Object.defineProperty($,K,Y):$[K]=G[K])}return $.default=G,V&&V.set(G,$),$}(a("../core/constants"));function w(){var G;return"function"!=typeof WeakMap?null:(w=function(){return G},G=new WeakMap)}function I(G){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(V){return M(V)}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":M(V)})(G)}function D(G,V){for(var K=0;K<V.length;K++){var $=V[K];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(G,$.key,$)}}function d(G,V){var K=G.length;return G[V<0?V%K+K:V%K]}function f(G,V,K,$){var ne,Y,we;return $?(void 0===f.tmpPoint1&&(f.tmpPoint1=[],f.tmpPoint2=[]),we=f.tmpPoint2,(Y=f.tmpPoint1).x=V.x-G.x,Y.y=V.y-G.y,we.x=K.x-V.x,we.y=K.y-V.y,ne=Y.x*we.x+Y.y*we.y,Y=Math.sqrt(Y.x*Y.x+Y.y*Y.y),we=Math.sqrt(we.x*we.x+we.y*we.y),Math.acos(ne/(Y*we))<$):(V[0]-G[0])*(K[1]-G[1])-(K[0]-G[0])*(V[1]-G[1])==0}function h(z,je,ye,Je,gt,Y,we,Se,oe){var ge=1-oe,re=(Q=Math.pow(ge,3))*z+3*(fe=Math.pow(ge,2))*oe*ye+3*ge*oe*oe*gt+(Ce=(le=oe*oe)*oe)*we,Q=Q*je+3*fe*oe*Je+3*ge*oe*oe*Y+Ce*Se,fe=z+2*oe*(ye-z)+le*(gt-2*ye+z),Ce=je+2*oe*(Je-je)+le*(Y-2*Je+je),it=ye+2*oe*(gt-ye)+le*(we-2*gt+ye),le=Je+2*oe*(Y-Je)+le*(Se-2*Y+Je);return z=ge*z+oe*ye,ye=ge*je+oe*Je,je=ge*gt+oe*we,Je=ge*Y+oe*Se,gt=90-180*Math.atan2(fe-it,Ce-le)/Math.PI,(it<fe||Ce<le)&&(gt+=180),{x:re,y:Q,m:{x:fe,y:Ce},n:{x:it,y:le},start:{x:z,y:ye},end:{x:je,y:Je},alpha:gt}}function p(G,V,K,$,ne,Y,we,Se,oe){return null==oe?q(G,V,K,$,ne,Y,we,Se):h(G,V,K,$,ne,Y,we,Se,function(ge,re,Q,fe,Ce,it,le,z,ye){if(!(ye<0||q(ge,re,Q,fe,Ce,it,le,z)<ye)){var je,Je=.5,gt=1-Je;for(je=q(ge,re,Q,fe,Ce,it,le,z,gt);.01<Math.abs(je-ye);)je=q(ge,re,Q,fe,Ce,it,le,z,gt+=(je<ye?1:-1)*(Je/=2));return gt}}(G,V,K,$,ne,Y,we,Se,oe))}function m(G,V,K){for(var $,ne,Y,we,Se,oe=0,ge=0,re=(G=function(Q,fe){function Ce(Et,Kt,yn){var Yn,An;if(!Et)return["C",Kt.x,Kt.y,Kt.x,Kt.y,Kt.x,Kt.y];switch(Et[0]in{T:1,Q:1}||(Kt.qx=Kt.qy=null),Et[0]){case"M":Kt.X=Et[1],Kt.Y=Et[2];break;case"A":Et=["C"].concat(x.apply(0,[Kt.x,Kt.y].concat(Et.slice(1))));break;case"S":An="C"===yn||"S"===yn?(Yn=2*Kt.x-Kt.bx,2*Kt.y-Kt.by):(Yn=Kt.x,Kt.y),Et=["C",Yn,An].concat(Et.slice(1));break;case"T":"Q"===yn||"T"===yn?(Kt.qx=2*Kt.x-Kt.qx,Kt.qy=2*Kt.y-Kt.qy):(Kt.qx=Kt.x,Kt.qy=Kt.y),Et=["C"].concat(k(Kt.x,Kt.y,Kt.qx,Kt.qy,Et[1],Et[2]));break;case"Q":Kt.qx=Et[1],Kt.qy=Et[2],Et=["C"].concat(k(Kt.x,Kt.y,Et[1],Et[2],Et[3],Et[4]));break;case"L":Et=["C"].concat(S(Kt.x,Kt.y,Et[1],Et[2]));break;case"H":Et=["C"].concat(S(Kt.x,Kt.y,Et[1],Kt.y));break;case"V":Et=["C"].concat(S(Kt.x,Kt.y,Kt.x,Et[1]));break;case"Z":Et=["C"].concat(S(Kt.x,Kt.y,Kt.X,Kt.Y))}return Et}function it(Et,Kt){if(7<Et[Kt].length){Et[Kt].shift();for(var yn=Et[Kt];yn.length;)Ct[Kt]="A",je&&($t[Kt]="A"),Et.splice(Kt++,0,["C"].concat(yn.splice(0,6)));Et.splice(Kt,1),z=Math.max(ye.length,je&&je.length||0)}}function le(Et,Kt,yn,Yn,An){Et&&Kt&&"M"===Et[An][0]&&"M"!==Kt[An][0]&&(Kt.splice(An,0,["M",Yn.x,Yn.y]),yn.bx=0,yn.by=0,yn.x=Et[An][1],yn.y=Et[An][2],z=Math.max(ye.length,je&&je.length||0))}var z,ye=g(Q),je=undefined,Je={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},gt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ct=[],$t=[],yt="",Ut="";z=Math.max(ye.length,je&&je.length||0);for(var Xt=0;Xt<z;Xt++){"C"!==(yt=ye[Xt]?ye[Xt][0]:yt)&&(Ct[Xt]=yt,Xt&&(Ut=Ct[Xt-1])),ye[Xt]=Ce(ye[Xt],Je,Ut),"A"!==Ct[Xt]&&"C"===yt&&(Ct[Xt]="C"),it(ye,Xt),je&&("C"!==(yt=je[Xt]?je[Xt][0]:yt)&&($t[Xt]=yt,Xt&&(Ut=$t[Xt-1])),je[Xt]=Ce(je[Xt],gt,Ut),"A"!==$t[Xt]&&"C"===yt&&($t[Xt]="C"),it(je,Xt)),le(ye,je,Je,gt,Xt),le(je,ye,gt,Je,Xt);var ft=ye[Xt],jt=je&&je[Xt],Lt=ft.length,Bt=je&&jt.length;Je.x=ft[Lt-2],Je.y=ft[Lt-1],Je.bx=parseFloat(ft[Lt-4])||Je.x,Je.by=parseFloat(ft[Lt-3])||Je.y,gt.bx=je&&(parseFloat(jt[Bt-4])||gt.x),gt.by=je&&(parseFloat(jt[Bt-3])||gt.y),gt.x=je&&jt[Bt-2],gt.y=je&&jt[Bt-1]}return je?[ye,je]:ye}(G)).length;ge<re;ge++){if("M"===(Y=G[ge])[0])$=+Y[1],ne=+Y[2];else{if(V<oe+(we=p($,ne,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]))&&!K)return{x:(Se=p($,ne,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],V-oe)).x,y:Se.y,alpha:Se.alpha};oe+=we,$=+Y[5],ne=+Y[6]}Y.shift()}return(Se=K?oe:h($,ne,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],1)).alpha?{x:Se.x,y:Se.y,alpha:Se.alpha}:Se}function g(G){var V=[],K=0,$=0,ne=0,Y=0,we=0;if(G){"M"===G[0][0]&&(ne=K=+G[0][1],Y=$=+G[0][2],we++,V[0]=["M",K,$]);for(var Se,oe,ge=3===G.length&&"M"===G[0][0]&&"R"===G[1][0].toUpperCase()&&"Z"===G[2][0].toUpperCase(),re=we,Q=G.length;re<Q;re++){if(V.push(Se=[]),(oe=G[re])[0]!==oe[0].toUpperCase())switch(Se[0]=oe[0].toUpperCase(),Se[0]){case"A":Se[1]=oe[1],Se[2]=oe[2],Se[3]=oe[3],Se[4]=oe[4],Se[5]=oe[5],Se[6]=+(oe[6]+K),Se[7]=+(oe[7]+$);break;case"V":Se[1]=+oe[1]+$;break;case"H":Se[1]=+oe[1]+K;break;case"R":for(var fe,Ce=2,it=(fe=[K,$].concat(oe.slice(1))).length;Ce<it;Ce++)fe[Ce]=+fe[Ce]+K,fe[++Ce]=+fe[Ce]+$;V.pop(),V=V.concat(E(fe,ge));break;case"M":ne=+oe[1]+K,Y=+oe[2]+$;break;default:for(var le=1,z=oe.length;le<z;le++)Se[le]=+oe[le]+(le%2?K:$)}else if("R"===oe[0])fe=[K,$].concat(oe.slice(1)),V.pop(),V=V.concat(E(fe,ge)),Se=["R"].concat(oe.slice(-2));else for(var ye=0,je=oe.length;ye<je;ye++)Se[ye]=oe[ye];switch(Se[0]){case"Z":K=ne,$=Y;break;case"H":K=Se[1];break;case"V":$=Se[1];break;case"M":ne=Se[Se.length-2],Y=Se[Se.length-1];break;default:K=Se[Se.length-2],$=Se[Se.length-1]}}}return V}function x(G,V,K,$,je,Ct,Je,Se,oe,ge){function re(Bt,Et,Kt){return{x:Bt*Math.cos(Kt)-Et*Math.sin(Kt),y:Bt*Math.sin(Kt)+Et*Math.cos(Kt)}}var Q,ye=120*(z=Math.PI)/180,fe=z/180*(+je||0),Ce=[],it=(ge?(Xt=ge[0],Q=ge[1],yt=ge[2],Ut=ge[3]):(G=(gt=re(G,V,-fe)).x,V=gt.y,1<(it=(le=(G-(Se=(gt=re(Se,oe,-fe)).x))/2)*le/(K*K)+(gt=(V-(oe=gt.y))/2)*gt/($*$))&&(K*=it=Math.sqrt(it),$*=it),it=K*K,$t=$*$,yt=(Ct=(Ct===Je?-1:1)*Math.sqrt(Math.abs((it*$t-it*gt*gt-$t*le*le)/(it*gt*gt+$t*le*le))))*K*gt/$+(G+Se)/2,Ut=Ct*-$*le/K+(V+oe)/2,Xt=Math.asin(((V-Ut)/$).toFixed(9)),Q=Math.asin(((oe-Ut)/$).toFixed(9)),(Xt=G<yt?z-Xt:Xt)<0&&(Xt=2*z+Xt),(Q=Se<yt?z-Q:Q)<0&&(Q=2*z+Q),Je&&Q<Xt&&(Xt-=2*z),!Je&&Xt<Q&&(Q-=2*z)),Q-Xt),le=(Math.abs(it)>ye&&($t=Q,gt=Se,Ct=oe,Q=Xt+ye*(Je&&Xt<Q?1:-1),Ce=x(Se=yt+K*Math.cos(Q),oe=Ut+$*Math.sin(Q),K,$,je,0,Je,gt,Ct,[Q,$t,yt,Ut])),it=Q-Xt,Math.cos(Xt)),z=Math.sin(Xt),gt=(ye=Math.cos(Q),je=Math.sin(Q),4/3*K*(Je=Math.tan(it/4))),$t=[G,V],yt=[G+gt*z,V-(Ct=4/3*$*Je)*le],Ut=[Se+gt*je,oe-Ct*ye],Xt=[Se,oe];if(yt[0]=2*$t[0]-yt[0],yt[1]=2*$t[1]-yt[1],ge)return[yt,Ut,Xt].concat(Ce);for(var ft=[],jt=0,Lt=(Ce=[yt,Ut,Xt].concat(Ce).join().split(",")).length;jt<Lt;jt++)ft[jt]=jt%2?re(Ce[jt-1],Ce[jt],fe).y:re(Ce[jt],Ce[jt+1],fe).x;return ft}function E(G,V){for(var K=[],$=0,ne=G.length;$<ne-2*!V;$+=2){var Y=[{x:+G[$-2],y:+G[$-1]},{x:+G[$],y:+G[$+1]},{x:+G[$+2],y:+G[$+3]},{x:+G[$+4],y:+G[$+5]}];V?$?ne-4===$?Y[3]={x:+G[0],y:+G[1]}:ne-2===$&&(Y[2]={x:+G[0],y:+G[1]},Y[3]={x:+G[2],y:+G[3]}):Y[0]={x:+G[ne-2],y:+G[ne-1]}:ne-4===$?Y[3]=Y[2]:$||(Y[0]={x:+G[$],y:+G[$+1]}),K.push(["C",(6*Y[1].x-Y[0].x+Y[2].x)/6,(6*Y[1].y-Y[0].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return K}function S(G,V,K,$){return[G,V,K,$,K,$]}function k(G,V,K,$,ne,Y){return[1/3*G+2/3*K,1/3*V+2/3*$,1/3*ne+2/3*K,1/3*Y+2/3*$,ne,Y]}function q(G,V,K,$,ne,Y,we,Se,oe){for(var ge=(oe=1<(oe=null==oe?1:oe)?1:oe<0?0:oe)/2,re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Q=0,fe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ce=0;Ce<12;Ce++){var it=J(le=ge*re[Ce]+ge,G,K,ne,we),le=J(le,V,$,Y,Se);Q+=fe[Ce]*Math.sqrt(it*it+le*le)}return ge*Q}function J(G,V,K,$,ne){return G*(G*(-3*V+9*K-9*$+3*ne)+6*V-12*K+6*$)-3*V+3*K}C.default.Font=function(){function G(ne){if(!(this instanceof G))throw new TypeError("Cannot call a class as a function");this.parent=ne,this.cache={},this.font=void 0}var V,K;return V=G,(K=[{key:"textBounds",value:function(ne){var Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,we=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Se=4<arguments.length?arguments[4]:void 0,oe=Se&&Se.renderer&&Se.renderer._pInst||this.parent,ge=oe._renderer.drawingContext,re=(re=3<arguments.length?arguments[3]:void 0)||oe._renderer._textSize;if(!Ct){for(var Q=[],fe=[],Ce=[],it=(Ce[0]=[],[]),le=this._scale(re),z=oe._renderer.textLeading(),ye=0,je=(this.font.forEachGlyph(ne,Y,we,re,Se,function(Ut,Xt,ft,jt){var Lt=Ut.getMetrics();0===Ut.index?Ce[ye+=1]=[]:(Ce[ye].push(Xt+Lt.xMin*le),Ce[ye].push(Xt+Lt.xMax*le),it.push(ft+ye*z+-Lt.yMin*le),it.push(ft+ye*z+-Lt.yMax*le))}),0<Ce[ye].length&&(Q[ye]=Math.min.apply(null,Ce[ye]),fe[ye]=Math.max.apply(null,Ce[ye])),0),Je=0;Je<=ye;Je++){Q[Je]=Math.min.apply(null,Ce[Je]),fe[Je]=Math.max.apply(null,Ce[Je]);var gt=fe[Je]-Q[Je];je<gt&&(je=gt)}var Ct={x:ge=Math.min.apply(null,Q),y:we=Math.min.apply(null,it),h:Math.max.apply(null,it)-we,w:je,advance:ge-Y};re=this._handleAlignment(oe._renderer,ne,Ct.x,Ct.y,Ct.w+Ct.advance),Ct.x=re.x,Ct.y=re.y}return Ct}},{key:"textToPoints",value:function(ne,Y,we,Se,oe){var ge,re=Y,Q=[],fe=this.parent,Ce=ne.split(/\r?\n|\r|\n/g);Se=Se||this.parent._renderer._textSize;for(var it,le,z,ye=0;ye<Ce.length;ye++){var je=0;Y=re;for(var Je=(Je=Ce[ye]).replace("\t","  "),gt=this._getGlyphs(Je),Ct=0;Ct<gt.length;Ct++){if(le=Je,!((z=gt)[it=Ct].name&&"space"===z[it].name||le.length===z.length&&" "===le[it]))for(var $t=function(ft){for(var jt,Lt=[],Bt=0;Bt<ft.length;Bt++)"M"===ft[Bt].type&&(jt&&Lt.push(jt),jt=[]),jt.push((Kt=void 0,Kt=[(Et=ft[Bt]).type],"M"===Et.type||"L"===Et.type?Kt.push(Et.x,Et.y):"C"===Et.type?Kt.push(Et.x1,Et.y1,Et.x2,Et.y2,Et.x,Et.y):"Q"===Et.type&&Kt.push(Et.x1,Et.y1,Et.x,Et.y),Kt));var Et,Kt;return Lt.push(jt),Lt}(gt[Ct].getPath(Y,we,Se).commands),yt=0;yt<$t.length;yt++)for(var Ut=function(ft,jt){jt=function(Yn,An){if("object"!==I(Yn))Yn=An;else for(var Jn in An)void 0===Yn[Jn]&&(Yn[Jn]=An[Jn]);return Yn}(jt,{sampleFactor:.1,simplifyThreshold:0});for(var Lt=m(ft,0,1),Bt=Lt/(Lt*jt.sampleFactor),Et=[],Kt=0;Kt<Lt;Kt+=Bt)Et.push(m(ft,Kt));return jt.simplifyThreshold&&function(yn){for(var Yn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Jn=yn.length-1;3<yn.length&&0<=Jn;--Jn)f(d(yn,Jn-1),d(yn,Jn),d(yn,Jn+1),Yn)&&yn.splice(Jn%yn.length,1)}(Et,jt.simplifyThreshold),Et}($t[yt],oe),Xt=0;Xt<Ut.length;Xt++)Ut[Xt].x+=je,ge=this._handleAlignment(fe._renderer,Je,Ut[Xt].x,Ut[Xt].y),Ut[Xt].x=ge.x,Ut[Xt].y=ge.y,Q.push(Ut[Xt]);je+=gt[Ct].advanceWidth*this._scale(Se)}we+=this.parent._renderer._textLeading}return Q}},{key:"_getGlyphs",value:function(ne){return this.font.stringToGlyphs(ne)}},{key:"_getPath",value:function(ne,ge,we,Se){var oe=(Se&&Se.renderer&&Se.renderer._pInst||this.parent)._renderer;return ge=this._handleAlignment(oe,ne,ge,we),this.font.getPath(ne,ge.x,ge.y,oe._textSize,Se)}},{key:"_getPathData",value:function(ne,Y,we,Se){var oe=3;return"string"==typeof ne&&2<arguments.length?ne=this._getPath(ne,Y,we,Se):"object"===I(Y)&&(Se=Y),Se&&"number"==typeof Se.decimals&&(oe=Se.decimals),ne.toPathData(oe)}},{key:"_getSVG",value:function(ne,Y,we,Se){var oe=3;return"string"==typeof ne&&2<arguments.length?ne=this._getPath(ne,Y,we,Se):"object"===I(Y)&&(Se=Y),Se&&("number"==typeof Se.decimals&&(oe=Se.decimals),"number"==typeof Se.strokeWidth&&(ne.strokeWidth=Se.strokeWidth),void 0!==Se.fill&&(ne.fill=Se.fill),void 0!==Se.stroke&&(ne.stroke=Se.stroke)),ne.toSVG(oe)}},{key:"_renderPath",value:function(re,fe,Ce,Se){var oe=Se&&Se.renderer||this.parent._renderer,ge=oe.drawingContext,Q=(re=("object"===I(re)&&re.commands?re:this._getPath(re,fe,Ce,Se)).commands,oe._clipping||ge.beginPath(),!0);fe=!1,Ce=void 0;try{for(var it,le=re[Symbol.iterator]();!(Q=(it=le.next()).done);Q=!0){var z=it.value;"M"===z.type?ge.moveTo(z.x,z.y):"L"===z.type?ge.lineTo(z.x,z.y):"C"===z.type?ge.bezierCurveTo(z.x1,z.y1,z.x2,z.y2,z.x,z.y):"Q"===z.type?ge.quadraticCurveTo(z.x1,z.y1,z.x,z.y):"Z"===z.type&&ge.closePath()}}catch(ye){fe=!0,Ce=ye}finally{try{Q||null==le.return||le.return()}finally{if(fe)throw Ce}}return oe._doStroke&&oe._strokeSet&&!oe._clipping&&ge.stroke(),oe._doFill&&!oe._clipping&&(oe._fillSet||oe._setFill(b._DEFAULT_TEXT_FILL),ge.fill()),this}},{key:"_textWidth",value:function(ne,Y){return this.font.getAdvanceWidth(ne,Y)}},{key:"_textAscent",value:function(ne){return this.font.ascender*this._scale(ne)}},{key:"_textDescent",value:function(ne){return-this.font.descender*this._scale(ne)}},{key:"_scale",value:function(ne){return 1/this.font.unitsPerEm*(ne||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(ne,Y,we,Se,oe){var ge=ne._textSize;switch(void 0===oe&&(oe=this._textWidth(Y,ge)),ne._textAlign){case b.CENTER:we-=oe/2;break;case b.RIGHT:we-=oe}switch(ne._textBaseline){case b.TOP:Se+=this._textAscent(ge);break;case b.CENTER:Se+=this._textAscent(ge)/2;break;case b.BOTTOM:Se-=this._textDescent(ge)}return{x:we,y:Se}}}])&&D(V.prototype,K),G}(),Z.default=a=C.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(a,be,Z){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.object.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.append=function(M,C){return M.push(C),M},a.default.prototype.arrayCopy=function(M,C,b,w,I){var D,d;M=void 0!==I?(d=Math.min(I,M.length),D=w,M.slice(C,d+C)):(d=void 0!==b?(d=b,Math.min(d,M.length)):M.length,b=C,M.slice(D=0,d)),Array.prototype.splice.apply(b,[D,d].concat(M))},a.default.prototype.concat=function(M,C){return M.concat(C)},a.default.prototype.reverse=function(M){return M.reverse()},a.default.prototype.shorten=function(M){return M.pop(),M},a.default.prototype.shuffle=function(M,C){for(var b,w,I=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(M),D=(M=C||I?M:M.slice()).length;1<D;)b=this.random(0,1)*D|0,w=M[--D],M[D]=M[b],M[b]=w;return M},a.default.prototype.sort=function(M,w){var b=w?M.slice(0,Math.min(w,M.length)):M;return w=w?M.slice(Math.min(w,M.length)):[],(b="string"==typeof b[0]?b.sort():b.sort(function(I,D){return I-D})).concat(w)},a.default.prototype.splice=function(M,C,b){return Array.prototype.splice.apply(M,[b,0].concat(C)),M},a.default.prototype.subset=function(M,C,b){return M.slice(C,void 0!==b?C+b:M.length)},Z.default=a=a.default},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(a,be,Z){"use strict";a("core-js/modules/es.array.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.repeat"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.repeat"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.float=function(C){return C instanceof Array?C.map(parseFloat):parseFloat(C)},M.default.prototype.int=function(C){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return C===1/0||"Infinity"===C?1/0:C===-1/0||"-Infinity"===C?-1/0:"string"==typeof C?parseInt(C,b):"number"==typeof C?0|C:"boolean"==typeof C?C?1:0:C instanceof Array?C.map(function(w){return M.default.prototype.int(w,b)}):void 0},M.default.prototype.str=function(C){return C instanceof Array?C.map(M.default.prototype.str):String(C)},M.default.prototype.boolean=function(C){return"number"==typeof C?0!==C:"string"==typeof C?"true"===C.toLowerCase():"boolean"==typeof C?C:C instanceof Array?C.map(M.default.prototype.boolean):void 0},M.default.prototype.byte=function(C){return"number"==typeof(C=M.default.prototype.int(C,10))?(C+128)%256-128:C instanceof Array?C.map(M.default.prototype.byte):void 0},M.default.prototype.char=function(C){return"number"!=typeof C||isNaN(C)?C instanceof Array?C.map(M.default.prototype.char):"string"==typeof C?M.default.prototype.char(parseInt(C,10)):void 0:String.fromCharCode(C)},M.default.prototype.unchar=function(C){return"string"==typeof C&&1===C.length?C.charCodeAt(0):C instanceof Array?C.map(M.default.prototype.unchar):void 0},M.default.prototype.hex=function(C,b){if(b=null==b?8:b,C instanceof Array)return C.map(function(I){return M.default.prototype.hex(I,b)});if(C===1/0||C===-1/0)return(C===1/0?"F":"0").repeat(b);if("number"==typeof C){C<0&&(C=4294967295+C+1);for(var w=Number(C).toString(16).toUpperCase();w.length<b;)w="0".concat(w);return w.length>=b?w.substring(w.length-b,w.length):w}},M.default.prototype.unhex=function(C){return C instanceof Array?C.map(M.default.prototype.unhex):parseInt("0x".concat(C),16)},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.pad-start"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.pad-start"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(d=a("../core/main"))&&d.__esModule?d:{default:d};function C(f,h){return function(p){if(Array.isArray(p))return p}(f)||function(p,m){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p)){var g=[],x=!0,E=!1,S=void 0;try{for(var k,q=p[Symbol.iterator]();!(x=(k=q.next()).done)&&(g.push(k.value),!m||g.length!==m);x=!0);}catch(J){E=!0,S=J}finally{try{x||null==q.return||q.return()}finally{if(E)throw S}}return g}}(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(f,h,p){var m,g=f<0,x=(E=C((f=Math.abs(f)).toString().split("."),2))[0],E=E[1];return void 0===p?(x=x.padStart(h,"0"),m=E?x+"."+E:x,g?"-"+m:m):(x=(m=C(f.toFixed(p).toString().split("."),2))[0],E=m[1],x=x.padStart(h,"0"),f=void 0===E?x:x+"."+E,g?"-"+f:f)}function w(g,h){var p=(g=g.toString()).indexOf("."),m=-1!==p?g.substring(p):"";if(g=(g=-1!==p?g.substring(0,p):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===h)m="";else if(void 0!==h)if(h>m.length)for(var x=h-(m+=-1===p?".":"").length+1,E=0;E<x;E++)m+="0";else m=m.substring(0,h+1);return g+m}function I(f){return 0<parseFloat(f)?"+".concat(f.toString()):f.toString()}function D(f){return 0<=parseFloat(f)?" ".concat(f.toString()):f.toString()}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),M.default.prototype.join=function(f,h){return M.default._validateParameters("join",arguments),f.join(h)},M.default.prototype.match=function(f,h){return M.default._validateParameters("match",arguments),f.match(h)},M.default.prototype.matchAll=function(f,h){M.default._validateParameters("matchAll",arguments);for(var p=new RegExp(h,"g"),m=p.exec(f),g=[];null!==m;)g.push(m),m=p.exec(f);return g},M.default.prototype.nf=function(f,h,p){return M.default._validateParameters("nf",arguments),f instanceof Array?f.map(function(m){return b(m,h,p)}):"[object Arguments]"===Object.prototype.toString.call(f)?3===f.length?this.nf(f[0],f[1],f[2]):2===f.length?this.nf(f[0],f[1]):this.nf(f[0]):b(f,h,p)},M.default.prototype.nfc=function(f,h){return M.default._validateParameters("nfc",arguments),f instanceof Array?f.map(function(p){return w(p,h)}):w(f,h)},M.default.prototype.nfp=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfp",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(I):I(m)},M.default.prototype.nfs=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfs",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(D):D(m)},M.default.prototype.split=function(f,h){return M.default._validateParameters("split",arguments),f.split(h)},M.default.prototype.splitTokens=function(f,h){var p,m;return M.default._validateParameters("splitTokens",arguments),m=void 0!==h?(m=/\]/g.exec(h),(p=/\[/g.exec(h))&&m?(h=h.slice(0,m.index)+h.slice(m.index+1),p=/\[/g.exec(h),h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):m?(h=h.slice(0,m.index)+h.slice(m.index+1),new RegExp("[".concat(h,"\\]]"),"g")):p?(h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,f.split(m).filter(function(g){return g})},M.default.prototype.trim=function(f){return M.default._validateParameters("trim",arguments),f instanceof Array?f.map(this.trim):f.trim()};var d=M.default;Z.default=d},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.day=function(){return(new Date).getDate()},a.default.prototype.hour=function(){return(new Date).getHours()},a.default.prototype.minute=function(){return(new Date).getMinutes()},a.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},a.default.prototype.month=function(){return(new Date).getMonth()+1},a.default.prototype.second=function(){return(new Date).getSeconds()},a.default.prototype.year=function(){return(new Date).getFullYear()},Z.default=a=a.default},{"../core/main":283}],326:[function(a,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(d=a("../core/main"))&&d.__esModule?d:{default:d},w=(a("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(a("../core/constants")));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h,p,m,g,x,E){f=f<=0?1:f,h=h<0?0:h,p=p<=0?f:p,m=m<3?3:m;for(var S,k,q=(x=void 0===x||x)?-2:0,J=(g=g<1?1:g)+((E=void 0===E?0!==h:E)?2:0),G=Math.atan2(f-h,p),V=Math.sin(G),K=Math.cos(G),$=q;$<=J;++$){var ne=$/g,Y=p*ne,we=void 0;for(we=$<0?(ne=Y=0,f):g<$?(Y=p,ne=1,h):f+(h-f)*ne,-2!==$&&$!==g+2||(we=0),Y-=p/2,S=0;S<m;++S){var Se=S/(m-1),ge=2*Math.PI*Se,oe=Math.sin(ge),re=(ge=Math.cos(ge),this.vertices.push(new b.default.Vector(oe*we,Y,ge*we)));re=$<0?new b.default.Vector(0,-1,0):g<$&&h?new b.default.Vector(0,1,0):new b.default.Vector(oe*K,V,ge*K),this.vertexNormals.push(re),this.uvs.push(Se,ne)}}var Q=0;if(x){for(k=0;k<m;++k)this.faces.push([Q+k,Q+m+(k+1)%m,Q+m+k]);Q+=2*m}for($=0;$<g;++$){for(S=0;S<m;++S){var fe=(S+1)%m;this.faces.push([Q+S,Q+fe,Q+m+fe]),this.faces.push([Q+S,Q+m+fe,Q+m+S])}Q+=m}if(E)for(Q+=m,S=0;S<m;++S)this.faces.push([Q+S,Q+(S+1)%m,Q+m])}b.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},b.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},b.default.prototype.buildGeometry=function(f){return this._renderer.buildGeometry(f)},b.default.prototype.freeGeometry=function(f){this._renderer._freeBuffers(f.gid)},b.default.prototype.plane=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=(this._assert3d("plane"),b.default._validateParameters("plane",arguments),"plane|".concat(m,"|").concat(g));return this._renderer.geometryInHash(x)||((f=new b.default.Geometry(m,g,function(){for(var E,S,k=0;k<=this.detailY;k++)for(var q=k/this.detailY,J=0;J<=this.detailX;J++)S=new b.default.Vector((E=J/this.detailX)-.5,q-.5,0),this.vertices.push(S),this.uvs.push(E,q)})).computeFaces().computeNormals(),m<=1&&g<=1?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,h,p,1),this},b.default.prototype.box=function(f,h,p,m,g){this._assert3d("box"),b.default._validateParameters("box",arguments),void 0===f&&(f=50),void 0===h&&(h=f),void 0===p&&(p=h);var x,E=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===g&&(g=E?1:4),E="box|".concat(m=void 0===m?E?1:4:m,"|").concat(g),this._renderer.geometryInHash(E)||((x=new b.default.Geometry(m,g,function(){var S=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(k,q){q*=4;for(var J=0;J<4;J++){var G=new b.default.Vector((2*(1&(G=k[J]))-1)/2,((2&G)-1)/2,((4&G)/2-1)/2);S.vertices.push(G),S.uvs.push(1&J,(2&J)/2)}S.faces.push([q,1+q,2+q]),S.faces.push([2+q,1+q,3+q])})})).computeNormals(),m<=4&&g<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(E,x)),this._renderer.drawBuffersScaled(E,f,h,p),this},b.default.prototype.sphere=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),b.default._validateParameters("sphere",arguments),this.ellipsoid(f,f,f,h,p),this},b.default.prototype.cylinder=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],S=(this._assert3d("cylinder"),b.default._validateParameters("cylinder",arguments),"cylinder|".concat(m,"|").concat(g,"|").concat(x,"|").concat(E));return this._renderer.geometryInHash(S)||(f=new b.default.Geometry(m,g),D.call(f,1,1,1,m,g,x,E),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,f)),this._renderer.drawBuffersScaled(S,h,p,h),this},b.default.prototype.cone=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=(this._assert3d("cone"),b.default._validateParameters("cone",arguments),"cone|".concat(m,"|").concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||(f=new b.default.Geometry(m,g),D.call(f,1,0,1,m,g,x,!1),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,h),this},b.default.prototype.ellipsoid=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,x=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,E=(this._assert3d("ellipsoid"),b.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||((f=new b.default.Geometry(g,x,function(){for(var S=0;S<=this.detailY;S++)for(var k=S/this.detailY,q=Math.PI*k-Math.PI/2,J=Math.cos(q),G=Math.sin(q),V=0;V<=this.detailX;V++){var K=V/this.detailX,ne=2*Math.PI*K,$=Math.cos(ne);ne=Math.sin(ne),ne=new b.default.Vector(J*ne,G,J*$),this.vertices.push(ne),this.vertexNormals.push(ne),this.uvs.push(K,k)}})).computeFaces(),g<=24&&x<=24?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,m),this},b.default.prototype.torus=function(f,E,p,m){if(this._assert3d("torus"),b.default._validateParameters("torus",arguments),void 0===f)f=50;else if(!f)return;if(void 0===E)E=10;else if(!E)return;void 0===p&&(p=24),void 0===m&&(m=16);var g,x=(E/f).toPrecision(4);return E="torus|".concat(x,"|").concat(p,"|").concat(m),this._renderer.geometryInHash(E)||((g=new b.default.Geometry(p,m,function(){for(var S=0;S<=this.detailY;S++)for(var k=S/this.detailY,q=2*Math.PI*k,J=Math.cos(q),G=Math.sin(q),V=1+x*J,K=0;K<=this.detailX;K++){var $=K/this.detailX,ne=2*Math.PI*$,we=Math.cos(ne),Y=(ne=Math.sin(ne),new b.default.Vector(V*we,V*ne,x*G));we=new b.default.Vector(J*we,J*ne,G),this.vertices.push(Y),this.vertexNormals.push(we),this.uvs.push($,k)}})).computeFaces(),p<=24&&m<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,g)),this._renderer.drawBuffersScaled(E,f,f,f),this},b.default.RendererGL.prototype.point=function(f,h){var p=[];return p.push(new b.default.Vector(f,h,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(p,this.immediateMode.buffers.point),this},b.default.RendererGL.prototype.triangle=function(E){var h=E[0],p=E[1],m=E[2],g=E[3],x=E[4],S=(E=E[5],this.geometryInHash("tri")||((S=new b.default.Geometry(1,1,function(){var J=[];J.push(new b.default.Vector(0,0,0)),J.push(new b.default.Vector(1,0,0)),J.push(new b.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=J,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uModelMatrix.copy());try{var k=Math.sign(h*g-m*p+m*E-x*g+x*p-h*E),q=new b.default.Matrix([m-h,g-p,0,0,x-h,E-p,0,0,0,0,k,0,h,p,0,1]).mult(this.uModelMatrix);this.uModelMatrix=q,this.drawBuffers("tri")}finally{this.uModelMatrix=S}return this},b.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,w.TWO_PI,w.OPEN,f[4])},b.default.RendererGL.prototype.arc=function(){var f,h=arguments.length<=0?void 0:arguments[0],p=arguments.length<=1?void 0:arguments[1],m=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],E=arguments.length<=5?void 0:arguments[5],S=arguments.length<=6?void 0:arguments[6],k=(arguments.length<=7?void 0:arguments[7])||25,q=(Math.abs(E-x)>=w.TWO_PI?"".concat(J="ellipse","|"):"".concat(J="arc","|").concat(x,"|").concat(E,"|").concat(S,"|")).concat(k,"|"),J=(this.geometryInHash(q)||((f=new b.default.Geometry(k,1,function(){if(x.toFixed(10)!==E.toFixed(10)){S!==w.PIE&&void 0!==S||(this.vertices.push(new b.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var G=0;G<=k;G++){var K=G/k*(E-x)+x,V=.5+Math.cos(K)/2;K=.5+Math.sin(K)/2,this.vertices.push(new b.default.Vector(V,K,0)),this.uvs.push([V,K]),G<k-1&&(this.faces.push([0,G+1,G+2]),this.edges.push([G+1,G+2]))}switch(S){case w.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case w.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case w.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),k<=50?f._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(J," with more than 50 detail")),this.createBuffers(q,f)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(q)}finally{this.uModelMatrix=J}return this},b.default.RendererGL.prototype.rect=function(f){var h=f[0],p=f[1],m=f[2],g=f[3];if(void 0===f[4]){var S=this._pInst._glAttributes.perPixelLighting,x=f[4]||(S?1:24),E=f[5]||(S?1:16),k=(S="rect|".concat(x,"|").concat(E),this.geometryInHash(S)||((k=new b.default.Geometry(x,E,function(){for(var re=0;re<=this.detailY;re++)for(var Q=re/this.detailY,fe=0;fe<=this.detailX;fe++){var Ce=fe/this.detailX,it=new b.default.Vector(Ce,Q,0);this.vertices.push(it),this.uvs.push(Ce,Q)}0<x&&0<E&&(this.edges=[[0,x],[x,(x+1)*(E+1)-1],[(x+1)*(E+1)-1,(x+1)*E],[(x+1)*E,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,k)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(S)}finally{this.uModelMatrix=k}}else{S=f[4],k=void 0===f[5]?S:f[5];var q=void 0===f[6]?k:f[6],ne=(f=void 0===f[7]?q:f[7],m),J=g,G=((ne+=h)<h&&(K=h,h=ne,ne=K),(J+=p)<p&&(K=p,p=J,J=K),(K=Math.min((ne-h)/2,(J-p)/2))<S&&(S=K),K<k&&(k=K),K<q&&(q=K),K<f&&(f=K),h),V=p,K=ne,$=(h=J,this.beginShape(),0!==k?(this.vertex(K-k,V),this.quadraticVertex(K,V,K,V+k)):this.vertex(K,V),0!==q?(this.vertex(K,h-q),this.quadraticVertex(K,h,K-q,h)):this.vertex(K,h),0!==f?(this.vertex(G+f,h),this.quadraticVertex(G,h,G,h-f)):this.vertex(G,h),0!==S?(this.vertex(G,V+S),this.quadraticVertex(G,V,G+S,V)):this.vertex(G,V),!(this.immediateMode.geometry.uvs.length=0));p=!1,ne=void 0;try{for(var Y,we=this.immediateMode.geometry.vertices[Symbol.iterator]();!($=(Y=we.next()).done);$=!0){var Se=Y.value;this.immediateMode.geometry.uvs.push((Se.x-G)/m,(Se.y-V)/g)}}catch(le){p=!0,ne=le}finally{try{$||null==we.return||we.return()}finally{if(p)throw ne}}this.endShape(w.CLOSE)}return this},b.default.RendererGL.prototype.quad=function(f,h,p,m,g,x,E,S,k,q,J,G){var V=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,K=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,$="quad|".concat(f,"|").concat(h,"|").concat(p,"|").concat(m,"|").concat(g,"|").concat(x,"|").concat(E,"|").concat(S,"|").concat(k,"|").concat(q,"|").concat(J,"|").concat(G,"|").concat(V,"|").concat(K);if(!this.geometryInHash($)){var ne=new b.default.Geometry(V,K,function(){for(var fe=1/(this.detailX-1),Ce=1/(this.detailY-1),it=0;it<this.detailY;it++)for(var le=0;le<this.detailX;le++){var z=le*fe,ye=it*Ce;this.vertices.push(new b.default.Vector((1-z)*((1-ye)*f+ye*q)+z*((1-ye)*m+ye*E),(1-z)*((1-ye)*h+ye*J)+z*((1-ye)*g+ye*S),(1-z)*((1-ye)*p+ye*G)+z*((1-ye)*x+ye*k))),this.uvs.push([z,ye])}});ne.faces=[];for(var Y=0;Y<K-1;Y++)for(var we=0;we<V-1;we++){var Se=we+Y*V,oe=we+1+(Y+1)*V,ge=we+(Y+1)*V;ne.faces.push([Se,we+1+Y*V,oe]),ne.faces.push([Se,oe,ge])}ne.computeNormals();for(var re=[ne.edges.length=0,2,3,1],Q=0;Q<re.length;Q++)ne.edges.push([re[Q],re[(Q+1)%re.length]]);ne._edgesToVertices(),this.createBuffers($,ne)}return this.drawBuffers($),this},b.default.RendererGL.prototype.bezier=function(f,h,p,m,g,x,E,S,k,q,J,G){8===arguments.length&&(J=S,q=E,S=x,E=g,g=m,m=p,p=x=k=G=0);var V=this._pInst._bezierDetail||20;this.beginShape();for(var K=0;K<=V;K++){var $=Math.pow(1-K/V,3),ne=K/V*3*Math.pow(1-K/V,2),Y=3*Math.pow(K/V,2)*(1-K/V),we=Math.pow(K/V,3);this.vertex(f*$+m*ne+E*Y+q*we,h*$+g*ne+S*Y+J*we,p*$+x*ne+k*Y+G*we)}return this.endShape(),this},b.default.RendererGL.prototype.curve=function(f,h,p,m,g,x,E,S,k,q,J,G){8===arguments.length&&(q=E,J=S,E=g,S=m,g=m=p,p=x=k=G=0);var V=this._pInst._curveDetail;this.beginShape();for(var K=0;K<=V;K++){var $=.5*Math.pow(K/V,3),ne=.5*Math.pow(K/V,2),Y=K/V*.5;this.vertex($*(3*m-f-3*E+q)+ne*(2*f-5*m+4*E-q)+Y*(-f+E)+2*m*.5,$*(3*g-h-3*S+J)+ne*(2*h-5*g+4*S-J)+Y*(-h+S)+2*g*.5,$*(3*x-p-3*k+G)+ne*(2*p-5*x+4*k-G)+Y*(-p+k)+2*x*.5)}return this.endShape(),this},b.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},b.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var f,h,p,m,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var q=1/this._lutBezierDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableBezier[V]=this._bezierCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableBezier[V]=this._bezierCoefficients(x);break}J+=q,G-=q,++V}}for(var K=this._lookUpTableBezier.length,$=[],ne=0;ne<4;ne++)$.push([]);$[0]=this.immediateMode.geometry.vertexColors.slice(-4),$[3]=this.curFillColor.slice();var Y=[];for(ne=0;ne<4;ne++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[3]=this.curStrokeColor.slice(),6===k){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var we=Math.hypot(E[0]-E[1],S[0]-S[1]),oe=Math.hypot(E[1]-E[2],S[1]-S[2]),Se=Math.hypot(E[2]-E[3],S[2]-S[3]);for(we/=oe=we+oe+Se,Se/=oe,g=0;g<4;g++)$[1].push($[0][g]*(1-we)+$[3][g]*we),$[2].push($[0][g]*Se+$[3][g]*(1-Se)),Y[1].push(Y[0][g]*(1-we)+Y[3][g]*we),Y[2].push(Y[0][g]*Se+Y[3][g]*(1-Se));for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ne=f=h=0;ne<4;ne++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][ne]*$[ne][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][ne]*Y[ne][g];f+=E[ne]*this._lookUpTableBezier[m][ne],h+=S[ne]*this._lookUpTableBezier[m][ne]}this.vertex(f,h)}this.curFillColor=$[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===k){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var ge=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],re=Math.hypot(E[0]-E[1],S[0]-S[1],ge[0]-ge[1]),Q=(oe=Math.hypot(E[1]-E[2],S[1]-S[2],ge[1]-ge[2]),Math.hypot(E[2]-E[3],S[2]-S[3],ge[2]-ge[3]));for(re/=k=re+oe+Q,Q/=k,g=0;g<4;g++)$[1].push($[0][g]*(1-re)+$[3][g]*re),$[2].push($[0][g]*Q+$[3][g]*(1-Q)),Y[1].push(Y[0][g]*(1-re)+Y[3][g]*re),Y[2].push(Y[0][g]*Q+Y[3][g]*(1-Q));for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ne=f=h=p=0;ne<4;ne++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][ne]*$[ne][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][ne]*Y[ne][g];f+=E[ne]*this._lookUpTableBezier[m][ne],h+=S[ne]*this._lookUpTableBezier[m][ne],p+=ge[ne]*this._lookUpTableBezier[m][ne]}this.vertex(f,h,p)}this.curFillColor=$[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},b.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var f,h,p,m,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var q=1/this._lutQuadraticDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableQuadratic[V]=this._quadraticCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableQuadratic[V]=this._quadraticCoefficients(x);break}J+=q,G-=q,++V}}for(var K=this._lookUpTableQuadratic.length,$=[],ne=0;ne<3;ne++)$.push([]);$[0]=this.immediateMode.geometry.vertexColors.slice(-4),$[2]=this.curFillColor.slice();var Y=[];for(ne=0;ne<3;ne++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[2]=this.curStrokeColor.slice(),4===k){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var we=Math.hypot(E[0]-E[1],S[0]-S[1]);for(we/=we+Math.hypot(E[1]-E[2],S[1]-S[2]),g=0;g<4;g++)$[1].push($[0][g]*(1-we)+$[2][g]*we),Y[1].push(Y[0][g]*(1-we)+Y[2][g]*we);for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ne=f=h=0;ne<3;ne++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][ne]*$[ne][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][ne]*Y[ne][g];f+=E[ne]*this._lookUpTableQuadratic[m][ne],h+=S[ne]*this._lookUpTableQuadratic[m][ne]}this.vertex(f,h)}this.curFillColor=$[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===k){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var Se=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],oe=Math.hypot(E[0]-E[1],S[0]-S[1],Se[0]-Se[1]);for(oe/=oe+Math.hypot(E[1]-E[2],S[1]-S[2],Se[1]-Se[2]),g=0;g<4;g++)$[1].push($[0][g]*(1-oe)+$[2][g]*oe),Y[1].push(Y[0][g]*(1-oe)+Y[2][g]*oe);for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ne=f=h=p=0;ne<3;ne++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][ne]*$[ne][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][ne]*Y[ne][g];f+=E[ne]*this._lookUpTableQuadratic[m][ne],h+=S[ne]*this._lookUpTableQuadratic[m][ne],p+=Se[ne]*this._lookUpTableQuadratic[m][ne]}this.vertex(f,h,p)}this.curFillColor=$[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},b.default.RendererGL.prototype.curveVertex=function(){var f,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var q=1/this._lutBezierDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableBezier[V]=this._bezierCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableBezier[V]=this._bezierCoefficients(x);break}J+=q,G-=q,++V}}var K=this._lookUpTableBezier.length;if(2===k){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<K;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3]);for(g=0;g<k;g++)this.immediateMode._curveVertex.shift()}}else if(3===k&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<K;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3],f[0]*this._lookUpTableBezier[g][0]+f[1]*this._lookUpTableBezier[g][1]+f[2]*this._lookUpTableBezier[g][2]+f[3]*this._lookUpTableBezier[g][3]);for(g=0;g<k;g++)this.immediateMode._curveVertex.shift()}},b.default.RendererGL.prototype.image=function(f,G,p,V,g,x,E,S,k){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(w.NORMAL);var q=0,J=(G<=f.width&&(q=G/f.width),1);G+V<=f.width&&(J=(G+V)/f.width),G=0,p<=f.height&&(G=p/f.height),V=1,p+g<=f.height&&(V=(p+g)/f.height),this.beginShape(),this.vertex(x,E,0,q,G),this.vertex(x+S,E,0,J,G),this.vertex(x+S,E+k,0,J,V),this.vertex(x,E+k,0,q,V),this.endShape(w.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(w.REMOVE)};var d=b.default;Z.default=d},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(a,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.assign"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(a("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(h,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}var f=function(){function h(x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new b.default.Matrix,x.uModelMatrix=new b.default.Matrix,this.geometry=new b.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var p,m;return p=h,(m=[{key:"transformVertices",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uModelMatrix.multiplyPoint(S)}):x}},{key:"transformNormals",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uNMatrix.multiplyVec3(S)}):x}},{key:"addGeometry",value:function(x){for(var E,S=this,k=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(J,G){return J===S.identityMatrix.mat4[G]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),q=((E=this.geometry.vertices).push.apply(E,D(this.transformVertices(x.vertices))),(E=this.geometry.vertexNormals).push.apply(E,D(this.transformNormals(x.vertexNormals))),(E=this.geometry.uvs).push.apply(E,D(x.uvs)),this.renderer._doFill&&(E=this.geometry.faces).push.apply(E,D(x.faces.map(function(J){return J.map(function(G){return G+k})}))),this.renderer._doStroke&&(E=this.geometry.edges).push.apply(E,D(x.edges.map(function(J){return J.map(function(G){return G+k})}))),D(x.vertexColors));q.length<4*x.vertices.length;)q.push.apply(q,D(this.renderer.curFillColor));(E=this.geometry.vertexColors).push.apply(E,D(q))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,E=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(E===w.TRIANGLE_STRIP||E===w.QUAD_STRIP)for(var k=2;k<x.vertices.length;k++)S.push(k%2==0?[k,k-1,k-2]:[k,k-2,k-1]);else if(E===w.TRIANGLE_FAN)for(var q=2;q<x.vertices.length;q++)S.push([0,q-1,q]);else for(var J=0;J<x.vertices.length;J+=3)S.push([J,J+1,J+2]);this.addGeometry(Object.assign({},x,{faces:S}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&d(p.prototype,m),h}();f.nextGeometryId=0,Z.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(D=a("../core/main"))&&D.__esModule?D:{default:D},b=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==I(d)&&"function"!=typeof d)return{default:d};var f=w();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function w(){var d;return"function"!=typeof WeakMap?null:(w=function(){return d},d=new WeakMap)}function I(d){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}C.default.prototype.orbitControl=function(d,f,h,k){var m=this,g=(this._assert3d("orbitControl"),C.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===d&&(d=1),void 0===f&&(f=d),void 0===h&&(h=1),"object"!==I(k)&&(k={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var J=k.disableTouchActions;!0===this.touchActionsDisabled||void 0!==J&&!J||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),k=void 0!==(J=k.freeRotation)&&J;var x,E,S,q=[],G=(this.touches.forEach(function(we){m._renderer.prevTouches.forEach(function(Se){we.id===Se.id&&q.push(Se={x:we.x,y:we.y,px:Se.x,py:Se.y})})}),this._renderer.prevTouches=this.touches,J=0,0),V=0,K=0,$=0,ne=this.height<this.width?this.height:this.width,Y=!1;return 0<q.length?(Y=0<q[0].x&&q[0].x<this.width&&0<q[0].y&&q[0].y<this.height,1===q.length?(G=-d*((x=q[0]).x-x.px)/ne,V=f*(x.y-x.py)/ne):(x=q[0],E=q[1],J=-(Math.hypot(x.x-E.x,x.y-E.y)-Math.hypot(x.px-E.px,x.py-E.py))*h*4e-4,K=.5*(x.x+E.x)-.5*(x.px+E.px),$=.5*(x.y+E.y)-.5*(x.py+E.py)),0<this.touches.length?Y&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(Y=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(J=Math.sign(this._mouseWheelDeltaY)*h,J*=.01,this._mouseWheelDeltaY=0,Y&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(G=-d*this.movedX/ne,V=f*this.movedY/ne):this.mouseButton===this.RIGHT&&(K=this.movedX,$=this.movedY*g.yScale),Y&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==J&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=J),.001<Math.abs(this._renderer.zoomVelocity)?(k?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),0!==g.projMatrix.mat4[15]&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===G&&0===V||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*G,.6*V),1e-6<this._renderer.rotateVelocity.magSq()?(k?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===K&&0===$||!this._renderer.executeRotateAndMove||this._renderer.moveVelocity.add(.15*(x=2*K/this.width),.15*(E=2*-$/this.height)),1e-6<this._renderer.moveVelocity.magSq()?(h=g._getLocalAxes(),d=g.eyeX-g.centerX,f=g.eyeY-g.centerY,ne=g.eyeZ-g.centerZ,Y=Math.sqrt(d*d+f*f+ne*ne),J=new C.default.Vector(g.centerX,g.centerY,g.centerZ),J=g.cameraMatrix.multiplyPoint(J),(J=this._renderer.uPMatrix.multiplyAndNormalizePoint(J)).x-=this._renderer.moveVelocity.x,J.y-=this._renderer.moveVelocity.y,V=0===(G=this._renderer.uPMatrix.mat4)[15]?(S=(G[8]+J.x)/G[0]*Y,(G[9]+J.y)/G[5]*Y):(S=(J.x-G[12])/G[0],(J.y-G[13])/G[5]),g.setPosition(g.eyeX+S*h.x[0]+V*h.y[0],g.eyeY+S*h.x[1]+V*h.y[1],g.eyeZ+S*h.x[2]+V*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},C.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];C.default._validateParameters("debugMode",f);for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1);f[0]===b.GRID?this.registerMethod("post",this._grid(f[1],f[2],f[3],f[4],f[5])):f[0]===b.AXES?this.registerMethod("post",this._axesIcon(f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid(f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon(f[5],f[6],f[7],f[8])))},C.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1)},C.default.prototype._grid=function(d,f,h,p,m){void 0===d&&(d=this.width/2),void 0===f&&(f=Math.round(d/30)<4?4:Math.round(d/30)),void 0===h&&(h=0),void 0===p&&(p=0),void 0===m&&(m=0);var g=d/f,x=d/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var E=0;E<=f;E++)this.beginShape(this.LINES),this.vertex(-x+h,p,E*g-x+m),this.vertex(x+h,p,E*g-x+m),this.endShape();for(var S=0;S<=f;S++)this.beginShape(this.LINES),this.vertex(S*g-x+h,p,-x+m),this.vertex(S*g-x+h,p,x+m),this.endShape();this.pop()}},C.default.prototype._axesIcon=function(d,f,h,p){return void 0===d&&(d=40<this.width/20?this.width/20:40),void 0===f&&(f=-this.width/4),void 0===h&&(h=f),void 0===p&&(p=f),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f+d,h,p),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h+d,p),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h,p+d),this.endShape(),this.pop()}};var D=C.default;Z.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(a,be,Z){"use strict";a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.filter"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.ambientLight=function(C,b,w,I){this._assert3d("ambientLight"),M.default._validateParameters("ambientLight",arguments);var D=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(D._array[0],D._array[1],D._array[2]),this._renderer._enableLighting=!0,this},M.default.prototype.specularColor=function(C,b,w){this._assert3d("specularColor"),M.default._validateParameters("specularColor",arguments);var I=this.color.apply(this,arguments);return this._renderer.specularColors=[I._array[0],I._array[1],I._array[2]],this},M.default.prototype.directionalLight=function(C,m,p,I,D,d){var f,h;return this._assert3d("directionalLight"),M.default._validateParameters("directionalLight",arguments),C=C instanceof M.default.Color?C:this.color(C,m,p),p="number"==typeof(m=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=m.x,h=m.y,m.z),m=Math.sqrt(f*f+h*h+p*p),this._renderer.directionalLightDirections.push(f/m,h/m,p/m),this._renderer.directionalLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.pointLight=function(C,p,m,I,D,d){var f,h;return this._assert3d("pointLight"),M.default._validateParameters("pointLight",arguments),C=C instanceof M.default.Color?C:this.color(C,p,m),m="number"==typeof(p=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=p.x,h=p.y,p.z),this._renderer.pointLightPositions.push(f,h,m),this._renderer.pointLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.imageLight=function(C){this._renderer.activeImageLight=C,this._renderer._enableLighting=!0},M.default.prototype.panorama=function(C){this.filter(this._renderer._getSphereMapping(C))},M.default.prototype.lights=function(){this._assert3d("lights");var C=this.color("rgb(128,128,128)");return this.ambientLight(C),this.directionalLight(C,0,0,-1),this},M.default.prototype.lightFalloff=function(C,b,w){return this._assert3d("lightFalloff"),M.default._validateParameters("lightFalloff",arguments),C<0&&(C=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),b<0&&(b=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),w<0&&(w=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===C&&0===b&&0===w&&(C=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=C,this._renderer.linearAttenuation=b,this._renderer.quadraticAttenuation=w,this},M.default.prototype.spotLight=function(C,b,w,I,D,d,f,h,p,m,g){this._assert3d("spotLight"),M.default._validateParameters("spotLight",arguments);var x,E,S,k=arguments.length;switch(k){case 11:case 10:x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p);break;case 9:C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),S=new M.default.Vector(D,d,f),m=h,g=p):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=new M.default.Vector(D,d,f),m=h,g=p):f instanceof M.default.Vector?(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=f,m=h,g=p):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p));break;case 8:S=C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),f),m=h;break;case 7:C instanceof M.default.Color&&b instanceof M.default.Vector?(x=C,E=b,S=new M.default.Vector(w,I,D),m=d,g=f):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D,m=d,g=f):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D,m=d,g=f):S=C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),f);break;case 6:I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D,m=d):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D,m=d):C instanceof M.default.Color&&b instanceof M.default.Vector&&(x=C,E=b,S=new M.default.Vector(w,I,D),m=d);break;case 5:C instanceof M.default.Color&&b instanceof M.default.Vector&&w instanceof M.default.Vector?(x=C,E=b,S=w,m=I,g=D):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D):C instanceof M.default.Color&&b instanceof M.default.Vector&&(x=C,E=b,S=new M.default.Vector(w,I,D));break;case 4:x=C,E=b,S=w,m=I;break;case 3:x=C,E=b,S=w;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(k<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(E.x,E.y,E.z),S.normalize(),this._renderer.spotLightDirections.push(S.x,S.y,S.z),void 0===m&&(m=Math.PI/3),void 0!==g&&g<1?(g=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===g&&(g=100),m=this._renderer._pInst._toRadians(m),this._renderer.spotLightAngle.push(Math.cos(m)),this._renderer.spotLightConc.push(g),this._renderer._enableLighting=!0,this},M.default.prototype.noLights=function(){this._assert3d("noLights");for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("noLights",b),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},Z.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(a,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,a("regenerator-runtime/runtime");var C=(p=a("../core/main"))&&p.__esModule?p:{default:p};function b(m){return function(g){if(Array.isArray(g)){for(var x=0,E=new Array(g.length);x<g.length;x++)E[x]=g[x];return E}}(m)||function(g){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g))return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(m,g,x,E,S,k,q){try{var J=m[k](q),G=J.value}catch(V){return void x(V)}J.done?g(G):Promise.resolve(G).then(E,S)}function I(m){return function(){var g=this,x=arguments;return new Promise(function(E,S){var k=m.apply(g,x);function q(G){w(k,E,S,q,J,"next",G)}function J(G){w(k,E,S,q,J,"throw",G)}q(void 0)})}}function D(m){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}function d(m,g,x){for(var E=2<arguments.length&&void 0!==x?x:{},S={v:[],vt:[],vn:[]},k={},q=null,J=new Set,G=!1,V=!1,K=0;K<g.length;++K){var $=g[K].trim().split(/\b\s+/);if(0<$.length)if("usemtl"===$[0])q=$[1];else if("v"===$[0]||"vn"===$[0]){var ne=new C.default.Vector(parseFloat($[1]),parseFloat($[2]),parseFloat($[3]));S[$[0]].push(ne)}else if("vt"===$[0])ne=[parseFloat($[1]),1-parseFloat($[2])],S[$[0]].push(ne);else if("f"===$[0])for(var Y=3;Y<$.length;++Y){for(var we=[],Se=[1,Y-1,Y],oe=0;oe<Se.length;++oe){for(var ge,re=$[Se[oe]],Q=re.split("/"),fe=0;fe<Q.length;fe++)Q[fe]=parseInt(Q[fe])-1;k[re]||(k[re]={}),void 0===k[re][q]?(ge=m.vertices.length,m.vertices.push(S.v[Q[0]].copy()),m.uvs.push(S.vt[Q[1]]?S.vt[Q[1]].slice():[0,0]),m.vertexNormals.push(S.vn[Q[2]]?S.vn[Q[2]].copy():new C.default.Vector),k[re][q]=ge,we.push(ge),q&&E[q]&&E[q].diffuseColor&&J.add(S.v[Q[0]])):we.push(k[re][q])}if(we[0]!==we[1]&&we[0]!==we[2]&&we[1]!==we[2])if(m.faces.push(we),q&&E[q]&&E[q].diffuseColor){G=G=!0;for(var Ce=E[q].diffuseColor,it=0;it<we.length;it++)m.vertexColors.push(Ce[0]),m.vertexColors.push(Ce[1]),m.vertexColors.push(Ce[2])}else V=!0}}if(0===m.vertexNormals.length&&m.computeNormals(),G===V)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function f(m,g){if(function(Xt){for(var ft=new DataView(Xt),jt=[115,111,108,105,100],Lt=0;Lt<5;Lt++)if(function(Bt,Et,Kt){for(var yn=0,Yn=Bt.length;yn<Yn;yn++)if(Bt[yn]!==Et.getUint8(Kt+yn,!1))return;return 1}(jt,ft,Lt))return;return 1}(g)){for(var x,E,S,k,q,J,G,V=m,K=new DataView(g),$=K.getUint32(80,!0),ne=!1,Y=0;Y<70;Y++)1129270351===K.getUint32(Y,!1)&&82===K.getUint8(Y+4)&&61===K.getUint8(Y+5)&&(ne=!0,k=[],q=K.getUint8(Y+6)/255,J=K.getUint8(Y+7)/255,G=K.getUint8(Y+8)/255);for(var we=0;we<$;we++){for(var Se,oe=84+50*we,ge=K.getFloat32(oe,!0),re=K.getFloat32(4+oe,!0),Q=K.getFloat32(8+oe,!0),fe=(ne&&(S=32768&(Se=K.getUint16(48+oe,!0))?(x=q,E=J,G):(x=(31&Se)/31,E=(Se>>5&31)/31,(Se>>10&31)/31)),new C.default.Vector(ge,re,Q)),Ce=1;Ce<=3;Ce++){var it=new C.default.Vector(K.getFloat32(it=oe+12*Ce,!0),K.getFloat32(4+it,!0),K.getFloat32(8+it,!0));V.vertices.push(it),V.vertexNormals.push(fe),ne&&k.push(x,E,S)}V.faces.push([3*we,3*we+1,3*we+2]),V.uvs.push([0,0],[0,0],[0,0])}}else if(g=new DataView(g),"TextDecoder"in window)for(var le,z,ye=m,je=new TextDecoder("utf-8").decode(g).split("\n"),Je="",gt=[],Ct=0;Ct<je.length;++Ct){for(var $t=je[Ct].trim(),yt=$t.split(" "),Ut=0;Ut<yt.length;++Ut)""===yt[Ut]&&yt.splice(Ut,1);if(0!==yt.length)switch(Je){case"":if("solid"!==yt[0])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "solid"'));Je="solid";break;case"solid":if("facet"!==yt[0]||"normal"!==yt[1])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "facet normal"'));le=new C.default.Vector(parseFloat(yt[2]),parseFloat(yt[3]),parseFloat(yt[4])),ye.vertexNormals.push(le,le,le),Je="facet normal";break;case"facet normal":if("outer"!==yt[0]||"loop"!==yt[1])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "outer loop"'));Je="vertex";break;case"vertex":if("vertex"===yt[0])z=new C.default.Vector(parseFloat(yt[1]),parseFloat(yt[2]),parseFloat(yt[3])),ye.vertices.push(z),ye.uvs.push([0,0]),gt.push(ye.vertices.indexOf(z));else{if("endloop"!==yt[0])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "vertex" or "endloop"'));ye.faces.push(gt),gt=[],Je="endloop"}break;case"endloop":if("endfacet"!==yt[0])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "endfacet"'));Je="endfacet";break;case"endfacet":if("endsolid"!==yt[0]){if("facet"!==yt[0]||"normal"!==yt[1])return console.error($t),void console.error('Invalid state "'.concat(yt[0],'", should be "endsolid" or "facet normal"'));le=new C.default.Vector(parseFloat(yt[2]),parseFloat(yt[3]),parseFloat(yt[4])),ye.vertexNormals.push(le,le,le),Je="facet normal"}break;default:console.error('Invalid state "'.concat(Je,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}a("./p5.Geometry"),C.default.prototype.loadModel=function(m,g){C.default._validateParameters("loadModel",arguments);var x,E,ne,S=!1,k=!1,q=!1,J=m.slice(-4),G=(g&&"object"===D(g)?(S=g.normalize||!1,x=g.successCallback,E=g.failureCallback,J=g.fileType||J,k=g.flipU||!1,q=g.flipV||!1):"boolean"==typeof g?(S=g,x=arguments[2],E=arguments[3],void 0!==arguments[4]&&(J=arguments[4])):(x="function"==typeof g?g:void 0,E=arguments[2],void 0!==arguments[3]&&(J=arguments[3])),new C.default.Geometry),V=(G.gid="".concat(m,"|").concat(S),this);function K(){return(K=I(F.mark(function ne(Y){var we,Se,oe,ge;return F.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:for(we=[],Se=0;Se<Y.length;Se++)(oe=Y[Se].match(/^mtllib (.+)/))&&function(){var Q,fe=oe[1],Ce=m.split("/");Q=1<Ce.length?(Ce.pop(),Ce.join("/")+"/"+fe):fe,we.push(function(){return $.apply(this,arguments)}(Q).then(function(it){return it?(le=V,z=Q,new Promise(function(ye,je){var Je=null,gt={};le.loadStrings(z,function(Ct){for(var $t=0;$t<Ct.length;++$t){var Ut=Ct[$t].trim().split(/\s+/);"newmtl"===Ut[0]?gt[Je=Ut[1]]={}:"Kd"===Ut[0]?gt[Je].diffuseColor=[parseFloat(Ut[1]),parseFloat(Ut[2]),parseFloat(Ut[3])]:"Ka"===Ut[0]?gt[Je].ambientColor=[parseFloat(Ut[1]),parseFloat(Ut[2]),parseFloat(Ut[3])]:"Ks"===Ut[0]?gt[Je].specularColor=[parseFloat(Ut[1]),parseFloat(Ut[2]),parseFloat(Ut[3])]:"map_Kd"===Ut[0]&&(gt[Je].texturePath=Ut[1])}ye(gt)},je)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Q)),{});var le,z}).catch(function(it){return console.warn("Error loading MTL file: ".concat(Q),it),{}}))}();return re.prev=2,re.next=5,Promise.all(we);case 5:return ge=re.sent,ge=Object.assign.apply(Object,[{}].concat(b(ge))),re.abrupt("return",ge);case 10:return re.prev=10,re.t0=re.catch(2),re.abrupt("return",{});case 13:case"end":return re.stop()}},ne,null,[[2,10]])}))).apply(this,arguments)}function $(){return($=I(F.mark(function ne(Y){return F.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.prev=0,Se.next=3,fetch(Y,{method:"HEAD"});case 3:return Se.abrupt("return",Se.sent.ok);case 7:return Se.prev=7,Se.t0=Se.catch(0),Se.abrupt("return",!1);case 10:case"end":return Se.stop()}},ne,null,[[0,7]])}))).apply(this,arguments)}return J.match(/\.stl$/i)?this.httpDo(m,"GET","arrayBuffer",function(ne){f(G,ne),S&&G.normalize(),k&&G.flipU(),q&&G.flipV(),V._decrementPreload(),"function"==typeof x&&x(G)},E):J.match(/\.obj$/i)?this.loadStrings(m,(ne=I(F.mark(function Y(we){return F.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,function(){return K.apply(this,arguments)}(we);case 3:d(G,we,oe.sent),oe.next=11;break;case 7:return oe.prev=7,oe.t0=oe.catch(0),E?E(oe.t0):C.default._friendlyError("Error during parsing: "+oe.t0.message),oe.abrupt("return");case 11:return oe.prev=11,S&&G.normalize(),k&&G.flipU(),q&&G.flipV(),G._makeTriangleEdges(),V._decrementPreload(),"function"==typeof x&&x(G),oe.finish(11);case 19:case"end":return oe.stop()}},Y,null,[[0,7,11,19]])})),function(Y){return ne.apply(this,arguments)}),E):(C.default._friendlyFileLoadError(3,m),E?E():C.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),G},C.default.prototype.model=function(m){this._assert3d("model"),C.default._validateParameters("model",arguments),0<m.vertices.length&&(this._renderer.geometryInHash(m.gid)||(m._edgesToVertices(),this._renderer.createBuffers(m.gid,m)),this._renderer.drawBuffers(m.gid))};var h=0,p=(C.default.prototype.createModel=function(m){var g,x,E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ",J=2<arguments.length?arguments[2]:void 0,S=(C.default._validateParameters("createModel",arguments),!1),k=!1,q=!1;if((J&&"object"===D(J)?(S=J.normalize||!1,g=J.successCallback,x=J.failureCallback,k=J.flipU||!1,q=J.flipV||!1):x="boolean"==typeof J?(S=J,g=arguments[3],arguments[4]):(g="function"==typeof arguments[2]?arguments[2]:void 0,arguments[3]),J=new C.default.Geometry).gid="".concat(E,"|").concat(S,"|").concat(h++),E.match(/\.stl$/i))try{f(J,(new TextEncoder).encode(m).buffer)}catch(G){return void(x?x(G):C.default._friendlyError("Error during parsing: "+G.message))}else if(E.match(/\.obj$/i))try{d(J,m.split("\n"))}catch(G){return void(x?x(G):C.default._friendlyError("Error during parsing: "+G.message))}else C.default._friendlyFileLoadError(3,m),x?x():C.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return S&&J.normalize(),k&&J.flipU(),q&&J.flipV(),J._makeTriangleEdges(),"function"==typeof g&&g(J),J},C.default);Z.default=p},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Texture"),b.default.prototype.loadShader=function(d,f,h,p){function m(){x._decrementPreload(),h&&h(g)}b.default._validateParameters("loadShader",arguments),p=p||console.error;var g=new b.default.Shader,x=this,E=!1,S=!1;return this.loadStrings(d,function(k){g._vertSrc=k.join("\n"),S=!0,E&&m()},p),this.loadStrings(f,function(k){g._fragSrc=k.join("\n"),E=!0,S&&m()},p),g},b.default.prototype.createShader=function(d,f,h){return b.default._validateParameters("createShader",arguments),new b.default.Shader(this._renderer,d,f,h)},b.default.prototype.createFilterShader=function(d){b.default._validateParameters("createFilterShader",arguments);var f=d.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return(f=new b.default.Shader(this._renderer,f,d)).ensureCompiledOnContext(this._renderer.GL?this:this._renderer.getFilterGraphicsLayer()),f},b.default.prototype.shader=function(d){return this._assert3d("shader"),b.default._validateParameters("shader",arguments),d.ensureCompiledOnContext(this),d.isStrokeShader()?this._renderer.userStrokeShader=d:(this._renderer.userFillShader=d,this._renderer._useNormalMaterial=!1),d.setDefaultUniforms(),this},b.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},b.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},b.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},b.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},b.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},b.default.prototype.texture=function(d){return this._assert3d("texture"),b.default._validateParameters("texture",arguments),d.gifProperties&&d._animateGif(this),this._renderer.drawMode=w.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=d,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.textureMode=function(d){d!==w.IMAGE&&d!==w.NORMAL?console.warn("You tried to set ".concat(d," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=d},b.default.prototype.textureWrap=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,h=(this._renderer.textureWrapX=d,this._renderer.textureWrapY=f,!0),p=!1,m=void 0;try{for(var g,x=this._renderer.textures.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)g.value.setWrapMode(d,f)}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}},b.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return b.default._validateParameters("normalMaterial",f),this._renderer.drawMode=w.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},b.default.prototype.ambientMaterial=function(d,f,h){this._assert3d("ambientMaterial"),b.default._validateParameters("ambientMaterial",arguments);var p=b.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=p._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.emissiveMaterial=function(d,f,h,p){this._assert3d("emissiveMaterial"),b.default._validateParameters("emissiveMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.specularMaterial=function(d,f,h,p){this._assert3d("specularMaterial"),b.default._validateParameters("specularMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.shininess=function(d){return this._assert3d("shininess"),b.default._validateParameters("shininess",arguments),this._renderer._useShininess=d=d<1?1:d,this},b.default.prototype.metalness=function(d){return this._assert3d("metalness"),d=1-Math.exp(-d/100),this._renderer._useMetalness=d,this},b.default.RendererGL.prototype._applyColorBlend=function(d,m){var h=this.GL;return(m=m||this.userFillShader||this.userStrokeShader||this.userPointShader||this.drawMode===w.TEXTURE||this.curBlendMode!==w.BLEND||d[d.length-1]<1||this._isErasing)!==this._isBlending&&(m||this.curBlendMode!==w.BLEND&&this.curBlendMode!==w.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=m),this._applyBlendMode(),d},b.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var d=this.GL;switch(this.curBlendMode){case w.BLEND:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.ADD:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE);break;case w.REMOVE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ZERO,d.ONE_MINUS_SRC_ALPHA);break;case w.MULTIPLY:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA);break;case w.SCREEN:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_COLOR);break;case w.EXCLUSION:d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE_MINUS_DST_COLOR,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE);break;case w.REPLACE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO);break;case w.SUBTRACT:d.blendEquationSeparate(d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.DARKEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case w.LIGHTEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(a,be,Z){"use strict";a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.string.sub"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.prototype.camera=function(){var b;this._assert3d("camera");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("camera",I),(b=this._renderer._curCamera).camera.apply(b,I),this},M.default.prototype.perspective=function(){var b;this._assert3d("perspective");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("perspective",I),(b=this._renderer._curCamera).perspective.apply(b,I),this},M.default.prototype.linePerspective=function(b){if(M.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof M.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===b)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=b},M.default.prototype.ortho=function(){var b;this._assert3d("ortho");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("ortho",I),(b=this._renderer._curCamera).ortho.apply(b,I),this},M.default.prototype.frustum=function(){var b;this._assert3d("frustum");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("frustum",I),(b=this._renderer._curCamera).frustum.apply(b,I),this},M.default.prototype.createCamera=function(){this._assert3d("createCamera");var b=new M.default.Camera(this._renderer);return b._computeCameraDefaultSettings(),b._setDefaultCamera(),this._renderer._curCamera=b},M.default.Camera=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._renderer=d,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new M.default.Matrix,this.projMatrix=new M.default.Matrix,this.yScale=1}var w,I;return w=b,(I=[{key:"perspective",value:function(m,f,h,p){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===m?m=this.defaultCameraFOV:this._renderer._pInst._toRadians(m),void 0===f&&(f=this.defaultAspectRatio),void 0===h&&(h=this.defaultCameraNear),void 0===p&&(p=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=h,this.cameraFar=p,this.projMatrix=M.default.Matrix.identity(),m=1/Math.tan(this.cameraFOV/2);var g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/f,0,0,0,0,-m*this.yScale,0,0,0,0,(p+h)*g,-1,0,0,2*p*h*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(G,J,h,p,m,g){var V=this.fbo||this._renderer,x=(void 0===G&&(G=-V.width/2),void 0===J&&(J=+V.width/2),void 0===h&&(h=-V.height/2),void 0===p&&(p=+V.height/2),void 0===m&&(m=0),void 0===g&&(g=Math.max(V.width,V.height)+800),this.cameraNear=m,V=J-G,p-h),E=(this.cameraFar=g)-m,S=2/V,k=2/x*this.yScale,q=-2/E;J=-(J+G)/V,G=-(p+h)/x,V=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,0,0,q,0,J,G,V,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(G,J,h,p,m,g){void 0===G&&(G=.05*-this._renderer.width),void 0===J&&(J=.05*+this._renderer.width),void 0===h&&(h=.05*+this._renderer.height),void 0===p&&(p=.05*-this._renderer.height),void 0===m&&(m=this.defaultCameraNear),void 0===g&&(g=this.defaultCameraFar),this.cameraNear=m;var V=J-G,x=p-h,E=(this.cameraFar=g)-m,S=2*m/V,k=2*m/x*this.yScale,q=-2*g*m/E;J=(J+G)/V,G=(p+h)/x,V=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,J,G,V,-1,0,0,q,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,f,h,p){var m=this.centerX,g=this.centerY,x=this.centerZ,E=(m-=this.eyeX,g-=this.eyeY,x-=this.eyeZ,M.default.Matrix.identity(this._renderer._pInst));(E.rotate(this._renderer._pInst._toRadians(S),f,h,p),S=[m*E.mat4[0]+g*E.mat4[4]+x*E.mat4[8],m*E.mat4[1]+g*E.mat4[5]+x*E.mat4[9],m*E.mat4[2]+g*E.mat4[6]+x*E.mat4[10]])[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(h){var f=this._getLocalAxes();h=M.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(h),f.z[0],f.z[1],f.z[2]).rotateVector(new M.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"pan",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(d,f,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,d,f,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(d,f,h,p,m,g,x,E,S){return void 0===d&&(h=this.defaultEyeZ,p=d=this.defaultEyeX,m=f=this.defaultEyeY,E=1,S=x=g=0),this.eyeX=d,this.eyeY=f,this.eyeZ=h,void 0!==p&&(this.centerX=p,this.centerY=m,this.centerZ=g),void 0!==x&&(this.upX=x,this.upY=E,this.upZ=S),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),this.cameraMatrix.translate([m=-d,-f,-h]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(p,m,h){var g=this._getLocalAxes();this.camera(this.eyeX+(p=[g.x[0]*p,g.x[1]*p,g.x[2]*p])[0]+(m=[g.y[0]*m,g.y[1]*m,g.y[2]*m])[0]+(g=[g.z[0]*h,g.z[1]*h,g.z[2]*h])[0],this.eyeY+p[1]+m[1]+g[1],this.eyeZ+p[2]+m[2]+g[2],this.centerX+p[0]+m[0]+g[0],this.centerY+p[1]+m[1]+g[1],this.centerZ+p[2]+m[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(d,f,h){this.camera(d,f,h,this.centerX+(d-this.eyeX),this.centerY+(f-this.eyeY),this.centerZ+(h-this.eyeZ),this.upX,this.upY,this.upZ)}},{key:"set",value:function(d){for(var f=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];f<h.length;f++){var p=h[f];this[p]=d[p]}this.cameraMatrix=d.cameraMatrix.copy(),this.projMatrix=d.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(d,f,h){var p,m,g,x,E,S,k,q,J,G,V,K,$,ne,Y,we,Se,oe;0===h?this.set(d):1===h?this.set(f):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=d.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/d.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=d.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/d.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new M.default.Vector(d.eyeX,d.eyeY,d.eyeZ),E=new M.default.Vector(f.eyeX,f.eyeY,f.eyeZ),we=new M.default.Vector(d.centerX,d.centerY,d.centerZ),oe=new M.default.Vector(f.centerX,f.centerY,f.centerZ),g=M.default.Vector.dist(x,we),p=M.default.Vector.dist(E,oe),p=g*Math.pow(p/g,h),g=M.default.Vector.sub(x,E),m=1,1e-6<(Se=(ne=x.copy().sub(E).sub(we).add(oe)).magSq())&&(m=M.default.Vector.dot(g,ne)/Se,m=Math.max(0,Math.min(m,1))),g=M.default.Vector.lerp(M.default.Vector.lerp(x,we,m),M.default.Vector.lerp(E,oe,m),h),ne=d.cameraMatrix.createSubMatrix3x3(),Se=f.cameraMatrix.createSubMatrix3x3(),x=ne.row(2),we=Se.row(2),E=ne.row(1),oe=Se.row(1),d=new M.default.Vector,f=new M.default.Vector,S=new M.default.Vector,k=new M.default.Vector,1-(q=.5*((ne=(Se=Se.mult3x3(ne.copy().transpose3x3())).diagonal())[0]+ne[1]+ne[2]-1))<1e-7?(d.set(M.default.Vector.lerp(x,we,h)).normalize(),S.set(d).mult(m*p).add(g),k.set(d).mult((m-1)*p).add(g),f.set(M.default.Vector.lerp(E,oe,h)).normalize()):(we=1/(1-q),oe=Math.max(ne[0],ne[1],ne[2]),K=Se.mat3[1]+Se.mat3[3],$=Se.mat3[2]+Se.mat3[6],Y=Se.mat3[5]+Se.mat3[7],oe=oe===ne[0]?(G=.5*K*(we/=J=Math.sqrt((ne[0]-q)*we)),V=.5*$*we,.5*(Se.mat3[7]-Se.mat3[5])/J):oe===ne[1]?(V=.5*Y*(we/=G=Math.sqrt((ne[1]-q)*we)),J=.5*K*we,.5*(Se.mat3[2]-Se.mat3[6])/G):(J=.5*$*(we/=V=Math.sqrt((ne[2]-q)*we)),G=.5*Y*we,.5*(Se.mat3[3]-Se.mat3[1])/V),K=h*Math.atan2(oe,q),$=Math.cos(K),ne=Math.sin(K),(oe=new M.default.Matrix("mat3",[$+(Y=1-$)*J*J,Y*(we=J*G)+ne*V,Y*(Se=V*J)-ne*G,Y*we-ne*V,$+Y*G*G,Y*(h=G*V)+ne*J,Y*Se+ne*G,Y*h-ne*J,$+Y*V*V])).multiplyVec3(x,d),S.set(d).mult(m*p).add(g),k.set(d).mult((m-1)*p).add(g),oe.multiplyVec3(E,f)),this.camera(S.x,S.y,S.z,k.x,k.y,k.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var d=new M.default.Camera(this._renderer);return d.cameraFOV=this.cameraFOV,d.aspectRatio=this.aspectRatio,d.eyeX=this.eyeX,d.eyeY=this.eyeY,d.eyeZ=this.eyeZ,d.centerX=this.centerX,d.centerY=this.centerY,d.centerZ=this.centerZ,d.upX=this.upX,d.upY=this.upY,d.upZ=this.upZ,d.cameraNear=this.cameraNear,d.cameraFar=this.cameraFar,d.cameraType=this.cameraType,d.useLinePerspective=this.useLinePerspective,d.cameraMatrix=this.cameraMatrix.copy(),d.projMatrix=this.projMatrix.copy(),d.yScale=this.yScale,d}},{key:"_getLocalAxes",value:function(){var k,d=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,x=(0!==(x=Math.sqrt(d*d+f*f+h*h))&&(d/=x,f/=x,h/=x),this.upX),p=(E=this.upY)*h-(S=this.upZ)*f,m=-x*h+S*d,g=x*f-E*d,E=(x=f*g-h*m,-d*g+h*p),S=d*m-f*p;return 0!==(0!==(k=Math.sqrt(p*p+m*m+g*g))&&(p/=k,m/=k,g/=k),k=Math.sqrt(x*x+E*E+S*S))&&(x/=k,E/=k,S/=k),{x:[p,m,g],y:[x,E,S],z:[d,f,h]}}},{key:"_orbit",value:function(d,k,S){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(x,g));(p=(p*=Math.pow(10,S))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.acos(Math.max(-1,Math.min(1,M.default.Vector.dot(m,g))))+k,k=d,(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),E.mult(Math.cos(k)*Math.sin(S)),x.mult(Math.sin(k)*Math.sin(S)),m.set(g).add(E).add(x),this.eyeX=p*m.x+this.centerX,this.eyeY=p*m.y+this.centerY,this.eyeZ=p*m.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,k,J){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(m,x)),G=Math.atan2(k,S),q=(E.mult(Math.sin(G)),x.mult(Math.cos(G)).add(E),G=Math.sqrt(S*S+k*k),E=M.default.Vector.cross(m,x),(p=(p*=Math.pow(10,J))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.cos(G),k=Math.sin(G),(J=g.dot(m))*S+(G=g.dot(x))*k);J=-J*k+G*S,G=g.dot(E),g.x=q*m.x+J*x.x+G*E.x,g.y=q*m.y+J*x.y+G*E.y,g.z=q*m.z+J*x.z+G*E.z,x.mult(-k),m.mult(S).add(x).mult(p),this.camera(m.x+this.centerX,m.y+this.centerY,m.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&C(w.prototype,I),b}(),M.default.prototype.setCamera=function(b){this._renderer._curCamera=b,this._renderer.uPMatrix.set(b.projMatrix),this._renderer.uViewMatrix.set(b.cameraMatrix)},Z.default=a=M.default.Camera},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(a,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.log2"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.log2"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.DataArray=function(){function C(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(D),this.initialLength=D}var b,w;return b=C,(w=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var D;this.length<this.data.length/2&&(D=1<<Math.ceil(Math.log2(this.length)),(D=new Float32Array(D)).set(this.data.subarray(0,this.length),0),this.data=D)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var D=arguments.length,d=new Array(D),f=0;f<D;f++)d[f]=arguments[f];this.ensureLength(this.length+d.length),this.data.set(d,this.length),this.length+=d.length}},{key:"slice",value:function(D,d){return this.data.slice(D,Math.min(d,this.length))}},{key:"subArray",value:function(D,d){return this.data.subarray(D,Math.min(d,this.length))}},{key:"ensureLength",value:function(D){for(;this.data.length<D;){var d=new Float32Array(2*this.data.length);d.set(this.data,0),this.data=d}}}])&&M(b.prototype,w),C}(),Z.default=a=a.default.DataArray},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(V,be,Z){"use strict";function M(K){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(K)}function C(K){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function($){return M($)}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":M($)})(K)}V("core-js/modules/es.symbol"),V("core-js/modules/es.symbol.description"),V("core-js/modules/es.symbol.iterator"),V("core-js/modules/es.array.fill"),V("core-js/modules/es.array.includes"),V("core-js/modules/es.array.iterator"),V("core-js/modules/es.object.get-own-property-descriptor"),V("core-js/modules/es.object.get-prototype-of"),V("core-js/modules/es.object.to-string"),V("core-js/modules/es.reflect.construct"),V("core-js/modules/es.reflect.get"),V("core-js/modules/es.regexp.to-string"),V("core-js/modules/es.string.includes"),V("core-js/modules/es.string.iterator"),V("core-js/modules/es.typed-array.float32-array"),V("core-js/modules/es.typed-array.uint8-array"),V("core-js/modules/es.typed-array.uint8-clamped-array"),V("core-js/modules/es.typed-array.copy-within"),V("core-js/modules/es.typed-array.every"),V("core-js/modules/es.typed-array.fill"),V("core-js/modules/es.typed-array.filter"),V("core-js/modules/es.typed-array.find"),V("core-js/modules/es.typed-array.find-index"),V("core-js/modules/es.typed-array.for-each"),V("core-js/modules/es.typed-array.includes"),V("core-js/modules/es.typed-array.index-of"),V("core-js/modules/es.typed-array.iterator"),V("core-js/modules/es.typed-array.join"),V("core-js/modules/es.typed-array.last-index-of"),V("core-js/modules/es.typed-array.map"),V("core-js/modules/es.typed-array.reduce"),V("core-js/modules/es.typed-array.reduce-right"),V("core-js/modules/es.typed-array.reverse"),V("core-js/modules/es.typed-array.set"),V("core-js/modules/es.typed-array.slice"),V("core-js/modules/es.typed-array.some"),V("core-js/modules/es.typed-array.sort"),V("core-js/modules/es.typed-array.subarray"),V("core-js/modules/es.typed-array.to-locale-string"),V("core-js/modules/es.typed-array.to-string"),V("core-js/modules/es.weak-map"),V("core-js/modules/web.dom-collections.iterator"),V("core-js/modules/es.array.fill"),V("core-js/modules/es.array.includes"),V("core-js/modules/es.array.iterator"),V("core-js/modules/es.object.get-prototype-of"),V("core-js/modules/es.object.to-string"),V("core-js/modules/es.string.includes"),V("core-js/modules/es.typed-array.float32-array"),V("core-js/modules/es.typed-array.uint8-array"),V("core-js/modules/es.typed-array.uint8-clamped-array"),V("core-js/modules/es.typed-array.copy-within"),V("core-js/modules/es.typed-array.every"),V("core-js/modules/es.typed-array.fill"),V("core-js/modules/es.typed-array.filter"),V("core-js/modules/es.typed-array.find"),V("core-js/modules/es.typed-array.find-index"),V("core-js/modules/es.typed-array.for-each"),V("core-js/modules/es.typed-array.includes"),V("core-js/modules/es.typed-array.index-of"),V("core-js/modules/es.typed-array.iterator"),V("core-js/modules/es.typed-array.join"),V("core-js/modules/es.typed-array.last-index-of"),V("core-js/modules/es.typed-array.map"),V("core-js/modules/es.typed-array.reduce"),V("core-js/modules/es.typed-array.reduce-right"),V("core-js/modules/es.typed-array.reverse"),V("core-js/modules/es.typed-array.set"),V("core-js/modules/es.typed-array.slice"),V("core-js/modules/es.typed-array.some"),V("core-js/modules/es.typed-array.sort"),V("core-js/modules/es.typed-array.subarray"),V("core-js/modules/es.typed-array.to-locale-string"),V("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(G=V("../core/main"))&&G.__esModule?G:{default:G},w=function(K){if(K&&K.__esModule)return K;if(null===K||"object"!==C(K)&&"function"!=typeof K)return{default:K};var $=d();if($&&$.has(K))return $.get(K);var ne,Y={},we=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ne in K){var Se;Object.prototype.hasOwnProperty.call(K,ne)&&((Se=we?Object.getOwnPropertyDescriptor(K,ne):null)&&(Se.get||Se.set)?Object.defineProperty(Y,ne,Se):Y[ne]=K[ne])}return Y.default=K,$&&$.set(K,Y),Y}(V("../core/constants")),I=V("./p5.Texture"),D=V("./p5.RendererGL");function d(){var K;return"function"!=typeof WeakMap?null:(d=function(){return K},K=new WeakMap)}function f(K,$){return function(ne){if(Array.isArray(ne))return ne}(K)||function(ne,Y){if(Symbol.iterator in Object(ne)||"[object Arguments]"===Object.prototype.toString.call(ne)){var we=[],Se=!0,oe=!1,ge=void 0;try{for(var re,Q=ne[Symbol.iterator]();!(Se=(re=Q.next()).done)&&(we.push(re.value),!Y||we.length!==Y);Se=!0);}catch(fe){oe=!0,ge=fe}finally{try{Se||null==Q.return||Q.return()}finally{if(oe)throw ge}}return we}}(K,$)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(K,$,ne){return $ in K?Object.defineProperty(K,$,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[$]=ne,K}function p(K,$){if(!(K instanceof $))throw new TypeError("Cannot call a class as a function")}function m(K,$){for(var ne=0;ne<$.length;ne++){var Y=$[ne];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(K,Y.key,Y)}}function g(K,$,ne){$&&m(K.prototype,$),ne&&m(K,ne)}function x(K,$,ne){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(oe,we,Se){if(oe=function(ge,re){for(;!Object.prototype.hasOwnProperty.call(ge,re)&&null!==(ge=k(ge)););return ge}(oe,we))return(oe=Object.getOwnPropertyDescriptor(oe,we)).get?oe.get.call(Se):oe.value})(K,$,ne||K)}function E(K,$){return(E=Object.setPrototypeOf||function(ne,Y){return ne.__proto__=Y,ne})(K,$)}function k(K){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)})(K)}var q=function(K){var $=Y;if("function"!=typeof K&&null!==K)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(K&&K.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),K&&E($,K);var ne=function S(K){return function(){var $,ne=k(K);if($=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?($=k(this).constructor,Reflect.construct(ne,arguments,$)):ne.apply(this,arguments),ne=this,!$||"object"!==C($)&&"function"!=typeof $){if(void 0!==ne)return ne;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return $}}(Y);function Y(we){var Se;return p(this,Y),(Se=ne.call(this,we.target._renderer)).fbo=we,Se.yScale=-1,Se}return g(Y,[{key:"_computeCameraDefaultSettings",value:function(){x(k(Y.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),Y}(b.default.Camera),J=(b.default.FramebufferCamera=q,function(){function K($,ne){p(this,K),this.framebuffer=$,this.property=ne}return g(K,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),K}()),G=(b.default.FramebufferTexture=J,function(){function K($){var ne=this,Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},we=(p(this,K),this.target=$,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=Y.format||w.UNSIGNED_BYTE,this.channels=Y.channels||($._renderer._pInst._glAttributes.alpha?w.RGBA:w.RGB),this.useDepth=void 0===Y.depth||Y.depth,this.depthFormat=Y.depthFormat||w.FLOAT,this.textureFiltering=Y.textureFiltering||w.LINEAR,this.antialiasSamples=void 0===Y.antialias?$._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof Y.antialias?Y.antialias:Y.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&$.webglVersion!==w.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=Y.density||$.pixelDensity(),$._renderer.GL);if(this.gl=we,Y.width&&Y.height?(Se=$._renderer._adjustDimensions(Y.width,Y.height),this.width=Se.adjustedWidth,this.height=Se.adjustedHeight,this._autoSized=!1):(void 0===Y.width!=(void 0===Y.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=$.width,this.height=$.height,this._autoSized=!0),this._checkIfFormatsAvailable(),Y.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===Y.stencil||Y.stencil),this.framebuffer=we.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=we.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var Se=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=Se,this.draw(function(){return ne.target.clear()})}return g(K,[{key:"resize",value:function($,ne){this._autoSized=!1;var Y=this.target._renderer._adjustDimensions($,ne);ne=Y.adjustedHeight,this.width=$=Y.adjustedWidth,this.height=ne,this._handleResize()}},{key:"pixelDensity",value:function($){if(!$)return this.density;this._autoSized=!1,this.density=$,this._handleResize()}},{key:"autoSized",value:function($){if(void 0===$)return this._autoSized;this._autoSized=$,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var $=this.gl;(this.useDepth&&this.target.webglVersion===w.WEBGL&&!$.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===w.WEBGL&&this.depthFormat===w.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),[w.UNSIGNED_BYTE,w.FLOAT,w.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&![w.UNSIGNED_INT,w.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=w.FLOAT),$=(0,I.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==w.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&!$.float&&this.depthFormat===w.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),$.halfFloat||this.format!==w.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.channels===w.RGB&&[w.FLOAT,w.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=w.RGBA)}},{key:"_recreateTextures",value:function(){var $=this.gl,ne=(this._updateSize(),$.getParameter($.TEXTURE_BINDING_2D)),Y=$.getParameter($.FRAMEBUFFER_BINDING);if(!(we=$.createTexture()))throw new Error("Unable to create color texture");$.bindTexture($.TEXTURE_2D,we);var Se=this._glColorFormat();if($.texImage2D($.TEXTURE_2D,0,Se.internalFormat,this.width*this.density,this.height*this.density,0,Se.format,Se.type,null),this.colorTexture=we,$.bindFramebuffer($.FRAMEBUFFER,this.framebuffer),$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,we,0),this.useDepth){var we;if(!(we=$.createTexture()))throw new Error("Unable to create depth texture");var oe=this._glDepthFormat();$.bindTexture($.TEXTURE_2D,we),$.texImage2D($.TEXTURE_2D,0,oe.internalFormat,this.width*this.density,this.height*this.density,0,oe.format,oe.type,null),$.framebufferTexture2D($.FRAMEBUFFER,this.useStencil?$.DEPTH_STENCIL_ATTACHMENT:$.DEPTH_ATTACHMENT,$.TEXTURE_2D,we,0),this.depthTexture=we}this.antialias&&(this.colorRenderbuffer=$.createRenderbuffer(),$.bindRenderbuffer($.RENDERBUFFER,this.colorRenderbuffer),$.renderbufferStorageMultisample($.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,$.getParameter($.MAX_SAMPLES))),Se.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(oe=this._glDepthFormat(),this.depthRenderbuffer=$.createRenderbuffer(),$.bindRenderbuffer($.RENDERBUFFER,this.depthRenderbuffer),$.renderbufferStorageMultisample($.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,$.getParameter($.MAX_SAMPLES))),oe.internalFormat,this.width*this.density,this.height*this.density)),$.bindFramebuffer($.FRAMEBUFFER,this.aaFramebuffer),$.framebufferRenderbuffer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&$.framebufferRenderbuffer($.FRAMEBUFFER,this.useStencil?$.DEPTH_STENCIL_ATTACHMENT:$.DEPTH_ATTACHMENT,$.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new J(this,"depthTexture"),this.depthP5Texture=new b.default.Texture(this.target._renderer,this.depth,{minFilter:we=$.NEAREST,magFilter:we}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new J(this,"colorTexture"),this.colorP5Texture=new b.default.Texture(this.target._renderer,this.color,{minFilter:Se=this.textureFiltering===w.LINEAR?$.LINEAR:$.NEAREST,magFilter:Se}),this.target._renderer.textures.set(this.color,this.colorP5Texture),$.bindTexture($.TEXTURE_2D,ne),$.bindFramebuffer($.FRAMEBUFFER,Y)}},{key:"_glColorFormat",value:function(){var $,ne,Y=this.gl,we=this.format===w.FLOAT?Y.FLOAT:this.format===w.HALF_FLOAT?this.target.webglVersion===w.WEBGL2?Y.HALF_FLOAT:Y.getExtension("OES_texture_half_float").HALF_FLOAT_OES:Y.UNSIGNED_BYTE,Se=this.channels===w.RGBA?Y.RGBA:Y.RGB;return{internalFormat:this.target.webglVersion===w.WEBGL2?(h(ne={},Y.FLOAT,h({},Y.RGBA,Y.RGBA32F)),h(ne,Y.HALF_FLOAT,h({},Y.RGBA,Y.RGBA16F)),h(ne,Y.UNSIGNED_BYTE,(h($={},Y.RGBA,Y.RGBA8),h($,Y.RGB,Y.RGB8),$)),ne[we][Se]):this.format===w.HALF_FLOAT?Y.RGBA:Se,format:Se,type:we}}},{key:"_glDepthFormat",value:function(){var Y=this.gl,$=this.useStencil?this.depthFormat===w.FLOAT?Y.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===w.WEBGL2?Y.UNSIGNED_INT_24_8:Y.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===w.FLOAT?Y.FLOAT:Y.UNSIGNED_INT,ne=this.useStencil?Y.DEPTH_STENCIL:Y.DEPTH_COMPONENT;return{internalFormat:Y=this.useStencil?this.depthFormat===w.FLOAT?Y.DEPTH32F_STENCIL8:this.target.webglVersion===w.WEBGL2?Y.DEPTH24_STENCIL8:Y.DEPTH_STENCIL:this.target.webglVersion===w.WEBGL2?this.depthFormat===w.FLOAT?Y.DEPTH_COMPONENT32F:Y.DEPTH_COMPONENT24:Y.DEPTH_COMPONENT,format:ne,type:$}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var $=this.depth,ne=this.colorRenderbuffer,Y=this.depthRenderbuffer,we=(this._deleteTexture(we=this.color),$&&this._deleteTexture($),this.gl);ne&&we.deleteRenderbuffer(ne),Y&&we.deleteRenderbuffer(Y),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var $=new q(this);return $._computeCameraDefaultSettings(),$._setDefaultCamera(),this.target._renderer._curCamera=$}},{key:"_deleteTexture",value:function($){this.gl.deleteTexture($.rawTexture()),this.target._renderer.textures.delete($)}},{key:"remove",value:function(){var $=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),$.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&$.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&$.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&$.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var $=this.gl;$.bindFramebuffer($.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var $=this.gl,ne=($.bindFramebuffer($.READ_FRAMEBUFFER,this.aaFramebuffer),$.bindFramebuffer($.DRAW_FRAMEBUFFER,this.framebuffer),[[$.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&ne.push([$.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var Y=0,we=ne;Y<we.length;Y++){var oe=f(we[Y],2);$.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,oe[0],oe=oe[1])}}}},{key:"end",value:function(){var $=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():($.bindFramebuffer($.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function($){this.begin(),$(),this.end()}},{key:"loadPixels",value:function(){var $=this.gl,ne=this.target._renderer.activeFramebuffer(),Y=($.bindFramebuffer($.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,D.readPixelsWebGL)(this.pixels,$,this.framebuffer,0,0,this.width*this.density,this.height*this.density,Y.format,Y.type),$.bindFramebuffer($.FRAMEBUFFER,ne?ne._framebufferToBind():null)}},{key:"get",value:function($,ne,Y,we){b.default._validateParameters("p5.Framebuffer.get",arguments);var Se=this._glColorFormat();if(void 0===$&&void 0===ne)ne=$=0,Y=this.width,we=this.height;else if(void 0===Y&&void 0===we)return($<0||ne<0||$>=this.width||ne>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),$=this.target.constrain($,0,this.width-1),ne=this.target.constrain(ne,0,this.height-1)),(0,D.readPixelWebGL)(this.gl,this.framebuffer,$*this.density,ne*this.density,Se.format,Se.type);$=this.target.constrain($,0,this.width-1),ne=this.target.constrain(ne,0,this.height-1),Y=this.target.constrain(Y,1,this.width-$),we=this.target.constrain(we,1,this.height-ne);for(var oe=(0,D.readPixelsWebGL)(void 0,this.gl,this.framebuffer,$*this.density,ne*this.density,Y*this.density,we*this.density,Se.format,Se.type),ge=new Uint8ClampedArray(Y*we*this.density*this.density*4),re=(ge.fill(255),Se.type===this.gl.RGB?3:4),Q=0;Q<we*this.density;Q++)for(var fe=0;fe<Y*this.density;fe++)for(var Ce=0;Ce<4;Ce++){var le=4*(Q*Y*this.density+fe)+Ce;Ce<re&&(ge[le]=oe[4==re?le:(Q*Y*this.density+fe)*re+Ce])}return($=new b.default.Image(Y*this.density,we*this.density)).imageData=$.canvas.getContext("2d").createImageData($.width,$.height),$.imageData.data.set(ge),$.pixels=$.imageData.data,$.updatePixels(),1!==this.density&&$.resize(Y,we),$}},{key:"updatePixels",value:function(){var $=this.gl,ne=(this.colorP5Texture.bindTexture(),this._glColorFormat()),Y=this.width*this.height*this.density*this.density*(Y=ne.format===$.RGBA?4:3),we=ne.type===$.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof we)||this.pixels.length!==Y)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");$.texImage2D($.TEXTURE_2D,0,ne.internalFormat,this.width*this.density,this.height*this.density,0,ne.format,ne.type,this.pixels),this.colorP5Texture.unbindTexture(),we=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&($.clearDepth(1),$.clear($.DEPTH_BUFFER_BIT)),this.end()):($.bindFramebuffer($.FRAMEBUFFER,this.framebuffer),this.useDepth&&($.clearDepth(1),$.clear($.DEPTH_BUFFER_BIT)),$.bindFramebuffer($.FRAMEBUFFER,we?we._framebufferToBind():null))}}]),K}());V=b.default.Framebuffer=G,Z.default=V},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(a,be,Z){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function C(p){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(p)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.flat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.unscopables.flat"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.entries"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.flat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.unscopables.flat"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(h=a("../core/main"))&&h.__esModule?h:{default:h},w=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==C(p)&&"function"!=typeof p)return{default:p};var m=I();if(m&&m.has(p))return m.get(p);var g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in p){var S;Object.prototype.hasOwnProperty.call(p,g)&&((S=E?Object.getOwnPropertyDescriptor(p,g):null)&&(S.get||S.set)?Object.defineProperty(x,g,S):x[g]=p[g])}return x.default=p,m&&m.set(p,x),x}(a("../core/constants"));function I(){var p;return"function"!=typeof WeakMap?null:(I=function(){return p},p=new WeakMap)}function D(p){return function(m){if(Array.isArray(m)){for(var g=0,x=new Array(m.length);g<m.length;g++)x[g]=m[g];return x}}(p)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(p,m){return function(g){if(Array.isArray(g))return g}(p)||function(g,x){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g)){var E=[],S=!0,k=!1,q=void 0;try{for(var J,G=g[Symbol.iterator]();!(S=(J=G.next()).done)&&(E.push(J.value),!x||E.length!==x);S=!0);}catch(V){k=!0,q=V}finally{try{S||null==G.return||G.return()}finally{if(k)throw q}}return E}}(p,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(p,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,x.key,x)}}b.default.Geometry=function(){function p(E,S,k){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new b.default.DataArray,this.lineTangentsIn=new b.default.DataArray,this.lineTangentsOut=new b.default.DataArray,this.lineSides=new b.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new b.default.DataArray,this.detailX=void 0!==E?E:1,this.detailY=void 0!==S?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,k instanceof Function&&k.call(this)}var m,g;return m=p,(g=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var E=new b.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new b.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),k=0;k<this.vertices.length;k++){var q=this.vertices[k];E.x=Math.min(E.x,q.x),E.y=Math.min(E.y,q.y),E.z=Math.min(E.z,q.z),S.x=Math.max(S.x,q.x),S.y=Math.max(S.y,q.y),S.z=Math.max(S.z,q.z)}var J=new b.default.Vector(S.x-E.x,S.y-E.y,S.z-E.z),G=new b.default.Vector((E.x+S.x)/2,(E.y+S.y)/2,(E.z+S.z)/2);this.boundingBoxCache={min:E,max:S,size:J,offset:G}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var E=0;E<this.vertexColors.length;E+=4)if(this.vertexColors[E+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var E=0;E<this.lineVertexColors.length;E+=4)if(this.lineVertexColors[E+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var E=this,S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",k="";if(this.vertices.forEach(function(G){k+="v ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.uvs&&0<this.uvs.length)for(var q=0;q<this.uvs.length;q+=2)k+="vt ".concat(this.uvs[q]," ").concat(this.uvs[q+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(G){k+="vn ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.faces.forEach(function(G){var V="f";G.forEach(function(K){V=V+" "+(K+1),(0<E.vertexNormals.length||0<E.uvs.length)&&(V+="/",0<E.uvs.length&&(V+=K+1),V+="/",0<E.vertexNormals.length&&(V+=K+1))}),k+=V+"\n"});var J=new Blob([k],{type:"text/plain"});b.default.prototype.downloadFile(J,S,"obj")}},{key:"saveStl",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",S=void 0!==(S=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&S,k=E.substring(0,E.lastIndexOf(".")),q=[],J=!0,G=!1,V=void 0;try{for(var K,$=this.faces[Symbol.iterator]();!(J=(K=$.next()).done);J=!0){var ne=K.value,Y=b.default.Vector.sub(this.vertices[ne[1]],this.vertices[ne[0]]),we=b.default.Vector.sub(this.vertices[ne[2]],this.vertices[ne[0]]);q.push(new b.default.Vector(Y.y*we.z-Y.z*we.y,Y.z*we.x-Y.x*we.z,Y.x*we.y-Y.y*we.x).normalize())}}catch(yn){G=!0,V=yn}finally{try{J||null==$.return||$.return()}finally{if(G)throw V}}if(S){var re,Q=80;G=2*this.faces.length+3*this.faces.length*4*4+80+4,V=new ArrayBuffer(G),(re=new DataView(V)).setUint32(Q,this.faces.length,!0),Q+=4;for(var fe=0,Ce=Object.entries(this.faces);fe<Ce.length;fe++){var z=(it=d(Ce[fe],2))[0],it=it[1],le=(re.setFloat32(Q,(z=q[z]).x,!0),re.setFloat32(Q+=4,z.y,!0),re.setFloat32(Q+=4,z.z,!0),Q+=4,!0),ye=void(z=!1);try{for(var je,Je=it[Symbol.iterator]();!(le=(je=Je.next()).done);le=!0){var Ct=this.vertices[je.value];re.setFloat32(Q,Ct.x,!0),re.setFloat32(Q+=4,Ct.y,!0),re.setFloat32(Q+=4,Ct.z,!0),Q+=4}}catch(An){z=!0,ye=An}finally{try{le||null==Je.return||Je.return()}finally{if(z)throw ye}}re.setUint16(Q,0,!0),Q+=2}}else{re="solid "+k+"\n";for(var $t=0,yt=Object.entries(this.faces);$t<yt.length;$t++){var ft=(Ut=d(yt[$t],2))[0],Ut=Ut[1],Xt=(re=re+" facet norm "+(ft=q[ft]).x+" "+ft.y+" "+ft.z+"\n  outer loop\n",!0),jt=void(ft=!1);try{for(var Lt,Bt=Ut[Symbol.iterator]();!(Xt=(Lt=Bt.next()).done);Xt=!0){var Kt=this.vertices[Lt.value];re+="   vertex "+Kt.x+" "+Kt.y+" "+Kt.z+"\n"}}catch(yn){ft=!0,jt=yn}finally{try{Xt||null==Bt.return||Bt.return()}finally{if(ft)throw jt}}re+="  endloop\n endfacet\n"}re+="endsolid "+k+"\n"}S=new Blob([re],{type:"text/plain"}),b.default.prototype.downloadFile(S,E,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?1-E:E})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?E:1-E})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var E,S,k,q=this.detailX+1,J=0;J<this.detailY;J++)for(var G=0;G<this.detailX;G++)S=(J+1)*q+G+1,this.faces.push([J*q+G,E=J*q+G+1,k=(J+1)*q+G]),this.faces.push([k,E,S]);return this}},{key:"_getFaceNormal",value:function(S){var k=this.vertices[(S=this.faces[S])[0]],J=this.vertices[S[1]],q=(S=this.vertices[S[2]],J=b.default.Vector.sub(J,k),S=b.default.Vector.sub(S,k),k=b.default.Vector.cross(J,S),b.default.Vector.mag(k));return 0==(J=q/(b.default.Vector.mag(J)*b.default.Vector.mag(S)))||isNaN(J)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),k):(1<J&&(J=1),k.mult(Math.asin(J)/q))}},{key:"computeNormals",value:function(){var E,S=this,q=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,J=this.vertexNormals,G=this.vertices,V=this.faces;if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:w.FLAT)===w.SMOOTH){for(var K={},$=[],ne=Math.pow(10,void 0===q?3:q),Y=function(re){return Math.round(re*ne)/ne},we=function(re){return"".concat(Y(re.x),",").concat(Y(re.y),",").concat(Y(re.z))},Se=0;Se<G.length;Se++){var oe=G[Se],ge=we(oe);void 0===K[ge]&&(K[ge]=$.length,$.push(oe))}V.forEach(function(re){for(var Q=0;Q<3;++Q){var fe=we(fe=G[fe=re[Q]]);re[Q]=K[fe]}}),this.edges.forEach(function(re){for(var Q=0;Q<2;++Q){var fe=we(fe=G[fe=re[Q]]);re[Q]=K[fe]}}),this.vertices=G=$}for(E=J.length=0;E<G.length;++E)J.push(new b.default.Vector);for(V.forEach(function(re,Q){for(var fe=S._getFaceNormal(Q),Ce=0;Ce<3;++Ce)J[re[Ce]].add(fe)}),E=0;E<G.length;++E)J[E].normalize();return this}},{key:"averageNormals",value:function(){for(var E=0;E<=this.detailY;E++){var S=this.detailX+1,k=b.default.Vector.add(this.vertexNormals[E*S],this.vertexNormals[E*S+this.detailX]);k=b.default.Vector.div(k,2),this.vertexNormals[E*S]=k,this.vertexNormals[E*S+this.detailX]=k}return this}},{key:"averagePoleNormals",value:function(){for(var E=new b.default.Vector(0,0,0),S=0;S<this.detailX;S++)E.add(this.vertexNormals[S]);E=b.default.Vector.div(E,this.detailX);for(var k=0;k<this.detailX;k++)this.vertexNormals[k]=E;E=new b.default.Vector(0,0,0);for(var q=this.vertices.length-1;q>this.vertices.length-1-this.detailX;q--)E.add(this.vertexNormals[q]);E=b.default.Vector.div(E,this.detailX);for(var J=this.vertices.length-1;J>this.vertices.length-1-this.detailX;J--)this.vertexNormals[J]=E;return this}},{key:"_makeTriangleEdges",value:function(){for(var E=this.edges.length=0;E<this.faces.length;E++)this.edges.push([this.faces[E][0],this.faces[E][1]]),this.edges.push([this.faces[E][1],this.faces[E][2]]),this.edges.push([this.faces[E][2],this.faces[E][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var E,S=new Map,k=new Set,q=0;q<this.edges.length;q++){var J,G=this.edges[q-1],V=this.edges[q],K=this.vertices[V[0]],$=this.vertices[V[1]],ne=0<this.vertexStrokeColors.length&&G?this.vertexStrokeColors.slice(4*G[1],4*(G[1]+1)):[0,0,0,0],Y=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*V[0],4*(V[0]+1)):[0,0,0,0],we=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*V[1],4*(V[1]+1)):[0,0,0,0],Se=$.copy().sub(K).normalize(),oe=0<Se.magSq();oe&&this._addSegment(K,$,Y,we,Se),0<q&&G[1]===V[0]?k.has(V[0])||(k.add(V[0]),S.delete(V[0]),E&&oe&&Se.dot(E)<1-1e-8&&this._addJoin(K,E,Se,Y)):(oe&&!k.has(V[0])&&((J=S.get(V[0]))?(this._addJoin(K,J.dir,Se,Y),S.delete(V[0]),k.add(V[0])):S.set(V[0],{point:K,dir:Se.copy().mult(-1),color:Y})),E&&!k.has(G[1])&&((J=S.get(G[1]))?(this._addJoin(this.vertices[G[1]],E,J.dir.copy().mult(-1),ne),S.delete(G[1]),k.add(G[1])):S.set(G[1],{point:this.vertices[G[1]],dir:E,color:ne}),E=void 0)),q!==this.edges.length-1||k.has(V[1])||((K=S.get(V[1]))?(this._addJoin($,Se,K.dir.copy().mult(-1),we),S.delete(V[1]),k.add(V[1])):S.set(V[1],{point:$,dir:Se,color:we})),oe&&(E=Se)}var ge=!0,re=!1,Q=void 0;try{for(var fe,Ce=S.values()[Symbol.iterator]();!(ge=(fe=Ce.next()).done);ge=!0){var it=fe.value;this._addCap(it.point,it.dir,it.color)}}catch(je){re=!0,Q=je}finally{try{ge||null==Ce.return||Ce.return()}finally{if(re)throw Q}}return this}},{key:"_addSegment",value:function(G,V,k,q,J){G=G.array(),V=V.array();var K=J.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var $=0,ne=[this.lineTangentsIn,this.lineTangentsOut];$<ne.length;$++)for(var Y=ne[$],we=0;we<6;we++)Y.push.apply(Y,D(K));return(J=this.lineVertices).push.apply(J,D(G).concat(D(V),D(G),D(V),D(V),D(G))),(J=this.lineVertexColors).push.apply(J,D(k).concat(D(q),D(k),D(q),D(q),D(k))),this}},{key:"_addCap",value:function(E,S,k){for(var q,J=E.array(),G=S.array(),V=[0,0,0],K=0;K<6;K++)(q=this.lineVertices).push.apply(q,D(J)),(q=this.lineTangentsIn).push.apply(q,D(G)),(q=this.lineTangentsOut).push.apply(q,V),(q=this.lineVertexColors).push.apply(q,D(k));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(E,S,k,q){for(var J,G=E.array(),V=S.array(),K=k.array(),$=0;$<12;$++)(J=this.lineVertices).push.apply(J,D(G)),(J=this.lineTangentsIn).push.apply(J,D(V)),(J=this.lineTangentsOut).push.apply(J,D(K)),(J=this.lineVertexColors).push.apply(J,D(q));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var E=this.vertices[0].copy(),S=this.vertices[0].copy(),k=0;k<this.vertices.length;k++)E.x=Math.max(E.x,this.vertices[k].x),S.x=Math.min(S.x,this.vertices[k].x),E.y=Math.max(E.y,this.vertices[k].y),S.y=Math.min(S.y,this.vertices[k].y),E.z=Math.max(E.z,this.vertices[k].z),S.z=Math.min(S.z,this.vertices[k].z);for(var q=b.default.Vector.lerp(E,S,.5),J=b.default.Vector.sub(E,S),G=200/Math.max(Math.max(J.x,J.y),J.z),V=0;V<this.vertices.length;V++)this.vertices[V].sub(q),this.vertices[V].mult(G)}return this}}])&&f(m.prototype,g),p}();var h=b.default.Geometry;Z.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(I,be,Z){"use strict";I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I};function C(D,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(D,h.key,h)}}var b=Array,w=function(D){return Array.isArray(D)};typeof Float32Array<"u"&&(b=Float32Array,w=function(D){return Array.isArray(D)||D instanceof Float32Array}),M.default.Matrix=function(){function D(){var p=this,m=D;if(p instanceof m)return arguments.length&&((p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p])instanceof M.default&&(this.p5=(m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new b([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new b([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var d,f,h;return d=D,h=[{key:"identity",value:function(p){return new M.default.Matrix(p)}}],(f=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(p){var m=arguments;if(p instanceof M.default.Matrix?m=p.mat4:w(p)&&(m=p),16!==m.length)M.default._friendlyError("Expected 16 values but received ".concat(m.length,"."),"p5.Matrix.set");else for(var g=0;g<16;g++)this.mat4[g]=m[g];return this}},{key:"get",value:function(){return new M.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var p;return void 0!==this.mat3?((p=new M.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],p.mat3[1]=this.mat3[1],p.mat3[2]=this.mat3[2],p.mat3[3]=this.mat3[3],p.mat3[4]=this.mat3[4],p.mat3[5]=this.mat3[5],p.mat3[6]=this.mat3[6],p.mat3[7]=this.mat3[7],p.mat3[8]=this.mat3[8]):((p=new M.default.Matrix(this.p5)).mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15]),p}},{key:"transpose",value:function(p){var m,g,x,E,S,k;return p instanceof M.default.Matrix?(m=p.mat4[1],g=p.mat4[2],x=p.mat4[3],E=p.mat4[6],S=p.mat4[7],k=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=m,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=k,this.mat4[15]=p.mat4[15]):w(p)&&(m=p[1],g=p[2],x=p[3],E=p[6],S=p[7],k=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=m,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=k,this.mat4[15]=p[15]),this}},{key:"invert",value:function(oe){oe instanceof M.default.Matrix?(m=oe.mat4[0],g=oe.mat4[1],x=oe.mat4[2],E=oe.mat4[3],S=oe.mat4[4],k=oe.mat4[5],q=oe.mat4[6],J=oe.mat4[7],G=oe.mat4[8],V=oe.mat4[9],K=oe.mat4[10],$=oe.mat4[11],ne=oe.mat4[12],Y=oe.mat4[13],we=oe.mat4[14],Se=oe.mat4[15]):w(oe)&&(m=oe[0],g=oe[1],x=oe[2],E=oe[3],S=oe[4],k=oe[5],q=oe[6],J=oe[7],G=oe[8],V=oe[9],K=oe[10],$=oe[11],ne=oe[12],Y=oe[13],we=oe[14],Se=oe[15]);var m,g,x,E,S,k,q,J,G,V,K,$,ne,Y,we,Se,ge=m*q-x*S,re=m*J-E*S,Q=g*q-x*k,fe=g*J-E*k,Ce=x*J-E*q,it=G*Y-V*ne,le=G*we-K*ne,z=G*Se-$*ne,ye=V*we-K*Y,je=V*Se-$*Y,Je=K*Se-$*we,gt=(oe=m*k-g*S)*Je-ge*je+re*ye+Q*z-fe*le+Ce*it;return gt?(this.mat4[0]=(k*Je-q*je+J*ye)*(gt=1/gt),this.mat4[1]=(x*je-g*Je-E*ye)*gt,this.mat4[2]=(Y*Ce-we*fe+Se*Q)*gt,this.mat4[3]=(K*fe-V*Ce-$*Q)*gt,this.mat4[4]=(q*z-S*Je-J*le)*gt,this.mat4[5]=(m*Je-x*z+E*le)*gt,this.mat4[6]=(we*re-ne*Ce-Se*ge)*gt,this.mat4[7]=(G*Ce-K*re+$*ge)*gt,this.mat4[8]=(S*je-k*z+J*it)*gt,this.mat4[9]=(g*z-m*je-E*it)*gt,this.mat4[10]=(ne*fe-Y*re+Se*oe)*gt,this.mat4[11]=(V*re-G*fe-$*oe)*gt,this.mat4[12]=(k*le-S*ye-q*it)*gt,this.mat4[13]=(m*ye-g*le+x*it)*gt,this.mat4[14]=(Y*ge-ne*Q-we*oe)*gt,this.mat4[15]=(G*Q-V*ge+K*oe)*gt,this):null}},{key:"invert3x3",value:function(){var p=this.mat3[0],m=this.mat3[1],g=this.mat3[2],x=this.mat3[3],E=this.mat3[4],S=this.mat3[5],k=this.mat3[6],q=this.mat3[7],J=this.mat3[8],G=J*E-S*q,V=-J*x+S*k,K=q*x-E*k,$=p*G+m*V+g*K;return $?(this.mat3[0]=G*($=1/$),this.mat3[1]=(-J*m+g*q)*$,this.mat3[2]=(S*m-g*E)*$,this.mat3[3]=V*$,this.mat3[4]=(J*p-g*k)*$,this.mat3[5]=(-S*p+g*x)*$,this.mat3[6]=K*$,this.mat3[7]=(-q*p+m*k)*$,this.mat3[8]=(E*p-m*x)*$,this):null}},{key:"transpose3x3",value:function(p){var m=(p=void 0===p?this.mat3:p)[1],g=p[2],x=p[5];return this.mat3[0]=p[0],this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=m,this.mat3[4]=p[4],this.mat3[5]=p[7],this.mat3[6]=g,this.mat3[7]=x,this.mat3[8]=p[8],this}},{key:"inverseTranspose",value:function(p){if(p=p.mat4,void 0===this.mat3?M.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=p[0],this.mat3[1]=p[1],this.mat3[2]=p[2],this.mat3[3]=p[4],this.mat3[4]=p[5],this.mat3[5]=p[6],this.mat3[6]=p[8],this.mat3[7]=p[9],this.mat3[8]=p[10]),p=this.invert3x3())p.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this}},{key:"determinant",value:function(){return(this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4])*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-(this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4])*(this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13])+(this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4])*(this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13])+(this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5])*(this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12])-(this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5])*(this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12])+(this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6])*(this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12])}},{key:"mult",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var x=this.mat4[1],E=this.mat4[2],S=this.mat4[3];return this.mat4[0]=(g=this.mat4[0])*m[0]+x*m[4]+E*m[8]+S*m[12],this.mat4[1]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[2]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[3]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[4]=(g=this.mat4[4])*m[0]+(x=this.mat4[5])*m[4]+(E=this.mat4[6])*m[8]+(S=this.mat4[7])*m[12],this.mat4[5]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[6]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[7]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[8]=(g=this.mat4[8])*m[0]+(x=this.mat4[9])*m[4]+(E=this.mat4[10])*m[8]+(S=this.mat4[11])*m[12],this.mat4[9]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[10]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[11]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[12]=(g=this.mat4[12])*m[0]+(x=this.mat4[13])*m[4]+(E=this.mat4[14])*m[8]+(S=this.mat4[15])*m[12],this.mat4[13]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[14]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[15]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this}},{key:"apply",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var E,S,k,x=((g=this.mat4)[0]=m[0]*(x=g[0])+m[1]*(E=g[4])+m[2]*(S=g[8])+m[3]*(k=g[12]),g[4]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[8]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[12]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[1]);return g[1]=m[0]*x+m[1]*(E=g[5])+m[2]*(S=g[9])+m[3]*(k=g[13]),g[5]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[9]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[13]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[2]=m[0]*(x=g[2])+m[1]*(E=g[6])+m[2]*(S=g[10])+m[3]*(k=g[14]),g[6]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[10]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[14]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[3]=m[0]*(x=g[3])+m[1]*(E=g[7])+m[2]*(S=g[11])+m[3]*(k=g[15]),g[7]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[11]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[15]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,this}},{key:"scale",value:function(p,m,g){return p instanceof M.default.Vector?(m=p.y,g=p.z,p=p.x):p instanceof Array&&(m=p[1],g=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(oe,je,ye,x){je instanceof M.default.Vector?(ye=je.y,x=je.z,je=je.x):je instanceof Array&&(ye=je[1],x=je[2],je=je[0]);var E=(je*=1/(E=Math.sqrt(je*je+ye*ye+x*x)),ye*=1/E,x*=1/E,this.mat4[0]),S=this.mat4[1],k=this.mat4[2],q=this.mat4[3],J=this.mat4[4],G=this.mat4[5],V=this.mat4[6],K=this.mat4[7],$=this.mat4[8],ne=this.mat4[9],Y=this.mat4[10],we=this.mat4[11],Se=Math.sin(oe),ge=1-(oe=Math.cos(oe)),re=je*je*ge+oe,Q=ye*je*ge+x*Se,fe=x*je*ge-ye*Se,Ce=je*ye*ge-x*Se,it=ye*ye*ge+oe,le=x*ye*ge+je*Se,z=je*x*ge+ye*Se;return ye=ye*x*ge-je*Se,je=x*x*ge+oe,this.mat4[0]=E*re+J*Q+$*fe,this.mat4[1]=S*re+G*Q+ne*fe,this.mat4[2]=k*re+V*Q+Y*fe,this.mat4[3]=q*re+K*Q+we*fe,this.mat4[4]=E*Ce+J*it+$*le,this.mat4[5]=S*Ce+G*it+ne*le,this.mat4[6]=k*Ce+V*it+Y*le,this.mat4[7]=q*Ce+K*it+we*le,this.mat4[8]=E*z+J*ye+$*je,this.mat4[9]=S*z+G*ye+ne*je,this.mat4[10]=k*z+V*ye+Y*je,this.mat4[11]=q*z+K*ye+we*je,this}},{key:"translate",value:function(x){var m=x[0],g=x[1];this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*g+this.mat4[8]*(x=x[2]||0),this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*g+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*g+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*g+this.mat4[11]*x}},{key:"rotateX",value:function(p){this.rotate(p,1,0,0)}},{key:"rotateY",value:function(p){this.rotate(p,0,1,0)}},{key:"rotateZ",value:function(p){this.rotate(p,0,0,1)}},{key:"perspective",value:function(E,m,g,x){E=1/Math.tan(E/2);var S=1/(g-x);return this.mat4[0]=E/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=E,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+g)*S,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*g*S,this.mat4[15]=0,this}},{key:"ortho",value:function(p,m,g,x,E,S){var k=1/(p-m),q=1/(g-x),J=1/(E-S);return this.mat4[0]=-2*k,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*q,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*J,this.mat4[11]=0,this.mat4[12]=(p+m)*k,this.mat4[13]=(x+g)*q,this.mat4[14]=(S+E)*J,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(p,m,g,x){var E=new Array(4),S=this.mat4;return E[0]=S[0]*p+S[4]*m+S[8]*g+S[12]*x,E[1]=S[1]*p+S[5]*m+S[9]*g+S[13]*x,E[2]=S[2]*p+S[6]*m+S[10]*g+S[14]*x,E[3]=S[3]*p+S[7]*m+S[11]*g+S[15]*x,E}},{key:"multiplyPoint",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,1);return new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var x;return(x=this.multiplyVec4(x=g.x,g.y,g=g.z,1))[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,0);return new M.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(g){var m;if(g===this||g===this.mat3)m=this.copy().mat3;else if(g instanceof M.default.Matrix)m=g.mat3;else if(w(g))m=g;else{if(9!==arguments.length)return;m=arguments}var x=this.mat3[1],E=this.mat3[2];return this.mat3[0]=(g=this.mat3[0])*m[0]+x*m[3]+E*m[6],this.mat3[1]=g*m[1]+x*m[4]+E*m[7],this.mat3[2]=g*m[2]+x*m[5]+E*m[8],this.mat3[3]=(g=this.mat3[3])*m[0]+(x=this.mat3[4])*m[3]+(E=this.mat3[5])*m[6],this.mat3[4]=g*m[1]+x*m[4]+E*m[7],this.mat3[5]=g*m[2]+x*m[5]+E*m[8],this.mat3[6]=(g=this.mat3[6])*m[0]+(x=this.mat3[7])*m[3]+(E=this.mat3[8])*m[6],this.mat3[7]=g*m[1]+x*m[4]+E*m[7],this.mat3[8]=g*m[2]+x*m[5]+E*m[8],this}},{key:"column",value:function(p){return new M.default.Vector(this.mat3[3*p],this.mat3[3*p+1],this.mat3[3*p+2])}},{key:"row",value:function(p){return new M.default.Vector(this.mat3[p],this.mat3[p+3],this.mat3[p+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(p,m){return(m=void 0===m?p.copy():m).x=this.row(0).dot(p),m.y=this.row(1).dot(p),m.z=this.row(2).dot(p),m}},{key:"createSubMatrix3x3",value:function(){var p=new M.default.Matrix("mat3");return p.mat3[0]=this.mat4[0],p.mat3[1]=this.mat4[1],p.mat3[2]=this.mat4[2],p.mat3[3]=this.mat4[4],p.mat3[4]=this.mat4[5],p.mat3[5]=this.mat4[6],p.mat3[6]=this.mat4[8],p.mat3[7]=this.mat4[9],p.mat3[8]=this.mat4[10],p}}])&&C(d.prototype,f),h&&C(d,h),D}(),Z.default=I=M.default.Matrix},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(a,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Quat=function(){function b(d,f,h,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.w=d,this.vec=new M.default.Vector(f,h,p)}var w,I,D;return w=b,D=[{key:"fromAxisAngle",value:function(d,g,h,p){var m=Math.cos(d/2);return g=new M.default.Vector(g,h,p).normalize().mult(Math.sin(d/2)),new M.default.Quat(m,g.x,g.y,g.z)}}],(I=[{key:"conjugate",value:function(){return new M.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(d){return new M.default.Quat(this.w*d.w-this.vec.x*d.vec.x-this.vec.y*d.vec.y-this.vec.z-d.vec.z,this.w*d.vec.x+this.vec.x*d.w+this.vec.y*d.vec.z-this.vec.z*d.vec.y,this.w*d.vec.y-this.vec.x*d.vec.z+this.vec.y*d.w+this.vec.z*d.vec.x,this.w*d.vec.z+this.vec.x*d.vec.y-this.vec.y*d.vec.x+this.vec.z*d.w)}},{key:"rotateVector",value:function(d){return new M.default.Vector.mult(d,this.w*this.w-this.vec.dot(this.vec)).add(M.default.Vector.mult(this.vec,2*d.dot(this.vec))).add(M.default.Vector.mult(this.vec,2*this.w).cross(d)).clampToZero()}},{key:"rotateBy",value:function(d){return d.multiply(this).multiply(d.conjugate()).vec.clampToZero()}}])&&C(w.prototype,I),D&&C(w,D),b}(),Z.default=a=M.default.Quat},{"../core/main":283}],338:[function(a,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.map"),a("core-js/modules/es.array.map"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.RenderBuffer=function(){function C(D,d,f,h,p,m){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.size=D,this.src=d,this.dst=f,this.attr=h,this._renderer=p,this.map=m}var b,w;return b=C,(w=[{key:"_prepareBuffer",value:function(D,d){var f,h,p,x,m=this._renderer.GL,g=D.model||D;(x=(x=d.attributes)[this.attr])&&(f=D[this.dst],0<(h=g[this.src]).length?((p=!f)&&(D[this.dst]=f=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,f),!p&&!1===g.dirtyFlags[this.src]||(p=(D=this.map)?D(h):h,this._renderer._bindBuffer(f,m.ARRAY_BUFFER,p),g.dirtyFlags[this.src]=!1),d.enableAttrib(x,this.size)):-1!==(D=x.location)&&this._renderer.registerEnabled.has(D)&&(m.disableVertexAttribArray(D),this._renderer.registerEnabled.delete(D)))}}])&&M(b.prototype,w),C}(),Z.default=a=a.default.RenderBuffer},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(a,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.find-index"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.map"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.find-index"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.map"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(a("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a("./p5.RenderBuffer"),b.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=void 0!==h?h:w.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var d={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(b.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==w.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},b.default.RendererGL.prototype.vertex=function(h,p){if(this.immediateMode.shapeMode===w.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in d){var g=d[m];(m=this.immediateMode.geometry[m]).push.apply(m,D(m.slice(m.length-3*g,m.length-2*g)).concat(D(m.slice(m.length-g,m.length))))}var x,E,S=x=E=0,k=(3===arguments.length?S=arguments[2]:4===arguments.length?(x=arguments[2],E=arguments[3]):5===arguments.length&&(S=arguments[2],x=arguments[3],E=arguments[4]),new b.default.Vector(h,p,S));return this.immediateMode.geometry.vertices.push(k),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.immediateMode.geometry.vertexColors.push((k=this.curFillColor||[.5,.5,.5,1])[0],k[1],k[2],k[3]),this.immediateMode.geometry.vertexStrokeColors.push((k=this.curStrokeColor||[.5,.5,.5,1])[0],k[1],k[2],k[3]),this.textureMode!==w.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,E/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,E),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=p,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=p,this.immediateMode._quadraticVertex[2]=S,this},b.default.RendererGL.prototype.normal=function(h,p,m){return this._currentNormal=h instanceof b.default.Vector?h:new b.default.Vector(h,p,m),this},b.default.RendererGL.prototype.endShape=function(h,p,m,g,x,E){var S,k=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===w.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===w.TESS&&(this.immediateMode.shapeMode=w.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),S=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==w.LINE_STRIP&&this.immediateMode.shapeMode!==w.LINES||(this.immediateMode.shapeMode=w.TRIANGLE_FAN,S=!0),this.immediateMode.shapeMode===w.QUADS?this.immediateMode.shapeMode=w.TRIANGLES:this.immediateMode.shapeMode===w.QUAD_STRIP&&(this.immediateMode.shapeMode=w.TRIANGLE_STRIP),this._doFill&&!S&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(k),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},b.default.RendererGL.prototype._processVertices=function(h){var p;0!==this.immediateMode.geometry.vertices.length&&(h=h===w.CLOSE,this._doStroke&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),p=this.immediateMode.shapeMode===w.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||p||h)&&this.immediateMode.shapeMode!==w.LINES&&this._tesselateShape())},b.default.RendererGL.prototype._calculateEdges=function(h,p,m){var g=[],x=0,E=this.immediateMode.contourIndices.slice(),S=0;switch(h){case w.TRIANGLE_STRIP:for(x=0;x<p.length-2;x++)g.push([x,x+1]),g.push([x,x+2]);g.push([x,x+1]);break;case w.TRIANGLE_FAN:for(x=1;x<p.length-1;x++)g.push([0,x]),g.push([x,x+1]);g.push([0,p.length-1]);break;case w.TRIANGLES:for(x=0;x<p.length-2;x+=3)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+2,x]);break;case w.LINES:for(x=0;x<p.length-1;x+=2)g.push([x,x+1]);break;case w.QUADS:for(x=0;x<p.length-5;x+=6)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+3,x+5]),g.push([x+4,x+5]);break;case w.QUAD_STRIP:for(x=0;x<p.length-2;x+=2)g.push([x,x+1]),g.push([x,x+2]),g.push([x+1,x+3]);g.push([x,x+1]);break;default:for(x=0;x<p.length;x++)x+1<p.length&&x+1!==E[0]?g.push([x,x+1]):((m||S)&&g.push([x,S]),0<E.length&&(S=E.shift()))}return h!==w.TESS&&m&&g.push([p.length-1,0]),g},b.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,p=(this.immediateMode.shapeMode=w.TRIANGLES,[[]]),m=0;m<this.immediateMode.geometry.vertices.length;m++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===m&&(this.immediateMode.contourIndices.shift(),p.push([])),p[p.length-1].push(this.immediateMode.geometry.vertices[m].x,this.immediateMode.geometry.vertices[m].y,this.immediateMode.geometry.vertices[m].z,this.immediateMode.geometry.uvs[2*m],this.immediateMode.geometry.uvs[2*m+1],this.immediateMode.geometry.vertexColors[4*m],this.immediateMode.geometry.vertexColors[4*m+1],this.immediateMode.geometry.vertexColors[4*m+2],this.immediateMode.geometry.vertexColors[4*m+3],this.immediateMode.geometry.vertexNormals[m].x,this.immediateMode.geometry.vertexNormals[m].y,this.immediateMode.geometry.vertexNormals[m].z);for(var g,x=this._triangulate(p),E=this.immediateMode.geometry.vertices,S=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),k=0,q=x.length;k<q;k+=b.default.RendererGL.prototype.tessyVertexSize)S.push.apply(S,D(x.slice(k+5,k+9))),this.normal.apply(this,D(x.slice(k+9,k+12))),this.vertex.apply(this,D(x.slice(k,k+5)));this.geometryBuilder&&(g=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(J){return J.map(function(G){if(!g.has(G)){var V=E[G],K=h.immediateMode.geometry.vertices.findIndex(function(ge){return V.x===ge.x&&V.y===ge.y&&V.z===ge.z});if(-1===K){for(var $=1/0,ne=0,Y=0;Y<h.immediateMode.geometry.vertices.length;Y++){var Se,oe,we=V.y-(Se=h.immediateMode.geometry.vertices[Y]).y;(oe=(oe=V.x-Se.x)*oe+we*we+(Se=V.z-Se.z)*Se)<$&&($=oe,ne=Y)}K=ne}g.set(G,K)}return g.get(G)})})),this.immediateMode.geometry.vertexColors=S},b.default.RendererGL.prototype._drawImmediateFill=function(){var h,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,m=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),x=!1,E=void 0;try{for(var S,k=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(S=k.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,h)}catch(q){x=!0,E=q}finally{try{g||null==k.return||k.return()}finally{if(x)throw E}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===p)m.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{m.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,p)}catch{console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},b.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,p=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),m=(this._setStrokeUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.immediateMode.buffers.stroke[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(this.immediateMode.geometry,p)}catch(k){g=!0,x=k}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),p.unbindShader()},b.default.RendererGL);Z.default=f},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(a,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.uint16-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.uint16-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=(a("./p5.RendererGL"),a("./p5.RenderBuffer"),function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants")));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.RendererGL.prototype.freeGeometry=function(d){d.gid?this._freeBuffers(d.gid):console.warn("The model you passed to freeGeometry does not have an id!")},b.default.RendererGL.prototype._initBufferDefaults=function(d){var f;return this._freeBuffers(d),1e3<Object.keys(this.retainedMode.geometry).length&&(f=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(f)),this.retainedMode.geometry[d]={}},b.default.RendererGL.prototype._freeBuffers=function(d){var f,h=this.retainedMode.geometry[d];function p(m){var g=!0,x=!1,E=void 0;try{for(var S,k=m[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var q=S.value;h[q.dst]&&(f.deleteBuffer(h[q.dst]),h[q.dst]=null)}}catch(J){x=!0,E=J}finally{try{g||null==k.return||k.return()}finally{if(x)throw E}}}h&&(delete this.retainedMode.geometry[d],f=this.GL,h.indexBuffer&&f.deleteBuffer(h.indexBuffer),p(this.retainedMode.buffers.stroke),p(this.retainedMode.buffers.fill))},b.default.RendererGL.prototype.createBuffers=function(x,f){var h,p,m,g=this.GL,E=((x=this._initBufferDefaults(x)).model=f,x.indexBuffer);return f.faces.length?(E=E||(x.indexBuffer=g.createBuffer()),m=(p=(h=b.default.RendererGL.prototype._flatten(f.faces)).some(function(S){return 65535<S}))?Uint32Array:Uint16Array,this._bindBuffer(E,g.ELEMENT_ARRAY_BUFFER,h,m),x.indexBufferType=p?g.UNSIGNED_INT:g.UNSIGNED_SHORT,x.vertexCount=3*f.faces.length):(E&&(g.deleteBuffer(E),x.indexBuffer=null),x.vertexCount=f.vertices?f.vertices.length:0),x.lineVertexCount=f.lineVertices?f.lineVertices.length/3:0,x},b.default.RendererGL.prototype.drawBuffers=function(d){var f=this.GL,h=this.retainedMode.geometry[d];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[d].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var p=this._getRetainedFillShader(),m=(this._setFillUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.retainedMode.buffers.fill[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(h,p)}catch(V){g=!0,x=V}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(f.TRIANGLES,d),p.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var k=this._getRetainedStrokeShader(),q=(this._setStrokeUniforms(k),!0);g=!1,x=void 0;try{for(var J,G=this.retainedMode.buffers.stroke[Symbol.iterator]();!(q=(J=G.next()).done);q=!0)J.value._prepareBuffer(h,k)}catch($){g=!0,x=$}finally{try{q||null==G.return||G.return()}finally{if(g)throw x}}k.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(f.TRIANGLES,d),k.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},b.default.RendererGL.prototype.drawBuffersScaled=function(d,f,h,p){var m=this.uModelMatrix.copy();try{this.uModelMatrix.scale(f,h,p),this.drawBuffers(d)}finally{this.uModelMatrix=m}},b.default.RendererGL.prototype._drawArrays=function(d,f){return this.GL.drawArrays(d,0,this.retainedMode.geometry[f].lineVertexCount),this},b.default.RendererGL.prototype._drawElements=function(d,h){var p=this.GL;if((h=this.retainedMode.geometry[h]).indexBuffer){if(this._pInst.webglVersion!==w.WEBGL2&&h.indexBufferType===p.UNSIGNED_INT&&!p.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");p.drawElements(p.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else p.drawArrays(d||p.TRIANGLES,0,h.vertexCount)},b.default.RendererGL.prototype._drawPoints=function(d,f){var h=this.GL,p=this._getImmediatePointShader();this._setPointUniforms(p),this._bindBuffer(f,h.ARRAY_BUFFER,this._vToNArray(d),Float32Array,h.STATIC_DRAW),p.enableAttrib(p.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,d.length),p.unbindShader()};var D=b.default.RendererGL;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(Y,be,Z){"use strict";function M(Q){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(Q)}function C(Q){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(fe){return M(fe)}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":M(fe)})(Q)}Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.get-own-property-descriptor"),Y("core-js/modules/es.object.get-prototype-of"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.reflect.construct"),Y("core-js/modules/es.reflect.get"),Y("core-js/modules/es.regexp.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/es.weak-map"),Y("core-js/modules/web.dom-collections.iterator"),Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.readPixelsWebGL=ge,Z.readPixelWebGL=re,Z.default=void 0;var b=h(Y("../core/main")),w=function(Q){if(Q&&Q.__esModule)return Q;if(null===Q||"object"!==C(Q)&&"function"!=typeof Q)return{default:Q};var fe=f();if(fe&&fe.has(Q))return fe.get(Q);var Ce,it={},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ce in Q){var z;Object.prototype.hasOwnProperty.call(Q,Ce)&&((z=le?Object.getOwnPropertyDescriptor(Q,Ce):null)&&(z.get||z.set)?Object.defineProperty(it,Ce,z):it[Ce]=Q[Ce])}return it.default=Q,fe&&fe.set(Q,it),it}(Y("../core/constants")),I=h(Y("./GeometryBuilder")),D=h(Y("libtess")),d=(Y("./p5.Shader"),Y("./p5.Camera"),Y("../core/p5.Renderer"),Y("./p5.Matrix"),Y("./p5.Framebuffer"),Y("path"),Y("./p5.Texture"));function f(){var Q;return"function"!=typeof WeakMap?null:(f=function(){return Q},Q=new WeakMap)}function h(Q){return Q&&Q.__esModule?Q:{default:Q}}function p(Q){return function(fe){if(Array.isArray(fe)){for(var Ce=0,it=new Array(fe.length);Ce<fe.length;Ce++)it[Ce]=fe[Ce];return it}}(Q)||function(fe){if(Symbol.iterator in Object(fe)||"[object Arguments]"===Object.prototype.toString.call(fe))return Array.from(fe)}(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(Q,fe){for(var Ce=0;Ce<fe.length;Ce++){var it=fe[Ce];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Q,it.key,it)}}function g(Q,fe,Ce){return(g=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(ye,le,z){if(ye=function(je,Je){for(;!Object.prototype.hasOwnProperty.call(je,Je)&&null!==(je=k(je)););return je}(ye,le))return(ye=Object.getOwnPropertyDescriptor(ye,le)).get?ye.get.call(z):ye.value})(Q,fe,Ce||Q)}function x(Q,fe){return(x=Object.setPrototypeOf||function(Ce,it){return Ce.__proto__=it,Ce})(Q,fe)}function S(Q){if(void 0===Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function k(Q){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(Q)}function q(Q,fe,Ce){fe in Q?Object.defineProperty(Q,fe,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):Q[fe]=Ce}function J(Q,fe){ne+="#define STROKE_CAP_".concat(Q," ").concat(fe,"\n"),K[w[Q]]=fe}function G(Q,fe){ne+="#define STROKE_JOIN_".concat(Q," ").concat(fe,"\n"),$[w[Q]]=fe}var V,K={},$={},ne="",we={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 positionVec4 = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  gl_Position = uProjectionMatrix * positionVec4;\n\n  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));\n  vVertTexCoord = HOOK_getUV(aTexCoord);\n  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",lightVert:(J("ROUND",0),J("PROJECT",1),J("SQUARE",2),G("ROUND",0),G("MITER",1),G("BEVEL",2),(Y='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));\n  vTexCoord = HOOK_getUV(aTexCoord);\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));\n  HOOK_afterVertex();\n}\n",phongFrag:Y+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:ne+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  HOOK_beforeVertex();\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);\n  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);\n  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);\n  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);\n  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);\n  vStrokeWeight = strokeWeight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(-0.00045, -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = HOOK_getLineCenter(p.xy);\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * strokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * strokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * strokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * strokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * strokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));\n    } else {\n      vMaxDist = strokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      strokeWeight * 0.5;\n    vMaxDist = strokeWeight / 2.;\n  }\n  vPosition = HOOK_getLinePosition(vCenter + offset);\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",lineFrag:ne+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},Se=we.sphereMappingFrag;for(V in we)we[V]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+we[V];q(Y={},w.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),q(Y,w.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),q(Y,w.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),q(Y,w.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),q(Y,w.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),q(Y,w.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),q(Y,w.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),q(Y,w.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var oe=Y;function ge(Q,fe,$t,it,le,z,ye,je,Je,gt){var Ct=fe.getParameter(fe.FRAMEBUFFER_BINDING),yt=z*ye*(fe.bindFramebuffer(fe.FRAMEBUFFER,$t),$t=je===fe.RGBA?4:3),Ut=Je===fe.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Q instanceof Ut&&Q.length===yt||(Q=new Ut(yt)),fe.readPixels(it,gt?gt-le-ye:le,z,ye,je,Je,Q),fe.bindFramebuffer(fe.FRAMEBUFFER,Ct),gt)for(var Xt=Math.floor(ye/2),ft=new Ut(z*$t),jt=0;jt<Xt;jt++){var Lt=jt*z*4,Bt=(ye-jt-1)*z*4;ft.set(Q.subarray(Lt,Lt+4*z)),Q.copyWithin(Lt,Bt,Bt+4*z),Q.set(ft,Bt)}return Q}function re(Q,Je,Ce,it,le,z,ye){var je=Q.getParameter(Q.FRAMEBUFFER_BINDING);return Q.bindFramebuffer(Q.FRAMEBUFFER,Je),Je=le===Q.RGBA?4:3,Je=new(z===Q.UNSIGNED_BYTE?Uint8Array:Float32Array)(Je),Q.readPixels(Ce,ye?ye-it-1:it,1,1,le,z,Je),Q.bindFramebuffer(Q.FRAMEBUFFER,je),Array.from(Je)}b.default.prototype.setAttributes=function(Q,fe){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Ce=!0;if(void 0!==fe?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[Q]!==fe&&(this._glAttributes[Q]=fe,Ce=!1)):Q instanceof Object&&this._glAttributes!==Q&&(this._glAttributes=Q,Ce=!1),this._renderer.isP3D&&!Ce){if(!this._setupDone)for(var it in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(it))return void b.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},b.default.RendererGL=function(Q){var fe=le;if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(Q&&Q.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Q&&x(fe,Q);var it=function E(Q){return function(){var fe,Ce,it=k(Q);return fe=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(fe=k(this).constructor,Reflect.construct(it,arguments,fe)):it.apply(this,arguments),it=this,!(Ce=fe)||"object"!==C(Ce)&&"function"!=typeof Ce?S(it):Ce}}(le);function le(z,ye,je,Je){if(this instanceof le)return(z=it.call(this,z,ye,je))._setAttributeDefaults(ye),z._initContext(),z.isP3D=!0,z.geometryBuilder=void 0,z.GL=z.drawingContext,z._pInst._setProperty("drawingContext",z.drawingContext),z._isErasing=!1,z._clipDepths=[],z._isClipApplied=!1,z._stencilTestOn=!1,z._enableLighting=!1,z.ambientLightColors=[],z.mixedAmbientLight=[],z.mixedSpecularColor=[],z.specularColors=[1,1,1],z.directionalLightDirections=[],z.directionalLightDiffuseColors=[],z.directionalLightSpecularColors=[],z.pointLightPositions=[],z.pointLightDiffuseColors=[],z.pointLightSpecularColors=[],z.spotLightPositions=[],z.spotLightDirections=[],z.spotLightDiffuseColors=[],z.spotLightSpecularColors=[],z.spotLightAngle=[],z.spotLightConc=[],z.activeImageLight=null,z.diffusedTextures=new Map,z.specularTextures=new Map,z.drawMode=w.FILL,z.curFillColor=z._cachedFillStyle=[1,1,1,1],z.curAmbientColor=z._cachedFillStyle=[1,1,1,1],z.curSpecularColor=z._cachedFillStyle=[0,0,0,0],z.curEmissiveColor=z._cachedFillStyle=[0,0,0,0],z.curStrokeColor=z._cachedStrokeStyle=[0,0,0,1],z.curBlendMode=w.BLEND,z.preEraseBlend=void 0,z._cachedBlendMode=void 0,z.blendExt=z.webglVersion===w.WEBGL2?z.GL:z.GL.getExtension("EXT_blend_minmax"),z._isBlending=!1,z._hasSetAmbient=!1,z._useSpecularMaterial=!1,z._useEmissiveMaterial=!1,z._useNormalMaterial=!1,z._useShininess=1,z._useMetalness=0,z._useLineColor=!1,z._useVertexColor=!1,z.registerEnabled=new Set,z._tint=[255,255,255,255],z.constantAttenuation=1,z.linearAttenuation=0,z.quadraticAttenuation=0,z.uModelMatrix=new b.default.Matrix,z.uViewMatrix=new b.default.Matrix,z.uMVMatrix=new b.default.Matrix,z.uPMatrix=new b.default.Matrix,z.uNMatrix=new b.default.Matrix("mat3"),z.curMatrix=new b.default.Matrix("mat3"),z._currentNormal=new b.default.Vector(0,0,1),z._curCamera=new b.default.Camera(S(z)),z._curCamera._computeCameraDefaultSettings(),z._curCamera._setDefaultCamera(),z.filterCamera=new b.default.Camera(S(z)),z.filterCamera._computeCameraDefaultSettings(),z.filterCamera._setDefaultCamera(),z.prevTouches=[],z.zoomVelocity=0,z.rotateVelocity=new b.default.Vector(0,0),z.moveVelocity=new b.default.Vector(0,0),z.executeZoom=!1,z.executeRotateAndMove=!1,z.specularShader=void 0,z.sphereMapping=void 0,z.diffusedShader=void 0,z._defaultLightShader=void 0,z._defaultImmediateModeShader=void 0,z._defaultNormalShader=void 0,z._defaultColorShader=void 0,z._defaultPointShader=void 0,z.userFillShader=void 0,z.userStrokeShader=void 0,z.userPointShader=void 0,z.retainedMode={geometry:{},buffers:{stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(z)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(z)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(z)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(z))],fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(z),z._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(z)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)],text:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)]}},z.immediateMode={geometry:new b.default.Geometry,shapeMode:w.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(z),z._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(z)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)],stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(z)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(z)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(z)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(z))],point:z.GL.createBuffer()}},z.pointSize=5,z.curStrokeWeight=1,z.curStrokeCap=w.ROUND,z.curStrokeJoin=w.ROUND,z.textures=new Map,z.framebuffers=new Set,z.activeFramebuffers=[],z.filterShader=void 0,z.filterLayer=void 0,z.filterLayerTemp=void 0,z.defaultFilterShaders={},z.textureMode=w.IMAGE,z.textureWrapX=w.CLAMP,z.textureWrapY=w.CLAMP,z._tex=null,z._curveTightness=6,z._lookUpTableBezier=[],z._lookUpTableQuadratic=[],z._lutBezierDetail=0,z._lutQuadraticDetail=0,z.isProcessingVertices=!1,z._tessy=z._initTessy(),z.fontInfos={},z._curShader=void 0,z;throw new TypeError("Cannot call a class as a function")}return fe=le,(Q=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new I.default(this)}},{key:"endGeometry",value:function(){var z;if(this.geometryBuilder)return z=this.geometryBuilder.finish(),this.geometryBuilder=void 0,z;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(z){return this.beginGeometry(),z(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(z){var ye={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};z._glAttributes=null===z._glAttributes?ye:Object.assign(ye,z._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?w.WEBGL2:w.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var z=this.drawingContext;z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.viewport(0,0,z.drawingBufferWidth,z.drawingBufferHeight),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var z=this.drawingContext;return z.getParameter(z.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(z,ye){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Je=this._maxTextureSize,je=(Je=Math.floor(Je/this.pixelDensity()),Math.min(z,Je));return Je=Math.min(ye,Je),je===z&&Je===ye||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(je,", height: ").concat(Je,".")),{adjustedWidth:je,adjustedHeight:Je}}},{key:"_resetContext",value:function(z,ye){var je,Je=this.width,gt=this.height,$t=this.canvas.id,Ct=this._pInst instanceof b.default.Graphics;Ct?((je=this._pInst).canvas.parentNode.removeChild(je.canvas),je.canvas=document.createElement("canvas"),(je._pInst._userNode||document.body).appendChild(je.canvas),b.default.Element.call(je,je.canvas,je._pInst),je.width=Je,je.height=gt):((je=this.canvas)&&je.parentNode.removeChild(je),(je=document.createElement("canvas")).id=$t,(this._pInst._userNode||document.body).appendChild(je),this._pInst.canvas=je,this.canvas=je),$t=new b.default.RendererGL(this._pInst.canvas,this._pInst,!Ct),this._pInst._setProperty("_renderer",$t),$t.resize(Je,gt),$t._applyDefaults(),Ct||this._pInst._elements.push($t),"function"==typeof ye&&setTimeout(function(){ye.apply(window._renderer,z)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Je=(Je=this._pInst).color.apply(Je,arguments);this.clear(Je.levels[0]/255,Je.levels[1]/255,Je.levels[2]/255,Je=Je.levels[3]/255)}},{key:"fill",value:function(z,ye,je,Je){var gt=b.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=gt._array,this.drawMode=w.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(z,ye,je,Je){var gt=b.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=gt._array}},{key:"strokeCap",value:function(z){this.curStrokeCap=z}},{key:"strokeJoin",value:function(z){this.curStrokeJoin=z}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(z,ye){z.width===ye.width&&z.height===ye.height||z.resize(ye.width,ye.height),z.pixelDensity()!==ye.pixelDensity()&&z.pixelDensity(ye.pixelDensity())}},{key:"filter",value:function(){var z,ye,je=this,Je=this.getFilterLayer(),gt=void 0,Ct=void 0,$t=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(Ct=arguments.length<=0?void 0:arguments[0],q(z={},w.BLUR,3),q(z,w.POSTERIZE,4),q(z,w.THRESHOLD,.5),gt=Ct in z&&void 0===(arguments.length<=1?void 0:arguments[1])?z[Ct]:arguments.length<=1?void 0:arguments[1],Ct in this.defaultFilterShaders||(this.defaultFilterShaders[Ct]=new b.default.Shader(Je._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",oe[Ct])),this.filterShader=this.defaultFilterShaders[Ct]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),yt=(this.matchSize(Je,$t),Je.draw(function(){return je._pInst.clear()}),[1/($t.width*$t.pixelDensity()),1/($t.height*$t.pixelDensity())]);Ct===w.BLUR?(ye=this.getFilterLayerTemp(),this.matchSize(ye,$t),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(w.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",yt),this.filterShader.setUniform("canvasSize",[$t.width,$t.height]),this.filterShader.setUniform("radius",Math.max(1,gt)),ye.draw(function(){je.filterShader.setUniform("direction",[1,0]),je.filterShader.setUniform("tex0",$t),je._pInst.clear(),je._pInst.shader(je.filterShader),je._pInst.noLights(),je._pInst.plane($t.width,$t.height)}),Je.draw(function(){je.filterShader.setUniform("direction",[0,1]),je.filterShader.setUniform("tex0",ye),je._pInst.clear(),je._pInst.shader(je.filterShader),je._pInst.noLights(),je._pInst.plane($t.width,$t.height)}),this._pInst.pop()):Je.draw(function(){je._pInst.noStroke(),je._pInst.blendMode(w.BLEND),je._pInst.shader(je.filterShader),je.filterShader.setUniform("tex0",$t),je.filterShader.setUniform("texelSize",yt),je.filterShader.setUniform("canvasSize",[$t.width,$t.height]),je.filterShader.setUniform("filterParameter",gt),je._pInst.noLights(),je._pInst.plane($t.width,$t.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(w.CORNER),this._pInst.blendMode(w.BLEND),$t.filterCamera._resize(),this._pInst.setCamera($t.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Je,-$t.width/2,-$t.height/2,$t.width,$t.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(z){return z?this._pInst.pixelDensity(z):this._pInst.pixelDensity()}},{key:"blendMode",value:function(z){z===w.DARKEST||z===w.LIGHTEST||z===w.ADD||z===w.BLEND||z===w.SUBTRACT||z===w.SCREEN||z===w.EXCLUSION||z===w.REPLACE||z===w.MULTIPLY||z===w.REMOVE?this.curBlendMode=z:z!==w.BURN&&z!==w.OVERLAY&&z!==w.HARD_LIGHT&&z!==w.SOFT_LIGHT&&z!==w.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(z,ye){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(w.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,z/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,ye/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(g(k(le.prototype),"beginClip",this).call(this,z),this.drawTarget()._isClipApplied=!0,z=this.GL).clearStencil(0),z.clear(z.STENCIL_BUFFER_BIT),z.enable(z.STENCIL_TEST),this._stencilTestOn=!0,z.stencilFunc(z.ALWAYS,1,255),z.stencilOp(z.KEEP,z.KEEP,z.REPLACE),z.disable(z.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var z=this.GL;z.stencilOp(z.KEEP,z.KEEP,z.KEEP),z.stencilFunc(this._clipInvert?z.EQUAL:z.NOTEQUAL,0,255),z.enable(z.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),g(k(le.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(z){this.curStrokeWeight!==z&&(this.pointSize=z,this.curStrokeWeight=z)}},{key:"_getPixel",value:function(z,ye){var je=this.GL;return re(je,null,z,ye,je.RGBA,je.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var z,ye,je=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):je._setProperty("pixels",ge(je.pixels,ye=this.GL,null,0,0,this.width*(z=this._pInst._pixelDensity),this.height*z,ye.RGBA,ye.UNSIGNED_BYTE,this.height*z))}},{key:"updatePixels",value:function(){var z=this._getTempFramebuffer();z.pixels=this._pixelsState.pixels,z.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(w.CENTER),this._pInst.image(z,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:w.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:w.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(z){return void 0!==this.retainedMode.geometry[z]}},{key:"viewport",value:function(z,ye){this._viewport=[0,0,z,ye],this.GL.viewport(0,0,z,ye)}},{key:"resize",value:function(gt,Je){b.default.Renderer.prototype.resize.call(this,gt,Je),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var je=(void 0!==(gt=this._pixelsState).pixels&&gt._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);Je=!1,gt=void 0;try{for(var Ct,$t=this.framebuffers[Symbol.iterator]();!(je=(Ct=$t.next()).done);je=!0)Ct.value._canvasSizeChanged()}catch(yt){Je=!0,gt=yt}finally{try{je||null==$t.return||$t.return()}finally{if(Je)throw gt}}}},{key:"clear",value:function(){var z=(arguments.length<=0?void 0:arguments[0])||0,ye=(arguments.length<=1?void 0:arguments[1])||0,je=(arguments.length<=2?void 0:arguments[2])||0,Je=(arguments.length<=3?void 0:arguments[3])||0,gt=this.activeFramebuffer();gt&&gt.format===w.UNSIGNED_BYTE&&!gt.antialias&&0===Je&&(Je=1e-10),this.GL.clearColor(z*Je,ye*Je,je*Je,Je),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(z,ye,je,Je,gt,Ct){16===arguments.length?b.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([z,ye,0,0,je,Je,0,0,0,0,1,0,gt,Ct,0,1])}},{key:"translate",value:function(z,ye,je){return z instanceof b.default.Vector&&(je=z.z,ye=z.y,z=z.x),this.uModelMatrix.translate([z,ye,je]),this}},{key:"scale",value:function(z,ye,je){return this.uModelMatrix.scale(z,ye,je),this}},{key:"rotate",value:function(z,ye){return void 0===ye?this.rotateZ(z):(b.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(z){return this.rotate(z,1,0,0),this}},{key:"rotateY",value:function(z){return this.rotate(z,0,1,0),this}},{key:"rotateZ",value:function(z){return this.rotate(z,0,0,1),this}},{key:"push",value:function(){var z=b.default.Renderer.prototype.push.apply(this),ye=z.properties;return ye.uModelMatrix=this.uModelMatrix.copy(),ye.uViewMatrix=this.uViewMatrix.copy(),ye.uPMatrix=this.uPMatrix.copy(),ye._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),ye.ambientLightColors=this.ambientLightColors.slice(),ye.specularColors=this.specularColors.slice(),ye.directionalLightDirections=this.directionalLightDirections.slice(),ye.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),ye.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),ye.pointLightPositions=this.pointLightPositions.slice(),ye.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),ye.pointLightSpecularColors=this.pointLightSpecularColors.slice(),ye.spotLightPositions=this.spotLightPositions.slice(),ye.spotLightDirections=this.spotLightDirections.slice(),ye.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),ye.spotLightSpecularColors=this.spotLightSpecularColors.slice(),ye.spotLightAngle=this.spotLightAngle.slice(),ye.spotLightConc=this.spotLightConc.slice(),ye.userFillShader=this.userFillShader,ye.userStrokeShader=this.userStrokeShader,ye.userPointShader=this.userPointShader,ye.pointSize=this.pointSize,ye.curStrokeWeight=this.curStrokeWeight,ye.curStrokeColor=this.curStrokeColor,ye.curFillColor=this.curFillColor,ye.curAmbientColor=this.curAmbientColor,ye.curSpecularColor=this.curSpecularColor,ye.curEmissiveColor=this.curEmissiveColor,ye._hasSetAmbient=this._hasSetAmbient,ye._useSpecularMaterial=this._useSpecularMaterial,ye._useEmissiveMaterial=this._useEmissiveMaterial,ye._useShininess=this._useShininess,ye._useMetalness=this._useMetalness,ye.constantAttenuation=this.constantAttenuation,ye.linearAttenuation=this.linearAttenuation,ye.quadraticAttenuation=this.quadraticAttenuation,ye._enableLighting=this._enableLighting,ye._useNormalMaterial=this._useNormalMaterial,ye._tex=this._tex,ye.drawMode=this.drawMode,ye._currentNormal=this._currentNormal,ye.curBlendMode=this.curBlendMode,ye.activeImageLight=this.activeImageLight,ye.textureMode=this.textureMode,z}},{key:"pop",value:function(){var z;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var ye=arguments.length,je=new Array(ye),Je=0;Je<ye;Je++)je[Je]=arguments[Je];(z=g(k(le.prototype),"pop",this)).call.apply(z,[this].concat(je)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var z=this.drawTarget();z._isClipApplied!==this._stencilTestOn&&(z._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var z=this.userStrokeShader;return z&&z.isStrokeShader()?z:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(z){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(Se)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",z),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var z=this.userFillShader;if(this._useNormalMaterial&&(!z||!z.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getImmediateModeShader();return z}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var z=this.userFillShader;if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getColorShader();return z}},{key:"_getImmediatePointShader",value:function(){var z=this.userPointShader;return z&&z.isPointShader()?z:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._defaultLightShader=this._pInst._glAttributes.perPixelLighting?new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+we.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+we.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===w.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+we.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(z,ye){var je="";return this.webglVersion===w.WEBGL2&&(je+="#version 300 es\n#define WEBGL2\n"),"vert"===z?je+="#define VERTEX_SHADER\n":"frag"===z&&(je+="#define FRAGMENT_SHADER\n"),ye&&(je+="precision ".concat(ye," float;\n")),je}},{key:"_getEmptyTexture",value:function(){var z;return this._emptyTexture||((z=new b.default.Image(1,1)).set(0,0,255),this._emptyTexture=new b.default.Texture(this,z)),this._emptyTexture}},{key:"getTexture",value:function(z){z instanceof b.default.Framebuffer&&(z=z.color);var ye=this.textures.get(z);return ye||(ye=new b.default.Texture(this,z),this.textures.set(z,ye),ye)}},{key:"getDiffusedTexture",value:function(z){var ye,je,Je=this;return null!=this.diffusedTextures.get(z)?this.diffusedTextures.get(z):(ye=Math.floor(z.height/z.width*200),je=this._pInst.createFramebuffer({width:200,height:ye,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(we.imageLightVert,we.imageLightDiffusedFrag)),je.draw(function(){Je._pInst.shader(Je.diffusedShader),Je.diffusedShader.setUniform("environmentMap",z),Je._pInst.noStroke(),Je._pInst.rectMode(w.CENTER),Je._pInst.noLights(),Je._pInst.rect(0,0,200,ye)}),this.diffusedTextures.set(z,je),je)}},{key:"getSpecularTexture",value:function(z){var ye=this;if(null!=this.specularTextures.get(z))return this.specularTextures.get(z);for(var je,Je=[],gt=this._pInst.createFramebuffer({width:512,height:512,density:1}),Ct=Math.log(512)/Math.log(2),$t=(this.specularShader||(this.specularShader=this._pInst.createShader(we.imageLightVert,we.imageLightSpecularFrag)),512);1<=$t;$t/=2)!function(yt){gt.resize(yt,yt);var Ut=1-Math.log(yt)/Math.log(2)/Ct;gt.draw(function(){ye._pInst.shader(ye.specularShader),ye._pInst.clear(),ye.specularShader.setUniform("environmentMap",z),ye.specularShader.setUniform("roughness",Ut),ye._pInst.noStroke(),ye._pInst.noLights(),ye._pInst.plane(yt,yt)}),Je.push(gt.get().drawingContext.getImageData(0,0,yt,yt))}($t);return gt.remove(),je=new d.MipmapTexture(this,Je,{}),this.specularTextures.set(z,je),je}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(z){return new b.default.Framebuffer(this,z)}},{key:"_setStrokeUniforms",value:function(z){z.bindShader(),z.setUniform("uUseLineColor",this._useLineColor),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uStrokeWeight",this.curStrokeWeight),z.setUniform("uStrokeCap",K[this.curStrokeCap]),z.setUniform("uStrokeJoin",$[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(z){var ye=this,je=(z.bindShader(),this.mixedSpecularColor=p(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Je,gt){return ye.curFillColor[gt]*ye._useMetalness+Je*(1-ye._useMetalness)})),z.setUniform("uUseVertexColor",this._useVertexColor),z.setUniform("uMaterialColor",this.curFillColor),z.setUniform("isTexture",!!this._tex),this._tex&&z.setUniform("uSampler",this._tex),z.setUniform("uTint",this._tint),z.setUniform("uHasSetAmbient",this._hasSetAmbient),z.setUniform("uAmbientMatColor",this.curAmbientColor),z.setUniform("uSpecularMatColor",this.mixedSpecularColor),z.setUniform("uEmissiveMatColor",this.curEmissiveColor),z.setUniform("uSpecular",this._useSpecularMaterial),z.setUniform("uEmissive",this._useEmissiveMaterial),z.setUniform("uShininess",this._useShininess),z.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(z),z.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);z.setUniform("uPointLightCount",je),z.setUniform("uPointLightLocation",this.pointLightPositions),z.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),z.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),z.setUniform("uDirectionalLightCount",je=this.directionalLightDiffuseColors.length/3),z.setUniform("uLightingDirection",this.directionalLightDirections),z.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),z.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),je=this.ambientLightColors.length/3,this.mixedAmbientLight=p(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Je){return Math.max(0,Je-=ye._useMetalness)})),z.setUniform("uAmbientLightCount",je),z.setUniform("uAmbientColor",this.mixedAmbientLight),z.setUniform("uSpotLightCount",je=this.spotLightDiffuseColors.length/3),z.setUniform("uSpotLightAngle",this.spotLightAngle),z.setUniform("uSpotLightConc",this.spotLightConc),z.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),z.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),z.setUniform("uSpotLightLocation",this.spotLightPositions),z.setUniform("uSpotLightDirection",this.spotLightDirections),z.setUniform("uConstantAttenuation",this.constantAttenuation),z.setUniform("uLinearAttenuation",this.linearAttenuation),z.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),z.bindTextures()}},{key:"_setImageLightUniforms",value:function(z){var ye;z.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(ye=this.getDiffusedTexture(this.activeImageLight),z.setUniform("environmentMapDiffused",ye),ye=this.getSpecularTexture(this.activeImageLight),z.setUniform("environmentMapSpecular",ye))}},{key:"_setPointUniforms",value:function(z){z.bindShader(),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(z,ye,je,Je,gt){this.GL.bindBuffer(ye=ye||this.GL.ARRAY_BUFFER,z),void 0!==je&&((z=je)instanceof b.default.DataArray?z=je.dataArray():z instanceof(Je||Float32Array)||(z=new(Je||Float32Array)(z)),this.GL.bufferData(ye,z,gt||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(z,ye){return z.length===ye.length&&z.every(function(je,Je){return je===ye[Je]})}},{key:"_isTypedArray",value:function(z){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(ye){return z instanceof ye})}},{key:"_flatten",value:function(z){return z.flat()}},{key:"_vToNArray",value:function(z){return z.flatMap(function(ye){return[ye.x,ye.y,ye.z]})}},{key:"_bezierCoefficients",value:function(z){var ye=z*z,je=1-z,Je=je*je;return[Je*je,3*Je*z,3*je*ye,ye*z]}},{key:"_quadraticCoefficients",value:function(z){var ye=1-z;return[ye*ye,2*ye*z,z*z]}},{key:"_bezierToCatmull",value:function(z){return[z[1],z[1]+(z[2]-z[0])/this._curveTightness,z[2]-(z[3]-z[1])/this._curveTightness,z[2]]}},{key:"_initTessy",value:function(){var z=new D.default.GluTesselator;return z.gluTessCallback(D.default.gluEnum.GLU_TESS_VERTEX_DATA,function(ye,je){var Je=!0,gt=!1,Ct=void 0;try{for(var $t,yt=ye[Symbol.iterator]();!(Je=($t=yt.next()).done);Je=!0)je.push($t.value)}catch(Xt){gt=!0,Ct=Xt}finally{try{Je||null==yt.return||yt.return()}finally{if(gt)throw Ct}}}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_BEGIN,function(ye){ye!==D.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(ye))}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_ERROR,function(ye){console.log("error callback"),console.log("error number: ".concat(ye))}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_COMBINE,function(ye,je,Je){for(var gt=new Array(b.default.RendererGL.prototype.tessyVertexSize).fill(0),Ct=0;Ct<Je.length;Ct++)for(var $t=0;$t<gt.length;$t++)0!==Je[Ct]&&je[Ct]&&(gt[$t]+=je[Ct][$t]*Je[Ct]);return gt}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_EDGE_FLAG,function(ye){}),z.gluTessProperty(D.default.gluEnum.GLU_TESS_WINDING_RULE,D.default.windingRule.GLU_TESS_WINDING_NONZERO),z}},{key:"_triangulate",value:function(z){var ye=z[0]?z[0][2]:void 0,je=!0,Je=!0,Ut=!1,ft=void 0;try{for(var gt,Ct=z[Symbol.iterator]();!(Je=(gt=Ct.next()).done);Je=!0)for(var $t=gt.value,yt=0;yt<$t.length;yt+=b.default.RendererGL.prototype.tessyVertexSize)if($t[yt+2]!==ye){je=!1;break}}catch(Yn){Ut=!0,ft=Yn}finally{try{Je||null==Ct.return||Ct.return()}finally{if(Ut)throw ft}}this._tessy.gluTessNormal(0,0,je?1:0);var Xt=(this._tessy.gluTessBeginPolygon(Ut=[]),!0),jt=void(ft=!1);try{for(var Lt,Bt=z[Symbol.iterator]();!(Xt=(Lt=Bt.next()).done);Xt=!0){var Et=Lt.value;this._tessy.gluTessBeginContour();for(var Kt=0;Kt<Et.length;Kt+=b.default.RendererGL.prototype.tessyVertexSize){var yn=Et.slice(Kt,Kt+b.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(yn,yn)}this._tessy.gluTessEndContour()}}catch(Yn){ft=!0,jt=Yn}finally{try{Xt||null==Bt.return||Bt.return()}finally{if(ft)throw jt}}return this._tessy.gluTessEndPolygon(),Ut}}])&&m(fe.prototype,Q),le}(b.default.Renderer),b.default.prototype._assert3d=function(Q){if(!this._renderer.isP3D)throw new Error("".concat(Q,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},b.default.RendererGL.prototype.tessyVertexSize=12,Z.default=Y=b.default.RendererGL},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(a,be,Z){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(w,I){return function(D){if(Array.isArray(D))return D}(w)||function(D,d){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D)){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=D[Symbol.iterator]();!(h=(g=x.next()).done)&&(f.push(g.value),!d||f.length!==d);h=!0);}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}}(w,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.Shader=function(){function w(f,h,p){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._renderer=f,this._vertSrc=h,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:m.uniforms||{},declarations:m.declarations,helpers:m.helpers||{},vertex:m.vertex||{},fragment:m.fragment||{},modified:{vertex:m.modified&&m.modified.vertex||{},fragment:m.modified&&m.modified.fragment||{}}}}var I,D;return I=w,(D=[{key:"shaderSrc",value:function(k,h){var p,m,g,x,E,S=(k=C(k.split("void main"),2))[0],q=(k=k[1],"");for(p in this.hooks.uniforms)q+="uniform ".concat(p,";\n");for(m in this.hooks.declarations&&(q+=this.hooks.declarations+"\n"),this.hooks[h].declarations&&(q+=this.hooks[h].declarations+"\n"),this.hooks.helpers)q+="".concat(m).concat(this.hooks.helpers[m],"\n");for(g in this.hooks[h])"declarations"!==g&&(x=(E=C(g.split(" "),2))[0],E=E[1],this.hooks.modified[h][g]&&(q+="#define AUGMENTED_HOOK_"+E+"\n"),q+=x+" HOOK_"+E+this.hooks[h][g]+"\n");return S+q+"void main"+k}},{key:"version",value:function(){var f=/#version (.+)$/.exec(this.vertSrc());return f?f[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var f in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[f]?"[MODIFIED] ":"")+f+this.hooks.vertex[f]);for(var h in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[h]?"[MODIFIED] ":"")+h+this.hooks.fragment[h]);for(var p in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(p+this.hooks.helpers[p])}},{key:"modify",value:function(f){M.default._validateParameters("p5.Shader.modify",arguments);var h,p={vertex:{},fragment:{},helpers:{}};for(h in f)"declarations"!==h&&"uniforms"!==h&&("vertexDeclarations"===h?p.vertex.declarations=(p.vertex.declarations||"")+"\n"+f[h]:"fragmentDeclarations"===h?p.fragment.declarations=(p.fragment.declarations||"")+"\n"+f[h]:this.hooks.vertex[h]?p.vertex[h]=f[h]:this.hooks.fragment[h]?p.fragment[h]=f[h]:p.helpers[h]=f[h]);var m,g,x=Object.assign({},this.hooks.modified.vertex),E=Object.assign({},this.hooks.modified.fragment);for(m in p.vertex||{})"declarations"!==m&&(x[m]=!0);for(g in p.fragment||{})"declarations"!==g&&(E[g]=!0);return new M.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(f.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,f.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,p.fragment||{}),vertex:Object.assign({},this.hooks.vertex,p.vertex||{}),helpers:Object.assign({},this.hooks.helpers,p.helpers||{}),modified:{vertex:x,fragment:E}})}},{key:"init",value:function(){if(0===this._glProgram){var f,h=this._renderer.GL;if(this._vertShader=h.createShader(h.VERTEX_SHADER),h.shaderSource(this._vertShader,this.vertSrc()),h.compileShader(this._vertShader),!h.getShaderParameter(this._vertShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._vertShader),console.error(f),null;if(this._fragShader=h.createShader(h.FRAGMENT_SHADER),h.shaderSource(this._fragShader,this.fragSrc()),h.compileShader(this._fragShader),!h.getShaderParameter(this._fragShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._fragShader),console.error(f),null;this._glProgram=h.createProgram(),h.attachShader(this._glProgram,this._vertShader),h.attachShader(this._glProgram,this._fragShader),h.linkProgram(this._glProgram),h.getProgramParameter(this._glProgram,h.LINK_STATUS)||M.default._friendlyError("Snap! Error linking shader program: ".concat(h.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var f in this.hooks.uniforms){var p,h=C(f.split(" "),2)[1];null!=(p=(f=this.hooks.uniforms[f])instanceof Function?f():f)&&this.setUniform(h,p)}}},{key:"copyToContext",value:function(f){var h=new M.default.Shader(f._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(f),h}},{key:"ensureCompiledOnContext",value:function(f){if(0!==this._glProgram&&this._renderer!==f._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=f._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_ATTRIBUTES),p=0;p<h;++p){var m=f.getActiveAttrib(this._glProgram,p),g=m.name,x=f.getAttribLocation(this._glProgram,g),E={};E.name=g,E.location=x,E.index=p,E.type=m.type,E.size=m.size,this.attributes[g]=E}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_UNIFORMS),p=0,m=0;m<h;++m){var g=f.getActiveUniform(this._glProgram,m),x={},E=(x.location=f.getUniformLocation(this._glProgram,g.name),x.size=g.size,g.name);1<g.size&&(E=E.substring(0,E.indexOf("[0]"))),x.name=E,x.type=g.type,x._cachedData=void 0,x.type===f.SAMPLER_2D&&(x.samplerIndex=p,p++,this.samplers.push(x)),x.isArray=1<g.size||x.type===f.FLOAT_MAT3||x.type===f.FLOAT_MAT4||x.type===f.FLOAT_VEC2||x.type===f.FLOAT_VEC3||x.type===f.FLOAT_VEC4||x.type===f.INT_VEC2||x.type===f.INT_VEC4||x.type===f.INT_VEC3,this.uniforms[E]=x}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var f=this._renderer.GL,h=!0,p=!1,m=void 0;try{for(var g,x=this.samplers[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value,S=E.texture;void 0===S&&(S=this._renderer._getEmptyTexture()),f.activeTexture(f.TEXTURE0+E.samplerIndex),S.bindTexture(),S.update(),f.uniform1i(E.location,E.samplerIndex)}}catch(k){p=!0,m=k}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"updateTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value.texture;x&&x.update()}}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"unbindTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)this.setUniform(m.value.name,this._renderer._getEmptyTexture())}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"_setMatrixUniforms",value:function(){var f=this._renderer.uModelMatrix,h=this._renderer.uViewMatrix,p=this._renderer.uPMatrix,m=f.copy().mult(h),g=(this._renderer.uMVMatrix=m).copy();g.mult(p),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",h.mat4),this.setUniform("uProjectionMatrix",p.mat4),this.setUniform("uModelMatrix",f.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){return this._renderer._curShader!==this&&(this._renderer.GL.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(f,h){var p=this.uniforms[f];if(p){var m=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,h))return;p._cachedData=h.slice(0)}else{if(p._cachedData&&p._cachedData===h)return;p._cachedData=Array.isArray(h)?h.slice(0):h}var g=p.location;switch(this.useProgram(),p.type){case m.BOOL:m.uniform1i(g,!0===h?1:0);break;case m.INT:1<p.size?h.length&&m.uniform1iv(g,h):m.uniform1i(g,h);break;case m.FLOAT:1<p.size?h.length&&m.uniform1fv(g,h):m.uniform1f(g,h);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(g,!1,h);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(g,!1,h);break;case m.FLOAT_VEC2:1<p.size?h.length&&m.uniform2fv(g,h):m.uniform2f(g,h[0],h[1]);break;case m.FLOAT_VEC3:1<p.size?h.length&&m.uniform3fv(g,h):m.uniform3f(g,h[0],h[1],h[2]);break;case m.FLOAT_VEC4:1<p.size?h.length&&m.uniform4fv(g,h):m.uniform4f(g,h[0],h[1],h[2],h[3]);break;case m.INT_VEC2:1<p.size?h.length&&m.uniform2iv(g,h):m.uniform2i(g,h[0],h[1]);break;case m.INT_VEC3:1<p.size?h.length&&m.uniform3iv(g,h):m.uniform3i(g,h[0],h[1],h[2]);break;case m.INT_VEC4:1<p.size?h.length&&m.uniform4iv(g,h):m.uniform4i(g,h[0],h[1],h[2],h[3]);break;case m.SAMPLER_2D:if("number"==typeof h){if(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h))return console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;m.activeTexture(h),m.uniform1i(g,h)}else m.activeTexture(m.TEXTURE0+p.samplerIndex),p.texture=h instanceof M.default.Texture?h:this._renderer.getTexture(h),m.uniform1i(g,p.samplerIndex),p.texture.src.gifProperties&&p.texture.src._animateGif(this._renderer._pInst);break;case m.SAMPLER_CUBE:case m.SAMPLER_3D:case m.SAMPLER_2D_SHADOW:case m.SAMPLER_2D_ARRAY:case m.SAMPLER_2D_ARRAY_SHADOW:case m.SAMPLER_CUBE_SHADOW:case m.INT_SAMPLER_2D:case m.INT_SAMPLER_3D:case m.INT_SAMPLER_CUBE:case m.INT_SAMPLER_2D_ARRAY:case m.UNSIGNED_INT_SAMPLER_2D:case m.UNSIGNED_INT_SAMPLER_3D:case m.UNSIGNED_INT_SAMPLER_CUBE:case m.UNSIGNED_INT_SAMPLER_2D_ARRAY:"number"==typeof h&&(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h)?console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(m.activeTexture(h),m.uniform1i(g,h)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(f){return void 0!==f})}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(f,h,p,m,g,x){var E;return f&&-1!==(f=f.location)&&(E=this._renderer.GL,this._renderer.registerEnabled.has(f)||(E.enableVertexAttribArray(f),this._renderer.registerEnabled.add(f)),this._renderer.GL.vertexAttribPointer(f,h,p||E.FLOAT,m||!1,g||0,x||0)),this}},{key:"disableRemainingAttributes",value:function(){var f=this,h=!0,p=!1,m=void 0;try{for(var g,x=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)!function(){var E=g.value;Object.keys(f.attributes).some(function(S){return f.attributes[S].location===E})||(f._renderer.GL.disableVertexAttribArray(E),f._renderer.registerEnabled.delete(E))}()}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}}])&&b(I.prototype,D),w}(),Z.default=a=M.default.Shader},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(a,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.checkWebGLCapabilities=x,Z.default=Z.MipmapTexture=void 0;var b=(g=a("../core/main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var k,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=J?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(q,k,G):q[k]=E[k])}return q.default=E,S&&S.set(E,q),q}(a("../core/constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){return(D=Object.setPrototypeOf||function(k,q){return k.__proto__=q,k})(E,S)}function f(E){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}function h(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function p(E,S){for(var k=0;k<S.length;k++){var q=S[k];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function m(E,S,k){S&&p(E.prototype,S),k&&p(E,k)}b.default.Texture=function(){function E(V,k,G){h(this,E),this._renderer=V;var J=this._renderer.GL;return G=G||{},this.src=k,this.glTex=void 0,this.glTarget=J.TEXTURE_2D,this.glFormat=G.format||J.RGBA,this.mipmaps=!1,this.glMinFilter=G.minFilter||J.LINEAR,this.glMagFilter=G.magFilter||J.LINEAR,this.glWrapS=G.wrapS||J.CLAMP_TO_EDGE,this.glWrapT=G.wrapT||J.CLAMP_TO_EDGE,this.glDataType=G.dataType||J.UNSIGNED_BYTE,G=x(V),this.glFormat!==J.HALF_FLOAT||G.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=J.FLOAT),this.glFormat!==J.HALF_FLOAT||this.glMinFilter!==J.LINEAR&&this.glMagFilter!==J.LINEAR||G.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===J.LINEAR&&(this.glMinFilter=J.NEAREST),this.glMagFilter===J.LINEAR&&(this.glMagFilter=J.NEAREST)),this.glFormat!==J.FLOAT||G.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=J.UNSIGNED_BYTE),this.glFormat!==J.FLOAT||this.glMinFilter!==J.LINEAR&&this.glMagFilter!==J.LINEAR||G.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===J.LINEAR&&(this.glMinFilter=J.NEAREST),this.glMagFilter===J.LINEAR&&(this.glMagFilter=J.NEAREST)),this.isSrcMediaElement=void 0!==b.default.MediaElement&&k instanceof b.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==b.default.Element&&k instanceof b.default.Element&&!(k instanceof b.default.Graphics)&&!(k instanceof b.default.Renderer),this.isSrcP5Image=k instanceof b.default.Image,this.isSrcP5Graphics=k instanceof b.default.Graphics,this.isSrcP5Renderer=k instanceof b.default.Renderer,this.isImageData=typeof ImageData<"u"&&k instanceof ImageData,this.isFramebufferTexture=k instanceof b.default.FramebufferTexture,V=this._getTextureDataFromSource(),this.width=V.width,this.height=V.height,this.init(V),this}return m(E,[{key:"_getTextureDataFromSource",value:function(){var S;return this.isFramebufferTexture?S=this.src.rawTexture():this.isSrcP5Image?S=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),S=this.src.canvas||this.src.elt):this.isImageData&&(S=this.src),S}},{key:"init",value:function(S){var k,q=this._renderer.GL;this.isFramebufferTexture||(this.glTex=q.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,this.glMagFilter),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(k=new Uint8Array([1,1,1,1]),q.texImage2D(this.glTarget,0,q.RGBA,1,1,0,this.glFormat,this.glDataType,k)):q.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S))}},{key:"update",value:function(){var S,k,q,J=this.src;return 0!==J.width&&0!==J.height&&!this.isFramebufferTexture&&(S=this._getTextureDataFromSource(),k=!1,q=this._renderer.GL,S.width!==this.width||S.height!==this.height?(k=!0,this.width=S.width||J.width,this.height=S.height||J.height,this.isSrcP5Image?J.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&J.setModified(!0)):this.isSrcP5Image?J.isModified()&&J.setModified(!(k=!0)):this.isSrcMediaElement?J.isModified()?J.setModified(!(k=!0)):J.loadedmetadata&&this._videoPrevUpdateTime!==J.time()&&(this._videoPrevUpdateTime=J.time(),k=!0):this.isImageData?J._dirty&&(k=!(J._dirty=!1)):k=!0,k&&(this.bindTexture(),q.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S)),k)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(S,k){var q=this._renderer.GL;this.glMinFilter=this.glFilter(S),this.glMagFilter=this.glFilter(k),this.bindTexture(),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,this.glMinFilter),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(S){var k=this._renderer.GL;return S===w.NEAREST?k.NEAREST:k.LINEAR}},{key:"setWrapMode",value:function(S,k){function q(K){return!(K&K-1)}var J=this._renderer.GL,V=(V=this._getTextureDataFromSource()).naturalWidth&&V.naturalHeight?(G=V.naturalWidth,V.naturalHeight):(G=this.width,this.height),G=q(G);V=q(V),S===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapS=J.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=J.CLAMP_TO_EDGE):S===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapS=J.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=J.CLAMP_TO_EDGE):this.glWrapS=J.CLAMP_TO_EDGE,k===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapT=J.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=J.CLAMP_TO_EDGE):k===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapT=J.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=J.CLAMP_TO_EDGE):this.glWrapT=J.CLAMP_TO_EDGE,this.bindTexture(),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,this.glWrapS),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),E}();var g=function(E){var S=q;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&D(S,E);var k=function d(E){return function(){var S,k=f(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=f(this).constructor,Reflect.construct(k,arguments,S)):k.apply(this,arguments),k=this,!S||"object"!==C(S)&&"function"!=typeof S){if(void 0!==k)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(q);function q(J,G,V){return h(this,q),G=(J=k.call(this,J,G,V))._renderer.GL,J.glMinFilter===G.LINEAR&&(J.glMinFilter=G.LINEAR_MIPMAP_LINEAR),J}return m(q,[{key:"glFilter",value:function(J){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(J){var G=this._renderer.GL;this.glTex=G.createTexture(),this.bindTexture();for(var V=0;V<J.length;V++)G.texImage2D(this.glTarget,V,this.glFormat,this.glFormat,this.glDataType,J[V]);this.glMinFilter=G.LINEAR_MIPMAP_LINEAR,G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,this.glMagFilter),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),q}(b.default.Texture);function x(J){var S=J.GL,k=(J=J.webglVersion)===w.WEBGL2?S.getExtension("EXT_color_buffer_float")&&S.getExtension("EXT_float_blend"):S.getExtension("OES_texture_float");return{float:k,floatLinear:k&&S.getExtension("OES_texture_float_linear"),halfFloat:J=S.getExtension(J===w.WEBGL2?"EXT_color_buffer_float":"OES_texture_half_float"),halfFloatLinear:J&&S.getExtension("OES_texture_half_float_linear")}}Z.MipmapTexture=g,Z.default=a=b.default.Texture},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(a,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.sub"),a("core-js/modules/web.dom-collections.iterator");var b,w=(b=a("../core/main"))&&b.__esModule?b:{default:b},I=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=D();if(S&&S.has(E))return S.get(E);var k,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=J?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(q,k,G):q[k]=E[k])}return q.default=E,S&&S.set(E,q),q}(a("../core/constants"));function D(){var E;return"function"!=typeof WeakMap?null:(D=function(){return E},E=new WeakMap)}function d(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function f(E,S){for(var k=0;k<S.length;k++){var q=S[k];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function h(E,S,k){S&&f(E.prototype,S),k&&f(E,k)}a("./p5.Shader"),a("./p5.RendererGL.Retained"),w.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},w.default.RendererGL.prototype.textWidth=function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):0};var p=function(){function E(S,k){d(this,E),this.width=S,this.height=k,this.infos=[]}return h(E,[{key:"findImage",value:function(S){var k,q,J=this.width*this.height;if(J<S)throw new Error("font is too complex to render in 3D");for(var G=this.infos.length-1;0<=G;--G){var V=this.infos[G];if(V.index+S<J){q=(k=V).imageData;break}}if(!k){try{q=new ImageData(this.width,this.height)}catch{var K=document.getElementsByTagName("canvas")[0],$=!K,ne=(K||((K=document.createElement("canvas")).style.display="none",document.body.appendChild(K)),K.getContext("2d"));ne&&(q=ne.createImageData(this.width,this.height)),$&&document.body.removeChild(K)}this.infos.push(k={index:0,imageData:q})}return ne=k.index,k.index+=S,q._dirty=!0,{imageData:q,index:ne}}}]),E}();function m(V,S,k,q,J){var G=V.imageData.data;V=4*V.index++,G[V++]=S,G[V++]=k,G[V++]=q,G[+V]=J}var g=Math.sqrt(3),x=function(){function E(S){d(this,E),this.font=S,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={}}return h(E,[{key:"getGlyphInfo",value:function(S){var k=this.glyphInfos[S.index];if(!k){var q=S.getBoundingBox(),J=q.x1,G=q.y1,V=q.x2-J,K=q.y2-G,$=S.path.commands;if(0==V||0==K||!$.length)return this.glyphInfos[S.index]={};for(var ne=[],Y=[],we=[],Se=8;0<=Se;--Se)we.push([]);for(Se=8;0<=Se;--Se)Y.push([]);var oe,ge,re,Q,fe=function(){function Rn(Sr,Bn,ur,bn){d(this,Rn),this.p0=Sr,this.c0=Bn,this.c1=ur,this.p1=bn}return h(Rn,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return w.default.Vector.sub(w.default.Vector.sub(this.p1,this.p0),w.default.Vector.mult(w.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Qn){var Bn=w.default.Vector.lerp(this.p0,this.c0,Qn),bn=w.default.Vector.lerp(this.c0,this.c1,Qn),ur=w.default.Vector.lerp(Bn,bn,Qn);return this.c1=w.default.Vector.lerp(this.c1,this.p1,Qn),this.c0=w.default.Vector.lerp(bn,this.c1,Qn),bn=w.default.Vector.lerp(ur,this.c0,Qn),Qn=new Rn(this.p0,Bn,ur,bn),this.p0=bn,Qn}},{key:"splitInflections",value:function(){var Sr=w.default.Vector.sub(this.c0,this.p0),Bn=w.default.Vector.sub(w.default.Vector.sub(this.c1,this.c0),Sr),ur=w.default.Vector.sub(w.default.Vector.sub(w.default.Vector.sub(this.p1,this.c1),Sr),w.default.Vector.mult(Bn,2)),bn=[],Qn=Bn.x*ur.y-Bn.y*ur.x;return 0!==Qn&&0<=(Sr=(ur=Sr.x*ur.y-Sr.y*ur.x)*ur-4*Qn*(Sr.x*Bn.y-Sr.y*Bn.x))&&(Qn<0&&(Qn=-Qn,ur=-ur),Sr=(-ur+(Bn=Math.sqrt(Sr)))/(2*Qn),0<(ur=(-ur-Bn)/(2*Qn))&&ur<1&&(bn.push(this.split(ur)),Sr=1-(1-Sr)/(1-ur)),0<Sr&&Sr<1&&bn.push(this.split(Sr))),bn.push(this),bn}}]),Rn}(),Ce=!0,it=!1,le=void 0;try{for(var z,ye=$[Symbol.iterator]();!(Ce=(z=ye.next()).done);Ce=!0){var je=z.value,Je=(je.x-J)/V,gt=(je.y-G)/K;if(!An(oe,ge,Je,gt)){switch(je.type){case"M":re=Je,Q=gt;break;case"L":Yn(oe,ge,Je,gt);break;case"Q":var Ct=(je.x1-J)/V,$t=(je.y1-G)/K;Kt([oe,Je,Ct],[ge,gt,$t],{x:oe,y:ge,cx:Ct,cy:$t});break;case"Z":An(oe,ge,re,Q)?ne.push({x:oe,y:ge}):(Yn(oe,ge,re,Q),ne.push({x:re,y:Q}));break;case"C":for(var yt=function(bt,On,zn,ur,bn,Qn,Pn,pt){bt=new fe(new w.default.Vector(bt,On),new w.default.Vector(zn,ur),new w.default.Vector(bn,Qn),new w.default.Vector(Pn,pt)).splitInflections();var rt=[],_t=30/g,vn=!0;On=!1,zn=void 0;try{for(var ir,Dr=bt[Symbol.iterator]();!(vn=(ir=Dr.next()).done);vn=!0){for(var Pr=ir.value,Br=[],In=void 0;!(.125<=(In=_t/Pr.quadError()));){var un=Math.pow(In,.3333333333333333),Tn=Pr.split(un),on=Pr.split(1-un/(1-un));rt.push(Tn),Br.push(Pr),Pr=on}In<1&&rt.push(Pr.split(.5)),rt.push(Pr),Array.prototype.push.apply(rt,Br.reverse())}}catch(mn){On=!0,zn=mn}finally{try{vn||null==Dr.return||Dr.return()}finally{if(On)throw zn}}return rt}(oe,ge,(je.x1-J)/V,(je.y1-G)/K,(je.x2-J)/V,(je.y2-G)/K,Je,gt),Ut=0;Ut<yt.length;Ut++){var Xt=yt[Ut].toQuadratic();Kt([Xt.x,Xt.x1,Xt.cx],[Xt.y,Xt.y1,Xt.cy],Xt)}break;default:throw new Error("unknown command type: ".concat(je.type))}oe=Je,ge=gt}}}catch(Rn){it=!0,le=Rn}finally{try{Ce||null==ye.return||ye.return()}finally{if(it)throw le}}for(var ft=ne.length,jt=this.strokeImageInfos.findImage(ft),Lt=jt.index,Bt=0;Bt<ft;++Bt){var Et=ne[Bt];m(jt,yn(Et.x),yn(Et.y),yn(Et.cx),yn(Et.cy))}(k=this.glyphInfos[S.index]={glyph:S,uGlyphRect:[q.x1,-q.y1,q.x2,-q.y2],strokeImageInfo:jt,strokes:ne,colInfo:Jn(we,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Jn(Y,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[k.colInfo.dimOffset,k.rowInfo.dimOffset]}return k;function Kt(Rn,Sr,Bn){var ur=ne.length;function bn(rt,_t,vn){for(var On=rt.length;0<On--;){var zn=rt[On];zn<_t&&(_t=zn),vn<zn&&(vn=zn)}return{min:_t,max:vn}}ne.push(Bn),Bn=bn(Rn,1,0),Rn=Math.max(Math.floor(9*Bn.min-.5),0);for(var Qn=Math.min(Math.ceil(9*Bn.max+.5),9),Pn=Rn;Pn<Qn;++Pn)we[Pn].push(ur);Bn=bn(Sr,1,0),Rn=Math.max(Math.floor(9*Bn.min-.5),0);for(var pt=Math.min(Math.ceil(9*Bn.max+.5),9),bt=Rn;bt<pt;++bt)Y[bt].push(ur)}function yn(Rn){return(Rn=255*Rn)<0?0:255<Rn?255:Rn}function Yn(Rn,Sr,Bn,ur){Kt([Rn,Bn],[Sr,ur],{x:Rn,y:Sr,cx:(Rn+Bn)/2,cy:(Sr+ur)/2})}function An(Rn,Sr,Bn,ur){return Math.abs(Bn-Rn)<1e-5&&Math.abs(ur-Sr)<1e-5}function Jn(Rn,Sr,Bn){for(var ur=Rn.length,bn=Sr.findImage(ur),Qn=(Sr=bn.index,0),Pn=0;Pn<ur;++Pn)Qn+=Rn[Pn].length;for(var pt=Bn.findImage(Qn),bt=0;bt<ur;++bt){var rt=Rn[bt],_t=rt.length,vn=pt.index;m(bn,vn>>7,127&vn,_t>>7,127&_t);for(var On=0;On<_t;++On){var zn=rt[On]+Lt;m(pt,zn>>7,127&zn,0,0)}}return{cellImageInfo:pt,dimOffset:Sr,dimImageInfo:bn}}}}]),E}();w.default.RendererGL.prototype._renderText=function(E,S,k,q,J){if(this._textFont&&"string"!=typeof this._textFont){if(!(J<=q)&&this._doFill){if(this._isOpenType()){E.push(),J=this._doStroke;var G=this.drawMode,V=(this._doStroke=!1,this.drawMode=I.TEXTURE,this._textFont.font),K=(K=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(V)),$=(k=this._textFont._handleAlignment(this,S,k,q),q=this._textSize/V.unitsPerEm,this.translate(k.x,k.y,0),this.scale(q,q,1),this.GL),ne=(k=!this._defaultFontShader,this._getFontShader()),Y=(ne.init(),ne.bindShader(),k&&(ne.setUniform("uGridImageSize",[64,64]),ne.setUniform("uCellsImageSize",[64,64]),ne.setUniform("uStrokeImageSize",[64,64]),ne.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),we=(Y||((q=this._textGeom=new w.default.Geometry(1,1,function(){for(var Ut=0;Ut<=1;Ut++)for(var Xt=0;Xt<=1;Xt++)this.vertices.push(new w.default.Vector(Xt,Ut,0)),this.uvs.push(Xt,Ut)})).computeFaces().computeNormals(),Y=this.createBuffers("glyph",q)),!0);k=!1,q=void 0;try{for(var Se,oe=this.retainedMode.buffers.text[Symbol.iterator]();!(we=(Se=oe.next()).done);we=!0)Se.value._prepareBuffer(Y,ne)}catch(Ut){k=!0,q=Ut}finally{try{we||null==oe.return||oe.return()}finally{if(k)throw q}}this._bindBuffer(Y.indexBuffer,$.ELEMENT_ARRAY_BUFFER),ne.setUniform("uMaterialColor",this.curFillColor),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var ge=0,re=null,Q=V.stringToGlyphs(S),fe=!0,Ce=!1,it=void 0;try{for(var le,z=Q[Symbol.iterator]();!(fe=(le=z.next()).done);fe=!0){var ye,je,Je=le.value,gt=(re&&(ge+=V.getKerningValue(re,Je)),K.getGlyphInfo(Je));gt.uGlyphRect&&(ye=gt.rowInfo,je=gt.colInfo,ne.setUniform("uSamplerStrokes",gt.strokeImageInfo.imageData),ne.setUniform("uSamplerRowStrokes",ye.cellImageInfo.imageData),ne.setUniform("uSamplerRows",ye.dimImageInfo.imageData),ne.setUniform("uSamplerColStrokes",je.cellImageInfo.imageData),ne.setUniform("uSamplerCols",je.dimImageInfo.imageData),ne.setUniform("uGridOffset",gt.uGridOffset),ne.setUniform("uGlyphRect",gt.uGlyphRect),ne.setUniform("uGlyphOffset",ge),ne.bindTextures(),$.drawElements($.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),ge+=Je.advanceWidth,re=Je}}catch(Ut){Ce=!0,it=Ut}finally{try{fe||null==z.return||z.return()}finally{if(Ce)throw it}}}finally{ne.unbindShader(),this._doStroke=J,this.drawMode=G,$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),E.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return E}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)},4023:(Rr,Un,Ve)=>{function F(d){this.mode=It.MODE_8BIT_BYTE,this.data=d,this.parsedData=[];for(var f=0,h=this.data.length;f<h;f++){var p=[],m=this.data.charCodeAt(f);m>65536?(p[0]=240|(1835008&m)>>>18,p[1]=128|(258048&m)>>>12,p[2]=128|(4032&m)>>>6,p[3]=128|63&m):m>2048?(p[0]=224|(61440&m)>>>12,p[1]=128|(4032&m)>>>6,p[2]=128|63&m):m>128?(p[0]=192|(1984&m)>>>6,p[1]=128|63&m):p[0]=m,this.parsedData.push(p)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function j(d,f){this.typeNumber=d,this.errorCorrectLevel=f,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}F.prototype={getLength:function(d){return this.parsedData.length},write:function(d){for(var f=0,h=this.parsedData.length;f<h;f++)d.put(this.parsedData[f],8)}},j.prototype={addData:function(d){var f=new F(d);this.dataList.push(f),this.dataCache=null},isDark:function(d,f){if(d<0||this.moduleCount<=d||f<0||this.moduleCount<=f)throw new Error(d+","+f);return this.modules[d][f]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(d,f){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[h][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(d,f),this.typeNumber>=7&&this.setupTypeNumber(d),null==this.dataCache&&(this.dataCache=j.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,f)},setupPositionProbePattern:function(d,f){for(var h=-1;h<=7;h++)if(!(d+h<=-1||this.moduleCount<=d+h))for(var p=-1;p<=7;p++)f+p<=-1||this.moduleCount<=f+p||(this.modules[d+h][f+p]=0<=h&&h<=6&&(0==p||6==p)||0<=p&&p<=6&&(0==h||6==h)||2<=h&&h<=4&&2<=p&&p<=4)},getBestMaskPattern:function(){for(var d=0,f=0,h=0;h<8;h++){this.makeImpl(!0,h);var p=be.getLostPoint(this);(0==h||d>p)&&(d=p,f=h)}return f},createMovieClip:function(d,f,h){var p=d.createEmptyMovieClip(f,h);this.make();for(var g=0;g<this.modules.length;g++)for(var x=1*g,E=0;E<this.modules[g].length;E++){var S=1*E;this.modules[g][E]&&(p.beginFill(0,100),p.moveTo(S,x),p.lineTo(S+1,x),p.lineTo(S+1,x+1),p.lineTo(S,x+1),p.endFill())}return p},setupTimingPattern:function(){for(var d=8;d<this.moduleCount-8;d++)null==this.modules[d][6]&&(this.modules[d][6]=d%2==0);for(var f=8;f<this.moduleCount-8;f++)null==this.modules[6][f]&&(this.modules[6][f]=f%2==0)},setupPositionAdjustPattern:function(){for(var d=be.getPatternPosition(this.typeNumber),f=0;f<d.length;f++)for(var h=0;h<d.length;h++){var p=d[f],m=d[h];if(null==this.modules[p][m])for(var g=-2;g<=2;g++)for(var x=-2;x<=2;x++)this.modules[p+g][m+x]=-2==g||2==g||-2==x||2==x||0==g&&0==x}},setupTypeNumber:function(d){for(var f=be.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var p=!d&&1==(f>>h&1);this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=p}for(h=0;h<18;h++)p=!d&&1==(f>>h&1),this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=p},setupTypeInfo:function(d,f){for(var p=be.getBCHTypeInfo(this.errorCorrectLevel<<3|f),m=0;m<15;m++){var g=!d&&1==(p>>m&1);m<6?this.modules[m][8]=g:m<8?this.modules[m+1][8]=g:this.modules[this.moduleCount-15+m][8]=g}for(m=0;m<15;m++)g=!d&&1==(p>>m&1),m<8?this.modules[8][this.moduleCount-m-1]=g:m<9?this.modules[8][15-m-1+1]=g:this.modules[8][15-m-1]=g;this.modules[this.moduleCount-8][8]=!d},mapData:function(d,f){for(var h=-1,p=this.moduleCount-1,m=7,g=0,x=this.moduleCount-1;x>0;x-=2)for(6==x&&x--;;){for(var E=0;E<2;E++)if(null==this.modules[p][x-E]){var S=!1;g<d.length&&(S=1==(d[g]>>>m&1)),be.getMask(f,p,x-E)&&(S=!S),this.modules[p][x-E]=S,-1==--m&&(g++,m=7)}if((p+=h)<0||this.moduleCount<=p){p-=h,h=-h;break}}}},j.PAD0=236,j.PAD1=17,j.createData=function(d,f,h){for(var p=b.getRSBlocks(d,f),m=new w,g=0;g<h.length;g++){var x=h[g];m.put(x.mode,4),m.put(x.getLength(),be.getLengthInBits(x.mode,d)),x.write(m)}var E=0;for(g=0;g<p.length;g++)E+=p[g].dataCount;if(m.getLengthInBits()>8*E)throw new Error("code length overflow. ("+m.getLengthInBits()+">"+8*E+")");for(m.getLengthInBits()+4<=8*E&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(!1);for(;!(m.getLengthInBits()>=8*E||(m.put(j.PAD0,8),m.getLengthInBits()>=8*E));)m.put(j.PAD1,8);return j.createBytes(m,p)},j.createBytes=function(d,f){for(var h=0,p=0,m=0,g=new Array(f.length),x=new Array(f.length),E=0;E<f.length;E++){var S=f[E].dataCount,k=f[E].totalCount-S;p=Math.max(p,S),m=Math.max(m,k),g[E]=new Array(S);for(var q=0;q<g[E].length;q++)g[E][q]=255&d.buffer[q+h];h+=S;var J=be.getErrorCorrectPolynomial(k),V=new C(g[E],J.getLength()-1).mod(J);for(x[E]=new Array(J.getLength()-1),q=0;q<x[E].length;q++){var K=q+V.getLength()-x[E].length;x[E][q]=K>=0?V.get(K):0}}var $=0;for(q=0;q<f.length;q++)$+=f[q].totalCount;var ne=new Array($),Y=0;for(q=0;q<p;q++)for(E=0;E<f.length;E++)q<g[E].length&&(ne[Y++]=g[E][q]);for(q=0;q<m;q++)for(E=0;E<f.length;E++)q<x[E].length&&(ne[Y++]=x[E][q]);return ne};for(var It={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},sn={L:1,M:0,Q:3,H:2},a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},be={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var f=d<<10;be.getBCHDigit(f)-be.getBCHDigit(be.G15)>=0;)f^=be.G15<<be.getBCHDigit(f)-be.getBCHDigit(be.G15);return(d<<10|f)^be.G15_MASK},getBCHTypeNumber:function(d){for(var f=d<<12;be.getBCHDigit(f)-be.getBCHDigit(be.G18)>=0;)f^=be.G18<<be.getBCHDigit(f)-be.getBCHDigit(be.G18);return d<<12|f},getBCHDigit:function(d){for(var f=0;0!=d;)f++,d>>>=1;return f},getPatternPosition:function(d){return be.PATTERN_POSITION_TABLE[d-1]},getMask:function(d,f,h){switch(d){case a.PATTERN000:return(f+h)%2==0;case a.PATTERN001:return f%2==0;case a.PATTERN010:return h%3==0;case a.PATTERN011:return(f+h)%3==0;case a.PATTERN100:return(Math.floor(f/2)+Math.floor(h/3))%2==0;case a.PATTERN101:return f*h%2+f*h%3==0;case a.PATTERN110:return(f*h%2+f*h%3)%2==0;case a.PATTERN111:return(f*h%3+(f+h)%2)%2==0;default:throw new Error("bad maskPattern:"+d)}},getErrorCorrectPolynomial:function(d){for(var f=new C([1],0),h=0;h<d;h++)f=f.multiply(new C([1,Z.gexp(h)],0));return f},getLengthInBits:function(d,f){if(1<=f&&f<10)switch(d){case It.MODE_NUMBER:return 10;case It.MODE_ALPHA_NUM:return 9;case It.MODE_8BIT_BYTE:case It.MODE_KANJI:return 8;default:throw new Error("mode:"+d)}else if(f<27)switch(d){case It.MODE_NUMBER:return 12;case It.MODE_ALPHA_NUM:return 11;case It.MODE_8BIT_BYTE:return 16;case It.MODE_KANJI:return 10;default:throw new Error("mode:"+d)}else{if(!(f<41))throw new Error("type:"+f);switch(d){case It.MODE_NUMBER:return 14;case It.MODE_ALPHA_NUM:return 13;case It.MODE_8BIT_BYTE:return 16;case It.MODE_KANJI:return 12;default:throw new Error("mode:"+d)}}},getLostPoint:function(d){for(var f=d.getModuleCount(),h=0,p=0;p<f;p++)for(var m=0;m<f;m++){for(var g=0,x=d.isDark(p,m),E=-1;E<=1;E++)if(!(p+E<0||f<=p+E))for(var S=-1;S<=1;S++)m+S<0||f<=m+S||0==E&&0==S||x==d.isDark(p+E,m+S)&&g++;g>5&&(h+=3+g-5)}for(p=0;p<f-1;p++)for(m=0;m<f-1;m++){var k=0;d.isDark(p,m)&&k++,d.isDark(p+1,m)&&k++,d.isDark(p,m+1)&&k++,d.isDark(p+1,m+1)&&k++,(0==k||4==k)&&(h+=3)}for(p=0;p<f;p++)for(m=0;m<f-6;m++)d.isDark(p,m)&&!d.isDark(p,m+1)&&d.isDark(p,m+2)&&d.isDark(p,m+3)&&d.isDark(p,m+4)&&!d.isDark(p,m+5)&&d.isDark(p,m+6)&&(h+=40);for(m=0;m<f;m++)for(p=0;p<f-6;p++)d.isDark(p,m)&&!d.isDark(p+1,m)&&d.isDark(p+2,m)&&d.isDark(p+3,m)&&d.isDark(p+4,m)&&!d.isDark(p+5,m)&&d.isDark(p+6,m)&&(h+=40);var q=0;for(m=0;m<f;m++)for(p=0;p<f;p++)d.isDark(p,m)&&q++;return h+Math.abs(100*q/f/f-50)/5*10}},Z={glog:function(d){if(d<1)throw new Error("glog("+d+")");return Z.LOG_TABLE[d]},gexp:function(d){for(;d<0;)d+=255;for(;d>=256;)d-=255;return Z.EXP_TABLE[d]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},M=0;M<8;M++)Z.EXP_TABLE[M]=1<<M;for(M=8;M<256;M++)Z.EXP_TABLE[M]=Z.EXP_TABLE[M-4]^Z.EXP_TABLE[M-5]^Z.EXP_TABLE[M-6]^Z.EXP_TABLE[M-8];for(M=0;M<255;M++)Z.LOG_TABLE[Z.EXP_TABLE[M]]=M;function C(d,f){if(null==d.length)throw new Error(d.length+"/"+f);for(var h=0;h<d.length&&0==d[h];)h++;this.num=new Array(d.length-h+f);for(var p=0;p<d.length-h;p++)this.num[p]=d[p+h]}function b(d,f){this.totalCount=d,this.dataCount=f}function w(){this.buffer=[],this.length=0}C.prototype={get:function(d){return this.num[d]},getLength:function(){return this.num.length},multiply:function(d){for(var f=new Array(this.getLength()+d.getLength()-1),h=0;h<this.getLength();h++)for(var p=0;p<d.getLength();p++)f[h+p]^=Z.gexp(Z.glog(this.get(h))+Z.glog(d.get(p)));return new C(f,0)},mod:function(d){if(this.getLength()-d.getLength()<0)return this;for(var f=Z.glog(this.get(0))-Z.glog(d.get(0)),h=new Array(this.getLength()),p=0;p<this.getLength();p++)h[p]=this.get(p);for(p=0;p<d.getLength();p++)h[p]^=Z.gexp(Z.glog(d.get(p))+f);return new C(h,0).mod(d)}},b.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b.getRSBlocks=function(d,f){var h=b.getRsBlockTable(d,f);if(null==h)throw new Error("bad rs block @ typeNumber:"+d+"/errorCorrectLevel:"+f);for(var p=h.length/3,m=[],g=0;g<p;g++)for(var x=h[3*g+0],E=h[3*g+1],S=h[3*g+2],k=0;k<x;k++)m.push(new b(E,S));return m},b.getRsBlockTable=function(d,f){switch(f){case sn.L:return b.RS_BLOCK_TABLE[4*(d-1)+0];case sn.M:return b.RS_BLOCK_TABLE[4*(d-1)+1];case sn.Q:return b.RS_BLOCK_TABLE[4*(d-1)+2];case sn.H:return b.RS_BLOCK_TABLE[4*(d-1)+3];default:return}},w.prototype={get:function(d){var f=Math.floor(d/8);return 1==(this.buffer[f]>>>7-d%8&1)},put:function(d,f){for(var h=0;h<f;h++)this.putBit(1==(d>>>f-h-1&1))},getLengthInBits:function(){return this.length},putBit:function(d){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0),d&&(this.buffer[f]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function D(d){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof d&&(d={content:d}),d)for(var h in d)this.options[h]=d[h];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var x=this.options.content,E=function m(k,q){for(var J=function g(k){var q=encodeURI(k).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return q.length+(q.length!=k?3:0)}(k),G=1,V=0,K=0,$=I.length;K<=$;K++){var ne=I[K];if(!ne)throw new Error("Content too long: expected "+V+" but got "+J);switch(q){case"L":V=ne[0];break;case"M":V=ne[1];break;case"Q":V=ne[2];break;case"H":V=ne[3];break;default:throw new Error("Unknwon error correction level: "+q)}if(J<=V)break;G++}if(G>I.length)throw new Error("Content too long");return G}(x,this.options.ecl),S=function p(k){switch(k){case"L":return sn.L;case"M":return sn.M;case"Q":return sn.Q;case"H":return sn.H;default:throw new Error("Unknwon error correction level: "+k)}}(this.options.ecl);this.qrcode=new j(E,S),this.qrcode.addData(x),this.qrcode.make()}D.prototype.svg=function(d){var f=this.options||{},h=this.qrcode.modules;typeof d>"u"&&(d={container:f.container||"svg"});for(var p=!(typeof f.pretty<"u"&&!f.pretty),m=p?"  ":"",g=p?"\r\n":"",x=f.width,E=f.height,S=h.length,k=x/(S+2*f.padding),q=E/(S+2*f.padding),J=typeof f.join<"u"&&!!f.join,G=typeof f.swap<"u"&&!!f.swap,V=!(typeof f.xmlDeclaration<"u"&&!f.xmlDeclaration),K=typeof f.predefined<"u"&&!!f.predefined,$=K?m+'<defs><path id="qrmodule" d="M0 0 h'+q+" v"+k+' H0 z" style="fill:'+f.color+';shape-rendering:crispEdges;" /></defs>'+g:"",ne=m+'<rect x="0" y="0" width="'+x+'" height="'+E+'" style="fill:'+f.background+';shape-rendering:crispEdges;"/>'+g,Y="",we="",Se=0;Se<S;Se++)for(var oe=0;oe<S;oe++)if(h[oe][Se]){var re=oe*k+f.padding*k,Q=Se*q+f.padding*q;if(G){var fe=re;re=Q,Q=fe}if(J){var Ce=k+re,it=q+Q;re=Number.isInteger(re)?Number(re):re.toFixed(2),Q=Number.isInteger(Q)?Number(Q):Q.toFixed(2),Ce=Number.isInteger(Ce)?Number(Ce):Ce.toFixed(2),we+="M"+re+","+Q+" V"+(it=Number.isInteger(it)?Number(it):it.toFixed(2))+" H"+Ce+" V"+Q+" H"+re+" Z "}else Y+=K?m+'<use x="'+re.toString()+'" y="'+Q.toString()+'" href="#qrmodule" />'+g:m+'<rect x="'+re.toString()+'" y="'+Q.toString()+'" width="'+k+'" height="'+q+'" style="fill:'+f.color+';shape-rendering:crispEdges;"/>'+g}J&&(Y=m+'<path x="0" y="0" style="fill:'+f.color+';shape-rendering:crispEdges;" d="'+we+'" />');var le="";switch(d.container){case"svg":V&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+x+'" height="'+E+'">'+g,le+=$+ne+Y,le+="</svg>";break;case"svg-viewbox":V&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+x+" "+E+'">'+g,le+=$+ne+Y,le+="</svg>";break;case"g":le+='<g width="'+x+'" height="'+E+'">'+g,le+=$+ne+Y,le+="</g>";break;default:le+=($+ne+Y).replace(/^\s+/,"")}return le},D.prototype.save=function(d,f){var h=this.svg();"function"!=typeof f&&(f=function(m,g){});try{Ve(Object(function(){var g=new Error("Cannot find module 'fs'");throw g.code="MODULE_NOT_FOUND",g}())).writeFile(d,h,f)}catch(m){f(m)}},Rr.exports=D},4412:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{t:()=>j});var F=Ve(1413);class j extends F.B{constructor(sn){super(),this._value=sn}get value(){return this.getValue()}_subscribe(sn){const a=super._subscribe(sn);return!a.closed&&sn.next(this._value),a}getValue(){const{hasError:sn,thrownError:a,_value:be}=this;if(sn)throw a;return this._throwIfClosed(),be}next(sn){super.next(this._value=sn)}}},1985:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{c:()=>M});var F=Ve(7707),j=Ve(8359),It=Ve(3494),sn=Ve(1203),a=Ve(1026),be=Ve(8071),Z=Ve(9786);let M=(()=>{class I{constructor(d){d&&(this._subscribe=d)}lift(d){const f=new I;return f.source=this,f.operator=d,f}subscribe(d,f,h){const p=function w(I){return I&&I instanceof F.vU||function b(I){return I&&(0,be.T)(I.next)&&(0,be.T)(I.error)&&(0,be.T)(I.complete)}(I)&&(0,j.Uv)(I)}(d)?d:new F.Ms(d,f,h);return(0,Z.Y)(()=>{const{operator:m,source:g}=this;p.add(m?m.call(p,g):g?this._subscribe(p):this._trySubscribe(p))}),p}_trySubscribe(d){try{return this._subscribe(d)}catch(f){d.error(f)}}forEach(d,f){return new(f=C(f))((h,p)=>{const m=new F.Ms({next:g=>{try{d(g)}catch(x){p(x),m.unsubscribe()}},error:p,complete:h});this.subscribe(m)})}_subscribe(d){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(d)}[It.s](){return this}pipe(...d){return(0,sn.m)(d)(this)}toPromise(d){return new(d=C(d))((f,h)=>{let p;this.subscribe(m=>p=m,m=>h(m),()=>f(p))})}}return I.create=D=>new I(D),I})();function C(I){var D;return null!==(D=null!=I?I:a.$.Promise)&&void 0!==D?D:Promise}},1413:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B:()=>Z});var F=Ve(1985),j=Ve(8359);const sn=(0,Ve(1853).L)(C=>function(){C(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var a=Ve(7908),be=Ve(9786);let Z=(()=>{class C extends F.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(w){const I=new M(this,this);return I.operator=w,I}_throwIfClosed(){if(this.closed)throw new sn}next(w){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const I of this.currentObservers)I.next(w)}})}error(w){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=w;const{observers:I}=this;for(;I.length;)I.shift().error(w)}})}complete(){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:w}=this;for(;w.length;)w.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var w;return(null===(w=this.observers)||void 0===w?void 0:w.length)>0}_trySubscribe(w){return this._throwIfClosed(),super._trySubscribe(w)}_subscribe(w){return this._throwIfClosed(),this._checkFinalizedStatuses(w),this._innerSubscribe(w)}_innerSubscribe(w){const{hasError:I,isStopped:D,observers:d}=this;return I||D?j.Kn:(this.currentObservers=null,d.push(w),new j.yU(()=>{this.currentObservers=null,(0,a.o)(d,w)}))}_checkFinalizedStatuses(w){const{hasError:I,thrownError:D,isStopped:d}=this;I?w.error(D):d&&w.complete()}asObservable(){const w=new F.c;return w.source=this,w}}return C.create=(b,w)=>new M(b,w),C})();class M extends Z{constructor(b,w){super(),this.destination=b,this.source=w}next(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.next)||void 0===I||I.call(w,b)}error(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.error)||void 0===I||I.call(w,b)}complete(){var b,w;null===(w=null===(b=this.destination)||void 0===b?void 0:b.complete)||void 0===w||w.call(b)}_subscribe(b){var w,I;return null!==(I=null===(w=this.source)||void 0===w?void 0:w.subscribe(b))&&void 0!==I?I:j.Kn}}},7707:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Ms:()=>h,vU:()=>I});var F=Ve(8071),j=Ve(8359),It=Ve(1026),sn=Ve(5334),a=Ve(5343);const be=C("C",void 0,void 0);function C(E,S,k){return{kind:E,value:S,error:k}}var b=Ve(9270),w=Ve(9786);class I extends j.yU{constructor(S){super(),this.isStopped=!1,S?(this.destination=S,(0,j.Uv)(S)&&S.add(this)):this.destination=x}static create(S,k,q){return new h(S,k,q)}next(S){this.isStopped?g(function M(E){return C("N",E,void 0)}(S),this):this._next(S)}error(S){this.isStopped?g(function Z(E){return C("E",void 0,E)}(S),this):(this.isStopped=!0,this._error(S))}complete(){this.isStopped?g(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(S){this.destination.next(S)}_error(S){try{this.destination.error(S)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function d(E,S){return D.call(E,S)}class f{constructor(S){this.partialObserver=S}next(S){const{partialObserver:k}=this;if(k.next)try{k.next(S)}catch(q){p(q)}}error(S){const{partialObserver:k}=this;if(k.error)try{k.error(S)}catch(q){p(q)}else p(S)}complete(){const{partialObserver:S}=this;if(S.complete)try{S.complete()}catch(k){p(k)}}}class h extends I{constructor(S,k,q){let J;if(super(),(0,F.T)(S)||!S)J={next:null!=S?S:void 0,error:null!=k?k:void 0,complete:null!=q?q:void 0};else{let G;this&&It.$.useDeprecatedNextContext?(G=Object.create(S),G.unsubscribe=()=>this.unsubscribe(),J={next:S.next&&d(S.next,G),error:S.error&&d(S.error,G),complete:S.complete&&d(S.complete,G)}):J=S}this.destination=new f(J)}}function p(E){It.$.useDeprecatedSynchronousErrorHandling?(0,w.l)(E):(0,sn.m)(E)}function g(E,S){const{onStoppedNotification:k}=It.$;k&&b.f.setTimeout(()=>k(E,S))}const x={closed:!0,next:a.l,error:function m(E){throw E},complete:a.l}},8359:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Kn:()=>be,yU:()=>a,Uv:()=>Z});var F=Ve(8071);const It=(0,Ve(1853).L)(C=>function(w){C(this),this.message=w?`${w.length} errors occurred during unsubscription:\n${w.map((I,D)=>`${D+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=w});var sn=Ve(7908);class a{constructor(b){this.initialTeardown=b,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let b;if(!this.closed){this.closed=!0;const{_parentage:w}=this;if(w)if(this._parentage=null,Array.isArray(w))for(const d of w)d.remove(this);else w.remove(this);const{initialTeardown:I}=this;if((0,F.T)(I))try{I()}catch(d){b=d instanceof It?d.errors:[d]}const{_finalizers:D}=this;if(D){this._finalizers=null;for(const d of D)try{M(d)}catch(f){b=null!=b?b:[],f instanceof It?b=[...b,...f.errors]:b.push(f)}}if(b)throw new It(b)}}add(b){var w;if(b&&b!==this)if(this.closed)M(b);else{if(b instanceof a){if(b.closed||b._hasParent(this))return;b._addParent(this)}(this._finalizers=null!==(w=this._finalizers)&&void 0!==w?w:[]).push(b)}}_hasParent(b){const{_parentage:w}=this;return w===b||Array.isArray(w)&&w.includes(b)}_addParent(b){const{_parentage:w}=this;this._parentage=Array.isArray(w)?(w.push(b),w):w?[w,b]:b}_removeParent(b){const{_parentage:w}=this;w===b?this._parentage=null:Array.isArray(w)&&(0,sn.o)(w,b)}remove(b){const{_finalizers:w}=this;w&&(0,sn.o)(w,b),b instanceof a&&b._removeParent(this)}}a.EMPTY=(()=>{const C=new a;return C.closed=!0,C})();const be=a.EMPTY;function Z(C){return C instanceof a||C&&"closed"in C&&(0,F.T)(C.remove)&&(0,F.T)(C.add)&&(0,F.T)(C.unsubscribe)}function M(C){(0,F.T)(C)?C():C.unsubscribe()}},1026:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{$:()=>F});const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{G:()=>be});var F=Ve(1985),j=Ve(8359),It=Ve(9898),sn=Ve(4360),a=Ve(9974);class be extends F.c{constructor(M,C){super(),this.source=M,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,a.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new j.yU;const C=this.getSubject();M.add(this.source.subscribe((0,sn._)(C,void 0,()=>{this._teardown(),C.complete()},b=>{this._teardown(),C.error(b)},()=>this._teardown()))),M.closed&&(this._connection=null,M=j.yU.EMPTY)}return M}refCount(){return(0,It.B)()(this)}}},4572:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{z:()=>b});var F=Ve(1985),j=Ve(3073),It=Ve(6648),sn=Ve(3669),a=Ve(6450),be=Ve(9326),Z=Ve(8496),M=Ve(4360),C=Ve(5225);function b(...D){const d=(0,be.lI)(D),f=(0,be.ms)(D),{args:h,keys:p}=(0,j.D)(D);if(0===h.length)return(0,It.H)([],d);const m=new F.c(function w(D,d,f=sn.D){return h=>{I(d,()=>{const{length:p}=D,m=new Array(p);let g=p,x=p;for(let E=0;E<p;E++)I(d,()=>{const S=(0,It.H)(D[E],d);let k=!1;S.subscribe((0,M._)(h,q=>{m[E]=q,k||(k=!0,x--),x||h.next(f(m.slice()))},()=>{--g||h.complete()}))},h)},h)}}(h,d,p?g=>(0,Z.e)(p,g):sn.D));return f?m.pipe((0,a.I)(f)):m}function I(D,d,f){D?(0,C.N)(f,D,d):d()}},8793:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{x:()=>a});var F=Ve(6365),It=Ve(9326),sn=Ve(6648);function a(...be){return function j(){return(0,F.U)(1)}()((0,sn.H)(be,(0,It.lI)(be)))}},9030:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{v:()=>It});var F=Ve(1985),j=Ve(8750);function It(sn){return new F.c(a=>{(0,j.Tg)(sn()).subscribe(a)})}},983:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{w:()=>j});const j=new(Ve(1985).c)(a=>a.complete())},6648:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{H:()=>q});var F=Ve(8750),j=Ve(5225),It=Ve(9974),sn=Ve(4360);function a(J,G=0){return(0,It.N)((V,K)=>{V.subscribe((0,sn._)(K,$=>(0,j.N)(K,J,()=>K.next($),G),()=>(0,j.N)(K,J,()=>K.complete(),G),$=>(0,j.N)(K,J,()=>K.error($),G)))})}function be(J,G=0){return(0,It.N)((V,K)=>{K.add(J.schedule(()=>V.subscribe(K),G))})}var C=Ve(1985),w=Ve(4761),I=Ve(8071);function d(J,G){if(!J)throw new Error("Iterable cannot be null");return new C.c(V=>{(0,j.N)(V,G,()=>{const K=J[Symbol.asyncIterator]();(0,j.N)(V,G,()=>{K.next().then($=>{$.done?V.complete():V.next($.value)})},0,!0)})})}var f=Ve(5055),h=Ve(7477),p=Ve(7441),m=Ve(5397),g=Ve(7953),x=Ve(591),E=Ve(5196);function q(J,G){return G?function k(J,G){if(null!=J){if((0,f.l)(J))return function Z(J,G){return(0,F.Tg)(J).pipe(be(G),a(G))}(J,G);if((0,p.X)(J))return function b(J,G){return new C.c(V=>{let K=0;return G.schedule(function(){K===J.length?V.complete():(V.next(J[K++]),V.closed||this.schedule())})})}(J,G);if((0,h.y)(J))return function M(J,G){return(0,F.Tg)(J).pipe(be(G),a(G))}(J,G);if((0,g.T)(J))return d(J,G);if((0,m.x)(J))return function D(J,G){return new C.c(V=>{let K;return(0,j.N)(V,G,()=>{K=J[w.l](),(0,j.N)(V,G,()=>{let $,ne;try{({value:$,done:ne}=K.next())}catch(Y){return void V.error(Y)}ne?V.complete():V.next($)},0,!0)}),()=>(0,I.T)(null==K?void 0:K.return)&&K.return()})}(J,G);if((0,E.U)(J))return function S(J,G){return d((0,E.C)(J),G)}(J,G)}throw(0,x.L)(J)}(J,G):(0,F.Tg)(J)}},3726:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{R:()=>b});var F=Ve(8750),j=Ve(1985),It=Ve(1397),sn=Ve(7441),a=Ve(8071),be=Ve(6450);const Z=["addListener","removeListener"],M=["addEventListener","removeEventListener"],C=["on","off"];function b(f,h,p,m){if((0,a.T)(p)&&(m=p,p=void 0),m)return b(f,h,p).pipe((0,be.I)(m));const[g,x]=function d(f){return(0,a.T)(f.addEventListener)&&(0,a.T)(f.removeEventListener)}(f)?M.map(E=>S=>f[E](h,S,p)):function I(f){return(0,a.T)(f.addListener)&&(0,a.T)(f.removeListener)}(f)?Z.map(w(f,h)):function D(f){return(0,a.T)(f.on)&&(0,a.T)(f.off)}(f)?C.map(w(f,h)):[];if(!g&&(0,sn.X)(f))return(0,It.Z)(E=>b(E,h,p))((0,F.Tg)(f));if(!g)throw new TypeError("Invalid event target");return new j.c(E=>{const S=(...k)=>E.next(1<k.length?k:k[0]);return g(S),()=>x(S)})}function w(f,h){return p=>m=>f[p](h,m)}},8750:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Tg:()=>D});var F=Ve(1635),j=Ve(7441),It=Ve(7477),sn=Ve(1985),a=Ve(5055),be=Ve(7953),Z=Ve(591),M=Ve(5397),C=Ve(5196),b=Ve(8071),w=Ve(5334),I=Ve(3494);function D(E){if(E instanceof sn.c)return E;if(null!=E){if((0,a.l)(E))return function d(E){return new sn.c(S=>{const k=E[I.s]();if((0,b.T)(k.subscribe))return k.subscribe(S);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(E);if((0,j.X)(E))return function f(E){return new sn.c(S=>{for(let k=0;k<E.length&&!S.closed;k++)S.next(E[k]);S.complete()})}(E);if((0,It.y)(E))return function h(E){return new sn.c(S=>{E.then(k=>{S.closed||(S.next(k),S.complete())},k=>S.error(k)).then(null,w.m)})}(E);if((0,be.T)(E))return m(E);if((0,M.x)(E))return function p(E){return new sn.c(S=>{for(const k of E)if(S.next(k),S.closed)return;S.complete()})}(E);if((0,C.U)(E))return function g(E){return m((0,C.C)(E))}(E)}throw(0,Z.L)(E)}function m(E){return new sn.c(S=>{(function x(E,S){var k,q,J,G;return(0,F.sH)(this,void 0,void 0,function*(){try{for(k=(0,F.xN)(E);!(q=yield k.next()).done;)if(S.next(q.value),S.closed)return}catch(V){J={error:V}}finally{try{q&&!q.done&&(G=k.return)&&(yield G.call(k))}finally{if(J)throw J.error}}S.complete()})})(E,S).catch(k=>S.error(k))})}},7673:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{of:()=>It});var F=Ve(9326),j=Ve(6648);function It(...sn){const a=(0,F.lI)(sn);return(0,j.H)(sn,a)}},8810:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{$:()=>It});var F=Ve(1985),j=Ve(8071);function It(sn,a){const be=(0,j.T)(sn)?sn:()=>sn,Z=M=>M.error(be());return new F.c(a?M=>a.schedule(Z,0,M):Z)}},4360:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{_:()=>j});var F=Ve(7707);function j(sn,a,be,Z,M){return new It(sn,a,be,Z,M)}class It extends F.vU{constructor(a,be,Z,M,C,b){super(a),this.onFinalize=C,this.shouldUnsubscribe=b,this._next=be?function(w){try{be(w)}catch(I){a.error(I)}}:super._next,this._error=M?function(w){try{M(w)}catch(I){a.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=Z?function(){try{Z()}catch(w){a.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}}},5964:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{p:()=>It});var F=Ve(9974),j=Ve(4360);function It(sn,a){return(0,F.N)((be,Z)=>{let M=0;be.subscribe((0,j._)(Z,C=>sn.call(a,C,M++)&&Z.next(C)))})}},6354:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{T:()=>It});var F=Ve(9974),j=Ve(4360);function It(sn,a){return(0,F.N)((be,Z)=>{let M=0;be.subscribe((0,j._)(Z,C=>{Z.next(sn.call(a,C,M++))}))})}},3703:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{u:()=>j});var F=Ve(6354);function j(It){return(0,F.T)(()=>It)}},6365:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{U:()=>It});var F=Ve(1397),j=Ve(3669);function It(sn=1/0){return(0,F.Z)(j.D,sn)}},1397:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Z:()=>M});var F=Ve(6354),j=Ve(8750),It=Ve(9974),sn=Ve(5225),a=Ve(4360),Z=Ve(8071);function M(C,b,w=1/0){return(0,Z.T)(b)?M((I,D)=>(0,F.T)((d,f)=>b(I,d,D,f))((0,j.Tg)(C(I,D))),w):("number"==typeof b&&(w=b),(0,It.N)((I,D)=>function be(C,b,w,I,D,d,f,h){const p=[];let m=0,g=0,x=!1;const E=()=>{x&&!p.length&&!m&&b.complete()},S=q=>m<I?k(q):p.push(q),k=q=>{d&&b.next(q),m++;let J=!1;(0,j.Tg)(w(q,g++)).subscribe((0,a._)(b,G=>{null==D||D(G),d?S(G):b.next(G)},()=>{J=!0},void 0,()=>{if(J)try{for(m--;p.length&&m<I;){const G=p.shift();f?(0,sn.N)(b,f,()=>k(G)):k(G)}E()}catch(G){b.error(G)}}))};return C.subscribe((0,a._)(b,S,()=>{x=!0,E()})),()=>{null==h||h()}}(I,D,C,w)))}},9898:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B:()=>It});var F=Ve(9974),j=Ve(4360);function It(){return(0,F.N)((sn,a)=>{let be=null;sn._refCount++;const Z=(0,j._)(a,void 0,void 0,void 0,()=>{if(!sn||sn._refCount<=0||0<--sn._refCount)return void(be=null);const M=sn._connection,C=be;be=null,M&&(!C||M===C)&&M.unsubscribe(),a.unsubscribe()});sn.subscribe(Z),Z.closed||(be=sn.connect())})}},5558:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{n:()=>sn});var F=Ve(8750),j=Ve(9974),It=Ve(4360);function sn(a,be){return(0,j.N)((Z,M)=>{let C=null,b=0,w=!1;const I=()=>w&&!C&&M.complete();Z.subscribe((0,It._)(M,D=>{null==C||C.unsubscribe();let d=0;const f=b++;(0,F.Tg)(a(D,f)).subscribe(C=(0,It._)(M,h=>M.next(be?be(D,h,f,d++):h),()=>{C=null,I()}))},()=>{w=!0,I()}))})}},6697:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{s:()=>sn});var F=Ve(983),j=Ve(9974),It=Ve(4360);function sn(a){return a<=0?()=>F.w:(0,j.N)((be,Z)=>{let M=0;be.subscribe((0,It._)(Z,C=>{++M<=a&&(Z.next(C),a<=M&&Z.complete())}))})}},8141:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{M:()=>a});var F=Ve(8071),j=Ve(9974),It=Ve(4360),sn=Ve(3669);function a(be,Z,M){const C=(0,F.T)(be)||Z||M?{next:be,error:Z,complete:M}:be;return C?(0,j.N)((b,w)=>{var I;null===(I=C.subscribe)||void 0===I||I.call(C);let D=!0;b.subscribe((0,It._)(w,d=>{var f;null===(f=C.next)||void 0===f||f.call(C,d),w.next(d)},()=>{var d;D=!1,null===(d=C.complete)||void 0===d||d.call(C),w.complete()},d=>{var f;D=!1,null===(f=C.error)||void 0===f||f.call(C,d),w.error(d)},()=>{var d,f;D&&(null===(d=C.unsubscribe)||void 0===d||d.call(C)),null===(f=C.finalize)||void 0===f||f.call(C)}))}):sn.D}},9270:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{f:()=>F});const F={setTimeout(j,It,...sn){const{delegate:a}=F;return null!=a&&a.setTimeout?a.setTimeout(j,It,...sn):setTimeout(j,It,...sn)},clearTimeout(j){const{delegate:It}=F;return((null==It?void 0:It.clearTimeout)||clearTimeout)(j)},delegate:void 0}},4761:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{l:()=>j});const j=function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{s:()=>F});const F="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{R0:()=>be,lI:()=>a,ms:()=>sn});var F=Ve(8071),j=Ve(9470);function It(Z){return Z[Z.length-1]}function sn(Z){return(0,F.T)(It(Z))?Z.pop():void 0}function a(Z){return(0,j.m)(It(Z))?Z.pop():void 0}function be(Z,M){return"number"==typeof It(Z)?Z.pop():M}},3073:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{D:()=>a});const{isArray:F}=Array,{getPrototypeOf:j,prototype:It,keys:sn}=Object;function a(Z){if(1===Z.length){const M=Z[0];if(F(M))return{args:M,keys:null};if(function be(Z){return Z&&"object"==typeof Z&&j(Z)===It}(M)){const C=sn(M);return{args:C.map(b=>M[b]),keys:C}}}return{args:Z,keys:null}}},7908:(Rr,Un,Ve)=>{"use strict";function F(j,It){if(j){const sn=j.indexOf(It);0<=sn&&j.splice(sn,1)}}Ve.d(Un,{o:()=>F})},1853:(Rr,Un,Ve)=>{"use strict";function F(j){const sn=j(a=>{Error.call(a),a.stack=(new Error).stack});return sn.prototype=Object.create(Error.prototype),sn.prototype.constructor=sn,sn}Ve.d(Un,{L:()=>F})},8496:(Rr,Un,Ve)=>{"use strict";function F(j,It){return j.reduce((sn,a,be)=>(sn[a]=It[be],sn),{})}Ve.d(Un,{e:()=>F})},9786:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Y:()=>It,l:()=>sn});var F=Ve(1026);let j=null;function It(a){if(F.$.useDeprecatedSynchronousErrorHandling){const be=!j;if(be&&(j={errorThrown:!1,error:null}),a(),be){const{errorThrown:Z,error:M}=j;if(j=null,Z)throw M}}else a()}function sn(a){F.$.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=a)}},5225:(Rr,Un,Ve)=>{"use strict";function F(j,It,sn,a=0,be=!1){const Z=It.schedule(function(){sn(),be?j.add(this.schedule(null,a)):this.unsubscribe()},a);if(j.add(Z),!be)return Z}Ve.d(Un,{N:()=>F})},3669:(Rr,Un,Ve)=>{"use strict";function F(j){return j}Ve.d(Un,{D:()=>F})},7441:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{X:()=>F});const F=j=>j&&"number"==typeof j.length&&"function"!=typeof j},7953:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{T:()=>j});var F=Ve(8071);function j(It){return Symbol.asyncIterator&&(0,F.T)(null==It?void 0:It[Symbol.asyncIterator])}},8071:(Rr,Un,Ve)=>{"use strict";function F(j){return"function"==typeof j}Ve.d(Un,{T:()=>F})},5055:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{l:()=>It});var F=Ve(3494),j=Ve(8071);function It(sn){return(0,j.T)(sn[F.s])}},5397:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{x:()=>It});var F=Ve(4761),j=Ve(8071);function It(sn){return(0,j.T)(null==sn?void 0:sn[F.l])}},7477:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{y:()=>j});var F=Ve(8071);function j(It){return(0,F.T)(null==It?void 0:It.then)}},5196:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{C:()=>It,U:()=>sn});var F=Ve(1635),j=Ve(8071);function It(a){return(0,F.AQ)(this,arguments,function*(){const Z=a.getReader();try{for(;;){const{value:M,done:C}=yield(0,F.N3)(Z.read());if(C)return yield(0,F.N3)(void 0);yield yield(0,F.N3)(M)}}finally{Z.releaseLock()}})}function sn(a){return(0,j.T)(null==a?void 0:a.getReader)}},9470:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{m:()=>j});var F=Ve(8071);function j(It){return It&&(0,F.T)(It.schedule)}},9974:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{N:()=>It,S:()=>j});var F=Ve(8071);function j(sn){return(0,F.T)(null==sn?void 0:sn.lift)}function It(sn){return a=>{if(j(a))return a.lift(function(be){try{return sn(be,this)}catch(Z){this.error(Z)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{I:()=>sn});var F=Ve(6354);const{isArray:j}=Array;function sn(a){return(0,F.T)(be=>function It(a,be){return j(be)?a(...be):a(be)}(a,be))}},5343:(Rr,Un,Ve)=>{"use strict";function F(){}Ve.d(Un,{l:()=>F})},1203:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{F:()=>j,m:()=>It});var F=Ve(3669);function j(...sn){return It(sn)}function It(sn){return 0===sn.length?F.D:1===sn.length?sn[0]:function(be){return sn.reduce((Z,M)=>M(Z),be)}}},5334:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{m:()=>It});var F=Ve(1026),j=Ve(9270);function It(sn){j.f.setTimeout(()=>{const{onUnhandledError:a}=F.$;if(!a)throw sn;a(sn)})}},591:(Rr,Un,Ve)=>{"use strict";function F(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Ve.d(Un,{L:()=>F})},8996:(Rr,Un,Ve)=>{var F={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function j(It){if(!Ve.o(F,It))return Promise.resolve().then(()=>{var be=new Error("Cannot find module '"+It+"'");throw be.code="MODULE_NOT_FOUND",be});var sn=F[It],a=sn[0];return Promise.all(sn.slice(1).map(Ve.e)).then(()=>Ve(a))}j.keys=()=>Object.keys(F),j.id=8996,Rr.exports=j},5235:(Rr,Un,Ve)=>{var F={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function j(It){if(!Ve.o(F,It))return Promise.resolve().then(()=>{var be=new Error("Cannot find module '"+It+"'");throw be.code="MODULE_NOT_FOUND",be});var sn=F[It],a=sn[0];return Ve.e(sn[1]).then(()=>Ve(a))}j.keys=()=>Object.keys(F),j.id=5235,Rr.exports=j},4633:(Rr,Un,Ve)=>{var F=Ve(3738).default;function j(){"use strict";Rr.exports=j=function(){return sn},Rr.exports.__esModule=!0,Rr.exports.default=Rr.exports;var It,sn={},a=Object.prototype,be=a.hasOwnProperty,Z=Object.defineProperty||function(ge,re,Q){ge[re]=Q.value},M="function"==typeof Symbol?Symbol:{},C=M.iterator||"@@iterator",b=M.asyncIterator||"@@asyncIterator",w=M.toStringTag||"@@toStringTag";function I(ge,re,Q){return Object.defineProperty(ge,re,{value:Q,enumerable:!0,configurable:!0,writable:!0}),ge[re]}try{I({},"")}catch{I=function(Q,fe,Ce){return Q[fe]=Ce}}function D(ge,re,Q,fe){var it=Object.create((re&&re.prototype instanceof x?re:x).prototype),le=new Se(fe||[]);return Z(it,"_invoke",{value:$(ge,Q,le)}),it}function d(ge,re,Q){try{return{type:"normal",arg:ge.call(re,Q)}}catch(fe){return{type:"throw",arg:fe}}}sn.wrap=D;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function x(){}function E(){}function S(){}var k={};I(k,C,function(){return this});var q=Object.getPrototypeOf,J=q&&q(q(oe([])));J&&J!==a&&be.call(J,C)&&(k=J);var G=S.prototype=x.prototype=Object.create(k);function V(ge){["next","throw","return"].forEach(function(re){I(ge,re,function(Q){return this._invoke(re,Q)})})}function K(ge,re){function Q(Ce,it,le,z){var ye=d(ge[Ce],ge,it);if("throw"!==ye.type){var je=ye.arg,Je=je.value;return Je&&"object"==F(Je)&&be.call(Je,"__await")?re.resolve(Je.__await).then(function(gt){Q("next",gt,le,z)},function(gt){Q("throw",gt,le,z)}):re.resolve(Je).then(function(gt){je.value=gt,le(je)},function(gt){return Q("throw",gt,le,z)})}z(ye.arg)}var fe;Z(this,"_invoke",{value:function(it,le){function z(){return new re(function(ye,je){Q(it,le,ye,je)})}return fe=fe?fe.then(z,z):z()}})}function $(ge,re,Q){var fe=f;return function(Ce,it){if(fe===p)throw Error("Generator is already running");if(fe===m){if("throw"===Ce)throw it;return{value:It,done:!0}}for(Q.method=Ce,Q.arg=it;;){var le=Q.delegate;if(le){var z=ne(le,Q);if(z){if(z===g)continue;return z}}if("next"===Q.method)Q.sent=Q._sent=Q.arg;else if("throw"===Q.method){if(fe===f)throw fe=m,Q.arg;Q.dispatchException(Q.arg)}else"return"===Q.method&&Q.abrupt("return",Q.arg);fe=p;var ye=d(ge,re,Q);if("normal"===ye.type){if(fe=Q.done?m:h,ye.arg===g)continue;return{value:ye.arg,done:Q.done}}"throw"===ye.type&&(fe=m,Q.method="throw",Q.arg=ye.arg)}}}function ne(ge,re){var Q=re.method,fe=ge.iterator[Q];if(fe===It)return re.delegate=null,"throw"===Q&&ge.iterator.return&&(re.method="return",re.arg=It,ne(ge,re),"throw"===re.method)||"return"!==Q&&(re.method="throw",re.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),g;var Ce=d(fe,ge.iterator,re.arg);if("throw"===Ce.type)return re.method="throw",re.arg=Ce.arg,re.delegate=null,g;var it=Ce.arg;return it?it.done?(re[ge.resultName]=it.value,re.next=ge.nextLoc,"return"!==re.method&&(re.method="next",re.arg=It),re.delegate=null,g):it:(re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,g)}function Y(ge){var re={tryLoc:ge[0]};1 in ge&&(re.catchLoc=ge[1]),2 in ge&&(re.finallyLoc=ge[2],re.afterLoc=ge[3]),this.tryEntries.push(re)}function we(ge){var re=ge.completion||{};re.type="normal",delete re.arg,ge.completion=re}function Se(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(Y,this),this.reset(!0)}function oe(ge){if(ge||""===ge){var re=ge[C];if(re)return re.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length)){var Q=-1,fe=function Ce(){for(;++Q<ge.length;)if(be.call(ge,Q))return Ce.value=ge[Q],Ce.done=!1,Ce;return Ce.value=It,Ce.done=!0,Ce};return fe.next=fe}}throw new TypeError(F(ge)+" is not iterable")}return E.prototype=S,Z(G,"constructor",{value:S,configurable:!0}),Z(S,"constructor",{value:E,configurable:!0}),E.displayName=I(S,w,"GeneratorFunction"),sn.isGeneratorFunction=function(ge){var re="function"==typeof ge&&ge.constructor;return!!re&&(re===E||"GeneratorFunction"===(re.displayName||re.name))},sn.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,S):(ge.__proto__=S,I(ge,w,"GeneratorFunction")),ge.prototype=Object.create(G),ge},sn.awrap=function(ge){return{__await:ge}},V(K.prototype),I(K.prototype,b,function(){return this}),sn.AsyncIterator=K,sn.async=function(ge,re,Q,fe,Ce){void 0===Ce&&(Ce=Promise);var it=new K(D(ge,re,Q,fe),Ce);return sn.isGeneratorFunction(re)?it:it.next().then(function(le){return le.done?le.value:it.next()})},V(G),I(G,w,"Generator"),I(G,C,function(){return this}),I(G,"toString",function(){return"[object Generator]"}),sn.keys=function(ge){var re=Object(ge),Q=[];for(var fe in re)Q.push(fe);return Q.reverse(),function Ce(){for(;Q.length;){var it=Q.pop();if(it in re)return Ce.value=it,Ce.done=!1,Ce}return Ce.done=!0,Ce}},sn.values=oe,Se.prototype={constructor:Se,reset:function(re){if(this.prev=0,this.next=0,this.sent=this._sent=It,this.done=!1,this.delegate=null,this.method="next",this.arg=It,this.tryEntries.forEach(we),!re)for(var Q in this)"t"===Q.charAt(0)&&be.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=It)},stop:function(){this.done=!0;var re=this.tryEntries[0].completion;if("throw"===re.type)throw re.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var Q=this;function fe(je,Je){return le.type="throw",le.arg=re,Q.next=je,Je&&(Q.method="next",Q.arg=It),!!Je}for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var it=this.tryEntries[Ce],le=it.completion;if("root"===it.tryLoc)return fe("end");if(it.tryLoc<=this.prev){var z=be.call(it,"catchLoc"),ye=be.call(it,"finallyLoc");if(z&&ye){if(this.prev<it.catchLoc)return fe(it.catchLoc,!0);if(this.prev<it.finallyLoc)return fe(it.finallyLoc)}else if(z){if(this.prev<it.catchLoc)return fe(it.catchLoc,!0)}else{if(!ye)throw Error("try statement without catch or finally");if(this.prev<it.finallyLoc)return fe(it.finallyLoc)}}}},abrupt:function(re,Q){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Ce=this.tryEntries[fe];if(Ce.tryLoc<=this.prev&&be.call(Ce,"finallyLoc")&&this.prev<Ce.finallyLoc){var it=Ce;break}}it&&("break"===re||"continue"===re)&&it.tryLoc<=Q&&Q<=it.finallyLoc&&(it=null);var le=it?it.completion:{};return le.type=re,le.arg=Q,it?(this.method="next",this.next=it.finallyLoc,g):this.complete(le)},complete:function(re,Q){if("throw"===re.type)throw re.arg;return"break"===re.type||"continue"===re.type?this.next=re.arg:"return"===re.type?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):"normal"===re.type&&Q&&(this.next=Q),g},finish:function(re){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var fe=this.tryEntries[Q];if(fe.finallyLoc===re)return this.complete(fe.completion,fe.afterLoc),we(fe),g}},catch:function(re){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var fe=this.tryEntries[Q];if(fe.tryLoc===re){var Ce=fe.completion;if("throw"===Ce.type){var it=Ce.arg;we(fe)}return it}}throw Error("illegal catch attempt")},delegateYield:function(re,Q,fe){return this.delegate={iterator:oe(re),resultName:Q,nextLoc:fe},"next"===this.method&&(this.arg=It),g}},sn}Rr.exports=j,Rr.exports.__esModule=!0,Rr.exports.default=Rr.exports},3738:Rr=>{function Un(Ve){return Rr.exports=Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},Rr.exports.__esModule=!0,Rr.exports.default=Rr.exports,Un(Ve)}Rr.exports=Un,Rr.exports.__esModule=!0,Rr.exports.default=Rr.exports},4756:(Rr,Un,Ve)=>{var F=Ve(4633)();Rr.exports=F;try{regeneratorRuntime=F}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}},9969:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{FX:()=>G,If:()=>F,K2:()=>be,hZ:()=>It,i0:()=>sn,iF:()=>Z,kY:()=>b,kp:()=>j,sf:()=>q,ui:()=>J});var F=function(V){return V[V.State=0]="State",V[V.Transition=1]="Transition",V[V.Sequence=2]="Sequence",V[V.Group=3]="Group",V[V.Animate=4]="Animate",V[V.Keyframes=5]="Keyframes",V[V.Style=6]="Style",V[V.Trigger=7]="Trigger",V[V.Reference=8]="Reference",V[V.AnimateChild=9]="AnimateChild",V[V.AnimateRef=10]="AnimateRef",V[V.Query=11]="Query",V[V.Stagger=12]="Stagger",V}(F||{});const j="*";function It(V,K){return{type:F.Trigger,name:V,definitions:K,options:{}}}function sn(V,K=null){return{type:F.Animate,styles:K,timings:V}}function be(V,K=null){return{type:F.Sequence,steps:V,options:K}}function Z(V){return{type:F.Style,styles:V,offset:null}}function b(V,K,$=null){return{type:F.Transition,expr:V,animation:K,options:$}}class q{constructor(K=0,$=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=K+$}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}onStart(K){this._originalOnStartFns.push(K),this._onStartFns.push(K)}onDone(K){this._originalOnDoneFns.push(K),this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(K=>K()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(K){this._position=this.totalTime?K*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(K){const $="start"==K?this._onStartFns:this._onDoneFns;$.forEach(ne=>ne()),$.length=0}}class J{constructor(K){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=K;let $=0,ne=0,Y=0;const we=this.players.length;0==we?queueMicrotask(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++$==we&&this._onFinish()}),Se.onDestroy(()=>{++ne==we&&this._onDestroy()}),Se.onStart(()=>{++Y==we&&this._onStart()})}),this.totalTime=this.players.reduce((Se,oe)=>Math.max(Se,oe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}init(){this.players.forEach(K=>K.init())}onStart(K){this._onStartFns.push(K)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(K=>K()),this._onStartFns=[])}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(K=>K.play())}pause(){this.players.forEach(K=>K.pause())}restart(){this.players.forEach(K=>K.restart())}finish(){this._onFinish(),this.players.forEach(K=>K.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(K=>K.destroy()),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this.players.forEach(K=>K.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(K){const $=K*this.totalTime;this.players.forEach(ne=>{const Y=ne.totalTime?Math.min(1,$/ne.totalTime):1;ne.setPosition(Y)})}getPosition(){const K=this.players.reduce(($,ne)=>null===$||ne.totalTime>$.totalTime?ne:$,null);return null!=K?K.getPosition():0}beforeDestroy(){this.players.forEach(K=>{K.beforeDestroy&&K.beforeDestroy()})}triggerCallback(K){const $="start"==K?this._onStartFns:this._onDoneFns;$.forEach(ne=>ne()),$.length=0}}const G="!"},177:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{AJ:()=>jn,MD:()=>Nn,N0:()=>Vi,QT:()=>It,Sm:()=>h,Sq:()=>lr,T3:()=>qo,UE:()=>_r,VF:()=>a,Vy:()=>Mr,Xr:()=>si,ZD:()=>sn,_b:()=>Ge,aZ:()=>m,bT:()=>Ki,fw:()=>p,hb:()=>d,hj:()=>C,qQ:()=>Z});var F=Ve(3953);let j=null;function It(){return j}function sn(Te){var et;null!==(et=j)&&void 0!==et||(j=Te)}class a{}const Z=new F.nKC("");let M=(()=>{var Te;class et{historyGo(Ze){throw new Error("")}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>(0,F.WQX)(b),providedIn:"platform"}),et})();const C=new F.nKC("");let b=(()=>{var Te;class et extends M{constructor(){super(),this._doc=(0,F.WQX)(Z),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return It().getBaseHref(this._doc)}onPopState(Ze){const Ft=It().getGlobalEventTarget(this._doc,"window");return Ft.addEventListener("popstate",Ze,!1),()=>Ft.removeEventListener("popstate",Ze)}onHashChange(Ze){const Ft=It().getGlobalEventTarget(this._doc,"window");return Ft.addEventListener("hashchange",Ze,!1),()=>Ft.removeEventListener("hashchange",Ze)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Ze){this._location.pathname=Ze}pushState(Ze,Ft,ln){this._history.pushState(Ze,Ft,ln)}replaceState(Ze,Ft,ln){this._history.replaceState(Ze,Ft,ln)}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ze=0){this._history.go(Ze)}getState(){return this._history.state}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>new Te,providedIn:"platform"}),et})();function w(Te,et){if(0==Te.length)return et;if(0==et.length)return Te;let nn=0;return Te.endsWith("/")&&nn++,et.startsWith("/")&&nn++,2==nn?Te+et.substring(1):1==nn?Te+et:Te+"/"+et}function I(Te){const et=Te.match(/#|\?|$/),nn=et&&et.index||Te.length;return Te.slice(0,nn-("/"===Te[nn-1]?1:0))+Te.slice(nn)}function D(Te){return Te&&"?"!==Te[0]?"?"+Te:Te}let d=(()=>{var Te;class et{historyGo(Ze){throw new Error("")}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>(0,F.WQX)(h),providedIn:"root"}),et})();const f=new F.nKC("");let h=(()=>{var Te;class et extends d{constructor(Ze,Ft){var ln,xt,Fr;super(),this._platformLocation=Ze,this._removeListenerFns=[],this._baseHref=null!==(ln=null!==(xt=null!=Ft?Ft:this._platformLocation.getBaseHrefFromDOM())&&void 0!==xt?xt:null===(Fr=(0,F.WQX)(Z).location)||void 0===Fr?void 0:Fr.origin)&&void 0!==ln?ln:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ze){this._removeListenerFns.push(this._platformLocation.onPopState(Ze),this._platformLocation.onHashChange(Ze))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ze){return w(this._baseHref,Ze)}path(Ze=!1){const Ft=this._platformLocation.pathname+D(this._platformLocation.search),ln=this._platformLocation.hash;return ln&&Ze?`${Ft}${ln}`:Ft}pushState(Ze,Ft,ln,xt){const Fr=this.prepareExternalUrl(ln+D(xt));this._platformLocation.pushState(Ze,Ft,Fr)}replaceState(Ze,Ft,ln,xt){const Fr=this.prepareExternalUrl(ln+D(xt));this._platformLocation.replaceState(Ze,Ft,Fr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ze=0){var Ft,ln;null===(Ft=(ln=this._platformLocation).historyGo)||void 0===Ft||Ft.call(ln,Ze)}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)(F.KVO(M),F.KVO(f,8))},Te.\u0275prov=F.jDH({token:Te,factory:Te.\u0275fac,providedIn:"root"}),et})(),p=(()=>{var Te;class et extends d{constructor(Ze,Ft){super(),this._platformLocation=Ze,this._baseHref="",this._removeListenerFns=[],null!=Ft&&(this._baseHref=Ft)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ze){this._removeListenerFns.push(this._platformLocation.onPopState(Ze),this._platformLocation.onHashChange(Ze))}getBaseHref(){return this._baseHref}path(Ze=!1){var Ft;const ln=null!==(Ft=this._platformLocation.hash)&&void 0!==Ft?Ft:"#";return ln.length>0?ln.substring(1):ln}prepareExternalUrl(Ze){const Ft=w(this._baseHref,Ze);return Ft.length>0?"#"+Ft:Ft}pushState(Ze,Ft,ln,xt){let Fr=this.prepareExternalUrl(ln+D(xt));0==Fr.length&&(Fr=this._platformLocation.pathname),this._platformLocation.pushState(Ze,Ft,Fr)}replaceState(Ze,Ft,ln,xt){let Fr=this.prepareExternalUrl(ln+D(xt));0==Fr.length&&(Fr=this._platformLocation.pathname),this._platformLocation.replaceState(Ze,Ft,Fr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ze=0){var Ft,ln;null===(Ft=(ln=this._platformLocation).historyGo)||void 0===Ft||Ft.call(ln,Ze)}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)(F.KVO(M),F.KVO(f,8))},Te.\u0275prov=F.jDH({token:Te,factory:Te.\u0275fac}),et})(),m=(()=>{var Te;class et{constructor(Ze){this._subject=new F.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Ze;const Ft=this._locationStrategy.getBaseHref();this._basePath=function S(Te){if(new RegExp("^(https?:)?//").test(Te)){const[,nn]=Te.split(/\/\/[^\/]+/);return nn}return Te}(I(E(Ft))),this._locationStrategy.onPopState(ln=>{this._subject.emit({url:this.path(!0),pop:!0,state:ln.state,type:ln.type})})}ngOnDestroy(){var Ze;null===(Ze=this._urlChangeSubscription)||void 0===Ze||Ze.unsubscribe(),this._urlChangeListeners=[]}path(Ze=!1){return this.normalize(this._locationStrategy.path(Ze))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Ze,Ft=""){return this.path()==this.normalize(Ze+D(Ft))}normalize(Ze){return et.stripTrailingSlash(function x(Te,et){if(!Te||!et.startsWith(Te))return et;const nn=et.substring(Te.length);return""===nn||["/",";","?","#"].includes(nn[0])?nn:et}(this._basePath,E(Ze)))}prepareExternalUrl(Ze){return Ze&&"/"!==Ze[0]&&(Ze="/"+Ze),this._locationStrategy.prepareExternalUrl(Ze)}go(Ze,Ft="",ln=null){this._locationStrategy.pushState(ln,"",Ze,Ft),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ze+D(Ft)),ln)}replaceState(Ze,Ft="",ln=null){this._locationStrategy.replaceState(ln,"",Ze,Ft),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ze+D(Ft)),ln)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Ze=0){var Ft,ln;null===(Ft=(ln=this._locationStrategy).historyGo)||void 0===Ft||Ft.call(ln,Ze)}onUrlChange(Ze){var Ft;return this._urlChangeListeners.push(Ze),null!==(Ft=this._urlChangeSubscription)&&void 0!==Ft||(this._urlChangeSubscription=this.subscribe(ln=>{this._notifyUrlChangeListeners(ln.url,ln.state)})),()=>{const ln=this._urlChangeListeners.indexOf(Ze);var xt;this._urlChangeListeners.splice(ln,1),0===this._urlChangeListeners.length&&(null===(xt=this._urlChangeSubscription)||void 0===xt||xt.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Ze="",Ft){this._urlChangeListeners.forEach(ln=>ln(Ze,Ft))}subscribe(Ze,Ft,ln){return this._subject.subscribe({next:Ze,error:Ft,complete:ln})}}return(Te=et).normalizeQueryParams=D,Te.joinWithSlash=w,Te.stripTrailingSlash=I,Te.\u0275fac=function(Ze){return new(Ze||Te)(F.KVO(d))},Te.\u0275prov=F.jDH({token:Te,factory:()=>function g(){return new m((0,F.KVO)(d))}(),providedIn:"root"}),et})();function E(Te){return Te.replace(/\/index.html$/,"")}function Ge(Te,et){et=encodeURIComponent(et);for(const nn of Te.split(";")){const Ze=nn.indexOf("="),[Ft,ln]=-1==Ze?[nn,""]:[nn.slice(0,Ze),nn.slice(Ze+1)];if(Ft.trim()===et)return decodeURIComponent(ln)}return null}class $n{constructor(et,nn,Ze,Ft){this.$implicit=et,this.ngForOf=nn,this.index=Ze,this.count=Ft}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lr=(()=>{var Te;class et{set ngForOf(Ze){this._ngForOf=Ze,this._ngForOfDirty=!0}set ngForTrackBy(Ze){this._trackByFn=Ze}get ngForTrackBy(){return this._trackByFn}constructor(Ze,Ft,ln){this._viewContainer=Ze,this._template=Ft,this._differs=ln,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Ze){Ze&&(this._template=Ze)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ze=this._ngForOf;!this._differ&&Ze&&(this._differ=this._differs.find(Ze).create(this.ngForTrackBy))}if(this._differ){const Ze=this._differ.diff(this._ngForOf);Ze&&this._applyChanges(Ze)}}_applyChanges(Ze){const Ft=this._viewContainer;Ze.forEachOperation((ln,xt,Fr)=>{if(null==ln.previousIndex)Ft.createEmbeddedView(this._template,new $n(ln.item,this._ngForOf,-1,-1),null===Fr?void 0:Fr);else if(null==Fr)Ft.remove(null===xt?void 0:xt);else if(null!==xt){const rs=Ft.get(xt);Ft.move(rs,Fr),Ar(rs,ln)}});for(let ln=0,xt=Ft.length;ln<xt;ln++){const rs=Ft.get(ln).context;rs.index=ln,rs.count=xt,rs.ngForOf=this._ngForOf}Ze.forEachIdentityChange(ln=>{Ar(Ft.get(ln.currentIndex),ln)})}static ngTemplateContextGuard(Ze,Ft){return!0}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)(F.rXU(F.c1b),F.rXU(F.C4Q),F.rXU(F._q3))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),et})();function Ar(Te,et){Te.context.$implicit=et.item}let Ki=(()=>{var Te;class et{constructor(Ze,Ft){this._viewContainer=Ze,this._context=new Xs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ft}set ngIf(Ze){this._context.$implicit=this._context.ngIf=Ze,this._updateView()}set ngIfThen(Ze){Os("ngIfThen",Ze),this._thenTemplateRef=Ze,this._thenViewRef=null,this._updateView()}set ngIfElse(Ze){Os("ngIfElse",Ze),this._elseTemplateRef=Ze,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ze,Ft){return!0}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)(F.rXU(F.c1b),F.rXU(F.C4Q))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),et})();class Xs{constructor(){this.$implicit=null,this.ngIf=null}}function Os(Te,et){if(et&&!et.createEmbeddedView)throw new Error(`${Te} must be a TemplateRef, but received '${(0,F.Tbb)(et)}'.`)}let qo=(()=>{var Te;class et{constructor(Ze){this._viewContainerRef=Ze,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Ze){if(this._shouldRecreateView(Ze)){var Ft;const ln=this._viewContainerRef;if(this._viewRef&&ln.remove(ln.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const xt=this._createContextForwardProxy();this._viewRef=ln.createEmbeddedView(this.ngTemplateOutlet,xt,{injector:null!==(Ft=this.ngTemplateOutletInjector)&&void 0!==Ft?Ft:void 0})}}_shouldRecreateView(Ze){return!!Ze.ngTemplateOutlet||!!Ze.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(Ze,Ft,ln)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Ft,ln),get:(Ze,Ft,ln)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Ft,ln)}})}}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)(F.rXU(F.c1b))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[F.OA$]}),et})(),Nn=(()=>{var Te;class et{}return(Te=et).\u0275fac=function(Ze){return new(Ze||Te)},Te.\u0275mod=F.$C({type:Te}),Te.\u0275inj=F.G2t({}),et})();const jn="browser",hr="server";function _r(Te){return Te===jn}function Mr(Te){return Te===hr}let si=(()=>{var Te;class et{}return(Te=et).\u0275prov=(0,F.jDH)({token:Te,providedIn:"root",factory:()=>_r((0,F.WQX)(F.Agw))?new Qr((0,F.WQX)(Z),window):new Si}),et})();class Qr{constructor(et,nn){this.document=et,this.window=nn,this.offset=()=>[0,0]}setOffset(et){this.offset=Array.isArray(et)?()=>et:et}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(et){this.window.scrollTo(et[0],et[1])}scrollToAnchor(et){const nn=function yi(Te,et){const nn=Te.getElementById(et)||Te.getElementsByName(et)[0];if(nn)return nn;if("function"==typeof Te.createTreeWalker&&Te.body&&"function"==typeof Te.body.attachShadow){const Ze=Te.createTreeWalker(Te.body,NodeFilter.SHOW_ELEMENT);let Ft=Ze.currentNode;for(;Ft;){const ln=Ft.shadowRoot;if(ln){const xt=ln.getElementById(et)||ln.querySelector(`[name="${et}"]`);if(xt)return xt}Ft=Ze.nextNode()}}return null}(this.document,et);nn&&(this.scrollToElement(nn),nn.focus())}setHistoryScrollRestoration(et){this.window.history.scrollRestoration=et}scrollToElement(et){const nn=et.getBoundingClientRect(),Ze=nn.left+this.window.pageXOffset,Ft=nn.top+this.window.pageYOffset,ln=this.offset();this.window.scrollTo(Ze-ln[0],Ft-ln[1])}}class Si{setOffset(et){}getScrollPosition(){return[0,0]}scrollToPosition(et){}scrollToAnchor(et){}setHistoryScrollRestoration(et){}}class Vi{}},3953:(Rr,Un,Ve)=>{"use strict";function F(n,i){return Object.is(n,i)}Ve.d(Un,{bc$:()=>vE,iLQ:()=>bb,sZ2:()=>oh,hnV:()=>JA,Hbi:()=>PP,o8S:()=>Ru,BIS:()=>Jv,gRc:()=>hC,Ql9:()=>sP,Ocv:()=>hP,Z63:()=>pi,aKT:()=>Jh,uvJ:()=>Hl,zcH:()=>Rc,bkB:()=>aa,$GK:()=>As,nKC:()=>ui,zZn:()=>ya,_q3:()=>KS,MKu:()=>YS,xe9:()=>xb,Co$:()=>Q_,Vns:()=>Pd,SKi:()=>la,Xx1:()=>Oi,Agw:()=>Ip,PLl:()=>E1,sFG:()=>wy,_9s:()=>Pf,czy:()=>zg,WPN:()=>Td,kdw:()=>Wi,C4Q:()=>ph,NYb:()=>QR,giA:()=>YA,RxE:()=>zA,c1b:()=>_h,gXe:()=>nl,mal:()=>fm,L39:()=>fO,EWP:()=>mO,a0P:()=>xO,Ol2:()=>ni,w6W:()=>Wx,oH4:()=>lC,SmG:()=>yP,Rfq:()=>Gl,WQX:()=>at,QuC:()=>Nr,EmA:()=>pa,fpN:()=>RP,HJs:()=>SO,N4e:()=>Mh,vPA:()=>hi,O8t:()=>gO,H3F:()=>$A,zAP:()=>FC,H8p:()=>Wf,KH2:()=>Nm,TgB:()=>Kl,wOt:()=>Vr,WHO:()=>qA,e01:()=>KA,lNU:()=>Js,h9k:()=>w0,$MX:()=>zp,ZF7:()=>ch,Kcf:()=>B1,e5t:()=>$1,UyX:()=>G1,cWb:()=>V1,osQ:()=>z1,H5H:()=>gS,mq5:()=>oM,JZv:()=>ho,LfX:()=>cs,plB:()=>ed,jNT:()=>FS,zjR:()=>ZA,TL$:()=>yE,Tbb:()=>Mo,rcV:()=>bu,Vt3:()=>wo,GFd:()=>J_,OA$:()=>Wc,Jv_:()=>yA,aNF:()=>vA,R7$:()=>Yg,BMQ:()=>rS,AVh:()=>cS,wni:()=>$M,VBU:()=>$e,FsC:()=>Vn,jDH:()=>Jr,G2t:()=>vi,$C:()=>Rt,EJ8:()=>br,rXU:()=>Yu,nrm:()=>pS,eu8:()=>mS,bVm:()=>db,qex:()=>ub,k0s:()=>cb,j41:()=>lb,RV6:()=>rM,xGo:()=>pg,KVO:()=>ve,kS0:()=>qh,QTQ:()=>F0,bIt:()=>_S,lsd:()=>XM,XpG:()=>PM,SdG:()=>LM,NAR:()=>OM,Y8G:()=>aS,lJ4:()=>wA,eq3:()=>xA,mGM:()=>WM,sdS:()=>qM,Njj:()=>Tc,eBV:()=>tg,B4B:()=>Bg,n$t:()=>S0,Aen:()=>Cu,DNE:()=>jl,EFF:()=>iA,JRh:()=>SS,SpI:()=>mb,Lme:()=>ES,DH7:()=>fA,mxI:()=>MS,R50:()=>TS,GBs:()=>HM});let j=null,It=!1,sn=1;const a=Symbol("SIGNAL");function be(n){const i=j;return j=n,i}const b={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function w(n){if(It)throw new Error("");if(null===j)return;j.consumerOnSignalRead(n);const i=j.nextProducerIndex++;q(j),i<j.producerNode.length&&j.producerNode[i]!==n&&k(j)&&S(j.producerNode[i],j.producerIndexOfThis[i]),j.producerNode[i]!==n&&(j.producerNode[i]=n,j.producerIndexOfThis[i]=k(j)?E(n,j,i):0),j.producerLastReadVersion[i]=n.version}function D(n){if((!k(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==sn)){if(!n.producerMustRecompute(n)&&!g(n))return n.dirty=!1,void(n.lastCleanEpoch=sn);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sn}}function d(n){if(void 0===n.liveConsumerNode)return;const i=It;It=!0;try{for(const o of n.liveConsumerNode)o.dirty||h(o)}finally{It=i}}function f(){var n;return!1!==(null===(n=j)||void 0===n?void 0:n.consumerAllowSignalWrites)}function h(n){var i;n.dirty=!0,d(n),null===(i=n.consumerMarkedDirty)||void 0===i||i.call(n,n)}function p(n){return n&&(n.nextProducerIndex=0),be(n)}function m(n,i){if(be(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(k(n))for(let o=n.nextProducerIndex;o<n.producerNode.length;o++)S(n.producerNode[o],n.producerIndexOfThis[o]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function g(n){q(n);for(let i=0;i<n.producerNode.length;i++){const o=n.producerNode[i],c=n.producerLastReadVersion[i];if(c!==o.version||(D(o),c!==o.version))return!0}return!1}function x(n){if(q(n),k(n))for(let i=0;i<n.producerNode.length;i++)S(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function E(n,i,o){if(J(n),0===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)n.producerIndexOfThis[c]=E(n.producerNode[c],n,c);return n.liveConsumerIndexOfThis.push(o),n.liveConsumerNode.push(i)-1}function S(n,i){if(J(n),1===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)S(n.producerNode[c],n.producerIndexOfThis[c]);const o=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[o],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[o],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const c=n.liveConsumerIndexOfThis[i],y=n.liveConsumerNode[i];q(y),y.producerIndexOfThis[c]=i}}function k(n){var i,o;return n.consumerIsAlwaysLive||(null!==(i=null==n||null===(o=n.liveConsumerNode)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0}function q(n){var i,o,c;null!==(i=n.producerNode)&&void 0!==i||(n.producerNode=[]),null!==(o=n.producerIndexOfThis)&&void 0!==o||(n.producerIndexOfThis=[]),null!==(c=n.producerLastReadVersion)&&void 0!==c||(n.producerLastReadVersion=[])}function J(n){var i,o;null!==(i=n.liveConsumerNode)&&void 0!==i||(n.liveConsumerNode=[]),null!==(o=n.liveConsumerIndexOfThis)&&void 0!==o||(n.liveConsumerIndexOfThis=[])}function G(n){return void 0!==n.producerNode}const K=Symbol("UNSET"),$=Symbol("COMPUTING"),ne=Symbol("ERRORED"),Y={...b,value:K,dirty:!0,error:null,equal:F,producerMustRecompute:n=>n.value===K||n.value===$,producerRecomputeValue(n){if(n.value===$)throw new Error("Detected cycle in computations.");const i=n.value;n.value=$;const o=p(n);let c;try{c=n.computation()}catch(y){c=ne,n.error=y}finally{m(n,o)}i!==K&&i!==ne&&c!==ne&&n.equal(i,c)?n.value=i:(n.value=c,n.version++)}};let Se=function we(){throw new Error};function oe(){Se()}let re=null;function it(n,i){f()||oe(),n.equal(n.value,i)||(n.value=i,function je(n){var i;n.version++,function I(){sn++}(),d(n),null===(i=re)||void 0===i||i()}(n))}const ye={...b,equal:F,value:void 0};var ns,yt=Ve(4412),Ut=Ve(1413),Xt=Ve(8359),ft=Ve(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Js="https://g.co/ng/security#xss";class Vr extends Error{constructor(i,o){super(function da(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function go(n){return{toString:n}.toString()}const el="__parameters__";function ml(n,i,o){return go(()=>{const c=function za(n){return function(...o){if(n){const c=n(...o);for(const y in c)this[y]=c[y]}}}(i);function y(...P){if(this instanceof y)return c.apply(this,P),this;const W=new y(...P);return ce.annotation=W,ce;function ce(Ee,qe,lt){const St=Ee.hasOwnProperty(el)?Ee[el]:Object.defineProperty(Ee,el,{value:[]})[el];for(;St.length<=lt;)St.push(null);return(St[lt]=St[lt]||[]).push(W),Ee}}return o&&(y.prototype=Object.create(o.prototype)),y.prototype.ngMetadataName=n,y.annotationCls=y,y})}const ho=globalThis;function ks(n){for(let i in n)if(n[i]===ks)return i;throw Error("Could not find renamed property on target object.")}function Vl(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Mo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function gl(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Da=ks({__forward_ref__:ks});function Gl(n){return n.__forward_ref__=Gl,n.toString=function(){return Mo(this())},n}function di(n){return tl(n)?n():n}function tl(n){return"function"==typeof n&&n.hasOwnProperty(Da)&&n.__forward_ref__===Gl}function Jr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ji(n){return yo(n,Ao)||yo(n,Bs)}function cs(n){return null!==Ji(n)}function yo(n,i){return n.hasOwnProperty(i)?n[i]:null}function Po(n){return n&&(n.hasOwnProperty(ra)||n.hasOwnProperty(Qs))?n[ra]:null}const Ao=ks({\u0275prov:ks}),ra=ks({\u0275inj:ks}),Bs=ks({ngInjectableDef:ks}),Qs=ks({ngInjectorDef:ks});class ui{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Jr({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zl(n){return n&&!!n.\u0275providers}const yl=ks({\u0275cmp:ks}),cc=ks({\u0275dir:ks}),Fc=ks({\u0275pipe:ks}),$a=ks({\u0275mod:ks}),vl=ks({\u0275fac:ks}),uc=ks({__NG_ELEMENT_ID__:ks}),su=ks({__NG_ENV_ID__:ks});function os(n){return"string"==typeof n?n:null==n?"":String(n)}function ou(n,i){throw new Vr(-201,!1)}var As=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(As||{});let Ha;function ec(){return Ha}function Ia(n){const i=Ha;return Ha=n,i}function _o(n,i,o){const c=Ji(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&As.Optional?null:void 0!==i?i:void ou()}const Te={},et="__NG_DI_FLAG__",nn="ngTempTokenPath",Ft=/\n/gm,xt="__source";let Fr;function ot(n){const i=Fr;return Fr=n,i}function ue(n,i=As.Default){if(void 0===Fr)throw new Vr(-203,!1);return null===Fr?_o(n,void 0,i):Fr.get(n,i&As.Optional?null:void 0,i)}function ve(n,i=As.Default){return(ec()||ue)(di(n),i)}function at(n,i=As.Default){return ve(n,kt(i))}function kt(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function En(n){const i=[];for(let o=0;o<n.length;o++){const c=di(n[o]);if(Array.isArray(c)){if(0===c.length)throw new Vr(900,!1);let y,P=As.Default;for(let W=0;W<c.length;W++){const ce=c[W],Ee=Hn(ce);"number"==typeof Ee?-1===Ee?y=ce.token:P|=Ee:y=ce}i.push(ve(y,P))}else i.push(ve(c))}return i}function Sn(n,i){return n[et]=i,n.prototype[et]=i,n}function Hn(n){return n[et]}const Oi=Sn(ml("Optional"),8),Wi=Sn(ml("SkipSelf"),4);function Ks(n,i){return n.hasOwnProperty(vl)?n[vl]:null}function po(n,i){n.forEach(o=>Array.isArray(o)?po(o,i):i(o))}function ia(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function ll(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Li(n,i,o){let c=Yo(n,i);return c>=0?n[1|c]=o:(c=~c,function ul(n,i,o,c){let y=n.length;if(y==i)n.push(o,c);else if(1===y)n.push(c,n[0]),n[0]=o;else{for(y--,n.push(n[y-1],n[y]);y>i;)n[y]=n[y-2],y--;n[i]=o,n[i+1]=c}}(n,c,i,o)),c}function Al(n,i){const o=Yo(n,i);if(o>=0)return n[1|o]}function Yo(n,i){return function Ou(n,i,o){let c=0,y=n.length>>o;for(;y!==c;){const P=c+(y-c>>1),W=n[P<<o];if(i===W)return P<<o;W>i?y=P:c=P+1}return~(y<<o)}(n,i,1)}const li={},ei=[],pi=new ui(""),Ss=new ui("",-1),Oo=new ui("");class $o{get(i,o=Te){if(o===Te){const c=new Error(`NullInjectorError: No provider for ${Mo(i)}!`);throw c.name="NullInjectorError",c}return o}}var _a=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_a||{}),nl=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(nl||{}),ao=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ao||{});function Uc(n,i,o){let c=n.length;for(;;){const y=n.indexOf(i,o);if(-1===y)return y;if(0===y||n.charCodeAt(y-1)<=32){const P=i.length;if(y+P===c||n.charCodeAt(y+P)<=32)return y}o=y+1}}function Cl(n,i,o){let c=0;for(;c<o.length;){const y=o[c];if("number"==typeof y){if(0!==y)break;c++;const P=o[c++],W=o[c++],ce=o[c++];n.setAttribute(i,W,ce,P)}else{const P=y,W=o[++c];Dl(P)?n.setProperty(i,P,W):n.setAttribute(i,P,W),c++}}return c}function oa(n){return 3===n||4===n||6===n}function Dl(n){return 64===n.charCodeAt(0)}function Ra(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let c=0;c<i.length;c++){const y=i[c];"number"==typeof y?o=y:0===o||lu(n,o,y,null,-1===o||2===o?i[++c]:null)}}return n}function lu(n,i,o,c,y){let P=0,W=n.length;if(-1===i)W=-1;else for(;P<n.length;){const ce=n[P++];if("number"==typeof ce){if(ce===i){W=-1;break}if(ce>i){W=P-1;break}}}for(;P<n.length;){const ce=n[P];if("number"==typeof ce)break;if(ce===o){if(null===c)return void(null!==y&&(n[P+1]=y));if(c===n[P+1])return void(n[P+2]=y)}P++,null!==c&&P++,null!==y&&P++}-1!==W&&(n.splice(W,0,i),P=W+1),n.splice(P++,0,o),null!==c&&n.splice(P++,0,c),null!==y&&n.splice(P++,0,y)}const cu="ng-template";function zf(n,i,o,c){let y=0;if(c){for(;y<i.length&&"string"==typeof i[y];y+=2)if("class"===i[y]&&-1!==Uc(i[y+1].toLowerCase(),o,0))return!0}else if(Ld(n))return!1;if(y=i.indexOf(1,y),y>-1){let P;for(;++y<i.length&&"string"==typeof(P=i[y]);)if(P.toLowerCase()===o)return!0}return!1}function Ld(n){return 4===n.type&&n.value!==cu}function $f(n,i,o){return i===(4!==n.type||o?n.value:cu)}function Bm(n,i,o){let c=4;const y=n.attrs,P=null!==y?function Bc(n){for(let i=0;i<n.length;i++)if(oa(n[i]))return i;return n.length}(y):0;let W=!1;for(let ce=0;ce<i.length;ce++){const Ee=i[ce];if("number"!=typeof Ee){if(!W)if(4&c){if(c=2|1&c,""!==Ee&&!$f(n,Ee,o)||""===Ee&&1===i.length){if(rl(c))return!1;W=!0}}else if(8&c){if(null===y||!zf(n,y,Ee,o)){if(rl(c))return!1;W=!0}}else{const qe=i[++ce],lt=kd(Ee,y,Ld(n),o);if(-1===lt){if(rl(c))return!1;W=!0;continue}if(""!==qe){let St;if(St=lt>P?"":y[lt+1].toLowerCase(),2&c&&qe!==St){if(rl(c))return!1;W=!0}}}}else{if(!W&&!rl(c)&&!rl(Ee))return!1;if(W&&rl(Ee))continue;W=!1,c=Ee|1&c}}return rl(c)||W}function rl(n){return!(1&n)}function kd(n,i,o,c){if(null===i)return-1;let y=0;if(c||!o){let P=!1;for(;y<i.length;){const W=i[y];if(W===n)return y;if(3===W||6===W)P=!0;else{if(1===W||2===W){let ce=i[++y];for(;"string"==typeof ce;)ce=i[++y];continue}if(4===W)break;if(0===W){y+=4;continue}}y+=P?1:2}return-1}return function Hf(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===i)return o;o++}return-1}(i,n)}function Eo(n,i,o=!1){for(let c=0;c<i.length;c++)if(Bm(n,i[c],o))return!0;return!1}function Vc(n,i){e:for(let o=0;o<i.length;o++){const c=i[o];if(n.length===c.length){for(let y=0;y<n.length;y++)if(n[y]!==c[y])continue e;return!0}}return!1}function Lu(n,i){return n?":not("+i.trim()+")":i}function rd(n){let i=n[0],o=1,c=2,y="",P=!1;for(;o<n.length;){let W=n[o];if("string"==typeof W)if(2&c){const ce=n[++o];y+="["+W+(ce.length>0?'="'+ce+'"':"")+"]"}else 8&c?y+="."+W:4&c&&(y+=" "+W);else""!==y&&!rl(W)&&(i+=Lu(P,y),y=""),c=W,P=P||!rl(c);o++}return""!==y&&(i+=Lu(P,y)),i}function $e(n){return go(()=>{var i;const o=Zo(n),c={...o,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_a.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:null!==(i=n.signals)&&void 0!==i&&i,data:n.data||{},encapsulation:n.encapsulation||nl.Emulated,styles:n.styles||ei,_:null,schemas:n.schemas||null,tView:null,id:""};Zs(c);const y=n.dependencies;return c.directiveDefs=Co(y,!1),c.pipeDefs=Co(y,!0),c.id=function $l(n){let i=0;const o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const y of o)i=Math.imul(31,i)+y.charCodeAt(0)|0;return i+=2147483648,"c"+i}(c),c})}function Me(n){return kn(n)||zr(n)}function Ke(n){return null!==n}function Rt(n){return go(()=>({type:n.type,bootstrap:n.bootstrap||ei,declarations:n.declarations||ei,imports:n.imports||ei,exports:n.exports||ei,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gt(n,i){if(null==n)return li;const o={};for(const y in n)if(n.hasOwnProperty(y)){const P=n[y];let W,ce,Ee=ao.None;var c;Array.isArray(P)?(Ee=P[0],W=P[1],ce=null!==(c=P[2])&&void 0!==c?c:W):(W=P,ce=P),i?(o[W]=Ee!==ao.None?[y,Ee]:y,i[W]=ce):o[W]=y}return o}function Vn(n){return go(()=>{const i=Zo(n);return Zs(i),i})}function br(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function kn(n){return n[yl]||null}function zr(n){return n[cc]||null}function Ai(n){return n[Fc]||null}function Nr(n){const i=kn(n)||zr(n)||Ai(n);return null!==i&&i.standalone}function mi(n,i){const o=n[$a]||null;if(!o&&!0===i)throw new Error(`Type ${Mo(n)} does not have '\u0275mod' property.`);return o}function Zo(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||li,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ei,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gt(n.inputs,i),outputs:Gt(n.outputs),debugInfo:null}}function Zs(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function Co(n,i){if(!n)return null;const o=i?Ai:Me;return()=>("function"==typeof n?n():n).map(c=>o(c)).filter(Ke)}function pa(n){return{\u0275providers:n}}function uu(...n){return{\u0275providers:Nd(0,n),\u0275fromNgModule:!0}}function Nd(n,...i){const o=[],c=new Set;let y;const P=W=>{o.push(W)};return po(i,W=>{const ce=W;hc(ce,P,[],c)&&(y||(y=[]),y.push(ce))}),void 0!==y&&ma(y,P),o}function ma(n,i){for(let o=0;o<n.length;o++){const{ngModule:c,providers:y}=n[o];to(y,P=>{i(P,c)})}}function hc(n,i,o,c){if(!(n=di(n)))return!1;let y=null,P=Po(n);const W=!P&&kn(n);if(P||W){if(W&&!W.standalone)return!1;y=n}else{const Ee=n.ngModule;if(P=Po(Ee),!P)return!1;y=Ee}const ce=c.has(y);if(W){if(ce)return!1;if(c.add(y),W.dependencies){const Ee="function"==typeof W.dependencies?W.dependencies():W.dependencies;for(const qe of Ee)hc(qe,i,o,c)}}else{if(!P)return!1;{if(null!=P.imports&&!ce){let qe;c.add(y);try{po(P.imports,lt=>{hc(lt,i,o,c)&&(qe||(qe=[]),qe.push(lt))})}finally{}void 0!==qe&&ma(qe,i)}if(!ce){const qe=Ks(y)||(()=>new y);i({provide:y,useFactory:qe,deps:ei},y),i({provide:Oo,useValue:y,multi:!0},y),i({provide:pi,useValue:()=>ve(y),multi:!0},y)}const Ee=P.providers;if(null!=Ee&&!ce){const qe=n;to(Ee,lt=>{i(lt,qe)})}}}return y!==n&&void 0!==n.providers}function to(n,i){for(let o of n)zl(o)&&(o=o.\u0275providers),Array.isArray(o)?to(o,i):i(o)}const nE=ks({provide:String,useValue:ks});function Xy(n){return null!==n&&"object"==typeof n&&nE in n}function ku(n){return"function"==typeof n}const Wf=new ui(""),Vm={},ki={};let Gm;function Rl(){return void 0===Gm&&(Gm=new $o),Gm}class Hl{}class xc extends Hl{get destroyed(){return this._destroyed}constructor(i,o,c,y){super(),this.parent=o,this.source=c,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jd(i,W=>this.processProvider(W)),this.records.set(Ss,id(void 0,this)),y.has("environment")&&this.records.set(Hl,id(void 0,this));const P=this.records.get(Wf);null!=P&&"string"==typeof P.value&&this.scopes.add(P.value),this.injectorDefTypes=new Set(this.get(Oo,ei,As.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=be(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=ot(this),c=Ia(void 0);try{return i()}finally{ot(o),Ia(c)}}get(i,o=Te,c=As.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(su))return i[su](this);c=kt(c);const P=ot(this),W=Ia(void 0);try{if(!(c&As.SkipSelf)){let Ee=this.records.get(i);if(void 0===Ee){const qe=function qy(n){return"function"==typeof n||"object"==typeof n&&n instanceof ui}(i)&&Ji(i);Ee=qe&&this.injectableDefInScope(qe)?id(Pl(i),Vm):null,this.records.set(i,Ee)}if(null!=Ee)return this.hydrate(i,Ee)}return(c&As.Self?Rl():this.parent).get(i,o=c&As.Optional&&o===Te?null:o)}catch(ce){if("NullInjectorError"===ce.name){if((ce[nn]=ce[nn]||[]).unshift(Mo(i)),P)throw ce;return function or(n,i,o,c){const y=n[nn];throw i[xt]&&y.unshift(i[xt]),n.message=function Xr(n,i,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let y=Mo(i);if(Array.isArray(i))y=i.map(Mo).join(" -> ");else if("object"==typeof i){let P=[];for(let W in i)if(i.hasOwnProperty(W)){let ce=i[W];P.push(W+":"+("string"==typeof ce?JSON.stringify(ce):Mo(ce)))}y=`{${P.join(", ")}}`}return`${o}${c?"("+c+")":""}[${y}]: ${n.replace(Ft,"\n  ")}`}("\n"+n.message,y,o,c),n.ngTokenPath=y,n[nn]=null,n}(ce,i,"R3InjectorError",this.source)}throw ce}finally{Ia(W),ot(P)}}resolveInjectorInitializers(){const i=be(null),o=ot(this),c=Ia(void 0);try{const P=this.get(pi,ei,As.Self);for(const W of P)W()}finally{ot(o),Ia(c),be(i)}}toString(){const i=[],o=this.records;for(const c of o.keys())i.push(Mo(c));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Vr(205,!1)}processProvider(i){let o=ku(i=di(i))?i:di(i&&i.provide);const c=function il(n){return Xy(n)?id(void 0,n.useValue):id(gs(n),Vm)}(i);if(!ku(i)&&!0===i.multi){let y=this.records.get(o);y||(y=id(void 0,Vm,!0),y.factory=()=>En(y.multi),this.records.set(o,y)),o=i,y.multi.push(i)}this.records.set(o,c)}hydrate(i,o){const c=be(null);try{return o.value===Vm&&(o.value=ki,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Xf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{be(c)}}injectableDefInScope(i){if(!i.providedIn)return!1;const o=di(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Pl(n){const i=Ji(n),o=null!==i?i.factory:Ks(n);if(null!==o)return o;if(n instanceof ui)throw new Vr(204,!1);if(n instanceof Function)return function Th(n){if(n.length>0)throw new Vr(204,!1);const o=function vo(n){return n&&(n[Ao]||n[Bs])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Vr(204,!1)}function gs(n,i,o){let c;if(ku(n)){const y=di(n);return Ks(y)||Pl(y)}if(Xy(n))c=()=>di(n.useValue);else if(function Pb(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...En(n.deps||[]));else if(function Rb(n){return!(!n||!n.useExisting)}(n))c=()=>ve(di(n.useExisting));else{const y=di(n&&(n.useClass||n.provide));if(!function sd(n){return!!n.deps}(n))return Ks(y)||Pl(y);c=()=>new y(...En(n.deps))}return c}function id(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function jd(n,i){for(const o of n)Array.isArray(o)?jd(o,i):o&&zl(o)?jd(o.\u0275providers,i):i(o)}function Mh(n,i){n instanceof xc&&n.assertNotDestroyed();const c=ot(n),y=Ia(void 0);try{return i()}finally{ot(c),Ia(y)}}function Ah(){return void 0!==ec()||null!=function rs(){return Fr}()}const Ho=0,qr=1,es=2,Pa=3,Lo=4,ba=5,ja=6,od=7,Do=8,Fa=9,sl=10,ps=11,ad=12,Yf=13,Nu=14,Jo=15,zc=16,Ua=17,_l=18,ld=19,cd=20,fc=21,$c=22,dl=23,Ui=25,ud=1,nc=7,hu=9,wa=10;var Vd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vd||{});function Wa(n){return Array.isArray(n)&&"object"==typeof n[ud]}function bl(n){return Array.isArray(n)&&!0===n[ud]}function Gd(n){return!!(4&n.flags)}function Hc(n){return n.componentOffset>-1}function Ch(n){return!(1&~n.flags)}function Sc(n){return!!n.template}function zd(n){return!!(512&n[es])}class Vb{constructor(i,o,c){this.previousValue=i,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function iv(n,i,o,c){null!==i?i.applyValueToInputSignal(i,c):n[o]=c}function Wc(){return Uu}function Uu(n){return n.type.prototype.ngOnChanges&&(n.setInput=tp),ep}function ep(){const n=sv(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===li)n.previous=i;else for(let c in i)o[c]=i[c];n.current=null,this.ngOnChanges(i)}}function tp(n,i,o,c,y){const P=this.declaredInputs[c],W=sv(n)||function Gb(n,i){return n[np]=i}(n,{previous:li,current:null}),ce=W.current||(W.current={}),Ee=W.previous,qe=Ee[P];ce[P]=new Vb(qe&&qe.currentValue,o,Ee===li),iv(n,i,y,o)}Wc.ngInherit=!0;const np="__ngSimpleChanges__";function sv(n){return n[np]||null}const Xc=function(n,i,o){};function Gs(n){for(;Array.isArray(n);)n=n[Ho];return n}function $d(n,i){return Gs(i[n])}function Ll(n,i){return Gs(i[n.index])}function Ba(n,i){return n.data[i]}function rc(n,i){const o=i[n];return Wa(o)?o:o[Ho]}function Zm(n){return!(128&~n[es])}function kl(n,i){return null==i?null:n[i]}function Oh(n){n[Ua]=0}function Jm(n){1024&n[es]||(n[es]|=1024,Zm(n)&&kh(n))}function Bu(n){var i;return!!(9216&n[es]||null!==(i=n[dl])&&void 0!==i&&i.dirty)}function Lh(n){var i;null===(i=n[sl].changeDetectionScheduler)||void 0===i||i.notify(7),64&n[es]&&(n[es]|=1024),Bu(n)&&kh(n)}function kh(n){var i;null===(i=n[sl].changeDetectionScheduler)||void 0===i||i.notify(0);let o=Kc(n);for(;null!==o&&!(8192&o[es])&&(o[es]|=8192,Zm(o));)o=Kc(o)}function Ec(n,i){if(!(256&~n[es]))throw new Vr(911,!1);null===n[fc]&&(n[fc]=[]),n[fc].push(i)}function Kc(n){const i=n[Pa];return bl(i)?i[Pa]:i}const ds={lFrame:dp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Vu=!1;function Xd(){return ds.bindingsEnabled}function Gu(){return null!==ds.skipHydrationRootTNode}function xr(){return ds.lFrame.lView}function zs(){return ds.lFrame.tView}function tg(n){return ds.lFrame.contextLView=n,n[Do]}function Tc(n){return ds.lFrame.contextLView=null,n}function bo(){let n=ov();for(;null!==n&&64===n.type;)n=n.parent;return n}function ov(){return ds.lFrame.currentTNode}function Xl(n,i){const o=ds.lFrame;o.currentTNode=n,o.isParent=i}function Nh(){return ds.lFrame.isParent}function jh(){ds.lFrame.isParent=!1}function lv(){return Vu}function cv(n){Vu=n}function Xa(){const n=ds.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Mc(){return ds.lFrame.bindingIndex++}function pu(n){const i=ds.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Wb(n,i){const o=ds.lFrame;o.bindingIndex=o.bindingRootIndex=n,rg(i)}function rg(n){ds.lFrame.currentDirectiveIndex=n}function cp(){return ds.lFrame.currentQueryIndex}function Uh(n){ds.lFrame.currentQueryIndex=n}function up(n){const i=n[qr];return 2===i.type?i.declTNode:1===i.type?n[ba]:null}function hv(n,i,o){if(o&As.SkipSelf){let y=i,P=n;for(;!(y=y.parent,null!==y||o&As.Host||(y=up(P),null===y||(P=P[Nu],10&y.type))););if(null===y)return!1;i=y,n=P}const c=ds.lFrame=Bh();return c.currentTNode=i,c.lView=n,!0}function qd(n){const i=Bh(),o=n[qr];ds.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Bh(){const n=ds.lFrame,i=null===n?null:n.child;return null===i?dp(n):i}function dp(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function hp(){const n=ds.lFrame;return ds.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Kd=hp;function Vh(){const n=hp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qa(){return ds.lFrame.selectedIndex}function Yc(n){ds.lFrame.selectedIndex=n}function Io(){const n=ds.lFrame;return Ba(n.tView,n.selectedIndex)}let sg=!0;function Ac(){return sg}function ql(n){sg=n}function pp(n,i){for(let qe=i.directiveStart,lt=i.directiveEnd;qe<lt;qe++){const dn=n.data[qe].type.prototype,{ngAfterContentInit:_n,ngAfterContentChecked:gn,ngAfterViewInit:nr,ngAfterViewChecked:kr,ngOnDestroy:Hr}=dn;var o,c,y,P,W,ce,Ee;_n&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-qe,_n),gn&&((null!==(c=n.contentHooks)&&void 0!==c?c:n.contentHooks=[]).push(qe,gn),(null!==(y=n.contentCheckHooks)&&void 0!==y?y:n.contentCheckHooks=[]).push(qe,gn)),nr&&(null!==(P=n.viewHooks)&&void 0!==P?P:n.viewHooks=[]).push(-qe,nr),kr&&((null!==(W=n.viewHooks)&&void 0!==W?W:n.viewHooks=[]).push(qe,kr),(null!==(ce=n.viewCheckHooks)&&void 0!==ce?ce:n.viewCheckHooks=[]).push(qe,kr)),null!=Hr&&(null!==(Ee=n.destroyHooks)&&void 0!==Ee?Ee:n.destroyHooks=[]).push(qe,Hr)}}function mp(n,i,o){pv(n,i,3,o)}function gp(n,i,o,c){(3&n[es])===o&&pv(n,i,o,c)}function og(n,i){let o=n[es];(3&o)===i&&(o&=16383,o+=1,n[es]=o)}function pv(n,i,o,c){const P=null!=c?c:-1,W=i.length-1;let ce=0;for(let Ee=void 0!==c?65535&n[Ua]:0;Ee<W;Ee++)if("number"==typeof i[Ee+1]){if(ce=i[Ee],null!=c&&ce>=c)break}else i[Ee]<0&&(n[Ua]+=65536),(ce<P||-1==P)&&(Kb(n,o,i,Ee),n[Ua]=(4294901760&n[Ua])+Ee+2),Ee++}function mv(n,i){Xc(4,n,i);const o=be(null);try{i.call(n)}finally{be(o),Xc(5,n,i)}}function Kb(n,i,o,c){const y=o[c]<0,P=o[c+1],ce=n[y?-o[c]:o[c]];y?n[es]>>14<n[Ua]>>16&&(3&n[es])===i&&(n[es]+=16384,mv(ce,P)):mv(ce,P)}const Zd=-1;class Gh{constructor(i,o,c){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}const yp={};class Zc{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,c){c=kt(c);const y=this.injector.get(i,yp,c);return y!==yp||o===yp?y:this.parentInjector.get(i,o,c)}}function Qd(n){return n!==Zd}function $h(n){return 32767&n}function Wh(n,i){let o=function Hh(n){return n>>16}(n),c=i;for(;o>0;)c=c[Nu],o--;return c}let vp=!0;function zu(n){const i=vp;return vp=n,i}const _v=255,Jc=5;let bv=0;const Cc={};function _p(n,i){const o=bp(n,i);if(-1!==o)return o;const c=i[qr];c.firstCreatePass&&(n.injectorIndex=i.length,cg(c.data,n),cg(i,null),cg(c.blueprint,null));const y=md(n,i),P=n.injectorIndex;if(Qd(y)){const W=$h(y),ce=Wh(y,i),Ee=ce[qr].data;for(let qe=0;qe<8;qe++)i[P+qe]=ce[W+qe]|Ee[W+qe]}return i[P+8]=y,P}function cg(n,i){n.push(0,0,0,0,0,0,0,0,i)}function bp(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function md(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,y=i;for(;null!==y;){if(c=xv(y),null===c)return Zd;if(o++,y=y[Nu],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return Zd}function gd(n,i,o){!function lg(n,i,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(uc)&&(c=o[uc]),null==c&&(c=o[uc]=bv++);const y=c&_v;i.data[n+(y>>Jc)]|=1<<y}(n,i,o)}function wp(n,i,o){if(o&As.Optional||void 0!==n)return n;ou()}function wv(n,i,o,c){if(o&As.Optional&&void 0===c&&(c=null),!(o&(As.Self|As.Host))){const y=n[Fa],P=Ia(void 0);try{return y?y.get(i,c,o&As.Optional):_o(i,c,o&As.Optional)}finally{Ia(P)}}return wp(c,0,o)}function Xh(n,i,o,c=As.Default,y){if(null!==n){if(2048&i[es]&&!(c&As.Self)){const W=function Qb(n,i,o,c,y){let P=n,W=i;for(;null!==P&&null!==W&&2048&W[es]&&!(512&W[es]);){const ce=xp(P,W,o,c|As.Self,Cc);if(ce!==Cc)return ce;let Ee=P.parent;if(!Ee){const qe=W[cd];if(qe){const lt=qe.get(o,Cc,c);if(lt!==Cc)return lt}Ee=xv(W),W=W[Nu]}P=Ee}return y}(n,i,o,c,Cc);if(W!==Cc)return W}const P=xp(n,i,o,c,Cc);if(P!==Cc)return P}return wv(i,o,c,y)}function xp(n,i,o,c,y){const P=function Jb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(uc)?n[uc]:void 0;return"number"==typeof i?i>=0?i&_v:Dc:i}(o);if("function"==typeof P){if(!hv(i,n,c))return c&As.Host?wp(y,0,c):wv(i,o,c,y);try{let W;if(W=P(c),null!=W||c&As.Optional)return W;ou()}finally{Kd()}}else if("number"==typeof P){let W=null,ce=bp(n,i),Ee=Zd,qe=c&As.Host?i[Jo][ba]:null;for((-1===ce||c&As.SkipSelf)&&(Ee=-1===ce?md(n,i):i[ce+8],Ee!==Zd&&fg(c,!1)?(W=i[qr],ce=$h(Ee),i=Wh(Ee,i)):ce=-1);-1!==ce;){const lt=i[qr];if(hg(P,ce,lt.data)){const St=dg(ce,i,o,W,c,qe);if(St!==Cc)return St}Ee=i[ce+8],Ee!==Zd&&fg(c,i[qr].data[ce+8]===qe)&&hg(P,ce,i)?(W=lt,ce=$h(Ee),i=Wh(Ee,i)):ce=-1}}return y}function dg(n,i,o,c,y,P){const W=i[qr],ce=W.data[n+8],lt=eh(ce,W,o,null==c?Hc(ce)&&vp:c!=W&&!!(3&ce.type),y&As.Host&&P===ce);return null!==lt?mu(i,W,lt,ce):Cc}function eh(n,i,o,c,y){const P=n.providerIndexes,W=i.data,ce=1048575&P,Ee=n.directiveStart,lt=P>>20,dn=y?ce+lt:n.directiveEnd;for(let _n=c?ce:ce+lt;_n<dn;_n++){const gn=W[_n];if(_n<Ee&&o===gn||_n>=Ee&&gn.type===o)return _n}if(y){const _n=W[Ee];if(_n&&Sc(_n)&&_n.type===o)return Ee}return null}function mu(n,i,o,c){let y=n[o];const P=i.data;if(function Yb(n){return n instanceof Gh}(y)){const W=y;W.resolving&&function Ml(n,i){throw i&&i.join(" > "),new Vr(-200,n)}(function Ys(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():os(n)}(P[o]));const ce=zu(W.canSeeViewProviders);W.resolving=!0;const qe=W.injectImpl?Ia(W.injectImpl):null;hv(n,c,As.Default);try{y=n[o]=W.factory(void 0,P,n,c),i.firstCreatePass&&o>=c.directiveStart&&function qb(n,i,o){const{ngOnChanges:c,ngOnInit:y,ngDoCheck:P}=i.type.prototype;if(c){var W,ce;const St=Uu(i);(null!==(W=o.preOrderHooks)&&void 0!==W?W:o.preOrderHooks=[]).push(n,St),(null!==(ce=o.preOrderCheckHooks)&&void 0!==ce?ce:o.preOrderCheckHooks=[]).push(n,St)}var Ee,qe,lt;y&&(null!==(Ee=o.preOrderHooks)&&void 0!==Ee?Ee:o.preOrderHooks=[]).push(0-n,y),P&&((null!==(qe=o.preOrderHooks)&&void 0!==qe?qe:o.preOrderHooks=[]).push(n,P),(null!==(lt=o.preOrderCheckHooks)&&void 0!==lt?lt:o.preOrderCheckHooks=[]).push(n,P))}(o,P[o],i)}finally{null!==qe&&Ia(qe),zu(ce),W.resolving=!1,Kd()}}return y}function hg(n,i,o){return!!(o[i+(n>>Jc)]&1<<n)}function fg(n,i){return!(n&As.Self||n&As.Host&&i)}class ga{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,c){return Xh(this._tNode,this._lView,i,kt(c),o)}}function Dc(){return new ga(bo(),xr())}function pg(n){return go(()=>{const i=n.prototype.constructor,o=i[vl]||mg(i),c=Object.prototype;let y=Object.getPrototypeOf(n.prototype).constructor;for(;y&&y!==c;){const P=y[vl]||mg(y);if(P&&P!==o)return P;y=Object.getPrototypeOf(y)}return P=>new P})}function mg(n){return tl(n)?()=>{const i=mg(di(n));return i&&i()}:Ks(n)}function xv(n){const i=n[qr],o=i.type;return 2===o?i.declTNode:1===o?n[ba]:null}function qh(n){return function ug(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const c=o.length;let y=0;for(;y<c;){const P=o[y];if(oa(P))break;if(0===P)y+=2;else if("number"==typeof P)for(y++;y<c&&"string"==typeof o[y];)y++;else{if(P===i)return o[y+1];y+=2}}}return null}(bo(),n)}function Av(n,i=null,o=null,c){const y=Ic(n,i,o,c);return y.resolveInjectorInitializers(),y}function Ic(n,i=null,o=null,c,y=new Set){const P=[o||ei,uu(n)];return c=c||("object"==typeof n?void 0:Mo(n)),new xc(P,i||Rl(),c||null,y)}class ya{static create(i,o){if(Array.isArray(i))return Av({name:""},o,i,"");{var c;const y=null!==(c=i.name)&&void 0!==c?c:"";return Av({name:y},i.parent,i.providers,y)}}}(ns=ya).THROW_IF_NOT_FOUND=Te,ns.NULL=new $o,ns.\u0275prov=Jr({token:ns,providedIn:"any",factory:()=>ve(Ss)}),ns.__NG_ELEMENT_ID__=-1,new ui("").__NG_ELEMENT_ID__=n=>{const i=bo();if(null===i)throw new Vr(204,!1);if(2&i.type)return i.value;if(n&As.Optional)return null;throw new Vr(204,!1)};function $u(n){return n.ngOriginalError}let gu=(()=>{var n;class i{}return(n=i).__NG_ELEMENT_ID__=o1,n.__NG_ENV_ID__=o=>o,i})();class s1 extends gu{constructor(i){super(),this._lView=i}onDestroy(i){return Ec(this._lView,i),()=>function Wd(n,i){if(null===n[fc])return;const o=n[fc].indexOf(i);-1!==o&&n[fc].splice(o,1)}(this._lView,i)}}function o1(){return new s1(xr())}let Kl=(()=>{var n;class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(n=i).\u0275prov=Jr({token:n,providedIn:"root",factory:()=>new n}),i})();const aa=class l1 extends Ut.B{constructor(i=!1){var o,c;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=i,Ah()&&(this.destroyRef=null!==(o=at(gu,{optional:!0}))&&void 0!==o?o:void 0,this.pendingTasks=null!==(c=at(Kl,{optional:!0}))&&void 0!==c?c:void 0)}emit(i){const o=be(null);try{super.next(i)}finally{be(o)}}subscribe(i,o,c){let y=i,P=o||(()=>null),W=c;if(i&&"object"==typeof i){var ce,Ee,qe;const St=i;y=null===(ce=St.next)||void 0===ce?void 0:ce.bind(St),P=null===(Ee=St.error)||void 0===Ee?void 0:Ee.bind(St),W=null===(qe=St.complete)||void 0===qe?void 0:qe.bind(St)}this.__isAsync&&(P=this.wrapInTimeout(P),y&&(y=this.wrapInTimeout(y)),W&&(W=this.wrapInTimeout(W)));const lt=super.subscribe({next:y,error:P,complete:W});return i instanceof Xt.yU&&i.add(lt),lt}wrapInTimeout(i){return o=>{var c;const y=null===(c=this.pendingTasks)||void 0===c?void 0:c.add();setTimeout(()=>{var P;i(o),void 0!==y&&(null===(P=this.pendingTasks)||void 0===P||P.remove(y))})}}};function pc(...n){}function Cv(n){let i,o;function c(){n=pc;try{void 0!==o&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(o),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{n(),c()}),"function"==typeof requestAnimationFrame&&(o=requestAnimationFrame(()=>{n(),c()})),()=>c()}function ic(n){return queueMicrotask(()=>n()),()=>{n=pc}}class la{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),typeof Zone>"u")throw new Vr(908,!1);Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!c&&o,y.shouldCoalesceRunChangeDetection=c,y.callbackScheduled=!1,function c1(n){const i=()=>{!function uE(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{Cv(()=>{n.callbackScheduled=!1,yu(n),n.isCheckStableRunning=!0,Dv(n),n.isCheckStableRunning=!1})}),yu(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,y,P,W,ce)=>{if(function Rv(n){return Pv(n,"__ignore_ng_zone__")}(ce))return o.invokeTask(y,P,W,ce);try{return Iv(n),o.invokeTask(y,P,W,ce)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||n.shouldCoalesceRunChangeDetection)&&i(),Ep(n)}},onInvoke:(o,c,y,P,W,ce,Ee)=>{try{return Iv(n),o.invoke(y,P,W,ce,Ee)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function bg(n){return Pv(n,"__scheduler_tick__")}(ce)&&i(),Ep(n)}},onHasTask:(o,c,y,P)=>{o.hasTask(y,P),c===y&&("microTask"==P.change?(n._hasPendingMicrotasks=P.microTask,yu(n),Dv(n)):"macroTask"==P.change&&(n.hasPendingMacrotasks=P.macroTask))},onHandleError:(o,c,y,P)=>(o.handleError(y,P),n.runOutsideAngular(()=>n.onError.emit(P)),!1)})}(y)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Vr(909,!1)}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Vr(909,!1)}run(i,o,c){return this._inner.run(i,o,c)}runTask(i,o,c,y){const P=this._inner,W=P.scheduleEventTask("NgZoneEvent: "+y,i,Sp,pc,pc);try{return P.runTask(W,o,c)}finally{P.cancelTask(W)}}runGuarded(i,o,c){return this._inner.runGuarded(i,o,c)}runOutsideAngular(i){return this._outer.run(i)}}const Sp={};function Dv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yu(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Iv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ep(n){n._nesting--,Dv(n)}class Tp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(i,o,c){return i.apply(o,c)}runGuarded(i,o,c){return i.apply(o,c)}runOutsideAngular(i){return i()}runTask(i,o,c,y){return i.apply(o,c)}}function Pv(n,i){var o;return!(!Array.isArray(n)||1!==n.length)&&!0===(null===(o=n[0])||void 0===o||null===(o=o.data)||void 0===o?void 0:o[i])}class Rc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&$u(i);for(;o&&$u(o);)o=$u(o);return o||null}}const Zh=new ui("",{providedIn:"root",factory:()=>{const n=at(la),i=at(Rc);return o=>n.runOutsideAngular(()=>i.handleError(o))}});function kv(){return ih(bo(),xr())}function ih(n,i){return new Jh(Ll(n,i))}let Jh=(()=>{class i{constructor(c){this.nativeElement=c}}return i.__NG_ELEMENT_ID__=kv,i})();function Nv(n){return n instanceof Jh?n.nativeElement:n}function xg(){return this._results[Symbol.iterator]()}class vu{get changes(){var i;return null!==(i=this._changes)&&void 0!==i?i:this._changes=new aa}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=vu.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=xg)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){this.dirty=!1;const c=function us(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Go(n,i,o){if(n.length!==i.length)return!1;for(let c=0;c<n.length;c++){let y=n[c],P=i[c];if(o&&(y=o(y),P=o(P)),P!==y)return!1}return!0}(this._results,c,o))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){var i;this.dirty=!0,null===(i=this._onDirty)||void 0===i||i.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function ef(n){return!(128&~n.flags)}const Sg=new Map;let Ap=0;const nf="__ngContext__";function wl(n,i){Wa(i)?(n[nf]=i[ld],function fE(n){Sg.set(n[ld],n)}(i)):n[nf]=i}function Gv(n){return $v(n[ad])}function zv(n){return $v(n[Lo])}function $v(n){for(;null!==n&&!bl(n);)n=n[Lo];return n}let Dp;function yE(n){Dp=n}const oh=new ui("",{providedIn:"root",factory:()=>Zv}),Zv="ng",E1=new ui(""),Ip=new ui("",{providedIn:"platform",factory:()=>"unknown"}),vE=new ui(""),Jv=new ui("",{providedIn:"root",factory:()=>{var n;return(null===(n=function _u(){if(void 0!==Dp)return Dp;if(typeof document<"u")return document;throw new Vr(210,!1)}().body)||void 0===n||null===(n=n.querySelector("[ngCspNonce]"))||void 0===n?void 0:n.getAttribute("ngCspNonce"))||null}});let C1=()=>null;function Qv(n,i,o=!1){return C1(n,i,o)}const a0=new ui("",{providedIn:"root",factory:()=>!1});let Vp,Gp;function lh(n){var i;return(null===(i=function kg(){if(void 0===Vp&&(Vp=null,ho.trustedTypes))try{Vp=ho.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vp}())||void 0===i?void 0:i.createHTML(n))||n}function h0(n){var i;return(null===(i=function Ng(){if(void 0===Gp&&(Gp=null,ho.trustedTypes))try{Gp=ho.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gp}())||void 0===i?void 0:i.createScriptURL(n))||n}class Ed{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Js})`}}class L1 extends Ed{getTypeName(){return"HTML"}}class k1 extends Ed{getTypeName(){return"Style"}}class N1 extends Ed{getTypeName(){return"Script"}}class j1 extends Ed{getTypeName(){return"URL"}}class F1 extends Ed{getTypeName(){return"ResourceURL"}}function bu(n){return n instanceof Ed?n.changingThisBreaksApplicationSecurity:n}function ch(n,i){const o=function U1(n){return n instanceof Ed&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Js})`)}return o===i}function B1(n){return new L1(n)}function V1(n){return new k1(n)}function G1(n){return new N1(n)}function z1(n){return new j1(n)}function $1(n){return new F1(n)}class H1{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(lh(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class W1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=lh(i),o}}const q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zp(n){return(n=String(n)).match(q1)?n:"unsafe:"+n}function wu(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function uf(...n){const i={};for(const o of n)for(const c in o)o.hasOwnProperty(c)&&(i[c]=!0);return i}const p0=wu("area,br,col,hr,img,wbr"),m0=wu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g0=wu("rp,rt"),jg=uf(p0,uf(m0,wu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uf(g0,wu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uf(g0,m0)),Fg=wu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),y0=uf(Fg,wu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K1=wu("script,style,template");class Y1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,c=!0,y=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)y.push(o),o=Q1(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let P=J1(o);if(P){o=P;break}o=y.pop()}return this.buf.join("")}startElement(i){const o=v0(i).toLowerCase();if(!jg.hasOwnProperty(o))return this.sanitizedSomething=!0,!K1.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=i.attributes;for(let y=0;y<c.length;y++){const P=c.item(y),W=P.name,ce=W.toLowerCase();if(!y0.hasOwnProperty(ce)){this.sanitizedSomething=!0;continue}let Ee=P.value;Fg[ce]&&(Ee=zp(Ee)),this.buf.push(" ",W,'="',b0(Ee),'"')}return this.buf.push(">"),!0}endElement(i){const o=v0(i).toLowerCase();jg.hasOwnProperty(o)&&!p0.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(b0(i))}}function J1(n){const i=n.nextSibling;if(i&&n!==i.previousSibling)throw _0(i);return i}function Q1(n){const i=n.firstChild;if(i&&function Z1(n,i){return(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,i))throw _0(i);return i}function v0(n){const i=n.nodeName;return"string"==typeof i?i:"FORM"}function _0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ew=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tw=/([^\#-~ |!])/g;function b0(n){return n.replace(/&/g,"&amp;").replace(ew,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(tw,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $p;function w0(n,i){let o=null;try{$p=$p||function f0(n){const i=new W1(n);return function X1(){try{return!!(new window.DOMParser).parseFromString(lh(""),"text/html")}catch{return!1}}()?new H1(i):i}(n);let c=i?String(i):"";o=$p.getInertBodyElement(c);let y=5,P=c;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,c=P,P=o.innerHTML,o=$p.getInertBodyElement(c)}while(c!==P);return lh((new Y1).sanitizeChildren(Ug(o)||o))}finally{if(o){const c=Ug(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Ug(n){return"content"in n&&function nw(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Td=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Td||{});function Bg(n){const i=df();return i?i.sanitize(Td.URL,n)||"":ch(n,"URL")?bu(n):zp(os(n))}function x0(n){const i=df();if(i)return h0(i.sanitize(Td.RESOURCE_URL,n)||"");if(ch(n,"ResourceURL"))return h0(bu(n));throw new Vr(904,!1)}function S0(n,i,o){return function lw(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?x0:Bg}(i,o)(n)}function df(){const n=xr();return n&&n[sl].sanitizer}const cw=/^>|^->|<!--|-->|--!>|<!-$/g,uw=/(<|>)/g,dw="\u200b$1\u200b";function gc(n){return n instanceof Function?n():n}var zg=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(zg||{});let C0;function D0(n,i){return C0(n,i)}function ff(n,i,o,c,y){if(null!=c){let P,W=!1;bl(c)?P=c:Wa(c)&&(W=!0,c=c[Ho]);const ce=Gs(c);0===n&&null!==o?null==y?pf(i,o,ce):xl(i,o,ce,y||null,!0):1===n&&null!==o?xl(i,o,ce,y||null,!0):2===n?function Md(n,i,o){const c=qp(n,i);c&&function Aw(n,i,o,c){n.removeChild(i,o,c)}(n,c,i,o)}(i,ce,W):3===n&&i.destroyNode(ce),null!=P&&function Dw(n,i,o,c,y){const P=o[nc];P!==Gs(o)&&ff(i,n,c,P,y);for(let ce=wa;ce<o.length;ce++){const Ee=o[ce];tu(Ee[qr],Ee,n,i,c,P)}}(i,n,P,o,y)}}function R0(n,i){return n.createComment(function E0(n){return n.replace(cw,i=>i.replace(uw,dw))}(i))}function $g(n,i,o){return n.createElement(i,o)}function Tw(n,i){var o;null===(o=i[sl].changeDetectionScheduler)||void 0===o||o.notify(8),tu(n,i,i[ps],2,null,null)}function Mw(n,i){const o=n[hu],c=i[Pa];(Wa(c)||i[Jo]!==c[Pa][Jo])&&(n[es]|=Vd.HasTransplantedViews),null===o?n[hu]=[i]:o.push(i)}function P0(n,i){const o=n[hu],c=o.indexOf(i);o.splice(c,1)}function Xp(n,i){if(n.length<=wa)return;const o=wa+i,c=n[o];if(c){const y=c[zc];null!==y&&y!==n&&P0(y,c),i>0&&(n[o-1][Lo]=c[Lo]);const P=ll(n,wa+i);!function VE(n,i){Tw(n,i),i[Ho]=null,i[ba]=null}(c[qr],c);const W=P[_l];null!==W&&W.detachView(P[qr]),c[Pa]=null,c[Lo]=null,c[es]&=-129}return c}function Hg(n,i){if(!(256&i[es])){const o=i[ps];o.destroyNode&&tu(n,i,o,3,null,null),function zE(n){let i=n[ad];if(!i)return O0(n[qr],n);for(;i;){let o=null;if(Wa(i))o=i[ad];else{const c=i[wa];c&&(o=c)}if(!o){for(;i&&!i[Lo]&&i!==n;)Wa(i)&&O0(i[qr],i),i=i[Pa];null===i&&(i=n),Wa(i)&&O0(i[qr],i),o=i&&i[Lo]}i=o}}(i)}}function O0(n,i){if(256&i[es])return;const o=be(null);try{i[es]&=-129,i[es]|=256,i[dl]&&x(i[dl]),function WE(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const y=i[o[c]];if(!(y instanceof Gh)){const P=o[c+1];if(Array.isArray(P))for(let W=0;W<P.length;W+=2){const ce=y[P[W]],Ee=P[W+1];Xc(4,ce,Ee);try{Ee.call(ce)}finally{Xc(5,ce,Ee)}}else{Xc(4,y,P);try{P.call(y)}finally{Xc(5,y,P)}}}}}(n,i),function HE(n,i){const o=n.cleanup,c=i[od];if(null!==o)for(let P=0;P<o.length-1;P+=2)if("string"==typeof o[P]){const W=o[P+3];W>=0?c[W]():c[-W].unsubscribe(),P+=2}else o[P].call(c[o[P+1]]);null!==c&&(i[od]=null);const y=i[fc];if(null!==y){i[fc]=null;for(let P=0;P<y.length;P++)(0,y[P])()}}(n,i),1===i[qr].type&&i[ps].destroy();const c=i[zc];if(null!==c&&bl(i[Pa])){c!==i[Pa]&&P0(c,i);const y=i[_l];null!==y&&y.detachView(n)}!function Uv(n){Sg.delete(n[ld])}(i)}finally{be(o)}}function Cs(n,i,o){return function bi(n,i,o){let c=i;for(;null!==c&&168&c.type;)c=(i=c).parent;if(null===c)return o[Ho];{const{componentOffset:y}=c;if(y>-1){const{encapsulation:P}=n.data[c.directiveStart+y];if(P===nl.None||P===nl.Emulated)return null}return Ll(c,o)}}(n,i.parent,o)}function xl(n,i,o,c,y){n.insertBefore(i,o,c,y)}function pf(n,i,o){n.appendChild(i,o)}function qu(n,i,o,c,y){null!==c?xl(n,i,o,c,y):pf(n,i,o)}function qp(n,i){return n.parentNode(i)}function L0(n,i,o){return N0(n,i,o)}let Ku,N0=function k0(n,i,o){return 40&n.type?Ll(n,o):null};function eu(n,i,o,c){const y=Cs(n,c,i),P=i[ps],ce=L0(c.parent||i[ba],c,i);if(null!=y)if(Array.isArray(o))for(let Ee=0;Ee<o.length;Ee++)qu(P,y,o[Ee],ce,!1);else qu(P,y,o,ce,!1);void 0!==Ku&&Ku(P,c,i,o,y)}function xu(n,i){if(null!==i){const o=i.type;if(3&o)return Ll(i,n);if(4&o)return mf(-1,n[i.index]);if(8&o){const c=i.child;if(null!==c)return xu(n,c);{const y=n[i.index];return bl(y)?mf(-1,y):Gs(y)}}if(128&o)return xu(n,i.next);if(32&o)return D0(i,n)()||Gs(n[i.index]);{const c=Xg(n,i);return null!==c?Array.isArray(c)?c[0]:xu(Kc(n[Jo]),c):xu(n,i.next)}}return null}function Xg(n,i){return null!==i?n[Jo][ba].projection[i.projection]:null}function mf(n,i){const o=wa+n+1;if(o<i.length){const c=i[o],y=c[qr].firstChild;if(null!==y)return xu(c,y)}return i[nc]}function gf(n,i,o,c,y,P,W){for(;null!=o;){if(128===o.type){o=o.next;continue}const ce=c[o.index],Ee=o.type;if(W&&0===i&&(ce&&wl(Gs(ce),c),o.flags|=2),32&~o.flags)if(8&Ee)gf(n,i,o.child,c,y,P,!1),ff(i,n,y,ce,P);else if(32&Ee){const qe=D0(o,c);let lt;for(;lt=qe();)ff(i,n,y,lt,P);ff(i,n,y,ce,P)}else 16&Ee?qg(n,i,c,o,y,P):ff(i,n,y,ce,P);o=W?o.projectionNext:o.next}}function tu(n,i,o,c,y,P){gf(o,c,n.firstChild,i,y,P,!1)}function qg(n,i,o,c,y,P){const W=o[Jo],Ee=W[ba].projection[c.projection];if(Array.isArray(Ee))for(let qe=0;qe<Ee.length;qe++)ff(i,n,y,Ee[qe],P);else{let qe=Ee;const lt=W[Pa];ef(c)&&(qe.flags|=128),gf(n,i,qe,lt,y,P,!0)}}function Kg(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function yf(n,i,o){const{mergedAttrs:c,classes:y,styles:P}=o;null!==c&&Cl(n,i,c),null!==y&&Kg(n,i,y),null!==P&&function Iw(n,i,o){n.setAttribute(i,"style",o)}(n,i,P)}const ys={};function Yg(n=1){Zg(zs(),xr(),qa()+n,!1)}function Zg(n,i,o,c){if(!c)if(3&~i[es]){const P=n.preOrderHooks;null!==P&&gp(i,P,0,o)}else{const P=n.preOrderCheckHooks;null!==P&&mp(i,P,o)}Yc(o)}function Yu(n,i=As.Default){const o=xr();return null===o?ve(n,i):Xh(bo(),o,di(n),i)}function F0(){throw new Error("invalid")}function U0(n,i,o,c,y,P){const W=be(null);try{let ce=null;y&ao.SignalBased&&(ce=i[c][a]),null!==ce&&void 0!==ce.transformFn&&(P=ce.transformFn(P)),y&ao.HasDecoratorInputTransform&&(P=n.inputTransforms[c].call(i,P)),null!==n.setInput?n.setInput(i,ce,P,o,c):iv(i,ce,c,P)}finally{be(W)}}function Yp(n,i,o,c,y,P,W,ce,Ee,qe,lt){const St=i.blueprint.slice();return St[Ho]=y,St[es]=204|c,(null!==qe||n&&2048&n[es])&&(St[es]|=2048),Oh(St),St[Pa]=St[Nu]=n,St[Do]=o,St[sl]=W||n&&n[sl],St[ps]=ce||n&&n[ps],St[Fa]=Ee||n&&n[Fa]||null,St[ba]=P,St[ld]=function Fv(){return Ap++}(),St[ja]=lt,St[cd]=qe,St[Jo]=2==i.type?n[Jo]:St,St}function Ad(n,i,o,c,y){let P=n.data[i];if(null===P)P=function Jg(n,i,o,c,y){const P=ov(),W=Nh(),Ee=n.data[i]=function tm(n,i,o,c,y,P){let W=i?i.injectorIndex:-1,ce=0;return Gu()&&(ce|=128),{type:o,index:c,insertBeforeIndex:null,injectorIndex:W,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:ce,providerIndexes:0,value:y,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,W?P:P&&P.parent,o,i,c,y);return null===n.firstChild&&(n.firstChild=Ee),null!==P&&(W?null==P.child&&null!==Ee.parent&&(P.child=Ee):null===P.next&&(P.next=Ee,Ee.prev=P)),Ee}(n,i,o,c,y),function Fh(){return ds.lFrame.inI18n}()&&(P.flags|=32);else if(64&P.type){P.type=o,P.value=c,P.attrs=y;const W=function fd(){const n=ds.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();P.injectorIndex=null===W?-1:W.injectorIndex}return Xl(P,!0),P}function vf(n,i,o,c){if(0===o)return-1;const y=i.length;for(let P=0;P<o;P++)i.push(c),n.blueprint.push(c),n.data.push(null);return y}function Qg(n,i,o,c,y){const P=qa(),W=2&c;try{Yc(-1),W&&i.length>Ui&&Zg(n,i,Ui,!1),Xc(W?2:0,y),o(c,y)}finally{Yc(P),Xc(W?3:1,y)}}function Zp(n,i,o){if(Gd(i)){const c=be(null);try{const P=i.directiveEnd;for(let W=i.directiveStart;W<P;W++){const ce=n.data[W];ce.contentQueries&&ce.contentQueries(1,o[W],W)}}finally{be(c)}}}function Jp(n,i,o){Xd()&&(function Fw(n,i,o,c){const y=o.directiveStart,P=o.directiveEnd;Hc(o)&&function Hw(n,i,o){const c=Ll(i,n),y=ey(o);let W=16;o.signals?W=4096:o.onPush&&(W=64);const ce=nm(n,Yp(n,y,null,W,c,i,null,n[sl].rendererFactory.createRenderer(c,o),null,null,null));n[i.index]=ce}(i,o,n.data[y+o.componentOffset]),n.firstCreatePass||_p(o,i),wl(c,i);const W=o.initialInputs;for(let ce=y;ce<P;ce++){const Ee=n.data[ce],qe=mu(i,n,ce,o);wl(qe,i),null!==W&&Ww(0,ce-y,qe,Ee,0,W),Sc(Ee)&&(rc(o.index,i)[Do]=mu(i,n,ce,o))}}(n,i,o,Ll(o,i)),!(64&~o.flags)&&W0(n,i,o))}function Qp(n,i,o=Ll){const c=i.localNames;if(null!==c){let y=i.index+1;for(let P=0;P<c.length;P+=2){const W=c[P+1],ce=-1===W?o(i,n):n[W];n[y++]=ce}}}function ey(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=em(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function em(n,i,o,c,y,P,W,ce,Ee,qe,lt){const St=Ui+c,dn=St+y,_n=function B0(n,i){const o=[];for(let c=0;c<i;c++)o.push(c<n?null:ys);return o}(St,dn),gn="function"==typeof qe?qe():qe;return _n[qr]={type:n,blueprint:_n,template:o,queries:null,viewQuery:ce,declTNode:i,data:_n.slice().fill(null,St),bindingStartIndex:St,expandoStartIndex:dn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof W?W():W,firstChild:null,schemas:Ee,consts:gn,incompleteFirstPass:!1,ssrId:lt}}let ty=()=>null;function z0(n,i,o,c,y){for(let W in i){var P;if(!i.hasOwnProperty(W))continue;const ce=i[W];if(void 0===ce)continue;null!==(P=c)&&void 0!==P||(c={});let Ee,qe=ao.None;Array.isArray(ce)?(Ee=ce[0],qe=ce[1]):Ee=ce;let lt=W;if(null!==y){if(!y.hasOwnProperty(W))continue;lt=y[W]}0===n?$0(c,o,lt,Ee,qe):$0(c,o,lt,Ee)}return c}function $0(n,i,o,c,y){let P;n.hasOwnProperty(o)?(P=n[o]).push(i,c):P=n[o]=[i,c],void 0!==y&&P.push(y)}function Yl(n,i,o,c,y,P,W,ce){const Ee=Ll(i,o);let lt,qe=i.inputs;!ce&&null!=qe&&(lt=qe[c])?(oy(n,o,lt,c,y),Hc(i)&&function Lw(n,i){const o=rc(i,n);16&o[es]||(o[es]|=64)}(o,i.index)):3&i.type&&(c=function Ow(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),y=null!=W?W(y,i.value||"",c):y,P.setProperty(Ee,c,y))}function ny(n,i,o,c){if(Xd()){const y=null===c?null:{"":-1},P=function Bw(n,i){const o=n.directiveRegistry;let c=null,y=null;if(o)for(let W=0;W<o.length;W++){const ce=o[W];if(Eo(i,ce.selectors,!1))if(c||(c=[]),Sc(ce))if(null!==ce.findHostDirectiveDefs){const Ee=[];y=y||new Map,ce.findHostDirectiveDefs(ce,Ee,y),c.unshift(...Ee,ce),ry(n,i,Ee.length)}else c.unshift(ce),ry(n,i,0);else{var P;y=y||new Map,null===(P=ce.findHostDirectiveDefs)||void 0===P||P.call(ce,ce,c,y),c.push(ce)}}return null===c?null:[c,y]}(n,o);let W,ce;null===P?W=ce=null:[W,ce]=P,null!==W&&H0(n,i,o,W,y,ce),y&&function Vw(n,i,o){if(i){const c=n.localNames=[];for(let y=0;y<i.length;y+=2){const P=o[i[y+1]];if(null==P)throw new Vr(-301,!1);c.push(i[y],P)}}}(o,c,y)}o.mergedAttrs=Ra(o.mergedAttrs,o.attrs)}function H0(n,i,o,c,y,P){for(let St=0;St<c.length;St++)gd(_p(o,i),n,c[St].type);!function zw(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,c.length);for(let St=0;St<c.length;St++){const dn=c[St];dn.providersResolver&&dn.providersResolver(dn)}let W=!1,ce=!1,Ee=vf(n,i,c.length,null);for(let St=0;St<c.length;St++){const dn=c[St];o.mergedAttrs=Ra(o.mergedAttrs,dn.hostAttrs),$w(n,o,i,Ee,dn),Gw(Ee,dn,y),null!==dn.contentQueries&&(o.flags|=4),(null!==dn.hostBindings||null!==dn.hostAttrs||0!==dn.hostVars)&&(o.flags|=64);const _n=dn.type.prototype;var qe,lt;!W&&(_n.ngOnChanges||_n.ngOnInit||_n.ngDoCheck)&&((null!==(qe=n.preOrderHooks)&&void 0!==qe?qe:n.preOrderHooks=[]).push(o.index),W=!0),ce||!_n.ngOnChanges&&!_n.ngDoCheck||((null!==(lt=n.preOrderCheckHooks)&&void 0!==lt?lt:n.preOrderCheckHooks=[]).push(o.index),ce=!0),Ee++}!function Pw(n,i,o){const y=i.directiveEnd,P=n.data,W=i.attrs,ce=[];let Ee=null,qe=null;for(let lt=i.directiveStart;lt<y;lt++){const St=P[lt],dn=o?o.get(St):null,gn=dn?dn.outputs:null;Ee=z0(0,St.inputs,lt,Ee,dn?dn.inputs:null),qe=z0(1,St.outputs,lt,qe,gn);const nr=null===Ee||null===W||Ld(i)?null:Xw(Ee,lt,W);ce.push(nr)}null!==Ee&&(Ee.hasOwnProperty("class")&&(i.flags|=8),Ee.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=ce,i.inputs=Ee,i.outputs=qe}(n,o,P)}function W0(n,i,o){const c=o.directiveStart,y=o.directiveEnd,P=o.index,W=function dv(){return ds.lFrame.currentDirectiveIndex}();try{Yc(P);for(let ce=c;ce<y;ce++){const Ee=n.data[ce],qe=i[ce];rg(ce),(null!==Ee.hostBindings||0!==Ee.hostVars||null!==Ee.hostAttrs)&&Uw(Ee,qe)}}finally{Yc(-1),rg(W)}}function Uw(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ry(n,i,o){var c;i.componentOffset=o,(null!==(c=n.components)&&void 0!==c?c:n.components=[]).push(i.index)}function Gw(n,i,o){if(o){if(i.exportAs)for(let c=0;c<i.exportAs.length;c++)o[i.exportAs[c]]=n;Sc(i)&&(o[""]=n)}}function $w(n,i,o,c,y){n.data[c]=y;const P=y.factory||(y.factory=Ks(y.type)),W=new Gh(P,Sc(y),Yu);n.blueprint[c]=W,o[c]=W,function Nw(n,i,o,c,y){const P=y.hostBindings;if(P){let W=n.hostBindingOpCodes;null===W&&(W=n.hostBindingOpCodes=[]);const ce=~i.index;(function jw(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(W)!=ce&&W.push(ce),W.push(o,c,P)}}(n,i,c,vf(n,o,y.hostVars,ys),y)}function nu(n,i,o,c,y,P){const W=Ll(n,i);!function iy(n,i,o,c,y,P,W){if(null==P)n.removeAttribute(i,y,o);else{const ce=null==W?os(P):W(P,c||"",y);n.setAttribute(i,y,ce,o)}}(i[ps],W,P,n.value,o,c,y)}function Ww(n,i,o,c,y,P){const W=P[i];if(null!==W)for(let ce=0;ce<W.length;)U0(c,o,W[ce++],W[ce++],W[ce++],W[ce++])}function Xw(n,i,o){let c=null,y=0;for(;y<o.length;){const P=o[y];if(0!==P)if(5!==P){if("number"==typeof P)break;if(n.hasOwnProperty(P)){null===c&&(c=[]);const W=n[P];for(let ce=0;ce<W.length;ce+=3)if(W[ce]===i){c.push(P,W[ce+1],W[ce+2],o[y+1]);break}}y+=2}else y+=2;else y+=4}return c}function X0(n,i,o,c){return[n,!0,0,i,null,c,null,o,null,null]}function q0(n,i){const o=n.contentQueries;if(null!==o){const c=be(null);try{for(let y=0;y<o.length;y+=2){const W=o[y+1];if(-1!==W){const ce=n.data[W];Uh(o[y]),ce.contentQueries(2,i[W],W)}}}finally{be(c)}}}function nm(n,i){return n[ad]?n[Yf][Lo]=i:n[ad]=i,n[Yf]=i,i}function sy(n,i,o){Uh(0);const c=be(null);try{i(n,o)}finally{be(c)}}function K0(n){var i;return null!==(i=n[od])&&void 0!==i?i:n[od]=[]}function Y0(n){var i;return null!==(i=n.cleanup)&&void 0!==i?i:n.cleanup=[]}function rm(n,i){const o=n[Fa],c=o?o.get(Rc,null):null;c&&c.handleError(i)}function oy(n,i,o,c,y){for(let P=0;P<o.length;){const W=o[P++],ce=o[P++],Ee=o[P++];U0(n.data[W],i[W],c,ce,Ee,y)}}function Su(n,i,o){const c=$d(i,n);!function Ew(n,i,o){n.setValue(i,o)}(n[ps],c,o)}function qw(n,i){const o=rc(i,n),c=o[qr];!function Kw(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])}(c,o);const y=o[Ho];null!==y&&null===o[ja]&&(o[ja]=Qv(y,o[Fa])),ay(c,o,o[Do])}function ay(n,i,o){qd(i);try{var c;const y=n.viewQuery;null!==y&&sy(1,y,o);const P=n.template;null!==P&&Qg(n,i,P,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),null===(c=i[_l])||void 0===c||c.finishViewCreation(n),n.staticContentQueries&&q0(n,i),n.staticViewQueries&&sy(2,n.viewQuery,o);const W=n.components;null!==W&&function Yw(n,i){for(let o=0;o<i.length;o++)qw(n,i[o])}(i,W)}catch(y){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),y}finally{i[es]&=-5,Vh()}}function hh(n,i,o,c){const y=be(null);try{var P,W,ce;const Ee=i.tView,St=Yp(n,Ee,o,4096&n[es]?4096:16,null,i,null,null,null!==(P=null==c?void 0:c.injector)&&void 0!==P?P:null,null!==(W=null==c?void 0:c.embeddedViewInjector)&&void 0!==W?W:null,null!==(ce=null==c?void 0:c.dehydratedView)&&void 0!==ce?ce:null);St[zc]=n[i.index];const _n=n[_l];return null!==_n&&(St[_l]=_n.createEmbeddedView(Ee)),ay(Ee,St,o),St}finally{be(y)}}function Eu(n,i){return!i||null===i.firstChild||ef(n)}function Cd(n,i,o,c=!0){const y=i[qr];if(function $E(n,i,o,c){const y=wa+c,P=o.length;c>0&&(o[y-1][Lo]=i),c<P-wa?(i[Lo]=o[y],ia(o,wa+c,i)):(o.push(i),i[Lo]=null),i[Pa]=o;const W=i[zc];null!==W&&o!==W&&Mw(W,i);const ce=i[_l];null!==ce&&ce.insertView(n),Lh(i),i[es]|=128}(y,i,n,o),c){const W=mf(o,n),ce=i[ps],Ee=qp(ce,n[nc]);null!==Ee&&function GE(n,i,o,c,y,P){c[Ho]=y,c[ba]=i,tu(n,c,o,1,y,P)}(y,n[ba],ce,i,Ee,W)}const P=i[ja];null!==P&&null!==P.firstChild&&(P.firstChild=null)}function Zu(n,i,o,c,y=!1){for(;null!==o;){if(128===o.type){o=y?o.projectionNext:o.next;continue}const P=i[o.index];null!==P&&c.push(Gs(P)),bl(P)&&cy(P,c);const W=o.type;if(8&W)Zu(n,i,o.child,c);else if(32&W){const ce=D0(o,i);let Ee;for(;Ee=ce();)c.push(Ee)}else if(16&W){const ce=Xg(i,o);if(Array.isArray(ce))c.push(...ce);else{const Ee=Kc(i[Jo]);Zu(Ee[qr],Ee,ce,c,!0)}}o=y?o.projectionNext:o.next}return c}function cy(n,i){for(let o=wa;o<n.length;o++){const c=n[o],y=c[qr].firstChild;null!==y&&Zu(c[qr],c,y,i)}n[nc]!==n[Ho]&&i.push(n[nc])}let Q0=[];const Qw={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kh(n.lView)},consumerOnSignalRead(){this.lView[dl]=this}},ex={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let i=Kc(n.lView);for(;i&&!n_(i[qr]);)i=Kc(i);i&&Jm(i)},consumerOnSignalRead(){this.lView[dl]=this}};function n_(n){return 2!==n.type}const im=100;function sm(n,i=!0,o=0){const c=n[sl],y=c.rendererFactory;var W;null===(W=y.begin)||void 0===W||W.call(y);try{!function tx(n,i){const o=lv();try{cv(!0),_f(n,i);let c=0;for(;Bu(n);){if(c===im)throw new Vr(103,!1);c++,_f(n,1)}}finally{cv(o)}}(n,o)}catch(qe){throw i&&rm(n,qe),qe}finally{var ce,Ee;null===(ce=y.end)||void 0===ce||ce.call(y),null===(Ee=c.inlineEffectRunner)||void 0===Ee||Ee.flush()}}function nx(n,i,o,c){var y;const P=i[es];if(!(256&~P))return;null===(y=i[sl].inlineEffectRunner)||void 0===y||y.flush(),qd(i);let Ee=!0,qe=null,lt=null;n_(n)?(lt=function Zw(n){var i;return null!==(i=n[dl])&&void 0!==i?i:function Jw(n){var i;const o=null!==(i=Q0.pop())&&void 0!==i?i:Object.create(Qw);return o.lView=n,o}(n)}(i),qe=p(lt)):null===function Z(){return j}()?(Ee=!1,lt=function t_(n){var i;const o=null!==(i=n[dl])&&void 0!==i?i:Object.create(ex);return o.lView=n,o}(i),qe=p(lt)):i[dl]&&(x(i[dl]),i[dl]=null);try{Oh(i),function uv(n){return ds.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Qg(n,i,o,2,c);const St=!(3&~P);if(St){const gn=n.preOrderCheckHooks;null!==gn&&mp(i,gn,null)}else{const gn=n.preOrderHooks;null!==gn&&gp(i,gn,0,null),og(i,0)}if(function i_(n){for(let i=Gv(n);null!==i;i=zv(i)){if(!(i[es]&Vd.HasTransplantedViews))continue;const o=i[hu];for(let c=0;c<o.length;c++)Jm(o[c])}}(i),fh(i,0),null!==n.contentQueries&&q0(n,i),St){const gn=n.contentCheckHooks;null!==gn&&mp(i,gn)}else{const gn=n.contentHooks;null!==gn&&gp(i,gn,1),og(i,1)}!function Rw(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const y=o[c];if(y<0)Yc(~y);else{const P=y,W=o[++c],ce=o[++c];Wb(W,P),ce(2,i[P])}}}finally{Yc(-1)}}(n,i);const dn=n.components;null!==dn&&a_(i,dn,0);const _n=n.viewQuery;if(null!==_n&&sy(2,_n,c),St){const gn=n.viewCheckHooks;null!==gn&&mp(i,gn)}else{const gn=n.viewHooks;null!==gn&&gp(i,gn,2),og(i,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[$c]){for(const gn of i[$c])gn();i[$c]=null}i[es]&=-73}catch(St){throw kh(i),St}finally{null!==lt&&(m(lt,qe),Ee&&function e_(n){n.lView[dl]!==n&&(n.lView=null,Q0.push(n))}(lt)),Vh()}}function fh(n,i){for(let o=Gv(n);null!==o;o=zv(o))for(let c=wa;c<o.length;c++)o_(o[c],i)}function s_(n,i,o){o_(rc(i,n),o)}function o_(n,i){Zm(n)&&_f(n,i)}function _f(n,i){const c=n[qr],y=n[es],P=n[dl];let W=!!(0===i&&16&y);if(W||(W=!!(64&y&&0===i)),W||(W=!!(1024&y)),W||(W=!(null==P||!P.dirty||!g(P))),W||(W=!1),P&&(P.dirty=!1),n[es]&=-9217,W)nx(c,n,c.template,n[Do]);else if(8192&y){fh(n,1);const ce=c.components;null!==ce&&a_(n,ce,1)}}function a_(n,i,o){for(let c=0;c<i.length;c++)s_(n,i[c],o)}function bf(n,i){var o;const c=lv()?64:1088;for(null===(o=n[sl].changeDetectionScheduler)||void 0===o||o.notify(i);n;){n[es]|=c;const y=Kc(n);if(zd(n)&&!y)return n;n=y}return null}class wf{get rootNodes(){const i=this._lView,o=i[qr];return Zu(o,i,o.firstChild,[])}constructor(i,o,c=!0){this._lView=i,this._cdRefInjectingView=o,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Do]}set context(i){this._lView[Do]=i}get destroyed(){return!(256&~this._lView[es])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Pa];if(bl(i)){const o=i[8],c=o?o.indexOf(this):-1;c>-1&&(Xp(i,c),ll(o,c))}this._attachedToViewContainer=!1}Hg(this._lView[qr],this._lView)}onDestroy(i){Ec(this._lView,i)}markForCheck(){bf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[es]&=-129}reattach(){Lh(this._lView),this._lView[es]|=128}detectChanges(){this._lView[es]|=1024,sm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Vr(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=zd(this._lView),o=this._lView[zc];null!==o&&!i&&P0(o,this._lView),Tw(this._lView[qr],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Vr(902,!1);this._appRef=i;const o=zd(this._lView),c=this._lView[zc];null!==c&&!o&&Mw(c,this._lView),Lh(this._lView)}}let ph=(()=>{class i{}return i.__NG_ELEMENT_ID__=ix,i})();const rx=ph,l_=class extends rx{constructor(i,o,c){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=c}get ssrId(){var i;return(null===(i=this._declarationTContainer.tView)||void 0===i?void 0:i.ssrId)||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,c){const y=hh(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:o,dehydratedView:c});return new wf(y)}};function ix(){return om(bo(),xr())}function om(n,i){return 4&n.type?new l_(i,n,ih(n,i)):null}let R_=()=>null;function Ju(n,i){return R_(n,i)}class gh{}const If=new ui("",{providedIn:"root",factory:()=>!1}),O_=new ui("");class L_{}class k_{}class N_{resolveComponentFactory(i){throw function Ox(n){const i=Error(`No component factory found for ${Mo(n)}.`);return i.ngComponent=n,i}(i)}}class yh{}yh.NULL=new N_;class Pf{}let wy=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function Qu(){const n=xr(),o=rc(bo().index,n);return(Wa(o)?o:n)[ps]}(),i})(),Lx=(()=>{var n;class i{}return(n=i).\u0275prov=Jr({token:n,providedIn:"root",factory:()=>null}),i})();const F_=new Set;function La(n){var i,o;F_.has(n)||(F_.add(n),null===(i=performance)||void 0===i||null===(o=i.mark)||void 0===o||o.call(i,"mark_feature_usage",{detail:{feature:n}}))}var va=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(va||{});const U_={destroy(){}};function fm(n,i){var o,c;!i&&function Fd(n){if(!Ah())throw new Vr(-203,!1)}();const y=null!==(o=null==i?void 0:i.injector)&&void 0!==o?o:at(ya);return function oc(n){return"browser"===(null!=n?n:at(ya)).get(Ip)}(y)?(La("NgAfterNextRender"),function B_(n,i,o,c){var y;const P=function Sy(n,i){if(n instanceof Function)switch(i){case va.EarlyRead:return{earlyRead:n};case va.Write:return{write:n};case va.MixedReadWrite:return{mixedReadWrite:n};case va.Read:return{read:n}}return n}(n,c),W=i.get(pm),ce=null!==(y=W.handler)&&void 0!==y?y:W.handler=new jx,Ee=[],qe=[],lt=()=>{for(const gn of qe)ce.unregister(gn);St()},St=i.get(gu).onDestroy(lt);let dn=0;const _n=(gn,nr)=>{if(!nr)return;const kr=o?(...gr)=>(dn--,dn<1&&lt(),nr(...gr)):nr,Hr=Mh(i,()=>new Nx(gn,Ee,kr));ce.register(Hr),qe.push(Hr),dn++};return _n(va.EarlyRead,P.earlyRead),_n(va.Write,P.write),_n(va.MixedReadWrite,P.mixedReadWrite),_n(va.Read,P.read),{destroy:lt}}(n,y,!0,null!==(c=null==i?void 0:i.phase)&&void 0!==c?c:va.MixedReadWrite)):U_}class Nx{constructor(i,o,c){var y;this.phase=i,this.pipelinedArgs=o,this.callbackFn=c,this.zone=at(la),this.errorHandler=at(Rc,{optional:!0}),null===(y=at(gh,{optional:!0}))||void 0===y||y.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){var i;null===(i=this.errorHandler)||void 0===i||i.handleError(o)}}}class jx{constructor(){this.executingCallbacks=!1,this.buckets={[va.EarlyRead]:new Set,[va.Write]:new Set,[va.MixedReadWrite]:new Set,[va.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const o of i)o.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let pm=(()=>{var n;class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var c;this.executeInternalCallbacks(),null===(c=this.handler)||void 0===c||c.execute()}executeInternalCallbacks(){const c=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const y of c)y()}ngOnDestroy(){var c;null===(c=this.handler)||void 0===c||c.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(n=i).\u0275prov=Jr({token:n,providedIn:"root",factory:()=>new n}),i})();function ed(n){return!!mi(n)}function ym(n,i,o){let c=o?n.styles:null,y=o?n.classes:null,P=0;if(null!==i)for(let W=0;W<i.length;W++){const ce=i[W];"number"==typeof ce?P=ce:1==P?y=gl(y,ce):2==P&&(c=gl(c,ce+": "+i[++W]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=y:n.classesWithoutHost=y}class $_ extends yh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=kn(i);return new vh(o,this.ngModule)}}function H_(n,i){const o=[];for(const c in n){if(!n.hasOwnProperty(c))continue;const y=n[c];if(void 0===y)continue;const P=Array.isArray(y),W=P?y[0]:y;o.push(i?{propName:W,templateName:c,isSignal:!!((P?y[1]:ao.None)&ao.SignalBased)}:{propName:W,templateName:c})}return o}class vh extends k_{get inputs(){const i=this.componentDef,o=i.inputTransforms,c=H_(i.inputs,!0);if(null!==o)for(const y of c)o.hasOwnProperty(y.propName)&&(y.transform=o[y.propName]);return c}get outputs(){return H_(this.componentDef.outputs,!1)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function me(n){return n.map(rd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,c,y){const P=be(null);try{var ce;let Ee=(y=y||this.ngModule)instanceof Hl?y:null===(ce=y)||void 0===ce?void 0:ce.injector;Ee&&null!==this.componentDef.getStandaloneInjector&&(Ee=this.componentDef.getStandaloneInjector(Ee)||Ee);const qe=Ee?new Zc(i,Ee):i,lt=qe.get(Pf,null);if(null===lt)throw new Vr(407,!1);const St=qe.get(Lx,null),gn={rendererFactory:lt,sanitizer:St,inlineEffectRunner:null,afterRenderEventManager:qe.get(pm,null),changeDetectionScheduler:qe.get(gh,null)},nr=lt.createRenderer(null,this.componentDef),kr=this.componentDef.selectors[0][0]||"div",Hr=c?function V0(n,i,o,c){const P=c.get(a0,!1)||o===nl.ShadowDom,W=n.selectRootElement(i,P);return function G0(n){ty(n)}(W),W}(nr,c,this.componentDef.encapsulation,qe):$g(nr,kr,function ru(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(kr));let gr=512;this.componentDef.signals?gr|=4096:this.componentDef.onPush||(gr|=16);let ls=null;null!==Hr&&(ls=Qv(Hr,qe,!0));const Is=em(0,null,null,1,0,null,null,null,null,null,null),xo=Yp(null,Is,null,gr,null,null,gn,nr,qe,null,ls);let Ul,Jl;qd(xo);try{const Pu=this.componentDef;let Vf,eE=null;Pu.findHostDirectiveDefs?(Vf=[],eE=new Map,Pu.findHostDirectiveDefs(Pu,Vf,eE),Vf.push(Pu)):Vf=[Pu];const EO=function Ux(n,i){const o=n[qr],c=Ui;return n[c]=i,Ad(o,c,2,"#host",null)}(xo,Hr),TO=function Bx(n,i,o,c,y,P,W){const ce=y[qr];!function Vx(n,i,o,c){for(const y of n)i.mergedAttrs=Ra(i.mergedAttrs,y.hostAttrs);null!==i.mergedAttrs&&(ym(i,i.mergedAttrs,!0),null!==o&&yf(c,o,i))}(c,n,i,W);let Ee=null;null!==i&&(Ee=Qv(i,y[Fa]));const qe=P.rendererFactory.createRenderer(i,o);let lt=16;o.signals?lt=4096:o.onPush&&(lt=64);const St=Yp(y,ey(o),null,lt,y[n.index],n,P,qe,null,null,Ee);return ce.firstCreatePass&&ry(ce,n,c.length-1),nm(y,St),y[n.index]=St}(EO,Hr,Pu,Vf,xo,gn,nr);Jl=Ba(Is,Ui),Hr&&function zx(n,i,o,c){if(c)Cl(n,o,["ng-version","18.1.3"]);else{const{attrs:y,classes:P}=function Ae(n){const i=[],o=[];let c=1,y=2;for(;c<n.length;){let P=n[c];if("string"==typeof P)2===y?""!==P&&i.push(P,n[++c]):8===y&&o.push(P);else{if(!rl(y))break;y=P}c++}return{attrs:i,classes:o}}(i.selectors[0]);y&&Cl(n,o,y),P&&P.length>0&&Kg(n,o,P.join(" "))}}(nr,Pu,Hr,c),void 0!==o&&function $x(n,i,o){const c=n.projection=[];for(let y=0;y<i.length;y++){const P=o[y];c.push(null!=P?Array.from(P):null)}}(Jl,this.ngContentSelectors,o),Ul=function Gx(n,i,o,c,y,P){const W=bo(),ce=y[qr],Ee=Ll(W,y);H0(ce,y,W,o,null,c);for(let lt=0;lt<o.length;lt++)wl(mu(y,ce,W.directiveStart+lt,W),y);W0(ce,y,W),Ee&&wl(Ee,y);const qe=mu(y,ce,W.directiveStart+W.componentOffset,W);if(n[Do]=y[Do]=qe,null!==P)for(const lt of P)lt(qe,i);return Zp(ce,W,y),qe}(TO,Pu,Vf,eE,xo,[Mu]),ay(Is,xo,null)}finally{Vh()}return new Fx(this.componentType,Ul,ih(Jl,xo),xo,Jl)}finally{be(P)}}}class Fx extends L_{constructor(i,o,c,y,P){super(),this.location=c,this._rootLView=y,this._tNode=P,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new wf(y,void 0,!1),this.componentType=i}setInput(i,o){const c=this._tNode.inputs;let y;if(null!==c&&(y=c[i])){var P;if(null!==(P=this.previousInputValues)&&void 0!==P||(this.previousInputValues=new Map),this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const W=this._rootLView;oy(W[qr],W,y,i,o),this.previousInputValues.set(i,o),bf(rc(this._tNode.index,W),1)}}get injector(){return new ga(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Mu(){const n=bo();pp(xr()[qr],n)}let _h=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hx,i})();function Hx(){return l(bo(),xr())}const v=_h,t=class extends v{constructor(i,o,c){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=c}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new ga(this._hostTNode,this._hostLView)}get parentInjector(){const i=md(this._hostTNode,this._hostLView);if(Qd(i)){const o=Wh(i,this._hostLView),c=$h(i);return new ga(o[qr].data[c+8],o)}return new ga(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=r(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-wa}createEmbeddedView(i,o,c){let y,P;"number"==typeof c?y=c:null!=c&&(y=c.index,P=c.injector);const W=Ju(this._lContainer,i.ssrId),ce=i.createEmbeddedViewImpl(o||{},P,W);return this.insertImpl(ce,y,Eu(this._hostTNode,W)),ce}createComponent(i,o,c,y,P){var W,ce,Ee;const qe=i&&!function Gc(n){return"function"==typeof n}(i);let lt;if(qe)lt=o;else{const Hr=o||{};lt=Hr.index,c=Hr.injector,y=Hr.projectableNodes,P=Hr.environmentInjector||Hr.ngModuleRef}const St=qe?i:new vh(kn(i)),dn=c||this.parentInjector;if(!P&&null==St.ngModule){const gr=(qe?dn:this.parentInjector).get(Hl,null);gr&&(P=gr)}const _n=kn(null!==(W=St.componentType)&&void 0!==W?W:{}),gn=Ju(this._lContainer,null!==(ce=null==_n?void 0:_n.id)&&void 0!==ce?ce:null),nr=null!==(Ee=null==gn?void 0:gn.firstChild)&&void 0!==Ee?Ee:null,kr=St.create(dn,y,nr,P);return this.insertImpl(kr.hostView,lt,Eu(this._hostTNode,gn)),kr}insert(i,o){return this.insertImpl(i,o,!0)}insertImpl(i,o,c){const y=i._lView;if(function ol(n){return bl(n[Pa])}(y)){const ce=this.indexOf(i);if(-1!==ce)this.detach(ce);else{const Ee=y[Pa],qe=new t(Ee,Ee[ba],Ee[Pa]);qe.detach(qe.indexOf(i))}}const P=this._adjustIndex(o),W=this._lContainer;return Cd(W,y,P,c),i.attachToViewContainerRef(),ia(s(W),P,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=r(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),c=Xp(this._lContainer,o);c&&(ll(s(this._lContainer),o),Hg(c[qr],c))}detach(i){const o=this._adjustIndex(i,-1),c=Xp(this._lContainer,o);return c&&null!=ll(s(this._lContainer),o)?new wf(c):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function r(n){return n[8]}function s(n){return n[8]||(n[8]=[])}function l(n,i){let o;const c=i[n.index];return bl(c)?o=c:(o=X0(c,i,null,n),i[n.index]=o,nm(i,o)),_(o,i,n,c),new t(o,n,i)}let _=function B(n,i,o,c){if(n[nc])return;let y;y=8&o.type?Gs(c):function u(n,i){const o=n[ps],c=o.createComment(""),y=Ll(i,n);return xl(o,qp(o,y),c,function Cw(n,i){return n.nextSibling(i)}(o,y),!1),c}(i,o),n[nc]=y},A=()=>!1;class _e{constructor(i){this.queryList=i,this.matches=null}clone(){return new _e(this.queryList)}setDirty(){this.queryList.setDirty()}}class Re{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const c=null!==i.contentQueries?i.contentQueries[0]:o.length,y=[];for(let P=0;P<c;P++){const W=o.getByIndex(P);y.push(this.queries[W.indexInDeclarationView].clone())}return new Re(y)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==wr(i,o).matches&&this.queries[o].setDirty()}}class Ue{constructor(i,o,c=null){this.flags=o,this.read=c,this.predicate="string"==typeof i?function er(n){return n.split(",").map(i=>i.trim())}(i):i}}class Le{constructor(i=[]){this.queries=i}elementStart(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let c=0;c<this.length;c++){const y=null!==o?o.length:0,P=this.getByIndex(c).embeddedTView(i,y);P&&(P.indexInDeclarationView=c,null!==o?o.push(P):o=[P])}return null!==o?new Le(o):null}template(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Pe{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Pe(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let c=i.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let y=0;y<c.length;y++){const P=c[y];this.matchTNodeWithReadOption(i,o,ht(o,P)),this.matchTNodeWithReadOption(i,o,eh(o,i,P,!1,!1))}else c===ph?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,eh(o,i,c,!1,!1))}matchTNodeWithReadOption(i,o,c){if(null!==c){const y=this.metadata.read;if(null!==y)if(y===Jh||y===_h||y===ph&&4&o.type)this.addMatch(o.index,-2);else{const P=eh(o,i,y,!1,!1);null!==P&&this.addMatch(o.index,P)}else this.addMatch(o.index,c)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function ht(n,i){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===i)return o[c+1];return null}function st(n,i,o,c){return-1===o?function ut(n,i){return 11&n.type?ih(n,i):4&n.type?om(n,i):null}(i,n):-2===o?function Yt(n,i,o){return o===Jh?ih(i,n):o===ph?om(i,n):o===_h?l(i,n):void 0}(n,i,c):mu(n,n[qr],o,i)}function At(n,i,o,c){const y=i[_l].queries[c];if(null===y.matches){const P=n.data,W=o.matches,ce=[];for(let Ee=0;null!==W&&Ee<W.length;Ee+=2){const qe=W[Ee];ce.push(qe<0?null:st(i,P[qe],W[Ee+1],o.metadata.read))}y.matches=ce}return y.matches}function zt(n,i,o,c){const y=n.queries.getByIndex(o),P=y.matches;if(null!==P){const W=At(n,i,y,o);for(let ce=0;ce<P.length;ce+=2){const Ee=P[ce];if(Ee>0)c.push(W[ce/2]);else{const qe=P[ce+1],lt=i[-Ee];for(let St=wa;St<lt.length;St++){const dn=lt[St];dn[zc]===dn[Pa]&&zt(dn[qr],dn,qe,c)}if(null!==lt[hu]){const St=lt[hu];for(let dn=0;dn<St.length;dn++){const _n=St[dn];zt(_n[qr],_n,qe,c)}}}}}return c}function Pt(n,i,o){var c;const y=new vu(!(4&~o));return function Ya(n,i,o,c){const y=K0(i);y.push(o),n.firstCreatePass&&Y0(n).push(c,y.length-1)}(n,i,y,y.destroy),(null!==(c=i[_l])&&void 0!==c?c:i[_l]=new Re).queries.push(new _e(y))-1}function Kn(n,i,o){null===n.queries&&(n.queries=new Le),n.queries.track(new Pe(i,o))}function wr(n,i){return n.queries.getByIndex(i)}function tr(n,i){const o=n[qr],c=wr(o,i);return c.crossesNgTemplate?zt(o,n,i,[]):At(o,n,c,i)}function hi(n,i){La("NgSignals");const o=function Q(n){const i=Object.create(ye);i.value=n;const o=()=>(w(i),i.value);return o[a]=i,o}(n),c=o[a];return null!=i&&i.equal&&(c.equal=i.equal),o.set=y=>it(c,y),o.update=y=>function le(n,i){f()||oe(),it(n,i(n.value))}(c,y),o.asReadonly=Pi.bind(o),o}function Pi(){const n=this[a];if(void 0===n.readonlyFn){const i=()=>this();i[a]=n,n.readonlyFn=i}return n.readonlyFn}function as(n){return function Wr(n){return"function"==typeof n&&void 0!==n[a]}(n)&&"function"==typeof n.set}function wo(n){let i=function hl(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;i;){let y;if(Sc(n))y=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Vr(903,!1);y=i.\u0275dir}if(y){if(o){c.push(y);const W=n;W.inputs=kf(n.inputs),W.inputTransforms=kf(n.inputTransforms),W.declaredInputs=kf(n.declaredInputs),W.outputs=kf(n.outputs);const ce=y.hostBindings;ce&&My(n,ce);const Ee=y.viewQuery,qe=y.contentQueries;if(Ee&&W_(n,Ee),qe&&Rd(n,qe),Oc(n,y),Vl(n.outputs,y.outputs),Sc(y)&&y.data.animation){const lt=n.data;lt.animation=(lt.animation||[]).concat(y.data.animation)}}const P=y.features;if(P)for(let W=0;W<P.length;W++){const ce=P[W];ce&&ce.ngInherit&&ce(n),ce===wo&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Au(n){let i=0,o=null;for(let c=n.length-1;c>=0;c--){const y=n[c];y.hostVars=i+=y.hostVars,y.hostAttrs=Ra(y.hostAttrs,o=Ra(o,y.hostAttrs))}}(c)}function Oc(n,i){for(const c in i.inputs){if(!i.inputs.hasOwnProperty(c)||n.inputs.hasOwnProperty(c))continue;const y=i.inputs[c];if(void 0!==y&&(n.inputs[c]=y,n.declaredInputs[c]=i.declaredInputs[c],null!==i.inputTransforms)){var o;const P=Array.isArray(y)?y[0]:y;if(!i.inputTransforms.hasOwnProperty(P))continue;null!==(o=n.inputTransforms)&&void 0!==o||(n.inputTransforms={}),n.inputTransforms[P]=i.inputTransforms[P]}}}function kf(n){return n===li?{}:n===ei?[]:n}function W_(n,i){const o=n.viewQuery;n.viewQuery=o?(c,y)=>{i(c,y),o(c,y)}:i}function Rd(n,i){const o=n.contentQueries;n.contentQueries=o?(c,y,P)=>{i(c,y,P),o(c,y,P)}:i}function My(n,i){const o=n.hostBindings;n.hostBindings=o?(c,y)=>{i(c,y),o(c,y)}:i}function J_(n){const i=n.inputConfig,o={};for(const c in i)if(i.hasOwnProperty(c)){const y=i[c];Array.isArray(y)&&y[3]&&(o[c]=y[3])}n.inputTransforms=o}class Pd{}class Q_{}function Wx(n,i){return new qn(n,null!=i?i:null,[])}class qn extends Pd{constructor(i,o,c){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $_(this);const y=mi(i);this._bootstrapComponents=gc(y.bootstrap),this._r3Injector=Ic(i,o,[{provide:Pd,useValue:this},{provide:yh,useValue:this.componentFactoryResolver},...c],Mo(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class dr extends Q_{constructor(i){super(),this.moduleType=i}create(i){return new qn(this.moduleType,i,[])}}class Zn extends Pd{constructor(i){super(),this.componentFactoryResolver=new $_(this),this.instance=null;const o=new xc([...i.providers,{provide:Pd,useValue:this},{provide:yh,useValue:this.componentFactoryResolver}],i.parent||Rl(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ni(n,i,o=null){return new Zn({providers:n,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}function ji(n){return!!ss(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ss(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Hs(n,i,o){return n[i]=o}function Ds(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function iu(n,i,o,c,y,P,W,ce,Ee,qe){const lt=o+Ui,St=i.firstCreatePass?function Lc(n,i,o,c,y,P,W,ce,Ee){const qe=i.consts,lt=Ad(i,n,4,W||null,ce||null);ny(i,o,lt,kl(qe,Ee)),pp(i,lt);const St=lt.tView=em(2,lt,c,y,P,i.directiveRegistry,i.pipeRegistry,null,i.schemas,qe,null);return null!==i.queries&&(i.queries.template(i,lt),St.queries=i.queries.embeddedTView(lt)),lt}(lt,i,n,c,y,P,W,ce,Ee):i.data[lt];Xl(St,!1);const dn=bh(i,n,St,o);Ac()&&eu(i,n,dn,St),wl(dn,n);const _n=X0(dn,n,dn,St);return n[lt]=_n,nm(n,_n),function O(n,i,o){return A(n,i,o)}(_n,St,n),Ch(St)&&Jp(i,n,St),null!=Ee&&Qp(n,St,qe),St}function jl(n,i,o,c,y,P,W,ce){const Ee=xr(),qe=zs();return iu(Ee,qe,n,i,o,c,y,kl(qe.consts,P),W,ce),jl}let bh=function Qo(n,i,o,c){return ql(!0),i[ps].createComment("")};function rS(n,i,o,c){const y=xr();return Ds(y,Mc(),i)&&(zs(),nu(Io(),y,n,i,o,c)),rS}function Am(n,i,o,c,y,P){const ce=function Ws(n,i,o,c){const y=Ds(n,i,o);return Ds(n,i+1,c)||y}(n,function fu(){return ds.lFrame.bindingIndex}(),o,y);return pu(2),ce?i+os(o)+c+os(y)+P:ys}function sb(n,i){return n<<17|i<<2}function xh(n){return n>>17&32767}function iS(n){return 2|n}function Ff(n){return(131068&n)>>2}function sS(n,i){return-131069&n|i<<2}function oS(n){return 1|n}function FT(n,i,o,c){const y=n[o+1],P=null===i;let W=c?xh(y):Ff(y),ce=!1;for(;0!==W&&(!1===ce||P);){const qe=n[W+1];FD(n[W],i)&&(ce=!0,n[W+1]=c?oS(qe):iS(qe)),W=c?xh(qe):Ff(qe)}ce&&(n[o+1]=c?iS(y):oS(y))}function FD(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Yo(n,i)>=0}const fl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UT(n){return n.substring(fl.key,fl.keyEnd)}function UD(n){return n.substring(fl.value,fl.valueEnd)}function VT(n,i){const o=fl.textEnd;let c=fl.key=Lm(n,i,o);return o===c?-1:(c=fl.keyEnd=function zD(n,i,o){let c;for(;i<o&&(45===(c=n.charCodeAt(i))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)i++;return i}(n,c,o),c=zT(n,c,o),c=fl.value=Lm(n,c,o),c=fl.valueEnd=function $D(n,i,o){let c=-1,y=-1,P=-1,W=i,ce=W;for(;W<o;){const Ee=n.charCodeAt(W++);if(59===Ee)return ce;34===Ee||39===Ee?ce=W=$T(n,Ee,W,o):i===W-4&&85===P&&82===y&&76===c&&40===Ee?ce=W=$T(n,41,W,o):Ee>32&&(ce=W),P=y,y=c,c=-33&Ee}return ce}(n,c,o),zT(n,c,o))}function Lm(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function zT(n,i,o,c){return(i=Lm(n,i,o))<o&&i++,i}function $T(n,i,o,c){let y=-1,P=o;for(;P<c;){const W=n.charCodeAt(P++);if(W==i&&92!==y)return P;y=92==W&&92===y?0:W}throw new Error}function aS(n,i,o){const c=xr();return Ds(c,Mc(),i)&&Yl(zs(),Io(),c,n,i,c[ps],o,!1),aS}function lS(n,i,o,c,y){const W=y?"class":"style";oy(n,o,i.inputs[W],W,c)}function cS(n,i){return function Du(n,i,o,c){const y=xr(),P=zs(),W=pu(2);P.firstUpdatePass&&XT(P,n,W,c),i!==ys&&Ds(y,W,i)&&KT(P,P.data[qa()],y,y[ps],n,y[W+1]=function eI(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Mo(bu(n)))),n}(i,o),c,W)}(n,i,null,!0),cS}function Cu(n){!function Iu(n,i,o,c){const y=zs(),P=pu(2);y.firstUpdatePass&&XT(y,null,P,c);const W=xr();if(o!==ys&&Ds(W,P,o)){const ce=y.data[qa()];if(ZT(ce,c)&&!WT(y,P)){let Ee=c?ce.classesWithoutHost:ce.stylesWithoutHost;null!==Ee&&(o=gl(Ee,o||"")),lS(y,ce,W,o,c)}else!function QD(n,i,o,c,y,P,W,ce){y===ys&&(y=ei);let Ee=0,qe=0,lt=0<y.length?y[0]:null,St=0<P.length?P[0]:null;for(;null!==lt||null!==St;){const dn=Ee<y.length?y[Ee+1]:void 0,_n=qe<P.length?P[qe+1]:void 0;let nr,gn=null;lt===St?(Ee+=2,qe+=2,dn!==_n&&(gn=St,nr=_n)):null===St||null!==lt&&lt<St?(Ee+=2,gn=lt):(qe+=2,gn=St,nr=_n),null!==gn&&KT(n,i,o,c,gn,nr,W,ce),lt=Ee<y.length?y[Ee]:null,St=qe<P.length?P[qe]:null}}(y,ce,W,W[ps],W[P+1],W[P+1]=function ZD(n,i,o){if(null==o||""===o)return ei;const c=[],y=bu(o);if(Array.isArray(y))for(let P=0;P<y.length;P++)n(c,y[P],!0);else if("object"==typeof y)for(const P in y)y.hasOwnProperty(P)&&n(c,P,y[P]);else"string"==typeof y&&i(c,y);return c}(n,i,o),c,P)}}(qT,HD,n,!1)}function HD(n,i){for(let o=function VD(n){return function GT(n){fl.key=0,fl.keyEnd=0,fl.value=0,fl.valueEnd=0,fl.textEnd=n.length}(n),VT(n,Lm(n,0,fl.textEnd))}(i);o>=0;o=VT(i,o))qT(n,UT(i),UD(i))}function WT(n,i){return i>=n.expandoStartIndex}function XT(n,i,o,c){const y=n.data;if(null===y[o+1]){const P=y[qa()],W=WT(n,o);ZT(P,c)&&null===i&&!W&&(i=!1),i=function XD(n,i,o,c){const y=function lp(n){const i=ds.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let P=c?i.residualClasses:i.residualStyles;if(null===y)0===(c?i.classBindings:i.styleBindings)&&(o=Py(o=uS(null,n,i,o,c),i.attrs,c),P=null);else{const W=i.directiveStylingLast;if(-1===W||n[W]!==y)if(o=uS(y,n,i,o,c),null===P){let Ee=function qD(n,i,o){const c=o?i.classBindings:i.styleBindings;if(0!==Ff(c))return n[xh(c)]}(n,i,c);void 0!==Ee&&Array.isArray(Ee)&&(Ee=uS(null,n,i,Ee[1],c),Ee=Py(Ee,i.attrs,c),function KD(n,i,o,c){n[xh(o?i.classBindings:i.styleBindings)]=c}(n,i,c,Ee))}else P=function YD(n,i,o){let c;const y=i.directiveEnd;for(let P=1+i.directiveStylingLast;P<y;P++)c=Py(c,n[P].hostAttrs,o);return Py(c,i.attrs,o)}(n,i,c)}return void 0!==P&&(c?i.residualClasses=P:i.residualStyles=P),o}(y,P,i,c),function ND(n,i,o,c,y,P){let W=P?i.classBindings:i.styleBindings,ce=xh(W),Ee=Ff(W);n[c]=o;let lt,qe=!1;if(Array.isArray(o)?(lt=o[1],(null===lt||Yo(o,lt)>0)&&(qe=!0)):lt=o,y)if(0!==Ee){const dn=xh(n[ce+1]);n[c+1]=sb(dn,ce),0!==dn&&(n[dn+1]=sS(n[dn+1],c)),n[ce+1]=function LD(n,i){return 131071&n|i<<17}(n[ce+1],c)}else n[c+1]=sb(ce,0),0!==ce&&(n[ce+1]=sS(n[ce+1],c)),ce=c;else n[c+1]=sb(Ee,0),0===ce?ce=c:n[Ee+1]=sS(n[Ee+1],c),Ee=c;qe&&(n[c+1]=iS(n[c+1])),FT(n,lt,c,!0),FT(n,lt,c,!1),function jD(n,i,o,c,y){const P=y?n.residualClasses:n.residualStyles;null!=P&&"string"==typeof i&&Yo(P,i)>=0&&(o[c+1]=oS(o[c+1]))}(i,lt,n,c,P),W=sb(ce,Ee),P?i.classBindings=W:i.styleBindings=W}(y,P,i,o,W,c)}}function uS(n,i,o,c,y){let P=null;const W=o.directiveEnd;let ce=o.directiveStylingLast;for(-1===ce?ce=o.directiveStart:ce++;ce<W&&(P=i[ce],c=Py(c,P.hostAttrs,y),P!==n);)ce++;return null!==n&&(o.directiveStylingLast=ce),c}function Py(n,i,o){const c=o?1:2;let y=-1;if(null!==i)for(let P=0;P<i.length;P++){const W=i[P];"number"==typeof W?y=W:y===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Li(n,W,!!o||i[++P]))}return void 0===n?null:n}function qT(n,i,o){Li(n,i,bu(o))}function KT(n,i,o,c,y,P,W,ce){if(!(3&i.type))return;const Ee=n.data,qe=Ee[ce+1],lt=function kD(n){return!(1&~n)}(qe)?YT(Ee,i,o,y,Ff(qe),W):void 0;ob(lt)||(ob(P)||function OD(n){return!(2&~n)}(qe)&&(P=YT(Ee,null,o,y,ce,W)),function j0(n,i,o,c,y){if(i)y?n.addClass(o,c):n.removeClass(o,c);else{let P=-1===c.indexOf("-")?void 0:zg.DashCase;null==y?n.removeStyle(o,c,P):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),P|=zg.Important),n.setStyle(o,c,y,P))}}(c,W,$d(qa(),o),y,P))}function YT(n,i,o,c,y,P){const W=null===i;let ce;for(;y>0;){const Ee=n[y],qe=Array.isArray(Ee),lt=qe?Ee[1]:Ee,St=null===lt;let dn=o[y+1];dn===ys&&(dn=St?ei:void 0);let _n=St?Al(dn,c):lt===c?dn:void 0;if(qe&&!ob(_n)&&(_n=Al(Ee,c)),ob(_n)&&(ce=_n,W))return ce;const gn=n[y+1];y=W?xh(gn):Ff(gn)}if(null!==i){let Ee=P?i.residualClasses:i.residualStyles;null!=Ee&&(ce=Al(Ee,c))}return ce}function ob(n){return void 0!==n}function ZT(n,i){return!!(n.flags&(i?8:16))}function lb(n,i,o,c){const y=xr(),P=zs(),W=Ui+n,ce=y[ps],Ee=P.firstCreatePass?function SI(n,i,o,c,y,P){const W=i.consts,Ee=Ad(i,n,2,c,kl(W,y));return ny(i,o,Ee,kl(W,P)),null!==Ee.attrs&&ym(Ee,Ee.attrs,!1),null!==Ee.mergedAttrs&&ym(Ee,Ee.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Ee),Ee}(W,P,y,i,o,c):P.data[W],qe=tM(P,y,Ee,ce,i,n);y[W]=qe;const lt=Ch(Ee);return Xl(Ee,!0),yf(ce,qe,Ee),!function ro(n){return!(32&~n.flags)}(Ee)&&Ac()&&eu(P,y,qe,Ee),0===function Qm(){return ds.lFrame.elementDepthCount}()&&wl(qe,y),function sp(){ds.lFrame.elementDepthCount++}(),lt&&(Jp(P,y,Ee),Zp(P,Ee,y)),null!==c&&Qp(y,Ee),lb}function cb(){let n=bo();Nh()?jh():(n=n.parent,Xl(n,!1));const i=n;(function $b(n){return ds.skipHydrationRootTNode===n})(i)&&function aE(){ds.skipHydrationRootTNode=null}(),function op(){ds.lFrame.elementDepthCount--}();const o=zs();return o.firstCreatePass&&(pp(o,n),Gd(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Jd(n){return!!(8&n.flags)}(i)&&lS(o,i,xr(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zb(n){return!!(16&n.flags)}(i)&&lS(o,i,xr(),i.stylesWithoutHost,!1),cb}function pS(n,i,o,c){return lb(n,i,o,c),cb(),pS}let tM=(n,i,o,c,y,P)=>(ql(!0),$g(c,y,function fv(){return ds.lFrame.currentNamespace}()));function ub(n,i,o){const c=xr(),y=zs(),P=n+Ui,W=y.firstCreatePass?function MI(n,i,o,c,y){const P=i.consts,W=kl(P,c),ce=Ad(i,n,8,"ng-container",W);return null!==W&&ym(ce,W,!0),ny(i,o,ce,kl(P,y)),null!==i.queries&&i.queries.elementStart(i,ce),ce}(P,y,c,i,o):y.data[P];Xl(W,!0);const ce=nM(y,c,W,n);return c[P]=ce,Ac()&&eu(y,c,ce,W),wl(ce,c),Ch(W)&&(Jp(y,c,W),Zp(y,W,c)),null!=o&&Qp(c,W),ub}function db(){let n=bo();const i=zs();return Nh()?jh():(n=n.parent,Xl(n,!1)),i.firstCreatePass&&(pp(i,n),Gd(n)&&i.queries.elementEnd(n)),db}function mS(n,i,o){return ub(n,i,o),db(),mS}let nM=(n,i,o,c)=>(ql(!0),R0(i[ps],""));function rM(){return xr()}const Uf=void 0;var II=["en",[["a","p"],["AM","PM"],Uf],[["AM","PM"],Uf,Uf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uf,"{1} 'at' {0}",Uf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DI(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let km={};function gS(n){const i=function RI(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=aM(i);if(o)return o;const c=i.split("-")[0];if(o=aM(c),o)return o;if("en"===c)return II;throw new Vr(701,!1)}function oM(n){return gS(n)[Nm.PluralCase]}function aM(n){return n in km||(km[n]=ho.ng&&ho.ng.common&&ho.ng.common.locales&&ho.ng.common.locales[n]),km[n]}var Nm=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Nm||{});const jm="en-US";let lM=jm;let AM=(n,i,o)=>{};function _S(n,i,o,c){const y=xr(),P=zs(),W=bo();return bS(P,y,y[ps],W,n,i,c),_S}function bS(n,i,o,c,y,P,W){const ce=Ch(c),qe=n.firstCreatePass&&Y0(n),lt=i[Do],St=K0(i);let dn=!0;if(3&c.type||W){const nr=Ll(c,i),kr=W?W(nr):nr,Hr=St.length,gr=W?Is=>W(Gs(Is[c.index])):c.index;let ls=null;if(!W&&ce&&(ls=function v2(n,i,o,c){const y=n.cleanup;if(null!=y)for(let P=0;P<y.length-1;P+=2){const W=y[P];if(W===o&&y[P+1]===c){const ce=i[od],Ee=y[P+2];return ce.length>Ee?ce[Ee]:null}"string"==typeof W&&(P+=2)}return null}(n,i,y,c.index)),null!==ls)(ls.__ngLastListenerFn__||ls).__ngNextListenerFn__=P,ls.__ngLastListenerFn__=P,dn=!1;else{P=RM(c,i,lt,P),AM(nr,y,P);const Is=o.listen(kr,y,P);St.push(P,Is),qe&&qe.push(y,gr,Hr,Hr+1)}}else P=RM(c,i,lt,P);const _n=c.outputs;let gn;if(dn&&null!==_n&&(gn=_n[y])){const nr=gn.length;if(nr)for(let kr=0;kr<nr;kr+=2){const xo=i[gn[kr]][gn[kr+1]].subscribe(P),Ul=St.length;St.push(P,xo),qe&&qe.push(y,c.index,Ul,-(Ul+1))}}}function IM(n,i,o,c){const y=be(null);try{return Xc(6,i,o),!1!==o(c)}catch(P){return rm(n,P),!1}finally{Xc(7,i,o),be(y)}}function RM(n,i,o,c){return function y(P){if(P===Function)return c;bf(n.componentOffset>-1?rc(n.index,i):i,5);let ce=IM(i,o,c,P),Ee=y.__ngNextListenerFn__;for(;Ee;)ce=IM(i,o,Ee,P)&&ce,Ee=Ee.__ngNextListenerFn__;return ce}}function PM(n=1){return function pd(n){return(ds.lFrame.contextLView=function Hd(n,i){for(;n>0;)i=i[Nu],n--;return i}(n,ds.lFrame.contextLView))[Do]}(n)}function _2(n,i){let o=null;const c=function dc(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let y=0;y<i.length;y++){const P=i[y];if("*"!==P){if(null===c?Eo(n,P,!0):Vc(c,P))return y}else o=y}return o}function OM(n){const i=xr()[Jo][ba];if(!i.projection){const c=i.projection=function sa(n,i){const o=[];for(let c=0;c<n;c++)o.push(i);return o}(n?n.length:1,null),y=c.slice();let P=i.child;for(;null!==P;){if(128!==P.type){const W=n?_2(P,n):0;null!==W&&(y[W]?y[W].projectionNext=P:c[W]=P,y[W]=P)}P=P.next}}}function LM(n,i=0,o,c,y,P){const W=xr(),ce=zs(),Ee=c?n+1:null;null!==Ee&&iu(W,ce,Ee,c,y,P,null,o);const qe=Ad(ce,Ui+n,16,null,o||null);null===qe.projection&&(qe.projection=i),jh();const St=!W[ja]||Gu();null===W[Jo][ba].projection[qe.projection]&&null!==Ee?function b2(n,i,o){const c=Ui+o,y=i.data[c],P=n[c],W=Ju(P,y.tView.ssrId);Cd(P,hh(n,y,void 0,{dehydratedView:W}),0,Eu(y,W))}(W,ce,Ee):St&&32&~qe.flags&&function uh(n,i,o){qg(i[ps],0,i,o,Cs(n,o,i),L0(o.parent||i[ba],o,i))}(ce,W,qe)}function $M(n,i,o,c){!function wn(n,i,o,c){const y=zs();if(y.firstCreatePass){const P=bo();Kn(y,new Ue(i,o,c),P.index),function rr(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(y,n),!(2&~o)&&(y.staticContentQueries=!0)}return Pt(y,xr(),o)}(n,i,o,c)}function HM(n,i,o){!function Tt(n,i,o){const c=zs();return c.firstCreatePass&&(Kn(c,new Ue(n,i,o),-1),!(2&~i)&&(c.staticViewQueries=!0)),Pt(c,xr(),i)}(n,i,o)}function WM(n){const i=xr(),o=zs(),c=cp();Uh(c+1);const y=wr(o,c);if(n.dirty&&function hd(n){return!(4&~n[es])}(i)===!(2&~y.metadata.flags)){if(null===y.matches)n.reset([]);else{const P=tr(i,c);n.reset(P,Nv),n.notifyOnChanges()}return!0}return!1}function XM(){return function tn(n,i){return n[_l].queries[i].queryList}(xr(),cp())}function qM(n){return function qc(n,i){return n[i]}(function ap(){return ds.lFrame.contextLView}(),Ui+n)}function iA(n,i=""){const o=xr(),c=zs(),y=n+Ui,P=c.firstCreatePass?Ad(c,y,1,i,null):c.data[y],W=sA(c,o,P,i,n);o[y]=W,Ac()&&eu(c,o,W,P),Xl(P,!1)}let sA=(n,i,o,c,y)=>(ql(!0),function I0(n,i){return n.createText(i)}(i[ps],c));function SS(n){return mb("",n,""),SS}function mb(n,i,o){const c=xr(),y=function Mm(n,i,o,c){return Ds(n,Mc(),o)?i+os(o)+c:ys}(c,n,i,o);return y!==ys&&Su(c,qa(),y),mb}function ES(n,i,o,c,y){const P=xr(),W=Am(P,n,i,o,c,y);return W!==ys&&Su(P,qa(),W),ES}function TS(n,i,o){as(i)&&(i=i());const c=xr();return Ds(c,Mc(),i)&&Yl(zs(),Io(),c,n,i,c[ps],o,!1),TS}function fA(n,i){const o=as(n);return o&&n.set(i),o}function MS(n,i){const o=xr(),c=zs(),y=bo();return bS(c,o,o[ps],y,n,i),MS}function AS(n,i,o,c,y){if(n=di(n),Array.isArray(n))for(let P=0;P<n.length;P++)AS(n[P],i,o,c,y);else{const P=zs(),W=xr(),ce=bo();let Ee=ku(n)?n:di(n.provide);const qe=gs(n),lt=1048575&ce.providerIndexes,St=ce.directiveStart,dn=ce.providerIndexes>>20;if(ku(n)||!n.multi){const _n=new Gh(qe,y,Yu),gn=DS(Ee,i,y?lt:lt+dn,St);-1===gn?(gd(_p(ce,W),P,Ee),CS(P,n,i.length),i.push(Ee),ce.directiveStart++,ce.directiveEnd++,y&&(ce.providerIndexes+=1048576),o.push(_n),W.push(_n)):(o[gn]=_n,W[gn]=_n)}else{const _n=DS(Ee,i,lt+dn,St),gn=DS(Ee,i,lt,lt+dn),kr=gn>=0&&o[gn];if(y&&!kr||!y&&!(_n>=0&&o[_n])){gd(_p(ce,W),P,Ee);const Hr=function B2(n,i,o,c,y){const P=new Gh(n,o,Yu);return P.multi=[],P.index=i,P.componentProviders=0,gA(P,y,c&&!o),P}(y?U2:F2,o.length,y,c,qe);!y&&kr&&(o[gn].providerFactory=Hr),CS(P,n,i.length,0),i.push(Ee),ce.directiveStart++,ce.directiveEnd++,y&&(ce.providerIndexes+=1048576),o.push(Hr),W.push(Hr)}else CS(P,n,_n>-1?_n:gn,gA(o[y?gn:_n],qe,!y&&c));!y&&c&&kr&&o[gn].componentProviders++}}}function CS(n,i,o,c){const y=ku(i),P=function rE(n){return!!n.useClass}(i);if(y||P){const Ee=(P?di(i.useClass):i).prototype.ngOnDestroy;if(Ee){const qe=n.destroyHooks||(n.destroyHooks=[]);if(!y&&i.multi){const lt=qe.indexOf(o);-1===lt?qe.push(o,[c,Ee]):qe[lt+1].push(c,Ee)}else qe.push(o,Ee)}}}function gA(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function DS(n,i,o,c){for(let y=o;y<c;y++)if(i[y]===n)return y;return-1}function F2(n,i,o,c){return IS(this.multi,[])}function U2(n,i,o,c){const y=this.multi;let P;if(this.providerFactory){const W=this.providerFactory.componentProviders,ce=mu(o,o[qr],this.providerFactory.index,c);P=ce.slice(0,W),IS(y,P);for(let Ee=W;Ee<ce.length;Ee++)P.push(ce[Ee])}else P=[],IS(y,P);return P}function IS(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function yA(n,i=[]){return o=>{o.providersResolver=(c,y)=>function j2(n,i,o){const c=zs();if(c.firstCreatePass){const y=Sc(n);AS(o,c.data,c.blueprint,y,!0),AS(i,c.data,c.blueprint,y,!1)}}(c,y?y(n):n,i)}}let V2=(()=>{var n;class i{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const y=Nd(0,c.type),P=y.length>0?ni([y],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,P)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(n=i).\u0275prov=Jr({token:n,providedIn:"environment",factory:()=>new n(ve(Hl))}),i})();function vA(n){La("NgStandalone"),n.getStandaloneInjector=i=>i.get(V2).getOrCreateStandaloneInjector(n)}function wA(n,i,o){const c=Xa()+n,y=xr();return y[c]===ys?Hs(y,c,o?i.call(o):i()):function Uo(n,i){return n[i]}(y,c)}function xA(n,i,o,c){return function SA(n,i,o,c,y,P){const W=i+o;return Ds(n,W,y)?Hs(n,W+1,P?c.call(P,y):c(y)):function Fy(n,i){const o=n[i];return o===ys?void 0:o}(n,W+1)}(xr(),Xa(),n,i,o,c)}class zA{constructor(i){this.full=i;const o=i.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}let $A=(()=>{var n;class i{log(c){console.log(c)}warn(c){console.warn(c)}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();const qA=new ui(""),KA=new ui("");let jS,QR=(()=>{var n;class i{constructor(c,y,P){this._ngZone=c,this.registry=y,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jS||(function eP(n){jS=n}(P),P.addToWindow(y)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb()}});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(c)||(clearTimeout(y.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,y,P){let W=-1;y&&y>0&&(W=setTimeout(()=>{this._callbacks=this._callbacks.filter(ce=>ce.timeoutId!==W),c()},y)),this._callbacks.push({doneCb:c,timeoutId:W,updateCb:P})}whenStable(c,y,P){if(P&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,y,P),this._runCallbacksIfReady()}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,y,P){return[]}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(la),ve(YA),ve(KA))},n.\u0275prov=Jr({token:n,factory:n.\u0275fac}),i})(),YA=(()=>{var n;class i{constructor(){this._applications=new Map}registerApplication(c,y){this._applications.set(c,y)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,y=!0){var P,W;return null!==(P=null===(W=jS)||void 0===W?void 0:W.findTestabilityInTree(this,c,y))&&void 0!==P?P:null}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();function FS(n){return!!n&&"function"==typeof n.then}function ZA(n){return!!n&&"function"==typeof n.subscribe}const JA=new ui("");let US=(()=>{var n;class i{constructor(){var c;this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,P)=>{this.resolve=y,this.reject=P}),this.appInits=null!==(c=at(JA,{optional:!0}))&&void 0!==c?c:[]}runInitializers(){if(this.initialized)return;const c=[];for(const P of this.appInits){const W=P();if(FS(W))c.push(W);else if(ZA(W)){const ce=new Promise((Ee,qe)=>{W.subscribe({complete:Ee,error:qe})});c.push(ce)}}const y=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{y()}).catch(P=>{this.reject(P)}),0===c.length&&y(),this.initialized=!0}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const bb=new ui("");function tC(n,i){return Array.isArray(i)?i.reduce(tC,n):{...n,...i}}let Ru=(()=>{var n;class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=at(Zh),this.afterRenderEffectManager=at(pm),this.zonelessEnabled=at(If),this.externalTestViews=new Set,this.beforeRender=new Ut.B,this.afterTick=new Ut.B,this.componentTypes=[],this.components=[],this.isStable=at(Kl).hasPendingTasks.pipe((0,ft.T)(c=>!c)),this._injector=at(Hl)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,y){const P=c instanceof k_;if(!this._injector.get(US).done)throw!P&&Nr(c),new Vr(405,!1);let ce;ce=P?c:this._injector.get(yh).resolveComponentFactory(c),this.componentTypes.push(ce.componentType);const Ee=function tP(n){return n.isBoundToModule}(ce)?void 0:this._injector.get(Pd),lt=ce.create(ya.NULL,[],y||ce.selector,Ee),St=lt.location.nativeElement,dn=lt.injector.get(qA,null);return null==dn||dn.registerApplication(St),lt.onDestroy(()=>{this.detachView(lt.hostView),wb(this.components,lt),null==dn||dn.unregisterApplication(St)}),this._loadComponent(lt),lt}tick(){this._tick(!0)}_tick(c){if(this._runningTick)throw new Vr(101,!1);const y=be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(c)}catch(P){this.internalErrorHandler(P)}finally{this._runningTick=!1,be(y),this.afterTick.next()}}detectChangesInAttachedViews(c){let y=null;this._injector.destroyed||(y=this._injector.get(Pf,null,{optional:!0}));let P=0;const W=this.afterRenderEffectManager;for(;P<10;){const _n=0===P;if(c||!_n){this.beforeRender.next(_n);for(let{_lView:gn,notifyErrorHandler:nr}of this._views)rP(gn,nr,_n,this.zonelessEnabled)}else{var ce,Ee,qe,lt,St,dn;null===(ce=y)||void 0===ce||null===(Ee=(qe=ce).begin)||void 0===Ee||Ee.call(qe),null===(lt=y)||void 0===lt||null===(St=(dn=lt).end)||void 0===St||St.call(dn)}if(P++,W.executeInternalCallbacks(),!this.allViews.some(({_lView:gn})=>Bu(gn))&&(W.execute(),!this.allViews.some(({_lView:gn})=>Bu(gn))))break}}attachView(c){const y=c;this._views.push(y),y.attachToAppRef(this)}detachView(c){const y=c;wb(this._views,y),y.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const y=this._injector.get(bb,[]);[...this._bootstrapListeners,...y].forEach(P=>P(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>wb(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Vr(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function wb(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function rP(n,i,o,c){(o||Bu(n))&&sm(n,i,o&&!c?0:1)}class iP{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let sP=(()=>{var n;class i{compileModuleSync(c){return new dr(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const y=this.compileModuleSync(c),W=gc(mi(c).declarations).reduce((ce,Ee)=>{const qe=kn(Ee);return qe&&ce.push(new vh(qe)),ce},[]);return new iP(y,W)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),lP=(()=>{var n;class i{constructor(){this.zone=at(la),this.changeDetectionScheduler=at(gh),this.applicationRef=at(Ru)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var c;null===(c=this._onMicrotaskEmptySubscription)||void 0===c||c.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function BS({ngZoneFactory:n,ignoreChangesOutsideZone:i}){var o;return null!==(o=n)&&void 0!==o||(n=()=>new la(VS())),[{provide:la,useFactory:n},{provide:pi,multi:!0,useFactory:()=>{const c=at(lP,{optional:!0});return()=>c.initialize()}},{provide:pi,multi:!0,useFactory:()=>{const c=at(uP);return()=>{c.initialize()}}},!0===i?{provide:O_,useValue:!0}:[]]}function VS(n){var i,o;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(i=null==n?void 0:n.eventCoalescing)&&void 0!==i&&i,shouldCoalesceRunChangeDetection:null!==(o=null==n?void 0:n.runCoalescing)&&void 0!==o&&o}}let uP=(()=>{var n;class i{constructor(){this.subscription=new Xt.yU,this.initialized=!1,this.zone=at(la),this.pendingTasks=at(Kl)}initialize(){if(this.initialized)return;this.initialized=!0;let c=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(c=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),queueMicrotask(()=>{null!==c&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(c),c=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var y;la.assertInAngularZone(),null!==(y=c)&&void 0!==y||(c=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),zy=(()=>{var n;class i{constructor(){var c;this.appRef=at(Ru),this.taskService=at(Kl),this.ngZone=at(la),this.zonelessEnabled=at(If),this.disableScheduling=null!==(c=at(O_,{optional:!0}))&&void 0!==c&&c,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Xt.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof Tp||!this.zoneIsDefined))}notify(c){if(!this.zonelessEnabled&&5===c)return;switch(c){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const y=this.useMicrotaskScheduler?ic:Cv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&la.isInAngularZone())}tick(c){if(this.runningTick||this.appRef.destroyed)return;const y=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(c)},void 0,this.schedulerTickApplyArgs)}catch(P){throw this.taskService.remove(y),P}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ic(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(y)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var c;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(c=this.cancelScheduledCallback)||void 0===c||c.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const y=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(y)}}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const xb=new ui("",{providedIn:"root",factory:()=>at(xb,As.Optional|As.SkipSelf)||function dP(){return typeof $localize<"u"&&$localize.locale||jm}()}),hP=new ui("",{providedIn:"root",factory:()=>"USD"}),zS=new ui("");let oC=(()=>{var n;class i{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,y){const P=function Ov(n="zone.js",i){return"noop"===n?new Tp:"zone.js"===n?new la(i):n}(null==y?void 0:y.ngZone,VS({eventCoalescing:null==y?void 0:y.ngZoneEventCoalescing,runCoalescing:null==y?void 0:y.ngZoneRunCoalescing}));return P.run(()=>{const ce=function mr(n,i,o){return new qn(n,i,o)}(c.moduleType,this.injector,[...BS({ngZoneFactory:()=>P,ignoreChangesOutsideZone:null==y?void 0:y.ignoreChangesOutsideZone}),{provide:gh,useExisting:zy}]),Ee=ce.injector.get(Rc,null);return P.runOutsideAngular(()=>{const qe=P.onError.subscribe({next:lt=>{Ee.handleError(lt)}});ce.onDestroy(()=>{wb(this._modules,ce),qe.unsubscribe()})}),function eC(n,i,o){try{const c=o();return FS(c)?c.catch(y=>{throw i.runOutsideAngular(()=>n.handleError(y)),y}):c}catch(c){throw i.runOutsideAngular(()=>n.handleError(c)),c}}(Ee,P,()=>{const qe=ce.injector.get(US);return qe.runInitializers(),qe.donePromise.then(()=>(function cM(n){"string"==typeof n&&(lM=n.toLowerCase().replace(/_/g,"-"))}(ce.injector.get(xb,jm)||jm),this._moduleDoBootstrap(ce),ce))})})}bootstrapModule(c,y=[]){const P=tC({},y);return function aP(n,i,o){const c=new dr(o);return Promise.resolve(c)}(0,0,c).then(W=>this.bootstrapModuleFactory(W,P))}_moduleDoBootstrap(c){const y=c.injector.get(Ru);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(P=>y.bootstrap(P));else{if(!c.instance.ngDoBootstrap)throw new Vr(-403,!1);c.instance.ngDoBootstrap(y)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Vr(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const c=this._injector.get(zS,null);c&&(c.forEach(y=>y()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(ya))},n.\u0275prov=Jr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})(),Sh=null;const aC=new ui("");function lC(n,i,o=[]){const c=`Platform: ${i}`,y=new ui(c);return(P=[])=>{let W=$S();if(!W||W.injector.get(aC,!1)){const ce=[...o,...P,{provide:y,useValue:!0}];n?n(ce):function pP(n){if(Sh&&!Sh.get(aC,!1))throw new Vr(400,!1);(function QA(){!function ge(n){Se=n}(()=>{throw new Vr(600,!1)})})(),Sh=n;const i=n.get(oC);(function uC(n){const i=n.get(E1,null);null==i||i.forEach(o=>o())})(n)}(function cC(n=[],i){return ya.create({name:i,providers:[{provide:Wf,useValue:"platform"},{provide:zS,useValue:new Set([()=>Sh=null])},...n]})}(ce,c))}return function mP(n){const i=$S();if(!i)throw new Vr(401,!1);return i}()}}function $S(){var n,i;return null!==(n=null===(i=Sh)||void 0===i?void 0:i.get(oC))&&void 0!==n?n:null}function yP(){}let hC=(()=>{class i{}return i.__NG_ELEMENT_ID__=vP,i})();function vP(n){return function _P(n,i,o){if(Hc(n)&&!o){const c=rc(n.index,i);return new wf(c,c)}return 175&n.type?new wf(i[Jo],i):null}(bo(),xr(),!(16&~n))}class gC{constructor(){}supports(i){return ji(i)}create(i){return new EP(i)}}const SP=(n,i)=>i;class EP{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SP}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,c=this._removalsHead,y=0,P=null;for(;o||c;){const W=!c||o&&o.currentIndex<vC(c,y,P)?o:c,ce=vC(W,y,P),Ee=W.currentIndex;if(W===c)y--,c=c._nextRemoved;else if(o=o._next,null==W.previousIndex)y++;else{P||(P=[]);const qe=ce-y,lt=Ee-y;if(qe!=lt){for(let dn=0;dn<qe;dn++){const _n=dn<P.length?P[dn]:P[dn]=0,gn=_n+dn;lt<=gn&&gn<qe&&(P[dn]=_n+1)}P[W.previousIndex]=lt-qe}}ce!==Ee&&i(W,ce,Ee)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!ji(i))throw new Vr(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let y,P,W,o=this._itHead,c=!1;if(Array.isArray(i)){this.length=i.length;for(let ce=0;ce<this.length;ce++)P=i[ce],W=this._trackByFn(ce,P),null!==o&&Object.is(o.trackById,W)?(c&&(o=this._verifyReinsertion(o,P,W,ce)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,W,ce),c=!0),o=o._next}else y=0,function bs(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let c;for(;!(c=o.next()).done;)i(c.value)}}(i,ce=>{W=this._trackByFn(y,ce),null!==o&&Object.is(o.trackById,W)?(c&&(o=this._verifyReinsertion(o,ce,W,y)),Object.is(o.item,ce)||this._addIdentityChange(o,ce)):(o=this._mismatch(o,ce,W,y),c=!0),o=o._next,y++}),this.length=y;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,c,y){let P;return null===i?P=this._itTail:(P=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,P,y)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(c,y))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,P,y)):i=this._addAfter(new TP(o,c),P,y),i}_verifyReinsertion(i,o,c,y){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==P?i=this._reinsertAfter(P,i._prev,y):i.currentIndex!=y&&(i.currentIndex=y,this._addToMoves(i,y)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const y=i._prevRemoved,P=i._nextRemoved;return null===y?this._removalsHead=P:y._nextRemoved=P,null===P?this._removalsTail=y:P._prevRemoved=y,this._insertAfter(i,o,c),this._addToMoves(i,c),i}_moveAfter(i,o,c){return this._unlink(i),this._insertAfter(i,o,c),this._addToMoves(i,c),i}_addAfter(i,o,c){return this._insertAfter(i,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,c){const y=null===o?this._itHead:o._next;return i._next=y,i._prev=o,null===y?this._itTail=i:y._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new yC),this._linkedRecords.put(i),i.currentIndex=c,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,c=i._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class TP{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MP{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,i))return c;return null}remove(i){const o=i._prevDup,c=i._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class yC{constructor(){this.map=new Map}put(i){const o=i.trackById;let c=this.map.get(o);c||(c=new MP,this.map.set(o,c)),c.add(i)}get(i,o){const y=this.map.get(i);return y?y.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vC(n,i,o){const c=n.previousIndex;if(null===c)return c;let y=0;return o&&c<o.length&&(y=o[c]),c+i+y}class _C{constructor(){}supports(i){return i instanceof Map||ss(i)}create(){return new AP}}class AP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ss(i)))throw new Vr(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(c,y)=>{if(o&&o.key===y)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const P=this._getOrCreateRecordForKey(y,c);o=this._insertBeforeOrAppend(o,P)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const c=i._prev;return o._next=i,o._prev=c,i._prev=o,c&&(c._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const y=this._records.get(i);this._maybeAddToChanges(y,o);const P=y._prev,W=y._next;return P&&(P._next=W),W&&(W._prev=P),y._next=null,y._prev=null,y}const c=new CP(i);return this._records.set(i,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(c=>o(i[c],c))}}class CP{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bC(){return new KS([new gC])}let KS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(null!=y){const P=y.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||bC()),deps:[[i,new Wi,new Oi]]}}find(c){const y=this.factories.find(P=>P.supports(c));if(null!=y)return y;throw new Vr(901,!1)}}return(n=i).\u0275prov=Jr({token:n,providedIn:"root",factory:bC}),i})();function wC(){return new YS([new _C])}let YS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(y){const P=y.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||wC()),deps:[[i,new Wi,new Oi]]}}find(c){const y=this.factories.find(P=>P.supports(c));if(y)return y;throw new Vr(901,!1)}}return(n=i).\u0275prov=Jr({token:n,providedIn:"root",factory:wC}),i})();const RP=lC(null,"core",[]);let PP=(()=>{var n;class i{constructor(c){}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(Ru))},n.\u0275mod=Rt({type:n}),n.\u0275inj=vi({}),i})();const FC=new ui("");function fO(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function mO(n,i){La("NgSignals");const o=function V(n){const i=Object.create(Y);i.computation=n;const o=()=>{if(D(i),w(i),i.value===ne)throw i.error;return i.value};return o[a]=i,o}(n);return null!=i&&i.equal&&(o[a].equal=i.equal),o}function gO(n){const i=be(null);try{return n()}finally{be(i)}}function xO(n,i){const o=kn(n),c=i.elementInjector||Rl();return new vh(o).create(c,i.projectableNodes,i.hostElement,i.environmentInjector)}function SO(n){const i=kn(n);if(!i)return null;const o=new vh(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},4341:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{me:()=>S,YN:()=>Jt,zX:()=>el,VZ:()=>Aa,cz:()=>J,kq:()=>h,vO:()=>Kt,BC:()=>Jn,vS:()=>Ma,Q0:()=>Qa});var F=Ve(3953),j=Ve(177),It=Ve(6648),sn=Ve(1985),a=Ve(3073),be=Ve(8750),Z=Ve(9326),M=Ve(4360),C=Ve(6450),b=Ve(8496),I=Ve(1413),D=Ve(6354);let d=(()=>{var Ne;class xe{constructor(Oe,dt){this._renderer=Oe,this._elementRef=dt,this.onChange=an=>{},this.onTouched=()=>{}}setProperty(Oe,dt){this._renderer.setProperty(this._elementRef.nativeElement,Oe,dt)}registerOnTouched(Oe){this.onTouched=Oe}registerOnChange(Oe){this.onChange=Oe}setDisabledState(Oe){this.setProperty("disabled",Oe)}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)(F.rXU(F.sFG),F.rXU(F.aKT))},Ne.\u0275dir=F.FsC({type:Ne}),xe})(),f=(()=>{var Ne;class xe extends d{}return(Ne=xe).\u0275fac=(()=>{let Fe;return function(dt){return(Fe||(Fe=F.xGo(Ne)))(dt||Ne)}})(),Ne.\u0275dir=F.FsC({type:Ne,features:[F.Vt3]}),xe})();const h=new F.nKC(""),g={provide:h,useExisting:(0,F.Rfq)(()=>S),multi:!0},E=new F.nKC("");let S=(()=>{var Ne;class xe extends d{constructor(Oe,dt,an){super(Oe,dt),this._compositionMode=an,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x(){const Ne=(0,j.QT)()?(0,j.QT)().getUserAgent():"";return/android (\d+)/.test(Ne.toLowerCase())}())}writeValue(Oe){this.setProperty("value",null==Oe?"":Oe)}_handleInput(Oe){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Oe)}_compositionStart(){this._composing=!0}_compositionEnd(Oe){this._composing=!1,this._compositionMode&&this.onChange(Oe)}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)(F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(E,8))},Ne.\u0275dir=F.FsC({type:Ne,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Oe,dt){1&Oe&&F.bIt("input",function(Dn){return dt._handleInput(Dn.target.value)})("blur",function(){return dt.onTouched()})("compositionstart",function(){return dt._compositionStart()})("compositionend",function(Dn){return dt._compositionEnd(Dn.target.value)})},features:[F.Jv_([g]),F.Vt3]}),xe})();function k(Ne){return null==Ne||("string"==typeof Ne||Array.isArray(Ne))&&0===Ne.length}const J=new F.nKC(""),G=new F.nKC("");function Q(Ne){return null}function fe(Ne){return null!=Ne}function Ce(Ne){return(0,F.jNT)(Ne)?(0,It.H)(Ne):Ne}function it(Ne){let xe={};return Ne.forEach(Fe=>{xe=null!=Fe?{...xe,...Fe}:xe}),0===Object.keys(xe).length?null:xe}function le(Ne,xe){return xe.map(Fe=>Fe(Ne))}function ye(Ne){return Ne.map(xe=>function z(Ne){return!Ne.validate}(xe)?xe:Fe=>xe.validate(Fe))}function Je(Ne){return null!=Ne?function je(Ne){if(!Ne)return null;const xe=Ne.filter(fe);return 0==xe.length?null:function(Fe){return it(le(Fe,xe))}}(ye(Ne)):null}function Ct(Ne){return null!=Ne?function gt(Ne){if(!Ne)return null;const xe=Ne.filter(fe);return 0==xe.length?null:function(Fe){return function w(...Ne){const xe=(0,Z.ms)(Ne),{args:Fe,keys:Oe}=(0,a.D)(Ne),dt=new sn.c(an=>{const{length:Dn}=Fe;if(!Dn)return void an.complete();const Gn=new Array(Dn);let ai=Dn,Jr=Dn;for(let xi=0;xi<Dn;xi++){let vi=!1;(0,be.Tg)(Fe[xi]).subscribe((0,M._)(an,Ji=>{vi||(vi=!0,Jr--),Gn[xi]=Ji},()=>ai--,void 0,()=>{(!ai||!vi)&&(Jr||an.next(Oe?(0,b.e)(Oe,Gn):Gn),an.complete())}))}});return xe?dt.pipe((0,C.I)(xe)):dt}(le(Fe,xe).map(Ce)).pipe((0,D.T)(it))}}(ye(Ne)):null}function $t(Ne,xe){return null===Ne?[xe]:Array.isArray(Ne)?[...Ne,xe]:[Ne,xe]}function Xt(Ne){return Ne?Array.isArray(Ne)?Ne:[Ne]:[]}function ft(Ne,xe){return Array.isArray(Ne)?Ne.includes(xe):Ne===xe}function jt(Ne,xe){const Fe=Xt(xe);return Xt(Ne).forEach(dt=>{ft(Fe,dt)||Fe.push(dt)}),Fe}function Lt(Ne,xe){return Xt(xe).filter(Fe=>!ft(Ne,Fe))}class Bt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(xe){this._rawValidators=xe||[],this._composedValidatorFn=Je(this._rawValidators)}_setAsyncValidators(xe){this._rawAsyncValidators=xe||[],this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(xe){this._onDestroyCallbacks.push(xe)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(xe=>xe()),this._onDestroyCallbacks=[]}reset(xe=void 0){this.control&&this.control.reset(xe)}hasError(xe,Fe){return!!this.control&&this.control.hasError(xe,Fe)}getError(xe,Fe){return this.control?this.control.getError(xe,Fe):null}}class Et extends Bt{get formDirective(){return null}get path(){return null}}class Kt extends Bt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yn{constructor(xe){this._cd=xe}get isTouched(){var xe,Fe,Oe;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Fe=xe._touched)||void 0===Fe||Fe.call(xe),!(null===(Oe=this._cd)||void 0===Oe||null===(Oe=Oe.control)||void 0===Oe||!Oe.touched)}get isUntouched(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.untouched)}get isPristine(){var xe,Fe,Oe;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Fe=xe._pristine)||void 0===Fe||Fe.call(xe),!(null===(Oe=this._cd)||void 0===Oe||null===(Oe=Oe.control)||void 0===Oe||!Oe.pristine)}get isDirty(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.dirty)}get isValid(){var xe,Fe,Oe;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Fe=xe._status)||void 0===Fe||Fe.call(xe),!(null===(Oe=this._cd)||void 0===Oe||null===(Oe=Oe.control)||void 0===Oe||!Oe.valid)}get isInvalid(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.invalid)}get isPending(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.pending)}get isSubmitted(){var xe,Fe,Oe;return null===(xe=this._cd)||void 0===xe||null===(Fe=xe._submitted)||void 0===Fe||Fe.call(xe),!(null===(Oe=this._cd)||void 0===Oe||!Oe.submitted)}}let Jn=(()=>{var Ne;class xe extends yn{constructor(Oe){super(Oe)}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)(F.rXU(Kt,2))},Ne.\u0275dir=F.FsC({type:Ne,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Oe,dt){2&Oe&&F.AVh("ng-untouched",dt.isUntouched)("ng-touched",dt.isTouched)("ng-pristine",dt.isPristine)("ng-dirty",dt.isDirty)("ng-valid",dt.isValid)("ng-invalid",dt.isInvalid)("ng-pending",dt.isPending)},features:[F.Vt3]}),xe})();const un="VALID",Tn="INVALID",on="PENDING",mn="DISABLED";class sr{}class qt extends sr{constructor(xe,Fe){super(),this.value=xe,this.source=Fe}}class fn extends sr{constructor(xe,Fe){super(),this.pristine=xe,this.source=Fe}}class Fn extends sr{constructor(xe,Fe){super(),this.touched=xe,this.source=Fe}}class Cn extends sr{constructor(xe,Fe){super(),this.status=xe,this.source=Fe}}function Ie(Ne){return null!=Ne&&!Array.isArray(Ne)&&"object"==typeof Ne}class N{constructor(xe,Fe){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,F.EWP)(()=>this.statusReactive()),this.statusReactive=(0,F.vPA)(void 0),this._pristine=(0,F.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,F.vPA)(!0),this._touched=(0,F.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,F.vPA)(!1),this._events=new I.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(xe),this._assignAsyncValidators(Fe)}get validator(){return this._composedValidatorFn}set validator(xe){this._rawValidators=this._composedValidatorFn=xe}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(xe){this._rawAsyncValidators=this._composedAsyncValidatorFn=xe}get parent(){return this._parent}get status(){return(0,F.O8t)(this.statusReactive)}set status(xe){(0,F.O8t)(()=>this.statusReactive.set(xe))}get valid(){return this.status===un}get invalid(){return this.status===Tn}get pending(){return this.status==on}get disabled(){return this.status===mn}get enabled(){return this.status!==mn}get pristine(){return(0,F.O8t)(this.pristineReactive)}set pristine(xe){(0,F.O8t)(()=>this.pristineReactive.set(xe))}get dirty(){return!this.pristine}get touched(){return(0,F.O8t)(this.touchedReactive)}set touched(xe){(0,F.O8t)(()=>this.touchedReactive.set(xe))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(xe){this._assignValidators(xe)}setAsyncValidators(xe){this._assignAsyncValidators(xe)}addValidators(xe){this.setValidators(jt(xe,this._rawValidators))}addAsyncValidators(xe){this.setAsyncValidators(jt(xe,this._rawAsyncValidators))}removeValidators(xe){this.setValidators(Lt(xe,this._rawValidators))}removeAsyncValidators(xe){this.setAsyncValidators(Lt(xe,this._rawAsyncValidators))}hasValidator(xe){return ft(this._rawValidators,xe)}hasAsyncValidator(xe){return ft(this._rawAsyncValidators,xe)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(xe={}){var Fe;const Oe=!1===this.touched;this.touched=!0;const dt=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;this._parent&&!xe.onlySelf&&this._parent.markAsTouched({...xe,sourceControl:dt}),Oe&&!1!==xe.emitEvent&&this._events.next(new Fn(!0,dt))}markAllAsTouched(xe={}){this.markAsTouched({onlySelf:!0,emitEvent:xe.emitEvent,sourceControl:this}),this._forEachChild(Fe=>Fe.markAllAsTouched(xe))}markAsUntouched(xe={}){var Fe;const Oe=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const dt=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;this._forEachChild(an=>{an.markAsUntouched({onlySelf:!0,emitEvent:xe.emitEvent,sourceControl:dt})}),this._parent&&!xe.onlySelf&&this._parent._updateTouched(xe,dt),Oe&&!1!==xe.emitEvent&&this._events.next(new Fn(!1,dt))}markAsDirty(xe={}){var Fe;const Oe=!0===this.pristine;this.pristine=!1;const dt=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;this._parent&&!xe.onlySelf&&this._parent.markAsDirty({...xe,sourceControl:dt}),Oe&&!1!==xe.emitEvent&&this._events.next(new fn(!1,dt))}markAsPristine(xe={}){var Fe;const Oe=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const dt=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;this._forEachChild(an=>{an.markAsPristine({onlySelf:!0,emitEvent:xe.emitEvent})}),this._parent&&!xe.onlySelf&&this._parent._updatePristine(xe,dt),Oe&&!1!==xe.emitEvent&&this._events.next(new fn(!0,dt))}markAsPending(xe={}){var Fe;this.status=on;const Oe=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;!1!==xe.emitEvent&&(this._events.next(new Cn(this.status,Oe)),this.statusChanges.emit(this.status)),this._parent&&!xe.onlySelf&&this._parent.markAsPending({...xe,sourceControl:Oe})}disable(xe={}){var Fe;const Oe=this._parentMarkedDirty(xe.onlySelf);this.status=mn,this.errors=null,this._forEachChild(an=>{an.disable({...xe,onlySelf:!0})}),this._updateValue();const dt=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;!1!==xe.emitEvent&&(this._events.next(new qt(this.value,dt)),this._events.next(new Cn(this.status,dt)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...xe,skipPristineCheck:Oe},this),this._onDisabledChange.forEach(an=>an(!0))}enable(xe={}){const Fe=this._parentMarkedDirty(xe.onlySelf);this.status=un,this._forEachChild(Oe=>{Oe.enable({...xe,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:xe.emitEvent}),this._updateAncestors({...xe,skipPristineCheck:Fe},this),this._onDisabledChange.forEach(Oe=>Oe(!1))}_updateAncestors(xe,Fe){this._parent&&!xe.onlySelf&&(this._parent.updateValueAndValidity(xe),xe.skipPristineCheck||this._parent._updatePristine({},Fe),this._parent._updateTouched({},Fe))}setParent(xe){this._parent=xe}getRawValue(){return this.value}updateValueAndValidity(xe={}){var Fe;if(this._setInitialStatus(),this._updateValue(),this.enabled){const dt=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===on)&&this._runAsyncValidator(dt,xe.emitEvent)}const Oe=null!==(Fe=xe.sourceControl)&&void 0!==Fe?Fe:this;!1!==xe.emitEvent&&(this._events.next(new qt(this.value,Oe)),this._events.next(new Cn(this.status,Oe)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!xe.onlySelf&&this._parent.updateValueAndValidity({...xe,sourceControl:Oe})}_updateTreeValidity(xe={emitEvent:!0}){this._forEachChild(Fe=>Fe._updateTreeValidity(xe)),this.updateValueAndValidity({onlySelf:!0,emitEvent:xe.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mn:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(xe,Fe){if(this.asyncValidator){this.status=on,this._hasOwnPendingAsyncValidator={emitEvent:!1!==Fe};const Oe=Ce(this.asyncValidator(this));this._asyncValidationSubscription=Oe.subscribe(dt=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(dt,{emitEvent:Fe,shouldHaveEmitted:xe})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var xe,Fe;this._asyncValidationSubscription.unsubscribe();const Oe=null!==(xe=null===(Fe=this._hasOwnPendingAsyncValidator)||void 0===Fe?void 0:Fe.emitEvent)&&void 0!==xe&&xe;return this._hasOwnPendingAsyncValidator=null,Oe}return!1}setErrors(xe,Fe={}){this.errors=xe,this._updateControlsErrors(!1!==Fe.emitEvent,this,Fe.shouldHaveEmitted)}get(xe){let Fe=xe;return null==Fe||(Array.isArray(Fe)||(Fe=Fe.split(".")),0===Fe.length)?null:Fe.reduce((Oe,dt)=>Oe&&Oe._find(dt),this)}getError(xe,Fe){const Oe=Fe?this.get(Fe):this;return Oe&&Oe.errors?Oe.errors[xe]:null}hasError(xe,Fe){return!!this.getError(xe,Fe)}get root(){let xe=this;for(;xe._parent;)xe=xe._parent;return xe}_updateControlsErrors(xe,Fe,Oe){this.status=this._calculateStatus(),xe&&this.statusChanges.emit(this.status),(xe||Oe)&&this._events.next(new Cn(this.status,Fe)),this._parent&&this._parent._updateControlsErrors(xe,Fe,Oe)}_initObservables(){this.valueChanges=new F.bkB,this.statusChanges=new F.bkB}_calculateStatus(){return this._allControlsDisabled()?mn:this.errors?Tn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(on)?on:this._anyControlsHaveStatus(Tn)?Tn:un}_anyControlsHaveStatus(xe){return this._anyControls(Fe=>Fe.status===xe)}_anyControlsDirty(){return this._anyControls(xe=>xe.dirty)}_anyControlsTouched(){return this._anyControls(xe=>xe.touched)}_updatePristine(xe,Fe){const Oe=!this._anyControlsDirty(),dt=this.pristine!==Oe;this.pristine=Oe,this._parent&&!xe.onlySelf&&this._parent._updatePristine(xe,Fe),dt&&this._events.next(new fn(this.pristine,Fe))}_updateTouched(xe={},Fe){this.touched=this._anyControlsTouched(),this._events.next(new Fn(this.touched,Fe)),this._parent&&!xe.onlySelf&&this._parent._updateTouched(xe,Fe)}_registerOnCollectionChange(xe){this._onCollectionChange=xe}_setUpdateStrategy(xe){Ie(xe)&&null!=xe.updateOn&&(this._updateOn=xe.updateOn)}_parentMarkedDirty(xe){return!xe&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(xe){return null}_assignValidators(xe){this._rawValidators=Array.isArray(xe)?xe.slice():xe,this._composedValidatorFn=function Er(Ne){return Array.isArray(Ne)?Je(Ne):Ne||null}(this._rawValidators)}_assignAsyncValidators(xe){this._rawAsyncValidators=Array.isArray(xe)?xe.slice():xe,this._composedAsyncValidatorFn=function te(Ne){return Array.isArray(Ne)?Ct(Ne):Ne||null}(this._rawAsyncValidators)}}const Xe=new F.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>wt}),wt="always";function rn(Ne,xe,Fe=wt){var Oe,dt;(function tt(Ne,xe){const Fe=function yt(Ne){return Ne._rawValidators}(Ne);null!==xe.validator?Ne.setValidators($t(Fe,xe.validator)):"function"==typeof Fe&&Ne.setValidators([Fe]);const Oe=function Ut(Ne){return Ne._rawAsyncValidators}(Ne);null!==xe.asyncValidator?Ne.setAsyncValidators($t(Oe,xe.asyncValidator)):"function"==typeof Oe&&Ne.setAsyncValidators([Oe]);const dt=()=>Ne.updateValueAndValidity();He(xe._rawValidators,dt),He(xe._rawAsyncValidators,dt)})(Ne,xe),xe.valueAccessor.writeValue(Ne.value),(Ne.disabled||"always"===Fe)&&(null===(Oe=(dt=xe.valueAccessor).setDisabledState)||void 0===Oe||Oe.call(dt,Ne.disabled)),function Zt(Ne,xe){xe.valueAccessor.registerOnChange(Fe=>{Ne._pendingValue=Fe,Ne._pendingChange=!0,Ne._pendingDirty=!0,"change"===Ne.updateOn&&lr(Ne,xe)})}(Ne,xe),function Ar(Ne,xe){const Fe=(Oe,dt)=>{xe.valueAccessor.writeValue(Oe),dt&&xe.viewToModelUpdate(Oe)};Ne.registerOnChange(Fe),xe._registerOnDestroy(()=>{Ne._unregisterOnChange(Fe)})}(Ne,xe),function $n(Ne,xe){xe.valueAccessor.registerOnTouched(()=>{Ne._pendingTouched=!0,"blur"===Ne.updateOn&&Ne._pendingChange&&lr(Ne,xe),"submit"!==Ne.updateOn&&Ne.markAsTouched()})}(Ne,xe),function vt(Ne,xe){if(xe.valueAccessor.setDisabledState){const Fe=Oe=>{xe.valueAccessor.setDisabledState(Oe)};Ne.registerOnDisabledChange(Fe),xe._registerOnDestroy(()=>{Ne._unregisterOnDisabledChange(Fe)})}}(Ne,xe)}function He(Ne,xe){Ne.forEach(Fe=>{Fe.registerOnValidatorChange&&Fe.registerOnValidatorChange(xe)})}function lr(Ne,xe){Ne._pendingDirty&&Ne.markAsDirty(),Ne.setValue(Ne._pendingValue,{emitModelToViewChange:!1}),xe.viewToModelUpdate(Ne._pendingValue),Ne._pendingChange=!1}function Ta(Ne,xe){const Fe=Ne.indexOf(xe);Fe>-1&&Ne.splice(Fe,1)}function To(Ne){return"object"==typeof Ne&&null!==Ne&&2===Object.keys(Ne).length&&"value"in Ne&&"disabled"in Ne}Promise.resolve();const Ja=class extends N{constructor(xe=null,Fe,Oe){super(function fr(Ne){return(Ie(Ne)?Ne.validators:Ne)||null}(Fe),function Lr(Ne,xe){return(Ie(xe)?xe.asyncValidators:Ne)||null}(Oe,Fe)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(xe),this._setUpdateStrategy(Fe),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ie(Fe)&&(Fe.nonNullable||Fe.initialValueIsDefault)&&(this.defaultValue=To(xe)?xe.value:xe)}setValue(xe,Fe={}){this.value=this._pendingValue=xe,this._onChange.length&&!1!==Fe.emitModelToViewChange&&this._onChange.forEach(Oe=>Oe(this.value,!1!==Fe.emitViewToModelChange)),this.updateValueAndValidity(Fe)}patchValue(xe,Fe={}){this.setValue(xe,Fe)}reset(xe=this.defaultValue,Fe={}){this._applyFormState(xe),this.markAsPristine(Fe),this.markAsUntouched(Fe),this.setValue(this.value,Fe),this._pendingChange=!1}_updateValue(){}_anyControls(xe){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(xe){this._onChange.push(xe)}_unregisterOnChange(xe){Ta(this._onChange,xe)}registerOnDisabledChange(xe){this._onDisabledChange.push(xe)}_unregisterOnDisabledChange(xe){Ta(this._onDisabledChange,xe)}_forEachChild(xe){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(xe){To(xe)?(this.value=this._pendingValue=xe.value,xe.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=xe}},na={provide:Kt,useExisting:(0,F.Rfq)(()=>Ma)},Ga=Promise.resolve();let Ma=(()=>{var Ne;class xe extends Kt{constructor(Oe,dt,an,Dn,Gn,ai){super(),this._changeDetectorRef=Gn,this.callSetDisabledState=ai,this.control=new Ja,this._registered=!1,this.name="",this.update=new F.bkB,this._parent=Oe,this._setValidators(dt),this._setAsyncValidators(an),this.valueAccessor=function So(Ne,xe){if(!xe)return null;let Fe,Oe,dt;return Array.isArray(xe),xe.forEach(an=>{an.constructor===S?Fe=an:function so(Ne){return Object.getPrototypeOf(Ne.constructor)===f}(an)?Oe=an:dt=an}),dt||Oe||Fe||null}(0,Dn)}ngOnChanges(Oe){if(this._checkForErrors(),!this._registered||"name"in Oe){if(this._registered&&(this._checkName(),this.formDirective)){const dt=Oe.name.previousValue;this.formDirective.removeControl({name:dt,path:this._getPath(dt)})}this._setUpControl()}"isDisabled"in Oe&&this._updateDisabled(Oe),function Ls(Ne,xe){if(!Ne.hasOwnProperty("model"))return!1;const Fe=Ne.model;return!!Fe.isFirstChange()||!Object.is(xe,Fe.currentValue)}(Oe,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Oe){this.viewModel=Oe,this.update.emit(Oe)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Oe){Ga.then(()=>{var dt;this.control.setValue(Oe,{emitViewToModelChange:!1}),null===(dt=this._changeDetectorRef)||void 0===dt||dt.markForCheck()})}_updateDisabled(Oe){const dt=Oe.isDisabled.currentValue,an=0!==dt&&(0,F.L39)(dt);Ga.then(()=>{var Dn;an&&!this.control.disabled?this.control.disable():!an&&this.control.disabled&&this.control.enable(),null===(Dn=this._changeDetectorRef)||void 0===Dn||Dn.markForCheck()})}_getPath(Oe){return this._parent?function Nt(Ne,xe){return[...xe.path,Ne]}(Oe,this._parent):[Oe]}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)(F.rXU(Et,9),F.rXU(J,10),F.rXU(G,10),F.rXU(h,10),F.rXU(F.gRc,8),F.rXU(Xe,8))},Ne.\u0275dir=F.FsC({type:Ne,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[F.Jv_([na]),F.Vt3,F.OA$]}),xe})();const ka={provide:h,useExisting:(0,F.Rfq)(()=>Qa),multi:!0};let Qa=(()=>{var Ne;class xe extends f{writeValue(Oe){this.setProperty("value",null==Oe?"":Oe)}registerOnChange(Oe){this.onChange=dt=>{Oe(""==dt?null:parseFloat(dt))}}}return(Ne=xe).\u0275fac=(()=>{let Fe;return function(dt){return(Fe||(Fe=F.xGo(Ne)))(dt||Ne)}})(),Ne.\u0275dir=F.FsC({type:Ne,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Oe,dt){1&Oe&&F.bIt("input",function(Dn){return dt.onChange(Dn.target.value)})("blur",function(){return dt.onTouched()})},features:[F.Jv_([ka]),F.Vt3]}),xe})();function ha(Ne){return"number"==typeof Ne?Ne:parseFloat(Ne)}let go=(()=>{var Ne;class xe{constructor(){this._validator=Q}ngOnChanges(Oe){if(this.inputName in Oe){const dt=this.normalizeInput(Oe[this.inputName].currentValue);this._enabled=this.enabled(dt),this._validator=this._enabled?this.createValidator(dt):Q,this._onChange&&this._onChange()}}validate(Oe){return this._validator(Oe)}registerOnValidatorChange(Oe){this._onChange=Oe}enabled(Oe){return null!=Oe}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)},Ne.\u0275dir=F.FsC({type:Ne,features:[F.OA$]}),xe})();const fi={provide:J,useExisting:(0,F.Rfq)(()=>el),multi:!0};let el=(()=>{var Ne;class xe extends go{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=Oe=>ha(Oe),this.createValidator=Oe=>function ne(Ne){return xe=>{if(k(xe.value)||k(Ne))return null;const Fe=parseFloat(xe.value);return!isNaN(Fe)&&Fe>Ne?{max:{max:Ne,actual:xe.value}}:null}}(Oe)}}return(Ne=xe).\u0275fac=(()=>{let Fe;return function(dt){return(Fe||(Fe=F.xGo(Ne)))(dt||Ne)}})(),Ne.\u0275dir=F.FsC({type:Ne,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Oe,dt){2&Oe&&F.BMQ("max",dt._enabled?dt.max:null)},inputs:{max:"max"},features:[F.Jv_([fi]),F.Vt3]}),xe})();const al={provide:J,useExisting:(0,F.Rfq)(()=>Aa),multi:!0};let Aa=(()=>{var Ne;class xe extends go{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=Oe=>ha(Oe),this.createValidator=Oe=>function $(Ne){return xe=>{if(k(xe.value)||k(Ne))return null;const Fe=parseFloat(xe.value);return!isNaN(Fe)&&Fe<Ne?{min:{min:Ne,actual:xe.value}}:null}}(Oe)}}return(Ne=xe).\u0275fac=(()=>{let Fe;return function(dt){return(Fe||(Fe=F.xGo(Ne)))(dt||Ne)}})(),Ne.\u0275dir=F.FsC({type:Ne,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Oe,dt){2&Oe&&F.BMQ("min",dt._enabled?dt.min:null)},inputs:{min:"min"},features:[F.Jv_([al]),F.Vt3]}),xe})(),R=(()=>{var Ne;class xe{}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)},Ne.\u0275mod=F.$C({type:Ne}),Ne.\u0275inj=F.G2t({}),xe})(),Jt=(()=>{var Ne;class xe{static withConfig(Oe){var dt;return{ngModule:xe,providers:[{provide:Xe,useValue:null!==(dt=Oe.callSetDisabledState)&&void 0!==dt?dt:wt}]}}}return(Ne=xe).\u0275fac=function(Oe){return new(Oe||Ne)},Ne.\u0275mod=F.$C({type:Ne}),Ne.\u0275inj=F.G2t({imports:[R]}),xe})()},345:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{B7:()=>J,Bb:()=>Xt,hE:()=>Lt,sG:()=>Ct,up:()=>pt});var F=Ve(177),j=Ve(3953);class It extends F.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sn extends It{static makeCurrent(){(0,F.ZD)(new sn)}onAndCancel(un,Tn,on){return un.addEventListener(Tn,on),()=>{un.removeEventListener(Tn,on)}}dispatchEvent(un,Tn){un.dispatchEvent(Tn)}remove(un){un.parentNode&&un.parentNode.removeChild(un)}createElement(un,Tn){return(Tn=Tn||this.getDefaultDocument()).createElement(un)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(un){return un.nodeType===Node.ELEMENT_NODE}isShadowRoot(un){return un instanceof DocumentFragment}getGlobalEventTarget(un,Tn){return"window"===Tn?window:"document"===Tn?un:"body"===Tn?un.body:null}getBaseHref(un){const Tn=function be(){return a=a||document.querySelector("base"),a?a.getAttribute("href"):null}();return null==Tn?null:function Z(In){return new URL(In,document.baseURI).pathname}(Tn)}resetBaseElement(){a=null}getUserAgent(){return window.navigator.userAgent}getCookie(un){return(0,F._b)(document.cookie,un)}}let a=null,C=(()=>{var In;class un{build(){return new XMLHttpRequest}}return(In=un).\u0275fac=function(on){return new(on||In)},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();const b=new j.nKC("");let w=(()=>{var In;class un{constructor(on,mn){this._zone=mn,this._eventNameToPlugin=new Map,on.forEach(sr=>{sr.manager=this}),this._plugins=on.slice().reverse()}addEventListener(on,mn,sr){return this._findPluginFor(mn).addEventListener(on,mn,sr)}getZone(){return this._zone}_findPluginFor(on){let mn=this._eventNameToPlugin.get(on);if(mn)return mn;if(mn=this._plugins.find(qt=>qt.supports(on)),!mn)throw new j.wOt(5101,!1);return this._eventNameToPlugin.set(on,mn),mn}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(b),j.KVO(j.SKi))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();class I{constructor(un){this._doc=un}}const D="ng-app-id";let d=(()=>{var In;class un{constructor(on,mn,sr,qt={}){this.doc=on,this.appId=mn,this.nonce=sr,this.platformId=qt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,F.Vy)(qt),this.resetHostNodes()}addStyles(on){for(const mn of on)1===this.changeUsageCount(mn,1)&&this.onStyleAdded(mn)}removeStyles(on){for(const mn of on)this.changeUsageCount(mn,-1)<=0&&this.onStyleRemoved(mn)}ngOnDestroy(){const on=this.styleNodesInDOM;on&&(on.forEach(mn=>mn.remove()),on.clear());for(const mn of this.getAllStyles())this.onStyleRemoved(mn);this.resetHostNodes()}addHost(on){this.hostNodes.add(on);for(const mn of this.getAllStyles())this.addStyleToHost(on,mn)}removeHost(on){this.hostNodes.delete(on)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(on){for(const mn of this.hostNodes)this.addStyleToHost(mn,on)}onStyleRemoved(on){var mn;const sr=this.styleRef;null===(mn=sr.get(on))||void 0===mn||null===(mn=mn.elements)||void 0===mn||mn.forEach(qt=>qt.remove()),sr.delete(on)}collectServerRenderedStyles(){var on;const mn=null===(on=this.doc.head)||void 0===on?void 0:on.querySelectorAll(`style[${D}="${this.appId}"]`);if(null!=mn&&mn.length){const sr=new Map;return mn.forEach(qt=>{null!=qt.textContent&&sr.set(qt.textContent,qt)}),sr}return null}changeUsageCount(on,mn){const sr=this.styleRef;if(sr.has(on)){const qt=sr.get(on);return qt.usage+=mn,qt.usage}return sr.set(on,{usage:mn,elements:[]}),mn}getStyleElement(on,mn){const sr=this.styleNodesInDOM,qt=null==sr?void 0:sr.get(mn);if((null==qt?void 0:qt.parentNode)===on)return sr.delete(mn),qt.removeAttribute(D),qt;{const fn=this.doc.createElement("style");return this.nonce&&fn.setAttribute("nonce",this.nonce),fn.textContent=mn,this.platformIsServer&&fn.setAttribute(D,this.appId),on.appendChild(fn),fn}}addStyleToHost(on,mn){var sr;const qt=this.getStyleElement(on,mn),fn=this.styleRef,Fn=null===(sr=fn.get(mn))||void 0===sr?void 0:sr.elements;Fn?Fn.push(qt):fn.set(mn,{elements:[qt],usage:1})}resetHostNodes(){const on=this.hostNodes;on.clear(),on.add(this.doc.head)}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ),j.KVO(j.sZ2),j.KVO(j.BIS,8),j.KVO(j.Agw))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();const f={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h=/%COMP%/g,p="%COMP%",m=`_nghost-${p}`,g=`_ngcontent-${p}`,E=new j.nKC("",{providedIn:"root",factory:()=>!0});function q(In,un){return un.map(Tn=>Tn.replace(h,In))}let J=(()=>{var In;class un{constructor(on,mn,sr,qt,fn,Fn,Cn,Wn=null){this.eventManager=on,this.sharedStylesHost=mn,this.appId=sr,this.removeStylesOnCompDestroy=qt,this.doc=fn,this.platformId=Fn,this.ngZone=Cn,this.nonce=Wn,this.rendererByCompId=new Map,this.platformIsServer=(0,F.Vy)(Fn),this.defaultRenderer=new G(on,fn,Cn,this.platformIsServer)}createRenderer(on,mn){if(!on||!mn)return this.defaultRenderer;this.platformIsServer&&mn.encapsulation===j.gXe.ShadowDom&&(mn={...mn,encapsulation:j.gXe.Emulated});const sr=this.getOrCreateRenderer(on,mn);return sr instanceof we?sr.applyToHost(on):sr instanceof Y&&sr.applyStyles(),sr}getOrCreateRenderer(on,mn){const sr=this.rendererByCompId;let qt=sr.get(mn.id);if(!qt){const fn=this.doc,Fn=this.ngZone,Cn=this.eventManager,Wn=this.sharedStylesHost,yr=this.removeStylesOnCompDestroy,fr=this.platformIsServer;switch(mn.encapsulation){case j.gXe.Emulated:qt=new we(Cn,Wn,mn,this.appId,yr,fn,Fn,fr);break;case j.gXe.ShadowDom:return new ne(Cn,Wn,on,mn,fn,Fn,this.nonce,fr);default:qt=new Y(Cn,Wn,mn,yr,fn,Fn,fr)}sr.set(mn.id,qt)}return qt}ngOnDestroy(){this.rendererByCompId.clear()}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(w),j.KVO(d),j.KVO(j.sZ2),j.KVO(E),j.KVO(F.qQ),j.KVO(j.Agw),j.KVO(j.SKi),j.KVO(j.BIS))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();class G{constructor(un,Tn,on,mn){this.eventManager=un,this.doc=Tn,this.ngZone=on,this.platformIsServer=mn,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(un,Tn){return Tn?this.doc.createElementNS(f[Tn]||Tn,un):this.doc.createElement(un)}createComment(un){return this.doc.createComment(un)}createText(un){return this.doc.createTextNode(un)}appendChild(un,Tn){($(un)?un.content:un).appendChild(Tn)}insertBefore(un,Tn,on){un&&($(un)?un.content:un).insertBefore(Tn,on)}removeChild(un,Tn){un&&un.removeChild(Tn)}selectRootElement(un,Tn){let on="string"==typeof un?this.doc.querySelector(un):un;if(!on)throw new j.wOt(-5104,!1);return Tn||(on.textContent=""),on}parentNode(un){return un.parentNode}nextSibling(un){return un.nextSibling}setAttribute(un,Tn,on,mn){if(mn){Tn=mn+":"+Tn;const sr=f[mn];sr?un.setAttributeNS(sr,Tn,on):un.setAttribute(Tn,on)}else un.setAttribute(Tn,on)}removeAttribute(un,Tn,on){if(on){const mn=f[on];mn?un.removeAttributeNS(mn,Tn):un.removeAttribute(`${on}:${Tn}`)}else un.removeAttribute(Tn)}addClass(un,Tn){un.classList.add(Tn)}removeClass(un,Tn){un.classList.remove(Tn)}setStyle(un,Tn,on,mn){mn&(j.czy.DashCase|j.czy.Important)?un.style.setProperty(Tn,on,mn&j.czy.Important?"important":""):un.style[Tn]=on}removeStyle(un,Tn,on){on&j.czy.DashCase?un.style.removeProperty(Tn):un.style[Tn]=""}setProperty(un,Tn,on){null!=un&&(un[Tn]=on)}setValue(un,Tn){un.nodeValue=Tn}listen(un,Tn,on){if("string"==typeof un&&!(un=(0,F.QT)().getGlobalEventTarget(this.doc,un)))throw new Error(`Unsupported event target ${un} for event ${Tn}`);return this.eventManager.addEventListener(un,Tn,this.decoratePreventDefault(on))}decoratePreventDefault(un){return Tn=>{if("__ngUnwrap__"===Tn)return un;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>un(Tn)):un(Tn))&&Tn.preventDefault()}}}function $(In){return"TEMPLATE"===In.tagName&&void 0!==In.content}class ne extends G{constructor(un,Tn,on,mn,sr,qt,fn,Fn){super(un,sr,qt,Fn),this.sharedStylesHost=Tn,this.hostEl=on,this.shadowRoot=on.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Cn=q(mn.id,mn.styles);for(const Wn of Cn){const yr=document.createElement("style");fn&&yr.setAttribute("nonce",fn),yr.textContent=Wn,this.shadowRoot.appendChild(yr)}}nodeOrShadowRoot(un){return un===this.hostEl?this.shadowRoot:un}appendChild(un,Tn){return super.appendChild(this.nodeOrShadowRoot(un),Tn)}insertBefore(un,Tn,on){return super.insertBefore(this.nodeOrShadowRoot(un),Tn,on)}removeChild(un,Tn){return super.removeChild(this.nodeOrShadowRoot(un),Tn)}parentNode(un){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(un)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Y extends G{constructor(un,Tn,on,mn,sr,qt,fn,Fn){super(un,sr,qt,fn),this.sharedStylesHost=Tn,this.removeStylesOnCompDestroy=mn,this.styles=Fn?q(Fn,on.styles):on.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class we extends Y{constructor(un,Tn,on,mn,sr,qt,fn,Fn){const Cn=mn+"-"+on.id;super(un,Tn,on,sr,qt,fn,Fn,Cn),this.contentAttr=function S(In){return g.replace(h,In)}(Cn),this.hostAttr=function k(In){return m.replace(h,In)}(Cn)}applyToHost(un){this.applyStyles(),this.setAttribute(un,this.hostAttr,"")}createElement(un,Tn){const on=super.createElement(un,Tn);return super.setAttribute(on,this.contentAttr,""),on}}let Se=(()=>{var In;class un extends I{constructor(on){super(on)}supports(on){return!0}addEventListener(on,mn,sr){return on.addEventListener(mn,sr,!1),()=>this.removeEventListener(on,mn,sr)}removeEventListener(on,mn,sr){return on.removeEventListener(mn,sr)}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})(),oe=(()=>{var In;class un extends I{constructor(on){super(on),this.delegate=(0,j.WQX)(j.zAP,{optional:!0})}supports(on){return!!this.delegate&&this.delegate.supports(on)}addEventListener(on,mn,sr){return this.delegate.addEventListener(on,mn,sr)}removeEventListener(on,mn,sr){return this.delegate.removeEventListener(on,mn,sr)}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();const ge=["alt","control","meta","shift"],re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Q={alt:In=>In.altKey,control:In=>In.ctrlKey,meta:In=>In.metaKey,shift:In=>In.shiftKey};let fe=(()=>{var In;class un extends I{constructor(on){super(on)}supports(on){return null!=un.parseEventName(on)}addEventListener(on,mn,sr){const qt=un.parseEventName(mn),fn=un.eventCallback(qt.fullKey,sr,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,F.QT)().onAndCancel(on,qt.domEventName,fn))}static parseEventName(on){const mn=on.toLowerCase().split("."),sr=mn.shift();if(0===mn.length||"keydown"!==sr&&"keyup"!==sr)return null;const qt=un._normalizeKey(mn.pop());let fn="",Fn=mn.indexOf("code");if(Fn>-1&&(mn.splice(Fn,1),fn="code."),ge.forEach(Wn=>{const yr=mn.indexOf(Wn);yr>-1&&(mn.splice(yr,1),fn+=Wn+".")}),fn+=qt,0!=mn.length||0===qt.length)return null;const Cn={};return Cn.domEventName=sr,Cn.fullKey=fn,Cn}static matchEventFullKeyCode(on,mn){let sr=re[on.key]||on.key,qt="";return mn.indexOf("code.")>-1&&(sr=on.code,qt="code."),!(null==sr||!sr)&&(sr=sr.toLowerCase()," "===sr?sr="space":"."===sr&&(sr="dot"),ge.forEach(fn=>{fn!==sr&&(0,Q[fn])(on)&&(qt+=fn+".")}),qt+=sr,qt===mn)}static eventCallback(on,mn,sr){return qt=>{un.matchEventFullKeyCode(qt,on)&&sr.runGuarded(()=>mn(qt))}}static _normalizeKey(on){return"esc"===on?"escape":on}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),un})();const Ct=(0,j.oH4)(j.fpN,"browser",[{provide:j.Agw,useValue:F.AJ},{provide:j.PLl,useValue:function ye(){sn.makeCurrent()},multi:!0},{provide:F.qQ,useFactory:function Je(){return(0,j.TL$)(document),document},deps:[]}]),$t=new j.nKC(""),yt=[{provide:j.e01,useClass:class M{addToWindow(un){j.JZv.getAngularTestability=(on,mn=!0)=>{const sr=un.findTestabilityInTree(on,mn);if(null==sr)throw new j.wOt(5103,!1);return sr},j.JZv.getAllAngularTestabilities=()=>un.getAllTestabilities(),j.JZv.getAllAngularRootElements=()=>un.getAllRootElements(),j.JZv.frameworkStabilizers||(j.JZv.frameworkStabilizers=[]),j.JZv.frameworkStabilizers.push(on=>{const mn=j.JZv.getAllAngularTestabilities();let sr=mn.length;const qt=function(){sr--,0==sr&&on()};mn.forEach(fn=>{fn.whenStable(qt)})})}findTestabilityInTree(un,Tn,on){if(null==Tn)return null;const mn=un.getTestability(Tn);return null!=mn?mn:on?(0,F.QT)().isShadowRoot(Tn)?this.findTestabilityInTree(un,Tn.host,!0):this.findTestabilityInTree(un,Tn.parentElement,!0):null}},deps:[]},{provide:j.WHO,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]},{provide:j.NYb,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]}],Ut=[{provide:j.H8p,useValue:"root"},{provide:j.zcH,useFactory:function je(){return new j.zcH},deps:[]},{provide:b,useClass:Se,multi:!0,deps:[F.qQ,j.SKi,j.Agw]},{provide:b,useClass:fe,multi:!0,deps:[F.qQ]},{provide:b,useClass:oe,multi:!0},J,d,w,{provide:j._9s,useExisting:J},{provide:F.N0,useClass:C,deps:[]},[]];let Xt=(()=>{var In;class un{constructor(on){}static withServerTransition(on){return{ngModule:un,providers:[{provide:j.sZ2,useValue:on.appId}]}}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO($t,12))},In.\u0275mod=j.$C({type:In}),In.\u0275inj=j.G2t({providers:[...Ut,...yt],imports:[F.MD,j.Hbi]}),un})(),Lt=(()=>{var In;class un{constructor(on){this._doc=on}getTitle(){return this._doc.title}setTitle(on){this._doc.title=on||""}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac,providedIn:"root"}),un})(),pt=(()=>{var In;class un{}return(In=un).\u0275fac=function(on){return new(on||In)},In.\u0275prov=j.jDH({token:In,factory:function(on){let mn=null;return mn=on?new(on||In):j.KVO(bt),mn},providedIn:"root"}),un})(),bt=(()=>{var In;class un extends pt{constructor(on){super(),this._doc=on}sanitize(on,mn){if(null==mn)return null;switch(on){case j.WPN.NONE:return mn;case j.WPN.HTML:return(0,j.ZF7)(mn,"HTML")?(0,j.rcV)(mn):(0,j.h9k)(this._doc,String(mn)).toString();case j.WPN.STYLE:return(0,j.ZF7)(mn,"Style")?(0,j.rcV)(mn):mn;case j.WPN.SCRIPT:if((0,j.ZF7)(mn,"Script"))return(0,j.rcV)(mn);throw new j.wOt(5200,!1);case j.WPN.URL:return(0,j.ZF7)(mn,"URL")?(0,j.rcV)(mn):(0,j.$MX)(String(mn));case j.WPN.RESOURCE_URL:if((0,j.ZF7)(mn,"ResourceURL"))return(0,j.rcV)(mn);throw new j.wOt(5201,!1);default:throw new j.wOt(5202,!1)}}bypassSecurityTrustHtml(on){return(0,j.Kcf)(on)}bypassSecurityTrustStyle(on){return(0,j.cWb)(on)}bypassSecurityTrustScript(on){return(0,j.UyX)(on)}bypassSecurityTrustUrl(on){return(0,j.osQ)(on)}bypassSecurityTrustResourceUrl(on){return(0,j.e5t)(on)}}return(In=un).\u0275fac=function(on){return new(on||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac,providedIn:"root"}),un})()},9858:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{nX:()=>Qr,Zp:()=>pn,Z:()=>co,Xk:()=>yt,Kp:()=>po,b:()=>ve,Ix:()=>Oi,Wk:()=>is,iI:()=>cu,Sd:()=>zn});var F=Ve(3953),j=Ve(1985),It=Ve(8071),a=Ve(6648),be=Ve(7673),Z=Ve(4412),M=Ve(4572);const b=(0,Ve(1853).L)(me=>function(){me(this),this.name="EmptyError",this.message="no elements in sequence"});var w=Ve(8793),I=Ve(9030),D=Ve(1203),d=Ve(8810),f=Ve(983),h=Ve(17),p=Ve(1413),m=Ve(8359),g=Ve(177),x=Ve(6354),E=Ve(5558),S=Ve(6697),k=Ve(9326),q=Ve(9974),G=Ve(5964),V=Ve(1397),K=Ve(4360);function $(me){return(0,q.N)((Ae,$e)=>{let Me=!1;Ae.subscribe((0,K._)($e,Ke=>{Me=!0,$e.next(Ke)},()=>{Me||$e.next(me),$e.complete()}))})}function ne(me=Y){return(0,q.N)((Ae,$e)=>{let Me=!1;Ae.subscribe((0,K._)($e,Ke=>{Me=!0,$e.next(Ke)},()=>Me?$e.complete():$e.error(me())))})}function Y(){return new b}var we=Ve(3669);function Se(me,Ae){const $e=arguments.length>=2;return Me=>Me.pipe(me?(0,G.p)((Ke,Rt)=>me(Ke,Rt,Me)):we.D,(0,S.s)(1),$e?$(Ae):ne(()=>new b))}function oe(me,Ae){return(0,It.T)(Ae)?(0,V.Z)(me,Ae,1):(0,V.Z)(me,1)}var ge=Ve(8141),re=Ve(8750);function Q(me){return(0,q.N)((Ae,$e)=>{let Rt,Me=null,Ke=!1;Me=Ae.subscribe((0,K._)($e,void 0,void 0,Gt=>{Rt=(0,re.Tg)(me(Gt,Q(me)(Ae))),Me?(Me.unsubscribe(),Me=null,Rt.subscribe($e)):Ke=!0})),Ke&&(Me.unsubscribe(),Me=null,Rt.subscribe($e))})}function it(me){return me<=0?()=>f.w:(0,q.N)((Ae,$e)=>{let Me=[];Ae.subscribe((0,K._)($e,Ke=>{Me.push(Ke),me<Me.length&&Me.shift()},()=>{for(const Ke of Me)$e.next(Ke);$e.complete()},void 0,()=>{Me=null}))})}var z=Ve(3703);function ye(me){return(0,q.N)((Ae,$e)=>{try{Ae.subscribe($e)}finally{$e.add(me)}})}var je=Ve(9898),Je=Ve(5343),Ct=Ve(6365),$t=Ve(345);const yt="primary",Ut=Symbol("RouteTitle");class Xt{constructor(Ae){this.params=Ae||{}}has(Ae){return Object.prototype.hasOwnProperty.call(this.params,Ae)}get(Ae){if(this.has(Ae)){const $e=this.params[Ae];return Array.isArray($e)?$e[0]:$e}return null}getAll(Ae){if(this.has(Ae)){const $e=this.params[Ae];return Array.isArray($e)?$e:[$e]}return[]}get keys(){return Object.keys(this.params)}}function ft(me){return new Xt(me)}function jt(me,Ae,$e){const Me=$e.path.split("/");if(Me.length>me.length||"full"===$e.pathMatch&&(Ae.hasChildren()||Me.length<me.length))return null;const Ke={};for(let Rt=0;Rt<Me.length;Rt++){const Gt=Me[Rt],Vn=me[Rt];if(":"===Gt[0])Ke[Gt.substring(1)]=Vn;else if(Gt!==Vn.path)return null}return{consumed:me.slice(0,Me.length),posParams:Ke}}function Bt(me,Ae){const $e=me?Et(me):void 0,Me=Ae?Et(Ae):void 0;if(!$e||!Me||$e.length!=Me.length)return!1;let Ke;for(let Rt=0;Rt<$e.length;Rt++)if(Ke=$e[Rt],!Kt(me[Ke],Ae[Ke]))return!1;return!0}function Et(me){return[...Object.keys(me),...Object.getOwnPropertySymbols(me)]}function Kt(me,Ae){if(Array.isArray(me)&&Array.isArray(Ae)){if(me.length!==Ae.length)return!1;const $e=[...me].sort(),Me=[...Ae].sort();return $e.every((Ke,Rt)=>Me[Rt]===Ke)}return me===Ae}function yn(me){return me.length>0?me[me.length-1]:null}function Yn(me){return function sn(me){return!!me&&(me instanceof j.c||(0,It.T)(me.lift)&&(0,It.T)(me.subscribe))}(me)?me:(0,F.jNT)(me)?(0,a.H)(Promise.resolve(me)):(0,be.of)(me)}const An={exact:function Bn(me,Ae,$e){if(!vn(me.segments,Ae.segments)||!Pn(me.segments,Ae.segments,$e)||me.numberOfChildren!==Ae.numberOfChildren)return!1;for(const Me in Ae.children)if(!me.children[Me]||!Bn(me.children[Me],Ae.children[Me],$e))return!1;return!0},subset:bn},Jn={exact:function Sr(me,Ae){return Bt(me,Ae)},subset:function ur(me,Ae){return Object.keys(Ae).length<=Object.keys(me).length&&Object.keys(Ae).every($e=>Kt(me[$e],Ae[$e]))},ignored:()=>!0};function Rn(me,Ae,$e){return An[$e.paths](me.root,Ae.root,$e.matrixParams)&&Jn[$e.queryParams](me.queryParams,Ae.queryParams)&&!("exact"===$e.fragment&&me.fragment!==Ae.fragment)}function bn(me,Ae,$e){return Qn(me,Ae,Ae.segments,$e)}function Qn(me,Ae,$e,Me){if(me.segments.length>$e.length){const Ke=me.segments.slice(0,$e.length);return!(!vn(Ke,$e)||Ae.hasChildren()||!Pn(Ke,$e,Me))}if(me.segments.length===$e.length){if(!vn(me.segments,$e)||!Pn(me.segments,$e,Me))return!1;for(const Ke in Ae.children)if(!me.children[Ke]||!bn(me.children[Ke],Ae.children[Ke],Me))return!1;return!0}{const Ke=$e.slice(0,me.segments.length),Rt=$e.slice(me.segments.length);return!!(vn(me.segments,Ke)&&Pn(me.segments,Ke,Me)&&me.children[yt])&&Qn(me.children[yt],Ae,Rt,Me)}}function Pn(me,Ae,$e){return Ae.every((Me,Ke)=>Jn[$e](me[Ke].parameters,Me.parameters))}class pt{constructor(Ae=new bt([],{}),$e={},Me=null){this.root=Ae,this.queryParams=$e,this.fragment=Me}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return Dr.serialize(this)}}class bt{constructor(Ae,$e){this.segments=Ae,this.children=$e,this.parent=null,Object.values($e).forEach(Me=>Me.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pr(this)}}class rt{constructor(Ae,$e){this.path=Ae,this.parameters=$e}get parameterMap(){var Ae;return null!==(Ae=this._parameterMap)&&void 0!==Ae||(this._parameterMap=ft(this.parameters)),this._parameterMap}toString(){return qt(this)}}function vn(me,Ae){return me.length===Ae.length&&me.every(($e,Me)=>$e.path===Ae[Me].path)}let zn=(()=>{var me;class Ae{}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>new ir,providedIn:"root"}),Ae})();class ir{parse(Ae){const $e=new Qe(Ae);return new pt($e.parseRootSegment(),$e.parseQueryParams(),$e.parseFragment())}serialize(Ae){const $e=`/${Br(Ae.root,!0)}`,Me=function Fn(me){const Ae=Object.entries(me).map(([$e,Me])=>Array.isArray(Me)?Me.map(Ke=>`${un($e)}=${un(Ke)}`).join("&"):`${un($e)}=${un(Me)}`).filter($e=>$e);return Ae.length?`?${Ae.join("&")}`:""}(Ae.queryParams);return`${$e}${Me}${"string"==typeof Ae.fragment?`#${function Tn(me){return encodeURI(me)}(Ae.fragment)}`:""}`}}const Dr=new ir;function Pr(me){return me.segments.map(Ae=>qt(Ae)).join("/")}function Br(me,Ae){if(!me.hasChildren())return Pr(me);if(Ae){const $e=me.children[yt]?Br(me.children[yt],!1):"",Me=[];return Object.entries(me.children).forEach(([Ke,Rt])=>{Ke!==yt&&Me.push(`${Ke}:${Br(Rt,!1)}`)}),Me.length>0?`${$e}(${Me.join("//")})`:$e}{const $e=function On(me,Ae){let $e=[];return Object.entries(me.children).forEach(([Me,Ke])=>{Me===yt&&($e=$e.concat(Ae(Ke,Me)))}),Object.entries(me.children).forEach(([Me,Ke])=>{Me!==yt&&($e=$e.concat(Ae(Ke,Me)))}),$e}(me,(Me,Ke)=>Ke===yt?[Br(me.children[yt],!1)]:[`${Ke}:${Br(Me,!1)}`]);return 1===Object.keys(me.children).length&&null!=me.children[yt]?`${Pr(me)}/${$e[0]}`:`${Pr(me)}/(${$e.join("//")})`}}function In(me){return encodeURIComponent(me).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function un(me){return In(me).replace(/%3B/gi,";")}function on(me){return In(me).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mn(me){return decodeURIComponent(me)}function sr(me){return mn(me.replace(/\+/g,"%20"))}function qt(me){return`${on(me.path)}${function fn(me){return Object.entries(me).map(([Ae,$e])=>`;${on(Ae)}=${on($e)}`).join("")}(me.parameters)}`}const Cn=/^[^\/()?;#]+/;function Wn(me){const Ae=me.match(Cn);return Ae?Ae[0]:""}const yr=/^[^\/()?;=#]+/,Er=/^[^=?&#]+/,te=/^[^&#]+/;class Qe{constructor(Ae){this.url=Ae,this.remaining=Ae}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bt([],{}):new bt([],this.parseChildren())}parseQueryParams(){const Ae={};if(this.consumeOptional("?"))do{this.parseQueryParam(Ae)}while(this.consumeOptional("&"));return Ae}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const Ae=[];for(this.peekStartsWith("(")||Ae.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Ae.push(this.parseSegment());let $e={};this.peekStartsWith("/(")&&(this.capture("/"),$e=this.parseParens(!0));let Me={};return this.peekStartsWith("(")&&(Me=this.parseParens(!1)),(Ae.length>0||Object.keys($e).length>0)&&(Me[yt]=new bt(Ae,$e)),Me}parseSegment(){const Ae=Wn(this.remaining);if(""===Ae&&this.peekStartsWith(";"))throw new F.wOt(4009,!1);return this.capture(Ae),new rt(mn(Ae),this.parseMatrixParams())}parseMatrixParams(){const Ae={};for(;this.consumeOptional(";");)this.parseParam(Ae);return Ae}parseParam(Ae){const $e=function fr(me){const Ae=me.match(yr);return Ae?Ae[0]:""}(this.remaining);if(!$e)return;this.capture($e);let Me="";if(this.consumeOptional("=")){const Ke=Wn(this.remaining);Ke&&(Me=Ke,this.capture(Me))}Ae[mn($e)]=mn(Me)}parseQueryParam(Ae){const $e=function Lr(me){const Ae=me.match(Er);return Ae?Ae[0]:""}(this.remaining);if(!$e)return;this.capture($e);let Me="";if(this.consumeOptional("=")){const Gt=function Ie(me){const Ae=me.match(te);return Ae?Ae[0]:""}(this.remaining);Gt&&(Me=Gt,this.capture(Me))}const Ke=sr($e),Rt=sr(Me);if(Ae.hasOwnProperty(Ke)){let Gt=Ae[Ke];Array.isArray(Gt)||(Gt=[Gt],Ae[Ke]=Gt),Gt.push(Rt)}else Ae[Ke]=Rt}parseParens(Ae){const $e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Me=Wn(this.remaining),Ke=this.remaining[Me.length];if("/"!==Ke&&")"!==Ke&&";"!==Ke)throw new F.wOt(4010,!1);let Rt;Me.indexOf(":")>-1?(Rt=Me.slice(0,Me.indexOf(":")),this.capture(Rt),this.capture(":")):Ae&&(Rt=yt);const Gt=this.parseChildren();$e[Rt]=1===Object.keys(Gt).length?Gt[yt]:new bt([],Gt),this.consumeOptional("//")}return $e}peekStartsWith(Ae){return this.remaining.startsWith(Ae)}consumeOptional(Ae){return!!this.peekStartsWith(Ae)&&(this.remaining=this.remaining.substring(Ae.length),!0)}capture(Ae){if(!this.consumeOptional(Ae))throw new F.wOt(4011,!1)}}function T(me){return me.segments.length>0?new bt([],{[yt]:me}):me}function N(me){const Ae={};for(const[Me,Ke]of Object.entries(me.children)){const Rt=N(Ke);if(Me===yt&&0===Rt.segments.length&&Rt.hasChildren())for(const[Gt,Vn]of Object.entries(Rt.children))Ae[Gt]=Vn;else(Rt.segments.length>0||Rt.hasChildren())&&(Ae[Me]=Rt)}return function U(me){if(1===me.numberOfChildren&&me.children[yt]){const Ae=me.children[yt];return new bt(me.segments.concat(Ae.segments),Ae.children)}return me}(new bt(me.segments,Ae))}function L(me){return me instanceof pt}function H(me){var Ae;let $e;const Rt=T(function Me(Gt){const Vn={};for(const kn of Gt.children){const zr=Me(kn);Vn[kn.outlet]=zr}const br=new bt(Gt.url,Vn);return Gt===me&&($e=br),br}(me.root));return null!==(Ae=$e)&&void 0!==Ae?Ae:Rt}function de(me,Ae,$e,Me){let Ke=me;for(;Ke.parent;)Ke=Ke.parent;if(0===Ae.length)return wt(Ke,Ke,Ke,$e,Me);const Rt=function Ge(me){if("string"==typeof me[0]&&1===me.length&&"/"===me[0])return new rn(!0,0,me);let Ae=0,$e=!1;const Me=me.reduce((Ke,Rt,Gt)=>{if("object"==typeof Rt&&null!=Rt){if(Rt.outlets){const Vn={};return Object.entries(Rt.outlets).forEach(([br,kn])=>{Vn[br]="string"==typeof kn?kn.split("/"):kn}),[...Ke,{outlets:Vn}]}if(Rt.segmentPath)return[...Ke,Rt.segmentPath]}return"string"!=typeof Rt?[...Ke,Rt]:0===Gt?(Rt.split("/").forEach((Vn,br)=>{0==br&&"."===Vn||(0==br&&""===Vn?$e=!0:".."===Vn?Ae++:""!=Vn&&Ke.push(Vn))}),Ke):[...Ke,Rt]},[]);return new rn($e,Ae,Me)}(Ae);if(Rt.toRoot())return wt(Ke,Ke,new bt([],{}),$e,Me);const Gt=function vt(me,Ae,$e){if(me.isAbsolute)return new He(Ae,!0,0);if(!$e)return new He(Ae,!1,NaN);if(null===$e.parent)return new He($e,!0,0);const Me=Be(me.commands[0])?0:1;return function tt(me,Ae,$e){let Me=me,Ke=Ae,Rt=$e;for(;Rt>Ke;){if(Rt-=Ke,Me=Me.parent,!Me)throw new F.wOt(4005,!1);Ke=Me.segments.length}return new He(Me,!1,Ke-Rt)}($e,$e.segments.length-1+Me,me.numberOfDoubleDots)}(Rt,Ke,me),Vn=Gt.processChildren?$n(Gt.segmentGroup,Gt.index,Rt.commands):Zt(Gt.segmentGroup,Gt.index,Rt.commands);return wt(Ke,Gt.segmentGroup,Vn,$e,Me)}function Be(me){return"object"==typeof me&&null!=me&&!me.outlets&&!me.segmentPath}function Xe(me){return"object"==typeof me&&null!=me&&me.outlets}function wt(me,Ae,$e,Me,Ke){let Gt,Rt={};Me&&Object.entries(Me).forEach(([br,kn])=>{Rt[br]=Array.isArray(kn)?kn.map(zr=>`${zr}`):`${kn}`}),Gt=me===Ae?$e:Nt(me,Ae,$e);const Vn=T(N(Gt));return new pt(Vn,Rt,Ke)}function Nt(me,Ae,$e){const Me={};return Object.entries(me.children).forEach(([Ke,Rt])=>{Me[Ke]=Rt===Ae?$e:Nt(Rt,Ae,$e)}),new bt(me.segments,Me)}class rn{constructor(Ae,$e,Me){if(this.isAbsolute=Ae,this.numberOfDoubleDots=$e,this.commands=Me,Ae&&Me.length>0&&Be(Me[0]))throw new F.wOt(4003,!1);const Ke=Me.find(Xe);if(Ke&&Ke!==yn(Me))throw new F.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(Ae,$e,Me){this.segmentGroup=Ae,this.processChildren=$e,this.index=Me}}function Zt(me,Ae,$e){var Me;if(null!==(Me=me)&&void 0!==Me||(me=new bt([],{})),0===me.segments.length&&me.hasChildren())return $n(me,Ae,$e);const Ke=function lr(me,Ae,$e){let Me=0,Ke=Ae;const Rt={match:!1,pathIndex:0,commandIndex:0};for(;Ke<me.segments.length;){if(Me>=$e.length)return Rt;const Gt=me.segments[Ke],Vn=$e[Me];if(Xe(Vn))break;const br=`${Vn}`,kn=Me<$e.length-1?$e[Me+1]:null;if(Ke>0&&void 0===br)break;if(br&&kn&&"object"==typeof kn&&void 0===kn.outlets){if(!Xs(br,kn,Gt))return Rt;Me+=2}else{if(!Xs(br,{},Gt))return Rt;Me++}Ke++}return{match:!0,pathIndex:Ke,commandIndex:Me}}(me,Ae,$e),Rt=$e.slice(Ke.commandIndex);if(Ke.match&&Ke.pathIndex<me.segments.length){const Gt=new bt(me.segments.slice(0,Ke.pathIndex),{});return Gt.children[yt]=new bt(me.segments.slice(Ke.pathIndex),me.children),$n(Gt,0,Rt)}return Ke.match&&0===Rt.length?new bt(me.segments,{}):Ke.match&&!me.hasChildren()?Ar(me,Ae,$e):Ke.match?$n(me,0,Rt):Ar(me,Ae,$e)}function $n(me,Ae,$e){if(0===$e.length)return new bt(me.segments,{});{const Me=function Dt(me){return Xe(me[0])?me[0].outlets:{[yt]:me}}($e),Ke={};if(Object.keys(Me).some(Rt=>Rt!==yt)&&me.children[yt]&&1===me.numberOfChildren&&0===me.children[yt].segments.length){const Rt=$n(me.children[yt],Ae,$e);return new bt(me.segments,Rt.children)}return Object.entries(Me).forEach(([Rt,Gt])=>{"string"==typeof Gt&&(Gt=[Gt]),null!==Gt&&(Ke[Rt]=Zt(me.children[Rt],Ae,Gt))}),Object.entries(me.children).forEach(([Rt,Gt])=>{void 0===Me[Rt]&&(Ke[Rt]=Gt)}),new bt(me.segments,Ke)}}function Ar(me,Ae,$e){const Me=me.segments.slice(0,Ae);let Ke=0;for(;Ke<$e.length;){const Rt=$e[Ke];if(Xe(Rt)){const br=Hi(Rt.outlets);return new bt(Me,br)}if(0===Ke&&Be($e[0])){Me.push(new rt(me.segments[Ae].path,Ki($e[0]))),Ke++;continue}const Gt=Xe(Rt)?Rt.outlets[yt]:`${Rt}`,Vn=Ke<$e.length-1?$e[Ke+1]:null;Gt&&Vn&&Be(Vn)?(Me.push(new rt(Gt,Ki(Vn))),Ke+=2):(Me.push(new rt(Gt,{})),Ke++)}return new bt(Me,{})}function Hi(me){const Ae={};return Object.entries(me).forEach(([$e,Me])=>{"string"==typeof Me&&(Me=[Me]),null!==Me&&(Ae[$e]=Ar(new bt([],{}),0,Me))}),Ae}function Ki(me){const Ae={};return Object.entries(me).forEach(([$e,Me])=>Ae[$e]=`${Me}`),Ae}function Xs(me,Ae,$e){return me==$e.path&&Bt(Ae,$e.parameters)}const Os="imperative";var wi=function(me){return me[me.NavigationStart=0]="NavigationStart",me[me.NavigationEnd=1]="NavigationEnd",me[me.NavigationCancel=2]="NavigationCancel",me[me.NavigationError=3]="NavigationError",me[me.RoutesRecognized=4]="RoutesRecognized",me[me.ResolveStart=5]="ResolveStart",me[me.ResolveEnd=6]="ResolveEnd",me[me.GuardsCheckStart=7]="GuardsCheckStart",me[me.GuardsCheckEnd=8]="GuardsCheckEnd",me[me.RouteConfigLoadStart=9]="RouteConfigLoadStart",me[me.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",me[me.ChildActivationStart=11]="ChildActivationStart",me[me.ChildActivationEnd=12]="ChildActivationEnd",me[me.ActivationStart=13]="ActivationStart",me[me.ActivationEnd=14]="ActivationEnd",me[me.Scroll=15]="Scroll",me[me.NavigationSkipped=16]="NavigationSkipped",me}(wi||{});class ws{constructor(Ae,$e){this.id=Ae,this.url=$e}}class co extends ws{constructor(Ae,$e,Me="imperative",Ke=null){super(Ae,$e),this.type=wi.NavigationStart,this.navigationTrigger=Me,this.restoredState=Ke}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends ws{constructor(Ae,$e,Me){super(Ae,$e),this.urlAfterRedirects=Me,this.type=wi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var so=function(me){return me[me.Redirect=0]="Redirect",me[me.SupersededByNewNavigation=1]="SupersededByNewNavigation",me[me.NoDataFromResolver=2]="NoDataFromResolver",me[me.GuardRejected=3]="GuardRejected",me}(so||{}),ea=function(me){return me[me.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",me[me.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",me}(ea||{});class So extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.reason=Me,this.code=Ke,this.type=wi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ca extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.reason=Me,this.code=Ke,this.type=wi.NavigationSkipped}}class ta extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.error=Me,this.target=Ke,this.type=wi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qo extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.urlAfterRedirects=Me,this.state=Ke,this.type=wi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ua extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.urlAfterRedirects=Me,this.state=Ke,this.type=wi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends ws{constructor(Ae,$e,Me,Ke,Rt){super(Ae,$e),this.urlAfterRedirects=Me,this.state=Ke,this.shouldActivate=Rt,this.type=wi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ta extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.urlAfterRedirects=Me,this.state=Ke,this.type=wi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class To extends ws{constructor(Ae,$e,Me,Ke){super(Ae,$e),this.urlAfterRedirects=Me,this.state=Ke,this.type=wi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(Ae){this.route=Ae,this.type=wi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Va{constructor(Ae){this.route=Ae,this.type=wi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ke{constructor(Ae){this.snapshot=Ae,this.type=wi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mt{constructor(Ae){this.snapshot=Ae,this.type=wi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vt{constructor(Ae){this.snapshot=Ae,this.type=wi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(Ae){this.snapshot=Ae,this.type=wi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wt{constructor(Ae,$e,Me){this.routerEvent=Ae,this.position=$e,this.anchor=Me,this.type=wi.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ln{}class fs{constructor(Ae,$e){this.url=Ae,this.navigationBehaviorOptions=$e}}function oo(me){return me.outlet||yt}function ct(me){var Ae;if(!me)return null;if(null!==(Ae=me.routeConfig)&&void 0!==Ae&&Ae._injector)return me.routeConfig._injector;for(let $e=me.parent;$e;$e=$e.parent){const Me=$e.routeConfig;if(null!=Me&&Me._loadedInjector)return Me._loadedInjector;if(null!=Me&&Me._injector)return Me._injector}return null}class Ot{get injector(){var Ae,$e;return null!==(Ae=ct(null===($e=this.route)||void 0===$e?void 0:$e.snapshot))&&void 0!==Ae?Ae:this.rootInjector}set injector(Ae){}constructor(Ae){this.rootInjector=Ae,this.outlet=null,this.route=null,this.children=new pn(this.rootInjector),this.attachRef=null}}let pn=(()=>{var me;class Ae{constructor(Me){this.rootInjector=Me,this.contexts=new Map}onChildOutletCreated(Me,Ke){const Rt=this.getOrCreateContext(Me);Rt.outlet=Ke,this.contexts.set(Me,Rt)}onChildOutletDestroyed(Me){const Ke=this.getContext(Me);Ke&&(Ke.outlet=null,Ke.attachRef=null)}onOutletDeactivated(){const Me=this.contexts;return this.contexts=new Map,Me}onOutletReAttached(Me){this.contexts=Me}getOrCreateContext(Me){let Ke=this.getContext(Me);return Ke||(Ke=new Ot(this.rootInjector),this.contexts.set(Me,Ke)),Ke}getContext(Me){return this.contexts.get(Me)||null}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)(F.KVO(F.uvJ))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();class xn{constructor(Ae){this._root=Ae}get root(){return this._root.value}parent(Ae){const $e=this.pathFromRoot(Ae);return $e.length>1?$e[$e.length-2]:null}children(Ae){const $e=Nn(Ae,this._root);return $e?$e.children.map(Me=>Me.value):[]}firstChild(Ae){const $e=Nn(Ae,this._root);return $e&&$e.children.length>0?$e.children[0].value:null}siblings(Ae){const $e=jn(Ae,this._root);return $e.length<2?[]:$e[$e.length-2].children.map(Ke=>Ke.value).filter(Ke=>Ke!==Ae)}pathFromRoot(Ae){return jn(Ae,this._root).map($e=>$e.value)}}function Nn(me,Ae){if(me===Ae.value)return Ae;for(const $e of Ae.children){const Me=Nn(me,$e);if(Me)return Me}return null}function jn(me,Ae){if(me===Ae.value)return[Ae];for(const $e of Ae.children){const Me=jn(me,$e);if(Me.length)return Me.unshift(Ae),Me}return[]}class hr{constructor(Ae,$e){this.value=Ae,this.children=$e}toString(){return`TreeNode(${this.value})`}}function _r(me){const Ae={};return me&&me.children.forEach($e=>Ae[$e.value.outlet]=$e),Ae}class Mr extends xn{constructor(Ae,$e){super(Ae),this.snapshot=$e,ns(this,Ae)}toString(){return this.snapshot.toString()}}function Or(me){const Ae=function si(me){const Rt=new Si([],{},{},"",{},yt,me,null,{});return new Vi("",new hr(Rt,[]))}(me),$e=new Z.t([new rt("",{})]),Me=new Z.t({}),Ke=new Z.t({}),Rt=new Z.t({}),Gt=new Z.t(""),Vn=new Qr($e,Me,Rt,Gt,Ke,yt,me,Ae.root);return Vn.snapshot=Ae.root,new Mr(new hr(Vn,[]),Ae)}class Qr{constructor(Ae,$e,Me,Ke,Rt,Gt,Vn,br){var kn,zr;this.urlSubject=Ae,this.paramsSubject=$e,this.queryParamsSubject=Me,this.fragmentSubject=Ke,this.dataSubject=Rt,this.outlet=Gt,this.component=Vn,this._futureSnapshot=br,this.title=null!==(kn=null===(zr=this.dataSubject)||void 0===zr?void 0:zr.pipe((0,x.T)(Ai=>Ai[Ut])))&&void 0!==kn?kn:(0,be.of)(void 0),this.url=Ae,this.params=$e,this.queryParams=Me,this.fragment=Ke,this.data=Rt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ae;return null!==(Ae=this._paramMap)&&void 0!==Ae||(this._paramMap=this.params.pipe((0,x.T)($e=>ft($e)))),this._paramMap}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=this.queryParams.pipe((0,x.T)($e=>ft($e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yi(me,Ae,$e="emptyOnly"){var Me;let Ke;const{routeConfig:Rt}=me;var Gt;return Ke=null===Ae||"always"!==$e&&""!==(null==Rt?void 0:Rt.path)&&(Ae.component||null!==(Me=Ae.routeConfig)&&void 0!==Me&&Me.loadComponent)?{params:{...me.params},data:{...me.data},resolve:{...me.data,...null!==(Gt=me._resolvedData)&&void 0!==Gt?Gt:{}}}:{params:{...Ae.params,...me.params},data:{...Ae.data,...me.data},resolve:{...me.data,...Ae.data,...null==Rt?void 0:Rt.data,...me._resolvedData}},Rt&&Vr(Rt)&&(Ke.resolve[Ut]=Rt.title),Ke}class Si{get title(){var Ae;return null===(Ae=this.data)||void 0===Ae?void 0:Ae[Ut]}constructor(Ae,$e,Me,Ke,Rt,Gt,Vn,br,kn){this.url=Ae,this.params=$e,this.queryParams=Me,this.fragment=Ke,this.data=Rt,this.outlet=Gt,this.component=Vn,this.routeConfig=br,this._resolve=kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ae;return null!==(Ae=this._paramMap)&&void 0!==Ae||(this._paramMap=ft(this.params)),this._paramMap}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Me=>Me.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vi extends xn{constructor(Ae,$e){super($e),this.url=Ae,ns(this,$e)}toString(){return Ms(this._root)}}function ns(me,Ae){Ae.value._routerState=me,Ae.children.forEach($e=>ns(me,$e))}function Ms(me){const Ae=me.children.length>0?` { ${me.children.map(Ms).join(", ")} } `:"";return`${me.value}${Ae}`}function qi(me){if(me.snapshot){const Ae=me.snapshot,$e=me._futureSnapshot;me.snapshot=$e,Bt(Ae.queryParams,$e.queryParams)||me.queryParamsSubject.next($e.queryParams),Ae.fragment!==$e.fragment&&me.fragmentSubject.next($e.fragment),Bt(Ae.params,$e.params)||me.paramsSubject.next($e.params),function Lt(me,Ae){if(me.length!==Ae.length)return!1;for(let $e=0;$e<me.length;++$e)if(!Bt(me[$e],Ae[$e]))return!1;return!0}(Ae.url,$e.url)||me.urlSubject.next($e.url),Bt(Ae.data,$e.data)||me.dataSubject.next($e.data)}else me.snapshot=me._futureSnapshot,me.dataSubject.next(me._futureSnapshot.data)}function Js(me,Ae){const $e=Bt(me.params,Ae.params)&&function _t(me,Ae){return vn(me,Ae)&&me.every(($e,Me)=>Bt($e.parameters,Ae[Me].parameters))}(me.url,Ae.url);return $e&&!(!me.parent!=!Ae.parent)&&(!me.parent||Js(me.parent,Ae.parent))}function Vr(me){return"string"==typeof me.title||null===me.title}let da=(()=>{var me;class Ae{constructor(){this.activated=null,this._activatedRoute=null,this.name=yt,this.activateEvents=new F.bkB,this.deactivateEvents=new F.bkB,this.attachEvents=new F.bkB,this.detachEvents=new F.bkB,this.parentContexts=(0,F.WQX)(pn),this.location=(0,F.WQX)(F.c1b),this.changeDetector=(0,F.WQX)(F.gRc),this.inputBinder=(0,F.WQX)(uo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(Me){if(Me.name){const{firstChange:Ke,previousValue:Rt}=Me.name;if(Ke)return;this.isTrackedInParentContexts(Rt)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Rt)),this.initializeOutletWithName()}}ngOnDestroy(){var Me;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(Me=this.inputBinder)||void 0===Me||Me.unsubscribeFromRouteData(this)}isTrackedInParentContexts(Me){var Ke;return(null===(Ke=this.parentContexts.getContext(Me))||void 0===Ke?void 0:Ke.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const Me=this.parentContexts.getContext(this.name);null!=Me&&Me.route&&(Me.attachRef?this.attach(Me.attachRef,Me.route):this.activateWith(Me.route,Me.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F.wOt(4012,!1);this.location.detach();const Me=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Me.instance),Me}attach(Me,Ke){var Rt;this.activated=Me,this._activatedRoute=Ke,this.location.insert(Me.hostView),null===(Rt=this.inputBinder)||void 0===Rt||Rt.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(Me.instance)}deactivate(){if(this.activated){const Me=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Me)}}activateWith(Me,Ke){var Rt;if(this.isActivated)throw new F.wOt(4013,!1);this._activatedRoute=Me;const Gt=this.location,br=Me.snapshot.component,kn=this.parentContexts.getOrCreateContext(this.name).children,zr=new Na(Me,kn,Gt.injector);this.activated=Gt.createComponent(br,{index:Gt.length,injector:zr,environmentInjector:Ke}),this.changeDetector.markForCheck(),null===(Rt=this.inputBinder)||void 0===Rt||Rt.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275dir=F.FsC({type:me,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[F.OA$]}),Ae})();class Na{__ngOutletInjector(Ae){return new Na(this.route,this.childContexts,Ae)}constructor(Ae,$e,Me){this.route=Ae,this.childContexts=$e,this.parent=Me}get(Ae,$e){return Ae===Qr?this.route:Ae===pn?this.childContexts:this.parent.get(Ae,$e)}}const uo=new F.nKC("");let El=(()=>{var me;class Ae{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(Me){this.unsubscribeFromRouteData(Me),this.subscribeToRouteData(Me)}unsubscribeFromRouteData(Me){var Ke;null===(Ke=this.outletDataSubscriptions.get(Me))||void 0===Ke||Ke.unsubscribe(),this.outletDataSubscriptions.delete(Me)}subscribeToRouteData(Me){const{activatedRoute:Ke}=Me,Rt=(0,M.z)([Ke.queryParams,Ke.params,Ke.data]).pipe((0,E.n)(([Gt,Vn,br],kn)=>(br={...Gt,...Vn,...br},0===kn?(0,be.of)(br):Promise.resolve(br)))).subscribe(Gt=>{if(!Me.isActivated||!Me.activatedComponentRef||Me.activatedRoute!==Ke||null===Ke.component)return void this.unsubscribeFromRouteData(Me);const Vn=(0,F.HJs)(Ke.component);if(Vn)for(const{templateName:br}of Vn.inputs)Me.activatedComponentRef.setInput(br,Gt[br]);else this.unsubscribeFromRouteData(Me)});this.outletDataSubscriptions.set(Me,Rt)}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac}),Ae})();function ha(me,Ae,$e){if($e&&me.shouldReuseRoute(Ae.value,$e.value.snapshot)){const Me=$e.value;Me._futureSnapshot=Ae.value;const Ke=function go(me,Ae,$e){return Ae.children.map(Me=>{for(const Ke of $e.children)if(me.shouldReuseRoute(Me.value,Ke.value.snapshot))return ha(me,Me,Ke);return ha(me,Me)})}(me,Ae,$e);return new hr(Me,Ke)}{if(me.shouldAttach(Ae.value)){const Rt=me.retrieve(Ae.value);if(null!==Rt){const Gt=Rt.route;return Gt.value._futureSnapshot=Ae.value,Gt.children=Ae.children.map(Vn=>ha(me,Vn)),Gt}}const Me=function fi(me){return new Qr(new Z.t(me.url),new Z.t(me.params),new Z.t(me.queryParams),new Z.t(me.fragment),new Z.t(me.data),me.outlet,me.component,me)}(Ae.value),Ke=Ae.children.map(Rt=>ha(me,Rt));return new hr(Me,Ke)}}class el{constructor(Ae,$e){this.redirectTo=Ae,this.navigationBehaviorOptions=$e}}const al="ngNavigationCancelingError";function Aa(me,Ae){const{redirectTo:$e,navigationBehaviorOptions:Me}=L(Ae)?{redirectTo:Ae,navigationBehaviorOptions:void 0}:Ae,Ke=za(!1,so.Redirect);return Ke.url=$e,Ke.navigationBehaviorOptions=Me,Ke}function za(me,Ae){const $e=new Error(`NavigationCancelingError: ${me||""}`);return $e[al]=!0,$e.cancellationCode=Ae,$e}function Rs(me){return!!me&&me[al]}class Ca{constructor(Ae,$e,Me,Ke,Rt){this.routeReuseStrategy=Ae,this.futureState=$e,this.currState=Me,this.forwardEvent=Ke,this.inputBindingEnabled=Rt}activate(Ae){const $e=this.futureState._root,Me=this.currState?this.currState._root:null;this.deactivateChildRoutes($e,Me,Ae),qi(this.futureState.root),this.activateChildRoutes($e,Me,Ae)}deactivateChildRoutes(Ae,$e,Me){const Ke=_r($e);Ae.children.forEach(Rt=>{const Gt=Rt.value.outlet;this.deactivateRoutes(Rt,Ke[Gt],Me),delete Ke[Gt]}),Object.values(Ke).forEach(Rt=>{this.deactivateRouteAndItsChildren(Rt,Me)})}deactivateRoutes(Ae,$e,Me){const Ke=Ae.value,Rt=$e?$e.value:null;if(Ke===Rt)if(Ke.component){const Gt=Me.getContext(Ke.outlet);Gt&&this.deactivateChildRoutes(Ae,$e,Gt.children)}else this.deactivateChildRoutes(Ae,$e,Me);else Rt&&this.deactivateRouteAndItsChildren($e,Me)}deactivateRouteAndItsChildren(Ae,$e){Ae.value.component&&this.routeReuseStrategy.shouldDetach(Ae.value.snapshot)?this.detachAndStoreRouteSubtree(Ae,$e):this.deactivateRouteAndOutlet(Ae,$e)}detachAndStoreRouteSubtree(Ae,$e){const Me=$e.getContext(Ae.value.outlet),Ke=Me&&Ae.value.component?Me.children:$e,Rt=_r(Ae);for(const Gt of Object.values(Rt))this.deactivateRouteAndItsChildren(Gt,Ke);if(Me&&Me.outlet){const Gt=Me.outlet.detach(),Vn=Me.children.onOutletDeactivated();this.routeReuseStrategy.store(Ae.value.snapshot,{componentRef:Gt,route:Ae,contexts:Vn})}}deactivateRouteAndOutlet(Ae,$e){const Me=$e.getContext(Ae.value.outlet),Ke=Me&&Ae.value.component?Me.children:$e,Rt=_r(Ae);for(const Gt of Object.values(Rt))this.deactivateRouteAndItsChildren(Gt,Ke);Me&&(Me.outlet&&(Me.outlet.deactivate(),Me.children.onOutletDeactivated()),Me.attachRef=null,Me.route=null)}activateChildRoutes(Ae,$e,Me){const Ke=_r($e);Ae.children.forEach(Rt=>{this.activateRoutes(Rt,Ke[Rt.value.outlet],Me),this.forwardEvent(new We(Rt.value.snapshot))}),Ae.children.length&&this.forwardEvent(new mt(Ae.value.snapshot))}activateRoutes(Ae,$e,Me){const Ke=Ae.value,Rt=$e?$e.value:null;if(qi(Ke),Ke===Rt)if(Ke.component){const Gt=Me.getOrCreateContext(Ke.outlet);this.activateChildRoutes(Ae,$e,Gt.children)}else this.activateChildRoutes(Ae,$e,Me);else if(Ke.component){const Gt=Me.getOrCreateContext(Ke.outlet);if(this.routeReuseStrategy.shouldAttach(Ke.snapshot)){const Vn=this.routeReuseStrategy.retrieve(Ke.snapshot);this.routeReuseStrategy.store(Ke.snapshot,null),Gt.children.onOutletReAttached(Vn.contexts),Gt.attachRef=Vn.componentRef,Gt.route=Vn.route.value,Gt.outlet&&Gt.outlet.attach(Vn.componentRef,Vn.route.value),qi(Vn.route.value),this.activateChildRoutes(Ae,null,Gt.children)}else Gt.attachRef=null,Gt.route=Ke,Gt.outlet&&Gt.outlet.activateWith(Ke,Gt.injector),this.activateChildRoutes(Ae,null,Gt.children)}else this.activateChildRoutes(Ae,null,Me)}}class ks{constructor(Ae){this.path=Ae,this.route=this.path[this.path.length-1]}}class Vl{constructor(Ae,$e){this.component=Ae,this.route=$e}}function Mo(me,Ae,$e){const Me=me._root;return Da(Me,Ae?Ae._root:null,$e,[Me.value])}function Tl(me,Ae){const $e=Symbol(),Me=Ae.get(me,$e);return Me===$e?"function"!=typeof me||(0,F.LfX)(me)?Ae.get(me):me:Me}function Da(me,Ae,$e,Me,Ke={canDeactivateChecks:[],canActivateChecks:[]}){const Rt=_r(Ae);return me.children.forEach(Gt=>{(function Gl(me,Ae,$e,Me,Ke={canDeactivateChecks:[],canActivateChecks:[]}){const Rt=me.value,Gt=Ae?Ae.value:null,Vn=$e?$e.getContext(me.value.outlet):null;if(Gt&&Rt.routeConfig===Gt.routeConfig){const br=function di(me,Ae,$e){if("function"==typeof $e)return $e(me,Ae);switch($e){case"pathParamsChange":return!vn(me.url,Ae.url);case"pathParamsOrQueryParamsChange":return!vn(me.url,Ae.url)||!Bt(me.queryParams,Ae.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(me,Ae)||!Bt(me.queryParams,Ae.queryParams);default:return!Js(me,Ae)}}(Gt,Rt,Rt.routeConfig.runGuardsAndResolvers);br?Ke.canActivateChecks.push(new ks(Me)):(Rt.data=Gt.data,Rt._resolvedData=Gt._resolvedData),Da(me,Ae,Rt.component?Vn?Vn.children:null:$e,Me,Ke),br&&Vn&&Vn.outlet&&Vn.outlet.isActivated&&Ke.canDeactivateChecks.push(new Vl(Vn.outlet.component,Gt))}else Gt&&tl(Ae,Vn,Ke),Ke.canActivateChecks.push(new ks(Me)),Da(me,null,Rt.component?Vn?Vn.children:null:$e,Me,Ke)})(Gt,Rt[Gt.value.outlet],$e,Me.concat([Gt.value]),Ke),delete Rt[Gt.value.outlet]}),Object.entries(Rt).forEach(([Gt,Vn])=>tl(Vn,$e.getContext(Gt),Ke)),Ke}function tl(me,Ae,$e){const Me=_r(me),Ke=me.value;Object.entries(Me).forEach(([Rt,Gt])=>{tl(Gt,Ke.component?Ae?Ae.children.getContext(Rt):null:Ae,$e)}),$e.canDeactivateChecks.push(new Vl(Ke.component&&Ae&&Ae.outlet&&Ae.outlet.isActivated?Ae.outlet.component:null,Ke))}function R(me){return"function"==typeof me}function Mt(me){return me instanceof b||"EmptyError"===(null==me?void 0:me.name)}const Qt=Symbol("INITIAL_VALUE");function Jt(){return(0,E.n)(me=>(0,M.z)(me.map(Ae=>Ae.pipe((0,S.s)(1),function J(...me){const Ae=(0,k.lI)(me);return(0,q.N)(($e,Me)=>{(Ae?(0,w.x)(me,$e,Ae):(0,w.x)(me,$e)).subscribe(Me)})}(Qt)))).pipe((0,x.T)(Ae=>{for(const $e of Ae)if(!0!==$e){if($e===Qt)return Qt;if(!1===$e||Mn($e))return $e}return!0}),(0,G.p)(Ae=>Ae!==Qt),(0,S.s)(1)))}function Mn(me){return L(me)||me instanceof el}function Jr(me){return(0,D.F)((0,ge.M)(Ae=>{if("boolean"!=typeof Ae)throw Aa(0,Ae)}),(0,x.T)(Ae=>!0===Ae))}class vi{constructor(Ae){this.segmentGroup=Ae||null}}class Ji extends Error{constructor(Ae){super(),this.urlTree=Ae}}function cs(me){return(0,d.$)(new vi(me))}class Ao{constructor(Ae,$e){this.urlSerializer=Ae,this.urlTree=$e}lineralizeSegments(Ae,$e){let Me=[],Ke=$e.root;for(;;){if(Me=Me.concat(Ke.segments),0===Ke.numberOfChildren)return(0,be.of)(Me);if(Ke.numberOfChildren>1||!Ke.children[yt])return(0,d.$)(new F.wOt(4e3,!1));Ke=Ke.children[yt]}}applyRedirectCommands(Ae,$e,Me,Ke,Rt){if("string"!=typeof $e){const Vn=$e,{queryParams:br,fragment:kn,routeConfig:zr,url:Ai,outlet:Nr,params:mi,data:Zo,title:Zs}=Ke,Co=(0,F.N4e)(Rt,()=>Vn({params:mi,data:Zo,queryParams:br,fragment:kn,routeConfig:zr,url:Ai,outlet:Nr,title:Zs}));if(Co instanceof pt)throw new Ji(Co);$e=Co}const Gt=this.applyRedirectCreateUrlTree($e,this.urlSerializer.parse($e),Ae,Me);if("/"===$e[0])throw new Ji(Gt);return Gt}applyRedirectCreateUrlTree(Ae,$e,Me,Ke){const Rt=this.createSegmentGroup(Ae,$e.root,Me,Ke);return new pt(Rt,this.createQueryParams($e.queryParams,this.urlTree.queryParams),$e.fragment)}createQueryParams(Ae,$e){const Me={};return Object.entries(Ae).forEach(([Ke,Rt])=>{if("string"==typeof Rt&&":"===Rt[0]){const Vn=Rt.substring(1);Me[Ke]=$e[Vn]}else Me[Ke]=Rt}),Me}createSegmentGroup(Ae,$e,Me,Ke){const Rt=this.createSegments(Ae,$e.segments,Me,Ke);let Gt={};return Object.entries($e.children).forEach(([Vn,br])=>{Gt[Vn]=this.createSegmentGroup(Ae,br,Me,Ke)}),new bt(Rt,Gt)}createSegments(Ae,$e,Me,Ke){return $e.map(Rt=>":"===Rt.path[0]?this.findPosParam(Ae,Rt,Ke):this.findOrReturn(Rt,Me))}findPosParam(Ae,$e,Me){const Ke=Me[$e.path.substring(1)];if(!Ke)throw new F.wOt(4001,!1);return Ke}findOrReturn(Ae,$e){let Me=0;for(const Ke of $e){if(Ke.path===Ae.path)return $e.splice(Me),Ke;Me++}return Ae}}const ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bs(me,Ae,$e,Me,Ke){const Rt=Qs(me,Ae,$e);return Rt.matched?(Me=function na(me,Ae){var $e;return me.providers&&!me._injector&&(me._injector=(0,F.Ol2)(me.providers,Ae,`Route: ${me.path}`)),null!==($e=me._injector)&&void 0!==$e?$e:Ae}(Ae,Me),function xi(me,Ae,$e,Me){const Ke=Ae.canMatch;if(!Ke||0===Ke.length)return(0,be.of)(!0);const Rt=Ke.map(Gt=>{const Vn=Tl(Gt,me);return Yn(function nt(me){return me&&R(me.canMatch)}(Vn)?Vn.canMatch(Ae,$e):(0,F.N4e)(me,()=>Vn(Ae,$e)))});return(0,be.of)(Rt).pipe(Jt(),Jr())}(Me,Ae,$e).pipe((0,x.T)(Gt=>!0===Gt?Rt:{...ra}))):(0,be.of)(Rt)}function Qs(me,Ae,$e){var Me,Ke;if("**"===Ae.path)return function ui(me){return{matched:!0,parameters:me.length>0?yn(me).parameters:{},consumedSegments:me,remainingSegments:[],positionalParamSegments:{}}}($e);if(""===Ae.path)return"full"===Ae.pathMatch&&(me.hasChildren()||$e.length>0)?{...ra}:{matched:!0,consumedSegments:[],remainingSegments:$e,parameters:{},positionalParamSegments:{}};const Gt=(Ae.matcher||jt)($e,me,Ae);if(!Gt)return{...ra};const Vn={};Object.entries(null!==(Me=Gt.posParams)&&void 0!==Me?Me:{}).forEach(([kn,zr])=>{Vn[kn]=zr.path});const br=Gt.consumed.length>0?{...Vn,...Gt.consumed[Gt.consumed.length-1].parameters}:Vn;return{matched:!0,consumedSegments:Gt.consumed,remainingSegments:$e.slice(Gt.consumed.length),parameters:br,positionalParamSegments:null!==(Ke=Gt.posParams)&&void 0!==Ke?Ke:{}}}function eo(me,Ae,$e,Me){return $e.length>0&&function _i(me,Ae,$e){return $e.some(Me=>pr(me,Ae,Me)&&oo(Me)!==yt)}(me,$e,Me)?{segmentGroup:new bt(Ae,Ns(Me,new bt($e,me.children))),slicedSegments:[]}:0===$e.length&&function Fo(me,Ae,$e){return $e.some(Me=>pr(me,Ae,Me))}(me,$e,Me)?{segmentGroup:new bt(me.segments,fo(me,$e,Me,me.children)),slicedSegments:$e}:{segmentGroup:new bt(me.segments,me.children),slicedSegments:$e}}function fo(me,Ae,$e,Me){const Ke={};for(const Rt of $e)if(pr(me,Ae,Rt)&&!Me[oo(Rt)]){const Gt=new bt([],{});Ke[oo(Rt)]=Gt}return{...Me,...Ke}}function Ns(me,Ae){const $e={};$e[yt]=Ae;for(const Me of me)if(""===Me.path&&oo(Me)!==yt){const Ke=new bt([],{});$e[oo(Me)]=Ke}return $e}function pr(me,Ae,$e){return(!(me.hasChildren()||Ae.length>0)||"full"!==$e.pathMatch)&&""===$e.path}class Od{}class yl{constructor(Ae,$e,Me,Ke,Rt,Gt,Vn){this.injector=Ae,this.configLoader=$e,this.rootComponentType=Me,this.config=Ke,this.urlTree=Rt,this.paramsInheritanceStrategy=Gt,this.urlSerializer=Vn,this.applyRedirects=new Ao(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(Ae){return new F.wOt(4002,`'${Ae.segmentGroup}'`)}recognize(){const Ae=eo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(Ae).pipe((0,x.T)(({children:$e,rootSnapshot:Me})=>{const Ke=new hr(Me,$e),Rt=new Vi("",Ke),Gt=function ie(me,Ae,$e=null,Me=null){return de(H(me),Ae,$e,Me)}(Me,[],this.urlTree.queryParams,this.urlTree.fragment);return Gt.queryParams=this.urlTree.queryParams,Rt.url=this.urlSerializer.serialize(Gt),{state:Rt,tree:Gt}}))}match(Ae){const $e=new Si([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),yt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,Ae,yt,$e).pipe((0,x.T)(Me=>({children:Me,rootSnapshot:$e})),Q(Me=>{if(Me instanceof Ji)return this.urlTree=Me.urlTree,this.match(Me.urlTree.root);throw Me instanceof vi?this.noMatchError(Me):Me}))}processSegmentGroup(Ae,$e,Me,Ke,Rt){return 0===Me.segments.length&&Me.hasChildren()?this.processChildren(Ae,$e,Me,Rt):this.processSegment(Ae,$e,Me,Me.segments,Ke,!0,Rt).pipe((0,x.T)(Gt=>Gt instanceof hr?[Gt]:[]))}processChildren(Ae,$e,Me,Ke){const Rt=[];for(const Gt of Object.keys(Me.children))"primary"===Gt?Rt.unshift(Gt):Rt.push(Gt);return(0,a.H)(Rt).pipe(oe(Gt=>{const Vn=Me.children[Gt],br=function jo(me,Ae){const $e=me.filter(Me=>oo(Me)===Ae);return $e.push(...me.filter(Me=>oo(Me)!==Ae)),$e}($e,Gt);return this.processSegmentGroup(Ae,br,Vn,Gt,Ke)}),function Ce(me,Ae){return(0,q.N)(function fe(me,Ae,$e,Me,Ke){return(Rt,Gt)=>{let Vn=$e,br=Ae,kn=0;Rt.subscribe((0,K._)(Gt,zr=>{const Ai=kn++;br=Vn?me(br,zr,Ai):(Vn=!0,zr),Me&&Gt.next(br)},Ke&&(()=>{Vn&&Gt.next(br),Gt.complete()})))}}(me,Ae,arguments.length>=2,!0))}((Gt,Vn)=>(Gt.push(...Vn),Gt)),$(null),function le(me,Ae){const $e=arguments.length>=2;return Me=>Me.pipe(me?(0,G.p)((Ke,Rt)=>me(Ke,Rt,Me)):we.D,it(1),$e?$(Ae):ne(()=>new b))}(),(0,V.Z)(Gt=>{if(null===Gt)return cs(Me);const Vn=$a(Gt);return function cc(me){me.sort((Ae,$e)=>Ae.value.outlet===yt?-1:$e.value.outlet===yt?1:Ae.value.outlet.localeCompare($e.value.outlet))}(Vn),(0,be.of)(Vn)}))}processSegment(Ae,$e,Me,Ke,Rt,Gt,Vn){return(0,a.H)($e).pipe(oe(br=>{var kn;return this.processSegmentAgainstRoute(null!==(kn=br._injector)&&void 0!==kn?kn:Ae,$e,br,Me,Ke,Rt,Gt,Vn).pipe(Q(zr=>{if(zr instanceof vi)return(0,be.of)(null);throw zr}))}),Se(br=>!!br),Q(br=>{if(Mt(br))return function jc(me,Ae,$e){return 0===Ae.length&&!me.children[$e]}(Me,Ke,Rt)?(0,be.of)(new Od):cs(Me);throw br}))}processSegmentAgainstRoute(Ae,$e,Me,Ke,Rt,Gt,Vn,br){return function Yi(me,Ae,$e,Me){return!!(oo(me)===Me||Me!==yt&&pr(Ae,$e,me))&&Qs(Ae,me,$e).matched}(Me,Ke,Rt,Gt)?void 0===Me.redirectTo?this.matchSegmentAgainstRoute(Ae,Ke,Me,Rt,Gt,br):this.allowRedirects&&Vn?this.expandSegmentAgainstRouteUsingRedirect(Ae,Ke,$e,Me,Rt,Gt,br):cs(Ke):cs(Ke)}expandSegmentAgainstRouteUsingRedirect(Ae,$e,Me,Ke,Rt,Gt,Vn){var br,kn;const{matched:zr,parameters:Ai,consumedSegments:Nr,positionalParamSegments:mi,remainingSegments:Zo}=Qs($e,Ke,Rt);if(!zr)return cs($e);"string"==typeof Ke.redirectTo&&"/"===Ke.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Zs=new Si(Rt,Ai,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uc(Ke),oo(Ke),null!==(br=null!==(kn=Ke.component)&&void 0!==kn?kn:Ke._loadedComponent)&&void 0!==br?br:null,Ke,su(Ke)),Co=yi(Zs,Vn,this.paramsInheritanceStrategy);Zs.params=Object.freeze(Co.params),Zs.data=Object.freeze(Co.data);const Il=this.applyRedirects.applyRedirectCommands(Nr,Ke.redirectTo,mi,Zs,Ae);return this.applyRedirects.lineralizeSegments(Ke,Il).pipe((0,V.Z)($l=>this.processSegment(Ae,Me,$e,$l.concat(Zo),Gt,!1,Vn)))}matchSegmentAgainstRoute(Ae,$e,Me,Ke,Rt,Gt){const Vn=Bs($e,Me,Ke,Ae);return"**"===Me.path&&($e.children={}),Vn.pipe((0,E.n)(br=>{var kn;return br.matched?(Ae=null!==(kn=Me._injector)&&void 0!==kn?kn:Ae,this.getChildConfig(Ae,Me,Ke).pipe((0,E.n)(({routes:zr})=>{var Ai,Nr,mi;const Zo=null!==(Ai=Me._loadedInjector)&&void 0!==Ai?Ai:Ae,{parameters:Zs,consumedSegments:Co,remainingSegments:Il}=br,$l=new Si(Co,Zs,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uc(Me),oo(Me),null!==(Nr=null!==(mi=Me.component)&&void 0!==mi?mi:Me._loadedComponent)&&void 0!==Nr?Nr:null,Me,su(Me)),pa=yi($l,Gt,this.paramsInheritanceStrategy);$l.params=Object.freeze(pa.params),$l.data=Object.freeze(pa.data);const{segmentGroup:uu,slicedSegments:Nd}=eo($e,Co,Il,zr);if(0===Nd.length&&uu.hasChildren())return this.processChildren(Zo,zr,uu,$l).pipe((0,x.T)(hc=>new hr($l,hc)));if(0===zr.length&&0===Nd.length)return(0,be.of)(new hr($l,[]));const ma=oo(Me)===Rt;return this.processSegment(Zo,zr,uu,Nd,ma?yt:Rt,!0,$l).pipe((0,x.T)(hc=>new hr($l,hc instanceof hr?[hc]:[])))}))):cs($e)}))}getChildConfig(Ae,$e,Me){return $e.children?(0,be.of)({routes:$e.children,injector:Ae}):$e.loadChildren?void 0!==$e._loadedRoutes?(0,be.of)({routes:$e._loadedRoutes,injector:$e._loadedInjector}):function ai(me,Ae,$e,Me){const Ke=Ae.canLoad;if(void 0===Ke||0===Ke.length)return(0,be.of)(!0);const Rt=Ke.map(Gt=>{const Vn=Tl(Gt,me);return Yn(function se(me){return me&&R(me.canLoad)}(Vn)?Vn.canLoad(Ae,$e):(0,F.N4e)(me,()=>Vn(Ae,$e)))});return(0,be.of)(Rt).pipe(Jt(),Jr())}(Ae,$e,Me).pipe((0,V.Z)(Ke=>Ke?this.configLoader.loadChildren(Ae,$e).pipe((0,ge.M)(Rt=>{$e._loadedRoutes=Rt.routes,$e._loadedInjector=Rt.injector})):function Po(me){return(0,d.$)(za(!1,so.GuardRejected))}())):(0,be.of)({routes:[],injector:Ae})}}function Fc(me){const Ae=me.value.routeConfig;return Ae&&""===Ae.path}function $a(me){const Ae=[],$e=new Set;for(const Me of me){if(!Fc(Me)){Ae.push(Me);continue}const Ke=Ae.find(Rt=>Me.value.routeConfig===Rt.value.routeConfig);void 0!==Ke?(Ke.children.push(...Me.children),$e.add(Ke)):Ae.push(Me)}for(const Me of $e){const Ke=$a(Me.children);Ae.push(new hr(Me.value,Ke))}return Ae.filter(Me=>!$e.has(Me))}function uc(me){return me.data||{}}function su(me){return me.resolve||{}}function Eh(me){const Ae=me.children.map($e=>Eh($e)).flat();return[me,...Ae]}function Ql(me){return(0,E.n)(Ae=>{const $e=me(Ae);return $e?(0,a.H)($e).pipe((0,x.T)(()=>Ae)):(0,be.of)(Ae)})}let ou=(()=>{var me;class Ae{buildTitle(Me){let Ke,Rt=Me.root;for(;void 0!==Rt;){var Gt;Ke=null!==(Gt=this.getResolvedTitleForRoute(Rt))&&void 0!==Gt?Gt:Ke,Rt=Rt.children.find(Vn=>Vn.outlet===yt)}return Ke}getResolvedTitleForRoute(Me){return Me.data[Ut]}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(As),providedIn:"root"}),Ae})(),As=(()=>{var me;class Ae extends ou{constructor(Me){super(),this.title=Me}updateTitle(Me){const Ke=this.buildTitle(Me);void 0!==Ke&&this.title.setTitle(Ke)}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)(F.KVO($t.hE))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();const Ha=new F.nKC("",{providedIn:"root",factory:()=>({})});let ec=(()=>{var me;class Ae{}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275cmp=F.VBU({type:me,selectors:[["ng-component"]],standalone:!0,features:[F.aNF],decls:1,vars:0,template:function(Me,Ke){1&Me&&F.nrm(0,"router-outlet")},dependencies:[da],encapsulation:2}),Ae})();function Ia(me){const Ae=me.children&&me.children.map(Ia),$e=Ae?{...me,children:Ae}:{...me};return!$e.component&&!$e.loadComponent&&(Ae||$e.loadChildren)&&$e.outlet&&$e.outlet!==yt&&($e.component=ec),$e}const _o=new F.nKC("");let Vs=(()=>{var me;class Ae{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,F.WQX)(F.Ql9)}loadComponent(Me){if(this.componentLoaders.get(Me))return this.componentLoaders.get(Me);if(Me._loadedComponent)return(0,be.of)(Me._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(Me);const Ke=Yn(Me.loadComponent()).pipe((0,x.T)(et),(0,ge.M)(Gt=>{this.onLoadEndListener&&this.onLoadEndListener(Me),Me._loadedComponent=Gt}),ye(()=>{this.componentLoaders.delete(Me)})),Rt=new h.G(Ke,()=>new p.B).pipe((0,je.B)());return this.componentLoaders.set(Me,Rt),Rt}loadChildren(Me,Ke){if(this.childrenLoaders.get(Ke))return this.childrenLoaders.get(Ke);if(Ke._loadedRoutes)return(0,be.of)({routes:Ke._loadedRoutes,injector:Ke._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Ke);const Gt=function au(me,Ae,$e,Me){return Yn(me.loadChildren()).pipe((0,x.T)(et),(0,V.Z)(Ke=>Ke instanceof F.Co$||Array.isArray(Ke)?(0,be.of)(Ke):(0,a.H)(Ae.compileModuleAsync(Ke))),(0,x.T)(Ke=>{Me&&Me(me);let Rt,Gt,Vn=!1;return Array.isArray(Ke)?(Gt=Ke,!0):(Rt=Ke.create($e).injector,Gt=Rt.get(_o,[],{optional:!0,self:!0}).flat()),{routes:Gt.map(Ia),injector:Rt}}))}(Ke,this.compiler,Me,this.onLoadEndListener).pipe(ye(()=>{this.childrenLoaders.delete(Ke)})),Vn=new h.G(Gt,()=>new p.B).pipe((0,je.B)());return this.childrenLoaders.set(Ke,Vn),Vn}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();function et(me){return function Te(me){return me&&"object"==typeof me&&"default"in me}(me)?me.default:me}let nn=(()=>{var me;class Ae{}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(Ze),providedIn:"root"}),Ae})(),Ze=(()=>{var me;class Ae{shouldProcessUrl(Me){return!0}extract(Me){return Me}merge(Me,Ke){return Me}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();const Ft=new F.nKC(""),ln=new F.nKC("");function xt(me,Ae,$e){const Me=me.get(ln),Ke=me.get(g.qQ);return me.get(F.SKi).runOutsideAngular(()=>{if(!Ke.startViewTransition||Me.skipNextTransition)return Me.skipNextTransition=!1,new Promise(kn=>setTimeout(kn));let Rt;const Gt=new Promise(kn=>{Rt=kn}),Vn=Ke.startViewTransition(()=>(Rt(),function Fr(me){return new Promise(Ae=>{(0,F.mal)({read:()=>setTimeout(Ae)},{injector:me})})}(me))),{onViewTransitionCreated:br}=Me;return br&&(0,F.N4e)(me,()=>br({transition:Vn,from:Ae,to:$e})),Gt})}const rs=new F.nKC("");let ot=(()=>{var me;class Ae{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new p.B,this.transitionAbortSubject=new p.B,this.configLoader=(0,F.WQX)(Vs),this.environmentInjector=(0,F.WQX)(F.uvJ),this.urlSerializer=(0,F.WQX)(zn),this.rootContexts=(0,F.WQX)(pn),this.location=(0,F.WQX)(g.aZ),this.inputBindingEnabled=null!==(0,F.WQX)(uo,{optional:!0}),this.titleStrategy=(0,F.WQX)(ou),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,F.WQX)(nn),this.createViewTransition=(0,F.WQX)(Ft,{optional:!0}),this.navigationErrorHandler=(0,F.WQX)(rs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,be.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Rt=>this.events.next(new Va(Rt)),this.configLoader.onLoadStartListener=Rt=>this.events.next(new Ja(Rt))}complete(){var Me;null===(Me=this.transitions)||void 0===Me||Me.complete()}handleNavigationRequest(Me){var Ke;const Rt=++this.navigationId;null===(Ke=this.transitions)||void 0===Ke||Ke.next({...this.transitions.value,...Me,id:Rt})}setupNavigations(Me,Ke,Rt){return this.transitions=new Z.t({id:0,currentUrlTree:Ke,currentRawUrl:Ke,extractedUrl:this.urlHandlingStrategy.extract(Ke),urlAfterRedirects:this.urlHandlingStrategy.extract(Ke),rawUrl:Ke,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Os,restoredState:null,currentSnapshot:Rt.snapshot,targetSnapshot:null,currentRouterState:Rt,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,G.p)(Gt=>0!==Gt.id),(0,x.T)(Gt=>({...Gt,extractedUrl:this.urlHandlingStrategy.extract(Gt.rawUrl)})),(0,E.n)(Gt=>{let Vn=!1,br=!1;return(0,be.of)(Gt).pipe((0,E.n)(kn=>{var zr;if(this.navigationId>Gt.id)return this.cancelNavigationTransition(Gt,"",so.SupersededByNewNavigation),f.w;this.currentTransition=Gt,this.currentNavigation={id:kn.id,initialUrl:kn.rawUrl,extractedUrl:kn.extractedUrl,targetBrowserUrl:"string"==typeof kn.extras.browserUrl?this.urlSerializer.parse(kn.extras.browserUrl):kn.extras.browserUrl,trigger:kn.source,extras:kn.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Ai=!Me.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Nr=null!==(zr=kn.extras.onSameUrlNavigation)&&void 0!==zr?zr:Me.onSameUrlNavigation;if(!Ai&&"reload"!==Nr){const mi="";return this.events.next(new ca(kn.id,this.urlSerializer.serialize(kn.rawUrl),mi,ea.IgnoredSameUrlNavigation)),kn.resolve(!1),f.w}if(this.urlHandlingStrategy.shouldProcessUrl(kn.rawUrl))return(0,be.of)(kn).pipe((0,E.n)(mi=>{var Zo,Zs;const Co=null===(Zo=this.transitions)||void 0===Zo?void 0:Zo.getValue();return this.events.next(new co(mi.id,this.urlSerializer.serialize(mi.extractedUrl),mi.source,mi.restoredState)),Co!==(null===(Zs=this.transitions)||void 0===Zs?void 0:Zs.getValue())?f.w:Promise.resolve(mi)}),function os(me,Ae,$e,Me,Ke,Rt){return(0,V.Z)(Gt=>function nd(me,Ae,$e,Me,Ke,Rt,Gt="emptyOnly"){return new yl(me,Ae,$e,Me,Ke,Gt,Rt).recognize()}(me,Ae,$e,Me,Gt.extractedUrl,Ke,Rt).pipe((0,x.T)(({state:Vn,tree:br})=>({...Gt,targetSnapshot:Vn,urlAfterRedirects:br}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,Me.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ge.M)(mi=>{Gt.targetSnapshot=mi.targetSnapshot,Gt.urlAfterRedirects=mi.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:mi.urlAfterRedirects};const Zo=new qo(mi.id,this.urlSerializer.serialize(mi.extractedUrl),this.urlSerializer.serialize(mi.urlAfterRedirects),mi.targetSnapshot);this.events.next(Zo)}));if(Ai&&this.urlHandlingStrategy.shouldProcessUrl(kn.currentRawUrl)){const{id:mi,extractedUrl:Zo,source:Zs,restoredState:Co,extras:Il}=kn,$l=new co(mi,this.urlSerializer.serialize(Zo),Zs,Co);this.events.next($l);const pa=Or(this.rootComponentType).snapshot;return this.currentTransition=Gt={...kn,targetSnapshot:pa,urlAfterRedirects:Zo,extras:{...Il,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Zo,(0,be.of)(Gt)}{const mi="";return this.events.next(new ca(kn.id,this.urlSerializer.serialize(kn.extractedUrl),mi,ea.IgnoredByUrlHandlingStrategy)),kn.resolve(!1),f.w}}),(0,ge.M)(kn=>{const zr=new ua(kn.id,this.urlSerializer.serialize(kn.extractedUrl),this.urlSerializer.serialize(kn.urlAfterRedirects),kn.targetSnapshot);this.events.next(zr)}),(0,x.T)(kn=>(this.currentTransition=Gt={...kn,guards:Mo(kn.targetSnapshot,kn.currentSnapshot,this.rootContexts)},Gt)),function Ne(me,Ae){return(0,V.Z)($e=>{const{targetSnapshot:Me,currentSnapshot:Ke,guards:{canActivateChecks:Rt,canDeactivateChecks:Gt}}=$e;return 0===Gt.length&&0===Rt.length?(0,be.of)({...$e,guardsResult:!0}):function xe(me,Ae,$e,Me){return(0,a.H)(me).pipe((0,V.Z)(Ke=>function Gn(me,Ae,$e,Me,Ke){const Rt=Ae&&Ae.routeConfig?Ae.routeConfig.canDeactivate:null;if(!Rt||0===Rt.length)return(0,be.of)(!0);const Gt=Rt.map(Vn=>{var br;const kn=null!==(br=ct(Ae))&&void 0!==br?br:Ke,zr=Tl(Vn,kn);return Yn(function Ye(me){return me&&R(me.canDeactivate)}(zr)?zr.canDeactivate(me,Ae,$e,Me):(0,F.N4e)(kn,()=>zr(me,Ae,$e,Me))).pipe(Se())});return(0,be.of)(Gt).pipe(Jt())}(Ke.component,Ke.route,$e,Ae,Me)),Se(Ke=>!0!==Ke,!0))}(Gt,Me,Ke,me).pipe((0,V.Z)(Vn=>Vn&&function X(me){return"boolean"==typeof me}(Vn)?function Fe(me,Ae,$e,Me){return(0,a.H)(Ae).pipe(oe(Ke=>(0,w.x)(function dt(me,Ae){return null!==me&&Ae&&Ae(new ke(me)),(0,be.of)(!0)}(Ke.route.parent,Me),function Oe(me,Ae){return null!==me&&Ae&&Ae(new Vt(me)),(0,be.of)(!0)}(Ke.route,Me),function Dn(me,Ae,$e){const Me=Ae[Ae.length-1],Rt=Ae.slice(0,Ae.length-1).reverse().map(Gt=>function gl(me){const Ae=me.routeConfig?me.routeConfig.canActivateChild:null;return Ae&&0!==Ae.length?{node:me,guards:Ae}:null}(Gt)).filter(Gt=>null!==Gt).map(Gt=>(0,I.v)(()=>{const Vn=Gt.guards.map(br=>{var kn;const zr=null!==(kn=ct(Gt.node))&&void 0!==kn?kn:$e,Ai=Tl(br,zr);return Yn(function De(me){return me&&R(me.canActivateChild)}(Ai)?Ai.canActivateChild(Me,me):(0,F.N4e)(zr,()=>Ai(Me,me))).pipe(Se())});return(0,be.of)(Vn).pipe(Jt())}));return(0,be.of)(Rt).pipe(Jt())}(me,Ke.path,$e),function an(me,Ae,$e){const Me=Ae.routeConfig?Ae.routeConfig.canActivate:null;if(!Me||0===Me.length)return(0,be.of)(!0);const Ke=Me.map(Rt=>(0,I.v)(()=>{var Gt;const Vn=null!==(Gt=ct(Ae))&&void 0!==Gt?Gt:$e,br=Tl(Rt,Vn);return Yn(function he(me){return me&&R(me.canActivate)}(br)?br.canActivate(Ae,me):(0,F.N4e)(Vn,()=>br(Ae,me))).pipe(Se())}));return(0,be.of)(Ke).pipe(Jt())}(me,Ke.route,$e))),Se(Ke=>!0!==Ke,!0))}(Me,Rt,me,Ae):(0,be.of)(Vn)),(0,x.T)(Vn=>({...$e,guardsResult:Vn})))})}(this.environmentInjector,kn=>this.events.next(kn)),(0,ge.M)(kn=>{if(Gt.guardsResult=kn.guardsResult,kn.guardsResult&&"boolean"!=typeof kn.guardsResult)throw Aa(0,kn.guardsResult);const zr=new mo(kn.id,this.urlSerializer.serialize(kn.extractedUrl),this.urlSerializer.serialize(kn.urlAfterRedirects),kn.targetSnapshot,!!kn.guardsResult);this.events.next(zr)}),(0,G.p)(kn=>!!kn.guardsResult||(this.cancelNavigationTransition(kn,"",so.GuardRejected),!1)),Ql(kn=>{if(kn.guards.canActivateChecks.length)return(0,be.of)(kn).pipe((0,ge.M)(zr=>{const Ai=new Ta(zr.id,this.urlSerializer.serialize(zr.extractedUrl),this.urlSerializer.serialize(zr.urlAfterRedirects),zr.targetSnapshot);this.events.next(Ai)}),(0,E.n)(zr=>{let Ai=!1;return(0,be.of)(zr).pipe(function Ys(me,Ae){return(0,V.Z)($e=>{const{targetSnapshot:Me,guards:{canActivateChecks:Ke}}=$e;if(!Ke.length)return(0,be.of)($e);const Rt=new Set(Ke.map(br=>br.route)),Gt=new Set;for(const br of Rt)if(!Gt.has(br))for(const kn of Eh(br))Gt.add(kn);let Vn=0;return(0,a.H)(Gt).pipe(oe(br=>Rt.has(br)?function xs(me,Ae,$e,Me){const Ke=me.routeConfig,Rt=me._resolve;return void 0!==(null==Ke?void 0:Ke.title)&&!Vr(Ke)&&(Rt[Ut]=Ke.title),function Ml(me,Ae,$e,Me){const Ke=Et(me);if(0===Ke.length)return(0,be.of)({});const Rt={};return(0,a.H)(Ke).pipe((0,V.Z)(Gt=>function wc(me,Ae,$e,Me){var Ke;const Rt=null!==(Ke=ct(Ae))&&void 0!==Ke?Ke:Me,Gt=Tl(me,Rt);return Yn(Gt.resolve?Gt.resolve(Ae,$e):(0,F.N4e)(Rt,()=>Gt(Ae,$e)))}(me[Gt],Ae,$e,Me).pipe(Se(),(0,ge.M)(Vn=>{if(Vn instanceof el)throw Aa(new ir,Vn);Rt[Gt]=Vn}))),it(1),(0,z.u)(Rt),Q(Gt=>Mt(Gt)?f.w:(0,d.$)(Gt)))}(Rt,me,Ae,Me).pipe((0,x.T)(Gt=>(me._resolvedData=Gt,me.data=yi(me,me.parent,$e).resolve,null)))}(br,Me,me,Ae):(br.data=yi(br,br.parent,me).resolve,(0,be.of)(void 0))),(0,ge.M)(()=>Vn++),it(1),(0,V.Z)(br=>Vn===Gt.size?(0,be.of)($e):f.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ge.M)({next:()=>Ai=!0,complete:()=>{Ai||this.cancelNavigationTransition(zr,"",so.NoDataFromResolver)}}))}),(0,ge.M)(zr=>{const Ai=new To(zr.id,this.urlSerializer.serialize(zr.extractedUrl),this.urlSerializer.serialize(zr.urlAfterRedirects),zr.targetSnapshot);this.events.next(Ai)}))}),Ql(kn=>{const zr=Ai=>{var Nr;const mi=[];null!==(Nr=Ai.routeConfig)&&void 0!==Nr&&Nr.loadComponent&&!Ai.routeConfig._loadedComponent&&mi.push(this.configLoader.loadComponent(Ai.routeConfig).pipe((0,ge.M)(Zo=>{Ai.component=Zo}),(0,x.T)(()=>{})));for(const Zo of Ai.children)mi.push(...zr(Zo));return mi};return(0,M.z)(zr(kn.targetSnapshot.root)).pipe($(null),(0,S.s)(1))}),Ql(()=>this.afterPreactivation()),(0,E.n)(()=>{var kn;const{currentSnapshot:zr,targetSnapshot:Ai}=Gt,Nr=null===(kn=this.createViewTransition)||void 0===kn?void 0:kn.call(this,this.environmentInjector,zr.root,Ai.root);return Nr?(0,a.H)(Nr).pipe((0,x.T)(()=>Gt)):(0,be.of)(Gt)}),(0,x.T)(kn=>{const zr=function bc(me,Ae,$e){const Me=ha(me,Ae._root,$e?$e._root:void 0);return new Mr(Me,Ae)}(Me.routeReuseStrategy,kn.targetSnapshot,kn.currentRouterState);return this.currentTransition=Gt={...kn,targetRouterState:zr},this.currentNavigation.targetRouterState=zr,Gt}),(0,ge.M)(()=>{this.events.next(new Ln)}),((me,Ae,$e,Me)=>(0,x.T)(Ke=>(new Ca(Ae,Ke.targetRouterState,Ke.currentRouterState,$e,Me).activate(me),Ke)))(this.rootContexts,Me.routeReuseStrategy,kn=>this.events.next(kn),this.inputBindingEnabled),(0,S.s)(1),(0,ge.M)({next:kn=>{var zr;Vn=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(kn.id,this.urlSerializer.serialize(kn.extractedUrl),this.urlSerializer.serialize(kn.urlAfterRedirects))),null===(zr=this.titleStrategy)||void 0===zr||zr.updateTitle(kn.targetRouterState.snapshot),kn.resolve(!0)},complete:()=>{Vn=!0}}),function gt(me){return(0,q.N)((Ae,$e)=>{(0,re.Tg)(me).subscribe((0,K._)($e,()=>$e.complete(),Je.l)),!$e.closed&&Ae.subscribe($e)})}(this.transitionAbortSubject.pipe((0,ge.M)(kn=>{throw kn}))),ye(()=>{var kn;!Vn&&!br&&this.cancelNavigationTransition(Gt,"",so.SupersededByNewNavigation),(null===(kn=this.currentTransition)||void 0===kn?void 0:kn.id)===Gt.id&&(this.currentNavigation=null,this.currentTransition=null)}),Q(kn=>{if(br=!0,Rs(kn))this.events.next(new So(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),kn.message,kn.cancellationCode)),function ml(me){return Rs(me)&&L(me.url)}(kn)?this.events.next(new fs(kn.url,kn.navigationBehaviorOptions)):Gt.resolve(!1);else{var zr;const Ai=new ta(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),kn,null!==(zr=Gt.targetSnapshot)&&void 0!==zr?zr:void 0);try{const Nr=(0,F.N4e)(this.environmentInjector,()=>{var mi;return null===(mi=this.navigationErrorHandler)||void 0===mi?void 0:mi.call(this,Ai)});if(Nr instanceof el){const{message:mi,cancellationCode:Zo}=Aa(0,Nr);this.events.next(new So(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),mi,Zo)),this.events.next(new fs(Nr.redirectTo,Nr.navigationBehaviorOptions))}else{this.events.next(Ai);const mi=Me.errorHandler(kn);Gt.resolve(!!mi)}}catch(Nr){this.options.resolveNavigationPromiseOnError?Gt.resolve(!1):Gt.reject(Nr)}}return f.w}))}))}cancelNavigationTransition(Me,Ke,Rt){const Gt=new So(Me.id,this.urlSerializer.serialize(Me.extractedUrl),Ke,Rt);this.events.next(Gt),Me.resolve(!1)}isUpdatingInternalState(){var Me,Ke;return(null===(Me=this.currentTransition)||void 0===Me?void 0:Me.extractedUrl.toString())!==(null===(Ke=this.currentTransition)||void 0===Ke?void 0:Ke.currentUrlTree.toString())}isUpdatedBrowserUrl(){var Me,Ke,Rt,Gt;const Vn=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),br=null!==(Me=null===(Ke=this.currentNavigation)||void 0===Ke?void 0:Ke.targetBrowserUrl)&&void 0!==Me?Me:null===(Rt=this.currentNavigation)||void 0===Rt?void 0:Rt.extractedUrl;return Vn.toString()!==(null==br?void 0:br.toString())&&!(null!==(Gt=this.currentNavigation)&&void 0!==Gt&&Gt.extras.skipLocationChange)}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();function ue(me){return me!==Os}let ve=(()=>{var me;class Ae{}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(at),providedIn:"root"}),Ae})();class ze{shouldDetach(Ae){return!1}store(Ae,$e){}shouldAttach(Ae){return!1}retrieve(Ae){return null}shouldReuseRoute(Ae,$e){return Ae.routeConfig===$e.routeConfig}}let at=(()=>{var me;class Ae extends ze{}return(me=Ae).\u0275fac=(()=>{let $e;return function(Ke){return($e||($e=F.xGo(me)))(Ke||me)}})(),me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})(),kt=(()=>{var me;class Ae{}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(En),providedIn:"root"}),Ae})(),En=(()=>{var me;class Ae extends kt{constructor(){super(...arguments),this.location=(0,F.WQX)(g.aZ),this.urlSerializer=(0,F.WQX)(zn),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,F.WQX)(nn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Or(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var Me,Ke;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(Me=null===(Ke=this.restoredState())||void 0===Ke?void 0:Ke.\u0275routerPageId)&&void 0!==Me?Me:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(Me){return this.location.subscribe(Ke=>{"popstate"===Ke.type&&Me(Ke.url,Ke.state)})}handleRouterEvent(Me,Ke){if(Me instanceof co)this.stateMemento=this.createStateMemento();else if(Me instanceof ca)this.rawUrlTree=Ke.initialUrl;else if(Me instanceof qo){if("eager"===this.urlUpdateStrategy&&!Ke.extras.skipLocationChange){var Rt;const Vn=this.urlHandlingStrategy.merge(Ke.finalUrl,Ke.initialUrl);this.setBrowserUrl(null!==(Rt=Ke.targetBrowserUrl)&&void 0!==Rt?Rt:Vn,Ke)}}else if(Me instanceof Ln){var Gt;this.currentUrlTree=Ke.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(Ke.finalUrl,Ke.initialUrl),this.routerState=Ke.targetRouterState,"deferred"!==this.urlUpdateStrategy||Ke.extras.skipLocationChange||this.setBrowserUrl(null!==(Gt=Ke.targetBrowserUrl)&&void 0!==Gt?Gt:this.rawUrlTree,Ke)}else Me instanceof So&&(Me.code===so.GuardRejected||Me.code===so.NoDataFromResolver)?this.restoreHistory(Ke):Me instanceof ta?this.restoreHistory(Ke,!0):Me instanceof Ls&&(this.lastSuccessfulId=Me.id,this.currentPageId=this.browserPageId)}setBrowserUrl(Me,Ke){const Rt=Me instanceof pt?this.urlSerializer.serialize(Me):Me;if(this.location.isCurrentPathEqualTo(Rt)||Ke.extras.replaceUrl){const Vn={...Ke.extras.state,...this.generateNgRouterState(Ke.id,this.browserPageId)};this.location.replaceState(Rt,"",Vn)}else{const Gt={...Ke.extras.state,...this.generateNgRouterState(Ke.id,this.browserPageId+1)};this.location.go(Rt,"",Gt)}}restoreHistory(Me,Ke=!1){if("computed"===this.canceledNavigationResolution){const Gt=this.currentPageId-this.browserPageId;0!==Gt?this.location.historyGo(Gt):this.currentUrlTree===Me.finalUrl&&0===Gt&&(this.resetState(Me),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(Ke&&this.resetState(Me),this.resetUrlToCurrentUrlTree())}resetState(Me){var Ke;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(Ke=Me.finalUrl)&&void 0!==Ke?Ke:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(Me,Ke){return"computed"===this.canceledNavigationResolution?{navigationId:Me,\u0275routerPageId:Ke}:{navigationId:Me}}}return(me=Ae).\u0275fac=(()=>{let $e;return function(Ke){return($e||($e=F.xGo(me)))(Ke||me)}})(),me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();var Sn=function(me){return me[me.COMPLETE=0]="COMPLETE",me[me.FAILED=1]="FAILED",me[me.REDIRECTING=2]="REDIRECTING",me}(Sn||{});function Hn(me,Ae){me.events.pipe((0,G.p)($e=>$e instanceof Ls||$e instanceof So||$e instanceof ta||$e instanceof ca),(0,x.T)($e=>$e instanceof Ls||$e instanceof ca?Sn.COMPLETE:$e instanceof So&&($e.code===so.Redirect||$e.code===so.SupersededByNewNavigation)?Sn.REDIRECTING:Sn.FAILED),(0,G.p)($e=>$e!==Sn.REDIRECTING),(0,S.s)(1)).subscribe(()=>{Ae()})}function or(me){throw me}const Xr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oi=(()=>{var me;class Ae{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var Me,Ke;this.disposed=!1,this.console=(0,F.WQX)(F.H3F),this.stateManager=(0,F.WQX)(kt),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.pendingTasks=(0,F.WQX)(F.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,F.WQX)(ot),this.urlSerializer=(0,F.WQX)(zn),this.location=(0,F.WQX)(g.aZ),this.urlHandlingStrategy=(0,F.WQX)(nn),this._events=new p.B,this.errorHandler=this.options.errorHandler||or,this.navigated=!1,this.routeReuseStrategy=(0,F.WQX)(ve),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(Me=null===(Ke=(0,F.WQX)(_o,{optional:!0}))||void 0===Ke?void 0:Ke.flat())&&void 0!==Me?Me:[],this.componentInputBindingEnabled=!!(0,F.WQX)(uo,{optional:!0}),this.eventsSubscription=new m.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:Rt=>{this.console.warn(Rt)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const Me=this.navigationTransitions.events.subscribe(Ke=>{try{const Rt=this.navigationTransitions.currentTransition,Gt=this.navigationTransitions.currentNavigation;if(null!==Rt&&null!==Gt)if(this.stateManager.handleRouterEvent(Ke,Gt),Ke instanceof So&&Ke.code!==so.Redirect&&Ke.code!==so.SupersededByNewNavigation)this.navigated=!0;else if(Ke instanceof Ls)this.navigated=!0;else if(Ke instanceof fs){const Vn=Ke.navigationBehaviorOptions,br=this.urlHandlingStrategy.merge(Ke.url,Rt.currentRawUrl),kn={browserUrl:Rt.extras.browserUrl,info:Rt.extras.info,skipLocationChange:Rt.extras.skipLocationChange,replaceUrl:Rt.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ue(Rt.source),...Vn};this.scheduleNavigation(br,Os,null,kn,{resolve:Rt.resolve,reject:Rt.reject,promise:Rt.promise})}(function Wi(me){return!(me instanceof Ln||me instanceof fs)})(Ke)&&this._events.next(Ke)}catch(Rt){this.navigationTransitions.transitionAbortSubject.next(Rt)}});this.eventsSubscription.add(Me)}resetRootComponentType(Me){this.routerState.root.component=Me,this.navigationTransitions.rootComponentType=Me}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Os,this.stateManager.restoredState())}setUpLocationChangeListener(){var Me;null!==(Me=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==Me||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((Ke,Rt)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(Ke,"popstate",Rt)},0)}))}navigateToSyncWithBrowser(Me,Ke,Rt){const Gt={replaceUrl:!0},Vn=null!=Rt&&Rt.navigationId?Rt:null;if(Rt){const kn={...Rt};delete kn.navigationId,delete kn.\u0275routerPageId,0!==Object.keys(kn).length&&(Gt.state=kn)}const br=this.parseUrl(Me);this.scheduleNavigation(br,Ke,Vn,Gt)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(Me){this.config=Me.map(Ia),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(Me,Ke={}){const{relativeTo:Rt,queryParams:Gt,fragment:Vn,queryParamsHandling:br,preserveFragment:kn}=Ke,zr=kn?this.currentUrlTree.fragment:Vn;let Nr,Ai=null;switch(br){case"merge":Ai={...this.currentUrlTree.queryParams,...Gt};break;case"preserve":Ai=this.currentUrlTree.queryParams;break;default:Ai=Gt||null}null!==Ai&&(Ai=this.removeEmptyProps(Ai));try{Nr=H(Rt?Rt.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof Me[0]||"/"!==Me[0][0])&&(Me=[]),Nr=this.currentUrlTree.root}return de(Nr,Me,Ai,null!=zr?zr:null)}navigateByUrl(Me,Ke={skipLocationChange:!1}){const Rt=L(Me)?Me:this.parseUrl(Me),Gt=this.urlHandlingStrategy.merge(Rt,this.rawUrlTree);return this.scheduleNavigation(Gt,Os,null,Ke)}navigate(Me,Ke={skipLocationChange:!1}){return function Qi(me){for(let Ae=0;Ae<me.length;Ae++)if(null==me[Ae])throw new F.wOt(4008,!1)}(Me),this.navigateByUrl(this.createUrlTree(Me,Ke),Ke)}serializeUrl(Me){return this.urlSerializer.serialize(Me)}parseUrl(Me){try{return this.urlSerializer.parse(Me)}catch{return this.urlSerializer.parse("/")}}isActive(Me,Ke){let Rt;if(Rt=!0===Ke?{...Xr}:!1===Ke?{...oi}:Ke,L(Me))return Rn(this.currentUrlTree,Me,Rt);const Gt=this.parseUrl(Me);return Rn(this.currentUrlTree,Gt,Rt)}removeEmptyProps(Me){return Object.entries(Me).reduce((Ke,[Rt,Gt])=>(null!=Gt&&(Ke[Rt]=Gt),Ke),{})}scheduleNavigation(Me,Ke,Rt,Gt,Vn){if(this.disposed)return Promise.resolve(!1);let br,kn,zr;Vn?(br=Vn.resolve,kn=Vn.reject,zr=Vn.promise):zr=new Promise((Nr,mi)=>{br=Nr,kn=mi});const Ai=this.pendingTasks.add();return Hn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ai))}),this.navigationTransitions.handleNavigationRequest({source:Ke,restoredState:Rt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:Me,extras:Gt,resolve:br,reject:kn,promise:zr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),zr.catch(Nr=>Promise.reject(Nr))}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})(),is=(()=>{var me;class Ae{constructor(Me,Ke,Rt,Gt,Vn,br){var kn;this.router=Me,this.route=Ke,this.tabIndexAttribute=Rt,this.renderer=Gt,this.el=Vn,this.locationStrategy=br,this.href=null,this.onChanges=new p.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const zr=null===(kn=Vn.nativeElement.tagName)||void 0===kn?void 0:kn.toLowerCase();this.isAnchorElement="a"===zr||"area"===zr,this.isAnchorElement?this.subscription=Me.events.subscribe(Ai=>{Ai instanceof Ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(Me){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",Me)}ngOnChanges(Me){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(Me){null==Me?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=L(Me)||Array.isArray(Me)?Me:[Me],this.setTabIndexIfNotOnNativeEl("0"))}onClick(Me,Ke,Rt,Gt,Vn){const br=this.urlTree;return!!(null===br||this.isAnchorElement&&(0!==Me||Ke||Rt||Gt||Vn||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(br,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var Me;null===(Me=this.subscription)||void 0===Me||Me.unsubscribe()}updateHref(){var Me;const Ke=this.urlTree;this.href=null!==Ke&&this.locationStrategy?null===(Me=this.locationStrategy)||void 0===Me?void 0:Me.prepareExternalUrl(this.router.serializeUrl(Ke)):null;const Rt=null===this.href?null:(0,F.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",Rt)}applyAttributeValue(Me,Ke){const Rt=this.renderer,Gt=this.el.nativeElement;null!==Ke?Rt.setAttribute(Gt,Me,Ke):Rt.removeAttribute(Gt,Me)}get urlTree(){return null===this.routerLinkInput?null:L(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)(F.rXU(Oi),F.rXU(Qr),F.kS0("tabindex"),F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(g.hb))},me.\u0275dir=F.FsC({type:me,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(Me,Ke){1&Me&&F.bIt("click",function(Gt){return Ke.onClick(Gt.button,Gt.ctrlKey,Gt.shiftKey,Gt.altKey,Gt.metaKey)}),2&Me&&F.BMQ("target",Ke.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",F.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",F.L39],replaceUrl:[2,"replaceUrl","replaceUrl",F.L39],routerLink:"routerLink"},standalone:!0,features:[F.GFd,F.OA$]}),Ae})();class us{}let po=(()=>{var me;class Ae{preload(Me,Ke){return Ke().pipe(Q(()=>(0,be.of)(null)))}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})(),ll=(()=>{var me;class Ae{constructor(Me,Ke,Rt,Gt,Vn){this.router=Me,this.injector=Rt,this.preloadingStrategy=Gt,this.loader=Vn}setUpPreloading(){this.subscription=this.router.events.pipe((0,G.p)(Me=>Me instanceof Ls),oe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Me,Ke){const Rt=[];for(const kn of Ke){var Gt,Vn;kn.providers&&!kn._injector&&(kn._injector=(0,F.Ol2)(kn.providers,Me,`Route: ${kn.path}`));const zr=null!==(Gt=kn._injector)&&void 0!==Gt?Gt:Me,Ai=null!==(Vn=kn._loadedInjector)&&void 0!==Vn?Vn:zr;var br;(kn.loadChildren&&!kn._loadedRoutes&&void 0===kn.canLoad||kn.loadComponent&&!kn._loadedComponent)&&Rt.push(this.preloadConfig(zr,kn)),(kn.children||kn._loadedRoutes)&&Rt.push(this.processRoutes(Ai,null!==(br=kn.children)&&void 0!==br?br:kn._loadedRoutes))}return(0,a.H)(Rt).pipe((0,Ct.U)())}preloadConfig(Me,Ke){return this.preloadingStrategy.preload(Ke,()=>{let Rt;Rt=Ke.loadChildren&&void 0===Ke.canLoad?this.loader.loadChildren(Me,Ke):(0,be.of)(null);const Gt=Rt.pipe((0,V.Z)(Vn=>{var br;return null===Vn?(0,be.of)(void 0):(Ke._loadedRoutes=Vn.routes,Ke._loadedInjector=Vn.injector,this.processRoutes(null!==(br=Vn.injector)&&void 0!==br?br:Me,Vn.routes))}));if(Ke.loadComponent&&!Ke._loadedComponent){const Vn=this.loader.loadComponent(Ke);return(0,a.H)([Gt,Vn]).pipe((0,Ct.U)())}return Gt})}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)(F.KVO(Oi),F.KVO(F.Ql9),F.KVO(F.uvJ),F.KVO(us),F.KVO(Vs))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ae})();const sa=new F.nKC("");let fa=(()=>{var me;class Ae{constructor(Me,Ke,Rt,Gt,Vn={}){this.urlSerializer=Me,this.transitions=Ke,this.viewportScroller=Rt,this.zone=Gt,this.options=Vn,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Vn.scrollPositionRestoration||(Vn.scrollPositionRestoration="disabled"),Vn.anchorScrolling||(Vn.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(Me=>{Me instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Me.navigationTrigger,this.restoredId=Me.restoredState?Me.restoredState.navigationId:0):Me instanceof Ls?(this.lastId=Me.id,this.scheduleScrollEvent(Me,this.urlSerializer.parse(Me.urlAfterRedirects).fragment)):Me instanceof ca&&Me.code===ea.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(Me,this.urlSerializer.parse(Me.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(Me=>{Me instanceof Wt&&(Me.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Me.position):Me.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Me.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Me,Ke){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wt(Me,"popstate"===this.lastSource?this.store[this.restoredId]:null,Ke))})},0)})}ngOnDestroy(){var Me,Ke;null===(Me=this.routerEventsSubscription)||void 0===Me||Me.unsubscribe(),null===(Ke=this.scrollEventsSubscription)||void 0===Ke||Ke.unsubscribe()}}return(me=Ae).\u0275fac=function(Me){F.QTQ()},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac}),Ae})();function zo(me,Ae){return{\u0275kind:me,\u0275providers:Ae}}function Ou(){const me=(0,F.WQX)(F.zZn);return Ae=>{var $e,Me;const Ke=me.get(F.o8S);if(Ae!==Ke.components[0])return;const Rt=me.get(Oi),Gt=me.get(li);1===me.get(ei)&&Rt.initialNavigation(),null===($e=me.get($o,null,F.$GK.Optional))||void 0===$e||$e.setUpPreloading(),null===(Me=me.get(sa,null,F.$GK.Optional))||void 0===Me||Me.init(),Rt.resetRootComponentType(Ke.componentTypes[0]),Gt.closed||(Gt.next(),Gt.complete(),Gt.unsubscribe())}}const li=new F.nKC("",{factory:()=>new p.B}),ei=new F.nKC("",{providedIn:"root",factory:()=>1}),$o=new F.nKC("");function _a(me){return zo(0,[{provide:$o,useExisting:ll},{provide:us,useExisting:me}])}function oa(me){return zo(9,[{provide:Ft,useValue:xt},{provide:ln,useValue:{skipNextTransition:!(null==me||!me.skipInitialTransition),...me}}])}const Ra=new F.nKC("ROUTER_FORROOT_GUARD"),lu=[g.aZ,{provide:zn,useClass:ir},Oi,pn,{provide:Qr,useFactory:function ul(me){return me.routerState.root},deps:[Oi]},Vs,[]];let cu=(()=>{var me;class Ae{constructor(Me){}static forRoot(Me,Ke){return{ngModule:Ae,providers:[lu,[],{provide:_o,multi:!0,useValue:Me},{provide:Ra,useFactory:Bm,deps:[[Oi,new F.Xx1,new F.kdw]]},{provide:Ha,useValue:Ke||{}},null!=Ke&&Ke.useHash?{provide:g.hb,useClass:g.fw}:{provide:g.hb,useClass:g.Sm},{provide:sa,useFactory:()=>{const me=(0,F.WQX)(g.Xr),Ae=(0,F.WQX)(F.SKi),$e=(0,F.WQX)(Ha),Me=(0,F.WQX)(ot),Ke=(0,F.WQX)(zn);return $e.scrollOffset&&me.setOffset($e.scrollOffset),new fa(Ke,Me,me,Ae,$e)}},null!=Ke&&Ke.preloadingStrategy?_a(Ke.preloadingStrategy).\u0275providers:[],null!=Ke&&Ke.initialNavigation?rl(Ke):[],null!=Ke&&Ke.bindToComponentInputs?zo(8,[El,{provide:uo,useExisting:El}]).\u0275providers:[],null!=Ke&&Ke.enableViewTransitions?oa().\u0275providers:[],[{provide:kd,useFactory:Ou},{provide:F.iLQ,multi:!0,useExisting:kd}]]}}static forChild(Me){return{ngModule:Ae,providers:[{provide:_o,multi:!0,useValue:Me}]}}}return(me=Ae).\u0275fac=function(Me){return new(Me||me)(F.KVO(Ra,8))},me.\u0275mod=F.$C({type:me}),me.\u0275inj=F.G2t({}),Ae})();function Bm(me){return"guarded"}function rl(me){return["disabled"===me.initialNavigation?zo(3,[{provide:F.hnV,multi:!0,useFactory:()=>{const Ae=(0,F.WQX)(Oi);return()=>{Ae.setUpLocationChangeListener()}}},{provide:ei,useValue:2}]).\u0275providers:[],"enabledBlocking"===me.initialNavigation?zo(2,[{provide:ei,useValue:0},{provide:F.hnV,multi:!0,deps:[F.zZn],useFactory:Ae=>{const $e=Ae.get(g.hj,Promise.resolve());return()=>$e.then(()=>new Promise(Me=>{const Ke=Ae.get(Oi),Rt=Ae.get(li);Hn(Ke,()=>{Me(!0)}),Ae.get(ot).afterPreactivation=()=>(Me(!0),Rt.closed?(0,be.of)(void 0):Rt),Ke.initialNavigation()}))}}]).\u0275providers:[]]}const kd=new F.nKC("")},3656:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{Yq:()=>yn,TS:()=>Lt,sR:()=>Bt,el:()=>te,Sb:()=>zn,QE:()=>U,CF:()=>_t,Rg:()=>Fn,p4:()=>L,jM:()=>Nt,q9:()=>Ut,y8:()=>Kt,Kb:()=>rn,OD:()=>Ct,CE:()=>Ie,pF:()=>Qe,fL:()=>H,YV:()=>fr,er:()=>ie,z3:()=>de});var F=Ve(467),j=Ve(9842),It=Ve(3953),sn=Ve(9858),a=Ve(177),be=Ve(5531),Z=Ve(4442);var $=Ve(1413),ne=Ve(3726),Y=Ve(4412),we=Ve(4572),Se=Ve(7673),oe=Ve(1635),ge=Ve(5964),re=Ve(5558),Q=Ve(3669),fe=Ve(9974),Ce=Ve(4360);function le(Ge,He){return Ge===He}var z=Ve(4341);const ye=["tabsInner"];let Ct=(()=>{var Ge;class He{constructor(tt,Dt){(0,j.A)(this,"doc",void 0),(0,j.A)(this,"_readyPromise",void 0),(0,j.A)(this,"win",void 0),(0,j.A)(this,"backButton",new $.B),(0,j.A)(this,"keyboardDidShow",new $.B),(0,j.A)(this,"keyboardDidHide",new $.B),(0,j.A)(this,"pause",new $.B),(0,j.A)(this,"resume",new $.B),(0,j.A)(this,"resize",new $.B),this.doc=tt,Dt.run(()=>{var Zt;let $n;this.win=tt.defaultView,this.backButton.subscribeWithPriority=function(lr,Ar){return this.subscribe(Hi=>Hi.register(lr,Ki=>Dt.run(()=>Ar(Ki))))},yt(this.pause,tt,"pause",Dt),yt(this.resume,tt,"resume",Dt),yt(this.backButton,tt,"ionBackButton",Dt),yt(this.resize,this.win,"resize",Dt),yt(this.keyboardDidShow,this.win,"ionKeyboardDidShow",Dt),yt(this.keyboardDidHide,this.win,"ionKeyboardDidHide",Dt),this._readyPromise=new Promise(lr=>{$n=lr}),null!==(Zt=this.win)&&void 0!==Zt&&Zt.cordova?tt.addEventListener("deviceready",()=>{$n("cordova")},{once:!0}):$n("dom")})}is(tt){return(0,be.a)(this.win,tt)}platforms(){return(0,be.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(tt){return $t(this.win.location.href,tt)}isLandscape(){return!this.isPortrait()}isPortrait(){var tt,Dt;return null===(tt=(Dt=this.win).matchMedia)||void 0===tt?void 0:tt.call(Dt,"(orientation: portrait)").matches}testUserAgent(tt){const Dt=this.win.navigator;return!!(null!=Dt&&Dt.userAgent&&Dt.userAgent.indexOf(tt)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.KVO(a.qQ),It.KVO(It.SKi))}),(0,j.A)(He,"\u0275prov",It.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})),He})();const $t=(Ge,He)=>{He=He.replace(/[[\]\\]/g,"\\$&");const tt=new RegExp("[\\?&]"+He+"=([^&#]*)").exec(Ge);return tt?decodeURIComponent(tt[1].replace(/\+/g," ")):null},yt=(Ge,He,vt,tt)=>{He&&He.addEventListener(vt,Dt=>{tt.run(()=>{Ge.next(null!=Dt?Dt.detail:void 0)})})};let Ut=(()=>{var Ge;class He{constructor(tt,Dt,Zt,$n){(0,j.A)(this,"location",void 0),(0,j.A)(this,"serializer",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"topOutlet",void 0),(0,j.A)(this,"direction",ft),(0,j.A)(this,"animated",jt),(0,j.A)(this,"animationBuilder",void 0),(0,j.A)(this,"guessDirection","forward"),(0,j.A)(this,"guessAnimation",void 0),(0,j.A)(this,"lastNavId",-1),this.location=Dt,this.serializer=Zt,this.router=$n,$n&&$n.events.subscribe(lr=>{if(lr instanceof sn.Z){const Ar=lr.restoredState?lr.restoredState.navigationId:lr.id;this.guessDirection=this.guessAnimation=Ar<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?lr.id:Ar}}),tt.backButton.subscribeWithPriority(0,lr=>{this.pop(),lr()})}navigateForward(tt,Dt={}){return this.setDirection("forward",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(tt,Dt)}navigateBack(tt,Dt={}){return this.setDirection("back",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(tt,Dt)}navigateRoot(tt,Dt={}){return this.setDirection("root",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(tt,Dt)}back(tt={animated:!0,animationDirection:"back"}){return this.setDirection("back",tt.animated,tt.animationDirection,tt.animation),this.location.back()}pop(){var tt=this;return(0,F.A)(function*(){let Dt=tt.topOutlet;for(;Dt;){if(yield Dt.pop())return!0;Dt=Dt.parentOutlet}return!1})()}setDirection(tt,Dt,Zt,$n){this.direction=tt,this.animated=Xt(tt,Dt,Zt),this.animationBuilder=$n}setTopOutlet(tt){this.topOutlet=tt}consumeTransition(){let Dt,tt="root";const Zt=this.animationBuilder;return"auto"===this.direction?(tt=this.guessDirection,Dt=this.guessAnimation):(Dt=this.animated,tt=this.direction),this.direction=ft,this.animated=jt,this.animationBuilder=void 0,{direction:tt,animation:Dt,animationBuilder:Zt}}navigate(tt,Dt){if(Array.isArray(tt))return this.router.navigate(tt,Dt);{const Zt=this.serializer.parse(tt.toString());return void 0!==Dt.queryParams&&(Zt.queryParams={...Dt.queryParams}),void 0!==Dt.fragment&&(Zt.fragment=Dt.fragment),this.router.navigateByUrl(Zt,Dt)}}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.KVO(Ct),It.KVO(a.aZ),It.KVO(sn.Sd),It.KVO(sn.Ix,8))}),(0,j.A)(He,"\u0275prov",It.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})),He})();const Xt=(Ge,He,vt)=>{if(!1!==He){if(void 0!==vt)return vt;if("forward"===Ge||"back"===Ge)return Ge;if("root"===Ge&&!0===He)return"forward"}},ft="auto",jt=void 0;let Lt=(()=>{var Ge;class He{get(tt,Dt){const Zt=Et();return Zt?Zt.get(tt,Dt):null}getBoolean(tt,Dt){const Zt=Et();return!!Zt&&Zt.getBoolean(tt,Dt)}getNumber(tt,Dt){const Zt=Et();return Zt?Zt.getNumber(tt,Dt):0}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)}),(0,j.A)(He,"\u0275prov",It.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})),He})();const Bt=new It.nKC("USERCONFIG"),Et=()=>{if(typeof window<"u"){const Ge=window.Ionic;if(null!=Ge&&Ge.config)return Ge.config}return null};class Kt{constructor(He={}){(0,j.A)(this,"data",void 0),this.data=He,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(He){return this.data[He]}}let yn=(()=>{var Ge;class He{constructor(){(0,j.A)(this,"zone",(0,It.WQX)(It.SKi)),(0,j.A)(this,"applicationRef",(0,It.WQX)(It.o8S)),(0,j.A)(this,"config",(0,It.WQX)(Bt))}create(tt,Dt,Zt){var $n;return new Yn(tt,Dt,this.applicationRef,this.zone,Zt,null!==($n=this.config.useSetInputAPI)&&void 0!==$n&&$n)}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)}),(0,j.A)(He,"\u0275prov",It.jDH({token:Ge,factory:Ge.\u0275fac})),He})();class Yn{constructor(He,vt,tt,Dt,Zt,$n){(0,j.A)(this,"environmentInjector",void 0),(0,j.A)(this,"injector",void 0),(0,j.A)(this,"applicationRef",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"elementReferenceKey",void 0),(0,j.A)(this,"enableSignalsSupport",void 0),(0,j.A)(this,"elRefMap",new WeakMap),(0,j.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=He,this.injector=vt,this.applicationRef=tt,this.zone=Dt,this.elementReferenceKey=Zt,this.enableSignalsSupport=$n}attachViewToDom(He,vt,tt,Dt){return this.zone.run(()=>new Promise(Zt=>{const $n={...tt};void 0!==this.elementReferenceKey&&($n[this.elementReferenceKey]=He),Zt(An(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,He,vt,$n,Dt,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(He,vt){return this.zone.run(()=>new Promise(tt=>{const Dt=this.elRefMap.get(vt);if(Dt){Dt.destroy(),this.elRefMap.delete(vt);const Zt=this.elEventsMap.get(vt);Zt&&(Zt(),this.elEventsMap.delete(vt))}tt()}))}}const An=(Ge,He,vt,tt,Dt,Zt,$n,lr,Ar,Hi,Ki,Xs)=>{const Os=It.zZn.create({providers:Bn(Ar),parent:vt}),wi=(0,It.a0P)(lr,{environmentInjector:He,elementInjector:Os}),ws=wi.instance,co=wi.location.nativeElement;if(Ar)if(Ki&&void 0!==ws[Ki]&&console.error(`[Ionic Error]: ${Ki} is a reserved property when using ${$n.tagName.toLowerCase()}. Rename or remove the "${Ki}" property from ${lr.name}.`),!0===Xs&&void 0!==wi.setInput){const{modal:so,popover:ea,...So}=Ar;for(const ca in So)wi.setInput(ca,So[ca]);void 0!==so&&Object.assign(ws,{modal:so}),void 0!==ea&&Object.assign(ws,{popover:ea})}else Object.assign(ws,Ar);if(Hi)for(const so of Hi)co.classList.add(so);const Ls=Rn(Ge,ws,co);return $n.appendChild(co),tt.attachView(wi.hostView),Dt.set(co,wi),Zt.set(co,Ls),co},Jn=[Z.L,Z.a,Z.b,Z.c,Z.d],Rn=(Ge,He,vt)=>Ge.run(()=>{const tt=Jn.filter(Dt=>"function"==typeof He[Dt]).map(Dt=>{const Zt=$n=>He[Dt]($n.detail);return vt.addEventListener(Dt,Zt),()=>vt.removeEventListener(Dt,Zt)});return()=>tt.forEach(Dt=>Dt())}),Sr=new It.nKC("NavParamsToken"),Bn=Ge=>[{provide:Sr,useValue:Ge},{provide:Kt,useFactory:ur,deps:[Sr]}],ur=Ge=>new Kt(Ge),bn=(Ge,He)=>{const vt=Ge.prototype;He.forEach(tt=>{Object.defineProperty(vt,tt,{get(){return this.el[tt]},set(Dt){this.z.runOutsideAngular(()=>this.el[tt]=Dt)}})})},Qn=(Ge,He)=>{const vt=Ge.prototype;He.forEach(tt=>{vt[tt]=function(){const Dt=arguments;return this.z.runOutsideAngular(()=>this.el[tt].apply(this.el,Dt))}})},Pn=(Ge,He,vt)=>{vt.forEach(tt=>Ge[tt]=(0,ne.R)(He,tt))};function pt(Ge){return function(vt){const{defineCustomElementFn:tt,inputs:Dt,methods:Zt}=Ge;return void 0!==tt&&tt(),Dt&&bn(vt,Dt),Zt&&Qn(vt,Zt),vt}}const bt=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],rt=["present","dismiss","onDidDismiss","onWillDismiss"];let _t=(()=>{var Ge;let He=((0,j.A)(Ge=class{constructor(tt,Dt,Zt){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=Zt,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,tt.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,tt.detectChanges()}),Pn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(It.gRc),It.rXU(It.aKT),It.rXU(It.SKi))}),(0,j.A)(Ge,"\u0275dir",It.FsC({type:Ge,selectors:[["ion-popover"]],contentQueries:function(tt,Dt,Zt){if(1&tt&&It.wni(Zt,It.C4Q,5),2&tt){let $n;It.mGM($n=It.lsd())&&(Dt.template=$n.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Ge);return He=(0,oe.Cg)([pt({inputs:bt,methods:rt})],He),He})();const vn=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],On=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let zn=(()=>{var Ge;let He=((0,j.A)(Ge=class{constructor(tt,Dt,Zt){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=Zt,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,tt.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,tt.detectChanges()}),Pn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(It.gRc),It.rXU(It.aKT),It.rXU(It.SKi))}),(0,j.A)(Ge,"\u0275dir",It.FsC({type:Ge,selectors:[["ion-modal"]],contentQueries:function(tt,Dt,Zt){if(1&tt&&It.wni(Zt,It.C4Q,5),2&tt){let $n;It.mGM($n=It.lsd())&&(Dt.template=$n.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Ge);return He=(0,oe.Cg)([pt({inputs:vn,methods:On})],He),He})();const Dr=(Ge,He)=>((Ge=Ge.filter(vt=>vt.stackId!==He.stackId)).push(He),Ge),In=(Ge,He)=>{const vt=Ge.createUrlTree(["."],{relativeTo:He});return Ge.serializeUrl(vt)},un=(Ge,He)=>!He||Ge.stackId!==He.stackId,Tn=(Ge,He)=>{if(!Ge)return;const vt=on(He);for(let tt=0;tt<vt.length;tt++){if(tt>=Ge.length)return vt[tt];if(vt[tt]!==Ge[tt])return}},on=Ge=>Ge.split("/").map(He=>He.trim()).filter(He=>""!==He),mn=Ge=>{Ge&&(Ge.ref.destroy(),Ge.unlistenEvents())};class sr{constructor(He,vt,tt,Dt,Zt,$n){(0,j.A)(this,"containerEl",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"location",void 0),(0,j.A)(this,"views",[]),(0,j.A)(this,"runningTask",void 0),(0,j.A)(this,"skipTransition",!1),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"activeView",void 0),(0,j.A)(this,"nextId",0),this.containerEl=vt,this.router=tt,this.navCtrl=Dt,this.zone=Zt,this.location=$n,this.tabsPrefix=void 0!==He?on(He):void 0}createView(He,vt){var tt;const Dt=In(this.router,vt),Zt=null==He||null===(tt=He.location)||void 0===tt?void 0:tt.nativeElement,$n=Rn(this.zone,He.instance,Zt);return{id:this.nextId++,stackId:Tn(this.tabsPrefix,Dt),unlistenEvents:$n,element:Zt,ref:He,url:Dt}}getExistingView(He){const vt=In(this.router,He),tt=this.views.find(Dt=>Dt.url===vt);return tt&&tt.ref.changeDetectorRef.reattach(),tt}setActive(He){var vt,tt;const Dt=this.navCtrl.consumeTransition();let{direction:Zt,animation:$n,animationBuilder:lr}=Dt;const Ar=this.activeView,Hi=un(He,Ar);Hi&&(Zt="back",$n=void 0);const Ki=this.views.slice();let Xs;const Os=this.router;Os.getCurrentNavigation?Xs=Os.getCurrentNavigation():null!==(vt=Os.navigations)&&void 0!==vt&&vt.value&&(Xs=Os.navigations.value),null!==(tt=Xs)&&void 0!==tt&&null!==(tt=tt.extras)&&void 0!==tt&&tt.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const wi=this.views.includes(He),ws=this.insertView(He,Zt);wi||He.ref.changeDetectorRef.detectChanges();const co=He.animationBuilder;return void 0===lr&&"back"===Zt&&!Hi&&void 0!==co&&(lr=co),Ar&&(Ar.animationBuilder=lr),this.zone.runOutsideAngular(()=>this.wait(()=>(Ar&&Ar.ref.changeDetectorRef.detach(),He.ref.changeDetectorRef.reattach(),this.transition(He,Ar,$n,this.canGoBack(1),!1,lr).then(()=>qt(He,ws,Ki,this.location,this.zone)).then(()=>({enteringView:He,direction:Zt,animation:$n,tabSwitch:Hi})))))}canGoBack(He,vt=this.getActiveStackId()){return this.getStack(vt).length>He}pop(He,vt=this.getActiveStackId()){return this.zone.run(()=>{const tt=this.getStack(vt);if(tt.length<=He)return Promise.resolve(!1);const Dt=tt[tt.length-He-1];let Zt=Dt.url;const $n=Dt.savedData;if($n){var lr;const Hi=$n.get("primary");null!=Hi&&null!==(lr=Hi.route)&&void 0!==lr&&null!==(lr=lr._routerState)&&void 0!==lr&&lr.snapshot.url&&(Zt=Hi.route._routerState.snapshot.url)}const{animationBuilder:Ar}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Zt,{...Dt.savedExtras,animation:Ar}).then(()=>!0)})}startBackTransition(){const He=this.activeView;if(He){const vt=this.getStack(He.stackId),tt=vt[vt.length-2],Dt=tt.animationBuilder;return this.wait(()=>this.transition(tt,He,"back",this.canGoBack(2),!0,Dt))}return Promise.resolve()}endBackTransition(He){He?(this.skipTransition=!0,this.pop(1)):this.activeView&&fn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(He){const vt=this.getStack(He);return vt.length>0?vt[vt.length-1]:void 0}getRootUrl(He){const vt=this.getStack(He);return vt.length>0?vt[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(mn),this.activeView=void 0,this.views=[]}getStack(He){return this.views.filter(vt=>vt.stackId===He)}insertView(He,vt){return this.activeView=He,this.views=((Ge,He,vt)=>"root"===vt?Dr(Ge,He):"forward"===vt?((Ge,He)=>(Ge.indexOf(He)>=0?Ge=Ge.filter(tt=>tt.stackId!==He.stackId||tt.id<=He.id):Ge.push(He),Ge))(Ge,He):((Ge,He)=>Ge.indexOf(He)>=0?Ge.filter(tt=>tt.stackId!==He.stackId||tt.id<=He.id):Dr(Ge,He))(Ge,He))(this.views,He,vt),this.views.slice()}transition(He,vt,tt,Dt,Zt,$n){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(vt===He)return Promise.resolve(!1);const lr=He?He.element:void 0,Ar=vt?vt.element:void 0,Hi=this.containerEl;return lr&&lr!==Ar&&(lr.classList.add("ion-page"),lr.classList.add("ion-page-invisible"),Hi.commit)?Hi.commit(lr,Ar,{duration:void 0===tt?0:void 0,direction:tt,showGoBack:Dt,progressAnimation:Zt,animationBuilder:$n}):Promise.resolve(!1)}wait(He){var vt=this;return(0,F.A)(function*(){void 0!==vt.runningTask&&(yield vt.runningTask,vt.runningTask=void 0);const tt=vt.runningTask=He();return tt.finally(()=>vt.runningTask=void 0),tt})()}}const qt=(Ge,He,vt,tt,Dt)=>"function"==typeof requestAnimationFrame?new Promise(Zt=>{requestAnimationFrame(()=>{fn(Ge,He,vt,tt,Dt),Zt()})}):Promise.resolve(),fn=(Ge,He,vt,tt,Dt)=>{Dt.run(()=>vt.filter(Zt=>!He.includes(Zt)).forEach(mn)),He.forEach(Zt=>{const lr=tt.path().split("?")[0].split("#")[0];if(Zt!==Ge&&Zt.url!==lr){const Ar=Zt.element;Ar.setAttribute("aria-hidden","true"),Ar.classList.add("ion-page-hidden"),Zt.ref.changeDetectorRef.detach()}})};let Fn=(()=>{var Ge;class He{get activatedComponentRef(){return this.activated}set animation(tt){this.nativeEl.animation=tt}set animated(tt){this.nativeEl.animated=tt}set swipeGesture(tt){this._swipeGesture=tt,this.nativeEl.swipeHandler=tt?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Dt=>this.stackCtrl.endBackTransition(Dt)}:void 0}constructor(tt,Dt,Zt,$n,lr,Ar,Hi,Ki){(0,j.A)(this,"parentOutlet",void 0),(0,j.A)(this,"nativeEl",void 0),(0,j.A)(this,"activatedView",null),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"_swipeGesture",void 0),(0,j.A)(this,"stackCtrl",void 0),(0,j.A)(this,"proxyMap",new WeakMap),(0,j.A)(this,"currentActivatedRoute$",new Y.t(null)),(0,j.A)(this,"activated",null),(0,j.A)(this,"_activatedRoute",null),(0,j.A)(this,"name",sn.Xk),(0,j.A)(this,"stackWillChange",new It.bkB),(0,j.A)(this,"stackDidChange",new It.bkB),(0,j.A)(this,"activateEvents",new It.bkB),(0,j.A)(this,"deactivateEvents",new It.bkB),(0,j.A)(this,"parentContexts",(0,It.WQX)(sn.Zp)),(0,j.A)(this,"location",(0,It.WQX)(It.c1b)),(0,j.A)(this,"environmentInjector",(0,It.WQX)(It.uvJ)),(0,j.A)(this,"inputBinder",(0,It.WQX)(Wn,{optional:!0})),(0,j.A)(this,"supportsBindingToComponentInputs",!0),(0,j.A)(this,"config",(0,It.WQX)(Lt)),(0,j.A)(this,"navCtrl",(0,It.WQX)(Ut)),this.parentOutlet=Ki,this.nativeEl=$n.nativeElement,this.name=tt||sn.Xk,this.tabsPrefix="true"===Dt?In(lr,Hi):void 0,this.stackCtrl=new sr(this.tabsPrefix,this.nativeEl,lr,this.navCtrl,Ar,Zt),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var tt;this.stackCtrl.destroy(),null===(tt=this.inputBinder)||void 0===tt||tt.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const tt=this.getContext();null!=tt&&tt.route&&this.activateWith(tt.route,tt.injector)}new Promise(tt=>((Ge,He)=>{Ge.componentOnReady?Ge.componentOnReady().then(vt=>He(vt)):(Ge=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ge):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ge):setTimeout(Ge)})(()=>He(Ge))})(this.nativeEl,tt)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(tt,Dt){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Dt=this.getContext();this.activatedView.savedData=new Map(Dt.children.contexts);const Zt=this.activatedView.savedData.get("primary");if(Zt&&Dt.route&&(Zt.route={...Dt.route}),this.activatedView.savedExtras={},Dt.route){const $n=Dt.route.snapshot;this.activatedView.savedExtras.queryParams=$n.queryParams,this.activatedView.savedExtras.fragment=$n.fragment}}const tt=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(tt)}}activateWith(tt,Dt){var Zt;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=tt;let $n,lr=this.stackCtrl.getExistingView(tt);if(lr){$n=this.activated=lr.ref;const Ki=lr.savedData;Ki&&(this.getContext().children.contexts=Ki),this.updateActivatedRouteProxy($n.instance,tt)}else{var Ar;const Ki=tt._futureSnapshot,Xs=this.parentContexts.getOrCreateContext(this.name).children,Os=new Y.t(null),wi=this.createActivatedRouteProxy(Os,tt),ws=new Cn(wi,Xs,this.location.injector),co=null!==(Ar=Ki.routeConfig.component)&&void 0!==Ar?Ar:Ki.component;$n=this.activated=this.outletContent.createComponent(co,{index:this.outletContent.length,injector:ws,environmentInjector:null!=Dt?Dt:this.environmentInjector}),Os.next($n.instance),lr=this.stackCtrl.createView(this.activated,tt),this.proxyMap.set($n.instance,wi),this.currentActivatedRoute$.next({component:$n.instance,activatedRoute:tt})}null===(Zt=this.inputBinder)||void 0===Zt||Zt.bindActivatedRouteToOutletComponent(this),this.activatedView=lr,this.navCtrl.setTopOutlet(this);const Hi=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:lr,tabSwitch:un(lr,Hi)}),this.stackCtrl.setActive(lr).then(Ki=>{this.activateEvents.emit($n.instance),this.stackDidChange.emit(Ki)})}canGoBack(tt=1,Dt){return this.stackCtrl.canGoBack(tt,Dt)}pop(tt=1,Dt){return this.stackCtrl.pop(tt,Dt)}getLastUrl(tt){const Dt=this.stackCtrl.getLastUrl(tt);return Dt?Dt.url:void 0}getLastRouteView(tt){return this.stackCtrl.getLastUrl(tt)}getRootView(tt){return this.stackCtrl.getRootUrl(tt)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(tt,Dt){const Zt=new sn.nX;return Zt._futureSnapshot=Dt._futureSnapshot,Zt._routerState=Dt._routerState,Zt.snapshot=Dt.snapshot,Zt.outlet=Dt.outlet,Zt.component=Dt.component,Zt._paramMap=this.proxyObservable(tt,"paramMap"),Zt._queryParamMap=this.proxyObservable(tt,"queryParamMap"),Zt.url=this.proxyObservable(tt,"url"),Zt.params=this.proxyObservable(tt,"params"),Zt.queryParams=this.proxyObservable(tt,"queryParams"),Zt.fragment=this.proxyObservable(tt,"fragment"),Zt.data=this.proxyObservable(tt,"data"),Zt}proxyObservable(tt,Dt){return tt.pipe((0,ge.p)(Zt=>!!Zt),(0,re.n)(Zt=>this.currentActivatedRoute$.pipe((0,ge.p)($n=>null!==$n&&$n.component===Zt),(0,re.n)($n=>$n&&$n.activatedRoute[Dt]),function it(Ge,He=Q.D){return Ge=null!=Ge?Ge:le,(0,fe.N)((vt,tt)=>{let Dt,Zt=!0;vt.subscribe((0,Ce._)(tt,$n=>{const lr=He($n);(Zt||!Ge(Dt,lr))&&(Zt=!1,Dt=lr,tt.next($n))}))})}())))}updateActivatedRouteProxy(tt,Dt){const Zt=this.proxyMap.get(tt);if(!Zt)throw new Error("Could not find activated route proxy for view");Zt._futureSnapshot=Dt._futureSnapshot,Zt._routerState=Dt._routerState,Zt.snapshot=Dt.snapshot,Zt.outlet=Dt.outlet,Zt.component=Dt.component,this.currentActivatedRoute$.next({component:tt,activatedRoute:Dt})}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.kS0("name"),It.kS0("tabs"),It.rXU(a.aZ),It.rXU(It.aKT),It.rXU(sn.Ix),It.rXU(It.SKi),It.rXU(sn.nX),It.rXU(Ge,12))}),(0,j.A)(He,"\u0275dir",It.FsC({type:Ge,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),He})();class Cn{constructor(He,vt,tt){(0,j.A)(this,"route",void 0),(0,j.A)(this,"childContexts",void 0),(0,j.A)(this,"parent",void 0),this.route=He,this.childContexts=vt,this.parent=tt}get(He,vt){return He===sn.nX?this.route:He===sn.Zp?this.childContexts:this.parent.get(He,vt)}}const Wn=new It.nKC("");let yr=(()=>{var Ge;class He{constructor(){(0,j.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(tt){this.unsubscribeFromRouteData(tt),this.subscribeToRouteData(tt)}unsubscribeFromRouteData(tt){var Dt;null===(Dt=this.outletDataSubscriptions.get(tt))||void 0===Dt||Dt.unsubscribe(),this.outletDataSubscriptions.delete(tt)}subscribeToRouteData(tt){const{activatedRoute:Dt}=tt,Zt=(0,we.z)([Dt.queryParams,Dt.params,Dt.data]).pipe((0,re.n)(([$n,lr,Ar],Hi)=>(Ar={...$n,...lr,...Ar},0===Hi?(0,Se.of)(Ar):Promise.resolve(Ar)))).subscribe($n=>{if(!tt.isActivated||!tt.activatedComponentRef||tt.activatedRoute!==Dt||null===Dt.component)return void this.unsubscribeFromRouteData(tt);const lr=(0,It.HJs)(Dt.component);if(lr)for(const{templateName:Ar}of lr.inputs)tt.activatedComponentRef.setInput(Ar,$n[Ar]);else this.unsubscribeFromRouteData(tt)});this.outletDataSubscriptions.set(tt,Zt)}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)}),(0,j.A)(He,"\u0275prov",It.jDH({token:Ge,factory:Ge.\u0275fac})),He})();const fr=()=>({provide:Wn,useFactory:Er,deps:[sn.Ix]});function Er(Ge){return null!=Ge&&Ge.componentInputBindingEnabled?new yr:null}const Lr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let te=(()=>{var Ge;let He=((0,j.A)(Ge=class{constructor(tt,Dt,Zt,$n,lr,Ar){(0,j.A)(this,"routerOutlet",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"config",void 0),(0,j.A)(this,"r",void 0),(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.routerOutlet=tt,this.navCtrl=Dt,this.config=Zt,this.r=$n,this.z=lr,Ar.detach(),this.el=this.r.nativeElement}onClick(tt){var Dt;const Zt=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(Dt=this.routerOutlet)&&void 0!==Dt&&Dt.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),tt.preventDefault()):null!=Zt&&(this.navCtrl.navigateBack(Zt,{animation:this.routerAnimation}),tt.preventDefault())}},"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(Fn,8),It.rXU(Ut),It.rXU(Lt),It.rXU(It.aKT),It.rXU(It.SKi),It.rXU(It.gRc))}),(0,j.A)(Ge,"\u0275dir",It.FsC({type:Ge,hostBindings:function(tt,Dt){1&tt&&It.bIt("click",function($n){return Dt.onClick($n)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Ge);return He=(0,oe.Cg)([pt({inputs:Lr})],He),He})(),Ie=(()=>{var Ge;class He{constructor(tt,Dt,Zt,$n,lr){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=tt,this.navCtrl=Dt,this.elementRef=Zt,this.router=$n,this.routerLink=lr}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var tt;if(null!==(tt=this.routerLink)&&void 0!==tt&&tt.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(tt){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),tt.preventDefault()}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(a.hb),It.rXU(Ut),It.rXU(It.aKT),It.rXU(sn.Ix),It.rXU(sn.Wk,8))}),(0,j.A)(He,"\u0275dir",It.FsC({type:Ge,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(tt,Dt){1&tt&&It.bIt("click",function($n){return Dt.onClick($n)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[It.OA$]})),He})(),Qe=(()=>{var Ge;class He{constructor(tt,Dt,Zt,$n,lr){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=tt,this.navCtrl=Dt,this.elementRef=Zt,this.router=$n,this.routerLink=lr}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var tt;if(null!==(tt=this.routerLink)&&void 0!==tt&&tt.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(a.hb),It.rXU(Ut),It.rXU(It.aKT),It.rXU(sn.Ix),It.rXU(sn.Wk,8))}),(0,j.A)(He,"\u0275dir",It.FsC({type:Ge,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(tt,Dt){1&tt&&It.bIt("click",function(){return Dt.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[It.OA$]})),He})();const T=["animated","animation","root","rootParams","swipeGesture"],N=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let U=(()=>{var Ge;let He=((0,j.A)(Ge=class{constructor(tt,Dt,Zt,$n,lr,Ar){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=lr,Ar.detach(),this.el=tt.nativeElement,tt.nativeElement.delegate=$n.create(Dt,Zt),Pn(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(It.aKT),It.rXU(It.uvJ),It.rXU(It.zZn),It.rXU(yn),It.rXU(It.SKi),It.rXU(It.gRc))}),(0,j.A)(Ge,"\u0275dir",It.FsC({type:Ge,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Ge);return He=(0,oe.Cg)([pt({inputs:T,methods:N})],He),He})(),L=(()=>{var Ge;class He{constructor(tt){(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"tabsInner",void 0),(0,j.A)(this,"ionTabsWillChange",new It.bkB),(0,j.A)(this,"ionTabsDidChange",new It.bkB),(0,j.A)(this,"tabBarSlot","bottom"),this.navCtrl=tt}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:tt,tabSwitch:Dt}){const Zt=tt.stackId;Dt&&void 0!==Zt&&this.ionTabsWillChange.emit({tab:Zt})}onStackDidChange({enteringView:tt,tabSwitch:Dt}){const Zt=tt.stackId;Dt&&void 0!==Zt&&(this.tabBar&&(this.tabBar.selectedTab=Zt),this.ionTabsDidChange.emit({tab:Zt}))}select(tt){const Dt="string"==typeof tt,Zt=Dt?tt:tt.detail.tab,$n=this.outlet.getActiveStackId()===Zt,lr=`${this.outlet.tabsPrefix}/${Zt}`;if(Dt||tt.stopPropagation(),$n){const Ar=this.outlet.getActiveStackId(),Hi=this.outlet.getLastRouteView(Ar);if((null==Hi?void 0:Hi.url)===lr)return;const Ki=this.outlet.getRootView(Zt);return this.navCtrl.navigateRoot(lr,{...Ki&&lr===Ki.url&&Ki.savedExtras,animated:!0,animationDirection:"back"})}{const Ar=this.outlet.getLastRouteView(Zt);return this.navCtrl.navigateRoot((null==Ar?void 0:Ar.url)||lr,{...null==Ar?void 0:Ar.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(tt=>{const Dt=tt.el.getAttribute("slot");Dt!==this.tabBarSlot&&(this.tabBarSlot=Dt,this.relocateTabBar())})}relocateTabBar(){const tt=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(tt):this.tabsInner.nativeElement.after(tt)}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(Ut))}),(0,j.A)(He,"\u0275dir",It.FsC({type:Ge,selectors:[["ion-tabs"]],viewQuery:function(tt,Dt){if(1&tt&&It.GBs(ye,7,It.aKT),2&tt){let Zt;It.mGM(Zt=It.lsd())&&(Dt.tabsInner=Zt.first)}},hostBindings:function(tt,Dt){1&tt&&It.bIt("ionTabButtonClick",function($n){return Dt.select($n)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),He})();const ie=Ge=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ge):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ge):setTimeout(Ge);let H=(()=>{var Ge;class He{constructor(tt,Dt){(0,j.A)(this,"injector",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"onChange",()=>{}),(0,j.A)(this,"onTouched",()=>{}),(0,j.A)(this,"lastValue",void 0),(0,j.A)(this,"statusChanges",void 0),this.injector=tt,this.elementRef=Dt}writeValue(tt){this.elementRef.nativeElement.value=this.lastValue=tt,de(this.elementRef)}handleValueChange(tt,Dt){tt===this.elementRef.nativeElement&&(Dt!==this.lastValue&&(this.lastValue=Dt,this.onChange(Dt)),de(this.elementRef))}_handleBlurEvent(tt){tt===this.elementRef.nativeElement&&(this.onTouched(),de(this.elementRef))}registerOnChange(tt){this.onChange=tt}registerOnTouched(tt){this.onTouched=tt}setDisabledState(tt){this.elementRef.nativeElement.disabled=tt}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let tt;try{tt=this.injector.get(z.vO)}catch{}if(!tt)return;tt.statusChanges&&(this.statusChanges=tt.statusChanges.subscribe(()=>de(this.elementRef)));const Dt=tt.control;Dt&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach($n=>{if(typeof Dt[$n]<"u"){const lr=Dt[$n].bind(Dt);Dt[$n]=(...Ar)=>{lr(...Ar),de(this.elementRef)}}})}}return Ge=He,(0,j.A)(He,"\u0275fac",function(tt){return new(tt||Ge)(It.rXU(It.zZn),It.rXU(It.aKT))}),(0,j.A)(He,"\u0275dir",It.FsC({type:Ge,hostBindings:function(tt,Dt){1&tt&&It.bIt("ionBlur",function($n){return Dt._handleBlurEvent($n.target)})}})),He})();const de=Ge=>{ie(()=>{const He=Ge.nativeElement,vt=null!=He.value&&He.value.toString().length>0,tt=Be(He);Xe(He,tt);const Dt=He.closest("ion-item");Dt&&Xe(Dt,vt?[...tt,"item-has-value"]:tt)})},Be=Ge=>{const He=Ge.classList,vt=[];for(let tt=0;tt<He.length;tt++){const Dt=He.item(tt);null!==Dt&&wt(Dt,"ng-")&&vt.push(`ion-${Dt.substring(3)}`)}return vt},Xe=(Ge,He)=>{const vt=Ge.classList;vt.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),vt.add(...He)},wt=(Ge,He)=>Ge.substring(0,He.length)===He;class Nt{shouldDetach(He){return!1}shouldAttach(He){return!1}store(He,vt){}retrieve(He){return null}shouldReuseRoute(He,vt){if(He.routeConfig!==vt.routeConfig)return!1;const tt=He.params,Dt=vt.params,Zt=Object.keys(tt),$n=Object.keys(Dt);if(Zt.length!==$n.length)return!1;for(const lr of Zt)if(Dt[lr]!==tt[lr])return!1;return!0}}class rn{constructor(He){(0,j.A)(this,"ctrl",void 0),this.ctrl=He}create(He){return this.ctrl.create(He||{})}dismiss(He,vt,tt){return this.ctrl.dismiss(He,vt,tt)}getTop(){return this.ctrl.getTop()}}},5374:(Rr,Un,Ve)=>{"use strict";Ve.d(Un,{hG:()=>co,Hx:()=>Ls,hB:()=>k,xk:()=>we,YH:()=>Se,Zy:()=>ge,U1:()=>re,mC:()=>Q,el:()=>Zt,Jm:()=>z,QW:()=>ye,b_:()=>je,I9:()=>Je,ME:()=>gt,HW:()=>Ct,tN:()=>$t,eY:()=>yt,ZB:()=>Ut,hU:()=>Xt,W9:()=>ft,A9:()=>jt,M0:()=>yn,lO:()=>Yn,eU:()=>An,iq:()=>Jn,$w:()=>ur,uz:()=>Qn,Dg:()=>Pn,he:()=>vn,nf:()=>On,AF:()=>zn,T6:()=>ws,Sb:()=>Hi,CF:()=>Ki,KO:()=>fn,f0:()=>Fn,Ob:()=>Cn,Rg:()=>tt,ln:()=>te,S1:()=>Ie,Nm:()=>N,Ip:()=>U,Jq:()=>de,qW:()=>Be,p4:()=>Dt,BC:()=>rn,BY:()=>He,ai:()=>vt,bv:()=>Va,Xi:()=>So,W3:()=>ta,su:()=>q,Je:()=>J,Gw:()=>G});var F=Ve(9842),j=Ve(3953),It=Ve(4341),sn=Ve(3656),a=Ve(1635),be=Ve(3726),Z=Ve(177),M=Ve(9858),C=Ve(617),w=Ve(467),I=Ve(8393);const d=Ve(4921).i,f=function(){var ke=(0,w.A)(function*(mt,Vt){if(!(typeof window>"u"))return yield d(),(0,I.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),Vt)});return function(Vt,We){return ke.apply(this,arguments)}}(),h=["*"],p=["outletContent"],m=["outlet"],g=[[["","slot","top"]],"*"],x=["[slot=top]","*"];function E(ke,mt){if(1&ke&&(j.j41(0,"div",1),j.eu8(1,2),j.k0s()),2&ke){const Vt=j.XpG();j.R7$(),j.Y8G("ngTemplateOutlet",Vt.template)}}function S(ke,mt){if(1&ke&&j.eu8(0,1),2&ke){const Vt=j.XpG();j.Y8G("ngTemplateOutlet",Vt.template)}}let k=(()=>{var ke;class mt extends sn.fL{constructor(We,Wt){super(We,Wt)}writeValue(We){this.elementRef.nativeElement.checked=this.lastValue=We,(0,sn.z3)(this.elementRef)}_handleIonChange(We){this.handleValueChange(We,We.checked)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(We,Wt){1&We&&j.bIt("ionChange",function(fs){return Wt._handleIonChange(fs.target)})},features:[j.Jv_([{provide:It.kq,useExisting:ke,multi:!0}]),j.Vt3]})),mt})(),q=(()=>{var ke;class mt extends sn.fL{constructor(We,Wt){super(We,Wt),(0,F.A)(this,"el",void 0),this.el=Wt}handleInputEvent(We){this.handleValueChange(We,We.value)}registerOnChange(We){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName?Wt=>{We(""===Wt?null:parseFloat(Wt))}:We)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-input","type","number"],["ion-range"]],hostBindings:function(We,Wt){1&We&&j.bIt("ionInput",function(fs){return Wt.handleInputEvent(fs.target)})},features:[j.Jv_([{provide:It.kq,useExisting:ke,multi:!0}]),j.Vt3]})),mt})(),J=(()=>{var ke;class mt extends sn.fL{constructor(We,Wt){super(We,Wt)}_handleChangeEvent(We){this.handleValueChange(We,We.value)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(We,Wt){1&We&&j.bIt("ionChange",function(fs){return Wt._handleChangeEvent(fs.target)})},features:[j.Jv_([{provide:It.kq,useExisting:ke,multi:!0}]),j.Vt3]})),mt})(),G=(()=>{var ke;class mt extends sn.fL{constructor(We,Wt){super(We,Wt)}_handleInputEvent(We){this.handleValueChange(We,We.value)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(We,Wt){1&We&&j.bIt("ionInput",function(fs){return Wt._handleInputEvent(fs.target)})},features:[j.Jv_([{provide:It.kq,useExisting:ke,multi:!0}]),j.Vt3]})),mt})();const V=(ke,mt)=>{const Vt=ke.prototype;mt.forEach(We=>{Object.defineProperty(Vt,We,{get(){return this.el[We]},set(Wt){this.z.runOutsideAngular(()=>this.el[We]=Wt)},configurable:!0})})},K=(ke,mt)=>{const Vt=ke.prototype;mt.forEach(We=>{Vt[We]=function(){const Wt=arguments;return this.z.runOutsideAngular(()=>this.el[We].apply(this.el,Wt))}})},$=(ke,mt,Vt)=>{Vt.forEach(We=>ke[We]=(0,be.R)(mt,We))};function Y(ke){return function(Vt){const{defineCustomElementFn:We,inputs:Wt,methods:Ln}=ke;return void 0!==We&&We(),Wt&&V(Vt,Wt),Ln&&K(Vt,Ln),Vt}}let we=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-accordion"]],inputs:{disabled:"disabled",mode:"mode",readonly:"readonly",toggleIcon:"toggleIcon",toggleIconSlot:"toggleIconSlot",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["disabled","mode","readonly","toggleIcon","toggleIconSlot","value"]})],mt),mt})(),Se=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-accordion-group"]],inputs:{animated:"animated",disabled:"disabled",expand:"expand",mode:"mode",multiple:"multiple",readonly:"readonly",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["animated","disabled","expand","mode","multiple","readonly","value"]})],mt),mt})(),ge=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionAlertDidPresent","ionAlertWillPresent","ionAlertWillDismiss","ionAlertDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-alert"]],inputs:{animated:"animated",backdropDismiss:"backdropDismiss",buttons:"buttons",cssClass:"cssClass",enterAnimation:"enterAnimation",header:"header",htmlAttributes:"htmlAttributes",inputs:"inputs",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",message:"message",mode:"mode",subHeader:"subHeader",translucent:"translucent",trigger:"trigger"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["animated","backdropDismiss","buttons","cssClass","enterAnimation","header","htmlAttributes","inputs","isOpen","keyboardClose","leaveAnimation","message","mode","subHeader","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],mt),mt})(),re=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-app"]],ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({})],mt),mt})(),Q=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-avatar"]],ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({})],mt),mt})(),z=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],mt),mt})(),ye=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["collapse"]})],mt),mt})(),je=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],mt),mt})(),Je=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["mode"]})],mt),mt})(),gt=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode","translucent"]})],mt),mt})(),Ct=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode"]})],mt),mt})(),$t=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode"]})],mt),mt})(),yt=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["alignment","checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"]})],mt),mt})(),Ut=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","disabled","mode","outline"]})],mt),mt})(),Xt=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],mt),mt})(),ft=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],mt),mt})(),jt=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",formatOptions:"formatOptions",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","formatOptions","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],mt),mt})(),yn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["collapse","mode","translucent"]})],mt),mt})(),Yn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["fixed"]})],mt),mt})(),An=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["collapse","mode","translucent"]})],mt),mt})(),Jn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],mt),mt})(),ur=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],mt),mt})(),Qn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],mt),mt})(),Pn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode","sticky"]})],mt),mt})(),vn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode","position"]})],mt),mt})(),On=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],mt),mt})(),zn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-list-header"]],inputs:{color:"color",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","lines","mode"]})],mt),mt})(),fn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],mt),mt})(),Fn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["allowEmptySelection","compareWith","name","value"]})],mt),mt})(),Cn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",label:"label",labelPlacement:"labelPlacement",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","label","labelPlacement","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],mt),mt})(),te=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-row"]],ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({})],mt),mt})(),Ie=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["animated","autocapitalize","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],mt),mt})(),N=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],methods:["open"]})],mt),mt})(),U=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["disabled","value"]})],mt),mt})(),de=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode","selectedTab","translucent"]})],mt),mt})(),Be=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],mt),mt})(),rn=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","size"]})],mt),mt})(),He=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement,$(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["alignment","checked","color","disabled","enableOnOffLabels","justify","labelPlacement","mode","name","value"]})],mt),mt})(),vt=(()=>{var ke;let mt=((0,F.A)(ke=class{constructor(We,Wt,Ln){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=Ln,We.detach(),this.el=Wt.nativeElement}},"\u0275fac",function(We){return new(We||ke)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(ke,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ke);return mt=(0,a.Cg)([Y({inputs:["color","mode"]})],mt),mt})(),tt=(()=>{var ke;class mt extends sn.Rg{constructor(We,Wt,Ln,fs,qs,na,Ga,Ma){super(We,Wt,Ln,fs,qs,na,Ga,Ma),(0,F.A)(this,"parentOutlet",void 0),(0,F.A)(this,"outletContent",void 0),this.parentOutlet=Ma}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.kS0("name"),j.kS0("tabs"),j.rXU(Z.aZ),j.rXU(j.aKT),j.rXU(M.Ix),j.rXU(j.SKi),j.rXU(M.nX),j.rXU(ke,12))}),(0,F.A)(mt,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-router-outlet"]],viewQuery:function(We,Wt){if(1&We&&j.GBs(p,7,j.c1b),2&We){let Ln;j.mGM(Ln=j.lsd())&&(Wt.outletContent=Ln.first)}},features:[j.Vt3],ngContentSelectors:h,decls:3,vars:0,consts:[["outletContent",""]],template:function(We,Wt){1&We&&(j.NAR(),j.qex(0,null,0),j.SdG(2),j.bVm())},encapsulation:2})),mt})(),Dt=(()=>{var ke;class mt extends sn.p4{constructor(...We){super(...We),(0,F.A)(this,"outlet",void 0),(0,F.A)(this,"tabBar",void 0),(0,F.A)(this,"tabBars",void 0)}}return ke=mt,(0,F.A)(mt,"\u0275fac",(()=>{let Vt;return function(Wt){return(Vt||(Vt=j.xGo(ke)))(Wt||ke)}})()),(0,F.A)(mt,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-tabs"]],contentQueries:function(We,Wt,Ln){if(1&We&&(j.wni(Ln,de,5),j.wni(Ln,de,4)),2&We){let fs;j.mGM(fs=j.lsd())&&(Wt.tabBar=fs.first),j.mGM(fs=j.lsd())&&(Wt.tabBars=fs)}},viewQuery:function(We,Wt){if(1&We&&j.GBs(m,5,tt),2&We){let Ln;j.mGM(Ln=j.lsd())&&(Wt.outlet=Ln.first)}},features:[j.Vt3],ngContentSelectors:x,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(We,Wt){if(1&We){const Ln=j.RV6();j.NAR(g),j.SdG(0),j.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),j.bIt("stackWillChange",function(qs){return j.eBV(Ln),j.Njj(Wt.onStackWillChange(qs))})("stackDidChange",function(qs){return j.eBV(Ln),j.Njj(Wt.onStackDidChange(qs))}),j.k0s()(),j.SdG(5,1)}},dependencies:[tt],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),mt})(),Zt=(()=>{var ke;class mt extends sn.el{constructor(We,Wt,Ln,fs,qs,na){super(We,Wt,Ln,fs,qs,na)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)(j.rXU(tt,8),j.rXU(sn.q9),j.rXU(sn.TS),j.rXU(j.aKT),j.rXU(j.SKi),j.rXU(j.gRc))}),(0,F.A)(mt,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-back-button"]],features:[j.Vt3],ngContentSelectors:h,decls:1,vars:0,template:function(We,Wt){1&We&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),mt})(),Hi=(()=>{var ke;class mt extends sn.Sb{}return ke=mt,(0,F.A)(mt,"\u0275fac",(()=>{let Vt;return function(Wt){return(Vt||(Vt=j.xGo(ke)))(Wt||ke)}})()),(0,F.A)(mt,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-modal"]],features:[j.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(We,Wt){1&We&&j.DNE(0,E,2,1,"div",0),2&We&&j.Y8G("ngIf",Wt.isCmpOpen||Wt.keepContentsMounted)},dependencies:[Z.bT,Z.T3],encapsulation:2,changeDetection:0})),mt})(),Ki=(()=>{var ke;class mt extends sn.CF{}return ke=mt,(0,F.A)(mt,"\u0275fac",(()=>{let Vt;return function(Wt){return(Vt||(Vt=j.xGo(ke)))(Wt||ke)}})()),(0,F.A)(mt,"\u0275cmp",j.VBU({type:ke,selectors:[["ion-popover"]],features:[j.Vt3],decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(We,Wt){1&We&&j.DNE(0,S,1,1,"ng-container",0),2&We&&j.Y8G("ngIf",Wt.isCmpOpen||Wt.keepContentsMounted)},dependencies:[Z.bT,Z.T3],encapsulation:2,changeDetection:0})),mt})();const Xs={provide:It.cz,useExisting:(0,j.Rfq)(()=>Os),multi:!0};let Os=(()=>{var ke;class mt extends It.zX{}return ke=mt,(0,F.A)(mt,"\u0275fac",(()=>{let Vt;return function(Wt){return(Vt||(Vt=j.xGo(ke)))(Wt||ke)}})()),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(We,Wt){2&We&&j.BMQ("max",Wt._enabled?Wt.max:null)},features:[j.Jv_([Xs]),j.Vt3]})),mt})();const wi={provide:It.cz,useExisting:(0,j.Rfq)(()=>ws),multi:!0};let ws=(()=>{var ke;class mt extends It.VZ{}return ke=mt,(0,F.A)(mt,"\u0275fac",(()=>{let Vt;return function(Wt){return(Vt||(Vt=j.xGo(ke)))(Wt||ke)}})()),(0,F.A)(mt,"\u0275dir",j.FsC({type:ke,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(We,Wt){2&We&&j.BMQ("min",Wt._enabled?Wt.min:null)},features:[j.Jv_([wi]),j.Vt3]})),mt})(),co=(()=>{var ke;class mt extends sn.Kb{constructor(){super(C.TN)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)}),(0,F.A)(mt,"\u0275prov",j.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),mt})(),Ls=(()=>{var ke;class mt{create(We){return(0,C.JI)(We)}easingTime(We,Wt,Ln,fs,qs){return(0,C.sE)(We,Wt,Ln,fs,qs)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)}),(0,F.A)(mt,"\u0275prov",j.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),mt})(),So=(()=>{var ke;class mt extends sn.Kb{constructor(){super(C.FJ)}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)}),(0,F.A)(mt,"\u0275prov",j.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),mt})(),ta=(()=>{var ke;class mt extends sn.Kb{constructor(){super(C.OZ),(0,F.A)(this,"angularDelegate",(0,j.WQX)(sn.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(We){return super.create({...We,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)}),(0,F.A)(mt,"\u0275prov",j.jDH({token:ke,factory:ke.\u0275fac})),mt})();class ua extends sn.Kb{constructor(){super(C.mF),(0,F.A)(this,"angularDelegate",(0,j.WQX)(sn.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(mt){return super.create({...mt,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const Ta=(ke,mt,Vt)=>()=>{const We=mt.defaultView;if(We&&typeof window<"u"){(0,C.QX)({...ke,_zoneGate:Ln=>Vt.run(Ln)});const Wt="__zone_symbol__addEventListener"in mt.body?"__zone_symbol__addEventListener":"addEventListener";return function b(){var ke=[];if(typeof window<"u"){var mt=window;(!mt.customElements||mt.Element&&(!mt.Element.prototype.closest||!mt.Element.prototype.matches||!mt.Element.prototype.remove||!mt.Element.prototype.getRootNode))&&ke.push(Ve.e(7278).then(Ve.t.bind(Ve,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||mt.NodeList&&!mt.NodeList.prototype.forEach||!mt.fetch||!function(){try{var We=new URL("b","http://a");return We.pathname="c%20d","http://a/c%20d"===We.href&&We.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&ke.push(Ve.e(9329).then(Ve.t.bind(Ve,7783,23)))}return Promise.all(ke)}().then(()=>f(We,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:sn.er,jmp:Ln=>Vt.runOutsideAngular(Ln),ael(Ln,fs,qs,na){Ln[Wt](fs,qs,na)},rel(Ln,fs,qs,na){Ln.removeEventListener(fs,qs,na)}}))}};let Va=(()=>{var ke;class mt{static forRoot(We={}){return{ngModule:mt,providers:[{provide:sn.sR,useValue:We},{provide:j.hnV,useFactory:Ta,multi:!0,deps:[sn.sR,Z.qQ,j.SKi]},sn.Yq,(0,sn.YV)()]}}}return ke=mt,(0,F.A)(mt,"\u0275fac",function(We){return new(We||ke)}),(0,F.A)(mt,"\u0275mod",j.$C({type:ke})),(0,F.A)(mt,"\u0275inj",j.G2t({providers:[ta,ua],imports:[Z.MD]})),mt})()},467:(Rr,Un,Ve)=>{"use strict";function F(It,sn,a,be,Z,M,C){try{var b=It[M](C),w=b.value}catch(I){return void a(I)}b.done?sn(w):Promise.resolve(w).then(be,Z)}function j(It){return function(){var sn=this,a=arguments;return new Promise(function(be,Z){var M=It.apply(sn,a);function C(w){F(M,be,Z,C,b,"next",w)}function b(w){F(M,be,Z,C,b,"throw",w)}C(void 0)})}}Ve.d(Un,{A:()=>j})},9842:(Rr,Un,Ve)=>{"use strict";function F(a){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(be){return typeof be}:function(be){return be&&"function"==typeof Symbol&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be})(a)}function sn(a,be,Z){return(be=function It(a){var be=function j(a,be){if("object"!=F(a)||!a)return a;var Z=a[Symbol.toPrimitive];if(void 0!==Z){var M=Z.call(a,be||"default");if("object"!=F(M))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===be?String:Number)(a)}(a,"string");return"symbol"==F(be)?be:be+""}(be))in a?Object.defineProperty(a,be,{value:Z,enumerable:!0,configurable:!0,writable:!0}):a[be]=Z,a}Ve.d(Un,{A:()=>sn})},1635:(Rr,Un,Ve)=>{"use strict";function a(re,Q,fe,Ce){var z,it=arguments.length,le=it<3?Q:null===Ce?Ce=Object.getOwnPropertyDescriptor(Q,fe):Ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(re,Q,fe,Ce);else for(var ye=re.length-1;ye>=0;ye--)(z=re[ye])&&(le=(it<3?z(le):it>3?z(Q,fe,le):z(Q,fe))||le);return it>3&&le&&Object.defineProperty(Q,fe,le),le}function I(re,Q,fe,Ce){return new(fe||(fe=Promise))(function(le,z){function ye(gt){try{Je(Ce.next(gt))}catch(Ct){z(Ct)}}function je(gt){try{Je(Ce.throw(gt))}catch(Ct){z(Ct)}}function Je(gt){gt.done?le(gt.value):function it(le){return le instanceof fe?le:new fe(function(z){z(le)})}(gt.value).then(ye,je)}Je((Ce=Ce.apply(re,Q||[])).next())})}function E(re){return this instanceof E?(this.v=re,this):new E(re)}function S(re,Q,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,Ce=fe.apply(re,Q||[]),le=[];return it={},ye("next"),ye("throw"),ye("return",function z(yt){return function(Ut){return Promise.resolve(Ut).then(yt,Ct)}}),it[Symbol.asyncIterator]=function(){return this},it;function ye(yt,Ut){Ce[yt]&&(it[yt]=function(Xt){return new Promise(function(ft,jt){le.push([yt,Xt,ft,jt])>1||je(yt,Xt)})},Ut&&(it[yt]=Ut(it[yt])))}function je(yt,Ut){try{!function Je(yt){yt.value instanceof E?Promise.resolve(yt.value.v).then(gt,Ct):$t(le[0][2],yt)}(Ce[yt](Ut))}catch(Xt){$t(le[0][3],Xt)}}function gt(yt){je("next",yt)}function Ct(yt){je("throw",yt)}function $t(yt,Ut){yt(Ut),le.shift(),le.length&&je(le[0][0],le[0][1])}}function q(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Q=re[Symbol.asyncIterator];return Q?Q.call(re):(re=function h(re){var Q="function"==typeof Symbol&&Symbol.iterator,fe=Q&&re[Q],Ce=0;if(fe)return fe.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Ce>=re.length&&(re=void 0),{value:re&&re[Ce++],done:!re}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),fe={},Ce("next"),Ce("throw"),Ce("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function Ce(le){fe[le]=re[le]&&function(z){return new Promise(function(ye,je){!function it(le,z,ye,je){Promise.resolve(je).then(function(Je){le({value:Je,done:ye})},z)}(ye,je,(z=re[le](z)).done,z.value)})}}}Ve.d(Un,{AQ:()=>S,Cg:()=>a,N3:()=>E,sH:()=>I,xN:()=>q}),"function"==typeof SuppressedError&&SuppressedError}},Rr=>{Rr(Rr.s=6197)}]);