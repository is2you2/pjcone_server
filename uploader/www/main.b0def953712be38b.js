(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(br,kn,je)=>{"use strict";je.d(kn,{E_:()=>p,F3:()=>d,I9:()=>C});var F=je(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var M=function(X){return X.Unimplemented="UNIMPLEMENTED",X.Unavailable="UNAVAILABLE",X}(M||{});class C extends Error{constructor(ee,Y,ve){super(ee),this.message=ee,this.code=Y,this.data=ve}}const w=X=>{var ee,Y,ve,xe,ae;const ge=X.CapacitorCustomPlatform||null,ne=X.Capacitor||{},J=ne.Plugins=ne.Plugins||{},ce=X.CapacitorPlatforms,et=(null===(ee=null==ce?void 0:ce.currentPlatform)||void 0===ee?void 0:ee.getPlatform)||(()=>null!==ge?ge.name:(X=>{var ee,Y;return null!=X&&X.androidBridge?"android":null!==(Y=null===(ee=null==X?void 0:X.webkit)||void 0===ee?void 0:ee.messageHandlers)&&void 0!==Y&&Y.bridge?"ios":"web"})(X)),V=(null===(Y=null==ce?void 0:ce.currentPlatform)||void 0===Y?void 0:Y.isNativePlatform)||(()=>"web"!==et()),Oe=(null===(ve=null==ce?void 0:ce.currentPlatform)||void 0===ve?void 0:ve.isPluginAvailable)||(lt=>{const It=ht.get(lt);return!!(null!=It&&It.platforms.has(et())||dt(lt))}),dt=(null===(xe=null==ce?void 0:ce.currentPlatform)||void 0===xe?void 0:xe.getPluginHeader)||(lt=>{var It;return null===(It=ne.PluginHeaders)||void 0===It?void 0:It.find(bt=>bt.name===lt)}),ht=new Map,kt=(null===(ae=null==ce?void 0:ce.currentPlatform)||void 0===ae?void 0:ae.registerPlugin)||((lt,It={})=>{const bt=ht.get(lt);if(bt)return console.warn(`Capacitor plugin "${lt}" already registered. Cannot register plugins twice.`),bt.proxy;const Pt=et(),St=dt(lt);let zt;const fn=function(){var nr=(0,F.A)(function*(){return!zt&&Pt in It?zt=zt="function"==typeof It[Pt]?yield It[Pt]():It[Pt]:null!==ge&&!zt&&"web"in It&&(zt=zt="function"==typeof It.web?yield It.web():It.web),zt});return function(){return nr.apply(this,arguments)}}(),En=nr=>{let hn;const Xn=(...Tn)=>{const ct=fn().then(ft=>{const Qe=((nr,hn)=>{var Xn,Tn;if(!St){if(nr)return null===(Tn=nr[hn])||void 0===Tn?void 0:Tn.bind(nr);throw new C(`"${lt}" plugin is not implemented on ${Pt}`,M.Unimplemented)}{const ct=null==St?void 0:St.methods.find(ft=>hn===ft.name);if(ct)return"promise"===ct.rtype?ft=>ne.nativePromise(lt,hn.toString(),ft):(ft,Qe)=>ne.nativeCallback(lt,hn.toString(),ft,Qe);if(nr)return null===(Xn=nr[hn])||void 0===Xn?void 0:Xn.bind(nr)}})(ft,nr);if(Qe){const xt=Qe(...Tn);return hn=null==xt?void 0:xt.remove,xt}throw new C(`"${lt}.${nr}()" is not implemented on ${Pt}`,M.Unimplemented)});return"addListener"===nr&&(ct.remove=(0,F.A)(function*(){return hn()})),ct};return Xn.toString=()=>`${nr.toString()}() { [capacitor code] }`,Object.defineProperty(Xn,"name",{value:nr,writable:!1,configurable:!1}),Xn},Kn=En("addListener"),Mn=En("removeListener"),pr=(nr,hn)=>{const Xn=Kn({eventName:nr},hn),Tn=function(){var ft=(0,F.A)(function*(){const Qe=yield Xn;Mn({eventName:nr,callbackId:Qe},hn)});return function(){return ft.apply(this,arguments)}}(),ct=new Promise(ft=>Xn.then(()=>ft({remove:Tn})));return ct.remove=(0,F.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Tn()}),ct},Ln=new Proxy({},{get(nr,hn){switch(hn){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return St?pr:Kn;case"removeListener":return Mn;default:return En(hn)}}});return J[lt]=Ln,ht.set(lt,{name:lt,proxy:Ln,platforms:new Set([...Object.keys(It),...St?[Pt]:[]])}),Ln});return ne.convertFileSrc||(ne.convertFileSrc=lt=>lt),ne.getPlatform=et,ne.handleError=lt=>X.console.error(lt),ne.isNativePlatform=V,ne.isPluginAvailable=Oe,ne.pluginMethodNoop=(lt,It,bt)=>Promise.reject(`${bt} does not have an implementation of "${It}".`),ne.registerPlugin=kt,ne.Exception=C,ne.DEBUG=!!ne.DEBUG,ne.isLoggingEnabled=!!ne.isLoggingEnabled,ne.platform=ne.getPlatform(),ne.isNative=ne.isNativePlatform(),ne},D=(X=>X.Capacitor=w(X))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),d=D.registerPlugin;class p{constructor(ee){this.listeners={},this.retainedEventArguments={},this.windowListeners={},ee&&(console.warn(`Capacitor WebPlugin "${ee.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=ee)}addListener(ee,Y){var ve=this;let xe=!1;this.listeners[ee]||(this.listeners[ee]=[],xe=!0),this.listeners[ee].push(Y);const ge=this.windowListeners[ee];ge&&!ge.registered&&this.addWindowListener(ge),xe&&this.sendRetainedArgumentsForEvent(ee);const ne=function(){var ce=(0,F.A)(function*(){return ve.removeListener(ee,Y)});return function(){return ce.apply(this,arguments)}}();return Promise.resolve({remove:ne})}removeAllListeners(){var ee=this;return(0,F.A)(function*(){ee.listeners={};for(const Y in ee.windowListeners)ee.removeWindowListener(ee.windowListeners[Y]);ee.windowListeners={}})()}notifyListeners(ee,Y,ve){const xe=this.listeners[ee];if(xe)xe.forEach(ae=>ae(Y));else if(ve){let ae=this.retainedEventArguments[ee];ae||(ae=[]),ae.push(Y),this.retainedEventArguments[ee]=ae}}hasListeners(ee){return!!this.listeners[ee].length}registerWindowListener(ee,Y){this.windowListeners[Y]={registered:!1,windowEventName:ee,pluginEventName:Y,handler:ve=>{this.notifyListeners(Y,ve)}}}unimplemented(ee="not implemented"){return new D.Exception(ee,M.Unimplemented)}unavailable(ee="not available"){return new D.Exception(ee,M.Unavailable)}removeListener(ee,Y){var ve=this;return(0,F.A)(function*(){const xe=ve.listeners[ee];if(!xe)return;const ae=xe.indexOf(Y);ve.listeners[ee].splice(ae,1),ve.listeners[ee].length||ve.removeWindowListener(ve.windowListeners[ee])})()}addWindowListener(ee){window.addEventListener(ee.windowEventName,ee.handler),ee.registered=!0}removeWindowListener(ee){ee&&(window.removeEventListener(ee.windowEventName,ee.handler),ee.registered=!1)}sendRetainedArgumentsForEvent(ee){const Y=this.retainedEventArguments[ee];Y&&(delete this.retainedEventArguments[ee],Y.forEach(ve=>{this.notifyListeners(ee,ve)}))}}const v=X=>encodeURIComponent(X).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),S=X=>X.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class x extends p{getCookies(){return(0,F.A)(function*(){const ee=document.cookie,Y={};return ee.split(";").forEach(ve=>{if(ve.length<=0)return;let[xe,ae]=ve.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");xe=S(xe).trim(),ae=S(ae).trim(),Y[xe]=ae}),Y})()}setCookie(ee){return(0,F.A)(function*(){try{const Y=v(ee.key),ve=v(ee.value),xe=`; expires=${(ee.expires||"").replace("expires=","")}`,ae=(ee.path||"/").replace("path=",""),ge=null!=ee.url&&ee.url.length>0?`domain=${ee.url}`:"";document.cookie=`${Y}=${ve||""}${xe}; path=${ae}; ${ge};`}catch(Y){return Promise.reject(Y)}})()}deleteCookie(ee){return(0,F.A)(function*(){try{document.cookie=`${ee.key}=; Max-Age=0`}catch(Y){return Promise.reject(Y)}})()}clearCookies(){return(0,F.A)(function*(){try{const ee=document.cookie.split(";")||[];for(const Y of ee)document.cookie=Y.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(ee){return Promise.reject(ee)}})()}clearAllCookies(){var ee=this;return(0,F.A)(function*(){try{yield ee.clearCookies()}catch(Y){return Promise.reject(Y)}})()}}d("CapacitorCookies",{web:()=>new x});const N=function(){var X=(0,F.A)(function*(ee){return new Promise((Y,ve)=>{const xe=new FileReader;xe.onload=()=>{const ae=xe.result;Y(ae.indexOf(",")>=0?ae.split(",")[1]:ae)},xe.onerror=ae=>ve(ae),xe.readAsDataURL(ee)})});return function(Y){return X.apply(this,arguments)}}();class G extends p{request(ee){return(0,F.A)(function*(){const Y=((X,ee={})=>{const Y=Object.assign({method:X.method||"GET",headers:X.headers},ee),xe=((X={})=>{const ee=Object.keys(X);return Object.keys(X).map(xe=>xe.toLocaleLowerCase()).reduce((xe,ae,ge)=>(xe[ae]=X[ee[ge]],xe),{})})(X.headers)["content-type"]||"";if("string"==typeof X.data)Y.body=X.data;else if(xe.includes("application/x-www-form-urlencoded")){const ae=new URLSearchParams;for(const[ge,ne]of Object.entries(X.data||{}))ae.set(ge,ne);Y.body=ae.toString()}else if(xe.includes("multipart/form-data")||X.data instanceof FormData){const ae=new FormData;if(X.data instanceof FormData)X.data.forEach((ne,J)=>{ae.append(J,ne)});else for(const ne of Object.keys(X.data))ae.append(ne,X.data[ne]);Y.body=ae;const ge=new Headers(Y.headers);ge.delete("content-type"),Y.headers=ge}else(xe.includes("application/json")||"object"==typeof X.data)&&(Y.body=JSON.stringify(X.data));return Y})(ee,ee.webFetchExtra),ve=((X,ee=!0)=>X?Object.entries(X).reduce((ve,xe)=>{const[ae,ge]=xe;let ne,J;return Array.isArray(ge)?(J="",ge.forEach(ce=>{ne=ee?encodeURIComponent(ce):ce,J+=`${ae}=${ne}&`}),J.slice(0,-1)):(ne=ee?encodeURIComponent(ge):ge,J=`${ae}=${ne}`),`${ve}&${J}`},"").substr(1):null)(ee.params,ee.shouldEncodeUrlParams),xe=ve?`${ee.url}?${ve}`:ee.url,ae=yield fetch(xe,Y),ge=ae.headers.get("content-type")||"";let J,ce,{responseType:ne="text"}=ae.ok?ee:{};switch(ge.includes("application/json")&&(ne="json"),ne){case"arraybuffer":case"blob":ce=yield ae.blob(),J=yield N(ce);break;case"json":J=yield ae.json();break;default:J=yield ae.text()}const Te={};return ae.headers.forEach((et,le)=>{Te[le]=et}),{data:J,headers:Te,status:ae.status,url:ae.url}})()}get(ee){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ee),{method:"GET"}))})()}post(ee){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ee),{method:"POST"}))})()}put(ee){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ee),{method:"PUT"}))})()}patch(ee){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ee),{method:"PATCH"}))})()}delete(ee){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},ee),{method:"DELETE"}))})()}}d("CapacitorHttp",{web:()=>new G})},4442:(br,kn,je)=>{"use strict";je.d(kn,{L:()=>a,a:()=>_e,b:()=>q,c:()=>M,d:()=>C,g:()=>ae}),je(5531);const a="ionViewWillEnter",_e="ionViewDidEnter",q="ionViewWillLeave",M="ionViewDidLeave",C="ionViewWillUnload",ae=ge=>ge.classList.contains("ion-page")?ge:ge.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ge},5531:(br,kn,je)=>{"use strict";je.d(kn,{a:()=>_,c:()=>j,g:()=>C});class F{constructor(){this.m=new Map}reset(ge){this.m=new Map(Object.entries(ge))}get(ge,ne){const J=this.m.get(ge);return void 0!==J?J:ne}getBoolean(ge,ne=!1){const J=this.m.get(ge);return void 0===J?ne:"string"==typeof J?"true"===J:!!J}getNumber(ge,ne){const J=parseFloat(this.m.get(ge));return isNaN(J)?void 0!==ne?ne:NaN:J}set(ge,ne){this.m.set(ge,ne)}}const j=new F,C=ae=>w(ae),_=(ae,ge)=>("string"==typeof ae&&(ge=ae,ae=void 0),C(ae).includes(ge)),w=(ae=window)=>{if(typeof ae>"u")return[];ae.Ionic=ae.Ionic||{};let ge=ae.Ionic.platforms;return null==ge&&(ge=ae.Ionic.platforms=I(ae),ge.forEach(ne=>ae.document.documentElement.classList.add(`plt-${ne}`))),ge},I=ae=>{const ge=j.get("platform");return Object.keys(ee).filter(ne=>{const J=null==ge?void 0:ge[ne];return"function"==typeof J?J(ae):ee[ne](ae)})},d=ae=>!!(ie(ae,/iPad/i)||ie(ae,/Macintosh/i)&&x(ae)),p=ae=>ie(ae,/android|sink/i),x=ae=>X(ae,"(any-pointer:coarse)"),N=ae=>Z(ae)||K(ae),Z=ae=>!!(ae.cordova||ae.phonegap||ae.PhoneGap),K=ae=>{const ge=ae.Capacitor;return!(null==ge||!ge.isNative)},ie=(ae,ge)=>ge.test(ae.navigator.userAgent),X=(ae,ge)=>{var ne;return null===(ne=ae.matchMedia)||void 0===ne?void 0:ne.call(ae,ge).matches},ee={ipad:d,iphone:ae=>ie(ae,/iPhone/i),ios:ae=>ie(ae,/iPhone|iPod/i)||d(ae),android:p,phablet:ae=>{const ge=ae.innerWidth,ne=ae.innerHeight,J=Math.min(ge,ne),ce=Math.max(ge,ne);return J>390&&J<520&&ce>620&&ce<800},tablet:ae=>{const ge=ae.innerWidth,ne=ae.innerHeight,J=Math.min(ge,ne),ce=Math.max(ge,ne);return d(ae)||(ae=>p(ae)&&!ie(ae,/mobile/i))(ae)||J>460&&J<820&&ce>780&&ce<1400},cordova:Z,capacitor:K,electron:ae=>ie(ae,/electron/i),pwa:ae=>{var ge;return!!(null!==(ge=ae.matchMedia)&&void 0!==ge&&ge.call(ae,"(display-mode: standalone)").matches||ae.navigator.standalone)},mobile:x,mobileweb:ae=>x(ae)&&!N(ae),desktop:ae=>!x(ae),hybrid:N}},9986:(br,kn,je)=>{"use strict";je.d(kn,{c:()=>_e});var F=je(8476);let j;const Jt=(q,M,C)=>{const _=M.startsWith("animation")?(q=>(void 0===j&&(j=void 0===q.style.animationName&&void 0!==q.style.webkitAnimationName?"-webkit-":""),j))(q):"";q.style.setProperty(_+M,C)},a=(q=[],M)=>{if(void 0!==M){const C=Array.isArray(M)?M:[M];return[...q,...C]}return q},_e=q=>{let M,C,_,w,I,D,g,z,G,ie,ve,d=[],f=[],h=[],p=!1,v={},S=[],x=[],E={},N=0,Z=!1,K=!1,X=!0,ee=!1,Y=!0,xe=!1;const ae=q,ge=[],ne=[],J=[],ce=[],Te=[],et=[],le=[],V=[],me=[],Oe=[],Xe=[],dt="function"==typeof AnimationEffect||void 0!==F.w&&"function"==typeof F.w.AnimationEffect,yt="function"==typeof Element&&"function"==typeof Element.prototype.animate&&dt,Ut=()=>Xe,It=(He,$e)=>{const pt=$e.findIndex(ot=>ot.c===He);pt>-1&&$e.splice(pt,1)},Pt=(He,$e)=>((null!=$e&&$e.oneTimeCallback?ne:ge).push({c:He,o:$e}),ve),zt=()=>{yt&&(Xe.forEach(He=>{He.cancel()}),Xe.length=0)},fn=()=>{et.forEach(He=>{null!=He&&He.parentNode&&He.parentNode.removeChild(He)}),et.length=0},Qe=()=>void 0!==I?I:g?g.getFill():"both",xt=()=>void 0!==z?z:void 0!==D?D:g?g.getDirection():"normal",un=()=>Z?"linear":void 0!==_?_:g?g.getEasing():"linear",An=()=>K?0:void 0!==G?G:void 0!==C?C:g?g.getDuration():0,jn=()=>void 0!==w?w:g?g.getIterations():1,rn=()=>void 0!==ie?ie:void 0!==M?M:g?g.getDelay():0,lr=()=>{0!==N&&(N--,0===N&&((()=>{me.forEach(Dt=>Dt()),Oe.forEach(Dt=>Dt());const He=X?1:0,$e=S,pt=x,ot=E;ce.forEach(Dt=>{const vn=Dt.classList;$e.forEach(Hn=>vn.add(Hn)),pt.forEach(Hn=>vn.remove(Hn));for(const Hn in ot)ot.hasOwnProperty(Hn)&&Jt(Dt,Hn,ot[Hn])}),G=void 0,z=void 0,ie=void 0,ge.forEach(Dt=>Dt.c(He,ve)),ne.forEach(Dt=>Dt.c(He,ve)),ne.length=0,Y=!0,X&&(ee=!0),X=!0})(),g&&g.animationFinish()))},mr=()=>{(()=>{le.forEach(ot=>ot()),V.forEach(ot=>ot());const He=f,$e=h,pt=v;ce.forEach(ot=>{const Dt=ot.classList;He.forEach(vn=>Dt.add(vn)),$e.forEach(vn=>Dt.remove(vn));for(const vn in pt)pt.hasOwnProperty(vn)&&Jt(ot,vn,pt[vn])})})(),d.length>0&&yt&&(ce.forEach(He=>{const $e=He.animate(d,{id:ae,delay:rn(),duration:An(),easing:un(),iterations:jn(),fill:Qe(),direction:xt()});$e.pause(),Xe.push($e)}),Xe.length>0&&(Xe[0].onfinish=()=>{lr()})),p=!0},Mr=He=>{He=Math.min(Math.max(He,0),.9999),yt&&Xe.forEach($e=>{$e.currentTime=$e.effect.getComputedTiming().delay+An()*He,$e.pause()})},te=He=>{Xe.forEach($e=>{$e.effect.updateTiming({delay:rn(),duration:An(),easing:un(),iterations:jn(),fill:Qe(),direction:xt()})}),void 0!==He&&Mr(He)},Ie=(He=!1,$e=!0,pt)=>(He&&Te.forEach(ot=>{ot.update(He,$e,pt)}),yt&&te(pt),ve),B=()=>{p&&(yt?Xe.forEach(He=>{He.pause()}):ce.forEach(He=>{Jt(He,"animation-play-state","paused")}),xe=!0)},Ke=He=>new Promise($e=>{null!=He&&He.sync&&(K=!0,Pt(()=>K=!1,{oneTimeCallback:!0})),p||mr(),ee&&(yt&&(Mr(0),te()),ee=!1),Y&&(N=Te.length+1,Y=!1);const pt=()=>{It(ot,ne),$e()},ot=()=>{It(pt,J),$e()};Pt(ot,{oneTimeCallback:!0}),((He,$e)=>{J.push({c:He,o:{oneTimeCallback:!0}})})(pt),Te.forEach(Dt=>{Dt.play()}),yt?(Xe.forEach(He=>{He.play()}),(0===d.length||0===ce.length)&&lr()):lr(),xe=!1}),vt=(He,$e)=>{const pt=d[0];return void 0===pt||void 0!==pt.offset&&0!==pt.offset?d=[{offset:0,[He]:$e},...d]:pt[He]=$e,ve};return ve={parentAnimation:g,elements:ce,childAnimations:Te,id:ae,animationFinish:lr,from:vt,to:(He,$e)=>{const pt=d[d.length-1];return void 0===pt||void 0!==pt.offset&&1!==pt.offset?d=[...d,{offset:1,[He]:$e}]:pt[He]=$e,ve},fromTo:(He,$e,pt)=>vt(He,$e).to(He,pt),parent:He=>(g=He,ve),play:Ke,pause:()=>(Te.forEach(He=>{He.pause()}),B(),ve),stop:()=>{Te.forEach(He=>{He.stop()}),p&&(zt(),p=!1),Z=!1,K=!1,Y=!0,z=void 0,G=void 0,ie=void 0,N=0,ee=!1,X=!0,xe=!1,J.forEach(He=>He.c(0,ve)),J.length=0},destroy:He=>(Te.forEach($e=>{$e.destroy(He)}),(He=>{zt(),He&&fn()})(He),ce.length=0,Te.length=0,d.length=0,ge.length=0,ne.length=0,p=!1,Y=!0,ve),keyframes:He=>{const $e=d!==He;return d=He,$e&&(He=>{yt&&Ut().forEach($e=>{const pt=$e.effect;if(pt.setKeyframes)pt.setKeyframes(He);else{const ot=new KeyframeEffect(pt.target,He,pt.getTiming());$e.effect=ot}})})(d),ve},addAnimation:He=>{if(null!=He)if(Array.isArray(He))for(const $e of He)$e.parent(ve),Te.push($e);else He.parent(ve),Te.push(He);return ve},addElement:He=>{if(null!=He)if(1===He.nodeType)ce.push(He);else if(He.length>=0)for(let $e=0;$e<He.length;$e++)ce.push(He[$e]);else console.error("Invalid addElement value");return ve},update:Ie,fill:He=>(I=He,Ie(!0),ve),direction:He=>(D=He,Ie(!0),ve),iterations:He=>(w=He,Ie(!0),ve),duration:He=>(!yt&&0===He&&(He=1),C=He,Ie(!0),ve),easing:He=>(_=He,Ie(!0),ve),delay:He=>(M=He,Ie(!0),ve),getWebAnimations:Ut,getKeyframes:()=>d,getFill:Qe,getDirection:xt,getDelay:rn,getIterations:jn,getEasing:un,getDuration:An,afterAddRead:He=>(me.push(He),ve),afterAddWrite:He=>(Oe.push(He),ve),afterClearStyles:(He=[])=>{for(const $e of He)E[$e]="";return ve},afterStyles:(He={})=>(E=He,ve),afterRemoveClass:He=>(x=a(x,He),ve),afterAddClass:He=>(S=a(S,He),ve),beforeAddRead:He=>(le.push(He),ve),beforeAddWrite:He=>(V.push(He),ve),beforeClearStyles:(He=[])=>{for(const $e of He)v[$e]="";return ve},beforeStyles:(He={})=>(v=He,ve),beforeRemoveClass:He=>(h=a(h,He),ve),beforeAddClass:He=>(f=a(f,He),ve),onFinish:Pt,isRunning:()=>0!==N&&!xe,progressStart:(He=!1,$e)=>(Te.forEach(pt=>{pt.progressStart(He,$e)}),B(),Z=He,p||mr(),Ie(!1,!0,$e),ve),progressStep:He=>(Te.forEach($e=>{$e.progressStep(He)}),Mr(He),ve),progressEnd:(He,$e,pt)=>(Z=!1,Te.forEach(ot=>{ot.progressEnd(He,$e,pt)}),void 0!==pt&&(G=pt),ee=!1,X=!0,0===He?(z="reverse"===xt()?"normal":"reverse","reverse"===z&&(X=!1),yt?(Ie(),Mr(1-$e)):(ie=(1-$e)*An()*-1,Ie(!1,!1))):1===He&&(yt?(Ie(),Mr($e)):(ie=$e*An()*-1,Ie(!1,!1))),void 0!==He&&!g&&Ke(),ve)}}},464:(br,kn,je)=>{"use strict";je.d(kn,{E:()=>_,I:()=>q,a:()=>F,s:()=>M});const F=w=>{try{if(w instanceof q)return w.value;if(!Jt()||"string"!=typeof w||""===w)return w;if(w.includes("onload="))return"";const I=document.createDocumentFragment(),D=document.createElement("div");I.appendChild(D),D.innerHTML=w,_e.forEach(p=>{const g=I.querySelectorAll(p);for(let v=g.length-1;v>=0;v--){const S=g[v];S.parentNode?S.parentNode.removeChild(S):I.removeChild(S);const x=Mt(S);for(let E=0;E<x.length;E++)j(x[E])}});const d=Mt(I);for(let p=0;p<d.length;p++)j(d[p]);const f=document.createElement("div");f.appendChild(I);const h=f.querySelector("div");return null!==h?h.innerHTML:f.innerHTML}catch(I){return console.error(I),""}},j=w=>{if(w.nodeType&&1!==w.nodeType)return;if(typeof NamedNodeMap<"u"&&!(w.attributes instanceof NamedNodeMap))return void w.remove();for(let D=w.attributes.length-1;D>=0;D--){const d=w.attributes.item(D),f=d.name;if(!a.includes(f.toLowerCase())){w.removeAttribute(f);continue}const h=d.value,p=w[f];(null!=h&&h.toLowerCase().includes("javascript:")||null!=p&&p.toLowerCase().includes("javascript:"))&&w.removeAttribute(f)}const I=Mt(w);for(let D=0;D<I.length;D++)j(I[D])},Mt=w=>null!=w.children?w.children:w.childNodes,Jt=()=>{var w;const I=window,D=null===(w=null==I?void 0:I.Ionic)||void 0===w?void 0:w.config;return!D||(D.get?D.get("sanitizerEnabled",!0):!0===D.sanitizerEnabled||void 0===D.sanitizerEnabled)},a=["class","id","href","src","name","slot"],_e=["script","style","iframe","meta","link","object","embed"];class q{constructor(I){this.value=I}}const M=w=>{const I=window,D=I.Ionic;if(!D||!D.config||"Object"===D.config.constructor.name)return I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),w),I.Ionic.config},_=!1},3351:(br,kn,je)=>{"use strict";je.d(kn,{g:()=>F});const F=(_e,q,M,C,_)=>Mt(_e[1],q[1],M[1],C[1],_).map(w=>j(_e[0],q[0],M[0],C[0],w)),j=(_e,q,M,C,_)=>_*(3*q*Math.pow(_-1,2)+_*(-3*M*_+3*M+C*_))-_e*Math.pow(_-1,3),Mt=(_e,q,M,C,_)=>a((C-=_)-3*(M-=_)+3*(q-=_)-(_e-=_),3*M-6*q+3*_e,3*q-3*_e,_e).filter(I=>I>=0&&I<=1),a=(_e,q,M,C)=>{if(0===_e)return((_e,q,M)=>{const C=q*q-4*_e*M;return C<0?[]:[(-q+Math.sqrt(C))/(2*_e),(-q-Math.sqrt(C))/(2*_e)]})(q,M,C);const _=(3*(M/=_e)-(q/=_e)*q)/3,w=(2*q*q*q-9*q*M+27*(C/=_e))/27;if(0===_)return[Math.pow(-w,1/3)];if(0===w)return[Math.sqrt(-_),-Math.sqrt(-_)];const I=Math.pow(w/2,2)+Math.pow(_/3,3);if(0===I)return[Math.pow(w/2,.5)-q/3];if(I>0)return[Math.pow(-w/2+Math.sqrt(I),1/3)-Math.pow(w/2+Math.sqrt(I),1/3)-q/3];const D=Math.sqrt(Math.pow(-_/3,3)),d=Math.acos(-w/(2*Math.sqrt(Math.pow(-_/3,3)))),f=2*Math.pow(D,1/3);return[f*Math.cos(d/3)-q/3,f*Math.cos((d+2*Math.PI)/3)-q/3,f*Math.cos((d+4*Math.PI)/3)-q/3]}},8621:(br,kn,je)=>{"use strict";je.d(kn,{C:()=>a,a:()=>Mt,d:()=>Jt});var F=je(467),j=je(4920);const Mt=function(){var _e=(0,F.A)(function*(q,M,C,_,w,I){var D;if(q)return q.attachViewToDom(M,C,w,_);if(!(I||"string"==typeof C||C instanceof HTMLElement))throw new Error("framework delegate is missing");const d="string"==typeof C?null===(D=M.ownerDocument)||void 0===D?void 0:D.createElement(C):C;return _&&_.forEach(f=>d.classList.add(f)),w&&Object.assign(d,w),M.appendChild(d),yield new Promise(f=>(0,j.c)(d,f)),d});return function(M,C,_,w,I,D){return _e.apply(this,arguments)}}(),Jt=(_e,q)=>{if(q){if(_e)return _e.removeViewFromDom(q.parentElement,q);q.remove()}return Promise.resolve()},a=()=>{let _e,q;return{attachViewToDom:function(){var _=(0,F.A)(function*(w,I,D={},d=[]){var f,h;let p;if(_e=w,I){const v="string"==typeof I?null===(f=_e.ownerDocument)||void 0===f?void 0:f.createElement(I):I;d.forEach(S=>v.classList.add(S)),Object.assign(v,D),_e.appendChild(v),p=v,yield new Promise(S=>(0,j.c)(v,S))}else if(_e.children.length>0&&("ION-MODAL"===_e.tagName||"ION-POPOVER"===_e.tagName)&&!(p=_e.children[0]).classList.contains("ion-delegate-host")){const S=null===(h=_e.ownerDocument)||void 0===h?void 0:h.createElement("div");S.classList.add("ion-delegate-host"),d.forEach(x=>S.classList.add(x)),S.append(..._e.children),_e.appendChild(S),p=S}const g=document.querySelector("ion-app")||document.body;return q=document.createComment("ionic teleport"),_e.parentNode.insertBefore(q,_e),g.appendChild(_e),null!=p?p:_e});return function(I,D){return _.apply(this,arguments)}}(),removeViewFromDom:()=>(_e&&q&&(q.parentNode.insertBefore(_e,q),q.remove()),Promise.resolve())}}},1970:(br,kn,je)=>{"use strict";je.d(kn,{B:()=>Jt,G:()=>a});class j{constructor(q,M,C,_,w){this.id=M,this.name=C,this.disableScroll=w,this.priority=1e6*_+M,this.ctrl=q}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const q=this.ctrl.capture(this.name,this.id,this.priority);return q&&this.disableScroll&&this.ctrl.disableScroll(this.id),q}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Mt{constructor(q,M,C,_){this.id=M,this.disable=C,this.disableScroll=_,this.ctrl=q}block(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.disableGesture(q,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.enableGesture(q,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Jt="backdrop-no-scroll",a=new class F{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(q){var M;return new j(this,this.newID(),q.name,null!==(M=q.priority)&&void 0!==M?M:0,!!q.disableScroll)}createBlocker(q={}){return new Mt(this,this.newID(),q.disable,!!q.disableScroll)}start(q,M,C){return this.canStart(q)?(this.requestedStart.set(M,C),!0):(this.requestedStart.delete(M),!1)}capture(q,M,C){if(!this.start(q,M,C))return!1;const _=this.requestedStart;let w=-1e4;if(_.forEach(I=>{w=Math.max(w,I)}),w===C){this.capturedId=M,_.clear();const I=new CustomEvent("ionGestureCaptured",{detail:{gestureName:q}});return document.dispatchEvent(I),!0}return _.delete(M),!1}release(q){this.requestedStart.delete(q),this.capturedId===q&&(this.capturedId=void 0)}disableGesture(q,M){let C=this.disabledGestures.get(q);void 0===C&&(C=new Set,this.disabledGestures.set(q,C)),C.add(M)}enableGesture(q,M){const C=this.disabledGestures.get(q);void 0!==C&&C.delete(M)}disableScroll(q){this.disabledScroll.add(q),1===this.disabledScroll.size&&document.body.classList.add(Jt)}enableScroll(q){this.disabledScroll.delete(q),0===this.disabledScroll.size&&document.body.classList.remove(Jt)}canStart(q){return!(void 0!==this.capturedId||this.isDisabled(q))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(q){const M=this.disabledGestures.get(q);return!!(M&&M.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(br,kn,je)=>{"use strict";je.r(kn),je.d(kn,{MENU_BACK_BUTTON_PRIORITY:()=>C,OVERLAY_BACK_BUTTON_PRIORITY:()=>M,blockHardwareBackButton:()=>_e,shouldUseCloseWatcher:()=>a,startHardwareBackButton:()=>q});var F=je(467),j=je(8476),Mt=je(4921);je(8393);const a=()=>Mt.c.get("experimentalCloseWatcher",!1)&&void 0!==j.w&&"CloseWatcher"in j.w,_e=()=>{document.addEventListener("backbutton",()=>{})},q=()=>{const _=document;let w=!1;const I=()=>{if(w)return;let D=0,d=[];const f=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(g,v){d.push({priority:g,handler:v,id:D++})}}});_.dispatchEvent(f);const h=function(){var g=(0,F.A)(function*(v){try{if(null!=v&&v.handler){const S=v.handler(p);null!=S&&(yield S)}}catch(S){console.error(S)}});return function(S){return g.apply(this,arguments)}}(),p=()=>{if(d.length>0){let g={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};d.forEach(v=>{v.priority>=g.priority&&(g=v)}),w=!0,d=d.filter(v=>v.id!==g.id),h(g).then(()=>w=!1)}};p()};if(a()){let D;const d=()=>{null==D||D.destroy(),D=new j.w.CloseWatcher,D.onclose=()=>{I(),d()}};d()}else _.addEventListener("backbutton",I)},M=100,C=99},4920:(br,kn,je)=>{"use strict";je.d(kn,{a:()=>M,b:()=>C,c:()=>Mt,d:()=>d,e:()=>v,f:()=>D,g:()=>_,h:()=>a,i:()=>q,j:()=>f,k:()=>Jt,l:()=>I,m:()=>h,n:()=>g,o:()=>S,p:()=>p,r:()=>w,s:()=>x,t:()=>F});const F=(E,N=0)=>new Promise(Z=>{j(E,N,Z)}),j=(E,N=0,Z)=>{let K,z;const G={passive:!0},X=()=>{K&&K()},ee=Y=>{(void 0===Y||E===Y.target)&&(X(),Z(Y))};return E&&(E.addEventListener("webkitTransitionEnd",ee,G),E.addEventListener("transitionend",ee,G),z=setTimeout(ee,N+500),K=()=>{void 0!==z&&(clearTimeout(z),z=void 0),E.removeEventListener("webkitTransitionEnd",ee,G),E.removeEventListener("transitionend",ee,G)}),X},Mt=(E,N)=>{E.componentOnReady?E.componentOnReady().then(Z=>N(Z)):w(()=>N(E))},Jt=E=>void 0!==E.componentOnReady,a=(E,N=[])=>{const Z={};return N.forEach(K=>{E.hasAttribute(K)&&(null!==E.getAttribute(K)&&(Z[K]=E.getAttribute(K)),E.removeAttribute(K))}),Z},_e=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],q=(E,N)=>{let Z=_e;return N&&N.length>0&&(Z=Z.filter(K=>!N.includes(K))),a(E,Z)},M=(E,N,Z,K)=>{var z;if(typeof window<"u"){const G=window,ie=null===(z=null==G?void 0:G.Ionic)||void 0===z?void 0:z.config;if(ie){const X=ie.get("_ael");if(X)return X(E,N,Z,K);if(ie._ael)return ie._ael(E,N,Z,K)}}return E.addEventListener(N,Z,K)},C=(E,N,Z,K)=>{var z;if(typeof window<"u"){const G=window,ie=null===(z=null==G?void 0:G.Ionic)||void 0===z?void 0:z.config;if(ie){const X=ie.get("_rel");if(X)return X(E,N,Z,K);if(ie._rel)return ie._rel(E,N,Z,K)}}return E.removeEventListener(N,Z,K)},_=(E,N=E)=>E.shadowRoot||N,w=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E),I=E=>!!E.shadowRoot&&!!E.attachShadow,D=E=>{if(E.focus(),E.classList.contains("ion-focusable")){const N=E.closest("ion-app");N&&N.setFocus([E])}},d=(E,N,Z,K,z)=>{if(E||I(N)){let G=N.querySelector("input.aux-input");G||(G=N.ownerDocument.createElement("input"),G.type="hidden",G.classList.add("aux-input"),N.appendChild(G)),G.disabled=z,G.name=Z,G.value=K||""}},f=(E,N,Z)=>Math.max(E,Math.min(N,Z)),h=(E,N)=>{if(!E){const Z="ASSERT: "+N;throw console.error(Z),new Error(Z)}},p=E=>{if(E){const N=E.changedTouches;if(N&&N.length>0){const Z=N[0];return{x:Z.clientX,y:Z.clientY}}if(void 0!==E.pageX)return{x:E.pageX,y:E.pageY}}return{x:0,y:0}},g=E=>{const N="rtl"===document.dir;switch(E){case"start":return N;case"end":return!N;default:throw new Error(`"${E}" is not a valid value for [side]. Use "start" or "end" instead.`)}},v=(E,N)=>{const Z=E._original||E;return{_original:E,emit:S(Z.emit.bind(Z),N)}},S=(E,N=0)=>{let Z;return(...K)=>{clearTimeout(Z),Z=setTimeout(E,N,...K)}},x=(E,N)=>{if(null!=E||(E={}),null!=N||(N={}),E===N)return!0;const Z=Object.keys(E);if(Z.length!==Object.keys(N).length)return!1;for(const K of Z)if(!(K in N)||E[K]!==N[K])return!1;return!0}},8607:(br,kn,je)=>{"use strict";je.r(kn),je.d(kn,{GESTURE_CONTROLLER:()=>F.G,createGesture:()=>C});var F=je(1970);const j=(D,d,f,h)=>{const p=Mt(D)?{capture:!!h.capture,passive:!!h.passive}:!!h.capture;let g,v;return D.__zone_symbol__addEventListener?(g="__zone_symbol__addEventListener",v="__zone_symbol__removeEventListener"):(g="addEventListener",v="removeEventListener"),D[g](d,f,p),()=>{D[v](d,f,p)}},Mt=D=>{if(void 0===Jt)try{const d=Object.defineProperty({},"passive",{get:()=>{Jt=!0}});D.addEventListener("optsTest",()=>{},d)}catch{Jt=!1}return!!Jt};let Jt;const q=D=>D instanceof Document?D:D.ownerDocument,C=D=>{let d=!1,f=!1,h=!0,p=!1;const g=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},D),v=g.canStart,S=g.onWillStart,x=g.onStart,E=g.onEnd,N=g.notCaptured,Z=g.onMove,K=g.threshold,z=g.passive,G=g.blurOnStart,ie={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},X=((D,d,f)=>{const h=f*(Math.PI/180),p="x"===D,g=Math.cos(h),v=d*d;let S=0,x=0,E=!1,N=0;return{start(Z,K){S=Z,x=K,N=0,E=!0},detect(Z,K){if(!E)return!1;const z=Z-S,G=K-x,ie=z*z+G*G;if(ie<v)return!1;const X=Math.sqrt(ie),ee=(p?z:G)/X;return N=ee>g?1:ee<-g?-1:0,E=!1,!0},isGesture:()=>0!==N,getDirection:()=>N}})(g.direction,g.threshold,g.maxAngle),ee=F.G.createGesture({name:D.gestureName,priority:D.gesturePriority,disableScroll:D.disableScroll}),xe=()=>{d&&(p=!1,Z&&Z(ie))},ae=()=>!!ee.capture()&&(d=!0,h=!1,ie.startX=ie.currentX,ie.startY=ie.currentY,ie.startTime=ie.currentTime,S?S(ie).then(ne):ne(),!0),ne=()=>{G&&(()=>{if(typeof document<"u"){const le=document.activeElement;null!=le&&le.blur&&le.blur()}})(),x&&x(ie),h=!0},J=()=>{d=!1,f=!1,p=!1,h=!0,ee.release()},ce=le=>{const V=d,me=h;if(J(),me){if(_(ie,le),V)return void(E&&E(ie));N&&N(ie)}},Te=((D,d,f,h,p)=>{let g,v,S,x,E,N,Z,K=0;const z=ge=>{K=Date.now()+2e3,d(ge)&&(!v&&f&&(v=j(D,"touchmove",f,p)),S||(S=j(ge.target,"touchend",ie,p)),x||(x=j(ge.target,"touchcancel",ie,p)))},G=ge=>{K>Date.now()||d(ge)&&(!N&&f&&(N=j(q(D),"mousemove",f,p)),Z||(Z=j(q(D),"mouseup",X,p)))},ie=ge=>{ee(),h&&h(ge)},X=ge=>{Y(),h&&h(ge)},ee=()=>{v&&v(),S&&S(),x&&x(),v=S=x=void 0},Y=()=>{N&&N(),Z&&Z(),N=Z=void 0},ve=()=>{ee(),Y()},xe=(ge=!0)=>{ge?(g||(g=j(D,"touchstart",z,p)),E||(E=j(D,"mousedown",G,p))):(g&&g(),E&&E(),g=E=void 0,ve())};return{enable:xe,stop:ve,destroy:()=>{xe(!1),h=f=d=void 0}}})(g.el,le=>{const V=I(le);return!(f||!h||(w(le,ie),ie.startX=ie.currentX,ie.startY=ie.currentY,ie.startTime=ie.currentTime=V,ie.velocityX=ie.velocityY=ie.deltaX=ie.deltaY=0,ie.event=le,v&&!1===v(ie))||(ee.release(),!ee.start()))&&(f=!0,0===K?ae():(X.start(ie.startX,ie.startY),!0))},le=>{d?!p&&h&&(p=!0,_(ie,le),requestAnimationFrame(xe)):(_(ie,le),X.detect(ie.currentX,ie.currentY)&&(!X.isGesture()||!ae())&&et())},ce,{capture:!1,passive:z}),et=()=>{J(),Te.stop(),N&&N(ie)};return{enable(le=!0){le||(d&&ce(void 0),J()),Te.enable(le)},destroy(){ee.destroy(),Te.destroy()}}},_=(D,d)=>{if(!d)return;const f=D.currentX,h=D.currentY,p=D.currentTime;w(d,D);const g=D.currentX,v=D.currentY,x=(D.currentTime=I(d))-p;if(x>0&&x<100){const N=(v-h)/x;D.velocityX=(g-f)/x*.7+.3*D.velocityX,D.velocityY=.7*N+.3*D.velocityY}D.deltaX=g-D.startX,D.deltaY=v-D.startY,D.event=d},w=(D,d)=>{let f=0,h=0;if(D){const p=D.changedTouches;if(p&&p.length>0){const g=p[0];f=g.clientX,h=g.clientY}else void 0!==D.pageX&&(f=D.pageX,h=D.pageY)}d.currentX=f,d.currentY=h},I=D=>D.timeStamp||Date.now()},6073:(br,kn,je)=>{"use strict";je.d(kn,{m:()=>D});var F=je(467),j=je(8476),Mt=je(8669),Jt=je(4929),a=je(4920),_e=je(4921),q=je(9986);const M=d=>(0,q.c)().duration(d?400:300),C=d=>{let f,h;const p=d.width+8,g=(0,q.c)(),v=(0,q.c)();d.isEndSide?(f=p+"px",h="0px"):(f=-p+"px",h="0px"),g.addElement(d.menuInnerEl).fromTo("transform",`translateX(${f})`,`translateX(${h})`);const x="ios"===(0,_e.b)(d),E=x?.2:.25;return v.addElement(d.backdropEl).fromTo("opacity",.01,E),M(x).addAnimation([g,v])},_=d=>{let f,h;const p=(0,_e.b)(d),g=d.width;d.isEndSide?(f=-g+"px",h=g+"px"):(f=g+"px",h=-g+"px");const v=(0,q.c)().addElement(d.menuInnerEl).fromTo("transform",`translateX(${h})`,"translateX(0px)"),S=(0,q.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${f})`),x=(0,q.c)().addElement(d.backdropEl).fromTo("opacity",.01,.32);return M("ios"===p).addAnimation([v,S,x])},w=d=>{const f=(0,_e.b)(d),h=d.width*(d.isEndSide?-1:1)+"px",p=(0,q.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${h})`);return M("ios"===f).addAnimation(p)},D=(()=>{const d=new Map,f=[],h=function(){var J=(0,F.A)(function*(ce){const Te=yield N(ce,!0);return!!Te&&Te.open()});return function(Te){return J.apply(this,arguments)}}(),p=function(){var J=(0,F.A)(function*(ce){const Te=yield void 0!==ce?N(ce,!0):Z();return void 0!==Te&&Te.close()});return function(Te){return J.apply(this,arguments)}}(),g=function(){var J=(0,F.A)(function*(ce){const Te=yield N(ce,!0);return!!Te&&Te.toggle()});return function(Te){return J.apply(this,arguments)}}(),v=function(){var J=(0,F.A)(function*(ce,Te){const et=yield N(Te);return et&&(et.disabled=!ce),et});return function(Te,et){return J.apply(this,arguments)}}(),S=function(){var J=(0,F.A)(function*(ce,Te){const et=yield N(Te);return et&&(et.swipeGesture=ce),et});return function(Te,et){return J.apply(this,arguments)}}(),x=function(){var J=(0,F.A)(function*(ce){if(null!=ce){const Te=yield N(ce);return void 0!==Te&&Te.isOpen()}return void 0!==(yield Z())});return function(Te){return J.apply(this,arguments)}}(),E=function(){var J=(0,F.A)(function*(ce){const Te=yield N(ce);return!!Te&&!Te.disabled});return function(Te){return J.apply(this,arguments)}}(),N=function(){var J=(0,F.A)(function*(ce,Te=!1){if(yield ne(),"start"===ce||"end"===ce){const le=f.filter(me=>me.side===ce&&!me.disabled);if(le.length>=1)return le.length>1&&Te&&(0,Jt.p)(`menuController queried for a menu on the "${ce}" side, but ${le.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,le.map(me=>me.el)),le[0].el;const V=f.filter(me=>me.side===ce);if(V.length>=1)return V.length>1&&Te&&(0,Jt.p)(`menuController queried for a menu on the "${ce}" side, but ${V.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,V.map(me=>me.el)),V[0].el}else if(null!=ce)return ge(le=>le.menuId===ce);return ge(le=>!le.disabled)||(f.length>0?f[0].el:void 0)});return function(Te){return J.apply(this,arguments)}}(),Z=function(){var J=(0,F.A)(function*(){return yield ne(),ve()});return function(){return J.apply(this,arguments)}}(),K=function(){var J=(0,F.A)(function*(){return yield ne(),xe()});return function(){return J.apply(this,arguments)}}(),z=function(){var J=(0,F.A)(function*(){return yield ne(),ae()});return function(){return J.apply(this,arguments)}}(),G=(J,ce)=>{d.set(J,ce)},ee=function(){var J=(0,F.A)(function*(ce,Te,et){if(ae())return!1;if(Te){const le=yield Z();le&&ce.el!==le&&(yield le.setOpen(!1,!1))}return ce._setOpen(Te,et)});return function(Te,et,le){return J.apply(this,arguments)}}(),ve=()=>ge(J=>J._isOpen),xe=()=>f.map(J=>J.el),ae=()=>f.some(J=>J.isAnimating),ge=J=>{const ce=f.find(J);if(void 0!==ce)return ce.el},ne=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(J=>new Promise(ce=>(0,a.c)(J,ce))));return G("reveal",w),G("push",_),G("overlay",C),null==j.d||j.d.addEventListener("ionBackButton",J=>{const ce=ve();ce&&J.detail.register(Mt.MENU_BACK_BUTTON_PRIORITY,()=>ce.close())}),{registerAnimation:G,get:N,getMenus:K,getOpen:Z,isEnabled:E,swipeGesture:S,isAnimating:z,isOpen:x,enable:v,toggle:g,close:p,open:h,_getOpenSync:ve,_createAnimation:(J,ce)=>{const Te=d.get(J);if(!Te)throw new Error("animation not registered");return Te(ce)},_register:J=>{f.indexOf(J)<0&&f.push(J)},_unregister:J=>{const ce=f.indexOf(J);ce>-1&&f.splice(ce,1)},_setOpen:ee}})()},8393:(br,kn,je)=>{"use strict";je.d(kn,{B:()=>_e,a:()=>Y,b:()=>Pl,c:()=>Qe,d:()=>jn,e:()=>me,f:()=>Mn,g:()=>xt,h:()=>En,i:()=>An,j:()=>ds,k:()=>Xe,r:()=>C,w:()=>Oe});var F=je(467);var Jt=Object.defineProperty,_e={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},q=new WeakMap,M=it=>q.get(it),C=(it,At)=>q.set(At.$lazyInstance$=it,At),w=(it,At)=>At in it,I=(it,At)=>(0,console.error)(it,At),D=new Map,f=new Map,h=[],x="s-id",E="sty-id",N="c-id",K="slot-fb{display:contents}slot-fb[hidden]{display:none}",z="http://www.w3.org/1999/xlink",G=typeof window<"u"?window:{},ie=G.document||{head:{}},ee={$flags$:0,$resourcesUrl$:"",jmp:it=>it(),raf:it=>requestAnimationFrame(it),ael:(it,At,on,mn)=>it.addEventListener(At,on,mn),rel:(it,At,on,mn)=>it.removeEventListener(At,on,mn),ce:(it,At)=>new CustomEvent(it,At)},Y=it=>{Object.assign(ee,it)},xe=(()=>{let it=!1;try{ie.addEventListener("e",null,Object.defineProperty({},"passive",{get(){it=!0}}))}catch{}return it})(),ge=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ne=!1,J=[],ce=[],Te=(it,At)=>on=>{it.push(on),ne||(ne=!0,At&&4&ee.$flags$?V(le):ee.raf(le))},et=it=>{for(let At=0;At<it.length;At++)try{it[At](performance.now())}catch(on){I(on)}it.length=0},le=()=>{et(J),et(ce),(ne=J.length>0)&&ee.raf(le)},V=it=>Promise.resolve(void 0).then(it),me=Te(J,!1),Oe=Te(ce,!0),Xe=it=>{const At=new URL(it,ee.$resourcesUrl$);return At.origin!==G.location.origin?At.href:At.pathname},dt={},Lt=it=>"object"==(it=typeof it)||"function"===it;function kt(it){var At,on,mn;return null!=(mn=null==(on=null==(At=it.head)?void 0:At.querySelector('meta[name="csp-nonce"]'))?void 0:on.getAttribute("content"))?mn:void 0}((it,At)=>{for(var on in At)Jt(it,on,{get:At[on],enumerable:!0})})({},{err:()=>bt,map:()=>Pt,ok:()=>It,unwrap:()=>St,unwrapErr:()=>zt});var It=it=>({isOk:!0,isErr:!1,value:it}),bt=it=>({isOk:!1,isErr:!0,value:it});function Pt(it,At){if(it.isOk){const on=At(it.value);return on instanceof Promise?on.then(mn=>It(mn)):It(on)}if(it.isErr)return bt(it.value);throw"should never get here"}var St=it=>{if(it.isOk)return it.value;throw it.value},zt=it=>{if(it.isErr)return it.value;throw it.value},En=(it,At,...on)=>{let mn=null,Rn=null,Dn=null,ir=!1,dr=!1;const vr=[],xr=Vr=>{for(let ni=0;ni<Vr.length;ni++)mn=Vr[ni],Array.isArray(mn)?xr(mn):null!=mn&&"boolean"!=typeof mn&&((ir="function"!=typeof it&&!Lt(mn))&&(mn=String(mn)),ir&&dr?vr[vr.length-1].$text$+=mn:vr.push(ir?Kn(null,mn):mn),dr=ir)};if(xr(on),At){At.key&&(Rn=At.key),At.name&&(Dn=At.name);{const Vr=At.className||At.class;Vr&&(At.class="object"!=typeof Vr?Vr:Object.keys(Vr).filter(ni=>Vr[ni]).join(" "))}}if("function"==typeof it)return it(null===At?{}:At,vr,Ln);const Xr=Kn(it,null);return Xr.$attrs$=At,vr.length>0&&(Xr.$children$=vr),Xr.$key$=Rn,Xr.$name$=Dn,Xr},Kn=(it,At)=>({$flags$:0,$tag$:it,$text$:At,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Mn={},Ln={forEach:(it,At)=>it.map(nr).forEach(At),map:(it,At)=>it.map(nr).map(At).map(hn)},nr=it=>({vattrs:it.$attrs$,vchildren:it.$children$,vkey:it.$key$,vname:it.$name$,vtag:it.$tag$,vtext:it.$text$}),hn=it=>{if("function"==typeof it.vtag){const on={...it.vattrs};return it.vkey&&(on.key=it.vkey),it.vname&&(on.name=it.vname),En(it.vtag,on,...it.vchildren||[])}const At=Kn(it.vtag,it.vtext);return At.$attrs$=it.vattrs,At.$children$=it.vchildren,At.$key$=it.vkey,At.$name$=it.vname,At},Tn=(it,At,on,mn,Rn,Dn,ir)=>{let dr,vr,xr,Xr;if(1===Dn.nodeType){for(dr=Dn.getAttribute(N),dr&&(vr=dr.split("."),(vr[0]===ir||"0"===vr[0])&&(xr={$flags$:0,$hostId$:vr[0],$nodeId$:vr[1],$depth$:vr[2],$index$:vr[3],$tag$:Dn.tagName.toLowerCase(),$elm$:Dn,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},At.push(xr),Dn.removeAttribute(N),it.$children$||(it.$children$=[]),it.$children$[xr.$index$]=xr,it=xr,mn&&"0"===xr.$depth$&&(mn[xr.$index$]=xr.$elm$))),Xr=Dn.childNodes.length-1;Xr>=0;Xr--)Tn(it,At,on,mn,Rn,Dn.childNodes[Xr],ir);if(Dn.shadowRoot)for(Xr=Dn.shadowRoot.childNodes.length-1;Xr>=0;Xr--)Tn(it,At,on,mn,Rn,Dn.shadowRoot.childNodes[Xr],ir)}else if(8===Dn.nodeType)vr=Dn.nodeValue.split("."),(vr[1]===ir||"0"===vr[1])&&(dr=vr[0],xr={$flags$:0,$hostId$:vr[1],$nodeId$:vr[2],$depth$:vr[3],$index$:vr[4],$elm$:Dn,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===dr?(xr.$elm$=Dn.nextSibling,xr.$elm$&&3===xr.$elm$.nodeType&&(xr.$text$=xr.$elm$.textContent,At.push(xr),Dn.remove(),it.$children$||(it.$children$=[]),it.$children$[xr.$index$]=xr,mn&&"0"===xr.$depth$&&(mn[xr.$index$]=xr.$elm$))):xr.$hostId$===ir&&("s"===dr?(xr.$tag$="slot",Dn["s-sn"]=vr[5]?xr.$name$=vr[5]:"",Dn["s-sr"]=!0,mn&&(xr.$elm$=ie.createElement(xr.$tag$),xr.$name$&&xr.$elm$.setAttribute("name",xr.$name$),Dn.parentNode.insertBefore(xr.$elm$,Dn),Dn.remove(),"0"===xr.$depth$&&(mn[xr.$index$]=xr.$elm$)),on.push(xr),it.$children$||(it.$children$=[]),it.$children$[xr.$index$]=xr):"r"===dr&&(mn?Dn.remove():(Rn["s-cr"]=Dn,Dn["s-cn"]=!0))));else if(it&&"style"===it.$tag$){const Vr=Kn(null,Dn.textContent);Vr.$elm$=Dn,Vr.$index$="0",it.$children$=[Vr]}},ct=(it,At)=>{if(1===it.nodeType){let on=0;for(;on<it.childNodes.length;on++)ct(it.childNodes[on],At);if(it.shadowRoot)for(on=0;on<it.shadowRoot.childNodes.length;on++)ct(it.shadowRoot.childNodes[on],At)}else if(8===it.nodeType){const on=it.nodeValue.split(".");"o"===on[0]&&(At.set(on[1]+"."+on[2],it),it.nodeValue="",it["s-en"]=on[3])}},Qe=it=>h.push(it),xt=it=>M(it).$modeName$,An=it=>M(it).$hostElement$,jn=(it,At,on)=>{const mn=An(it);return{emit:Rn=>rn(mn,At,{bubbles:!!(4&on),composed:!!(2&on),cancelable:!!(1&on),detail:Rn})}},rn=(it,At,on)=>{const mn=ee.ce(At,on);return it.dispatchEvent(mn),mn},bn=new WeakMap,Pn=(it,At,on)=>{let mn=f.get(it);ge&&on?(mn=mn||new CSSStyleSheet,"string"==typeof mn?mn=At:mn.replaceSync(At)):mn=At,f.set(it,mn)},Un=(it,At,on)=>{var mn;const Rn=Xt(At,on),Dn=f.get(Rn);if(it=11===it.nodeType?it:ie,Dn)if("string"==typeof Dn){let dr,ir=bn.get(it=it.head||it);if(ir||bn.set(it,ir=new Set),!ir.has(Rn)){if(it.host&&(dr=it.querySelector(`[${E}="${Rn}"]`)))dr.innerHTML=Dn;else{dr=ie.createElement("style"),dr.innerHTML=Dn;const vr=null!=(mn=ee.$nonce$)?mn:kt(ie);null!=vr&&dr.setAttribute("nonce",vr),it.insertBefore(dr,it.querySelector("link"))}4&At.$flags$&&(dr.innerHTML+=K),ir&&ir.add(Rn)}}else it.adoptedStyleSheets.includes(Dn)||(it.adoptedStyleSheets=[...it.adoptedStyleSheets,Dn]);return Rn},Xt=(it,At)=>"sc-"+(At&&32&it.$flags$?it.$tagName$+"-"+At:it.$tagName$),yn=it=>it.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Kt=(it,At,on,mn,Rn,Dn)=>{if(on!==mn){let ir=w(it,At),dr=At.toLowerCase();if("class"===At){const vr=it.classList,xr=Yn(on),Xr=Yn(mn);vr.remove(...xr.filter(Vr=>Vr&&!Xr.includes(Vr))),vr.add(...Xr.filter(Vr=>Vr&&!xr.includes(Vr)))}else if("style"===At){for(const vr in on)(!mn||null==mn[vr])&&(vr.includes("-")?it.style.removeProperty(vr):it.style[vr]="");for(const vr in mn)(!on||mn[vr]!==on[vr])&&(vr.includes("-")?it.style.setProperty(vr,mn[vr]):it.style[vr]=mn[vr])}else if("key"!==At)if("ref"===At)mn&&mn(it);else if(ir||"o"!==At[0]||"n"!==At[1]){const vr=Lt(mn);if((ir||vr&&null!==mn)&&!Rn)try{if(it.tagName.includes("-"))it[At]=mn;else{const Xr=null==mn?"":mn;"list"===At?ir=!1:(null==on||it[At]!=Xr)&&(it[At]=Xr)}}catch{}let xr=!1;dr!==(dr=dr.replace(/^xlink\:?/,""))&&(At=dr,xr=!0),null==mn||!1===mn?(!1!==mn||""===it.getAttribute(At))&&(xr?it.removeAttributeNS(z,At):it.removeAttribute(At)):(!ir||4&Dn||Rn)&&!vr&&(mn=!0===mn?"":mn,xr?it.setAttributeNS(z,At,mn):it.setAttribute(At,mn))}else if(At="-"===At[2]?At.slice(3):w(G,dr)?dr.slice(2):dr[2]+At.slice(3),on||mn){const vr=At.endsWith(Bt);At=At.replace(nn,""),on&&ee.rel(it,At,on,vr),mn&&ee.ael(it,At,mn,vr)}}},an=/\s/,Yn=it=>it?it.split(an):[],Bt="Capture",nn=new RegExp(Bt+"$"),On=(it,At,on)=>{const mn=11===At.$elm$.nodeType&&At.$elm$.host?At.$elm$.host:At.$elm$,Rn=it&&it.$attrs$||dt,Dn=At.$attrs$||dt;for(const ir of wn(Object.keys(Rn)))ir in Dn||Kt(mn,ir,Rn[ir],void 0,on,At.$flags$);for(const ir of wn(Object.keys(Dn)))Kt(mn,ir,Rn[ir],Dn[ir],on,At.$flags$)};function wn(it){return it.includes("ref")?[...it.filter(At=>"ref"!==At),"ref"]:it}var zn,lr,sr,mr=!1,Mr=!1,te=!1,Ie=!1,Ye=(it,At,on,mn)=>{var Rn;const Dn=At.$children$[on];let dr,vr,xr,ir=0;if(mr||(te=!0,"slot"===Dn.$tag$&&(zn&&mn.classList.add(zn+"-s"),Dn.$flags$|=Dn.$children$?2:1)),null!==Dn.$text$)dr=Dn.$elm$=ie.createTextNode(Dn.$text$);else if(1&Dn.$flags$)dr=Dn.$elm$=ie.createTextNode("");else{if(Ie||(Ie="svg"===Dn.$tag$),dr=Dn.$elm$=ie.createElementNS(Ie?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!mr&&2&Dn.$flags$?"slot-fb":Dn.$tag$),Ie&&"foreignObject"===Dn.$tag$&&(Ie=!1),On(null,Dn,Ie),(it=>null!=it)(zn)&&dr["s-si"]!==zn&&dr.classList.add(dr["s-si"]=zn),Dt(dr,mn),Dn.$children$)for(ir=0;ir<Dn.$children$.length;++ir)vr=Ye(it,Dn,ir,dr),vr&&dr.appendChild(vr);"svg"===Dn.$tag$?Ie=!1:"foreignObject"===dr.tagName&&(Ie=!0)}return dr["s-hn"]=sr,3&Dn.$flags$&&(dr["s-sr"]=!0,dr["s-cr"]=lr,dr["s-sn"]=Dn.$name$||"",dr["s-rf"]=null==(Rn=Dn.$attrs$)?void 0:Rn.ref,xr=it&&it.$children$&&it.$children$[on],xr&&xr.$tag$===Dn.$tag$&&it.$elm$&&A(it.$elm$)),dr},A=it=>{ee.$flags$|=1;const At=it.closest(sr.toLowerCase());if(null!=At){const on=Array.from(At.childNodes).find(Rn=>Rn["s-cr"]),mn=Array.from(it.childNodes);for(const Rn of on?mn.reverse():mn)null!=Rn["s-sh"]&&(pt(At,Rn,null!=on?on:null),Rn["s-sh"]=void 0,te=!0)}ee.$flags$&=-2},k=(it,At)=>{ee.$flags$|=1;const on=Array.from(it.childNodes);if(it["s-sr"]){let mn=it;for(;mn=mn.nextSibling;)mn&&mn["s-sn"]===it["s-sn"]&&mn["s-sh"]===sr&&on.push(mn)}for(let mn=on.length-1;mn>=0;mn--){const Rn=on[mn];Rn["s-hn"]!==sr&&Rn["s-ol"]&&(pt(Ke(Rn),Rn,de(Rn)),Rn["s-ol"].remove(),Rn["s-ol"]=void 0,Rn["s-sh"]=void 0,te=!0),At&&k(Rn,At)}ee.$flags$&=-2},B=(it,At,on,mn,Rn,Dn)=>{let dr,ir=it["s-cr"]&&it["s-cr"].parentNode||it;for(ir.shadowRoot&&ir.tagName===sr&&(ir=ir.shadowRoot);Rn<=Dn;++Rn)mn[Rn]&&(dr=Ye(null,on,Rn,it),dr&&(mn[Rn].$elm$=dr,pt(ir,dr,de(At))))},L=(it,At,on)=>{for(let mn=At;mn<=on;++mn){const Rn=it[mn];if(Rn){const Dn=Rn.$elm$;$e(Rn),Dn&&(Mr=!0,Dn["s-ol"]?Dn["s-ol"].remove():k(Dn,!0),Dn.remove())}}},H=(it,At,on=!1)=>it.$tag$===At.$tag$&&("slot"===it.$tag$?it.$name$===At.$name$:!!on||it.$key$===At.$key$),de=it=>it&&it["s-ol"]||it,Ke=it=>(it["s-ol"]?it["s-ol"]:it).parentNode,Ve=(it,At,on=!1)=>{const mn=At.$elm$=it.$elm$,Rn=it.$children$,Dn=At.$children$,ir=At.$tag$,dr=At.$text$;let vr;null===dr?(Ie="svg"===ir||"foreignObject"!==ir&&Ie,"slot"!==ir||mr?On(it,At,Ie):it.$name$!==At.$name$&&(At.$elm$["s-sn"]=At.$name$||"",A(At.$elm$.parentElement)),null!==Rn&&null!==Dn?((it,At,on,mn,Rn=!1)=>{let Vi,hs,Dn=0,ir=0,dr=0,vr=0,xr=At.length-1,Xr=At[0],Vr=At[xr],ni=mn.length-1,oi=mn[0],Ii=mn[ni];for(;Dn<=xr&&ir<=ni;)if(null==Xr)Xr=At[++Dn];else if(null==Vr)Vr=At[--xr];else if(null==oi)oi=mn[++ir];else if(null==Ii)Ii=mn[--ni];else if(H(Xr,oi,Rn))Ve(Xr,oi,Rn),Xr=At[++Dn],oi=mn[++ir];else if(H(Vr,Ii,Rn))Ve(Vr,Ii,Rn),Vr=At[--xr],Ii=mn[--ni];else if(H(Xr,Ii,Rn))("slot"===Xr.$tag$||"slot"===Ii.$tag$)&&k(Xr.$elm$.parentNode,!1),Ve(Xr,Ii,Rn),pt(it,Xr.$elm$,Vr.$elm$.nextSibling),Xr=At[++Dn],Ii=mn[--ni];else if(H(Vr,oi,Rn))("slot"===Xr.$tag$||"slot"===Ii.$tag$)&&k(Vr.$elm$.parentNode,!1),Ve(Vr,oi,Rn),pt(it,Vr.$elm$,Xr.$elm$),Vr=At[--xr],oi=mn[++ir];else{for(dr=-1,vr=Dn;vr<=xr;++vr)if(At[vr]&&null!==At[vr].$key$&&At[vr].$key$===oi.$key$){dr=vr;break}dr>=0?(hs=At[dr],hs.$tag$!==oi.$tag$?Vi=Ye(At&&At[ir],on,dr,it):(Ve(hs,oi,Rn),At[dr]=void 0,Vi=hs.$elm$),oi=mn[++ir]):(Vi=Ye(At&&At[ir],on,ir,it),oi=mn[++ir]),Vi&&pt(Ke(Xr.$elm$),Vi,de(Xr.$elm$))}Dn>xr?B(it,null==mn[ni+1]?null:mn[ni+1].$elm$,on,mn,ir,ni):ir>ni&&L(At,Dn,xr)})(mn,Rn,At,Dn,on):null!==Dn?(null!==it.$text$&&(mn.textContent=""),B(mn,null,At,Dn,0,Dn.length-1)):null!==Rn&&L(Rn,0,Rn.length-1),Ie&&"svg"===ir&&(Ie=!1)):(vr=mn["s-cr"])?vr.parentNode.textContent=dr:it.$text$!==dr&&(mn.data=dr)},vt=it=>{const At=it.childNodes;for(const on of At)if(1===on.nodeType){if(on["s-sr"]){const mn=on["s-sn"];on.hidden=!1;for(const Rn of At)if(Rn!==on)if(Rn["s-hn"]!==on["s-hn"]||""!==mn){if(1===Rn.nodeType&&(mn===Rn.getAttribute("slot")||mn===Rn["s-sn"])||3===Rn.nodeType&&mn===Rn["s-sn"]){on.hidden=!0;break}}else if(1===Rn.nodeType||3===Rn.nodeType&&""!==Rn.textContent.trim()){on.hidden=!0;break}}vt(on)}},Ft=[],_n=it=>{let At,on,mn;for(const Rn of it.childNodes){if(Rn["s-sr"]&&(At=Rn["s-cr"])&&At.parentNode){on=At.parentNode.childNodes;const Dn=Rn["s-sn"];for(mn=on.length-1;mn>=0;mn--)if(At=on[mn],!(At["s-cn"]||At["s-nr"]||At["s-hn"]===Rn["s-hn"]||At["s-sh"]&&At["s-sh"]===Rn["s-hn"]))if(He(At,Dn)){let ir=Ft.find(dr=>dr.$nodeToRelocate$===At);Mr=!0,At["s-sn"]=At["s-sn"]||Dn,ir?(ir.$nodeToRelocate$["s-sh"]=Rn["s-hn"],ir.$slotRefNode$=Rn):(At["s-sh"]=Rn["s-hn"],Ft.push({$slotRefNode$:Rn,$nodeToRelocate$:At})),At["s-sr"]&&Ft.map(dr=>{He(dr.$nodeToRelocate$,At["s-sn"])&&(ir=Ft.find(vr=>vr.$nodeToRelocate$===At),ir&&!dr.$slotRefNode$&&(dr.$slotRefNode$=ir.$slotRefNode$))})}else Ft.some(ir=>ir.$nodeToRelocate$===At)||Ft.push({$nodeToRelocate$:At})}1===Rn.nodeType&&_n(Rn)}},He=(it,At)=>1===it.nodeType?null===it.getAttribute("slot")&&""===At||it.getAttribute("slot")===At:it["s-sn"]===At||""===At,$e=it=>{it.$attrs$&&it.$attrs$.ref&&it.$attrs$.ref(null),it.$children$&&it.$children$.map($e)},pt=(it,At,on)=>{const mn=null==it?void 0:it.insertBefore(At,on);return Dt(At,it),mn},ot=it=>{const At=[];return it&&At.push(...it["s-scs"]||[],it["s-si"],it["s-sc"],...ot(it.parentElement)),At},Dt=(it,At,on=!1)=>{var mn;if(it&&At&&1===it.nodeType){const Rn=new Set(ot(At).filter(Boolean));if(Rn.size&&(null==(mn=it.classList)||mn.add(...it["s-scs"]=[...Rn]),it["s-ol"]||on))for(const Dn of Array.from(it.childNodes))Dt(Dn,it,!0)}},Hn=(it,At)=>{At&&!it.$onRenderResolve$&&At["s-p"]&&At["s-p"].push(new Promise(on=>it.$onRenderResolve$=on))},cr=(it,At)=>{if(it.$flags$|=16,!(4&it.$flags$))return Hn(it,it.$ancestorComponent$),Oe(()=>Pr(it,At));it.$flags$|=512},Pr=(it,At)=>{const Rn=it.$lazyInstance$;if(!Rn)throw new Error(`Can't render component <${it.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let Dn;return At&&(it.$flags$|=256,it.$queuedListeners$&&(it.$queuedListeners$.map(([ir,dr])=>vs(Rn,ir,dr)),it.$queuedListeners$=void 0),Dn=vs(Rn,"componentWillLoad")),Dn=Ui(Dn,()=>vs(Rn,"componentWillRender")),Ui(Dn,()=>Us(it,Rn,At))},Ui=(it,At)=>ji(it)?it.then(At).catch(on=>{console.error(on),At()}):At(),ji=it=>it instanceof Promise||it&&it.then&&"function"==typeof it.then,Us=function(){var it=(0,F.A)(function*(At,on,mn){var Rn;const Dn=At.$hostElement$,dr=Dn["s-rc"];mn&&(it=>{const At=it.$cmpMeta$,on=it.$hostElement$,mn=At.$flags$,Dn=Un(on.shadowRoot?on.shadowRoot:on.getRootNode(),At,it.$modeName$);10&mn&&(on["s-sc"]=Dn,on.classList.add(Dn+"-h"),2&mn&&on.classList.add(Dn+"-s"))})(At);xs(At,on,Dn,mn),dr&&(dr.map(xr=>xr()),Dn["s-rc"]=void 0);{const xr=null!=(Rn=Dn["s-p"])?Rn:[],Xr=()=>wi(At);0===xr.length?Xr():(Promise.all(xr).then(Xr),At.$flags$|=4,xr.length=0)}});return function(on,mn,Rn){return it.apply(this,arguments)}}(),xs=(it,At,on,mn)=>{try{At=At.render&&At.render(),it.$flags$&=-17,it.$flags$|=2,((it,At,on=!1)=>{var mn,Rn,Dn,ir,dr;const vr=it.$hostElement$,xr=it.$cmpMeta$,Xr=it.$vnode$||Kn(null,null),Vr=(it=>it&&it.$tag$===Mn)(At)?At:En(null,null,At);if(sr=vr.tagName,xr.$attrsToReflect$&&(Vr.$attrs$=Vr.$attrs$||{},xr.$attrsToReflect$.map(([ni,oi])=>Vr.$attrs$[oi]=vr[ni])),on&&Vr.$attrs$)for(const ni of Object.keys(Vr.$attrs$))vr.hasAttribute(ni)&&!["key","ref","style","class"].includes(ni)&&(Vr.$attrs$[ni]=vr[ni]);if(Vr.$tag$=null,Vr.$flags$|=4,it.$vnode$=Vr,Vr.$elm$=Xr.$elm$=vr.shadowRoot||vr,zn=vr["s-sc"],mr=!!(1&xr.$flags$),lr=vr["s-cr"],Mr=!1,Ve(Xr,Vr,on),ee.$flags$|=1,te){_n(Vr.$elm$);for(const ni of Ft){const oi=ni.$nodeToRelocate$;if(!oi["s-ol"]){const Ii=ie.createTextNode("");Ii["s-nr"]=oi,pt(oi.parentNode,oi["s-ol"]=Ii,oi)}}for(const ni of Ft){const oi=ni.$nodeToRelocate$,Ii=ni.$slotRefNode$;if(Ii){const Vi=Ii.parentNode;let hs=Ii.nextSibling;if(hs&&1===hs.nodeType){let Pi=null==(mn=oi["s-ol"])?void 0:mn.previousSibling;for(;Pi;){let Ys=null!=(Rn=Pi["s-nr"])?Rn:null;if(Ys&&Ys["s-sn"]===oi["s-sn"]&&Vi===Ys.parentNode){for(Ys=Ys.nextSibling;Ys===oi||null!=Ys&&Ys["s-sr"];)Ys=null==Ys?void 0:Ys.nextSibling;if(!Ys||!Ys["s-nr"]){hs=Ys;break}}Pi=Pi.previousSibling}}(!hs&&Vi!==oi.parentNode||oi.nextSibling!==hs)&&oi!==hs&&(pt(Vi,oi,hs),1===oi.nodeType&&(oi.hidden=null!=(Dn=oi["s-ih"])&&Dn)),oi&&"function"==typeof Ii["s-rf"]&&Ii["s-rf"](oi)}else 1===oi.nodeType&&(on&&(oi["s-ih"]=null!=(ir=oi.hidden)&&ir),oi.hidden=!0)}}if(Mr&&vt(Vr.$elm$),ee.$flags$&=-2,Ft.length=0,2&xr.$flags$)for(const ni of Vr.$elm$.childNodes)ni["s-hn"]!==sr&&!ni["s-sh"]&&(on&&null==ni["s-ih"]&&(ni["s-ih"]=null!=(dr=ni.hidden)&&dr),ni.hidden=!0);lr=void 0})(it,At,mn)}catch(Rn){I(Rn,it.$hostElement$)}return null},wi=it=>{const on=it.$hostElement$,Rn=it.$lazyInstance$,Dn=it.$ancestorComponent$;vs(Rn,"componentDidRender"),64&it.$flags$?vs(Rn,"componentDidUpdate"):(it.$flags$|=64,Vs(on),vs(Rn,"componentDidLoad"),it.$onReadyResolve$(on),Dn||$s()),it.$onInstanceResolve$(on),it.$onRenderResolve$&&(it.$onRenderResolve$(),it.$onRenderResolve$=void 0),512&it.$flags$&&V(()=>cr(it,!1)),it.$flags$&=-517},ds=it=>{{const At=M(it),on=At.$hostElement$.isConnected;return on&&2==(18&At.$flags$)&&cr(At,!1),on}},$s=it=>{Vs(ie.documentElement),V(()=>rn(G,"appload",{detail:{namespace:"ionic"}}))},vs=(it,At,on)=>{if(it&&it[At])try{return it[At](on)}catch(mn){I(mn)}},Vs=it=>it.classList.add(("hydrated","hydrated")),Vo=(it,At,on)=>{var mn,Rn;const Dn=it.prototype;if(At.$members$||At.$watchers$||it.watchers){it.watchers&&!At.$watchers$&&(At.$watchers$=it.watchers);const ir=Object.entries(null!=(mn=At.$members$)?mn:{});if(ir.map(([dr,[vr]])=>{31&vr||2&on&&32&vr?Object.defineProperty(Dn,dr,{get(){return((it,At)=>M(this).$instanceValues$.get(At))(0,dr)},set(xr){((it,At,on,mn)=>{const Rn=M(it);if(!Rn)throw new Error(`Couldn't find host element for "${mn.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Dn=Rn.$hostElement$,ir=Rn.$instanceValues$.get(At),dr=Rn.$flags$,vr=Rn.$lazyInstance$;on=((it,At)=>null==it||Lt(it)?it:4&At?"false"!==it&&(""===it||!!it):2&At?parseFloat(it):1&At?String(it):it)(on,mn.$members$[At][0]);const xr=Number.isNaN(ir)&&Number.isNaN(on);if((!(8&dr)||void 0===ir)&&on!==ir&&!xr&&(Rn.$instanceValues$.set(At,on),vr)){if(mn.$watchers$&&128&dr){const Vr=mn.$watchers$[At];Vr&&Vr.map(ni=>{try{vr[ni](on,ir,At)}catch(oi){I(oi,Dn)}})}2==(18&dr)&&cr(Rn,!1)}})(this,dr,xr,At)},configurable:!0,enumerable:!0}):1&on&&64&vr&&Object.defineProperty(Dn,dr,{value(...xr){var Xr;const Vr=M(this);return null==(Xr=null==Vr?void 0:Vr.$onInstancePromise$)?void 0:Xr.then(()=>{var ni;return null==(ni=Vr.$lazyInstance$)?void 0:ni[dr](...xr)})}})}),1&on){const dr=new Map;Dn.attributeChangedCallback=function(vr,xr,Xr){ee.jmp(()=>{var Vr;const ni=dr.get(vr);if(this.hasOwnProperty(ni))Xr=this[ni],delete this[ni];else{if(Dn.hasOwnProperty(ni)&&"number"==typeof this[ni]&&this[ni]==Xr)return;if(null==ni){const oi=M(this),Ii=null==oi?void 0:oi.$flags$;if(Ii&&!(8&Ii)&&128&Ii&&Xr!==xr){const Vi=oi.$lazyInstance$,hs=null==(Vr=At.$watchers$)?void 0:Vr[vr];null==hs||hs.forEach(Pi=>{null!=Vi[Pi]&&Vi[Pi].call(Vi,Xr,xr,vr)})}return}}this[ni]=(null!==Xr||"boolean"!=typeof this[ni])&&Xr})},it.observedAttributes=Array.from(new Set([...Object.keys(null!=(Rn=At.$watchers$)?Rn:{}),...ir.filter(([vr,xr])=>15&xr[0]).map(([vr,xr])=>{var Xr;const Vr=xr[1]||vr;return dr.set(Vr,vr),512&xr[0]&&(null==(Xr=At.$attrsToReflect$)||Xr.push([vr,Vr])),Vr})]))}}return it},ea=function(){var it=(0,F.A)(function*(At,on,mn,Rn){let Dn;if(!(32&on.$flags$)){if(on.$flags$|=32,mn.$lazyBundleId$){const xr=((it,At,on)=>{const mn=it.$tagName$.replace(/-/g,"_"),Rn=it.$lazyBundleId$;if(!Rn)return;const Dn=D.get(Rn);return Dn?Dn[mn]:je(8996)(`./${Rn}.entry.js`).then(ir=>(D.set(Rn,ir),ir[mn]),I)})(mn);if(xr&&"then"in xr){const Vr=()=>{};Dn=yield xr,Vr()}else Dn=xr;if(!Dn)throw new Error(`Constructor for "${mn.$tagName$}#${on.$modeName$}" was not found`);Dn.isProxied||(mn.$watchers$=Dn.watchers,Vo(Dn,mn,2),Dn.isProxied=!0);const Xr=()=>{};on.$flags$|=8;try{new Dn(on)}catch(Vr){I(Vr)}on.$flags$&=-9,on.$flags$|=128,Xr(),ta(on.$lazyInstance$)}else Dn=At.constructor,customElements.whenDefined(At.localName).then(()=>on.$flags$|=128);if(Dn&&Dn.style){let xr;"string"==typeof Dn.style?xr=Dn.style:"string"!=typeof Dn.style&&(on.$modeName$=(it=>h.map(At=>At(it)).find(At=>!!At))(At),on.$modeName$&&(xr=Dn.style[on.$modeName$]));const Xr=Xt(mn,on.$modeName$);if(!f.has(Xr)){const Vr=()=>{};Pn(Xr,xr,!!(1&mn.$flags$)),Vr()}}}const ir=on.$ancestorComponent$,dr=()=>cr(on,!0);ir&&ir["s-rc"]?ir["s-rc"].push(dr):dr()});return function(on,mn,Rn,Dn){return it.apply(this,arguments)}}(),ta=it=>{vs(it,"connectedCallback")},eo=it=>{const At=it["s-cr"]=ie.createComment("");At["s-cn"]=!0,pt(it,At,it.firstChild)},ca=it=>{vs(it,"disconnectedCallback")},_o=function(){var it=(0,F.A)(function*(At){if(!(1&ee.$flags$)){const on=M(At);on.$rmListeners$&&(on.$rmListeners$.map(mn=>mn()),on.$rmListeners$=void 0),null!=on&&on.$lazyInstance$?ca(on.$lazyInstance$):null!=on&&on.$onReadyPromise$&&on.$onReadyPromise$.then(()=>ca(on.$lazyInstance$))}});return function(on){return it.apply(this,arguments)}}(),Wa=it=>{const At=it.cloneNode;it.cloneNode=function(on){const mn=this,Rn=mn.shadowRoot&&true,Dn=At.call(mn,!!Rn&&on);if(!Rn&&on){let dr,vr,ir=0;const xr=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;ir<mn.childNodes.length;ir++)dr=mn.childNodes[ir]["s-nr"],vr=xr.every(Xr=>!mn.childNodes[ir][Xr]),dr&&(Dn.__appendChild?Dn.__appendChild(dr.cloneNode(!0)):Dn.appendChild(dr.cloneNode(!0))),vr&&Dn.appendChild(mn.childNodes[ir].cloneNode(!0))}return Dn}},Ne=it=>{it.__appendChild=it.appendChild,it.appendChild=function(At){const on=At["s-sn"]=ba(At),mn=ll(this.childNodes,on,this.tagName);if(mn){const Rn=Rl(mn,on),Dn=Rn[Rn.length-1],ir=pt(Dn.parentNode,At,Dn.nextSibling);return vt(this),ir}return this.__appendChild(At)}},ut=it=>{it.__removeChild=it.removeChild,it.removeChild=function(At){if(At&&typeof At["s-sn"]<"u"){const on=ll(this.childNodes,At["s-sn"],this.tagName);if(on){const Rn=Rl(on,At["s-sn"]).find(Dn=>Dn===At);if(Rn)return Rn.remove(),void vt(this)}}return this.__removeChild(At)}},Nt=it=>{const At=it.prepend;it.prepend=function(...on){on.forEach(mn=>{"string"==typeof mn&&(mn=this.ownerDocument.createTextNode(mn));const Rn=mn["s-sn"]=ba(mn),Dn=ll(this.childNodes,Rn,this.tagName);if(Dn){const ir=document.createTextNode("");ir["s-nr"]=mn,Dn["s-cr"].parentNode.__appendChild(ir),mn["s-ol"]=ir;const vr=Rl(Dn,Rn)[0];return pt(vr.parentNode,mn,vr.nextSibling)}return 1===mn.nodeType&&mn.getAttribute("slot")&&(mn.hidden=!0),At.call(this,mn)})}},Be=it=>{it.append=function(...At){At.forEach(on=>{"string"==typeof on&&(on=this.ownerDocument.createTextNode(on)),this.appendChild(on)})}},Vt=it=>{const At=it.insertAdjacentHTML;it.insertAdjacentHTML=function(on,mn){if("afterbegin"!==on&&"beforeend"!==on)return At.call(this,on,mn);const Rn=this.ownerDocument.createElement("_");let Dn;if(Rn.innerHTML=mn,"afterbegin"===on)for(;Dn=Rn.firstChild;)this.prepend(Dn);else if("beforeend"===on)for(;Dn=Rn.firstChild;)this.append(Dn)}},In=it=>{it.insertAdjacentText=function(At,on){this.insertAdjacentHTML(At,on)}},ts=it=>{const At=it.insertAdjacentElement;it.insertAdjacentElement=function(on,mn){return"afterbegin"!==on&&"beforeend"!==on?At.call(this,on,mn):"afterbegin"===on?(this.prepend(mn),mn):("beforeend"===on&&this.append(mn),mn)}},Gs=it=>{const At=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(it,"__textContent",At),Object.defineProperty(it,"textContent",{get(){return" "+Aa(this.childNodes).map(Rn=>{var Dn,ir;const dr=[];let vr=Rn.nextSibling;for(;vr&&vr["s-sn"]===Rn["s-sn"];)(3===vr.nodeType||1===vr.nodeType)&&dr.push(null!=(ir=null==(Dn=vr.textContent)?void 0:Dn.trim())?ir:""),vr=vr.nextSibling;return dr.filter(xr=>""!==xr).join(" ")}).filter(Rn=>""!==Rn).join(" ")+" "},set(on){Aa(this.childNodes).forEach(Rn=>{let Dn=Rn.nextSibling;for(;Dn&&Dn["s-sn"]===Rn["s-sn"];){const ir=Dn;Dn=Dn.nextSibling,ir.remove()}if(""===Rn["s-sn"]){const ir=this.ownerDocument.createTextNode(on);ir["s-sn"]="",pt(Rn.parentElement,ir,Rn.nextSibling)}else Rn.remove()})}})},Go=(it,At)=>{class on extends Array{item(Rn){return this[Rn]}}if(8&At.$flags$){const mn=it.__lookupGetter__("childNodes");Object.defineProperty(it,"children",{get(){return this.childNodes.map(Rn=>1===Rn.nodeType)}}),Object.defineProperty(it,"childElementCount",{get:()=>it.children.length}),Object.defineProperty(it,"childNodes",{get(){const Rn=mn.call(this);if(!(1&ee.$flags$)&&2&M(this).$flags$){const Dn=new on;for(let ir=0;ir<Rn.length;ir++){const dr=Rn[ir]["s-nr"];dr&&Dn.push(dr)}return Dn}return on.from(Rn)}})}},Aa=it=>{const At=[];for(const on of Array.from(it))on["s-sr"]&&At.push(on),At.push(...Aa(on.childNodes));return At},ba=it=>it["s-sn"]||1===it.nodeType&&it.getAttribute("slot")||"",ll=(it,At,on)=>{let Rn,mn=0;for(;mn<it.length;mn++)if(Rn=it[mn],Rn["s-sr"]&&Rn["s-sn"]===At&&Rn["s-hn"]===on||(Rn=ll(Rn.childNodes,At,on),Rn))return Rn;return null},Rl=(it,At)=>{const on=[it];for(;(it=it.nextSibling)&&it["s-sn"]===At;)on.push(it);return on},Pl=(it,At={})=>{var on;const Rn=[],Dn=At.exclude||[],ir=G.customElements,dr=ie.head,vr=dr.querySelector("meta[charset]"),xr=ie.createElement("style"),Xr=[],Vr=ie.querySelectorAll(`[${E}]`);let ni,oi=!0,Ii=0;for(Object.assign(ee,At),ee.$resourcesUrl$=new URL(At.resourcesUrl||"./",ie.baseURI).href,ee.$flags$|=2;Ii<Vr.length;Ii++)Pn(Vr[Ii].getAttribute(E),yn(Vr[Ii].innerHTML),!0);let Vi=!1;if(it.map(hs=>{hs[1].map(Pi=>{var Ys;const Ir={$flags$:Pi[0],$tagName$:Pi[1],$members$:Pi[2],$listeners$:Pi[3]};4&Ir.$flags$&&(Vi=!0),Ir.$members$=Pi[2],Ir.$listeners$=Pi[3],Ir.$attrsToReflect$=[],Ir.$watchers$=null!=(Ys=Pi[4])?Ys:{};const na=Ir.$tagName$,Ca=class extends HTMLElement{constructor(Hs){if(super(Hs),this.hasRegisteredEventListeners=!1,((it,At)=>{const on={$flags$:0,$hostElement$:it,$cmpMeta$:At,$instanceValues$:new Map};on.$onInstancePromise$=new Promise(mn=>on.$onInstanceResolve$=mn),on.$onReadyPromise$=new Promise(mn=>on.$onReadyResolve$=mn),it["s-p"]=[],it["s-rc"]=[],q.set(it,on)})(Hs=this,Ir),1&Ir.$flags$)if(Hs.shadowRoot){if("open"!==Hs.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Ir.$tagName$}! Mode is set to ${Hs.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else Hs.attachShadow({mode:"open",delegatesFocus:!!(16&Ir.$flags$)})}connectedCallback(){const Hs=M(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,Ol(this,Hs,Ir.$listeners$)),ni&&(clearTimeout(ni),ni=null),oi?Xr.push(this):ee.jmp(()=>(it=>{if(!(1&ee.$flags$)){const At=M(it),on=At.$cmpMeta$,mn=()=>{};if(1&At.$flags$)Ol(it,At,on.$listeners$),null!=At&&At.$lazyInstance$?ta(At.$lazyInstance$):null!=At&&At.$onReadyPromise$&&At.$onReadyPromise$.then(()=>ta(At.$lazyInstance$));else{let Rn;if(At.$flags$|=1,Rn=it.getAttribute(x),Rn){if(1&on.$flags$){const Dn=Un(it.shadowRoot,on,it.getAttribute("s-mode"));it.classList.remove(Dn+"-h",Dn+"-s")}((it,At,on,mn)=>{const Dn=it.shadowRoot,ir=[],vr=Dn?[]:null,xr=mn.$vnode$=Kn(At,null);ee.$orgLocNodes$||ct(ie.body,ee.$orgLocNodes$=new Map),it[x]=on,it.removeAttribute(x),Tn(xr,ir,[],vr,it,it,on),ir.map(Xr=>{const Vr=Xr.$hostId$+"."+Xr.$nodeId$,ni=ee.$orgLocNodes$.get(Vr),oi=Xr.$elm$;ni&&""===ni["s-en"]&&ni.parentNode.insertBefore(oi,ni.nextSibling),Dn||(oi["s-hn"]=At,ni&&(oi["s-ol"]=ni,oi["s-ol"]["s-nr"]=oi)),ee.$orgLocNodes$.delete(Vr)}),Dn&&vr.map(Xr=>{Xr&&Dn.appendChild(Xr)})})(it,on.$tagName$,Rn,At)}Rn||12&on.$flags$&&eo(it);{let Dn=it;for(;Dn=Dn.parentNode||Dn.host;)if(1===Dn.nodeType&&Dn.hasAttribute("s-id")&&Dn["s-p"]||Dn["s-p"]){Hn(At,At.$ancestorComponent$=Dn);break}}on.$members$&&Object.entries(on.$members$).map(([Dn,[ir]])=>{if(31&ir&&it.hasOwnProperty(Dn)){const dr=it[Dn];delete it[Dn],it[Dn]=dr}}),ea(it,At,on)}mn()}})(this))}disconnectedCallback(){ee.jmp(()=>_o(this))}componentOnReady(){return M(this).$onReadyPromise$}};2&Ir.$flags$&&((it,At)=>{Wa(it),Ne(it),Be(it),Nt(it),ts(it),Vt(it),In(it),Gs(it),Go(it,At),ut(it)})(Ca.prototype,Ir),Ir.$lazyBundleId$=hs[0],!Dn.includes(na)&&!ir.get(na)&&(Rn.push(na),ir.define(na,Vo(Ca,Ir,1)))})}),Rn.length>0&&(Vi&&(xr.textContent+=K),xr.textContent+=Rn.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",xr.innerHTML.length)){xr.setAttribute("data-styles","");const hs=null!=(on=ee.$nonce$)?on:kt(ie);null!=hs&&xr.setAttribute("nonce",hs),dr.insertBefore(xr,vr?vr.nextSibling:dr.firstChild)}oi=!1,Xr.length?Xr.map(hs=>hs.connectedCallback()):ee.jmp(()=>ni=setTimeout($s,30))},Ol=(it,At,on,mn)=>{on&&on.map(([Rn,Dn,ir])=>{const dr=No(it,Rn),vr=Io(At,ir),xr=ao(Rn);ee.ael(dr,Dn,vr,xr),(At.$rmListeners$=At.$rmListeners$||[]).push(()=>ee.rel(dr,Dn,vr,xr))})},Io=(it,At)=>on=>{var mn;try{256&it.$flags$?null==(mn=it.$lazyInstance$)||mn[At](on):(it.$queuedListeners$=it.$queuedListeners$||[]).push([At,on])}catch(Rn){I(Rn)}},No=(it,At)=>4&At?ie:8&At?G:16&At?ie.body:it,ao=it=>xe?{passive:!!(1&it),capture:!!(2&it)}:!!(2&it)},1331:(br,kn,je)=>{"use strict";je.d(kn,{b:()=>M,c:()=>C,d:()=>_,e:()=>ve,g:()=>ge,l:()=>ee,s:()=>xe,t:()=>g,w:()=>Y});var F=je(467),j=je(4921),Mt=je(8393),Jt=je(4929),a=je(4920);const M="ionViewWillLeave",C="ionViewDidLeave",_="ionViewWillUnload",w=ne=>{ne.tabIndex=-1,ne.focus()},I=ne=>null!==ne.offsetParent,d="ion-last-focus",p_saveViewFocus=ce=>{if(j.c.get("focusManagerPriority",!1)){const et=document.activeElement;null!==et&&null!=ce&&ce.contains(et)&&et.setAttribute(d,"true")}},p_setViewFocus=ce=>{const Te=j.c.get("focusManagerPriority",!1);if(Array.isArray(Te)&&!ce.contains(document.activeElement)){const et=ce.querySelector(`[${d}]`);if(et&&I(et))return void w(et);for(const le of Te)switch(le){case"content":const V=ce.querySelector('main, [role="main"]');if(V&&I(V))return void w(V);break;case"heading":const me=ce.querySelector('h1, [role="heading"][aria-level="1"]');if(me&&I(me))return void w(me);break;case"banner":const Oe=ce.querySelector('header, [role="banner"]');if(Oe&&I(Oe))return void w(Oe);break;default:(0,Jt.p)(`Unrecognized focus manager priority value ${le}`)}w(ce)}},g=ne=>new Promise((J,ce)=>{(0,Mt.w)(()=>{v(ne),S(ne).then(Te=>{Te.animation&&Te.animation.destroy(),x(ne),J(Te)},Te=>{x(ne),ce(Te)})})}),v=ne=>{const J=ne.enteringEl,ce=ne.leavingEl;p_saveViewFocus(ce),ae(J,ce,ne.direction),ne.showGoBack?J.classList.add("can-go-back"):J.classList.remove("can-go-back"),xe(J,!1),J.style.setProperty("pointer-events","none"),ce&&(xe(ce,!1),ce.style.setProperty("pointer-events","none"))},S=function(){var ne=(0,F.A)(function*(J){const ce=yield E(J);return ce&&Mt.B.isBrowser?N(ce,J):Z(J)});return function(ce){return ne.apply(this,arguments)}}(),x=ne=>{const J=ne.enteringEl,ce=ne.leavingEl;J.classList.remove("ion-page-invisible"),J.style.removeProperty("pointer-events"),void 0!==ce&&(ce.classList.remove("ion-page-invisible"),ce.style.removeProperty("pointer-events")),p_setViewFocus(J)},E=function(){var ne=(0,F.A)(function*(J){return J.leavingEl&&J.animated&&0!==J.duration?J.animationBuilder?J.animationBuilder:"ios"===J.mode?(yield Promise.resolve().then(je.bind(je,9856))).iosTransitionAnimation:(yield Promise.resolve().then(je.bind(je,361))).mdTransitionAnimation:void 0});return function(ce){return ne.apply(this,arguments)}}(),N=function(){var ne=(0,F.A)(function*(J,ce){yield K(ce,!0);const Te=J(ce.baseEl,ce);ie(ce.enteringEl,ce.leavingEl);const et=yield G(Te,ce);return ce.progressCallback&&ce.progressCallback(void 0),et&&X(ce.enteringEl,ce.leavingEl),{hasCompleted:et,animation:Te}});return function(ce,Te){return ne.apply(this,arguments)}}(),Z=function(){var ne=(0,F.A)(function*(J){const ce=J.enteringEl,Te=J.leavingEl,et=j.c.get("focusManagerPriority",!1);return yield K(J,et),ie(ce,Te),X(ce,Te),{hasCompleted:!0}});return function(ce){return ne.apply(this,arguments)}}(),K=function(){var ne=(0,F.A)(function*(J,ce){(void 0!==J.deepWait?J.deepWait:ce)&&(yield Promise.all([ve(J.enteringEl),ve(J.leavingEl)])),yield z(J.viewIsReady,J.enteringEl)});return function(ce,Te){return ne.apply(this,arguments)}}(),z=function(){var ne=(0,F.A)(function*(J,ce){J&&(yield J(ce))});return function(ce,Te){return ne.apply(this,arguments)}}(),G=(ne,J)=>{const ce=J.progressCallback,Te=new Promise(et=>{ne.onFinish(le=>et(1===le))});return ce?(ne.progressStart(!0),ce(ne)):ne.play(),Te},ie=(ne,J)=>{ee(J,M),ee(ne,"ionViewWillEnter")},X=(ne,J)=>{ee(ne,"ionViewDidEnter"),ee(J,C)},ee=(ne,J)=>{if(ne){const ce=new CustomEvent(J,{bubbles:!1,cancelable:!1});ne.dispatchEvent(ce)}},Y=()=>new Promise(ne=>(0,a.r)(()=>(0,a.r)(()=>ne()))),ve=function(){var ne=(0,F.A)(function*(J){const ce=J;if(ce){if(null!=ce.componentOnReady){if(null!=(yield ce.componentOnReady()))return}else if(null!=ce.__registerHost)return void(yield new Promise(et=>(0,a.r)(et)));yield Promise.all(Array.from(ce.children).map(ve))}});return function(ce){return ne.apply(this,arguments)}}(),xe=(ne,J)=>{J?(ne.setAttribute("aria-hidden","true"),ne.classList.add("ion-page-hidden")):(ne.hidden=!1,ne.removeAttribute("aria-hidden"),ne.classList.remove("ion-page-hidden"))},ae=(ne,J,ce)=>{void 0!==ne&&(ne.style.zIndex="back"===ce?"99":"101"),void 0!==J&&(J.style.zIndex="100")},ge=ne=>ne.classList.contains("ion-page")?ne:ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ne},4929:(br,kn,je)=>{"use strict";je.d(kn,{a:()=>j,b:()=>Mt,p:()=>F});const F=(Jt,...a)=>console.warn(`[Ionic Warning]: ${Jt}`,...a),j=(Jt,...a)=>console.error(`[Ionic Error]: ${Jt}`,...a),Mt=(Jt,...a)=>console.error(`<${Jt.tagName.toLowerCase()}> must be used inside ${a.join(" or ")}.`)},8476:(br,kn,je)=>{"use strict";je.d(kn,{d:()=>j,w:()=>F});const F=typeof window<"u"?window:void 0,j=typeof document<"u"?document:void 0},617:(br,kn,je)=>{"use strict";je.d(kn,{FJ:()=>_.l,JI:()=>F.c,NC:()=>Mt.iosTransitionAnimation,OZ:()=>_.m,QX:()=>M.s,TN:()=>_.a,V5:()=>Jt.mdTransitionAnimation,Vk:()=>M.I,mF:()=>_.c,sE:()=>a.g});var F=je(9986),Mt=(je(1331),je(9856)),Jt=je(361),a=je(3351),M=(je(8607),je(4921),je(464)),_=(je(6073),je(1070));je(8476),je(8393),je(1970),je(8669)},4921:(br,kn,je)=>{"use strict";je.d(kn,{a:()=>w,b:()=>xe,c:()=>Mt,i:()=>ae});var F=je(8393);class j{constructor(){this.m=new Map}reset(ne){this.m=new Map(Object.entries(ne))}get(ne,J){const ce=this.m.get(ne);return void 0!==ce?ce:J}getBoolean(ne,J=!1){const ce=this.m.get(ne);return void 0===ce?J:"string"==typeof ce?"true"===ce:!!ce}getNumber(ne,J){const ce=parseFloat(this.m.get(ne));return isNaN(ce)?void 0!==J?J:NaN:ce}set(ne,J){this.m.set(ne,J)}}const Mt=new j,M="ionic:",C="ionic-persist-config",w=(ge,ne)=>("string"==typeof ge&&(ne=ge,ge=void 0),(ge=>I(ge))(ge).includes(ne)),I=(ge=window)=>{if(typeof ge>"u")return[];ge.Ionic=ge.Ionic||{};let ne=ge.Ionic.platforms;return null==ne&&(ne=ge.Ionic.platforms=D(ge),ne.forEach(J=>ge.document.documentElement.classList.add(`plt-${J}`))),ne},D=ge=>{const ne=Mt.get("platform");return Object.keys(Y).filter(J=>{const ce=null==ne?void 0:ne[J];return"function"==typeof ce?ce(ge):Y[J](ge)})},f=ge=>!!(X(ge,/iPad/i)||X(ge,/Macintosh/i)&&E(ge)),g=ge=>X(ge,/android|sink/i),E=ge=>ee(ge,"(any-pointer:coarse)"),Z=ge=>K(ge)||z(ge),K=ge=>!!(ge.cordova||ge.phonegap||ge.PhoneGap),z=ge=>{const ne=ge.Capacitor;return!(null==ne||!ne.isNative)},X=(ge,ne)=>ne.test(ge.navigator.userAgent),ee=(ge,ne)=>{var J;return null===(J=ge.matchMedia)||void 0===J?void 0:J.call(ge,ne).matches},Y={ipad:f,iphone:ge=>X(ge,/iPhone/i),ios:ge=>X(ge,/iPhone|iPod/i)||f(ge),android:g,phablet:ge=>{const ne=ge.innerWidth,J=ge.innerHeight,ce=Math.min(ne,J),Te=Math.max(ne,J);return ce>390&&ce<520&&Te>620&&Te<800},tablet:ge=>{const ne=ge.innerWidth,J=ge.innerHeight,ce=Math.min(ne,J),Te=Math.max(ne,J);return f(ge)||(ge=>g(ge)&&!X(ge,/mobile/i))(ge)||ce>460&&ce<820&&Te>780&&Te<1400},cordova:K,capacitor:z,electron:ge=>X(ge,/electron/i),pwa:ge=>{var ne;return!!(null!==(ne=ge.matchMedia)&&void 0!==ne&&ne.call(ge,"(display-mode: standalone)").matches||ge.navigator.standalone)},mobile:E,mobileweb:ge=>E(ge)&&!Z(ge),desktop:ge=>!E(ge),hybrid:Z};let ve;const xe=ge=>ge&&(0,F.g)(ge)||ve,ae=(ge={})=>{if(typeof window>"u")return;const ne=window.document,J=window,ce=J.Ionic=J.Ionic||{},Te={};ge._ael&&(Te.ael=ge._ael),ge._rel&&(Te.rel=ge._rel),ge._ce&&(Te.ce=ge._ce),(0,F.a)(Te);const et=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ge=>{try{const ne=ge.sessionStorage.getItem(C);return null!==ne?JSON.parse(ne):{}}catch{return{}}})(J)),{persistConfig:!1}),ce.config),(ge=>{const ne={};return ge.location.search.slice(1).split("&").map(J=>J.split("=")).map(([J,ce])=>{try{return[decodeURIComponent(J),decodeURIComponent(ce)]}catch{return["",""]}}).filter(([J])=>((ge,ne)=>ge.substr(0,ne.length)===ne)(J,M)).map(([J,ce])=>[J.slice(6),ce]).forEach(([J,ce])=>{ne[J]=ce}),ne})(J)),ge);Mt.reset(et),Mt.getBoolean("persistConfig")&&((ge,ne)=>{try{ge.sessionStorage.setItem(C,JSON.stringify(ne))}catch{return}})(J,et),I(J),ce.config=Mt,ce.mode=ve=Mt.get("mode",ne.documentElement.getAttribute("mode")||(w(J,"ios")?"ios":"md")),Mt.set("mode",ve),ne.documentElement.setAttribute("mode",ve),ne.documentElement.classList.add(ve),Mt.getBoolean("_testing")&&Mt.set("animated",!1);const le=me=>{var Oe;return null===(Oe=me.tagName)||void 0===Oe?void 0:Oe.startsWith("ION-")},V=me=>["ios","md"].includes(me);(0,F.c)(me=>{for(;me;){const Oe=me.mode||me.getAttribute("mode");if(Oe){if(V(Oe))return Oe;le(me)&&console.warn('Invalid ionic mode: "'+Oe+'", expected: "ios" or "md"')}me=me.parentElement}return ve})}},9856:(br,kn,je)=>{"use strict";je.r(kn),je.d(kn,{iosTransitionAnimation:()=>d,shadow:()=>M});var F=je(9986),j=je(1331);je(8476),je(4921),je(8393);const q=h=>document.querySelector(`${h}.ion-cloned-element`),M=h=>h.shadowRoot||h,C=h=>{const p="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs"),g="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=p){const v=p.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=v?v.querySelector(g):null}return h.querySelector(g)},_=(h,p)=>{const g="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs");let v=[];if(null!=g){const S=g.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=S&&(v=S.querySelectorAll("ion-buttons"))}else v=h.querySelectorAll("ion-buttons");for(const S of v){const x=S.closest("ion-header"),E=x&&!x.classList.contains("header-collapse-condense-inactive"),N=S.querySelector("ion-back-button"),Z=S.classList.contains("buttons-collapse");if(null!==N&&("start"===S.slot||""===S.slot)&&(Z&&E&&p||!Z))return N}return null},I=(h,p,g,v,S,x,E,N,Z)=>{var K,z;const G=p?`calc(100% - ${S.right+4}px)`:S.left-4+"px",ie=p?"right":"left",X=p?"left":"right",ee=p?"right":"left";let Y=1,ve=1,xe=`scale(${ve})`;const ae="scale(1)";if(x&&E){const St=(null===(K=x.textContent)||void 0===K?void 0:K.trim())===(null===(z=N.textContent)||void 0===z?void 0:z.trim());Y=Z.width/E.width,ve=(Z.height-f)/E.height,xe=St?`scale(${Y}, ${ve})`:`scale(${ve})`}const ne=M(v).querySelector("ion-icon").getBoundingClientRect(),J=p?ne.width/2-(ne.right-S.right)+"px":S.left-ne.width/2+"px",ce=p?`-${window.innerWidth-S.right}px`:`${S.left}px`,Te=`${Z.top}px`,et=`${S.top}px`,me=g?[{offset:0,transform:`translate3d(${ce}, ${et}, 0)`},{offset:1,transform:`translate3d(${J}, ${Te}, 0)`}]:[{offset:0,transform:`translate3d(${J}, ${Te}, 0)`},{offset:1,transform:`translate3d(${ce}, ${et}, 0)`}],dt=g?[{offset:0,opacity:1,transform:ae},{offset:1,opacity:0,transform:xe}]:[{offset:0,opacity:0,transform:xe},{offset:1,opacity:1,transform:ae}],ht=g?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Lt=(0,F.c)(),kt=(0,F.c)(),lt=(0,F.c)(),It=q("ion-back-button"),bt=M(It).querySelector(".button-text"),Pt=M(It).querySelector("ion-icon");It.text=v.text,It.mode=v.mode,It.icon=v.icon,It.color=v.color,It.disabled=v.disabled,It.style.setProperty("display","block"),It.style.setProperty("position","fixed"),kt.addElement(Pt),Lt.addElement(bt),lt.addElement(It),lt.beforeStyles({position:"absolute",top:"0px",[ee]:"0px"}).beforeAddWrite(()=>{v.style.setProperty("display","none"),It.style.setProperty(ie,G)}).afterAddWrite(()=>{v.style.setProperty("display",""),It.style.setProperty("display","none"),It.style.removeProperty(ie)}).keyframes(me),Lt.beforeStyles({"transform-origin":`${ie} top`}).keyframes(dt),kt.beforeStyles({"transform-origin":`${X} center`}).keyframes(ht),h.addAnimation([Lt,kt,lt])},D=(h,p,g,v,S,x,E,N,Z)=>{var K,z;const G=p?"right":"left",ie=p?`calc(100% - ${S.right}px)`:`${S.left}px`,ee=`${S.top}px`;let ve=p?`-${window.innerWidth-E.right-8}px`:`${E.x+8}px`,xe=.5;const ae="scale(1)";let ge=`scale(${xe})`;if(N&&Z){ve=p?`-${window.innerWidth-Z.right-8}px`:Z.x-8+"px";const Oe=(null===(K=N.textContent)||void 0===K?void 0:K.trim())===(null===(z=v.textContent)||void 0===z?void 0:z.trim());xe=Z.height/(x.height-f),ge=Oe?`scale(${Z.width/x.width}, ${xe})`:`scale(${xe})`}const ce=E.top+E.height/2-S.height*xe/2+"px",le=g?[{offset:0,opacity:0,transform:`translate3d(${ve}, ${ce}, 0) ${ge}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${ee}, 0) ${ae}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${ee}, 0) ${ae}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ve}, ${ce}, 0) ${ge}`}],V=q("ion-title"),me=(0,F.c)();V.innerText=v.innerText,V.size=v.size,V.color=v.color,me.addElement(V),me.beforeStyles({"transform-origin":`${G} top`,height:`${S.height}px`,display:"",position:"relative",[G]:ie}).beforeAddWrite(()=>{v.style.setProperty("opacity","0")}).afterAddWrite(()=>{v.style.setProperty("opacity",""),V.style.setProperty("display","none")}).keyframes(le),h.addAnimation(me)},d=(h,p)=>{var g;try{const v="cubic-bezier(0.32,0.72,0,1)",S="opacity",x="transform",E="0%",Z="rtl"===h.ownerDocument.dir,K=Z?"-99.5%":"99.5%",z=Z?"33%":"-33%",G=p.enteringEl,ie=p.leavingEl,X="back"===p.direction,ee=G.querySelector(":scope > ion-content"),Y=G.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ve=G.querySelectorAll(":scope > ion-header > ion-toolbar"),xe=(0,F.c)(),ae=(0,F.c)();if(xe.addElement(G).duration((null!==(g=p.duration)&&void 0!==g?g:0)||540).easing(p.easing||v).fill("both").beforeRemoveClass("ion-page-invisible"),ie&&null!=h){const ce=(0,F.c)();ce.addElement(h),xe.addAnimation(ce)}if(ee||0!==ve.length||0!==Y.length?(ae.addElement(ee),ae.addElement(Y)):ae.addElement(G.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),xe.addAnimation(ae),X?ae.beforeClearStyles([S]).fromTo("transform",`translateX(${z})`,`translateX(${E})`).fromTo(S,.8,1):ae.beforeClearStyles([S]).fromTo("transform",`translateX(${K})`,`translateX(${E})`),ee){const ce=M(ee).querySelector(".transition-effect");if(ce){const Te=ce.querySelector(".transition-cover"),et=ce.querySelector(".transition-shadow"),le=(0,F.c)(),V=(0,F.c)(),me=(0,F.c)();le.addElement(ce).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),V.addElement(Te).beforeClearStyles([S]).fromTo(S,0,.1),me.addElement(et).beforeClearStyles([S]).fromTo(S,.03,.7),le.addAnimation([V,me]),ae.addAnimation([le])}}const ge=G.querySelector("ion-header.header-collapse-condense"),{forward:ne,backward:J}=((h,p,g,v,S)=>{const x=_(v,g),E=C(S),N=C(v),Z=_(S,g),K=null!==x&&null!==E&&!g,z=null!==N&&null!==Z&&g;if(K){const G=E.getBoundingClientRect(),ie=x.getBoundingClientRect(),X=M(x).querySelector(".button-text"),ee=null==X?void 0:X.getBoundingClientRect(),ve=M(E).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,g,E,G,ve,ie,X,ee),I(h,p,g,x,ie,X,ee,E,ve)}else if(z){const G=N.getBoundingClientRect(),ie=Z.getBoundingClientRect(),X=M(Z).querySelector(".button-text"),ee=null==X?void 0:X.getBoundingClientRect(),ve=M(N).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,g,N,G,ve,ie,X,ee),I(h,p,g,Z,ie,X,ee,N,ve)}return{forward:K,backward:z}})(xe,Z,X,G,ie);if(ve.forEach(ce=>{const Te=(0,F.c)();Te.addElement(ce),xe.addAnimation(Te);const et=(0,F.c)();et.addElement(ce.querySelector("ion-title"));const le=(0,F.c)(),V=Array.from(ce.querySelectorAll("ion-buttons,[menuToggle]")),me=ce.closest("ion-header"),Oe=null==me?void 0:me.classList.contains("header-collapse-condense-inactive");let Xe;Xe=V.filter(X?Lt=>{const kt=Lt.classList.contains("buttons-collapse");return kt&&!Oe||!kt}:Lt=>!Lt.classList.contains("buttons-collapse")),le.addElement(Xe);const dt=(0,F.c)();dt.addElement(ce.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const yt=(0,F.c)();yt.addElement(M(ce).querySelector(".toolbar-background"));const Ut=(0,F.c)(),ht=ce.querySelector("ion-back-button");if(ht&&Ut.addElement(ht),Te.addAnimation([et,le,dt,yt,Ut]),le.fromTo(S,.01,1),dt.fromTo(S,.01,1),X)Oe||et.fromTo("transform",`translateX(${z})`,`translateX(${E})`).fromTo(S,.01,1),dt.fromTo("transform",`translateX(${z})`,`translateX(${E})`),Ut.fromTo(S,.01,1);else if(ge||et.fromTo("transform",`translateX(${K})`,`translateX(${E})`).fromTo(S,.01,1),dt.fromTo("transform",`translateX(${K})`,`translateX(${E})`),yt.beforeClearStyles([S,"transform"]),(null==me?void 0:me.translucent)?yt.fromTo("transform",Z?"translateX(-100%)":"translateX(100%)","translateX(0px)"):yt.fromTo(S,.01,"var(--opacity)"),ne||Ut.fromTo(S,.01,1),ht&&!ne){const kt=(0,F.c)();kt.addElement(M(ht).querySelector(".button-text")).fromTo("transform",Z?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Te.addAnimation(kt)}}),ie){const ce=(0,F.c)(),Te=ie.querySelector(":scope > ion-content"),et=ie.querySelectorAll(":scope > ion-header > ion-toolbar"),le=ie.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Te||0!==et.length||0!==le.length?(ce.addElement(Te),ce.addElement(le)):ce.addElement(ie.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),xe.addAnimation(ce),X){ce.beforeClearStyles([S]).fromTo("transform",`translateX(${E})`,Z?"translateX(-100%)":"translateX(100%)");const V=(0,j.g)(ie);xe.afterAddWrite(()=>{"normal"===xe.getDirection()&&V.style.setProperty("display","none")})}else ce.fromTo("transform",`translateX(${E})`,`translateX(${z})`).fromTo(S,1,.8);if(Te){const V=M(Te).querySelector(".transition-effect");if(V){const me=V.querySelector(".transition-cover"),Oe=V.querySelector(".transition-shadow"),Xe=(0,F.c)(),dt=(0,F.c)(),yt=(0,F.c)();Xe.addElement(V).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),dt.addElement(me).beforeClearStyles([S]).fromTo(S,.1,0),yt.addElement(Oe).beforeClearStyles([S]).fromTo(S,.7,.03),Xe.addAnimation([dt,yt]),ce.addAnimation([Xe])}}et.forEach(V=>{const me=(0,F.c)();me.addElement(V);const Oe=(0,F.c)();Oe.addElement(V.querySelector("ion-title"));const Xe=(0,F.c)(),dt=V.querySelectorAll("ion-buttons,[menuToggle]"),yt=V.closest("ion-header"),Ut=null==yt?void 0:yt.classList.contains("header-collapse-condense-inactive"),ht=Array.from(dt).filter(Pt=>{const St=Pt.classList.contains("buttons-collapse");return St&&!Ut||!St});Xe.addElement(ht);const Lt=(0,F.c)(),kt=V.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");kt.length>0&&Lt.addElement(kt);const lt=(0,F.c)();lt.addElement(M(V).querySelector(".toolbar-background"));const It=(0,F.c)(),bt=V.querySelector("ion-back-button");if(bt&&It.addElement(bt),me.addAnimation([Oe,Xe,Lt,It,lt]),xe.addAnimation(me),It.fromTo(S,.99,0),Xe.fromTo(S,.99,0),Lt.fromTo(S,.99,0),X){if(Ut||Oe.fromTo("transform",`translateX(${E})`,Z?"translateX(-100%)":"translateX(100%)").fromTo(S,.99,0),Lt.fromTo("transform",`translateX(${E})`,Z?"translateX(-100%)":"translateX(100%)"),lt.beforeClearStyles([S,"transform"]),(null==yt?void 0:yt.translucent)?lt.fromTo("transform","translateX(0px)",Z?"translateX(-100%)":"translateX(100%)"):lt.fromTo(S,"var(--opacity)",0),bt&&!J){const St=(0,F.c)();St.addElement(M(bt).querySelector(".button-text")).fromTo("transform",`translateX(${E})`,`translateX(${(Z?-124:124)+"px"})`),me.addAnimation(St)}}else Ut||Oe.fromTo("transform",`translateX(${E})`,`translateX(${z})`).fromTo(S,.99,0).afterClearStyles([x,S]),Lt.fromTo("transform",`translateX(${E})`,`translateX(${z})`).afterClearStyles([x,S]),It.afterClearStyles([S]),Oe.afterClearStyles([S]),Xe.afterClearStyles([S])})}return xe}catch(v){throw v}},f=10},361:(br,kn,je)=>{"use strict";je.r(kn),je.d(kn,{mdTransitionAnimation:()=>_e});var F=je(9986),j=je(1331);je(8476),je(4921),je(8393);const _e=(q,M)=>{var C,_,w;const I="40px",d="back"===M.direction,h=M.leavingEl,p=(0,j.g)(M.enteringEl),g=p.querySelector("ion-toolbar"),v=(0,F.c)();if(v.addElement(p).fill("both").beforeRemoveClass("ion-page-invisible"),d?v.duration((null!==(C=M.duration)&&void 0!==C?C:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):v.duration((null!==(_=M.duration)&&void 0!==_?_:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${I})`,"translateY(0px)").fromTo("opacity",.01,1),g){const S=(0,F.c)();S.addElement(g),v.addAnimation(S)}if(h&&d){v.duration((null!==(w=M.duration)&&void 0!==w?w:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const S=(0,F.c)();S.addElement((0,j.g)(h)).onFinish(x=>{1===x&&S.elements.length>0&&S.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${I})`).fromTo("opacity",1,0),v.addAnimation(S)}return v}},1070:(br,kn,je)=>{"use strict";je.d(kn,{B:()=>dt,F:()=>It,G:()=>yt,O:()=>Ut,a:()=>p,b:()=>g,c:()=>E,d:()=>ht,e:()=>Lt,f:()=>ne,g:()=>ce,h:()=>le,i:()=>me,j:()=>Z,k:()=>K,l:()=>v,m:()=>S,n:()=>_,o:()=>ae,q:()=>w,s:()=>Xe});var F=je(467),j=je(8476),Mt=je(4920),Jt=je(8669),a=je(4921),_e=je(8621),q=je(1970),M=je(4929);const C='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',_=(bt,Pt)=>{const St=bt.querySelector(C);I(St,null!=Pt?Pt:bt)},w=(bt,Pt)=>{const St=Array.from(bt.querySelectorAll(C));I(St.length>0?St[St.length-1]:null,null!=Pt?Pt:bt)},I=(bt,Pt)=>{let St=bt;const zt=null==bt?void 0:bt.shadowRoot;zt&&(St=zt.querySelector(C)||bt),St?(0,Mt.f)(St):Pt.focus()};let D=0,d=0;const f=new WeakMap,h=bt=>({create:Pt=>z(bt,Pt),dismiss:(Pt,St,zt)=>Y(document,Pt,St,bt,zt),getTop:()=>(0,F.A)(function*(){return ae(document,bt)})()}),p=h("ion-alert"),g=h("ion-action-sheet"),v=h("ion-loading"),S=h("ion-modal"),E=h("ion-popover"),Z=bt=>{typeof document<"u"&&ee(document);const Pt=D++;bt.overlayIndex=Pt},K=bt=>(bt.hasAttribute("id")||(bt.id="ion-overlay-"+ ++d),bt.id),z=(bt,Pt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(bt).then(()=>{const St=document.createElement(bt);return St.classList.add("overlay-hidden"),Object.assign(St,Object.assign(Object.assign({},Pt),{hasController:!0})),Te(document).appendChild(St),new Promise(zt=>(0,Mt.c)(St,zt))}):Promise.resolve(),ie=(bt,Pt)=>{let St=bt;const zt=null==bt?void 0:bt.shadowRoot;zt&&(St=zt.querySelector(C)||bt),St?(0,Mt.f)(St):Pt.focus()},ee=bt=>{0===D&&(D=1,bt.addEventListener("focus",Pt=>{((bt,Pt)=>{const St=ae(Pt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),zt=bt.target;St&&zt&&!St.classList.contains(It)&&(St.shadowRoot?(()=>{if(St.contains(zt))St.lastFocus=zt;else if("ION-TOAST"===zt.tagName)ie(St.lastFocus,St);else{const En=St.lastFocus;_(St),En===Pt.activeElement&&w(St),St.lastFocus=Pt.activeElement}})():(()=>{if(St===zt)St.lastFocus=void 0;else if("ION-TOAST"===zt.tagName)ie(St.lastFocus,St);else{const En=(0,Mt.g)(St);if(!En.contains(zt))return;const Kn=En.querySelector(".ion-overlay-wrapper");if(!Kn)return;if(Kn.contains(zt)||zt===En.querySelector("ion-backdrop"))St.lastFocus=zt;else{const Mn=St.lastFocus;_(Kn,St),Mn===Pt.activeElement&&w(Kn,St),St.lastFocus=Pt.activeElement}}})())})(Pt,bt)},!0),bt.addEventListener("ionBackButton",Pt=>{const St=ae(bt);null!=St&&St.backdropDismiss&&Pt.detail.register(Jt.OVERLAY_BACK_BUTTON_PRIORITY,()=>{St.dismiss(void 0,dt)})}),(0,Jt.shouldUseCloseWatcher)()||bt.addEventListener("keydown",Pt=>{if("Escape"===Pt.key){const St=ae(bt);null!=St&&St.backdropDismiss&&St.dismiss(void 0,dt)}}))},Y=(bt,Pt,St,zt,fn)=>{const $n=ae(bt,zt,fn);return $n?$n.dismiss(Pt,St):Promise.reject("overlay does not exist")},xe=(bt,Pt)=>((bt,Pt)=>(void 0===Pt&&(Pt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(bt.querySelectorAll(Pt)).filter(St=>St.overlayIndex>0)))(bt,Pt).filter(St=>!(bt=>bt.classList.contains("overlay-hidden"))(St)),ae=(bt,Pt,St)=>{const zt=xe(bt,Pt);return void 0===St?zt[zt.length-1]:zt.find(fn=>fn.id===St)},ge=(bt=!1)=>{const St=Te(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");St&&(bt?St.setAttribute("aria-hidden","true"):St.removeAttribute("aria-hidden"))},ne=function(){var bt=(0,F.A)(function*(Pt,St,zt,fn,$n){var En,Kn;if(Pt.presented)return;ge(!0),document.body.classList.add(q.B),kt(Pt.el),Pt.presented=!0,Pt.willPresent.emit(),null===(En=Pt.willPresentShorthand)||void 0===En||En.emit();const Mn=(0,a.b)(Pt),pr=Pt.enterAnimation?Pt.enterAnimation:a.c.get(St,"ios"===Mn?zt:fn);(yield et(Pt,pr,Pt.el,$n))&&(Pt.didPresent.emit(),null===(Kn=Pt.didPresentShorthand)||void 0===Kn||Kn.emit()),"ION-TOAST"!==Pt.el.tagName&&J(Pt.el),Pt.keyboardClose&&(null===document.activeElement||!Pt.el.contains(document.activeElement))&&Pt.el.focus(),Pt.el.removeAttribute("aria-hidden")});return function(St,zt,fn,$n,En){return bt.apply(this,arguments)}}(),J=function(){var bt=(0,F.A)(function*(Pt){let St=document.activeElement;if(!St)return;const zt=null==St?void 0:St.shadowRoot;zt&&(St=zt.querySelector(C)||St),yield Pt.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&St.focus()});return function(St){return bt.apply(this,arguments)}}(),ce=function(){var bt=(0,F.A)(function*(Pt,St,zt,fn,$n,En,Kn){var Mn,pr;if(!Pt.presented)return!1;void 0!==j.d&&1===xe(j.d).length&&(ge(!1),document.body.classList.remove(q.B)),Pt.presented=!1;try{Pt.el.style.setProperty("pointer-events","none"),Pt.willDismiss.emit({data:St,role:zt}),null===(Mn=Pt.willDismissShorthand)||void 0===Mn||Mn.emit({data:St,role:zt});const nr=(0,a.b)(Pt),hn=Pt.leaveAnimation?Pt.leaveAnimation:a.c.get(fn,"ios"===nr?$n:En);zt!==yt&&(yield et(Pt,hn,Pt.el,Kn)),Pt.didDismiss.emit({data:St,role:zt}),null===(pr=Pt.didDismissShorthand)||void 0===pr||pr.emit({data:St,role:zt}),(f.get(Pt)||[]).forEach(Tn=>Tn.destroy()),f.delete(Pt),Pt.el.classList.add("overlay-hidden"),Pt.el.style.removeProperty("pointer-events"),void 0!==Pt.el.lastFocus&&(Pt.el.lastFocus=void 0)}catch(nr){console.error(nr)}return Pt.el.remove(),lt(),!0});return function(St,zt,fn,$n,En,Kn,Mn){return bt.apply(this,arguments)}}(),Te=bt=>bt.querySelector("ion-app")||bt.body,et=function(){var bt=(0,F.A)(function*(Pt,St,zt,fn){zt.classList.remove("overlay-hidden");const En=St(Pt.el,fn);(!Pt.animated||!a.c.getBoolean("animated",!0))&&En.duration(0),Pt.keyboardClose&&En.beforeAddWrite(()=>{const Mn=zt.ownerDocument.activeElement;null!=Mn&&Mn.matches("input,ion-input, ion-textarea")&&Mn.blur()});const Kn=f.get(Pt)||[];return f.set(Pt,[...Kn,En]),yield En.play(),!0});return function(St,zt,fn,$n){return bt.apply(this,arguments)}}(),le=(bt,Pt)=>{let St;const zt=new Promise(fn=>St=fn);return V(bt,Pt,fn=>{St(fn.detail)}),zt},V=(bt,Pt,St)=>{const zt=fn=>{(0,Mt.b)(bt,Pt,zt),St(fn)};(0,Mt.a)(bt,Pt,zt)},me=bt=>"cancel"===bt||bt===dt,Oe=bt=>bt(),Xe=(bt,Pt)=>{if("function"==typeof bt)return a.c.get("_zoneGate",Oe)(()=>{try{return bt(Pt)}catch(zt){throw zt}})},dt="backdrop",yt="gesture",Ut=39,ht=bt=>{let St,Pt=!1;const zt=(0,_e.C)(),fn=(Kn=!1)=>{if(St&&!Kn)return{delegate:St,inline:Pt};const{el:Mn,hasController:pr,delegate:Ln}=bt;return Pt=null!==Mn.parentNode&&!pr,St=Pt?Ln||zt:Ln,{inline:Pt,delegate:St}};return{attachViewToDom:function(){var Kn=(0,F.A)(function*(Mn){const{delegate:pr}=fn(!0);if(pr)return yield pr.attachViewToDom(bt.el,Mn);const{hasController:Ln}=bt;if(Ln&&void 0!==Mn)throw new Error("framework delegate is missing");return null});return function(pr){return Kn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Kn}=fn();Kn&&void 0!==bt.el&&Kn.removeViewFromDom(bt.el.parentElement,bt.el)}}},Lt=()=>{let bt;const Pt=()=>{bt&&(bt(),bt=void 0)};return{addClickListener:(zt,fn)=>{Pt();const $n=void 0!==fn?document.getElementById(fn):null;$n?bt=((Kn,Mn)=>{const pr=()=>{Mn.present()};return Kn.addEventListener("click",pr),()=>{Kn.removeEventListener("click",pr)}})($n,zt):(0,M.p)(`A trigger element with the ID "${fn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,zt)},removeClickListener:Pt}},kt=bt=>{var Pt;if(void 0===j.d)return;const St=xe(j.d);for(let zt=St.length-1;zt>=0;zt--){const fn=St[zt],$n=null!==(Pt=St[zt+1])&&void 0!==Pt?Pt:bt;($n.hasAttribute("aria-hidden")||"ION-TOAST"!==$n.tagName)&&fn.setAttribute("aria-hidden","true")}},lt=()=>{if(void 0===j.d)return;const bt=xe(j.d);for(let Pt=bt.length-1;Pt>=0;Pt--){const St=bt[Pt];if(St.removeAttribute("aria-hidden"),"ION-TOAST"!==St.tagName)break}},It="ion-disable-focus-trap"},1288:(br,kn,je)=>{"use strict";je.d(kn,{H:()=>g,b:()=>$n,c:()=>E,f:()=>ht,g:()=>x,h:()=>h,p:()=>bn,r:()=>Xn});var F=je(467);let Mt,Jt,a=!1,_e=!1;const _={},d=Bt=>"object"==(Bt=typeof Bt)||"function"===Bt;function f(Bt){var nn,On,wn;return null!==(wn=null===(On=null===(nn=Bt.head)||void 0===nn?void 0:nn.querySelector('meta[name="csp-nonce"]'))||void 0===On?void 0:On.getAttribute("content"))&&void 0!==wn?wn:void 0}const h=(Bt,nn,...On)=>{let wn=null,zn=!1,lr=!1;const sr=[],mr=te=>{for(let Ie=0;Ie<te.length;Ie++)wn=te[Ie],Array.isArray(wn)?mr(wn):null!=wn&&"boolean"!=typeof wn&&((zn="function"!=typeof Bt&&!d(wn))&&(wn=String(wn)),zn&&lr?sr[sr.length-1].$text$+=wn:sr.push(zn?p(null,wn):wn),lr=zn)};if(mr(On),nn){const te=nn.className||nn.class;te&&(nn.class="object"!=typeof te?te:Object.keys(te).filter(Ie=>te[Ie]).join(" "))}const Mr=p(Bt,null);return Mr.$attrs$=nn,sr.length>0&&(Mr.$children$=sr),Mr},p=(Bt,nn)=>({$flags$:0,$tag$:Bt,$text$:nn,$elm$:null,$children$:null,$attrs$:null}),g={},x=Bt=>hn(Bt).$hostElement$,E=(Bt,nn,On)=>{const wn=x(Bt);return{emit:zn=>N(wn,nn,{bubbles:!!(4&On),composed:!!(2&On),cancelable:!!(1&On),detail:zn})}},N=(Bt,nn,On)=>{const wn=rn.ce(nn,On);return Bt.dispatchEvent(wn),wn},Z=new WeakMap,ie=(Bt,nn)=>"sc-"+Bt.$tagName$,X=(Bt,nn,On,wn,zn,lr)=>{if(On!==wn){let sr=ct(Bt,nn),mr=nn.toLowerCase();if("class"===nn){const Mr=Bt.classList,te=Y(On),Ie=Y(wn);Mr.remove(...te.filter(Ye=>Ye&&!Ie.includes(Ye))),Mr.add(...Ie.filter(Ye=>Ye&&!te.includes(Ye)))}else if("style"===nn){for(const Mr in On)(!wn||null==wn[Mr])&&(Mr.includes("-")?Bt.style.removeProperty(Mr):Bt.style[Mr]="");for(const Mr in wn)(!On||wn[Mr]!==On[Mr])&&(Mr.includes("-")?Bt.style.setProperty(Mr,wn[Mr]):Bt.style[Mr]=wn[Mr])}else if("ref"===nn)wn&&wn(Bt);else if(sr||"o"!==nn[0]||"n"!==nn[1]){const Mr=d(wn);if((sr||Mr&&null!==wn)&&!zn)try{if(Bt.tagName.includes("-"))Bt[nn]=wn;else{const te=null==wn?"":wn;"list"===nn?sr=!1:(null==On||Bt[nn]!=te)&&(Bt[nn]=te)}}catch{}null==wn||!1===wn?(!1!==wn||""===Bt.getAttribute(nn))&&Bt.removeAttribute(nn):(!sr||4&lr||zn)&&!Mr&&Bt.setAttribute(nn,wn=!0===wn?"":wn)}else nn="-"===nn[2]?nn.slice(3):ct(An,mr)?mr.slice(2):mr[2]+nn.slice(3),On&&rn.rel(Bt,nn,On,!1),wn&&rn.ael(Bt,nn,wn,!1)}},ee=/\s/,Y=Bt=>Bt?Bt.split(ee):[],ve=(Bt,nn,On,wn)=>{const zn=11===nn.$elm$.nodeType&&nn.$elm$.host?nn.$elm$.host:nn.$elm$,lr=Bt&&Bt.$attrs$||_,sr=nn.$attrs$||_;for(wn in lr)wn in sr||X(zn,wn,lr[wn],void 0,On,nn.$flags$);for(wn in sr)X(zn,wn,lr[wn],sr[wn],On,nn.$flags$)},xe=(Bt,nn,On,wn)=>{const zn=nn.$children$[On];let sr,mr,lr=0;if(null!==zn.$text$)sr=zn.$elm$=jn.createTextNode(zn.$text$);else{if(a||(a="svg"===zn.$tag$),sr=zn.$elm$=jn.createElementNS(a?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",zn.$tag$),a&&"foreignObject"===zn.$tag$&&(a=!1),ve(null,zn,a),(Bt=>null!=Bt)(Mt)&&sr["s-si"]!==Mt&&sr.classList.add(sr["s-si"]=Mt),zn.$children$)for(lr=0;lr<zn.$children$.length;++lr)mr=xe(Bt,zn,lr),mr&&sr.appendChild(mr);"svg"===zn.$tag$?a=!1:"foreignObject"===sr.tagName&&(a=!0)}return sr},ae=(Bt,nn,On,wn,zn,lr)=>{let mr,sr=Bt;for(sr.shadowRoot&&sr.tagName===Jt&&(sr=sr.shadowRoot);zn<=lr;++zn)wn[zn]&&(mr=xe(null,On,zn),mr&&(wn[zn].$elm$=mr,sr.insertBefore(mr,nn)))},ge=(Bt,nn,On)=>{for(let wn=nn;wn<=On;++wn){const zn=Bt[wn];if(zn){const lr=zn.$elm$;Te(zn),lr&&lr.remove()}}},J=(Bt,nn)=>Bt.$tag$===nn.$tag$,ce=(Bt,nn)=>{const On=nn.$elm$=Bt.$elm$,wn=Bt.$children$,zn=nn.$children$,lr=nn.$tag$,sr=nn.$text$;null===sr?(a="svg"===lr||"foreignObject"!==lr&&a,ve(Bt,nn,a),null!==wn&&null!==zn?((Bt,nn,On,wn)=>{let A,zn=0,lr=0,sr=nn.length-1,mr=nn[0],Mr=nn[sr],te=wn.length-1,Ie=wn[0],Ye=wn[te];for(;zn<=sr&&lr<=te;)null==mr?mr=nn[++zn]:null==Mr?Mr=nn[--sr]:null==Ie?Ie=wn[++lr]:null==Ye?Ye=wn[--te]:J(mr,Ie)?(ce(mr,Ie),mr=nn[++zn],Ie=wn[++lr]):J(Mr,Ye)?(ce(Mr,Ye),Mr=nn[--sr],Ye=wn[--te]):J(mr,Ye)?(ce(mr,Ye),Bt.insertBefore(mr.$elm$,Mr.$elm$.nextSibling),mr=nn[++zn],Ye=wn[--te]):J(Mr,Ie)?(ce(Mr,Ie),Bt.insertBefore(Mr.$elm$,mr.$elm$),Mr=nn[--sr],Ie=wn[++lr]):(A=xe(nn&&nn[lr],On,lr),Ie=wn[++lr],A&&mr.$elm$.parentNode.insertBefore(A,mr.$elm$));zn>sr?ae(Bt,null==wn[te+1]?null:wn[te+1].$elm$,On,wn,lr,te):lr>te&&ge(nn,zn,sr)})(On,wn,nn,zn):null!==zn?(null!==Bt.$text$&&(On.textContent=""),ae(On,null,nn,zn,0,zn.length-1)):null!==wn&&ge(wn,0,wn.length-1),a&&"svg"===lr&&(a=!1)):Bt.$text$!==sr&&(On.data=sr)},Te=Bt=>{Bt.$attrs$&&Bt.$attrs$.ref&&Bt.$attrs$.ref(null),Bt.$children$&&Bt.$children$.map(Te)},le=(Bt,nn)=>{nn&&!Bt.$onRenderResolve$&&nn["s-p"]&&nn["s-p"].push(new Promise(On=>Bt.$onRenderResolve$=On))},V=(Bt,nn)=>{if(Bt.$flags$|=16,!(4&Bt.$flags$))return le(Bt,Bt.$ancestorComponent$),Yn(()=>me(Bt,nn));Bt.$flags$|=512},me=(Bt,nn)=>{const wn=Bt.$lazyInstance$;return nn&&(Bt.$flags$|=256,Bt.$queuedListeners$&&(Bt.$queuedListeners$.map(([lr,sr])=>kt(wn,lr,sr)),Bt.$queuedListeners$=void 0)),Oe(void 0,()=>dt(Bt,wn,nn))},Oe=(Bt,nn)=>Xe(Bt)?Bt.then(nn):nn(),Xe=Bt=>Bt instanceof Promise||Bt&&Bt.then&&"function"==typeof Bt.then,dt=function(){var Bt=(0,F.A)(function*(nn,On,wn){var zn;const lr=nn.$hostElement$,mr=lr["s-rc"];wn&&(Bt=>{const nn=Bt.$cmpMeta$,On=Bt.$hostElement$,wn=nn.$flags$,lr=((Bt,nn,On,wn)=>{var zn;let lr=ie(nn);const sr=un.get(lr);if(Bt=11===Bt.nodeType?Bt:jn,sr)if("string"==typeof sr){let Mr,mr=Z.get(Bt=Bt.head||Bt);if(mr||Z.set(Bt,mr=new Set),!mr.has(lr)){{Mr=jn.createElement("style"),Mr.innerHTML=sr;const te=null!==(zn=rn.$nonce$)&&void 0!==zn?zn:f(jn);null!=te&&Mr.setAttribute("nonce",te),Bt.insertBefore(Mr,Bt.querySelector("link"))}mr&&mr.add(lr)}}else Bt.adoptedStyleSheets.includes(sr)||(Bt.adoptedStyleSheets=[...Bt.adoptedStyleSheets,sr]);return lr})(On.shadowRoot?On.shadowRoot:On.getRootNode(),nn);10&wn&&(On["s-sc"]=lr,On.classList.add(lr+"-h"))})(nn);yt(nn,On),mr&&(mr.map(te=>te()),lr["s-rc"]=void 0);{const te=null!==(zn=lr["s-p"])&&void 0!==zn?zn:[],Ie=()=>Ut(nn);0===te.length?Ie():(Promise.all(te).then(Ie),nn.$flags$|=4,te.length=0)}});return function(On,wn,zn){return Bt.apply(this,arguments)}}(),yt=(Bt,nn,On)=>{try{nn=nn.render(),Bt.$flags$&=-17,Bt.$flags$|=2,((Bt,nn)=>{const On=Bt.$hostElement$,wn=Bt.$vnode$||p(null,null),zn=(Bt=>Bt&&Bt.$tag$===g)(nn)?nn:h(null,null,nn);Jt=On.tagName,zn.$tag$=null,zn.$flags$|=4,Bt.$vnode$=zn,zn.$elm$=wn.$elm$=On.shadowRoot||On,Mt=On["s-sc"],ce(wn,zn)})(Bt,nn)}catch(wn){ft(wn,Bt.$hostElement$)}return null},Ut=Bt=>{const On=Bt.$hostElement$,zn=Bt.$lazyInstance$,lr=Bt.$ancestorComponent$;64&Bt.$flags$||(Bt.$flags$|=64,lt(On),kt(zn,"componentDidLoad"),Bt.$onReadyResolve$(On),lr||Lt()),Bt.$onInstanceResolve$(On),Bt.$onRenderResolve$&&(Bt.$onRenderResolve$(),Bt.$onRenderResolve$=void 0),512&Bt.$flags$&&an(()=>V(Bt,!1)),Bt.$flags$&=-517},ht=Bt=>{{const nn=hn(Bt),On=nn.$hostElement$.isConnected;return On&&2==(18&nn.$flags$)&&V(nn,!1),On}},Lt=Bt=>{lt(jn.documentElement),an(()=>N(An,"appload",{detail:{namespace:"ionicpwaelements"}}))},kt=(Bt,nn,On)=>{if(Bt&&Bt[nn])try{return Bt[nn](On)}catch(wn){ft(wn)}},lt=Bt=>Bt.classList.add("hydrated"),Pt=(Bt,nn,On)=>{if(nn.$members$){const wn=Object.entries(nn.$members$),zn=Bt.prototype;if(wn.map(([lr,[sr]])=>{31&sr||2&On&&32&sr?Object.defineProperty(zn,lr,{get(){return((Bt,nn)=>hn(this).$instanceValues$.get(nn))(0,lr)},set(mr){((Bt,nn,On,wn)=>{const zn=hn(Bt),lr=zn.$instanceValues$.get(nn),sr=zn.$flags$,mr=zn.$lazyInstance$;On=((Bt,nn)=>null==Bt||d(Bt)?Bt:4&nn?"false"!==Bt&&(""===Bt||!!Bt):2&nn?parseFloat(Bt):1&nn?String(Bt):Bt)(On,wn.$members$[nn][0]);const Mr=Number.isNaN(lr)&&Number.isNaN(On);(!(8&sr)||void 0===lr)&&On!==lr&&!Mr&&(zn.$instanceValues$.set(nn,On),mr&&2==(18&sr)&&V(zn,!1))})(this,lr,mr,nn)},configurable:!0,enumerable:!0}):1&On&&64&sr&&Object.defineProperty(zn,lr,{value(...mr){const Mr=hn(this);return Mr.$onInstancePromise$.then(()=>Mr.$lazyInstance$[lr](...mr))}})}),1&On){const lr=new Map;zn.attributeChangedCallback=function(sr,mr,Mr){rn.jmp(()=>{const te=lr.get(sr);if(this.hasOwnProperty(te))Mr=this[te],delete this[te];else if(zn.hasOwnProperty(te)&&"number"==typeof this[te]&&this[te]==Mr)return;this[te]=(null!==Mr||"boolean"!=typeof this[te])&&Mr})},Bt.observedAttributes=wn.filter(([sr,mr])=>15&mr[0]).map(([sr,mr])=>{const Mr=mr[1]||sr;return lr.set(Mr,sr),Mr})}}return Bt},St=function(){var Bt=(0,F.A)(function*(nn,On,wn,zn,lr){if(!(32&On.$flags$)){On.$flags$|=32;{if((lr=xt(wn)).then){const te=()=>{};lr=yield lr,te()}lr.isProxied||(Pt(lr,wn,2),lr.isProxied=!0);const Mr=()=>{};On.$flags$|=8;try{new lr(On)}catch(te){ft(te)}On.$flags$&=-9,Mr()}if(lr.style){let Mr=lr.style;const te=ie(wn);if(!un.has(te)){const Ie=()=>{};((Bt,nn,On)=>{let wn=un.get(Bt);Pn&&On?(wn=wn||new CSSStyleSheet,"string"==typeof wn?wn=nn:wn.replaceSync(nn)):wn=nn,un.set(Bt,wn)})(te,Mr,!!(1&wn.$flags$)),Ie()}}}const sr=On.$ancestorComponent$,mr=()=>V(On,!0);sr&&sr["s-rc"]?sr["s-rc"].push(mr):mr()});return function(On,wn,zn,lr,sr){return Bt.apply(this,arguments)}}(),$n=(Bt,nn={})=>{var On;const zn=[],lr=nn.exclude||[],sr=An.customElements,mr=jn.head,Mr=mr.querySelector("meta[charset]"),te=jn.createElement("style"),Ie=[];let Ye,A=!0;Object.assign(rn,nn),rn.$resourcesUrl$=new URL(nn.resourcesUrl||"./",jn.baseURI).href,Bt.map(k=>{k[1].map(B=>{const L={$flags$:B[0],$tagName$:B[1],$members$:B[2],$listeners$:B[3]};L.$members$=B[2],L.$listeners$=B[3];const se=L.$tagName$,H=class extends HTMLElement{constructor(de){super(de),Tn(de=this,L),1&L.$flags$&&de.attachShadow({mode:"open"})}connectedCallback(){Ye&&(clearTimeout(Ye),Ye=null),A?Ie.push(this):rn.jmp(()=>(Bt=>{if(!(1&rn.$flags$)){const nn=hn(Bt),On=nn.$cmpMeta$,wn=()=>{};if(1&nn.$flags$)En(Bt,nn,On.$listeners$);else{nn.$flags$|=1;{let zn=Bt;for(;zn=zn.parentNode||zn.host;)if(zn["s-p"]){le(nn,nn.$ancestorComponent$=zn);break}}On.$members$&&Object.entries(On.$members$).map(([zn,[lr]])=>{if(31&lr&&Bt.hasOwnProperty(zn)){const sr=Bt[zn];delete Bt[zn],Bt[zn]=sr}}),St(Bt,nn,On)}wn()}})(this))}disconnectedCallback(){rn.jmp(()=>(Bt=>{if(!(1&rn.$flags$)){const nn=hn(this),On=nn.$lazyInstance$;nn.$rmListeners$&&(nn.$rmListeners$.map(wn=>wn()),nn.$rmListeners$=void 0),kt(On,"disconnectedCallback")}})())}componentOnReady(){return hn(this).$onReadyPromise$}};L.$lazyBundleId$=k[0],!lr.includes(se)&&!sr.get(se)&&(zn.push(se),sr.define(se,Pt(H,L,1)))})});{te.innerHTML=zn+"{visibility:hidden}.hydrated{visibility:inherit}",te.setAttribute("data-styles","");const k=null!==(On=rn.$nonce$)&&void 0!==On?On:f(jn);null!=k&&te.setAttribute("nonce",k),mr.insertBefore(te,Mr?Mr.nextSibling:mr.firstChild)}A=!1,Ie.length?Ie.map(k=>k.connectedCallback()):rn.jmp(()=>Ye=setTimeout(Lt,30))},En=(Bt,nn,On,wn)=>{On&&On.map(([zn,lr,sr])=>{const mr=Mn(Bt,zn),Mr=Kn(nn,sr),te=pr(zn);rn.ael(mr,lr,Mr,te),(nn.$rmListeners$=nn.$rmListeners$||[]).push(()=>rn.rel(mr,lr,Mr,te))})},Kn=(Bt,nn)=>On=>{try{256&Bt.$flags$?Bt.$lazyInstance$[nn](On):(Bt.$queuedListeners$=Bt.$queuedListeners$||[]).push([nn,On])}catch(wn){ft(wn)}},Mn=(Bt,nn)=>16&nn?jn.body:Bt,pr=Bt=>!!(2&Bt),nr=new WeakMap,hn=Bt=>nr.get(Bt),Xn=(Bt,nn)=>nr.set(nn.$lazyInstance$=Bt,nn),Tn=(Bt,nn)=>{const On={$flags$:0,$hostElement$:Bt,$cmpMeta$:nn,$instanceValues$:new Map};return On.$onInstancePromise$=new Promise(wn=>On.$onInstanceResolve$=wn),On.$onReadyPromise$=new Promise(wn=>On.$onReadyResolve$=wn),Bt["s-p"]=[],Bt["s-rc"]=[],En(Bt,On,nn.$listeners$),nr.set(Bt,On)},ct=(Bt,nn)=>nn in Bt,ft=(Bt,nn)=>(0,console.error)(Bt,nn),Qe=new Map,xt=(Bt,nn,On)=>{const wn=Bt.$tagName$.replace(/-/g,"_"),zn=Bt.$lazyBundleId$,lr=Qe.get(zn);if(lr)return lr[wn];if(!On||!BUILD.hotModuleReplacement){const sr=mr=>(Qe.set(zn,mr),mr[wn]);switch(zn){case"pwa-action-sheet":return je.e(6301).then(je.bind(je,6301)).then(sr,ft);case"pwa-camera-modal":return je.e(2982).then(je.bind(je,2982)).then(sr,ft);case"pwa-toast":return je.e(3574).then(je.bind(je,3574)).then(sr,ft);case"pwa-camera-modal-instance":return je.e(5640).then(je.bind(je,5640)).then(sr,ft);case"pwa-camera":return je.e(6086).then(je.bind(je,6086)).then(sr,ft)}}return je(5235)(`./${zn}.entry.js`).then(sr=>(Qe.set(zn,sr),sr[wn]),ft)},un=new Map,An=typeof window<"u"?window:{},jn=An.document||{head:{}},rn={$flags$:0,$resourcesUrl$:"",jmp:Bt=>Bt(),raf:Bt=>requestAnimationFrame(Bt),ael:(Bt,nn,On,wn)=>Bt.addEventListener(nn,On,wn),rel:(Bt,nn,On,wn)=>Bt.removeEventListener(nn,On,wn),ce:(Bt,nn)=>new CustomEvent(Bt,nn)},bn=Bt=>Promise.resolve(Bt),Pn=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Un=[],pn=[],Xt=(Bt,nn)=>On=>{Bt.push(On),_e||(_e=!0,nn&&4&rn.$flags$?an(Kt):rn.raf(Kt))},yn=Bt=>{for(let nn=0;nn<Bt.length;nn++)try{Bt[nn](performance.now())}catch(On){ft(On)}Bt.length=0},Kt=()=>{yn(Un),yn(pn),(_e=Un.length>0)&&rn.raf(Kt)},an=Bt=>bn().then(Bt),Yn=Xt(pn,!0)},5402:(br,kn,je)=>{"use strict";je.d(kn,{R:()=>j});const j=(0,je(5083).F3)("VoiceRecorder",{web:()=>je.e(9888).then(je.bind(je,9888)).then(Mt=>new Mt.VoiceRecorderWeb)})},92:(br,kn,je)=>{"use strict";je.d(kn,{Yl:()=>D,ZL:()=>d,aH:()=>I});var F=je(467),j=je(8326),Jt=je(3953),a=je(3656),_e=je(5374),q=je(5547),M=je(4237),C=je(755),_=je(4234),w=je(7100),I="MobilePWA",D=!1;window.p5=j;let d=(()=>{var f;class h{constructor(g,v,S,x,E,N){I=g.is("desktop")?"DesktopPWA":"MobilePWA",D=g.is("electron");let Z=!1;x.initialize((0,F.A)(function*(){E.Callback_nakama=()=>{S.initialize(),N.afterLangInit(Z),E.Callback_nakama=null};try{let z=yield x.loadBlobFromUserPath("translate.csv",""),G=URL.createObjectURL(z);E.load_selected_lang(G)}catch{E.load_selected_lang()}let K=N.CatchGETs(location.href)||{};Z=Object.keys(K).length>0,N.initialize(),S.AddressToQRCodeAct(K),v.initialize(),v.load_settings(),x.GetFileListFromDB("tmp_files").then(z=>{z.forEach(G=>x.removeFileFromUserPath(G))})}))}}return(f=h).\u0275fac=function(g){return new(g||f)(Jt.rXU(a.OD),Jt.rXU(q.r),Jt.rXU(M.X),Jt.rXU(C.n),Jt.rXU(_.y),Jt.rXU(w.z3))},f.\u0275cmp=Jt.VBU({type:f,selectors:[["app-root"]],decls:2,vars:0,template:function(g,v){1&g&&(Jt.j41(0,"ion-app"),Jt.nrm(1,"ion-router-outlet"),Jt.k0s())},dependencies:[_e.U1,_e.Rg]}),h})()},7100:(br,kn,je)=>{"use strict";je.d(kn,{xM:()=>lh,z3:()=>Hw,ud:()=>tu});var F=je(467),j=je(4023),Mt=je(8326),Jt=je(617),a=je(92),_e=je(5083),q=function(y){return y.Prompt="PROMPT",y.Camera="CAMERA",y.Photos="PHOTOS",y}(q||{}),M=function(y){return y.Rear="REAR",y.Front="FRONT",y}(M||{}),C=function(y){return y.Uri="uri",y.Base64="base64",y.DataUrl="dataUrl",y}(C||{});class _ extends _e.E_{getPhoto(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(l,u){if(t.webUseInput||t.source===q.Photos)r.fileInputExperience(t,l,u);else if(t.source===q.Prompt){let b=document.querySelector("pwa-action-sheet");b||(b=document.createElement("pwa-action-sheet"),document.body.appendChild(b)),b.header=t.promptLabelHeader||"Photo",b.cancelable=!1,b.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],b.addEventListener("onSelection",function(){var T=(0,F.A)(function*(O){0===O.detail?r.fileInputExperience(t,l,u):r.cameraExperience(t,l,u)});return function(O){return T.apply(this,arguments)}}())}else r.cameraExperience(t,l,u)});return function(l,u){return s.apply(this,arguments)}}())})()}pickImages(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(l,u){r.multipleFileInputExperience(l,u)});return function(l,u){return s.apply(this,arguments)}}())})()}cameraExperience(t,r,s){var l=this;return(0,F.A)(function*(){if(customElements.get("pwa-camera-modal")){const u=document.createElement("pwa-camera-modal");u.facingMode=t.direction===M.Front?"user":"environment",document.body.appendChild(u);try{yield u.componentOnReady(),u.addEventListener("onPhoto",function(){var b=(0,F.A)(function*(T){const O=T.detail;null===O?s(new _e.I9("User cancelled photos app")):O instanceof Error?s(O):r(yield l._getCameraPhoto(O,t)),u.dismiss(),document.body.removeChild(u)});return function(T){return b.apply(this,arguments)}}()),u.present()}catch{l.fileInputExperience(t,r,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),l.fileInputExperience(t,r,s)})()}fileInputExperience(t,r,s){let l=document.querySelector("#_capacitor-camera-input");const u=()=>{var b;null===(b=l.parentNode)||void 0===b||b.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input",l.type="file",l.hidden=!0,document.body.appendChild(l),l.addEventListener("change",b=>{const T=l.files[0];let O="jpeg";if("image/png"===T.type?O="png":"image/gif"===T.type&&(O="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const U=new FileReader;U.addEventListener("load",()=>{if("dataUrl"===t.resultType)r({dataUrl:U.result,format:O});else if("base64"===t.resultType){const Q=U.result.split(",")[1];r({base64String:Q,format:O})}u()}),U.readAsDataURL(T)}else r({webPath:URL.createObjectURL(T),format:O}),u()}),l.addEventListener("cancel",b=>{s(new _e.I9("User cancelled photos app")),u()})),l.accept="image/*",l.capture=!0,t.source===q.Photos||t.source===q.Prompt?l.removeAttribute("capture"):t.direction===M.Front?l.capture="user":t.direction===M.Rear&&(l.capture="environment"),l.click()}multipleFileInputExperience(t,r){let s=document.querySelector("#_capacitor-camera-input-multiple");const l=()=>{var u;null===(u=s.parentNode)||void 0===u||u.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",u=>{const b=[];for(let T=0;T<s.files.length;T++){const O=s.files[T];let U="jpeg";"image/png"===O.type?U="png":"image/gif"===O.type&&(U="gif"),b.push({webPath:URL.createObjectURL(O),format:U})}t({photos:b}),l()}),s.addEventListener("cancel",u=>{r(new _e.I9("User cancelled photos app")),l()})),s.accept="image/*",s.click()}_getCameraPhoto(t,r){return new Promise((s,l)=>{const u=new FileReader,b=t.type.split("/")[1];"uri"===r.resultType?s({webPath:URL.createObjectURL(t),format:b,saved:!1}):(u.readAsDataURL(t),u.onloadend=()=>{const T=u.result;s("dataUrl"===r.resultType?{dataUrl:T,format:b,saved:!1}:{base64String:T.split(",")[1],format:b,saved:!1})},u.onerror=T=>{l(T)})})}checkPermissions(){var t=this;return(0,F.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,F.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new _;const I=(0,_e.F3)("Camera",{web:()=>new _});var D=je(5402);const d="174",E=1,N=2,Z=3,Mn=0,pr=1,Ln=2,nr=0,hn=1,Xn=2,Tn=3,ct=4,ft=5,Qe=6,xt=7,un="attached",rn=301,bn=302,pn=306,Xt=1e3,yn=1001,an=1003,nn=1005,wn=1006,sr=1008,Mr=1009,te=1010,Ie=1011,Ye=1012,A=1013,k=1014,B=1015,L=1016,se=1017,H=1018,de=1020,Ke=35902,Ve=1021,vt=1022,Ft=1023,_n=1024,He=1025,$e=1026,pt=1027,ot=1028,Dt=1029,vn=1030,Hn=1031,Pr=1033,Ui=33776,ji=33777,Us=33778,xs=33779,wi=35840,ds=35841,$s=35842,vs=35843,Vs=36196,Ko=37492,fo=37496,Vo=37808,ea=37809,ta=37810,la=37811,eo=37812,ca=37813,_o=37814,Na=37815,Wa=37816,Ne=37817,ut=37818,Nt=37819,Be=37820,Vt=37821,In=36492,ts=36494,Gs=36495,Go=36283,Aa=36284,ba=36285,ll=36286,Io=2300,No=2301,Eo=2400,it=2401,Ii="srgb",Vi="srgb-linear",hs="linear",Pi="srgb",Ir=7680,Je="300 es",_t=2e3;class xn{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(r)&&s[t].push(r)}hasEventListener(t,r){const s=this._listeners;return void 0!==s&&void 0!==s[t]&&-1!==s[t].indexOf(r)}removeEventListener(t,r){const s=this._listeners;if(void 0===s)return;const l=s[t];if(void 0!==l){const u=l.indexOf(r);-1!==u&&l.splice(u,1)}}dispatchEvent(t){const r=this._listeners;if(void 0===r)return;const s=r[t.type];if(void 0!==s){t.target=this;const l=s.slice(0);for(let u=0,b=l.length;u<b;u++)l[u].call(this,t);t.target=null}}}const Le=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const ke=Math.PI/180,Re=180/Math.PI;function at(){const y=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Le[255&y]+Le[y>>8&255]+Le[y>>16&255]+Le[y>>24&255]+"-"+Le[255&t]+Le[t>>8&255]+"-"+Le[t>>16&15|64]+Le[t>>24&255]+"-"+Le[63&r|128]+Le[r>>8&255]+"-"+Le[r>>16&255]+Le[r>>24&255]+Le[255&s]+Le[s>>8&255]+Le[s>>16&255]+Le[s>>24&255]).toLowerCase()}function Qt(y,t,r){return Math.max(t,Math.min(r,y))}function Sn(y,t){return(y%t+t)%t}function Gr(y,t,r){return(1-r)*y+r*t}function Cs(y,t){switch(t.constructor){case Float32Array:return y;case Uint32Array:return y/4294967295;case Uint16Array:return y/65535;case Uint8Array:return y/255;case Int32Array:return Math.max(y/2147483647,-1);case Int16Array:return Math.max(y/32767,-1);case Int8Array:return Math.max(y/127,-1);default:throw new Error("Invalid component type.")}}function ci(y,t){switch(t.constructor){case Float32Array:return y;case Uint32Array:return Math.round(4294967295*y);case Uint16Array:return Math.round(65535*y);case Uint8Array:return Math.round(255*y);case Int32Array:return Math.round(2147483647*y);case Int16Array:return Math.round(32767*y);case Int8Array:return Math.round(127*y);default:throw new Error("Invalid component type.")}}const Po_DEG2RAD=ke,Po_radToDeg=function Ps(y){return y*Re};class hr{constructor(t=0,r=0){hr.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,s=this.y,l=t.elements;return this.x=l[0]*r+l[3]*s+l[6],this.y=l[1]*r+l[4]*s+l[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(Qt(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y;return r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const s=Math.cos(r),l=Math.sin(r),u=this.x-t.x,b=this.y-t.y;return this.x=u*s-b*l+t.x,this.y=u*l+b*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Gi{constructor(t,r,s,l,u,b,T,O,U){Gi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,r,s,l,u,b,T,O,U)}set(t,r,s,l,u,b,T,O,U){const Q=this.elements;return Q[0]=t,Q[1]=l,Q[2]=T,Q[3]=r,Q[4]=u,Q[5]=O,Q[6]=s,Q[7]=b,Q[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(t,r,s){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,l=r.elements,u=this.elements,b=s[0],T=s[3],O=s[6],U=s[1],Q=s[4],oe=s[7],fe=s[2],ye=s[5],Me=s[8],Ue=l[0],Pe=l[3],De=l[6],tt=l[1],st=l[4],nt=l[7],$t=l[2],Ct=l[5],Gt=l[8];return u[0]=b*Ue+T*tt+O*$t,u[3]=b*Pe+T*st+O*Ct,u[6]=b*De+T*nt+O*Gt,u[1]=U*Ue+Q*tt+oe*$t,u[4]=U*Pe+Q*st+oe*Ct,u[7]=U*De+Q*nt+oe*Gt,u[2]=fe*Ue+ye*tt+Me*$t,u[5]=fe*Pe+ye*st+Me*Ct,u[8]=fe*De+ye*nt+Me*Gt,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],b=t[4],T=t[5],O=t[6],U=t[7],Q=t[8];return r*b*Q-r*T*U-s*u*Q+s*T*O+l*u*U-l*b*O}invert(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],b=t[4],T=t[5],O=t[6],U=t[7],Q=t[8],oe=Q*b-T*U,fe=T*O-Q*u,ye=U*u-b*O,Me=r*oe+s*fe+l*ye;if(0===Me)return this.set(0,0,0,0,0,0,0,0,0);const Ue=1/Me;return t[0]=oe*Ue,t[1]=(l*U-Q*s)*Ue,t[2]=(T*s-l*b)*Ue,t[3]=fe*Ue,t[4]=(Q*r-l*O)*Ue,t[5]=(l*u-T*r)*Ue,t[6]=ye*Ue,t[7]=(s*O-U*r)*Ue,t[8]=(b*r-s*u)*Ue,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,s,l,u,b,T){const O=Math.cos(u),U=Math.sin(u);return this.set(s*O,s*U,-s*(O*b+U*T)+b+t,-l*U,l*O,-l*(-U*b+O*T)+T+r,0,0,1),this}scale(t,r){return this.premultiply(uu.makeScale(t,r)),this}rotate(t){return this.premultiply(uu.makeRotation(-t)),this}translate(t,r){return this.premultiply(uu.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,s,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,s=t.elements;for(let l=0;l<9;l++)if(r[l]!==s[l])return!1;return!0}fromArray(t,r=0){for(let s=0;s<9;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const uu=new Gi;function jf(y){for(let t=y.length-1;t>=0;--t)if(y[t]>=65535)return!0;return!1}function _l(y){return document.createElementNS("http://www.w3.org/1999/xhtml",y)}function bd(){const y=_l("canvas");return y.style.display="block",y}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const du={};function Fl(y){y in du||(du[y]=!0,console.warn(y))}const Hi=(new Gi).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Os=(new Gi).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Uf(){const y={enabled:!0,workingColorSpace:Vi,spaces:{},convert:function(l,u,b){return!1===this.enabled||u===b||!u||!b||(this.spaces[u].transfer===Pi&&(l.r=Bl(l.r),l.g=Bl(l.g),l.b=Bl(l.b)),this.spaces[u].primaries!==this.spaces[b].primaries&&(l.applyMatrix3(this.spaces[u].toXYZ),l.applyMatrix3(this.spaces[b].fromXYZ)),this.spaces[b].transfer===Pi&&(l.r=hu(l.r),l.g=hu(l.g),l.b=hu(l.b))),l},fromWorkingColorSpace:function(l,u){return this.convert(l,this.workingColorSpace,u)},toWorkingColorSpace:function(l,u){return this.convert(l,u,this.workingColorSpace)},getPrimaries:function(l){return this.spaces[l].primaries},getTransfer:function(l){return""===l?hs:this.spaces[l].transfer},getLuminanceCoefficients:function(l,u=this.workingColorSpace){return l.fromArray(this.spaces[u].luminanceCoefficients)},define:function(l){Object.assign(this.spaces,l)},_getMatrix:function(l,u,b){return l.copy(this.spaces[u].toXYZ).multiply(this.spaces[b].fromXYZ)},_getDrawingBufferColorSpace:function(l){return this.spaces[l].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(l=this.workingColorSpace){return this.spaces[l].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],s=[.3127,.329];return y.define({[Vi]:{primaries:t,whitePoint:s,transfer:hs,toXYZ:Hi,fromXYZ:Os,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Ii},outputColorSpaceConfig:{drawingBufferColorSpace:Ii}},[Ii]:{primaries:t,whitePoint:s,transfer:Pi,toXYZ:Hi,fromXYZ:Os,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Ii}}}),y}const Es=Uf();function Bl(y){return y<.04045?.0773993808*y:Math.pow(.9478672986*y+.0521327014,2.4)}function hu(y){return y<.0031308?12.92*y:1.055*Math.pow(y,.41666)-.055}let Jl;class Uu{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Jl&&(Jl=_l("canvas")),Jl.width=t.width,Jl.height=t.height;const s=Jl.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),r=Jl}return r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=_l("canvas");r.width=t.width,r.height=t.height;const s=r.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const l=s.getImageData(0,0,t.width,t.height),u=l.data;for(let b=0;b<u.length;b++)u[b]=255*Bl(u[b]/255);return s.putImageData(l,0,0),r}if(t.data){const r=t.data.slice(0);for(let s=0;s<r.length;s++)r[s]=r instanceof Uint8Array||r instanceof Uint8ClampedArray?Math.floor(255*Bl(r[s]/255)):Bl(r[s]);return{data:r,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let fs=0;class Da{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fs++}),this.uuid=at(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:""},l=this.data;if(null!==l){let u;if(Array.isArray(l)){u=[];for(let b=0,T=l.length;b<T;b++)u.push(Ql(l[b].isDataTexture?l[b].image:l[b]))}else u=Ql(l);s.url=u}return r||(t.images[this.uuid]=s),s}}function Ql(y){return typeof HTMLImageElement<"u"&&y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&y instanceof ImageBitmap?Uu.getDataURL(y):y.data?{data:Array.from(y.data),width:y.width,height:y.height,type:y.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ha=0,no=(()=>{class y extends xn{constructor(r=y.DEFAULT_IMAGE,s=y.DEFAULT_MAPPING,l=yn,u=yn,b=wn,T=sr,O=Ft,U=Mr,Q=y.DEFAULT_ANISOTROPY,oe=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ha++}),this.uuid=at(),this.name="",this.source=new Da(r),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=l,this.wrapT=u,this.magFilter=b,this.minFilter=T,this.anisotropy=Q,this.format=O,this.internalFormat=null,this.type=U,this.offset=new hr(0,0),this.repeat=new hr(1,1),this.center=new hr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=oe,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.renderTarget=r.renderTarget,this.isRenderTargetTexture=r.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const l={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(r.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case Xt:r.x=r.x-Math.floor(r.x);break;case yn:r.x=r.x<0?0:1;break;case 1002:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case Xt:r.y=r.y-Math.floor(r.y);break;case yn:r.y=r.y<0?0:1;break;case 1002:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(r){!0===r&&this.pmremVersion++}}return y.DEFAULT_IMAGE=null,y.DEFAULT_MAPPING=300,y.DEFAULT_ANISOTROPY=1,y})();class Ds{constructor(t=0,r=0,s=0,l=1){Ds.prototype.isVector4=!0,this.x=t,this.y=r,this.z=s,this.w=l}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,s,l){return this.x=t,this.y=r,this.z=s,this.w=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,s=this.y,l=this.z,u=this.w,b=t.elements;return this.x=b[0]*r+b[4]*s+b[8]*l+b[12]*u,this.y=b[1]*r+b[5]*s+b[9]*l+b[13]*u,this.z=b[2]*r+b[6]*s+b[10]*l+b[14]*u,this.w=b[3]*r+b[7]*s+b[11]*l+b[15]*u,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,s,l,u;const O=t.elements,U=O[0],Q=O[4],oe=O[8],fe=O[1],ye=O[5],Me=O[9],Ue=O[2],Pe=O[6],De=O[10];if(Math.abs(Q-fe)<.01&&Math.abs(oe-Ue)<.01&&Math.abs(Me-Pe)<.01){if(Math.abs(Q+fe)<.1&&Math.abs(oe+Ue)<.1&&Math.abs(Me+Pe)<.1&&Math.abs(U+ye+De-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const st=(U+1)/2,nt=(ye+1)/2,$t=(De+1)/2,Ct=(Q+fe)/4,Gt=(oe+Ue)/4,qt=(Me+Pe)/4;return st>nt&&st>$t?st<.01?(s=0,l=.707106781,u=.707106781):(s=Math.sqrt(st),l=Ct/s,u=Gt/s):nt>$t?nt<.01?(s=.707106781,l=0,u=.707106781):(l=Math.sqrt(nt),s=Ct/l,u=qt/l):$t<.01?(s=.707106781,l=.707106781,u=0):(u=Math.sqrt($t),s=Gt/u,l=qt/u),this.set(s,l,u,r),this}let tt=Math.sqrt((Pe-Me)*(Pe-Me)+(oe-Ue)*(oe-Ue)+(fe-Q)*(fe-Q));return Math.abs(tt)<.001&&(tt=1),this.x=(Pe-Me)/tt,this.y=(oe-Ue)/tt,this.z=(fe-Q)/tt,this.w=Math.acos((U+ye+De-1)/2),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this.z=Qt(this.z,t.z,r.z),this.w=Qt(this.w,t.w,r.w),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this.z=Qt(this.z,t,r),this.w=Qt(this.w,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this.w=t.w+(r.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class fh extends xn{constructor(t=1,r=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new Ds(0,0,t,r),this.scissorTest=!1,this.viewport=new Ds(0,0,t,r);const l={width:t,height:r,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new no(l,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const b=s.count;for(let T=0;T<b;T++)this.textures[T]=u.clone(),this.textures[T].isRenderTargetTexture=!0,this.textures[T].renderTarget=this;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,r,s=1){if(this.width!==t||this.height!==r||this.depth!==s){this.width=t,this.height=r,this.depth=s;for(let l=0,u=this.textures.length;l<u;l++)this.textures[l].image.width=t,this.textures[l].image.height=r,this.textures[l].image.depth=s;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,s=t.textures.length;r<s;r++){this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const l=Object.assign({},t.textures[r].image);this.textures[r].source=new Da(l)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Se extends fh{constructor(t=1,r=1,s={}){super(t,r,s),this.isWebGLRenderTarget=!0}}class Ze extends no{constructor(t=null,r=1,s=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:s,depth:l},this.magFilter=an,this.minFilter=an,this.wrapR=yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class qe extends no{constructor(t=null,r=1,s=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:s,depth:l},this.magFilter=an,this.minFilter=an,this.wrapR=yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class en{constructor(t=0,r=0,s=0,l=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=s,this._w=l}static slerpFlat(t,r,s,l,u,b,T){let O=s[l+0],U=s[l+1],Q=s[l+2],oe=s[l+3];const fe=u[b+0],ye=u[b+1],Me=u[b+2],Ue=u[b+3];if(0===T)return t[r+0]=O,t[r+1]=U,t[r+2]=Q,void(t[r+3]=oe);if(1===T)return t[r+0]=fe,t[r+1]=ye,t[r+2]=Me,void(t[r+3]=Ue);if(oe!==Ue||O!==fe||U!==ye||Q!==Me){let Pe=1-T;const De=O*fe+U*ye+Q*Me+oe*Ue,tt=De>=0?1:-1,st=1-De*De;if(st>Number.EPSILON){const $t=Math.sqrt(st),Ct=Math.atan2($t,De*tt);Pe=Math.sin(Pe*Ct)/$t,T=Math.sin(T*Ct)/$t}const nt=T*tt;if(O=O*Pe+fe*nt,U=U*Pe+ye*nt,Q=Q*Pe+Me*nt,oe=oe*Pe+Ue*nt,Pe===1-T){const $t=1/Math.sqrt(O*O+U*U+Q*Q+oe*oe);O*=$t,U*=$t,Q*=$t,oe*=$t}}t[r]=O,t[r+1]=U,t[r+2]=Q,t[r+3]=oe}static multiplyQuaternionsFlat(t,r,s,l,u,b){const T=s[l],O=s[l+1],U=s[l+2],Q=s[l+3],oe=u[b],fe=u[b+1],ye=u[b+2],Me=u[b+3];return t[r]=T*Me+Q*oe+O*ye-U*fe,t[r+1]=O*Me+Q*fe+U*oe-T*ye,t[r+2]=U*Me+Q*ye+T*fe-O*oe,t[r+3]=Q*Me-T*oe-O*fe-U*ye,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,s,l){return this._x=t,this._y=r,this._z=s,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){const s=t._x,l=t._y,u=t._z,b=t._order,T=Math.cos,O=Math.sin,U=T(s/2),Q=T(l/2),oe=T(u/2),fe=O(s/2),ye=O(l/2),Me=O(u/2);switch(b){case"XYZ":this._x=fe*Q*oe+U*ye*Me,this._y=U*ye*oe-fe*Q*Me,this._z=U*Q*Me+fe*ye*oe,this._w=U*Q*oe-fe*ye*Me;break;case"YXZ":this._x=fe*Q*oe+U*ye*Me,this._y=U*ye*oe-fe*Q*Me,this._z=U*Q*Me-fe*ye*oe,this._w=U*Q*oe+fe*ye*Me;break;case"ZXY":this._x=fe*Q*oe-U*ye*Me,this._y=U*ye*oe+fe*Q*Me,this._z=U*Q*Me+fe*ye*oe,this._w=U*Q*oe-fe*ye*Me;break;case"ZYX":this._x=fe*Q*oe-U*ye*Me,this._y=U*ye*oe+fe*Q*Me,this._z=U*Q*Me-fe*ye*oe,this._w=U*Q*oe+fe*ye*Me;break;case"YZX":this._x=fe*Q*oe+U*ye*Me,this._y=U*ye*oe+fe*Q*Me,this._z=U*Q*Me-fe*ye*oe,this._w=U*Q*oe-fe*ye*Me;break;case"XZY":this._x=fe*Q*oe-U*ye*Me,this._y=U*ye*oe-fe*Q*Me,this._z=U*Q*Me+fe*ye*oe,this._w=U*Q*oe+fe*ye*Me;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+b)}return!0===r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const s=r/2,l=Math.sin(s);return this._x=t.x*l,this._y=t.y*l,this._z=t.z*l,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,s=r[0],l=r[4],u=r[8],b=r[1],T=r[5],O=r[9],U=r[2],Q=r[6],oe=r[10],fe=s+T+oe;if(fe>0){const ye=.5/Math.sqrt(fe+1);this._w=.25/ye,this._x=(Q-O)*ye,this._y=(u-U)*ye,this._z=(b-l)*ye}else if(s>T&&s>oe){const ye=2*Math.sqrt(1+s-T-oe);this._w=(Q-O)/ye,this._x=.25*ye,this._y=(l+b)/ye,this._z=(u+U)/ye}else if(T>oe){const ye=2*Math.sqrt(1+T-s-oe);this._w=(u-U)/ye,this._x=(l+b)/ye,this._y=.25*ye,this._z=(O+Q)/ye}else{const ye=2*Math.sqrt(1+oe-s-T);this._w=(b-l)/ye,this._x=(u+U)/ye,this._y=(O+Q)/ye,this._z=.25*ye}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let s=t.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Qt(this.dot(t),-1,1)))}rotateTowards(t,r){const s=this.angleTo(t);if(0===s)return this;const l=Math.min(1,r/s);return this.slerp(t,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const s=t._x,l=t._y,u=t._z,b=t._w,T=r._x,O=r._y,U=r._z,Q=r._w;return this._x=s*Q+b*T+l*U-u*O,this._y=l*Q+b*O+u*T-s*U,this._z=u*Q+b*U+s*O-l*T,this._w=b*Q-s*T-l*O-u*U,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const s=this._x,l=this._y,u=this._z,b=this._w;let T=b*t._w+s*t._x+l*t._y+u*t._z;if(T<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,T=-T):this.copy(t),T>=1)return this._w=b,this._x=s,this._y=l,this._z=u,this;const O=1-T*T;if(O<=Number.EPSILON){const ye=1-r;return this._w=ye*b+r*this._w,this._x=ye*s+r*this._x,this._y=ye*l+r*this._y,this._z=ye*u+r*this._z,this.normalize(),this}const U=Math.sqrt(O),Q=Math.atan2(U,T),oe=Math.sin((1-r)*Q)/U,fe=Math.sin(r*Q)/U;return this._w=b*oe+this._w*fe,this._x=s*oe+this._x*fe,this._y=l*oe+this._y*fe,this._z=u*oe+this._z*fe,this._onChangeCallback(),this}slerpQuaternions(t,r,s){return this.copy(t).slerp(r,s)}random(){const t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),s=Math.random(),l=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(l*Math.sin(t),l*Math.cos(t),u*Math.sin(r),u*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mt{constructor(t=0,r=0,s=0){mt.prototype.isVector3=!0,this.x=t,this.y=r,this.z=s}set(t,r,s){return void 0===s&&(s=this.z),this.x=t,this.y=r,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(zi.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(zi.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,s=this.y,l=this.z,u=t.elements;return this.x=u[0]*r+u[3]*s+u[6]*l,this.y=u[1]*r+u[4]*s+u[7]*l,this.z=u[2]*r+u[5]*s+u[8]*l,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,s=this.y,l=this.z,u=t.elements,b=1/(u[3]*r+u[7]*s+u[11]*l+u[15]);return this.x=(u[0]*r+u[4]*s+u[8]*l+u[12])*b,this.y=(u[1]*r+u[5]*s+u[9]*l+u[13])*b,this.z=(u[2]*r+u[6]*s+u[10]*l+u[14])*b,this}applyQuaternion(t){const r=this.x,s=this.y,l=this.z,u=t.x,b=t.y,T=t.z,O=t.w,U=2*(b*l-T*s),Q=2*(T*r-u*l),oe=2*(u*s-b*r);return this.x=r+O*U+b*oe-T*Q,this.y=s+O*Q+T*U-u*oe,this.z=l+O*oe+u*Q-b*U,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,s=this.y,l=this.z,u=t.elements;return this.x=u[0]*r+u[4]*s+u[8]*l,this.y=u[1]*r+u[5]*s+u[9]*l,this.z=u[2]*r+u[6]*s+u[10]*l,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this.z=Qt(this.z,t.z,r.z),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this.z=Qt(this.z,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const s=t.x,l=t.y,u=t.z,b=r.x,T=r.y,O=r.z;return this.x=l*O-u*T,this.y=u*b-s*O,this.z=s*T-l*b,this}projectOnVector(t){const r=t.lengthSq();if(0===r)return this.set(0,0,0);const s=t.dot(this)/r;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Cr.copy(this).projectOnVector(t),this.sub(Cr)}reflect(t){return this.sub(Cr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(Qt(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y,l=this.z-t.z;return r*r+s*s+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,s){const l=Math.sin(r)*t;return this.x=l*Math.sin(s),this.y=Math.cos(r)*t,this.z=l*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,s){return this.x=t*Math.sin(r),this.y=s,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),l=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=s,this.z=l,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,r=2*Math.random()-1,s=Math.sqrt(1-r*r);return this.x=s*Math.cos(t),this.y=r,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Cr=new mt,zi=new en;class Si{constructor(t=new mt(1/0,1/0,1/0),r=new mt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r+=3)this.expandByPoint(fi.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,s=t.count;r<s;r++)this.expandByPoint(fi.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const s=fi.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===r&&void 0!==u&&!0!==t.isInstancedMesh)for(let b=0,T=u.count;b<T;b++)!0===t.isMesh?t.getVertexPosition(b,fi):fi.fromBufferAttribute(u,b),fi.applyMatrix4(t.matrixWorld),this.expandByPoint(fi);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Is.copy(t.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),Is.copy(s.boundingBox)),Is.applyMatrix4(t.matrixWorld),this.union(Is)}const l=t.children;for(let u=0,b=l.length;u<b;u++)this.expandByObject(l[u],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,fi),fi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,s;return t.normal.x>0?(r=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),r<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(qa),Ka.subVectors(this.max,qa),Ur.subVectors(t.a,qa),Ws.subVectors(t.b,qa),fa.subVectors(t.c,qa),ro.subVectors(Ws,Ur),xa.subVectors(fa,Ws),wa.subVectors(Ur,fa);let r=[0,-ro.z,ro.y,0,-xa.z,xa.y,0,-wa.z,wa.y,ro.z,0,-ro.x,xa.z,0,-xa.x,wa.z,0,-wa.x,-ro.y,ro.x,0,-xa.y,xa.x,0,-wa.y,wa.x,0];return!(!fu(r,Ur,Ws,fa,Ka)||(r=[1,0,0,0,1,0,0,0,1],!fu(r,Ur,Ws,fa,Ka)))&&(bo.crossVectors(ro,xa),r=[bo.x,bo.y,bo.z],fu(r,Ur,Ws,fa,Ka))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,fi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(fi).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ns[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ns[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ns[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ns[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ns[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ns[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ns[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ns[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ns)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ns=[new mt,new mt,new mt,new mt,new mt,new mt,new mt,new mt],fi=new mt,Is=new Si,Ur=new mt,Ws=new mt,fa=new mt,ro=new mt,xa=new mt,wa=new mt,qa=new mt,Ka=new mt,bo=new mt,bl=new mt;function fu(y,t,r,s,l){for(let u=0,b=y.length-3;u<=b;u+=3){bl.fromArray(y,u);const T=l.x*Math.abs(bl.x)+l.y*Math.abs(bl.y)+l.z*Math.abs(bl.z),O=t.dot(bl),U=r.dot(bl),Q=s.dot(bl);if(Math.max(-Math.max(O,U,Q),Math.min(O,U,Q))>T)return!1}return!0}const wd=new Si,xl=new mt,ph=new mt;class zs{constructor(t=new mt,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const s=this.center;void 0!==r?s.copy(r):wd.setFromPoints(t).getCenter(s);let l=0;for(let u=0,b=t.length;u<b;u++)l=Math.max(l,s.distanceToSquared(t[u]));return this.radius=Math.sqrt(l),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const s=this.center.distanceToSquared(t);return r.copy(t),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xl.subVectors(t,this.center);const r=xl.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),l=.5*(s-this.radius);this.center.addScaledVector(xl,l/s),this.radius+=l}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ph.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xl.copy(t.center).add(ph)),this.expandByPoint(xl.copy(t.center).sub(ph))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ua=new mt,mh=new mt,kc=new mt,Ya=new mt,pu=new mt,Bf=new mt,Bu=new mt;class Ba{constructor(t=new mt,r=new mt(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ua)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=Ua.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(Ua.copy(this.origin).addScaledVector(this.direction,r),Ua.distanceToSquared(t))}distanceSqToSegment(t,r,s,l){mh.copy(t).add(r).multiplyScalar(.5),kc.copy(r).sub(t).normalize(),Ya.copy(this.origin).sub(mh);const u=.5*t.distanceTo(r),b=-this.direction.dot(kc),T=Ya.dot(this.direction),O=-Ya.dot(kc),U=Ya.lengthSq(),Q=Math.abs(1-b*b);let oe,fe,ye,Me;if(Q>0)if(oe=b*O-T,fe=b*T-O,Me=u*Q,oe>=0)if(fe>=-Me)if(fe<=Me){const Ue=1/Q;oe*=Ue,fe*=Ue,ye=oe*(oe+b*fe+2*T)+fe*(b*oe+fe+2*O)+U}else fe=u,oe=Math.max(0,-(b*fe+T)),ye=-oe*oe+fe*(fe+2*O)+U;else fe=-u,oe=Math.max(0,-(b*fe+T)),ye=-oe*oe+fe*(fe+2*O)+U;else fe<=-Me?(oe=Math.max(0,-(-b*u+T)),fe=oe>0?-u:Math.min(Math.max(-u,-O),u),ye=-oe*oe+fe*(fe+2*O)+U):fe<=Me?(oe=0,fe=Math.min(Math.max(-u,-O),u),ye=fe*(fe+2*O)+U):(oe=Math.max(0,-(b*u+T)),fe=oe>0?u:Math.min(Math.max(-u,-O),u),ye=-oe*oe+fe*(fe+2*O)+U);else fe=b>0?-u:u,oe=Math.max(0,-(b*fe+T)),ye=-oe*oe+fe*(fe+2*O)+U;return s&&s.copy(this.origin).addScaledVector(this.direction,oe),l&&l.copy(mh).addScaledVector(kc,fe),ye}intersectSphere(t,r){Ua.subVectors(t.center,this.origin);const s=Ua.dot(this.direction),l=Ua.dot(Ua)-s*s,u=t.radius*t.radius;if(l>u)return null;const b=Math.sqrt(u-l),T=s-b,O=s+b;return O<0?null:this.at(T<0?O:T,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/r;return s>=0?s:null}intersectPlane(t,r){const s=this.distanceToPlane(t);return null===s?null:this.at(s,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let s,l,u,b,T,O;const U=1/this.direction.x,Q=1/this.direction.y,oe=1/this.direction.z,fe=this.origin;return U>=0?(s=(t.min.x-fe.x)*U,l=(t.max.x-fe.x)*U):(s=(t.max.x-fe.x)*U,l=(t.min.x-fe.x)*U),Q>=0?(u=(t.min.y-fe.y)*Q,b=(t.max.y-fe.y)*Q):(u=(t.max.y-fe.y)*Q,b=(t.min.y-fe.y)*Q),s>b||u>l||((u>s||isNaN(s))&&(s=u),(b<l||isNaN(l))&&(l=b),oe>=0?(T=(t.min.z-fe.z)*oe,O=(t.max.z-fe.z)*oe):(T=(t.max.z-fe.z)*oe,O=(t.min.z-fe.z)*oe),s>O||T>l)||((T>s||s!=s)&&(s=T),(O<l||l!=l)&&(l=O),l<0)?null:this.at(s>=0?s:l,r)}intersectsBox(t){return null!==this.intersectBox(t,Ua)}intersectTriangle(t,r,s,l,u){pu.subVectors(r,t),Bf.subVectors(s,t),Bu.crossVectors(pu,Bf);let T,b=this.direction.dot(Bu);if(b>0){if(l)return null;T=1}else{if(!(b<0))return null;T=-1,b=-b}Ya.subVectors(this.origin,t);const O=T*this.direction.dot(Bf.crossVectors(Ya,Bf));if(O<0)return null;const U=T*this.direction.dot(pu.cross(Ya));if(U<0||O+U>b)return null;const Q=-T*Ya.dot(Bu);return Q<0?null:this.at(Q/b,u)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Mi{constructor(t,r,s,l,u,b,T,O,U,Q,oe,fe,ye,Me,Ue,Pe){Mi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,r,s,l,u,b,T,O,U,Q,oe,fe,ye,Me,Ue,Pe)}set(t,r,s,l,u,b,T,O,U,Q,oe,fe,ye,Me,Ue,Pe){const De=this.elements;return De[0]=t,De[4]=r,De[8]=s,De[12]=l,De[1]=u,De[5]=b,De[9]=T,De[13]=O,De[2]=U,De[6]=Q,De[10]=oe,De[14]=fe,De[3]=ye,De[7]=Me,De[11]=Ue,De[15]=Pe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mi).fromArray(this.elements)}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(t){const r=this.elements,s=t.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,s){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,r,s){return this.set(t.x,r.x,s.x,0,t.y,r.y,s.y,0,t.z,r.z,s.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,s=t.elements,l=1/jc.setFromMatrixColumn(t,0).length(),u=1/jc.setFromMatrixColumn(t,1).length(),b=1/jc.setFromMatrixColumn(t,2).length();return r[0]=s[0]*l,r[1]=s[1]*l,r[2]=s[2]*l,r[3]=0,r[4]=s[4]*u,r[5]=s[5]*u,r[6]=s[6]*u,r[7]=0,r[8]=s[8]*b,r[9]=s[9]*b,r[10]=s[10]*b,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,s=t.x,l=t.y,u=t.z,b=Math.cos(s),T=Math.sin(s),O=Math.cos(l),U=Math.sin(l),Q=Math.cos(u),oe=Math.sin(u);if("XYZ"===t.order){const fe=b*Q,ye=b*oe,Me=T*Q,Ue=T*oe;r[0]=O*Q,r[4]=-O*oe,r[8]=U,r[1]=ye+Me*U,r[5]=fe-Ue*U,r[9]=-T*O,r[2]=Ue-fe*U,r[6]=Me+ye*U,r[10]=b*O}else if("YXZ"===t.order){const fe=O*Q,ye=O*oe,Me=U*Q,Ue=U*oe;r[0]=fe+Ue*T,r[4]=Me*T-ye,r[8]=b*U,r[1]=b*oe,r[5]=b*Q,r[9]=-T,r[2]=ye*T-Me,r[6]=Ue+fe*T,r[10]=b*O}else if("ZXY"===t.order){const fe=O*Q,ye=O*oe,Me=U*Q,Ue=U*oe;r[0]=fe-Ue*T,r[4]=-b*oe,r[8]=Me+ye*T,r[1]=ye+Me*T,r[5]=b*Q,r[9]=Ue-fe*T,r[2]=-b*U,r[6]=T,r[10]=b*O}else if("ZYX"===t.order){const fe=b*Q,ye=b*oe,Me=T*Q,Ue=T*oe;r[0]=O*Q,r[4]=Me*U-ye,r[8]=fe*U+Ue,r[1]=O*oe,r[5]=Ue*U+fe,r[9]=ye*U-Me,r[2]=-U,r[6]=T*O,r[10]=b*O}else if("YZX"===t.order){const fe=b*O,ye=b*U,Me=T*O,Ue=T*U;r[0]=O*Q,r[4]=Ue-fe*oe,r[8]=Me*oe+ye,r[1]=oe,r[5]=b*Q,r[9]=-T*Q,r[2]=-U*Q,r[6]=ye*oe+Me,r[10]=fe-Ue*oe}else if("XZY"===t.order){const fe=b*O,ye=b*U,Me=T*O,Ue=T*U;r[0]=O*Q,r[4]=-oe,r[8]=U*Q,r[1]=fe*oe+Ue,r[5]=b*Q,r[9]=ye*oe-Me,r[2]=Me*oe-ye,r[6]=T*Q,r[10]=Ue*oe+fe}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ib,t,gh)}lookAt(t,r,s){const l=this.elements;return To.subVectors(t,r),0===To.lengthSq()&&(To.z=1),To.normalize(),ra.crossVectors(s,To),0===ra.lengthSq()&&(1===Math.abs(s.z)?To.x+=1e-4:To.z+=1e-4,To.normalize(),ra.crossVectors(s,To)),ra.normalize(),ps.crossVectors(To,ra),l[0]=ra.x,l[4]=ps.x,l[8]=To.x,l[1]=ra.y,l[5]=ps.y,l[9]=To.y,l[2]=ra.z,l[6]=ps.z,l[10]=To.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,l=r.elements,u=this.elements,b=s[0],T=s[4],O=s[8],U=s[12],Q=s[1],oe=s[5],fe=s[9],ye=s[13],Me=s[2],Ue=s[6],Pe=s[10],De=s[14],tt=s[3],st=s[7],nt=s[11],$t=s[15],Ct=l[0],Gt=l[4],qt=l[8],Tt=l[12],wt=l[1],gn=l[5],qn=l[9],Vn=l[13],Jn=l[2],gr=l[6],Zn=l[10],Lr=l[14],tr=l[3],qr=l[7],ei=l[11],mi=l[15];return u[0]=b*Ct+T*wt+O*Jn+U*tr,u[4]=b*Gt+T*gn+O*gr+U*qr,u[8]=b*qt+T*qn+O*Zn+U*ei,u[12]=b*Tt+T*Vn+O*Lr+U*mi,u[1]=Q*Ct+oe*wt+fe*Jn+ye*tr,u[5]=Q*Gt+oe*gn+fe*gr+ye*qr,u[9]=Q*qt+oe*qn+fe*Zn+ye*ei,u[13]=Q*Tt+oe*Vn+fe*Lr+ye*mi,u[2]=Me*Ct+Ue*wt+Pe*Jn+De*tr,u[6]=Me*Gt+Ue*gn+Pe*gr+De*qr,u[10]=Me*qt+Ue*qn+Pe*Zn+De*ei,u[14]=Me*Tt+Ue*Vn+Pe*Lr+De*mi,u[3]=tt*Ct+st*wt+nt*Jn+$t*tr,u[7]=tt*Gt+st*gn+nt*gr+$t*qr,u[11]=tt*qt+st*qn+nt*Zn+$t*ei,u[15]=tt*Tt+st*Vn+nt*Lr+$t*mi,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[4],l=t[8],u=t[12],b=t[1],T=t[5],O=t[9],U=t[13],Q=t[2],oe=t[6],fe=t[10],ye=t[14];return t[3]*(+u*O*oe-l*U*oe-u*T*fe+s*U*fe+l*T*ye-s*O*ye)+t[7]*(+r*O*ye-r*U*fe+u*b*fe-l*b*ye+l*U*Q-u*O*Q)+t[11]*(+r*U*oe-r*T*ye-u*b*oe+s*b*ye+u*T*Q-s*U*Q)+t[15]*(-l*T*Q-r*O*oe+r*T*fe+l*b*oe-s*b*fe+s*O*Q)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,s){const l=this.elements;return t.isVector3?(l[12]=t.x,l[13]=t.y,l[14]=t.z):(l[12]=t,l[13]=r,l[14]=s),this}invert(){const t=this.elements,r=t[0],s=t[1],l=t[2],u=t[3],b=t[4],T=t[5],O=t[6],U=t[7],Q=t[8],oe=t[9],fe=t[10],ye=t[11],Me=t[12],Ue=t[13],Pe=t[14],De=t[15],tt=oe*Pe*U-Ue*fe*U+Ue*O*ye-T*Pe*ye-oe*O*De+T*fe*De,st=Me*fe*U-Q*Pe*U-Me*O*ye+b*Pe*ye+Q*O*De-b*fe*De,nt=Q*Ue*U-Me*oe*U+Me*T*ye-b*Ue*ye-Q*T*De+b*oe*De,$t=Me*oe*O-Q*Ue*O-Me*T*fe+b*Ue*fe+Q*T*Pe-b*oe*Pe,Ct=r*tt+s*st+l*nt+u*$t;if(0===Ct)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Gt=1/Ct;return t[0]=tt*Gt,t[1]=(Ue*fe*u-oe*Pe*u-Ue*l*ye+s*Pe*ye+oe*l*De-s*fe*De)*Gt,t[2]=(T*Pe*u-Ue*O*u+Ue*l*U-s*Pe*U-T*l*De+s*O*De)*Gt,t[3]=(oe*O*u-T*fe*u-oe*l*U+s*fe*U+T*l*ye-s*O*ye)*Gt,t[4]=st*Gt,t[5]=(Q*Pe*u-Me*fe*u+Me*l*ye-r*Pe*ye-Q*l*De+r*fe*De)*Gt,t[6]=(Me*O*u-b*Pe*u-Me*l*U+r*Pe*U+b*l*De-r*O*De)*Gt,t[7]=(b*fe*u-Q*O*u+Q*l*U-r*fe*U-b*l*ye+r*O*ye)*Gt,t[8]=nt*Gt,t[9]=(Me*oe*u-Q*Ue*u-Me*s*ye+r*Ue*ye+Q*s*De-r*oe*De)*Gt,t[10]=(b*Ue*u-Me*T*u+Me*s*U-r*Ue*U-b*s*De+r*T*De)*Gt,t[11]=(Q*T*u-b*oe*u-Q*s*U+r*oe*U+b*s*ye-r*T*ye)*Gt,t[12]=$t*Gt,t[13]=(Q*Ue*l-Me*oe*l+Me*s*fe-r*Ue*fe-Q*s*Pe+r*oe*Pe)*Gt,t[14]=(Me*T*l-b*Ue*l-Me*s*O+r*Ue*O+b*s*Pe-r*T*Pe)*Gt,t[15]=(b*oe*l-Q*T*l+Q*s*O-r*oe*O-b*s*fe+r*T*fe)*Gt,this}scale(t){const r=this.elements,s=t.x,l=t.y,u=t.z;return r[0]*=s,r[4]*=l,r[8]*=u,r[1]*=s,r[5]*=l,r[9]*=u,r[2]*=s,r[6]*=l,r[10]*=u,r[3]*=s,r[7]*=l,r[11]*=u,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,r,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const s=Math.cos(r),l=Math.sin(r),u=1-s,b=t.x,T=t.y,O=t.z,U=u*b,Q=u*T;return this.set(U*b+s,U*T-l*O,U*O+l*T,0,U*T+l*O,Q*T+s,Q*O-l*b,0,U*O-l*T,Q*O+l*b,u*O*O+s,0,0,0,0,1),this}makeScale(t,r,s){return this.set(t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,r,s,l,u,b){return this.set(1,s,u,0,t,1,b,0,r,l,1,0,0,0,0,1),this}compose(t,r,s){const l=this.elements,u=r._x,b=r._y,T=r._z,O=r._w,U=u+u,Q=b+b,oe=T+T,fe=u*U,ye=u*Q,Me=u*oe,Ue=b*Q,Pe=b*oe,De=T*oe,tt=O*U,st=O*Q,nt=O*oe,$t=s.x,Ct=s.y,Gt=s.z;return l[0]=(1-(Ue+De))*$t,l[1]=(ye+nt)*$t,l[2]=(Me-st)*$t,l[3]=0,l[4]=(ye-nt)*Ct,l[5]=(1-(fe+De))*Ct,l[6]=(Pe+tt)*Ct,l[7]=0,l[8]=(Me+st)*Gt,l[9]=(Pe-tt)*Gt,l[10]=(1-(fe+Ue))*Gt,l[11]=0,l[12]=t.x,l[13]=t.y,l[14]=t.z,l[15]=1,this}decompose(t,r,s){const l=this.elements;let u=jc.set(l[0],l[1],l[2]).length();const b=jc.set(l[4],l[5],l[6]).length(),T=jc.set(l[8],l[9],l[10]).length();this.determinant()<0&&(u=-u),t.x=l[12],t.y=l[13],t.z=l[14],Ia.copy(this);const U=1/u,Q=1/b,oe=1/T;return Ia.elements[0]*=U,Ia.elements[1]*=U,Ia.elements[2]*=U,Ia.elements[4]*=Q,Ia.elements[5]*=Q,Ia.elements[6]*=Q,Ia.elements[8]*=oe,Ia.elements[9]*=oe,Ia.elements[10]*=oe,r.setFromRotationMatrix(Ia),s.x=u,s.y=b,s.z=T,this}makePerspective(t,r,s,l,u,b,T=_t){const O=this.elements,U=2*u/(r-t),Q=2*u/(s-l),oe=(r+t)/(r-t),fe=(s+l)/(s-l);let ye,Me;if(T===_t)ye=-(b+u)/(b-u),Me=-2*b*u/(b-u);else{if(2001!==T)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+T);ye=-b/(b-u),Me=-b*u/(b-u)}return O[0]=U,O[4]=0,O[8]=oe,O[12]=0,O[1]=0,O[5]=Q,O[9]=fe,O[13]=0,O[2]=0,O[6]=0,O[10]=ye,O[14]=Me,O[3]=0,O[7]=0,O[11]=-1,O[15]=0,this}makeOrthographic(t,r,s,l,u,b,T=_t){const O=this.elements,U=1/(r-t),Q=1/(s-l),oe=1/(b-u),fe=(r+t)*U,ye=(s+l)*Q;let Me,Ue;if(T===_t)Me=(b+u)*oe,Ue=-2*oe;else{if(2001!==T)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+T);Me=u*oe,Ue=-1*oe}return O[0]=2*U,O[4]=0,O[8]=0,O[12]=-fe,O[1]=0,O[5]=2*Q,O[9]=0,O[13]=-ye,O[2]=0,O[6]=0,O[10]=Ue,O[14]=-Me,O[3]=0,O[7]=0,O[11]=0,O[15]=1,this}equals(t){const r=this.elements,s=t.elements;for(let l=0;l<16;l++)if(r[l]!==s[l])return!1;return!0}fromArray(t,r=0){for(let s=0;s<16;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t[r+9]=s[9],t[r+10]=s[10],t[r+11]=s[11],t[r+12]=s[12],t[r+13]=s[13],t[r+14]=s[14],t[r+15]=s[15],t}}const jc=new mt,Ia=new Mi,Ib=new mt(0,0,0),gh=new mt(1,1,1),ra=new mt,ps=new mt,To=new mt,yh=new Mi,vh=new en;let Za=(()=>{class y{constructor(r=0,s=0,l=0,u=y.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=s,this._z=l,this._order=u}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,s,l,u=this._order){return this._x=r,this._y=s,this._z=l,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,s=this._order,l=!0){const u=r.elements,b=u[0],T=u[4],O=u[8],U=u[1],Q=u[5],oe=u[9],fe=u[2],ye=u[6],Me=u[10];switch(s){case"XYZ":this._y=Math.asin(Qt(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(-oe,Me),this._z=Math.atan2(-T,b)):(this._x=Math.atan2(ye,Q),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(oe,-1,1)),Math.abs(oe)<.9999999?(this._y=Math.atan2(O,Me),this._z=Math.atan2(U,Q)):(this._y=Math.atan2(-fe,b),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(ye,-1,1)),Math.abs(ye)<.9999999?(this._y=Math.atan2(-fe,Me),this._z=Math.atan2(-T,Q)):(this._y=0,this._z=Math.atan2(U,b));break;case"ZYX":this._y=Math.asin(-Qt(fe,-1,1)),Math.abs(fe)<.9999999?(this._x=Math.atan2(ye,Me),this._z=Math.atan2(U,b)):(this._x=0,this._z=Math.atan2(-T,Q));break;case"YZX":this._z=Math.asin(Qt(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(-oe,Q),this._y=Math.atan2(-fe,b)):(this._x=0,this._y=Math.atan2(O,Me));break;case"XZY":this._z=Math.asin(-Qt(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(ye,Q),this._y=Math.atan2(O,b)):(this._x=Math.atan2(-oe,Me),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===l&&this._onChangeCallback(),this}setFromQuaternion(r,s,l){return yh.makeRotationFromQuaternion(r),this.setFromRotationMatrix(yh,s,l)}setFromVector3(r,s=this._order){return this.set(r.x,r.y,r.z,s)}reorder(r){return vh.setFromEuler(this),this.setFromQuaternion(vh,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return y.DEFAULT_ORDER="XYZ",y})();class mu{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Fc=0;const gc=new mt,Vu=new en,wl=new Mi,Gu=new mt,zu=new mt,gu=new mt,Vf=new en,_h=new mt(1,0,0),Gf=new mt(0,1,0),Sd=new mt(0,0,1),zf={type:"added"},Um={type:"removed"},Sa={type:"childadded",child:null},Ed={type:"childremoved",child:null};let Qs=(()=>{class y extends xn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fc++}),this.uuid=at(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=y.DEFAULT_UP.clone();const r=new mt,s=new Za,l=new en,u=new mt(1,1,1);s._onChange(function b(){l.setFromEuler(s,!1)}),l._onChange(function T(){s.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Mi},normalMatrix:{value:new Gi}}),this.matrix=new Mi,this.matrixWorld=new Mi,this.matrixAutoUpdate=y.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=y.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,s){this.quaternion.setFromAxisAngle(r,s)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,s){return Vu.setFromAxisAngle(r,s),this.quaternion.multiply(Vu),this}rotateOnWorldAxis(r,s){return Vu.setFromAxisAngle(r,s),this.quaternion.premultiply(Vu),this}rotateX(r){return this.rotateOnAxis(_h,r)}rotateY(r){return this.rotateOnAxis(Gf,r)}rotateZ(r){return this.rotateOnAxis(Sd,r)}translateOnAxis(r,s){return gc.copy(r).applyQuaternion(this.quaternion),this.position.add(gc.multiplyScalar(s)),this}translateX(r){return this.translateOnAxis(_h,r)}translateY(r){return this.translateOnAxis(Gf,r)}translateZ(r){return this.translateOnAxis(Sd,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(wl.copy(this.matrixWorld).invert())}lookAt(r,s,l){r.isVector3?Gu.copy(r):Gu.set(r,s,l);const u=this.parent;this.updateWorldMatrix(!0,!1),zu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wl.lookAt(zu,Gu,this.up):wl.lookAt(Gu,zu,this.up),this.quaternion.setFromRotationMatrix(wl),u&&(wl.extractRotation(u.matrixWorld),Vu.setFromRotationMatrix(wl),this.quaternion.premultiply(Vu.invert()))}add(r){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.removeFromParent(),r.parent=this,this.children.push(r),r.dispatchEvent(zf),Sa.child=r,this.dispatchEvent(Sa),Sa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(r);return-1!==s&&(r.parent=null,this.children.splice(s,1),r.dispatchEvent(Um),Ed.child=r,this.dispatchEvent(Ed),Ed.child=null),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){return this.remove(...this.children)}attach(r){return this.updateWorldMatrix(!0,!1),wl.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),wl.multiply(r.parent.matrixWorld)),r.applyMatrix4(wl),r.removeFromParent(),r.parent=this,this.children.push(r),r.updateWorldMatrix(!1,!0),r.dispatchEvent(zf),Sa.child=r,this.dispatchEvent(Sa),Sa.child=null,this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,s){if(this[r]===s)return this;for(let l=0,u=this.children.length;l<u;l++){const T=this.children[l].getObjectByProperty(r,s);if(void 0!==T)return T}}getObjectsByProperty(r,s,l=[]){this[r]===s&&l.push(this);const u=this.children;for(let b=0,T=u.length;b<T;b++)u[b].getObjectsByProperty(r,s,l);return l}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zu,r,gu),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zu,Vf,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(r){r(this);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].traverseVisible(r)}traverseAncestors(r){const s=this.parent;null!==s&&(r(s),s.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,r=!0);const s=this.children;for(let l=0,u=s.length;l<u;l++)s[l].updateMatrixWorld(r)}updateWorldMatrix(r,s){const l=this.parent;if(!0===r&&null!==l&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let b=0,T=u.length;b<T;b++)u[b].updateWorldMatrix(!1,!0)}}toJSON(r){const s=void 0===r||"string"==typeof r,l={};s&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function b(O,U){return void 0===O[U.uuid]&&(O[U.uuid]=U.toJSON(r)),U.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(O=>({boxInitialized:O.boxInitialized,boxMin:O.box.min.toArray(),boxMax:O.box.max.toArray(),sphereInitialized:O.sphereInitialized,sphereRadius:O.sphere.radius,sphereCenter:O.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(r),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(r)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=b(r.geometries,this.geometry);const O=this.geometry.parameters;if(void 0!==O&&void 0!==O.shapes){const U=O.shapes;if(Array.isArray(U))for(let Q=0,oe=U.length;Q<oe;Q++)b(r.shapes,U[Q]);else b(r.shapes,U)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(b(r.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const O=[];for(let U=0,Q=this.material.length;U<Q;U++)O.push(b(r.materials,this.material[U]));u.material=O}else u.material=b(r.materials,this.material);if(this.children.length>0){u.children=[];for(let O=0;O<this.children.length;O++)u.children.push(this.children[O].toJSON(r).object)}if(this.animations.length>0){u.animations=[];for(let O=0;O<this.animations.length;O++)u.animations.push(b(r.animations,this.animations[O]))}if(s){const O=T(r.geometries),U=T(r.materials),Q=T(r.textures),oe=T(r.images),fe=T(r.shapes),ye=T(r.skeletons),Me=T(r.animations),Ue=T(r.nodes);O.length>0&&(l.geometries=O),U.length>0&&(l.materials=U),Q.length>0&&(l.textures=Q),oe.length>0&&(l.images=oe),fe.length>0&&(l.shapes=fe),ye.length>0&&(l.skeletons=ye),Me.length>0&&(l.animations=Me),Ue.length>0&&(l.nodes=Ue)}return l.object=u,l;function T(O){const U=[];for(const Q in O){const oe=O[Q];delete oe.metadata,U.push(oe)}return U}}clone(r){return(new this.constructor).copy(this,r)}copy(r,s=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations.slice(),this.userData=JSON.parse(JSON.stringify(r.userData)),!0===s)for(let l=0;l<r.children.length;l++)this.add(r.children[l].clone());return this}}return y.DEFAULT_UP=new mt(0,1,0),y.DEFAULT_MATRIX_AUTO_UPDATE=!0,y.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,y})();const Vl=new mt,yc=new mt,$f=new mt,vc=new mt,yu=new mt,$u=new mt,pe=new mt,Ae=new mt,Fe=new mt,Ee=new mt,ze=new Ds,Et=new Ds,Ot=new Ds;class Nn{constructor(t=new mt,r=new mt,s=new mt){this.a=t,this.b=r,this.c=s}static getNormal(t,r,s,l){l.subVectors(s,r),Vl.subVectors(t,r),l.cross(Vl);const u=l.lengthSq();return u>0?l.multiplyScalar(1/Math.sqrt(u)):l.set(0,0,0)}static getBarycoord(t,r,s,l,u){Vl.subVectors(l,r),yc.subVectors(s,r),$f.subVectors(t,r);const b=Vl.dot(Vl),T=Vl.dot(yc),O=Vl.dot($f),U=yc.dot(yc),Q=yc.dot($f),oe=b*U-T*T;if(0===oe)return u.set(0,0,0),null;const fe=1/oe,ye=(U*O-T*Q)*fe,Me=(b*Q-T*O)*fe;return u.set(1-ye-Me,Me,ye)}static containsPoint(t,r,s,l){return null!==this.getBarycoord(t,r,s,l,vc)&&vc.x>=0&&vc.y>=0&&vc.x+vc.y<=1}static getInterpolation(t,r,s,l,u,b,T,O){return null===this.getBarycoord(t,r,s,l,vc)?(O.x=0,O.y=0,"z"in O&&(O.z=0),"w"in O&&(O.w=0),null):(O.setScalar(0),O.addScaledVector(u,vc.x),O.addScaledVector(b,vc.y),O.addScaledVector(T,vc.z),O)}static getInterpolatedAttribute(t,r,s,l,u,b){return ze.setScalar(0),Et.setScalar(0),Ot.setScalar(0),ze.fromBufferAttribute(t,r),Et.fromBufferAttribute(t,s),Ot.fromBufferAttribute(t,l),b.setScalar(0),b.addScaledVector(ze,u.x),b.addScaledVector(Et,u.y),b.addScaledVector(Ot,u.z),b}static isFrontFacing(t,r,s,l){return Vl.subVectors(s,r),yc.subVectors(t,r),Vl.cross(yc).dot(l)<0}set(t,r,s){return this.a.copy(t),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(t,r,s,l){return this.a.copy(t[r]),this.b.copy(t[s]),this.c.copy(t[l]),this}setFromAttributeAndIndices(t,r,s,l){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,l),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Vl.subVectors(this.c,this.b),yc.subVectors(this.a,this.b),.5*Vl.cross(yc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Nn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return Nn.getBarycoord(t,this.a,this.b,this.c,r)}getInterpolation(t,r,s,l,u){return Nn.getInterpolation(t,this.a,this.b,this.c,r,s,l,u)}containsPoint(t){return Nn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Nn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const s=this.a,l=this.b,u=this.c;let b,T;yu.subVectors(l,s),$u.subVectors(u,s),Ae.subVectors(t,s);const O=yu.dot(Ae),U=$u.dot(Ae);if(O<=0&&U<=0)return r.copy(s);Fe.subVectors(t,l);const Q=yu.dot(Fe),oe=$u.dot(Fe);if(Q>=0&&oe<=Q)return r.copy(l);const fe=O*oe-Q*U;if(fe<=0&&O>=0&&Q<=0)return b=O/(O-Q),r.copy(s).addScaledVector(yu,b);Ee.subVectors(t,u);const ye=yu.dot(Ee),Me=$u.dot(Ee);if(Me>=0&&ye<=Me)return r.copy(u);const Ue=ye*U-O*Me;if(Ue<=0&&U>=0&&Me<=0)return T=U/(U-Me),r.copy(s).addScaledVector($u,T);const Pe=Q*Me-ye*oe;if(Pe<=0&&oe-Q>=0&&ye-Me>=0)return pe.subVectors(u,l),T=(oe-Q)/(oe-Q+(ye-Me)),r.copy(l).addScaledVector(pe,T);const De=1/(Pe+Ue+fe);return b=Ue*De,T=fe*De,r.copy(s).addScaledVector(yu,b).addScaledVector($u,T)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cn={h:0,s:0,l:0},Dr={h:0,s:0,l:0};function pi(y,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?y+6*(t-y)*r:r<.5?t:r<2/3?y+6*(t-y)*(2/3-r):y}class Sr{constructor(t,r,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,s)}set(t,r,s){if(void 0===r&&void 0===s){const l=t;l&&l.isColor?this.copy(l):"number"==typeof l?this.setHex(l):"string"==typeof l&&this.setStyle(l)}else this.setRGB(t,r,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Ii){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Es.toWorkingColorSpace(this,r),this}setRGB(t,r,s,l=Es.workingColorSpace){return this.r=t,this.g=r,this.b=s,Es.toWorkingColorSpace(this,l),this}setHSL(t,r,s,l=Es.workingColorSpace){if(t=Sn(t,1),r=Qt(r,0,1),s=Qt(s,0,1),0===r)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+r):s+r-s*r,b=2*s-u;this.r=pi(b,u,t+1/3),this.g=pi(b,u,t),this.b=pi(b,u,t-1/3)}return Es.toWorkingColorSpace(this,l),this}setStyle(t,r=Ii){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let l;if(l=/^(\w+)\(([^\)]*)\)/.exec(t)){let u;const T=l[2];switch(l[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,r);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,r);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(t)){const u=l[1],b=u.length;if(3===b)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,r);if(6===b)return this.setHex(parseInt(u,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=Ii){const s=ur[t.toLowerCase()];return void 0!==s?this.setHex(s,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Bl(t.r),this.g=Bl(t.g),this.b=Bl(t.b),this}copyLinearToSRGB(t){return this.r=hu(t.r),this.g=hu(t.g),this.b=hu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ii){return Es.fromWorkingColorSpace(Qr.copy(this),t),65536*Math.round(Qt(255*Qr.r,0,255))+256*Math.round(Qt(255*Qr.g,0,255))+Math.round(Qt(255*Qr.b,0,255))}getHexString(t=Ii){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Es.workingColorSpace){Es.fromWorkingColorSpace(Qr.copy(this),r);const s=Qr.r,l=Qr.g,u=Qr.b,b=Math.max(s,l,u),T=Math.min(s,l,u);let O,U;const Q=(T+b)/2;if(T===b)O=0,U=0;else{const oe=b-T;switch(U=Q<=.5?oe/(b+T):oe/(2-b-T),b){case s:O=(l-u)/oe+(l<u?6:0);break;case l:O=(u-s)/oe+2;break;case u:O=(s-l)/oe+4}O/=6}return t.h=O,t.s=U,t.l=Q,t}getRGB(t,r=Es.workingColorSpace){return Es.fromWorkingColorSpace(Qr.copy(this),r),t.r=Qr.r,t.g=Qr.g,t.b=Qr.b,t}getStyle(t=Ii){Es.fromWorkingColorSpace(Qr.copy(this),t);const r=Qr.r,s=Qr.g,l=Qr.b;return t!==Ii?`color(${t} ${r.toFixed(3)} ${s.toFixed(3)} ${l.toFixed(3)})`:`rgb(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*l)})`}offsetHSL(t,r,s){return this.getHSL(Cn),this.setHSL(Cn.h+t,Cn.s+r,Cn.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(Cn),t.getHSL(Dr);const s=Gr(Cn.h,Dr.h,r),l=Gr(Cn.s,Dr.s,r),u=Gr(Cn.l,Dr.l,r);return this.setHSL(s,l,u),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const r=this.r,s=this.g,l=this.b,u=t.elements;return this.r=u[0]*r+u[3]*s+u[6]*l,this.g=u[1]*r+u[4]*s+u[7]*l,this.b=u[2]*r+u[5]*s+u[8]*l,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new Sr;Sr.NAMES=ur;let Ao=0;class Rs extends xn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ao++}),this.uuid=at(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Sr(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ir,this.stencilZFail=Ir,this.stencilZPass=Ir,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){const s=t[r];if(void 0===s){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const l=this[r];void 0!==l?l&&l.isColor?l.set(s):l&&l.isVector3&&s&&s.isVector3?l.copy(s):this[r]=s:console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`)}}toJSON(t){const r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function l(u){const b=[];for(const T in u){const O=u[T];delete O.metadata,b.push(O)}return b}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ir&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Ir&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Ir&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),r){const u=l(t.textures),b=l(t.images);u.length>0&&(s.textures=u),b.length>0&&(s.images=b)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let s=null;if(null!==r){const l=r.length;s=new Array(l);for(let u=0;u!==l;++u)s[u]=r[u].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class io extends Rs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Sr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const jo=new mt,Gl=new hr;let tE=0;class Ls{constructor(t,r,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:tE++}),this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=B,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,s){t*=this.itemSize,s*=r.itemSize;for(let l=0,u=this.itemSize;l<u;l++)this.array[t+l]=r.array[s+l];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,s=this.count;r<s;r++)Gl.fromBufferAttribute(this,r),Gl.applyMatrix3(t),this.setXY(r,Gl.x,Gl.y);else if(3===this.itemSize)for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyMatrix3(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}applyMatrix4(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyMatrix4(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyNormalMatrix(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.transformDirection(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let s=this.array[t*this.itemSize+r];return this.normalized&&(s=Cs(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=ci(s,this.array)),this.array[t*this.itemSize+r]=s,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=Cs(r,this.array)),r}setX(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=Cs(r,this.array)),r}setY(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=Cs(r,this.array)),r}setZ(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=Cs(r,this.array)),r}setW(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,s){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array)),this.array[t+0]=r,this.array[t+1]=s,this}setXYZ(t,r,s,l){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),l=ci(l,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=l,this}setXYZW(t,r,s,l,u){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),l=ci(l,this.array),u=ci(u,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=l,this.array[t+3]=u,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class vu extends Ls{constructor(t,r,s){super(new Uint16Array(t),r,s)}}class Hf extends Ls{constructor(t,r,s){super(new Uint32Array(t),r,s)}}class _i extends Ls{constructor(t,r,s){super(new Float32Array(t),r,s)}}let Vm=0;const Qa=new Mi,ul=new Qs,ec=new mt,el=new Si,bh=new Si,Ea=new mt;class Zi extends xn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vm++}),this.uuid=at(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(jf(t)?Hf:vu)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,s=0){this.groups.push({start:t,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new Gi).getNormalMatrix(t);s.applyNormalMatrix(u),s.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(t),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qa.makeRotationFromQuaternion(t),this.applyMatrix4(Qa),this}rotateX(t){return Qa.makeRotationX(t),this.applyMatrix4(Qa),this}rotateY(t){return Qa.makeRotationY(t),this.applyMatrix4(Qa),this}rotateZ(t){return Qa.makeRotationZ(t),this.applyMatrix4(Qa),this}translate(t,r,s){return Qa.makeTranslation(t,r,s),this.applyMatrix4(Qa),this}scale(t,r,s){return Qa.makeScale(t,r,s),this.applyMatrix4(Qa),this}lookAt(t){return ul.lookAt(t),ul.updateMatrix(),this.applyMatrix4(ul.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ec).negate(),this.translate(ec.x,ec.y,ec.z),this}setFromPoints(t){const r=this.getAttribute("position");if(void 0===r){const s=[];for(let l=0,u=t.length;l<u;l++){const b=t[l];s.push(b.x,b.y,b.z||0)}this.setAttribute("position",new _i(s,3))}else{const s=Math.min(t.length,r.count);for(let l=0;l<s;l++){const u=t[l];r.setXYZ(l,u.x,u.y,u.z||0)}t.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Si);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new mt(-1/0,-1/0,-1/0),new mt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let s=0,l=r.length;s<l;s++)el.setFromBufferAttribute(r[s]),this.morphTargetsRelative?(Ea.addVectors(this.boundingBox.min,el.min),this.boundingBox.expandByPoint(Ea),Ea.addVectors(this.boundingBox.max,el.max),this.boundingBox.expandByPoint(Ea)):(this.boundingBox.expandByPoint(el.min),this.boundingBox.expandByPoint(el.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zs);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new mt,1/0);if(t){const s=this.boundingSphere.center;if(el.setFromBufferAttribute(t),r)for(let u=0,b=r.length;u<b;u++)bh.setFromBufferAttribute(r[u]),this.morphTargetsRelative?(Ea.addVectors(el.min,bh.min),el.expandByPoint(Ea),Ea.addVectors(el.max,bh.max),el.expandByPoint(Ea)):(el.expandByPoint(bh.min),el.expandByPoint(bh.max));el.getCenter(s);let l=0;for(let u=0,b=t.count;u<b;u++)Ea.fromBufferAttribute(t,u),l=Math.max(l,s.distanceToSquared(Ea));if(r)for(let u=0,b=r.length;u<b;u++){const T=r[u],O=this.morphTargetsRelative;for(let U=0,Q=T.count;U<Q;U++)Ea.fromBufferAttribute(T,U),O&&(ec.fromBufferAttribute(t,U),Ea.add(ec)),l=Math.max(l,s.distanceToSquared(Ea))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=r.position,l=r.normal,u=r.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ls(new Float32Array(4*s.count),4));const b=this.getAttribute("tangent"),T=[],O=[];for(let qt=0;qt<s.count;qt++)T[qt]=new mt,O[qt]=new mt;const U=new mt,Q=new mt,oe=new mt,fe=new hr,ye=new hr,Me=new hr,Ue=new mt,Pe=new mt;function De(qt,Tt,wt){U.fromBufferAttribute(s,qt),Q.fromBufferAttribute(s,Tt),oe.fromBufferAttribute(s,wt),fe.fromBufferAttribute(u,qt),ye.fromBufferAttribute(u,Tt),Me.fromBufferAttribute(u,wt),Q.sub(U),oe.sub(U),ye.sub(fe),Me.sub(fe);const gn=1/(ye.x*Me.y-Me.x*ye.y);isFinite(gn)&&(Ue.copy(Q).multiplyScalar(Me.y).addScaledVector(oe,-ye.y).multiplyScalar(gn),Pe.copy(oe).multiplyScalar(ye.x).addScaledVector(Q,-Me.x).multiplyScalar(gn),T[qt].add(Ue),T[Tt].add(Ue),T[wt].add(Ue),O[qt].add(Pe),O[Tt].add(Pe),O[wt].add(Pe))}let tt=this.groups;0===tt.length&&(tt=[{start:0,count:t.count}]);for(let qt=0,Tt=tt.length;qt<Tt;++qt){const wt=tt[qt],gn=wt.start;for(let Vn=gn,Jn=gn+wt.count;Vn<Jn;Vn+=3)De(t.getX(Vn+0),t.getX(Vn+1),t.getX(Vn+2))}const st=new mt,nt=new mt,$t=new mt,Ct=new mt;function Gt(qt){$t.fromBufferAttribute(l,qt),Ct.copy($t);const Tt=T[qt];st.copy(Tt),st.sub($t.multiplyScalar($t.dot(Tt))).normalize(),nt.crossVectors(Ct,Tt);const gn=nt.dot(O[qt])<0?-1:1;b.setXYZW(qt,st.x,st.y,st.z,gn)}for(let qt=0,Tt=tt.length;qt<Tt;++qt){const wt=tt[qt],gn=wt.start;for(let Vn=gn,Jn=gn+wt.count;Vn<Jn;Vn+=3)Gt(t.getX(Vn+0)),Gt(t.getX(Vn+1)),Gt(t.getX(Vn+2))}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(void 0!==r){let s=this.getAttribute("normal");if(void 0===s)s=new Ls(new Float32Array(3*r.count),3),this.setAttribute("normal",s);else for(let fe=0,ye=s.count;fe<ye;fe++)s.setXYZ(fe,0,0,0);const l=new mt,u=new mt,b=new mt,T=new mt,O=new mt,U=new mt,Q=new mt,oe=new mt;if(t)for(let fe=0,ye=t.count;fe<ye;fe+=3){const Me=t.getX(fe+0),Ue=t.getX(fe+1),Pe=t.getX(fe+2);l.fromBufferAttribute(r,Me),u.fromBufferAttribute(r,Ue),b.fromBufferAttribute(r,Pe),Q.subVectors(b,u),oe.subVectors(l,u),Q.cross(oe),T.fromBufferAttribute(s,Me),O.fromBufferAttribute(s,Ue),U.fromBufferAttribute(s,Pe),T.add(Q),O.add(Q),U.add(Q),s.setXYZ(Me,T.x,T.y,T.z),s.setXYZ(Ue,O.x,O.y,O.z),s.setXYZ(Pe,U.x,U.y,U.z)}else for(let fe=0,ye=r.count;fe<ye;fe+=3)l.fromBufferAttribute(r,fe+0),u.fromBufferAttribute(r,fe+1),b.fromBufferAttribute(r,fe+2),Q.subVectors(b,u),oe.subVectors(l,u),Q.cross(oe),s.setXYZ(fe+0,Q.x,Q.y,Q.z),s.setXYZ(fe+1,Q.x,Q.y,Q.z),s.setXYZ(fe+2,Q.x,Q.y,Q.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let r=0,s=t.count;r<s;r++)Ea.fromBufferAttribute(t,r),Ea.normalize(),t.setXYZ(r,Ea.x,Ea.y,Ea.z)}toNonIndexed(){function t(T,O){const U=T.array,Q=T.itemSize,oe=T.normalized,fe=new U.constructor(O.length*Q);let ye=0,Me=0;for(let Ue=0,Pe=O.length;Ue<Pe;Ue++){ye=T.isInterleavedBufferAttribute?O[Ue]*T.data.stride+T.offset:O[Ue]*Q;for(let De=0;De<Q;De++)fe[Me++]=U[ye++]}return new Ls(fe,Q,oe)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Zi,s=this.index.array,l=this.attributes;for(const T in l){const U=t(l[T],s);r.setAttribute(T,U)}const u=this.morphAttributes;for(const T in u){const O=[],U=u[T];for(let Q=0,oe=U.length;Q<oe;Q++){const ye=t(U[Q],s);O.push(ye)}r.morphAttributes[T]=O}r.morphTargetsRelative=this.morphTargetsRelative;const b=this.groups;for(let T=0,O=b.length;T<O;T++){const U=b[T];r.addGroup(U.start,U.count,U.materialIndex)}return r}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const O=this.parameters;for(const U in O)void 0!==O[U]&&(t[U]=O[U]);return t}t.data={attributes:{}};const r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const O in s)t.data.attributes[O]=s[O].toJSON(t.data);const l={};let u=!1;for(const O in this.morphAttributes){const U=this.morphAttributes[O],Q=[];for(let oe=0,fe=U.length;oe<fe;oe++)Q.push(U[oe].toJSON(t.data));Q.length>0&&(l[O]=Q,u=!0)}u&&(t.data.morphAttributes=l,t.data.morphTargetsRelative=this.morphTargetsRelative);const b=this.groups;b.length>0&&(t.data.groups=JSON.parse(JSON.stringify(b)));const T=this.boundingSphere;return null!==T&&(t.data.boundingSphere={center:T.center.toArray(),radius:T.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(r));const l=t.attributes;for(const U in l)this.setAttribute(U,l[U].clone(r));const u=t.morphAttributes;for(const U in u){const Q=[],oe=u[U];for(let fe=0,ye=oe.length;fe<ye;fe++)Q.push(oe[fe].clone(r));this.morphAttributes[U]=Q}this.morphTargetsRelative=t.morphTargetsRelative;const b=t.groups;for(let U=0,Q=b.length;U<Q;U++){const oe=b[U];this.addGroup(oe.start,oe.count,oe.materialIndex)}const T=t.boundingBox;null!==T&&(this.boundingBox=T.clone());const O=t.boundingSphere;return null!==O&&(this.boundingSphere=O.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hu=new Mi,Wu=new Ba,Wf=new zs,Xy=new mt,Td=new mt,xh=new mt,wh=new mt,Ad=new mt,Bc=new mt,qy=new mt,Xf=new mt;class cs extends Qs{constructor(t=new Zi,r=new io){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,b=l.length;u<b;u++){const T=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=u}}}}getVertexPosition(t,r){const s=this.geometry,u=s.morphAttributes.position,b=s.morphTargetsRelative;r.fromBufferAttribute(s.attributes.position,t);const T=this.morphTargetInfluences;if(u&&T){Bc.set(0,0,0);for(let O=0,U=u.length;O<U;O++){const Q=T[O];0!==Q&&(Ad.fromBufferAttribute(u[O],t),Bc.addScaledVector(b?Ad:Ad.sub(r),Q))}r.add(Bc)}return r}raycast(t,r){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),Wf.copy(s.boundingSphere),Wf.applyMatrix4(u),Wu.copy(t.ray).recast(t.near),(!1!==Wf.containsPoint(Wu.origin)||!(null===Wu.intersectSphere(Wf,Xy)||Wu.origin.distanceToSquared(Xy)>(t.far-t.near)**2))&&(Hu.copy(u).invert(),Wu.copy(t.ray).applyMatrix4(Hu),(null===s.boundingBox||!1!==Wu.intersectsBox(s.boundingBox))&&this._computeIntersections(t,r,Wu)))}_computeIntersections(t,r,s){let l;const u=this.geometry,b=this.material,T=u.index,O=u.attributes.position,U=u.attributes.uv,Q=u.attributes.uv1,oe=u.attributes.normal,fe=u.groups,ye=u.drawRange;if(null!==T)if(Array.isArray(b))for(let Me=0,Ue=fe.length;Me<Ue;Me++){const Pe=fe[Me],De=b[Pe.materialIndex];for(let nt=Math.max(Pe.start,ye.start),$t=Math.min(T.count,Math.min(Pe.start+Pe.count,ye.start+ye.count));nt<$t;nt+=3)l=qf(this,De,t,s,U,Q,oe,T.getX(nt),T.getX(nt+1),T.getX(nt+2)),l&&(l.faceIndex=Math.floor(nt/3),l.face.materialIndex=Pe.materialIndex,r.push(l))}else for(let Pe=Math.max(0,ye.start),De=Math.min(T.count,ye.start+ye.count);Pe<De;Pe+=3)l=qf(this,b,t,s,U,Q,oe,T.getX(Pe),T.getX(Pe+1),T.getX(Pe+2)),l&&(l.faceIndex=Math.floor(Pe/3),r.push(l));else if(void 0!==O)if(Array.isArray(b))for(let Me=0,Ue=fe.length;Me<Ue;Me++){const Pe=fe[Me],De=b[Pe.materialIndex];for(let nt=Math.max(Pe.start,ye.start),$t=Math.min(O.count,Math.min(Pe.start+Pe.count,ye.start+ye.count));nt<$t;nt+=3)l=qf(this,De,t,s,U,Q,oe,nt,nt+1,nt+2),l&&(l.faceIndex=Math.floor(nt/3),l.face.materialIndex=Pe.materialIndex,r.push(l))}else for(let Pe=Math.max(0,ye.start),De=Math.min(O.count,ye.start+ye.count);Pe<De;Pe+=3)l=qf(this,b,t,s,U,Q,oe,Pe,Pe+1,Pe+2),l&&(l.faceIndex=Math.floor(Pe/3),r.push(l))}}function qf(y,t,r,s,l,u,b,T,O,U){y.getVertexPosition(T,Td),y.getVertexPosition(O,xh),y.getVertexPosition(U,wh);const Q=function Ky(y,t,r,s,l,u,b,T){let O;if(O=1===t.side?s.intersectTriangle(b,u,l,!0,T):s.intersectTriangle(l,u,b,0===t.side,T),null===O)return null;Xf.copy(T),Xf.applyMatrix4(y.matrixWorld);const U=r.ray.origin.distanceTo(Xf);return U<r.near||U>r.far?null:{distance:U,point:Xf.clone(),object:y}}(y,t,r,s,Td,xh,wh,qy);if(Q){const oe=new mt;Nn.getBarycoord(qy,Td,xh,wh,oe),l&&(Q.uv=Nn.getInterpolatedAttribute(l,T,O,U,oe,new hr)),u&&(Q.uv1=Nn.getInterpolatedAttribute(u,T,O,U,oe,new hr)),b&&(Q.normal=Nn.getInterpolatedAttribute(b,T,O,U,oe,new mt),Q.normal.dot(s.direction)>0&&Q.normal.multiplyScalar(-1));const fe={a:T,b:O,c:U,normal:new mt,materialIndex:0};Nn.getNormal(Td,xh,wh,fe.normal),Q.face=fe,Q.barycoord=oe}return Q}class _c extends Zi{constructor(t=1,r=1,s=1,l=1,u=1,b=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:s,widthSegments:l,heightSegments:u,depthSegments:b};const T=this;l=Math.floor(l),u=Math.floor(u),b=Math.floor(b);const O=[],U=[],Q=[],oe=[];let fe=0,ye=0;function Me(Ue,Pe,De,tt,st,nt,$t,Ct,Gt,qt,Tt){const wt=nt/Gt,gn=$t/qt,qn=nt/2,Vn=$t/2,Jn=Ct/2,gr=Gt+1,Zn=qt+1;let Lr=0,tr=0;const qr=new mt;for(let ei=0;ei<Zn;ei++){const mi=ei*gn-Vn;for(let qi=0;qi<gr;qi++)qr[Ue]=(qi*wt-qn)*tt,qr[Pe]=mi*st,qr[De]=Jn,U.push(qr.x,qr.y,qr.z),qr[Ue]=0,qr[Pe]=0,qr[De]=Ct>0?1:-1,Q.push(qr.x,qr.y,qr.z),oe.push(qi/Gt),oe.push(1-ei/qt),Lr+=1}for(let ei=0;ei<qt;ei++)for(let mi=0;mi<Gt;mi++){const us=fe+mi+gr*(ei+1),yr=fe+(mi+1)+gr*(ei+1),Er=fe+(mi+1)+gr*ei;O.push(fe+mi+gr*ei,us,Er),O.push(us,yr,Er),tr+=6}T.addGroup(ye,tr,Tt),ye+=tr,fe+=Lr}Me("z","y","x",-1,-1,s,r,t,b,u,0),Me("z","y","x",1,-1,s,r,-t,b,u,1),Me("x","z","y",1,1,t,s,r,l,b,2),Me("x","z","y",1,-1,t,s,-r,l,b,3),Me("x","y","z",1,-1,t,r,s,l,u,4),Me("x","y","z",-1,-1,t,r,-s,l,u,5),this.setIndex(O),this.setAttribute("position",new _i(U,3)),this.setAttribute("normal",new _i(Q,3)),this.setAttribute("uv",new _i(oe,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _c(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Cd(y){const t={};for(const r in y){t[r]={};for(const s in y[r]){const l=y[r][s];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][s]=null):t[r][s]=l.clone():t[r][s]=Array.isArray(l)?l.slice():l}}return t}function tl(y){const t={};for(let r=0;r<y.length;r++){const s=Cd(y[r]);for(const l in s)t[l]=s[l]}return t}function Yy(y){const t=y.getRenderTarget();return null===t?y.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Es.workingColorSpace}const Lb={clone:Cd,merge:tl};class Sl extends Rs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Cd(t.uniforms),this.uniformsGroups=function Ob(y){const t=[];for(let r=0;r<y.length;r++)t.push(y[r].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const l in this.uniforms){const b=this.uniforms[l].value;r.uniforms[l]=b&&b.isTexture?{type:"t",value:b.toJSON(t).uuid}:b&&b.isColor?{type:"c",value:b.getHex()}:b&&b.isVector2?{type:"v2",value:b.toArray()}:b&&b.isVector3?{type:"v3",value:b.toArray()}:b&&b.isVector4?{type:"v4",value:b.toArray()}:b&&b.isMatrix3?{type:"m3",value:b.toArray()}:b&&b.isMatrix4?{type:"m4",value:b.toArray()}:{value:b}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const s={};for(const l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}class xo extends Qs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mi,this.projectionMatrix=new Mi,this.projectionMatrixInverse=new Mi,this.coordinateSystem=_t}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const jr=new mt,Li=new hr,Zo=new hr;class co extends xo{constructor(t=50,r=1,s=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=l,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=2*Re*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*ke*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Re*Math.atan(Math.tan(.5*ke*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,r,s){jr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(jr.x,jr.y).multiplyScalar(-t/jr.z),jr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(jr.x,jr.y).multiplyScalar(-t/jr.z)}getViewSize(t,r){return this.getViewBounds(t,Li,Zo),r.subVectors(Zo,Li)}setViewOffset(t,r,s,l,u,b){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=l,this.view.width=u,this.view.height=b,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(.5*ke*this.fov)/this.zoom,s=2*r,l=this.aspect*s,u=-.5*l;const b=this.view;if(null!==this.view&&this.view.enabled){const O=b.fullWidth,U=b.fullHeight;u+=b.offsetX*l/O,r-=b.offsetY*s/U,l*=b.width/O,s*=b.height/U}const T=this.filmOffset;0!==T&&(u+=t*T/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+l,r,r-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class Xu extends Qs{constructor(t,r,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const l=new co(-90,1,t,r);l.layers=this.layers,this.add(l);const u=new co(-90,1,t,r);u.layers=this.layers,this.add(u);const b=new co(-90,1,t,r);b.layers=this.layers,this.add(b);const T=new co(-90,1,t,r);T.layers=this.layers,this.add(T);const O=new co(-90,1,t,r);O.layers=this.layers,this.add(O);const U=new co(-90,1,t,r);U.layers=this.layers,this.add(U)}updateCoordinateSystem(){const t=this.coordinateSystem,r=this.children.concat(),[s,l,u,b,T,O]=r;for(const U of r)this.remove(U);if(t===_t)s.up.set(0,1,0),s.lookAt(1,0,0),l.up.set(0,1,0),l.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),b.up.set(0,0,1),b.lookAt(0,-1,0),T.up.set(0,1,0),T.lookAt(0,0,1),O.up.set(0,1,0),O.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);s.up.set(0,-1,0),s.lookAt(-1,0,0),l.up.set(0,-1,0),l.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),b.up.set(0,0,-1),b.lookAt(0,-1,0),T.up.set(0,-1,0),T.lookAt(0,0,1),O.up.set(0,-1,0),O.lookAt(0,0,-1)}for(const U of r)this.add(U),U.updateMatrixWorld()}update(t,r){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:l}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[u,b,T,O,U,Q]=this.children,oe=t.getRenderTarget(),fe=t.getActiveCubeFace(),ye=t.getActiveMipmapLevel(),Me=t.xr.enabled;t.xr.enabled=!1;const Ue=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,l),t.render(r,u),t.setRenderTarget(s,1,l),t.render(r,b),t.setRenderTarget(s,2,l),t.render(r,T),t.setRenderTarget(s,3,l),t.render(r,O),t.setRenderTarget(s,4,l),t.render(r,U),s.texture.generateMipmaps=Ue,t.setRenderTarget(s,5,l),t.render(r,Q),t.setRenderTarget(oe,fe,ye),t.xr.enabled=Me,s.texture.needsPMREMUpdate=!0}}class so extends no{constructor(t,r,s,l,u,b,T,O,U,Q){super(t=void 0!==t?t:[],r=void 0!==r?r:rn,s,l,u,b,T,O,U,Q),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class sa extends Se{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1};this.texture=new so([s,s,s,s,s,s],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:wn}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new _c(5,5,5),u=new Sl({name:"CubemapFromEquirect",uniforms:Cd(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=r;const b=new cs(l,u),T=r.minFilter;return r.minFilter===sr&&(r.minFilter=wn),new Xu(1,10,this).update(t,b),r.minFilter=T,b.geometry.dispose(),b.material.dispose(),this}clear(t,r,s,l){const u=t.getRenderTarget();for(let b=0;b<6;b++)t.setRenderTarget(this,b),t.clear(r,s,l);t.setRenderTarget(u)}}class Ma extends Qs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xi={type:"move"};class qu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const s of t.hand.values())this._getHandJoint(r,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,s){let l=null,u=null,b=null;const T=this._targetRay,O=this._grip,U=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(U&&t.hand){b=!0;for(const Ue of t.hand.values()){const Pe=r.getJointPose(Ue,s),De=this._getHandJoint(U,Ue);null!==Pe&&(De.matrix.fromArray(Pe.transform.matrix),De.matrix.decompose(De.position,De.rotation,De.scale),De.matrixWorldNeedsUpdate=!0,De.jointRadius=Pe.radius),De.visible=null!==Pe}const fe=U.joints["index-finger-tip"].position.distanceTo(U.joints["thumb-tip"].position),ye=.02,Me=.005;U.inputState.pinching&&fe>ye+Me?(U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!U.inputState.pinching&&fe<=ye-Me&&(U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==O&&t.gripSpace&&(u=r.getPose(t.gripSpace,s),null!==u&&(O.matrix.fromArray(u.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,u.linearVelocity?(O.hasLinearVelocity=!0,O.linearVelocity.copy(u.linearVelocity)):O.hasLinearVelocity=!1,u.angularVelocity?(O.hasAngularVelocity=!0,O.angularVelocity.copy(u.angularVelocity)):O.hasAngularVelocity=!1));null!==T&&(l=r.getPose(t.targetRaySpace,s),null===l&&null!==u&&(l=u),null!==l&&(T.matrix.fromArray(l.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,l.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(l.linearVelocity)):T.hasLinearVelocity=!1,l.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(l.angularVelocity)):T.hasAngularVelocity=!1,this.dispatchEvent(Xi)))}return null!==T&&(T.visible=null!==l),null!==O&&(O.visible=null!==u),null!==U&&(U.visible=null!==b),this}_getHandJoint(t,r){if(void 0===t.joints[r.jointName]){const s=new Ma;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[r.jointName]=s,t.add(s)}return t.joints[r.jointName]}}class Co extends Qs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Za,this.environmentIntensity=1,this.environmentRotation=new Za,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class bc{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=at()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,s){t*=this.stride,s*=r.stride;for(let l=0,u=this.stride;l<u;l++)this.array[t+l]=r.array[s+l];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=at()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(r,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=at()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oa=new mt;class Va{constructor(t,r,s,l=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=s,this.normalized=l}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,s=this.data.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.applyMatrix4(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.applyNormalMatrix(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.transformDirection(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}getComponent(t,r){let s=this.array[t*this.data.stride+this.offset+r];return this.normalized&&(s=Cs(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=ci(s,this.array)),this.data.array[t*this.data.stride+this.offset+r]=s,this}setX(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=Cs(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=Cs(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=Cs(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=Cs(r,this.array)),r}setXY(t,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this}setXYZ(t,r,s,l){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),l=ci(l,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=l,this}setXYZW(t,r,s,l,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),l=ci(l,this.array),u=ci(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=l,this.data.array[t+3]=u,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const l=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[l+u])}return new Ls(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Va(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const l=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[l+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Pd=new mt,Zy=new Ds,Jy=new Ds,zm=new mt,$m=new Mi,Yf=new mt,Eh=new zs,kb=new Mi,Qy=new Ba;class jb extends cs{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=un,this.bindMatrix=new Mi,this.bindMatrixInverse=new Mi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Si),this.boundingBox.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Yf),this.boundingBox.expandByPoint(Yf)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new zs),this.boundingSphere.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Yf),this.boundingSphere.expandByPoint(Yf)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){const l=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Eh.copy(this.boundingSphere),Eh.applyMatrix4(l),!1!==t.ray.intersectsSphere(Eh)&&(kb.copy(l).invert(),Qy.copy(t.ray).applyMatrix4(kb),(null===this.boundingBox||!1!==Qy.intersectsBox(this.boundingBox))&&this._computeIntersections(t,r,Qy)))}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ds,r=this.geometry.attributes.skinWeight;for(let s=0,l=r.count;s<l;s++){t.fromBufferAttribute(r,s);const u=1/t.manhattanLength();u!==1/0?t.multiplyScalar(u):t.set(1,0,0,0),r.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===un?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,r){const s=this.skeleton,l=this.geometry;Zy.fromBufferAttribute(l.attributes.skinIndex,t),Jy.fromBufferAttribute(l.attributes.skinWeight,t),Pd.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let u=0;u<4;u++){const b=Jy.getComponent(u);if(0!==b){const T=Zy.getComponent(u);$m.multiplyMatrices(s.bones[T].matrixWorld,s.boneInverses[T]),r.addScaledVector(zm.copy(Pd).applyMatrix4($m),b)}}return r.applyMatrix4(this.bindMatrixInverse)}}class ev extends Qs{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xu extends no{constructor(t=null,r=1,s=1,l,u,b,T,O,U=an,Q=an,oe,fe){super(null,b,T,O,U,Q,l,u,oe,fe),this.isDataTexture=!0,this.image={data:t,width:r,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fb=new Mi,iE=new Mi;class Hm{constructor(t=[],r=[]){this.uuid=at(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,l=this.bones.length;s<l;s++)this.boneInverses.push(new Mi)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const s=new Mi;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,r=this.boneInverses,s=this.boneMatrices,l=this.boneTexture;for(let u=0,b=t.length;u<b;u++)Fb.multiplyMatrices(t[u]?t[u].matrixWorld:iE,r[u]),Fb.toArray(s,16*u);null!==l&&(l.needsUpdate=!0)}clone(){return new Hm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const s=new xu(r,t,t,Ft,B);return s.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=s,this}getBoneByName(t){for(let r=0,s=this.bones.length;r<s;r++){const l=this.bones[r];if(l.name===t)return l}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let s=0,l=t.bones.length;s<l;s++){const u=t.bones[s];let b=r[u];void 0===b&&(console.warn("THREE.Skeleton: No bone found with UUID:",u),b=new ev),this.bones.push(b),this.boneInverses.push((new Mi).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,s=this.boneInverses;for(let l=0,u=r.length;l<u;l++)t.bones.push(r[l].uuid),t.boneInverses.push(s[l].toArray());return t}}class Mh extends Ls{constructor(t,r,s,l=1){super(t,r,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=l}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Th=new Mi,Ub=new Mi,Wm=[],Xm=new Si,tv=new Mi,Zf=new cs,Jf=new zs;class Bb extends cs{constructor(t,r,s){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Mh(new Float32Array(16*s),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let l=0;l<s;l++)this.setMatrixAt(l,tv)}computeBoundingBox(){const t=this.geometry,r=this.count;null===this.boundingBox&&(this.boundingBox=new Si),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Th),Xm.copy(t.boundingBox).applyMatrix4(Th),this.boundingBox.union(Xm)}computeBoundingSphere(){const t=this.geometry,r=this.count;null===this.boundingSphere&&(this.boundingSphere=new zs),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Th),Jf.copy(t.boundingSphere).applyMatrix4(Th),this.boundingSphere.union(Jf)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,r){const s=r.morphTargetInfluences,l=this.morphTexture.source.data.data,b=t*(s.length+1)+1;for(let T=0;T<s.length;T++)s[T]=l[b+T]}raycast(t,r){const s=this.matrixWorld,l=this.count;if(Zf.geometry=this.geometry,Zf.material=this.material,void 0!==Zf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Jf.copy(this.boundingSphere),Jf.applyMatrix4(s),!1!==t.ray.intersectsSphere(Jf)))for(let u=0;u<l;u++){this.getMatrixAt(u,Th),Ub.multiplyMatrices(s,Th),Zf.matrixWorld=Ub,Zf.raycast(t,Wm);for(let b=0,T=Wm.length;b<T;b++){const O=Wm[b];O.instanceId=u,O.object=this,r.push(O)}Wm.length=0}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new Mh(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,r){const s=r.morphTargetInfluences,l=s.length+1;null===this.morphTexture&&(this.morphTexture=new xu(new Float32Array(l*this.count),l,this.count,ot,B));const u=this.morphTexture.source.data.data;let b=0;for(let U=0;U<s.length;U++)b+=s[U];const O=l*t;u[O]=this.geometry.morphTargetsRelative?1:1-b,u.set(s,O+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const nv=new mt,Vb=new mt,rv=new Gi;class Sc{constructor(t=new mt(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,s,l){return this.normal.set(t,r,s),this.constant=l,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,s){const l=nv.subVectors(s,r).cross(Vb.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(l,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){const s=t.delta(nv),l=this.normal.dot(s);if(0===l)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;const u=-(t.start.dot(this.normal)+this.constant)/l;return u<0||u>1?null:r.copy(t.start).addScaledVector(s,u)}intersectsLine(t){const r=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return r<0&&s>0||s<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const s=r||rv.getNormalMatrix(t),l=this.coplanarPoint(nv).applyMatrix4(t),u=this.normal.applyMatrix3(s).normalize();return this.constant=-l.dot(u),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const wu=new zs,Qf=new mt;class ep{constructor(t=new Sc,r=new Sc,s=new Sc,l=new Sc,u=new Sc,b=new Sc){this.planes=[t,r,s,l,u,b]}set(t,r,s,l,u,b){const T=this.planes;return T[0].copy(t),T[1].copy(r),T[2].copy(s),T[3].copy(l),T[4].copy(u),T[5].copy(b),this}copy(t){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,r=_t){const s=this.planes,l=t.elements,u=l[0],b=l[1],T=l[2],O=l[3],U=l[4],Q=l[5],oe=l[6],fe=l[7],ye=l[8],Me=l[9],Ue=l[10],Pe=l[11],De=l[12],tt=l[13],st=l[14],nt=l[15];if(s[0].setComponents(O-u,fe-U,Pe-ye,nt-De).normalize(),s[1].setComponents(O+u,fe+U,Pe+ye,nt+De).normalize(),s[2].setComponents(O+b,fe+Q,Pe+Me,nt+tt).normalize(),s[3].setComponents(O-b,fe-Q,Pe-Me,nt-tt).normalize(),s[4].setComponents(O-T,fe-oe,Pe-Ue,nt-st).normalize(),r===_t)s[5].setComponents(O+T,fe+oe,Pe+Ue,nt+st).normalize();else{if(2001!==r)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);s[5].setComponents(T,oe,Ue,st).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),wu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const r=t.geometry;null===r.boundingSphere&&r.computeBoundingSphere(),wu.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(wu)}intersectsSprite(t){return wu.center.set(0,0,0),wu.radius=.7071067811865476,wu.applyMatrix4(t.matrixWorld),this.intersectsSphere(wu)}intersectsSphere(t){const r=this.planes,s=t.center,l=-t.radius;for(let u=0;u<6;u++)if(r[u].distanceToPoint(s)<l)return!1;return!0}intersectsBox(t){const r=this.planes;for(let s=0;s<6;s++){const l=r[s];if(Qf.x=l.normal.x>0?t.max.x:t.min.x,Qf.y=l.normal.y>0?t.max.y:t.min.y,Qf.z=l.normal.z>0?t.max.z:t.min.z,l.distanceToPoint(Qf)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Ta extends Rs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Sr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const rl=new mt,Ch=new mt,Zm=new Mi,Ld=new Ba,Su=new zs,Dh=new mt,Ih=new mt;class nc extends Qs{constructor(t=new Zi,r=new Ta){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[0];for(let l=1,u=r.count;l<u;l++)rl.fromBufferAttribute(r,l-1),Ch.fromBufferAttribute(r,l),s[l]=s[l-1],s[l]+=rl.distanceTo(Ch);t.setAttribute("lineDistance",new _i(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const s=this.geometry,l=this.matrixWorld,u=t.params.Line.threshold,b=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Su.copy(s.boundingSphere),Su.applyMatrix4(l),Su.radius+=u,!1===t.ray.intersectsSphere(Su))return;Zm.copy(l).invert(),Ld.copy(t.ray).applyMatrix4(Zm);const T=u/((this.scale.x+this.scale.y+this.scale.z)/3),O=T*T,U=this.isLineSegments?2:1,Q=s.index,fe=s.attributes.position;if(null!==Q){const ye=Math.max(0,b.start),Me=Math.min(Q.count,b.start+b.count);for(let Ue=ye,Pe=Me-1;Ue<Pe;Ue+=U){const De=Q.getX(Ue),tt=Q.getX(Ue+1),st=Nd(this,t,Ld,O,De,tt,Ue);st&&r.push(st)}if(this.isLineLoop){const Ue=Q.getX(Me-1),Pe=Q.getX(ye),De=Nd(this,t,Ld,O,Ue,Pe,Me-1);De&&r.push(De)}}else{const ye=Math.max(0,b.start),Me=Math.min(fe.count,b.start+b.count);for(let Ue=ye,Pe=Me-1;Ue<Pe;Ue+=U){const De=Nd(this,t,Ld,O,Ue,Ue+1,Ue);De&&r.push(De)}if(this.isLineLoop){const Ue=Nd(this,t,Ld,O,Me-1,ye,Me-1);Ue&&r.push(Ue)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,b=l.length;u<b;u++){const T=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=u}}}}}function Nd(y,t,r,s,l,u,b){const T=y.geometry.attributes.position;if(rl.fromBufferAttribute(T,l),Ch.fromBufferAttribute(T,u),r.distanceSqToSegment(rl,Ch,Dh,Ih)>s)return;Dh.applyMatrix4(y.matrixWorld);const U=t.ray.origin.distanceTo(Dh);return U<t.near||U>t.far?void 0:{distance:U,point:Ih.clone().applyMatrix4(y.matrixWorld),index:b,face:null,faceIndex:null,barycoord:null,object:y}}const Tc=new mt,Wi=new mt;class il extends nc{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[];for(let l=0,u=r.count;l<u;l+=2)Tc.fromBufferAttribute(r,l),Wi.fromBufferAttribute(r,l+1),s[l]=0===l?0:s[l-1],s[l+1]=s[l]+Tc.distanceTo(Wi);t.setAttribute("lineDistance",new _i(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rp extends nc{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Eu extends Rs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Sr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const zb=new Mi,Jm=new Ba,ip=new zs,sp=new mt;class kd extends Qs{constructor(t=new Zi,r=new Eu){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){const s=this.geometry,l=this.matrixWorld,u=t.params.Points.threshold,b=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),ip.copy(s.boundingSphere),ip.applyMatrix4(l),ip.radius+=u,!1===t.ray.intersectsSphere(ip))return;zb.copy(l).invert(),Jm.copy(t.ray).applyMatrix4(zb);const T=u/((this.scale.x+this.scale.y+this.scale.z)/3),O=T*T,U=s.index,oe=s.attributes.position;if(null!==U)for(let Me=Math.max(0,b.start),Ue=Math.min(U.count,b.start+b.count);Me<Ue;Me++){const Pe=U.getX(Me);sp.fromBufferAttribute(oe,Pe),Mu(sp,Pe,O,l,t,r,this)}else for(let Me=Math.max(0,b.start),Ue=Math.min(oe.count,b.start+b.count);Me<Ue;Me++)sp.fromBufferAttribute(oe,Me),Mu(sp,Me,O,l,t,r,this)}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const l=r[s[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,b=l.length;u<b;u++){const T=l[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=u}}}}}function Mu(y,t,r,s,l,u,b){const T=Jm.distanceSqToPoint(y);if(T<r){const O=new mt;Jm.closestPointToPoint(y,O),O.applyMatrix4(s);const U=l.ray.origin.distanceTo(O);if(U<l.near||U>l.far)return;u.push({distance:U,distanceToRay:Math.sqrt(T),point:O,index:t,face:null,faceIndex:null,barycoord:null,object:b})}}class eg extends no{constructor(t,r,s,l,u,b,T,O,U,Q=$e){if(Q!==$e&&Q!==pt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&Q===$e&&(s=k),void 0===s&&Q===pt&&(s=de),super(null,l,u,b,T,O,Q,s,U),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=void 0!==T?T:an,this.minFilter=void 0!==O?O:an,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Da(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const r=super.toJSON(t);return null!==this.compareFunction&&(r.compareFunction=this.compareFunction),r}}class rd extends Zi{constructor(t=1,r=1,s=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:s,heightSegments:l};const u=t/2,b=r/2,T=Math.floor(s),O=Math.floor(l),U=T+1,Q=O+1,oe=t/T,fe=r/O,ye=[],Me=[],Ue=[],Pe=[];for(let De=0;De<Q;De++){const tt=De*fe-b;for(let st=0;st<U;st++)Me.push(st*oe-u,-tt,0),Ue.push(0,0,1),Pe.push(st/T),Pe.push(1-De/O)}for(let De=0;De<O;De++)for(let tt=0;tt<T;tt++){const nt=tt+U*(De+1),$t=tt+1+U*(De+1),Ct=tt+1+U*De;ye.push(tt+U*De,nt,Ct),ye.push(nt,$t,Ct)}this.setIndex(ye),this.setAttribute("position",new _i(Me,3)),this.setAttribute("normal",new _i(Ue,3)),this.setAttribute("uv",new _i(Pe,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rd(t.width,t.height,t.widthSegments,t.heightSegments)}}class Fo extends Rs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Sr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ac extends Fo{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new hr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Sr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Sr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Sr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class fg extends Rs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Sr(16777215),this.specular=new Sr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class zh extends Rs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class wv extends Rs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Ic(y,t,r){return!y||!r&&y.constructor===t?y:"number"==typeof t.BYTES_PER_ELEMENT?new t(y):Array.prototype.slice.call(y)}function Ev(y){const r=y.length,s=new Array(r);for(let l=0;l!==r;++l)s[l]=l;return s.sort(function t(l,u){return y[l]-y[u]}),s}function yg(y,t,r){const s=y.length,l=new y.constructor(s);for(let u=0,b=0;b!==s;++u){const T=r[u]*t;for(let O=0;O!==t;++O)l[b++]=y[T+O]}return l}function vg(y,t,r,s){let l=1,u=y[0];for(;void 0!==u&&void 0===u[s];)u=y[l++];if(void 0===u)return;let b=u[s];if(void 0!==b)if(Array.isArray(b))do{b=u[s],void 0!==b&&(t.push(u.time),r.push(...b)),u=y[l++]}while(void 0!==u);else if(void 0!==b.toArray)do{b=u[s],void 0!==b&&(t.push(u.time),b.toArray(r,r.length)),u=y[l++]}while(void 0!==u);else do{b=u[s],void 0!==b&&(t.push(u.time),r.push(b)),u=y[l++]}while(void 0!==u)}class $h{constructor(t,r,s,l){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new r.constructor(s),this.sampleValues=r,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let s=this._cachedIndex,l=r[s],u=r[s-1];e:{t:{let b;n:{r:if(!(t<l)){for(let T=s+2;;){if(void 0===l){if(t<u)break r;return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===T)break;if(u=l,l=r[++s],t<l)break t}b=r.length;break n}if(t>=u)break e;{const T=r[1];t<T&&(s=2,u=T);for(let O=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===O)break;if(l=u,u=r[--s-1],t>=u)break t}b=s,s=0}}for(;s<b;){const T=s+b>>>1;t<r[T]?b=T:s=T+1}if(l=r[s],u=r[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,l)}return this.interpolate_(s,u,t,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=t*l;for(let b=0;b!==l;++b)r[b]=s[u+b];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n1 extends $h{constructor(t,r,s,l){super(t,r,s,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Eo,endingEnd:Eo}}intervalChanged_(t,r,s){const l=this.parameterPositions;let u=t-2,b=t+1,T=l[u],O=l[b];if(void 0===T)switch(this.getSettings_().endingStart){case it:u=t,T=2*r-s;break;case 2402:u=l.length-2,T=r+l[u]-l[u+1];break;default:u=t,T=s}if(void 0===O)switch(this.getSettings_().endingEnd){case it:b=t,O=2*s-r;break;case 2402:b=1,O=s+l[1]-l[0];break;default:b=t-1,O=r}const U=.5*(s-r),Q=this.valueSize;this._weightPrev=U/(r-T),this._weightNext=U/(O-s),this._offsetPrev=u*Q,this._offsetNext=b*Q}interpolate_(t,r,s,l){const u=this.resultBuffer,b=this.sampleValues,T=this.valueSize,O=t*T,U=O-T,Q=this._offsetPrev,oe=this._offsetNext,fe=this._weightPrev,ye=this._weightNext,Me=(s-r)/(l-r),Ue=Me*Me,Pe=Ue*Me,De=-fe*Pe+2*fe*Ue-fe*Me,tt=(1+fe)*Pe+(-1.5-2*fe)*Ue+(-.5+fe)*Me+1,st=(-1-ye)*Pe+(1.5+ye)*Ue+.5*Me,nt=ye*Pe-ye*Ue;for(let $t=0;$t!==T;++$t)u[$t]=De*b[Q+$t]+tt*b[U+$t]+st*b[O+$t]+nt*b[oe+$t];return u}}class r1 extends $h{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t,r,s,l){const u=this.resultBuffer,b=this.sampleValues,T=this.valueSize,O=t*T,U=O-T,Q=(s-r)/(l-r),oe=1-Q;for(let fe=0;fe!==T;++fe)u[fe]=b[U+fe]*oe+b[O+fe]*Q;return u}}class Tv extends $h{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t){return this.copySampleValue_(t-1)}}class lc{constructor(t,r,s,l){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ic(r,this.TimeBufferType),this.values=Ic(s,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let s;if(r.toJSON!==this.toJSON)s=r.toJSON(t);else{s={name:t.name,times:Ic(t.times,Array),values:Ic(t.values,Array)};const l=t.getInterpolation();l!==t.DefaultInterpolation&&(s.interpolation=l)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Tv(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new r1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new n1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Io:r=this.InterpolantFactoryMethodDiscrete;break;case No:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Io;case this.InterpolantFactoryMethodLinear:return No;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const r=this.times;for(let s=0,l=r.length;s!==l;++s)r[s]+=t}return this}scale(t){if(1!==t){const r=this.times;for(let s=0,l=r.length;s!==l;++s)r[s]*=t}return this}trim(t,r){const s=this.times,l=s.length;let u=0,b=l-1;for(;u!==l&&s[u]<t;)++u;for(;-1!==b&&s[b]>r;)--b;if(++b,0!==u||b!==l){u>=b&&(b=Math.max(b,1),u=b-1);const T=this.getValueSize();this.times=s.slice(u,b),this.values=this.values.slice(u*T,b*T)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,l=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let b=null;for(let T=0;T!==u;T++){const O=s[T];if("number"==typeof O&&isNaN(O)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,T,O),t=!1;break}if(null!==b&&b>O){console.error("THREE.KeyframeTrack: Out of order keys.",this,T,O,b),t=!1;break}b=O}if(void 0!==l&&function gg(y){return ArrayBuffer.isView(y)&&!(y instanceof DataView)}(l))for(let T=0,O=l.length;T!==O;++T){const U=l[T];if(isNaN(U)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,T,U),t=!1;break}}return t}optimize(){const t=this.times.slice(),r=this.values.slice(),s=this.getValueSize(),l=2302===this.getInterpolation(),u=t.length-1;let b=1;for(let T=1;T<u;++T){let O=!1;const U=t[T];if(U!==t[T+1]&&(1!==T||U!==t[0]))if(l)O=!0;else{const oe=T*s,fe=oe-s,ye=oe+s;for(let Me=0;Me!==s;++Me){const Ue=r[oe+Me];if(Ue!==r[fe+Me]||Ue!==r[ye+Me]){O=!0;break}}}if(O){if(T!==b){t[b]=t[T];const oe=T*s,fe=b*s;for(let ye=0;ye!==s;++ye)r[fe+ye]=r[oe+ye]}++b}}if(u>0){t[b]=t[u];for(let T=u*s,O=b*s,U=0;U!==s;++U)r[O+U]=r[T+U];++b}return b!==t.length?(this.times=t.slice(0,b),this.values=r.slice(0,b*s)):(this.times=t,this.values=r),this}clone(){const t=this.times.slice(),r=this.values.slice(),l=new(0,this.constructor)(this.name,t,r);return l.createInterpolant=this.createInterpolant,l}}lc.prototype.TimeBufferType=Float32Array,lc.prototype.ValueBufferType=Float32Array,lc.prototype.DefaultInterpolation=No;class Uo extends lc{constructor(t,r,s){super(t,r,s)}}Uo.prototype.ValueTypeName="bool",Uo.prototype.ValueBufferType=Array,Uo.prototype.DefaultInterpolation=Io,Uo.prototype.InterpolantFactoryMethodLinear=void 0,Uo.prototype.InterpolantFactoryMethodSmooth=void 0;class i1 extends lc{}i1.prototype.ValueTypeName="color";class Wd extends lc{}Wd.prototype.ValueTypeName="number";class cE extends $h{constructor(t,r,s,l){super(t,r,s,l)}interpolate_(t,r,s,l){const u=this.resultBuffer,b=this.sampleValues,T=this.valueSize,O=(s-r)/(l-r);let U=t*T;for(let Q=U+T;U!==Q;U+=4)en.slerpFlat(u,0,b,U-T,b,U,O);return u}}class id extends lc{InterpolantFactoryMethodLinear(t){return new cE(this.times,this.values,this.getValueSize(),t)}}id.prototype.ValueTypeName="quaternion",id.prototype.InterpolantFactoryMethodSmooth=void 0;class Hh extends lc{constructor(t,r,s){super(t,r,s)}}Hh.prototype.ValueTypeName="string",Hh.prototype.ValueBufferType=Array,Hh.prototype.DefaultInterpolation=Io,Hh.prototype.InterpolantFactoryMethodLinear=void 0,Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class Au extends lc{}Au.prototype.ValueTypeName="vector";class Hc{constructor(t="",r=-1,s=[],l=2500){this.name=t,this.tracks=s,this.duration=r,this.blendMode=l,this.uuid=at(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],s=t.tracks,l=1/(t.fps||1);for(let b=0,T=s.length;b!==T;++b)r.push(o1(s[b]).scale(l));const u=new this(t.name,t.duration,r,t.blendMode);return u.uuid=t.uuid,u}static toJSON(t){const r=[],s=t.tracks,l={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let u=0,b=s.length;u!==b;++u)r.push(lc.toJSON(s[u]));return l}static CreateFromMorphTargetSequence(t,r,s,l){const u=r.length,b=[];for(let T=0;T<u;T++){let O=[],U=[];O.push((T+u-1)%u,T,(T+1)%u),U.push(0,1,0);const Q=Ev(O);O=yg(O,1,Q),U=yg(U,1,Q),!l&&0===O[0]&&(O.push(u),U.push(U[0])),b.push(new Wd(".morphTargetInfluences["+r[T].name+"]",O,U).scale(1/s))}return new this(t,-1,b)}static findByName(t,r){let s=t;Array.isArray(t)||(s=t.geometry&&t.geometry.animations||t.animations);for(let l=0;l<s.length;l++)if(s[l].name===r)return s[l];return null}static CreateClipsFromMorphTargetSequences(t,r,s){const l={},u=/^([\w-]*?)([\d]+)$/;for(let T=0,O=t.length;T<O;T++){const U=t[T],Q=U.name.match(u);if(Q&&Q.length>1){const oe=Q[1];let fe=l[oe];fe||(l[oe]=fe=[]),fe.push(U)}}const b=[];for(const T in l)b.push(this.CreateFromMorphTargetSequence(T,l[T],r,s));return b}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(oe,fe,ye,Me,Ue){if(0!==ye.length){const Pe=[],De=[];vg(ye,Pe,De,Me),0!==Pe.length&&Ue.push(new oe(fe,Pe,De))}},l=[],u=t.name||"default",b=t.fps||30,T=t.blendMode;let O=t.length||-1;const U=t.hierarchy||[];for(let oe=0;oe<U.length;oe++){const fe=U[oe].keys;if(fe&&0!==fe.length)if(fe[0].morphTargets){const ye={};let Me;for(Me=0;Me<fe.length;Me++)if(fe[Me].morphTargets)for(let Ue=0;Ue<fe[Me].morphTargets.length;Ue++)ye[fe[Me].morphTargets[Ue]]=-1;for(const Ue in ye){const Pe=[],De=[];for(let tt=0;tt!==fe[Me].morphTargets.length;++tt){const st=fe[Me];Pe.push(st.time),De.push(st.morphTarget===Ue?1:0)}l.push(new Wd(".morphTargetInfluence["+Ue+"]",Pe,De))}O=ye.length*b}else{const ye=".bones["+r[oe].name+"]";s(Au,ye+".position",fe,"pos",l),s(id,ye+".quaternion",fe,"rot",l),s(Au,ye+".scale",fe,"scl",l)}}return 0===l.length?null:new this(u,O,l,T)}resetDuration(){let r=0;for(let s=0,l=this.tracks.length;s!==l;++s){const u=this.tracks[s];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o1(y){if(void 0===y.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function s1(y){switch(y.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wd;case"vector":case"vector2":case"vector3":case"vector4":return Au;case"color":return i1;case"quaternion":return id;case"bool":case"boolean":return Uo;case"string":return Hh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+y)}(y.type);if(void 0===y.times){const r=[],s=[];vg(y.keys,r,s,"value"),y.times=r,y.values=s}return void 0!==t.parse?t.parse(y):new t(y.name,y.times,y.values,y.interpolation)}const pl={enabled:!1,files:{},add:function(y,t){!1!==this.enabled&&(this.files[y]=t)},get:function(y){if(!1!==this.enabled)return this.files[y]},remove:function(y){delete this.files[y]},clear:function(){this.files={}}};class a1{constructor(t,r,s){const l=this;let O,u=!1,b=0,T=0;const U=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=s,this.itemStart=function(Q){T++,!1===u&&void 0!==l.onStart&&l.onStart(Q,b,T),u=!0},this.itemEnd=function(Q){b++,void 0!==l.onProgress&&l.onProgress(Q,b,T),b===T&&(u=!1,void 0!==l.onLoad&&l.onLoad())},this.itemError=function(Q){void 0!==l.onError&&l.onError(Q)},this.resolveURL=function(Q){return O?O(Q):Q},this.setURLModifier=function(Q){return O=Q,this},this.addHandler=function(Q,oe){return U.push(Q,oe),this},this.removeHandler=function(Q){const oe=U.indexOf(Q);return-1!==oe&&U.splice(oe,2),this},this.getHandler=function(Q){for(let oe=0,fe=U.length;oe<fe;oe+=2){const ye=U[oe],Me=U[oe+1];if(ye.global&&(ye.lastIndex=0),ye.test(Q))return Me}return null}}}const l1=new a1;let Oo=(()=>{class y{constructor(r){this.manager=void 0!==r?r:l1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,s){const l=this;return new Promise(function(u,b){l.load(r,u,s,b)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}return y.DEFAULT_MATERIAL_NAME="__DEFAULT",y})();const $l={};class Av extends Error{constructor(t,r){super(t),this.response=r}}class Tl extends Oo{constructor(t){super(t)}load(t,r,s,l){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=pl.get(t);if(void 0!==u)return this.manager.itemStart(t),setTimeout(()=>{r&&r(u),this.manager.itemEnd(t)},0),u;if(void 0!==$l[t])return void $l[t].push({onLoad:r,onProgress:s,onError:l});$l[t]=[],$l[t].push({onLoad:r,onProgress:s,onError:l});const b=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),T=this.mimeType,O=this.responseType;fetch(b).then(U=>{if(200===U.status||0===U.status){if(0===U.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===U.body||void 0===U.body.getReader)return U;const Q=$l[t],oe=U.body.getReader(),fe=U.headers.get("X-File-Size")||U.headers.get("Content-Length"),ye=fe?parseInt(fe):0,Me=0!==ye;let Ue=0;const Pe=new ReadableStream({start(De){!function tt(){oe.read().then(({done:st,value:nt})=>{if(st)De.close();else{Ue+=nt.byteLength;const $t=new ProgressEvent("progress",{lengthComputable:Me,loaded:Ue,total:ye});for(let Ct=0,Gt=Q.length;Ct<Gt;Ct++){const qt=Q[Ct];qt.onProgress&&qt.onProgress($t)}De.enqueue(nt),tt()}},st=>{De.error(st)})}()}});return new Response(Pe)}throw new Av(`fetch for "${U.url}" responded with ${U.status}: ${U.statusText}`,U)}).then(U=>{switch(O){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"document":return U.text().then(Q=>(new DOMParser).parseFromString(Q,T));case"json":return U.json();default:if(void 0===T)return U.text();{const oe=/charset="?([^;"\s]*)"?/i.exec(T),fe=oe&&oe[1]?oe[1].toLowerCase():void 0,ye=new TextDecoder(fe);return U.arrayBuffer().then(Me=>ye.decode(Me))}}}).then(U=>{pl.add(t,U);const Q=$l[t];delete $l[t];for(let oe=0,fe=Q.length;oe<fe;oe++){const ye=Q[oe];ye.onLoad&&ye.onLoad(U)}}).catch(U=>{const Q=$l[t];if(void 0===Q)throw this.manager.itemError(t),U;delete $l[t];for(let oe=0,fe=Q.length;oe<fe;oe++){const ye=Q[oe];ye.onError&&ye.onError(U)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class wp extends Oo{constructor(t){super(t)}load(t,r,s,l){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,b=pl.get(t);if(void 0!==b)return u.manager.itemStart(t),setTimeout(function(){r&&r(b),u.manager.itemEnd(t)},0),b;const T=_l("img");function O(){Q(),pl.add(t,this),r&&r(this),u.manager.itemEnd(t)}function U(oe){Q(),l&&l(oe),u.manager.itemError(t),u.manager.itemEnd(t)}function Q(){T.removeEventListener("load",O,!1),T.removeEventListener("error",U,!1)}return T.addEventListener("load",O,!1),T.addEventListener("error",U,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(T.crossOrigin=this.crossOrigin),u.manager.itemStart(t),T.src=t,T}}class c1 extends Oo{constructor(t){super(t)}load(t,r,s,l){const u=new no,b=new wp(this.manager);return b.setCrossOrigin(this.crossOrigin),b.setPath(this.path),b.load(t,function(T){u.image=T,u.needsUpdate=!0,void 0!==r&&r(u)},s,l),u}}class Wc extends Qs{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Sr(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(r.object.target=this.target.uuid),r}}const Sp=new Mi,Ep=new mt,Iv=new mt;class _g{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new hr(512,512),this.map=null,this.mapPass=null,this.matrix=new Mi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ep,this._frameExtents=new hr(1,1),this._viewportCount=1,this._viewports=[new Ds(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,s=this.matrix;Ep.setFromMatrixPosition(t.matrixWorld),r.position.copy(Ep),Iv.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Iv),r.updateMatrixWorld(),Sp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sp),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Sp)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Rv extends _g{constructor(){super(new co(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,s=2*Re*t.angle*this.focus,l=this.mapSize.width/this.mapSize.height,u=t.distance||r.far;(s!==r.fov||l!==r.aspect||u!==r.far)&&(r.fov=s,r.aspect=l,r.far=u,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Pv extends Wc{constructor(t,r,s=0,l=Math.PI/3,u=0,b=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qs.DEFAULT_UP),this.updateMatrix(),this.target=new Qs,this.distance=s,this.angle=l,this.penumbra=u,this.decay=b,this.map=null,this.shadow=new Rv}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const cc=new Mi,Wh=new mt,Mp=new mt;class dE extends _g{constructor(){super(new co(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new hr(4,2),this._viewportCount=6,this._viewports=[new Ds(2,1,1,1),new Ds(0,1,1,1),new Ds(3,1,1,1),new Ds(1,1,1,1),new Ds(3,0,1,1),new Ds(1,0,1,1)],this._cubeDirections=[new mt(1,0,0),new mt(-1,0,0),new mt(0,0,1),new mt(0,0,-1),new mt(0,1,0),new mt(0,-1,0)],this._cubeUps=[new mt(0,1,0),new mt(0,1,0),new mt(0,1,0),new mt(0,1,0),new mt(0,0,1),new mt(0,0,-1)]}updateMatrices(t,r=0){const s=this.camera,l=this.matrix,u=t.distance||s.far;u!==s.far&&(s.far=u,s.updateProjectionMatrix()),Wh.setFromMatrixPosition(t.matrixWorld),s.position.copy(Wh),Mp.copy(s.position),Mp.add(this._cubeDirections[r]),s.up.copy(this._cubeUps[r]),s.lookAt(Mp),s.updateMatrixWorld(),l.makeTranslation(-Wh.x,-Wh.y,-Wh.z),cc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cc)}}class u1 extends Wc{constructor(t,r,s=0,l=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=l,this.shadow=new dE}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class bg extends xo{constructor(t=-1,r=1,s=1,l=-1,u=.1,b=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=s,this.bottom=l,this.near=u,this.far=b,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,s,l,u,b){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=l,this.view.width=u,this.view.height=b,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let u=s-t,b=s+t,T=l+r,O=l-r;if(null!==this.view&&this.view.enabled){const U=(this.right-this.left)/this.view.fullWidth/this.zoom,Q=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=U*this.view.offsetX,b=u+U*this.view.width,T-=Q*this.view.offsetY,O=T-Q*this.view.height}this.projectionMatrix.makeOrthographic(u,b,T,O,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}class hE extends _g{constructor(){super(new bg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ov extends Wc{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qs.DEFAULT_UP),this.updateMatrix(),this.target=new Qs,this.shadow=new hE}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Lv extends Wc{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class Xc{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let r="";for(let s=0,l=t.length;s<l;s++)r+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}static resolveURL(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class wg extends Oo{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,s,l){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,b=pl.get(t);if(void 0!==b)return u.manager.itemStart(t),b.then?void b.then(U=>{r&&r(U),u.manager.itemEnd(t)}).catch(U=>{l&&l(U)}):(setTimeout(function(){r&&r(b),u.manager.itemEnd(t)},0),b);const T={};T.credentials="anonymous"===this.crossOrigin?"same-origin":"include",T.headers=this.requestHeader;const O=fetch(t,T).then(function(U){return U.blob()}).then(function(U){return createImageBitmap(U,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(U){return pl.add(t,U),r&&r(U),u.manager.itemEnd(t),U}).catch(function(U){l&&l(U),pl.remove(t),u.manager.itemError(t),u.manager.itemEnd(t)});pl.add(t,O),u.manager.itemStart(t)}}class Eg extends co{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class y1{constructor(t,r,s){let l,u,b;switch(this.binding=t,this.valueSize=s,r){case"quaternion":l=this._slerp,u=this._slerpAdditive,b=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":l=this._select,u=this._select,b=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:l=this._lerp,u=this._lerpAdditive,b=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=u,this._setIdentity=b,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const s=this.buffer,l=this.valueSize,u=t*l+l;let b=this.cumulativeWeight;if(0===b){for(let T=0;T!==l;++T)s[u+T]=s[T];b=r}else b+=r,this._mixBufferRegion(s,u,0,r/b,l);this.cumulativeWeight=b}accumulateAdditive(t){const r=this.buffer,s=this.valueSize,l=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,l,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,s=this.buffer,l=t*r+r,u=this.cumulativeWeight,b=this.cumulativeWeightAdditive,T=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(s,l,r*this._origIndex,1-u,r),b>0&&this._mixBufferRegionAdditive(s,l,this._addIndex*r,1,r);for(let O=r,U=r+r;O!==U;++O)if(s[O]!==s[O+r]){T.setValue(s,l);break}}saveOriginalState(){const r=this.buffer,s=this.valueSize,l=s*this._origIndex;this.binding.getValue(r,l);for(let u=s,b=l;u!==b;++u)r[u]=r[l+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let s=t;s<r;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[r+s]=this.buffer[t+s]}_select(t,r,s,l,u){if(l>=.5)for(let b=0;b!==u;++b)t[r+b]=t[s+b]}_slerp(t,r,s,l){en.slerpFlat(t,r,t,r,t,s,l)}_slerpAdditive(t,r,s,l,u){const b=this._workIndex*u;en.multiplyQuaternionsFlat(t,b,t,r,t,s),en.slerpFlat(t,r,t,r,t,b,l)}_lerp(t,r,s,l,u){const b=1-l;for(let T=0;T!==u;++T){const O=r+T;t[O]=t[O]*b+t[s+T]*l}}_lerpAdditive(t,r,s,l,u){for(let b=0;b!==u;++b){const T=r+b;t[T]=t[T]+t[s+b]*l}}}const Tg="\\[\\]\\.:\\/",v1=new RegExp("["+Tg+"]","g"),Ag="[^"+Tg+"]",Vv="[^"+Tg.replace("\\.","")+"]",Hv=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ag)+/(WCOD+)?/.source.replace("WCOD",Vv)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ag)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ag)+"$"),Wv=["material","materials","bones","map"];class Xv{constructor(t,r,s){const l=s||wo.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,l)}getValue(t,r){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(t,r)}setValue(t,r){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=s.length;l!==u;++l)s[l].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].unbind()}}let wo=(()=>{class y{constructor(r,s,l){this.path=s,this.parsedPath=l||y.parseTrackName(s),this.node=y.findNode(r,this.parsedPath.nodeName),this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,l){return r&&r.isAnimationObjectGroup?new y.Composite(r,s,l):new y(r,s,l)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(v1,"")}static parseTrackName(r){const s=Hv.exec(r);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const b=l.nodeName.substring(u+1);-1!==Wv.indexOf(b)&&(l.nodeName=l.nodeName.substring(0,u),l.objectName=b)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return l}static findNode(r,s){if(void 0===s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const l=r.skeleton.getBoneByName(s);if(void 0!==l)return l}if(r.children){const l=function(b){for(let T=0;T<b.length;T++){const O=b[T];if(O.name===s||O.uuid===s)return O;const U=l(O.children);if(U)return U}return null},u=l(r.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const l=this.resolvedProperty;for(let u=0,b=l.length;u!==b;++u)r[s++]=l[u]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const l=this.resolvedProperty;for(let u=0,b=l.length;u!==b;++u)l[u]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const l=this.resolvedProperty;for(let u=0,b=l.length;u!==b;++u)l[u]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const l=this.resolvedProperty;for(let u=0,b=l.length;u!==b;++u)l[u]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,l=s.objectName,u=s.propertyName;let b=s.propertyIndex;if(r||(r=y.findNode(this.rootNode,s.nodeName),this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(l){let Q=s.objectIndex;switch(l){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let oe=0;oe<r.length;oe++)if(r[oe].name===Q){Q=oe;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[l]}if(void 0!==Q){if(void 0===r[Q])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[Q]}}const T=r[u];if(void 0===T)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",r);let O=this.Versioning.None;this.targetObject=r,!0===r.isMaterial?O=this.Versioning.NeedsUpdate:!0===r.isObject3D&&(O=this.Versioning.MatrixWorldNeedsUpdate);let U=this.BindingType.Direct;if(void 0!==b){if("morphTargetInfluences"===u){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[b]&&(b=r.morphTargetDictionary[b])}U=this.BindingType.ArrayElement,this.resolvedProperty=T,this.propertyIndex=b}else void 0!==T.fromArray&&void 0!==T.toArray?(U=this.BindingType.HasFromToArray,this.resolvedProperty=T):Array.isArray(T)?(U=this.BindingType.EntireArray,this.resolvedProperty=T):this.propertyName=u;this.getValue=this.GetterByBindingType[U],this.setValue=this.SetterByBindingTypeAndVersioning[U][O]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return y.Composite=Xv,y})();wo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},wo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},wo.prototype.GetterByBindingType=[wo.prototype._getValue_direct,wo.prototype._getValue_array,wo.prototype._getValue_arrayElement,wo.prototype._getValue_toArray],wo.prototype.SetterByBindingTypeAndVersioning=[[wo.prototype._setValue_direct,wo.prototype._setValue_direct_setNeedsUpdate,wo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_array,wo.prototype._setValue_array_setNeedsUpdate,wo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_arrayElement,wo.prototype._setValue_arrayElement_setNeedsUpdate,wo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_fromArray,wo.prototype._setValue_fromArray_setNeedsUpdate,wo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _1{constructor(t,r,s=null,l=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=s,this.blendMode=l;const u=r.tracks,b=u.length,T=new Array(b),O={endingStart:Eo,endingEnd:Eo};for(let U=0;U!==b;++U){const Q=u[U].createInterpolant(null);T[U]=Q,Q.settings=O}this._interpolantSettings=O,this._interpolants=T,this._propertyBindings=new Array(b),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,s){if(t.fadeOut(r),this.fadeIn(r),s){const l=this._clip.duration,u=t._clip.duration,T=l/u;t.warp(1,u/l,r),this.warp(T,1,r)}return this}crossFadeTo(t,r,s){return t.crossFadeFrom(this,r,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,s){const l=this._mixer,u=l.time,b=this.timeScale;let T=this._timeScaleInterpolant;null===T&&(T=l._lendControlInterpolant(),this._timeScaleInterpolant=T);const O=T.parameterPositions,U=T.sampleValues;return O[0]=u,O[1]=u+s,U[0]=t/b,U[1]=r/b,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,s,l){if(!this.enabled)return void this._updateWeight(t);const u=this._startTime;if(null!==u){const O=(t-u)*s;O<0||0===s?r=0:(this._startTime=null,r=s*O)}r*=this._updateTimeScale(t);const b=this._updateTime(r),T=this._updateWeight(t);if(T>0){const O=this._interpolants,U=this._propertyBindings;if(2501===this.blendMode)for(let Q=0,oe=O.length;Q!==oe;++Q)O[Q].evaluate(b),U[Q].accumulateAdditive(T);else for(let Q=0,oe=O.length;Q!==oe;++Q)O[Q].evaluate(b),U[Q].accumulate(l,T)}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const s=this._weightInterpolant;if(null!==s){const l=s.evaluate(t)[0];r*=l,t>s.parameterPositions[1]&&(this.stopFading(),0===l&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(r*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,s=this.loop;let l=this.time+t,u=this._loopCount;const b=2202===s;if(0===t)return-1===u||!b||1&~u?l:r-l;if(2200===s){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=r)l=r;else{if(!(l<0)){this.time=l;break e}l=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===u&&(t>=0?(u=0,this._setEndings(!0,0===this.repetitions,b)):this._setEndings(0===this.repetitions,!0,b)),l>=r||l<0){const T=Math.floor(l/r);l-=r*T,u+=Math.abs(T);const O=this.repetitions-u;if(O<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,l=t>0?r:0,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===O){const U=t<0;this._setEndings(U,!U,b)}else this._setEndings(!1,!1,b);this._loopCount=u,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:T})}}else this.time=l;if(b&&!(1&~u))return r-l}return l}_setEndings(t,r,s){const l=this._interpolantSettings;s?(l.endingStart=it,l.endingEnd=it):(l.endingStart=t?this.zeroSlopeAtStart?it:Eo:2402,l.endingEnd=r?this.zeroSlopeAtEnd?it:Eo:2402)}_scheduleFading(t,r,s){const l=this._mixer,u=l.time;let b=this._weightInterpolant;null===b&&(b=l._lendControlInterpolant(),this._weightInterpolant=b);const T=b.parameterPositions,O=b.sampleValues;return T[0]=u,O[0]=r,T[1]=u+t,O[1]=s,this}}const b1=new Float32Array(1);class qv extends xn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const s=t._localRoot||this._root,l=t._clip.tracks,u=l.length,b=t._propertyBindings,T=t._interpolants,O=s.uuid,U=this._bindingsByRootAndName;let Q=U[O];void 0===Q&&(Q={},U[O]=Q);for(let oe=0;oe!==u;++oe){const fe=l[oe],ye=fe.name;let Me=Q[ye];if(void 0!==Me)++Me.referenceCount,b[oe]=Me;else{if(Me=b[oe],void 0!==Me){null===Me._cacheIndex&&(++Me.referenceCount,this._addInactiveBinding(Me,O,ye));continue}Me=new y1(wo.create(s,ye,r&&r._propertyBindings[oe].binding.parsedPath),fe.ValueTypeName,fe.getValueSize()),++Me.referenceCount,this._addInactiveBinding(Me,O,ye),b[oe]=Me}T[oe].resultBuffer=Me.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const s=(t._localRoot||this._root).uuid,l=t._clip.uuid,u=this._actionsByClip[l];this._bindAction(t,u&&u.knownActions[0]),this._addInactiveAction(t,l,s)}const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==u.useCount++&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==--u.useCount&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,s){const l=this._actions,u=this._actionsByClip;let b=u[r];if(void 0===b)b={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[r]=b;else{const T=b.knownActions;t._byClipCacheIndex=T.length,T.push(t)}t._cacheIndex=l.length,l.push(t),b.actionByRoot[s]=t}_removeInactiveAction(t){const r=this._actions,s=r[r.length-1],l=t._cacheIndex;s._cacheIndex=l,r[l]=s,r.pop(),t._cacheIndex=null;const u=t._clip.uuid,b=this._actionsByClip,T=b[u],O=T.knownActions,U=O[O.length-1],Q=t._byClipCacheIndex;U._byClipCacheIndex=Q,O[Q]=U,O.pop(),t._byClipCacheIndex=null,delete T.actionByRoot[(t._localRoot||this._root).uuid],0===O.length&&delete b[u],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let s=0,l=r.length;s!==l;++s){const u=r[s];0==--u.referenceCount&&this._removeInactiveBinding(u)}}_lendAction(t){const r=this._actions,s=t._cacheIndex,l=this._nActiveActions++,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_takeBackAction(t){const r=this._actions,s=t._cacheIndex,l=--this._nActiveActions,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_addInactiveBinding(t,r,s){const l=this._bindingsByRootAndName,u=this._bindings;let b=l[r];void 0===b&&(b={},l[r]=b),b[s]=t,t._cacheIndex=u.length,u.push(t)}_removeInactiveBinding(t){const r=this._bindings,s=t.binding,l=s.rootNode.uuid,u=s.path,b=this._bindingsByRootAndName,T=b[l],O=r[r.length-1],U=t._cacheIndex;O._cacheIndex=U,r[U]=O,r.pop(),delete T[u],0===Object.keys(T).length&&delete b[l]}_lendBinding(t){const r=this._bindings,s=t._cacheIndex,l=this._nActiveBindings++,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_takeBackBinding(t){const r=this._bindings,s=t._cacheIndex,l=--this._nActiveBindings,u=r[l];t._cacheIndex=l,r[l]=t,u._cacheIndex=s,r[s]=u}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let s=t[r];return void 0===s&&(s=new r1(new Float32Array(2),new Float32Array(2),1,b1),s.__cacheIndex=r,t[r]=s),s}_takeBackControlInterpolant(t){const r=this._controlInterpolants,s=t.__cacheIndex,l=--this._nActiveControlInterpolants,u=r[l];t.__cacheIndex=l,r[l]=t,u.__cacheIndex=s,r[s]=u}clipAction(t,r,s){const l=r||this._root,u=l.uuid;let b="string"==typeof t?Hc.findByName(l,t):t;const T=null!==b?b.uuid:t,O=this._actionsByClip[T];let U=null;if(void 0===s&&(s=null!==b?b.blendMode:2500),void 0!==O){const oe=O.actionByRoot[u];if(void 0!==oe&&oe.blendMode===s)return oe;U=O.knownActions[0],null===b&&(b=U._clip)}if(null===b)return null;const Q=new _1(this,b,r,s);return this._bindAction(Q,U),this._addInactiveAction(Q,T,u),Q}existingAction(t,r){const s=r||this._root,l=s.uuid,u="string"==typeof t?Hc.findByName(s,t):t,T=this._actionsByClip[u?u.uuid:t];return void 0!==T&&T.actionByRoot[l]||null}stopAllAction(){const t=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)t[s].stop();return this}update(t){const r=this._actions,s=this._nActiveActions,l=this.time+=t*=this.timeScale,u=Math.sign(t),b=this._accuIndex^=1;for(let U=0;U!==s;++U)r[U]._update(l,t,u,b);const T=this._bindings,O=this._nActiveBindings;for(let U=0;U!==O;++U)T[U].apply(b);return this}setTime(t){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,s=t.uuid,l=this._actionsByClip,u=l[s];if(void 0!==u){const b=u.knownActions;for(let T=0,O=b.length;T!==O;++T){const U=b[T];this._deactivateAction(U);const Q=U._cacheIndex,oe=r[r.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,oe._cacheIndex=Q,r[Q]=oe,r.pop(),this._removeInactiveBindingsForAction(U)}delete l[s]}}uncacheRoot(t){const r=t.uuid,s=this._actionsByClip;for(const b in s){const O=s[b].actionByRoot[r];void 0!==O&&(this._deactivateAction(O),this._removeInactiveAction(O))}const u=this._bindingsByRootAndName[r];if(void 0!==u)for(const b in u){const T=u[b];T.restoreOriginalState(),this._removeInactiveBinding(T)}}uncacheAction(t,r){const s=this.existingAction(t,r);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class Yv{constructor(t=1,r=0,s=0){this.radius=t,this.phi=r,this.theta=s}set(t,r,s){return this.radius=t,this.phi=r,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,s){return this.radius=Math.sqrt(t*t+r*r+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(Qt(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const uc=new mt,Rp=new Mi,Jh=new Mi;class Cg extends il{constructor(t){const r=ad(t),s=new Zi,l=[],u=[],b=new Sr(0,0,1),T=new Sr(0,1,0);for(let U=0;U<r.length;U++){const Q=r[U];Q.parent&&Q.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),u.push(b.r,b.g,b.b),u.push(T.r,T.g,T.b))}s.setAttribute("position",new _i(l,3)),s.setAttribute("color",new _i(u,3)),super(s,new Ta({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,s=this.geometry,l=s.getAttribute("position");Jh.copy(this.root.matrixWorld).invert();for(let u=0,b=0;u<r.length;u++){const T=r[u];T.parent&&T.parent.isBone&&(Rp.multiplyMatrices(Jh,T.matrixWorld),uc.setFromMatrixPosition(Rp),l.setXYZ(b,uc.x,uc.y,uc.z),Rp.multiplyMatrices(Jh,T.parent.matrixWorld),uc.setFromMatrixPosition(Rp),l.setXYZ(b+1,uc.x,uc.y,uc.z),b+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ad(y){const t=[];!0===y.isBone&&t.push(y);for(let r=0;r<y.children.length;r++)t.push(...ad(y.children[r]));return t}class Dg extends il{constructor(t=10,r=10,s=4473924,l=8947848){s=new Sr(s),l=new Sr(l);const u=r/2,b=t/r,T=t/2,O=[],U=[];for(let fe=0,ye=0,Me=-T;fe<=r;fe++,Me+=b){O.push(-T,0,Me,T,0,Me),O.push(Me,0,-T,Me,0,T);const Ue=fe===u?s:l;Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3}const Q=new Zi;Q.setAttribute("position",new _i(O,3)),Q.setAttribute("color",new _i(U,3)),super(Q,new Ta({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cd=new mt,ud=new mt,A1=new mt;class Ig extends Qs{constructor(t,r,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",void 0===r&&(r=1);let l=new Zi;l.setAttribute("position",new _i([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const u=new Ta({fog:!1,toneMapped:!1});this.lightPlane=new nc(l,u),this.add(this.lightPlane),l=new Zi,l.setAttribute("position",new _i([0,0,0,0,0,1],3)),this.targetLine=new nc(l,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cd.setFromMatrixPosition(this.light.matrixWorld),ud.setFromMatrixPosition(this.light.target.matrixWorld),A1.subVectors(ud,cd),this.lightPlane.lookAt(ud),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ud),this.targetLine.scale.z=A1.length()}}class I1 extends il{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],l=new Zi;l.setAttribute("position",new _i(r,3)),l.setAttribute("color",new _i([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(l,new Ta({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,s){const l=new Sr,u=this.geometry.attributes.color.array;return l.set(t),l.toArray(u,0),l.toArray(u,3),l.set(r),l.toArray(u,6),l.toArray(u,9),l.set(s),l.toArray(u,12),l.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bE extends xn{constructor(t,r=null){super(),this.object=t,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function tf(y,t,r,s){const l=function t0(y){switch(y){case Mr:case te:return{byteLength:1,components:1};case Ye:case Ie:case L:return{byteLength:2,components:1};case se:case H:return{byteLength:2,components:4};case k:case A:case B:return{byteLength:4,components:1};case Ke:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${y}.`)}(s);switch(r){case Ve:case _n:return y*t;case He:return y*t*2;case ot:case Dt:return y*t/l.components*l.byteLength;case vn:case Hn:return y*t*2/l.components*l.byteLength;case vt:return y*t*3/l.components*l.byteLength;case Ft:case Pr:return y*t*4/l.components*l.byteLength;case Ui:case ji:return Math.floor((y+3)/4)*Math.floor((t+3)/4)*8;case Us:case xs:return Math.floor((y+3)/4)*Math.floor((t+3)/4)*16;case ds:case vs:return Math.max(y,16)*Math.max(t,8)/4;case wi:case $s:return Math.max(y,8)*Math.max(t,8)/2;case Vs:case Ko:return Math.floor((y+3)/4)*Math.floor((t+3)/4)*8;case fo:case Vo:return Math.floor((y+3)/4)*Math.floor((t+3)/4)*16;case ea:return Math.floor((y+4)/5)*Math.floor((t+3)/4)*16;case ta:return Math.floor((y+4)/5)*Math.floor((t+4)/5)*16;case la:return Math.floor((y+5)/6)*Math.floor((t+4)/5)*16;case eo:return Math.floor((y+5)/6)*Math.floor((t+5)/6)*16;case ca:return Math.floor((y+7)/8)*Math.floor((t+4)/5)*16;case _o:return Math.floor((y+7)/8)*Math.floor((t+5)/6)*16;case Na:return Math.floor((y+7)/8)*Math.floor((t+7)/8)*16;case Wa:return Math.floor((y+9)/10)*Math.floor((t+4)/5)*16;case Ne:return Math.floor((y+9)/10)*Math.floor((t+5)/6)*16;case ut:return Math.floor((y+9)/10)*Math.floor((t+7)/8)*16;case Nt:return Math.floor((y+9)/10)*Math.floor((t+9)/10)*16;case Be:return Math.floor((y+11)/12)*Math.floor((t+9)/10)*16;case Vt:return Math.floor((y+11)/12)*Math.floor((t+11)/12)*16;case In:case ts:case Gs:return Math.ceil(y/4)*Math.ceil(t/4)*16;case Go:case Aa:return Math.ceil(y/4)*Math.ceil(t/4)*8;case ba:case ll:return Math.ceil(y/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Rg(){let y=null,t=!1,r=null,s=null;function l(u,b){r(u,b),s=y.requestAnimationFrame(l)}return{start:function(){!0!==t&&null!==r&&(s=y.requestAnimationFrame(l),t=!0)},stop:function(){y.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(u){r=u},setContext:function(u){y=u}}}function Pg(y){const t=new WeakMap;return{get:function l(T){return T.isInterleavedBufferAttribute&&(T=T.data),t.get(T)},remove:function u(T){T.isInterleavedBufferAttribute&&(T=T.data);const O=t.get(T);O&&(y.deleteBuffer(O.buffer),t.delete(T))},update:function b(T,O){if(T.isInterleavedBufferAttribute&&(T=T.data),T.isGLBufferAttribute){const Q=t.get(T);return void((!Q||Q.version<T.version)&&t.set(T,{buffer:T.buffer,type:T.type,bytesPerElement:T.elementSize,version:T.version}))}const U=t.get(T);if(void 0===U)t.set(T,function r(T,O){const U=T.array,Q=T.usage,oe=U.byteLength,fe=y.createBuffer();let ye;if(y.bindBuffer(O,fe),y.bufferData(O,U,Q),T.onUploadCallback(),U instanceof Float32Array)ye=y.FLOAT;else if(U instanceof Uint16Array)ye=T.isFloat16BufferAttribute?y.HALF_FLOAT:y.UNSIGNED_SHORT;else if(U instanceof Int16Array)ye=y.SHORT;else if(U instanceof Uint32Array)ye=y.UNSIGNED_INT;else if(U instanceof Int32Array)ye=y.INT;else if(U instanceof Int8Array)ye=y.BYTE;else if(U instanceof Uint8Array)ye=y.UNSIGNED_BYTE;else{if(!(U instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+U);ye=y.UNSIGNED_BYTE}return{buffer:fe,type:ye,bytesPerElement:U.BYTES_PER_ELEMENT,version:T.version,size:oe}}(T,O));else if(U.version<T.version){if(U.size!==T.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(T,O,U){const Q=O.array,oe=O.updateRanges;if(y.bindBuffer(U,T),0===oe.length)y.bufferSubData(U,0,Q);else{oe.sort((ye,Me)=>ye.start-Me.start);let fe=0;for(let ye=1;ye<oe.length;ye++){const Me=oe[fe],Ue=oe[ye];Ue.start<=Me.start+Me.count+1?Me.count=Math.max(Me.count,Ue.start+Ue.count-Me.start):(++fe,oe[fe]=Ue)}oe.length=fe+1;for(let ye=0,Me=oe.length;ye<Me;ye++){const Ue=oe[ye];y.bufferSubData(U,Ue.start*Q.BYTES_PER_ELEMENT,Q,Ue.start,Ue.count)}O.clearUpdateRanges()}O.onUploadCallback()})(U.buffer,T,O),U.version=T.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d);const os={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ti={common:{diffuse:{value:new Sr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Gi},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Gi}},envmap:{envMap:{value:null},envMapRotation:{value:new Gi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Gi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Gi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Gi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Gi},normalScale:{value:new hr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Gi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Gi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Gi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Gi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Sr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Sr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0},uvTransform:{value:new Gi}},sprite:{diffuse:{value:new Sr(16777215)},opacity:{value:1},center:{value:new hr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Gi},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0}}},$a={basic:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.fog]),vertexShader:os.meshbasic_vert,fragmentShader:os.meshbasic_frag},lambert:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,ti.lights,{emissive:{value:new Sr(0)}}]),vertexShader:os.meshlambert_vert,fragmentShader:os.meshlambert_frag},phong:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,ti.lights,{emissive:{value:new Sr(0)},specular:{value:new Sr(1118481)},shininess:{value:30}}]),vertexShader:os.meshphong_vert,fragmentShader:os.meshphong_frag},standard:{uniforms:tl([ti.common,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.roughnessmap,ti.metalnessmap,ti.fog,ti.lights,{emissive:{value:new Sr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:os.meshphysical_vert,fragmentShader:os.meshphysical_frag},toon:{uniforms:tl([ti.common,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.gradientmap,ti.fog,ti.lights,{emissive:{value:new Sr(0)}}]),vertexShader:os.meshtoon_vert,fragmentShader:os.meshtoon_frag},matcap:{uniforms:tl([ti.common,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,{matcap:{value:null}}]),vertexShader:os.meshmatcap_vert,fragmentShader:os.meshmatcap_frag},points:{uniforms:tl([ti.points,ti.fog]),vertexShader:os.points_vert,fragmentShader:os.points_frag},dashed:{uniforms:tl([ti.common,ti.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:os.linedashed_vert,fragmentShader:os.linedashed_frag},depth:{uniforms:tl([ti.common,ti.displacementmap]),vertexShader:os.depth_vert,fragmentShader:os.depth_frag},normal:{uniforms:tl([ti.common,ti.bumpmap,ti.normalmap,ti.displacementmap,{opacity:{value:1}}]),vertexShader:os.meshnormal_vert,fragmentShader:os.meshnormal_frag},sprite:{uniforms:tl([ti.sprite,ti.fog]),vertexShader:os.sprite_vert,fragmentShader:os.sprite_frag},background:{uniforms:{uvTransform:{value:new Gi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:os.background_vert,fragmentShader:os.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Gi}},vertexShader:os.backgroundCube_vert,fragmentShader:os.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:os.cube_vert,fragmentShader:os.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:os.equirect_vert,fragmentShader:os.equirect_frag},distanceRGBA:{uniforms:tl([ti.common,ti.displacementmap,{referencePosition:{value:new mt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:os.distanceRGBA_vert,fragmentShader:os.distanceRGBA_frag},shadow:{uniforms:tl([ti.lights,ti.fog,{color:{value:new Sr(0)},opacity:{value:1}}]),vertexShader:os.shadow_vert,fragmentShader:os.shadow_frag}};$a.physical={uniforms:tl([$a.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Gi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Gi},clearcoatNormalScale:{value:new hr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Gi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Gi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Gi},sheen:{value:0},sheenColor:{value:new Sr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Gi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Gi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Gi},transmissionSamplerSize:{value:new hr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Gi},attenuationDistance:{value:0},attenuationColor:{value:new Sr(0)},specularColor:{value:new Sr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Gi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Gi},anisotropyVector:{value:new hr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Gi}}]),vertexShader:os.meshphysical_vert,fragmentShader:os.meshphysical_frag};const cf={r:0,b:0,g:0},Ru=new Za,Ax=new Mi;function WE(y,t,r,s,l,u,b){const T=new Sr(0);let U,Q,O=!0===u?0:1,oe=null,fe=0,ye=null;function Me(st){let nt=!0===st.isScene?st.background:null;return nt&&nt.isTexture&&(nt=(st.backgroundBlurriness>0?r:t).get(nt)),nt}function De(st,nt){st.getRGB(cf,Yy(y)),s.buffers.color.setClear(cf.r,cf.g,cf.b,nt,b)}return{getClearColor:function(){return T},setClearColor:function(st,nt=1){T.set(st),O=nt,De(T,O)},getClearAlpha:function(){return O},setClearAlpha:function(st){O=st,De(T,O)},render:function Ue(st){let nt=!1;const $t=Me(st);null===$t?De(T,O):$t&&$t.isColor&&(De($t,1),nt=!0);const Ct=y.xr.getEnvironmentBlendMode();"additive"===Ct?s.buffers.color.setClear(0,0,0,1,b):"alpha-blend"===Ct&&s.buffers.color.setClear(0,0,0,0,b),(y.autoClear||nt)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),y.clear(y.autoClearColor,y.autoClearDepth,y.autoClearStencil))},addToRenderList:function Pe(st,nt){const $t=Me(nt);$t&&($t.isCubeTexture||$t.mapping===pn)?(void 0===Q&&(Q=new cs(new _c(1,1,1),new Sl({name:"BackgroundCubeMaterial",uniforms:Cd($a.backgroundCube.uniforms),vertexShader:$a.backgroundCube.vertexShader,fragmentShader:$a.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Q.geometry.deleteAttribute("normal"),Q.geometry.deleteAttribute("uv"),Q.onBeforeRender=function(Ct,Gt,qt){this.matrixWorld.copyPosition(qt.matrixWorld)},Object.defineProperty(Q.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(Q)),Ru.copy(nt.backgroundRotation),Ru.x*=-1,Ru.y*=-1,Ru.z*=-1,$t.isCubeTexture&&!1===$t.isRenderTargetTexture&&(Ru.y*=-1,Ru.z*=-1),Q.material.uniforms.envMap.value=$t,Q.material.uniforms.flipEnvMap.value=$t.isCubeTexture&&!1===$t.isRenderTargetTexture?-1:1,Q.material.uniforms.backgroundBlurriness.value=nt.backgroundBlurriness,Q.material.uniforms.backgroundIntensity.value=nt.backgroundIntensity,Q.material.uniforms.backgroundRotation.value.setFromMatrix4(Ax.makeRotationFromEuler(Ru)),Q.material.toneMapped=Es.getTransfer($t.colorSpace)!==Pi,(oe!==$t||fe!==$t.version||ye!==y.toneMapping)&&(Q.material.needsUpdate=!0,oe=$t,fe=$t.version,ye=y.toneMapping),Q.layers.enableAll(),st.unshift(Q,Q.geometry,Q.material,0,0,null)):$t&&$t.isTexture&&(void 0===U&&(U=new cs(new rd(2,2),new Sl({name:"BackgroundMaterial",uniforms:Cd($a.background.uniforms),vertexShader:$a.background.vertexShader,fragmentShader:$a.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),Object.defineProperty(U.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(U)),U.material.uniforms.t2D.value=$t,U.material.uniforms.backgroundIntensity.value=nt.backgroundIntensity,U.material.toneMapped=Es.getTransfer($t.colorSpace)!==Pi,!0===$t.matrixAutoUpdate&&$t.updateMatrix(),U.material.uniforms.uvTransform.value.copy($t.matrix),(oe!==$t||fe!==$t.version||ye!==y.toneMapping)&&(U.material.needsUpdate=!0,oe=$t,fe=$t.version,ye=y.toneMapping),U.layers.enableAll(),st.unshift(U,U.geometry,U.material,0,0,null))},dispose:function tt(){void 0!==Q&&(Q.geometry.dispose(),Q.material.dispose(),Q=void 0),void 0!==U&&(U.geometry.dispose(),U.material.dispose(),U=void 0)}}}function Xp(y,t){const r=y.getParameter(y.MAX_VERTEX_ATTRIBS),s={},l=fe(null);let u=l,b=!1;function U(wt){return y.bindVertexArray(wt)}function Q(wt){return y.deleteVertexArray(wt)}function fe(wt){const gn=[],qn=[],Vn=[];for(let Jn=0;Jn<r;Jn++)gn[Jn]=0,qn[Jn]=0,Vn[Jn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:gn,enabledAttributes:qn,attributeDivisors:Vn,object:wt,attributes:{},index:null}}function Ue(){const wt=u.newAttributes;for(let gn=0,qn=wt.length;gn<qn;gn++)wt[gn]=0}function Pe(wt){De(wt,0)}function De(wt,gn){const Vn=u.enabledAttributes,Jn=u.attributeDivisors;u.newAttributes[wt]=1,0===Vn[wt]&&(y.enableVertexAttribArray(wt),Vn[wt]=1),Jn[wt]!==gn&&(y.vertexAttribDivisor(wt,gn),Jn[wt]=gn)}function tt(){const wt=u.newAttributes,gn=u.enabledAttributes;for(let qn=0,Vn=gn.length;qn<Vn;qn++)gn[qn]!==wt[qn]&&(y.disableVertexAttribArray(qn),gn[qn]=0)}function st(wt,gn,qn,Vn,Jn,gr,Zn){!0===Zn?y.vertexAttribIPointer(wt,gn,qn,Jn,gr):y.vertexAttribPointer(wt,gn,qn,Vn,Jn,gr)}function qt(){Tt(),b=!0,u!==l&&(u=l,U(u.object))}function Tt(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function T(wt,gn,qn,Vn,Jn){let gr=!1;const Zn=function oe(wt,gn,qn){const Vn=!0===qn.wireframe;let Jn=s[wt.id];void 0===Jn&&(Jn={},s[wt.id]=Jn);let gr=Jn[gn.id];void 0===gr&&(gr={},Jn[gn.id]=gr);let Zn=gr[Vn];return void 0===Zn&&(Zn=fe(function O(){return y.createVertexArray()}()),gr[Vn]=Zn),Zn}(Vn,qn,gn);u!==Zn&&(u=Zn,U(u.object)),gr=function ye(wt,gn,qn,Vn){const Jn=u.attributes,gr=gn.attributes;let Zn=0;const Lr=qn.getAttributes();for(const tr in Lr)if(Lr[tr].location>=0){const ei=Jn[tr];let mi=gr[tr];if(void 0===mi&&("instanceMatrix"===tr&&wt.instanceMatrix&&(mi=wt.instanceMatrix),"instanceColor"===tr&&wt.instanceColor&&(mi=wt.instanceColor)),void 0===ei||ei.attribute!==mi||mi&&ei.data!==mi.data)return!0;Zn++}return u.attributesNum!==Zn||u.index!==Vn}(wt,Vn,qn,Jn),gr&&function Me(wt,gn,qn,Vn){const Jn={},gr=gn.attributes;let Zn=0;const Lr=qn.getAttributes();for(const tr in Lr)if(Lr[tr].location>=0){let ei=gr[tr];void 0===ei&&("instanceMatrix"===tr&&wt.instanceMatrix&&(ei=wt.instanceMatrix),"instanceColor"===tr&&wt.instanceColor&&(ei=wt.instanceColor));const mi={};mi.attribute=ei,ei&&ei.data&&(mi.data=ei.data),Jn[tr]=mi,Zn++}u.attributes=Jn,u.attributesNum=Zn,u.index=Vn}(wt,Vn,qn,Jn),null!==Jn&&t.update(Jn,y.ELEMENT_ARRAY_BUFFER),(gr||b)&&(b=!1,function nt(wt,gn,qn,Vn){Ue();const Jn=Vn.attributes,gr=qn.getAttributes(),Zn=gn.defaultAttributeValues;for(const Lr in gr){const tr=gr[Lr];if(tr.location>=0){let qr=Jn[Lr];if(void 0===qr&&("instanceMatrix"===Lr&&wt.instanceMatrix&&(qr=wt.instanceMatrix),"instanceColor"===Lr&&wt.instanceColor&&(qr=wt.instanceColor)),void 0!==qr){const ei=qr.normalized,mi=qr.itemSize,qi=t.get(qr);if(void 0===qi)continue;const us=qi.buffer,yr=qi.type,Er=qi.bytesPerElement,zr=yr===y.INT||yr===y.UNSIGNED_INT||qr.gpuType===A;if(qr.isInterleavedBufferAttribute){const Nr=qr.data,ui=Nr.stride,Oi=qr.offset;if(Nr.isInstancedInterleavedBuffer){for(let Zr=0;Zr<tr.locationSize;Zr++)De(tr.location+Zr,Nr.meshPerAttribute);!0!==wt.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=Nr.meshPerAttribute*Nr.count)}else for(let Zr=0;Zr<tr.locationSize;Zr++)Pe(tr.location+Zr);y.bindBuffer(y.ARRAY_BUFFER,us);for(let Zr=0;Zr<tr.locationSize;Zr++)st(tr.location+Zr,mi/tr.locationSize,yr,ei,ui*Er,(Oi+mi/tr.locationSize*Zr)*Er,zr)}else{if(qr.isInstancedBufferAttribute){for(let Nr=0;Nr<tr.locationSize;Nr++)De(tr.location+Nr,qr.meshPerAttribute);!0!==wt.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=qr.meshPerAttribute*qr.count)}else for(let Nr=0;Nr<tr.locationSize;Nr++)Pe(tr.location+Nr);y.bindBuffer(y.ARRAY_BUFFER,us);for(let Nr=0;Nr<tr.locationSize;Nr++)st(tr.location+Nr,mi/tr.locationSize,yr,ei,mi*Er,mi/tr.locationSize*Nr*Er,zr)}}else if(void 0!==Zn){const ei=Zn[Lr];if(void 0!==ei)switch(ei.length){case 2:y.vertexAttrib2fv(tr.location,ei);break;case 3:y.vertexAttrib3fv(tr.location,ei);break;case 4:y.vertexAttrib4fv(tr.location,ei);break;default:y.vertexAttrib1fv(tr.location,ei)}}}}tt()}(wt,gn,qn,Vn),null!==Jn&&y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,t.get(Jn).buffer))},reset:qt,resetDefaultState:Tt,dispose:function $t(){qt();for(const wt in s){const gn=s[wt];for(const qn in gn){const Vn=gn[qn];for(const Jn in Vn)Q(Vn[Jn].object),delete Vn[Jn];delete gn[qn]}delete s[wt]}},releaseStatesOfGeometry:function Ct(wt){if(void 0===s[wt.id])return;const gn=s[wt.id];for(const qn in gn){const Vn=gn[qn];for(const Jn in Vn)Q(Vn[Jn].object),delete Vn[Jn];delete gn[qn]}delete s[wt.id]},releaseStatesOfProgram:function Gt(wt){for(const gn in s){const qn=s[gn];if(void 0===qn[wt.id])continue;const Vn=qn[wt.id];for(const Jn in Vn)Q(Vn[Jn].object),delete Vn[Jn];delete qn[wt.id]}},initAttributes:Ue,enableAttribute:Pe,disableUnusedAttributes:tt}}function Cx(y,t,r){let s;function b(U,Q,oe){0!==oe&&(y.drawArraysInstanced(s,U,Q,oe),r.update(Q,s,oe))}this.setMode=function l(U){s=U},this.render=function u(U,Q){y.drawArrays(s,U,Q),r.update(Q,s,1)},this.renderInstances=b,this.renderMultiDraw=function T(U,Q,oe){if(0===oe)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,U,0,Q,0,oe);let ye=0;for(let Me=0;Me<oe;Me++)ye+=Q[Me];r.update(ye,s,1)},this.renderMultiDrawInstances=function O(U,Q,oe,fe){if(0===oe)return;const ye=t.get("WEBGL_multi_draw");if(null===ye)for(let Me=0;Me<U.length;Me++)b(U[Me],Q[Me],fe[Me]);else{ye.multiDrawArraysInstancedWEBGL(s,U,0,Q,0,fe,0,oe);let Me=0;for(let Ue=0;Ue<oe;Ue++)Me+=Q[Ue]*fe[Ue];r.update(Me,s,1)}}}function O0(y,t,r,s){let l;function O(Gt){if("highp"===Gt){if(y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.HIGH_FLOAT).precision>0&&y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.HIGH_FLOAT).precision>0)return"highp";Gt="mediump"}return"mediump"===Gt&&y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.MEDIUM_FLOAT).precision>0&&y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let U=void 0!==r.precision?r.precision:"highp";const Q=O(U);Q!==U&&(console.warn("THREE.WebGLRenderer:",U,"not supported, using",Q,"instead."),U=Q);const oe=!0===r.logarithmicDepthBuffer,fe=!0===r.reverseDepthBuffer&&t.has("EXT_clip_control"),ye=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS),Me=y.getParameter(y.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==l)return l;if(!0===t.has("EXT_texture_filter_anisotropic")){const Gt=t.get("EXT_texture_filter_anisotropic");l=y.getParameter(Gt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else l=0;return l},getMaxPrecision:O,textureFormatReadable:function b(Gt){return!(Gt!==Ft&&s.convert(Gt)!==y.getParameter(y.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function T(Gt){const qt=Gt===L&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(Gt!==Mr&&s.convert(Gt)!==y.getParameter(y.IMPLEMENTATION_COLOR_READ_TYPE)&&Gt!==B&&!qt)},precision:U,logarithmicDepthBuffer:oe,reverseDepthBuffer:fe,maxTextures:ye,maxVertexTextures:Me,maxTextureSize:y.getParameter(y.MAX_TEXTURE_SIZE),maxCubemapSize:y.getParameter(y.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:y.getParameter(y.MAX_VERTEX_ATTRIBS),maxVertexUniforms:y.getParameter(y.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:y.getParameter(y.MAX_VARYING_VECTORS),maxFragmentUniforms:y.getParameter(y.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:Me>0,maxSamples:y.getParameter(y.MAX_SAMPLES)}}function L0(y){const t=this;let r=null,s=0,l=!1,u=!1;const b=new Sc,T=new Gi,O={value:null,needsUpdate:!1};function Q(oe,fe,ye,Me){const Ue=null!==oe?oe.length:0;let Pe=null;if(0!==Ue){if(Pe=O.value,!0!==Me||null===Pe){const De=ye+4*Ue,tt=fe.matrixWorldInverse;T.getNormalMatrix(tt),(null===Pe||Pe.length<De)&&(Pe=new Float32Array(De));for(let st=0,nt=ye;st!==Ue;++st,nt+=4)b.copy(oe[st]).applyMatrix4(tt,T),b.normal.toArray(Pe,nt),Pe[nt+3]=b.constant}O.value=Pe,O.needsUpdate=!0}return t.numPlanes=Ue,t.numIntersection=0,Pe}this.uniform=O,this.numPlanes=0,this.numIntersection=0,this.init=function(oe,fe){const ye=0!==oe.length||fe||0!==s||l;return l=fe,s=oe.length,ye},this.beginShadows=function(){u=!0,Q(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(oe,fe){r=Q(oe,fe,0)},this.setState=function(oe,fe,ye){const Me=oe.clippingPlanes,Ue=oe.clipIntersection,Pe=oe.clipShadows,De=y.get(oe);if(!l||null===Me||0===Me.length||u&&!Pe)u?Q(null):function U(){O.value!==r&&(O.value=r,O.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}();else{const tt=u?0:s,st=4*tt;let nt=De.clippingState||null;O.value=nt,nt=Q(Me,fe,st,ye);for(let $t=0;$t!==st;++$t)nt[$t]=r[$t];De.clippingState=nt,this.numIntersection=Ue?this.numPlanes:0,this.numPlanes+=tt}}}function N0(y){let t=new WeakMap;function r(b,T){return 303===T?b.mapping=rn:304===T&&(b.mapping=bn),b}function l(b){const T=b.target;T.removeEventListener("dispose",l);const O=t.get(T);void 0!==O&&(t.delete(T),O.dispose())}return{get:function s(b){if(b&&b.isTexture){const T=b.mapping;if(303===T||304===T){if(t.has(b))return r(t.get(b).texture,b.mapping);{const O=b.image;if(O&&O.height>0){const U=new sa(O.height);return U.fromEquirectangularTexture(y,b),t.set(b,U),b.addEventListener("dispose",l),r(U.texture,b.mapping)}return null}}}return b},dispose:function u(){t=new WeakMap}}}const Hg=[.125,.215,.35,.446,.526,.582],Zc=new bg,Wg=new Sr;let uf=null,fd=0,qp=0,df=!1;const Pc=(1+Math.sqrt(5))/2,Qd=1/Pc,Xg=[new mt(-Pc,Qd,0),new mt(Pc,Qd,0),new mt(-Qd,0,Pc),new mt(Qd,0,Pc),new mt(0,Pc,-Qd),new mt(0,Pc,Qd),new mt(-1,1,-1),new mt(1,1,-1),new mt(-1,1,1),new mt(1,1,1)],Dx=new mt;class k0{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,s=.1,l=100,u={}){const{size:b=256,position:T=Dx}=u;uf=this._renderer.getRenderTarget(),fd=this._renderer.getActiveCubeFace(),qp=this._renderer.getActiveMipmapLevel(),df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(b);const O=this._allocateTargets();return O.depthBuffer=!0,this._sceneToCubeUV(t,s,l,O,T),r>0&&this._blur(O,0,0,r),this._applyPMREM(O),this._cleanup(O),O}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Yg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Kg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(uf,fd,qp),this._renderer.xr.enabled=df,t.scissorTest=!1,hf(t,0,0,t.width,t.height)}_fromTexture(t,r){this._setSize(t.mapping===rn||t.mapping===bn?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),uf=this._renderer.getRenderTarget(),fd=this._renderer.getActiveCubeFace(),qp=this._renderer.getActiveMipmapLevel(),df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=r||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,s={magFilter:wn,minFilter:wn,generateMipmaps:!1,type:L,format:Ft,colorSpace:Vi,depthBuffer:!1},l=qg(t,r,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=qg(t,r,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Ix(y){const t=[],r=[],s=[];let l=y;const u=y-4+1+Hg.length;for(let b=0;b<u;b++){const T=Math.pow(2,l);r.push(T);let O=1/T;b>y-4?O=Hg[b-y+4-1]:0===b&&(O=0),s.push(O);const U=1/(T-2),Q=-U,oe=1+U,fe=[Q,Q,oe,Q,oe,oe,Q,Q,oe,oe,Q,oe],ye=6,Me=6,Ue=3,Pe=2,De=1,tt=new Float32Array(Ue*Me*ye),st=new Float32Array(Pe*Me*ye),nt=new Float32Array(De*Me*ye);for(let Ct=0;Ct<ye;Ct++){const Gt=Ct%3*2/3-1,qt=Ct>2?0:-1;tt.set([Gt,qt,0,Gt+2/3,qt,0,Gt+2/3,qt+1,0,Gt,qt,0,Gt+2/3,qt+1,0,Gt,qt+1,0],Ue*Me*Ct),st.set(fe,Pe*Me*Ct),nt.set([Ct,Ct,Ct,Ct,Ct,Ct],De*Me*Ct)}const $t=new Zi;$t.setAttribute("position",new Ls(tt,Ue)),$t.setAttribute("uv",new Ls(st,Pe)),$t.setAttribute("faceIndex",new Ls(nt,De)),t.push($t),l>4&&l--}return{lodPlanes:t,sizeLods:r,sigmas:s}}(u)),this._blurMaterial=function Ji(y,t,r){const s=new Float32Array(20),l=new mt(0,1,0);return new Sl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${y}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,t,r)}return l}_compileMaterial(t){const r=new cs(this._lodPlanes[0],t);this._renderer.compile(r,Zc)}_sceneToCubeUV(t,r,s,l,u){const O=new co(90,1,r,s),U=[1,-1,1,1,1,1],Q=[1,1,1,-1,-1,-1],oe=this._renderer,fe=oe.autoClear,ye=oe.toneMapping;oe.getClearColor(Wg),oe.toneMapping=nr,oe.autoClear=!1;const Me=new io({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Ue=new cs(new _c,Me);let Pe=!1;const De=t.background;De?De.isColor&&(Me.color.copy(De),t.background=null,Pe=!0):(Me.color.copy(Wg),Pe=!0);for(let tt=0;tt<6;tt++){const st=tt%3;0===st?(O.up.set(0,U[tt],0),O.position.set(u.x,u.y,u.z),O.lookAt(u.x+Q[tt],u.y,u.z)):1===st?(O.up.set(0,0,U[tt]),O.position.set(u.x,u.y,u.z),O.lookAt(u.x,u.y+Q[tt],u.z)):(O.up.set(0,U[tt],0),O.position.set(u.x,u.y,u.z),O.lookAt(u.x,u.y,u.z+Q[tt]));const nt=this._cubeSize;hf(l,st*nt,tt>2?nt:0,nt,nt),oe.setRenderTarget(l),Pe&&oe.render(Ue,O),oe.render(t,O)}Ue.geometry.dispose(),Ue.material.dispose(),oe.toneMapping=ye,oe.autoClear=fe,t.background=De}_textureToCubeUV(t,r){const s=this._renderer,l=t.mapping===rn||t.mapping===bn;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=Yg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Kg());const u=l?this._cubemapMaterial:this._equirectMaterial,b=new cs(this._lodPlanes[0],u);u.uniforms.envMap.value=t;const O=this._cubeSize;hf(r,0,0,3*O,2*O),s.setRenderTarget(r),s.render(b,Zc)}_applyPMREM(t){const r=this._renderer,s=r.autoClear;r.autoClear=!1;const l=this._lodPlanes.length;for(let u=1;u<l;u++){const b=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,b,Xg[(l-u-1)%Xg.length])}r.autoClear=s}_blur(t,r,s,l,u){const b=this._pingPongRenderTarget;this._halfBlur(t,b,r,s,l,"latitudinal",u),this._halfBlur(b,t,s,s,l,"longitudinal",u)}_halfBlur(t,r,s,l,u,b,T){const O=this._renderer,U=this._blurMaterial;"latitudinal"!==b&&"longitudinal"!==b&&console.error("blur direction must be either latitudinal or longitudinal!");const oe=new cs(this._lodPlanes[l],U),fe=U.uniforms,ye=this._sizeLods[s]-1,Me=isFinite(u)?Math.PI/(2*ye):2*Math.PI/39,Ue=u/Me,Pe=isFinite(u)?1+Math.floor(3*Ue):20;Pe>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${Pe} samples when the maximum is set to 20`);const De=[];let tt=0;for(let Gt=0;Gt<20;++Gt){const qt=Gt/Ue,Tt=Math.exp(-qt*qt/2);De.push(Tt),0===Gt?tt+=Tt:Gt<Pe&&(tt+=2*Tt)}for(let Gt=0;Gt<De.length;Gt++)De[Gt]=De[Gt]/tt;fe.envMap.value=t.texture,fe.samples.value=Pe,fe.weights.value=De,fe.latitudinal.value="latitudinal"===b,T&&(fe.poleAxis.value=T);const{_lodMax:st}=this;fe.dTheta.value=Me,fe.mipInt.value=st-s;const nt=this._sizeLods[l];hf(r,3*nt*(l>st-4?l-st+4:0),4*(this._cubeSize-nt),3*nt,2*nt),O.setRenderTarget(r),O.render(oe,Zc)}}function qg(y,t,r){const s=new Se(y,t,r);return s.texture.mapping=pn,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function hf(y,t,r,s,l){y.viewport.set(t,r,s,l),y.scissor.set(t,r,s,l)}function Kg(){return new Sl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Yg(){return new Sl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function j0(y){let t=new WeakMap,r=null;function u(T){const O=T.target;O.removeEventListener("dispose",u);const U=t.get(O);void 0!==U&&(t.delete(O),U.dispose())}return{get:function s(T){if(T&&T.isTexture){const O=T.mapping,U=303===O||304===O,Q=O===rn||O===bn;if(U||Q){let oe=t.get(T);if(T.isRenderTargetTexture&&T.pmremVersion!==(void 0!==oe?oe.texture.pmremVersion:0))return null===r&&(r=new k0(y)),oe=U?r.fromEquirectangular(T,oe):r.fromCubemap(T,oe),oe.texture.pmremVersion=T.pmremVersion,t.set(T,oe),oe.texture;if(void 0!==oe)return oe.texture;{const ye=T.image;return U&&ye&&ye.height>0||Q&&ye&&function l(T){let O=0;for(let Q=0;Q<6;Q++)void 0!==T[Q]&&O++;return 6===O}(ye)?(null===r&&(r=new k0(y)),oe=U?r.fromEquirectangular(T):r.fromCubemap(T),oe.texture.pmremVersion=T.pmremVersion,t.set(T,oe),T.addEventListener("dispose",u),oe.texture):null}}}return T},dispose:function b(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function F0(y){const t={};function r(s){if(void 0!==t[s])return t[s];let l;switch(s){case"WEBGL_depth_texture":l=y.getExtension("WEBGL_depth_texture")||y.getExtension("MOZ_WEBGL_depth_texture")||y.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=y.getExtension("EXT_texture_filter_anisotropic")||y.getExtension("MOZ_EXT_texture_filter_anisotropic")||y.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=y.getExtension("WEBGL_compressed_texture_s3tc")||y.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=y.getExtension("WEBGL_compressed_texture_pvrtc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=y.getExtension(s)}return t[s]=l,l}return{has:function(s){return null!==r(s)},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(s){const l=r(s);return null===l&&Fl("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function Rx(y,t,r,s){const l={},u=new WeakMap;function b(oe){const fe=oe.target;null!==fe.index&&t.remove(fe.index);for(const Me in fe.attributes)t.remove(fe.attributes[Me]);fe.removeEventListener("dispose",b),delete l[fe.id];const ye=u.get(fe);ye&&(t.remove(ye),u.delete(fe)),s.releaseStatesOfGeometry(fe),!0===fe.isInstancedBufferGeometry&&delete fe._maxInstanceCount,r.memory.geometries--}function U(oe){const fe=[],ye=oe.index,Me=oe.attributes.position;let Ue=0;if(null!==ye){const tt=ye.array;Ue=ye.version;for(let st=0,nt=tt.length;st<nt;st+=3){const $t=tt[st+0],Ct=tt[st+1],Gt=tt[st+2];fe.push($t,Ct,Ct,Gt,Gt,$t)}}else{if(void 0===Me)return;Ue=Me.version;for(let st=0,nt=Me.array.length/3-1;st<nt;st+=3){const $t=st+0,Ct=st+1,Gt=st+2;fe.push($t,Ct,Ct,Gt,Gt,$t)}}const Pe=new(jf(fe)?Hf:vu)(fe,1);Pe.version=Ue;const De=u.get(oe);De&&t.remove(De),u.set(oe,Pe)}return{get:function T(oe,fe){return!0===l[fe.id]||(fe.addEventListener("dispose",b),l[fe.id]=!0,r.memory.geometries++),fe},update:function O(oe){const fe=oe.attributes;for(const ye in fe)t.update(fe[ye],y.ARRAY_BUFFER)},getWireframeAttribute:function Q(oe){const fe=u.get(oe);if(fe){const ye=oe.index;null!==ye&&fe.version<ye.version&&U(oe)}else U(oe);return u.get(oe)}}}function Kp(y,t,r){let s,u,b;function U(fe,ye,Me){0!==Me&&(y.drawElementsInstanced(s,ye,u,fe*b,Me),r.update(ye,s,Me))}this.setMode=function l(fe){s=fe},this.setIndex=function T(fe){u=fe.type,b=fe.bytesPerElement},this.render=function O(fe,ye){y.drawElements(s,ye,u,fe*b),r.update(ye,s,1)},this.renderInstances=U,this.renderMultiDraw=function Q(fe,ye,Me){if(0===Me)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,ye,0,u,fe,0,Me);let Pe=0;for(let De=0;De<Me;De++)Pe+=ye[De];r.update(Pe,s,1)},this.renderMultiDrawInstances=function oe(fe,ye,Me,Ue){if(0===Me)return;const Pe=t.get("WEBGL_multi_draw");if(null===Pe)for(let De=0;De<fe.length;De++)U(fe[De]/b,ye[De],Ue[De]);else{Pe.multiDrawElementsInstancedWEBGL(s,ye,0,u,fe,0,Ue,0,Me);let De=0;for(let tt=0;tt<Me;tt++)De+=ye[tt]*Ue[tt];r.update(De,s,1)}}}function pd(y){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function l(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function s(u,b,T){switch(r.calls++,b){case y.TRIANGLES:r.triangles+=T*(u/3);break;case y.LINES:r.lines+=T*(u/2);break;case y.LINE_STRIP:r.lines+=T*(u-1);break;case y.LINE_LOOP:r.lines+=T*u;break;case y.POINTS:r.points+=T*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",b)}}}}function Zg(y,t,r){const s=new WeakMap,l=new Ds;return{update:function u(b,T,O){const U=b.morphTargetInfluences,Q=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,oe=void 0!==Q?Q.length:0;let fe=s.get(T);if(void 0===fe||fe.count!==oe){let Tt=function(){Gt.dispose(),s.delete(T),T.removeEventListener("dispose",Tt)};void 0!==fe&&fe.texture.dispose();const ye=void 0!==T.morphAttributes.position,Me=void 0!==T.morphAttributes.normal,Ue=void 0!==T.morphAttributes.color,Pe=T.morphAttributes.position||[],De=T.morphAttributes.normal||[],tt=T.morphAttributes.color||[];let st=0;!0===ye&&(st=1),!0===Me&&(st=2),!0===Ue&&(st=3);let nt=T.attributes.position.count*st,$t=1;nt>t.maxTextureSize&&($t=Math.ceil(nt/t.maxTextureSize),nt=t.maxTextureSize);const Ct=new Float32Array(nt*$t*4*oe),Gt=new Ze(Ct,nt,$t,oe);Gt.type=B,Gt.needsUpdate=!0;const qt=4*st;for(let wt=0;wt<oe;wt++){const gn=Pe[wt],qn=De[wt],Vn=tt[wt],Jn=nt*$t*4*wt;for(let gr=0;gr<gn.count;gr++){const Zn=gr*qt;!0===ye&&(l.fromBufferAttribute(gn,gr),Ct[Jn+Zn+0]=l.x,Ct[Jn+Zn+1]=l.y,Ct[Jn+Zn+2]=l.z,Ct[Jn+Zn+3]=0),!0===Me&&(l.fromBufferAttribute(qn,gr),Ct[Jn+Zn+4]=l.x,Ct[Jn+Zn+5]=l.y,Ct[Jn+Zn+6]=l.z,Ct[Jn+Zn+7]=0),!0===Ue&&(l.fromBufferAttribute(Vn,gr),Ct[Jn+Zn+8]=l.x,Ct[Jn+Zn+9]=l.y,Ct[Jn+Zn+10]=l.z,Ct[Jn+Zn+11]=4===Vn.itemSize?l.w:1)}}fe={count:oe,texture:Gt,size:new hr(nt,$t)},s.set(T,fe),T.addEventListener("dispose",Tt)}if(!0===b.isInstancedMesh&&null!==b.morphTexture)O.getUniforms().setValue(y,"morphTexture",b.morphTexture,r);else{let ye=0;for(let Ue=0;Ue<U.length;Ue++)ye+=U[Ue];const Me=T.morphTargetsRelative?1:1-ye;O.getUniforms().setValue(y,"morphTargetBaseInfluence",Me),O.getUniforms().setValue(y,"morphTargetInfluences",U)}O.getUniforms().setValue(y,"morphTargetsTexture",fe.texture,r),O.getUniforms().setValue(y,"morphTargetsTextureSize",fe.size)}}}function ff(y,t,r,s){let l=new WeakMap;function T(O){const U=O.target;U.removeEventListener("dispose",T),r.remove(U.instanceMatrix),null!==U.instanceColor&&r.remove(U.instanceColor)}return{update:function u(O){const U=s.render.frame,oe=t.get(O,O.geometry);if(l.get(oe)!==U&&(t.update(oe),l.set(oe,U)),O.isInstancedMesh&&(!1===O.hasEventListener("dispose",T)&&O.addEventListener("dispose",T),l.get(O)!==U&&(r.update(O.instanceMatrix,y.ARRAY_BUFFER),null!==O.instanceColor&&r.update(O.instanceColor,y.ARRAY_BUFFER),l.set(O,U))),O.isSkinnedMesh){const fe=O.skeleton;l.get(fe)!==U&&(fe.update(),l.set(fe,U))}return oe},dispose:function b(){l=new WeakMap}}}const Jg=new no,Yp=new eg(1,1),Zp=new Ze,Jp=new qe,Qg=new so,Qp=[],U0=[],B0=new Float32Array(16),V0=new Float32Array(9),ey=new Float32Array(4);function eh(y,t,r){const s=y[0];if(s<=0||s>0)return y;const l=t*r;let u=Qp[l];if(void 0===u&&(u=new Float32Array(l),Qp[l]=u),0!==t){s.toArray(u,0);for(let b=1,T=0;b!==t;++b)T+=r,y[b].toArray(u,T)}return u}function ya(y,t){if(y.length!==t.length)return!1;for(let r=0,s=y.length;r<s;r++)if(y[r]!==t[r])return!1;return!0}function va(y,t){for(let r=0,s=t.length;r<s;r++)y[r]=t[r]}function em(y,t){let r=U0[t];void 0===r&&(r=new Int32Array(t),U0[t]=r);for(let s=0;s!==t;++s)r[s]=y.allocateTextureUnit();return r}function G0(y,t){const r=this.cache;r[0]!==t&&(y.uniform1f(this.addr,t),r[0]=t)}function z0(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(y.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;y.uniform2fv(this.addr,t),va(r,t)}}function Px(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(y.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(y.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(ya(r,t))return;y.uniform3fv(this.addr,t),va(r,t)}}function Ox(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(y.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;y.uniform4fv(this.addr,t),va(r,t)}}function ml(y,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;y.uniformMatrix2fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;ey.set(s),y.uniformMatrix2fv(this.addr,!1,ey),va(r,s)}}function Lx(y,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;y.uniformMatrix3fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;V0.set(s),y.uniformMatrix3fv(this.addr,!1,V0),va(r,s)}}function Nx(y,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;y.uniformMatrix4fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;B0.set(s),y.uniformMatrix4fv(this.addr,!1,B0),va(r,s)}}function XE(y,t){const r=this.cache;r[0]!==t&&(y.uniform1i(this.addr,t),r[0]=t)}function ty(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(y.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;y.uniform2iv(this.addr,t),va(r,t)}}function $0(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(y.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ya(r,t))return;y.uniform3iv(this.addr,t),va(r,t)}}function kx(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(y.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;y.uniform4iv(this.addr,t),va(r,t)}}function jx(y,t){const r=this.cache;r[0]!==t&&(y.uniform1ui(this.addr,t),r[0]=t)}function Fx(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(y.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;y.uniform2uiv(this.addr,t),va(r,t)}}function H0(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(y.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ya(r,t))return;y.uniform3uiv(this.addr,t),va(r,t)}}function Ux(y,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(y.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;y.uniform4uiv(this.addr,t),va(r,t)}}function Bx(y,t,r){const s=this.cache,l=r.allocateTextureUnit();let u;s[0]!==l&&(y.uniform1i(this.addr,l),s[0]=l),this.type===y.SAMPLER_2D_SHADOW?(Yp.compareFunction=515,u=Yp):u=Jg,r.setTexture2D(t||u,l)}function ny(y,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(y.uniform1i(this.addr,l),s[0]=l),r.setTexture3D(t||Jp,l)}function Vx(y,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(y.uniform1i(this.addr,l),s[0]=l),r.setTextureCube(t||Qg,l)}function Gx(y,t,r){const s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(y.uniform1i(this.addr,l),s[0]=l),r.setTexture2DArray(t||Zp,l)}function $x(y,t){y.uniform1fv(this.addr,t)}function Hx(y,t){const r=eh(t,this.size,2);y.uniform2fv(this.addr,r)}function Oc(y,t){const r=eh(t,this.size,3);y.uniform3fv(this.addr,r)}function ry(y,t){const r=eh(t,this.size,4);y.uniform4fv(this.addr,r)}function Wx(y,t){const r=eh(t,this.size,4);y.uniformMatrix2fv(this.addr,!1,r)}function Xx(y,t){const r=eh(t,this.size,9);y.uniformMatrix3fv(this.addr,!1,r)}function W0(y,t){const r=eh(t,this.size,16);y.uniformMatrix4fv(this.addr,!1,r)}function X0(y,t){y.uniform1iv(this.addr,t)}function tm(y,t){y.uniform2iv(this.addr,t)}function iy(y,t){y.uniform3iv(this.addr,t)}function qE(y,t){y.uniform4iv(this.addr,t)}function q0(y,t){y.uniform1uiv(this.addr,t)}function K0(y,t){y.uniform2uiv(this.addr,t)}function Y0(y,t){y.uniform3uiv(this.addr,t)}function nm(y,t){y.uniform4uiv(this.addr,t)}function sy(y,t,r){const s=this.cache,l=t.length,u=em(r,l);ya(s,u)||(y.uniform1iv(this.addr,u),va(s,u));for(let b=0;b!==l;++b)r.setTexture2D(t[b]||Jg,u[b])}function Jc(y,t,r){const s=this.cache,l=t.length,u=em(r,l);ya(s,u)||(y.uniform1iv(this.addr,u),va(s,u));for(let b=0;b!==l;++b)r.setTexture3D(t[b]||Jp,u[b])}function qx(y,t,r){const s=this.cache,l=t.length,u=em(r,l);ya(s,u)||(y.uniform1iv(this.addr,u),va(s,u));for(let b=0;b!==l;++b)r.setTextureCube(t[b]||Qg,u[b])}function Kx(y,t,r){const s=this.cache,l=t.length,u=em(r,l);ya(s,u)||(y.uniform1iv(this.addr,u),va(s,u));for(let b=0;b!==l;++b)r.setTexture2DArray(t[b]||Zp,u[b])}class Yx{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.setValue=function zx(y){switch(y){case 5126:return G0;case 35664:return z0;case 35665:return Px;case 35666:return Ox;case 35674:return ml;case 35675:return Lx;case 35676:return Nx;case 5124:case 35670:return XE;case 35667:case 35671:return ty;case 35668:case 35672:return $0;case 35669:case 35673:return kx;case 5125:return jx;case 36294:return Fx;case 36295:return H0;case 36296:return Ux;case 35678:case 36198:case 36298:case 36306:case 35682:return Bx;case 35679:case 36299:case 36307:return ny;case 35680:case 36300:case 36308:case 36293:return Vx;case 36289:case 36303:case 36311:case 36292:return Gx}}(r.type)}}class th{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=function oy(y){switch(y){case 5126:return $x;case 35664:return Hx;case 35665:return Oc;case 35666:return ry;case 35674:return Wx;case 35675:return Xx;case 35676:return W0;case 5124:case 35670:return X0;case 35667:case 35671:return tm;case 35668:case 35672:return iy;case 35669:case 35673:return qE;case 5125:return q0;case 36294:return K0;case 36295:return Y0;case 36296:return nm;case 35678:case 36198:case 36298:case 36306:case 35682:return sy;case 35679:case 36299:case 36307:return Jc;case 35680:case 36300:case 36308:case 36293:return qx;case 36289:case 36303:case 36311:case 36292:return Kx}}(r.type)}}class Z0{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,s){const l=this.seq;for(let u=0,b=l.length;u!==b;++u){const T=l[u];T.setValue(t,r[T.id],s)}}}const Qc=/(\w+)(\])?(\[|\.)?/g;function md(y,t){y.seq.push(t),y.map[t.id]=t}function ay(y,t,r){const s=y.name,l=s.length;for(Qc.lastIndex=0;;){const u=Qc.exec(s);let T=u[1];const U=u[3];if("]"===u[2]&&(T|=0),void 0===U||"["===U&&Qc.lastIndex+2===l){md(r,void 0===U?new Yx(T,y,t):new th(T,y,t));break}{let oe=r.map[T];void 0===oe&&(oe=new Z0(T),md(r,oe)),r=oe}}}class Lu{constructor(t,r){this.seq=[],this.map={};const s=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let l=0;l<s;++l){const u=t.getActiveUniform(r,l);ay(u,t.getUniformLocation(r,u.name),this)}}setValue(t,r,s,l){const u=this.map[r];void 0!==u&&u.setValue(t,s,l)}setOptional(t,r,s){const l=r[s];void 0!==l&&this.setValue(t,s,l)}static upload(t,r,s,l){for(let u=0,b=r.length;u!==b;++u){const T=r[u],O=s[T.id];!1!==O.needsUpdate&&T.setValue(t,O.value,l)}}static seqWithValue(t,r){const s=[];for(let l=0,u=t.length;l!==u;++l){const b=t[l];b.id in r&&s.push(b)}return s}}function ly(y,t,r){const s=y.createShader(t);return y.shaderSource(s,r),y.compileShader(s),s}const J0=37297;let Zx=0;const Q0=new Gi;function e_(y,t,r){const s=y.getShaderParameter(t,y.COMPILE_STATUS),l=y.getShaderInfoLog(t).trim();if(s&&""===l)return"";const u=/ERROR: 0:(\d+)/.exec(l);if(u){const b=parseInt(u[1]);return r.toUpperCase()+"\n\n"+l+"\n\n"+function Jx(y,t){const r=y.split("\n"),s=[],l=Math.max(t-6,0),u=Math.min(t+6,r.length);for(let b=l;b<u;b++){const T=b+1;s.push(`${T===t?">":" "} ${T}: ${r[b]}`)}return s.join("\n")}(y.getShaderSource(t),b)}return l}function ew(y,t){const r=function Qx(y){Es._getMatrix(Q0,Es.workingColorSpace,y);const t=`mat3( ${Q0.elements.map(r=>r.toFixed(4))} )`;switch(Es.getTransfer(y)){case hs:return[t,"LinearTransferOETF"];case Pi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",y),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${y}( vec4 value ) {`,`\treturn ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join("\n")}function t_(y,t){let r;switch(t){case hn:r="Linear";break;case Xn:r="Reinhard";break;case Tn:r="Cineon";break;case ct:r="ACESFilmic";break;case Qe:r="AgX";break;case xt:r="Neutral";break;case ft:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+y+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const rm=new mt;function nh(y){return""!==y}function r_(y,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return y.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function i_(y,t){return y.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const s_=/^[ \t]*#include +<([\w\d./]+)>/gm;function pf(y){return y.replace(s_,mf)}const o_=new Map;function mf(y,t){let r=os[t];if(void 0===r){const s=o_.get(t);if(void 0===s)throw new Error("Can not resolve #include <"+t+">");r=os[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s)}return pf(r)}const gf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rh(y){return y.replace(gf,rw)}function rw(y,t,r,s){let l="";for(let u=parseInt(t);u<parseInt(r);u++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return l}function a_(y){let t=`precision ${y.precision} float;\n\tprecision ${y.precision} int;\n\tprecision ${y.precision} sampler2D;\n\tprecision ${y.precision} samplerCube;\n\tprecision ${y.precision} sampler3D;\n\tprecision ${y.precision} sampler2DArray;\n\tprecision ${y.precision} sampler2DShadow;\n\tprecision ${y.precision} samplerCubeShadow;\n\tprecision ${y.precision} sampler2DArrayShadow;\n\tprecision ${y.precision} isampler2D;\n\tprecision ${y.precision} isampler3D;\n\tprecision ${y.precision} isamplerCube;\n\tprecision ${y.precision} isampler2DArray;\n\tprecision ${y.precision} usampler2D;\n\tprecision ${y.precision} usampler3D;\n\tprecision ${y.precision} usamplerCube;\n\tprecision ${y.precision} usampler2DArray;\n\t`;return"highp"===y.precision?t+="\n#define HIGH_PRECISION":"mediump"===y.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===y.precision&&(t+="\n#define LOW_PRECISION"),t}function YE(y,t,r,s){const l=y.getContext(),u=r.defines;let b=r.vertexShader,T=r.fragmentShader;const O=function iw(y){let t="SHADOWMAP_TYPE_BASIC";return y.shadowMapType===E?t="SHADOWMAP_TYPE_PCF":y.shadowMapType===N?t="SHADOWMAP_TYPE_PCF_SOFT":y.shadowMapType===Z&&(t="SHADOWMAP_TYPE_VSM"),t}(r),U=function sm(y){let t="ENVMAP_TYPE_CUBE";if(y.envMap)switch(y.envMapMode){case rn:case bn:t="ENVMAP_TYPE_CUBE";break;case pn:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),Q=function cy(y){let t="ENVMAP_MODE_REFLECTION";return y.envMap&&y.envMapMode===bn&&(t="ENVMAP_MODE_REFRACTION"),t}(r),oe=function sw(y){let t="ENVMAP_BLENDING_NONE";if(y.envMap)switch(y.combine){case Mn:t="ENVMAP_BLENDING_MULTIPLY";break;case pr:t="ENVMAP_BLENDING_MIX";break;case Ln:t="ENVMAP_BLENDING_ADD"}return t}(r),fe=function KE(y){const t=y.envMapCubeUVHeight;if(null===t)return null;const r=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:s,maxMip:r}}(r),ye=function tw(y){return[y.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",y.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nh).join("\n")}(r),Me=function n_(y){const t=[];for(const r in y){const s=y[r];!1!==s&&t.push("#define "+r+" "+s)}return t.join("\n")}(u),Ue=l.createProgram();let Pe,De,tt=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(Pe=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me].filter(nh).join("\n"),Pe.length>0&&(Pe+="\n"),De=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me].filter(nh).join("\n"),De.length>0&&(De+="\n")):(Pe=[a_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+Q:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+O:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(nh).join("\n"),De=[a_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+U:"",r.envMap?"#define "+Q:"",r.envMap?"#define "+oe:"",fe?"#define CUBEUV_TEXEL_WIDTH "+fe.texelWidth:"",fe?"#define CUBEUV_TEXEL_HEIGHT "+fe.texelHeight:"",fe?"#define CUBEUV_MAX_MIP "+fe.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+O:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==nr?"#define TONE_MAPPING":"",r.toneMapping!==nr?os.tonemapping_pars_fragment:"",r.toneMapping!==nr?t_("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",os.colorspace_pars_fragment,ew("linearToOutputTexel",r.outputColorSpace),(Es.getLuminanceCoefficients(rm),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${rm.x.toFixed(4)}, ${rm.y.toFixed(4)}, ${rm.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(nh).join("\n")),b=pf(b),b=r_(b,r),b=i_(b,r),T=pf(T),T=r_(T,r),T=i_(T,r),b=rh(b),T=rh(T),!0!==r.isRawShaderMaterial&&(tt="#version 300 es\n",Pe=[ye,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Pe,De=["#define varying in",r.glslVersion===Je?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Je?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+De);const nt=tt+De+T,$t=ly(l,l.VERTEX_SHADER,tt+Pe+b),Ct=ly(l,l.FRAGMENT_SHADER,nt);function Gt(gn){if(y.debug.checkShaderErrors){const qn=l.getProgramInfoLog(Ue).trim(),Vn=l.getShaderInfoLog($t).trim(),Jn=l.getShaderInfoLog(Ct).trim();let gr=!0,Zn=!0;if(!1===l.getProgramParameter(Ue,l.LINK_STATUS))if(gr=!1,"function"==typeof y.debug.onShaderError)y.debug.onShaderError(l,Ue,$t,Ct);else{const Lr=e_(l,$t,"vertex"),tr=e_(l,Ct,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(Ue,l.VALIDATE_STATUS)+"\n\nMaterial Name: "+gn.name+"\nMaterial Type: "+gn.type+"\n\nProgram Info Log: "+qn+"\n"+Lr+"\n"+tr)}else""!==qn?console.warn("THREE.WebGLProgram: Program Info Log:",qn):(""===Vn||""===Jn)&&(Zn=!1);Zn&&(gn.diagnostics={runnable:gr,programLog:qn,vertexShader:{log:Vn,prefix:Pe},fragmentShader:{log:Jn,prefix:De}})}l.deleteShader($t),l.deleteShader(Ct),qt=new Lu(l,Ue),Tt=function nw(y,t){const r={},s=y.getProgramParameter(t,y.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){const u=y.getActiveAttrib(t,l),b=u.name;let T=1;u.type===y.FLOAT_MAT2&&(T=2),u.type===y.FLOAT_MAT3&&(T=3),u.type===y.FLOAT_MAT4&&(T=4),r[b]={type:u.type,location:y.getAttribLocation(t,b),locationSize:T}}return r}(l,Ue)}let qt,Tt;l.attachShader(Ue,$t),l.attachShader(Ue,Ct),void 0!==r.index0AttributeName?l.bindAttribLocation(Ue,0,r.index0AttributeName):!0===r.morphTargets&&l.bindAttribLocation(Ue,0,"position"),l.linkProgram(Ue),this.getUniforms=function(){return void 0===qt&&Gt(this),qt},this.getAttributes=function(){return void 0===Tt&&Gt(this),Tt};let wt=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===wt&&(wt=l.getProgramParameter(Ue,J0)),wt},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(Ue),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Zx++,this.cacheKey=t,this.usedTimes=1,this.program=Ue,this.vertexShader=$t,this.fragmentShader=Ct,this}let ow=0;class aw{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const s=t.fragmentShader,l=this._getShaderStage(t.vertexShader),u=this._getShaderStage(s),b=this._getShaderCacheForMaterial(t);return!1===b.has(l)&&(b.add(l),l.usedTimes++),!1===b.has(u)&&(b.add(u),u.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const s of r)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let s=r.get(t);return void 0===s&&(s=new Set,r.set(t,s)),s}_getShaderStage(t){const r=this.shaderCache;let s=r.get(t);return void 0===s&&(s=new ZE(t),r.set(t,s)),s}}class ZE{constructor(t){this.id=ow++,this.code=t,this.usedTimes=0}}function lw(y,t,r,s,l,u,b){const T=new mu,O=new aw,U=new Set,Q=[],oe=l.logarithmicDepthBuffer,fe=l.vertexTextures;let ye=l.precision;const Me={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Ue(Tt){return U.add(Tt),0===Tt?"uv":`uv${Tt}`}return{getParameters:function Pe(Tt,wt,gn,qn,Vn){const Jn=qn.fog,gr=Vn.geometry,Lr=(Tt.isMeshStandardMaterial?r:t).get(Tt.envMap||(Tt.isMeshStandardMaterial?qn.environment:null)),tr=Lr&&Lr.mapping===pn?Lr.image.height:null,qr=Me[Tt.type];null!==Tt.precision&&(ye=l.getMaxPrecision(Tt.precision),ye!==Tt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Tt.precision,"not supported, using",ye,"instead."));const ei=gr.morphAttributes.position||gr.morphAttributes.normal||gr.morphAttributes.color,mi=void 0!==ei?ei.length:0;let us,yr,Er,zr,qi=0;if(void 0!==gr.morphAttributes.position&&(qi=1),void 0!==gr.morphAttributes.normal&&(qi=2),void 0!==gr.morphAttributes.color&&(qi=3),qr){const qs=$a[qr];us=qs.vertexShader,yr=qs.fragmentShader}else us=Tt.vertexShader,yr=Tt.fragmentShader,O.update(Tt),Er=O.getVertexShaderID(Tt),zr=O.getFragmentShaderID(Tt);const Nr=y.getRenderTarget(),ui=y.state.buffers.depth.getReversed(),Oi=!0===Vn.isInstancedMesh,Zr=!0===Vn.isBatchedMesh,rs=!!Tt.map,Br=!!Lr,ln=!!Tt.aoMap,Ni=!!Tt.lightMap,Hr=!!Tt.bumpMap,Ei=!!Tt.normalMap,Kr=!!Tt.displacementMap,Yi=!!Tt.emissiveMap,vi=!!Tt.metalnessMap,sn=!!Tt.roughnessMap,jt=Tt.anisotropy>0,er=Tt.clearcoat>0,Fr=Tt.iridescence>0,Ar=Tt.sheen>0,Ri=Tt.transmission>0,di=jt&&!!Tt.anisotropyMap,gi=er&&!!Tt.clearcoatMap,ms=er&&!!Tt.clearcoatNormalMap,Wr=er&&!!Tt.clearcoatRoughnessMap,Ci=Fr&&!!Tt.iridescenceMap,Ki=Fr&&!!Tt.iridescenceThicknessMap,Qi=Ar&&!!Tt.sheenColorMap,Di=Ar&&!!Tt.sheenRoughnessMap,Fs=!!Tt.specularMap,gs=!!Tt.specularColorMap,So=!!Tt.specularIntensityMap,Bn=Ri&&!!Tt.transmissionMap,hi=Ri&&!!Tt.thicknessMap,Rr=!!Tt.alphaMap,ys=!!Tt.extensions;let qo=nr;Tt.toneMapped&&(null===Nr||!0===Nr.isXRRenderTarget)&&(qo=y.toneMapping);const Pa={shaderID:qr,shaderType:Tt.type,shaderName:Tt.name,vertexShader:us,fragmentShader:yr,defines:Tt.defines,customVertexShaderID:Er,customFragmentShaderID:zr,isRawShaderMaterial:!0===Tt.isRawShaderMaterial,glslVersion:Tt.glslVersion,precision:ye,batching:Zr,batchingColor:Zr&&null!==Vn._colorsTexture,instancing:Oi,instancingColor:Oi&&null!==Vn.instanceColor,instancingMorph:Oi&&null!==Vn.morphTexture,supportsVertexTextures:fe,outputColorSpace:null===Nr?y.outputColorSpace:!0===Nr.isXRRenderTarget?Nr.texture.colorSpace:Vi,alphaToCoverage:!!Tt.alphaToCoverage,map:rs,matcap:!!Tt.matcap,envMap:Br,envMapMode:Br&&Lr.mapping,envMapCubeUVHeight:tr,aoMap:ln,lightMap:Ni,bumpMap:Hr,normalMap:Ei,displacementMap:fe&&Kr,emissiveMap:Yi,normalMapObjectSpace:Ei&&1===Tt.normalMapType,normalMapTangentSpace:Ei&&0===Tt.normalMapType,metalnessMap:vi,roughnessMap:sn,anisotropy:jt,anisotropyMap:di,clearcoat:er,clearcoatMap:gi,clearcoatNormalMap:ms,clearcoatRoughnessMap:Wr,dispersion:Tt.dispersion>0,iridescence:Fr,iridescenceMap:Ci,iridescenceThicknessMap:Ki,sheen:Ar,sheenColorMap:Qi,sheenRoughnessMap:Di,specularMap:Fs,specularColorMap:gs,specularIntensityMap:So,transmission:Ri,transmissionMap:Bn,thicknessMap:hi,gradientMap:!!Tt.gradientMap,opaque:!1===Tt.transparent&&1===Tt.blending&&!1===Tt.alphaToCoverage,alphaMap:Rr,alphaTest:Tt.alphaTest>0,alphaHash:!!Tt.alphaHash,combine:Tt.combine,mapUv:rs&&Ue(Tt.map.channel),aoMapUv:ln&&Ue(Tt.aoMap.channel),lightMapUv:Ni&&Ue(Tt.lightMap.channel),bumpMapUv:Hr&&Ue(Tt.bumpMap.channel),normalMapUv:Ei&&Ue(Tt.normalMap.channel),displacementMapUv:Kr&&Ue(Tt.displacementMap.channel),emissiveMapUv:Yi&&Ue(Tt.emissiveMap.channel),metalnessMapUv:vi&&Ue(Tt.metalnessMap.channel),roughnessMapUv:sn&&Ue(Tt.roughnessMap.channel),anisotropyMapUv:di&&Ue(Tt.anisotropyMap.channel),clearcoatMapUv:gi&&Ue(Tt.clearcoatMap.channel),clearcoatNormalMapUv:ms&&Ue(Tt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Wr&&Ue(Tt.clearcoatRoughnessMap.channel),iridescenceMapUv:Ci&&Ue(Tt.iridescenceMap.channel),iridescenceThicknessMapUv:Ki&&Ue(Tt.iridescenceThicknessMap.channel),sheenColorMapUv:Qi&&Ue(Tt.sheenColorMap.channel),sheenRoughnessMapUv:Di&&Ue(Tt.sheenRoughnessMap.channel),specularMapUv:Fs&&Ue(Tt.specularMap.channel),specularColorMapUv:gs&&Ue(Tt.specularColorMap.channel),specularIntensityMapUv:So&&Ue(Tt.specularIntensityMap.channel),transmissionMapUv:Bn&&Ue(Tt.transmissionMap.channel),thicknessMapUv:hi&&Ue(Tt.thicknessMap.channel),alphaMapUv:Rr&&Ue(Tt.alphaMap.channel),vertexTangents:!!gr.attributes.tangent&&(Ei||jt),vertexColors:Tt.vertexColors,vertexAlphas:!0===Tt.vertexColors&&!!gr.attributes.color&&4===gr.attributes.color.itemSize,pointsUvs:!0===Vn.isPoints&&!!gr.attributes.uv&&(rs||Rr),fog:!!Jn,useFog:!0===Tt.fog,fogExp2:!!Jn&&Jn.isFogExp2,flatShading:!0===Tt.flatShading,sizeAttenuation:!0===Tt.sizeAttenuation,logarithmicDepthBuffer:oe,reverseDepthBuffer:ui,skinning:!0===Vn.isSkinnedMesh,morphTargets:void 0!==gr.morphAttributes.position,morphNormals:void 0!==gr.morphAttributes.normal,morphColors:void 0!==gr.morphAttributes.color,morphTargetsCount:mi,morphTextureStride:qi,numDirLights:wt.directional.length,numPointLights:wt.point.length,numSpotLights:wt.spot.length,numSpotLightMaps:wt.spotLightMap.length,numRectAreaLights:wt.rectArea.length,numHemiLights:wt.hemi.length,numDirLightShadows:wt.directionalShadowMap.length,numPointLightShadows:wt.pointShadowMap.length,numSpotLightShadows:wt.spotShadowMap.length,numSpotLightShadowsWithMaps:wt.numSpotLightShadowsWithMaps,numLightProbes:wt.numLightProbes,numClippingPlanes:b.numPlanes,numClipIntersection:b.numIntersection,dithering:Tt.dithering,shadowMapEnabled:y.shadowMap.enabled&&gn.length>0,shadowMapType:y.shadowMap.type,toneMapping:qo,decodeVideoTexture:rs&&!0===Tt.map.isVideoTexture&&Es.getTransfer(Tt.map.colorSpace)===Pi,decodeVideoTextureEmissive:Yi&&!0===Tt.emissiveMap.isVideoTexture&&Es.getTransfer(Tt.emissiveMap.colorSpace)===Pi,premultipliedAlpha:Tt.premultipliedAlpha,doubleSided:2===Tt.side,flipSided:1===Tt.side,useDepthPacking:Tt.depthPacking>=0,depthPacking:Tt.depthPacking||0,index0AttributeName:Tt.index0AttributeName,extensionClipCullDistance:ys&&!0===Tt.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ys&&!0===Tt.extensions.multiDraw||Zr)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:Tt.customProgramCacheKey()};return Pa.vertexUv1s=U.has(1),Pa.vertexUv2s=U.has(2),Pa.vertexUv3s=U.has(3),U.clear(),Pa},getProgramCacheKey:function De(Tt){const wt=[];if(Tt.shaderID?wt.push(Tt.shaderID):(wt.push(Tt.customVertexShaderID),wt.push(Tt.customFragmentShaderID)),void 0!==Tt.defines)for(const gn in Tt.defines)wt.push(gn),wt.push(Tt.defines[gn]);return!1===Tt.isRawShaderMaterial&&(function tt(Tt,wt){Tt.push(wt.precision),Tt.push(wt.outputColorSpace),Tt.push(wt.envMapMode),Tt.push(wt.envMapCubeUVHeight),Tt.push(wt.mapUv),Tt.push(wt.alphaMapUv),Tt.push(wt.lightMapUv),Tt.push(wt.aoMapUv),Tt.push(wt.bumpMapUv),Tt.push(wt.normalMapUv),Tt.push(wt.displacementMapUv),Tt.push(wt.emissiveMapUv),Tt.push(wt.metalnessMapUv),Tt.push(wt.roughnessMapUv),Tt.push(wt.anisotropyMapUv),Tt.push(wt.clearcoatMapUv),Tt.push(wt.clearcoatNormalMapUv),Tt.push(wt.clearcoatRoughnessMapUv),Tt.push(wt.iridescenceMapUv),Tt.push(wt.iridescenceThicknessMapUv),Tt.push(wt.sheenColorMapUv),Tt.push(wt.sheenRoughnessMapUv),Tt.push(wt.specularMapUv),Tt.push(wt.specularColorMapUv),Tt.push(wt.specularIntensityMapUv),Tt.push(wt.transmissionMapUv),Tt.push(wt.thicknessMapUv),Tt.push(wt.combine),Tt.push(wt.fogExp2),Tt.push(wt.sizeAttenuation),Tt.push(wt.morphTargetsCount),Tt.push(wt.morphAttributeCount),Tt.push(wt.numDirLights),Tt.push(wt.numPointLights),Tt.push(wt.numSpotLights),Tt.push(wt.numSpotLightMaps),Tt.push(wt.numHemiLights),Tt.push(wt.numRectAreaLights),Tt.push(wt.numDirLightShadows),Tt.push(wt.numPointLightShadows),Tt.push(wt.numSpotLightShadows),Tt.push(wt.numSpotLightShadowsWithMaps),Tt.push(wt.numLightProbes),Tt.push(wt.shadowMapType),Tt.push(wt.toneMapping),Tt.push(wt.numClippingPlanes),Tt.push(wt.numClipIntersection),Tt.push(wt.depthPacking)}(wt,Tt),function st(Tt,wt){T.disableAll(),wt.supportsVertexTextures&&T.enable(0),wt.instancing&&T.enable(1),wt.instancingColor&&T.enable(2),wt.instancingMorph&&T.enable(3),wt.matcap&&T.enable(4),wt.envMap&&T.enable(5),wt.normalMapObjectSpace&&T.enable(6),wt.normalMapTangentSpace&&T.enable(7),wt.clearcoat&&T.enable(8),wt.iridescence&&T.enable(9),wt.alphaTest&&T.enable(10),wt.vertexColors&&T.enable(11),wt.vertexAlphas&&T.enable(12),wt.vertexUv1s&&T.enable(13),wt.vertexUv2s&&T.enable(14),wt.vertexUv3s&&T.enable(15),wt.vertexTangents&&T.enable(16),wt.anisotropy&&T.enable(17),wt.alphaHash&&T.enable(18),wt.batching&&T.enable(19),wt.dispersion&&T.enable(20),wt.batchingColor&&T.enable(21),Tt.push(T.mask),T.disableAll(),wt.fog&&T.enable(0),wt.useFog&&T.enable(1),wt.flatShading&&T.enable(2),wt.logarithmicDepthBuffer&&T.enable(3),wt.reverseDepthBuffer&&T.enable(4),wt.skinning&&T.enable(5),wt.morphTargets&&T.enable(6),wt.morphNormals&&T.enable(7),wt.morphColors&&T.enable(8),wt.premultipliedAlpha&&T.enable(9),wt.shadowMapEnabled&&T.enable(10),wt.doubleSided&&T.enable(11),wt.flipSided&&T.enable(12),wt.useDepthPacking&&T.enable(13),wt.dithering&&T.enable(14),wt.transmission&&T.enable(15),wt.sheen&&T.enable(16),wt.opaque&&T.enable(17),wt.pointsUvs&&T.enable(18),wt.decodeVideoTexture&&T.enable(19),wt.decodeVideoTextureEmissive&&T.enable(20),wt.alphaToCoverage&&T.enable(21),Tt.push(T.mask)}(wt,Tt),wt.push(y.outputColorSpace)),wt.push(Tt.customProgramCacheKey),wt.join()},getUniforms:function nt(Tt){const wt=Me[Tt.type];let gn;return gn=wt?Lb.clone($a[wt].uniforms):Tt.uniforms,gn},acquireProgram:function $t(Tt,wt){let gn;for(let qn=0,Vn=Q.length;qn<Vn;qn++){const Jn=Q[qn];if(Jn.cacheKey===wt){gn=Jn,++gn.usedTimes;break}}return void 0===gn&&(gn=new YE(y,wt,Tt,u),Q.push(gn)),gn},releaseProgram:function Ct(Tt){if(0==--Tt.usedTimes){const wt=Q.indexOf(Tt);Q[wt]=Q[Q.length-1],Q.pop(),Tt.destroy()}},releaseShaderCache:function Gt(Tt){O.remove(Tt)},programs:Q,dispose:function qt(){O.dispose()}}}function JE(){let y=new WeakMap;return{has:function t(b){return y.has(b)},get:function r(b){let T=y.get(b);return void 0===T&&(T={},y.set(b,T)),T},remove:function s(b){y.delete(b)},update:function l(b,T,O){y.get(b)[T]=O},dispose:function u(){y=new WeakMap}}}function cw(y,t){return y.groupOrder!==t.groupOrder?y.groupOrder-t.groupOrder:y.renderOrder!==t.renderOrder?y.renderOrder-t.renderOrder:y.material.id!==t.material.id?y.material.id-t.material.id:y.z!==t.z?y.z-t.z:y.id-t.id}function l_(y,t){return y.groupOrder!==t.groupOrder?y.groupOrder-t.groupOrder:y.renderOrder!==t.renderOrder?y.renderOrder-t.renderOrder:y.z!==t.z?t.z-y.z:y.id-t.id}function c_(){const y=[];let t=0;const r=[],s=[],l=[];function b(oe,fe,ye,Me,Ue,Pe){let De=y[t];return void 0===De?(De={id:oe.id,object:oe,geometry:fe,material:ye,groupOrder:Me,renderOrder:oe.renderOrder,z:Ue,group:Pe},y[t]=De):(De.id=oe.id,De.object=oe,De.geometry=fe,De.material=ye,De.groupOrder=Me,De.renderOrder=oe.renderOrder,De.z=Ue,De.group=Pe),t++,De}return{opaque:r,transmissive:s,transparent:l,init:function u(){t=0,r.length=0,s.length=0,l.length=0},push:function T(oe,fe,ye,Me,Ue,Pe){const De=b(oe,fe,ye,Me,Ue,Pe);ye.transmission>0?s.push(De):!0===ye.transparent?l.push(De):r.push(De)},unshift:function O(oe,fe,ye,Me,Ue,Pe){const De=b(oe,fe,ye,Me,Ue,Pe);ye.transmission>0?s.unshift(De):!0===ye.transparent?l.unshift(De):r.unshift(De)},finish:function Q(){for(let oe=t,fe=y.length;oe<fe;oe++){const ye=y[oe];if(null===ye.id)break;ye.id=null,ye.object=null,ye.geometry=null,ye.material=null,ye.group=null}},sort:function U(oe,fe){r.length>1&&r.sort(oe||cw),s.length>1&&s.sort(fe||l_),l.length>1&&l.sort(fe||l_)}}}function uy(){let y=new WeakMap;return{get:function t(s,l){const u=y.get(s);let b;return void 0===u?(b=new c_,y.set(s,[b])):l>=u.length?(b=new c_,u.push(b)):b=u[l],b},dispose:function r(){y=new WeakMap}}}function yf(){const y={};return{get:function(t){if(void 0!==y[t.id])return y[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new mt,color:new Sr};break;case"SpotLight":r={position:new mt,direction:new mt,color:new Sr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new mt,color:new Sr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new mt,skyColor:new Sr,groundColor:new Sr};break;case"RectAreaLight":r={color:new Sr,position:new mt,halfWidth:new mt,halfHeight:new mt}}return y[t.id]=r,r}}}let om=0;function u_(y,t){return(t.castShadow?2:0)-(y.castShadow?2:0)+(t.map?1:0)-(y.map?1:0)}function vf(y){const t=new yf,r=function dy(){const y={};return{get:function(t){if(void 0!==y[t.id])return y[t.id];let r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hr,shadowCameraNear:1,shadowCameraFar:1e3}}return y[t.id]=r,r}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let U=0;U<9;U++)s.probe.push(new mt);const l=new mt,u=new Mi,b=new Mi;return{setup:function T(U){let Q=0,oe=0,fe=0;for(let Tt=0;Tt<9;Tt++)s.probe[Tt].set(0,0,0);let ye=0,Me=0,Ue=0,Pe=0,De=0,tt=0,st=0,nt=0,$t=0,Ct=0,Gt=0;U.sort(u_);for(let Tt=0,wt=U.length;Tt<wt;Tt++){const gn=U[Tt],qn=gn.color,Vn=gn.intensity,Jn=gn.distance,gr=gn.shadow&&gn.shadow.map?gn.shadow.map.texture:null;if(gn.isAmbientLight)Q+=qn.r*Vn,oe+=qn.g*Vn,fe+=qn.b*Vn;else if(gn.isLightProbe){for(let Zn=0;Zn<9;Zn++)s.probe[Zn].addScaledVector(gn.sh.coefficients[Zn],Vn);Gt++}else if(gn.isDirectionalLight){const Zn=t.get(gn);if(Zn.color.copy(gn.color).multiplyScalar(gn.intensity),gn.castShadow){const Lr=gn.shadow,tr=r.get(gn);tr.shadowIntensity=Lr.intensity,tr.shadowBias=Lr.bias,tr.shadowNormalBias=Lr.normalBias,tr.shadowRadius=Lr.radius,tr.shadowMapSize=Lr.mapSize,s.directionalShadow[ye]=tr,s.directionalShadowMap[ye]=gr,s.directionalShadowMatrix[ye]=gn.shadow.matrix,tt++}s.directional[ye]=Zn,ye++}else if(gn.isSpotLight){const Zn=t.get(gn);Zn.position.setFromMatrixPosition(gn.matrixWorld),Zn.color.copy(qn).multiplyScalar(Vn),Zn.distance=Jn,Zn.coneCos=Math.cos(gn.angle),Zn.penumbraCos=Math.cos(gn.angle*(1-gn.penumbra)),Zn.decay=gn.decay,s.spot[Ue]=Zn;const Lr=gn.shadow;if(gn.map&&(s.spotLightMap[$t]=gn.map,$t++,Lr.updateMatrices(gn),gn.castShadow&&Ct++),s.spotLightMatrix[Ue]=Lr.matrix,gn.castShadow){const tr=r.get(gn);tr.shadowIntensity=Lr.intensity,tr.shadowBias=Lr.bias,tr.shadowNormalBias=Lr.normalBias,tr.shadowRadius=Lr.radius,tr.shadowMapSize=Lr.mapSize,s.spotShadow[Ue]=tr,s.spotShadowMap[Ue]=gr,nt++}Ue++}else if(gn.isRectAreaLight){const Zn=t.get(gn);Zn.color.copy(qn).multiplyScalar(Vn),Zn.halfWidth.set(.5*gn.width,0,0),Zn.halfHeight.set(0,.5*gn.height,0),s.rectArea[Pe]=Zn,Pe++}else if(gn.isPointLight){const Zn=t.get(gn);if(Zn.color.copy(gn.color).multiplyScalar(gn.intensity),Zn.distance=gn.distance,Zn.decay=gn.decay,gn.castShadow){const Lr=gn.shadow,tr=r.get(gn);tr.shadowIntensity=Lr.intensity,tr.shadowBias=Lr.bias,tr.shadowNormalBias=Lr.normalBias,tr.shadowRadius=Lr.radius,tr.shadowMapSize=Lr.mapSize,tr.shadowCameraNear=Lr.camera.near,tr.shadowCameraFar=Lr.camera.far,s.pointShadow[Me]=tr,s.pointShadowMap[Me]=gr,s.pointShadowMatrix[Me]=gn.shadow.matrix,st++}s.point[Me]=Zn,Me++}else if(gn.isHemisphereLight){const Zn=t.get(gn);Zn.skyColor.copy(gn.color).multiplyScalar(Vn),Zn.groundColor.copy(gn.groundColor).multiplyScalar(Vn),s.hemi[De]=Zn,De++}}Pe>0&&(!0===y.has("OES_texture_float_linear")?(s.rectAreaLTC1=ti.LTC_FLOAT_1,s.rectAreaLTC2=ti.LTC_FLOAT_2):(s.rectAreaLTC1=ti.LTC_HALF_1,s.rectAreaLTC2=ti.LTC_HALF_2)),s.ambient[0]=Q,s.ambient[1]=oe,s.ambient[2]=fe;const qt=s.hash;(qt.directionalLength!==ye||qt.pointLength!==Me||qt.spotLength!==Ue||qt.rectAreaLength!==Pe||qt.hemiLength!==De||qt.numDirectionalShadows!==tt||qt.numPointShadows!==st||qt.numSpotShadows!==nt||qt.numSpotMaps!==$t||qt.numLightProbes!==Gt)&&(s.directional.length=ye,s.spot.length=Ue,s.rectArea.length=Pe,s.point.length=Me,s.hemi.length=De,s.directionalShadow.length=tt,s.directionalShadowMap.length=tt,s.pointShadow.length=st,s.pointShadowMap.length=st,s.spotShadow.length=nt,s.spotShadowMap.length=nt,s.directionalShadowMatrix.length=tt,s.pointShadowMatrix.length=st,s.spotLightMatrix.length=nt+$t-Ct,s.spotLightMap.length=$t,s.numSpotLightShadowsWithMaps=Ct,s.numLightProbes=Gt,qt.directionalLength=ye,qt.pointLength=Me,qt.spotLength=Ue,qt.rectAreaLength=Pe,qt.hemiLength=De,qt.numDirectionalShadows=tt,qt.numPointShadows=st,qt.numSpotShadows=nt,qt.numSpotMaps=$t,qt.numLightProbes=Gt,s.version=om++)},setupView:function O(U,Q){let oe=0,fe=0,ye=0,Me=0,Ue=0;const Pe=Q.matrixWorldInverse;for(let De=0,tt=U.length;De<tt;De++){const st=U[De];if(st.isDirectionalLight){const nt=s.directional[oe];nt.direction.setFromMatrixPosition(st.matrixWorld),l.setFromMatrixPosition(st.target.matrixWorld),nt.direction.sub(l),nt.direction.transformDirection(Pe),oe++}else if(st.isSpotLight){const nt=s.spot[ye];nt.position.setFromMatrixPosition(st.matrixWorld),nt.position.applyMatrix4(Pe),nt.direction.setFromMatrixPosition(st.matrixWorld),l.setFromMatrixPosition(st.target.matrixWorld),nt.direction.sub(l),nt.direction.transformDirection(Pe),ye++}else if(st.isRectAreaLight){const nt=s.rectArea[Me];nt.position.setFromMatrixPosition(st.matrixWorld),nt.position.applyMatrix4(Pe),b.identity(),u.copy(st.matrixWorld),u.premultiply(Pe),b.extractRotation(u),nt.halfWidth.set(.5*st.width,0,0),nt.halfHeight.set(0,.5*st.height,0),nt.halfWidth.applyMatrix4(b),nt.halfHeight.applyMatrix4(b),Me++}else if(st.isPointLight){const nt=s.point[fe];nt.position.setFromMatrixPosition(st.matrixWorld),nt.position.applyMatrix4(Pe),fe++}else if(st.isHemisphereLight){const nt=s.hemi[Ue];nt.direction.setFromMatrixPosition(st.matrixWorld),nt.direction.transformDirection(Pe),Ue++}}},state:s}}function hy(y){const t=new vf(y),r=[],s=[],U={lightsArray:r,shadowsArray:s,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function l(Q){U.camera=Q,r.length=0,s.length=0},state:U,setupLights:function T(){t.setup(r)},setupLightsView:function O(Q){t.setupView(r,Q)},pushLight:function u(Q){r.push(Q)},pushShadow:function b(Q){s.push(Q)}}}function uw(y){let t=new WeakMap;return{get:function r(l,u=0){const b=t.get(l);let T;return void 0===b?(T=new hy(y),t.set(l,[T])):u>=b.length?(T=new hy(y),b.push(T)):T=b[u],T},dispose:function s(){t=new WeakMap}}}function h_(y,t,r){let s=new ep;const l=new hr,u=new hr,b=new Ds,T=new zh({depthPacking:3201}),O=new wv,U={},Q=r.maxTextureSize,oe={0:1,1:0,2:2},fe=new Sl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new hr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),ye=fe.clone();ye.defines.HORIZONTAL_PASS=1;const Me=new Zi;Me.setAttribute("position",new Ls(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Ue=new cs(Me,fe),Pe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E;let De=this.type;function tt(Ct,Gt){const qt=t.update(Ue);fe.defines.VSM_SAMPLES!==Ct.blurSamples&&(fe.defines.VSM_SAMPLES=Ct.blurSamples,ye.defines.VSM_SAMPLES=Ct.blurSamples,fe.needsUpdate=!0,ye.needsUpdate=!0),null===Ct.mapPass&&(Ct.mapPass=new Se(l.x,l.y)),fe.uniforms.shadow_pass.value=Ct.map.texture,fe.uniforms.resolution.value=Ct.mapSize,fe.uniforms.radius.value=Ct.radius,y.setRenderTarget(Ct.mapPass),y.clear(),y.renderBufferDirect(Gt,null,qt,fe,Ue,null),ye.uniforms.shadow_pass.value=Ct.mapPass.texture,ye.uniforms.resolution.value=Ct.mapSize,ye.uniforms.radius.value=Ct.radius,y.setRenderTarget(Ct.map),y.clear(),y.renderBufferDirect(Gt,null,qt,ye,Ue,null)}function st(Ct,Gt,qt,Tt){let wt=null;const gn=!0===qt.isPointLight?Ct.customDistanceMaterial:Ct.customDepthMaterial;if(void 0!==gn)wt=gn;else if(wt=!0===qt.isPointLight?O:T,y.localClippingEnabled&&!0===Gt.clipShadows&&Array.isArray(Gt.clippingPlanes)&&0!==Gt.clippingPlanes.length||Gt.displacementMap&&0!==Gt.displacementScale||Gt.alphaMap&&Gt.alphaTest>0||Gt.map&&Gt.alphaTest>0){const qn=wt.uuid,Vn=Gt.uuid;let Jn=U[qn];void 0===Jn&&(Jn={},U[qn]=Jn);let gr=Jn[Vn];void 0===gr&&(gr=wt.clone(),Jn[Vn]=gr,Gt.addEventListener("dispose",$t)),wt=gr}return wt.visible=Gt.visible,wt.wireframe=Gt.wireframe,wt.side=Tt===Z?null!==Gt.shadowSide?Gt.shadowSide:Gt.side:null!==Gt.shadowSide?Gt.shadowSide:oe[Gt.side],wt.alphaMap=Gt.alphaMap,wt.alphaTest=Gt.alphaTest,wt.map=Gt.map,wt.clipShadows=Gt.clipShadows,wt.clippingPlanes=Gt.clippingPlanes,wt.clipIntersection=Gt.clipIntersection,wt.displacementMap=Gt.displacementMap,wt.displacementScale=Gt.displacementScale,wt.displacementBias=Gt.displacementBias,wt.wireframeLinewidth=Gt.wireframeLinewidth,wt.linewidth=Gt.linewidth,!0===qt.isPointLight&&!0===wt.isMeshDistanceMaterial&&(y.properties.get(wt).light=qt),wt}function nt(Ct,Gt,qt,Tt,wt){if(!1===Ct.visible)return;if(Ct.layers.test(Gt.layers)&&(Ct.isMesh||Ct.isLine||Ct.isPoints)&&(Ct.castShadow||Ct.receiveShadow&&wt===Z)&&(!Ct.frustumCulled||s.intersectsObject(Ct))){Ct.modelViewMatrix.multiplyMatrices(qt.matrixWorldInverse,Ct.matrixWorld);const Vn=t.update(Ct),Jn=Ct.material;if(Array.isArray(Jn)){const gr=Vn.groups;for(let Zn=0,Lr=gr.length;Zn<Lr;Zn++){const tr=gr[Zn],qr=Jn[tr.materialIndex];if(qr&&qr.visible){const ei=st(Ct,qr,Tt,wt);Ct.onBeforeShadow(y,Ct,Gt,qt,Vn,ei,tr),y.renderBufferDirect(qt,null,Vn,ei,Ct,tr),Ct.onAfterShadow(y,Ct,Gt,qt,Vn,ei,tr)}}}else if(Jn.visible){const gr=st(Ct,Jn,Tt,wt);Ct.onBeforeShadow(y,Ct,Gt,qt,Vn,gr,null),y.renderBufferDirect(qt,null,Vn,gr,Ct,null),Ct.onAfterShadow(y,Ct,Gt,qt,Vn,gr,null)}}const qn=Ct.children;for(let Vn=0,Jn=qn.length;Vn<Jn;Vn++)nt(qn[Vn],Gt,qt,Tt,wt)}function $t(Ct){Ct.target.removeEventListener("dispose",$t);for(const qt in U){const Tt=U[qt],wt=Ct.target.uuid;wt in Tt&&(Tt[wt].dispose(),delete Tt[wt])}}this.render=function(Ct,Gt,qt){if(!1===Pe.enabled||!1===Pe.autoUpdate&&!1===Pe.needsUpdate||0===Ct.length)return;const Tt=y.getRenderTarget(),wt=y.getActiveCubeFace(),gn=y.getActiveMipmapLevel(),qn=y.state;qn.setBlending(0),qn.buffers.color.setClear(1,1,1,1),qn.buffers.depth.setTest(!0),qn.setScissorTest(!1);const Vn=De!==Z&&this.type===Z,Jn=De===Z&&this.type!==Z;for(let gr=0,Zn=Ct.length;gr<Zn;gr++){const Lr=Ct[gr],tr=Lr.shadow;if(void 0===tr){console.warn("THREE.WebGLShadowMap:",Lr,"has no shadow.");continue}if(!1===tr.autoUpdate&&!1===tr.needsUpdate)continue;l.copy(tr.mapSize);const qr=tr.getFrameExtents();if(l.multiply(qr),u.copy(tr.mapSize),(l.x>Q||l.y>Q)&&(l.x>Q&&(u.x=Math.floor(Q/qr.x),l.x=u.x*qr.x,tr.mapSize.x=u.x),l.y>Q&&(u.y=Math.floor(Q/qr.y),l.y=u.y*qr.y,tr.mapSize.y=u.y)),null===tr.map||!0===Vn||!0===Jn){const mi=this.type!==Z?{minFilter:an,magFilter:an}:{};null!==tr.map&&tr.map.dispose(),tr.map=new Se(l.x,l.y,mi),tr.map.texture.name=Lr.name+".shadowMap",tr.camera.updateProjectionMatrix()}y.setRenderTarget(tr.map),y.clear();const ei=tr.getViewportCount();for(let mi=0;mi<ei;mi++){const qi=tr.getViewport(mi);b.set(u.x*qi.x,u.y*qi.y,u.x*qi.z,u.y*qi.w),qn.viewport(b),tr.updateMatrices(Lr,mi),s=tr.getFrustum(),nt(Gt,qt,tr.camera,Lr,this.type)}!0!==tr.isPointLightShadow&&this.type===Z&&tt(tr,qt),tr.needsUpdate=!1}De=this.type,Pe.needsUpdate=!1,y.setRenderTarget(Tt,wt,gn)}}const f_={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function p_(y,t){const u=new function r(){let Bn=!1;const hi=new Ds;let _r=null;const Rr=new Ds(0,0,0,0);return{setMask:function(bi){_r!==bi&&!Bn&&(y.colorMask(bi,bi,bi,bi),_r=bi)},setLocked:function(bi){Bn=bi},setClear:function(bi,yi,ys,qo,Pa){!0===Pa&&(bi*=qo,yi*=qo,ys*=qo),hi.set(bi,yi,ys,qo),!1===Rr.equals(hi)&&(y.clearColor(bi,yi,ys,qo),Rr.copy(hi))},reset:function(){Bn=!1,_r=null,Rr.set(-1,0,0,0)}}},b=new function s(){let Bn=!1,hi=!1,_r=null,Rr=null,bi=null;return{setReversed:function(yi){if(hi!==yi){const ys=t.get("EXT_clip_control");ys.clipControlEXT(ys.LOWER_LEFT_EXT,hi?ys.ZERO_TO_ONE_EXT:ys.NEGATIVE_ONE_TO_ONE_EXT);const qo=bi;bi=null,this.setClear(qo)}hi=yi},getReversed:function(){return hi},setTest:function(yi){yi?Nr(y.DEPTH_TEST):ui(y.DEPTH_TEST)},setMask:function(yi){_r!==yi&&!Bn&&(y.depthMask(yi),_r=yi)},setFunc:function(yi){if(hi&&(yi=f_[yi]),Rr!==yi){switch(yi){case 0:y.depthFunc(y.NEVER);break;case 1:y.depthFunc(y.ALWAYS);break;case 2:y.depthFunc(y.LESS);break;case 3:default:y.depthFunc(y.LEQUAL);break;case 4:y.depthFunc(y.EQUAL);break;case 5:y.depthFunc(y.GEQUAL);break;case 6:y.depthFunc(y.GREATER);break;case 7:y.depthFunc(y.NOTEQUAL)}Rr=yi}},setLocked:function(yi){Bn=yi},setClear:function(yi){bi!==yi&&(hi&&(yi=1-yi),y.clearDepth(yi),bi=yi)},reset:function(){Bn=!1,_r=null,Rr=null,bi=null,hi=!1}}},T=new function l(){let Bn=!1,hi=null,_r=null,Rr=null,bi=null,yi=null,ys=null,qo=null,Pa=null;return{setTest:function(qs){Bn||(qs?Nr(y.STENCIL_TEST):ui(y.STENCIL_TEST))},setMask:function(qs){hi!==qs&&!Bn&&(y.stencilMask(qs),hi=qs)},setFunc:function(qs,dc,nu){(_r!==qs||Rr!==dc||bi!==nu)&&(y.stencilFunc(qs,dc,nu),_r=qs,Rr=dc,bi=nu)},setOp:function(qs,dc,nu){(yi!==qs||ys!==dc||qo!==nu)&&(y.stencilOp(qs,dc,nu),yi=qs,ys=dc,qo=nu)},setLocked:function(qs){Bn=qs},setClear:function(qs){Pa!==qs&&(y.clearStencil(qs),Pa=qs)},reset:function(){Bn=!1,hi=null,_r=null,Rr=null,bi=null,yi=null,ys=null,qo=null,Pa=null}}},O=new WeakMap,U=new WeakMap;let Q={},oe={},fe=new WeakMap,ye=[],Me=null,Ue=!1,Pe=null,De=null,tt=null,st=null,nt=null,$t=null,Ct=null,Gt=new Sr(0,0,0),qt=0,Tt=!1,wt=null,gn=null,qn=null,Vn=null,Jn=null;const gr=y.getParameter(y.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Zn=!1,Lr=0;const tr=y.getParameter(y.VERSION);-1!==tr.indexOf("WebGL")?(Lr=parseFloat(/^WebGL (\d)/.exec(tr)[1]),Zn=Lr>=1):-1!==tr.indexOf("OpenGL ES")&&(Lr=parseFloat(/^OpenGL ES (\d)/.exec(tr)[1]),Zn=Lr>=2);let qr=null,ei={};const mi=y.getParameter(y.SCISSOR_BOX),qi=y.getParameter(y.VIEWPORT),us=(new Ds).fromArray(mi),yr=(new Ds).fromArray(qi);function Er(Bn,hi,_r,Rr){const bi=new Uint8Array(4),yi=y.createTexture();y.bindTexture(Bn,yi),y.texParameteri(Bn,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(Bn,y.TEXTURE_MAG_FILTER,y.NEAREST);for(let ys=0;ys<_r;ys++)Bn===y.TEXTURE_3D||Bn===y.TEXTURE_2D_ARRAY?y.texImage3D(hi,0,y.RGBA,1,1,Rr,0,y.RGBA,y.UNSIGNED_BYTE,bi):y.texImage2D(hi+ys,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,bi);return yi}const zr={};function Nr(Bn){!0!==Q[Bn]&&(y.enable(Bn),Q[Bn]=!0)}function ui(Bn){!1!==Q[Bn]&&(y.disable(Bn),Q[Bn]=!1)}zr[y.TEXTURE_2D]=Er(y.TEXTURE_2D,y.TEXTURE_2D,1),zr[y.TEXTURE_CUBE_MAP]=Er(y.TEXTURE_CUBE_MAP,y.TEXTURE_CUBE_MAP_POSITIVE_X,6),zr[y.TEXTURE_2D_ARRAY]=Er(y.TEXTURE_2D_ARRAY,y.TEXTURE_2D_ARRAY,1,1),zr[y.TEXTURE_3D]=Er(y.TEXTURE_3D,y.TEXTURE_3D,1,1),u.setClear(0,0,0,1),b.setClear(1),T.setClear(0),Nr(y.DEPTH_TEST),b.setFunc(3),Hr(!1),Ei(1),Nr(y.CULL_FACE),ln(0);const kr={100:y.FUNC_ADD,101:y.FUNC_SUBTRACT,102:y.FUNC_REVERSE_SUBTRACT};kr[103]=y.MIN,kr[104]=y.MAX;const Br={200:y.ZERO,201:y.ONE,202:y.SRC_COLOR,204:y.SRC_ALPHA,210:y.SRC_ALPHA_SATURATE,208:y.DST_COLOR,206:y.DST_ALPHA,203:y.ONE_MINUS_SRC_COLOR,205:y.ONE_MINUS_SRC_ALPHA,209:y.ONE_MINUS_DST_COLOR,207:y.ONE_MINUS_DST_ALPHA,211:y.CONSTANT_COLOR,212:y.ONE_MINUS_CONSTANT_COLOR,213:y.CONSTANT_ALPHA,214:y.ONE_MINUS_CONSTANT_ALPHA};function ln(Bn,hi,_r,Rr,bi,yi,ys,qo,Pa,qs){if(0!==Bn){if(!1===Ue&&(Nr(y.BLEND),Ue=!0),5===Bn)bi=bi||hi,yi=yi||_r,ys=ys||Rr,(hi!==De||bi!==nt)&&(y.blendEquationSeparate(kr[hi],kr[bi]),De=hi,nt=bi),(_r!==tt||Rr!==st||yi!==$t||ys!==Ct)&&(y.blendFuncSeparate(Br[_r],Br[Rr],Br[yi],Br[ys]),tt=_r,st=Rr,$t=yi,Ct=ys),(!1===qo.equals(Gt)||Pa!==qt)&&(y.blendColor(qo.r,qo.g,qo.b,Pa),Gt.copy(qo),qt=Pa),Pe=Bn,Tt=!1;else if(Bn!==Pe||qs!==Tt){if((100!==De||100!==nt)&&(y.blendEquation(y.FUNC_ADD),De=100,nt=100),qs)switch(Bn){case 1:y.blendFuncSeparate(y.ONE,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA);break;case 2:y.blendFunc(y.ONE,y.ONE);break;case 3:y.blendFuncSeparate(y.ZERO,y.ONE_MINUS_SRC_COLOR,y.ZERO,y.ONE);break;case 4:y.blendFuncSeparate(y.ZERO,y.SRC_COLOR,y.ZERO,y.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bn)}else switch(Bn){case 1:y.blendFuncSeparate(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA);break;case 2:y.blendFunc(y.SRC_ALPHA,y.ONE);break;case 3:y.blendFuncSeparate(y.ZERO,y.ONE_MINUS_SRC_COLOR,y.ZERO,y.ONE);break;case 4:y.blendFunc(y.ZERO,y.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bn)}tt=null,st=null,$t=null,Ct=null,Gt.set(0,0,0),qt=0,Pe=Bn,Tt=qs}}else!0===Ue&&(ui(y.BLEND),Ue=!1)}function Hr(Bn){wt!==Bn&&(y.frontFace(Bn?y.CW:y.CCW),wt=Bn)}function Ei(Bn){0!==Bn?(Nr(y.CULL_FACE),Bn!==gn&&y.cullFace(1===Bn?y.BACK:2===Bn?y.FRONT:y.FRONT_AND_BACK)):ui(y.CULL_FACE),gn=Bn}function Yi(Bn,hi,_r){Bn?(Nr(y.POLYGON_OFFSET_FILL),(Vn!==hi||Jn!==_r)&&(y.polygonOffset(hi,_r),Vn=hi,Jn=_r)):ui(y.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:b,stencil:T},enable:Nr,disable:ui,bindFramebuffer:function Oi(Bn,hi){return oe[Bn]!==hi&&(y.bindFramebuffer(Bn,hi),oe[Bn]=hi,Bn===y.DRAW_FRAMEBUFFER&&(oe[y.FRAMEBUFFER]=hi),Bn===y.FRAMEBUFFER&&(oe[y.DRAW_FRAMEBUFFER]=hi),!0)},drawBuffers:function Zr(Bn,hi){let _r=ye,Rr=!1;if(Bn){_r=fe.get(hi),void 0===_r&&(_r=[],fe.set(hi,_r));const bi=Bn.textures;if(_r.length!==bi.length||_r[0]!==y.COLOR_ATTACHMENT0){for(let yi=0,ys=bi.length;yi<ys;yi++)_r[yi]=y.COLOR_ATTACHMENT0+yi;_r.length=bi.length,Rr=!0}}else _r[0]!==y.BACK&&(_r[0]=y.BACK,Rr=!0);Rr&&y.drawBuffers(_r)},useProgram:function rs(Bn){return Me!==Bn&&(y.useProgram(Bn),Me=Bn,!0)},setBlending:ln,setMaterial:function Ni(Bn,hi){2===Bn.side?ui(y.CULL_FACE):Nr(y.CULL_FACE);let _r=1===Bn.side;hi&&(_r=!_r),Hr(_r),1===Bn.blending&&!1===Bn.transparent?ln(0):ln(Bn.blending,Bn.blendEquation,Bn.blendSrc,Bn.blendDst,Bn.blendEquationAlpha,Bn.blendSrcAlpha,Bn.blendDstAlpha,Bn.blendColor,Bn.blendAlpha,Bn.premultipliedAlpha),b.setFunc(Bn.depthFunc),b.setTest(Bn.depthTest),b.setMask(Bn.depthWrite),u.setMask(Bn.colorWrite);const Rr=Bn.stencilWrite;T.setTest(Rr),Rr&&(T.setMask(Bn.stencilWriteMask),T.setFunc(Bn.stencilFunc,Bn.stencilRef,Bn.stencilFuncMask),T.setOp(Bn.stencilFail,Bn.stencilZFail,Bn.stencilZPass)),Yi(Bn.polygonOffset,Bn.polygonOffsetFactor,Bn.polygonOffsetUnits),!0===Bn.alphaToCoverage?Nr(y.SAMPLE_ALPHA_TO_COVERAGE):ui(y.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Hr,setCullFace:Ei,setLineWidth:function Kr(Bn){Bn!==qn&&(Zn&&y.lineWidth(Bn),qn=Bn)},setPolygonOffset:Yi,setScissorTest:function vi(Bn){Bn?Nr(y.SCISSOR_TEST):ui(y.SCISSOR_TEST)},activeTexture:function sn(Bn){void 0===Bn&&(Bn=y.TEXTURE0+gr-1),qr!==Bn&&(y.activeTexture(Bn),qr=Bn)},bindTexture:function jt(Bn,hi,_r){void 0===_r&&(_r=null===qr?y.TEXTURE0+gr-1:qr);let Rr=ei[_r];void 0===Rr&&(Rr={type:void 0,texture:void 0},ei[_r]=Rr),(Rr.type!==Bn||Rr.texture!==hi)&&(qr!==_r&&(y.activeTexture(_r),qr=_r),y.bindTexture(Bn,hi||zr[Bn]),Rr.type=Bn,Rr.texture=hi)},unbindTexture:function er(){const Bn=ei[qr];void 0!==Bn&&void 0!==Bn.type&&(y.bindTexture(Bn.type,null),Bn.type=void 0,Bn.texture=void 0)},compressedTexImage2D:function Tr(){try{y.compressedTexImage2D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},compressedTexImage3D:function Fr(){try{y.compressedTexImage3D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},texImage2D:function Ci(){try{y.texImage2D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},texImage3D:function Ki(){try{y.texImage3D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},updateUBOMapping:function Fs(Bn,hi){let _r=U.get(hi);void 0===_r&&(_r=new WeakMap,U.set(hi,_r));let Rr=_r.get(Bn);void 0===Rr&&(Rr=y.getUniformBlockIndex(hi,Bn.name),_r.set(Bn,Rr))},uniformBlockBinding:function gs(Bn,hi){const Rr=U.get(hi).get(Bn);O.get(hi)!==Rr&&(y.uniformBlockBinding(hi,Rr,Bn.__bindingPointIndex),O.set(hi,Rr))},texStorage2D:function ms(){try{y.texStorage2D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},texStorage3D:function Wr(){try{y.texStorage3D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},texSubImage2D:function Ar(){try{y.texSubImage2D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},texSubImage3D:function Ri(){try{y.texSubImage3D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},compressedTexSubImage2D:function di(){try{y.compressedTexSubImage2D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},compressedTexSubImage3D:function gi(){try{y.compressedTexSubImage3D(...arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}},scissor:function Qi(Bn){!1===us.equals(Bn)&&(y.scissor(Bn.x,Bn.y,Bn.z,Bn.w),us.copy(Bn))},viewport:function Di(Bn){!1===yr.equals(Bn)&&(y.viewport(Bn.x,Bn.y,Bn.z,Bn.w),yr.copy(Bn))},reset:function So(){y.disable(y.BLEND),y.disable(y.CULL_FACE),y.disable(y.DEPTH_TEST),y.disable(y.POLYGON_OFFSET_FILL),y.disable(y.SCISSOR_TEST),y.disable(y.STENCIL_TEST),y.disable(y.SAMPLE_ALPHA_TO_COVERAGE),y.blendEquation(y.FUNC_ADD),y.blendFunc(y.ONE,y.ZERO),y.blendFuncSeparate(y.ONE,y.ZERO,y.ONE,y.ZERO),y.blendColor(0,0,0,0),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.depthMask(!0),y.depthFunc(y.LESS),b.setReversed(!1),y.clearDepth(1),y.stencilMask(4294967295),y.stencilFunc(y.ALWAYS,0,4294967295),y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.clearStencil(0),y.cullFace(y.BACK),y.frontFace(y.CCW),y.polygonOffset(0,0),y.activeTexture(y.TEXTURE0),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),y.bindFramebuffer(y.READ_FRAMEBUFFER,null),y.useProgram(null),y.lineWidth(1),y.scissor(0,0,y.canvas.width,y.canvas.height),y.viewport(0,0,y.canvas.width,y.canvas.height),Q={},qr=null,ei={},oe={},fe=new WeakMap,ye=[],Me=null,Ue=!1,Pe=null,De=null,tt=null,st=null,nt=null,$t=null,Ct=null,Gt=new Sr(0,0,0),qt=0,Tt=!1,wt=null,gn=null,qn=null,Vn=null,Jn=null,us.set(0,0,y.canvas.width,y.canvas.height),yr.set(0,0,y.canvas.width,y.canvas.height),u.reset(),b.reset(),T.reset()}}}function dw(y,t,r,s,l,u,b){const T=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,O=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),U=new hr,Q=new WeakMap;let oe;const fe=new WeakMap;let ye=!1;try{ye=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Me(sn,jt){return ye?new OffscreenCanvas(sn,jt):_l("canvas")}function Ue(sn,jt,er){let Tr=1;const Fr=vi(sn);if((Fr.width>er||Fr.height>er)&&(Tr=er/Math.max(Fr.width,Fr.height)),Tr<1){if(typeof HTMLImageElement<"u"&&sn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&sn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&sn instanceof ImageBitmap||typeof VideoFrame<"u"&&sn instanceof VideoFrame){const Ar=Math.floor(Tr*Fr.width),Ri=Math.floor(Tr*Fr.height);void 0===oe&&(oe=Me(Ar,Ri));const di=jt?Me(Ar,Ri):oe;return di.width=Ar,di.height=Ri,di.getContext("2d").drawImage(sn,0,0,Ar,Ri),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fr.width+"x"+Fr.height+") to ("+Ar+"x"+Ri+")."),di}return"data"in sn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fr.width+"x"+Fr.height+")."),sn}return sn}function Pe(sn){return sn.generateMipmaps}function De(sn){y.generateMipmap(sn)}function tt(sn){return sn.isWebGLCubeRenderTarget?y.TEXTURE_CUBE_MAP:sn.isWebGL3DRenderTarget?y.TEXTURE_3D:sn.isWebGLArrayRenderTarget||sn.isCompressedArrayTexture?y.TEXTURE_2D_ARRAY:y.TEXTURE_2D}function st(sn,jt,er,Tr,Fr=!1){if(null!==sn){if(void 0!==y[sn])return y[sn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+sn+"'")}let Ar=jt;if(jt===y.RED&&(er===y.FLOAT&&(Ar=y.R32F),er===y.HALF_FLOAT&&(Ar=y.R16F),er===y.UNSIGNED_BYTE&&(Ar=y.R8)),jt===y.RED_INTEGER&&(er===y.UNSIGNED_BYTE&&(Ar=y.R8UI),er===y.UNSIGNED_SHORT&&(Ar=y.R16UI),er===y.UNSIGNED_INT&&(Ar=y.R32UI),er===y.BYTE&&(Ar=y.R8I),er===y.SHORT&&(Ar=y.R16I),er===y.INT&&(Ar=y.R32I)),jt===y.RG&&(er===y.FLOAT&&(Ar=y.RG32F),er===y.HALF_FLOAT&&(Ar=y.RG16F),er===y.UNSIGNED_BYTE&&(Ar=y.RG8)),jt===y.RG_INTEGER&&(er===y.UNSIGNED_BYTE&&(Ar=y.RG8UI),er===y.UNSIGNED_SHORT&&(Ar=y.RG16UI),er===y.UNSIGNED_INT&&(Ar=y.RG32UI),er===y.BYTE&&(Ar=y.RG8I),er===y.SHORT&&(Ar=y.RG16I),er===y.INT&&(Ar=y.RG32I)),jt===y.RGB_INTEGER&&(er===y.UNSIGNED_BYTE&&(Ar=y.RGB8UI),er===y.UNSIGNED_SHORT&&(Ar=y.RGB16UI),er===y.UNSIGNED_INT&&(Ar=y.RGB32UI),er===y.BYTE&&(Ar=y.RGB8I),er===y.SHORT&&(Ar=y.RGB16I),er===y.INT&&(Ar=y.RGB32I)),jt===y.RGBA_INTEGER&&(er===y.UNSIGNED_BYTE&&(Ar=y.RGBA8UI),er===y.UNSIGNED_SHORT&&(Ar=y.RGBA16UI),er===y.UNSIGNED_INT&&(Ar=y.RGBA32UI),er===y.BYTE&&(Ar=y.RGBA8I),er===y.SHORT&&(Ar=y.RGBA16I),er===y.INT&&(Ar=y.RGBA32I)),jt===y.RGB&&er===y.UNSIGNED_INT_5_9_9_9_REV&&(Ar=y.RGB9_E5),jt===y.RGBA){const Ri=Fr?hs:Es.getTransfer(Tr);er===y.FLOAT&&(Ar=y.RGBA32F),er===y.HALF_FLOAT&&(Ar=y.RGBA16F),er===y.UNSIGNED_BYTE&&(Ar=Ri===Pi?y.SRGB8_ALPHA8:y.RGBA8),er===y.UNSIGNED_SHORT_4_4_4_4&&(Ar=y.RGBA4),er===y.UNSIGNED_SHORT_5_5_5_1&&(Ar=y.RGB5_A1)}return(Ar===y.R16F||Ar===y.R32F||Ar===y.RG16F||Ar===y.RG32F||Ar===y.RGBA16F||Ar===y.RGBA32F)&&t.get("EXT_color_buffer_float"),Ar}function nt(sn,jt){let er;return sn?null===jt||jt===k||jt===de?er=y.DEPTH24_STENCIL8:jt===B?er=y.DEPTH32F_STENCIL8:jt===Ye&&(er=y.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===jt||jt===k||jt===de?er=y.DEPTH_COMPONENT24:jt===B?er=y.DEPTH_COMPONENT32F:jt===Ye&&(er=y.DEPTH_COMPONENT16),er}function $t(sn,jt){return!0===Pe(sn)||sn.isFramebufferTexture&&sn.minFilter!==an&&sn.minFilter!==wn?Math.log2(Math.max(jt.width,jt.height))+1:void 0!==sn.mipmaps&&sn.mipmaps.length>0?sn.mipmaps.length:sn.isCompressedTexture&&Array.isArray(sn.image)?jt.mipmaps.length:1}function Ct(sn){const jt=sn.target;jt.removeEventListener("dispose",Ct),function qt(sn){const jt=s.get(sn);if(void 0===jt.__webglInit)return;const er=sn.source,Tr=fe.get(er);if(Tr){const Fr=Tr[jt.__cacheKey];Fr.usedTimes--,0===Fr.usedTimes&&Tt(sn),0===Object.keys(Tr).length&&fe.delete(er)}s.remove(sn)}(jt),jt.isVideoTexture&&Q.delete(jt)}function Gt(sn){const jt=sn.target;jt.removeEventListener("dispose",Gt),function wt(sn){const jt=s.get(sn);if(sn.depthTexture&&(sn.depthTexture.dispose(),s.remove(sn.depthTexture)),sn.isWebGLCubeRenderTarget)for(let Tr=0;Tr<6;Tr++){if(Array.isArray(jt.__webglFramebuffer[Tr]))for(let Fr=0;Fr<jt.__webglFramebuffer[Tr].length;Fr++)y.deleteFramebuffer(jt.__webglFramebuffer[Tr][Fr]);else y.deleteFramebuffer(jt.__webglFramebuffer[Tr]);jt.__webglDepthbuffer&&y.deleteRenderbuffer(jt.__webglDepthbuffer[Tr])}else{if(Array.isArray(jt.__webglFramebuffer))for(let Tr=0;Tr<jt.__webglFramebuffer.length;Tr++)y.deleteFramebuffer(jt.__webglFramebuffer[Tr]);else y.deleteFramebuffer(jt.__webglFramebuffer);if(jt.__webglDepthbuffer&&y.deleteRenderbuffer(jt.__webglDepthbuffer),jt.__webglMultisampledFramebuffer&&y.deleteFramebuffer(jt.__webglMultisampledFramebuffer),jt.__webglColorRenderbuffer)for(let Tr=0;Tr<jt.__webglColorRenderbuffer.length;Tr++)jt.__webglColorRenderbuffer[Tr]&&y.deleteRenderbuffer(jt.__webglColorRenderbuffer[Tr]);jt.__webglDepthRenderbuffer&&y.deleteRenderbuffer(jt.__webglDepthRenderbuffer)}const er=sn.textures;for(let Tr=0,Fr=er.length;Tr<Fr;Tr++){const Ar=s.get(er[Tr]);Ar.__webglTexture&&(y.deleteTexture(Ar.__webglTexture),b.memory.textures--),s.remove(er[Tr])}s.remove(sn)}(jt)}function Tt(sn){const jt=s.get(sn);y.deleteTexture(jt.__webglTexture),delete fe.get(sn.source)[jt.__cacheKey],b.memory.textures--}let gn=0;function gr(sn,jt){const er=s.get(sn);if(sn.isVideoTexture&&function Kr(sn){const jt=b.render.frame;Q.get(sn)!==jt&&(Q.set(sn,jt),sn.update())}(sn),!1===sn.isRenderTargetTexture&&sn.version>0&&er.__version!==sn.version){const Tr=sn.image;if(null===Tr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Tr.complete)return void yr(er,sn,jt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.bindTexture(y.TEXTURE_2D,er.__webglTexture,y.TEXTURE0+jt)}const qr={[Xt]:y.REPEAT,[yn]:y.CLAMP_TO_EDGE,1002:y.MIRRORED_REPEAT},ei={[an]:y.NEAREST,1004:y.NEAREST_MIPMAP_NEAREST,[nn]:y.NEAREST_MIPMAP_LINEAR,[wn]:y.LINEAR,1007:y.LINEAR_MIPMAP_NEAREST,[sr]:y.LINEAR_MIPMAP_LINEAR},mi={512:y.NEVER,519:y.ALWAYS,513:y.LESS,515:y.LEQUAL,514:y.EQUAL,518:y.GEQUAL,516:y.GREATER,517:y.NOTEQUAL};function qi(sn,jt){if(jt.type===B&&!1===t.has("OES_texture_float_linear")&&(jt.magFilter===wn||1007===jt.magFilter||jt.magFilter===nn||jt.magFilter===sr||jt.minFilter===wn||1007===jt.minFilter||jt.minFilter===nn||jt.minFilter===sr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),y.texParameteri(sn,y.TEXTURE_WRAP_S,qr[jt.wrapS]),y.texParameteri(sn,y.TEXTURE_WRAP_T,qr[jt.wrapT]),(sn===y.TEXTURE_3D||sn===y.TEXTURE_2D_ARRAY)&&y.texParameteri(sn,y.TEXTURE_WRAP_R,qr[jt.wrapR]),y.texParameteri(sn,y.TEXTURE_MAG_FILTER,ei[jt.magFilter]),y.texParameteri(sn,y.TEXTURE_MIN_FILTER,ei[jt.minFilter]),jt.compareFunction&&(y.texParameteri(sn,y.TEXTURE_COMPARE_MODE,y.COMPARE_REF_TO_TEXTURE),y.texParameteri(sn,y.TEXTURE_COMPARE_FUNC,mi[jt.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(jt.magFilter===an||jt.minFilter!==nn&&jt.minFilter!==sr||jt.type===B&&!1===t.has("OES_texture_float_linear"))return;if(jt.anisotropy>1||s.get(jt).__currentAnisotropy){const er=t.get("EXT_texture_filter_anisotropic");y.texParameterf(sn,er.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(jt.anisotropy,l.getMaxAnisotropy())),s.get(jt).__currentAnisotropy=jt.anisotropy}}}function us(sn,jt){let er=!1;void 0===sn.__webglInit&&(sn.__webglInit=!0,jt.addEventListener("dispose",Ct));const Tr=jt.source;let Fr=fe.get(Tr);void 0===Fr&&(Fr={},fe.set(Tr,Fr));const Ar=function Jn(sn){const jt=[];return jt.push(sn.wrapS),jt.push(sn.wrapT),jt.push(sn.wrapR||0),jt.push(sn.magFilter),jt.push(sn.minFilter),jt.push(sn.anisotropy),jt.push(sn.internalFormat),jt.push(sn.format),jt.push(sn.type),jt.push(sn.generateMipmaps),jt.push(sn.premultiplyAlpha),jt.push(sn.flipY),jt.push(sn.unpackAlignment),jt.push(sn.colorSpace),jt.join()}(jt);if(Ar!==sn.__cacheKey){void 0===Fr[Ar]&&(Fr[Ar]={texture:y.createTexture(),usedTimes:0},b.memory.textures++,er=!0),Fr[Ar].usedTimes++;const Ri=Fr[sn.__cacheKey];void 0!==Ri&&(Fr[sn.__cacheKey].usedTimes--,0===Ri.usedTimes&&Tt(jt)),sn.__cacheKey=Ar,sn.__webglTexture=Fr[Ar].texture}return er}function yr(sn,jt,er){let Tr=y.TEXTURE_2D;(jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(Tr=y.TEXTURE_2D_ARRAY),jt.isData3DTexture&&(Tr=y.TEXTURE_3D);const Fr=us(sn,jt),Ar=jt.source;r.bindTexture(Tr,sn.__webglTexture,y.TEXTURE0+er);const Ri=s.get(Ar);if(Ar.version!==Ri.__version||!0===Fr){r.activeTexture(y.TEXTURE0+er);const di=Es.getPrimaries(Es.workingColorSpace),gi=""===jt.colorSpace?null:Es.getPrimaries(jt.colorSpace),ms=""===jt.colorSpace||di===gi?y.NONE:y.BROWSER_DEFAULT_WEBGL;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,jt.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,jt.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,jt.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,ms);let Wr=Ue(jt.image,!1,l.maxTextureSize);Wr=Yi(jt,Wr);const Ci=u.convert(jt.format,jt.colorSpace),Ki=u.convert(jt.type);let Di,Qi=st(jt.internalFormat,Ci,Ki,jt.colorSpace,jt.isVideoTexture);qi(Tr,jt);const Fs=jt.mipmaps,gs=!0!==jt.isVideoTexture,So=void 0===Ri.__version||!0===Fr,Bn=Ar.dataReady,hi=$t(jt,Wr);if(jt.isDepthTexture)Qi=nt(jt.format===pt,jt.type),So&&(gs?r.texStorage2D(y.TEXTURE_2D,1,Qi,Wr.width,Wr.height):r.texImage2D(y.TEXTURE_2D,0,Qi,Wr.width,Wr.height,0,Ci,Ki,null));else if(jt.isDataTexture)if(Fs.length>0){gs&&So&&r.texStorage2D(y.TEXTURE_2D,hi,Qi,Fs[0].width,Fs[0].height);for(let _r=0,Rr=Fs.length;_r<Rr;_r++)Di=Fs[_r],gs?Bn&&r.texSubImage2D(y.TEXTURE_2D,_r,0,0,Di.width,Di.height,Ci,Ki,Di.data):r.texImage2D(y.TEXTURE_2D,_r,Qi,Di.width,Di.height,0,Ci,Ki,Di.data);jt.generateMipmaps=!1}else gs?(So&&r.texStorage2D(y.TEXTURE_2D,hi,Qi,Wr.width,Wr.height),Bn&&r.texSubImage2D(y.TEXTURE_2D,0,0,0,Wr.width,Wr.height,Ci,Ki,Wr.data)):r.texImage2D(y.TEXTURE_2D,0,Qi,Wr.width,Wr.height,0,Ci,Ki,Wr.data);else if(jt.isCompressedTexture)if(jt.isCompressedArrayTexture){gs&&So&&r.texStorage3D(y.TEXTURE_2D_ARRAY,hi,Qi,Fs[0].width,Fs[0].height,Wr.depth);for(let _r=0,Rr=Fs.length;_r<Rr;_r++)if(Di=Fs[_r],jt.format!==Ft)if(null!==Ci)if(gs){if(Bn)if(jt.layerUpdates.size>0){const bi=tf(Di.width,Di.height,jt.format,jt.type);for(const yi of jt.layerUpdates){const ys=Di.data.subarray(yi*bi/Di.data.BYTES_PER_ELEMENT,(yi+1)*bi/Di.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(y.TEXTURE_2D_ARRAY,_r,0,0,yi,Di.width,Di.height,1,Ci,ys)}jt.clearLayerUpdates()}else r.compressedTexSubImage3D(y.TEXTURE_2D_ARRAY,_r,0,0,0,Di.width,Di.height,Wr.depth,Ci,Di.data)}else r.compressedTexImage3D(y.TEXTURE_2D_ARRAY,_r,Qi,Di.width,Di.height,Wr.depth,0,Di.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else gs?Bn&&r.texSubImage3D(y.TEXTURE_2D_ARRAY,_r,0,0,0,Di.width,Di.height,Wr.depth,Ci,Ki,Di.data):r.texImage3D(y.TEXTURE_2D_ARRAY,_r,Qi,Di.width,Di.height,Wr.depth,0,Ci,Ki,Di.data)}else{gs&&So&&r.texStorage2D(y.TEXTURE_2D,hi,Qi,Fs[0].width,Fs[0].height);for(let _r=0,Rr=Fs.length;_r<Rr;_r++)Di=Fs[_r],jt.format!==Ft?null!==Ci?gs?Bn&&r.compressedTexSubImage2D(y.TEXTURE_2D,_r,0,0,Di.width,Di.height,Ci,Di.data):r.compressedTexImage2D(y.TEXTURE_2D,_r,Qi,Di.width,Di.height,0,Di.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gs?Bn&&r.texSubImage2D(y.TEXTURE_2D,_r,0,0,Di.width,Di.height,Ci,Ki,Di.data):r.texImage2D(y.TEXTURE_2D,_r,Qi,Di.width,Di.height,0,Ci,Ki,Di.data)}else if(jt.isDataArrayTexture)if(gs){if(So&&r.texStorage3D(y.TEXTURE_2D_ARRAY,hi,Qi,Wr.width,Wr.height,Wr.depth),Bn)if(jt.layerUpdates.size>0){const _r=tf(Wr.width,Wr.height,jt.format,jt.type);for(const Rr of jt.layerUpdates){const bi=Wr.data.subarray(Rr*_r/Wr.data.BYTES_PER_ELEMENT,(Rr+1)*_r/Wr.data.BYTES_PER_ELEMENT);r.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,Rr,Wr.width,Wr.height,1,Ci,Ki,bi)}jt.clearLayerUpdates()}else r.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,0,Wr.width,Wr.height,Wr.depth,Ci,Ki,Wr.data)}else r.texImage3D(y.TEXTURE_2D_ARRAY,0,Qi,Wr.width,Wr.height,Wr.depth,0,Ci,Ki,Wr.data);else if(jt.isData3DTexture)gs?(So&&r.texStorage3D(y.TEXTURE_3D,hi,Qi,Wr.width,Wr.height,Wr.depth),Bn&&r.texSubImage3D(y.TEXTURE_3D,0,0,0,0,Wr.width,Wr.height,Wr.depth,Ci,Ki,Wr.data)):r.texImage3D(y.TEXTURE_3D,0,Qi,Wr.width,Wr.height,Wr.depth,0,Ci,Ki,Wr.data);else if(jt.isFramebufferTexture){if(So)if(gs)r.texStorage2D(y.TEXTURE_2D,hi,Qi,Wr.width,Wr.height);else{let _r=Wr.width,Rr=Wr.height;for(let bi=0;bi<hi;bi++)r.texImage2D(y.TEXTURE_2D,bi,Qi,_r,Rr,0,Ci,Ki,null),_r>>=1,Rr>>=1}}else if(Fs.length>0){if(gs&&So){const _r=vi(Fs[0]);r.texStorage2D(y.TEXTURE_2D,hi,Qi,_r.width,_r.height)}for(let _r=0,Rr=Fs.length;_r<Rr;_r++)Di=Fs[_r],gs?Bn&&r.texSubImage2D(y.TEXTURE_2D,_r,0,0,Ci,Ki,Di):r.texImage2D(y.TEXTURE_2D,_r,Qi,Ci,Ki,Di);jt.generateMipmaps=!1}else if(gs){if(So){const _r=vi(Wr);r.texStorage2D(y.TEXTURE_2D,hi,Qi,_r.width,_r.height)}Bn&&r.texSubImage2D(y.TEXTURE_2D,0,0,0,Ci,Ki,Wr)}else r.texImage2D(y.TEXTURE_2D,0,Qi,Ci,Ki,Wr);Pe(jt)&&De(Tr),Ri.__version=Ar.version,jt.onUpdate&&jt.onUpdate(jt)}sn.__version=jt.version}function zr(sn,jt,er,Tr,Fr,Ar){const Ri=u.convert(er.format,er.colorSpace),di=u.convert(er.type),gi=st(er.internalFormat,Ri,di,er.colorSpace),ms=s.get(jt),Wr=s.get(er);if(Wr.__renderTarget=jt,!ms.__hasExternalTextures){const Ci=Math.max(1,jt.width>>Ar),Ki=Math.max(1,jt.height>>Ar);Fr===y.TEXTURE_3D||Fr===y.TEXTURE_2D_ARRAY?r.texImage3D(Fr,Ar,gi,Ci,Ki,jt.depth,0,Ri,di,null):r.texImage2D(Fr,Ar,gi,Ci,Ki,0,Ri,di,null)}r.bindFramebuffer(y.FRAMEBUFFER,sn),Ei(jt)?T.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,Tr,Fr,Wr.__webglTexture,0,Hr(jt)):(Fr===y.TEXTURE_2D||Fr>=y.TEXTURE_CUBE_MAP_POSITIVE_X&&Fr<=y.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&y.framebufferTexture2D(y.FRAMEBUFFER,Tr,Fr,Wr.__webglTexture,Ar),r.bindFramebuffer(y.FRAMEBUFFER,null)}function Nr(sn,jt,er){if(y.bindRenderbuffer(y.RENDERBUFFER,sn),jt.depthBuffer){const Tr=jt.depthTexture,Ar=nt(jt.stencilBuffer,Tr&&Tr.isDepthTexture?Tr.type:null),Ri=jt.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,di=Hr(jt);Ei(jt)?T.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,di,Ar,jt.width,jt.height):er?y.renderbufferStorageMultisample(y.RENDERBUFFER,di,Ar,jt.width,jt.height):y.renderbufferStorage(y.RENDERBUFFER,Ar,jt.width,jt.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,Ri,y.RENDERBUFFER,sn)}else{const Tr=jt.textures;for(let Fr=0;Fr<Tr.length;Fr++){const Ar=Tr[Fr],Ri=u.convert(Ar.format,Ar.colorSpace),di=u.convert(Ar.type),gi=st(Ar.internalFormat,Ri,di,Ar.colorSpace),ms=Hr(jt);er&&!1===Ei(jt)?y.renderbufferStorageMultisample(y.RENDERBUFFER,ms,gi,jt.width,jt.height):Ei(jt)?T.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,ms,gi,jt.width,jt.height):y.renderbufferStorage(y.RENDERBUFFER,gi,jt.width,jt.height)}}y.bindRenderbuffer(y.RENDERBUFFER,null)}function Oi(sn){const jt=s.get(sn),er=!0===sn.isWebGLCubeRenderTarget;if(jt.__boundDepthTexture!==sn.depthTexture){const Tr=sn.depthTexture;if(jt.__depthDisposeCallback&&jt.__depthDisposeCallback(),Tr){const Fr=()=>{delete jt.__boundDepthTexture,delete jt.__depthDisposeCallback,Tr.removeEventListener("dispose",Fr)};Tr.addEventListener("dispose",Fr),jt.__depthDisposeCallback=Fr}jt.__boundDepthTexture=Tr}if(sn.depthTexture&&!jt.__autoAllocateDepthBuffer){if(er)throw new Error("target.depthTexture not supported in Cube render targets");!function ui(sn,jt){if(jt&&jt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(y.FRAMEBUFFER,sn),!jt.depthTexture||!jt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Tr=s.get(jt.depthTexture);Tr.__renderTarget=jt,(!Tr.__webglTexture||jt.depthTexture.image.width!==jt.width||jt.depthTexture.image.height!==jt.height)&&(jt.depthTexture.image.width=jt.width,jt.depthTexture.image.height=jt.height,jt.depthTexture.needsUpdate=!0),gr(jt.depthTexture,0);const Fr=Tr.__webglTexture,Ar=Hr(jt);if(jt.depthTexture.format===$e)Ei(jt)?T.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,Fr,0,Ar):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,Fr,0);else{if(jt.depthTexture.format!==pt)throw new Error("Unknown depthTexture format");Ei(jt)?T.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,Fr,0,Ar):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,Fr,0)}}(jt.__webglFramebuffer,sn)}else if(er){jt.__webglDepthbuffer=[];for(let Tr=0;Tr<6;Tr++)if(r.bindFramebuffer(y.FRAMEBUFFER,jt.__webglFramebuffer[Tr]),void 0===jt.__webglDepthbuffer[Tr])jt.__webglDepthbuffer[Tr]=y.createRenderbuffer(),Nr(jt.__webglDepthbuffer[Tr],sn,!1);else{const Fr=sn.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,Ar=jt.__webglDepthbuffer[Tr];y.bindRenderbuffer(y.RENDERBUFFER,Ar),y.framebufferRenderbuffer(y.FRAMEBUFFER,Fr,y.RENDERBUFFER,Ar)}}else if(r.bindFramebuffer(y.FRAMEBUFFER,jt.__webglFramebuffer),void 0===jt.__webglDepthbuffer)jt.__webglDepthbuffer=y.createRenderbuffer(),Nr(jt.__webglDepthbuffer,sn,!1);else{const Tr=sn.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,Fr=jt.__webglDepthbuffer;y.bindRenderbuffer(y.RENDERBUFFER,Fr),y.framebufferRenderbuffer(y.FRAMEBUFFER,Tr,y.RENDERBUFFER,Fr)}r.bindFramebuffer(y.FRAMEBUFFER,null)}const Br=[],ln=[];function Hr(sn){return Math.min(l.maxSamples,sn.samples)}function Ei(sn){const jt=s.get(sn);return sn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==jt.__useRenderToTexture}function Yi(sn,jt){const er=sn.colorSpace,Tr=sn.format,Fr=sn.type;return!0===sn.isCompressedTexture||!0===sn.isVideoTexture||er!==Vi&&""!==er&&(Es.getTransfer(er)===Pi?(Tr!==Ft||Fr!==Mr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",er)),jt}function vi(sn){return typeof HTMLImageElement<"u"&&sn instanceof HTMLImageElement?(U.width=sn.naturalWidth||sn.width,U.height=sn.naturalHeight||sn.height):typeof VideoFrame<"u"&&sn instanceof VideoFrame?(U.width=sn.displayWidth,U.height=sn.displayHeight):(U.width=sn.width,U.height=sn.height),U}this.allocateTextureUnit=function Vn(){const sn=gn;return sn>=l.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+sn+" texture units while this GPU supports only "+l.maxTextures),gn+=1,sn},this.resetTextureUnits=function qn(){gn=0},this.setTexture2D=gr,this.setTexture2DArray=function Zn(sn,jt){const er=s.get(sn);sn.version>0&&er.__version!==sn.version?yr(er,sn,jt):r.bindTexture(y.TEXTURE_2D_ARRAY,er.__webglTexture,y.TEXTURE0+jt)},this.setTexture3D=function Lr(sn,jt){const er=s.get(sn);sn.version>0&&er.__version!==sn.version?yr(er,sn,jt):r.bindTexture(y.TEXTURE_3D,er.__webglTexture,y.TEXTURE0+jt)},this.setTextureCube=function tr(sn,jt){const er=s.get(sn);sn.version>0&&er.__version!==sn.version?function Er(sn,jt,er){if(6!==jt.image.length)return;const Tr=us(sn,jt),Fr=jt.source;r.bindTexture(y.TEXTURE_CUBE_MAP,sn.__webglTexture,y.TEXTURE0+er);const Ar=s.get(Fr);if(Fr.version!==Ar.__version||!0===Tr){r.activeTexture(y.TEXTURE0+er);const Ri=Es.getPrimaries(Es.workingColorSpace),di=""===jt.colorSpace?null:Es.getPrimaries(jt.colorSpace),gi=""===jt.colorSpace||Ri===di?y.NONE:y.BROWSER_DEFAULT_WEBGL;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,jt.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,jt.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,jt.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,gi);const ms=jt.isCompressedTexture||jt.image[0].isCompressedTexture,Wr=jt.image[0]&&jt.image[0].isDataTexture,Ci=[];for(let Rr=0;Rr<6;Rr++)Ci[Rr]=ms||Wr?Wr?jt.image[Rr].image:jt.image[Rr]:Ue(jt.image[Rr],!0,l.maxCubemapSize),Ci[Rr]=Yi(jt,Ci[Rr]);const Ki=Ci[0],Qi=u.convert(jt.format,jt.colorSpace),Di=u.convert(jt.type),Fs=st(jt.internalFormat,Qi,Di,jt.colorSpace),gs=!0!==jt.isVideoTexture,So=void 0===Ar.__version||!0===Tr,Bn=Fr.dataReady;let _r,hi=$t(jt,Ki);if(qi(y.TEXTURE_CUBE_MAP,jt),ms){gs&&So&&r.texStorage2D(y.TEXTURE_CUBE_MAP,hi,Fs,Ki.width,Ki.height);for(let Rr=0;Rr<6;Rr++){_r=Ci[Rr].mipmaps;for(let bi=0;bi<_r.length;bi++){const yi=_r[bi];jt.format!==Ft?null!==Qi?gs?Bn&&r.compressedTexSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi,0,0,yi.width,yi.height,Qi,yi.data):r.compressedTexImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi,Fs,yi.width,yi.height,0,yi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):gs?Bn&&r.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi,0,0,yi.width,yi.height,Qi,Di,yi.data):r.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi,Fs,yi.width,yi.height,0,Qi,Di,yi.data)}}}else{if(_r=jt.mipmaps,gs&&So){_r.length>0&&hi++;const Rr=vi(Ci[0]);r.texStorage2D(y.TEXTURE_CUBE_MAP,hi,Fs,Rr.width,Rr.height)}for(let Rr=0;Rr<6;Rr++)if(Wr){gs?Bn&&r.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,0,0,Ci[Rr].width,Ci[Rr].height,Qi,Di,Ci[Rr].data):r.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,Fs,Ci[Rr].width,Ci[Rr].height,0,Qi,Di,Ci[Rr].data);for(let bi=0;bi<_r.length;bi++){const ys=_r[bi].image[Rr].image;gs?Bn&&r.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi+1,0,0,ys.width,ys.height,Qi,Di,ys.data):r.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi+1,Fs,ys.width,ys.height,0,Qi,Di,ys.data)}}else{gs?Bn&&r.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,0,0,Qi,Di,Ci[Rr]):r.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,0,Fs,Qi,Di,Ci[Rr]);for(let bi=0;bi<_r.length;bi++){const yi=_r[bi];gs?Bn&&r.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi+1,0,0,Qi,Di,yi.image[Rr]):r.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+Rr,bi+1,Fs,Qi,Di,yi.image[Rr])}}}Pe(jt)&&De(y.TEXTURE_CUBE_MAP),Ar.__version=Fr.version,jt.onUpdate&&jt.onUpdate(jt)}sn.__version=jt.version}(er,sn,jt):r.bindTexture(y.TEXTURE_CUBE_MAP,er.__webglTexture,y.TEXTURE0+jt)},this.rebindTextures=function Zr(sn,jt,er){const Tr=s.get(sn);void 0!==jt&&zr(Tr.__webglFramebuffer,sn,sn.texture,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,0),void 0!==er&&Oi(sn)},this.setupRenderTarget=function rs(sn){const jt=sn.texture,er=s.get(sn),Tr=s.get(jt);sn.addEventListener("dispose",Gt);const Fr=sn.textures,Ar=!0===sn.isWebGLCubeRenderTarget,Ri=Fr.length>1;if(Ri||(void 0===Tr.__webglTexture&&(Tr.__webglTexture=y.createTexture()),Tr.__version=jt.version,b.memory.textures++),Ar){er.__webglFramebuffer=[];for(let di=0;di<6;di++)if(jt.mipmaps&&jt.mipmaps.length>0){er.__webglFramebuffer[di]=[];for(let gi=0;gi<jt.mipmaps.length;gi++)er.__webglFramebuffer[di][gi]=y.createFramebuffer()}else er.__webglFramebuffer[di]=y.createFramebuffer()}else{if(jt.mipmaps&&jt.mipmaps.length>0){er.__webglFramebuffer=[];for(let di=0;di<jt.mipmaps.length;di++)er.__webglFramebuffer[di]=y.createFramebuffer()}else er.__webglFramebuffer=y.createFramebuffer();if(Ri)for(let di=0,gi=Fr.length;di<gi;di++){const ms=s.get(Fr[di]);void 0===ms.__webglTexture&&(ms.__webglTexture=y.createTexture(),b.memory.textures++)}if(sn.samples>0&&!1===Ei(sn)){er.__webglMultisampledFramebuffer=y.createFramebuffer(),er.__webglColorRenderbuffer=[],r.bindFramebuffer(y.FRAMEBUFFER,er.__webglMultisampledFramebuffer);for(let di=0;di<Fr.length;di++){const gi=Fr[di];er.__webglColorRenderbuffer[di]=y.createRenderbuffer(),y.bindRenderbuffer(y.RENDERBUFFER,er.__webglColorRenderbuffer[di]);const ms=u.convert(gi.format,gi.colorSpace),Wr=u.convert(gi.type),Ci=st(gi.internalFormat,ms,Wr,gi.colorSpace,!0===sn.isXRRenderTarget),Ki=Hr(sn);y.renderbufferStorageMultisample(y.RENDERBUFFER,Ki,Ci,sn.width,sn.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+di,y.RENDERBUFFER,er.__webglColorRenderbuffer[di])}y.bindRenderbuffer(y.RENDERBUFFER,null),sn.depthBuffer&&(er.__webglDepthRenderbuffer=y.createRenderbuffer(),Nr(er.__webglDepthRenderbuffer,sn,!0)),r.bindFramebuffer(y.FRAMEBUFFER,null)}}if(Ar){r.bindTexture(y.TEXTURE_CUBE_MAP,Tr.__webglTexture),qi(y.TEXTURE_CUBE_MAP,jt);for(let di=0;di<6;di++)if(jt.mipmaps&&jt.mipmaps.length>0)for(let gi=0;gi<jt.mipmaps.length;gi++)zr(er.__webglFramebuffer[di][gi],sn,jt,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+di,gi);else zr(er.__webglFramebuffer[di],sn,jt,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+di,0);Pe(jt)&&De(y.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Ri){for(let di=0,gi=Fr.length;di<gi;di++){const ms=Fr[di],Wr=s.get(ms);r.bindTexture(y.TEXTURE_2D,Wr.__webglTexture),qi(y.TEXTURE_2D,ms),zr(er.__webglFramebuffer,sn,ms,y.COLOR_ATTACHMENT0+di,y.TEXTURE_2D,0),Pe(ms)&&De(y.TEXTURE_2D)}r.unbindTexture()}else{let di=y.TEXTURE_2D;if((sn.isWebGL3DRenderTarget||sn.isWebGLArrayRenderTarget)&&(di=sn.isWebGL3DRenderTarget?y.TEXTURE_3D:y.TEXTURE_2D_ARRAY),r.bindTexture(di,Tr.__webglTexture),qi(di,jt),jt.mipmaps&&jt.mipmaps.length>0)for(let gi=0;gi<jt.mipmaps.length;gi++)zr(er.__webglFramebuffer[gi],sn,jt,y.COLOR_ATTACHMENT0,di,gi);else zr(er.__webglFramebuffer,sn,jt,y.COLOR_ATTACHMENT0,di,0);Pe(jt)&&De(di),r.unbindTexture()}sn.depthBuffer&&Oi(sn)},this.updateRenderTargetMipmap=function kr(sn){const jt=sn.textures;for(let er=0,Tr=jt.length;er<Tr;er++){const Fr=jt[er];if(Pe(Fr)){const Ar=tt(sn),Ri=s.get(Fr).__webglTexture;r.bindTexture(Ar,Ri),De(Ar),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ni(sn){if(sn.samples>0)if(!1===Ei(sn)){const jt=sn.textures,er=sn.width,Tr=sn.height;let Fr=y.COLOR_BUFFER_BIT;const Ar=sn.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,Ri=s.get(sn),di=jt.length>1;if(di)for(let gi=0;gi<jt.length;gi++)r.bindFramebuffer(y.FRAMEBUFFER,Ri.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+gi,y.RENDERBUFFER,null),r.bindFramebuffer(y.FRAMEBUFFER,Ri.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+gi,y.TEXTURE_2D,null,0);r.bindFramebuffer(y.READ_FRAMEBUFFER,Ri.__webglMultisampledFramebuffer),r.bindFramebuffer(y.DRAW_FRAMEBUFFER,Ri.__webglFramebuffer);for(let gi=0;gi<jt.length;gi++){if(sn.resolveDepthBuffer&&(sn.depthBuffer&&(Fr|=y.DEPTH_BUFFER_BIT),sn.stencilBuffer&&sn.resolveStencilBuffer&&(Fr|=y.STENCIL_BUFFER_BIT)),di){y.framebufferRenderbuffer(y.READ_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.RENDERBUFFER,Ri.__webglColorRenderbuffer[gi]);const ms=s.get(jt[gi]).__webglTexture;y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,ms,0)}y.blitFramebuffer(0,0,er,Tr,0,0,er,Tr,Fr,y.NEAREST),!0===O&&(Br.length=0,ln.length=0,Br.push(y.COLOR_ATTACHMENT0+gi),sn.depthBuffer&&!1===sn.resolveDepthBuffer&&(Br.push(Ar),ln.push(Ar),y.invalidateFramebuffer(y.DRAW_FRAMEBUFFER,ln)),y.invalidateFramebuffer(y.READ_FRAMEBUFFER,Br))}if(r.bindFramebuffer(y.READ_FRAMEBUFFER,null),r.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),di)for(let gi=0;gi<jt.length;gi++){r.bindFramebuffer(y.FRAMEBUFFER,Ri.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+gi,y.RENDERBUFFER,Ri.__webglColorRenderbuffer[gi]);const ms=s.get(jt[gi]).__webglTexture;r.bindFramebuffer(y.FRAMEBUFFER,Ri.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+gi,y.TEXTURE_2D,ms,0)}r.bindFramebuffer(y.DRAW_FRAMEBUFFER,Ri.__webglMultisampledFramebuffer)}else sn.depthBuffer&&!1===sn.resolveDepthBuffer&&O&&y.invalidateFramebuffer(y.DRAW_FRAMEBUFFER,[sn.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Oi,this.setupFrameBufferTexture=zr,this.useMultisampledRTT=Ei}function hw(y,t){return{convert:function r(s,l=""){let u;const b=Es.getTransfer(l);if(s===Mr)return y.UNSIGNED_BYTE;if(s===se)return y.UNSIGNED_SHORT_4_4_4_4;if(s===H)return y.UNSIGNED_SHORT_5_5_5_1;if(s===Ke)return y.UNSIGNED_INT_5_9_9_9_REV;if(s===te)return y.BYTE;if(s===Ie)return y.SHORT;if(s===Ye)return y.UNSIGNED_SHORT;if(s===A)return y.INT;if(s===k)return y.UNSIGNED_INT;if(s===B)return y.FLOAT;if(s===L)return y.HALF_FLOAT;if(s===Ve)return y.ALPHA;if(s===vt)return y.RGB;if(s===Ft)return y.RGBA;if(s===_n)return y.LUMINANCE;if(s===He)return y.LUMINANCE_ALPHA;if(s===$e)return y.DEPTH_COMPONENT;if(s===pt)return y.DEPTH_STENCIL;if(s===ot)return y.RED;if(s===Dt)return y.RED_INTEGER;if(s===vn)return y.RG;if(s===Hn)return y.RG_INTEGER;if(s===Pr)return y.RGBA_INTEGER;if(s===Ui||s===ji||s===Us||s===xs)if(b===Pi){if(u=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===Ui)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ji)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Us)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===xs)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=t.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===Ui)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ji)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Us)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===xs)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===wi||s===ds||s===$s||s===vs){if(u=t.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===wi)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ds)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$s)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===vs)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Vs||s===Ko||s===fo){if(u=t.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===Vs||s===Ko)return b===Pi?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===fo)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===Vo||s===ea||s===ta||s===la||s===eo||s===ca||s===_o||s===Na||s===Wa||s===Ne||s===ut||s===Nt||s===Be||s===Vt){if(u=t.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===Vo)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ea)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ta)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===la)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eo)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ca)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_o)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Na)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Wa)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Ne)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ut)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Nt)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Be)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Vt)return b===Pi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===In||s===ts||s===Gs){if(u=t.get("EXT_texture_compression_bptc"),null===u)return null;if(s===In)return b===Pi?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===ts)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Gs)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===Go||s===Aa||s===ba||s===ll){if(u=t.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===In)return u.COMPRESSED_RED_RGTC1_EXT;if(s===Aa)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ba)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ll)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===de?y.UNSIGNED_INT_24_8:void 0!==y[s]?y[s]:null}}}class pw{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,r,s){if(null===this.texture){const l=new no;t.properties.get(l).__webglTexture=r.texture,(r.depthNear!==s.depthNear||r.depthFar!==s.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=l}}getMesh(t){if(null!==this.texture&&null===this.mesh){const r=t.cameras[0].viewport,s=new Sl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new cs(new rd(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class mw extends xn{constructor(t,r){super();const s=this;let l=null,u=1,b=null,T="local-floor",O=1,U=null,Q=null,oe=null,fe=null,ye=null,Me=null;const Ue=new pw,Pe=r.getContextAttributes();let De=null,tt=null;const st=[],nt=[],$t=new hr;let Ct=null;const Gt=new co;Gt.viewport=new Ds;const qt=new co;qt.viewport=new Ds;const Tt=[Gt,qt],wt=new Eg;let gn=null,qn=null;function Vn(yr){const Er=nt.indexOf(yr.inputSource);if(-1===Er)return;const zr=st[Er];void 0!==zr&&(zr.update(yr.inputSource,yr.frame,U||b),zr.dispatchEvent({type:yr.type,data:yr.inputSource}))}function Jn(){l.removeEventListener("select",Vn),l.removeEventListener("selectstart",Vn),l.removeEventListener("selectend",Vn),l.removeEventListener("squeeze",Vn),l.removeEventListener("squeezestart",Vn),l.removeEventListener("squeezeend",Vn),l.removeEventListener("end",Jn),l.removeEventListener("inputsourceschange",gr);for(let yr=0;yr<st.length;yr++){const Er=nt[yr];null!==Er&&(nt[yr]=null,st[yr].disconnect(Er))}gn=null,qn=null,Ue.reset(),t.setRenderTarget(De),ye=null,fe=null,oe=null,l=null,tt=null,us.stop(),s.isPresenting=!1,t.setPixelRatio(Ct),t.setSize($t.width,$t.height,!1),s.dispatchEvent({type:"sessionend"})}function gr(yr){for(let Er=0;Er<yr.removed.length;Er++){const zr=yr.removed[Er],Nr=nt.indexOf(zr);Nr>=0&&(nt[Nr]=null,st[Nr].disconnect(zr))}for(let Er=0;Er<yr.added.length;Er++){const zr=yr.added[Er];let Nr=nt.indexOf(zr);if(-1===Nr){for(let Oi=0;Oi<st.length;Oi++){if(Oi>=nt.length){nt.push(zr),Nr=Oi;break}if(null===nt[Oi]){nt[Oi]=zr,Nr=Oi;break}}if(-1===Nr)break}const ui=st[Nr];ui&&ui.connect(zr)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(yr){let Er=st[yr];return void 0===Er&&(Er=new qu,st[yr]=Er),Er.getTargetRaySpace()},this.getControllerGrip=function(yr){let Er=st[yr];return void 0===Er&&(Er=new qu,st[yr]=Er),Er.getGripSpace()},this.getHand=function(yr){let Er=st[yr];return void 0===Er&&(Er=new qu,st[yr]=Er),Er.getHandSpace()},this.setFramebufferScaleFactor=function(yr){u=yr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(yr){T=yr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||b},this.setReferenceSpace=function(yr){U=yr},this.getBaseLayer=function(){return null!==fe?fe:ye},this.getBinding=function(){return oe},this.getFrame=function(){return Me},this.getSession=function(){return l},this.setSession=function(){var yr=(0,F.A)(function*(Er){if(l=Er,null!==l){if(De=t.getRenderTarget(),l.addEventListener("select",Vn),l.addEventListener("selectstart",Vn),l.addEventListener("selectend",Vn),l.addEventListener("squeeze",Vn),l.addEventListener("squeezestart",Vn),l.addEventListener("squeezeend",Vn),l.addEventListener("end",Jn),l.addEventListener("inputsourceschange",gr),!0!==Pe.xrCompatible&&(yield r.makeXRCompatible()),Ct=t.getPixelRatio(),t.getSize($t),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Nr=null,ui=null,Oi=null;Pe.depth&&(Oi=Pe.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,Nr=Pe.stencil?pt:$e,ui=Pe.stencil?de:k);const Zr={colorFormat:r.RGBA8,depthFormat:Oi,scaleFactor:u};oe=new XRWebGLBinding(l,r),fe=oe.createProjectionLayer(Zr),l.updateRenderState({layers:[fe]}),t.setPixelRatio(1),t.setSize(fe.textureWidth,fe.textureHeight,!1),tt=new Se(fe.textureWidth,fe.textureHeight,{format:Ft,type:Mr,depthTexture:new eg(fe.textureWidth,fe.textureHeight,ui,void 0,void 0,void 0,void 0,void 0,void 0,Nr),stencilBuffer:Pe.stencil,colorSpace:t.outputColorSpace,samples:Pe.antialias?4:0,resolveDepthBuffer:!1===fe.ignoreDepthValues,resolveStencilBuffer:!1===fe.ignoreDepthValues})}else ye=new XRWebGLLayer(l,r,{antialias:Pe.antialias,alpha:!0,depth:Pe.depth,stencil:Pe.stencil,framebufferScaleFactor:u}),l.updateRenderState({baseLayer:ye}),t.setPixelRatio(1),t.setSize(ye.framebufferWidth,ye.framebufferHeight,!1),tt=new Se(ye.framebufferWidth,ye.framebufferHeight,{format:Ft,type:Mr,colorSpace:t.outputColorSpace,stencilBuffer:Pe.stencil,resolveDepthBuffer:!1===ye.ignoreDepthValues,resolveStencilBuffer:!1===ye.ignoreDepthValues});tt.isXRRenderTarget=!0,this.setFoveation(O),U=null,b=yield l.requestReferenceSpace(T),us.setContext(l),us.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(Er){return yr.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==l)return l.environmentBlendMode},this.getDepthTexture=function(){return Ue.getDepthTexture()};const Zn=new mt,Lr=new mt;function qr(yr,Er){null===Er?yr.matrixWorld.copy(yr.matrix):yr.matrixWorld.multiplyMatrices(Er.matrixWorld,yr.matrix),yr.matrixWorldInverse.copy(yr.matrixWorld).invert()}this.updateCamera=function(yr){if(null===l)return;let Er=yr.near,zr=yr.far;null!==Ue.texture&&(Ue.depthNear>0&&(Er=Ue.depthNear),Ue.depthFar>0&&(zr=Ue.depthFar)),wt.near=qt.near=Gt.near=Er,wt.far=qt.far=Gt.far=zr,(gn!==wt.near||qn!==wt.far)&&(l.updateRenderState({depthNear:wt.near,depthFar:wt.far}),gn=wt.near,qn=wt.far),Gt.layers.mask=2|yr.layers.mask,qt.layers.mask=4|yr.layers.mask,wt.layers.mask=Gt.layers.mask|qt.layers.mask;const Nr=yr.parent,ui=wt.cameras;qr(wt,Nr);for(let Oi=0;Oi<ui.length;Oi++)qr(ui[Oi],Nr);2===ui.length?function tr(yr,Er,zr){Zn.setFromMatrixPosition(Er.matrixWorld),Lr.setFromMatrixPosition(zr.matrixWorld);const Nr=Zn.distanceTo(Lr),ui=Er.projectionMatrix.elements,Oi=zr.projectionMatrix.elements,Zr=ui[14]/(ui[10]-1),rs=ui[14]/(ui[10]+1),kr=(ui[9]+1)/ui[5],Br=(ui[9]-1)/ui[5],ln=(ui[8]-1)/ui[0],Ni=(Oi[8]+1)/Oi[0],Hr=Zr*ln,Ei=Zr*Ni,Kr=Nr/(-ln+Ni),Yi=Kr*-ln;if(Er.matrixWorld.decompose(yr.position,yr.quaternion,yr.scale),yr.translateX(Yi),yr.translateZ(Kr),yr.matrixWorld.compose(yr.position,yr.quaternion,yr.scale),yr.matrixWorldInverse.copy(yr.matrixWorld).invert(),-1===ui[10])yr.projectionMatrix.copy(Er.projectionMatrix),yr.projectionMatrixInverse.copy(Er.projectionMatrixInverse);else{const vi=Zr+Kr,sn=rs+Kr;yr.projectionMatrix.makePerspective(Hr-Yi,Ei+(Nr-Yi),kr*rs/sn*vi,Br*rs/sn*vi,vi,sn),yr.projectionMatrixInverse.copy(yr.projectionMatrix).invert()}}(wt,Gt,qt):wt.projectionMatrix.copy(Gt.projectionMatrix),function ei(yr,Er,zr){null===zr?yr.matrix.copy(Er.matrixWorld):(yr.matrix.copy(zr.matrixWorld),yr.matrix.invert(),yr.matrix.multiply(Er.matrixWorld)),yr.matrix.decompose(yr.position,yr.quaternion,yr.scale),yr.updateMatrixWorld(!0),yr.projectionMatrix.copy(Er.projectionMatrix),yr.projectionMatrixInverse.copy(Er.projectionMatrixInverse),yr.isPerspectiveCamera&&(yr.fov=2*Re*Math.atan(1/yr.projectionMatrix.elements[5]),yr.zoom=1)}(yr,wt,Nr)},this.getCamera=function(){return wt},this.getFoveation=function(){if(null!==fe||null!==ye)return O},this.setFoveation=function(yr){O=yr,null!==fe&&(fe.fixedFoveation=yr),null!==ye&&void 0!==ye.fixedFoveation&&(ye.fixedFoveation=yr)},this.hasDepthSensing=function(){return null!==Ue.texture},this.getDepthSensingMesh=function(){return Ue.getMesh(wt)};let mi=null;const us=new Rg;us.setAnimationLoop(function qi(yr,Er){if(Q=Er.getViewerPose(U||b),Me=Er,null!==Q){const zr=Q.views;null!==ye&&(t.setRenderTargetFramebuffer(tt,ye.framebuffer),t.setRenderTarget(tt));let Nr=!1;zr.length!==wt.cameras.length&&(wt.cameras.length=0,Nr=!0);for(let Zr=0;Zr<zr.length;Zr++){const rs=zr[Zr];let kr=null;if(null!==ye)kr=ye.getViewport(rs);else{const ln=oe.getViewSubImage(fe,rs);kr=ln.viewport,0===Zr&&(t.setRenderTargetTextures(tt,ln.colorTexture,fe.ignoreDepthValues?void 0:ln.depthStencilTexture),t.setRenderTarget(tt))}let Br=Tt[Zr];void 0===Br&&(Br=new co,Br.layers.enable(Zr),Br.viewport=new Ds,Tt[Zr]=Br),Br.matrix.fromArray(rs.transform.matrix),Br.matrix.decompose(Br.position,Br.quaternion,Br.scale),Br.projectionMatrix.fromArray(rs.projectionMatrix),Br.projectionMatrixInverse.copy(Br.projectionMatrix).invert(),Br.viewport.set(kr.x,kr.y,kr.width,kr.height),0===Zr&&(wt.matrix.copy(Br.matrix),wt.matrix.decompose(wt.position,wt.quaternion,wt.scale)),!0===Nr&&wt.cameras.push(Br)}const ui=l.enabledFeatures;if(ui&&ui.includes("depth-sensing")&&"gpu-optimized"==l.depthUsage&&oe){const Zr=oe.getDepthInformation(zr[0]);Zr&&Zr.isValid&&Zr.texture&&Ue.init(t,Zr,l.renderState)}}for(let zr=0;zr<st.length;zr++){const Nr=nt[zr],ui=st[zr];null!==Nr&&void 0!==ui&&ui.update(Nr,Er,U||b)}mi&&mi(yr,Er),Er.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:Er}),Me=null}),this.setAnimationLoop=function(yr){mi=yr},this.dispose=function(){}}}const gd=new Za,am=new Mi;function m_(y,t){function r(Pe,De){!0===Pe.matrixAutoUpdate&&Pe.updateMatrix(),De.value.copy(Pe.matrix)}function u(Pe,De){Pe.opacity.value=De.opacity,De.color&&Pe.diffuse.value.copy(De.color),De.emissive&&Pe.emissive.value.copy(De.emissive).multiplyScalar(De.emissiveIntensity),De.map&&(Pe.map.value=De.map,r(De.map,Pe.mapTransform)),De.alphaMap&&(Pe.alphaMap.value=De.alphaMap,r(De.alphaMap,Pe.alphaMapTransform)),De.bumpMap&&(Pe.bumpMap.value=De.bumpMap,r(De.bumpMap,Pe.bumpMapTransform),Pe.bumpScale.value=De.bumpScale,1===De.side&&(Pe.bumpScale.value*=-1)),De.normalMap&&(Pe.normalMap.value=De.normalMap,r(De.normalMap,Pe.normalMapTransform),Pe.normalScale.value.copy(De.normalScale),1===De.side&&Pe.normalScale.value.negate()),De.displacementMap&&(Pe.displacementMap.value=De.displacementMap,r(De.displacementMap,Pe.displacementMapTransform),Pe.displacementScale.value=De.displacementScale,Pe.displacementBias.value=De.displacementBias),De.emissiveMap&&(Pe.emissiveMap.value=De.emissiveMap,r(De.emissiveMap,Pe.emissiveMapTransform)),De.specularMap&&(Pe.specularMap.value=De.specularMap,r(De.specularMap,Pe.specularMapTransform)),De.alphaTest>0&&(Pe.alphaTest.value=De.alphaTest);const tt=t.get(De),st=tt.envMap,nt=tt.envMapRotation;st&&(Pe.envMap.value=st,gd.copy(nt),gd.x*=-1,gd.y*=-1,gd.z*=-1,st.isCubeTexture&&!1===st.isRenderTargetTexture&&(gd.y*=-1,gd.z*=-1),Pe.envMapRotation.value.setFromMatrix4(am.makeRotationFromEuler(gd)),Pe.flipEnvMap.value=st.isCubeTexture&&!1===st.isRenderTargetTexture?-1:1,Pe.reflectivity.value=De.reflectivity,Pe.ior.value=De.ior,Pe.refractionRatio.value=De.refractionRatio),De.lightMap&&(Pe.lightMap.value=De.lightMap,Pe.lightMapIntensity.value=De.lightMapIntensity,r(De.lightMap,Pe.lightMapTransform)),De.aoMap&&(Pe.aoMap.value=De.aoMap,Pe.aoMapIntensity.value=De.aoMapIntensity,r(De.aoMap,Pe.aoMapTransform))}return{refreshFogUniforms:function s(Pe,De){De.color.getRGB(Pe.fogColor.value,Yy(y)),De.isFog?(Pe.fogNear.value=De.near,Pe.fogFar.value=De.far):De.isFogExp2&&(Pe.fogDensity.value=De.density)},refreshMaterialUniforms:function l(Pe,De,tt,st,nt){De.isMeshBasicMaterial||De.isMeshLambertMaterial?u(Pe,De):De.isMeshToonMaterial?(u(Pe,De),function oe(Pe,De){De.gradientMap&&(Pe.gradientMap.value=De.gradientMap)}(Pe,De)):De.isMeshPhongMaterial?(u(Pe,De),function Q(Pe,De){Pe.specular.value.copy(De.specular),Pe.shininess.value=Math.max(De.shininess,1e-4)}(Pe,De)):De.isMeshStandardMaterial?(u(Pe,De),function fe(Pe,De){Pe.metalness.value=De.metalness,De.metalnessMap&&(Pe.metalnessMap.value=De.metalnessMap,r(De.metalnessMap,Pe.metalnessMapTransform)),Pe.roughness.value=De.roughness,De.roughnessMap&&(Pe.roughnessMap.value=De.roughnessMap,r(De.roughnessMap,Pe.roughnessMapTransform)),De.envMap&&(Pe.envMapIntensity.value=De.envMapIntensity)}(Pe,De),De.isMeshPhysicalMaterial&&function ye(Pe,De,tt){Pe.ior.value=De.ior,De.sheen>0&&(Pe.sheenColor.value.copy(De.sheenColor).multiplyScalar(De.sheen),Pe.sheenRoughness.value=De.sheenRoughness,De.sheenColorMap&&(Pe.sheenColorMap.value=De.sheenColorMap,r(De.sheenColorMap,Pe.sheenColorMapTransform)),De.sheenRoughnessMap&&(Pe.sheenRoughnessMap.value=De.sheenRoughnessMap,r(De.sheenRoughnessMap,Pe.sheenRoughnessMapTransform))),De.clearcoat>0&&(Pe.clearcoat.value=De.clearcoat,Pe.clearcoatRoughness.value=De.clearcoatRoughness,De.clearcoatMap&&(Pe.clearcoatMap.value=De.clearcoatMap,r(De.clearcoatMap,Pe.clearcoatMapTransform)),De.clearcoatRoughnessMap&&(Pe.clearcoatRoughnessMap.value=De.clearcoatRoughnessMap,r(De.clearcoatRoughnessMap,Pe.clearcoatRoughnessMapTransform)),De.clearcoatNormalMap&&(Pe.clearcoatNormalMap.value=De.clearcoatNormalMap,r(De.clearcoatNormalMap,Pe.clearcoatNormalMapTransform),Pe.clearcoatNormalScale.value.copy(De.clearcoatNormalScale),1===De.side&&Pe.clearcoatNormalScale.value.negate())),De.dispersion>0&&(Pe.dispersion.value=De.dispersion),De.iridescence>0&&(Pe.iridescence.value=De.iridescence,Pe.iridescenceIOR.value=De.iridescenceIOR,Pe.iridescenceThicknessMinimum.value=De.iridescenceThicknessRange[0],Pe.iridescenceThicknessMaximum.value=De.iridescenceThicknessRange[1],De.iridescenceMap&&(Pe.iridescenceMap.value=De.iridescenceMap,r(De.iridescenceMap,Pe.iridescenceMapTransform)),De.iridescenceThicknessMap&&(Pe.iridescenceThicknessMap.value=De.iridescenceThicknessMap,r(De.iridescenceThicknessMap,Pe.iridescenceThicknessMapTransform))),De.transmission>0&&(Pe.transmission.value=De.transmission,Pe.transmissionSamplerMap.value=tt.texture,Pe.transmissionSamplerSize.value.set(tt.width,tt.height),De.transmissionMap&&(Pe.transmissionMap.value=De.transmissionMap,r(De.transmissionMap,Pe.transmissionMapTransform)),Pe.thickness.value=De.thickness,De.thicknessMap&&(Pe.thicknessMap.value=De.thicknessMap,r(De.thicknessMap,Pe.thicknessMapTransform)),Pe.attenuationDistance.value=De.attenuationDistance,Pe.attenuationColor.value.copy(De.attenuationColor)),De.anisotropy>0&&(Pe.anisotropyVector.value.set(De.anisotropy*Math.cos(De.anisotropyRotation),De.anisotropy*Math.sin(De.anisotropyRotation)),De.anisotropyMap&&(Pe.anisotropyMap.value=De.anisotropyMap,r(De.anisotropyMap,Pe.anisotropyMapTransform))),Pe.specularIntensity.value=De.specularIntensity,Pe.specularColor.value.copy(De.specularColor),De.specularColorMap&&(Pe.specularColorMap.value=De.specularColorMap,r(De.specularColorMap,Pe.specularColorMapTransform)),De.specularIntensityMap&&(Pe.specularIntensityMap.value=De.specularIntensityMap,r(De.specularIntensityMap,Pe.specularIntensityMapTransform))}(Pe,De,nt)):De.isMeshMatcapMaterial?(u(Pe,De),function Me(Pe,De){De.matcap&&(Pe.matcap.value=De.matcap)}(Pe,De)):De.isMeshDepthMaterial?u(Pe,De):De.isMeshDistanceMaterial?(u(Pe,De),function Ue(Pe,De){const tt=t.get(De).light;Pe.referencePosition.value.setFromMatrixPosition(tt.matrixWorld),Pe.nearDistance.value=tt.shadow.camera.near,Pe.farDistance.value=tt.shadow.camera.far}(Pe,De)):De.isMeshNormalMaterial?u(Pe,De):De.isLineBasicMaterial?(function b(Pe,De){Pe.diffuse.value.copy(De.color),Pe.opacity.value=De.opacity,De.map&&(Pe.map.value=De.map,r(De.map,Pe.mapTransform))}(Pe,De),De.isLineDashedMaterial&&function T(Pe,De){Pe.dashSize.value=De.dashSize,Pe.totalSize.value=De.dashSize+De.gapSize,Pe.scale.value=De.scale}(Pe,De)):De.isPointsMaterial?function O(Pe,De,tt,st){Pe.diffuse.value.copy(De.color),Pe.opacity.value=De.opacity,Pe.size.value=De.size*tt,Pe.scale.value=.5*st,De.map&&(Pe.map.value=De.map,r(De.map,Pe.uvTransform)),De.alphaMap&&(Pe.alphaMap.value=De.alphaMap,r(De.alphaMap,Pe.alphaMapTransform)),De.alphaTest>0&&(Pe.alphaTest.value=De.alphaTest)}(Pe,De,tt,st):De.isSpriteMaterial?function U(Pe,De){Pe.diffuse.value.copy(De.color),Pe.opacity.value=De.opacity,Pe.rotation.value=De.rotation,De.map&&(Pe.map.value=De.map,r(De.map,Pe.mapTransform)),De.alphaMap&&(Pe.alphaMap.value=De.alphaMap,r(De.alphaMap,Pe.alphaMapTransform)),De.alphaTest>0&&(Pe.alphaTest.value=De.alphaTest)}(Pe,De):De.isShadowMaterial?(Pe.color.value.copy(De.color),Pe.opacity.value=De.opacity):De.isShaderMaterial&&(De.uniformsNeedUpdate=!1)}}}function g_(y,t,r,s){let l={},u={},b=[];const T=y.getParameter(y.MAX_UNIFORM_BUFFER_BINDINGS);function ye(tt,st,nt,$t){const Ct=tt.value,Gt=st+"_"+nt;if(void 0===$t[Gt])return $t[Gt]="number"==typeof Ct||"boolean"==typeof Ct?Ct:Ct.clone(),!0;{const qt=$t[Gt];if("number"==typeof Ct||"boolean"==typeof Ct){if(qt!==Ct)return $t[Gt]=Ct,!0}else if(!1===qt.equals(Ct))return qt.copy(Ct),!0}return!1}function Ue(tt){const st={boundary:0,storage:0};return"number"==typeof tt||"boolean"==typeof tt?(st.boundary=4,st.storage=4):tt.isVector2?(st.boundary=8,st.storage=8):tt.isVector3||tt.isColor?(st.boundary=16,st.storage=12):tt.isVector4?(st.boundary=16,st.storage=16):tt.isMatrix3?(st.boundary=48,st.storage=48):tt.isMatrix4?(st.boundary=64,st.storage=64):tt.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",tt),st}function Pe(tt){const st=tt.target;st.removeEventListener("dispose",Pe);const nt=b.indexOf(st.__bindingPointIndex);b.splice(nt,1),y.deleteBuffer(l[st.id]),delete l[st.id],delete u[st.id]}return{bind:function O(tt,st){s.uniformBlockBinding(tt,st.program)},update:function U(tt,st){let nt=l[tt.id];void 0===nt&&(function Me(tt){const st=tt.uniforms;let nt=0;for(let Gt=0,qt=st.length;Gt<qt;Gt++){const Tt=Array.isArray(st[Gt])?st[Gt]:[st[Gt]];for(let wt=0,gn=Tt.length;wt<gn;wt++){const qn=Tt[wt],Vn=Array.isArray(qn.value)?qn.value:[qn.value];for(let Jn=0,gr=Vn.length;Jn<gr;Jn++){const Lr=Ue(Vn[Jn]),tr=nt%16,qr=tr%Lr.boundary,ei=tr+qr;nt+=qr,0!==ei&&16-ei<Lr.storage&&(nt+=16-ei),qn.__data=new Float32Array(Lr.storage/Float32Array.BYTES_PER_ELEMENT),qn.__offset=nt,nt+=Lr.storage}}}const Ct=nt%16;Ct>0&&(nt+=16-Ct),tt.__size=nt,tt.__cache={}}(tt),nt=function Q(tt){const st=function oe(){for(let tt=0;tt<T;tt++)if(-1===b.indexOf(tt))return b.push(tt),tt;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();tt.__bindingPointIndex=st;const nt=y.createBuffer(),$t=tt.__size,Ct=tt.usage;return y.bindBuffer(y.UNIFORM_BUFFER,nt),y.bufferData(y.UNIFORM_BUFFER,$t,Ct),y.bindBuffer(y.UNIFORM_BUFFER,null),y.bindBufferBase(y.UNIFORM_BUFFER,st,nt),nt}(tt),l[tt.id]=nt,tt.addEventListener("dispose",Pe)),s.updateUBOMapping(tt,st.program);const Ct=t.render.frame;u[tt.id]!==Ct&&(function fe(tt){const nt=tt.uniforms,$t=tt.__cache;y.bindBuffer(y.UNIFORM_BUFFER,l[tt.id]);for(let Ct=0,Gt=nt.length;Ct<Gt;Ct++){const qt=Array.isArray(nt[Ct])?nt[Ct]:[nt[Ct]];for(let Tt=0,wt=qt.length;Tt<wt;Tt++){const gn=qt[Tt];if(!0===ye(gn,Ct,Tt,$t)){const qn=gn.__offset,Vn=Array.isArray(gn.value)?gn.value:[gn.value];let Jn=0;for(let gr=0;gr<Vn.length;gr++){const Zn=Vn[gr],Lr=Ue(Zn);"number"==typeof Zn||"boolean"==typeof Zn?(gn.__data[0]=Zn,y.bufferSubData(y.UNIFORM_BUFFER,qn+Jn,gn.__data)):Zn.isMatrix3?(gn.__data[0]=Zn.elements[0],gn.__data[1]=Zn.elements[1],gn.__data[2]=Zn.elements[2],gn.__data[3]=0,gn.__data[4]=Zn.elements[3],gn.__data[5]=Zn.elements[4],gn.__data[6]=Zn.elements[5],gn.__data[7]=0,gn.__data[8]=Zn.elements[6],gn.__data[9]=Zn.elements[7],gn.__data[10]=Zn.elements[8],gn.__data[11]=0):(Zn.toArray(gn.__data,Jn),Jn+=Lr.storage/Float32Array.BYTES_PER_ELEMENT)}y.bufferSubData(y.UNIFORM_BUFFER,qn,gn.__data)}}}y.bindBuffer(y.UNIFORM_BUFFER,null)}(tt),u[tt.id]=Ct)},dispose:function De(){for(const tt in l)y.deleteBuffer(l[tt]);b=[],l={},u={}}}}class y_{constructor(t={}){const{canvas:r=bd(),context:s=null,depth:l=!0,stencil:u=!1,alpha:b=!1,antialias:T=!1,premultipliedAlpha:O=!0,preserveDrawingBuffer:U=!1,powerPreference:Q="default",failIfMajorPerformanceCaveat:oe=!1,reverseDepthBuffer:fe=!1}=t;let ye;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ye=s.getContextAttributes().alpha}else ye=b;const Me=new Uint32Array(4),Ue=new Int32Array(4);let Pe=null,De=null;const tt=[],st=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ii,this.toneMapping=nr,this.toneMappingExposure=1;const nt=this;let $t=!1,Ct=0,Gt=0,qt=null,Tt=-1,wt=null;const gn=new Ds,qn=new Ds;let Vn=null;const Jn=new Sr(0);let gr=0,Zn=r.width,Lr=r.height,tr=1,qr=null,ei=null;const mi=new Ds(0,0,Zn,Lr),qi=new Ds(0,0,Zn,Lr);let us=!1;const yr=new ep;let Er=!1,zr=!1;this.transmissionResolutionScale=1;const Nr=new Mi,ui=new Mi,Oi=new mt,Zr=new Ds,rs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let kr=!1;function Br(){return null===qt?tr:1}let Hr,Ei,Kr,Yi,vi,sn,jt,er,Tr,Fr,Ar,Ri,di,gi,ms,Wr,Ci,Ki,Qi,Di,Fs,gs,So,Bn,ln=s;function Ni(Wt,Gn){return r.getContext(Wt,Gn)}try{const Wt={alpha:!0,depth:l,stencil:u,antialias:T,premultipliedAlpha:O,preserveDrawingBuffer:U,powerPreference:Q,failIfMajorPerformanceCaveat:oe};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${d}`),r.addEventListener("webglcontextlost",Rr,!1),r.addEventListener("webglcontextrestored",bi,!1),r.addEventListener("webglcontextcreationerror",yi,!1),null===ln){const Gn="webgl2";if(ln=Ni(Gn,Wt),null===ln)throw Ni(Gn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Wt){throw console.error("THREE.WebGLRenderer: "+Wt.message),Wt}function hi(){Hr=new F0(ln),Hr.init(),gs=new hw(ln,Hr),Ei=new O0(ln,Hr,t,gs),Kr=new p_(ln,Hr),Ei.reverseDepthBuffer&&fe&&Kr.buffers.depth.setReversed(!0),Yi=new pd(ln),vi=new JE,sn=new dw(ln,Hr,Kr,vi,Ei,gs,Yi),jt=new N0(nt),er=new j0(nt),Tr=new Pg(ln),So=new Xp(ln,Tr),Fr=new Rx(ln,Tr,Yi,So),Ar=new ff(ln,Fr,Tr,Yi),Qi=new Zg(ln,Ei,sn),Wr=new L0(vi),Ri=new lw(nt,jt,er,Hr,Ei,So,Wr),di=new m_(nt,vi),gi=new uy,ms=new uw(Hr),Ki=new WE(nt,jt,er,Kr,Ar,ye,O),Ci=new h_(nt,Ar,Ei),Bn=new g_(ln,Yi,Ei,Kr),Di=new Cx(ln,Hr,Yi),Fs=new Kp(ln,Hr,Yi),Yi.programs=Ri.programs,nt.capabilities=Ei,nt.extensions=Hr,nt.properties=vi,nt.renderLists=gi,nt.shadowMap=Ci,nt.state=Kr,nt.info=Yi}hi();const _r=new mw(nt,ln);function Rr(Wt){Wt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$t=!0}function bi(){console.log("THREE.WebGLRenderer: Context Restored."),$t=!1;const Wt=Yi.autoReset,Gn=Ci.enabled,rr=Ci.autoUpdate,or=Ci.needsUpdate,Wn=Ci.type;hi(),Yi.autoReset=Wt,Ci.enabled=Gn,Ci.autoUpdate=rr,Ci.needsUpdate=or,Ci.type=Wn}function yi(Wt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Wt.statusMessage)}function ys(Wt){const Gn=Wt.target;Gn.removeEventListener("dispose",ys),function qo(Wt){(function Pa(Wt){const Gn=vi.get(Wt).programs;void 0!==Gn&&(Gn.forEach(function(rr){Ri.releaseProgram(rr)}),Wt.isShaderMaterial&&Ri.releaseShaderCache(Wt))})(Wt),vi.remove(Wt)}(Gn)}function qs(Wt,Gn,rr){!0===Wt.transparent&&2===Wt.side&&!1===Wt.forceSinglePass?(Wt.side=1,Wt.needsUpdate=!0,Rf(Wt,Gn,rr),Wt.side=0,Wt.needsUpdate=!0,Rf(Wt,Gn,rr),Wt.side=2):Rf(Wt,Gn,rr)}this.xr=_r,this.getContext=function(){return ln},this.getContextAttributes=function(){return ln.getContextAttributes()},this.forceContextLoss=function(){const Wt=Hr.get("WEBGL_lose_context");Wt&&Wt.loseContext()},this.forceContextRestore=function(){const Wt=Hr.get("WEBGL_lose_context");Wt&&Wt.restoreContext()},this.getPixelRatio=function(){return tr},this.setPixelRatio=function(Wt){void 0!==Wt&&(tr=Wt,this.setSize(Zn,Lr,!1))},this.getSize=function(Wt){return Wt.set(Zn,Lr)},this.setSize=function(Wt,Gn,rr=!0){_r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Zn=Wt,Lr=Gn,r.width=Math.floor(Wt*tr),r.height=Math.floor(Gn*tr),!0===rr&&(r.style.width=Wt+"px",r.style.height=Gn+"px"),this.setViewport(0,0,Wt,Gn))},this.getDrawingBufferSize=function(Wt){return Wt.set(Zn*tr,Lr*tr).floor()},this.setDrawingBufferSize=function(Wt,Gn,rr){Zn=Wt,Lr=Gn,tr=rr,r.width=Math.floor(Wt*rr),r.height=Math.floor(Gn*rr),this.setViewport(0,0,Wt,Gn)},this.getCurrentViewport=function(Wt){return Wt.copy(gn)},this.getViewport=function(Wt){return Wt.copy(mi)},this.setViewport=function(Wt,Gn,rr,or){Wt.isVector4?mi.set(Wt.x,Wt.y,Wt.z,Wt.w):mi.set(Wt,Gn,rr,or),Kr.viewport(gn.copy(mi).multiplyScalar(tr).round())},this.getScissor=function(Wt){return Wt.copy(qi)},this.setScissor=function(Wt,Gn,rr,or){Wt.isVector4?qi.set(Wt.x,Wt.y,Wt.z,Wt.w):qi.set(Wt,Gn,rr,or),Kr.scissor(qn.copy(qi).multiplyScalar(tr).round())},this.getScissorTest=function(){return us},this.setScissorTest=function(Wt){Kr.setScissorTest(us=Wt)},this.setOpaqueSort=function(Wt){qr=Wt},this.setTransparentSort=function(Wt){ei=Wt},this.getClearColor=function(Wt){return Wt.copy(Ki.getClearColor())},this.setClearColor=function(){Ki.setClearColor(...arguments)},this.getClearAlpha=function(){return Ki.getClearAlpha()},this.setClearAlpha=function(){Ki.setClearAlpha(...arguments)},this.clear=function(Wt=!0,Gn=!0,rr=!0){let or=0;if(Wt){let Wn=!1;if(null!==qt){const $r=qt.texture.format;Wn=$r===Pr||$r===Hn||$r===Dt}if(Wn){const $r=qt.texture.type,si=$r===Mr||$r===k||$r===Ye||$r===de||$r===se||$r===H,Ai=Ki.getClearColor(),xi=Ki.getClearAlpha(),es=Ai.r,is=Ai.g,Bi=Ai.b;si?(Me[0]=es,Me[1]=is,Me[2]=Bi,Me[3]=xi,ln.clearBufferuiv(ln.COLOR,0,Me)):(Ue[0]=es,Ue[1]=is,Ue[2]=Bi,Ue[3]=xi,ln.clearBufferiv(ln.COLOR,0,Ue))}else or|=ln.COLOR_BUFFER_BIT}Gn&&(or|=ln.DEPTH_BUFFER_BIT),rr&&(or|=ln.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ln.clear(or)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Rr,!1),r.removeEventListener("webglcontextrestored",bi,!1),r.removeEventListener("webglcontextcreationerror",yi,!1),Ki.dispose(),gi.dispose(),ms.dispose(),vi.dispose(),jt.dispose(),er.dispose(),Ar.dispose(),So.dispose(),Bn.dispose(),Ri.dispose(),_r.dispose(),_r.removeEventListener("sessionstart",If),_r.removeEventListener("sessionend",H_),vd.stop()},this.renderBufferDirect=function(Wt,Gn,rr,or,Wn,$r){null===Gn&&(Gn=rs);const si=Wn.isMesh&&Wn.matrixWorld.determinant()<0,Ai=function aM(Wt,Gn,rr,or,Wn){!0!==Gn.isScene&&(Gn=rs),sn.resetTextureUnits();const $r=Gn.fog,Ai=null===qt?nt.outputColorSpace:!0===qt.isXRRenderTarget?qt.texture.colorSpace:Vi,xi=(or.isMeshStandardMaterial?er:jt).get(or.envMap||(or.isMeshStandardMaterial?Gn.environment:null)),es=!0===or.vertexColors&&!!rr.attributes.color&&4===rr.attributes.color.itemSize,is=!!rr.attributes.tangent&&(!!or.normalMap||or.anisotropy>0),Bi=!!rr.morphAttributes.position,Ns=!!rr.morphAttributes.normal,Ms=!!rr.morphAttributes.color;let yo=nr;or.toneMapped&&(null===qt||!0===qt.isXRRenderTarget)&&(yo=nt.toneMapping);const as=rr.morphAttributes.position||rr.morphAttributes.normal||rr.morphAttributes.color,Ts=void 0!==as?as.length:0,Fi=vi.get(or),ho=De.state.lights;!0!==Er||!0!==zr&&Wt===wt||Wr.setState(or,Wt,Wt===wt&&or.id===Tt);let ks=!1;or.version===Fi.__version?(Fi.needsLights&&Fi.lightsStateVersion!==ho.state.version||Fi.outputColorSpace!==Ai||Wn.isBatchedMesh&&!1===Fi.batching||!Wn.isBatchedMesh&&!0===Fi.batching||Wn.isBatchedMesh&&!0===Fi.batchingColor&&null===Wn.colorTexture||Wn.isBatchedMesh&&!1===Fi.batchingColor&&null!==Wn.colorTexture||Wn.isInstancedMesh&&!1===Fi.instancing||!Wn.isInstancedMesh&&!0===Fi.instancing||Wn.isSkinnedMesh&&!1===Fi.skinning||!Wn.isSkinnedMesh&&!0===Fi.skinning||Wn.isInstancedMesh&&!0===Fi.instancingColor&&null===Wn.instanceColor||Wn.isInstancedMesh&&!1===Fi.instancingColor&&null!==Wn.instanceColor||Wn.isInstancedMesh&&!0===Fi.instancingMorph&&null===Wn.morphTexture||Wn.isInstancedMesh&&!1===Fi.instancingMorph&&null!==Wn.morphTexture||Fi.envMap!==xi||!0===or.fog&&Fi.fog!==$r||void 0!==Fi.numClippingPlanes&&(Fi.numClippingPlanes!==Wr.numPlanes||Fi.numIntersection!==Wr.numIntersection)||Fi.vertexAlphas!==es||Fi.vertexTangents!==is||Fi.morphTargets!==Bi||Fi.morphNormals!==Ns||Fi.morphColors!==Ms||Fi.toneMapping!==yo||Fi.morphTargetsCount!==Ts)&&(ks=!0):(ks=!0,Fi.__version=or.version);let hc=Fi.currentProgram;!0===ks&&(hc=Rf(or,Gn,Wn));let Nc=!1,sl=!1,ch=!1;const Do=hc.getUniforms(),Xl=Fi.uniforms;if(Kr.useProgram(hc.program)&&(Nc=!0,sl=!0,ch=!0),or.id!==Tt&&(Tt=or.id,sl=!0),Nc||wt!==Wt){Kr.buffers.depth.getReversed()?(Nr.copy(Wt.projectionMatrix),function mc(y){const t=y.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(Nr),function xd(y){const t=y.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(Nr),Do.setValue(ln,"projectionMatrix",Nr)):Do.setValue(ln,"projectionMatrix",Wt.projectionMatrix),Do.setValue(ln,"viewMatrix",Wt.matrixWorldInverse);const ol=Do.map.cameraPosition;void 0!==ol&&ol.setValue(ln,Oi.setFromMatrixPosition(Wt.matrixWorld)),Ei.logarithmicDepthBuffer&&Do.setValue(ln,"logDepthBufFC",2/(Math.log(Wt.far+1)/Math.LN2)),(or.isMeshPhongMaterial||or.isMeshToonMaterial||or.isMeshLambertMaterial||or.isMeshBasicMaterial||or.isMeshStandardMaterial||or.isShaderMaterial)&&Do.setValue(ln,"isOrthographic",!0===Wt.isOrthographicCamera),wt!==Wt&&(wt=Wt,sl=!0,ch=!0)}if(Wn.isSkinnedMesh){Do.setOptional(ln,Wn,"bindMatrix"),Do.setOptional(ln,Wn,"bindMatrixInverse");const js=Wn.skeleton;js&&(null===js.boneTexture&&js.computeBoneTexture(),Do.setValue(ln,"boneTexture",js.boneTexture,sn))}Wn.isBatchedMesh&&(Do.setOptional(ln,Wn,"batchingTexture"),Do.setValue(ln,"batchingTexture",Wn._matricesTexture,sn),Do.setOptional(ln,Wn,"batchingIdTexture"),Do.setValue(ln,"batchingIdTexture",Wn._indirectTexture,sn),Do.setOptional(ln,Wn,"batchingColorTexture"),null!==Wn._colorsTexture&&Do.setValue(ln,"batchingColorTexture",Wn._colorsTexture,sn));const ql=rr.morphAttributes;if((void 0!==ql.position||void 0!==ql.normal||void 0!==ql.color)&&Qi.update(Wn,rr,hc),(sl||Fi.receiveShadow!==Wn.receiveShadow)&&(Fi.receiveShadow=Wn.receiveShadow,Do.setValue(ln,"receiveShadow",Wn.receiveShadow)),or.isMeshGouraudMaterial&&null!==or.envMap&&(Xl.envMap.value=xi,Xl.flipEnvMap.value=xi.isCubeTexture&&!1===xi.isRenderTargetTexture?-1:1),or.isMeshStandardMaterial&&null===or.envMap&&null!==Gn.environment&&(Xl.envMapIntensity.value=Gn.environmentIntensity),sl&&(Do.setValue(ln,"toneMappingExposure",nt.toneMappingExposure),Fi.needsLights&&function Y_(Wt,Gn){Wt.ambientLightColor.needsUpdate=Gn,Wt.lightProbe.needsUpdate=Gn,Wt.directionalLights.needsUpdate=Gn,Wt.directionalLightShadows.needsUpdate=Gn,Wt.pointLights.needsUpdate=Gn,Wt.pointLightShadows.needsUpdate=Gn,Wt.spotLights.needsUpdate=Gn,Wt.spotLightShadows.needsUpdate=Gn,Wt.rectAreaLights.needsUpdate=Gn,Wt.hemisphereLights.needsUpdate=Gn}(Xl,ch),$r&&!0===or.fog&&di.refreshFogUniforms(Xl,$r),di.refreshMaterialUniforms(Xl,or,tr,Lr,De.state.transmissionRenderTarget[Wt.id]),Lu.upload(ln,Ty(Fi),Xl,sn)),or.isShaderMaterial&&!0===or.uniformsNeedUpdate&&(Lu.upload(ln,Ty(Fi),Xl,sn),or.uniformsNeedUpdate=!1),or.isSpriteMaterial&&Do.setValue(ln,"center",Wn.center),Do.setValue(ln,"modelViewMatrix",Wn.modelViewMatrix),Do.setValue(ln,"normalMatrix",Wn.normalMatrix),Do.setValue(ln,"modelMatrix",Wn.matrixWorld),or.isShaderMaterial||or.isRawShaderMaterial){const js=or.uniformsGroups;for(let ol=0,Ay=js.length;ol<Ay;ol++){const vo=js[ol];Bn.update(vo,hc),Bn.bind(vo,hc)}}return hc}(Wt,Gn,rr,or,Wn);Kr.setMaterial(or,si);let xi=rr.index,es=1;if(!0===or.wireframe){if(xi=Fr.getWireframeAttribute(rr),void 0===xi)return;es=2}const is=rr.drawRange,Bi=rr.attributes.position;let Ns=is.start*es,Ms=(is.start+is.count)*es;null!==$r&&(Ns=Math.max(Ns,$r.start*es),Ms=Math.min(Ms,($r.start+$r.count)*es)),null!==xi?(Ns=Math.max(Ns,0),Ms=Math.min(Ms,xi.count)):null!=Bi&&(Ns=Math.max(Ns,0),Ms=Math.min(Ms,Bi.count));const yo=Ms-Ns;if(yo<0||yo===1/0)return;So.setup(Wn,or,Ai,rr,xi);let as,Ts=Di;if(null!==xi&&(as=Tr.get(xi),Ts=Fs,Ts.setIndex(as)),Wn.isMesh)!0===or.wireframe?(Kr.setLineWidth(or.wireframeLinewidth*Br()),Ts.setMode(ln.LINES)):Ts.setMode(ln.TRIANGLES);else if(Wn.isLine){let Fi=or.linewidth;void 0===Fi&&(Fi=1),Kr.setLineWidth(Fi*Br()),Ts.setMode(Wn.isLineSegments?ln.LINES:Wn.isLineLoop?ln.LINE_LOOP:ln.LINE_STRIP)}else Wn.isPoints?Ts.setMode(ln.POINTS):Wn.isSprite&&Ts.setMode(ln.TRIANGLES);if(Wn.isBatchedMesh)if(null!==Wn._multiDrawInstances)Fl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ts.renderMultiDrawInstances(Wn._multiDrawStarts,Wn._multiDrawCounts,Wn._multiDrawCount,Wn._multiDrawInstances);else if(Hr.get("WEBGL_multi_draw"))Ts.renderMultiDraw(Wn._multiDrawStarts,Wn._multiDrawCounts,Wn._multiDrawCount);else{const Fi=Wn._multiDrawStarts,ho=Wn._multiDrawCounts,ks=Wn._multiDrawCount,hc=xi?Tr.get(xi).bytesPerElement:1,Nc=vi.get(or).currentProgram.getUniforms();for(let sl=0;sl<ks;sl++)Nc.setValue(ln,"_gl_DrawID",sl),Ts.render(Fi[sl]/hc,ho[sl])}else if(Wn.isInstancedMesh)Ts.renderInstances(Ns,yo,Wn.count);else if(rr.isInstancedBufferGeometry){const ho=Math.min(rr.instanceCount,void 0!==rr._maxInstanceCount?rr._maxInstanceCount:1/0);Ts.renderInstances(Ns,yo,ho)}else Ts.render(Ns,yo)},this.compile=function(Wt,Gn,rr=null){null===rr&&(rr=Wt),De=ms.get(rr),De.init(Gn),st.push(De),rr.traverseVisible(function(Wn){Wn.isLight&&Wn.layers.test(Gn.layers)&&(De.pushLight(Wn),Wn.castShadow&&De.pushShadow(Wn))}),Wt!==rr&&Wt.traverseVisible(function(Wn){Wn.isLight&&Wn.layers.test(Gn.layers)&&(De.pushLight(Wn),Wn.castShadow&&De.pushShadow(Wn))}),De.setupLights();const or=new Set;return Wt.traverse(function(Wn){if(!(Wn.isMesh||Wn.isPoints||Wn.isLine||Wn.isSprite))return;const $r=Wn.material;if($r)if(Array.isArray($r))for(let si=0;si<$r.length;si++){const Ai=$r[si];qs(Ai,rr,Wn),or.add(Ai)}else qs($r,rr,Wn),or.add($r)}),De=st.pop(),or},this.compileAsync=function(Wt,Gn,rr=null){const or=this.compile(Wt,Gn,rr);return new Promise(Wn=>{function $r(){or.forEach(function(si){vi.get(si).currentProgram.isReady()&&or.delete(si)}),0!==or.size?setTimeout($r,10):Wn(Wt)}null!==Hr.get("KHR_parallel_shader_compile")?$r():setTimeout($r,10)})};let dc=null;function If(){vd.stop()}function H_(){vd.start()}const vd=new Rg;function My(Wt,Gn,rr,or){if(!1===Wt.visible)return;if(Wt.layers.test(Gn.layers))if(Wt.isGroup)rr=Wt.renderOrder;else if(Wt.isLOD)!0===Wt.autoUpdate&&Wt.update(Gn);else if(Wt.isLight)De.pushLight(Wt),Wt.castShadow&&De.pushShadow(Wt);else if(Wt.isSprite){if(!Wt.frustumCulled||yr.intersectsSprite(Wt)){or&&Zr.setFromMatrixPosition(Wt.matrixWorld).applyMatrix4(ui);const si=Ar.update(Wt),Ai=Wt.material;Ai.visible&&Pe.push(Wt,si,Ai,rr,Zr.z,null)}}else if((Wt.isMesh||Wt.isLine||Wt.isPoints)&&(!Wt.frustumCulled||yr.intersectsObject(Wt))){const si=Ar.update(Wt),Ai=Wt.material;if(or&&(void 0!==Wt.boundingSphere?(null===Wt.boundingSphere&&Wt.computeBoundingSphere(),Zr.copy(Wt.boundingSphere.center)):(null===si.boundingSphere&&si.computeBoundingSphere(),Zr.copy(si.boundingSphere.center)),Zr.applyMatrix4(Wt.matrixWorld).applyMatrix4(ui)),Array.isArray(Ai)){const xi=si.groups;for(let es=0,is=xi.length;es<is;es++){const Bi=xi[es],Ns=Ai[Bi.materialIndex];Ns&&Ns.visible&&Pe.push(Wt,si,Ns,rr,Zr.z,Bi)}}else Ai.visible&&Pe.push(Wt,si,Ai,rr,Zr.z,null)}const $r=Wt.children;for(let si=0,Ai=$r.length;si<Ai;si++)My($r[si],Gn,rr,or)}function W_(Wt,Gn,rr,or){const Wn=Wt.opaque,$r=Wt.transmissive,si=Wt.transparent;De.setupLightsView(rr),!0===Er&&Wr.setGlobalState(nt.clippingPlanes,rr),or&&Kr.viewport(gn.copy(or)),Wn.length>0&&ym(Wn,Gn,rr),$r.length>0&&ym($r,Gn,rr),si.length>0&&ym(si,Gn,rr),Kr.buffers.depth.setTest(!0),Kr.buffers.depth.setMask(!0),Kr.buffers.color.setMask(!0),Kr.setPolygonOffset(!1)}function X_(Wt,Gn,rr,or){if(null!==(!0===rr.isScene?rr.overrideMaterial:null))return;void 0===De.state.transmissionRenderTarget[or.id]&&(De.state.transmissionRenderTarget[or.id]=new Se(1,1,{generateMipmaps:!0,type:Hr.has("EXT_color_buffer_half_float")||Hr.has("EXT_color_buffer_float")?L:Mr,minFilter:sr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Es.workingColorSpace}));const $r=De.state.transmissionRenderTarget[or.id],si=or.viewport||gn;$r.setSize(si.z*nt.transmissionResolutionScale,si.w*nt.transmissionResolutionScale);const Ai=nt.getRenderTarget();nt.setRenderTarget($r),nt.getClearColor(Jn),gr=nt.getClearAlpha(),gr<1&&nt.setClearColor(16777215,.5),nt.clear(),kr&&Ki.render(rr);const xi=nt.toneMapping;nt.toneMapping=nr;const es=or.viewport;if(void 0!==or.viewport&&(or.viewport=void 0),De.setupLightsView(or),!0===Er&&Wr.setGlobalState(nt.clippingPlanes,or),ym(Wt,rr,or),sn.updateMultisampleRenderTarget($r),sn.updateRenderTargetMipmap($r),!1===Hr.has("WEBGL_multisampled_render_to_texture")){let is=!1;for(let Bi=0,Ns=Gn.length;Bi<Ns;Bi++){const Ms=Gn[Bi],yo=Ms.object,as=Ms.geometry,Ts=Ms.material,Fi=Ms.group;if(2===Ts.side&&yo.layers.test(or.layers)){const ho=Ts.side;Ts.side=1,Ts.needsUpdate=!0,q_(yo,rr,or,as,Ts,Fi),Ts.side=ho,Ts.needsUpdate=!0,is=!0}}!0===is&&(sn.updateMultisampleRenderTarget($r),sn.updateRenderTargetMipmap($r))}nt.setRenderTarget(Ai),nt.setClearColor(Jn,gr),void 0!==es&&(or.viewport=es),nt.toneMapping=xi}function ym(Wt,Gn,rr){const or=!0===Gn.isScene?Gn.overrideMaterial:null;for(let Wn=0,$r=Wt.length;Wn<$r;Wn++){const si=Wt[Wn],Ai=si.object,xi=si.geometry,es=null===or?si.material:or,is=si.group;Ai.layers.test(rr.layers)&&q_(Ai,Gn,rr,xi,es,is)}}function q_(Wt,Gn,rr,or,Wn,$r){Wt.onBeforeRender(nt,Gn,rr,or,Wn,$r),Wt.modelViewMatrix.multiplyMatrices(rr.matrixWorldInverse,Wt.matrixWorld),Wt.normalMatrix.getNormalMatrix(Wt.modelViewMatrix),Wn.onBeforeRender(nt,Gn,rr,or,Wt,$r),!0===Wn.transparent&&2===Wn.side&&!1===Wn.forceSinglePass?(Wn.side=1,Wn.needsUpdate=!0,nt.renderBufferDirect(rr,Gn,or,Wn,Wt,$r),Wn.side=0,Wn.needsUpdate=!0,nt.renderBufferDirect(rr,Gn,or,Wn,Wt,$r),Wn.side=2):nt.renderBufferDirect(rr,Gn,or,Wn,Wt,$r),Wt.onAfterRender(nt,Gn,rr,or,Wn,$r)}function Rf(Wt,Gn,rr){!0!==Gn.isScene&&(Gn=rs);const or=vi.get(Wt),Wn=De.state.lights,si=Wn.state.version,Ai=Ri.getParameters(Wt,Wn.state,De.state.shadowsArray,Gn,rr),xi=Ri.getProgramCacheKey(Ai);let es=or.programs;or.environment=Wt.isMeshStandardMaterial?Gn.environment:null,or.fog=Gn.fog,or.envMap=(Wt.isMeshStandardMaterial?er:jt).get(Wt.envMap||or.environment),or.envMapRotation=null!==or.environment&&null===Wt.envMap?Gn.environmentRotation:Wt.envMapRotation,void 0===es&&(Wt.addEventListener("dispose",ys),es=new Map,or.programs=es);let is=es.get(xi);if(void 0!==is){if(or.currentProgram===is&&or.lightsStateVersion===si)return K_(Wt,Ai),is}else Ai.uniforms=Ri.getUniforms(Wt),Wt.onBeforeCompile(Ai,nt),is=Ri.acquireProgram(Ai,xi),es.set(xi,is),or.uniforms=Ai.uniforms;const Bi=or.uniforms;return(!Wt.isShaderMaterial&&!Wt.isRawShaderMaterial||!0===Wt.clipping)&&(Bi.clippingPlanes=Wr.uniform),K_(Wt,Ai),or.needsLights=function Z_(Wt){return Wt.isMeshLambertMaterial||Wt.isMeshToonMaterial||Wt.isMeshPhongMaterial||Wt.isMeshStandardMaterial||Wt.isShadowMaterial||Wt.isShaderMaterial&&!0===Wt.lights}(Wt),or.lightsStateVersion=si,or.needsLights&&(Bi.ambientLightColor.value=Wn.state.ambient,Bi.lightProbe.value=Wn.state.probe,Bi.directionalLights.value=Wn.state.directional,Bi.directionalLightShadows.value=Wn.state.directionalShadow,Bi.spotLights.value=Wn.state.spot,Bi.spotLightShadows.value=Wn.state.spotShadow,Bi.rectAreaLights.value=Wn.state.rectArea,Bi.ltc_1.value=Wn.state.rectAreaLTC1,Bi.ltc_2.value=Wn.state.rectAreaLTC2,Bi.pointLights.value=Wn.state.point,Bi.pointLightShadows.value=Wn.state.pointShadow,Bi.hemisphereLights.value=Wn.state.hemi,Bi.directionalShadowMap.value=Wn.state.directionalShadowMap,Bi.directionalShadowMatrix.value=Wn.state.directionalShadowMatrix,Bi.spotShadowMap.value=Wn.state.spotShadowMap,Bi.spotLightMatrix.value=Wn.state.spotLightMatrix,Bi.spotLightMap.value=Wn.state.spotLightMap,Bi.pointShadowMap.value=Wn.state.pointShadowMap,Bi.pointShadowMatrix.value=Wn.state.pointShadowMatrix),or.currentProgram=is,or.uniformsList=null,is}function Ty(Wt){if(null===Wt.uniformsList){const Gn=Wt.currentProgram.getUniforms();Wt.uniformsList=Lu.seqWithValue(Gn.seq,Wt.uniforms)}return Wt.uniformsList}function K_(Wt,Gn){const rr=vi.get(Wt);rr.outputColorSpace=Gn.outputColorSpace,rr.batching=Gn.batching,rr.batchingColor=Gn.batchingColor,rr.instancing=Gn.instancing,rr.instancingColor=Gn.instancingColor,rr.instancingMorph=Gn.instancingMorph,rr.skinning=Gn.skinning,rr.morphTargets=Gn.morphTargets,rr.morphNormals=Gn.morphNormals,rr.morphColors=Gn.morphColors,rr.morphTargetsCount=Gn.morphTargetsCount,rr.numClippingPlanes=Gn.numClippingPlanes,rr.numIntersection=Gn.numClipIntersection,rr.vertexAlphas=Gn.vertexAlphas,rr.vertexTangents=Gn.vertexTangents,rr.toneMapping=Gn.toneMapping}vd.setAnimationLoop(function nu(Wt){dc&&dc(Wt)}),typeof self<"u"&&vd.setContext(self),this.setAnimationLoop=function(Wt){dc=Wt,_r.setAnimationLoop(Wt),null===Wt?vd.stop():vd.start()},_r.addEventListener("sessionstart",If),_r.addEventListener("sessionend",H_),this.render=function(Wt,Gn){if(void 0!==Gn&&!0!==Gn.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===$t)return;if(!0===Wt.matrixWorldAutoUpdate&&Wt.updateMatrixWorld(),null===Gn.parent&&!0===Gn.matrixWorldAutoUpdate&&Gn.updateMatrixWorld(),!0===_r.enabled&&!0===_r.isPresenting&&(!0===_r.cameraAutoUpdate&&_r.updateCamera(Gn),Gn=_r.getCamera()),!0===Wt.isScene&&Wt.onBeforeRender(nt,Wt,Gn,qt),De=ms.get(Wt,st.length),De.init(Gn),st.push(De),ui.multiplyMatrices(Gn.projectionMatrix,Gn.matrixWorldInverse),yr.setFromProjectionMatrix(ui),zr=this.localClippingEnabled,Er=Wr.init(this.clippingPlanes,zr),Pe=gi.get(Wt,tt.length),Pe.init(),tt.push(Pe),!0===_r.enabled&&!0===_r.isPresenting){const $r=nt.xr.getDepthSensingMesh();null!==$r&&My($r,Gn,-1/0,nt.sortObjects)}My(Wt,Gn,0,nt.sortObjects),Pe.finish(),!0===nt.sortObjects&&Pe.sort(qr,ei),kr=!1===_r.enabled||!1===_r.isPresenting||!1===_r.hasDepthSensing(),kr&&Ki.addToRenderList(Pe,Wt),this.info.render.frame++,!0===Er&&Wr.beginShadows(),Ci.render(De.state.shadowsArray,Wt,Gn),!0===Er&&Wr.endShadows(),!0===this.info.autoReset&&this.info.reset();const or=Pe.opaque,Wn=Pe.transmissive;if(De.setupLights(),Gn.isArrayCamera){const $r=Gn.cameras;if(Wn.length>0)for(let si=0,Ai=$r.length;si<Ai;si++)X_(or,Wn,Wt,$r[si]);kr&&Ki.render(Wt);for(let si=0,Ai=$r.length;si<Ai;si++){const xi=$r[si];W_(Pe,Wt,xi,xi.viewport)}}else Wn.length>0&&X_(or,Wn,Wt,Gn),kr&&Ki.render(Wt),W_(Pe,Wt,Gn);null!==qt&&0===Gt&&(sn.updateMultisampleRenderTarget(qt),sn.updateRenderTargetMipmap(qt)),!0===Wt.isScene&&Wt.onAfterRender(nt,Wt,Gn),So.resetDefaultState(),Tt=-1,wt=null,st.pop(),st.length>0?(De=st[st.length-1],!0===Er&&Wr.setGlobalState(nt.clippingPlanes,De.state.camera)):De=null,tt.pop(),Pe=tt.length>0?tt[tt.length-1]:null},this.getActiveCubeFace=function(){return Ct},this.getActiveMipmapLevel=function(){return Gt},this.getRenderTarget=function(){return qt},this.setRenderTargetTextures=function(Wt,Gn,rr){vi.get(Wt.texture).__webglTexture=Gn,vi.get(Wt.depthTexture).__webglTexture=rr;const or=vi.get(Wt);or.__hasExternalTextures=!0,or.__autoAllocateDepthBuffer=void 0===rr,or.__autoAllocateDepthBuffer||!0===Hr.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),or.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Wt,Gn){const rr=vi.get(Wt);rr.__webglFramebuffer=Gn,rr.__useDefaultFramebuffer=void 0===Gn};const _d=ln.createFramebuffer();this.setRenderTarget=function(Wt,Gn=0,rr=0){qt=Wt,Ct=Gn,Gt=rr;let or=!0,Wn=null,$r=!1,si=!1;if(Wt){const xi=vi.get(Wt);if(void 0!==xi.__useDefaultFramebuffer)Kr.bindFramebuffer(ln.FRAMEBUFFER,null),or=!1;else if(void 0===xi.__webglFramebuffer)sn.setupRenderTarget(Wt);else if(xi.__hasExternalTextures)sn.rebindTextures(Wt,vi.get(Wt.texture).__webglTexture,vi.get(Wt.depthTexture).__webglTexture);else if(Wt.depthBuffer){const Bi=Wt.depthTexture;if(xi.__boundDepthTexture!==Bi){if(null!==Bi&&vi.has(Bi)&&(Wt.width!==Bi.image.width||Wt.height!==Bi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");sn.setupDepthRenderbuffer(Wt)}}const es=Wt.texture;(es.isData3DTexture||es.isDataArrayTexture||es.isCompressedArrayTexture)&&(si=!0);const is=vi.get(Wt).__webglFramebuffer;Wt.isWebGLCubeRenderTarget?(Wn=Array.isArray(is[Gn])?is[Gn][rr]:is[Gn],$r=!0):Wn=Wt.samples>0&&!1===sn.useMultisampledRTT(Wt)?vi.get(Wt).__webglMultisampledFramebuffer:Array.isArray(is)?is[rr]:is,gn.copy(Wt.viewport),qn.copy(Wt.scissor),Vn=Wt.scissorTest}else gn.copy(mi).multiplyScalar(tr).floor(),qn.copy(qi).multiplyScalar(tr).floor(),Vn=us;if(0!==rr&&(Wn=_d),Kr.bindFramebuffer(ln.FRAMEBUFFER,Wn)&&or&&Kr.drawBuffers(Wt,Wn),Kr.viewport(gn),Kr.scissor(qn),Kr.setScissorTest(Vn),$r){const xi=vi.get(Wt.texture);ln.framebufferTexture2D(ln.FRAMEBUFFER,ln.COLOR_ATTACHMENT0,ln.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,xi.__webglTexture,rr)}else if(si){const xi=vi.get(Wt.texture);ln.framebufferTextureLayer(ln.FRAMEBUFFER,ln.COLOR_ATTACHMENT0,xi.__webglTexture,rr,Gn)}else if(null!==Wt&&0!==rr){const xi=vi.get(Wt.texture);ln.framebufferTexture2D(ln.FRAMEBUFFER,ln.COLOR_ATTACHMENT0,ln.TEXTURE_2D,xi.__webglTexture,rr)}Tt=-1},this.readRenderTargetPixels=function(Wt,Gn,rr,or,Wn,$r,si){if(!Wt||!Wt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ai=vi.get(Wt).__webglFramebuffer;if(Wt.isWebGLCubeRenderTarget&&void 0!==si&&(Ai=Ai[si]),Ai){Kr.bindFramebuffer(ln.FRAMEBUFFER,Ai);try{const xi=Wt.texture,es=xi.format,is=xi.type;if(!Ei.textureFormatReadable(es))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Ei.textureTypeReadable(is))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Gn>=0&&Gn<=Wt.width-or&&rr>=0&&rr<=Wt.height-Wn&&ln.readPixels(Gn,rr,or,Wn,gs.convert(es),gs.convert(is),$r)}finally{const xi=null!==qt?vi.get(qt).__webglFramebuffer:null;Kr.bindFramebuffer(ln.FRAMEBUFFER,xi)}}},this.readRenderTargetPixelsAsync=function(){var Wt=(0,F.A)(function*(Gn,rr,or,Wn,$r,si,Ai){if(!Gn||!Gn.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xi=vi.get(Gn).__webglFramebuffer;if(Gn.isWebGLCubeRenderTarget&&void 0!==Ai&&(xi=xi[Ai]),xi){const es=Gn.texture,is=es.format,Bi=es.type;if(!Ei.textureFormatReadable(is))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ei.textureTypeReadable(Bi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(rr>=0&&rr<=Gn.width-Wn&&or>=0&&or<=Gn.height-$r){Kr.bindFramebuffer(ln.FRAMEBUFFER,xi);const Ns=ln.createBuffer();ln.bindBuffer(ln.PIXEL_PACK_BUFFER,Ns),ln.bufferData(ln.PIXEL_PACK_BUFFER,si.byteLength,ln.STREAM_READ),ln.readPixels(rr,or,Wn,$r,gs.convert(is),gs.convert(Bi),0);const Ms=null!==qt?vi.get(qt).__webglFramebuffer:null;Kr.bindFramebuffer(ln.FRAMEBUFFER,Ms);const yo=ln.fenceSync(ln.SYNC_GPU_COMMANDS_COMPLETE,0);return ln.flush(),yield function Ul(y,t,r){return new Promise(function(s,l){setTimeout(function u(){switch(y.clientWaitSync(t,y.SYNC_FLUSH_COMMANDS_BIT,0)){case y.WAIT_FAILED:l();break;case y.TIMEOUT_EXPIRED:setTimeout(u,r);break;default:s()}},r)})}(ln,yo,4),ln.bindBuffer(ln.PIXEL_PACK_BUFFER,Ns),ln.getBufferSubData(ln.PIXEL_PACK_BUFFER,0,si),ln.deleteBuffer(Ns),ln.deleteSync(yo),si}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(Gn,rr,or,Wn,$r,si,Ai){return Wt.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(Wt,Gn=null,rr=0){!0!==Wt.isTexture&&(Fl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Gn=arguments[0]||null,Wt=arguments[1]);const or=Math.pow(2,-rr),Wn=Math.floor(Wt.image.width*or),$r=Math.floor(Wt.image.height*or),si=null!==Gn?Gn.x:0,Ai=null!==Gn?Gn.y:0;sn.setTexture2D(Wt,0),ln.copyTexSubImage2D(ln.TEXTURE_2D,rr,0,0,si,Ai,Wn,$r),Kr.unbindTexture()};const J_=ln.createFramebuffer(),Ww=ln.createFramebuffer();this.copyTextureToTexture=function(Wt,Gn,rr=null,or=null,Wn=0,$r=null){let si,Ai,xi,es,is,Bi,Ns,Ms,yo;!0!==Wt.isTexture&&(Fl("WebGLRenderer: copyTextureToTexture function signature has changed."),or=arguments[0]||null,Wt=arguments[1],Gn=arguments[2],$r=arguments[3]||0,rr=null),null===$r&&(0!==Wn?(Fl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),$r=Wn,Wn=0):$r=0);const as=Wt.isCompressedTexture?Wt.mipmaps[$r]:Wt.image;if(null!==rr)si=rr.max.x-rr.min.x,Ai=rr.max.y-rr.min.y,xi=rr.isBox3?rr.max.z-rr.min.z:1,es=rr.min.x,is=rr.min.y,Bi=rr.isBox3?rr.min.z:0;else{const ql=Math.pow(2,-Wn);si=Math.floor(as.width*ql),Ai=Math.floor(as.height*ql),xi=Wt.isDataArrayTexture?as.depth:Wt.isData3DTexture?Math.floor(as.depth*ql):1,es=0,is=0,Bi=0}null!==or?(Ns=or.x,Ms=or.y,yo=or.z):(Ns=0,Ms=0,yo=0);const Ts=gs.convert(Gn.format),Fi=gs.convert(Gn.type);let ho;Gn.isData3DTexture?(sn.setTexture3D(Gn,0),ho=ln.TEXTURE_3D):Gn.isDataArrayTexture||Gn.isCompressedArrayTexture?(sn.setTexture2DArray(Gn,0),ho=ln.TEXTURE_2D_ARRAY):(sn.setTexture2D(Gn,0),ho=ln.TEXTURE_2D),ln.pixelStorei(ln.UNPACK_FLIP_Y_WEBGL,Gn.flipY),ln.pixelStorei(ln.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Gn.premultiplyAlpha),ln.pixelStorei(ln.UNPACK_ALIGNMENT,Gn.unpackAlignment);const ks=ln.getParameter(ln.UNPACK_ROW_LENGTH),hc=ln.getParameter(ln.UNPACK_IMAGE_HEIGHT),Nc=ln.getParameter(ln.UNPACK_SKIP_PIXELS),sl=ln.getParameter(ln.UNPACK_SKIP_ROWS),ch=ln.getParameter(ln.UNPACK_SKIP_IMAGES);ln.pixelStorei(ln.UNPACK_ROW_LENGTH,as.width),ln.pixelStorei(ln.UNPACK_IMAGE_HEIGHT,as.height),ln.pixelStorei(ln.UNPACK_SKIP_PIXELS,es),ln.pixelStorei(ln.UNPACK_SKIP_ROWS,is),ln.pixelStorei(ln.UNPACK_SKIP_IMAGES,Bi);const Do=Wt.isDataArrayTexture||Wt.isData3DTexture,Xl=Gn.isDataArrayTexture||Gn.isData3DTexture;if(Wt.isDepthTexture){const ql=vi.get(Wt),js=vi.get(Gn),ol=vi.get(ql.__renderTarget),Ay=vi.get(js.__renderTarget);Kr.bindFramebuffer(ln.READ_FRAMEBUFFER,ol.__webglFramebuffer),Kr.bindFramebuffer(ln.DRAW_FRAMEBUFFER,Ay.__webglFramebuffer);for(let vo=0;vo<xi;vo++)Do&&(ln.framebufferTextureLayer(ln.READ_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,vi.get(Wt).__webglTexture,Wn,Bi+vo),ln.framebufferTextureLayer(ln.DRAW_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,vi.get(Gn).__webglTexture,$r,yo+vo)),ln.blitFramebuffer(es,is,si,Ai,Ns,Ms,si,Ai,ln.DEPTH_BUFFER_BIT,ln.NEAREST);Kr.bindFramebuffer(ln.READ_FRAMEBUFFER,null),Kr.bindFramebuffer(ln.DRAW_FRAMEBUFFER,null)}else if(0!==Wn||Wt.isRenderTargetTexture||vi.has(Wt)){const ql=vi.get(Wt),js=vi.get(Gn);Kr.bindFramebuffer(ln.READ_FRAMEBUFFER,J_),Kr.bindFramebuffer(ln.DRAW_FRAMEBUFFER,Ww);for(let ol=0;ol<xi;ol++)Do?ln.framebufferTextureLayer(ln.READ_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,ql.__webglTexture,Wn,Bi+ol):ln.framebufferTexture2D(ln.READ_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,ln.TEXTURE_2D,ql.__webglTexture,Wn),Xl?ln.framebufferTextureLayer(ln.DRAW_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,js.__webglTexture,$r,yo+ol):ln.framebufferTexture2D(ln.DRAW_FRAMEBUFFER,ln.COLOR_ATTACHMENT0,ln.TEXTURE_2D,js.__webglTexture,$r),0!==Wn?ln.blitFramebuffer(es,is,si,Ai,Ns,Ms,si,Ai,ln.COLOR_BUFFER_BIT,ln.NEAREST):Xl?ln.copyTexSubImage3D(ho,$r,Ns,Ms,yo+ol,es,is,si,Ai):ln.copyTexSubImage2D(ho,$r,Ns,Ms,es,is,si,Ai);Kr.bindFramebuffer(ln.READ_FRAMEBUFFER,null),Kr.bindFramebuffer(ln.DRAW_FRAMEBUFFER,null)}else Xl?Wt.isDataTexture||Wt.isData3DTexture?ln.texSubImage3D(ho,$r,Ns,Ms,yo,si,Ai,xi,Ts,Fi,as.data):Gn.isCompressedArrayTexture?ln.compressedTexSubImage3D(ho,$r,Ns,Ms,yo,si,Ai,xi,Ts,as.data):ln.texSubImage3D(ho,$r,Ns,Ms,yo,si,Ai,xi,Ts,Fi,as):Wt.isDataTexture?ln.texSubImage2D(ln.TEXTURE_2D,$r,Ns,Ms,si,Ai,Ts,Fi,as.data):Wt.isCompressedTexture?ln.compressedTexSubImage2D(ln.TEXTURE_2D,$r,Ns,Ms,as.width,as.height,Ts,as.data):ln.texSubImage2D(ln.TEXTURE_2D,$r,Ns,Ms,si,Ai,Ts,Fi,as);ln.pixelStorei(ln.UNPACK_ROW_LENGTH,ks),ln.pixelStorei(ln.UNPACK_IMAGE_HEIGHT,hc),ln.pixelStorei(ln.UNPACK_SKIP_PIXELS,Nc),ln.pixelStorei(ln.UNPACK_SKIP_ROWS,sl),ln.pixelStorei(ln.UNPACK_SKIP_IMAGES,ch),0===$r&&Gn.generateMipmaps&&ln.generateMipmap(ho),Kr.unbindTexture()},this.copyTextureToTexture3D=function(Wt,Gn,rr=null,or=null,Wn=0){return!0!==Wt.isTexture&&(Fl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),rr=arguments[0]||null,or=arguments[1]||null,Wt=arguments[2],Gn=arguments[3],Wn=arguments[4]||0),Fl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Wt,Gn,rr,or,Wn)},this.initRenderTarget=function(Wt){void 0===vi.get(Wt).__webglFramebuffer&&sn.setupRenderTarget(Wt)},this.initTexture=function(Wt){Wt.isCubeTexture?sn.setTextureCube(Wt,0):Wt.isData3DTexture?sn.setTexture3D(Wt,0):Wt.isDataArrayTexture||Wt.isCompressedArrayTexture?sn.setTexture2DArray(Wt,0):sn.setTexture2D(Wt,0),Kr.unbindTexture()},this.resetState=function(){Ct=0,Gt=0,qt=null,Kr.reset(),So.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _t}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const r=this.getContext();r.drawingBufferColorspace=Es._getDrawingBufferColorSpace(t),r.unpackColorSpace=Es._getUnpackColorSpace()}}const v_={type:"change"},lm={type:"start"},cm={type:"end"},yd=new Ba,__=new Sc,gw=Math.cos(70*Po_DEG2RAD),_a=new mt,gl=2*Math.PI,fy=1e-6;class py extends bE{constructor(t,r=null){super(t,r),this.state=-1,this.enabled=!0,this.target=new mt,this.cursor=new mt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new mt,this._lastQuaternion=new en,this._lastTargetPosition=new mt,this._quat=(new en).setFromUnitVectors(t.up,new mt(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Yv,this._sphericalDelta=new Yv,this._scale=1,this._panOffset=new mt,this._rotateStart=new hr,this._rotateEnd=new hr,this._rotateDelta=new hr,this._panStart=new hr,this._panEnd=new hr,this._panDelta=new hr,this._dollyStart=new hr,this._dollyEnd=new hr,this._dollyDelta=new hr,this._dollyDirection=new mt,this._mouse=new hr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=b_.bind(this),this._onPointerDown=xf.bind(this),this._onPointerUp=x_.bind(this),this._onContextMenu=my.bind(this),this._onMouseWheel=um.bind(this),this._onKeyDown=QE.bind(this),this._onTouchStart=vw.bind(this),this._onTouchMove=w_.bind(this),this._onMouseDown=yw.bind(this),this._onMouseMove=wf.bind(this),this._interceptControlDown=_w.bind(this),this._interceptControlUp=S_.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(v_),this.update(),this.state=-1}update(t=null){const r=this.object.position;_a.copy(r).sub(this.target),_a.applyQuaternion(this._quat),this._spherical.setFromVector3(_a),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,l=this.maxAzimuthAngle;isFinite(s)&&isFinite(l)&&(s<-Math.PI?s+=gl:s>Math.PI&&(s-=gl),l<-Math.PI?l+=gl:l>Math.PI&&(l-=gl),this._spherical.theta=s<=l?Math.max(s,Math.min(l,this._spherical.theta)):this._spherical.theta>(s+l)/2?Math.max(s,this._spherical.theta):Math.min(l,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let u=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const b=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),u=b!=this._spherical.radius}if(_a.setFromSpherical(this._spherical),_a.applyQuaternion(this._quatInverse),r.copy(this.target).add(_a),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let b=null;if(this.object.isPerspectiveCamera){const T=_a.length();b=this._clampDistance(T*this._scale);const O=T-b;this.object.position.addScaledVector(this._dollyDirection,O),this.object.updateMatrixWorld(),u=!!O}else if(this.object.isOrthographicCamera){const T=new mt(this._mouse.x,this._mouse.y,0);T.unproject(this.object);const O=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),u=O!==this.object.zoom;const U=new mt(this._mouse.x,this._mouse.y,0);U.unproject(this.object),this.object.position.sub(U).add(T),this.object.updateMatrixWorld(),b=_a.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==b&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(b).add(this.object.position):(yd.origin.copy(this.object.position),yd.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(yd.direction))<gw?this.object.lookAt(this.target):(__.setFromNormalAndCoplanarPoint(this.object.up,this.target),yd.intersectPlane(__,this.target))))}else if(this.object.isOrthographicCamera){const b=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),b!==this.object.zoom&&(this.object.updateProjectionMatrix(),u=!0)}return this._scale=1,this._performCursorZoom=!1,!!(u||this._lastPosition.distanceToSquared(this.object.position)>fy||8*(1-this._lastQuaternion.dot(this.object.quaternion))>fy||this._lastTargetPosition.distanceToSquared(this.target)>fy)&&(this.dispatchEvent(v_),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?gl/60*this.autoRotateSpeed*t:gl/60/60*this.autoRotateSpeed}_getZoomScale(t){const r=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,r){_a.setFromMatrixColumn(r,0),_a.multiplyScalar(-t),this._panOffset.add(_a)}_panUp(t,r){!0===this.screenSpacePanning?_a.setFromMatrixColumn(r,1):(_a.setFromMatrixColumn(r,0),_a.crossVectors(this.object.up,_a)),_a.multiplyScalar(t),this._panOffset.add(_a)}_pan(t,r){const s=this.domElement;if(this.object.isPerspectiveCamera){_a.copy(this.object.position).sub(this.target);let u=_a.length();u*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*u/s.clientHeight,this.object.matrix),this._panUp(2*r*u/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),u=r-s.top,T=s.height;this._mouse.x=(t-s.left)/s.width*2-1,this._mouse.y=-u/T*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(gl*this._rotateDelta.x/r.clientHeight),this._rotateUp(gl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let r=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0}r&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._rotateStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,l=t.pageY-r.y,u=Math.sqrt(s*s+l*l);this._dollyStart.set(0,u)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const s=this._getSecondPointerPosition(t);this._rotateEnd.set(.5*(t.pageX+s.x),.5*(t.pageY+s.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(gl*this._rotateDelta.x/r.clientHeight),this._rotateUp(gl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panEnd.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,l=t.pageY-r.y,u=Math.sqrt(s*s+l*l);this._dollyEnd.set(0,u),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return void this._pointers.splice(r,1)}_isTrackingPointer(t){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return!0;return!1}_trackPointer(t){let r=this._pointerPositions[t.pointerId];void 0===r&&(r=new hr,this._pointerPositions[t.pointerId]=r),r.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){return this._pointerPositions[t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(t){const s={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(t.deltaMode){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function xf(y){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(y.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(y)&&(this._addPointer(y),"touch"===y.pointerType?this._onTouchStart(y):this._onMouseDown(y)))}function b_(y){!1!==this.enabled&&("touch"===y.pointerType?this._onTouchMove(y):this._onMouseMove(y))}function x_(y){switch(this._removePointer(y),this._pointers.length){case 0:this.domElement.releasePointerCapture(y.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(cm),this.state=-1;break;case 1:const t=this._pointers[0],r=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:r.x,pageY:r.y})}}function yw(y){let t;switch(y.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(y),this.state=1;break;case 0:if(y.ctrlKey||y.metaKey||y.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(y),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(y),this.state=0}break;case 2:if(y.ctrlKey||y.metaKey||y.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(y),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(y),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(lm)}function wf(y){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(y);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(y);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(y)}}function um(y){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(y.preventDefault(),this.dispatchEvent(lm),this._handleMouseWheel(this._customWheelEvent(y)),this.dispatchEvent(cm))}function QE(y){!1!==this.enabled&&this._handleKeyDown(y)}function vw(y){switch(this._trackPointer(y),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(y),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(y),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(y),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(y),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(lm)}function w_(y){switch(this._trackPointer(y),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(y),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(y),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(y),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(y),this.update();break;default:this.state=-1}}function my(y){!1!==this.enabled&&y.preventDefault()}function _w(y){"Control"===y.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function S_(y){"Control"===y.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M_(y,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),y;if(2===t||1===t){let r=y.getIndex();if(null===r){const b=[],T=y.getAttribute("position");if(void 0===T)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),y;for(let O=0;O<T.count;O++)b.push(O);y.setIndex(b),r=y.getIndex()}const s=r.count-2,l=[];if(2===t)for(let b=1;b<=s;b++)l.push(r.getX(0)),l.push(r.getX(b)),l.push(r.getX(b+1));else for(let b=0;b<s;b++)b%2==0?(l.push(r.getX(b)),l.push(r.getX(b+1)),l.push(r.getX(b+2))):(l.push(r.getX(b+2)),l.push(r.getX(b+1)),l.push(r.getX(b)));l.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const u=y.clone();return u.setIndex(l),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),y}class ww extends Oo{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Ew(r)}),this.register(function(r){return new ih(r)}),this.register(function(r){return new D_(r)}),this.register(function(r){return new dm(r)}),this.register(function(r){return new Rw(r)}),this.register(function(r){return new Mw(r)}),this.register(function(r){return new Tw(r)}),this.register(function(r){return new Aw(r)}),this.register(function(r){return new Cw(r)}),this.register(function(r){return new _y(r)}),this.register(function(r){return new Dw(r)}),this.register(function(r){return new A_(r)}),this.register(function(r){return new Iw(r)}),this.register(function(r){return new C_(r)}),this.register(function(r){return new Sf(r)}),this.register(function(r){return new Pw(r)}),this.register(function(r){return new I_(r)})}load(t,r,s,l){const u=this;let b;if(""!==this.resourcePath)b=this.resourcePath;else if(""!==this.path){const U=Xc.extractUrlBase(t);b=Xc.resolveURL(U,this.path)}else b=Xc.extractUrlBase(t);this.manager.itemStart(t);const T=function(U){l?l(U):console.error(U),u.manager.itemError(t),u.manager.itemEnd(t)},O=new Tl(this.manager);O.setPath(this.path),O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(t,function(U){try{u.parse(U,b,function(Q){r(Q),u.manager.itemEnd(t)},T)}catch(Q){T(Q)}},s,T)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,s,l){let u;const b={},T={},O=new TextDecoder;if("string"==typeof t)u=JSON.parse(t);else if(t instanceof ArrayBuffer)if(O.decode(new Uint8Array(t,0,4))===R_){try{b[ss.KHR_BINARY_GLTF]=new sh(t)}catch(oe){return void(l&&l(oe))}u=JSON.parse(b[ss.KHR_BINARY_GLTF].content)}else u=JSON.parse(O.decode(t));else u=t;if(void 0===u.asset||u.asset.version[0]<2)return void(l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const U=new jw(u,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});U.fileLoader.setRequestHeader(this.requestHeader);for(let Q=0;Q<this.pluginCallbacks.length;Q++){const oe=this.pluginCallbacks[Q](U);oe.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),T[oe.name]=oe,b[oe.name]=!0}if(u.extensionsUsed)for(let Q=0;Q<u.extensionsUsed.length;++Q){const oe=u.extensionsUsed[Q],fe=u.extensionsRequired||[];switch(oe){case ss.KHR_MATERIALS_UNLIT:b[oe]=new vy;break;case ss.KHR_DRACO_MESH_COMPRESSION:b[oe]=new Mf(u,this.dracoLoader);break;case ss.KHR_TEXTURE_TRANSFORM:b[oe]=new oM;break;case ss.KHR_MESH_QUANTIZATION:b[oe]=new P_;break;default:fe.indexOf(oe)>=0&&void 0===T[oe]&&console.warn('THREE.GLTFLoader: Unknown extension "'+oe+'".')}}U.setExtensions(b),U.setPlugins(T),U.parse(s,l)}parseAsync(t,r){const s=this;return new Promise(function(l,u){s.parse(t,r,l,u)})}}function Sw(){let y={};return{get:function(t){return y[t]},add:function(t,r){y[t]=r},remove:function(t){delete y[t]},removeAll:function(){y={}}}}const ss={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Sf{constructor(t){this.parser=t,this.name=ss.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let s=0,l=r.length;s<l;s++){const u=r[s];u.extensions&&u.extensions[this.name]&&void 0!==u.extensions[this.name].light&&t._addNodeRef(this.cache,u.extensions[this.name].light)}}_loadLight(t){const r=this.parser,s="light:"+t;let l=r.cache.get(s);if(l)return l;const u=r.json,O=((u.extensions&&u.extensions[this.name]||{}).lights||[])[t];let U;const Q=new Sr(16777215);void 0!==O.color&&Q.setRGB(O.color[0],O.color[1],O.color[2],Vi);const oe=void 0!==O.range?O.range:0;switch(O.type){case"directional":U=new Ov(Q),U.target.position.set(0,0,-1),U.add(U.target);break;case"point":U=new u1(Q),U.distance=oe;break;case"spot":U=new Pv(Q),U.distance=oe,O.spot=O.spot||{},O.spot.innerConeAngle=void 0!==O.spot.innerConeAngle?O.spot.innerConeAngle:0,O.spot.outerConeAngle=void 0!==O.spot.outerConeAngle?O.spot.outerConeAngle:Math.PI/4,U.angle=O.spot.outerConeAngle,U.penumbra=1-O.spot.innerConeAngle/O.spot.outerConeAngle,U.target.position.set(0,0,-1),U.add(U.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+O.type)}return U.position.set(0,0,0),Bo(U,O),void 0!==O.intensity&&(U.intensity=O.intensity),U.name=r.createUniqueName(O.name||"light_"+t),l=Promise.resolve(U),r.cache.add(s,l),l}getDependency(t,r){if("light"===t)return this._loadLight(r)}createNodeAttachment(t){const r=this,s=this.parser,u=s.json.nodes[t],T=(u.extensions&&u.extensions[this.name]||{}).light;return void 0===T?null:this._loadLight(T).then(function(O){return s._getNodeRef(r.cache,T,O)})}}class vy{constructor(){this.name=ss.KHR_MATERIALS_UNLIT}getMaterialType(){return io}extendParams(t,r,s){const l=[];t.color=new Sr(1,1,1),t.opacity=1;const u=r.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){const b=u.baseColorFactor;t.color.setRGB(b[0],b[1],b[2],Vi),t.opacity=b[3]}void 0!==u.baseColorTexture&&l.push(s.assignTexture(t,"map",u.baseColorTexture,Ii))}return Promise.all(l)}}class _y{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name].emissiveStrength;return void 0!==u&&(r.emissiveIntensity=u),Promise.resolve()}}class Ew{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];if(void 0!==b.clearcoatFactor&&(r.clearcoat=b.clearcoatFactor),void 0!==b.clearcoatTexture&&u.push(s.assignTexture(r,"clearcoatMap",b.clearcoatTexture)),void 0!==b.clearcoatRoughnessFactor&&(r.clearcoatRoughness=b.clearcoatRoughnessFactor),void 0!==b.clearcoatRoughnessTexture&&u.push(s.assignTexture(r,"clearcoatRoughnessMap",b.clearcoatRoughnessTexture)),void 0!==b.clearcoatNormalTexture&&(u.push(s.assignTexture(r,"clearcoatNormalMap",b.clearcoatNormalTexture)),void 0!==b.clearcoatNormalTexture.scale)){const T=b.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new hr(T,T)}return Promise.all(u)}}class ih{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name];return r.dispersion=void 0!==u.dispersion?u.dispersion:0,Promise.resolve()}}class A_{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];return void 0!==b.iridescenceFactor&&(r.iridescence=b.iridescenceFactor),void 0!==b.iridescenceTexture&&u.push(s.assignTexture(r,"iridescenceMap",b.iridescenceTexture)),void 0!==b.iridescenceIor&&(r.iridescenceIOR=b.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==b.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=b.iridescenceThicknessMinimum),void 0!==b.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=b.iridescenceThicknessMaximum),void 0!==b.iridescenceThicknessTexture&&u.push(s.assignTexture(r,"iridescenceThicknessMap",b.iridescenceThicknessTexture)),Promise.all(u)}}class Mw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[];r.sheenColor=new Sr(0,0,0),r.sheenRoughness=0,r.sheen=1;const b=l.extensions[this.name];if(void 0!==b.sheenColorFactor){const T=b.sheenColorFactor;r.sheenColor.setRGB(T[0],T[1],T[2],Vi)}return void 0!==b.sheenRoughnessFactor&&(r.sheenRoughness=b.sheenRoughnessFactor),void 0!==b.sheenColorTexture&&u.push(s.assignTexture(r,"sheenColorMap",b.sheenColorTexture,Ii)),void 0!==b.sheenRoughnessTexture&&u.push(s.assignTexture(r,"sheenRoughnessMap",b.sheenRoughnessTexture)),Promise.all(u)}}class Tw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];return void 0!==b.transmissionFactor&&(r.transmission=b.transmissionFactor),void 0!==b.transmissionTexture&&u.push(s.assignTexture(r,"transmissionMap",b.transmissionTexture)),Promise.all(u)}}class Aw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];r.thickness=void 0!==b.thicknessFactor?b.thicknessFactor:0,void 0!==b.thicknessTexture&&u.push(s.assignTexture(r,"thicknessMap",b.thicknessTexture)),r.attenuationDistance=b.attenuationDistance||1/0;const T=b.attenuationColor||[1,1,1];return r.attenuationColor=(new Sr).setRGB(T[0],T[1],T[2],Vi),Promise.all(u)}}class Cw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=l.extensions[this.name];return r.ior=void 0!==u.ior?u.ior:1.5,Promise.resolve()}}class Dw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];r.specularIntensity=void 0!==b.specularFactor?b.specularFactor:1,void 0!==b.specularTexture&&u.push(s.assignTexture(r,"specularIntensityMap",b.specularTexture));const T=b.specularColorFactor||[1,1,1];return r.specularColor=(new Sr).setRGB(T[0],T[1],T[2],Vi),void 0!==b.specularColorTexture&&u.push(s.assignTexture(r,"specularColorMap",b.specularColorTexture,Ii)),Promise.all(u)}}class C_{constructor(t){this.parser=t,this.name=ss.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];return r.bumpScale=void 0!==b.bumpFactor?b.bumpFactor:1,void 0!==b.bumpTexture&&u.push(s.assignTexture(r,"bumpMap",b.bumpTexture)),Promise.all(u)}}class Iw{constructor(t){this.parser=t,this.name=ss.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,l=s.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const u=[],b=l.extensions[this.name];return void 0!==b.anisotropyStrength&&(r.anisotropy=b.anisotropyStrength),void 0!==b.anisotropyRotation&&(r.anisotropyRotation=b.anisotropyRotation),void 0!==b.anisotropyTexture&&u.push(s.assignTexture(r,"anisotropyMap",b.anisotropyTexture)),Promise.all(u)}}class D_{constructor(t){this.parser=t,this.name=ss.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,s=r.json,l=s.textures[t];if(!l.extensions||!l.extensions[this.name])return null;const u=l.extensions[this.name],b=r.options.ktx2Loader;if(!b){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,u.source,b)}}class dm{constructor(t){this.parser=t,this.name=ss.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,l=s.json,u=l.textures[t];if(!u.extensions||!u.extensions[r])return null;const b=u.extensions[r],T=l.images[b.source];let O=s.textureLoader;if(T.uri){const U=s.options.manager.getHandler(T.uri);null!==U&&(O=U)}return this.detectSupport().then(function(U){if(U)return s.loadTextureImage(t,b.source,O);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Rw{constructor(t){this.parser=t,this.name=ss.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,l=s.json,u=l.textures[t];if(!u.extensions||!u.extensions[r])return null;const b=u.extensions[r],T=l.images[b.source];let O=s.textureLoader;if(T.uri){const U=s.options.manager.getHandler(T.uri);null!==U&&(O=U)}return this.detectSupport().then(function(U){if(U)return s.loadTextureImage(t,b.source,O);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Pw{constructor(t){this.name=ss.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,s=r.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const l=s.extensions[this.name],u=this.parser.getDependency("buffer",l.buffer),b=this.parser.options.meshoptDecoder;if(!b||!b.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return u.then(function(T){const Q=l.count,oe=l.byteStride,fe=new Uint8Array(T,l.byteOffset||0,l.byteLength||0);return b.decodeGltfBufferAsync?b.decodeGltfBufferAsync(Q,oe,fe,l.mode,l.filter).then(function(ye){return ye.buffer}):b.ready.then(function(){const ye=new ArrayBuffer(Q*oe);return b.decodeGltfBuffer(new Uint8Array(ye),Q,oe,fe,l.mode,l.filter),ye})})}return null}}class I_{constructor(t){this.name=ss.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,s=r.nodes[t];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;const l=r.meshes[s.mesh];for(const U of l.primitives)if(U.mode!==Dl.TRIANGLES&&U.mode!==Dl.TRIANGLE_STRIP&&U.mode!==Dl.TRIANGLE_FAN&&void 0!==U.mode)return null;const b=s.extensions[this.name].attributes,T=[],O={};for(const U in b)T.push(this.parser.getDependency("accessor",b[U]).then(Q=>(O[U]=Q,O[U])));return T.length<1?null:(T.push(this.parser.createNodeMesh(t)),Promise.all(T).then(U=>{const Q=U.pop(),oe=Q.isGroup?Q.children:[Q],fe=U[0].count,ye=[];for(const Me of oe){const Ue=new Mi,Pe=new mt,De=new en,tt=new mt(1,1,1),st=new Bb(Me.geometry,Me.material,fe);for(let nt=0;nt<fe;nt++)O.TRANSLATION&&Pe.fromBufferAttribute(O.TRANSLATION,nt),O.ROTATION&&De.fromBufferAttribute(O.ROTATION,nt),O.SCALE&&tt.fromBufferAttribute(O.SCALE,nt),st.setMatrixAt(nt,Ue.compose(Pe,De,tt));for(const nt in O)if("_COLOR_0"===nt){const $t=O[nt];st.instanceColor=new Mh($t.array,$t.itemSize,$t.normalized)}else"TRANSLATION"!==nt&&"ROTATION"!==nt&&"SCALE"!==nt&&Me.geometry.setAttribute(nt,O[nt]);Qs.prototype.copy.call(st,Me),this.parser.assignFinalMaterial(st),ye.push(st)}return Q.isGroup?(Q.clear(),Q.add(...ye),Q):ye[0]}))}}const R_="glTF";class sh{constructor(t){this.name=ss.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,12),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==R_)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-12,u=new DataView(t,12);let b=0;for(;b<l;){const T=u.getUint32(b,!0);b+=4;const O=u.getUint32(b,!0);if(b+=4,1313821514===O){const U=new Uint8Array(t,12+b,T);this.content=s.decode(U)}else if(5130562===O){const U=12+b;this.body=t.slice(U,U+T)}b+=T}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mf{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ss.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const s=this.json,l=this.dracoLoader,u=t.extensions[this.name].bufferView,b=t.extensions[this.name].attributes,T={},O={},U={};for(const Q in b){const oe=by[Q]||Q.toLowerCase();T[oe]=b[Q]}for(const Q in t.attributes){const oe=by[Q]||Q.toLowerCase();if(void 0!==b[Q]){const fe=s.accessors[t.attributes[Q]];U[oe]=Tf[fe.componentType].name,O[oe]=!0===fe.normalized}}return r.getDependency("bufferView",u).then(function(Q){return new Promise(function(oe,fe){l.decodeDracoFile(Q,function(ye){for(const Me in ye.attributes){const Pe=O[Me];void 0!==Pe&&(ye.attributes[Me].normalized=Pe)}oe(ye)},T,U,Vi,fe)})})}}class oM{constructor(){this.name=ss.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(void 0===r.texCoord||r.texCoord===t.channel)&&void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.texCoord&&(t.channel=r.texCoord),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class P_{constructor(){this.name=ss.KHR_MESH_QUANTIZATION}}class O_ extends $h{constructor(t,r,s,l){super(t,r,s,l)}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=t*l*3+l;for(let b=0;b!==l;b++)r[b]=s[u+b];return r}interpolate_(t,r,s,l){const u=this.resultBuffer,b=this.sampleValues,T=this.valueSize,O=2*T,U=3*T,Q=l-r,oe=(s-r)/Q,fe=oe*oe,ye=fe*oe,Me=t*U,Ue=Me-U,Pe=-2*ye+3*fe,De=ye-fe,tt=1-Pe,st=De-fe+oe;for(let nt=0;nt!==T;nt++)u[nt]=tt*b[Ue+nt+T]+st*(b[Ue+nt+O]*Q)+Pe*b[Me+nt+T]+De*(b[Me+nt]*Q);return u}}const L_=new en;class Ow extends O_{interpolate_(t,r,s,l){const u=super.interpolate_(t,r,s,l);return L_.fromArray(u).normalize().toArray(u),u}}const Dl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Tf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N_={9728:an,9729:wn,9984:1004,9985:1007,9986:nn,9987:sr},oh={33071:yn,33648:1002,10497:Xt},Af={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},by={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ku={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lw={CUBICSPLINE:void 0,LINEAR:No,STEP:Io};function Qo(y,t,r){for(const s in r.extensions)void 0===y[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=r.extensions[s])}function Bo(y,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(y.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xy(y,t){if(y.updateMorphTargets(),void 0!==t.weights)for(let r=0,s=t.weights.length;r<s;r++)y.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(y.morphTargetInfluences.length===r.length){y.morphTargetDictionary={};for(let s=0,l=r.length;s<l;s++)y.morphTargetDictionary[r[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Nw(y){let t;const r=y.extensions&&y.extensions[ss.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+hm(r.attributes):y.indices+":"+hm(y.attributes)+":"+y.mode,void 0!==y.targets)for(let s=0,l=y.targets.length;s<l;s++)t+=":"+hm(y.targets[s]);return t}function hm(y){let t="";const r=Object.keys(y).sort();for(let s=0,l=r.length;s<l;s++)t+=r[s]+":"+y[r[s]]+";";return t}function wy(y){switch(y){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const kw=new Mi;class jw{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Sw,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,l=-1,u=!1,b=-1;if(typeof navigator<"u"){const T=navigator.userAgent;s=!0===/^((?!chrome|android).)*safari/i.test(T);const O=T.match(/Version\/(\d+)/);l=s&&O?parseInt(O[1],10):-1,u=T.indexOf("Firefox")>-1,b=u?T.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||s&&l<17||u&&b<98?new c1(this.options.manager):new wg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const s=this,l=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(b){return b._markDefs&&b._markDefs()}),Promise.all(this._invokeAll(function(b){return b.beforeRoot&&b.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(b){const T={scene:b[0][l.scene||0],scenes:b[0],animations:b[1],cameras:b[2],asset:l.asset,parser:s,userData:{}};return Qo(u,T,l),Bo(T,l),Promise.all(s._invokeAll(function(O){return O.afterRoot&&O.afterRoot(T)})).then(function(){for(const O of T.scenes)O.updateMatrixWorld();t(T)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],s=this.json.meshes||[];for(let l=0,u=r.length;l<u;l++){const b=r[l].joints;for(let T=0,O=b.length;T<O;T++)t[b[T]].isBone=!0}for(let l=0,u=t.length;l<u;l++){const b=t[l];void 0!==b.mesh&&(this._addNodeRef(this.meshCache,b.mesh),void 0!==b.skin&&(s[b.mesh].isSkinnedMesh=!0)),void 0!==b.camera&&this._addNodeRef(this.cameraCache,b.camera)}}_addNodeRef(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,s){if(t.refs[r]<=1)return s;const l=s.clone(),u=(b,T)=>{const O=this.associations.get(b);null!=O&&this.associations.set(T,O);for(const[U,Q]of b.children.entries())u(Q,T.children[U])};return u(s,l),l.name+="_instance_"+t.uses[r]++,l}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let s=0;s<r.length;s++){const l=t(r[s]);if(l)return l}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const s=[];for(let l=0;l<r.length;l++){const u=t(r[l]);u&&s.push(u)}return s}getDependency(t,r){const s=t+":"+r;let l=this.cache.get(s);if(!l){switch(t){case"scene":l=this.loadScene(r);break;case"node":l=this._invokeOne(function(u){return u.loadNode&&u.loadNode(r)});break;case"mesh":l=this._invokeOne(function(u){return u.loadMesh&&u.loadMesh(r)});break;case"accessor":l=this.loadAccessor(r);break;case"bufferView":l=this._invokeOne(function(u){return u.loadBufferView&&u.loadBufferView(r)});break;case"buffer":l=this.loadBuffer(r);break;case"material":l=this._invokeOne(function(u){return u.loadMaterial&&u.loadMaterial(r)});break;case"texture":l=this._invokeOne(function(u){return u.loadTexture&&u.loadTexture(r)});break;case"skin":l=this.loadSkin(r);break;case"animation":l=this._invokeOne(function(u){return u.loadAnimation&&u.loadAnimation(r)});break;case"camera":l=this.loadCamera(r);break;default:if(l=this._invokeOne(function(u){return u!=this&&u.getDependency&&u.getDependency(t,r)}),!l)throw new Error("Unknown type: "+t)}this.cache.add(s,l)}return l}getDependencies(t){let r=this.cache.get(t);if(!r){const s=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(u,b){return s.getDependency(t,b)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],s=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[ss.KHR_BINARY_GLTF].body);const l=this.options;return new Promise(function(u,b){s.load(Xc.resolveURL(r.uri,l.path),u,void 0,function(){b(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(s){const u=r.byteOffset||0;return s.slice(u,u+(r.byteLength||0))})}loadAccessor(t){const r=this,s=this.json,l=this.json.accessors[t];if(void 0===l.bufferView&&void 0===l.sparse){const b=Af[l.type],O=!0===l.normalized,U=new(0,Tf[l.componentType])(l.count*b);return Promise.resolve(new Ls(U,b,O))}const u=[];return u.push(void 0!==l.bufferView?this.getDependency("bufferView",l.bufferView):null),void 0!==l.sparse&&(u.push(this.getDependency("bufferView",l.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",l.sparse.values.bufferView))),Promise.all(u).then(function(b){const T=b[0],O=Af[l.type],U=Tf[l.componentType],Q=U.BYTES_PER_ELEMENT,fe=l.byteOffset||0,ye=void 0!==l.bufferView?s.bufferViews[l.bufferView].byteStride:void 0,Me=!0===l.normalized;let Ue,Pe;if(ye&&ye!==Q*O){const De=Math.floor(fe/ye),tt="InterleavedBuffer:"+l.bufferView+":"+l.componentType+":"+De+":"+l.count;let st=r.cache.get(tt);st||(Ue=new U(T,De*ye,l.count*ye/Q),st=new bc(Ue,ye/Q),r.cache.add(tt,st)),Pe=new Va(st,O,fe%ye/Q,Me)}else Ue=null===T?new U(l.count*O):new U(T,fe,l.count*O),Pe=new Ls(Ue,O,Me);if(void 0!==l.sparse){const nt=l.sparse.values.byteOffset||0,$t=new(0,Tf[l.sparse.indices.componentType])(b[1],l.sparse.indices.byteOffset||0,l.sparse.count*Af.SCALAR),Ct=new U(b[2],nt,l.sparse.count*O);null!==T&&(Pe=new Ls(Pe.array.slice(),Pe.itemSize,Pe.normalized)),Pe.normalized=!1;for(let Gt=0,qt=$t.length;Gt<qt;Gt++){const Tt=$t[Gt];if(Pe.setX(Tt,Ct[Gt*O]),O>=2&&Pe.setY(Tt,Ct[Gt*O+1]),O>=3&&Pe.setZ(Tt,Ct[Gt*O+2]),O>=4&&Pe.setW(Tt,Ct[Gt*O+3]),O>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Pe.normalized=Me}return Pe})}loadTexture(t){const r=this.json,u=r.textures[t].source,b=r.images[u];let T=this.textureLoader;if(b.uri){const O=this.options.manager.getHandler(b.uri);null!==O&&(T=O)}return this.loadTextureImage(t,u,T)}loadTextureImage(t,r,s){const l=this,u=this.json,b=u.textures[t],T=u.images[r],O=(T.uri||T.bufferView)+":"+b.sampler;if(this.textureCache[O])return this.textureCache[O];const U=this.loadImageSource(r,s).then(function(Q){Q.flipY=!1,Q.name=b.name||T.name||"",""===Q.name&&"string"==typeof T.uri&&!1===T.uri.startsWith("data:image/")&&(Q.name=T.uri);const fe=(u.samplers||{})[b.sampler]||{};return Q.magFilter=N_[fe.magFilter]||wn,Q.minFilter=N_[fe.minFilter]||sr,Q.wrapS=oh[fe.wrapS]||Xt,Q.wrapT=oh[fe.wrapT]||Xt,Q.generateMipmaps=!Q.isCompressedTexture&&Q.minFilter!==an&&Q.minFilter!==wn,l.associations.set(Q,{textures:t}),Q}).catch(function(){return null});return this.textureCache[O]=U,U}loadImageSource(t,r){const l=this.json,u=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(oe=>oe.clone());const b=l.images[t],T=self.URL||self.webkitURL;let O=b.uri||"",U=!1;if(void 0!==b.bufferView)O=this.getDependency("bufferView",b.bufferView).then(function(oe){U=!0;const fe=new Blob([oe],{type:b.mimeType});return O=T.createObjectURL(fe),O});else if(void 0===b.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const Q=Promise.resolve(O).then(function(oe){return new Promise(function(fe,ye){let Me=fe;!0===r.isImageBitmapLoader&&(Me=function(Ue){const Pe=new no(Ue);Pe.needsUpdate=!0,fe(Pe)}),r.load(Xc.resolveURL(oe,u.path),Me,void 0,ye)})}).then(function(oe){return!0===U&&T.revokeObjectURL(O),Bo(oe,b),oe.userData.mimeType=b.mimeType||function U_(y){return y.search(/\.jpe?g($|\?)/i)>0||0===y.search(/^data\:image\/jpeg/)?"image/jpeg":y.search(/\.webp($|\?)/i)>0||0===y.search(/^data\:image\/webp/)?"image/webp":y.search(/\.ktx2($|\?)/i)>0||0===y.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(b.uri),oe}).catch(function(oe){throw console.error("THREE.GLTFLoader: Couldn't load texture",O),oe});return this.sourceCache[t]=Q,Q}assignTexture(t,r,s,l){const u=this;return this.getDependency("texture",s.index).then(function(b){if(!b)return null;if(void 0!==s.texCoord&&s.texCoord>0&&((b=b.clone()).channel=s.texCoord),u.extensions[ss.KHR_TEXTURE_TRANSFORM]){const T=void 0!==s.extensions?s.extensions[ss.KHR_TEXTURE_TRANSFORM]:void 0;if(T){const O=u.associations.get(b);b=u.extensions[ss.KHR_TEXTURE_TRANSFORM].extendTexture(b,T),u.associations.set(b,O)}}return void 0!==l&&(b.colorSpace=l),t[r]=b,b})}assignFinalMaterial(t){const r=t.geometry;let s=t.material;const l=void 0===r.attributes.tangent,u=void 0!==r.attributes.color,b=void 0===r.attributes.normal;if(t.isPoints){const T="PointsMaterial:"+s.uuid;let O=this.cache.get(T);O||(O=new Eu,Rs.prototype.copy.call(O,s),O.color.copy(s.color),O.map=s.map,O.sizeAttenuation=!1,this.cache.add(T,O)),s=O}else if(t.isLine){const T="LineBasicMaterial:"+s.uuid;let O=this.cache.get(T);O||(O=new Ta,Rs.prototype.copy.call(O,s),O.color.copy(s.color),O.map=s.map,this.cache.add(T,O)),s=O}if(l||u||b){let T="ClonedMaterial:"+s.uuid+":";l&&(T+="derivative-tangents:"),u&&(T+="vertex-colors:"),b&&(T+="flat-shading:");let O=this.cache.get(T);O||(O=s.clone(),u&&(O.vertexColors=!0),b&&(O.flatShading=!0),l&&(O.normalScale&&(O.normalScale.y*=-1),O.clearcoatNormalScale&&(O.clearcoatNormalScale.y*=-1)),this.cache.add(T,O),this.associations.set(O,this.associations.get(s))),s=O}t.material=s}getMaterialType(){return Fo}loadMaterial(t){const r=this,l=this.extensions,u=this.json.materials[t];let b;const T={},U=[];if((u.extensions||{})[ss.KHR_MATERIALS_UNLIT]){const oe=l[ss.KHR_MATERIALS_UNLIT];b=oe.getMaterialType(),U.push(oe.extendParams(T,u,r))}else{const oe=u.pbrMetallicRoughness||{};if(T.color=new Sr(1,1,1),T.opacity=1,Array.isArray(oe.baseColorFactor)){const fe=oe.baseColorFactor;T.color.setRGB(fe[0],fe[1],fe[2],Vi),T.opacity=fe[3]}void 0!==oe.baseColorTexture&&U.push(r.assignTexture(T,"map",oe.baseColorTexture,Ii)),T.metalness=void 0!==oe.metallicFactor?oe.metallicFactor:1,T.roughness=void 0!==oe.roughnessFactor?oe.roughnessFactor:1,void 0!==oe.metallicRoughnessTexture&&(U.push(r.assignTexture(T,"metalnessMap",oe.metallicRoughnessTexture)),U.push(r.assignTexture(T,"roughnessMap",oe.metallicRoughnessTexture))),b=this._invokeOne(function(fe){return fe.getMaterialType&&fe.getMaterialType(t)}),U.push(Promise.all(this._invokeAll(function(fe){return fe.extendMaterialParams&&fe.extendMaterialParams(t,T)})))}!0===u.doubleSided&&(T.side=2);const Q=u.alphaMode||"OPAQUE";if("BLEND"===Q?(T.transparent=!0,T.depthWrite=!1):(T.transparent=!1,"MASK"===Q&&(T.alphaTest=void 0!==u.alphaCutoff?u.alphaCutoff:.5)),void 0!==u.normalTexture&&b!==io&&(U.push(r.assignTexture(T,"normalMap",u.normalTexture)),T.normalScale=new hr(1,1),void 0!==u.normalTexture.scale)){const oe=u.normalTexture.scale;T.normalScale.set(oe,oe)}if(void 0!==u.occlusionTexture&&b!==io&&(U.push(r.assignTexture(T,"aoMap",u.occlusionTexture)),void 0!==u.occlusionTexture.strength&&(T.aoMapIntensity=u.occlusionTexture.strength)),void 0!==u.emissiveFactor&&b!==io){const oe=u.emissiveFactor;T.emissive=(new Sr).setRGB(oe[0],oe[1],oe[2],Vi)}return void 0!==u.emissiveTexture&&b!==io&&U.push(r.assignTexture(T,"emissiveMap",u.emissiveTexture,Ii)),Promise.all(U).then(function(){const oe=new b(T);return u.name&&(oe.name=u.name),Bo(oe,u),r.associations.set(oe,{materials:t}),u.extensions&&Qo(l,oe,u),oe})}createUniqueName(t){const r=wo.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,s=this.extensions,l=this.primitiveCache;function u(T){return s[ss.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(T,r).then(function(O){return pm(O,T,r)})}const b=[];for(let T=0,O=t.length;T<O;T++){const U=t[T],Q=Nw(U),oe=l[Q];if(oe)b.push(oe.promise);else{let fe;fe=U.extensions&&U.extensions[ss.KHR_DRACO_MESH_COMPRESSION]?u(U):pm(new Zi,U,r),l[Q]={primitive:U,promise:fe},b.push(fe)}}return Promise.all(b)}loadMesh(t){const r=this,l=this.extensions,u=this.json.meshes[t],b=u.primitives,T=[];for(let O=0,U=b.length;O<U;O++){const Q=void 0===b[O].material?(void 0===(y=this.cache).DefaultMaterial&&(y.DefaultMaterial=new Fo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),y.DefaultMaterial):this.getDependency("material",b[O].material);T.push(Q)}var y;return T.push(r.loadGeometries(b)),Promise.all(T).then(function(O){const U=O.slice(0,O.length-1),Q=O[O.length-1],oe=[];for(let ye=0,Me=Q.length;ye<Me;ye++){const Ue=Q[ye],Pe=b[ye];let De;const tt=U[ye];if(Pe.mode===Dl.TRIANGLES||Pe.mode===Dl.TRIANGLE_STRIP||Pe.mode===Dl.TRIANGLE_FAN||void 0===Pe.mode)De=!0===u.isSkinnedMesh?new jb(Ue,tt):new cs(Ue,tt),!0===De.isSkinnedMesh&&De.normalizeSkinWeights(),Pe.mode===Dl.TRIANGLE_STRIP?De.geometry=M_(De.geometry,1):Pe.mode===Dl.TRIANGLE_FAN&&(De.geometry=M_(De.geometry,2));else if(Pe.mode===Dl.LINES)De=new il(Ue,tt);else if(Pe.mode===Dl.LINE_STRIP)De=new nc(Ue,tt);else if(Pe.mode===Dl.LINE_LOOP)De=new rp(Ue,tt);else{if(Pe.mode!==Dl.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Pe.mode);De=new kd(Ue,tt)}Object.keys(De.geometry.morphAttributes).length>0&&xy(De,u),De.name=r.createUniqueName(u.name||"mesh_"+t),Bo(De,u),Pe.extensions&&Qo(l,De,Pe),r.assignFinalMaterial(De),oe.push(De)}for(let ye=0,Me=oe.length;ye<Me;ye++)r.associations.set(oe[ye],{meshes:t,primitives:ye});if(1===oe.length)return u.extensions&&Qo(l,oe[0],u),oe[0];const fe=new Ma;u.extensions&&Qo(l,fe,u),r.associations.set(fe,{meshes:t});for(let ye=0,Me=oe.length;ye<Me;ye++)fe.add(oe[ye]);return fe})}loadCamera(t){let r;const s=this.json.cameras[t],l=s[s.type];if(l)return"perspective"===s.type?r=new co(Po_radToDeg(l.yfov),l.aspectRatio||1,l.znear||1,l.zfar||2e6):"orthographic"===s.type&&(r=new bg(-l.xmag,l.xmag,l.ymag,-l.ymag,l.znear,l.zfar)),s.name&&(r.name=this.createUniqueName(s.name)),Bo(r,s),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const r=this.json.skins[t],s=[];for(let l=0,u=r.joints.length;l<u;l++)s.push(this._loadNodeShallow(r.joints[l]));return s.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(s).then(function(l){const u=l.pop(),b=l,T=[],O=[];for(let U=0,Q=b.length;U<Q;U++){const oe=b[U];if(oe){T.push(oe);const fe=new Mi;null!==u&&fe.fromArray(u.array,16*U),O.push(fe)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[U])}return new Hm(T,O)})}loadAnimation(t){const s=this,l=this.json.animations[t],u=l.name?l.name:"animation_"+t,b=[],T=[],O=[],U=[],Q=[];for(let oe=0,fe=l.channels.length;oe<fe;oe++){const ye=l.channels[oe],Me=l.samplers[ye.sampler],Ue=ye.target,De=void 0!==l.parameters?l.parameters[Me.input]:Me.input,tt=void 0!==l.parameters?l.parameters[Me.output]:Me.output;void 0!==Ue.node&&(b.push(this.getDependency("node",Ue.node)),T.push(this.getDependency("accessor",De)),O.push(this.getDependency("accessor",tt)),U.push(Me),Q.push(Ue))}return Promise.all([Promise.all(b),Promise.all(T),Promise.all(O),Promise.all(U),Promise.all(Q)]).then(function(oe){const fe=oe[0],ye=oe[1],Me=oe[2],Ue=oe[3],Pe=oe[4],De=[];for(let tt=0,st=fe.length;tt<st;tt++){const nt=fe[tt],$t=ye[tt],Ct=Me[tt],Gt=Ue[tt],qt=Pe[tt];if(void 0===nt)continue;nt.updateMatrix&&nt.updateMatrix();const Tt=s._createAnimationTracks(nt,$t,Ct,Gt,qt);if(Tt)for(let wt=0;wt<Tt.length;wt++)De.push(Tt[wt])}return new Hc(u,void 0,De)})}createNodeMesh(t){const s=this,l=this.json.nodes[t];return void 0===l.mesh?null:s.getDependency("mesh",l.mesh).then(function(u){const b=s._getNodeRef(s.meshCache,l.mesh,u);return void 0!==l.weights&&b.traverse(function(T){if(T.isMesh)for(let O=0,U=l.weights.length;O<U;O++)T.morphTargetInfluences[O]=l.weights[O]}),b})}loadNode(t){const s=this,l=this.json.nodes[t],u=s._loadNodeShallow(t),b=[],T=l.children||[];for(let U=0,Q=T.length;U<Q;U++)b.push(s.getDependency("node",T[U]));const O=void 0===l.skin?Promise.resolve(null):s.getDependency("skin",l.skin);return Promise.all([u,Promise.all(b),O]).then(function(U){const Q=U[0],oe=U[1],fe=U[2];null!==fe&&Q.traverse(function(ye){ye.isSkinnedMesh&&ye.bind(fe,kw)});for(let ye=0,Me=oe.length;ye<Me;ye++)Q.add(oe[ye]);return Q})}_loadNodeShallow(t){const s=this.extensions,l=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const u=this.json.nodes[t],b=u.name?l.createUniqueName(u.name):"",T=[],O=l._invokeOne(function(U){return U.createNodeMesh&&U.createNodeMesh(t)});return O&&T.push(O),void 0!==u.camera&&T.push(l.getDependency("camera",u.camera).then(function(U){return l._getNodeRef(l.cameraCache,u.camera,U)})),l._invokeAll(function(U){return U.createNodeAttachment&&U.createNodeAttachment(t)}).forEach(function(U){T.push(U)}),this.nodeCache[t]=Promise.all(T).then(function(U){let Q;if(Q=!0===u.isBone?new ev:U.length>1?new Ma:1===U.length?U[0]:new Qs,Q!==U[0])for(let oe=0,fe=U.length;oe<fe;oe++)Q.add(U[oe]);if(u.name&&(Q.userData.name=u.name,Q.name=b),Bo(Q,u),u.extensions&&Qo(s,Q,u),void 0!==u.matrix){const oe=new Mi;oe.fromArray(u.matrix),Q.applyMatrix4(oe)}else void 0!==u.translation&&Q.position.fromArray(u.translation),void 0!==u.rotation&&Q.quaternion.fromArray(u.rotation),void 0!==u.scale&&Q.scale.fromArray(u.scale);return l.associations.has(Q)||l.associations.set(Q,{}),l.associations.get(Q).nodes=t,Q}),this.nodeCache[t]}loadScene(t){const r=this.extensions,s=this.json.scenes[t],l=this,u=new Ma;s.name&&(u.name=l.createUniqueName(s.name)),Bo(u,s),s.extensions&&Qo(r,u,s);const b=s.nodes||[],T=[];for(let O=0,U=b.length;O<U;O++)T.push(l.getDependency("node",b[O]));return Promise.all(T).then(function(O){for(let Q=0,oe=O.length;Q<oe;Q++)u.add(O[Q]);return l.associations=(Q=>{const oe=new Map;for(const[fe,ye]of l.associations)(fe instanceof Rs||fe instanceof no)&&oe.set(fe,ye);return Q.traverse(fe=>{const ye=l.associations.get(fe);null!=ye&&oe.set(fe,ye)}),oe})(u),u})}_createAnimationTracks(t,r,s,l,u){const b=[],T=t.name?t.name:t.uuid,O=[];let U;switch(ku[u.path]===ku.weights?t.traverse(function(fe){fe.morphTargetInfluences&&O.push(fe.name?fe.name:fe.uuid)}):O.push(T),ku[u.path]){case ku.weights:U=Wd;break;case ku.rotation:U=id;break;case ku.position:case ku.scale:U=Au;break;default:U=1===s.itemSize?Wd:Au}const Q=void 0!==l.interpolation?Lw[l.interpolation]:No,oe=this._getArrayFromAccessor(s);for(let fe=0,ye=O.length;fe<ye;fe++){const Me=new U(O[fe]+"."+ku[u.path],r.array,oe,Q);"CUBICSPLINE"===l.interpolation&&this._createCubicSplineTrackInterpolant(Me),b.push(Me)}return b}_getArrayFromAccessor(t){let r=t.array;if(t.normalized){const s=wy(r.constructor),l=new Float32Array(r.length);for(let u=0,b=r.length;u<b;u++)l[u]=r[u]*s;r=l}return r}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){return new(this instanceof id?Ow:O_)(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function pm(y,t,r){const s=t.attributes,l=[];function u(b,T){return r.getDependency("accessor",b).then(function(O){y.setAttribute(T,O)})}for(const b in s){const T=by[b]||b.toLowerCase();T in y.attributes||l.push(u(s[b],T))}if(void 0!==t.indices&&!y.index){const b=r.getDependency("accessor",t.indices).then(function(T){y.setIndex(T)});l.push(b)}return Es.workingColorSpace!==Vi&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Es.workingColorSpace}" not supported.`),Bo(y,t),function fm(y,t,r){const s=t.attributes,l=new Si;if(void 0===s.POSITION)return;{const T=r.json.accessors[s.POSITION],O=T.min,U=T.max;if(void 0===O||void 0===U)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(l.set(new mt(O[0],O[1],O[2]),new mt(U[0],U[1],U[2])),T.normalized){const Q=wy(Tf[T.componentType]);l.min.multiplyScalar(Q),l.max.multiplyScalar(Q)}}const u=t.targets;if(void 0!==u){const T=new mt,O=new mt;for(let U=0,Q=u.length;U<Q;U++){const oe=u[U];if(void 0!==oe.POSITION){const fe=r.json.accessors[oe.POSITION],ye=fe.min,Me=fe.max;if(void 0!==ye&&void 0!==Me){if(O.setX(Math.max(Math.abs(ye[0]),Math.abs(Me[0]))),O.setY(Math.max(Math.abs(ye[1]),Math.abs(Me[1]))),O.setZ(Math.max(Math.abs(ye[2]),Math.abs(Me[2]))),fe.normalized){const Ue=wy(Tf[fe.componentType]);O.multiplyScalar(Ue)}T.max(O)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(T)}y.boundingBox=l;const b=new zs;l.getCenter(b.center),b.radius=l.min.distanceTo(l.max)/2,y.boundingSphere=b}(y,t,r),Promise.all(l).then(function(){return void 0!==t.targets?function F_(y,t,r){let s=!1,l=!1,u=!1;for(let U=0,Q=t.length;U<Q;U++){const oe=t[U];if(void 0!==oe.POSITION&&(s=!0),void 0!==oe.NORMAL&&(l=!0),void 0!==oe.COLOR_0&&(u=!0),s&&l&&u)break}if(!s&&!l&&!u)return Promise.resolve(y);const b=[],T=[],O=[];for(let U=0,Q=t.length;U<Q;U++){const oe=t[U];if(s){const fe=void 0!==oe.POSITION?r.getDependency("accessor",oe.POSITION):y.attributes.position;b.push(fe)}if(l){const fe=void 0!==oe.NORMAL?r.getDependency("accessor",oe.NORMAL):y.attributes.normal;T.push(fe)}if(u){const fe=void 0!==oe.COLOR_0?r.getDependency("accessor",oe.COLOR_0):y.attributes.color;O.push(fe)}}return Promise.all([Promise.all(b),Promise.all(T),Promise.all(O)]).then(function(U){const oe=U[1],fe=U[2];return s&&(y.morphAttributes.position=U[0]),l&&(y.morphAttributes.normal=oe),u&&(y.morphAttributes.color=fe),y.morphTargetsRelative=!0,y})}(y,t.targets,r):y})}const ju=/^[og]\s*(.+)?/,mm=/^mtllib /,B_=/^usemtl /,Cf=/^usemap /,V_=/\s+/,G_=new mt,Df=new mt,Sy=new mt,eu=new mt,Ha=new mt,Ey=new Sr;function gm(){const y={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,r){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==r);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==r,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(l,u){const b=this._finalize(!1);b&&(b.inherited||b.groupCount<=0)&&this.materials.splice(b.index,1);const T={index:this.materials.length,name:l||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:void 0!==b?b.smooth:this.smooth,groupStart:void 0!==b?b.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(O){const U={index:"number"==typeof O?O:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return U.clone=this.clone.bind(U),U}};return this.materials.push(T),T},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(l){const u=this.currentMaterial();if(u&&-1===u.groupEnd&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),l&&this.materials.length>1)for(let b=this.materials.length-1;b>=0;b--)this.materials[b].groupCount<=0&&this.materials.splice(b,1);return l&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),u}},s&&s.name&&"function"==typeof s.clone){const l=s.clone(0);l.inherited=!0,this.object.materials.push(l)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseNormalIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseUVIndex:function(t,r){const s=parseInt(t,10);return 2*(s>=0?s-1:s+r/2)},addVertex:function(t,r,s){const l=this.vertices,u=this.object.geometry.vertices;u.push(l[t+0],l[t+1],l[t+2]),u.push(l[r+0],l[r+1],l[r+2]),u.push(l[s+0],l[s+1],l[s+2])},addVertexPoint:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addVertexLine:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addNormal:function(t,r,s){const l=this.normals,u=this.object.geometry.normals;u.push(l[t+0],l[t+1],l[t+2]),u.push(l[r+0],l[r+1],l[r+2]),u.push(l[s+0],l[s+1],l[s+2])},addFaceNormal:function(t,r,s){const l=this.vertices,u=this.object.geometry.normals;G_.fromArray(l,t),Df.fromArray(l,r),Sy.fromArray(l,s),Ha.subVectors(Sy,Df),eu.subVectors(G_,Df),Ha.cross(eu),Ha.normalize(),u.push(Ha.x,Ha.y,Ha.z),u.push(Ha.x,Ha.y,Ha.z),u.push(Ha.x,Ha.y,Ha.z)},addColor:function(t,r,s){const l=this.colors,u=this.object.geometry.colors;void 0!==l[t]&&u.push(l[t+0],l[t+1],l[t+2]),void 0!==l[r]&&u.push(l[r+0],l[r+1],l[r+2]),void 0!==l[s]&&u.push(l[s+0],l[s+1],l[s+2])},addUV:function(t,r,s){const l=this.uvs,u=this.object.geometry.uvs;u.push(l[t+0],l[t+1]),u.push(l[r+0],l[r+1]),u.push(l[s+0],l[s+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const r=this.uvs;this.object.geometry.uvs.push(r[t+0],r[t+1])},addFace:function(t,r,s,l,u,b,T,O,U){const Q=this.vertices.length;let oe=this.parseVertexIndex(t,Q),fe=this.parseVertexIndex(r,Q),ye=this.parseVertexIndex(s,Q);if(this.addVertex(oe,fe,ye),this.addColor(oe,fe,ye),void 0!==T&&""!==T){const Me=this.normals.length;oe=this.parseNormalIndex(T,Me),fe=this.parseNormalIndex(O,Me),ye=this.parseNormalIndex(U,Me),this.addNormal(oe,fe,ye)}else this.addFaceNormal(oe,fe,ye);if(void 0!==l&&""!==l){const Me=this.uvs.length;oe=this.parseUVIndex(l,Me),fe=this.parseUVIndex(u,Me),ye=this.parseUVIndex(b,Me),this.addUV(oe,fe,ye),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const r=this.vertices.length;for(let s=0,l=t.length;s<l;s++){const u=this.parseVertexIndex(t[s],r);this.addVertexPoint(u),this.addColor(u)}},addLineGeometry:function(t,r){this.object.geometry.type="Line";const s=this.vertices.length,l=this.uvs.length;for(let u=0,b=t.length;u<b;u++)this.addVertexLine(this.parseVertexIndex(t[u],s));for(let u=0,b=r.length;u<b;u++)this.addUVLine(this.parseUVIndex(r[u],l))}};return y.startObject("",!1),y}class z_ extends Oo{constructor(t){super(t),this.materials=null}load(t,r,s,l){const u=this,b=new Tl(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(t,function(T){try{r(u.parse(T))}catch(O){l?l(O):console.error(O),u.manager.itemError(t)}},s,l)}setMaterials(t){return this.materials=t,this}parse(t){const r=new gm;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let l=[];for(let T=0,O=s.length;T<O;T++){const U=s[T].trimStart();if(0===U.length)continue;const Q=U.charAt(0);if("#"!==Q)if("v"===Q){const oe=U.split(V_);switch(oe[0]){case"v":r.vertices.push(parseFloat(oe[1]),parseFloat(oe[2]),parseFloat(oe[3])),oe.length>=7?(Ey.setRGB(parseFloat(oe[4]),parseFloat(oe[5]),parseFloat(oe[6]),Ii),r.colors.push(Ey.r,Ey.g,Ey.b)):r.colors.push(void 0,void 0,void 0);break;case"vn":r.normals.push(parseFloat(oe[1]),parseFloat(oe[2]),parseFloat(oe[3]));break;case"vt":r.uvs.push(parseFloat(oe[1]),parseFloat(oe[2]))}}else if("f"===Q){const fe=U.slice(1).trim().split(V_),ye=[];for(let Ue=0,Pe=fe.length;Ue<Pe;Ue++){const De=fe[Ue];if(De.length>0){const tt=De.split("/");ye.push(tt)}}const Me=ye[0];for(let Ue=1,Pe=ye.length-1;Ue<Pe;Ue++){const De=ye[Ue],tt=ye[Ue+1];r.addFace(Me[0],De[0],tt[0],Me[1],De[1],tt[1],Me[2],De[2],tt[2])}}else if("l"===Q){const oe=U.substring(1).trim().split(" ");let fe=[];const ye=[];if(-1===U.indexOf("/"))fe=oe;else for(let Me=0,Ue=oe.length;Me<Ue;Me++){const Pe=oe[Me].split("/");""!==Pe[0]&&fe.push(Pe[0]),""!==Pe[1]&&ye.push(Pe[1])}r.addLineGeometry(fe,ye)}else if("p"===Q){const fe=U.slice(1).trim().split(" ");r.addPointGeometry(fe)}else if(null!==(l=ju.exec(U))){const oe=(" "+l[0].slice(1).trim()).slice(1);r.startObject(oe)}else if(B_.test(U))r.object.startMaterial(U.substring(7).trim(),r.materialLibraries);else if(mm.test(U))r.materialLibraries.push(U.substring(7).trim());else if(Cf.test(U))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===Q){if(l=U.split(" "),l.length>1){const fe=l[1].trim().toLowerCase();r.object.smooth="0"!==fe&&"off"!==fe}else r.object.smooth=!0;const oe=r.object.currentMaterial();oe&&(oe.smooth=r.object.smooth)}else{if("\0"===U)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+U+'"')}}r.finalize();const u=new Ma;if(u.materialLibraries=[].concat(r.materialLibraries),1==!(1===r.objects.length&&0===r.objects[0].geometry.vertices.length))for(let T=0,O=r.objects.length;T<O;T++){const U=r.objects[T],Q=U.geometry,oe=U.materials,fe="Line"===Q.type,ye="Points"===Q.type;let Me=!1;if(0===Q.vertices.length)continue;const Ue=new Zi;Ue.setAttribute("position",new _i(Q.vertices,3)),Q.normals.length>0&&Ue.setAttribute("normal",new _i(Q.normals,3)),Q.colors.length>0&&(Me=!0,Ue.setAttribute("color",new _i(Q.colors,3))),!0===Q.hasUVIndices&&Ue.setAttribute("uv",new _i(Q.uvs,2));const Pe=[];for(let tt=0,st=oe.length;tt<st;tt++){const nt=oe[tt],$t=nt.name+"_"+nt.smooth+"_"+Me;let Ct=r.materials[$t];if(null!==this.materials)if(Ct=this.materials.create(nt.name),!fe||!Ct||Ct instanceof Ta){if(ye&&Ct&&!(Ct instanceof Eu)){const Gt=new Eu({size:10,sizeAttenuation:!1});Rs.prototype.copy.call(Gt,Ct),Gt.color.copy(Ct.color),Gt.map=Ct.map,Ct=Gt}}else{const Gt=new Ta;Rs.prototype.copy.call(Gt,Ct),Gt.color.copy(Ct.color),Ct=Gt}void 0===Ct&&(Ct=fe?new Ta:ye?new Eu({size:1,sizeAttenuation:!1}):new fg,Ct.name=nt.name,Ct.flatShading=!nt.smooth,Ct.vertexColors=Me,r.materials[$t]=Ct),Pe.push(Ct)}let De;if(Pe.length>1){for(let tt=0,st=oe.length;tt<st;tt++){const nt=oe[tt];Ue.addGroup(nt.groupStart,nt.groupCount,tt)}De=fe?new il(Ue,Pe):ye?new kd(Ue,Pe):new cs(Ue,Pe)}else De=fe?new il(Ue,Pe[0]):ye?new kd(Ue,Pe[0]):new cs(Ue,Pe[0]);De.name=U.name,u.add(De)}else if(r.vertices.length>0){const T=new Eu({size:1,sizeAttenuation:!1}),O=new Zi;O.setAttribute("position",new _i(r.vertices,3)),r.colors.length>0&&void 0!==r.colors[0]&&(O.setAttribute("color",new _i(r.colors,3)),T.vertexColors=!0);const U=new kd(O,T);u.add(U)}return u}}class $_ extends Oo{constructor(t){super(t)}load(t,r,s,l){const u=this,b=new Tl(this.manager);b.setPath(this.path),b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(t,function(T){try{r(u.parse(T))}catch(O){l?l(O):console.error(O),u.manager.itemError(t)}},s,l)}parse(t){function s(U,Q,oe){for(let fe=0,ye=U.length;fe<ye;fe++)if(U[fe]!==Q.getUint8(oe+fe))return!1;return!0}const O=function T(U){if("string"==typeof U){const Q=new Uint8Array(U.length);for(let oe=0;oe<U.length;oe++)Q[oe]=255&U.charCodeAt(oe);return Q.buffer||Q}return U}(t);return function r(U){const Q=new DataView(U);if(84+50*Q.getUint32(80,!0)===Q.byteLength)return!0;const Me=[115,111,108,105,100];for(let Ue=0;Ue<5;Ue++)if(s(Me,Q,Ue))return!1;return!0}(O)?function l(U){const Q=new DataView(U),oe=Q.getUint32(80,!0);let fe,ye,Me,Pe,De,tt,st,nt,Ue=!1;for(let gn=0;gn<70;gn++)1129270351==Q.getUint32(gn,!1)&&82==Q.getUint8(gn+4)&&61==Q.getUint8(gn+5)&&(Ue=!0,Pe=new Float32Array(3*oe*3),De=Q.getUint8(gn+6)/255,tt=Q.getUint8(gn+7)/255,st=Q.getUint8(gn+8)/255,nt=Q.getUint8(gn+9)/255);const Gt=new Zi,qt=new Float32Array(3*oe*3),Tt=new Float32Array(3*oe*3),wt=new Sr;for(let gn=0;gn<oe;gn++){const qn=84+50*gn,Vn=Q.getFloat32(qn,!0),Jn=Q.getFloat32(qn+4,!0),gr=Q.getFloat32(qn+8,!0);if(Ue){const Zn=Q.getUint16(qn+48,!0);32768&Zn?(fe=De,ye=tt,Me=st):(fe=(31&Zn)/31,ye=(Zn>>5&31)/31,Me=(Zn>>10&31)/31)}for(let Zn=1;Zn<=3;Zn++){const Lr=qn+12*Zn,tr=3*gn*3+3*(Zn-1);qt[tr]=Q.getFloat32(Lr,!0),qt[tr+1]=Q.getFloat32(Lr+4,!0),qt[tr+2]=Q.getFloat32(Lr+8,!0),Tt[tr]=Vn,Tt[tr+1]=Jn,Tt[tr+2]=gr,Ue&&(wt.setRGB(fe,ye,Me,Ii),Pe[tr]=wt.r,Pe[tr+1]=wt.g,Pe[tr+2]=wt.b)}}return Gt.setAttribute("position",new Ls(qt,3)),Gt.setAttribute("normal",new Ls(Tt,3)),Ue&&(Gt.setAttribute("color",new Ls(Pe,3)),Gt.hasColors=!0,Gt.alpha=nt),Gt}(O):function u(U){const Q=new Zi,oe=/solid([\s\S]*?)endsolid/g,fe=/facet([\s\S]*?)endfacet/g,ye=/solid\s(.+)/;let Me=0;const Ue=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,Pe=new RegExp("vertex"+Ue+Ue+Ue,"g"),De=new RegExp("normal"+Ue+Ue+Ue,"g"),tt=[],st=[],nt=[],$t=new mt;let Ct,Gt=0,qt=0,Tt=0;for(;null!==(Ct=oe.exec(U));){qt=Tt;const wt=Ct[0],gn=null!==(Ct=ye.exec(wt))?Ct[1]:"";for(nt.push(gn);null!==(Ct=fe.exec(wt));){let Jn=0,gr=0;const Zn=Ct[0];for(;null!==(Ct=De.exec(Zn));)$t.x=parseFloat(Ct[1]),$t.y=parseFloat(Ct[2]),$t.z=parseFloat(Ct[3]),gr++;for(;null!==(Ct=Pe.exec(Zn));)tt.push(parseFloat(Ct[1]),parseFloat(Ct[2]),parseFloat(Ct[3])),st.push($t.x,$t.y,$t.z),Jn++,Tt++;1!==gr&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+Me),3!==Jn&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+Me),Me++}const qn=qt,Vn=Tt-qt;Q.userData.groupNames=nt,Q.addGroup(qn,Vn,Gt),Gt++}return Q.setAttribute("position",new _i(tt,3)),Q.setAttribute("normal",new _i(st,3)),Q}(function b(U){return"string"!=typeof U?(new TextDecoder).decode(U):U}(t))}}var Lc=je(3953),ah=je(5374),Fw=je(3656),Uw=je(9900),Bw=je(4234),Vw=je(345),Gw=je(755),zw=je(3307),$w=je(5547),tu=!1;const lh=8e4;let Hw=(()=>{var y;class t{constructor(s,l,u,b,T,O,U,Q,oe){this.modalCtrl=s,this.p5toast=l,this.lang=u,this.sanitizer=b,this.indexed=T,this.alertCtrl=O,this.navCtrl=U,this.p5loading=Q,this.noti=oe,this.windowOnFocusAct={},this.WindowOnBlurAct={},this.FocusOnPortal=!0,this.portalHint=!0,this.BlockMainShortcut=!1,this.PortalBottonTabAct={Todo:void 0,Subscribes:void 0,Arcade:void 0,Community:void 0},this.GodotCache={},this.ArcadeLoaded=!1,this.ArcadeWithFullScreen=!1,this.ToggleChatInput=!1,this.NeedBackgroundMode=!1,this.IsBackgroundMode=!1,this.arcadeChat={logs:[],text:""},this.ArcadeObject={QRCode:void 0},this.CacheShortCut={},this.useLocalAddress=!1,this.WebsocketRetryTerm=70,this.useVoiceRecording="",this.videoPIP=!1,this.WaitingConnect=!1,this.useVideo=!1,this.InitEnd=!1,this.PeerConnected=!1,this.ShowChatInterface=!1,this.DisableChatInput=!1,this.instCallLog={logs:[],text:""},this.PageDismissAct={},this.isOthersVideoExtended=!0,tu=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ye=>{tu=!!ye.matches}),this.useLocalAddress="true"==localStorage.getItem("useQRCodeBasic"),window.onfocus=()=>{let ye=Object.keys(this.windowOnFocusAct);for(let Me of ye)this.windowOnFocusAct[Me]()},window.onblur=()=>{let ye=Object.keys(this.WindowOnBlurAct);for(let Me of ye)this.WindowOnBlurAct[Me]()};const fe=()=>{this.ArcadeWithFullScreen=!!document.fullscreenElement};document.onfullscreenchange=fe,document.onwebkitfullscreenchange=fe,document.onmozfullscreenchange=fe,document.onMSFullscreenChange=fe}toggleBlockMainShortcut(s){this.BlockMainShortcut=s,this.portalHint=!s}initialize(){const s=localStorage.getItem("ShowHint");null!==s&&(this.ShowHint="1"==s),void 0===this.ShowHint&&(this.ShowHint="DesktopPWA"==a.aH),this.p5toast.HTMLEncode||(this.p5toast.HTMLEncode=this.HTMLEncode),this.p5key=new Mt(l=>{l.setup=()=>{l.noCanvas(),l.noLoop(),this.p5KeyShortCut={}},l.keyPressed=u=>{if(!this.BlockMainShortcut&&this.p5KeyShortCut){switch(u.code){case"Backspace":this.p5KeyShortCut.Backspace&&this.p5KeyShortCut.Backspace();break;case"Backquote":this.p5KeyShortCut.Backquote&&this.p5KeyShortCut.Backquote();break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":case"Digit0":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":case"Numpad6":case"Numpad7":case"Numpad8":case"Numpad9":case"Numpad0":if(this.p5KeyShortCut.Digit){const b=(Number(u.code.slice(-1))-1+10)%10;this.p5KeyShortCut.Digit(b)}break;case"KeyQ":case"KeyW":case"KeyE":case"KeyR":case"KeyT":this.p5KeyShortCut.BottomTab&&this.p5KeyShortCut.BottomTab(u.code.slice(-1));break;case"KeyA":this.p5KeyShortCut.AddAct&&this.p5KeyShortCut.AddAct();break;case"KeyS":this.p5KeyShortCut.SKeyAct&&this.p5KeyShortCut.SKeyAct(u);break;case"KeyD":this.p5KeyShortCut.DeleteAct&&this.p5KeyShortCut.DeleteAct(u);break;case"KeyF":this.p5KeyShortCut.FKeyAct&&this.p5KeyShortCut.FKeyAct();break;case"Escape":this.p5KeyShortCut.Escape&&this.p5KeyShortCut.Escape();break;case"KeyZ":case"KeyX":case"KeyC":case"KeyV":this.p5KeyShortCut.HistoryAct&&this.p5KeyShortCut.HistoryAct(u)}"Enter"===u.key&&this.p5KeyShortCut.EnterAct&&this.p5KeyShortCut.EnterAct(u)}}})}afterLangInit(s=!1){this.NeedBackgroundMode="DesktopPWA"!=a.aH,!s&&this.NeedBackgroundMode&&this.ToggleBackgroundMode()}RemoveAllModals(s=(()=>{})){var l=this;return(0,F.A)(function*(){let u="init";for(;u;)u=yield l.modalCtrl.getTop(),u&&(yield u.dismiss());s&&s()})()}CatchGETs(s){const l=s.split("?");if(l.length>1){const u=l[1].split("&");let b={};for(let T=0,O=u.length;T<O;T++){const U=u[T].split("=");b[U[0]]||(b[U[0]]=[]),b[U[0]].push(decodeURIComponent(U[1]))}return b}}readasQRCodeFromString(s){try{let l=new j({content:s,padding:4,width:8,height:8,color:tu?"#bbb":"#444",background:tu?"#111":"#fff",ecl:"M"}).svg();return this.sanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${btoa(l)}`)}catch(l){console.log("readasQRCodeFromString: ",l),this.p5toast.show({text:`${this.lang.text.GlobalAct.failed_to_gen_qr}: ${l}`})}}CreateGodotIFrame(s,l,u=!1){var b=this;return new Promise(function(){var T=(0,F.A)(function*(O){var U,Q;let oe=function(){var Pe=(0,F.A)(function*(){try{if("godot"!=window.godot)throw"No godot";if(!b.godot_window.start_load_pck)throw"No act ready";yield b.indexed.GetGodotIndexedDB(),O()}catch{setTimeout(()=>{oe()},1e3)}});return function(){return Pe.apply(this,arguments)}}();b.godot_window&&b.godot_window.quit_godot&&b.godot_window.quit_godot(),b.godot_window&&b.godot_window.quit_ionic&&u&&b.godot_window.quit_ionic(),null===(U=b.godot_splash)||void 0===U||U.remove(),null===(Q=b.godot)||void 0===Q||Q.remove(),window.godot="",Object.keys(b.GodotCache).forEach(De=>{URL.revokeObjectURL(b.GodotCache[De]),delete b.GodotCache[De]}),b.GodotCache.html="assets/html/index.html";try{if(!localStorage.getItem("useCache"))throw"\uc624\ud504\ub77c\uc778 \uce90\uc2dc \uc6b0\ud68c\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c";const tt=yield(yield fetch("assets/html/index.audio.worklet.js")).blob(),st=URL.createObjectURL(tt);b.GodotCache.audio=st;const $t=yield(yield fetch("assets/html/index.wasm")).blob(),Ct=URL.createObjectURL($t);b.GodotCache.wasm=Ct;const qt=yield(yield fetch("assets/html/index.pck")).blob(),Tt=URL.createObjectURL(qt);b.GodotCache.pck=Tt;const gn=yield(yield fetch("assets/html/index.png")).blob(),qn=URL.createObjectURL(gn);b.GodotCache.png=qn;let Jn=yield(yield fetch("assets/html/index.js")).text();Jn=Jn.replace("`${loadPath}.audio.worklet.js`",`'${st}'`).replace(/`\${loadPath}\.wasm`/g,`'${Ct}'`).replace("this.config.mainPack || `${exe}.pck`;",`'${Tt}'`);const gr=new Blob([Jn],{type:"application/javascript"}),Zn=URL.createObjectURL(gr);b.GodotCache.js=Zn;let tr=yield(yield fetch("assets/html/index.html")).text();tr=tr.replace('<script src="index.js"><\/script>',`<script src="${Zn}"><\/script>`).replace('src="index.png"',`src="${qn}"`);const qr=new Blob([tr],{type:"text/html"}),ei=URL.createObjectURL(qr);b.GodotCache.html=ei}catch(Pe){console.log("\uace0\ub3c4\uc5d4\uc9c4 \uc624\ud504\ub77c\uc778 \ud398\uc774\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",Pe)}let fe=document.createElement("iframe");fe.id="godot",fe.setAttribute("src",b.GodotCache.html),fe.setAttribute("frameborder","0"),fe.setAttribute("class","full_screen"),fe.setAttribute("allow","fullscreen; encrypted-media"),fe.setAttribute("scrolling","no"),fe.setAttribute("withCredentials","true"),s.indexOf("PostViewer_")>=0&&(fe.style.borderRadius="16px"),l.isMobile="DesktopPWA"!=a.aH,(s.indexOf("content_viewer_canvas")>=0||s.indexOf("avatar_sample")>=0)&&(l.create_thumbnail_p5=(Pe,De)=>{Object.keys(b.GodotCache).forEach(st=>{URL.revokeObjectURL(b.GodotCache[st]),delete b.GodotCache[st]}),new Mt(tt=>{tt.setup=()=>{tt.noCanvas(),tt.pixelDensity(1),tt.loadImage("data:image/png;base64,"+Pe,function(){var st=(0,F.A)(function*(nt){let $t=tt.createCanvas(nt.width,nt.height);tt.image(nt,0,0),tt.textSize(16),tt.textWrap(tt.CHAR);let Ct=tt.height/24;tt.push(),tt.translate(Ct/6,Ct/6),tt.fill(0),tt.text(b.godot_window.filename,Ct,Ct,tt.width-2*Ct,tt.height-2*Ct),tt.filter(tt.BLUR,3,!1),tt.pop(),tt.fill(255),tt.text(b.godot_window.filename,Ct,Ct,tt.width-2*Ct,tt.height-2*Ct);let Gt=$t.elt.toDataURL("image/png").replace("image/png","image/octet-stream");try{var qt,Tt;if(!(null!==(qt=b.godot_window)&&void 0!==qt&&qt.alt_path||null!==(Tt=b.godot_window)&&void 0!==Tt&&Tt.path))throw"\uacbd\ub85c \uc5c6\ub294 \ud30c\uc77c";yield b.indexed.saveBase64ToUserPath(Gt,`${b.godot_window.alt_path||b.godot_window.path}_thumbnail.png`),b.modulate_thumbnail(De,"")}catch(wt){console.log("p.saveFrames: ",wt)}tt.remove()});return function(nt){return st.apply(this,arguments)}}(),st=>{console.error("create_thumbnail_load thumbnail failed: ",st),tt.remove()})}})}),l.fullscr_tog=Pe=>{b.ArcadeWithFullScreen=null!=Pe?Pe:!b.ArcadeWithFullScreen};let ye,Me=50;yield new Promise(Pe=>{const De=()=>{ye=document.getElementById(s),ye?Pe(void 0):setTimeout(()=>{Me--,Me>0?De():Pe(void 0)},100)};De()}),ye.appendChild(fe),b.godot_window=fe.contentWindow||fe.contentDocument,Object.keys(l).forEach(Pe=>b.godot_window[Pe]=l[Pe]),b.godot=fe,yield oe()});return function(O){return T.apply(this,arguments)}}())}ToggleFullScreen(s){this.ArcadeWithFullScreen=null!=s?s:!this.ArcadeWithFullScreen;const l=document.documentElement;this.ArcadeWithFullScreen?l.requestFullscreen?l.requestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():l.msRequestFullscreen&&l.msRequestFullscreen():document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}CreateArcadeFrame(s){var l=this;return(0,F.A)(function*(){var b;yield l.AnonymousUserCreateName(),l.ArcadeLoaded=!0,l.ArcadeChatLog=null,l.arcadeChat.logs.length=0,l.arcadeChat.text="",l.noti.Current="arcade",l.ToggleChatInput=!1,"DesktopPWA"==a.aH?l.ArcadeWithFullScreen=!0:l.ToggleFullScreen(!0),yield l.CreateGodotIFrameWithDuplicateAct(s,"arcade_pck_loaded",{path:"tmp_files/duplicate/arcade.pck",force:!0,ws_send:b=>{var T;null===(T=l.ArcadeWS)||void 0===T||T.send(b)},webrtc_send:b=>{l.WebRTCService.send(b)},open_modal:()=>{l.GetHeaderAddress().then(b=>{l.ArcadeQRAddress=`${b}?token=${l.ArcadeWSAddress},${12013==l.ArcadeSquarePort?"":l.ArcadeSquarePort},${l.ArcadeSocketId}`,l.ArcadeQRCodeSRC=l.readasQRCodeFromString(l.ArcadeQRAddress),l.OpenArcadeQRCode()})},toggle_chat:b=>{l.ToggleChatInput=null!=b?b:!l.ToggleChatInput,l.ToggleChatInput?setTimeout(()=>{l.DomArcadeChatInput=document.getElementById("arcadeInput").childNodes[1].childNodes[1].childNodes[1],l.DomArcadeChatInput.onfocus=()=>{l.toggleBlockMainShortcut(!0),l.portalHint=!1,"DesktopPWA"!=a.aH&&document.fullscreenElement&&(l.ArcadeWithFullScreen=!1)},l.DomArcadeChatInput.onblur=()=>{l.toggleBlockMainShortcut(!1),l.portalHint=!0,"DesktopPWA"!=a.aH&&document.fullscreenElement&&(l.ArcadeWithFullScreen=!0)},l.DomArcadeChatInput.onpaste=T=>{var O;let U=[];for(const Q of T.clipboardData.files)U.push({file:Q});if(1==U.length)return null===(O=l.ArcadeSendAttachFunc)||void 0===O||O.call(l,{target:{files:[U[0].file]}},"arcade_chat"),!1},l.auto_scroll_down()},100):l.ClearSignals()},get_pid:()=>l.ArcadeWSPeerId,check_mobile:()=>"DesktopPWA"!=a.aH,kick_user:b=>{var T;null===(T=l.ArcadeWS)||void 0===T||T.send(JSON.stringify({type:"kick",pid:b}))},use_custom_character:(b=(0,F.A)(function*(){const T=l.ConvertPathToGodot("custom_characters"),O=yield l.indexed.GetFileListFromDB(T,l.indexed.godotDB);for(const Me of O)yield l.indexed.removeFileFromUserPath(Me,l.indexed.godotDB);const U="servers/self/avatar.pck",Q=l.ConvertPathToGodot("custom_characters/default.pck");if(!(yield l.indexed.checkIfFileExist(Q,l.indexed.godotDB))){const Ue=yield(yield fetch("assets/default.pck")).blob();yield l.indexed.saveBlobToUserPath(Ue,Q,l.indexed.godotDB)}if(yield l.indexed.checkIfFileExist(U)){const Me=yield l.indexed.loadBlobFromUserPath(U,"");yield l.indexed.saveBlobToUserPath(Me,l.ConvertPathToGodot(`custom_characters/${l.ArcadeWSPeerId}/character.pck`),l.indexed.godotDB);let Ue={blob:Me,filename:"character.pck",file_ext:"pck"};try{const Pe=l.ArcadeWSAddress.split("://"),De=`${"wss"==Pe[0]?"https":"http"}://${Pe[1]},${l.ArcadeCdnPort||9001},${l.ArcadeFilePort||9002}`,tt=(new Date).getTime(),st=`tmp_${l.ArcadeJoinedChannel}_${l.ArcadeWSPeerId}`;Ue.override_name=`${st.replace(/\//g,"_")}_${tt}_${Ue.filename}`,Ue.override_path="",Ue.override_filename=Ue.override_name,delete Ue.thumbnail;const nt=yield l.try_upload_to_user_custom_fs(Ue,st,void 0,l.lang.text.Arcade.Title,De);if(!nt)throw"\uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc \uc2e4\ud328";var ye;null===(ye=l.ArcadeWS)||void 0===ye||ye.send(JSON.stringify({type:"update",keys:["avatar_url"],avatar_url:nt}))}catch(Pe){console.log("\ud30c\uc77c \uc804\uc1a1 \uc2e4\ud328: ",Pe),l.p5toast.show({text:`${l.lang.text.Nakama.FailedUpload}: ${Pe}`})}}l.godot_window.after_use_custom_act()}),function(){return b.apply(this,arguments)})})})()}AnonymousUserCreateName(){var s=this;return(0,F.A)(function*(){s.CallbackNakama.users.self.display_name||(s.toggleBlockMainShortcut(!0),yield new Promise(function(){var l=(0,F.A)(function*(u){let b="";const T=yield s.alertCtrl.create({header:s.lang.text.Profile.name_placeholder,inputs:[{placeholder:s.lang.text.Profile.noname_user,type:"text"}],buttons:[{text:s.lang.text.UserFsDir.OK,handler:O=>{b=O[0]}}]});T.onDidDismiss().then(()=>{s.CallbackNakama.users.self.display_name=b,s.CallbackNakama.save_profile_to_server(),u(void 0)}),T.present()});return function(u){return l.apply(this,arguments)}}()),s.toggleBlockMainShortcut(!1))})()}ClearSignals(){this.DomArcadeChatInput&&(this.DomArcadeChatInput.onfocus=null,this.DomArcadeChatInput.onblur=null,this.DomArcadeChatInput.onpaste=null),this.DomArcadeChatInput=null,this.ArcadeChatLog=null}ConvertPathToGodot(s){return`godot/app_userdata/Client/${s}`}auto_scroll_down(s){this.ArcadeChatLog||(this.ArcadeChatLog=document.getElementById("arcadeChatLog")),this.ArcadeChatLog&&setTimeout(()=>{let l=this.ArcadeChatLog.scrollHeight;l<this.ArcadeChatLog.scrollTop+this.ArcadeChatLog.clientHeight+120&&this.ArcadeChatLog.scrollTo({top:l,behavior:"smooth"})},s||0)}CreateGodotIFrameWithDuplicateAct(s,l,u,b,T){var O=this;return(0,F.A)(function*(){if(O.ArcadeLoaded&&!u.force)O.p5toast.show({text:O.lang.text.Arcade.ArcadeOpened}),null==T||T();else{try{if(s.blob)throw"\uc900\ube44\ub41c blob \uc815\ubcf4";if(!s.url)throw"\ud30c\uc77c \uc815\ubcf4\uc5d0 URL\uc774 \uc5c6\uc74c";try{s.blob=yield O.downloadWithProgressAsBlob(s.url)}catch(oe){throw oe}}catch(oe){console.log("pck \uc5f4\ub78c \uc624\ub958: ",oe)}const U=O.ConvertPathToGodot(u.path);let Q=!1;if(O.indexed.godotDB)try{yield O.indexed.GetGodotIndexedDB(),yield O.indexed.saveBlobToUserPath(s.blob,U,O.indexed.godotDB),Q=!0}catch(oe){console.log("\ub0b4\ubd80 \ud30c\uc77c \uc5c6\uc74c: ",oe)}if(yield O.CreateGodotIFrame(l,u,!0),!Q){try{yield O.indexed.GetGodotIndexedDB(),yield O.indexed.saveBlobToUserPath(s.blob,U,O.indexed.godotDB)}catch{}yield O.CreateGodotIFrame(l,u)}null==b||b(),u.force&&(O.WebRTCService.dataChannelOnMsgAct=oe=>{O.godot_window&&O.godot_window.webrtc_recv&&O.godot_window.webrtc_recv(oe)}),O.godot_window.start_load_pck()}})()}downloadWithProgressAsBlob(s,l,u){var b=this;return(0,F.A)(function*(){let O=0;const U=s.split("/").pop(),Q=u||s;yield b.p5loading.update({id:Q,message:`${b.lang.text.Arcade.TryingDownload}: ${U}`});const oe=function(){var fe=(0,F.A)(function*(){try{const ye=yield fetch(s,{signal:null==l?void 0:l.signal}),Me=ye.headers.get("Content-Length");if(!Me)throw console.log("Content-Length not available"),`${ye.statusText} (${ye.status})`;const Ue=parseInt(Me,10);let Pe=0;const De=ye.body.getReader(),tt=[];for(;;){const{done:nt,value:$t}=yield De.read();if(nt)break;tt.push($t),Pe+=$t.length;const Ct=Pe/Ue;b.p5loading.update({id:Q,message:`${b.lang.text.Arcade.TryingDownload}: ${U}: ${(100*Ct).toFixed(1)}%`,progress:Ct}),yield new Promise(qt=>setTimeout(qt,0))}const st=new Blob(tt);return b.p5loading.remove(Q),st}catch{if(O<5)return O++,console.log(`Retry ${O} of 5...`),yield new Promise(Me=>setTimeout(Me,1e3)),oe();throw console.log("Max retries reached. Download failed."),b.p5loading.remove(Q),"Download failed after multiple retries."}});return function(){return fe.apply(this,arguments)}}();return oe()})()}ToggleBackgroundMode(s){var l,u,b;this.IsBackgroundMode=null!=s?s:!this.IsBackgroundMode,null===(l=this.BackgroundAudioDiv)||void 0===l||l.remove(),this.BackgroundAudioDiv=null,null===(u=this.BGModeAudio)||void 0===u||u.pause(),null===(b=this.BGModeAudio)||void 0===b||b.remove(),this.BGModeAudio=null,this.IsBackgroundMode?(this.windowOnFocusAct.bgmode=()=>{var T,O,U;this.WebRTCService.OnUse||(null===(T=this.BackgroundAudioDiv)||void 0===T||T.remove(),this.BackgroundAudioDiv=null,null===(O=this.BGModeAudio)||void 0===O||O.pause(),null===(U=this.BGModeAudio)||void 0===U||U.remove(),this.BGModeAudio=null)},this.WindowOnBlurAct.bgmode=()=>{this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio))},this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOn,progress:null,forceEnd:1e3})):(delete this.windowOnFocusAct.bgmode,delete this.WindowOnBlurAct.bgmode,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOff,progress:1,forceEnd:1e3}))}CreateInfoSocket(s){this.ArcadeUserInputAddress?(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var l;null===(l=this.ArcadeWS)||void 0===l||l.send(JSON.stringify({type:"initInfo",act:"arcade",url:s}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct()):this.p5toast.show({text:this.lang.text.Arcade.NoWSAddress})}CatchWebSocketAddressFromServerInfo(s){return`${s.useSSL?"wss":"ws"}://${s.address}`}CreateArcadeWSOnMsgAct(){var s=this;const u="arcade",b=()=>{this.noti.Current==u?window.focus():this.SelectArcadeTab()};this.ArcadeWS.onmessage=T=>{var O,U,Q;let oe;oe="string"==typeof T.data?T.data:T.data.text();try{let Me=JSON.parse(oe);switch(Me.type){case"text":{let De=Me.msg.split(" "),tt=[],st="";const nt=this.ArcadeWSPeerId==Me.uid,$t=nt?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,Ct=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";for(let qt=0,Tt=De.length;qt<Tt;qt++)0==De[qt].indexOf("http://")||0==De[qt].indexOf("https://")?(tt.push({text:" "+st+" "}),st="",tt.push({href:!0,text:De[qt]})):st+=" "+De[qt];st&&tt.push({text:" "+st}),this.arcadeChat.logs.push({color:Ct,text:tt,target:$t,isMe:nt}),this.noti.PushLocal({id:13,title:$t,body:Me.msg,bgcolor:Ct},u,b),this.auto_scroll_down()}break;case"file":{var fe,ye;const De=this.ArcadeWSPeerId==Me.uid,tt=De?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,st=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:st,file:Me,target:tt,isMe:De}),this.noti.PushLocal({id:13,title:tt,body:this.lang.text.MinimalChat.user_send_attach,image:"image"==(null===(fe=Me.info)||void 0===fe?void 0:fe.viewer)?null===(ye=Me.info)||void 0===ye?void 0:ye.url:void 0,bgcolor:st},u,b),this.auto_scroll_down()}break;case"req_info":this.ArcadeWSPeerId=Me.uid,this.ArcadeJoinedChannel=Me.channel_id;const Ue=Me.url;!function(){var De=(0,F.A)(function*(){try{var tt;s.SelectArcadeTab&&s.SelectArcadeTab();const st=yield s.downloadWithProgressAsBlob(Ue);yield s.CreateArcadeFrame({blob:st}),null===(tt=s.ArcadeWS)||void 0===tt||tt.send(JSON.stringify({type:"join",channel:Me.channel_id,name:s.CallbackNakama.users.self.display_name}))}catch(st){console.log("\ube60\ub978 \uc9c4\uc785 \uc2dc\uc791 \uc624\ub958: ",st)}});return function(){return De.apply(this,arguments)}}()();break;case"init_id":this.ArcadeJoinedChannel=Me.id,this.ArcadeWSPeerId=Me.uid,null===(O=this.afterInitAct)||void 0===O||O.call(this),this.ArcadeSocketId=Me.socketId,null===(U=this.ArcadeWS)||void 0===U||U.send(JSON.stringify({type:"join",channel:this.ArcadeJoinedChannel,name:this.CallbackNakama.users.self.display_name}));break;case"socket_react":switch(Me.act){case"WEBRTC_REPLY_INIT_SIGNAL":this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Reply),this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),"EOL"==Me.data_str&&(this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Offer),this.WebRTCService.CreateAnswer({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Ice);break;case"WEBRTC_REPLY_INIT_SIGNAL_PART":this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL_PART({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_ICE_CANDIDATES":this.WebRTCService.WEBRTC_ICE_CANDIDATES(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_datachannel),null===(Q=this.ArcadeWS)||void 0===Q||Q.send(JSON.stringify({type:"init_end",channel:this.ArcadeJoinedChannel}));break;case"WEBRTC_INIT_REQ_SIGNAL":this.WebRTCService.WEBRTC_INIT_REQ_SIGNAL({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_RECEIVE_ANSWER":this.WebRTCService.WEBRTC_RECEIVE_ANSWER(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})}break;case"join":{const tt=this.ArcadeWSPeerId==Me.uid?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,st=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_join}],target:tt,isSystem:!0}),this.noti.PushLocal({id:13,title:this.lang.text.MinimalChat.user_join,body:tt+` | ${this.lang.text.MinimalChat.user_join_comment}`,bgcolor:st},u,b),this.auto_scroll_down()}break;case"leave":{const tt=this.ArcadeWSPeerId==Me.uid?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,st=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_out}],target:tt,isSystem:!0}),this.noti.PushLocal({id:13,title:this.lang.text.MinimalChat.user_out,body:tt+` | ${this.lang.text.MinimalChat.user_out_comment}`,bgcolor:st},u,b),this.auto_scroll_down()}break;default:this.godot_window&&this.godot_window.ws_recv&&this.godot_window.ws_recv(oe)}}catch{}}}CreateArcadeWSCloseAct(){this.ArcadeWS.onerror=s=>{console.log("\uc544\ucf00\uc774\ub4dc \uc18c\ucf13 \uc624\ub958: ",s),this.ArcadeWS.close()},this.ArcadeWS.onclose=s=>{switch(s.reason){case"max_limit":this.p5toast.show({text:this.lang.text.MinimalChat.block});break;case"expired":this.p5toast.show({text:this.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",s.reason)}this.ArcadeSocketId=null,this.ArcadeWSPeerId=null,this.ArcadeJoinedChannel=null,this.WebRTCService.close_webrtc(),this.ArcadeQRAddress=null,this.ArcadeQRCodeSRC=null,this.ArcadeWS.onopen=null,this.ArcadeWS.onmessage=null,this.ArcadeWS.onclose=null,this.afterInitAct=null,this.ArcadeWS=null}}OpenArcadeQRCode(){this.ArcadeObject.QRCode.onDidDismiss().then(()=>{this.RestoreShortCutAct("arcade-qrcode")}),this.StoreShortCutAct("arcade-qrcode"),this.ArcadeObject.QRCode.present()}JoinArcadeWithSocketInfo(s){this.ArcadeWSAddress=s.address,this.ArcadeSquarePort=s.square_port,this.ArcadeCdnPort=s.cdn_port,this.ArcadeFilePort=s.apache_port,this.ArcadeSocketId=s.socketId,this.ArcadeWS?this.p5toast.show({text:this.lang.text.Arcade.AlreadyUseWS}):(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var l;null===(l=this.ArcadeWS)||void 0===l||l.send(JSON.stringify({type:"reqInfo",socketId:this.ArcadeSocketId}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct())}req_file_part_base64(s,l,u){let b="",T=new Uint8Array(s.contents.slice(l*lh,(l+1)*lh));for(let U=0,Q=T.byteLength;U<Q;U++)b+=String.fromCharCode(T[U]);let O=btoa(b);return this.indexed.saveTextFileToUserPath(JSON.stringify({type:"upload",index:l}),`${u}.history`),O}save_file_part(s,l,u){this.indexed.saveBase64ToUserPath(","+u,`${s}_part/${l}.part`),this.indexed.saveTextFileToUserPath(JSON.stringify({type:"download",index:l}),`${s}.history`)}remove_req_file_info(s,l){delete s.content.transfer_index,this.indexed.removeFileFromUserPath(`${l}.history`)}modulate_thumbnail(s,l,u){var b=this;return(0,F.A)(function*(){try{let T=yield b.indexed.loadBlobFromUserPath(`${s.path}_thumbnail.png`,"image/png");const O=URL.createObjectURL(T);return s.thumbnail=b.sanitizer.bypassSecurityTrustUrl(O),void setTimeout(()=>{URL.revokeObjectURL(O),l&&URL.revokeObjectURL(l)},100)}catch{}switch(s.viewer){case"image":try{if(s.size>1e6)return;if(!s.url)throw"No URL";if(s.thumbnail)return;if(!(yield fetch(s.url,{method:"HEAD",signal:null==u?void 0:u.signal})).ok)throw"Not ok";s.thumbnail=s.url}catch{l&&(s.thumbnail=b.sanitizer.bypassSecurityTrustUrl(l))}break;case"text":if(s.url){const T=yield fetch(s.url,{signal:null==u?void 0:u.signal}).then(O=>O.text());s.text=T.substring(0,45).split("\n")}else new Mt(T=>{T.setup=()=>{T.noCanvas(),T.loadStrings(l,O=>{const Q=O.join("\n").substring(0,45);s.text=Q.split("\n"),URL.revokeObjectURL(l),T.remove()},O=>{console.log("\ud14d\uc2a4\ud2b8 \uc5f4\ub78c \ubd88\uac00: ",O),s.text=[b.lang.text.ChatRoom.downloaded],URL.revokeObjectURL(l),T.remove()})}})}l&&setTimeout(()=>{URL.revokeObjectURL(l)},100)})()}set_viewer_category(s){try{if(this.set_viewer_category_from_ext(s),"disabled"==s.viewer)if(0==s.type.indexOf("image/"))s.viewer="image";else if(0==s.type.indexOf("audio/"))s.viewer="audio";else if(0==s.type.indexOf("video/"))s.viewer="video";else{if(0!=s.type.indexOf("text/"))throw"\uc790\ub3d9\uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \ud0c0\uc785";s.viewer="text"}}catch(l){console.log("\ubd88\ud655\uc2e4\ud55c \ud0c0\uc785 \uc9c0\uc815: ",l,"/ type: ",s.type)}}set_viewer_category_from_ext(s){switch(s.file_ext){case"obj":case"stl":case"glb":case"gltf":s.viewer="model";break;case"pck":s.viewer="godot";break;case"png":case"jpeg":case"jpg":case"webp":case"gif":case"svg":s.viewer="image";break;case"wav":case"ogg":case"mp3":case"aac":s.viewer="audio";break;case"mp4":case"ogv":s.viewer="video";break;case"webm":try{s.viewer=0==s.type.indexOf("video/")?"video":"audio"}catch(l){console.log("\ud30c\uc77c \ud655\uc7a5\uc790 \uac80\ud1a0 \uc624\ub958: ",l,"/",s),s.viewer="disabled"}break;case"sh":case"c":case"cs":case"ts":case"js":case"cc":case"php":case"h":case"cpp":case"rs":case"java":case"gd":case"shader":case"py":case"ino":case"pde":case"asm":case"bas":case"pas":case"asp":case"html":case"xml":case"css":case"scss":case"pl":case"md":case"markdown":case"prop":case"properties":case"json":case"yml":s.viewer="code";break;case"csv":case"conf":case"log":case"txt":case"gitignore":s.viewer="text";break;case"pdf":s.viewer="pdf";break;default:s.viewer="disabled"}}GetBase64ThroughFileReader(s){return new Promise((l,u)=>{var b;let T=new FileReader;T=null!==(b=T._realReader)&&void 0!==b?b:T,T.onload=O=>{T.onload=null,T.onerror=null,l(O.target.result.replace(/"|\\|=/g,""))},T.onerror=O=>{T.onload=null,T.onerror=null,u(O)},T.readAsDataURL(s)})}Base64ToBlob(s,l=""){const u=atob(s.split(",")[1]),b=new ArrayBuffer(u.length),T=new Int8Array(b);for(let U=0,Q=u.length;U<Q;U++)T[U]=u.charCodeAt(U);return new Blob([T],{type:l})}upload_file_to_storage(s,l,u,b,T,O,U){var Q=this;return(0,F.A)(function*(){const oe=O||`upload_file_to_storage_${Date.now()}`;let ye,Me,fe=!1;T&&(ye=yield Q.try_upload_to_user_custom_fs(s,null==l?void 0:l.user_id,oe,U));try{var Ue;if(ye)throw fe=!0,"\uc0ac\uc6a9\uc790 \uc9c0\uc815\uc11c\ubc84\uc5d0\uc11c \uc774\ubbf8 \uc131\uacf5\ud568";const Pe=(new Date).getTime(),tt=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),st=s.override_name||`${null==l?void 0:l.user_id.replace(/\//g,"_")}_${Pe}_${tt}.${s.file_ext}`,nt=null!==(Ue=s.override_path)&&void 0!==Ue?Ue:`${null==l?void 0:l.user_id}/${Pe}`.replace(/_/g,"/");ye=`${u}//${b}:${(null==l?void 0:l.apache_port)||9002}/cdn/`;const $t=st.replace(/\//g,"_");Me=setInterval((0,F.A)(function*(){try{const gn=yield fetch(`${u}//${b}:${(null==l?void 0:l.cdn_port)||9001}/filesize/${$t}`,{method:"POST"}),Vn=Number(yield gn.text())/s.size,Jn=Math.floor(100*Vn);Q.p5loading.update({id:oe,message:`${U?U+": ":""}${s.filename}: ${Jn||0}%`,progress:Vn})}catch(gn){console.log("\ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",gn)}}),700);let Ct=new FormData;const Gt=new File([s.blob],st);Ct.append("files",Gt),Ct.append("path",nt),Ct.append("filename",s.override_filename||`${tt}.${s.file_ext}`);let qt=yield fetch(`${u}//${b}:${(null==l?void 0:l.cdn_port)||9001}/cdn/${st}`,{method:"POST",body:Ct});if(ye+=(yield qt.text()),!qt.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";Q.p5loading.update({id:oe,message:`${U?U+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(Me);const wt=yield fetch(ye,{method:"HEAD"});if(O||Q.p5loading.remove(oe),!wt.ok)throw"\uc694\uccad \uc2e4\ud328";fe=!0}catch(Pe){clearInterval(Me),Q.p5loading.update({id:oe,message:`${Q.lang.text.GlobalAct.CancelingUpload}: ${s.filename}`,forceEnd:350}),console.log("cdn \ud30c\uc77c \uc5c5\ub85c\ub4dc \ub2e8\uacc4 \uc2e4\ud328:",Pe)}return fe?ye:void 0})()}remove_file_from_storage(s,l){return(0,F.A)(function*(){try{let u=s.split("/cdn/"),b=u.pop(),T=u.shift(),O=T.lastIndexOf(":");O>5&&(T=T.substring(0,O)),yield fetch(`${T}:${(null==l?void 0:l.cdn_port)||9001}/remove/${b}`,{method:"POST"})}catch(u){console.log("remove_file_from_storage: ",u)}})()}remove_files_from_storage_with_key(s,l,u){return(0,F.A)(function*(){try{if(!s)throw"\ub300\uc0c1 \uc8fc\uc18c \uc5c6\uc74c";let b=s.lastIndexOf(":");b>5&&(s=s.substring(0,b)),yield fetch(`${s}:${(null==u?void 0:u.cdn_port)||9001}/remove_key/${l}`,{method:"POST"})}catch(b){throw console.log("remove_files_from_storage_with_key: ",b),b}})()}try_upload_to_user_custom_fs(s,l,u,b,T){var O=this;return(0,F.A)(function*(){var U;const Q=u||`try_upload_to_user_custom_fs_${Date.now()}`;yield O.p5loading.update({id:Q,message:`${O.lang.text.Settings.TryToFallbackFS}: ${s.filename}`,progress:null});const oe=(new Date).getTime(),ye=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),Me=s.override_name||`${l.replace(/\//g,"_")}_${oe}_${ye}.${s.file_ext}`,Ue=null!==(U=s.override_path)&&void 0!==U?U:`${l}/${oe}`.replace(/_/g,"/");let Pe=new FormData;const De=new File([s.blob],Me);let tt;Pe.append("files",De),Pe.append("path",Ue),Pe.append("filename",s.override_filename||`${ye}.${s.file_ext}`),T||(T=localStorage.getItem("fallback_fs"));try{if(!T)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";const st=T.split(","),nt=st.shift(),$t=st.shift(),Ct=st.shift(),Gt=nt.split("://"),qt=Gt.pop();let Tt=Gt.shift();Tt?Tt+=":":Tt=O.checkProtocolFromAddress(qt)?"https:":"http:";let wt=`${Tt}//${qt}:${Ct||9002}/cdn/`;const gn=Me.replace(/\//g,"_");tt=setInterval((0,F.A)(function*(){try{const gr=yield fetch(`${Tt}//${qt}:${$t||9001}/filesize/${gn}`,{method:"POST"}),Lr=Number(yield gr.text())/s.size,tr=Math.floor(100*Lr);O.p5loading.update({id:Q,message:`${b?b+": ":""}${s.filename}: ${tr||0}%`,progress:Lr})}catch(gr){console.log("FFS \ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",gr)}}),700);const qn=yield fetch(`${Tt}//${qt}:${$t||9001}/cdn/${Me}`,{method:"POST",body:Pe});if(wt+=(yield qn.text()),!qn.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";O.p5loading.update({id:Q,message:`${b?b+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(tt);const Jn=yield fetch(wt,{method:"HEAD"});if(u||O.p5loading.remove(Q),Jn.ok)return wt;throw"\uc694\uccad \uc2e4\ud328"}catch{return clearInterval(tt),void O.p5loading.remove(Q)}})()}GetHrefThumbnail(s,l,u){var b=this;return(0,F.A)(function*(){let T=null;0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(b.checkProtocolFromAddress(s)?"https://":"http://")+s);try{let U=localStorage.getItem("fallback_fs").split("://"),Q=U.shift(),fe=U.pop().split(":").pop();if(!fe)throw"\uc9c0\uc815\ub41c FFS \uc5c6\uc74c";let ye=yield fetch(`${Q||b.checkProtocolFromAddress(fe)?"https":"http"}://${fe}:9001/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!ye.ok)throw"FFS \uc6b0\ud68c \uc2e4\ud328";T=yield ye.json()}catch{if(!l)throw"\ub300\uc0c1 \uc11c\ubc84 \uc5c6\uc74c";try{let U=yield fetch(`${l}/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!U.ok)throw`${U.statusText} (${U.status})`;T=yield U.json()}catch(U){console.log("GetHrefThumbnail: ",U)}}return T})()}checkProtocolFromAddress(s){return!!s.replace(/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/g,"")}load_openmodel_file(s,l,u,b,T){var O=this;return(0,F.A)(function*(){return yield new Promise((U,Q)=>{const oe=b.createDiv();oe.style("width","100%"),oe.style("height","100%"),oe.parent(s);const fe=b.createDiv();let ye;fe.style("position","absolute"),fe.style("top","0px"),fe.style("right","0px"),fe.style("margin","8px"),fe.style("display","flex"),fe.style("width","fit-content"),fe.style("flex-direction","column"),fe.style("gap","8px"),fe.parent(s);const Me=b.createButton(O.lang.text.GlobalAct.ToggleWireframe);let Ue;Me.style("padding","8px"),Me.style("border-radius","8px"),Me.style("size","16px"),Me.style("width","100%"),Me.style("background-color","#888b"),Me.style("color","white"),Me.mouseClicked(()=>{var Er;null===(Er=ye)||void 0===Er||Er()}),Me.parent(fe);const Pe=b.createButton(O.lang.text.GlobalAct.ToggleSkeleton);Pe.style("padding","8px"),Pe.style("border-radius","8px"),Pe.style("size","16px"),Pe.style("width","100%"),Pe.style("background-color","#888b"),Pe.style("color","white"),Pe.mouseClicked(()=>{var Er;null===(Er=Ue)||void 0===Er||Er()}),Pe.parent(fe),Pe.hide();const De=b.createDiv();De.style("position","absolute"),De.style("top","0px"),De.style("left","0px"),De.style("margin","8px"),De.style("display","flex"),De.style("width","fit-content"),De.style("flex-direction","column"),De.style("gap","2px"),De.style("pointer-events","none"),De.style("color","white"),De.parent(s),De.hide();const tt=b.createDiv();tt.parent(De);const st=b.createDiv();st.parent(De);const nt=b.createDiv();nt.parent(De);let $t,Ct=[],Gt=!1;const Tt=T||"openmodel",wt=s.clientWidth,gn=s.clientHeight,qn=new co(70,wt/gn,.01,50);qn.position.set(1,1,3),qn.lookAt(new mt);const Vn=new Co,Jn=new Sr(4473924);Vn.background=Jn;const gr=new Lv(16777215,1);Vn.add(gr);const Zn=new Dg(10,10,12303291);Vn.add(Zn);const Lr=new I1(1);Vn.add(Lr);const tr=new Ov(16777215,3);tr.position.set(5,5,5),Vn.add(tr),tr.shadow.bias=-.005,tr.shadow.mapSize.width=512,tr.shadow.mapSize.height=512;const qr=new Ig(tr,2);let mi;switch(Vn.add(qr),new py(qn,oe.elt).autoRotate=!0,l.file_ext){case"obj":mi=new z_;break;case"stl":mi=new $_;break;default:mi=new ww}mi.load(u,Er=>{let zr;switch(O.p5loading.remove(Tt),l.file_ext){case"obj":zr=Er,Vn.add(zr),Pe.remove();break;case"stl":const ui=new Fo({color:22015});zr=new cs(Er,ui),Vn.add(zr),Pe.remove();break;default:zr=Er.scene,Vn.add(zr);let Oi=!1;if(zr.traverse(Zr=>{Zr.isSkinnedMesh&&(Oi=!0)}),Oi){Pe.show();const Zr=new Cg(zr);Zr.visible=!1,Vn.add(Zr),Ue=()=>{Zr.visible=!Zr.visible}}else Pe.remove();Er.animations&&Er.animations.length>0&&($t=new qv(zr),(Er=>{const zr=b.createDiv();zr.style("overflow","hidden"),zr.style("width","100%"),zr.style("height","fit-content"),zr.style("border-radius","8px"),zr.parent(fe);const Nr=b.createDiv();Nr.style("display","flex"),Nr.style("width","100%"),Nr.style("height","fit-content"),Nr.style("max-height","160px"),Nr.style("overflow-y","auto"),Nr.style("flex-direction","column"),Nr.style("gap","0px"),Nr.style("color","white"),Nr.style("size","16px"),Nr.parent(zr);const ui=b.createButton(O.lang.text.GlobalAct.PlayAnim);ui.style("background-color","#888b"),ui.style("padding","8px"),ui.parent(Nr),ui.mouseClicked(()=>{Gt=!Gt;for(let Oi=0,Zr=Ct.length;Oi<Zr;Oi++)Gt?Ct[Oi].show():Ct[Oi].hide()});for(let Oi=0,Zr=Er.length;Oi<Zr;Oi++){const rs=b.createButton(Er[Oi].name);rs.style("background-color","#666b"),rs.style("padding","8px"),rs.mouseClicked(()=>{$t.stopAllAction(),$t.clipAction(Er[Oi]).play()}),rs.hide(),rs.parent(Nr),Ct.push(rs)}})(Er.animations))}{let ui=0,Oi=0,Zr=0;Vn.traverse(rs=>{if(rs.isMesh){ui++;const kr=rs.geometry;kr.isBufferGeometry?(Oi+=kr.attributes.position.count,Zr+=kr.index?kr.index.count/3:kr.attributes.position.count/3):kr.isGeometry&&(Oi+=kr.vertices.length,Zr+=kr.faces.length)}}),tt.html(`Objects: ${ui}`),st.html(`Vertices: ${Oi}`),nt.html(`Triangles: ${Zr}`)}ye=()=>{let ui;zr.traverse(Oi=>{Oi.isMesh&&(Oi.material.wireframe=!Oi.material.wireframe,ui=Oi.material.wireframe)}),ui?De.show():De.hide()},U({resized:()=>{try{qn.aspect=s.clientWidth/s.clientHeight,qn.updateProjectionMatrix(),yr.setSize(s.clientWidth,s.clientHeight)}catch(ui){console.log("\ubaa8\ub378\ud30c\uc77c_\ud654\uba74 \ud06c\uae30 \ubcc0\uacbd \uc624\ub958: ",ui)}},snapshot:()=>yr.domElement.toDataURL("image/png")})},Er=>{const zr=Er.loaded/Er.total;O.p5loading.update({id:Tt,message:`${O.lang.text.ContentViewer.OnLoadContent}: ${l.filename||l.name} (${Math.floor(100*zr)}%)`,progress:zr})},Er=>{O.p5loading.update({id:Tt,message:`${O.lang.text.ContentViewer.OnFailedLoadContent}: ${Er}`,progress:null,forceEnd:500}),Q(Er)});let qi=0;const yr=new y_({antialias:!0,preserveDrawingBuffer:!0});yr.setSize(wt,gn),yr.setAnimationLoop(Er=>{var zr;const Nr=(Er-qi)/1e3;qi=Er,null===(zr=$t)||void 0===zr||zr.update(Nr),yr.render(Vn,qn)}),yr.shadowMap.enabled=!0,yr.shadowMap.type=E,oe.elt.appendChild(yr.domElement)})})()}StoreShortCutAct(s){this.CacheShortCut[s]=this.p5KeyShortCut,this.p5KeyShortCut={}}GetConnectedAddress(){return`${location.protocol}//${location.host}${window.sub_path}`}GetHeaderAddress(){var s=this;return(0,F.A)(function*(){let l;try{if(s.CustomLocalAddress)return s.CustomLocalAddress;if(!s.useLocalAddress)throw"\uac15\uc81c\ub85c github \uc8fc\uc18c \ubc1c\uc0dd\uc2dc\ud0a4\uae30";let u=s.GetConnectedAddress(),b=new AbortController;const T=setTimeout(()=>{b.abort("\uc8fc\uc18c \uac80\ud1a0 \uc2dc\uac04 \ucd08\uacfc"),b=null},250);let O=yield fetch(u,{method:"HEAD",signal:b.signal});if(clearTimeout(T),!O.ok)throw"\uc8fc\uc18c \uc5c6\uc74c";l=u}catch{l="https://is2you2.github.io/pjcone_pwa/"}return l})()}RestoreShortCutAct(s){this.CacheShortCut[s]&&Object.keys(this.CacheShortCut[s]).length&&(this.p5KeyShortCut=this.CacheShortCut[s]),delete this.CacheShortCut[s]}ClearShortCutAct(){let s=Object.keys(this.CacheShortCut);for(let l of s)delete this.CacheShortCut[l]}from_camera(s,l,u){var b=this;return(0,F.A)(function*(){const T=u||`from_camera_${Date.now()}`;let O={};b.p5loading.update({id:T,message:b.lang.text.ChatRoom.LoadImageFromCamera});try{const U=yield I.getPhoto({quality:90,resultType:C.Base64,source:q.Camera});O.filename=`Camera_${(new Date).toLocaleString().replace(/[:|.|\/]/g,"_")}.${U.format}`,O.file_ext=U.format,O.base64="data:image/jpeg;base64,"+U.base64String,b.p5loading.update({id:T,image:O.base64}),O.thumbnail=b.sanitizer.bypassSecurityTrustUrl(O.base64),O.type=`image/${U.format}`,O.typeheader="image",O.content_related_creator=[{user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"camera"}],O.content_creator={user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"camera"},O.path=`${s}${O.filename}`,O.viewer="image";let oe=yield b.indexed.saveBase64ToUserPath(O.base64,O.path);O.blob=new Blob([oe],{type:O.type}),O.size=O.blob.size}catch(U){throw b.p5loading.update({id:T,message:`${b.lang.text.GlobalAct.ErrorFromCamera}: ${U}`,image:null}),console.log("\uce74\uba54\ub77c \ud589\ub3d9 \uc2e4\ud328: ",U),U}return b.p5loading.remove(T),O})()}selected_blobFile_callback_act(s,l,u,b="loaded",T=[]){let O={};return O.filename=s.name,O.file_ext=s.name.split(".").pop()||s.type||this.lang.text.ChatRoom.unknown_ext,O.size=s.size,O.type=s.type||s.type_override,O.path=`${l}${O.filename}`,O.blob=s,O.content_related_creator=[...T,{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:b}],O.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:b},this.set_viewer_category(O),O}voidDraw_fileAct_callback(s,l,u,b){var T=this;return(0,F.A)(function*(){let O={};O.filename=s.data.name,O.file_ext=s.data.file_ext||"png",O.type=s.data.type||"image/png",O.viewer="image",b?(O.content_related_creator=b,O.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}):(O.content_related_creator=[{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}],O.content_creator={timestamp:(new Date).getTime(),display_name:T.CallbackNakama.users.self.display_name,various:"voidDraw"}),O.typeheader="image",O.path=`${l}${O.filename}`;const U=URL.createObjectURL(s.data.img);O.thumbnail=T.sanitizer.bypassSecurityTrustUrl(U),yield T.indexed.saveBlobToUserPath(s.data.img,O.path);const Q=new Blob([s.data.img],{type:O.type});return O.blob=new File([Q],s.data.name),O.size=O.blob.size,T.p5loading.remove(s.data.loadingCtrl),setTimeout(()=>{URL.revokeObjectURL(U)},2500),O})()}TextEditorNewFileName(){let s=new Date;return`texteditor_${s.getUTCFullYear()}-${("0"+(s.getMonth()+1)).slice(-2)}-${("0"+s.getDate()).slice(-2)}_${("0"+s.getHours()).slice(-2)}-${("0"+s.getMinutes()).slice(-2)}-${("0"+s.getSeconds()).slice(-2)}.txt`}TextEditorAfterAct(s,l){let u={};return"html"===(u.content_creator={user_id:l.user_id,timestamp:(new Date).getTime(),display_name:l.display_name,various:"textedit"},u.content_related_creator=[],u.content_related_creator.push(u.content_creator),u.blob=s.blob,u.path=s.path,u.size=s.blob.size,u.filename=s.blob.name||this.TextEditorNewFileName(),u.file_ext=u.filename.split(".").pop(),u.viewer="text",u.file_ext)?(u.type="text/html",u.viewer="code"):u.type="text/plain",u.typeheader="text",u}open_custom_site(s,l){try{let O,u=s.split("://"),T=u.pop().split(":");T.length>1&&T.pop();try{O="https"==u[0]||"wss"==u[0]}catch{O=this.checkProtocolFromAddress(T[0])}T[0]="//"+T[0],T.unshift(O?"https":"http"),window.open(T.join(":")+`:${l||9001}`,"_blank")}catch{}}open_link(s){0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(this.checkProtocolFromAddress(s)?"https://":"http://")+s),s&&window.open(s,"_blank");const l=document.activeElement;l&&l.blur()}GetValueFromClipboard(s){var l=this;return(0,F.A)(function*(){let u={type:"text/plain",value:""};const b=s||"clipboardAct";yield l.p5loading.update({id:b,message:l.lang.text.GlobalAct.ClipboardPaste,image:null,forceEnd:null});try{const T=yield navigator.clipboard.read();for(let O of T)for(let U of O.types){let Q=yield O.getType(U);if("image/png"==U){u.type=U;let oe=new File([Q],"image.png",{type:U});u.value=oe;const fe=URL.createObjectURL(oe);l.p5loading.update({id:b,image:fe}),setTimeout(()=>{URL.revokeObjectURL(fe)},100);break}if("text/plain"==U){u.type=U,u.value=yield Q.text();break}}return l.p5loading.remove(b),u}catch(T){return console.error("\ud074\ub9bd\ubcf4\ub4dc\uc5d0\uc11c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",T),l.p5toast.show({text:`${l.lang.text.GlobalAct.FailedToReadClipboard}: ${T}`}),u.type="error",u.value=T,l.p5loading.remove(b),u}})()}WriteValueToClipboard(s,l,u,b){var T=this;return(0,F.A)(function*(){if(!l)return;const O=b||"clipboardAct";yield T.p5loading.update({id:O,message:T.lang.text.GlobalAct.ClipboardCopy,image:null,forceEnd:null});try{let U={},Q=l;switch(s){case"text/plain":Q=new Blob([l],{type:s}),l=T.truncateString(l,80);break;case"image/png":const oe=URL.createObjectURL(Q);T.p5loading.update({id:O,image:oe}),setTimeout(()=>{URL.revokeObjectURL(oe)},100)}U[s]=Q,yield navigator.clipboard.write([new ClipboardItem(U)]),T.p5loading.update({id:O,message:`${T.lang.text.GlobalAct.PCClipboard}: ${u||l}`}),T.p5loading.remove(O)}catch(U){throw console.log("\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud558\uae30 \uc624\ub958: ",U),T.p5toast.show({text:`${T.lang.text.GlobalAct.ClipboardFailed}: ${U}`}),T.p5loading.update({id:O,forceEnd:350}),U}})()}truncateString(s,l){return(null==s?void 0:s.length)>l?s.slice(0,l-1)+"\u2026":s}HTMLEncode(s){let l=(s=[...s]).length,u=[];for(;l--;){let b=s[l].codePointAt(0);u[l]=b<65||b>127||b>90&&b<97?"&#"+b+";":s[l]}return u.join("")}HTMLDecode(s){const l={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};return(s=s.replace(/&[a-zA-Z]+;/g,u=>l[u]||u)).replace(/&#(\d+);/g,(u,b)=>String.fromCodePoint(Number(b)))}StopAndSaveVoiceRecording(){var s=this;return(0,F.A)(function*(){try{let l=yield D.R.stopRecording();s.useVoiceRecording=null;let u=s.Base64ToBlob(`${l.value.mimeType},${l.value.recordDataBase64}`);return u.name=`${s.lang.text.ChatRoom.VoiceRecord}.${l.value.mimeType.split("/").pop().split(";")[0]}`,u.type_override=l.value.mimeType,u}catch(l){throw s.useVoiceRecording=null,s.p5toast.show({text:`${s.lang.text.AddPost.FailedToSaveVoice}:${l}`}),l}})()}InstantCallSend(s){this.InstantCallWSClient&&this.InstantCallWSClient.readyState==this.InstantCallWSClient.OPEN&&this.InstantCallWSClient.send(s)}ActLikeModal(s,l){this.RemoveAllModals(()=>{this.navCtrl.navigateForward(s,{animation:Jt.V5,state:l})})}}return(y=t).\u0275fac=function(s){return new(s||y)(Lc.KVO(ah.W3),Lc.KVO(Uw.G),Lc.KVO(Bw.y),Lc.KVO(Vw.up),Lc.KVO(Gw.n),Lc.KVO(ah.hG),Lc.KVO(Fw.q9),Lc.KVO(zw.f),Lc.KVO($w.r))},y.\u0275prov=Lc.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),t})()},755:(br,kn,je)=>{"use strict";je.d(kn,{n:()=>a});var F=je(467),j=je(3953),Mt=je(9900),Jt=je(4234);let a=(()=>{var _e;class q{constructor(C,_){this.p5toast=C,this.lang=_}initialize(C=(()=>{})){if(this.ionicDB)return void C();let _=indexedDB.open("/ionicfs",10),w=()=>{_.onsuccess=null,_.onupgradeneeded=null,_.onerror=null};_.onsuccess=I=>{I.target.result.close(),indexedDB.open("/ionicfs",11).onsuccess=f=>{this.ionicDB=f.target.result,C(),w()}},_.onupgradeneeded=I=>{I.target.result.createObjectStore("FILE_DATA")},_.onerror=I=>{indexedDB.open("/ionicfs",11).onsuccess=d=>{this.ionicDB=d.target.result,C(),w()}}}GetGodotIndexedDB(){var C=this;return(0,F.A)(function*(){if(!C.godotDB)return new Promise((_,w)=>{let I=indexedDB.open("/userfs",21),D=()=>{I.onsuccess=null,I.onerror=null};I.onsuccess=d=>{C.godotDB=I.result,D(),_(void 0)},I.onerror=d=>{console.error("IndexedDB initialized failed: ",d),D(),w(d)}})})()}createRecursiveDirectory(C,_=this.ionicDB){let w=C.lastIndexOf("/"),I=C.substring(0,w);I&&this.checkIfFileExist(I).then(D=>{if(D)return void this.createRecursiveDirectory(I,_);let d=_.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${I}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),this.createRecursiveDirectory(I,_),f()},d.onerror=h=>{console.error("IndexedDB createRecursiveDirectory failed: ",h),f()}})}createDirectory(C){return new Promise((_,w)=>{this.checkIfFileExist(C).then(I=>{I&&w(this.lang.text.UserFsDir.AlreadyExistFolder);let D=this.ionicDB.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${C}`),d=()=>{D.onsuccess=null,D.onerror=null};D.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),d(),_(void 0)},D.onerror=f=>{console.error("IndexedDB createRecursiveDirectory failed: ",f),d(),w(f)}})})}saveTextFileToUserPath(C,_,w=this.ionicDB){return this.createRecursiveDirectory(_,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:(new TextEncoder).encode(C)},`/userfs/${_}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",_),f(),I(h)},d.onerror=h=>{f(),D(h)}})}saveBase64ToUserPath(C,_,w=this.ionicDB){return new Promise((I,D)=>{let d=atob(C.split(",")[1]),f=new ArrayBuffer(d.length),h=new Int8Array(f);for(let g=0,v=d.length;g<v;g++)h[g]=d.charCodeAt(g);this.createRecursiveDirectory(_,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${_}`);p.onsuccess=g=>{"success"!=g.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",_),p.onsuccess=null,p.onerror=null,I(h)},p.onerror=g=>{p.onsuccess=null,p.onerror=null,D(g)}})}saveInt8ArrayToUserPath(C,_,w=this.ionicDB){return new Promise((I,D)=>{this.createRecursiveDirectory(_,w);let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:C},`/userfs/${_}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",_),d.onsuccess=null,d.onerror=null,I()},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}saveBlobToUserPath(C,_,w=this.ionicDB){var I=this;return new Promise(function(){var D=(0,F.A)(function*(d,f){let h;try{let g=yield C.arrayBuffer();h=new Int8Array(g)}catch(g){f(g)}I.createRecursiveDirectory(_,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${_}`);p.onsuccess=g=>{"success"!=g.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",_),p.onsuccess=null,p.onerror=null,d(h)},p.onerror=g=>{p.onsuccess=null,p.onerror=null,f(g)}});return function(d,f){return D.apply(this,arguments)}}())}saveFileToUserPath(C,_,w=this.ionicDB){return this.createRecursiveDirectory(_,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put(C,`/userfs/${_}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",_),d.onsuccess=null,d.onerror=null,I(f)},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}checkIfFileExist(C,_=this.ionicDB){return new Promise((w,I)=>{let D=_.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").count(`/userfs/${C}`);D.onsuccess=d=>{let f=d.target.result;D.onsuccess=null,D.onerror=null,w(f)},D.onerror=d=>{D.onsuccess=null,D.onerror=null,I(d)}})}GetFileListFromDB(C,_=this.ionicDB){let w=_.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").getAllKeys();return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;for(let h=f.length-1;h>=0;h--)f[h].includes(C)?f[h]=f[h].substring(8):f.splice(h,1);w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}GetFileInfoFromDB(C,_=this.ionicDB){let w=_.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}loadTextFromUserPath(C,_=((I,D)=>{}),w=this.ionicDB){return new Promise(I=>{let D=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{if(d.target.result){let f=(new TextDecoder).decode(d.target.result.contents);D.onsuccess=null,D.onerror=null,_(!0,f),I(f)}else D.onsuccess=null,D.onerror=null,_(!1,`No file: , ${C}`),I(void 0)},D.onerror=d=>{console.error("IndexedDB loadTextFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null,I(void 0)}})}loadBlobFromUserPath(C,_,w=this.ionicDB){let I=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((D,d)=>{I.onsuccess=f=>{try{let h=new Blob([f.target.result.contents],{type:_});I.onsuccess=null,I.onerror=null,D(h)}catch(h){I.onsuccess=null,I.onerror=null,d(h)}},I.onerror=f=>{I.onsuccess=null,I.onerror=null,d(f)}})}DownloadFileFromUserPath(C,_,w,I=this.ionicDB){let D=I.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{try{let f=new Blob([d.target.result.contents],{type:_}),h=URL.createObjectURL(f),p=document.createElement("a");p.download=w,p.href=h,document.body.appendChild(p),p.click(),document.body.removeChild(p),p.remove(),URL.revokeObjectURL(h)}catch(f){console.error("DownloadFileFromUserPath: ",f),this.p5toast.show({text:`${this.lang.text.IndexedDB.FailedToDownloadFile}: ${f}`})}D.onsuccess=null,D.onerror=null},D.onerror=d=>{console.error("IndexedDB DownloadFileFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null}}removeFileFromUserPath(C,_=this.ionicDB){let w=_.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").delete(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{w.onsuccess=null,w.onerror=null,I(d)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}}return(_e=q).\u0275fac=function(C){return new(C||_e)(j.KVO(Mt.G),j.KVO(Jt.y))},_e.\u0275prov=j.jDH({token:_e,factory:_e.\u0275fac,providedIn:"root"}),q})()},4234:(br,kn,je)=>{"use strict";je.d(kn,{y:()=>a});var F=je(467),j=je(8326),Jt=je(3953);let a=(()=>{var _e;class q{constructor(){this.text={Portal:{},Main:{},Arcade:{},Subscribes:{},ChatRoom:{},Profile:{},GroupServer:{},Settings:{},Community:{},MinimalChat:{},voidDraw:{},PostViewer:{},TodoDetail:{},InstantCall:{},ContentViewer:{},WebRTCDevManager:{}},this.setable=[],this.lang=navigator.language.split("-")[0];let C=localStorage.getItem("lang");C&&(this.lang=C)}load_selected_lang(C="assets/data/translate.csv"){var _=this;return(0,F.A)(function*(){return yield new Promise((w,I)=>{new j(D=>{D.setup=()=>{D.noCanvas(),D.loadTable(C,"csv","header",d=>{try{let h,f=Object.keys(d.rows[0].obj);_.setable.length=0;for(let p of f)"#"!=p&&_.setable.push({value:p,display_name:d.rows[0].obj[p]});d.columns.includes(_.lang)||(_.lang=_.setable[0].value),localStorage.setItem("lang",_.lang);for(let p=0,g=d.rows.length;p<g;p++)"#"==d.rows[p].obj["#"].charAt(0)?(h=d.rows[p].obj["#"].substring(3),_.text[h]||(_.text[h]={})):h&&(_.text[h][d.rows[p].obj["#"]]=d.rows[p].obj[_.lang]);_.Callback_nakama&&_.Callback_nakama(),C&&URL.revokeObjectURL(C),D.remove(),w(void 0)}catch(f){console.log("\uc0ac\uc6a9\uc790 \uc5b8\uc5b4 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",f),C&&URL.revokeObjectURL(C),D.remove(),_.load_selected_lang(),w(void 0)}},d=>{console.error("\ub0b4\ubd80 \ubb38\uc11c \uc77d\uae30 \uc2e4\ud328: ",d),C&&URL.revokeObjectURL(C),D.remove(),I(d)})}})})})()}}return(_e=q).\u0275fac=function(C){return new(C||_e)},_e.\u0275prov=Jt.jDH({token:_e,factory:_e.\u0275fac,providedIn:"root"}),q})()},5547:(br,kn,je)=>{"use strict";je.d(kn,{r:()=>_e});var F=je(467),j=je(92),Mt=je(3953),Jt=je(755),a=je(3307);let _e=(()=>{var q;class M{constructor(_,w){this.indexed=_,this.p5loading=w,this.settings={silent:{icon_mono:!0,diychat:!0,simplechat:!0,todo:!0,engineppt:!0,arcade:!0,voidDraw:!0},simplify:!1,vibrate:!1},this.Current="",this.WebNoties={}}change_silent_settings(_){this.settings.silent[_]=!this.settings.silent[_],this.indexed.saveTextFileToUserPath(JSON.stringify(this.settings),"notification_settings.json")}load_settings(){this.indexed.loadTextFromUserPath("notification_settings.json",(_,w)=>{_&&w&&(this.settings=JSON.parse(w)),"boolean"==typeof this.settings.silent&&(this.settings.silent={icon_mono:this.settings.silent,diychat:this.settings.silent,simplechat:this.settings.silent,todo:this.settings.silent,engineppt:this.settings.silent,arcade:this.settings.silent,voidDraw:this.settings.silent})})}initialize(){var _=this;return(0,F.A)(function*(){_.ClearNoti(11),"serviceWorker"in navigator?(Notification.requestPermission().then(w=>{console.log("granted"===w?"\uc54c\ub9bc \uad8c\ud55c\uc774 \ud5c8\uc6a9\ub428.":"\uc54c\ub9bc \uad8c\ud55c\uc774 \uac70\ubd80\ub428.")},w=>{console.error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800: ",w)}),navigator.serviceWorker.addEventListener("message",w=>{if(w.data.reply){if("12"===w.data.data){let I={msg:w.data.reply};if(!I.msg.trim())return;I.name=_.NakamaCallback.users.self.display_name,_.Sq_client.send(JSON.stringify(I))}}else window.swRegListenerCallback[w.data.data]&&window.swRegListenerCallback[w.data.data](),delete window.swRegListenerCallback[w.data.data]})):console.log("Service Worker is not supported in this browser.")})()}PushLocal(_,w,I=(()=>{})){var D=this;return(0,F.A)(function*(){const d=document.hasFocus();if(d&&D.Current===w||!D.settings.silent[_.smallIcon_ln||w||"icon_mono"])return;const f=D.settings.simplify||d;if(f)return void D.p5loading.update({id:`${_.id||w}`,message:_.body?`${_.title}: ${_.body}`:_.title,clickable:I,image:_.image||_.icon||(_.smallIcon_ln?`assets/icon/${_.smallIcon_ln}.png`:void 0),progress:1,forceEnd:3500,bgcolor:_.bgcolor,soundAlert:f});const h={badge:_.icon||`assets/badge/${_.smallIcon_ln||w||"favicon"}.png`,body:_.body,icon:_.icon||`assets/icon/${_.smallIcon_ln||w||"favicon"}.png`,image:_.image,silent:!D.settings.silent[_.smallIcon_ln]||!1,tag:`${_.id}`,actions:_.actions_wm,data:_.data_wm,requireInteraction:!!_.actions_wm};try{if(D.WebNoties[_.id]){try{D.WebNoties[_.id].close()}catch{}delete D.WebNoties[_.id]}if(j.Yl)delete h.actions,D.WebNoties[_.id]=new Notification(_.title,{...h}),D.WebNoties[_.id].onclick=()=>{I(),window.focus(),D.WebNoties[_.id].close()};else{yield window.swReg.showNotification(_.title,{...h});let p=yield window.swReg.getNotifications();for(let g=0,v=p.length;g<v;g++)if(p[g].tag==`${_.id}`){D.WebNoties[_.id]=p[g];break}window.swRegListenerCallback[_.id]=()=>{I(),window.focus(),D.WebNoties[_.id].close()}}}catch(p){console.log("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958: ",p)}})()}ClearNoti(_){this.p5loading.remove(`${_}`),this.WebNoties[_]&&this.WebNoties[_].close()}}return(q=M).\u0275fac=function(_){return new(_||q)(Mt.KVO(Jt.n),Mt.KVO(a.f))},q.\u0275prov=Mt.jDH({token:q,factory:q.\u0275fac,providedIn:"root"}),M})()},4237:(br,kn,je)=>{"use strict";je.d(kn,{I:()=>mr,X:()=>Mr});var I,D,F=je(467),j=Object.defineProperty,Mt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,_e=(te,Ie,Ye)=>Ie in te?j(te,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):te[Ie]=Ye,q=(te,Ie)=>{for(var Ye in Ie||(Ie={}))Jt.call(Ie,Ye)&&_e(te,Ye,Ie[Ye]);if(Mt)for(var Ye of Mt(Ie))a.call(Ie,Ye)&&_e(te,Ye,Ie[Ye]);return te},M=(te,Ie,Ye)=>new Promise((A,k)=>{var B=H=>{try{se(Ye.next(H))}catch(de){k(de)}},L=H=>{try{se(Ye.throw(H))}catch(de){k(de)}},se=H=>H.done?A(H.value):Promise.resolve(H.value).then(B,L);se((Ye=Ye.apply(te,Ie)).next())}),C=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof C<"u"&&C,__searchParams="URLSearchParams"in C,__iterable="Symbol"in C&&"iterator"in Symbol,__blob="FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch{return!1}}(),__formData="FormData"in C,__arrayBuffer="ArrayBuffer"in C;function d(te){if("string"!=typeof te&&(te=String(te)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(te)||""===te)throw new TypeError('Invalid character in header field name: "'+te+'"');return te.toLowerCase()}function f(te){return"string"!=typeof te&&(te=String(te)),te}function h(te){var Ie={next:function(){var Ye=te.shift();return{done:void 0===Ye,value:Ye}}};return __iterable&&(Ie[Symbol.iterator]=function(){return Ie}),Ie}function p(te){this.map={},te instanceof p?te.forEach(function(Ie,Ye){this.append(Ye,Ie)},this):Array.isArray(te)?te.forEach(function(Ie){this.append(Ie[0],Ie[1])},this):te&&Object.getOwnPropertyNames(te).forEach(function(Ie){this.append(Ie,te[Ie])},this)}function g(te){if(te.bodyUsed)return Promise.reject(new TypeError("Already read"));te.bodyUsed=!0}function v(te){return new Promise(function(Ie,Ye){te.onload=function(){Ie(te.result)},te.onerror=function(){Ye(te.error)}})}function S(te){var Ie=new FileReader,Ye=v(Ie);return Ie.readAsArrayBuffer(te),Ye}function N(te){if(te.slice)return te.slice(0);var Ie=new Uint8Array(te.byteLength);return Ie.set(new Uint8Array(te)),Ie.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(te){this.bodyUsed=this.bodyUsed,this._bodyInit=te,te?"string"==typeof te?this._bodyText=te:__blob&&Blob.prototype.isPrototypeOf(te)?this._bodyBlob=te:__formData&&FormData.prototype.isPrototypeOf(te)?this._bodyFormData=te:__searchParams&&URLSearchParams.prototype.isPrototypeOf(te)?this._bodyText=te.toString():__arrayBuffer&&__blob&&function w(te){return te&&DataView.prototype.isPrototypeOf(te)}(te)?(this._bodyArrayBuffer=N(te.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):__arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(te)||D(te))?this._bodyArrayBuffer=N(te):this._bodyText=te=Object.prototype.toString.call(te):this._bodyText="",this.headers.get("content-type")||("string"==typeof te?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):__searchParams&&URLSearchParams.prototype.isPrototypeOf(te)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},__blob&&(this.blob=function(){var te=g(this);if(te)return te;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(S)}),this.text=function(){var te=g(this);if(te)return te;if(this._bodyBlob)return function x(te){var Ie=new FileReader,Ye=v(Ie);return Ie.readAsText(te),Ye}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function E(te){for(var Ie=new Uint8Array(te),Ye=new Array(Ie.length),A=0;A<Ie.length;A++)Ye[A]=String.fromCharCode(Ie[A]);return Ye.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},__formData&&(this.formData=function(){return this.text().then(ie)}),this.json=function(){return this.text().then(JSON.parse)},this}__arrayBuffer&&(I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],D=ArrayBuffer.isView||function(te){return te&&I.indexOf(Object.prototype.toString.call(te))>-1}),p.prototype.append=function(te,Ie){te=d(te),Ie=f(Ie);var Ye=this.map[te];this.map[te]=Ye?Ye+", "+Ie:Ie},p.prototype.delete=function(te){delete this.map[d(te)]},p.prototype.get=function(te){return te=d(te),this.has(te)?this.map[te]:null},p.prototype.has=function(te){return this.map.hasOwnProperty(d(te))},p.prototype.set=function(te,Ie){this.map[d(te)]=f(Ie)},p.prototype.forEach=function(te,Ie){for(var Ye in this.map)this.map.hasOwnProperty(Ye)&&te.call(Ie,this.map[Ye],Ye,this)},p.prototype.keys=function(){var te=[];return this.forEach(function(Ie,Ye){te.push(Ye)}),h(te)},p.prototype.values=function(){var te=[];return this.forEach(function(Ie){te.push(Ie)}),h(te)},p.prototype.entries=function(){var te=[];return this.forEach(function(Ie,Ye){te.push([Ye,Ie])}),h(te)},__iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var K=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function G(te,Ie){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Ye=(Ie=Ie||{}).body;if(te instanceof G){if(te.bodyUsed)throw new TypeError("Already read");this.url=te.url,this.credentials=te.credentials,Ie.headers||(this.headers=new p(te.headers)),this.method=te.method,this.mode=te.mode,this.signal=te.signal,!Ye&&null!=te._bodyInit&&(Ye=te._bodyInit,te.bodyUsed=!0)}else this.url=String(te);if(this.credentials=Ie.credentials||this.credentials||"same-origin",(Ie.headers||!this.headers)&&(this.headers=new p(Ie.headers)),this.method=function z(te){var Ie=te.toUpperCase();return K.indexOf(Ie)>-1?Ie:te}(Ie.method||this.method||"GET"),this.mode=Ie.mode||this.mode||null,this.signal=Ie.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Ye)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Ye),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==Ie.cache&&"no-cache"!==Ie.cache)){var A=/([?&])_=[^&]*/;A.test(this.url)?this.url=this.url.replace(A,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function ie(te){var Ie=new FormData;return te.trim().split("&").forEach(function(Ye){if(Ye){var A=Ye.split("="),k=A.shift().replace(/\+/g," "),B=A.join("=").replace(/\+/g," ");Ie.append(decodeURIComponent(k),decodeURIComponent(B))}}),Ie}function X(te){var Ie=new p;return te.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(A){return 0===A.indexOf("\n")?A.substr(1,A.length):A}).forEach(function(A){var k=A.split(":"),B=k.shift().trim();if(B){var L=k.join(":").trim();Ie.append(B,L)}}),Ie}function ee(te,Ie){if(!(this instanceof ee))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Ie||(Ie={}),this.type="default",this.status=void 0===Ie.status?200:Ie.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===Ie.statusText?"":""+Ie.statusText,this.headers=new p(Ie.headers),this.url=Ie.url||"",this._initBody(te)}G.prototype.clone=function(){return new G(this,{body:this._bodyInit})},Z.call(G.prototype),Z.call(ee.prototype),ee.prototype.clone=function(){return new ee(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},ee.error=function(){var te=new ee(null,{status:0,statusText:""});return te.type="error",te};var Y=[301,302,303,307,308];ee.redirect=function(te,Ie){if(-1===Y.indexOf(Ie))throw new RangeError("Invalid status code");return new ee(null,{status:Ie,headers:{location:te}})};var ve=C.DOMException;try{new ve}catch{(ve=function(Ie,Ye){this.message=Ie,this.name=Ye;var A=Error(Ie);this.stack=A.stack}).prototype=Object.create(Error.prototype),ve.prototype.constructor=ve}function xe(te,Ie){return new Promise(function(Ye,A){var k=new G(te,Ie);if(k.signal&&k.signal.aborted)return A(new ve("Aborted","AbortError"));var B=new XMLHttpRequest;function L(){B.abort()}B.onload=function(){var H={status:B.status,statusText:B.statusText,headers:X(B.getAllResponseHeaders()||"")};H.url="responseURL"in B?B.responseURL:H.headers.get("X-Request-URL");var de="response"in B?B.response:B.responseText;setTimeout(function(){Ye(new ee(de,H))},0)},B.onerror=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},B.onabort=function(){setTimeout(function(){A(new ve("Aborted","AbortError"))},0)},B.open(k.method,function se(H){try{return""===H&&C.location.href?C.location.href:H}catch{return H}}(k.url),!0),"include"===k.credentials?B.withCredentials=!0:"omit"===k.credentials&&(B.withCredentials=!1),"responseType"in B&&(__blob?B.responseType="blob":__arrayBuffer&&k.headers.get("Content-Type")&&-1!==k.headers.get("Content-Type").indexOf("application/octet-stream")&&(B.responseType="arraybuffer")),!Ie||"object"!=typeof Ie.headers||Ie.headers instanceof p?k.headers.forEach(function(H,de){B.setRequestHeader(de,H)}):Object.getOwnPropertyNames(Ie.headers).forEach(function(H){B.setRequestHeader(H,f(Ie.headers[H]))}),k.signal&&(k.signal.addEventListener("abort",L),B.onreadystatechange=function(){4===B.readyState&&k.signal.removeEventListener("abort",L)}),B.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}xe.polyfill=!0,C.fetch||(C.fetch=xe,C.Headers=p,C.Request=G,C.Response=ee);var ae="function"==typeof atob,ge="function"==typeof btoa,ne="function"==typeof Buffer,J="function"==typeof TextDecoder?new TextDecoder:void 0,ce="function"==typeof TextEncoder?new TextEncoder:void 0,et=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),le=(te=>{let Ie={};return te.forEach((Ye,A)=>Ie[Ye]=A),Ie})(et),V=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,me=String.fromCharCode.bind(String),Oe="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):te=>new Uint8Array(Array.prototype.slice.call(te,0)),dt=te=>te.replace(/[^A-Za-z0-9\+\/]/g,""),Ut=ge?te=>btoa(te):ne?te=>Buffer.from(te,"binary").toString("base64"):te=>{let Ie,Ye,A,k,B="";const L=te.length%3;for(let se=0;se<te.length;){if((Ye=te.charCodeAt(se++))>255||(A=te.charCodeAt(se++))>255||(k=te.charCodeAt(se++))>255)throw new TypeError("invalid character found");Ie=Ye<<16|A<<8|k,B+=et[Ie>>18&63]+et[Ie>>12&63]+et[Ie>>6&63]+et[63&Ie]}return L?B.slice(0,L-3)+"===".substring(L):B},ht=ne?te=>Buffer.from(te).toString("base64"):te=>{let Ye=[];for(let A=0,k=te.length;A<k;A+=4096)Ye.push(me.apply(null,te.subarray(A,A+4096)));return Ut(Ye.join(""))},Lt=te=>{if(te.length<2)return(Ie=te.charCodeAt(0))<128?te:Ie<2048?me(192|Ie>>>6)+me(128|63&Ie):me(224|Ie>>>12&15)+me(128|Ie>>>6&63)+me(128|63&Ie);var Ie=65536+1024*(te.charCodeAt(0)-55296)+(te.charCodeAt(1)-56320);return me(240|Ie>>>18&7)+me(128|Ie>>>12&63)+me(128|Ie>>>6&63)+me(128|63&Ie)},kt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,It=ne?te=>Buffer.from(te,"utf8").toString("base64"):ce?te=>ht(ce.encode(te)):te=>Ut((te=>te.replace(kt,Lt))(te)),bt=(te,Ie=!1)=>Ie?(te=>te.replace(/=/g,"").replace(/[+\/]/g,Ie=>"+"==Ie?"-":"_"))(It(te)):It(te),Pt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,St=te=>{switch(te.length){case 4:var Ye=((7&te.charCodeAt(0))<<18|(63&te.charCodeAt(1))<<12|(63&te.charCodeAt(2))<<6|63&te.charCodeAt(3))-65536;return me(55296+(Ye>>>10))+me(56320+(1023&Ye));case 3:return me((15&te.charCodeAt(0))<<12|(63&te.charCodeAt(1))<<6|63&te.charCodeAt(2));default:return me((31&te.charCodeAt(0))<<6|63&te.charCodeAt(1))}},$n=ae?te=>atob(dt(te)):ne?te=>Buffer.from(te,"base64").toString("binary"):te=>{if(te=te.replace(/\s+/g,""),!V.test(te))throw new TypeError("malformed base64.");te+="==".slice(2-(3&te.length));let Ie,A,k,Ye="";for(let B=0;B<te.length;)Ie=le[te.charAt(B++)]<<18|le[te.charAt(B++)]<<12|(A=le[te.charAt(B++)])<<6|(k=le[te.charAt(B++)]),Ye+=64===A?me(Ie>>16&255):64===k?me(Ie>>16&255,Ie>>8&255):me(Ie>>16&255,Ie>>8&255,255&Ie);return Ye},En=ne?te=>Oe(Buffer.from(te,"base64")):te=>Oe($n(te).split("").map(Ie=>Ie.charCodeAt(0))),Kn=ne?te=>Buffer.from(te,"base64").toString("utf8"):J?te=>J.decode(En(te)):te=>(te=>te.replace(Pt,St))($n(te)),pr=te=>Kn((te=>dt(te.replace(/[-_]/g,Ie=>"-"==Ie?"+":"/")))(te));function Ln(te,Ie,Ye){const A=q(q({},{method:te}),Ie);if(A.headers=q({},Ie.headers),typeof XMLHttpRequest<"u"){const k=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");null!=k&&k.set||(A.credentials="cocos-ignore")}return Object.keys(A.headers).includes("Accept")||(A.headers.Accept="application/json"),Object.keys(A.headers).includes("Content-Type")||(A.headers["Content-Type"]="application/json"),Object.keys(A.headers).forEach(k=>{A.headers[k]||delete A.headers[k]}),Ye&&(A.body=Ye),A}var nr=class{constructor(te,Ie,Ye){this.serverKey=te,this.basePath=Ie,this.timeoutMs=Ye}healthcheck(te,Ie={}){const B=this.buildFullUrl(this.basePath,"/healthcheck",new Map),L=Ln("GET",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(B,L).then(se=>{if(204==se.status)return se;if(se.status>=200&&se.status<300)return se.json();throw se}),new Promise((se,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}deleteAccount(te,Ie={}){const B=this.buildFullUrl(this.basePath,"/v2/account",new Map),L=Ln("DELETE",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(B,L).then(se=>{if(204==se.status)return se;if(se.status>=200&&se.status<300)return se.json();throw se}),new Promise((se,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}getAccount(te,Ie={}){const B=this.buildFullUrl(this.basePath,"/v2/account",new Map),L=Ln("GET",Ie,"");return te&&(L.headers.Authorization="Bearer "+te),Promise.race([fetch(B,L).then(se=>{if(204==se.status)return se;if(se.status>=200&&se.status<300)return se.json();throw se}),new Promise((se,H)=>setTimeout(H,this.timeoutMs,"Request timed out."))])}updateAccount(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account",k),se=Ln("PUT",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}authenticateApple(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateCustom(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateDevice(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateEmail(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateFacebook(te,Ie,Ye,A,k,B,L={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const H=new Map;H.set("create",A),H.set("username",k),H.set("sync",B);let de="";de=JSON.stringify(Ye||{});const Ke=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",H),Ve=Ln("POST",L,de);return te&&(Ve.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateGoogle(te,Ie,Ye,A,k,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const se=new Map;se.set("create",A),se.set("username",k);let H="";H=JSON.stringify(Ye||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",se),Ke=Ln("POST",B,H);return te&&(Ke.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}authenticateSteam(te,Ie,Ye,A,k,B,L={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const H=new Map;H.set("create",A),H.set("username",k),H.set("sync",B);let de="";de=JSON.stringify(Ye||{});const Ke=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",H),Ve=Ln("POST",L,de);return te&&(Ve.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}linkApple(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/apple",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkCustom(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/custom",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkDevice(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/device",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkEmail(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/email",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkFacebook(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("sync",Ye);let L="";L=JSON.stringify(Ie||{});const se=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGameCenter(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGoogle(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/google",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkSteam(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/link/steam",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}sessionRefresh(te,Ie,Ye,A={}){if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const B=new Map;let L="";L=JSON.stringify(Ye||{});const se=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Basic "+bt(te+":"+Ie)),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}unlinkApple(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkCustom(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkDevice(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkEmail(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebook(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGoogle(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkSteam(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listChannelMessages(te,Ie,Ye,A,k,B={}){if(null==Ie)throw new Error("'channelId' is a required parameter but is null or undefined.");const L="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(Ie))),se=new Map;se.set("limit",Ye),se.set("forward",A),se.set("cursor",k);const de=this.buildFullUrl(this.basePath,L,se),Ke=Ln("GET",B,"");return te&&(Ke.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}event(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/event",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteFriends(te,Ie,Ye,A={}){const B=new Map;B.set("ids",Ie),B.set("usernames",Ye);const se=this.buildFullUrl(this.basePath,"/v2/friend",B),H=Ln("DELETE",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}listFriends(te,Ie,Ye,A,k={}){const L=new Map;L.set("limit",Ie),L.set("state",Ye),L.set("cursor",A);const H=this.buildFullUrl(this.basePath,"/v2/friend",L),de=Ln("GET",k,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Ke=>{if(204==Ke.status)return Ke;if(Ke.status>=200&&Ke.status<300)return Ke.json();throw Ke}),new Promise((Ke,Ve)=>setTimeout(Ve,this.timeoutMs,"Request timed out."))])}addFriends(te,Ie,Ye,A={}){const B=new Map;B.set("ids",Ie),B.set("usernames",Ye);const se=this.buildFullUrl(this.basePath,"/v2/friend",B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}blockFriends(te,Ie,Ye,A={}){const B=new Map;B.set("ids",Ie),B.set("usernames",Ye);const se=this.buildFullUrl(this.basePath,"/v2/friend/block",B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}importFacebookFriends(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("reset",Ye);let L="";L=JSON.stringify(Ie||{});const se=this.buildFullUrl(this.basePath,"/v2/friend/facebook",B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(te,Ie,Ye,A={}){const B=new Map;B.set("limit",Ie),B.set("cursor",Ye);const se=this.buildFullUrl(this.basePath,"/v2/friend/friends",B),H=Ln("GET",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}importSteamFriends(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("reset",Ye);let L="";L=JSON.stringify(Ie||{});const se=this.buildFullUrl(this.basePath,"/v2/friend/steam",B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}listGroups(te,Ie,Ye,A,k,B,L,se={}){const de=new Map;de.set("name",Ie),de.set("cursor",Ye),de.set("limit",A),de.set("lang_tag",k),de.set("members",B),de.set("open",L);const Ve=this.buildFullUrl(this.basePath,"/v2/group",de),vt=Ln("GET",se,"");return te&&(vt.headers.Authorization="Bearer "+te),Promise.race([fetch(Ve,vt).then(Ft=>{if(204==Ft.status)return Ft;if(Ft.status>=200&&Ft.status<300)return Ft.json();throw Ft}),new Promise((Ft,_n)=>setTimeout(_n,this.timeoutMs,"Request timed out."))])}createGroup(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/group",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteGroup(te,Ie,Ye={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const A="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("DELETE",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}updateGroup(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;let L="";L=JSON.stringify(Ye||{});const se=this.buildFullUrl(this.basePath,k,B),H=Ln("PUT",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}addGroupUsers(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;B.set("user_ids",Ye);const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}banGroupUsers(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;B.set("user_ids",Ye);const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;B.set("user_ids",Ye);const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}joinGroup(te,Ie,Ye={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const A="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("POST",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}kickGroupUsers(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;B.set("user_ids",Ye);const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}leaveGroup(te,Ie,Ye={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const A="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("POST",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const k="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(Ie))),B=new Map;B.set("user_ids",Ye);const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}listGroupUsers(te,Ie,Ye,A,k,B={}){if(null==Ie)throw new Error("'groupId' is a required parameter but is null or undefined.");const L="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(Ie))),se=new Map;se.set("limit",Ye),se.set("state",A),se.set("cursor",k);const de=this.buildFullUrl(this.basePath,L,se),Ke=Ln("GET",B,"");return te&&(Ke.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/facebookinstant",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listSubscriptions(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription/apple",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/iap/subscription/google",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}getSubscription(te,Ie,Ye={}){if(null==Ie)throw new Error("'productId' is a required parameter but is null or undefined.");const A="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("GET",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(te,Ie,Ye={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const A="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("DELETE",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(te,Ie,Ye,A,k,B,L={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const se="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),H=new Map;H.set("owner_ids",Ye),H.set("limit",A),H.set("cursor",k),H.set("expiry",B);const Ke=this.buildFullUrl(this.basePath,se,H),Ve=Ln("GET",L,"");return te&&(Ve.headers.Authorization="Bearer "+te),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const k="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))),B=new Map;let L="";L=JSON.stringify(Ye||{});const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(te,Ie,Ye,A,k,B,L={}){if(null==Ie)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'ownerId' is a required parameter but is null or undefined.");const se="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(Ie))).replace("{ownerId}",encodeURIComponent(String(Ye))),H=new Map;H.set("limit",A),H.set("expiry",k),H.set("cursor",B);const Ke=this.buildFullUrl(this.basePath,se,H),Ve=Ln("GET",L,"");return te&&(Ve.headers.Authorization="Bearer "+te),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}listMatches(te,Ie,Ye,A,k,B,L,se={}){const de=new Map;de.set("limit",Ie),de.set("authoritative",Ye),de.set("label",A),de.set("min_size",k),de.set("max_size",B),de.set("query",L);const Ve=this.buildFullUrl(this.basePath,"/v2/match",de),vt=Ln("GET",se,"");return te&&(vt.headers.Authorization="Bearer "+te),Promise.race([fetch(Ve,vt).then(Ft=>{if(204==Ft.status)return Ft;if(Ft.status>=200&&Ft.status<300)return Ft.json();throw Ft}),new Promise((Ft,_n)=>setTimeout(_n,this.timeoutMs,"Request timed out."))])}deleteNotifications(te,Ie,Ye={}){const k=new Map;k.set("ids",Ie);const L=this.buildFullUrl(this.basePath,"/v2/notification",k),se=Ln("DELETE",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listNotifications(te,Ie,Ye,A={}){const B=new Map;B.set("limit",Ie),B.set("cacheable_cursor",Ye);const se=this.buildFullUrl(this.basePath,"/v2/notification",B),H=Ln("GET",A,"");return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}rpcFunc2(te,Ie,Ye,A,k={}){if(null==Ie)throw new Error("'id' is a required parameter but is null or undefined.");const B="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Ie))),L=new Map;L.set("payload",Ye),L.set("http_key",A);const H=this.buildFullUrl(this.basePath,B,L),de=Ln("GET",k,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Ke=>{if(204==Ke.status)return Ke;if(Ke.status>=200&&Ke.status<300)return Ke.json();throw Ke}),new Promise((Ke,Ve)=>setTimeout(Ve,this.timeoutMs,"Request timed out."))])}rpcFunc(te,Ie,Ye,A,k={}){if(null==Ie)throw new Error("'id' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const B="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Ie))),L=new Map;L.set("http_key",A);let se="";se=JSON.stringify(Ye||{});const H=this.buildFullUrl(this.basePath,B,L),de=Ln("POST",k,se);return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Ke=>{if(204==Ke.status)return Ke;if(Ke.status>=200&&Ke.status<300)return Ke.json();throw Ke}),new Promise((Ke,Ve)=>setTimeout(Ve,this.timeoutMs,"Request timed out."))])}sessionLogout(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/session/logout",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}readStorageObjects(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage",k),se=Ln("POST",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}writeStorageObjects(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage",k),se=Ln("PUT",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(te,Ie,Ye={}){if(null==Ie)throw new Error("'body' is a required parameter but is null or undefined.");const k=new Map;let B="";B=JSON.stringify(Ie||{});const L=this.buildFullUrl(this.basePath,"/v2/storage/delete",k),se=Ln("PUT",Ye,B);return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listStorageObjects(te,Ie,Ye,A,k,B={}){if(null==Ie)throw new Error("'collection' is a required parameter but is null or undefined.");const L="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(Ie))),se=new Map;se.set("user_id",Ye),se.set("limit",A),se.set("cursor",k);const de=this.buildFullUrl(this.basePath,L,se),Ke=Ln("GET",B,"");return te&&(Ke.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}listStorageObjects2(te,Ie,Ye,A,k,B={}){if(null==Ie)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'userId' is a required parameter but is null or undefined.");const L="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(Ie))).replace("{userId}",encodeURIComponent(String(Ye))),se=new Map;se.set("limit",A),se.set("cursor",k);const de=this.buildFullUrl(this.basePath,L,se),Ke=Ln("GET",B,"");return te&&(Ke.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}listTournaments(te,Ie,Ye,A,k,B,L,se={}){const de=new Map;de.set("category_start",Ie),de.set("category_end",Ye),de.set("start_time",A),de.set("end_time",k),de.set("limit",B),de.set("cursor",L);const Ve=this.buildFullUrl(this.basePath,"/v2/tournament",de),vt=Ln("GET",se,"");return te&&(vt.headers.Authorization="Bearer "+te),Promise.race([fetch(Ve,vt).then(Ft=>{if(204==Ft.status)return Ft;if(Ft.status>=200&&Ft.status<300)return Ft.json();throw Ft}),new Promise((Ft,_n)=>setTimeout(_n,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(te,Ie,Ye={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const A="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("DELETE",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecords(te,Ie,Ye,A,k,B,L={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const se="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),H=new Map;H.set("owner_ids",Ye),H.set("limit",A),H.set("cursor",k),H.set("expiry",B);const Ke=this.buildFullUrl(this.basePath,se,H),Ve=Ln("GET",L,"");return te&&(Ve.headers.Authorization="Bearer "+te),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const k="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),B=new Map;let L="";L=JSON.stringify(Ye||{});const se=this.buildFullUrl(this.basePath,k,B),H=Ln("POST",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(te,Ie,Ye,A={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const k="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Ie))),B=new Map;let L="";L=JSON.stringify(Ye||{});const se=this.buildFullUrl(this.basePath,k,B),H=Ln("PUT",A,L);return te&&(H.headers.Authorization="Bearer "+te),Promise.race([fetch(se,H).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ke)=>setTimeout(Ke,this.timeoutMs,"Request timed out."))])}joinTournament(te,Ie,Ye={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const A="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(Ie))),L=this.buildFullUrl(this.basePath,A,new Map),se=Ln("POST",Ye,"");return te&&(se.headers.Authorization="Bearer "+te),Promise.race([fetch(L,se).then(H=>{if(204==H.status)return H;if(H.status>=200&&H.status<300)return H.json();throw H}),new Promise((H,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(te,Ie,Ye,A,k,B,L={}){if(null==Ie)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'ownerId' is a required parameter but is null or undefined.");const se="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(Ie))).replace("{ownerId}",encodeURIComponent(String(Ye))),H=new Map;H.set("limit",A),H.set("expiry",k),H.set("cursor",B);const Ke=this.buildFullUrl(this.basePath,se,H),Ve=Ln("GET",L,"");return te&&(Ve.headers.Authorization="Bearer "+te),Promise.race([fetch(Ke,Ve).then(vt=>{if(204==vt.status)return vt;if(vt.status>=200&&vt.status<300)return vt.json();throw vt}),new Promise((vt,Ft)=>setTimeout(Ft,this.timeoutMs,"Request timed out."))])}getUsers(te,Ie,Ye,A,k={}){const L=new Map;L.set("ids",Ie),L.set("usernames",Ye),L.set("facebook_ids",A);const H=this.buildFullUrl(this.basePath,"/v2/user",L),de=Ln("GET",k,"");return te&&(de.headers.Authorization="Bearer "+te),Promise.race([fetch(H,de).then(Ke=>{if(204==Ke.status)return Ke;if(Ke.status>=200&&Ke.status<300)return Ke.json();throw Ke}),new Promise((Ke,Ve)=>setTimeout(Ve,this.timeoutMs,"Request timed out."))])}listUserGroups(te,Ie,Ye,A,k,B={}){if(null==Ie)throw new Error("'userId' is a required parameter but is null or undefined.");const L="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(Ie))),se=new Map;se.set("limit",Ye),se.set("state",A),se.set("cursor",k);const de=this.buildFullUrl(this.basePath,L,se),Ke=Ln("GET",B,"");return te&&(Ke.headers.Authorization="Bearer "+te),Promise.race([fetch(de,Ke).then(Ve=>{if(204==Ve.status)return Ve;if(Ve.status>=200&&Ve.status<300)return Ve.json();throw Ve}),new Promise((Ve,vt)=>setTimeout(vt,this.timeoutMs,"Request timed out."))])}buildFullUrl(te,Ie,Ye){let A=te+Ie+"?";for(let[k,B]of Ye)B instanceof Array?A+=B.reduce((L,se)=>L+encodeURIComponent(k)+"="+encodeURIComponent(se)+"&",""):null!=B&&(A+=encodeURIComponent(k)+"="+encodeURIComponent(B)+"&");return A}},hn=class{constructor(te,Ie,Ye){this.created=Ye,this.token=te,this.refresh_token=Ie,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(te,Ie)}isexpired(te){return this.expires_at-te<0}isrefreshexpired(te){return this.refresh_expires_at-te<0}update(te,Ie){const Ye=te.split(".");if(3!=Ye.length)throw"jwt is not valid.";const A=JSON.parse($n(Ye[1])),k=Math.floor(parseInt(A.exp));if(Ie){const B=Ie.split(".");if(3!=B.length)throw"refresh jwt is not valid.";const L=JSON.parse($n(B[1])),se=Math.floor(parseInt(L.exp));this.refresh_expires_at=se,this.refresh_token=Ie}this.token=te,this.expires_at=k,this.username=A.usn,this.user_id=A.uid,this.vars=A.vrs}static restore(te,Ie){return new hn(te,Ie,!1)}},Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ct=0;ct<64;ct++)Tn[Xn.charCodeAt(ct)]=ct;var ct,ft=function(te){var Ye,Ie=new Uint8Array(te),A=Ie.length,k="";for(Ye=0;Ye<A;Ye+=3)k+=Xn[Ie[Ye]>>2],k+=Xn[(3&Ie[Ye])<<4|Ie[Ye+1]>>4],k+=Xn[(15&Ie[Ye+1])<<2|Ie[Ye+2]>>6],k+=Xn[63&Ie[Ye+2]];return A%3==2?k=k.substring(0,k.length-1)+"=":A%3==1&&(k=k.substring(0,k.length-2)+"=="),k},Qe=function(te){var A,B,L,se,H,Ie=.75*te.length,Ye=te.length,k=0;"="===te[te.length-1]&&(Ie--,"="===te[te.length-2]&&Ie--);var de=new ArrayBuffer(Ie),Ke=new Uint8Array(de);for(A=0;A<Ye;A+=4)B=Tn[te.charCodeAt(A)],L=Tn[te.charCodeAt(A+1)],se=Tn[te.charCodeAt(A+2)],H=Tn[te.charCodeAt(A+3)],Ke[k++]=B<<2|L>>4,Ke[k++]=(15&L)<<4|se>>2,Ke[k++]=(3&se)<<6|63&H;return de},xt=class{get onClose(){return this._socket.onclose}set onClose(te){this._socket.onclose=te}get onError(){return this._socket.onerror}set onError(te){this._socket.onerror=te}get onMessage(){return this._socket.onmessage}set onMessage(te){te?this._socket.onmessage=Ie=>{const Ye=JSON.parse(Ie.data);Ye.match_data&&Ye.match_data.data?Ye.match_data.data=new Uint8Array(Qe(Ye.match_data.data)):Ye.party_data&&Ye.party_data.data&&(Ye.party_data.data=new Uint8Array(Qe(Ye.party_data.data))),te(Ye)}:te=null}get onOpen(){return this._socket.onopen}set onOpen(te){this._socket.onopen=te}isOpen(){var te;return(null==(te=this._socket)?void 0:te.readyState)==WebSocket.OPEN}connect(te,Ie,Ye,A,k){const B=`${te}${Ie}:${Ye}/ws?lang=en&status=${encodeURIComponent(A.toString())}&token=${encodeURIComponent(k)}`;this._socket=new WebSocket(B)}close(){this._socket.close(),this._socket=void 0}send(te){if(te.match_data_send){te.match_data_send.op_code=te.match_data_send.op_code.toString();let Ie=te.match_data_send.data;Ie&&Ie instanceof Uint8Array?te.match_data_send.data=ft(Ie.buffer):Ie&&(te.match_data_send.data=Ut(Ie))}else if(te.party_data_send){te.party_data_send.op_code=te.party_data_send.op_code.toString();let Ie=te.party_data_send.data;Ie&&Ie instanceof Uint8Array?te.party_data_send.data=ft(Ie.buffer):Ie&&(te.party_data_send.data=Ut(Ie))}this._socket.send(JSON.stringify(te))}},un=class{constructor(te,Ie,Ye=!1,A=!1,k=new xt,B=un.DefaultSendTimeoutMs){this.host=te,this.port=Ie,this.useSSL=Ye,this.verbose=A,this.adapter=k,this.sendTimeoutMs=B,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=un.DefaultHeartbeatTimeoutMs}generatecid(){const te=this.nextCid.toString();return++this.nextCid,te}connect(te,Ie=!1,Ye=un.DefaultConnectTimeoutMs){return this.adapter.isOpen()?Promise.resolve(te):(this.adapter.connect(this.useSSL?"wss://":"ws://",this.host,this.port,Ie,te.token),this.adapter.onClose=k=>{this.ondisconnect(k)},this.adapter.onError=k=>{this.onerror(k)},this.adapter.onMessage=k=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(k)),k.cid){const B=this.cIds[k.cid];if(!B)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",k));delete this.cIds[k.cid],k.error?B.reject(k.error):B.resolve(k)}else k.notifications?k.notifications.notifications.forEach(B=>{B.content=B.content?JSON.parse(B.content):void 0,this.onnotification(B)}):k.match_data?(k.match_data.op_code=parseInt(k.match_data.op_code),this.onmatchdata(k.match_data)):k.match_presence_event?this.onmatchpresence(k.match_presence_event):k.matchmaker_ticket?this.onmatchmakerticket(k.matchmaker_ticket):k.matchmaker_matched?this.onmatchmakermatched(k.matchmaker_matched):k.status_presence_event?this.onstatuspresence(k.status_presence_event):k.stream_presence_event?this.onstreampresence(k.stream_presence_event):k.stream_data?this.onstreamdata(k.stream_data):k.channel_message?(k.channel_message.content=JSON.parse(k.channel_message.content),this.onchannelmessage(k.channel_message)):k.channel_presence_event?this.onchannelpresence(k.channel_presence_event):k.party_data?(k.party_data.op_code=parseInt(k.party_data.op_code),this.onpartydata(k.party_data)):k.party_close?this.onpartyclose(k.party_close):k.party_join_request?this.onpartyjoinrequest(k.party_join_request):k.party_leader?this.onpartyleader(k.party_leader):k.party_matchmaker_ticket?this.onpartymatchmakerticket(k.party_matchmaker_ticket):k.party_presence_event?this.onpartypresence(k.party_presence_event):k.party?this.onparty(k.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",k)},new Promise((k,B)=>{this.adapter.onOpen=L=>{this.verbose&&window&&window.console&&console.log(L),this.pingPong(),k(te)},this.adapter.onError=L=>{B(L),this.adapter.close()},setTimeout(()=>{B("The socket timed out when trying to connect.")},Ye)}))}disconnect(te=!0){this.adapter.isOpen()&&this.adapter.close(),te&&this.ondisconnect({})}setHeartbeatTimeoutMs(te){this._heartbeatTimeoutMs=te}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(te){this.verbose&&window&&window.console&&console.log(te)}onerror(te){this.verbose&&window&&window.console&&console.log(te)}onchannelmessage(te){this.verbose&&window&&window.console&&console.log(te)}onchannelpresence(te){this.verbose&&window&&window.console&&console.log(te)}onnotification(te){this.verbose&&window&&window.console&&console.log(te)}onmatchdata(te){this.verbose&&window&&window.console&&console.log(te)}onmatchpresence(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakermatched(te){this.verbose&&window&&window.console&&console.log(te)}onparty(te){this.verbose&&window&&window.console&&console.log(te)}onpartyclose(te){this.verbose&&window&&window.console&&console.log("Party closed: "+te)}onpartyjoinrequest(te){this.verbose&&window&&window.console&&console.log(te)}onpartydata(te){this.verbose&&window&&window.console&&console.log(te)}onpartyleader(te){this.verbose&&window&&window.console&&console.log(te)}onpartymatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onpartypresence(te){this.verbose&&window&&window.console&&console.log(te)}onstatuspresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreampresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreamdata(te){this.verbose&&window&&window.console&&console.log(te)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(te,Ie=un.DefaultSendTimeoutMs){const Ye=te;return new Promise((A,k)=>{if(this.adapter.isOpen())if(Ye.match_data_send)this.adapter.send(Ye),A();else if(Ye.party_data_send)this.adapter.send(Ye),A();else{Ye.channel_message_send?Ye.channel_message_send.content=JSON.stringify(Ye.channel_message_send.content):Ye.channel_message_update&&(Ye.channel_message_update.content=JSON.stringify(Ye.channel_message_update.content));const B=this.generatecid();this.cIds[B]={resolve:A,reject:k},setTimeout(()=>{k("The socket timed out while waiting for a response.")},Ie),Ye.cid=B,this.adapter.send(Ye)}else k("Socket connection has not been established yet.");if(this.verbose&&window&&window.console){const B=q({},Ye);B.match_data_send&&B.match_data_send.data?B.match_data_send.data=pr(B.match_data_send.data):B.party_data_send&&B.party_data_send.data&&(B.party_data_send.data=pr(B.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(B))}})}acceptPartyMember(te,Ie){return this.send({party_accept:{party_id:te,presence:Ie}})}addMatchmaker(te,Ie,Ye,A,k){return M(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:Ie,max_count:Ye,query:te,string_properties:A,numeric_properties:k}})).matchmaker_ticket})}addMatchmakerParty(te,Ie,Ye,A,k,B){return M(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:te,min_count:Ye,max_count:A,query:Ie,string_properties:k,numeric_properties:B}})).party_matchmaker_ticket})}closeParty(te){return M(this,null,function*(){return yield this.send({party_close:{party_id:te}})})}createMatch(te){return M(this,null,function*(){return(yield this.send({match_create:{name:te}})).match})}createParty(te,Ie){return M(this,null,function*(){return(yield this.send({party_create:{open:te,max_size:Ie}})).party})}followUsers(te){return M(this,null,function*(){return(yield this.send({status_follow:{user_ids:te}})).status})}joinChat(te,Ie,Ye,A){return M(this,null,function*(){return(yield this.send({channel_join:{target:te,type:Ie,persistence:Ye,hidden:A}})).channel})}joinMatch(te,Ie,Ye){return M(this,null,function*(){const A={match_join:{metadata:Ye}};return Ie?A.match_join.token=Ie:A.match_join.match_id=te,(yield this.send(A)).match})}joinParty(te){return M(this,null,function*(){return yield this.send({party_join:{party_id:te}})})}leaveChat(te){return this.send({channel_leave:{channel_id:te}})}leaveMatch(te){return this.send({match_leave:{match_id:te}})}leaveParty(te){return this.send({party_leave:{party_id:te}})}listPartyJoinRequests(te){return M(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:te}})).party_join_request})}promotePartyMember(te,Ie){return M(this,null,function*(){return(yield this.send({party_promote:{party_id:te,presence:Ie}})).party_leader})}removeChatMessage(te,Ie){return M(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:te,message_id:Ie}})).channel_message_ack})}removeMatchmaker(te){return this.send({matchmaker_remove:{ticket:te}})}removeMatchmakerParty(te,Ie){return this.send({party_matchmaker_remove:{party_id:te,ticket:Ie}})}removePartyMember(te,Ie){return M(this,null,function*(){return this.send({party_remove:{party_id:te,presence:Ie}})})}rpc(te,Ie,Ye){return M(this,null,function*(){return(yield this.send({rpc:{id:te,payload:Ie,http_key:Ye}})).rpc})}sendMatchState(te,Ie,Ye,A,k){return M(this,null,function*(){return this.send({match_data_send:{match_id:te,op_code:Ie,data:Ye,presences:null!=A?A:[],reliable:k}})})}sendPartyData(te,Ie,Ye){return this.send({party_data_send:{party_id:te,op_code:Ie,data:Ye}})}unfollowUsers(te){return this.send({status_unfollow:{user_ids:te}})}updateChatMessage(te,Ie,Ye){return M(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:te,message_id:Ie,content:Ye}})).channel_message_ack})}updateStatus(te){return this.send({status_update:{status:te}})}writeChatMessage(te,Ie){return M(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:te,content:Ie}})).channel_message_ack})}pingPong(){return M(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{return void(this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()))}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},An=un;An.DefaultHeartbeatTimeoutMs=1e4,An.DefaultSendTimeoutMs=1e4,An.DefaultConnectTimeoutMs=3e4;var pn=class{constructor(te="defaultkey",Ie="127.0.0.1",Ye="7350",A=!1,k=7e3,B=!0){this.serverkey=te,this.host=Ie,this.port=Ye,this.useSSL=A,this.timeout=k,this.autoRefreshSession=B,this.expiredTimespanMs=3e5,this.apiClient=new nr(te,`${A?"https://":"http://"}${Ie}:${Ye}`,k)}addGroupUsers(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addGroupUsers(te.token,Ie,Ye).then(A=>void 0!==A)})}addFriends(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addFriends(te.token,Ie,Ye).then(A=>void 0!==A)})}authenticateApple(te,Ie,Ye){return M(this,arguments,function*(A,k,B,L={},se={}){return this.apiClient.authenticateApple(this.serverkey,"",{token:A,vars:L},k,B,se).then(de=>new hn(de.token||"",de.refresh_token||"",de.created||!1))})}authenticateCustom(te,Ie,Ye,A={},k={}){return this.apiClient.authenticateCustom(this.serverkey,"",{id:te,vars:A},Ie,Ye,k).then(L=>new hn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateDevice(te,Ie,Ye,A){return this.apiClient.authenticateDevice(this.serverkey,"",{id:te,vars:A},Ie,Ye).then(B=>new hn(B.token||"",B.refresh_token||"",B.created||!1))}authenticateEmail(te,Ie,Ye,A,k){return this.apiClient.authenticateEmail(this.serverkey,"",{email:te,password:Ie,vars:k},Ye,A).then(L=>new hn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateFacebookInstantGame(te,Ie,Ye,A,k={}){const B={signed_player_info:te,vars:A};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:B.signed_player_info,vars:B.vars},Ie,Ye,k).then(L=>new hn(L.token||"",L.refresh_token||"",L.created||!1))}authenticateFacebook(te,Ie,Ye,A,k,B={}){return this.apiClient.authenticateFacebook(this.serverkey,"",{token:te,vars:k},Ie,Ye,A,B).then(se=>new hn(se.token||"",se.refresh_token||"",se.created||!1))}authenticateGoogle(te,Ie,Ye,A){return M(this,arguments,function*(k,B,L,se,H={}){const de={token:k,vars:se},Ke=yield this.apiClient.authenticateGoogle(this.serverkey,"",de,B,L,H);return new hn(Ke.token||"",Ke.refresh_token||"",Ke.created||!1)})}authenticateGameCenter(te,Ie,Ye,A,k,B,L,se,H){return M(this,arguments,function*(de,Ke,Ve,vt,Ft,_n,He,$e,pt,ot={}){const Dt={bundle_id:de,player_id:Ke,public_key_url:Ve,salt:vt,signature:Ft,timestamp_seconds:_n,vars:pt},vn=yield this.apiClient.authenticateGameCenter(this.serverkey,"",Dt,$e,He,ot);return new hn(vn.token||"",vn.refresh_token||"",vn.created||!1)})}authenticateSteam(te,Ie,Ye,A,k){return M(this,null,function*(){return this.apiClient.authenticateSteam(this.serverkey,"",{token:te,vars:k,sync:A},Ie,Ye).then(L=>new hn(L.token||"",L.refresh_token||"",L.created||!1))})}banGroupUsers(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.banGroupUsers(te.token,Ie,Ye).then(A=>void 0!==A)})}blockFriends(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.blockFriends(te.token,Ie,Ye).then(A=>Promise.resolve(null!=A))})}createGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.createGroup(te.token,Ie).then(Ye=>Promise.resolve({avatar_url:Ye.avatar_url,create_time:Ye.create_time,creator_id:Ye.creator_id,description:Ye.description,edge_count:Ye.edge_count?Number(Ye.edge_count):0,id:Ye.id,lang_tag:Ye.lang_tag,max_count:Ye.max_count?Number(Ye.max_count):0,metadata:Ye.metadata?JSON.parse(Ye.metadata):void 0,name:Ye.name,open:Ye.open,update_time:Ye.update_time}))})}createSocket(te=!1,Ie=!1,Ye=new xt,A=An.DefaultSendTimeoutMs){return new An(this.host,this.port,te,Ie,Ye,A)}deleteAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteAccount(te.token).then(Ie=>void 0!==Ie)})}deleteFriends(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteFriends(te.token,Ie,Ye).then(A=>void 0!==A)})}deleteGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteGroup(te.token,Ie).then(Ye=>void 0!==Ye)})}deleteNotifications(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteNotifications(te.token,Ie).then(Ye=>Promise.resolve(null!=Ye))})}deleteStorageObjects(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteStorageObjects(te.token,Ie).then(Ye=>Promise.resolve(null!=Ye))})}deleteTournamentRecord(te,Ie){return M(this,null,function*(){return this.apiClient.deleteTournamentRecord(te.token,Ie)})}demoteGroupUsers(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.demoteGroupUsers(te.token,Ie,Ye).then(A=>Promise.resolve(null!=A))})}emitEvent(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.event(te.token,Ie).then(Ye=>Promise.resolve(null!=Ye))})}getAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getAccount(te.token)})}getSubscription(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getSubscription(te.token,Ie)})}importFacebookFriends(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importFacebookFriends(te.token,Ie).then(Ye=>void 0!==Ye)})}importSteamFriends(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importSteamFriends(te.token,Ie,Ye).then(A=>void 0!==A)})}getUsers(te,Ie,Ye,A){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getUsers(te.token,Ie,Ye,A).then(k=>{var B={users:[]};return null==k.users||k.users.forEach(L=>{B.users.push({avatar_url:L.avatar_url,create_time:L.create_time,display_name:L.display_name,edge_count:L.edge_count?Number(L.edge_count):0,facebook_id:L.facebook_id,gamecenter_id:L.gamecenter_id,google_id:L.google_id,id:L.id,lang_tag:L.lang_tag,location:L.location,online:L.online,steam_id:L.steam_id,timezone:L.timezone,update_time:L.update_time,username:L.username,metadata:L.metadata?JSON.parse(L.metadata):void 0})}),Promise.resolve(B)})})}joinGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinGroup(te.token,Ie,{}).then(Ye=>void 0!==Ye)})}joinTournament(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinTournament(te.token,Ie,{}).then(Ye=>void 0!==Ye)})}kickGroupUsers(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.kickGroupUsers(te.token,Ie,Ye).then(A=>Promise.resolve(null!=A))})}leaveGroup(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.leaveGroup(te.token,Ie,{}).then(Ye=>void 0!==Ye)})}listChannelMessages(te,Ie,Ye,A,k){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listChannelMessages(te.token,Ie,Ye,A,k).then(B=>{var L={messages:[],next_cursor:B.next_cursor,prev_cursor:B.prev_cursor,cacheable_cursor:B.cacheable_cursor};return null==B.messages||B.messages.forEach(se=>{L.messages.push({channel_id:se.channel_id,code:se.code?Number(se.code):0,create_time:se.create_time,message_id:se.message_id,persistent:se.persistent,sender_id:se.sender_id,update_time:se.update_time,username:se.username,content:se.content?JSON.parse(se.content):void 0,group_id:se.group_id,room_name:se.room_name,user_id_one:se.user_id_one,user_id_two:se.user_id_two})}),Promise.resolve(L)})})}listGroupUsers(te,Ie,Ye,A,k){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroupUsers(te.token,Ie,A,Ye,k).then(B=>{var L={group_users:[],cursor:B.cursor};return null==B.group_users||B.group_users.forEach(se=>{L.group_users.push({user:{avatar_url:se.user.avatar_url,create_time:se.user.create_time,display_name:se.user.display_name,edge_count:se.user.edge_count?Number(se.user.edge_count):0,facebook_id:se.user.facebook_id,gamecenter_id:se.user.gamecenter_id,google_id:se.user.google_id,id:se.user.id,lang_tag:se.user.lang_tag,location:se.user.location,online:se.user.online,steam_id:se.user.steam_id,timezone:se.user.timezone,update_time:se.user.update_time,username:se.user.username,metadata:se.user.metadata?JSON.parse(se.user.metadata):void 0},state:se.state?Number(se.state):0})}),Promise.resolve(L)})})}listUserGroups(te,Ie,Ye,A,k){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listUserGroups(te.token,Ie,Ye,A,k).then(B=>{var L={user_groups:[],cursor:B.cursor};return null==B.user_groups||B.user_groups.forEach(se=>{L.user_groups.push({group:{avatar_url:se.group.avatar_url,create_time:se.group.create_time,creator_id:se.group.creator_id,description:se.group.description,edge_count:se.group.edge_count?Number(se.group.edge_count):0,id:se.group.id,lang_tag:se.group.lang_tag,max_count:se.group.max_count,metadata:se.group.metadata?JSON.parse(se.group.metadata):void 0,name:se.group.name,open:se.group.open,update_time:se.group.update_time},state:se.state?Number(se.state):0})}),Promise.resolve(L)})})}listGroups(te,Ie,Ye,A){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroups(te.token,Ie,Ye,A).then(k=>{var B={groups:[]};return null==k.groups||(B.cursor=k.cursor,k.groups.forEach(L=>{B.groups.push({avatar_url:L.avatar_url,create_time:L.create_time,creator_id:L.creator_id,description:L.description,edge_count:L.edge_count?Number(L.edge_count):0,id:L.id,lang_tag:L.lang_tag,max_count:L.max_count,metadata:L.metadata?JSON.parse(L.metadata):void 0,name:L.name,open:L.open,update_time:L.update_time})})),Promise.resolve(B)})})}linkApple(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkApple(te.token,Ie).then(Ye=>void 0!==Ye)})}linkCustom(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkCustom(te.token,Ie).then(Ye=>void 0!==Ye)})}linkDevice(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkDevice(te.token,Ie).then(Ye=>void 0!==Ye)})}linkEmail(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkEmail(te.token,Ie).then(Ye=>void 0!==Ye)})}linkFacebook(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebook(te.token,Ie).then(Ye=>void 0!==Ye)})}linkFacebookInstantGame(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebookInstantGame(te.token,Ie).then(Ye=>void 0!==Ye)})}linkGoogle(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGoogle(te.token,Ie).then(Ye=>void 0!==Ye)})}linkGameCenter(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGameCenter(te.token,Ie).then(Ye=>void 0!==Ye)})}linkSteam(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkSteam(te.token,Ie).then(Ye=>void 0!==Ye)})}listFriends(te,Ie,Ye,A){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriends(te.token,Ye,Ie,A).then(k=>{var B={friends:[],cursor:k.cursor};return null==k.friends||k.friends.forEach(L=>{B.friends.push({user:{avatar_url:L.user.avatar_url,create_time:L.user.create_time,display_name:L.user.display_name,edge_count:L.user.edge_count?Number(L.user.edge_count):0,facebook_id:L.user.facebook_id,gamecenter_id:L.user.gamecenter_id,google_id:L.user.google_id,id:L.user.id,lang_tag:L.user.lang_tag,location:L.user.location,online:L.user.online,steam_id:L.user.steam_id,timezone:L.user.timezone,update_time:L.user.update_time,username:L.user.username,metadata:L.user.metadata?JSON.parse(L.user.metadata):void 0,facebook_instant_game_id:L.user.facebook_instant_game_id},state:L.state})}),Promise.resolve(B)})})}listFriendsOfFriends(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriendsOfFriends(te.token,Ie,Ye).then(A=>{var k={friends_of_friends:[],cursor:A.cursor};return null==A.friends_of_friends||A.friends_of_friends.forEach(B=>{k.friends_of_friends.push({referrer:B.referrer,user:{avatar_url:B.user.avatar_url,create_time:B.user.create_time,display_name:B.user.display_name,edge_count:B.user.edge_count?Number(B.user.edge_count):0,facebook_id:B.user.facebook_id,gamecenter_id:B.user.gamecenter_id,google_id:B.user.google_id,id:B.user.id,lang_tag:B.user.lang_tag,location:B.user.location,online:B.user.online,steam_id:B.user.steam_id,timezone:B.user.timezone,update_time:B.user.update_time,username:B.user.username,metadata:B.user.metadata?JSON.parse(B.user.metadata):void 0,facebook_instant_game_id:B.user.facebook_instant_game_id}})}),Promise.resolve(k)})})}listLeaderboardRecords(te,Ie,Ye,A,k,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecords(te.token,Ie,Ye,A,k,B).then(L=>{var se={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,rank_count:L.rank_count?Number(L.rank_count):0,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{se.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{se.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(se)})})}listLeaderboardRecordsAroundOwner(te,Ie,Ye,A,k,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecordsAroundOwner(te.token,Ie,Ye,A,k,B).then(L=>{var se={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,rank_count:L.rank_count?Number(L.rank_count):0,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{se.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{se.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(se)})})}listMatches(te,Ie,Ye,A,k,B,L){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listMatches(te.token,Ie,Ye,A,k,B,L)})}listNotifications(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listNotifications(te.token,Ie,Ye).then(A=>{var k={cacheable_cursor:A.cacheable_cursor,notifications:[]};return null==A.notifications||A.notifications.forEach(B=>{k.notifications.push({code:B.code?Number(B.code):0,create_time:B.create_time,id:B.id,persistent:B.persistent,sender_id:B.sender_id,subject:B.subject,content:B.content?JSON.parse(B.content):void 0})}),Promise.resolve(k)})})}listStorageObjects(te,Ie,Ye,A,k){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listStorageObjects(te.token,Ie,Ye,A,k).then(B=>{var L={objects:[],cursor:B.cursor};return null==B.objects||B.objects.forEach(se=>{L.objects.push({collection:se.collection,key:se.key,permission_read:se.permission_read?Number(se.permission_read):0,permission_write:se.permission_write?Number(se.permission_write):0,value:se.value?JSON.parse(se.value):void 0,version:se.version,user_id:se.user_id,create_time:se.create_time,update_time:se.update_time})}),Promise.resolve(L)})})}listTournaments(te,Ie,Ye,A,k,B,L){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournaments(te.token,Ie,Ye,A,k,B,L).then(se=>{var H={cursor:se.cursor,tournaments:[]};return null!=se.tournaments&&se.tournaments.forEach(de=>{H.tournaments.push({id:de.id,title:de.title,description:de.description,duration:de.duration?Number(de.duration):0,category:de.category?Number(de.category):0,sort_order:de.sort_order?Number(de.sort_order):0,size:de.size?Number(de.size):0,max_size:de.max_size?Number(de.max_size):0,max_num_score:de.max_num_score?Number(de.max_num_score):0,can_enter:de.can_enter,end_active:de.end_active?Number(de.end_active):0,next_reset:de.next_reset?Number(de.next_reset):0,metadata:de.metadata?JSON.parse(de.metadata):void 0,create_time:de.create_time,start_time:de.start_time,end_time:de.end_time,start_active:de.start_active,authoritative:de.authoritative})}),Promise.resolve(H)})})}listSubscriptions(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listSubscriptions(te.token,{cursor:Ie,limit:Ye})})}listTournamentRecords(te,Ie,Ye,A,k,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecords(te.token,Ie,Ye,A,k,B).then(L=>{var se={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{se.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{se.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(se)})})}listTournamentRecordsAroundOwner(te,Ie,Ye,A,k,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecordsAroundOwner(te.token,Ie,Ye,A,k,B).then(L=>{var se={next_cursor:L.next_cursor,prev_cursor:L.prev_cursor,owner_records:[],records:[]};return null!=L.owner_records&&L.owner_records.forEach(H=>{se.owner_records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),null!=L.records&&L.records.forEach(H=>{se.records.push({expiry_time:H.expiry_time,leaderboard_id:H.leaderboard_id,metadata:H.metadata?JSON.parse(H.metadata):void 0,num_score:H.num_score?Number(H.num_score):0,owner_id:H.owner_id,rank:H.rank?Number(H.rank):0,score:H.score?Number(H.score):0,subscore:H.subscore?Number(H.subscore):0,update_time:H.update_time,username:H.username,max_num_score:H.max_num_score?Number(H.max_num_score):0})}),Promise.resolve(se)})})}promoteGroupUsers(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.promoteGroupUsers(te.token,Ie,Ye)})}readStorageObjects(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.readStorageObjects(te.token,Ie).then(Ye=>{var A={objects:[]};return null==Ye.objects||Ye.objects.forEach(k=>{A.objects.push({collection:k.collection,key:k.key,permission_read:k.permission_read?Number(k.permission_read):0,permission_write:k.permission_write?Number(k.permission_write):0,value:k.value?JSON.parse(k.value):void 0,version:k.version,user_id:k.user_id,create_time:k.create_time,update_time:k.update_time})}),Promise.resolve(A)})})}rpc(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.rpcFunc(te.token,Ie,JSON.stringify(Ye)).then(A=>Promise.resolve({id:A.id,payload:A.payload?JSON.parse(A.payload):void 0}))})}rpcHttpKey(te,Ie,Ye){return M(this,null,function*(){return this.apiClient.rpcFunc2("",Ie,Ye&&JSON.stringify(Ye)||"",te).then(A=>Promise.resolve({id:A.id,payload:A.payload?JSON.parse(A.payload):void 0})).catch(A=>{throw A})})}sessionLogout(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.sessionLogout(te.token,{refresh_token:Ye,token:Ie}).then(A=>void 0!==A)})}sessionRefresh(te){return M(this,arguments,function*(Ie,Ye={}){if(!Ie)return console.error("Cannot refresh a null session."),Ie;Ie.created&&Ie.expires_at-Ie.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),Ie.created&&Ie.refresh_expires_at-Ie.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const A=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:Ie.refresh_token,vars:Ye});return Ie.update(A.token,A.refresh_token),Ie})}unlinkApple(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkApple(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkCustom(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkCustom(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkDevice(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkDevice(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkEmail(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkEmail(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkFacebook(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebook(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkFacebookInstantGame(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebookInstantGame(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkGoogle(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGoogle(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkGameCenter(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGameCenter(te.token,Ie).then(Ye=>void 0!==Ye)})}unlinkSteam(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkSteam(te.token,Ie).then(Ye=>void 0!==Ye)})}updateAccount(te,Ie){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateAccount(te.token,Ie).then(Ye=>void 0!==Ye)})}updateGroup(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateGroup(te.token,Ie,Ye).then(A=>void 0!==A)})}validatePurchaseApple(te,Ie,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseApple(te.token,{receipt:Ie,persist:Ye})})}validatePurchaseFacebookInstant(te,Ie,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseFacebookInstant(te.token,{signed_request:Ie,persist:Ye})})}validatePurchaseGoogle(te,Ie,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseGoogle(te.token,{purchase:Ie,persist:Ye})})}validatePurchaseHuawei(te,Ie,Ye,A=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseHuawei(te.token,{purchase:Ie,signature:Ye,persist:A})})}validateSubscriptionApple(te,Ie,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionApple(te.token,{receipt:Ie,persist:Ye})})}validateSubscriptionGoogle(te,Ie,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionGoogle(te.token,{receipt:Ie,persist:Ye})})}writeLeaderboardRecord(te,Ie,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.writeLeaderboardRecord(te.token,Ie,{metadata:Ye.metadata?JSON.stringify(Ye.metadata):void 0,score:Ye.score,subscore:Ye.subscore}).then(A=>Promise.resolve({expiry_time:A.expiry_time,leaderboard_id:A.leaderboard_id,metadata:A.metadata?JSON.parse(A.metadata):void 0,num_score:A.num_score?Number(A.num_score):0,owner_id:A.owner_id,score:A.score?Number(A.score):0,subscore:A.subscore?Number(A.subscore):0,update_time:A.update_time,username:A.username,max_num_score:A.max_num_score?Number(A.max_num_score):0,rank:A.rank?Number(A.rank):0}))})}writeStorageObjects(te,Ie){return M(this,null,function*(){this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te));var Ye={objects:[]};return Ie.forEach(A=>{Ye.objects.push({collection:A.collection,key:A.key,permission_read:A.permission_read,permission_write:A.permission_write,value:JSON.stringify(A.value),version:A.version})}),this.apiClient.writeStorageObjects(te.token,Ye)})}writeTournamentRecord(te,Ie,Ye){return M(this,null,function*(){return this.apiClient.writeTournamentRecord(te.token,Ie,{metadata:Ye.metadata?JSON.stringify(Ye.metadata):void 0,score:Ye.score,subscore:Ye.subscore}).then(A=>Promise.resolve({expiry_time:A.expiry_time,leaderboard_id:A.leaderboard_id,metadata:A.metadata?JSON.parse(A.metadata):void 0,num_score:A.num_score?Number(A.num_score):0,owner_id:A.owner_id,score:A.score?Number(A.score):0,subscore:A.subscore?Number(A.subscore):0,update_time:A.update_time,username:A.username,max_num_score:A.max_num_score?Number(A.max_num_score):0,rank:A.rank?Number(A.rank):0}))})}},Xt=je(8326),yn=je(617),Kt=je(7100),an=je(3953),Yn=je(9900),Bt=je(8065),nn=je(755),On=je(5547),wn=je(5374),zn=je(3656),lr=je(4234),sr=je(3307),mr=function(te){return te[te.MANAGE_TODO=10]="MANAGE_TODO",te[te.EDIT_PROFILE=11]="EDIT_PROFILE",te[te.MANAGE_POST=12]="MANAGE_POST",te[te.ADD_CHANNEL=14]="ADD_CHANNEL",te[te.NAME_OVERRIDED=15]="NAME_OVERRIDED",te[te.USER_PROFILE_CHANGED=100]="USER_PROFILE_CHANGED",te[te.USER_PROFILE_IMAGE_CHANGED=101]="USER_PROFILE_IMAGE_CHANGED",te[te.CHATROOM_CHECKED=102]="CHATROOM_CHECKED",te}(mr||{});let Mr=(()=>{var te;class Ie{constructor(A,k,B,L,se,H,de,Ke,Ve){this.p5toast=A,this.statusBar=k,this.indexed=B,this.noti=L,this.alertCtrl=se,this.lang=H,this.global=de,this.navCtrl=Ke,this.p5loading=Ve,this.profile={content:{type:void 0,path:void 0}},this.servers={official:{},unofficial:{}},this.showServer=!1,this.NeedLocalPush=[],this.HasRemovedChannel=!1,this.TogglingSession=!1,this.noti_origin={},this.AfterLoginActDone=!1,this.AfterLoginAct=[],this.ArcadeListOfficial=[],this.ArcadeListOrig={},this.ArcadeList=[],this.RemoteTodoCounter={},this.PromotedGroup={},this.users={self:{},deleted:{},official:{},unofficial:{}},this.notifications_rearrange=[],this.groups={official:{},unofficial:{}},this.channels_orig={local:{},official:{},unofficial:{}},this.noti_id=2e3,this.registered_id=[],this.channels=[],this.socket_reactive={},this.on_socket_connected={},this.on_socket_disconnected={},this.match_act={},this.opened_page_info={},this.subscribe_lock=!1,this.has_new_channel_msg=!1,this.has_new_post=!1,this.posts_orig={local:{target:{me:{}}},official:{},unofficial:{}},this.posts=[],this.HyperLinkDescList=[],this.isRequestingLinkInfo=!1,this.OnTransfer={},this.OnTransferMessage={},this.usernameOverride={local:{target:{}}},this.post_counter={local:{target:{me:0}},official:{},unofficial:{}},de.CallbackNakama=this,L.NakamaCallback=this}initialize(){var A=this;return(0,F.A)(function*(){yield A.set_all_todo_notification();let k=yield A.indexed.loadTextFromUserPath("servers/self/profile.json");k&&(A.users.self=JSON.parse(k));try{let Ke=(yield A.indexed.loadTextFromUserPath("servers/self/profile.img")).replace(/"|\\|=/g,"");Ke&&(A.users.self.img=Ke)}catch{}yield A.LoadOverridesOffline();let B=yield A.indexed.loadTextFromUserPath("servers/groups.json");B&&(A.groups=JSON.parse(B)),A.rearrange_group_list().forEach(function(){var Ke=(0,F.A)(function*(Ve){let vt=yield A.indexed.loadTextFromUserPath(`servers/${Ve.server.isOfficial}/${Ve.server.target}/groups/${Ve.id}.img`);if(vt&&(Ve.img=vt.replace(/"|=|\\/g,"")),"missing"!=Ve.status){delete Ve.status;let Ft=Ve.server.isOfficial,_n=Ve.server.target;if(A.CreateEmptyForm(Ft,_n),Ve.users)for(let He=0,$e=Ve.users.length;He<$e;He++)Ve.users[He].is_me||(Ve.users[He].user=A.load_other_user(Ve.users[He].user.id,Ft,_n))}});return function(Ve){return Ke.apply(this,arguments)}}()),yield A.load_channel_list(),A.load_posts_counter(),yield A.CheckIfLostLocal(),A.rearrange_channels();let se=yield A.indexed.loadTextFromUserPath("servers/list.json");se&&(A.statusBar.groupServer=JSON.parse(se)),Object.keys(A.statusBar.groupServer).forEach(Ke=>{A.servers[Ke]?Object.keys(A.statusBar.groupServer[Ke]).forEach(vt=>{A.servers[Ke][vt]||delete A.statusBar.groupServer[Ke][vt]}):delete A.statusBar.groupServer[Ke]}),A.showServer=!!localStorage.getItem("showServer"),A.catch_group_server_header("offline");let de=yield A.indexed.loadTextFromUserPath("servers/list_detail.csv");if(de)de.split("\n").forEach(Ve=>{let vt=Ve.split(","),_n={isOfficial:vt[1],name:vt[2],target:vt[3],address:vt[4],nakama_port:vt[5]?+vt[5]:void 0,cdn_port:vt[7]?+vt[7]:void 0,apache_port:vt[8]?+vt[8]:void 0,square_port:vt[9]?+vt[9]:void 0,webrtc_port:vt[10]?+vt[10]:void 0,useSSL:"true"==vt[6]};A.servers[_n.isOfficial][_n.target]={},A.servers[_n.isOfficial][_n.target].info=_n,A.init_server(_n),A.users.self.online&&A.init_session(_n)});else{let Ke=location.href.split("?").length>1;(A.users.self.online||Ke)&&A.toggle_all_session()}})()}CheckIfLostLocal(){var A=this;return(0,F.A)(function*(){let k=yield A.indexed.GetFileListFromDB("servers/local/target/channels");for(let B of k)try{let L=B.split("/");if(5==L.length){let se=L.pop();A.channels_orig.local.target||(A.channels_orig.local.target={}),A.channels_orig.local.target[se]||(A.channels_orig.local.target[se]={CDN:0,id:se,info:{isOfficial:"local",target:"target",name:A.lang.text.Nakama.DamagedChannel},local:!0,redirect:{type:0},server:{isOfficial:"local",target:"target",name:"\uc0ad\uc81c\ub41c \uc11c\ubc84"},status:"online",title:A.lang.text.Nakama.DamagedChannel})}}catch(L){console.log("\ub85c\uceec \ucc44\ub110 \uc7ac\uac80\ud1a0 \ub2e8\uacc4 \uc624\ub958: ",L)}})()}set_all_todo_notification(){var A=this;return(0,F.A)(function*(){let k=yield A.indexed.GetFileListFromDB("info.todo");for(let B=0,L=k.length;B<L;B++){let se=yield A.indexed.loadTextFromUserPath(k[B]);if(se){let H=JSON.parse(se);A.registered_id.push(H.noti_id),A.set_todo_notification(H)}}})()}getGodotDBRecursive(){var A=this;return(0,F.A)(function*(){try{if(void 0===A.indexed.godotDB)throw"Retry catch godotDB";return}catch{return yield new Promise(B=>{setTimeout(()=>{B(void 0)},100)}),yield A.getGodotDBRecursive()}})()}open_add_todo_page(A="",k="portal/main/add-todo-menu"){this.AddTodoLinkAct?this.AddTodoLinkAct(A):this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(k,{animation:yn.V5,state:{data:A}})})}open_others_profile(A){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("others-profile",{animation:yn.V5,state:A})})}set_todo_notification(A){var k=this;return(0,F.A)(function*(){if(k.RemoveLocalPushSchedule(A),(A.startFrom||A.limit)>Date.now()&&k.NeedLocalPush.push(A),!k.p5todotimer&&k.NeedLocalPush.length){let L=[];k.global.windowOnFocusAct["todo-timer"]=()=>{L.forEach(H=>clearTimeout(H)),L.length=0};const se=H=>{const de=H.custom_color;let Ke;switch(H.importance){case"0":Ke="58a192";break;case"1":Ke="ddbb41";break;case"2":Ke="b95437"}return de?de.substring(1):Ke};k.global.WindowOnBlurAct["todo-timer"]=()=>{for(let H=k.NeedLocalPush.length-1;H>=0;H--){const de=k.NeedLocalPush[H],Ve=new Date(de.startFrom||de.limit).getTime()-(new Date).getTime();if(Ve>0&&Ve<2147483647){let vt=setTimeout((0,F.A)(function*(){let Ft;try{let He;try{He=`todo/${de.id}_${de.remote.isOfficial}_${de.remote.target}/thumbnail.png`}catch{He=`todo/${de.id}/thumbnail.png`}let $e=yield k.indexed.loadBlobFromUserPath(He,"image/png");Ft=URL.createObjectURL($e)}catch{}const _n=se(de);yield k.noti.PushLocal({id:de.noti_id,title:de.title,body:de.description,image:Ft,smallIcon_ln:"todo",bgcolor:_n},void 0,He=>{k.open_add_todo_page(JSON.stringify(de),"add-todo-menu")}),setTimeout(()=>{try{URL.revokeObjectURL(Ft)}catch{}},1e3),k.NeedLocalPush.splice(H,1)}),Ve);L.push(vt)}}},k.p5todotimer=new Xt(H=>{H.setup=()=>{H.noCanvas(),H.frameRate(.5)},H.draw=()=>{const de=Date.now();for(let Ke=k.NeedLocalPush.length-1;Ke>=0;Ke--)(k.NeedLocalPush[Ke].startFrom||k.NeedLocalPush[Ke].limit)<de&&function(){var Ft=(0,F.A)(function*(){let _n;try{let pt;try{pt=`todo/${k.NeedLocalPush[Ke].id}_${k.NeedLocalPush[Ke].remote.isOfficial}_${k.NeedLocalPush[Ke].remote.target}/thumbnail.png`}catch{pt=`todo/${k.NeedLocalPush[Ke].id}/thumbnail.png`}let ot=yield k.indexed.loadBlobFromUserPath(pt,"image/png");_n=URL.createObjectURL(ot)}catch{}const He=JSON.stringify(k.NeedLocalPush[Ke]),$e=se(k.NeedLocalPush[Ke]);yield k.noti.PushLocal({id:k.NeedLocalPush[Ke].noti_id,title:k.NeedLocalPush[Ke].title,body:k.NeedLocalPush[Ke].description,image:_n,smallIcon_ln:"todo",bgcolor:$e},void 0,pt=>{k.open_add_todo_page(He,"add-todo-menu")}),setTimeout(()=>{try{URL.revokeObjectURL(_n)}catch{}},1e3),k.NeedLocalPush.splice(Ke,1)});return function(){return Ft.apply(this,arguments)}}()();k.NeedLocalPush.length||(H.remove(),k.p5todotimer=null)}})}})()}RemoveLocalPushSchedule(A){for(let k=this.NeedLocalPush.length-1;k>=0;k--)if(this.NeedLocalPush[k].id==A.id){this.NeedLocalPush.splice(k,1);break}}init_server(A){this.servers[A.isOfficial][A.target]||(this.servers[A.isOfficial][A.target]={}),this.servers[A.isOfficial][A.target].client=new pn(A.key||"defaultkey",A.address,(A.nakama_port||7350).toString(),A.useSSL||!1,3e5,!0)}go_to_chatroom(A,k){this.has_new_channel_msg=!1,A.update&&delete A.update,this.ChatroomLinkAct?this.ChatroomLinkAct(A,k):(this.SelectSubscribesTab&&this.SelectSubscribesTab(!1),this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/subscribes/chat-room",{state:{info:A,file:k}})}))}add_new_group(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("add-group",{animation:yn.V5})})}clear_removed_groups(){var A=this;this.HasRemovedChannel&&this.alertCtrl.create({header:this.lang.text.Nakama.RemovedChannels,message:this.lang.text.Nakama.ClearMissings,buttons:[{text:this.lang.text.UserFsDir.Delete,cssClass:"redfont",handler:()=>{!function(){var B=(0,F.A)(function*(){const L=`subscribes_remove_1:1_${Date.now()}`;for(let H=A.channels.length-1;H>=0;H--)if("missing"==A.channels[H].status){var se;const de=A.channels[H].server.isOfficial,Ke=A.channels[H].server.target,Ve=A.channels[H];let Ft,vt=Ve.title;vt=2==Ve.redirect.type?vt||A.lang.text.Profile.noname_user:vt||A.lang.text.ChatRoom.noname_chatroom,yield A.p5loading.update({id:L});try{Ft=A.servers[de][Ke].info}catch($e){console.log("\uc0ad\uc81c\ub41c \uc11c\ubc84\uc758 \ucc44\ub110 \uc0ad\uc81c: ",$e)}try{yield A.remove_group_list(A.groups[de][Ke][Ve.group_id],de,Ke,!0)}catch{}delete A.channels_orig[de][Ke][Ve.id];try{yield A.remove_channel_files(de,Ke,Ve.id,void 0,L)}catch{}let _n=`${Ve.id}_${A.users.self.display_name}`;try{_n=`${Ve.info.id}_${Ft.session.user_id}`}catch{}if(0==(null===(se=Ve.id)||void 0===se?void 0:se.indexOf("4.")))try{_n=`${Ve.user_id_one!=A.servers[de][Ke].session.user_id?Ve.user_id_one:Ve.user_id_two}_${A.servers[de][Ke].session.user_id}`}catch{}try{let $e=localStorage.getItem("fallback_fs");if(!$e)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let pt=$e.split("://"),ot=pt.pop().split(":"),Dt=pt.pop();Dt?Dt+=":":Dt=A.global.checkProtocolFromAddress(ot[0])?"https:":"http:";let vn=`${Dt}//${ot[0]}:${ot[1]||9002}/`;ot&&(yield A.global.remove_files_from_storage_with_key(vn,_n,{}))}catch{}try{let pt=Ft.address,ot=`${[Ft.useSSL?"https:":"http:"]}//${pt}:${Ft.apache_port||9002}/`;pt&&(yield A.global.remove_files_from_storage_with_key(ot,_n,{apache_port:Ft.apache_port,cdn_port:Ft.cdn_port}))}catch{}let He=yield A.indexed.GetFileListFromDB(`servers/${de}/${Ke}/channels/${Ve.id}`);for(let $e=0,pt=He.length;$e<pt;$e++){yield A.p5loading.update({id:L,message:`${A.lang.text.UserFsDir.DeleteFile}: ${vt} (${He[$e].split("/").pop()})`,progress:$e/pt});try{yield A.indexed.removeFileFromUserPath(He[$e])}catch{}}A.rearrange_channels()}A.p5loading.remove(L)});return function(){return B.apply(this,arguments)}}()()}}]}).then(k=>k.present())}open_profile_page(A){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("group-server",{animation:yn.V5,state:A})})}open_post(A,k,B=""){A.router=B,this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(B+"post-viewer",{animation:yn.V5,state:{data:A,index:k+1}})})}init_all_sessions(){var A=this;return(0,F.A)(function*(){const k="nakama_login";let B=Object.keys(A.servers.official);for(let se=0,H=B.length;se<H;se++)yield A.p5loading.update({id:k,message:`${A.lang.text.Nakama.PendingLogin}: ${A.servers.unofficial[B[se]].info.name}`,forceEnd:null},!0),yield A.init_session(A.servers.official[B[se]].info);let L=Object.keys(A.servers.unofficial);for(let se=0,H=L.length;se<H;se++)yield A.p5loading.update({id:k,message:`${A.lang.text.Nakama.PendingLogin}: ${A.servers.unofficial[L[se]].info.name}`,forceEnd:null},!0),console.log(),yield A.init_session(A.servers.unofficial[L[se]].info);return B.length+L.length})()}logout_all_server(){let A=Object.keys(this.statusBar.groupServer);for(let k=0,B=A.length;k<B;k++){let L=Object.keys(this.statusBar.groupServer[A[k]]);for(let se=0,H=L.length;se<H;se++)"online"==this.statusBar.groupServer[A[k]][L[se]]&&(this.servers[A[k]][L[se]].socket?this.servers[A[k]][L[se]].socket.disconnect(!0):this.link_group(A[k],L[se],!1))}}toggle_all_session(){var A=this;return(0,F.A)(function*(){if(A.TogglingSession)return;const k="nakama_login";if(A.TogglingSession=!0,"online"==A.statusBar.settings.groupServer)A.logout_all_server(),A.p5toast.show({text:A.lang.text.Nakama.SessionLogout});else{yield A.p5loading.update({id:k,message:A.lang.text.Nakama.PendingLogin,forceEnd:null});try{(yield A.init_all_sessions())||(yield A.p5loading.update({id:k,message:A.lang.text.Nakama.NoLoginServer},!0))}catch(B){console.log("\ud14c\uc2a4\ud2b8 \uc11c\ubc84 \uc5f0\uacb0 \uc624\ub958: ",B)}}A.p5loading.remove(k),A.TogglingSession=!1})()}link_group(A,k,B="offline"==this.statusBar.groupServer[A][k]){var L=this;return(0,F.A)(function*(){if(B)L.statusBar.groupServer[A][k]="pending",L.catch_group_server_header("pending"),L.users.self.online&&(yield L.init_session(L.servers[A][k].info));else{L.channels_orig[A]&&L.channels_orig[A][k]&&Object.keys(L.channels_orig[A][k]).forEach(H=>{"missing"!=L.channels_orig[A][k][H].status&&delete L.channels_orig[A][k][H].status}),L.groups[A]&&L.groups[A][k]&&Object.keys(L.groups[A][k]).forEach(H=>{"missing"!=L.groups[A][k][H].status&&(L.groups[A][k][H].status="offline")}),L.set_group_statusBar("offline",A,k),L.statusBar.groupServer[A][k]="offline",L.catch_group_server_header("offline");try{yield L.servers[A][k].client.sessionLogout(L.servers[A][k].session,L.servers[A][k].session.token,L.servers[A][k].session.refresh_token)}catch{}L.noti_origin[A]&&L.noti_origin[A][k]&&delete L.noti_origin[A][k],L.rearrange_notifications(),L.channels_orig[A]&&L.channels_orig[A][k]&&Object.keys(L.channels_orig[A][k]).forEach(H=>{"missing"!=L.channels_orig[A][k][H].status&&delete L.channels_orig[A][k][H].status})}L.indexed.saveTextFileToUserPath(JSON.stringify(L.statusBar.groupServer),"servers/list.json")})()}get_all_online_server(){let A=[];return Object.keys(this.servers.official).forEach(L=>{"online"==this.statusBar.groupServer.official[L]&&A.push(this.servers.official[L])}),Object.keys(this.servers.unofficial).forEach(L=>{"online"==this.statusBar.groupServer.unofficial[L]&&A.push(this.servers.unofficial[L])}),A}get_all_server_info(A=!1,k=!1){let B=[],L=Object.keys(this.servers.official);return A&&L.forEach(H=>{k?("online"==this.statusBar.groupServer.official[H]||"pending"==this.statusBar.groupServer.official[H])&&B.push(this.servers.official[H].info):this.servers.official[H]&&B.push(this.servers.official[H].info)}),Object.keys(this.servers.unofficial).forEach(H=>{k?("online"==this.statusBar.groupServer.unofficial[H]||"pending"==this.statusBar.groupServer.unofficial[H])&&B.push(this.servers.unofficial[H].info):this.servers.unofficial[H]&&B.push(this.servers.unofficial[H].info)}),B}add_group_server(A,k=(()=>{})){var B=this;if(this.statusBar.groupServer.unofficial[A.target||A.name])return void this.p5toast.show({text:`${this.lang.text.Nakama.AlreadyHaveTargetName}: ${A.target||A.name}`});A.target=A.target||A.name,A.address=A.address||"192.168.0.1",A.nakama_port=A.nakama_port,A.cdn_port=A.cdn_port,A.apache_port=A.apache_port,A.square_port=A.square_port,A.webrtc_port=A.webrtc_port,A.useSSL=A.useSSL||!1,A.isOfficial=A.isOfficial||"unofficial",A.key=A.key||"";let L=(new Date).getTime().toString();return L+=`,${A.isOfficial}`,L+=`,${A.name}`,L+=`,${A.target}`,L+=`,${A.address}`,L+=`,${A.nakama_port||""}`,L+=`,${A.useSSL||""}`,L+=`,${A.cdn_port||""}`,L+=`,${A.apache_port||""}`,L+=`,${A.square_port||""}`,L+=`,${A.webrtc_port||""}`,new Promise(function(){var se=(0,F.A)(function*(H){yield B.AutoGenWebRTCInfo(A),"official"!=A.isOfficial?B.indexed.loadTextFromUserPath("servers/list_detail.csv",function(){var de=(0,F.A)(function*(Ke,Ve){let vt=[];Ke&&Ve&&(vt=Ve.split("\n")),vt.push(L),B.indexed.saveTextFileToUserPath(vt.join("\n"),"servers/list_detail.csv").then(()=>{B.init_server(A),B.servers[A.isOfficial][A.target].info={...A},k()}),B.statusBar.groupServer[A.isOfficial][A.target]="offline",yield B.indexed.saveTextFileToUserPath(JSON.stringify(B.statusBar.groupServer),"servers/list.json"),H()});return function(Ke,Ve){return de.apply(this,arguments)}}()):(B.init_server(A),B.servers[A.isOfficial][A.target].info={...A},B.statusBar.groupServer[A.isOfficial][A.target]="offline",H())});return function(H){return se.apply(this,arguments)}}())}AutoGenWebRTCInfo(A){var k=this;return(0,F.A)(function*(){let B={urls:[`stun:${A.address}:${A.webrtc_port||3478}`,`turn:${A.address}:${A.webrtc_port||3478}`],username:"username",credential:"password"};yield k.SaveWebRTCServer(B,!0)})()}SaveWebRTCServer(A,k=!1){var B=this;return(0,F.A)(function*(){let L=(yield B.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",se=JSON.parse(L),H=!1;for(let Ke=0,Ve=Object.keys(se).length;Ke<Ve;Ke++)if(B.catch_address_from_rtc_server_address(A)==B.catch_address_from_rtc_server_address(se[Ke])){se[Ke]=A,H=!0;break}return(!H||k)&&(H||se.push(A),B.p5loading.toast(B.lang.text.Nakama.SaveWebRTCServer,"webrtc_server_save"),yield B.indexed.saveTextFileToUserPath(JSON.stringify(se),"servers/webrtc_server.json")),H})()}RemoveWebRTCServer(A){var k=this;return(0,F.A)(function*(){let B=(yield k.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",L=JSON.parse(B);for(let H=0,de=Object.keys(L).length;H<de;H++){let Ke=k.catch_address_from_rtc_server_address(L[H]);A==Ke&&L.splice(H,1)}yield k.indexed.saveTextFileToUserPath(JSON.stringify(L),"servers/webrtc_server.json")})()}catch_address_from_rtc_server_address(A){let k;try{let B=A.urls[0];(B.indexOf("stun:")>=0||B.indexOf("turn:")>=0)&&(B=B.substring(5));let L=B.lastIndexOf(":");k=B.substring(0,L)}catch(B){console.error("webrtc \uc11c\ubc84 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",B)}return k}catch_group_server_header(A){let k=A;this.statusBar.settings.groupServer=A,setTimeout(()=>{Object.keys(this.statusBar.groupServer.official).forEach(L=>{switch(this.statusBar.groupServer.official[L]){case"online":k="online";break;case"pending":"online"!=k&&(k="pending");break;case"missing":case"offline":"online"!=k&&"pending"!=k&&(k="offline")}}),"online"!=k&&Object.keys(this.statusBar.groupServer.unofficial).forEach(se=>{switch(this.statusBar.groupServer.unofficial[se]){case"online":k="online";break;case"pending":"online"!=k&&(k="pending");break;case"missing":case"offline":"online"!=k&&"pending"!=k&&(k="offline")}}),this.statusBar.settings.groupServer=k},1500)}init_session(A){var k=this;return(0,F.A)(function*(){k.CreateEmptyForm(A.isOfficial,A.target),k.TogglingSession=!0;try{k.servers[A.isOfficial][A.target].session=yield k.servers[A.isOfficial][A.target].client.authenticateEmail(k.users.self.email,k.users.self.password,!1),yield k.after_login(A.isOfficial,A.target,A.useSSL)}catch(B){switch(B.status){case 400:k.p5toast.show({text:k.lang.text.Nakama.NeedLoginInfo}),k.open_profile_page(),k.users.self.online=!1,delete k.users.self.password,k.set_group_statusBar("offline",A.isOfficial,A.target);break;case 401:k.p5toast.show({text:k.lang.text.Nakama.NeedAccountReset}),k.users.self.online=!1,delete k.users.self.password,k.set_group_statusBar("offline",A.isOfficial,A.target);break;case 404:if(k.servers[A.isOfficial][A.target].session=yield k.servers[A.isOfficial][A.target].client.authenticateEmail(k.users.self.email,k.users.self.password,!0),k.users.self.display_name&&k.servers[A.isOfficial][A.target].client.updateAccount(k.servers[A.isOfficial][A.target].session,{display_name:k.users.self.display_name,lang_tag:navigator.language.split("-")[0]||k.lang.lang}),k.p5toast.show({text:`${k.lang.text.Nakama.RegisterUserSucc}: ${A.name}`,lateable:!0}),k.users.self.img)try{yield k.servers[A.isOfficial][A.target].client.writeStorageObjects(k.servers[A.isOfficial][A.target].session,[{collection:"user_public",key:"profile_image",permission_read:2,permission_write:1,value:{img:k.users.self.img}}])}catch(L){console.error("\uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",L)}yield k.after_login(A.isOfficial,A.target,A.useSSL);break;default:k.p5toast.show({text:`(${A.name}) ${k.lang.text.Nakama.UnexpectedLoginErr}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`}),k.set_group_statusBar("offline",A.isOfficial,A.target),k.p5loading.remove("nakama_login")}}k.TogglingSession=!1})()}CreateEmptyForm(A,k){this.groups[A]||(this.groups[A]={}),this.groups[A][k]||(this.groups[A][k]={}),this.channels_orig[A]||(this.channels_orig[A]={}),this.channels_orig[A][k]||(this.channels_orig[A][k]={}),this.usernameOverride[A]||(this.usernameOverride[A]={}),this.usernameOverride[A][k]||(this.usernameOverride[A][k]={}),this.OnTransfer[A]||(this.OnTransfer[A]={}),this.OnTransfer[A][k]||(this.OnTransfer[A][k]={}),this.noti_origin[A]||(this.noti_origin[A]={}),this.noti_origin[A][k]||(this.noti_origin[A][k]={}),this.RemoteTodoCounter[A]||(this.RemoteTodoCounter[A]={}),this.RemoteTodoCounter[A][k]||(this.RemoteTodoCounter[A][k]=[]),this.PromotedGroup[A]||(this.PromotedGroup[A]={}),this.PromotedGroup[A][k]||(this.PromotedGroup[A][k]={})}after_login(A,k,B){var L=this;return(0,F.A)(function*(){L.set_group_statusBar("pending",A,k),L.servers[A][k].socket=L.servers[A][k].client.createSocket(B),L.servers[A][k].client.getAccount(L.servers[A][k].session).then(H=>{let de=JSON.parse(H.user.metadata);L.servers[A][k].info.is_admin=de.is_admin,Object.keys(H.user).forEach(Ve=>{"display_name"==Ve?L.users.self[Ve]=H.user[Ve]:L.users.self.display_name||(L.users.self[Ve]=H.user[Ve])}),L.save_self_profile()}),L.servers[A][k].client.readStorageObjects(L.servers[A][k].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:L.servers[A][k].session.user_id}]}).then(H=>{H.objects.length?L.socket_reactive.profile?(L.users.self.img=H.objects[0].value.img,L.socket_reactive.profile(H.objects[0].value.img)):(L.users.self.img=H.objects[0].value.img,L.indexed.saveTextFileToUserPath(JSON.stringify(L.users.self.img),"servers/self/profile.img")):L.socket_reactive.profile&&L.socket_reactive.profile("")}),yield L.SyncTodoCounter(A,k),L.LoadOverrideName(A,k),L.load_server_arcade_list(A,k),yield L.connect_to(A,k),yield L.redirect_channel(A,k),yield L.get_group_list_from_server(A,k),L.rearrange_group_list(),yield L.load_server_todo(A,k),L.set_group_statusBar("online",A,k),yield L.load_posts_counter([L.servers[A][k].info]),yield L.update_notifications(A,k);for(let H=0,de=L.AfterLoginAct.length;H<de;H++)try{yield L.AfterLoginAct[H]()}catch(Ke){console.error("\uc9c4\uc785 \ub3d9\uc791 \uc624\ub958: ",Ke)}L.AfterLoginAct.length=0,L.AfterLoginActDone=!0;let se=Object.keys(L.users[A][k]||{});se&&L.servers[A][k].client.getUsers(L.servers[A][k].session,se).then(H=>{for(let de=0,Ke=H.users.length;de<Ke;de++)L.save_other_user(H.users[de],A,k)}).catch(H=>{console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",H)}),yield L.CheckHasAvatar(A,k),L.p5loading.remove("nakama_login")})()}CheckHasAvatar(A,k){var B=this;return(0,F.A)(function*(){try{var L;const se="checkAvatar";if(B.global.AvatarThumbnailURL)throw"\uc900\ube44\ub41c \uc544\ubc14\ud0c0 \uc378\ub124\uc77c \uc788\uc74c";if(yield B.indexed.checkIfFileExist("servers/self/avatar.pck"))throw"\uc544\ubc14\ud0c0 pck \ud30c\uc77c \uc788\uc74c";const Ke=null===(L=(yield B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"user_public",key:"avatar",user_id:B.servers[A][k].session.user_id}]})).objects)||void 0===L||null===(L=L[0])||void 0===L||null===(L=L.value)||void 0===L?void 0:L.data;if(!Ke)throw"\ub4f1\ub85d\ub41c \uc544\ubc14\ud0c0 \uc5c6\uc74c";const Ve=yield B.global.downloadWithProgressAsBlob(Ke.url,void 0,se);yield B.indexed.saveBlobToUserPath(Ve,"servers/self/avatar.pck");const vt=yield B.global.downloadWithProgressAsBlob(Ke.thumbnail,void 0,se);B.global.AvatarThumbnailURL=Ke.thumbnail,yield B.indexed.saveBlobToUserPath(vt,"servers/self/avatar.pck_thumbnail.png")}catch(se){console.log("\uc544\ubc14\ud0c0 \ubd88\ub7ec\uc624\uae30 \ub3d9\uc791 \ucde8\uc18c: ",se)}})()}rearrange_arcadeList(){let A=[];const k=Object.keys(this.ArcadeListOrig);for(const B of k){const L=Object.keys(this.ArcadeListOrig[B]);for(const se of L)A=[...A,...this.ArcadeListOrig[B][se]]}this.ArcadeList=A}load_server_arcade_list(A,k){var B=this;return(0,F.A)(function*(){try{const L=yield B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"arcade",key:"url"}]});if(L.objects.length){const se=L.objects[0].value.data,de=yield(yield fetch(se)).json();B.ArcadeListOrig[A]||(B.ArcadeListOrig[A]={}),B.ArcadeListOrig[A][k]=de}}catch(L){console.log("\ub9ac\uc2a4\ud2b8 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",L)}B.rearrange_arcadeList()})()}load_server_todo(A,k){var B=this;return(0,F.A)(function*(){let L=[];yield new Promise(function(){var H=(0,F.A)(function*(de){let Ke=0;const Ve=B.RemoteTodoCounter[A][k];Ve.length||de(void 0);for(let vt=Ve.length-1;vt>=0;vt--){const Ft=`RemoteTodo_${Ve[vt]}`;B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"server_todo",key:Ft,user_id:B.servers[A][k].session.user_id}]}).then(function(){var _n=(0,F.A)(function*(He){if(He.objects.length)yield B.modify_remote_info_as_local(He.objects[0].value,A,k);else try{let $e;B.RemoteTodoCounter[A][k].splice(vt,1);try{$e=`todo/${Ft}_${A}_${k}/info.todo`}catch{$e=`todo/${Ft}/info.todo`}const pt=yield B.indexed.loadTextFromUserPath($e),ot=JSON.parse(pt);B.deleteTodoFromStorage(!0,ot,!0)}catch{}Ke++,L.push(Ft),yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[A][k].info.name} (${B.lang.text.Main.Title})`,progress:Ke/Ve.length}),Ke==Ve.length&&de(void 0)});return function(He){return _n.apply(this,arguments)}}()).catch(_n=>{console.log("\uc11c\ubc84 \ud574\uc57c\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",_n),Ke++,Ke==Ve.length&&de(void 0)})}});return function(de){return H.apply(this,arguments)}}());const se=yield B.indexed.GetFileListFromDB("todo/RemoteTodo_");for(let H=0,de=se.length;H<de;H++){yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[A][k].info.name} (${B.lang.text.Main.Title})`,progress:H/de});try{if(se[H].indexOf("info.todo")>=0){const Ke=yield B.indexed.loadTextFromUserPath(se[H]),Ve=JSON.parse(Ke);if(Ve.remote.isOfficial==A&&Ve.remote.target==k){if(L.includes(Ve.id)){const Ft=L.indexOf(Ve.id);L.splice(Ft,1);continue}(yield B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"server_todo",key:Ve.id,user_id:B.servers[A][k].session.user_id}]})).objects.length||((yield B.indexed.GetFileListFromDB(`todo/${Ve.id}_${A}_${k}`)).forEach(_n=>B.indexed.removeFileFromUserPath(_n)),B.RemoveLocalPushSchedule(Ve),B.noti.ClearNoti(Ve.id),B.global.p5removeTodo&&B.global.p5removeTodo(Ke))}}}catch{}}B.p5loading.remove("nakama_login")})()}getRemoteTodoCounter(A,k){var B=this;return(0,F.A)(function*(){try{B.RemoteTodoCounter[A][k].sort((H,de)=>H-de);let L=B.RemoteTodoCounter[A][k].length;if(!L)throw"\uc815\ud574\uc9c4 \uac12\uc774 \uc5c6\uc5b4?";let se=B.RemoteTodoCounter[A][k][L-1]+1;return B.RemoteTodoCounter[A][k].push(se),se}catch{let se=yield B.SyncTodoCounter(A,k),H=0;return se&&se.objects.length&&se.objects[0].value.data.length?H=se.objects[0].value.data.pop()+1:B.RemoteTodoCounter[A][k]=[0],H}})()}SyncTodoCounter(A,k){var B=this;return(0,F.A)(function*(){try{let L=yield B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"server_todo",key:"RemoteTodo_Counter",user_id:B.servers[A][k].session.user_id}]});return B.RemoteTodoCounter[A][k]=L.objects[0].value.data,L}catch{}})()}removeRemoteTodoCounter(A,k,B){var L=this;return(0,F.A)(function*(){try{let se=L.RemoteTodoCounter[A][k].indexOf(B);se>=0&&L.RemoteTodoCounter[A][k].splice(se,1)}catch{}yield L.updateRemoteCounter(A,k)})()}updateRemoteCounter(A,k){var B=this;return(0,F.A)(function*(){if(B.RemoteTodoCounter[A][k].length){for(let L=B.RemoteTodoCounter[A][k].length-1;L>=0;L--)(void 0===B.RemoteTodoCounter[A][k][L]||null==B.RemoteTodoCounter[A][k][L])&&B.RemoteTodoCounter[A][k].splice(L,1);B.RemoteTodoCounter[A][k].sort((L,se)=>L-se);for(let L=B.RemoteTodoCounter[A][k].length-2;L>=0;L--)B.RemoteTodoCounter[A][k][L+1]==B.RemoteTodoCounter[A][k][L]&&B.RemoteTodoCounter[A][k].splice(L,1)}yield B.servers[A][k].client.writeStorageObjects(B.servers[A][k].session,[{collection:"server_todo",key:"RemoteTodo_Counter",permission_read:2,permission_write:1,value:{data:B.RemoteTodoCounter[A][k]}}])})()}modify_remote_info_as_local(A,k,B){var L=this;return(0,F.A)(function*(){A.remote.name=L.servers[k][B].info.name,A.remote.isOfficial=k,A.remote.target=B,A.remote.type=`${k}/${B}`,L.set_todo_notification(A);try{A.is_me=A.remote.creator_id==L.servers[k][B].session.user_id}catch{}L.global.p5todoAddtodo&&L.global.p5todoAddtodo(JSON.stringify(A));let se=yield L.indexed.loadTextFromUserPath(`todo/${A.id}_${k}_${B}/info.todo`);if(se){let H=JSON.parse(se);if(A.written<=H.written&&H.modified){if(H.done)return void L.doneTodo(A,!0);if(H.removed)return void L.deleteTodoFromStorage(!0,H,!0);delete H.modified,L.global.p5todoAddtodo(JSON.stringify(H)),yield L.indexed.saveTextFileToUserPath(JSON.stringify(H),`todo/${H.id}_${k}_${B}/info.todo`);try{const de=yield L.servers[H.remote.isOfficial][H.remote.target].client.writeStorageObjects(L.servers[H.remote.isOfficial][H.remote.target].session,[{collection:"server_todo",key:H.id,permission_read:2,permission_write:1,value:H}]);yield L.servers[H.remote.isOfficial][H.remote.target].client.rpc(L.servers[H.remote.isOfficial][H.remote.target].session,"send_noti_fn",{receiver_id:L.servers[H.remote.isOfficial][H.remote.target].session.user_id,title:"manage_todo",content:{type:"add",collection:de.acks[0].collection,key:de.acks[0].key},code:mr.MANAGE_TODO,persistent:!1})}catch(de){console.log("\ud560 \uc77c \uc218\uc815 \uc804\ud30c \uc624\ub958: ",de)}}else L.indexed.saveTextFileToUserPath(JSON.stringify(A),`todo/${A.id}_${k}_${B}/info.todo`)}else L.indexed.saveTextFileToUserPath(JSON.stringify(A),`todo/${A.id}_${k}_${B}/info.todo`)})()}doneTodo(A,k=!1){var B=this;return(0,F.A)(function*(){A.done=!0;const L=`nakama_doneTodo_${Date.now()}`;if(B.global.p5todoAddtodo&&B.global.p5todoAddtodo(JSON.stringify(A)),A.remote){k||B.p5loading.update({id:L});try{yield B.servers[A.remote.isOfficial][A.remote.target].client.rpc(B.servers[A.remote.isOfficial][A.remote.target].session,"send_noti_fn",{receiver_id:B.servers[A.remote.isOfficial][A.remote.target].session.user_id,title:"manage_todo",content:{type:"done",id:A.id},code:mr.MANAGE_TODO,persistent:!1}),k||B.p5loading.remove(L)}catch{let H;A.modified=!0;try{H=`todo/${A.id}_${A.remote.isOfficial}_${A.remote.target}/info.todo`}catch{H=`todo/${A.id}/info.todo`}return yield B.indexed.saveTextFileToUserPath(JSON.stringify(A),H),void(k||B.p5loading.remove(L))}}yield B.deleteTodoFromStorage(!1,A,k,L)})()}deleteTodoFromStorage(A,k,B=!1,L){var se=this;return(0,F.A)(function*(){const H=L||`nakama_deleteTodoFromStorage_${Date.now()}`;if(B||se.p5loading.update({id:H,message:`${se.lang.text.TodoDetail.RemoveTodo}: ${k.title}`}),k.attach&&k.attach.length)for(let Ft=0,_n=k.attach.length;Ft<_n;Ft++)k.attach[Ft].url&&""!==k.attach[Ft].type&&se.global.remove_file_from_storage(k.attach[Ft].url,{});if(k.remote)try{if(!se.servers[k.remote.isOfficial][k.remote.target])throw"Server deleted.";try{let Ft=k.remote.isOfficial,_n=k.remote.target;if(yield se.servers[Ft][_n].client.deleteStorageObjects(se.servers[Ft][_n].session,{object_ids:[{collection:"server_todo",key:k.id}]}),k.attach)for(let He=0,$e=k.attach.length;He<$e;He++)k.attach[He].url?""!==k.attach[He].type&&se.global.remove_file_from_storage(k.attach[He].url,{cdn_port:se.servers[Ft][_n].info.cdn_port}):yield se.sync_remove_file(k.attach[He].path,Ft,_n,"todo_attach");A&&(yield se.servers[k.remote.isOfficial][k.remote.target].client.rpc(se.servers[k.remote.isOfficial][k.remote.target].session,"send_noti_fn",{receiver_id:se.servers[k.remote.isOfficial][k.remote.target].session.user_id,title:"manage_todo",content:{type:"delete",id:k.id},code:mr.MANAGE_TODO,persistent:!1}))}catch(Ft){console.error("\ud574\uc57c\ud560 \uc77c \uc0ad\uc81c \uc694\uccad\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",Ft)}try{if(k.remote.creator_id!=se.servers[k.remote.isOfficial][k.remote.target].session.user_id){let Ft=(new Date).getTime();try{yield se.servers[k.remote.isOfficial][k.remote.target].client.rpc(se.servers[k.remote.isOfficial][k.remote.target].session,"manage_todo_done_fn",{id:k.id,creator_id:k.remote.creator_id,user_id:se.servers[k.remote.isOfficial][k.remote.target].session.user_id,timestamp:Ft,isDelete:A})}catch{}try{yield se.servers[k.remote.isOfficial][k.remote.target].client.rpc(se.servers[k.remote.isOfficial][k.remote.target].session,"send_noti_fn",{receiver_id:k.remote.creator_id,title:"Manage_todo_add",content:{type:"worker",id:k.id,isDelete:A,timeAt:Ft},code:mr.MANAGE_TODO,persistent:!1,sender_id:se.servers[k.remote.isOfficial][k.remote.target].session.user_id})}catch{}}}catch{}if(k.workers){try{yield se.servers[k.remote.isOfficial][k.remote.target].client.rpc(se.servers[k.remote.isOfficial][k.remote.target].session,"manage_todo_delete_fn",{id:k.id,workers:k.workers})}catch{}for(let Ft=0,_n=k.workers.length;Ft<_n;Ft++)try{yield se.servers[k.remote.isOfficial][k.remote.target].client.rpc(se.servers[k.remote.isOfficial][k.remote.target].session,"send_noti_fn",{receiver_id:k.workers[Ft].id,title:"Manage_todo_add",content:{type:A?"delete":"done",id:k.id},code:mr.MANAGE_TODO,persistent:!1,sender_id:se.servers[k.remote.isOfficial][k.remote.target].session.user_id})}catch{}}yield se.removeRemoteTodoCounter(k.remote.isOfficial,k.remote.target,Number(k.id.split("_").pop()))}catch{var de,Ke;let _n;k.modified=!0,k.removed=!0;try{_n=`todo/${k.id}_${k.remote.isOfficial}_${k.remote.target}/info.todo`}catch{_n=`todo/${k.id}/info.todo`}return yield se.indexed.saveTextFileToUserPath(JSON.stringify(k),_n),se.removeRegisteredId(k.noti_id),se.noti.ClearNoti(k.noti_id),A&&(null===(de=(Ke=se.global).p5removeTodo)||void 0===de||de.call(Ke,JSON.stringify(k))),void(B||se.p5loading.remove(H))}let Ve;try{Ve=`todo/${k.id}_${k.remote.isOfficial}_${k.remote.target}`}catch{Ve=`todo/${k.id}`}(yield se.indexed.GetFileListFromDB(Ve)).forEach(Ft=>se.indexed.removeFileFromUserPath(Ft)),se.RemoveLocalPushSchedule(k),se.removeRegisteredId(k.noti_id),se.noti.ClearNoti(k.noti_id),A&&se.global.p5todo&&se.global.p5removeTodo(JSON.stringify(k)),B||se.p5loading.remove(H)})()}load_groups(A,k,B,L=!1){var se=this;return(0,F.A)(function*(){let H=se.groups[A][k][B].channel_id;try{if("missing"!=se.groups[A][k][B].status){let de=yield se.servers[A][k].client.listGroupUsers(se.servers[A][k].session,B);if(de.group_users.length){let Ke=!0;for(let Ve=0,vt=de.group_users.length;Ve<vt;Ve++)if(de.group_users[Ve].user.id==se.servers[A][k].session.user_id){switch(de.group_users[Ve].state){case 0:case 1:case 2:se.groups[A][k][B].status="online";break;case 3:se.groups[A][k][B].status="pending";break;default:console.log("\uc774\ud574\ud560 \uc218 \uc5c6\ub294 \ucf54\ub4dc \ubc18\ud658: ",de.group_users[Ve].state),se.groups[A][k][B].status="missing"}se.PromotedGroup[A]||(se.PromotedGroup[A]={}),se.PromotedGroup[A][k]||(se.PromotedGroup[A][k]={}),de.group_users[Ve].state<2?se.PromotedGroup[A][k][B]=!0:delete se.PromotedGroup[A][k][B],Ke=!1,de.group_users[Ve].is_me=!0;break}Ke&&(se.groups[A][k][B].status="missing",H&&(se.channels_orig[A][k][H].status="missing"),se.save_channels_with_less_info())}else se.groups[A][k][B].status="missing",se.channels_orig[A][k][H].status="missing",se.save_channels_with_less_info();de.group_users.length&&(se.groups[A][k][B].users=de.group_users);for(let Ke=0,Ve=de.group_users.length;Ke<Ve;Ke++)if(de.group_users[Ke].is_me)de.group_users[Ke].user=se.users.self;else try{if(L)throw"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub9cc \ubc1b\uc74c";let vt=yield se.servers[A][k].client.readStorageObjects(se.servers[A][k].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:de.group_users[Ke].user.id}]});vt.objects.length?de.group_users[Ke].user.img=vt.objects[0].value.img:delete de.group_users[Ke].user.img,se.save_other_user(de.group_users[Ke].user,A,k)}catch(vt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",vt),se.save_other_user(de.group_users[Ke].user,A,k)}se.save_groups_with_less_info()}}catch(de){console.log("load_groups_error: ",de)}})()}save_profile_to_server(A,k=!0){var B=this;return(0,F.A)(function*(){let L=B.get_all_online_server();if(B.users.self.display_name!==A)for(let se=0,H=L.length;se<H;se++){try{yield L[se].client.updateAccount(L[se].session,{display_name:B.users.self.display_name});try{yield B.servers[L[se].info.isOfficial][L[se].info.target].client.rpc(B.servers[L[se].info.isOfficial][L[se].info.target].session,"send_noti_fn",{receiver_id:B.servers[L[se].info.isOfficial][L[se].info.target].session.user_id,title:"edit_profile",content:{type:"info"},code:mr.EDIT_PROFILE,persistent:!1})}catch(de){console.log("\uc140\ud504 \uc54c\ub9bc \uc2e4\ud328: ",de)}}catch(de){console.log("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",de)}if(k&&B.channels_orig[L[se].info.isOfficial][L[se].info.target]){let de=Object.keys(B.channels_orig[L[se].info.isOfficial][L[se].info.target]);de&&de.forEach(Ke=>{L[se].socket.writeChatMessage(Ke,{user_update:"modify_data",noti_form:A==B.users.self.display_name?`: ${A}`:`: ${A} -> ${B.users.self.display_name}`})})}}B.save_self_profile()})()}save_self_profile(){let A={...this.users.self};delete A.img,this.indexed.saveTextFileToUserPath(JSON.stringify(A),"servers/self/profile.json")}rearrange_all_user(){let A=[];return Object.keys(this.users).forEach(B=>{"self"!=B&&Object.keys(this.users[B]).forEach(se=>{Object.keys(this.users[B][se]).forEach(de=>{A.push(this.users[B][se][de])})})}),A}load_other_user(A,k,B,L=(H=>{}),se=!1){try{if(this.servers[k][B].session.user_id==A)return L(this.users.self),this.users.self}catch{}if(this.users[k][B]||(this.users[k][B]={}),this.users[k][B][A]&&!se)return L(this.users[k][B][A]),this.users[k][B][A];this.users[k][B][A]={};let H=()=>{this.indexed.loadTextFromUserPath(`servers/${k}/${B}/users/${A}/profile.json`,(Ke,Ve)=>{if(Ke&&Ve){let vt=JSON.parse(Ve);Object.keys(vt).forEach(_n=>this.users[k][B][A][_n]=vt[_n])}L(this.users[k][B][A])})};try{this.servers[k][B].client.getUsers(this.servers[k][B].session,[A]).then(Ke=>{Ke.users.length?(Object.keys(Ke.users[0]).forEach(vt=>this.users[k][B][A][vt]=Ke.users[0][vt]),this.users[k][B][A].img||(this.users[k][B][A].img=null),this.save_other_user(this.users[k][B][A],k,B)):(this.indexed.removeFileFromUserPath(`${k}/${B}/users/${A}`),this.indexed.removeFileFromUserPath(`${k}/${B}/users/${A}/profile.json`),this.indexed.removeFileFromUserPath(`${k}/${B}/users/${A}/profile.img`)),L(this.users[k][B][A])}).catch(Ke=>{H()})}catch{H()}let de=()=>{this.users[k][B][A].img&&(delete this.users[k][B][A].img,this.save_other_user(this.users[k][B][A],k,B)),this.indexed.loadTextFromUserPath(`servers/${k}/${B}/users/${A}/profile.img`,(Ke,Ve)=>{Ke&&Ve&&(this.users[k][B][A].img=Ve.replace(/"|=|\\/g,""))})};try{this.servers[k][B].client.readStorageObjects(this.servers[k][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:A}]}).then(Ke=>{Ke.objects.length&&this.users[k][B][A].img!=Ke.objects[0].value.img&&(this.users[k][B][A].img=Ke.objects[0].value.img,this.save_other_user(this.users[k][B][A],k,B))}).catch(Ke=>{de()})}catch{de()}return this.users[k][B][A]}save_other_user(A,k,B){if(this.servers[k][B].session.user_id==A.id)return;let L=JSON.parse(JSON.stringify(A));A.id!=this.servers[k][B].session.user_id&&(delete L.img,delete L.online,delete L.todo_checked,delete L.todo_done,this.users[k][B]||(this.users[k][B]={}),this.users[k][B][A.id]||(this.users[k][B][A.id]={}),Object.keys(A).forEach(H=>this.users[k][B][A.id][H]=A[H]),this.indexed.saveTextFileToUserPath(JSON.stringify(L),`servers/${k}/${B}/users/${L.id}/profile.json`),A.img?this.indexed.saveTextFileToUserPath(A.img,`servers/${k}/${B}/users/${A.id}/profile.img`):void 0===A.img&&this.indexed.removeFileFromUserPath(`servers/${k}/${B}/users/${A.id}/profile.img`))}update_notifications(A,k){var B=this;return(0,F.A)(function*(){let L=yield B.servers[A][k].client.listNotifications(B.servers[A][k].session,1);B.noti_origin[A][k]={};for(let se=0,H=L.notifications.length;se<H;se++)B.act_on_notification(L.notifications[se],A,k);B.rearrange_notifications()})()}rearrange_notifications(){let A=[];return Object.keys(this.noti_origin).forEach(B=>{Object.keys(this.noti_origin[B]).forEach(se=>{Object.keys(this.noti_origin[B][se]).forEach(de=>{A.push(this.noti_origin[B][se][de])})})}),A.sort((B,L)=>B.create_time<L.create_time?1:B.create_time>L.create_time?-1:0),this.notifications_rearrange=A,A}add_channel(A,k,B,L=!1){var se=this;return(0,F.A)(function*(){if(!se.channels_orig[k][B][A.id]){se.channels_orig[k][B][A.id]={};try{L&&(yield se.servers[k][B].client.rpc(se.servers[k][B].session,"send_noti_fn",{receiver_id:se.servers[k][B].session.user_id,title:"add_channel",content:{type:"add",id:A.redirect.id},code:mr.ADD_CHANNEL,persistent:!1}))}catch(de){console.log("\uc0c8 \ucc44\ub110 \uc0dd\uc131\ub428 \uc140\ud504 \uc804\ud30c \uc2e4\ud328: ",de)}}switch(Object.keys(A).forEach(de=>se.channels_orig[k][B][A.id][de]=A[de]),se.channels_orig[k][B][A.id].cnoti_id||(se.channels_orig[k][B][A.id].cnoti_id=se.get_noti_id()),se.channels_orig[k][B][A.id].redirect.type){case 2:let de=se.channels_orig[k][B][A.id].redirect.id;se.channels_orig[k][B][A.id].color=(de.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6);let Ke=se.load_other_user(de,k,B).online?"online":"pending";se.channels_orig[k][B][A.id].status=Ke;break;case 3:try{se.channels_orig[k][B][A.id].color=(se.channels_orig[k][B][A.id].redirect.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),"missing"==se.channels_orig[k][B][A.id].status&&delete se.channels_orig[k][B][A.id].status}catch(Ve){console.error("\uadf8\ub8f9 \ucc44\ub110 \uc0dd\uc131 \uc624\ub958: ",Ve)}break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc885\ub958: ",se.channels_orig[k][B][A.id])}})()}add_group_user_without_duplicate(A,k,B,L){let se=!1;this.groups[B][L][k].users||(this.groups[B][L][k].users=[]);for(let H=0,de=this.groups[B][L][k].users.length;H<de;H++)if(this.groups[B][L][k].users[H].user.id==A.user.id){se=!0;break}se||this.groups[B][L][k].users.push(A)}load_channel_list(){var A=this;return(0,F.A)(function*(){let k=yield A.indexed.loadTextFromUserPath("servers/channels.json");k&&(A.channels_orig=JSON.parse(k),Object.keys(A.channels_orig).forEach(L=>{Object.keys(A.channels_orig[L]).forEach(H=>{A.CreateEmptyForm(L,H),Object.keys(A.channels_orig[L][H]).forEach(Ke=>{try{if(A.channels_orig[L][H][Ke].volatile)throw delete A.channels_orig[L][H][Ke],`\ud718\ubc1c\uc131 \ucc44\ub110 \ubb34\uc2dc: ${Ke}`;2==A.channels_orig[L][H][Ke].redirect.type&&(A.channels_orig[L][H][Ke].info=A.load_other_user(A.channels_orig[L][H][Ke].redirect.id,L,H)),"missing"!=A.channels_orig[L][H][Ke].status&&(delete A.channels_orig[L][H][Ke].status,0==A.channels_orig[L][H][Ke].redirect.type&&(A.channels_orig[L][H][Ke].status="certified")),A.channels_orig[L][H][Ke].is_new&&!A.subscribe_lock&&(A.has_new_channel_msg=!0)}catch{}})})}))})()}get_noti_id(){return this.noti_id=this.check_If_RegisteredId(this.noti_id+1),this.registered_id.push(this.noti_id),this.noti_id}check_If_RegisteredId(A){let k=!1;for(let B=0,L=this.registered_id.length;B<L;B++)if(this.registered_id[B]==A){k=!0;break}return k?this.check_If_RegisteredId(A+1):A}removeRegisteredId(A){for(let k=0,B=this.registered_id.length;k<B;k++)if(this.registered_id[k]==A){this.registered_id.splice(k,1);break}}redirect_channel(A,k){var B=this;return(0,F.A)(function*(){if(B.channels_orig[A][k]){let L=Object.keys(B.channels_orig[A][k]);for(let se=0,H=L.length;se<H;se++)try{yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[A][k].info.name} (${B.lang.text.Subscribes.Title})`,progress:se/H}),"missing"!=B.channels_orig[A][k][L[se]].status&&2===(yield B.servers[A][k].socket.joinChat(B.channels_orig[A][k][L[se]].redirect.id,B.channels_orig[A][k][L[se]].redirect.type,B.channels_orig[A][k][L[se]].redirect.persistence,!1),B.channels_orig[A][k][L[se]].cnoti_id||(B.channels_orig[A][k][L[se]].cnoti_id=B.get_noti_id()),B.channels_orig[A][k][L[se]].color=(B.channels_orig[A][k][L[se]].info.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),B.channels_orig[A][k][L[se]].redirect.type)&&(B.servers[A][k].client.readStorageObjects(B.servers[A][k].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:B.channels_orig[A][k][L[se]].redirect.id}]}).then(de=>{let Ke=B.load_other_user(B.channels_orig[A][k][L[se]].redirect.id,A,k);Ke.img=de.objects.length?de.objects[0].value.img:void 0,B.save_other_user(Ke,A,k)}),B.channels_orig[A][k][L[se]].update||B.servers[A][k].client.listChannelMessages(B.servers[A][k].session,L[se],1,!1).then(de=>{de.messages.length&&B.update_from_channel_msg(de.messages[0],A,k)}))}catch{B.channels_orig[A][k][L[se]].status="missing",B.p5loading.remove("nakama_login")}}})()}rearrange_channels(){this.HasRemovedChannel=!1;let A=[];return Object.keys(this.channels_orig).forEach(B=>{Object.keys(this.channels_orig[B]).forEach(se=>{Object.keys(this.channels_orig[B][se]).forEach(de=>{this.channels_orig[B][se][de].server={isOfficial:B,target:se};try{this.channels_orig[B][se][de].server.name=this.servers[B][se].info.name}catch{this.channels_orig[B][se][de].server.name=this.lang.text.Nakama.DeletedServer}try{switch(this.channels_orig[B][se][de].info||(this.channels_orig[B][se][de].info={}),this.HasRemovedChannel=this.HasRemovedChannel||"missing"==this.channels_orig[B][se][de].status,this.channels_orig[B][se][de].redirect.type){case 1:break;case 2:let Ke=this.load_other_user(this.channels_orig[B][se][de].redirect.id,B,se);Object.keys(Ke).forEach(vt=>this.channels_orig[B][se][de].info[vt]=Ke[vt]),this.channels_orig[B][se][de].title=this.channels_orig[B][se][de].info.display_name;break;case 3:this.groups[B][se]&&this.groups[B][se][this.channels_orig[B][se][de].redirect.id]?(this.channels_orig[B][se][de].info=this.groups[B][se][this.channels_orig[B][se][de].redirect.id],this.channels_orig[B][se][de].title=this.groups[B][se][this.channels_orig[B][se][de].redirect.id].name,"missing"==this.groups[B][se][this.channels_orig[B][se][de].redirect.id].status&&(this.channels_orig[B][se][de].status=this.groups[B][se][this.channels_orig[B][se][de].redirect.id].status)):this.channels_orig[B][se][de].status="missing";break;case 0:this.channels_orig[B][se][de].info||(this.channels_orig[B][se][de].info={}),this.channels_orig[B][se][de].info.name=this.channels_orig[B][se][de].title,this.channels_orig[B][se][de].info.img||this.indexed.loadTextFromUserPath(`servers/${B}/${se}/groups/${de}.img`,(vt,Ft)=>{vt&&Ft&&(this.channels_orig[B][se][de].info.img=Ft)})}}catch{}this.channels_orig[B][se][de].info.isOfficial=B,this.channels_orig[B][se][de].info.target=se,this.channels_orig[B][se][de].last_comment_time||(this.channels_orig[B][se][de].last_comment_time=Date.now()),A.push(this.channels_orig[B][se][de])})})}),A.sort((B,L)=>{let se=new Date(B.last_comment_time||0).getTime(),H=new Date(L.last_comment_time||0).getTime();return se<H?1:se>H?-1:0}),A.sort((B,L)=>B.is_new?L.is_new?0:-1:L.is_new?1:0),this.channels=A,this.save_channels_with_less_info(),A}save_channels_with_less_info(){let A=JSON.parse(JSON.stringify(this.channels_orig));Object.keys(A).forEach(B=>{Object.keys(A[B]).forEach(se=>{let H=Object.keys(A[B][se]);H.forEach(de=>{delete A[B][se][de].img,delete A[B][se][de].group,delete A[B][se][de].info,delete A[B][se][de].update,delete A[B][se][de].presences,delete A[B][se][de].cnoti_id,delete A[B][se][de].color,delete A[B][se][de].isOfficial,delete A[B][se][de].target,A[B][se][de].is_new||delete A[B][se][de].is_new}),H.length||delete A[B][se]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(A),"servers/channels.json")}limit_image_size(A,k=(B=>{})){new Xt(L=>{L.setup=()=>{L.noCanvas(),L.loadImage(A,H=>{H.resize(window.innerWidth,window.innerWidth*H.height/H.width),H.canvas.toDataURL().length>245e3&&se(H),k(H),L.remove()},H=>{this.p5toast.show({text:this.lang.text.Nakama.CannotOpenImg}),L.remove()})};let se=H=>{H.resize(.95*H.width,.95*H.height),H.canvas.toDataURL().length>245e3&&se(H)}})}try_add_group(A){var k=this;return new Promise(function(){var B=(0,F.A)(function*(L,se){let H=k.get_all_online_server();for(let de=0,Ke=H.length;de<Ke;de++)try{let Ve=yield H[de].client.joinGroup(H[de].session,A.id);if(!Ve)return void console.log("\uadf8\ub8f9 join \uc2e4\ud328... \ubca4 \ub2f9\ud588\uc744 \ub54c\uc778\ub4ef? \ud5a5\ud6c4\uc5d0 \uac80\ud1a0 \ud544");Ve=yield H[de].client.listGroups(H[de].session,decodeURIComponent(A.name));for(let vt=0,Ft=Ve.groups.length;vt<Ft;vt++)if(Ve.groups[vt].id==A.id){let _n=Ve.groups[vt];_n.status=_n.open?"online":"pending",_n.server=k.servers[H[de].info.isOfficial][H[de].info.target].info;try{yield k.load_groups(H[de].info.isOfficial,H[de].info.target,Ve.groups[vt].id,!0)}catch(He){console.error("\uadf8\ub8f9 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",He)}try{let He=yield k.servers[H[de].info.isOfficial][H[de].info.target].client.readStorageObjects(k.servers[H[de].info.isOfficial][H[de].info.target].session,{object_ids:[{collection:"group_public",key:`group_${Ve.groups[vt].id}`,user_id:Ve.groups[vt].creator_id}]});He.objects.length?_n.img=He.objects[0].value.img:delete _n.img}catch(He){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \ud655\uc778 \uc624\ub958: ",He)}if(k.save_group_info(_n,H[de].info.isOfficial,H[de].info.target),yield k.servers[H[de].info.isOfficial][H[de].info.target].client.rpc(k.servers[H[de].info.isOfficial][H[de].info.target].session,"send_noti_fn",{receiver_id:k.servers[H[de].info.isOfficial][H[de].info.target].session.user_id,title:"add_channel",content:{type:"add",id:Ve.groups[vt].id},code:mr.ADD_CHANNEL,persistent:!1}),_n.open){let He=yield k.join_chat_with_modulation(_n.id,3,H[de].info.isOfficial,H[de].info.target);(!k.opened_page_info.channel||k.opened_page_info.channel.isOfficial!=H[de].info.isOfficial||k.opened_page_info.channel.target!=H[de].info.target||k.opened_page_info.channel.id!=He.id)&&k.servers[H[de].info.isOfficial][H[de].info.target].client.listChannelMessages(k.servers[H[de].info.isOfficial][H[de].info.target].session,He.id,1,!1).then($e=>{$e.messages.length&&k.update_from_channel_msg($e.messages[0],H[de].info.isOfficial,H[de].info.target),k.save_group_info(_n,H[de].info.isOfficial,H[de].info.target),k.go_to_chatroom(He)}).catch($e=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",$e)})}L();break}}catch(Ve){switch(Ve.status){case 400:console.log("\uc774\ubbf8 \uadf8\ub8f9\uc5d0 \uac00\uc785\ub418\uc5b4 \uc788\uc74c: 400");let vt=yield k.join_chat_with_modulation(A.id,3,H[de].info.isOfficial,H[de].info.target);k.servers[H[de].info.isOfficial][H[de].info.target].client.listChannelMessages(k.servers[H[de].info.isOfficial][H[de].info.target].session,vt.id,1,!1).then(Ft=>{Ft.messages.length&&k.update_from_channel_msg(Ft.messages[0],H[de].info.isOfficial,H[de].info.target),k.go_to_chatroom(vt)}).catch(Ft=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",Ft)}),L();break;case 404:console.log("\uc774 \uc11c\ubc84\uc5d0 \uc5c6\ub294 \uadf8\ub8f9: 404");break;default:console.error("\uadf8\ub8f9 \ucd94\uac00 \uc624\ub958: ",Ve)}}se(k.lang.text.Nakama.GroupAllListDone)});return function(L,se){return B.apply(this,arguments)}}())}save_group_info(A,k,B){this.groups[k][B]||(this.groups[k][B]={}),this.groups[k][B][A.id]=A,this.save_groups_with_less_info(),this.indexed.saveTextFileToUserPath(A.img,`servers/${k}/${B}/groups/${A.id}.img`),A.owner==this.servers[k][B].session.user_id&&A.img&&this.servers[k][B].client.writeStorageObjects(this.servers[k][B].session,[{collection:"group_public",key:`group_${A.id}`,value:{img:A.img},permission_read:2,permission_write:1}])}save_groups_with_less_info(A=(()=>{})){let k=JSON.parse(JSON.stringify(this.groups));Object.keys(k).forEach(L=>{Object.keys(k[L]).forEach(H=>{let de=Object.keys(k[L][H]);de.forEach(Ke=>{if(delete k[L][H][Ke].server,delete k[L][H][Ke].img,k[L][H][Ke].users)for(let Ve=0,vt=k[L][H][Ke].users.length;Ve<vt;Ve++)if(k[L][H][Ke].users[Ve]){delete k[L][H][Ke].users[Ve].state;try{k[L][H][Ke].users[Ve].user.id?(k[L][H][Ke].users[Ve].user={id:k[L][H][Ke].users[Ve].user.id},this.servers[L][H]&&this.servers[L][H].session&&k[L][H][Ke].users[Ve].user.id==this.servers[L][H].session.user_id&&(k[L][H][Ke].users[Ve].is_me=!0)):k[L][H][Ke].users[Ve].is_me||k[L][H][Ke].users.splice(Ve,1)}catch{}}}),de.length||delete k[L][H]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(k),"servers/groups.json").then(()=>{A()})}remove_group_list(A,k,B,L=!1){var se=this;return(0,F.A)(function*(){try{let H=A.creator_id==se.servers[k][B].session.user_id;if(!se.servers[k][B]||!H)throw"not a group creator";try{let Ke=`${A.server.useSSL?"https":"http"}://${A.server.address}`,Ve=se.servers[k][B].info;yield se.global.remove_files_from_storage_with_key(Ke,A.id,{cdn_port:Ve.cdn_port,apache_port:Ve.apache_port})}catch{}(yield se.servers[k][B].client.deleteGroup(se.servers[k][B].session,A.id))||console.log("\uadf8\ub8f9 \uc0ad\uc81c \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),se.remove_channel_files(k,B,A.channel_id,H);try{throw yield se.servers[k][B].client.deleteStorageObjects(se.servers[k][B].session,{object_ids:[{collection:"group_public",key:`group_${A.id}`}]}),"Remove group image well"}catch{throw"No group image found"}}catch{try{let de=localStorage.getItem("fallback_fs");if(!de)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Ke=de.split("://"),Ve=Ke.pop().split(":"),vt=Ke.pop();vt?vt+=":":vt=se.global.checkProtocolFromAddress(Ve[0])?"https:":"http:";let Ft=`${vt}//${Ve[0]}:${Ve[1]||9002}/`;Ve[0]&&(yield se.global.remove_files_from_storage_with_key(Ft,`${A.id}_${se.servers[k][B].session.user_id}`,{}))}catch{}try{let de=`${A.server.useSSL?"https":"http"}://${A.server.address}`;if(A.server.address){let Ke=se.servers[k][B].info;yield se.global.remove_files_from_storage_with_key(de,`${A.id}_${se.servers[k][B].session.user_id}`,{cdn_port:Ke.cdn_port,apache_port:Ke.apache_port})}}catch{}}try{if(L){yield se.indexed.removeFileFromUserPath(`servers/${k}/${B}/groups/${A.id}.img`);try{delete se.groups[k][B][A.id],se.save_groups_with_less_info()}catch{}}}catch{}try{delete se.PromotedGroup[k][B][A.id]}catch{}})()}remove_channel_files(A,k,B,L,se){var H=this;return(0,F.A)(function*(){var de,Ke;const Ve=se||"remove_channel_files",vt=(null===(de=H.channels_orig[A][k][B])||void 0===de?void 0:de.title)||("4"==B.charAt(0)?null===(Ke=H.users[A][k][B.split(".").find(Ft=>Ft in H.users[A][k])])||void 0===Ke?void 0:Ke.display_name:void 0);try{yield H.p5loading.update({id:Ve,message:`${H.lang.text.GroupDetail.BreakupGroup}: ${vt}`,forceEnd:null}),yield H.servers[A][k].client.rpc(H.servers[A][k].session,"remove_channel_file",{collection:`file_${B.replace(/[.]/g,"_")}`,is_creator:L}),H.p5loading.update({id:Ve,progress:1},!0)}catch(Ft){H.p5loading.update({id:Ve,message:`${H.lang.text.AdminTools.FailedClear}: ${Ft}`,progress:0},!0)}se||H.p5loading.remove(Ve)})()}get_group_list_from_server(A,k,B){var L=this;return(0,F.A)(function*(){const se="nakama_login";yield L.p5loading.update({id:se,message:`${L.lang.text.Nakama.SyncingChannel}: ${L.servers[A][k].info.name} (${L.lang.text.AddGroup.GroupInfo})`,progress:null});let H=yield L.servers[A][k].client.listUserGroups(L.servers[A][k].session,L.servers[A][k].session.user_id);try{for(let de=0,Ke=H.user_groups.length;de<Ke;de++)B||(yield L.p5loading.update({id:se,message:`${L.lang.text.Nakama.SyncingChannel}: ${L.servers[A][k].info.name} (${L.lang.text.AddGroup.GroupInfo})`,progress:de/Ke})),(void 0===B||B==H.user_groups[de].group.id)&&(L.groups[A][k][H.user_groups[de].group.id]||(L.groups[A][k][H.user_groups[de].group.id]={}),L.servers[A][k].client.readStorageObjects(L.servers[A][k].session,{object_ids:[{collection:"group_public",key:`group_${H.user_groups[de].group.id}`,user_id:H.user_groups[de].group.creator_id}]}).then(Ve=>{Ve.objects.length?(L.groups[A][k][H.user_groups[de].group.id].img=Ve.objects[0].value.img,L.indexed.saveTextFileToUserPath(Ve.objects[0].value.img,`servers/${A}/${k}/groups/${H.user_groups[de].group.id}.img`)):(delete L.groups[A][k][H.user_groups[de].group.id].img,L.indexed.removeFileFromUserPath(`servers/${A}/${k}/groups/${H.user_groups[de].group.id}.img`))}).catch(Ve=>{console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",Ve)}),L.groups[A][k][H.user_groups[de].group.id]={...L.groups[A][k][H.user_groups[de].group.id],...H.user_groups[de].group},B&&"missing"==L.groups[A][k][H.user_groups[de].group.id].status&&(L.groups[A][k][H.user_groups[de].group.id].status="online"),L.load_groups(A,k,H.user_groups[de].group.id,!0).then(()=>{L.join_chat_with_modulation(H.user_groups[de].group.id,3,A,k).then(()=>{L.rearrange_channels()})}))}catch(de){console.error("\uc0ac\uc6a9\uc790 \uadf8\ub8f9 \uac00\uc838\uc624\uae30 \uc624\ub958: ",de),L.p5loading.remove(se)}B&&L.p5loading.remove(se)})()}rearrange_group_list(A=!0){let k=[];return Object.keys(this.groups).forEach(L=>{Object.keys(this.groups[L]).forEach(H=>{Object.keys(this.groups[L][H]).forEach(Ke=>{try{this.groups[L][H][Ke].server=this.servers[L][H].info,k.push(this.groups[L][H][Ke])}catch{this.groups[L][H][Ke].server={name:this.lang.text.Nakama.DeletedServer,isOfficial:L,target:H},A&&k.push(this.groups[L][H][Ke])}})})}),k}set_group_statusBar(A,k,B){this.statusBar.groupServer[k]||(this.statusBar.groupServer[k]={}),this.statusBar.groupServer[k][B]=A,this.catch_group_server_header(A),this.StatusBarChangedCallback&&this.StatusBarChangedCallback()}count_channel_online_member(A,k,B){var L=this;return(0,F.A)(function*(){let se="pending";try{if("offline"==L.statusBar.groupServer[k][B])throw"\uc11c\ubc84 \uc624\ud504\ub77c\uc778";if(A.group_id){var H;let de=null===(H=L.groups[k][B][A.group_id].users)||void 0===H?void 0:H.length;if(L.groups[k][B][A.group_id].max_count<=1)return se=L.users.self.online?"online":"offline",void("missing"!=L.channels_orig[k][B][A.channel_id||A.id].status&&(L.channels_orig[k][B][A.channel_id||A.id].status=se));if(void 0!==de)for(let Ke=0;Ke<de;Ke++){let Ve=L.groups[k][B][A.group_id].users[Ke].user.id||L.servers[k][B].session.user_id;if(Ve!=L.servers[k][B].session.user_id&&(yield new Promise(Ft=>{L.load_other_user(Ve,k,B,_n=>Ft(_n))})).online){se="online";break}}else se="pending"}else if(A.user_id_one)if(L.channels_orig[k][B][A.channel_id||A.id]){let de=L.channels_orig[k][B][A.channel_id||A.id].redirect.id,Ke=yield L.servers[k][B].client.getUsers(L.servers[k][B].session,[de]);Object.keys(Ke.users[0]).forEach(vt=>{L.users[k][B][de][vt]=Ke.users[0][vt]}),se=L.load_other_user(de,k,B).online?"online":"pending"}else try{let de=yield L.join_chat_with_modulation(A.user_id_one!=L.servers[k][B].session.user_id?A.user_id_one:A.user_id_two,2,k,B);se=L.load_other_user(L.channels_orig[k][B][de.id].redirect.id,k,B).online?"online":"pending"}catch(de){console.error(de)}}catch{se="offline"==L.statusBar.groupServer[k][B]?"offline":"missing"}L.channels_orig[k][B][A.channel_id||A.id]||(L.channels_orig[k][B][A.channel_id||A.id]={}),"missing"!=L.channels_orig[k][B][A.channel_id||A.id].status&&(L.channels_orig[k][B][A.channel_id||A.id].status=se)})()}remove_server(A,k,B){var L=this;return(0,F.A)(function*(){const se="nakama_remove_server";L.p5loading.update({id:se,message:L.lang.text.Nakama.RemovingAccount});const H=L.servers[A][k].info;try{const Ve=L.servers[A][k].session.user_id,vt=`${H.useSSL?"https":"http"}://${H.address}`;try{if(B)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";yield L.global.remove_files_from_storage_with_key(vt,Ve,{cdn_port:H.cdn_port,apache_port:H.apache_port})}catch{}try{if(B)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";const Ft=localStorage.getItem("fallback_fs");if(!Ft)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let _n=Ft.split("://"),He=_n.pop().split(":"),$e=_n.pop();$e?$e+=":":$e=L.global.checkProtocolFromAddress(He[0])?"https:":"http:";const pt=`${$e}//${He[0]}:${He[1]||9002}/`;yield L.global.remove_files_from_storage_with_key(pt,Ve,{})}catch{}yield L.servers[A][k].client.rpc(L.servers[A][k].session,"remove_account_fn",{user_id:Ve}).catch(Ft=>{})}catch{}if(L.p5loading.update({id:se,message:L.lang.text.Nakama.LogoutAccount}),"online"==L.statusBar.groupServer[A][k])try{L.servers[A][k].socket.disconnect(!0)}catch{L.link_group(A,k,!1)}L.p5loading.update({id:se,message:L.lang.text.Nakama.RemovingNotification});try{delete L.noti_origin[A][k]}catch{}L.rearrange_notifications(),L.p5loading.update({id:se,message:L.lang.text.Nakama.MissingChannels});try{let Ve=Object.keys(L.channels_orig[A][k]);L.channels_orig.deleted||(L.channels_orig.deleted={}),L.channels_orig.deleted[k]||(L.channels_orig.deleted[k]={}),Ve.forEach(vt=>{L.channels_orig[A][k][vt].info.status="missing",L.channels_orig[A][k][vt].status="missing",L.channels_orig.deleted[k][vt]=JSON.parse(JSON.stringify(L.channels_orig[A][k][vt]))}),delete L.channels_orig[A][k]}catch{}L.save_channels_with_less_info();let de=yield L.indexed.GetFileListFromDB(`servers/${A}/${k}`);for(let Ve=0,vt=de.length;Ve<vt;Ve++)try{let Ft=yield L.indexed.GetFileInfoFromDB(de[Ve]),_n=de[Ve].replace("/official/","/deleted/").replace(`/${A}/`,"/deleted/");yield L.indexed.saveFileToUserPath(Ft,_n),yield L.indexed.removeFileFromUserPath(de[Ve]),L.p5loading.update({id:se,message:`${L.lang.text.Nakama.MissingChannelFiles}: ${de[Ve]}`})}catch(Ft){console.log("\ud30c\uc77c \uc774\uad00 \uc2e4\ud328: ",Ft)}L.post_counter.deleted||(L.post_counter.deleted={});try{const Ve=yield L.indexed.loadTextFromUserPath("servers/post_counter.json"),vt=JSON.parse(Ve);L.post_counter.deleted[k]=vt[A][k]}catch{}delete L.post_counter[A][k],delete L.posts_orig[A][k],L.rearrange_posts(),yield L.save_post_counter(),L.p5loading.update({id:se,message:L.lang.text.Nakama.MissingGroups});try{L.groups.deleted||(L.groups.deleted={}),L.groups.deleted[k]||(L.groups.deleted[k]={}),L.groups.deleted[k]=JSON.parse(JSON.stringify(L.groups[A][k])),Object.keys(L.groups.deleted[k]).forEach(vt=>{L.groups.deleted[k][vt].server.name=L.lang.text.Nakama.DeletedServer,L.groups.deleted[k][vt].server.isOfficial="deleted",L.groups.deleted[k][vt].status="missing",L.groups.deleted[k][vt]=JSON.parse(JSON.stringify(L.groups[A][k][vt]))}),delete L.groups[A][k]}catch{}L.p5loading.update({id:se,message:L.lang.text.Nakama.DeletingServerInfo}),L.set_group_statusBar("offline",A,k),delete L.statusBar.groupServer[A][k],yield L.RemoveWebRTCServer(L.servers[A][k].info.address),delete L.servers[A][k],L.save_groups_with_less_info(),L.indexed.saveTextFileToUserPath(JSON.stringify(L.statusBar.groupServer),"servers/list.json");let Ke=yield L.indexed.loadTextFromUserPath("servers/list_detail.csv");if(Ke){let Ve=Ke.split("\n");for(let vt=0,Ft=Ve.length;vt<Ft;vt++)if(Ve[vt].split(",")[3]==k){Ve.splice(vt,1);break}L.indexed.saveTextFileToUserPath(Ve.join("\n"),"servers/list_detail.csv")}L.noti.ClearNoti(9),L.p5loading.remove(se)})()}connect_to(A="official",k="default"){var B=this;return(0,F.A)(function*(){yield B.servers[A][k].socket.connect(B.servers[A][k].session,!0);let L=B.servers[A][k].socket;Object.keys(B.on_socket_connected).forEach(de=>B.on_socket_connected[de]()),L.onnotification=de=>{B.act_on_notification(de,A,k),B.rearrange_notifications()};let H=[];return L.onchannelpresence=de=>{if(void 0!==de.joins){de.joins.forEach(Ve=>{B.servers[A][k].session.user_id!=Ve.user_id&&(B.load_other_user(Ve.user_id,A,k).online=!0)});let Ke=!0;for(let Ve of de.joins)if(Ve.user_id!=B.servers[A][k].session.user_id){Ke=!1;break}(!H.includes(de.channel_id)||!Ke)&&(H.push(de.channel_id),B.count_channel_online_member(de,A,k))}else if(void 0!==de.leaves){let Ke=[];de.leaves.forEach(Ve=>{B.servers[A][k].session.user_id!=Ve.user_id&&B.servers[A][k].client.getUsers(B.servers[A][k].session,[Ve.user_id]).then(vt=>{let Ft=Object.keys(vt.users[0]);delete B.load_other_user(Ve.user_id,A,k).online,Ft.forEach(_n=>{B.users[A][k][Ve.user_id][_n]=vt.users[0][_n]}),Ke.push(Ve.user_id),Ke.forEach(_n=>B.load_other_user(_n,A,k)),B.count_channel_online_member(de,A,k)})})}B.socket_reactive["others-online"]&&B.socket_reactive["others-online"]()},L.onchannelmessage=de=>{B.channels_orig[A][k][de.channel_id]?(B.update_from_channel_msg(de,A,k),B.rearrange_channels()):de.user_id_one?B.join_chat_with_modulation(de.sender_id,2,A,k):de.group_id&&B.join_chat_with_modulation(de.group_id,3,A,k)},L.ondisconnect=de=>{B.OnSocketDisconnect(A,k)},L})()}OnSocketDisconnect(A,k){this.link_group(A,k,!1),Object.keys(this.on_socket_disconnected).forEach(L=>this.on_socket_disconnected[L]())}saveListedMessage(A,k,B,L,se){let H={},de=JSON.parse(JSON.stringify(A)),Ke=se||!1;for(;de.length;){H.target!=de[0].msgDate&&(H.msg&&(this.saveMessageByDate(H,k,B,L,Ke),Ke=!0),H.target=de[0].msgDate,H.msg=[]);let Ve=de.shift();delete Ve.content.text,delete Ve.content.img,delete Ve.content.local_comp,delete Ve.content.path,delete Ve.msgDate,delete Ve.displayDate,delete Ve.msgTime,delete Ve.isLastRead,delete Ve.showInfo,H.msg.push(Ve)}this.saveMessageByDate(H,k,B,L,Ke)}saveMessageByDate(A,k,B,L,se=!1){if(!A.msg||!A.msg.length)return;const H=JSON.parse(JSON.stringify(A)),de=H.target.split("-");this.indexed.loadTextFromUserPath(`servers/${B}/${L}/channels/${k.id}/chats/${de[0]}/${de[1]}/${de[2]}`,(Ke,Ve)=>{let vt=[],Ft=[];Ke&&Ve&&(vt=JSON.parse(Ve)),H.msg.forEach($e=>{for(let pt=vt.length-1;pt>=0;pt--)if(vt[pt].message_id==$e.message_id){vt.splice(pt,1);break}Ft.push($e)});let _n=[];if("local"!=B){const $e=new Date(Ft[0].create_time).getTime();for(let pt=vt.length-1;pt>=0;pt--)if(se||$e<new Date(vt[pt].create_time).getTime()){let ot=vt.splice(pt,1);ot[0].code=2,_n.push(ot[0])}}let He=[...vt,..._n,...Ft];He.sort(($e,pt)=>$e.create_time<pt.create_time?-1:$e.create_time>pt.create_time?1:0),this.indexed.saveTextFileToUserPath(JSON.stringify(He),`servers/${B}/${L}/channels/${k.id}/chats/${de[0]}/${de[1]}/${de[2]}`)})}CatchQouteMsgUserName(A,k,B){if(A.content.qoute)try{if("local"==A.content.qoute.user_id)throw"\ub85c\uceec \uba54\uc2dc\uc9c0";A.content.qoute.username=this.users[k][B][A.content.qoute.user_id].display_name}catch{A.content.qoute.username=this.users.self.display_name}}ModulateTimeDate(A){let k=new Date(A.create_time),B=k.toLocaleDateString(this.lang.lang);A.displayDate=B,A.msgDate=`${k.getFullYear()}-${("00"+(k.getMonth()+1)).slice(-2)}-${("00"+k.getDate()).slice(-2)}`,A.msgTime=`${("00"+k.getHours()).slice(-2)}:${("00"+k.getMinutes()).slice(-2)}`}join_chat_with_modulation(A,k,B,L,se=!1){var H=this;return(0,F.A)(function*(){H.channels_orig[B][L]||(H.channels_orig[B][L]={});let de=yield H.servers[B][L].socket.joinChat(A,k,!0,!1);try{switch(de.redirect={id:A,type:k,persistence:!0},de.server={isOfficial:B,target:L},k){case 2:de.title=H.GetOverrideName(A,B,L)||H.load_other_user(A,B,L).display_name,de.info=H.load_other_user(A,B,L);break;case 3:de.title=H.groups[B][L][A].name,de.info=H.groups[B][L][A],H.groups[B][L][A].channel_id=de.id;break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc815\ubcf4: ",k)}if(yield H.add_channel(de,B,L,se),se&&H.rearrange_channels(),!H.opened_page_info.channel||H.opened_page_info.channel.isOfficial!=B||H.opened_page_info.channel.target!=L||H.opened_page_info.channel.id!=de.id){let Ke=yield H.servers[B][L].client.listChannelMessages(H.servers[B][L].session,de.id,1,!1);try{Ke.messages.length&&(yield H.update_from_channel_msg(Ke.messages[0],B,L,se))}catch{}}return H.save_groups_with_less_info(),H.count_channel_online_member(de,B,L),de}catch(Ke){let Ve="";throw Ve=3===Ke.code?H.lang.text.Nakama.AddChannelFailed_Code3:Ke.message,H.p5toast.show({text:`${H.lang.text.Nakama.AddChannelFailed}: ${Ve}`}),`${H.lang.text.Nakama.AddChannelFailed}: ${Ve}`}})()}update_from_channel_msg(A,k,B,L=!1){var se=this;return(0,F.A)(function*(){let H=A.sender_id==se.servers[k][B].session.user_id,de=A.message_id!=se.channels_orig[k][B][A.channel_id].last_comment_id,Ke=se.modulation_channel_message(A,k,B,!0),Ve=!1;switch(Ke.code){case 0:Ke.content.gupdate&&(se.update_group_info(Ke,k,B),Ve=!0),Ke.content.user_update&&(se.update_group_user_info(Ke,k,B),Ve=!0),de&&!Ve&&(se.channels_orig[k][B][A.channel_id].is_new=!H,se.subscribe_lock||(se.has_new_channel_msg=!H));break;case 1:case 2:break;case 6:H&&(delete se.PromotedGroup[k][B][Ke.group_id],se.socket_reactive.add_todo_menu&&se.socket_reactive.add_todo_menu.UpdateWorkerList());case 3:case 4:case 5:case 7:case 9:let _n;if(se.socket_reactive.group_detail&&(_n=yield se.socket_reactive.group_detail.update_GroupUsersList(k,B)),H&&(7==Ke.code||9==Ke.code)){_n||(_n=(yield se.servers[k][B].client.listGroupUsers(se.servers[k][B].session,Ke.group_id)).group_users);for(let He of _n)if(He.user.id==se.servers[k][B].session.user_id){He.state<2?se.PromotedGroup[k][B][Ke.group_id]=!0:delete se.PromotedGroup[k][B][Ke.group_id],se.socket_reactive.add_todo_menu&&se.socket_reactive.add_todo_menu.UpdateWorkerList();break}}if(3==Ke.code||4==Ke.code||7==Ke.code||9==Ke.code)break;if(se.noti_origin[k]&&se.noti_origin[k][B]){let He=Object.keys(se.noti_origin[k][B]),$e=[];He.forEach(pt=>{-5==se.noti_origin[k][B][pt].code&&se.noti_origin[k][B][pt].sender_id==Ke.sender_id&&$e.push(pt)});try{(yield se.servers[k][B].client.deleteNotifications(se.servers[k][B].session,$e))||console.log("\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc54c\ub9bc \uc0ad\uc81c \ud6c4 \uc624\ub958"),se.update_notifications(k,B)}catch(pt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",pt)}}H&&(se.channels_orig[k][B][Ke.channel_id].status="missing");break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",Ke)}if(!H&&de&&!Ve){var vt;let _n={id:se.channels_orig[k][B][A.channel_id].cnoti_id,title:se.channels_orig[k][B][A.channel_id].info.name||se.GetOverrideName(se.channels_orig[k][B][A.channel_id].info.id,k,B)||se.channels_orig[k][B][A.channel_id].info.display_name||se.channels_orig[k][B][A.channel_id].title||se.lang.text.ChatRoom.noname_chatroom,body:Ke.content.msg||Ke.content.noti||`(${se.lang.text.ChatRoom.attachments})`,smallIcon_ln:"diychat",image:null===(vt=se.groups[k][B][A.group_id])||void 0===vt?void 0:vt.img,bgcolor:se.channels_orig[k][B][A.channel_id].color};Ke.content.url&&Ke.content.type&&0==Ke.content.type.indexOf("image/")&&(_n.image=Ke.content.url),se.noti.PushLocal(_n,se.channels_orig[k][B][A.channel_id].cnoti_id,He=>{se.go_to_chatroom(se.channels_orig[k][B][A.channel_id])})}H&&se.noti.ClearNoti(se.channels_orig[k][B][A.channel_id].cnoti_id),se.ModulateTimeDate(Ke),se.check_sender_and_show_name(Ke,k,B);let Ft=A.content.msg;se.content_to_hyperlink(Ke,k,B),!L&&se.channels_orig[k][B][Ke.channel_id].update&&se.channels_orig[k][B][Ke.channel_id].update(Ke),Ve||(se.channels_orig[k][B][A.channel_id].last_comment_time=A.update_time,se.channels_orig[k][B][Ke.channel_id].last_comment_id=Ke.message_id),se.saveListedMessage([Ke],se.channels_orig[k][B][Ke.channel_id],k,B),Ve||2!=Ke.code&&(se.channels_orig[k][B][Ke.channel_id].last_comment=(Ke.content.filename?`(${se.lang.text.ChatRoom.attachments}) `:"")+(Ft||Ke.content.noti||""))})()}rearrange_posts(){this.posts.length=0;let A=Object.keys(this.posts_orig);for(let k=0,B=A.length;k<B;k++){let L=Object.keys(this.posts_orig[A[k]]);for(let se=0,H=L.length;se<H;se++){let de=Object.keys(this.posts_orig[A[k]][L[se]]);for(let Ke=0,Ve=de.length;Ke<Ve;Ke++){let vt=Object.keys(this.posts_orig[A[k]][L[se]][de[Ke]]);for(let Ft=0,_n=vt.length;Ft<_n;Ft++)this.posts.push(this.posts_orig[A[k]][L[se]][de[Ke]][vt[Ft]])}}}this.posts.sort((k,B)=>k.create_time<B.create_time?1:k.create_time>B.create_time?-1:0)}RemoveCurrentPostAttach(A,k){this.p5loading.toast(`${this.lang.text.AddPost.RemoveAttach}: ${k.attachments[A].filename}`,"add_post"),k.attachments.splice(A,1);let B=k.content.split("\n");for(let L=B.length-1;L>=0;L--){let se=!1,H=B[L].length-1,de=0;try{de=Number(B[L].substring(1,H)),se="{"==B[L].charAt(0)&&"}"==B[L].charAt(H)&&!isNaN(de)}catch{}if(se)if(A==de){if(""==B[L+1])try{B.splice(L+1,1)}catch{}B.splice(L,1)}else A<de&&(B[L]=`{${de-1}}`)}k.content=B.join("\n")}AddPost(A,k,B,L=!1,se){var H=this;return(0,F.A)(function*(){const de=A.server.isOfficial,Ke=A.server.target;let Ve={};try{let $e=H.servers[de][Ke].info;Ve.cdn_port=$e.cdn_port,Ve.apache_port=$e.apache_port}catch{Ve={}}for(let $e=0,pt=A.attachments.length;$e<pt;$e++)delete A.attachments[$e].thumbnail;if(A.mainImage){if(H.p5loading.update({id:k,message:H.lang.text.AddPost.SyncMainImage}),A.mainImage.path=`servers/${de}/${Ke}/posts/${A.creator_id}/${A.id}/MainImage.${A.mainImage.file_ext}`,A.mainImage.thumbnail=se,!A.mainImage.blob)try{const pt=yield(yield fetch(se)).blob();A.mainImage.blob=pt}catch{}if(H.p5loading.update({id:k,image:se}),L)try{if(1!=A.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let $e;if(H.p5loading.update({id:k,message:`${H.lang.text.AddPost.SyncMainImage}: ${A.mainImage.filename}`}),$e=yield H.global.try_upload_to_user_custom_fs(A.mainImage,`${H.users.self.display_name}/${A.id}`,k,A.title),!$e)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete A.mainImage.path,delete A.mainImage.partsize,A.mainImage.url=$e}catch{try{yield H.indexed.saveBlobToUserPath(A.mainImage.blob,A.mainImage.path)}catch(pt){console.log("\uba54\uc778\uc0ac\uc9c4 \ud30c\uc77c \uae68\uc9d0\ucc98\ub9ac: ",pt),delete A.mainImage}}else try{if(2==A.CDN)throw"SQL \uac15\uc81c";const $e=H.servers[de][Ke].info.address,pt=H.servers[de][Ke].info.useSSL?"https:":"http:",ot=yield H.global.upload_file_to_storage(A.mainImage,{user_id:`${H.servers[de][Ke].session.user_id}/${A.id}`,cdn_port:Ve.cdn_port,apache_port:Ve.apache_port},pt,$e,1==A.CDN,k,A.title);if(!ot)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete A.mainImage.partsize,A.mainImage.url=ot}catch{yield H.sync_save_file(A.mainImage,de,Ke,"server_post",`${A.id}_mainImage`)}}const vt=A.attachments.length;if(vt){H.p5loading.update({id:k,message:H.lang.text.AddPost.SyncAttaches});for(let $e=vt-1;$e>=0;$e--)if(L)try{if(1!=A.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let pt;if(H.p5loading.update({id:k,message:`${H.lang.text.AddPost.SyncAttaches}: [${$e}]${A.attachments[$e].filename}`}),pt=yield H.global.try_upload_to_user_custom_fs(A.attachments[$e],`${H.users.self.display_name}/${A.id}`,k,A.title),!pt)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete A.attachments[$e].path,delete A.attachments[$e].partsize,A.attachments[$e].url=pt}catch{try{A.attachments[$e].path=`servers/${de}/${Ke}/posts/${A.creator_id}/${A.id}/[${$e}]${A.attachments[$e].filename}`,yield H.indexed.saveBlobToUserPath(A.attachments[$e].blob,A.attachments[$e].path)}catch(ot){H.p5toast.show({text:`{${$e}} ${H.lang.text.AddPost.AttachError}: ${ot}`,lateable:!0}),H.RemoveCurrentPostAttach($e,A)}}else try{if(2==A.CDN)throw"SQL \uac15\uc81c";const pt=H.servers[de][Ke].info.address,ot=H.servers[de][Ke].info.useSSL?"https:":"http:",Dt=yield H.global.upload_file_to_storage(A.attachments[$e],{user_id:`${H.servers[de][Ke].session.user_id}/${A.id}`,cdn_port:Ve.cdn_port,apache_port:Ve.apache_port},ot,pt,1==A.CDN,k,A.title);if(!Dt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete A.attachments[$e].path,delete A.attachments[$e].partsize,A.attachments[$e].url=Dt}catch(pt){try{"SQL \uac15\uc81c"==pt&&A.attachments[$e].url&&!A.attachments[$e].blob&&(A.attachments[$e].blob=yield(yield fetch(A.attachments[$e].url)).blob()),yield H.sync_save_file(A.attachments[$e],de,Ke,"server_post",`${A.id}_attach_${$e}`)}catch(ot){H.p5toast.show({text:`{${$e}} ${H.lang.text.AddPost.AttachError}: ${ot}`,lateable:!0}),H.RemoveCurrentPostAttach($e,A)}}}if(A.OutSource&&(yield H.global.remove_file_from_storage(A.OutSource,Ve),A.OutSource=void 0),B=B&&"me"!=A.creator_id){const $e=new Blob([JSON.stringify(A)],{type:"text/plain"}),pt={blob:$e,filename:`${A.id}.json`,file_ext:"json",size:$e.size};try{const ot=H.servers[de][Ke].info.address,Dt=H.servers[de][Ke].session.user_id,vn=H.servers[de][Ke].info.useSSL?"https:":"http:",Hn=yield H.global.upload_file_to_storage(pt,{user_id:`${Dt}/${A.id}`,cdn_port:Ve.cdn_port,apache_port:Ve.apache_port},vn,ot,1==A.CDN,k,A.title);if(!Hn)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";A.OutSource=Hn}catch{try{const Dt=H.users.self.display_name,vn=yield H.global.try_upload_to_user_custom_fs(pt,`${Dt}/${A.id}`,k,A.title);if(!vn)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";A.OutSource=vn}catch(Dt){A.OutSource=void 0,B=!1,H.p5toast.show({text:`${H.lang.text.AddPost.OutLinkFailed}: ${Dt}`})}}}let Ft=JSON.parse(JSON.stringify(A));Ft.mainImage&&(delete Ft.mainImage.blob,delete Ft.mainImage.thumbnail);for(let $e=Ft.attachments.length-1;$e>=0;$e--)delete Ft.attachments[$e].blob;delete Ft.server;try{H.posts_orig[de][Ke]||(H.posts_orig[de][Ke]={}),H.posts_orig[de][Ke][A.creator_id]||(H.posts_orig[de][Ke][A.creator_id]={}),H.posts_orig[de][Ke][A.creator_id][A.id]=A}catch($e){H.p5toast.show({text:`${H.lang.text.AddPost.SyncErr}: ${$e}`}),console.log($e)}const _n=JSON.stringify(Ft);yield H.indexed.saveTextFileToUserPath(_n,`servers/${de}/${Ke}/posts/${A.creator_id}/${A.id}/info.json`),delete Ft.is_me;const He=JSON.stringify(Ft);if(!L){let $e=new Blob([He],{type:"application/json"}),pt={filename:"info.json"};pt.blob=$e,pt.size=$e.size,pt.type="application/json",pt.file_ext="json",pt.typeheader="text",pt.path=`servers/${de}/${Ke}/posts/${A.creator_id}/${A.id}/info.json`,yield H.sync_save_file(pt,de,Ke,"server_post",A.id)}})()}EditPost(A){this.CommunityGoToEditPost&&this.CommunityGoToEditPost(A),this.socket_reactive.try_load_post&&this.socket_reactive.try_load_post()}RemovePost(A,k=!1,B){var L=this;return(0,F.A)(function*(){var se;const H=JSON.parse(JSON.stringify(A)),de=H.server.isOfficial,Ke=H.server.target,Ve=B||`nakama_RemovePost_${Date.now()}`,vt="online"==(null===(se=L.statusBar.groupServer[de])||void 0===se?void 0:se[Ke]);k||(yield L.p5loading.update({id:Ve,message:L.lang.text.PostViewer.RemovePost,forceEnd:null}));let Ft=yield L.indexed.GetFileListFromDB(`servers/${de}/${Ke}/posts/${A.creator_id}/${A.id}`);for(let $e=0,pt=Ft.length;$e<pt;$e++)k||L.p5loading.update({id:Ve,message:`${L.lang.text.PostViewer.RemovePost}: ${Ft[$e]}`,progress:$e/pt}),yield L.indexed.removeFileFromUserPath(Ft[$e]);k||L.p5loading.update({id:Ve,progress:null});let _n={};try{let $e=L.servers[de][Ke].info;_n.cdn_port=$e.cdn_port,_n.apache_port=$e.apache_port}catch{_n={}}if(A.OutSource&&L.global.remove_file_from_storage(A.OutSource,_n),A.attachments)for(let $e=0,pt=A.attachments.length;$e<pt;$e++)try{if(k||L.p5loading.update({id:Ve,message:`${L.lang.text.PostViewer.RemovePost}: ${A.attachments[$e].filename}`,progress:$e/pt}),A.attachments[$e].url&&""!==A.attachments[$e].type)k||L.global.remove_file_from_storage(A.attachments[$e].url,_n);else try{A.server.local||(yield L.sync_remove_file(`${A.id}_attach_${$e}`,de,Ke,"server_post","",`${A.id}_attach_${$e}`))}catch{}}catch{}if(k||L.p5loading.update({id:Ve,progress:null}),A.mainImage)try{if(A.mainImage.url&&""!==A.mainImage.type)k||L.global.remove_file_from_storage(A.mainImage.url,_n);else try{A.server.local||(yield L.sync_remove_file(`${A.id}_mainImage`,de,Ke,"server_post","",`${A.id}_mainImage`))}catch{}}catch{}try{A.server.local||k||(yield L.sync_remove_file(A.id,de,Ke,"server_post","",`${A.id}`))}catch{}k||L.p5loading.update({id:Ve,message:`${L.lang.text.PostViewer.RemovePost}: ${A.title}`}),!k&&!B&&L.p5loading.remove(Ve);try{delete L.posts_orig[de][Ke][A.creator_id][A.id]}catch{}if(!k)try{yield L.servers[de][Ke].client.rpc(L.servers[de][Ke].session,"send_noti_all_fn",{noti_id:mr.MANAGE_POST,type:"remove",user_id:A.creator_id,post_id:A.id,persistent:!1})}catch{}if(L.rearrange_posts(),L.socket_reactive.try_load_post&&L.socket_reactive.try_load_post(),!vt&&!H.offlineAct&&!A.server.local){var He;let $e=Number(yield L.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;H.id=`LocalPost_${$e}`;try{yield L.indexed.saveTextFileToUserPath(`${$e+1}`,"servers/local/target/posts/me/counter.txt")}catch(pt){L.p5toast.show({text:`${L.lang.text.AddPost.SyncErr}: ${pt}`}),console.log(pt)}H.offlineAct="remove",H.originalInfo=A,H.creator_id="me",H.server={name:L.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0},yield L.AddPost(H,Ve,!0,!0,null===(He=H.mainImage)||void 0===He?void 0:He.thumbnail),L.rearrange_posts(),L.p5loading.remove(Ve)}})()}content_to_hyperlink(A,k,B){if(!A.content.msg||"object"==typeof A.content.msg)return;let L=A.content.msg.split("\n");A.content.msg=[],L.forEach(se=>{A.content.msg.push([{text:se}])});for(let se=0,H=A.content.msg.length;se<H;se++)if(A.content.msg[se][0].text){const de=/(https?:\/\/[^\s]+|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[^\s]*)?/g,Ke=A.content.msg[se][0].text,Ve=Ke.match(de);if(Ve){const vt="%extractURL",_n=Ke.replace(de,vt).split(vt);let He=[];for(;_n.length||Ve.length;){{let $e=_n.shift();$e&&He.push({text:$e})}{let $e=Ve.shift();$e&&He.push({text:$e,href:!0})}}A.content.msg[se]=He}else A.content.msg[se]=[{text:Ke}];try{let vt=A.content.msg[se][0].text.match(/[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6DC}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F90C}-\u{1F93A}\u{1F93C}-\u{1F945}\u{1F947}-\u{1F9FF}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}]+/gu)[0].replace(/[0-9]/g,"");1==A.content.msg.length&&A.content.msg[se][0].text.length==vt.length&&(A.content.msg[se][0].size=48)}catch{}}}CreateHyperLinkDesc(A,k,B,L,se){try{let de,H=A.content.msg,Ke=!1;for(let Ve of H){for(let vt of Ve)if(vt.href){de=vt.text,Ke=!0;break}if(Ke)break}Ke?this.HyperLinkDescList.push({msg:A,url:de,isOfficial:k,target:B,cont:L,callback:se}):delete A.content.hasLink,this.RequestHyperLinkInfo()}catch{}}RequestHyperLinkInfo(){var A=this;return(0,F.A)(function*(){if(!A.isRequestingLinkInfo){for(A.isRequestingLinkInfo=!0;A.HyperLinkDescList.length;){var k;const B=A.HyperLinkDescList.pop();if(B.cont.signal.aborted){console.log("\ub354 \uc774\uc0c1 \ud398\uc774\uc9c0 \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",B.cont.signal.reason);continue}let L,se;try{L=A.servers[B.isOfficial][B.target].info,se=`${L.useSSL?"https":"http"}://${L.address}:${L.cdn_port||9001}`}catch{}if(B.msg.content.hasLink)return;try{let H=yield A.global.GetHrefThumbnail(B.url,se,B.cont);if(!H||H.error)throw H;B.msg.content.hasLink=H,A.saveListedMessage([B.msg],A.channels_orig[B.isOfficial][B.target][B.msg.channel_id],B.isOfficial,B.target)}catch(H){console.log("href \uac04\ub7b5\uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc2e4\ud328: ",H)}null===(k=B.callback)||void 0===k||k.call(B)}A.isRequestingLinkInfo=!1}})()}check_sender_and_show_name(A,k,B){try{A.color="#"+(A.sender_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),A.sender_id==this.servers[k][B].session.user_id?(A.user_display_name=this.users.self.display_name,A.is_me=!0):A.user_display_name=this.load_other_user(A.sender_id,k,B).display_name,A.user_display_name=A.user_display_name||this.lang.text.Profile.noname_user}catch(L){console.log("\ubc1c\uc2e0\uc790 \uccb4\ud06c \uc624\ub958: ",L)}}modulation_channel_message(A,k,B,L=!1){var se=this;this.translate_updates(A);let de,H=!1;try{H=A.sender_id==this.servers[k][B].session.user_id}catch{H=A.content.user_update}try{de=H?this.users.self:this.load_other_user(A.sender_id,k,B)}catch{de=this.users.self}let Ke=function(){var Ve=(0,F.A)(function*(){if(L){let vt=yield se.servers[k][B].client.listGroupUsers(se.servers[k][B].session,A.group_id);for(let Ft of vt.group_users)if(Ft.user.id==se.servers[k][B].session.user_id){Ft.is_me=!0,Ft.user=se.users.self;break}se.groups[k][B][A.group_id].users=vt.group_users,se.count_channel_online_member(A,k,B)}});return function(){return Ve.apply(this,arguments)}}();switch(A.code){case 0:if(A.content.filename){try{A.content.transfer_index=this.OnTransfer[k][B][A.channel_id][A.message_id]}catch{}try{this.OnTransferMessage[A.message_id]=A}catch{}}break;case 1:case 2:break;case 3:case 4:A.content.user_update=de,A.content.noti=`${this.lang.text.Nakama.GroupUserJoin}: ${de.display_name}`,L&&Ke();break;case 5:A.content.user_update=de,A.content.noti=`${this.lang.text.Nakama.GroupUserOut}: ${de.display_name}`,L&&Ke();break;case 6:A.content.user_update=de,A.content.noti=`${this.lang.text.Nakama.GroupUserKick}: ${de.display_name}`,L&&Ke();break;case 7:A.content.user_update=de,A.content.noti=`${this.lang.text.OtherProfile.PromoteSucc}: ${de.display_name}`;break;case 9:A.content.user_update=de,A.content.noti=`${this.lang.text.OtherProfile.DemoteSucc}: ${de.display_name}`;break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",A)}return A}update_group_info(A,k,B){switch(this.translate_updates(A),A.content.gupdate){case"gimage_modify":this.servers[k][B].client.readStorageObjects(this.servers[k][B].session,{object_ids:[{collection:"group_public",key:`group_${A.group_id}`,user_id:this.groups[k][B][A.group_id].creator_id}]}).then(L=>{L.objects.length?(this.groups[k][B][A.group_id].img=L.objects[0].value.img.replace(/"|=|\\/g,""),this.indexed.saveTextFileToUserPath(L.objects[0].value.img,`servers/${k}/${B}/groups/${A.group_id}.img`)):"missing"!=this.groups[k][B][A.group_id].status&&(delete this.groups[k][B][A.group_id].img,this.indexed.removeFileFromUserPath(`servers/${k}/${B}/groups/${A.group_id}.img`))});break;case"remove":case"force_remove":this.groups[k][B][A.group_id].status="missing",this.save_groups_with_less_info(),this.channels_orig[k][B][A.channel_id].status="missing",this.servers[k][B].socket.leaveChat(A.channel_id);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \ud589\ub3d9: ",A)}}translate_updates(A){if(A.content.user_update)switch(A.content.user_update){case"modify_data":A.content.noti=`${this.lang.text.Profile.user_profile_changed}${A.content.noti_form}`;break;case"modify_img":A.content.noti=`${this.lang.text.Profile.user_image_changed}${A.content.noti_form}`}if(A.content.gupdate)switch(A.content.gupdate){case"gimage_modify":A.content.noti=this.lang.text.GroupDetail.GroupImageChanged;break;case"remove":A.content.noti=this.lang.text.GroupDetail.GroupRemoved;break;case"force_remove":A.content.noti=this.lang.text.GroupDetail.GroupForceRemoved}}update_group_user_info(A,k,B){var L=this;return(0,F.A)(function*(){if(L.translate_updates(A),L.servers[k][B].session.user_id!=A.sender_id)switch(A.content.user_update){case"modify_data":try{let se=yield L.servers[k][B].client.getUsers(L.servers[k][B].session,[A.sender_id]);se.users.length?L.save_other_user(se.users[0],k,B):(delete L.users[k][B][A.sender_id],L.indexed.removeFileFromUserPath(`servers/${k}/${B}/users/${A.sender_id}/profile.json`))}catch(se){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc815\ubcf4 \ubcc0\uacbd \uc624\ub958: ",se)}break;case"modify_img":try{let se=yield L.servers[k][B].client.readStorageObjects(L.servers[k][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:A.sender_id}]});if(se.objects.length)try{if(L.servers[k][B].session.user_id==A.sender_id)throw"me";L.load_other_user(A.sender_id,k,B).img=se.objects[0].value.img.replace(/"|\\|=/g,""),L.indexed.saveTextFileToUserPath(L.users[k][B][A.sender_id].img,`servers/${k}/${B}/users/${A.sender_id}/profile.img`)}catch{L.users.self.img=se.objects[0].value.img.replace(/"|\\|=/g,""),yield L.indexed.saveTextFileToUserPath(L.users.self.img,"servers/self/profile.img")}else try{if(L.servers[k][B].session.user_id==A.sender_id)throw"me";delete L.users[k][B][A.sender_id].img,L.indexed.removeFileFromUserPath(`servers/${k}/${B}/users/${A.sender_id}/profile.img`)}catch{delete L.users.self.img}}catch(se){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",se)}break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \uc0ac\uc6a9\uc790 \ud589\ub3d9: ",A)}})()}check_notifications(A,k,B){var L=this;return(0,F.A)(function*(){let se=L.servers[k][B];switch(A.code){case 0:case-2:break;case 1:let H=`<div style="text-align: center"><img src="${decodeURIComponent(A.content.uri)}" alt="noti_image" style="border-radius: 2px"/></div>`,de=`<div>${decodeURIComponent(L.global.HTMLEncode(A.content.msg))}</div>`;L.alertCtrl.create({header:L.servers[k][B].info.name,message:new yn.Vk(A.content.uri?H+de:de),buttons:[{text:L.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var vt=(0,F.A)(function*(){try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id])}catch{}L.noti.ClearNoti(A.code),L.update_notifications(k,B)});return function(){return vt.apply(this,arguments)}}()()}}]}).then(Ve=>Ve.present());break;case-1:case-3:case-4:case-6:L.noti.ClearNoti(A.code);try{(yield se.client.deleteNotifications(se.session,[A.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.update_notifications(k,B)}catch(Ve){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",Ve)}break;case-5:try{let Ve=yield se.client.getUsers(se.session,[A.sender_id]);if(Ve.users.length){let vt="";vt+=`${L.lang.text.Nakama.ReqContServer}: ${A.server.name}<br>`,vt+=`${L.lang.text.Nakama.ReqContUserName}: ${Ve.users[0].display_name}`,L.alertCtrl.create({header:L.lang.text.Nakama.ReqContTitle,message:vt,buttons:[{text:L.lang.text.Nakama.ReqContAccept,handler:()=>{!function(){var _n=(0,F.A)(function*(){try{(yield se.client.addGroupUsers(se.session,A.content.group_id,[Ve.users[0].id]))||console.log("\ubc34\uc778 \uacbd\uc6b0\uc778 \uac83 \uac19\uc74c, \ud655\uc778 \ud544\uc694"),L.noti.ClearNoti(A.code);try{let $e=yield se.client.deleteNotifications(se.session,[A.id]);$e?L.update_notifications(k,B):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",$e)}catch($e){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",$e)}}catch(He){console.error("\uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958: ",He)}});return function(){return _n.apply(this,arguments)}}()()}},{text:L.lang.text.Nakama.ReqContReject,handler:()=>{!function(){var _n=(0,F.A)(function*(){try{(yield se.client.kickGroupUsers(se.session,A.content.group_id,[Ve.users[0].id]))||console.log("\uadf8\ub8f9 \ucc38\uc5ec \uac70\uc808\uc744 kick\ud55c \uacbd\uc6b0 \uc624\ub958"),yield se.client.deleteNotifications(se.session,[A.id]),L.update_notifications(k,B)}catch(He){console.error("\uc0ac\uc6a9\uc790 \uac15\ud1f4 \uc624\ub958: ",He)}});return function(){return _n.apply(this,arguments)}}()()},cssClass:"redfont"}]}).then(Ft=>Ft.present())}else try{(yield se.client.deleteNotifications(se.session,[A.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.p5toast.show({text:L.lang.text.Nakama.UserNotFound}),L.update_notifications(k,B)}catch(vt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",vt)}}catch(Ve){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc624\ub958: ",Ve)}break;case-7:L.LoginAgain(L.noti_origin,k,B);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \uad6c\ubd84: ",A.code);try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id])}catch{}L.update_notifications(k,B)}})()}act_on_notification(A,k,B){var L=this;return(0,F.A)(function*(){let se=!1;switch(A.server=L.servers[k][B].info,A.code){case 404:L.remove_server(k,B,!1);break;case mr.USER_PROFILE_CHANGED:break;case mr.USER_PROFILE_IMAGE_CHANGED:try{if(!L.users[k][B][A.content.user_id])throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let vt=yield L.servers[k][B].client.readStorageObjects(L.servers[k][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:A.content.user_id}]});if(vt.objects.length)try{if(L.servers[k][B].session.user_id==A.content.user_id)throw"me";L.load_other_user(A.content.user_id,k,B).img=vt.objects[0].value.img.replace(/"|\\|=/g,""),L.indexed.saveTextFileToUserPath(L.users[k][B][A.content.user_id].img,`servers/${k}/${B}/users/${A.content.user_id}/profile.img`)}catch{L.users.self.img=vt.objects[0].value.img.replace(/"|\\|=/g,""),yield L.indexed.saveTextFileToUserPath(L.users.self.img,"servers/self/profile.img")}else try{if(L.servers[k][B].session.user_id==A.content.user_id)throw"me";delete L.users[k][B][A.content.user_id].img,L.indexed.removeFileFromUserPath(`servers/${k}/${B}/users/${A.content.user_id}/profile.img`)}catch{delete L.users.self.img}}catch(vt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",vt)}return;case mr.MANAGE_POST:switch(A.content.type){case"add":try{let Ft=A.content.user_id==L.servers[k][B].session.user_id;if(!L.users[k][B][A.content.user_id]&&!Ft)throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let _n=yield L.load_server_post_with_id(A.content.post_id,k,B,A.content.user_id,Ft);L.rearrange_posts(),!Ft&&_n&&null!=_n&&_n.title&&(L.p5toast.show({text:`${L.lang.text.AddPost.Title}: ${_n.title}`}),L.has_new_post=!0)}catch{}break;case"remove":L.RemovePost({id:A.content.post_id,creator_id:A.content.user_id,attachments:[],server:{isOfficial:k,target:B}},!0)}return;case 1:A.request=`${L.lang.text.Nakama.ServerNoti}: ${decodeURIComponent(A.content.msg)}`;let H=decodeURIComponent(A.content.msg),de=decodeURIComponent(A.content.uri);L.noti.PushLocal({id:A.code,title:L.servers[k][B].info.name,body:H,image:de,smallIcon_ln:"diychat"},"global_noti_all",vt=>{let Ft=`<div style="text-align: center"><img src="${de}" alt="noti_image" style="border-radius: 2px"/></div>`,_n=`<div>${L.global.HTMLEncode(H)}</div>`;L.alertCtrl.create({header:L.servers[k][B].info.name,message:new yn.Vk(de?Ft+_n:_n),buttons:[{text:L.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var pt=(0,F.A)(function*(){try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id])}catch{}L.noti.ClearNoti(A.code),L.update_notifications(k,B)});return function(){return pt.apply(this,arguments)}}()()}}]}).then($e=>$e.present())});break;case 0:A.request=`${A.code}-${A.subject}`;break;case-1:let Ke;A.request=`${A.code}-${A.subject}`,2===(A.content&&A.content.username&&(Ke=2),Ke)?L.join_chat_with_modulation(A.sender_id,Ke,k,B):(console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \ud589\ub3d9\ucc98\ub9ac: ",A,Ke),A.request=`${A.code}-${A.subject}`),se=!0;try{(yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),L.update_notifications(k,B)}catch(vt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",vt)}break;case-2:case-3:A.request=`${A.code}-${A.subject}`;break;case-4:L.socket_reactive.group_detail&&L.socket_reactive.group_detail.info.id==A.content.group_id&&L.socket_reactive.group_detail.update_from_notification(A);try{L.groups[k][B][A.content.group_id].status="online"}catch{try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}}A.request=`${A.code}-${A.subject}`;try{let vt=yield L.servers[k][B].client.readStorageObjects(L.servers[k][B].session,{object_ids:[{collection:"group_public",key:`group_${A.content.group_id}`,user_id:L.groups[k][B][A.content.group_id].creator_id}]});vt.objects.length&&(L.groups[k][B][A.content.group_id].img=vt.objects[0].value.img,L.indexed.saveTextFileToUserPath(vt.objects[0].value.img,`servers/${k}/${B}/groups/${A.content.group_id}.img`))}catch(vt){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",vt)}try{yield L.load_groups(k,B,A.content.group_id,!0)}catch(vt){console.error("\uadf8\ub8f9 \uc0ac\uc6a9\uc790 \uac00\uc838\uc624\uae30 \uc624\ub958: ",vt)}L.join_chat_with_modulation(A.content.group_id,3,k,B,!0),L.noti.PushLocal({id:A.code,title:`${L.groups[k][B][A.content.group_id].name}: ${L.lang.text.Nakama.LocalNotiTitle}`,body:A.subject,icon:L.groups[k][B][A.content.group_id.img],smallIcon_ln:"diychat"},void 0,vt=>{L.check_notifications(A,k,B)});break;case-5:let Ve=L.groups[k][B][A.content.group_id];if(Ve)A.request=`${L.lang.text.Nakama.ReqContTitle}: ${Ve.name}`;else{se=!0;try{let vt=yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]);vt?L.update_notifications(k,B):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",vt)}catch(vt){console.error("\uc54c\ub9bc \uc81c\uac70 \uc624\ub958: ",vt)}}L.socket_reactive.group_detail&&L.socket_reactive.group_detail.info.id==A.content.group_id&&L.socket_reactive.group_detail.update_from_notification(A),L.noti.PushLocal({id:A.code,title:`${L.groups[k][B][A.content.group_id].name}: ${L.lang.text.Nakama.ReqContTitle}`,icon:L.groups[k][B][A.content.group_id].img,smallIcon_ln:"diychat"},void 0,vt=>{L.socket_reactive.group_detail.info.id!=A.content.group_id&&L.global.ActLikeModal("group-detail",{info:L.groups[k][B][A.content.group_id],server:{isOfficial:k,target:B}})});break;case-6:A.request=`${A.code}-${A.subject}`;break;case-7:A.request=`${L.servers[k][B].info.name}: ${L.lang.text.Nakama.SessionLogout}`,L.LoginAgain(A,k,B);break;case mr.MANAGE_TODO:{const vt="add_todo";switch(A.content.type){case"add":L.servers[k][B].client.readStorageObjects(L.servers[k][B].session,{object_ids:[{collection:A.content.collection,key:A.content.key,user_id:A.content.sender_id||L.servers[k][B].session.user_id}]}).then(function(){var He=(0,F.A)(function*($e){if($e.objects.length){try{let Dt,ot=$e.objects[0].value;try{if(Dt=yield L.indexed.loadTextFromUserPath(`todo/${ot.id}_${k}_${B}/info.todo`),!Dt)throw"empty"}catch{Dt=yield L.indexed.loadTextFromUserPath(`todo/${ot.id}/info.todo`)}let vn=JSON.parse(Dt);L.removeRegisteredId(vn.noti_id),L.noti.ClearNoti(vn.noti_id)}catch{}yield L.modify_remote_info_as_local($e.objects[0].value,k,B);let pt=$e.objects[0].value;L.noti.ClearNoti(pt.noti_id),L.set_todo_notification(pt),yield L.p5loading.update({id:vt,message:`${L.lang.text.Main.Title}: ${pt.title}`,progress:1,forceEnd:350})}});return function($e){return He.apply(this,arguments)}}());break;case"done":L.indexed.loadTextFromUserPath(`todo/${A.content.id}_${k}_${B}/info.todo`,function(){var He=(0,F.A)(function*($e,pt){if($e&&pt){let ot=JSON.parse(pt);ot.done=!0,yield L.modify_remote_info_as_local(ot,k,B),L.indexed.GetFileListFromDB(`todo/${ot.id}`).then(Dt=>{Dt.forEach(vn=>L.indexed.removeFileFromUserPath(vn)),L.RemoveLocalPushSchedule(ot),L.removeRegisteredId(ot.noti_id),L.noti.ClearNoti(ot.noti_id),L.SyncTodoCounter(k,B)})}else L.indexed.loadTextFromUserPath(`todo/${A.content.id}/info.todo`,function(){var ot=(0,F.A)(function*(Dt,vn){if(Dt&&vn){let Hn=JSON.parse(vn);Hn.done=!0,yield L.modify_remote_info_as_local(Hn,k,B),L.indexed.GetFileListFromDB(`todo/${Hn.id}`).then(cr=>{cr.forEach(Pr=>L.indexed.removeFileFromUserPath(Pr)),L.RemoveLocalPushSchedule(Hn),L.removeRegisteredId(Hn.noti_id),L.noti.ClearNoti(Hn.noti_id),L.SyncTodoCounter(k,B)})}});return function(Dt,vn){return ot.apply(this,arguments)}}())});return function($e,pt){return He.apply(this,arguments)}}());break;case"delete":L.indexed.loadTextFromUserPath(`todo/${A.content.id}_${k}_${B}/info.todo`,(He,$e)=>{if(He&&$e){let pt=JSON.parse($e);L.indexed.GetFileListFromDB(`todo/${pt.id}`).then(ot=>{ot.forEach(Dt=>L.indexed.removeFileFromUserPath(Dt)),L.RemoveLocalPushSchedule(pt),L.removeRegisteredId(pt.noti_id),L.noti.ClearNoti(pt.noti_id),L.global.p5removeTodo&&L.global.p5removeTodo(JSON.stringify(pt))}),L.SyncTodoCounter(k,B)}else L.indexed.loadTextFromUserPath(`todo/${A.content.id}/info.todo`,(pt,ot)=>{if(pt&&ot){let Dt=JSON.parse(ot);L.indexed.GetFileListFromDB(`todo/${Dt.id}`).then(vn=>{vn.forEach(Hn=>L.indexed.removeFileFromUserPath(Hn)),L.RemoveLocalPushSchedule(Dt),L.removeRegisteredId(Dt.noti_id),L.noti.ClearNoti(Dt.noti_id),L.global.p5removeTodo&&L.global.p5removeTodo(JSON.stringify(Dt))}),L.SyncTodoCounter(k,B)}})});break;case"worker":let Ft=A.content.isDelete;L.AddTodoManageUpdateAct&&L.AddTodoManageUpdateAct(A.content.id,A.sender_id,Ft,A.content.timeAt);let _n=Ft?L.lang.text.Main.WorkerAbandon:L.lang.text.Main.WorkerDone;yield L.p5loading.update({id:vt,message:`${_n}: ${L.GetOverrideName(A.sender_id,k,B)||L.users[k][B][A.sender_id].display_name}`,progress:1,forceEnd:350}),L.indexed.loadTextFromUserPath(`todo/${A.content.id}_${k}_${B}/info.todo`,function(){var He=(0,F.A)(function*($e,pt){if($e&&pt){let ot=JSON.parse(pt);for(let Dt=0,vn=ot.workers.length;Dt<vn;Dt++)if((ot.workers[Dt].user_id||ot.workers[Dt].id)==A.sender_id){ot.workers[Dt].isDelete=Ft,ot.workers[Dt].timestamp=A.content.timeAt;break}yield L.modify_remote_info_as_local(ot,k,B),L.SyncTodoCounter(k,B)}else L.indexed.loadTextFromUserPath(`todo/${A.content.id}/info.todo`,function(){var ot=(0,F.A)(function*(Dt,vn){if(Dt&&vn){let Hn=JSON.parse(vn);for(let cr=0,Pr=Hn.workers.length;cr<Pr;cr++)if((Hn.workers[cr].user_id||Hn.workers[cr].id)==A.sender_id){Hn.workers[cr].isDelete=Ft,Hn.workers[cr].timestamp=A.content.timeAt;break}yield L.modify_remote_info_as_local(Hn,k,B),L.SyncTodoCounter(k,B)}});return function(Dt,vn){return ot.apply(this,arguments)}}())});return function($e,pt){return He.apply(this,arguments)}}())}L.SyncTodoCounter(k,B);try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}}break;case mr.EDIT_PROFILE:switch(A.content.type){case"info":L.servers[k][B].client.getAccount(L.servers[k][B].session).then(vt=>{Object.keys(vt.user).forEach(_n=>L.users.self[_n]=vt.user[_n]),L.save_self_profile()});break;case"image":L.servers[k][B].client.readStorageObjects(L.servers[k][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:L.servers[k][B].session.user_id}]}).then(vt=>{vt.objects.length?(L.indexed.saveTextFileToUserPath(JSON.stringify(vt.objects[0].value.img),"servers/self/profile.img"),L.users.self.img=vt.objects[0].value.img.replace(/"|=|\\/g,"")):L.indexed.removeFileFromUserPath("servers/self/profile.img")})}try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}break;case mr.ADD_CHANNEL:L.get_group_list_from_server(k,B,A.content.id);try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}break;case mr.NAME_OVERRIDED:L.LoadOverrideName(k,B);try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}break;case mr.CHATROOM_CHECKED:delete L.channels_orig[k][B][A.content.id].is_new,L.noti.ClearNoti(L.channels_orig[k][B][A.content.id].cnoti_id),L.rearrange_channels();{let vt=Object.keys(L.channels_orig[k][B]),Ft=!1;for(let _n of vt)if(L.channels_orig[k][B][_n].is_new){Ft=!0;break}Ft||(L.has_new_channel_msg=!1)}try{yield L.servers[k][B].client.deleteNotifications(L.servers[k][B].session,[A.id]),L.update_notifications(k,B)}catch{}break;default:console.log("\ud655\uc778\ub418\uc9c0 \uc54a\uc740 \uc2e4\uc2dc\uac04 \uc54c\ub9bc_nakama_noti: ",A),A.request=`${A.code}-${A.subject}`}se||(L.noti_origin[k][B][A.id]=A)})()}LoginAgain(A,k,B){this.alertCtrl.create({header:this.servers[k][B].info.name,message:this.lang.text.Nakama.LoginAgain,buttons:[{text:this.lang.text.Profile.login_toggle,handler:()=>{try{delete this.noti_origin[k][B][A.id]}catch{}this.rearrange_notifications(),this.link_group(k,B,!0)}}]}).then(L=>L.present())}WriteStorage_From_channel(A,k,B,L,se=0,H){var de=this;return(0,F.A)(function*(){let Ke=JSON.parse(JSON.stringify(A)),Ve=yield yield de.indexed.GetFileInfoFromDB(k),vt=Math.ceil(Ve.contents.length/Kt.xM);const Ft=H||`ForceSQL_write_${Date.now()}`;if(de.p5loading.update({id:Ft,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Ke.content.filename}`}),de.OnTransfer[B][L][A.channel_id]||(de.OnTransfer[B][L][A.channel_id]={}),de.OnTransfer[B][L][A.channel_id][A.message_id]||(de.OnTransfer[B][L][A.channel_id][A.message_id]={index:vt}),!de.OnTransfer[B][L][A.channel_id][A.message_id].OnTransfer){A.content.transfer_index||(A.content.transfer_index=de.OnTransfer[B][L][A.channel_id][A.message_id]);for(let _n=se;_n<vt;_n++)try{de.p5loading.update({id:Ft,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Ke.content.filename}`,progress:_n/vt});let He=de.global.req_file_part_base64(Ve,_n,k);yield de.servers[B][L].client.writeStorageObjects(de.servers[B][L].session,[{collection:`file_${Ke.channel_id.replace(/[.]/g,"_")}`,key:`msg_${Ke.message_id}_${_n}`,permission_read:2,permission_write:1,value:{data:He}}]),de.OnTransfer[B][L][A.channel_id][A.message_id].index=vt-1-_n,de.OnTransfer[B][L][A.channel_id][A.message_id].OnTransfer="upload"}catch(He){console.log("WriteStorage_From_channel: ",He),de.noti.PushLocal({id:7,title:de.lang.text.Nakama.FailedUpload,body:`${Ke.content.filename}: ${He}`,smallIcon_ln:"diychat"},de.noti.Current),de.p5toast.show({text:`${de.lang.text.Nakama.FailedUpload}: ${He}`});break}setTimeout(()=>{de.p5loading.remove(Ft),delete de.OnTransfer[B][L][A.channel_id][A.message_id],de.global.remove_req_file_info(A,k),de.noti.PushLocal({id:7,title:de.lang.text.ChatRoom.SendFile,body:Ke.content.filename,smallIcon_ln:"diychat"},de.noti.Current)},100)}})()}ReadStorage_From_channel(A,k,B,L,se=0){var H=this;return(0,F.A)(function*(){let de=JSON.parse(JSON.stringify(A));const Ke=`ForceSQL_read_${Date.now()}`;if(H.p5loading.update({id:Ke,message:`${H.lang.text.ChatRoom.forceSQL}: ${H.lang.text.ChatRoom.SavingFile}: ${de.content.filename}`}),H.OnTransfer[B][L][A.channel_id]||(H.OnTransfer[B][L][A.channel_id]={}),H.OnTransfer[B][L][A.channel_id][A.message_id]||(H.OnTransfer[B][L][A.channel_id][A.message_id]={index:de.content.partsize}),H.OnTransfer[B][L][A.channel_id][A.message_id].OnTransfer)return;A.content.transfer_index||(A.content.transfer_index=H.OnTransfer[B][L][A.channel_id][A.message_id]);let Ve=!0;for(let vt=se,Ft=de.content.partsize;vt<Ft;vt++)try{H.p5loading.update({id:Ke,progress:vt/Ft});let _n=yield H.servers[B][L].client.readStorageObjects(H.servers[B][L].session,{object_ids:[{collection:`file_${de.channel_id.replace(/[.]/g,"_")}`,key:`msg_${de.message_id}_${vt}`,user_id:de.sender_id}]});H.global.save_file_part(k,vt,_n.objects[0].value.data),H.OnTransfer[B][L][A.channel_id][A.message_id].index=Ft-1-vt,H.OnTransfer[B][L][A.channel_id][A.message_id].OnTransfer="download"}catch(_n){console.log("ReadStorage_From_channel: ",_n),Ve=!1,H.p5loading.update({id:Ke,message:`${H.lang.text.Nakama.FailedDownload}: ${_n}`,progress:0});break}if(Ve){if(A.content.url)A.content.thumbnail=A.content.url;else{A.content.text=[H.lang.text.ChatRoom.SavingFile],delete A.content.transfer_index,delete H.OnTransfer[B][L][de.channel_id][de.message_id].index;let Ft=[],_n=0;yield new Promise(function(){var He=(0,F.A)(function*($e){for(let pt=0,ot=de.content.partsize;pt<ot;pt++)try{let Dt=yield H.indexed.GetFileInfoFromDB(`${k}_part/${pt}.part`);_n+=Dt.contents.length,Ft[pt]=Dt}catch(Dt){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",Dt);break}try{let pt=new Int8Array(_n),ot=0;for(let Dt=0,vn=Ft.length;Dt<vn;Dt++)pt.set(Ft[Dt].contents,ot),ot+=Ft[Dt].contents.length;yield H.indexed.saveInt8ArrayToUserPath(pt,k);for(let Dt=0,vn=de.content.partsize;Dt<vn;Dt++)H.indexed.removeFileFromUserPath(`${k}_part/${Dt}.part`);yield H.indexed.removeFileFromUserPath(`${k}_part`),H.global.remove_req_file_info(de,k),A.content.text=[H.lang.text.ChatRoom.FileSaved]}catch(pt){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",pt)}$e(void 0)});return function($e){return He.apply(this,arguments)}}()),H.noti.ClearNoti(8)}let vt;if(de.content.path=k,"godot"!=de.content.viewer){let Ft=yield H.indexed.loadBlobFromUserPath(k,A.content.type||"");vt=URL.createObjectURL(Ft)}yield H.global.modulate_thumbnail((H.OnTransferMessage[de.message_id]||A).content,vt),delete H.OnTransfer[B][L][de.channel_id][de.message_id],delete H.OnTransferMessage[de.message_id]}return H.p5loading.remove(Ke),Ve})()}sync_save_file(A,k,B,L,se=""){var H=this;return(0,F.A)(function*(){try{var de;if("online"!=H.statusBar.groupServer[k][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";null!==(de=A.blob)&&void 0!==de&&de.size&&(yield H.indexed.saveBlobToUserPath(A.blob,A.path));let Ke=yield H.indexed.GetFileInfoFromDB(A.path);A.partsize=Math.ceil((A.size||Ke.contents.length)/Kt.xM),delete A.blob,yield H.servers[k][B].client.writeStorageObjects(H.servers[k][B].session,[{collection:L,key:se||A.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),permission_read:2,permission_write:1,value:A}]);for(let Ve=0;Ve<A.partsize;Ve++){let vt=H.global.req_file_part_base64(Ke,Ve,A.path);yield H.servers[k][B].client.writeStorageObjects(H.servers[k][B].session,[{collection:L,key:se?`${se}_${Ve}`:A.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${Ve}`,permission_read:2,permission_write:1,value:{data:vt}}])}H.indexed.removeFileFromUserPath(`${A.path}.history`),H.noti.PushLocal({id:7,title:H.lang.text.ChatRoom.SendFile,body:A.filename,smallIcon_ln:"diychat"},H.noti.Current)}catch(Ke){throw console.log("SyncSaveFailed: ",Ke),H.noti.PushLocal({id:7,title:H.lang.text.Nakama.FailedUpload,body:`${A.filename}: ${Ke}`,smallIcon_ln:"diychat"},H.noti.Current),Ke}})()}sync_load_file(A,k,B,L,se="",H="",de=!0){var Ke=this;return(0,F.A)(function*(){try{if("online"!=Ke.statusBar.groupServer[k][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let vt=(yield Ke.servers[k][B].client.readStorageObjects(Ke.servers[k][B].session,{object_ids:[{collection:L,key:H||A.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:se||Ke.servers[k][B].session.user_id}]})).objects[0].value,Ft=!0;for(let _n=0;_n<vt.partsize;_n++)try{let He=yield Ke.servers[k][B].client.readStorageObjects(Ke.servers[k][B].session,{object_ids:[{collection:L,key:H?`${H}_${_n}`:A.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${_n}`,user_id:se||Ke.servers[k][B].session.user_id}]});Ke.global.save_file_part(A.alt_path||A.path,_n,He.objects[0].value.data)}catch(He){console.log("sync_load_file failed: ",He),Ft=!1,de&&Ke.p5toast.show({text:`${Ke.lang.text.Nakama.FailedDownload}: ${He}`}),A.url&&(A.thumbnail=A.url);break}if(Ft){delete A.url,A.text=[Ke.lang.text.ChatRoom.SavingFile];let _n=[],He=0;yield new Promise(function(){var $e=(0,F.A)(function*(pt,ot){let Dt=!1;for(let vn=0,Hn=vt.partsize;vn<Hn;vn++)try{let cr=yield Ke.indexed.GetFileInfoFromDB(`${A.alt_path||A.path}_part/${vn}.part`);He+=cr.contents.length,_n[vn]=cr}catch(cr){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",cr),Dt=!0;break}try{if(Dt)throw"\ud30c\uc77c \ubcd1\ud569 \uc2e4\ud328";let vn=new Int8Array(He),Hn=0;for(let cr=0,Pr=_n.length;cr<Pr;cr++)vn.set(_n[cr].contents,Hn),Hn+=_n[cr].contents.length;yield Ke.indexed.saveInt8ArrayToUserPath(vn,A.alt_path||A.path);for(let cr=0,Pr=vt.partsize;cr<Pr;cr++)Ke.indexed.removeFileFromUserPath(`${A.alt_path||A.path}_part/${cr}.part`);yield Ke.indexed.removeFileFromUserPath(`${A.alt_path||A.path}_part`)}catch(vn){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",vn),ot()}pt(void 0)});return function(pt,ot){return $e.apply(this,arguments)}}()),Ke.noti.ClearNoti(8),Ke.indexed.removeFileFromUserPath(`${A.alt_path||A.path}.history`)}return{from:"remote",value:yield Ke.indexed.loadBlobFromUserPath(A.alt_path||A.path,vt.type||"")}}catch{try{return{from:"local",value:yield Ke.indexed.loadBlobFromUserPath(A.alt_path||A.path,A.type||"")}}catch(vt){return{from:"failed",value:null,error:vt}}}})()}sync_remove_file(A,k,B,L,se="",H=""){var de=this;return(0,F.A)(function*(){try{yield de.indexed.removeFileFromUserPath(A)}catch{}try{if("online"!=de.statusBar.groupServer[k][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let Ve=(yield de.servers[k][B].client.readStorageObjects(de.servers[k][B].session,{object_ids:[{collection:L,key:A.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:se||de.servers[k][B].session.user_id}]})).objects[0].value;try{yield de.servers[k][B].client.rpc(de.servers[k][B].session,"remove_channel_file",{collection:L,key:(H||Ve.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120))+"_"})}catch(vt){console.log("SQL \uac15\uc81c \ud30c\uc77c \uc0ad\uc81c \uc624\ub958: ",vt)}yield de.servers[k][B].client.deleteStorageObjects(de.servers[k][B].session,{object_ids:[{collection:L,key:H||Ve.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)}]})}catch{}})()}open_url_link(A,k=!0){var B=this;return(0,F.A)(function*(){const L=B.global.GetConnectedAddress(),se=yield B.global.GetHeaderAddress();if(0==A.indexOf("https://is2you2.github.io/pjcone_pwa/?")||0==A.indexOf(`${L}?`)||0==A.indexOf(`${se}?`)){const H=B.global.CatchGETs(A)||{};try{return yield B.AddressToQRCodeAct(H),!0}catch(de){console.log("open_url_link: ",de),B.p5toast.show({text:`${B.lang.text.AddGroup.DiffFormat}: ${de}`})}}else k&&B.global.open_link(A);return!1})()}AddressToQRCodeAct(A,k=!1){var B=this;return(0,F.A)(function*(){let L=[];if(A.open_profile&&L.push({type:"open_profile"}),A.server)for(let se=0,H=A.server.length;se<H;se++){let de=A.server[se].split(","),Ve=de[0].split("://"),vt="https"==Ve.shift(),Ft=Ve.shift().split(":"),_n=Ft[0],He=Number(Ft[1]);L.push({type:"server",value:{address:_n||"192.168.0.1",useSSL:vt||!1,nakama_port:He,cdn_port:de[2],apache_port:de[3],square_port:de[4],webrtc_port:de[5],key:de[1]||"",isOfficial:"unofficial"}})}if(A.group)for(let se=0,H=A.group.length;se<H;se++){let de=A.group[se].split(",");L.push({type:"group",name:de[0],id:de[1]})}if(A.group_dedi){let se=A.group_dedi[0].split(",");L.push({type:"group_dedi",value:{address:se[0],channel:se[1]}})}if(A.open_prv_channel){let se=A.open_prv_channel[0].split(",");L.push({type:"open_prv_channel",user_id:se[0],address:se[1]})}if(A.open_channel){let se=A.open_channel[0].split(",");L.push({type:"open_channel",group_id:se[0],address:se[1]})}if(A.rtcserver)for(let se=0,H=A.rtcserver.length;se<H;se++){let de=A.rtcserver[se].split("]"),Ke=de[0].split("[")[1],Ve=de[1].split(",");L.push({type:"rtcserver",value:{urls:Ke.split(","),username:Ve[1],credential:Ve[2]}})}if(A.postViewer&&L.push({type:"postViewer",address:A.postViewer[0]}),A.fileviewer){let se=A.fileviewer[0].split(",");const H=se.pop(),de=se.join(",");L.push({type:"fileviewer",url:de,viewer:H})}if(A.token){let se=A.token[0].split(",");L.push({type:"token",address:se[0],square_port:Number(se[1]),socketId:se[2]})}if(k)return L;yield B.act_from_QRInfo(L)})()}GenerateQRCode(A){var k=this;return(0,F.A)(function*(){return`${yield k.global.GetHeaderAddress()}?server=${A.useSSL?"https":"http"}://${A.address||""}${A.nakama_port?`:${A.nakama_port}`:""},${A.key||""},${A.cdn_port||""},${A.apache_port||""},${A.square_port||""},${A.webrtc_port||""}`.replace(/ /g,"%20")})()}act_from_QRInfo(A,k=""){var B=this;return(0,F.A)(function*(){for(let L=0,se=20;L<se&&!B.lang.text.WebRTCDevManager.SecurityError;L++)yield new Promise(H=>setTimeout(H,1e3));for(let L=0,se=A.length;L<se;L++)switch(A[L].type){case"open_profile":B.open_profile_page();break;case"server":if(!B.CheckIfHasServer(`${A[L].value.useSSL?"https":"http"}://${A[L].value.address}:${A[L].value.port||7350}`)){let Ve=!1;B.global.PageDismissAct["quick-server-detail"]=function(){var Ft=(0,F.A)(function*(_n){B.global.RestoreShortCutAct("quick-server-detail"),delete B.global.PageDismissAct["quick-server-detail"],_n&&(B.init_server(_n),yield B.init_session(_n)),Ve=!0});return function(_n){return Ft.apply(this,arguments)}}(),B.global.StoreShortCutAct("quick-server-detail"),B.global.ActLikeModal("server-detail",{data:A[L].value}),B.p5toast.show({text:B.lang.text.Nakama.AddNewServer}),yield function(){var Ft=(0,F.A)(function*(){for(;!Ve;)yield new Promise(_n=>setTimeout(_n,0))});return function(){return Ft.apply(this,arguments)}}()()}break;case"group_dedi":yield B.global.RemoveAllModals(),yield B.global.AnonymousUserCreateName(),B.navCtrl.navigateForward("minimal-chat",{animation:yn.V5,state:{address:A[L].value.address,channel:A[L].value.channel,quick:!0}});break;case"group":B.AfterLoginActDone?yield B.try_add_group(A[L]):B.AfterLoginAct.push((0,F.A)(function*(){yield B.try_add_group(A[L])}));break;case"open_prv_channel":{let Ve=B.CheckIfHasServer(A[L].address);if(Ve)if(B.AfterLoginActDone){let vt=yield B.join_chat_with_modulation(A[L].user_id,2,Ve.isOfficial,Ve.target,!0);B.go_to_chatroom(vt)}else B.AfterLoginAct.push((0,F.A)(function*(){let vt=yield B.join_chat_with_modulation(A[L].user_id,2,Ve.isOfficial,Ve.target,!0);B.go_to_chatroom(vt)})),B.p5toast.show({text:B.lang.text.Nakama.NeedLogin}),B.users.self.online||B.open_profile_page();else B.p5toast.show({text:B.lang.text.Nakama.NoLoginServer})}break;case"open_channel":{let Ve=B.CheckIfHasServer(A[L].address);if(Ve)if(B.AfterLoginActDone){let vt=yield B.join_chat_with_modulation(A[L].group_id,3,Ve.isOfficial,Ve.target,!0);B.go_to_chatroom(vt)}else B.AfterLoginAct.push((0,F.A)(function*(){let vt=yield B.join_chat_with_modulation(A[L].group_id,3,Ve.isOfficial,Ve.target,!0);B.go_to_chatroom(vt)})),B.p5toast.show({text:B.lang.text.Nakama.NeedLogin}),B.users.self.online||B.open_profile_page();else B.p5toast.show({text:B.lang.text.Nakama.NoLoginServer})}break;case"rtcserver":B.SaveWebRTCServer(A[L].value,!0);break;case"postViewer":let Ke=yield fetch(A[L].address);if(Ke.ok){let Ve=yield Ke.text(),vt=JSON.parse(Ve);vt.quick=!0,B.open_post(vt,-2,k)}else B.p5toast.show({text:`${B.lang.text.AddPost.NoPostOutLink}: ${Ke.statusText}`});break;case"token":{const vt=A[L].square_port,Ft=A[L].socketId;let _n=new WebSocket(`${A[L].address}:${vt||12013}`);_n.onopen=()=>{_n.send(JSON.stringify({type:"reqInfo",socketId:Ft}))},_n.onmessage=He=>{let $e;$e="string"==typeof He.data?He.data:He.data.text();try{const pt=JSON.parse($e);if("req_info"===pt.type)switch(pt.act){case"voiddraw":B.global.PageDismissAct["voiddraw-remote"]=()=>{delete B.global.PageDismissAct["voiddraw-remote"]},B.global.ActLikeModal(k+"void-draw",{remote:{address:A[L].address,channel:pt.channel_id,port:pt.port||3478,username:pt.username,password:pt.credential},quick:!0,saveClipboard:!0,dismiss:"voiddraw-remote"});break;case"instc":B.global.RemoveAllModals((0,F.A)(function*(){yield B.global.AnonymousUserCreateName(),B.navCtrl.navigateForward(k+"instant-call",{animation:yn.NC,state:{address:A[L].address,channel:pt.channel_id,port:pt.port,username:pt.username,password:pt.password,square_port:vt,useVideo:pt.useVideo,users:pt.users||[],quick:!0}})}));break;case"arcade":A[L].cdn_port=pt.cdn_port||9001,A[L].apache_port=pt.apache_port||9002,B.global.JoinArcadeWithSocketInfo(A[L])}}catch(pt){console.log("\ube60\ub978 \uc9c4\uc785 \uc18c\ucf13 \ud589\ub3d9 \uc624\ub958: ",pt),_n.close(1e3,pt)}_n.close(1e3,"done")},_n.onerror=He=>{_n.close(1e3,"onerror")},_n.onclose=He=>{switch(console.log("\uc18c\ucf13 \ud589\ub3d9 \uc885\ub8cc: ",He),He.reason){case"max_limit":B.p5toast.show({text:B.lang.text.MinimalChat.block});break;case"expired":B.p5toast.show({text:B.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",He.reason)}_n.onopen=null,_n.onmessage=null,_n.onclose=null,_n.onerror=null,_n=null}}break;case"fileviewer":B.global.PageDismissAct["quick-fileviewer"]=Ve=>{delete B.global.PageDismissAct["quick-fileviewer"]},B.global.ActLikeModal(k+"ionic-viewer",{info:{content:{filename:A[L].url.split("/").pop(),file_ext:A[L].url.split(".").pop(),url:A[L].url,viewer:A[L].viewer}},relevance:[{content:{filename:A[L].url.split("/").pop(),file_ext:A[L].url.split(".").pop(),url:A[L].url,viewer:A[L].viewer}}],noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"quick-fileviewer"});break;default:throw"\uc9c0\uc815\ub41c \ud2c0 \uc544\ub2d8"}})()}CheckIfHasServer(A){let k=!1;try{let B=A.split("://"),L="https"==B.shift(),se=B.shift().split(":"),H=se[0],de=Number(se[1])||7350,Ke=this.get_all_server_info(!0);for(let Ve of Ke)if(Ve.address==H&&Ve.useSSL==L&&(Ve.nakama_port||7350)==de){k=Ve;break}}catch{}return k}load_local_post_with_id(A,k,B,L){var se=this;return(0,F.A)(function*(){let H=yield se.indexed.loadTextFromUserPath(`servers/${k}/${B}/posts/${L}/${A}/info.json`);try{try{if(se.posts_orig[k][B][L][A])throw"exist"}catch(Ke){if("exist"==Ke)throw"\uc774\ubbf8 \uc788\ub294 \uac8c\uc2dc\ubb3c"}let de=JSON.parse(H);try{de.server={name:se.servers[k][B].info.name,isOfficial:k,target:B}}catch{de.server={name:se.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0}}if(de.mainImage)try{if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let Ke=yield se.indexed.loadBlobFromUserPath(de.mainImage.path,de.mainImage.type);de.mainImage.blob=Ke;const Ve=URL.createObjectURL(Ke);de.mainImage.thumbnail=Ve,setTimeout(()=>{URL.revokeObjectURL(Ve)},5e3)}}catch{}return se.posts_orig[k][B][L][A]=de,!0}catch{return!1}})()}GetOverrideName(A,k,B){let L;try{L=this.usernameOverride[k][B][A]}catch{}return L}SaveOverrideName(A,k,B,L){var se=this;return(0,F.A)(function*(){k?se.usernameOverride[B][L][A]=k:delete se.usernameOverride[B][L][A];let H=JSON.stringify(se.usernameOverride[B][L]),Ke={blob:new Blob([H],{type:"application/json"}),path:`servers/${B}/${L}/users/override_name.json`};yield se.sync_save_file(Ke,B,L,"usernameOverride","override");try{yield se.servers[B][L].client.rpc(se.servers[B][L].session,"send_noti_fn",{receiver_id:se.servers[B][L].session.user_id,title:"name_overrided",content:{},code:mr.NAME_OVERRIDED,persistent:!1})}catch{}})()}LoadOverrideName(A,k){var B=this;return(0,F.A)(function*(){let L={path:`servers/${A}/${k}/users/override_name.json`},se=yield B.sync_load_file(L,A,k,"usernameOverride",void 0,"override",!1);if(se.value){let H=yield se.value.text(),de=JSON.parse(H),Ke=Object.keys(de);B.usernameOverride[A][k]={};for(let Ve of Ke)B.usernameOverride[A][k][Ve]=de[Ve]}})()}LoadOverridesOffline(){var A=this;return(0,F.A)(function*(){let k=yield A.indexed.GetFileListFromDB("override_name.json");for(let B of k)try{let L=B.split("/");A.usernameOverride[L[1]]||(A.usernameOverride[L[1]]={}),A.usernameOverride[L[1]][L[2]]||(A.usernameOverride[L[1]][L[2]]={});let H=yield(yield A.indexed.loadBlobFromUserPath(B,"")).text(),de=JSON.parse(H);A.usernameOverride[L[1]][L[2]]=de}catch{}})()}load_server_post_with_id(A,k,B,L,se){var H=this;return(0,F.A)(function*(){let de;try{let Ve={path:`servers/${k}/${B}/posts/${L}/${A}/info.json`,type:"application/json"};const vt=yield H.sync_load_file(Ve,k,B,"server_post",L,A,!1);if(vt.error)return!1;const Ft=yield vt.value.text();de=JSON.parse(Ft),de.is_me=de.is_me||se;const _n=new Blob([JSON.stringify(de)],{type:"application/json"});if(de.OutSource&&!de.is_me)throw"\ub2e4\ub978 \uc0ac\ub78c\uc758 \uc678\ubd80 \uac8c\uc2dc\ubb3c \uc815\ubcf4 \ubb34\uc2dc";H.indexed.saveBlobToUserPath(_n,Ve.path),de.server={isOfficial:k,target:B};try{de.server.name=H.servers[k][B].info.name}catch{de.server.name=H.lang.text.Nakama.DeletedServer}if(de.mainImage)if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let He={path:de.mainImage.path,alt_path:`servers/${k}/${B}/posts/${L}/${A}/MainImage.png`,type:"image/png"};const $e=yield H.sync_load_file(He,k,B,"server_post",L,`${A}_mainImage`,!1);de.mainImage.blob=$e.value;const pt=URL.createObjectURL($e.value);de.mainImage.thumbnail=pt,setTimeout(()=>{URL.revokeObjectURL(pt)},5e3)}try{de.creator_name=H.load_other_user(L,k,B).display_name||de.creator_name}catch{}if(H.posts_orig[k]||(H.posts_orig[k]={}),H.posts_orig[k][B]||(H.posts_orig[k][B]={}),H.posts_orig[k][B][L]||(H.posts_orig[k][B][L]={}),("deleted"!=k||de.is_me)&&(H.posts_orig[k][B][L][A]=de),"local"==vt.from)try{if(!(yield H.servers[k][B].client.readStorageObjects(H.servers[k][B].session,{object_ids:[{collection:"server_post",key:A,user_id:L}]})).objects.length)throw"Not RemoteExist"}catch(He){if("Not RemoteExist"==He)throw"RemoveSelf"}return de}catch(Ve){var Ke;return"RemoveSelf"==Ve?H.RemovePost(H.posts_orig[k][B][L][A],!0):de&&null!==(Ke=de)&&void 0!==Ke&&Ke.creator_id&&((yield H.indexed.GetFileListFromDB(`servers/${k}/${B}/posts/${de.creator_id}/${de.id}`)).forEach(Ft=>H.indexed.removeFileFromUserPath(Ft)),delete H.posts_orig[k][B][L][A],H.rearrange_posts()),!1}})()}deserialize_text(A){let k="";if(!A.content.msg)return k;for(let B=0,L=A.content.msg.length;B<L;B++){for(let se=0,H=A.content.msg[B].length;se<H;se++)k+=A.content.msg[B][se].text;B+1<L&&(k+="\n")}return k}load_posts_counter(A){var k=this;return(0,F.A)(function*(){let B={};try{let H=yield k.indexed.loadTextFromUserPath("servers/post_counter.json"),de=JSON.parse(H);B=H,k.post_counter=de}catch{}let L=Number(yield k.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;k.post_counter.local.target.me=L;let se=A||k.get_all_server_info(!0,!0);for(let H=0,de=se.length;H<de;H++){let Ke=se[H].isOfficial,Ve=se[H].target;(!k.post_counter[Ke][Ve]||A)&&(k.post_counter[Ke][Ve]={});try{let vt=yield k.servers[Ke][Ve].client.readStorageObjects(k.servers[Ke][Ve].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:k.servers[Ke][Ve].session.user_id}]}),Ft=0;vt.objects.length&&(Ft=vt.objects[0].value.counter),k.post_counter[Ke][Ve][k.servers[Ke][Ve].session.user_id]=Ft}catch(vt){console.log("\ub0b4 \uc11c\ubc84 \uac8c\uc2dc\ubb3c \uce74\uc6b4\ud130 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",vt)}if(k.users[Ke][Ve]){let vt=Object.keys(k.users[Ke][Ve]);for(let Ft=0,_n=vt.length;Ft<_n;Ft++)try{let He=yield k.servers[Ke][Ve].client.readStorageObjects(k.servers[Ke][Ve].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:vt[Ft]}]}),$e=0;He.objects.length&&($e=He.objects[0].value.counter),k.post_counter[Ke][Ve][vt[Ft]]=$e;try{if(!k.posts_orig[Ke][Ve])throw"\uc544\uc9c1 \uc900\ube44\ub418\uc9c0 \uc54a\uc74c";let pt=Object.keys(k.posts_orig[Ke][Ve][vt[Ft]]);for(let ot of pt){let vn=(yield k.servers[Ke][Ve].client.readStorageObjects(k.servers[Ke][Ve].session,{object_ids:[{collection:"server_post",key:ot,user_id:vt[Ft]}]})).objects[0].value,Hn=yield k.sync_load_file(vn,Ke,Ve,"server_post",vt[Ft],ot,!1);if("remote"!==Hn.from)throw ot;{let Pr=yield Hn.value.text();JSON.parse(Pr).OutSource&&delete k.posts_orig[Ke][Ve][vt[Ft]][ot]}}}catch(pt){try{delete k.posts_orig[Ke][Ve][vt[Ft]][pt]}catch{}}}catch{delete k.post_counter[Ke][Ve][vt[Ft]]}k.rearrange_posts()}B!=JSON.stringify(k.post_counter)&&(yield k.save_post_counter(),k.has_new_post=!0)}})()}save_post_counter(){var A=this;return(0,F.A)(function*(){yield A.indexed.saveTextFileToUserPath(JSON.stringify(A.post_counter),"servers/post_counter.json")})()}}return(te=Ie).\u0275fac=function(A){return new(A||te)(an.KVO(Yn.G),an.KVO(Bt.j),an.KVO(nn.n),an.KVO(On.r),an.KVO(wn.hG),an.KVO(lr.y),an.KVO(Kt.z3),an.KVO(zn.q9),an.KVO(sr.f))},te.\u0275prov=an.jDH({token:te,factory:te.\u0275fac,providedIn:"root"}),Ie})()},3307:(br,kn,je)=>{"use strict";je.d(kn,{f:()=>q});var F=je(467),j=je(8326),Jt=je(3953),a=je(4234);!function _e(){("http:"!=window.location.protocol||0==window.location.host.indexOf("localhost"))&&je.e(925).then(je.t.bind(je,925,23))}();let q=(()=>{var M;class C{constructor(w){this.lang=w,this.loadingStack={},this.stackKeys=[],this.queued=[]}create(w){var I=this;return(0,F.A)(function*(){I.CurrentLoading?I.AddLoadingInfo?I.AddLoadingInfo(w):I.queued.push(w):yield new Promise(D=>{I.CurrentLoading=new j(d=>{d.setup=()=>{if(d.noCanvas(),"http:"!=window.location.protocol||0==window.location.host.indexOf("localhost")){let h=new j.Oscillator(372);I.SoundAlert=()=>{if(w.soundAlert)try{h.freq(372),h.start(),h.freq(500,.1),h.freq(320,.15),h.stop(.2)}catch(p){console.log("\uc624\uc2e4\ub808\uc774\ud130 \uc900\ube44\uc911: ",p)}}}I.parentDiv=d.createDiv(),I.parentDiv.style("position: absolute; left: 0; top: 0; z-index: 1"),I.parentDiv.style("width: 100%; height: fit-content"),I.parentDiv.style("padding: 16px;"),I.parentDiv.style("display: flex; flex-direction: column"),I.parentDiv.style("gap: 8px"),I.parentDiv.style("justify-content: center;"),I.parentDiv.style("pointer-events: none"),I.AddLoadingInfo=h=>{I.loadingStack[h.id]=h,I.stackKeys=Object.keys(I.loadingStack);const p=d.createDiv();var g;I.loadingStack[h.id].element=p,p.style("width: 100%; height: fit-content"),p.style("word-break: break-all"),p.style("background: "+(h.bgcolor?`#${h.bgcolor}88`:"var(--toast-background-color)")),p.style("border-radius: 32px"),p.style("padding: 8px"),p.style("color: white"),p.parent(I.parentDiv),h.clickable?(p.style("cursor: pointer"),p.style("pointer-events: fill"),p.mouseClicked(()=>{var N;null===(N=h.clickable)||void 0===N||N.call(h)}),null===(g=I.SoundAlert)||void 0===g||g.call(I)):(p.style("cursor: auto"),p.style("pointer-events: none"));const v=d.createDiv();v.style("display: flex; flex-direction: row;"),v.parent(p);const S=d.createImg(h.image,"ld_img");S.style("width: 32px; height: 32px;"),S.style("margin-left: 8px"),S.style("object-fit: cover"),S.style("border-radius: 24px;"),h.image||S.hide(),h.imageElement=S,S.parent(v);const x=d.createDiv();x.style("display: flex; flex-direction: row;"),x.style("gap: 4px"),x.style("overflow: hidden"),x.style("flex-grow: 1"),x.style("align-items: center"),x.style("margin-right: 8px"),x.parent(v);const E=d.createDiv(h.message||I.lang.text.TodoDetail.WIP);if(E.style("margin-left: 16px"),E.style("flex-grow: 1"),E.style("overflow: hidden"),E.style("white-space: nowrap"),E.style("text-overflow: ellipsis"),h.messageElement=E,E.parent(x),!h.clickable){const N=d.createDiv();N.style("width: 24px; height: 24px;"),N.style("flex-shrink: 0"),N.style("border-radius: 50%"),null===h.progress&&(h.progress=void 0);const Z=Math.floor(100*h.progress)||0;N.style(`background: conic-gradient(var(--loading-done-color) 0% ${Z}%, var(--loading-waiting-color) ${Z}% 100%)`),h.progressElement=N,h.nullProgress=0,N.parent(x)}h.fade=0,null===h.forceEnd&&delete h.forceEnd},I.AddLoadingInfo(w),D(void 0)},d.draw=()=>{for(let p=I.queued.length-1;p>=0;p--)I.AddLoadingInfo(I.queued[p]),I.queued.splice(p,1);for(let p of I.stackKeys){if(void 0===I.loadingStack[p].progress){var h;I.loadingStack[p].nullProgress=(I.loadingStack[p].nullProgress+2)%120;const g=I.loadingStack[p].nullProgress;null===(h=I.loadingStack[p].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-waiting-color) 0% ${g-20}%, var(--loading-done-color) ${g-20}% ${g}%, var(--loading-waiting-color) ${g}% 100%)`)}void 0!==I.loadingStack[p].forceEnd&&I.loadingStack[p].forceEnd>0&&(I.loadingStack[p].forceEnd-=7),I.loadingStack[p].forceEnd<=0?I.loadingStack[p].fade>0?(I.loadingStack[p].fade-=.07,I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`),I.loadingStack[p].fade<=0&&(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack))):(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack)):I.loadingStack[p].fade<1&&(I.loadingStack[p].fade+=.07,I.loadingStack[p].fade>=1&&(I.loadingStack[p].fade=1),I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`))}I.stackKeys.length||f()};let f=()=>{d.remove(),I.parentDiv=null,I.CurrentLoading=null,I.AddLoadingInfo=null,I.stackKeys.length=0}})})})()}update(w,I=!1){var D=this;return(0,F.A)(function*(){if(D.stackKeys.includes(w.id)){var d;if(w.clickable?(D.loadingStack[w.id].element.style("cursor: pointer"),D.loadingStack[w.id].element.style("pointer-events: fill"),D.loadingStack[w.id].element.mouseClicked(()=>{var p;null===(p=w.clickable)||void 0===p||p.call(w),D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none"),D.loadingStack[w.id].forceEnd=350}),null===(d=D.SoundAlert)||void 0===d||d.call(D)):(D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none")),null!=w.bgcolor&&D.loadingStack[w.id].element.style("background: "+(w.bgcolor?`#${w.bgcolor}88`:"var(--toast-background-color)")),void 0!==w.forceEnd)if(null===w.forceEnd)D.loadingStack[w.id].forceEnd=void 0;else if(D.loadingStack[w.id].forceEnd=w.forceEnd,D.loadingStack[w.id].progress){var f;D.loadingStack[w.id].progress=1,null===(f=D.loadingStack[w.id].progressElement)||void 0===f||f.style("background: conic-gradient(var(--loading-done-color) 0% 100%")}if(void 0!==w.message&&(null===w.message?(delete D.loadingStack[w.id],D.loadingStack[w.id].messageElement.html()):(D.loadingStack[w.id].message=w.message,D.loadingStack[w.id].messageElement.html(w.message))),void 0!==w.progress)if(null===w.progress)delete D.loadingStack[w.id].progress;else{var h;D.loadingStack[w.id].progress=w.progress;const p=Math.floor(100*w.progress);null===(h=D.loadingStack[w.id].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-done-color) 0% ${p}%, var(--loading-waiting-color) ${p}% 100%)`)}void 0!==w.image&&(null===w.image?(delete D.loadingStack[w.id].image,D.loadingStack[w.id].imageElement.hide(),D.loadingStack[w.id].imageElement.removeAttribute("src")):(D.loadingStack[w.id].image=w.image,D.loadingStack[w.id].imageElement.attribute("src",w.image),D.loadingStack[w.id].imageElement.show()))}else I||(yield D.create(w))})()}toast(w,I,D=1e3){const d=I||`AsToast_${Date.now()}`;this.update({id:d,message:w,forceEnd:D})}remove(w){this.update({id:w,forceEnd:350},!0)}}return(M=C).\u0275fac=function(w){return new(w||M)(Jt.KVO(a.y))},M.\u0275prov=Jt.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),C})()},9900:(br,kn,je)=>{"use strict";je.d(kn,{G:()=>_e});var F=je(8326),Mt=je(7100),Jt=je(3953),a=function(q){return q[q.Idle=0]="Idle",q[q.DivFadeIn=1]="DivFadeIn",q[q.BorderAlert=2]="BorderAlert",q[q.Reading=3]="Reading",q[q.FadeOut=4]="FadeOut",q}(a||{});let _e=(()=>{var q;class M{constructor(){this.isShowing=!1,this.stack=[],this.alert=[],this.status=a.Idle}show(_){let w;_.time=(new Date).getTime(),_.lateable||(this.AlertNow=_,this.status=a.DivFadeIn),this.alert.length&&(w=this.alert[this.alert.length-1]),this.AlertNow&&this.AlertNow.text==_.text?this.status=a.DivFadeIn:w&&w.text==_.text||this.alert.push(_),this.isShowing?this.status==a.FadeOut&&(this.status=a.DivFadeIn):(this.CurrentToast=new F(D=>{let d,f,h,p=0,g=0,v=0;D.setup=()=>{D.noCanvas(),d=D.createDiv(),d.style("position: absolute; left: 0; top: 0; z-index: 2"),d.style("width: 100%; height: fit-content"),d.style("padding: 32px;"),d.style("display: flex; justify-content: center;"),d.style("pointer-events: none"),S(),h=D.createDiv(),h.parent(d),h.style("display: flex; justify-content: center;"),h.style("width: fit-content; height: fit-content"),h.style("border-radius: 24px"),h.style("background: var(--toast-background-color)"),h.style("padding: 4px"),f=D.createDiv(),f.parent(h),f.style("display: flex; justify-content: center;"),f.style("width: fit-content; height: fit-content"),f.style("word-break: break-all"),f.style("background: var(--toast-background-color)"),f.style("border-radius: 20px"),f.style("padding: 12px"),f.style("color: white"),this.AlertNow||(this.AlertNow=this.alert.shift()),f.html(this.HTMLEncode(this.AlertNow.text)),x(),this.status=a.DivFadeIn},D.draw=()=>{switch(this.status){case a.DivFadeIn:p<1?p+=1:(p=1,g=1,this.status=a.BorderAlert,f.html(this.HTMLEncode(this.AlertNow.text)));break;case a.BorderAlert:if(g>0)g-=.03;else{let N;g=0,N=this.AlertNow.duration?1e3*this.AlertNow.duration:24*(new TextEncoder).encode(this.AlertNow.text).length,v=D.millis()+N+960,this.status=a.Reading}break;case a.Reading:D.millis()>v&&(this.alert.length?(this.stack.push(this.AlertNow),this.AlertNow=this.alert.shift(),f.html(this.HTMLEncode(this.AlertNow.text)),this.status=a.DivFadeIn):this.status=a.FadeOut);break;case a.FadeOut:p>0?p-=.04:E()}S(),x()};let S=()=>{d.style(`opacity: ${p}`)},x=()=>{let N=D.lerpColor(D.color("#"+(Mt.ud?"30564e88":"b9543788")),D.color("#ffd94ebb"),g).levels;h.style(`padding: ${4*g}px`),f.style(`padding: ${D.lerp(16,12,g)}px`),f.style(`border-radius: ${D.lerp(24,20,g)}px`),h.style(`background: rgba(${N[0]}, ${N[1]}, ${N[2]}, ${N[3]/255})`)},E=()=>{this.stack=[...this.stack,this.AlertNow,...this.alert],this.AlertNow=null,this.alert.length=0,this.isShowing=!1,this.CurrentToast.remove()}}),this.isShowing=!0)}hide(){this.status=a.FadeOut}}return(q=M).\u0275fac=function(_){return new(_||q)},q.\u0275prov=Jt.jDH({token:q,factory:q.\u0275fac,providedIn:"root"}),M})()},8065:(br,kn,je)=>{"use strict";je.d(kn,{j:()=>j});var F=je(3953);let j=(()=>{var Mt;class Jt{constructor(){this.colors={offline:"#888888",missing:"#880000",pending:"#dddd0c",online:"#4ff14f",certified:"#00ffff"},this.chatroom={},this.project={},this.task={},this.settings={groupServer:"offline",dedicatedServer:"offline",dedicated_groupchat:"offline"},this.tools={},this.groupServer={official:{default:"offline"},unofficial:{}},setInterval(()=>{},350)}}return(Mt=Jt).\u0275fac=function(_e){return new(_e||Mt)},Mt.\u0275prov=F.jDH({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Jt})()},3419:(br,kn,je)=>{"use strict";var F=je(345),j=je(3953),Mt=je(9858),Jt=je(3656),a=je(5374),_e=je(92);const q=[{path:"",redirectTo:"portal",pathMatch:"full"},{path:"minimal-chat",loadChildren:()=>Promise.all([je.e(2076),je.e(5502)]).then(je.bind(je,5502)).then(rn=>rn.MinimalChatPageModule)},{path:"others-profile",loadChildren:()=>je.e(4722).then(je.bind(je,4722)).then(rn=>rn.OthersProfilePageModule)},{path:"user-fs-dir",loadChildren:()=>je.e(6556).then(je.bind(je,6556)).then(rn=>rn.UserFsDirPageModule)},{path:"group-server",loadChildren:()=>je.e(36).then(je.bind(je,36)).then(rn=>rn.GroupServerPageModule)},{path:"add-todo-menu",loadChildren:()=>Promise.all([je.e(2076),je.e(8163)]).then(je.bind(je,8163)).then(rn=>rn.AddTodoMenuPageModule)},{path:"chat-room",loadChildren:()=>Promise.all([je.e(2076),je.e(6991)]).then(je.bind(je,6991)).then(rn=>rn.ChatRoomPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([je.e(222),je.e(526)]).then(je.bind(je,526)).then(rn=>rn.PostViewerPageModule)},{path:"share-content-to-other",loadChildren:()=>je.e(9406).then(je.bind(je,9406)).then(rn=>rn.ShareContentToOtherPageModule)},{path:"webrtc-manage-io-dev",loadChildren:()=>je.e(5436).then(je.bind(je,5436)).then(rn=>rn.WebrtcManageIoDevPageModule)},{path:"portal",loadChildren:()=>Promise.all([je.e(4020),je.e(8180)]).then(je.bind(je,8180)).then(rn=>rn.PortalPageModule)},{path:"group-detail",loadChildren:()=>je.e(3267).then(je.bind(je,3267)).then(rn=>rn.GroupDetailPageModule)},{path:"instant-call",loadChildren:()=>Promise.all([je.e(4020),je.e(6524),je.e(2076)]).then(je.bind(je,6524)).then(rn=>rn.InstantCallPageModule)},{path:"add-group",loadChildren:()=>je.e(7601).then(je.bind(je,7601)).then(rn=>rn.AddGroupPageModule)},{path:"void-draw",loadChildren:()=>Promise.all([je.e(4020),je.e(2655)]).then(je.bind(je,2655)).then(rn=>rn.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([je.e(4803),je.e(222)]).then(je.bind(je,4803)).then(rn=>rn.IonicViewerPageModule)},{path:"server-detail",loadChildren:()=>je.e(3456).then(je.bind(je,3456)).then(rn=>rn.ServerDetailPageModule)}];let M=(()=>{var rn;class bn{}return(rn=bn).\u0275fac=function(Un){return new(Un||rn)},rn.\u0275mod=j.$C({type:rn}),rn.\u0275inj=j.G2t({imports:[Mt.iI.forRoot(q,{preloadingStrategy:Mt.Kp}),Mt.iI]}),bn})();var C=je(177),_=je(9030),w=je(8810),I=je(3726),D=je(7673),d=je(8793),f=je(1413),h=je(1985),p=je(5343);const g=new h.c(p.l);var S=je(6365),x=je(8750),E=je(983),N=je(9326),Z=je(6648);function K(...rn){const bn=(0,N.lI)(rn),Pn=(0,N.R0)(rn,1/0),Un=rn;return Un.length?1===Un.length?(0,x.Tg)(Un[0]):(0,S.U)(Pn)((0,Z.H)(Un,bn)):E.w}var z=je(6354),G=je(5964),ie=je(5558),X=je(17),ee=je(8071),Y=je(9974);const xe={connector:()=>new f.B};function ae(rn,bn=xe){const{connector:Pn}=bn;return(0,Y.N)((Un,pn)=>{const Xt=Pn();(0,x.Tg)(rn(function ve(rn){return new h.c(bn=>rn.subscribe(bn))}(Xt))).subscribe(pn),pn.add(Un.subscribe(Xt))})}var J=je(6697),ce=je(8141),Te=je(8359);class et extends Te.yU{constructor(bn,Pn){super()}schedule(bn,Pn=0){return this}}const le={setInterval(rn,bn,...Pn){const{delegate:Un}=le;return null!=Un&&Un.setInterval?Un.setInterval(rn,bn,...Pn):setInterval(rn,bn,...Pn)},clearInterval(rn){const{delegate:bn}=le;return((null==bn?void 0:bn.clearInterval)||clearInterval)(rn)},delegate:void 0};var V=je(7908);const Oe={now:()=>(Oe.delegate||Date).now(),delegate:void 0};class Xe{constructor(bn,Pn=Xe.now){this.schedulerActionCtor=bn,this.now=Pn}schedule(bn,Pn=0,Un){return new this.schedulerActionCtor(this,bn).schedule(Un,Pn)}}Xe.now=Oe.now;const yt=new class dt extends Xe{constructor(bn,Pn=Xe.now){super(bn,Pn),this.actions=[],this._active=!1}flush(bn){const{actions:Pn}=this;if(this._active)return void Pn.push(bn);let Un;this._active=!0;do{if(Un=bn.execute(bn.state,bn.delay))break}while(bn=Pn.shift());if(this._active=!1,Un){for(;bn=Pn.shift();)bn.unsubscribe();throw Un}}}(class me extends et{constructor(bn,Pn){super(bn,Pn),this.scheduler=bn,this.work=Pn,this.pending=!1}schedule(bn,Pn=0){var Un;if(this.closed)return this;this.state=bn;const pn=this.id,Xt=this.scheduler;return null!=pn&&(this.id=this.recycleAsyncId(Xt,pn,Pn)),this.pending=!0,this.delay=Pn,this.id=null!==(Un=this.id)&&void 0!==Un?Un:this.requestAsyncId(Xt,this.id,Pn),this}requestAsyncId(bn,Pn,Un=0){return le.setInterval(bn.flush.bind(bn,this),Un)}recycleAsyncId(bn,Pn,Un=0){if(null!=Un&&this.delay===Un&&!1===this.pending)return Pn;null!=Pn&&le.clearInterval(Pn)}execute(bn,Pn){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Un=this._execute(bn,Pn);if(Un)return Un;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(bn,Pn){let pn,Un=!1;try{this.work(bn)}catch(Xt){Un=!0,pn=Xt||new Error("Scheduled action threw falsy error")}if(Un)return this.unsubscribe(),pn}unsubscribe(){if(!this.closed){const{id:bn,scheduler:Pn}=this,{actions:Un}=Pn;this.work=this.state=this.scheduler=null,this.pending=!1,(0,V.o)(Un,this),null!=bn&&(this.id=this.recycleAsyncId(Pn,bn,null)),this.delay=null,super.unsubscribe()}}}),Ut=yt;var ht=je(4360),kt=je(3703),lt=je(1397);function It(rn,bn){return bn?Pn=>(0,d.x)(bn.pipe((0,J.s)(1),function Lt(){return(0,Y.N)((rn,bn)=>{rn.subscribe((0,ht._)(bn,p.l))})}()),Pn.pipe(It(rn))):(0,lt.Z)((Pn,Un)=>(0,x.Tg)(rn(Pn,Un)).pipe((0,J.s)(1),(0,kt.u)(Pn)))}var bt=je(9470);const fn="Service workers are disabled or not supported by this browser";class En{constructor(bn){if(this.serviceWorker=bn,bn){const Un=(0,I.R)(bn,"controllerchange").pipe((0,z.T)(()=>bn.controller)),pn=(0,_.v)(()=>(0,D.of)(bn.controller)),Xt=(0,d.x)(pn,Un);this.worker=Xt.pipe((0,G.p)(Bt=>!!Bt)),this.registration=this.worker.pipe((0,ie.n)(()=>bn.getRegistration()));const Yn=(0,I.R)(bn,"message").pipe((0,z.T)(Bt=>Bt.data)).pipe((0,G.p)(Bt=>Bt&&Bt.type)).pipe(function ne(rn){return rn?bn=>ae(rn)(bn):bn=>function ge(rn,bn){const Pn=(0,ee.T)(rn)?rn:()=>rn;return(0,ee.T)(bn)?ae(bn,{connector:Pn}):Un=>new X.G(Un,Pn)}(new f.B)(bn)}());Yn.connect(),this.events=Yn}else this.worker=this.events=this.registration=function $n(rn){return(0,_.v)(()=>(0,w.$)(new Error(rn)))}(fn)}postMessage(bn,Pn){return this.worker.pipe((0,J.s)(1),(0,ce.M)(Un=>{Un.postMessage({action:bn,...Pn})})).toPromise().then(()=>{})}postMessageWithOperation(bn,Pn,Un){const pn=this.waitForOperationCompleted(Un),Xt=this.postMessage(bn,Pn);return Promise.all([Xt,pn]).then(([,yn])=>yn)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(bn){let Pn;return Pn="string"==typeof bn?Un=>Un.type===bn:Un=>bn.includes(Un.type),this.events.pipe((0,G.p)(Pn))}nextEventOfType(bn){return this.eventsOfType(bn).pipe((0,J.s)(1))}waitForOperationCompleted(bn){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,G.p)(Pn=>Pn.nonce===bn),(0,J.s)(1),(0,z.T)(Pn=>{if(void 0!==Pn.result)return Pn.result;throw new Error(Pn.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Kn=(()=>{var rn;class bn{get isEnabled(){return this.sw.isEnabled}constructor(Un){if(this.sw=Un,this.pushManager=null,this.subscriptionChanges=new f.B,!Un.isEnabled)return this.messages=g,this.notificationClicks=g,void(this.subscription=g);this.messages=this.sw.eventsOfType("PUSH").pipe((0,z.T)(Xt=>Xt.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,z.T)(Xt=>Xt.data)),this.pushManager=this.sw.registration.pipe((0,z.T)(Xt=>Xt.pushManager));const pn=this.pushManager.pipe((0,ie.n)(Xt=>Xt.getSubscription()));this.subscription=K(pn,this.subscriptionChanges)}requestSubscription(Un){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(fn));const pn={userVisibleOnly:!0};let Xt=this.decodeBase64(Un.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),yn=new Uint8Array(new ArrayBuffer(Xt.length));for(let Kt=0;Kt<Xt.length;Kt++)yn[Kt]=Xt.charCodeAt(Kt);return pn.applicationServerKey=yn,this.pushManager.pipe((0,ie.n)(Kt=>Kt.subscribe(pn)),(0,J.s)(1)).toPromise().then(Kt=>(this.subscriptionChanges.next(Kt),Kt))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,J.s)(1),(0,ie.n)(pn=>{if(null===pn)throw new Error("Not subscribed to push notifications.");return pn.unsubscribe().then(Xt=>{if(!Xt)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(fn))}decodeBase64(Un){return atob(Un)}}return(rn=bn).\u0275fac=function(Un){return new(Un||rn)(j.KVO(En))},rn.\u0275prov=j.jDH({token:rn,factory:rn.\u0275fac}),bn})(),Mn=(()=>{var rn;class bn{get isEnabled(){return this.sw.isEnabled}constructor(Un){if(this.sw=Un,!Un.isEnabled)return this.versionUpdates=g,void(this.unrecoverable=g);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fn));const Un=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:Un},Un)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fn));const Un=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:Un},Un)}}return(rn=bn).\u0275fac=function(Un){return new(Un||rn)(j.KVO(En))},rn.\u0275prov=j.jDH({token:rn,factory:rn.\u0275fac}),bn})();const pr=new j.nKC("");function Ln(rn,bn,Pn,Un){return()=>{if(!(0,C.UE)(Un)||!("serviceWorker"in navigator)||!1===Pn.enabled)return;const pn=rn.get(j.SKi),Xt=rn.get(j.o8S);let yn;if(pn.runOutsideAngular(()=>{const Kt=navigator.serviceWorker,an=()=>{var Yn;return null===(Yn=Kt.controller)||void 0===Yn?void 0:Yn.postMessage({action:"INITIALIZE"})};Kt.addEventListener("controllerchange",an),Xt.onDestroy(()=>{Kt.removeEventListener("controllerchange",an)})}),"function"==typeof Pn.registrationStrategy)yn=Pn.registrationStrategy();else{const[Kt,...an]=(Pn.registrationStrategy||"registerWhenStable:30000").split(":");switch(Kt){case"registerImmediately":yn=(0,D.of)(null);break;case"registerWithDelay":yn=nr(+an[0]||0);break;case"registerWhenStable":yn=an[0]?K(hn(rn),nr(+an[0])):hn(rn);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${Pn.registrationStrategy}`)}}pn.runOutsideAngular(()=>yn.pipe((0,J.s)(1)).subscribe(()=>navigator.serviceWorker.register(bn,{scope:Pn.scope}).catch(Kt=>console.error("Service worker registration failed with:",Kt))))}}function nr(rn){return(0,D.of)(null).pipe(function zt(rn,bn=yt){const Pn=function St(rn=0,bn,Pn=Ut){let Un=-1;return null!=bn&&((0,bt.m)(bn)?Pn=bn:Un=bn),new h.c(pn=>{let Xt=function Pt(rn){return rn instanceof Date&&!isNaN(rn)}(rn)?+rn-Pn.now():rn;Xt<0&&(Xt=0);let yn=0;return Pn.schedule(function(){pn.closed||(pn.next(yn++),0<=Un?this.schedule(void 0,Un):pn.complete())},Xt)})}(rn,bn);return It(()=>Pn)}(rn))}function hn(rn){return rn.get(j.o8S).isStable.pipe((0,G.p)(Pn=>Pn))}function Xn(rn,bn){return new En((0,C.UE)(bn)&&!1!==rn.enabled?navigator.serviceWorker:void 0)}class Tn{}function ct(rn,bn={}){return(0,j.EmA)([Kn,Mn,{provide:pr,useValue:rn},{provide:Tn,useValue:bn},{provide:En,useFactory:Xn,deps:[Tn,j.Agw]},{provide:j.hnV,useFactory:Ln,deps:[j.zZn,pr,Tn,j.Agw],multi:!0}])}let ft=(()=>{var rn;class bn{static register(Un,pn={}){return{ngModule:bn,providers:[ct(Un,pn)]}}}return(rn=bn).\u0275fac=function(Un){return new(Un||rn)},rn.\u0275mod=j.$C({type:rn}),rn.\u0275inj=j.G2t({providers:[Kn,Mn]}),bn})();let xt=(()=>{var rn;class bn{}return(rn=bn).\u0275fac=function(Un){return new(Un||rn)},rn.\u0275mod=j.$C({type:rn,bootstrap:[_e.ZL]}),rn.\u0275inj=j.G2t({providers:[{provide:Mt.b,useClass:Jt.jM},Jt.y8],imports:[F.Bb,a.bv.forRoot({mode:"md",innerHTMLTemplatesEnabled:!0,experimentalCloseWatcher:!0,hardwareBackButton:!0}),M,ft.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerImmediately"})]}),bn})();var un=je(1288);(0,j.SmG)(),F.sG().bootstrapModule(xt).catch(rn=>console.log(rn)),window,typeof window>"u"?Promise.resolve():(0,un.p)().then(()=>(0,un.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined))},8326:(br,kn,je)=>{var F=je(4756);br.exports=function a(_e,q,M){function C(I,D){if(!q[I]){if(!_e[I]){var d=void 0;if(!D&&d)return require(I,!0);if(_)return _(I,!0);throw(D=new Error("Cannot find module '"+I+"'")).code="MODULE_NOT_FOUND",D}d=q[I]={exports:{}},_e[I][0].call(d.exports,function(f){return C(_e[I][1][f]||f)},d,d.exports,a,_e,q,M)}return q[I].exports}for(var _=void 0,w=0;w<M.length;w++)C(M[w]);return C}({1:[function(a,_e,q){"use strict";q.byteLength=function(p){return 3*((p=d(p))[0]+(p=p[1]))/4-p},q.toByteArray=function(f){var h,p,v,Z,g=(v=d(f))[0],S=new _(3*(g+(Z=v=v[1]))/4-Z),x=0,E=0<v?g-4:g;for(p=0;p<E;p+=4)h=C[f.charCodeAt(p)]<<18|C[f.charCodeAt(p+1)]<<12|C[f.charCodeAt(p+2)]<<6|C[f.charCodeAt(p+3)],S[x++]=h>>16&255,S[x++]=h>>8&255,S[x++]=255&h;return 2===v&&(h=C[f.charCodeAt(p)]<<2|C[f.charCodeAt(p+1)]>>4,S[x++]=255&h),1===v&&(h=C[f.charCodeAt(p)]<<10|C[f.charCodeAt(p+1)]<<4|C[f.charCodeAt(p+2)]>>2,S[x++]=h>>8&255,S[x++]=255&h),S},q.fromByteArray=function(f){for(var h,p=f.length,g=p%3,v=[],S=0,x=p-g;S<x;S+=16383)v.push(function(E,N,Z){for(var z=[],G=N;G<Z;G+=3)z.push(M[(ie=(E[G]<<16&16711680)+(E[G+1]<<8&65280)+(255&E[G+2]))>>18&63]+M[ie>>12&63]+M[ie>>6&63]+M[63&ie]);var ie;return z.join("")}(f,S,x<S+16383?x:S+16383));return 1==g?v.push(M[(h=f[p-1])>>2]+M[h<<4&63]+"=="):2==g&&v.push(M[(h=(f[p-2]<<8)+f[p-1])>>10]+M[h>>4&63]+M[h<<2&63]+"="),v.join("")};for(var M=[],C=[],_=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0;I<64;++I)M[I]=w[I],C[w.charCodeAt(I)]=I;function d(f){var h=f.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=(f=-1===(f=f.indexOf("="))?h:f)===h?0:4-f%4,[f,h]}C[45]=62,C[95]=63},{}],2:[function(a,_e,q){},{}],3:[function(a,_e,q){},{}],4:[function(a,_e,q){(function(d){"use strict";var C=a("base64-js"),_=a("ieee754"),w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,I=(q.Buffer=d,q.SlowBuffer=function(le){return+le!=le&&(le=0),d.alloc(+le)},q.INSPECT_MAX_BYTES=50,2147483647);function D(le){if(I<le)throw new RangeError('The value "'+le+'" is invalid for option "size"');return le=new Uint8Array(le),Object.setPrototypeOf(le,d.prototype),le}function d(le,V,me){if("number"!=typeof le)return f(le,V,me);if("string"==typeof V)throw new TypeError('The "string" argument must be of type string. Received type number');return p(le)}function f(le,V,me){if("string"==typeof le){var Oe=le,Xe=V;if(d.isEncoding(Xe="string"==typeof Xe&&""!==Xe?Xe:"utf8"))return(Oe=(yt=D(dt=0|S(Oe,Xe))).write(Oe,Xe))!==dt?yt.slice(0,Oe):yt;throw new TypeError("Unknown encoding: "+Xe)}if(ArrayBuffer.isView(le))return g(le);if(null!=le){if(ce(le,ArrayBuffer)||le&&ce(le.buffer,ArrayBuffer)){var dt=le,yt=me;if((Oe=V)<0||dt.byteLength<Oe)throw new RangeError('"offset" is outside of buffer bounds');if(dt.byteLength<Oe+(yt||0))throw new RangeError('"length" is outside of buffer bounds');return dt=void 0===Oe&&void 0===yt?new Uint8Array(dt):void 0===yt?new Uint8Array(dt,Oe):new Uint8Array(dt,Oe,yt),Object.setPrototypeOf(dt,d.prototype),dt}if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(Xe=le.valueOf&&le.valueOf())&&Xe!==le)return d.from(Xe,V,me);var Ut=d.isBuffer(ht=le)?(0!==(kt=D(Lt=0|v(ht.length))).length&&ht.copy(kt,0,0,Lt),kt):void 0!==ht.length?"number"!=typeof ht.length||Te(ht.length)?D(0):g(ht):"Buffer"===ht.type&&Array.isArray(ht.data)?g(ht.data):void 0;if(Ut)return Ut;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return d.from(le[Symbol.toPrimitive]("string"),V,me)}var ht,Lt,kt;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function h(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function p(le){return h(le),D(le<0?0:0|v(le))}function g(le){for(var V=le.length<0?0:0|v(le.length),me=D(V),Oe=0;Oe<V;Oe+=1)me[Oe]=255&le[Oe];return me}function v(le){if(I<=le)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return 0|le}function S(le,V){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||ce(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var me=le.length,Oe=2<arguments.length&&!0===arguments[2];if(!Oe&&0===me)return 0;for(var Xe=!1;;)switch(V){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return ge(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*me;case"hex":return me>>>1;case"base64":return ne(le).length;default:if(Xe)return Oe?-1:ge(le).length;V=(""+V).toLowerCase(),Xe=!0}}function x(le,V,me){var Oe,Xe=!1;if((V=void 0===V||V<0?0:V)>this.length||(me=void 0===me||me>this.length?this.length:me)<=0||(me>>>=0)<=(V>>>=0))return"";for(le=le||"utf8";;)switch(le){case"hex":var yt=me,kt=this.length;(!yt||yt<0||kt<yt)&&(yt=kt);for(var Ut="",ht=St=!(St=V)||St<0?0:St;ht<yt;++ht)Ut+=et[this[ht]];return Ut;case"utf8":case"utf-8":return G(this,V,me);case"ascii":var lt=(kt=V,me),It="";lt=Math.min(this.length,lt);for(var bt=kt;bt<lt;++bt)It+=String.fromCharCode(127&this[bt]);return It;case"latin1":case"binary":var St=V,zt=me,fn="";zt=Math.min(this.length,zt);for(var $n=St;$n<zt;++$n)fn+=String.fromCharCode(this[$n]);return fn;case"base64":return En=this,Oe=me,0===(Kn=V)&&Oe===En.length?C.fromByteArray(En):C.fromByteArray(En.slice(Kn,Oe));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var En=V,Kn=me,Mn=this.slice(En,Kn),pr="",Ln=0;Ln<Mn.length;Ln+=2)pr+=String.fromCharCode(Mn[Ln]+256*Mn[Ln+1]);return pr;default:if(Xe)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Xe=!0}}function E(le,V,me){var Oe=le[V];le[V]=le[me],le[me]=Oe}function N(le,V,me,Oe,Xe){if(0===le.length)return-1;if("string"==typeof me?(Oe=me,me=0):2147483647<me?me=2147483647:me<-2147483648&&(me=-2147483648),(me=(me=Te(me=+me)?Xe?0:le.length-1:me)<0?le.length+me:me)>=le.length){if(Xe)return-1;me=le.length-1}else if(me<0){if(!Xe)return-1;me=0}if("string"==typeof V&&(V=d.from(V,Oe)),d.isBuffer(V))return 0===V.length?-1:Z(le,V,me,Oe,Xe);if("number"==typeof V)return V&=255,"function"==typeof Uint8Array.prototype.indexOf?(Xe?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(le,V,me):Z(le,[V],me,Oe,Xe);throw new TypeError("val must be string, number or Buffer")}function Z(le,V,me,Oe,Xe){var dt=1,yt=le.length,Ut=V.length;if(void 0!==Oe&&("ucs2"===(Oe=String(Oe).toLowerCase())||"ucs-2"===Oe||"utf16le"===Oe||"utf-16le"===Oe)){if(le.length<2||V.length<2)return-1;yt/=dt=2,Ut/=2,me/=2}function ht(bt,Pt){return 1===dt?bt[Pt]:bt.readUInt16BE(Pt*dt)}if(Xe)for(var Lt=-1,kt=me;kt<yt;kt++)if(ht(le,kt)===ht(V,-1===Lt?0:kt-Lt)){if(kt-(Lt=-1===Lt?kt:Lt)+1===Ut)return Lt*dt}else-1!==Lt&&(kt-=kt-Lt),Lt=-1;else for(kt=me=yt<me+Ut?yt-Ut:me;0<=kt;kt--){for(var lt=!0,It=0;It<Ut;It++)if(ht(le,kt+It)!==ht(V,It)){lt=!1;break}if(lt)return kt}return-1}function K(le,V,me,Oe){return J(function(Xe){for(var dt=[],yt=0;yt<Xe.length;++yt)dt.push(255&Xe.charCodeAt(yt));return dt}(V),le,me,Oe)}function z(le,V,me,Oe){return J(function(Xe,dt){for(var yt,Ut,ht=[],Lt=0;Lt<Xe.length&&!((dt-=2)<0);++Lt)yt=(Ut=Xe.charCodeAt(Lt))>>8,ht.push(Ut%=256),ht.push(yt);return ht}(V,le.length-me),le,me,Oe)}function G(le,V,me){me=Math.min(le.length,me);for(var Oe=[],Xe=V;Xe<me;){var dt,yt,Ut,ht,Lt=le[Xe],kt=null,lt=239<Lt?4:223<Lt?3:191<Lt?2:1;if(Xe+lt<=me)switch(lt){case 1:Lt<128&&(kt=Lt);break;case 2:128==(192&(dt=le[Xe+1]))&&127<(ht=(31&Lt)<<6|63&dt)&&(kt=ht);break;case 3:yt=le[Xe+2],128==(192&(dt=le[Xe+1]))&&128==(192&yt)&&2047<(ht=(15&Lt)<<12|(63&dt)<<6|63&yt)&&(ht<55296||57343<ht)&&(kt=ht);break;case 4:yt=le[Xe+2],Ut=le[Xe+3],128==(192&(dt=le[Xe+1]))&&128==(192&yt)&&128==(192&Ut)&&65535<(ht=(15&Lt)<<18|(63&dt)<<12|(63&yt)<<6|63&Ut)&&ht<1114112&&(kt=ht)}null===kt?(kt=65533,lt=1):65535<kt&&(Oe.push((kt-=65536)>>>10&1023|55296),kt=56320|1023&kt),Oe.push(kt),Xe+=lt}var It=Oe,bt=It.length;if(bt<=ie)return String.fromCharCode.apply(String,It);for(var Pt="",St=0;St<bt;)Pt+=String.fromCharCode.apply(String,It.slice(St,St+=ie));return Pt}q.kMaxLength=I,(d.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(le,V),42===le.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=f,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(le,V,me){return h(le),le<=0||void 0===V?D(le):"string"==typeof me?D(le).fill(V,me):D(le).fill(V)},d.allocUnsafe=p,d.allocUnsafeSlow=p,d.isBuffer=function(le){return null!=le&&!0===le._isBuffer&&le!==d.prototype},d.compare=function(le,V){if(ce(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),ce(V,Uint8Array)&&(V=d.from(V,V.offset,V.byteLength)),!d.isBuffer(le)||!d.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===V)return 0;for(var me=le.length,Oe=V.length,Xe=0,dt=Math.min(me,Oe);Xe<dt;++Xe)if(le[Xe]!==V[Xe]){me=le[Xe],Oe=V[Xe];break}return me<Oe?-1:Oe<me?1:0},d.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(le,V){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return d.alloc(0);if(void 0===V)for(Xe=V=0;Xe<le.length;++Xe)V+=le[Xe].length;for(var me=d.allocUnsafe(V),Oe=0,Xe=0;Xe<le.length;++Xe){var dt=le[Xe];if(ce(dt,Uint8Array)&&(dt=d.from(dt)),!d.isBuffer(dt))throw new TypeError('"list" argument must be an Array of Buffers');dt.copy(me,Oe),Oe+=dt.length}return me},d.byteLength=S,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<le;V+=2)E(this,V,V+1);return this},d.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<le;V+=4)E(this,V,V+3),E(this,V+1,V+2);return this},d.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<le;V+=8)E(this,V,V+7),E(this,V+1,V+6),E(this,V+2,V+5),E(this,V+3,V+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var le=this.length;return 0===le?"":0===arguments.length?G(this,0,le):x.apply(this,arguments)},d.prototype.equals=function(le){if(d.isBuffer(le))return this===le||0===d.compare(this,le);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var V="",le=q.INSPECT_MAX_BYTES;return V=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(V+=" ... "),"<Buffer "+V+">"},w&&(d.prototype[w]=d.prototype.inspect),d.prototype.compare=function(le,V,me,Oe,Xe){if(ce(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),!d.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(void 0===me&&(me=le?le.length:0),void 0===Oe&&(Oe=0),void 0===Xe&&(Xe=this.length),(V=void 0===V?0:V)<0||me>le.length||Oe<0||Xe>this.length)throw new RangeError("out of range index");if(Xe<=Oe&&me<=V)return 0;if(Xe<=Oe)return-1;if(me<=V)return 1;if(this===le)return 0;for(var dt=(Xe>>>=0)-(Oe>>>=0),yt=(me>>>=0)-(V>>>=0),Ut=Math.min(dt,yt),ht=this.slice(Oe,Xe),Lt=le.slice(V,me),kt=0;kt<Ut;++kt)if(ht[kt]!==Lt[kt]){dt=ht[kt],yt=Lt[kt];break}return dt<yt?-1:yt<dt?1:0},d.prototype.includes=function(le,V,me){return-1!==this.indexOf(le,V,me)},d.prototype.indexOf=function(le,V,me){return N(this,le,V,me,!0)},d.prototype.lastIndexOf=function(le,V,me){return N(this,le,V,me,!1)},d.prototype.write=function(le,V,me,Oe){if(void 0===V)Oe="utf8",me=this.length,V=0;else if(void 0===me&&"string"==typeof V)Oe=V,me=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(me)?(me>>>=0,void 0===Oe&&(Oe="utf8")):(Oe=me,me=void 0)}var Xe=this.length-V;if((void 0===me||Xe<me)&&(me=Xe),0<le.length&&(me<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe=Oe||"utf8";for(var dt,yt,Ut,ht=!1;;)switch(Oe){case"hex":var kt=le,lt=V,It=me,bt=(lt=Number(lt)||0,this.length-lt);(!It||bt<(It=Number(It)))&&(It=bt),(bt=kt.length)/2<It&&(It=bt/2);for(var Pt=0;Pt<It;++Pt){var St=parseInt(kt.substr(2*Pt,2),16);if(Te(St))return Pt;this[lt+Pt]=St}return Pt;case"utf8":case"utf-8":return Ut=me,J(ge(le,(yt=this).length-(bt=V)),yt,bt,Ut);case"ascii":case"latin1":case"binary":return K(this,le,V,me);case"base64":return yt=this,Ut=V,dt=me,J(ne(le),yt,Ut,dt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,le,V,me);default:if(ht)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ht=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ie=4096;function X(le,V,me){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(me<le+V)throw new RangeError("Trying to access beyond buffer length")}function ee(le,V,me,Oe,Xe,dt){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Xe<V||V<dt)throw new RangeError('"value" argument is out of bounds');if(me+Oe>le.length)throw new RangeError("Index out of range")}function Y(le,V,me,Oe){if(me+Oe>le.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function ve(le,V,me,Oe,Xe){return V=+V,me>>>=0,Xe||Y(le,0,me,4),_.write(le,V,me,Oe,23,4),me+4}function xe(le,V,me,Oe,Xe){return V=+V,me>>>=0,Xe||Y(le,0,me,8),_.write(le,V,me,Oe,52,8),me+8}d.prototype.slice=function(le,V){var me=this.length;return(le=~~le)<0?(le+=me)<0&&(le=0):me<le&&(le=me),(V=void 0===V?me:~~V)<0?(V+=me)<0&&(V=0):me<V&&(V=me),V<le&&(V=le),me=this.subarray(le,V),Object.setPrototypeOf(me,d.prototype),me},d.prototype.readUIntLE=function(le,V,me){le>>>=0,V>>>=0,me||X(le,V,this.length);for(var Oe=this[le],Xe=1,dt=0;++dt<V&&(Xe*=256);)Oe+=this[le+dt]*Xe;return Oe},d.prototype.readUIntBE=function(le,V,me){le>>>=0,V>>>=0,me||X(le,V,this.length);for(var Oe=this[le+--V],Xe=1;0<V&&(Xe*=256);)Oe+=this[le+--V]*Xe;return Oe},d.prototype.readUInt8=function(le,V){return le>>>=0,V||X(le,1,this.length),this[le]},d.prototype.readUInt16LE=function(le,V){return le>>>=0,V||X(le,2,this.length),this[le]|this[le+1]<<8},d.prototype.readUInt16BE=function(le,V){return le>>>=0,V||X(le,2,this.length),this[le]<<8|this[le+1]},d.prototype.readUInt32LE=function(le,V){return le>>>=0,V||X(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},d.prototype.readUInt32BE=function(le,V){return le>>>=0,V||X(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},d.prototype.readIntLE=function(le,V,me){le>>>=0,V>>>=0,me||X(le,V,this.length);for(var Oe=this[le],Xe=1,dt=0;++dt<V&&(Xe*=256);)Oe+=this[le+dt]*Xe;return(Xe*=128)<=Oe&&(Oe-=Math.pow(2,8*V)),Oe},d.prototype.readIntBE=function(le,V,me){le>>>=0,V>>>=0,me||X(le,V,this.length);for(var Oe=V,Xe=1,dt=this[le+--Oe];0<Oe&&(Xe*=256);)dt+=this[le+--Oe]*Xe;return(Xe*=128)<=dt&&(dt-=Math.pow(2,8*V)),dt},d.prototype.readInt8=function(le,V){return le>>>=0,V||X(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},d.prototype.readInt16LE=function(le,V){return le>>>=0,V||X(le,2,this.length),32768&(V=this[le]|this[le+1]<<8)?4294901760|V:V},d.prototype.readInt16BE=function(le,V){return le>>>=0,V||X(le,2,this.length),32768&(V=this[le+1]|this[le]<<8)?4294901760|V:V},d.prototype.readInt32LE=function(le,V){return le>>>=0,V||X(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},d.prototype.readInt32BE=function(le,V){return le>>>=0,V||X(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},d.prototype.readFloatLE=function(le,V){return le>>>=0,V||X(le,4,this.length),_.read(this,le,!0,23,4)},d.prototype.readFloatBE=function(le,V){return le>>>=0,V||X(le,4,this.length),_.read(this,le,!1,23,4)},d.prototype.readDoubleLE=function(le,V){return le>>>=0,V||X(le,8,this.length),_.read(this,le,!0,52,8)},d.prototype.readDoubleBE=function(le,V){return le>>>=0,V||X(le,8,this.length),_.read(this,le,!1,52,8)},d.prototype.writeUIntLE=function(le,V,me,Oe){le=+le,V>>>=0,me>>>=0,Oe||ee(this,le,V,me,Math.pow(2,8*me)-1,0);var Xe=1,dt=0;for(this[V]=255&le;++dt<me&&(Xe*=256);)this[V+dt]=le/Xe&255;return V+me},d.prototype.writeUIntBE=function(le,V,me,Oe){le=+le,V>>>=0,me>>>=0,Oe||ee(this,le,V,me,Math.pow(2,8*me)-1,0);var Xe=me-1,dt=1;for(this[V+Xe]=255&le;0<=--Xe&&(dt*=256);)this[V+Xe]=le/dt&255;return V+me},d.prototype.writeUInt8=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,1,255,0),this[V]=255&le,V+1},d.prototype.writeUInt16LE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,2,65535,0),this[V]=255&le,this[V+1]=le>>>8,V+2},d.prototype.writeUInt16BE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,2,65535,0),this[V]=le>>>8,this[V+1]=255&le,V+2},d.prototype.writeUInt32LE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,4,4294967295,0),this[V+3]=le>>>24,this[V+2]=le>>>16,this[V+1]=le>>>8,this[V]=255&le,V+4},d.prototype.writeUInt32BE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,4,4294967295,0),this[V]=le>>>24,this[V+1]=le>>>16,this[V+2]=le>>>8,this[V+3]=255&le,V+4},d.prototype.writeIntLE=function(le,V,me,Oe){le=+le,V>>>=0,Oe||ee(this,le,V,me,(Oe=Math.pow(2,8*me-1))-1,-Oe);var Xe=0,dt=1,yt=0;for(this[V]=255&le;++Xe<me&&(dt*=256);)le<0&&0===yt&&0!==this[V+Xe-1]&&(yt=1),this[V+Xe]=(le/dt|0)-yt&255;return V+me},d.prototype.writeIntBE=function(le,V,me,Oe){le=+le,V>>>=0,Oe||ee(this,le,V,me,(Oe=Math.pow(2,8*me-1))-1,-Oe);var Xe=me-1,dt=1,yt=0;for(this[V+Xe]=255&le;0<=--Xe&&(dt*=256);)le<0&&0===yt&&0!==this[V+Xe+1]&&(yt=1),this[V+Xe]=(le/dt|0)-yt&255;return V+me},d.prototype.writeInt8=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,1,127,-128),this[V]=255&(le=le<0?255+le+1:le),V+1},d.prototype.writeInt16LE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,2,32767,-32768),this[V]=255&le,this[V+1]=le>>>8,V+2},d.prototype.writeInt16BE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,2,32767,-32768),this[V]=le>>>8,this[V+1]=255&le,V+2},d.prototype.writeInt32LE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,4,2147483647,-2147483648),this[V]=255&le,this[V+1]=le>>>8,this[V+2]=le>>>16,this[V+3]=le>>>24,V+4},d.prototype.writeInt32BE=function(le,V,me){return le=+le,V>>>=0,me||ee(this,le,V,4,2147483647,-2147483648),this[V]=(le=le<0?4294967295+le+1:le)>>>24,this[V+1]=le>>>16,this[V+2]=le>>>8,this[V+3]=255&le,V+4},d.prototype.writeFloatLE=function(le,V,me){return ve(this,le,V,!0,me)},d.prototype.writeFloatBE=function(le,V,me){return ve(this,le,V,!1,me)},d.prototype.writeDoubleLE=function(le,V,me){return xe(this,le,V,!0,me)},d.prototype.writeDoubleBE=function(le,V,me){return xe(this,le,V,!1,me)},d.prototype.copy=function(le,V,me,Oe){if(!d.isBuffer(le))throw new TypeError("argument should be a Buffer");if(me=me||0,Oe||0===Oe||(Oe=this.length),V>=le.length&&(V=le.length),(Oe=0<Oe&&Oe<me?me:Oe)===me||0===le.length||0===this.length)return 0;if((V=V||0)<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length);var Xe=(Oe=le.length-V<Oe-me?le.length-V+me:Oe)-me;if(this===le&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(V,me,Oe);else if(this===le&&me<V&&V<Oe)for(var dt=Xe-1;0<=dt;--dt)le[dt+V]=this[dt+me];else Uint8Array.prototype.set.call(le,this.subarray(me,Oe),V);return Xe},d.prototype.fill=function(le,V,me,Oe){if("string"==typeof le){if("string"==typeof V?(Oe=V,V=0,me=this.length):"string"==typeof me&&(Oe=me,me=this.length),void 0!==Oe&&"string"!=typeof Oe)throw new TypeError("encoding must be a string");if("string"==typeof Oe&&!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);var Xe;1===le.length&&(Xe=le.charCodeAt(0),("utf8"===Oe&&Xe<128||"latin1"===Oe)&&(le=Xe))}else"number"==typeof le?le&=255:"boolean"==typeof le&&(le=Number(le));if(V<0||this.length<V||this.length<me)throw new RangeError("Out of range index");var dt;if(!(me<=V))if(V>>>=0,me=void 0===me?this.length:me>>>0,"number"==typeof(le=le||0))for(dt=V;dt<me;++dt)this[dt]=le;else{var yt=d.isBuffer(le)?le:d.from(le,Oe),Ut=yt.length;if(0===Ut)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(dt=0;dt<me-V;++dt)this[dt+V]=yt[dt%Ut]}return this};var ae=/[^+/0-9A-Za-z-_]/g;function ge(le,V){V=V||1/0;for(var me,Oe=le.length,Xe=null,dt=[],yt=0;yt<Oe;++yt){if(55295<(me=le.charCodeAt(yt))&&me<57344){if(!Xe){if(56319<me){-1<(V-=3)&&dt.push(239,191,189);continue}if(yt+1===Oe){-1<(V-=3)&&dt.push(239,191,189);continue}Xe=me;continue}if(me<56320){-1<(V-=3)&&dt.push(239,191,189),Xe=me;continue}me=65536+(Xe-55296<<10|me-56320)}else Xe&&-1<(V-=3)&&dt.push(239,191,189);if(Xe=null,me<128){if(--V<0)break;dt.push(me)}else if(me<2048){if((V-=2)<0)break;dt.push(me>>6|192,63&me|128)}else if(me<65536){if((V-=3)<0)break;dt.push(me>>12|224,me>>6&63|128,63&me|128)}else{if(!(me<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;dt.push(me>>18|240,me>>12&63|128,me>>6&63|128,63&me|128)}}return dt}function ne(le){return C.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(ae,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(le))}function J(le,V,me,Oe){for(var Xe=0;Xe<Oe&&!(Xe+me>=V.length||Xe>=le.length);++Xe)V[Xe+me]=le[Xe];return Xe}function ce(le,V){return le instanceof V||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===V.name}function Te(le){return le!=le}var et=function(){for(var le="0123456789abcdef",V=new Array(256),me=0;me<16;++me)for(var Oe=16*me,Xe=0;Xe<16;++Xe)V[Oe+Xe]=le[me]+le[Xe];return V}()}).call(this,a("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(a,_e,q){_e.exports=function(M){if("function"!=typeof M)throw TypeError(String(M)+" is not a function");return M}},{}],6:[function(a,_e,q){var M=a("../internals/is-object");_e.exports=function(C){if(M(C)||null===C)return C;throw TypeError("Can't set "+String(C)+" as a prototype")}},{"../internals/is-object":75}],7:[function(_,_e,q){var M=_("../internals/well-known-symbol"),C=_("../internals/object-create"),w=(_=_("../internals/object-define-property"),M("unscopables")),I=Array.prototype;null==I[w]&&_.f(I,w,{configurable:!0,value:C(null)}),_e.exports=function(D){I[w][D]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(a,_e,q){"use strict";var M=a("../internals/string-multibyte").charAt;_e.exports=function(C,_,w){return _+(w?M(C,_).length:1)}},{"../internals/string-multibyte":125}],9:[function(a,_e,q){_e.exports=function(M,C,_){if(M instanceof C)return M;throw TypeError("Incorrect "+(_?_+" ":"")+"invocation")}},{}],10:[function(a,_e,q){var M=a("../internals/is-object");_e.exports=function(C){if(M(C))return C;throw TypeError(String(C)+" is not an object")}},{"../internals/is-object":75}],11:[function(a,_e,q){_e.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(Y,_e,q){"use strict";function M(xe){return D(xe)&&d(ve,f(xe))}var C,_=Y("../internals/array-buffer-native"),w=Y("../internals/descriptors"),I=Y("../internals/global"),D=Y("../internals/is-object"),d=Y("../internals/has"),f=Y("../internals/classof"),h=Y("../internals/create-non-enumerable-property"),p=Y("../internals/redefine"),g=Y("../internals/object-define-property").f,v=Y("../internals/object-get-prototype-of"),S=Y("../internals/object-set-prototype-of"),ie=Y("../internals/well-known-symbol"),x=(Y=Y("../internals/uid"),I.Int8Array),E=x&&x.prototype,N=(N=I.Uint8ClampedArray)&&N.prototype,Z=x&&v(x),K=E&&v(E),z=Object.prototype,G=z.isPrototypeOf,X=(ie=ie("toStringTag"),Y("TYPED_ARRAY_TAG")),ee=_&&!!S&&"Opera"!==f(I.opera),ve=(Y=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(C in ve)I[C]||(ee=!1);if((!ee||"function"!=typeof Z||Z===Function.prototype)&&(Z=function(){throw TypeError("Incorrect invocation")},ee))for(C in ve)I[C]&&S(I[C],Z);if((!ee||!K||K===z)&&(K=Z.prototype,ee))for(C in ve)I[C]&&S(I[C].prototype,K);if(ee&&v(N)!==K&&S(N,K),w&&!d(K,ie))for(C in Y=!0,g(K,ie,{get:function(){return D(this)?this[X]:void 0}}),ve)I[C]&&h(I[C],X,C);_e.exports={NATIVE_ARRAY_BUFFER_VIEWS:ee,TYPED_ARRAY_TAG:Y&&X,aTypedArray:function(xe){if(M(xe))return xe;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(xe){if(S){if(G.call(Z,xe))return xe}else for(var ae in ve)if(d(ve,C)&&(ae=I[ae])&&(xe===ae||G.call(ae,xe)))return xe;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(xe,ae,ge){if(w){if(ge)for(var ne in ve)(ne=I[ne])&&d(ne.prototype,xe)&&delete ne.prototype[xe];K[xe]&&!ge||p(K,xe,!ge&&ee&&E[xe]||ae)}},exportTypedArrayStaticMethod:function(xe,ae,ge){var ne,J;if(w){if(S){if(ge)for(ne in ve)(J=I[ne])&&d(J,xe)&&delete J[xe];if(Z[xe]&&!ge)return;try{return p(Z,xe,!ge&&ee&&x[xe]||ae)}catch{}}for(ne in ve)!(J=I[ne])||J[xe]&&!ge||p(J,xe,ae)}},isView:function(xe){return"DataView"===(xe=f(xe))||d(ve,xe)},isTypedArray:M,TypedArray:Z,TypedArrayPrototype:K}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(me,_e,q){"use strict";function M(lt){return[255&lt]}function C(lt){return[255&lt,lt>>8&255]}function _(lt){return[255&lt,lt>>8&255,lt>>16&255,lt>>24&255]}function w(lt){return lt[3]<<24|lt[2]<<16|lt[1]<<8|lt[0]}function I(lt){return dt(lt,23,4)}function D(lt){return dt(lt,52,8)}function d(lt,It){Y(lt[ce],It,{get:function(){return ae(this)[It]}})}function f(fn,It,zt,Pt){if((zt=z(zt))+It>(fn=ae(fn)).byteLength)throw Xe(Te);return fn=ae(fn.buffer).bytes.slice(zt+=fn.byteOffset,zt+It),Pt?fn:fn.reverse()}function h(lt,It,bt,Pt,St,zt){if((bt=z(bt))+It>(lt=ae(lt)).byteLength)throw Xe(Te);for(var fn=ae(lt.buffer).bytes,$n=bt+lt.byteOffset,En=Pt(+St),Kn=0;Kn<It;Kn++)fn[$n+Kn]=En[zt?Kn:It-Kn-1]}var p=me("../internals/global"),g=me("../internals/descriptors"),v=me("../internals/array-buffer-native"),S=me("../internals/create-non-enumerable-property"),x=me("../internals/redefine-all"),E=me("../internals/fails"),N=me("../internals/an-instance"),Z=me("../internals/to-integer"),K=me("../internals/to-length"),z=me("../internals/to-index"),G=me("../internals/ieee754"),ie=me("../internals/object-get-prototype-of"),X=me("../internals/object-set-prototype-of"),ee=me("../internals/object-get-own-property-names").f,Y=me("../internals/object-define-property").f,ve=me("../internals/array-fill"),xe=me("../internals/set-to-string-tag"),ae=(me=me("../internals/internal-state")).get,ge=me.set,ne="ArrayBuffer",J="DataView",ce="prototype",Te="Wrong index",et=p[ne],le=et,V=p[J],Oe=(me=V&&V[ce],Object.prototype),Xe=p.RangeError,dt=G.pack,yt=G.unpack;if(v){if(!E(function(){et(1)})||!E(function(){new et(-1)})||E(function(){return new et,new et(1.5),new et(NaN),et.name!=ne})){p=(le=function(bt){return N(this,le),new et(z(bt))})[ce]=et[ce];for(var Ut,ht=ee(et),Lt=0;ht.length>Lt;)(Ut=ht[Lt++])in le||S(le,Ut,et[Ut]);p.constructor=le}X&&ie(me)!==Oe&&X(me,Oe),G=new V(new le(2));var kt=me.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||x(me,{setInt8:function(It,bt){kt.call(this,It,bt<<24>>24)},setUint8:function(It,bt){kt.call(this,It,bt<<24>>24)}},{unsafe:!0})}else le=function(lt){N(this,le,ne),lt=z(lt),ge(this,{bytes:ve.call(new Array(lt),0),byteLength:lt}),g||(this.byteLength=lt)},V=function(lt,St,bt){N(this,V,J),N(lt,le,J);var Pt=ae(lt).byteLength;if((St=Z(St))<0||Pt<St)throw Xe("Wrong offset");if(Pt<St+(bt=void 0===bt?Pt-St:K(bt)))throw Xe("Wrong length");ge(this,{buffer:lt,byteLength:bt,byteOffset:St}),g||(this.buffer=lt,this.byteLength=bt,this.byteOffset=St)},g&&(d(le,"byteLength"),d(V,"buffer"),d(V,"byteLength"),d(V,"byteOffset")),x(V[ce],{getInt8:function(lt){return f(this,1,lt)[0]<<24>>24},getUint8:function(lt){return f(this,1,lt)[0]},getInt16:function(lt){return((lt=f(this,2,lt,1<arguments.length?arguments[1]:void 0))[1]<<8|lt[0])<<16>>16},getUint16:function(lt){return(lt=f(this,2,lt,1<arguments.length?arguments[1]:void 0))[1]<<8|lt[0]},getInt32:function(lt){return w(f(this,4,lt,1<arguments.length?arguments[1]:void 0))},getUint32:function(lt){return w(f(this,4,lt,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(lt){return yt(f(this,4,lt,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(lt){return yt(f(this,8,lt,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(lt,It){h(this,1,lt,M,It)},setUint8:function(lt,It){h(this,1,lt,M,It)},setInt16:function(lt,It){h(this,2,lt,C,It,2<arguments.length?arguments[2]:void 0)},setUint16:function(lt,It){h(this,2,lt,C,It,2<arguments.length?arguments[2]:void 0)},setInt32:function(lt,It){h(this,4,lt,_,It,2<arguments.length?arguments[2]:void 0)},setUint32:function(lt,It){h(this,4,lt,_,It,2<arguments.length?arguments[2]:void 0)},setFloat32:function(lt,It){h(this,4,lt,I,It,2<arguments.length?arguments[2]:void 0)},setFloat64:function(lt,It){h(this,8,lt,D,It,2<arguments.length?arguments[2]:void 0)}});xe(le,ne),xe(V,J),_e.exports={ArrayBuffer:le,DataView:V}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(a,_e,q){"use strict";var M=a("../internals/to-object"),C=a("../internals/to-absolute-index"),_=a("../internals/to-length"),w=Math.min;_e.exports=[].copyWithin||function(g,D){var d=M(this),f=_(d.length),h=C(g,f),p=C(D,f),v=w((void 0===(g=2<arguments.length?arguments[2]:void 0)?f:C(g,f))-p,f-h),S=1;for(p<h&&h<p+v&&(S=-1,p+=v-1,h+=v-1);0<v--;)p in d?d[h]=d[p]:delete d[h],h+=S,p+=S;return d}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(a,_e,q){"use strict";var M=a("../internals/to-object"),C=a("../internals/to-absolute-index"),_=a("../internals/to-length");_e.exports=function(w){for(var f,I=M(this),D=_(I.length),d=C(1<(f=arguments.length)?arguments[1]:void 0,D),h=void 0===(f=2<f?arguments[2]:void 0)?D:C(f,D);d<h;)I[d++]=w;return I}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(_,_e,q){"use strict";var M=_("../internals/array-iteration").forEach,C=_("../internals/array-method-is-strict");_=_("../internals/array-method-uses-to-length"),C=C("forEach"),_=_("forEach"),_e.exports=C&&_?[].forEach:function(w){return M(this,w,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(a,_e,q){"use strict";var M=a("../internals/function-bind-context"),C=a("../internals/to-object"),_=a("../internals/call-with-safe-iteration-closing"),w=a("../internals/is-array-iterator-method"),I=a("../internals/to-length"),D=a("../internals/create-property"),d=a("../internals/get-iterator-method");_e.exports=function(N){var h,p,g,v,S,x,E=C(N),Z=(N="function"==typeof this?this:Array,arguments.length),K=1<Z?arguments[1]:void 0,z=void 0!==K,G=d(E),ie=0;if(z&&(K=M(K,2<Z?arguments[2]:void 0,2)),null==G||N==Array&&w(G))for(p=new N(h=I(E.length));ie<h;ie++)x=z?K(E[ie],ie):E[ie],D(p,ie,x);else for(S=(v=G.call(E)).next,p=new N;!(g=S.call(v)).done;ie++)x=z?_(v,K,[g.value,ie],!0):g.value,D(p,ie,x);return p.length=ie,p}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(a,_e,q){function M(I){return function(D,d,f){var h,p=C(D),g=_(p.length),v=w(f,g);if(I&&d!=d){for(;v<g;)if((h=p[v++])!=h)return!0}else for(;v<g;v++)if((I||v in p)&&p[v]===d)return I||v||0;return!I&&-1}}var C=a("../internals/to-indexed-object"),_=a("../internals/to-length"),w=a("../internals/to-absolute-index");_e.exports={includes:M(!0),indexOf:M(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(a,_e,q){function M(f){var h=1==f,p=2==f,g=3==f,v=4==f,S=6==f,x=5==f||S;return function(E,N,Z,K){for(var z,G,ie=w(E),X=_(ie),ee=C(N,Z,3),Y=I(X.length),ve=0,xe=(N=K||D,h?N(E,Y):p?N(E,0):void 0);ve<Y;ve++)if((x||ve in X)&&(G=ee(z=X[ve],ve,ie),f))if(h)xe[ve]=G;else if(G)switch(f){case 3:return!0;case 5:return z;case 6:return ve;case 2:d.call(xe,z)}else if(v)return!1;return S?-1:g||v?v:xe}}var C=a("../internals/function-bind-context"),_=a("../internals/indexed-object"),w=a("../internals/to-object"),I=a("../internals/to-length"),D=a("../internals/array-species-create"),d=[].push;_e.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(f,_e,q){"use strict";var M=f("../internals/to-indexed-object"),C=f("../internals/to-integer"),_=f("../internals/to-length"),d=f("../internals/array-method-is-strict"),w=(f=f("../internals/array-method-uses-to-length"),Math.min),I=[].lastIndexOf,D=!!I&&1/[1].lastIndexOf(1,-0)<0;d=d("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0}),_e.exports=!D&&d&&f?I:function(h){if(D)return I.apply(this,arguments)||0;var p=M(this),g=_(p.length),v=g-1;for((v=1<arguments.length?w(v,C(arguments[1])):v)<0&&(v=g+v);0<=v;v--)if(v in p&&p[v]===h)return v||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(a,_e,q){var M=a("../internals/fails"),C=a("../internals/well-known-symbol"),_=a("../internals/engine-v8-version"),w=C("species");_e.exports=function(I){return 51<=_||!M(function(){var D=[];return(D.constructor={})[w]=function(){return{foo:1}},1!==D[I](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(a,_e,q){"use strict";var M=a("../internals/fails");_e.exports=function(C,_){var w=[][C];return!!w&&M(function(){w.call(null,_||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(a,_e,q){function M(d){throw d}var C=a("../internals/descriptors"),_=a("../internals/fails"),w=a("../internals/has"),I=Object.defineProperty,D={};_e.exports=function(d,f){var h,p,g,v;return w(D,d)?D[d]:(h=[][d],p=!!w(f=f||{},"ACCESSORS")&&f.ACCESSORS,g=w(f,0)?f[0]:M,v=w(f,1)?f[1]:void 0,D[d]=!!h&&!_(function(){if(p&&!C)return!0;var S={length:-1};p?I(S,1,{enumerable:!0,get:M}):S[1]=1,h.call(S,g,v)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(a,_e,q){function M(D){return function(d,f,h,p){C(f);var g=_(d),v=w(g),S=I(g.length),x=D?S-1:0,E=D?-1:1;if(h<2)for(;;){if(x in v){p=v[x],x+=E;break}if(x+=E,D?x<0:S<=x)throw TypeError("Reduce of empty array with no initial value")}for(;D?0<=x:x<S;x+=E)x in v&&(p=f(p,v[x],x,g));return p}}var C=a("../internals/a-function"),_=a("../internals/to-object"),w=a("../internals/indexed-object"),I=a("../internals/to-length");_e.exports={left:M(!1),right:M(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(a,_e,q){var M=a("../internals/is-object"),C=a("../internals/is-array"),_=a("../internals/well-known-symbol")("species");_e.exports=function(w,I){var D;return new(void 0===(D=C(w)&&("function"==typeof(D=w.constructor)&&(D===Array||C(D.prototype))||M(D)&&null===(D=D[_]))?void 0:D)?Array:D)(0===I?0:I)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(a,_e,q){var M=a("../internals/an-object");_e.exports=function(C,_,w,I){try{return I?_(M(w)[0],w[1]):_(w)}catch(D){throw void 0!==(I=C.return)&&M(I.call(C)),D}}},{"../internals/an-object":10}],27:[function(a,_e,q){var M=a("../internals/well-known-symbol")("iterator"),C=!1;try{var _=0,w={next:function(){return{done:!!_++}},return:function(){C=!0}};w[M]=function(){return this},Array.from(w,function(){throw 2})}catch{}_e.exports=function(I,D){if(!D&&!C)return!1;var d=!1;try{var f={};f[M]=function(){return{next:function(){return{done:d=!0}}}},I(f)}catch{}return d}},{"../internals/well-known-symbol":150}],28:[function(a,_e,q){var M={}.toString;_e.exports=function(C){return M.call(C).slice(8,-1)}},{}],29:[function(a,_e,q){var M=a("../internals/to-string-tag-support"),C=a("../internals/classof-raw"),_=a("../internals/well-known-symbol")("toStringTag"),w="Arguments"==C(function(){return arguments}());_e.exports=M?C:function(I){var D;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(D=function(d,f){try{return d[f]}catch{}}(I=Object(I),_))?D:w?C(I):"Object"==(D=C(I))&&"function"==typeof I.callee?"Arguments":D}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(g,_e,q){"use strict";var M=g("../internals/object-define-property").f,C=g("../internals/object-create"),_=g("../internals/redefine-all"),w=g("../internals/function-bind-context"),I=g("../internals/an-instance"),D=g("../internals/iterate"),d=g("../internals/define-iterator"),f=g("../internals/set-species"),h=g("../internals/descriptors"),p=g("../internals/internal-metadata").fastKey,v=(g=g("../internals/internal-state")).set,S=g.getterFor;_e.exports={getConstructor:function(x,E,N,Z){function K(X,ee,Y){var ve,xe=ie(X),ae=z(X,ee);return ae?ae.value=Y:(xe.last=ae={index:ve=p(ee,!0),key:ee,value:Y,previous:ee=xe.last,next:void 0,removed:!1},xe.first||(xe.first=ae),ee&&(ee.next=ae),h?xe.size++:X.size++,"F"!==ve&&(xe.index[ve]=ae)),X}function z(ve,ee){ve=ie(ve);var Y,xe=p(ee);if("F"!==xe)return ve.index[xe];for(Y=ve.first;Y;Y=Y.next)if(Y.key==ee)return Y}var G=x(function(X,ee){I(X,G,E),v(X,{type:E,index:C(null),first:void 0,last:void 0,size:0}),h||(X.size=0),null!=ee&&D(ee,X[Z],X,N)}),ie=S(E);return _(G.prototype,{clear:function(){for(var X=ie(this),ee=X.index,Y=X.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=void 0),delete ee[Y.index],Y=Y.next;X.first=X.last=void 0,h?X.size=0:this.size=0},delete:function(xe){var ee,Y,ve=ie(this);return(xe=z(this,xe))&&(ee=xe.next,Y=xe.previous,delete ve.index[xe.index],xe.removed=!0,Y&&(Y.next=ee),ee&&(ee.previous=Y),ve.first==xe&&(ve.first=ee),ve.last==xe&&(ve.last=Y),h?ve.size--:this.size--),!!xe},forEach:function(X){for(var ee,Y=ie(this),ve=w(X,1<arguments.length?arguments[1]:void 0,3);ee=ee?ee.next:Y.first;)for(ve(ee.value,ee.key,this);ee&&ee.removed;)ee=ee.previous},has:function(X){return!!z(this,X)}}),_(G.prototype,N?{get:function(X){return(X=z(this,X))&&X.value},set:function(X,ee){return K(this,0===X?0:X,ee)}}:{add:function(X){return K(this,X=0===X?0:X,X)}}),h&&M(G.prototype,"size",{get:function(){return ie(this).size}}),G},setStrong:function(x,E,N){var Z=E+" Iterator",K=S(E),z=S(Z);d(x,E,function(G,ie){v(this,{type:Z,target:G,state:K(G),kind:ie,last:void 0})},function(){for(var G=z(this),ie=G.kind,X=G.last;X&&X.removed;)X=X.previous;return G.target&&(G.last=X=X?X.next:G.state.first)?"keys"==ie?{value:X.key,done:!1}:"values"==ie?{value:X.value,done:!1}:{value:[X.key,X.value],done:!1}:{value:G.target=void 0,done:!0}},N?"entries":"values",!N,!0),f(E)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(v,_e,q){"use strict";function M(K){return K.frozen||(K.frozen=new C)}function C(){this.entries=[]}function _(K,z){return E(K.entries,function(G){return G[0]===z})}var w=v("../internals/redefine-all"),I=v("../internals/internal-metadata").getWeakData,D=v("../internals/an-object"),d=v("../internals/is-object"),f=v("../internals/an-instance"),h=v("../internals/iterate"),p=v("../internals/array-iteration"),g=v("../internals/has"),S=(v=v("../internals/internal-state")).set,x=v.getterFor,E=p.find,N=p.findIndex,Z=0;C.prototype={get:function(K){if(K=_(this,K))return K[1]},has:function(K){return!!_(this,K)},set:function(K,z){var G=_(this,K);G?G[1]=z:this.entries.push([K,z])},delete:function(K){var z=N(this.entries,function(G){return G[0]===K});return~z&&this.entries.splice(z,1),!!~z}},_e.exports={getConstructor:function(K,z,G,ie){function X(ve,xe,ae){var ge=Y(ve),ne=I(D(xe),!0);return!0===ne?M(ge).set(xe,ae):ne[ge.id]=ae,ve}var ee=K(function(ve,xe){f(ve,ee,z),S(ve,{type:z,id:Z++,frozen:void 0}),null!=xe&&h(xe,ve[ie],ve,G)}),Y=x(z);return w(ee.prototype,{delete:function(ve){var xe,ae=Y(this);return!!d(ve)&&(!0===(xe=I(ve))?M(ae).delete(ve):xe&&g(xe,ae.id)&&delete xe[ae.id])},has:function(ve){var xe,ae=Y(this);return!!d(ve)&&(!0===(xe=I(ve))?M(ae).has(ve):xe&&g(xe,ae.id))}}),w(ee.prototype,G?{get:function(ve){var xe,ae=Y(this);if(d(ve))return!0===(xe=I(ve))?M(ae).get(ve):xe?xe[ae.id]:void 0},set:function(ve,xe){return X(this,ve,xe)}}:{add:function(ve){return X(this,ve,!0)}}),ee}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/global"),_=a("../internals/is-forced"),w=a("../internals/redefine"),I=a("../internals/internal-metadata"),D=a("../internals/iterate"),d=a("../internals/an-instance"),f=a("../internals/is-object"),h=a("../internals/fails"),p=a("../internals/check-correctness-of-iteration"),g=a("../internals/set-to-string-tag"),v=a("../internals/inherit-if-required");_e.exports=function(S,x,E){function N(ne){var J=xe[ne];w(xe,ne,"add"==ne?function(ce){return J.call(this,0===ce?0:ce),this}:"delete"==ne?function(ce){return!(ee&&!f(ce))&&J.call(this,0===ce?0:ce)}:"get"==ne?function(ce){return ee&&!f(ce)?void 0:J.call(this,0===ce?0:ce)}:"has"==ne?function(ce){return!(ee&&!f(ce))&&J.call(this,0===ce?0:ce)}:function(ce,Te){return J.call(this,0===ce?0:ce,Te),this})}var Z,K,z,G,ie,X=-1!==S.indexOf("Map"),ee=-1!==S.indexOf("Weak"),Y=X?"set":"add",ve=C[S],xe=ve&&ve.prototype,ae=ve,ge={};return _(S,"function"!=typeof ve||!(ee||xe.forEach&&!h(function(){(new ve).entries().next()})))?(ae=E.getConstructor(x,S,X,Y),I.REQUIRED=!0):_(S,!0)&&(K=(Z=new ae)[Y](ee?{}:-0,1)!=Z,z=h(function(){Z.has(1)}),G=p(function(ne){new ve(ne)}),ie=!ee&&h(function(){for(var ne=new ve,J=5;J--;)ne[Y](J,J);return!ne.has(-0)}),G||(((ae=x(function(ne,J){return d(ne,ae,S),ne=v(new ve,ne,ae),null!=J&&D(J,ne[Y],ne,X),ne})).prototype=xe).constructor=ae),(z||ie)&&(N("delete"),N("has"),X&&N("get")),(ie||K)&&N(Y),ee&&xe.clear&&delete xe.clear),ge[S]=ae,M({global:!0,forced:ae!=ve},ge),g(ae,S),ee||E.setStrong(ae,S,X),ae}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(a,_e,q){var M=a("../internals/has"),C=a("../internals/own-keys"),_=a("../internals/object-get-own-property-descriptor"),w=a("../internals/object-define-property");_e.exports=function(I,D){for(var d=C(D),f=w.f,h=_.f,p=0;p<d.length;p++){var g=d[p];M(I,g)||f(I,g,h(D,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(a,_e,q){var M=a("../internals/well-known-symbol")("match");_e.exports=function(C){var _=/./;try{"/./"[C](_)}catch{try{return _[M]=!1,"/./"[C](_)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(a,_e,q){a=a("../internals/fails"),_e.exports=!a(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},{"../internals/fails":51}],36:[function(a,_e,q){var M=a("../internals/require-object-coercible"),C=/"/g;_e.exports=function(d,w,I,D){d=String(M(d));var f="<"+w;return""!==I&&(f+=" "+I+'="'+String(D).replace(C,"&quot;")+'"'),f+">"+d+"</"+w+">"}},{"../internals/require-object-coercible":115}],37:[function(a,_e,q){"use strict";function M(){return this}var C=a("../internals/iterators-core").IteratorPrototype,_=a("../internals/object-create"),w=a("../internals/create-property-descriptor"),I=a("../internals/set-to-string-tag"),D=a("../internals/iterators");_e.exports=function(d,f,h){return f+=" Iterator",d.prototype=_(C,{next:w(1,h)}),I(d,f,!1,!0),D[f]=M,d}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/object-define-property"),_=a("../internals/create-property-descriptor");_e.exports=M?function(w,I,D){return C.f(w,I,_(1,D))}:function(w,I,D){return w[I]=D,w}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(a,_e,q){_e.exports=function(M,C){return{enumerable:!(1&M),configurable:!(2&M),writable:!(4&M),value:C}}},{}],40:[function(a,_e,q){"use strict";var M=a("../internals/to-primitive"),C=a("../internals/object-define-property"),_=a("../internals/create-property-descriptor");_e.exports=function(w,I,D){(I=M(I))in w?C.f(w,I,_(0,D)):w[I]=D}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(v,_e,q){"use strict";function M(){return this}var C=v("../internals/export"),_=v("../internals/create-iterator-constructor"),w=v("../internals/object-get-prototype-of"),I=v("../internals/object-set-prototype-of"),D=v("../internals/set-to-string-tag"),d=v("../internals/create-non-enumerable-property"),f=v("../internals/redefine"),h=v("../internals/well-known-symbol"),p=v("../internals/is-pure"),g=v("../internals/iterators"),S=(v=v("../internals/iterators-core")).IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,E=h("iterator"),N="values",Z="entries";_e.exports=function(K,z,G,ge,X,ee,Y){function ve(le){if(le===X&&Te)return Te;if(!x&&le in J)return J[le];switch(le){case"keys":case N:case Z:return function(){return new G(this,le)}}return function(){return new G(this)}}_(G,z,ge),ge=z+" Iterator";var xe,ae,ne=!1,J=K.prototype,ce=J[E]||J["@@iterator"]||X&&J[X],Te=!x&&ce||ve(X),et="Array"==z&&J.entries||ce;if(et&&(et=w(et.call(new K)),S!==Object.prototype&&et.next&&(p||w(et)===S||(I?I(et,S):"function"!=typeof et[E]&&d(et,E,M)),D(et,ge,!0,!0),p&&(g[ge]=M))),X==N&&ce&&ce.name!==N&&(ne=!0,Te=function(){return ce.call(this)}),p&&!Y||J[E]===Te||d(J,E,Te),g[z]=Te,X)if(xe={values:ve(N),keys:ee?Te:ve("keys"),entries:ve(Z)},Y)for(ae in xe)!x&&!ne&&ae in J||f(J,ae,xe[ae]);else C({target:z,proto:!0,forced:x||ne},xe);return xe}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(a,_e,q){var M=a("../internals/path"),C=a("../internals/has"),_=a("../internals/well-known-symbol-wrapped"),w=a("../internals/object-define-property").f;_e.exports=function(I){var D=M.Symbol||(M.Symbol={});C(D,I)||w(D,I,{value:_.f(I)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(a,_e,q){a=a("../internals/fails"),_e.exports=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(C,_e,q){var M=C("../internals/global"),_=(C=C("../internals/is-object"),M.document),w=C(_)&&C(_.createElement);_e.exports=function(I){return w?_.createElement(I):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(a,_e,q){_e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(a,_e,q){a=a("../internals/engine-user-agent"),_e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(a)},{"../internals/engine-user-agent":47}],47:[function(a,_e,q){a=a("../internals/get-built-in"),_e.exports=a("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(_,_e,q){var M,C,w=_("../internals/global");_=_("../internals/engine-user-agent"),(w=(w=(w=w.process)&&w.versions)&&w.v8)?C=(M=w.split("."))[0]+M[1]:_&&(!(M=_.match(/Edge\/(\d+)/))||74<=M[1])&&(M=_.match(/Chrome\/(\d+)/))&&(C=M[1]),_e.exports=C&&+C},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(a,_e,q){_e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(a,_e,q){var M=a("../internals/global"),C=a("../internals/object-get-own-property-descriptor").f,_=a("../internals/create-non-enumerable-property"),w=a("../internals/redefine"),I=a("../internals/set-global"),D=a("../internals/copy-constructor-properties"),d=a("../internals/is-forced");_e.exports=function(f,h){var p,g,v,S=f.target,x=f.global,E=f.stat,N=x?M:E?M[S]||I(S,{}):(M[S]||{}).prototype;if(N)for(p in h){if(g=h[p],v=f.noTargetGet?(v=C(N,p))&&v.value:N[p],!d(x?p:S+(E?".":"#")+p,f.forced)&&void 0!==v){if(typeof g==typeof v)continue;D(g,v)}(f.sham||v&&v.sham)&&_(g,"sham",!0),w(N,p,g,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(a,_e,q){_e.exports=function(M){try{return!!M()}catch{return!0}}},{}],52:[function(h,_e,q){"use strict";h("../modules/es.regexp.exec");var M=h("../internals/redefine"),C=h("../internals/fails"),_=h("../internals/well-known-symbol"),w=h("../internals/regexp-exec"),I=h("../internals/create-non-enumerable-property"),D=_("species"),d=!C(function(){var v=/./;return v.exec=function(){var S=[];return S.groups={a:"7"},S},"7"!=="".replace(v,"$<a>")}),f="$0"==="a".replace(/./,"$0"),p=!!/./[h=_("replace")]&&""===/./[h]("a","$0"),g=!C(function(){var v=(S=/(?:)/).exec,S=(S.exec=function(){return v.apply(this,arguments)},"ab".split(S));return 2!==S.length||"a"!==S[0]||"b"!==S[1]});_e.exports=function(v,S,x,E){var N,Z,K=_(v),z=!C(function(){var ie={};return ie[K]=function(){return 7},7!=""[v](ie)}),G=z&&!C(function(){var ie=!1,X=/a/;return"split"===v&&((X={constructor:{}}).constructor[D]=function(){return X},X.flags="",X[K]=/./[K]),X.exec=function(){return ie=!0,null},X[K](""),!ie});z&&G&&("replace"!==v||d&&f&&!p)&&("split"!==v||g)||(N=/./[K],x=(G=x(K,""[v],function(ie,X,ee,Y,ve){return X.exec===w?z&&!ve?{done:!0,value:N.call(X,ee,Y)}:{done:!0,value:ie.call(ee,X,Y)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}))[0],Z=G[1],M(String.prototype,v,x),M(RegExp.prototype,K,2==S?function(ie,X){return Z.call(ie,this,X)}:function(ie){return Z.call(ie,this)})),E&&I(RegExp.prototype[K],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(a,_e,q){"use strict";var C=a("../internals/is-array"),_=a("../internals/to-length"),w=a("../internals/function-bind-context");_e.exports=function M(I,D,d,f,h,p,g,v){for(var S,x=h,E=0,N=!!g&&w(g,v,3);E<f;){if(E in d){if(S=N?N(d[E],E,D):d[E],0<p&&C(S))x=M(I,D,S,_(S.length),x,p-1)-1;else{if(9007199254740991<=x)throw TypeError("Exceed the acceptable array length");I[x]=S}x++}E++}return x}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(a,_e,q){a=a("../internals/fails"),_e.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(a,_e,q){var M=a("../internals/a-function");_e.exports=function(C,_,w){if(M(C),void 0===_)return C;switch(w){case 0:return function(){return C.call(_)};case 1:return function(I){return C.call(_,I)};case 2:return function(I,D){return C.call(_,I,D)};case 3:return function(I,D,d){return C.call(_,I,D,d)}}return function(){return C.apply(_,arguments)}}},{"../internals/a-function":5}],56:[function(a,_e,q){"use strict";var M=a("../internals/a-function"),C=a("../internals/is-object"),_=[].slice,w={};_e.exports=Function.bind||function(I){var D=M(this),d=_.call(arguments,1),f=function(){var h=d.concat(_.call(arguments));if(this instanceof f){var p=D,g=h.length,v=h;if(!(g in w)){for(var S=[],x=0;x<g;x++)S[x]="a["+x+"]";w[g]=Function("C,a","return new C("+S.join(",")+")")}return w[g](p,v)}return D.apply(I,h)};return C(D.prototype)&&(f.prototype=D.prototype),f}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(a,_e,q){function M(w){return"function"==typeof w?w:void 0}var C=a("../internals/path"),_=a("../internals/global");_e.exports=function(w,I){return arguments.length<2?M(C[w])||M(_[w]):C[w]&&C[w][I]||_[w]&&_[w][I]}},{"../internals/global":60,"../internals/path":106}],58:[function(a,_e,q){var M=a("../internals/classof"),C=a("../internals/iterators"),_=a("../internals/well-known-symbol")("iterator");_e.exports=function(w){if(null!=w)return w[_]||w["@@iterator"]||C[M(w)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(a,_e,q){var M=a("../internals/an-object"),C=a("../internals/get-iterator-method");_e.exports=function(_){var w=C(_);if("function"!=typeof w)throw TypeError(String(_)+" is not iterable");return M(w.call(_))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(a,_e,q){(function(M){function C(_){return _&&_.Math==Math&&_}_e.exports=C("object"==typeof globalThis&&globalThis)||C("object"==typeof window&&window)||C("object"==typeof self&&self)||C("object"==typeof M&&M)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(a,_e,q){var M={}.hasOwnProperty;_e.exports=function(C,_){return M.call(C,_)}},{}],62:[function(a,_e,q){_e.exports={}},{}],63:[function(a,_e,q){var M=a("../internals/global");_e.exports=function(C,_){var w=M.console;w&&w.error&&(1===arguments.length?w.error(C):w.error(C,_))}},{"../internals/global":60}],64:[function(a,_e,q){a=a("../internals/get-built-in"),_e.exports=a("document","documentElement")},{"../internals/get-built-in":57}],65:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/fails"),_=a("../internals/document-create-element");_e.exports=!M&&!C(function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(a,_e,q){var M=Math.abs,C=Math.pow,_=Math.floor,w=Math.log,I=Math.LN2;_e.exports={pack:function(D,d,x){var h,p,g,v=new Array(x),S=8*x-d-1,E=(x=(1<<S)-1)>>1,N=23===d?C(2,-24)-C(2,-77):0,Z=D<0||0===D&&1/D<0?1:0,K=0;for((D=M(D))!=D||D===1/0?(p=D!=D?1:0,h=x):(h=_(w(D)/I),D*(g=C(2,-h))<1&&(h--,g*=2),2<=(D+=1<=h+E?N/g:N*C(2,1-E))*g&&(h++,g/=2),x<=h+E?(p=0,h=x):1<=h+E?(p=(D*g-1)*C(2,d),h+=E):(p=D*C(2,E-1)*C(2,d),h=0));8<=d;v[K++]=255&p,p/=256,d-=8);for(h=h<<d|p,S+=d;0<S;v[K++]=255&h,h/=256,S-=8);return v[--K]|=128*Z,v},unpack:function(D,d){var f,x,h=D.length,p=(1<<(x=8*h-d-1))-1,g=p>>1,v=x-7,S=h-1,E=127&(x=D[S--]);for(x>>=7;0<v;E=256*E+D[S],S--,v-=8);for(f=E&(1<<-v)-1,E>>=-v,v+=d;0<v;f=256*f+D[S],S--,v-=8);if(0===E)E=1-g;else{if(E===p)return f?NaN:x?-1/0:1/0;f+=C(2,d),E-=g}return(x?-1:1)*f*C(2,E-d)}}},{}],67:[function(a,_e,q){var M=a("../internals/fails"),C=a("../internals/classof-raw"),_="".split;_e.exports=M(function(){return!Object("z").propertyIsEnumerable(0)})?function(w){return"String"==C(w)?_.call(w,""):Object(w)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(a,_e,q){var M=a("../internals/is-object"),C=a("../internals/object-set-prototype-of");_e.exports=function(_,w,I){return C&&"function"==typeof(w=w.constructor)&&w!==I&&M(w=w.prototype)&&w!==I.prototype&&C(_,w),_}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(M,_e,q){M=M("../internals/shared-store");var C=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(_){return C.call(_)}),_e.exports=M.inspectSource},{"../internals/shared-store":121}],70:[function(a,_e,q){function M(v){I(v,f,{value:{objectID:"O"+ ++h,weakData:{}}})}var C=a("../internals/hidden-keys"),_=a("../internals/is-object"),w=a("../internals/has"),I=a("../internals/object-define-property").f,D=a("../internals/uid"),d=a("../internals/freezing"),f=D("meta"),h=0,p=Object.isExtensible||function(){return!0},g=_e.exports={REQUIRED:!1,fastKey:function(v,S){if(!_(v))return"symbol"==typeof v?v:("string"==typeof v?"S":"P")+v;if(!w(v,f)){if(!p(v))return"F";if(!S)return"E";M(v)}return v[f].objectID},getWeakData:function(v,S){if(!w(v,f)){if(!p(v))return!0;if(!S)return!1;M(v)}return v[f].weakData},onFreeze:function(v){return d&&g.REQUIRED&&p(v)&&!w(v,f)&&M(v),v}};C[f]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(x,_e,q){var M,C,_,w,I,D,d,f,h=x("../internals/native-weak-map"),E=x("../internals/global"),p=x("../internals/is-object"),g=x("../internals/create-non-enumerable-property"),v=x("../internals/has"),S=x("../internals/shared-key");x=x("../internals/hidden-keys"),E=E.WeakMap,d=h?(M=new E,C=M.get,_=M.has,w=M.set,I=function(N,Z){return w.call(M,N,Z),Z},D=function(N){return C.call(M,N)||{}},function(N){return _.call(M,N)}):(x[f=S("state")]=!0,I=function(N,Z){return g(N,f,Z),Z},D=function(N){return v(N,f)?N[f]:{}},function(N){return v(N,f)}),_e.exports={set:I,get:D,has:d,enforce:function(N){return d(N)?D(N):I(N,{})},getterFor:function(N){return function(Z){if(p(Z)&&(Z=D(Z)).type===N)return Z;throw TypeError("Incompatible receiver, "+N+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(a,_e,q){var M=a("../internals/well-known-symbol"),C=a("../internals/iterators"),_=M("iterator"),w=Array.prototype;_e.exports=function(I){return void 0!==I&&(C.Array===I||w[_]===I)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(a,_e,q){var M=a("../internals/classof-raw");_e.exports=Array.isArray||function(C){return"Array"==M(C)}},{"../internals/classof-raw":28}],74:[function(a,_e,q){function M(f,h){return(f=I[w(f)])==d||f!=D&&("function"==typeof h?C(h):!!h)}var C=a("../internals/fails"),_=/#|\.prototype\./,w=M.normalize=function(f){return String(f).replace(_,".").toLowerCase()},I=M.data={},D=M.NATIVE="N",d=M.POLYFILL="P";_e.exports=M},{"../internals/fails":51}],75:[function(a,_e,q){_e.exports=function(M){return"object"==typeof M?null!==M:"function"==typeof M}},{}],76:[function(a,_e,q){_e.exports=!1},{}],77:[function(a,_e,q){var M=a("../internals/is-object"),C=a("../internals/classof-raw"),_=a("../internals/well-known-symbol")("match");_e.exports=function(w){var I;return M(w)&&(void 0!==(I=w[_])?!!I:"RegExp"==C(w))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(a,_e,q){function M(f,h){this.stopped=f,this.result=h}var C=a("../internals/an-object"),_=a("../internals/is-array-iterator-method"),w=a("../internals/to-length"),I=a("../internals/function-bind-context"),D=a("../internals/get-iterator-method"),d=a("../internals/call-with-safe-iteration-closing");(_e.exports=function(f,h,p,g,v){var S,x,E,N,Z,K,z=I(h,p,g?2:1);if(v)S=f;else{if("function"!=typeof(h=D(f)))throw TypeError("Target is not iterable");if(_(h)){for(x=0,E=w(f.length);x<E;x++)if((N=g?z(C(K=f[x])[0],K[1]):z(f[x]))&&N instanceof M)return N;return new M(!1)}S=h.call(f)}for(Z=S.next;!(K=Z.call(S)).done;)if("object"==typeof(N=d(S,z,K.value,g))&&N&&N instanceof M)return N;return new M(!1)}).stop=function(f){return new M(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(D,_e,q){"use strict";var M,C,_=D("../internals/object-get-prototype-of"),w=D("../internals/create-non-enumerable-property"),I=D("../internals/has"),d=D("../internals/well-known-symbol"),f=(D=D("../internals/is-pure"),d=d("iterator"),!1);[].keys&&("next"in(C=[].keys())?(_=_(_(C)))!==Object.prototype&&(M=_):f=!0),null==M&&(M={}),D||I(M,d)||w(M,d,function(){return this}),_e.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(a,_e,q){_e.exports={}},{}],81:[function(a,_e,q){_e.exports=Math.sign||function(M){return 0==(M=+M)||M!=M?M:M<0?-1:1}},{}],82:[function(g,_e,q){var M,C,_,w,I,D,d,f,h=g("../internals/global"),Z=g("../internals/object-get-own-property-descriptor").f,N=g("../internals/classof-raw"),p=g("../internals/task").set,v=(g=g("../internals/engine-is-ios"),h.MutationObserver||h.WebKitMutationObserver),S=h.process,x=h.Promise,E="process"==N(S);N=Z(h,"queueMicrotask"),(Z=N&&N.value)||(M=function(){var K,z;for(E&&(K=S.domain)&&K.exit();C;){z=C.fn,C=C.next;try{z()}catch(G){throw C?w():_=void 0,G}}_=void 0,K&&K.enter()},w=E?function(){S.nextTick(M)}:v&&!g?(I=!0,D=document.createTextNode(""),new v(M).observe(D,{characterData:!0}),function(){D.data=I=!I}):x&&x.resolve?(d=x.resolve(void 0),f=d.then,function(){f.call(d,M)}):function(){p.call(h,M)}),_e.exports=Z||function(K){K={fn:K,next:void 0},_&&(_.next=K),C||(C=K,w()),_=K}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(a,_e,q){a=a("../internals/global"),_e.exports=a.Promise},{"../internals/global":60}],84:[function(a,_e,q){a=a("../internals/fails"),_e.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(a,_e,q){var M=a("../internals/fails"),C=a("../internals/well-known-symbol"),_=a("../internals/is-pure"),w=C("iterator");_e.exports=!M(function(){var I=new URL("b?a=1&b=2&c=3","http://a"),D=I.searchParams,d="";return I.pathname="c%20d",D.forEach(function(f,h){D.delete("b"),d+=h+f}),_&&!I.toJSON||!D.sort||"http://a/c%20d?a=1&c=3"!==I.href||"3"!==D.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!D[w]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(M,_e,q){var C=M("../internals/global");M=M("../internals/inspect-source"),_e.exports="function"==typeof(C=C.WeakMap)&&/native code/.test(M(C))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(a,_e,q){"use strict";function M(_){var w,I;this.promise=new _(function(D,d){if(void 0!==w||void 0!==I)throw TypeError("Bad Promise constructor");w=D,I=d}),this.resolve=C(w),this.reject=C(I)}var C=a("../internals/a-function");_e.exports.f=function(_){return new M(_)}},{"../internals/a-function":5}],88:[function(a,_e,q){var M=a("../internals/is-regexp");_e.exports=function(C){if(M(C))throw TypeError("The method doesn't accept regular expressions");return C}},{"../internals/is-regexp":77}],89:[function(a,_e,q){var M=a("../internals/global").isFinite;_e.exports=Number.isFinite||function(C){return"number"==typeof C&&M(C)}},{"../internals/global":60}],90:[function(a,_e,q){"use strict";var M=a("../internals/descriptors"),C=a("../internals/fails"),_=a("../internals/object-keys"),w=a("../internals/object-get-own-property-symbols"),I=a("../internals/object-property-is-enumerable"),D=a("../internals/to-object"),d=a("../internals/indexed-object"),f=Object.assign,h=Object.defineProperty;_e.exports=!f||C(function(){var p,g,v,S;return!(!M||1===f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(g={},S="abcdefghijklmnopqrst",(p={})[v=Symbol()]=7,S.split("").forEach(function(x){g[x]=x}),7!=f({},p)[v]||_(f({},g)).join("")!=S)})?function(p,g){for(var v=D(p),S=arguments.length,x=1,E=w.f,N=I.f;x<S;)for(var Z,K=d(arguments[x++]),z=E?_(K).concat(E(K)):_(K),G=z.length,ie=0;ie<G;)Z=z[ie++],M&&!N.call(K,Z)||(v[Z]=K[Z]);return v}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(h,_e,q){function M(){}var C,_=h("../internals/an-object"),w=h("../internals/object-define-properties"),I=h("../internals/enum-bug-keys"),D=h("../internals/hidden-keys"),d=h("../internals/html"),f=h("../internals/document-create-element"),p=(h=h("../internals/shared-key"),"prototype"),g="script",v=h("IE_PROTO"),S=function(E){return"<"+g+">"+E+"</"+g+">"},x=function(){try{C=document.domain&&new ActiveXObject("htmlfile")}catch{}x=C?((E=C).write(S("")),E.close(),N=E.parentWindow.Object,E=null,N):(E=f("iframe"),N="java"+g+":",E.style.display="none",d.appendChild(E),E.src=String(N),(N=E.contentWindow.document).open(),N.write(S("document.F=Object")),N.close(),N.F);for(var E,N,Z=I.length;Z--;)delete x[p][I[Z]];return x()};D[v]=!0,_e.exports=Object.create||function(E,N){var Z;return null!==E?(M[p]=_(E),Z=new M,M[p]=null,Z[v]=E):Z=x(),void 0===N?Z:w(Z,N)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/object-define-property"),_=a("../internals/an-object"),w=a("../internals/object-keys");_e.exports=M?Object.defineProperties:function(I,D){_(I);for(var d,f=w(D),h=f.length,p=0;p<h;)C.f(I,d=f[p++],D[d]);return I}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/ie8-dom-define"),_=a("../internals/an-object"),w=a("../internals/to-primitive"),I=Object.defineProperty;q.f=M?I:function(D,d,f){if(_(D),d=w(d,!0),_(f),C)try{return I(D,d,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(D[d]=f.value),D}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/object-property-is-enumerable"),_=a("../internals/create-property-descriptor"),w=a("../internals/to-indexed-object"),I=a("../internals/to-primitive"),D=a("../internals/has"),d=a("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;q.f=M?f:function(h,p){if(h=w(h),p=I(p,!0),d)try{return f(h,p)}catch{}if(D(h,p))return _(!C.f.call(h,p),h[p])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(a,_e,q){var M=a("../internals/to-indexed-object"),C=a("../internals/object-get-own-property-names").f,_={}.toString,w="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_e.exports.f=function(I){if(!w||"[object Window]"!=_.call(I))return C(M(I));try{return C(I)}catch{return w.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(a,_e,q){var M=a("../internals/object-keys-internal"),C=a("../internals/enum-bug-keys").concat("length","prototype");q.f=Object.getOwnPropertyNames||function(_){return M(_,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(a,_e,q){q.f=Object.getOwnPropertySymbols},{}],98:[function(w,_e,q){var M=w("../internals/has"),C=w("../internals/to-object"),_=w("../internals/shared-key"),I=(w=w("../internals/correct-prototype-getter"),_("IE_PROTO")),D=Object.prototype;_e.exports=w?Object.getPrototypeOf:function(d){return d=C(d),M(d,I)?d[I]:"function"==typeof d.constructor&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?D:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(a,_e,q){var M=a("../internals/has"),C=a("../internals/to-indexed-object"),_=a("../internals/array-includes").indexOf,w=a("../internals/hidden-keys");_e.exports=function(I,D){var d,f=C(I),h=0,p=[];for(d in f)!M(w,d)&&M(f,d)&&p.push(d);for(;D.length>h;)!M(f,d=D[h++])||~_(p,d)||p.push(d);return p}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(a,_e,q){var M=a("../internals/object-keys-internal"),C=a("../internals/enum-bug-keys");_e.exports=Object.keys||function(_){return M(_,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(a,_e,q){"use strict";var M={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,_=C&&!M.call({1:2},1);q.f=_?function(w){return!!(w=C(this,w))&&w.enumerable}:M},{}],102:[function(a,_e,q){var M=a("../internals/an-object"),C=a("../internals/a-possible-prototype");_e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var _,w=!1,I={};try{(_=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(I,[]),w=I instanceof Array}catch{}return function(D,d){return M(D),C(d),w?_.call(D,d):D.__proto__=d,D}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(a,_e,q){function M(D){return function(d){for(var f,h=w(d),p=_(h),g=p.length,v=0,S=[];v<g;)f=p[v++],C&&!I.call(h,f)||S.push(D?[f,h[f]]:h[f]);return S}}var C=a("../internals/descriptors"),_=a("../internals/object-keys"),w=a("../internals/to-indexed-object"),I=a("../internals/object-property-is-enumerable").f;_e.exports={entries:M(!0),values:M(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(a,_e,q){"use strict";var M=a("../internals/to-string-tag-support"),C=a("../internals/classof");_e.exports=M?{}.toString:function(){return"[object "+C(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(a,_e,q){var M=a("../internals/get-built-in"),C=a("../internals/object-get-own-property-names"),_=a("../internals/object-get-own-property-symbols"),w=a("../internals/an-object");_e.exports=M("Reflect","ownKeys")||function(I){var D=C.f(w(I)),d=_.f;return d?D.concat(d(I)):D}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(a,_e,q){a=a("../internals/global"),_e.exports=a},{"../internals/global":60}],107:[function(a,_e,q){_e.exports=function(M){try{return{error:!1,value:M()}}catch(C){return{error:!0,value:C}}}},{}],108:[function(a,_e,q){var M=a("../internals/an-object"),C=a("../internals/is-object"),_=a("../internals/new-promise-capability");_e.exports=function(w,I){return M(w),C(I)&&I.constructor===w?I:((0,(w=_.f(w)).resolve)(I),w.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(a,_e,q){var M=a("../internals/redefine");_e.exports=function(C,_,w){for(var I in _)M(C,I,_[I],w);return C}},{"../internals/redefine":110}],110:[function(D,_e,q){var M=D("../internals/global"),C=D("../internals/create-non-enumerable-property"),_=D("../internals/has"),w=D("../internals/set-global"),I=D("../internals/inspect-source"),d=(D=D("../internals/internal-state")).get,f=D.enforce,h=String(String).split("String");(_e.exports=function(p,g,v,N){var x=!!N&&!!N.unsafe,E=!!N&&!!N.enumerable;N=!!N&&!!N.noTargetGet,"function"==typeof v&&("string"!=typeof g||_(v,"name")||C(v,"name",g),f(v).source=h.join("string"==typeof g?g:"")),p===M?E?p[g]=v:w(g,v):(x?!N&&p[g]&&(E=!0):delete p[g],E?p[g]=v:C(p,g,v))})(Function.prototype,"toString",function(){return"function"==typeof this&&d(this).source||I(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(a,_e,q){var M=a("./classof-raw"),C=a("./regexp-exec");_e.exports=function(_,w){var I=_.exec;if("function"==typeof I){if("object"!=typeof(I=I.call(_,w)))throw TypeError("RegExp exec method returned something other than an Object or null");return I}if("RegExp"!==M(_))throw TypeError("RegExp#exec called on incompatible receiver");return C.call(_,w)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(w,_e,q){"use strict";var M,C,_=w("./regexp-flags"),I=(w=w("./regexp-sticky-helpers"),RegExp.prototype.exec),D=String.prototype.replace,d=I,f=(C=/b*/g,I.call(M=/a/,"a"),I.call(C,"a"),0!==M.lastIndex||0!==C.lastIndex),h=w.UNSUPPORTED_Y||w.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];_e.exports=d=f||p||h?function(g){var v,S,x,E,N=this,Z=h&&N.sticky,K=_.call(N),z=N.source,G=0,ie=g;return Z&&(-1===(K=K.replace("y","")).indexOf("g")&&(K+="g"),ie=String(g).slice(N.lastIndex),0<N.lastIndex&&(!N.multiline||N.multiline&&"\n"!==g[N.lastIndex-1])&&(z="(?: "+z+")",ie=" "+ie,G++),S=new RegExp("^(?:"+z+")",K)),p&&(S=new RegExp("^"+z+"$(?!\\s)",K)),f&&(v=N.lastIndex),x=I.call(Z?S:N,ie),Z?x?(x.input=x.input.slice(G),x[0]=x[0].slice(G),x.index=N.lastIndex,N.lastIndex+=x[0].length):N.lastIndex=0:f&&x&&(N.lastIndex=N.global?x.index+x[0].length:v),p&&x&&1<x.length&&D.call(x[0],S,function(){for(E=1;E<arguments.length-2;E++)void 0===arguments[E]&&(x[E]=void 0)}),x}:d},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(a,_e,q){"use strict";var M=a("../internals/an-object");_e.exports=function(){var C=M(this),_="";return C.global&&(_+="g"),C.ignoreCase&&(_+="i"),C.multiline&&(_+="m"),C.dotAll&&(_+="s"),C.unicode&&(_+="u"),C.sticky&&(_+="y"),_}},{"../internals/an-object":10}],114:[function(a,_e,q){"use strict";function M(C,_){return RegExp(C,_)}a=a("./fails"),q.UNSUPPORTED_Y=a(function(){var C=M("a","y");return C.lastIndex=2,null!=C.exec("abcd")}),q.BROKEN_CARET=a(function(){var C=M("^r","gy");return C.lastIndex=2,null!=C.exec("str")})},{"./fails":51}],115:[function(a,_e,q){_e.exports=function(M){if(null==M)throw TypeError("Can't call method on "+M);return M}},{}],116:[function(a,_e,q){_e.exports=Object.is||function(M,C){return M===C?0!==M||1/M==1/C:M!=M&&C!=C}},{}],117:[function(a,_e,q){var M=a("../internals/global"),C=a("../internals/create-non-enumerable-property");_e.exports=function(_,w){try{C(M,_,w)}catch{M[_]=w}return w}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(a,_e,q){"use strict";var M=a("../internals/get-built-in"),C=a("../internals/object-define-property"),_=a("../internals/well-known-symbol"),w=a("../internals/descriptors"),I=_("species");_e.exports=function(d){d=M(d),w&&d&&!d[I]&&(0,C.f)(d,I,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(a,_e,q){var M=a("../internals/object-define-property").f,C=a("../internals/has"),_=a("../internals/well-known-symbol")("toStringTag");_e.exports=function(w,I,D){w&&!C(w=D?w:w.prototype,_)&&M(w,_,{configurable:!0,value:I})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(a,_e,q){var M=a("../internals/shared"),C=a("../internals/uid"),_=M("keys");_e.exports=function(w){return _[w]||(_[w]=C(w))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(M,_e,q){var _=M("../internals/global"),C=(M=M("../internals/set-global"),"__core-js_shared__");_=_[C]||M(C,{}),_e.exports=_},{"../internals/global":60,"../internals/set-global":117}],122:[function(a,_e,q){var M=a("../internals/is-pure"),C=a("../internals/shared-store");(_e.exports=function(_,w){return C[_]||(C[_]=void 0!==w?w:{})})("versions",[]).push({version:"3.6.5",mode:M?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(a,_e,q){var M=a("../internals/an-object"),C=a("../internals/a-function"),_=a("../internals/well-known-symbol")("species");_e.exports=function(D,I){return void 0===(D=M(D).constructor)||null==(D=M(D)[_])?I:C(D)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(a,_e,q){var M=a("../internals/fails");_e.exports=function(C){return M(function(){var _=""[C]('"');return _!==_.toLowerCase()||3<_.split('"').length})}},{"../internals/fails":51}],125:[function(a,_e,q){function M(w){return function(f,h){f=String(_(f)),h=C(h);var d,p=f.length;return h<0||p<=h?w?"":void 0:(d=f.charCodeAt(h))<55296||56319<d||h+1===p||(p=f.charCodeAt(h+1))<56320||57343<p?w?f.charAt(h):d:w?f.slice(h,h+2):p-56320+(d-55296<<10)+65536}}var C=a("../internals/to-integer"),_=a("../internals/require-object-coercible");_e.exports={codeAt:M(!1),charAt:M(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(a,_e,q){a=a("../internals/engine-user-agent"),_e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a)},{"../internals/engine-user-agent":47}],127:[function(a,_e,q){function M(D){return function(p,S,v){var g=(p=String(w(p))).length;return v=void 0===v?" ":String(v),(S=C(S))<=g||""==v?p:((g=_.call(v,I((S-=g)/v.length))).length>S&&(g=g.slice(0,S)),D?p+g:g+p)}}var C=a("../internals/to-length"),_=a("../internals/string-repeat"),w=a("../internals/require-object-coercible"),I=Math.ceil;_e.exports={start:M(!1),end:M(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(a,_e,q){"use strict";function M(x){return x+22+75*(x<26)}function C(x){var E,N=[],Z=(x=function(ce){for(var Te=[],et=0,le=ce.length;et<le;){var V,me=ce.charCodeAt(et++);55296<=me&&me<=56319&&et<le?56320==(64512&(V=ce.charCodeAt(et++)))?Te.push(((1023&me)<<10)+(1023&V)+65536):(Te.push(me),et--):Te.push(me)}return Te}(x)).length,K=128,z=0,G=72;for(Y=0;Y<x.length;Y++)(E=x[Y])<128&&N.push(S(E));var ie=N.length,X=ie;for(ie&&N.push("-");X<Z;){for(var ee=_,Y=0;Y<x.length;Y++)K<=(E=x[Y])&&E<ee&&(ee=E);var ve=X+1;if(ee-K>v((_-z)/ve))throw RangeError(p);for(z+=(ee-K)*ve,K=ee,Y=0;Y<x.length;Y++){if((E=x[Y])<K&&++z>_)throw RangeError(p);if(E==K){for(var xe=z,ae=w;;ae+=w){var ge=ae<=G?1:G+I<=ae?I:ae-G;if(xe<ge)break;var ne=xe-ge,J=w-ge;N.push(S(M(ge+ne%J))),xe=v(ne/J)}N.push(S(M(xe))),G=function(ce,Te,et){var le=0;for(ce=et?v(ce/d):ce>>1,ce+=v(ce/Te);g*I>>1<ce;le+=w)ce=v(ce/g);return v(le+(g+1)*ce/(ce+D))}(z,ve,X==ie),z=0,++X}}++z,++K}return N.join("")}var _=2147483647,w=36,I=26,D=38,d=700,f=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",g=w-1,v=Math.floor,S=String.fromCharCode;_e.exports=function(x){for(var E,N=[],Z=x.toLowerCase().replace(h,".").split("."),K=0;K<Z.length;K++)N.push(f.test(E=Z[K])?"xn--"+C(E):E);return N.join(".")}},{}],129:[function(a,_e,q){"use strict";var M=a("../internals/to-integer"),C=a("../internals/require-object-coercible");_e.exports="".repeat||function(_){var w=String(C(this)),I="",D=M(_);if(D<0||D==1/0)throw RangeError("Wrong number of repetitions");for(;0<D;(D>>>=1)&&(w+=w))1&D&&(I+=w);return I}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(a,_e,q){var M=a("../internals/fails"),C=a("../internals/whitespaces");_e.exports=function(_){return M(function(){return!!C[_]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[_]()||C[_].name!==_})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(_,_e,q){function M(D){return function(d){return d=String(C(d)),1&D&&(d=d.replace(w,"")),2&D?d.replace(I,""):d}}var C=_("../internals/require-object-coercible"),w=(_="["+_("../internals/whitespaces")+"]",RegExp("^"+_+_+"*")),I=RegExp(_+_+"*$");_e.exports={start:M(1),end:M(2),trim:M(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(g,_e,q){function M(X){return function(){ie(X)}}function C(X){ie(X.data)}function _(X){I.postMessage(X+"",v.protocol+"//"+v.host)}var w,I=g("../internals/global"),D=g("../internals/fails"),d=g("../internals/classof-raw"),f=g("../internals/function-bind-context"),h=g("../internals/html"),p=g("../internals/document-create-element"),v=(g=g("../internals/engine-is-ios"),I.location),S=I.setImmediate,x=I.clearImmediate,E=I.process,N=I.MessageChannel,Z=I.Dispatch,K=0,z={},G="onreadystatechange",ie=function(X){var ee;z.hasOwnProperty(X)&&(ee=z[X],delete z[X],ee())};S&&x||(S=function(X){for(var ee=[],Y=1;Y<arguments.length;)ee.push(arguments[Y++]);return z[++K]=function(){("function"==typeof X?X:Function(X)).apply(void 0,ee)},w(K),K},x=function(X){delete z[X]},"process"==d(E)?w=function(X){E.nextTick(M(X))}:Z&&Z.now?w=function(X){Z.now(M(X))}:N&&!g?(g=(d=new N).port2,d.port1.onmessage=C,w=f(g.postMessage,g,1)):!I.addEventListener||"function"!=typeof postMessage||I.importScripts||D(_)||"file:"===v.protocol?w=G in p("script")?function(X){h.appendChild(p("script"))[G]=function(){h.removeChild(this),ie(X)}}:function(X){setTimeout(M(X),0)}:(w=_,I.addEventListener("message",C,!1))),_e.exports={set:S,clear:x}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(a,_e,q){var M=a("../internals/classof-raw");_e.exports=function(C){if("number"!=typeof C&&"Number"!=M(C))throw TypeError("Incorrect invocation");return+C}},{"../internals/classof-raw":28}],134:[function(a,_e,q){var M=a("../internals/to-integer"),C=Math.max,_=Math.min;_e.exports=function(w,I){return(w=M(w))<0?C(w+I,0):_(w,I)}},{"../internals/to-integer":137}],135:[function(a,_e,q){var M=a("../internals/to-integer"),C=a("../internals/to-length");_e.exports=function(w){if(void 0===w)return 0;w=M(w);var I=C(w);if(w!==I)throw RangeError("Wrong length or index");return I}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(a,_e,q){var M=a("../internals/indexed-object"),C=a("../internals/require-object-coercible");_e.exports=function(_){return M(C(_))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(a,_e,q){var M=Math.ceil,C=Math.floor;_e.exports=function(_){return isNaN(_=+_)?0:(0<_?C:M)(_)}},{}],138:[function(a,_e,q){var M=a("../internals/to-integer"),C=Math.min;_e.exports=function(_){return 0<_?C(M(_),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(a,_e,q){var M=a("../internals/require-object-coercible");_e.exports=function(C){return Object(M(C))}},{"../internals/require-object-coercible":115}],140:[function(a,_e,q){var M=a("../internals/to-positive-integer");_e.exports=function(C,_){if((C=M(C))%_)throw RangeError("Wrong offset");return C}},{"../internals/to-positive-integer":141}],141:[function(a,_e,q){var M=a("../internals/to-integer");_e.exports=function(C){if((C=M(C))<0)throw RangeError("The argument can't be less than 0");return C}},{"../internals/to-integer":137}],142:[function(a,_e,q){var M=a("../internals/is-object");_e.exports=function(C,_){if(!M(C))return C;var w,I;if(_&&"function"==typeof(w=C.toString)&&!M(I=w.call(C))||"function"==typeof(w=C.valueOf)&&!M(I=w.call(C))||!_&&"function"==typeof(w=C.toString)&&!M(I=w.call(C)))return I;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(a,_e,q){var M={};M[a("../internals/well-known-symbol")("toStringTag")]="z",_e.exports="[object z]"===String(M)},{"../internals/well-known-symbol":150}],144:[function(a,_e,q){"use strict";function M(St,zt){for(var fn=0,$n=zt.length,En=new(lt(St))($n);fn<$n;)En[fn]=zt[fn++];return En}function C(St,zt){V(St,zt,{get:function(){return et(this)[zt]}})}function _(St){return St instanceof dt||"ArrayBuffer"==(St=ie(St))||"SharedArrayBuffer"==St}function w(St,zt){return It(St)&&"symbol"!=typeof zt&&zt in St&&String(+zt)==String(zt)}function I(St,zt){return w(St,zt=z(zt,!0))?x(2,St[zt]):me(St,zt)}function D(St,zt,fn){return!(w(St,zt=z(zt,!0))&&X(fn)&&G(fn,"value"))||G(fn,"get")||G(fn,"set")||fn.configurable||G(fn,"writable")&&!fn.writable||G(fn,"enumerable")&&!fn.enumerable?V(St,zt,fn):(St[zt]=fn.value,St)}var d=a("../internals/export"),f=a("../internals/global"),h=a("../internals/descriptors"),p=a("../internals/typed-array-constructors-require-wrappers"),g=a("../internals/array-buffer-view-core"),v=a("../internals/array-buffer"),S=a("../internals/an-instance"),x=a("../internals/create-property-descriptor"),E=a("../internals/create-non-enumerable-property"),N=a("../internals/to-length"),Z=a("../internals/to-index"),K=a("../internals/to-offset"),z=a("../internals/to-primitive"),G=a("../internals/has"),ie=a("../internals/classof"),X=a("../internals/is-object"),ee=a("../internals/object-create"),Y=a("../internals/object-set-prototype-of"),ve=a("../internals/object-get-own-property-names").f,xe=a("../internals/typed-array-from"),ae=a("../internals/array-iteration").forEach,ge=a("../internals/set-species"),ne=a("../internals/object-define-property"),J=a("../internals/object-get-own-property-descriptor"),ce=a("../internals/internal-state"),Te=a("../internals/inherit-if-required"),et=ce.get,le=ce.set,V=ne.f,me=J.f,Oe=Math.round,Xe=f.RangeError,dt=v.ArrayBuffer,yt=v.DataView,Ut=g.NATIVE_ARRAY_BUFFER_VIEWS,ht=g.TYPED_ARRAY_TAG,Lt=g.TypedArray,kt=g.TypedArrayPrototype,lt=g.aTypedArrayConstructor,It=g.isTypedArray,bt="BYTES_PER_ELEMENT",Pt="Wrong length";h?(Ut||(J.f=I,ne.f=D,C(kt,"buffer"),C(kt,"byteOffset"),C(kt,"byteLength"),C(kt,"length")),d({target:"Object",stat:!0,forced:!Ut},{getOwnPropertyDescriptor:I,defineProperty:D}),_e.exports=function(hn,zt,fn){function $n(Tn,ct){V(Tn,ct,{get:function(){var ft=this,Qe=ct;return(ft=et(ft)).view[Mn](Qe*En+ft.byteOffset,!0)},set:function(ft){var Qe=this,xt=ct;Qe=et(Qe),fn&&(ft=(ft=Oe(ft))<0?0:255<ft?255:255&ft),Qe.view[pr](xt*En+Qe.byteOffset,ft,!0)},enumerable:!0})}var En=hn.match(/\d+$/)[0]/8,Kn=hn+(fn?"Clamped":"")+"Array",Mn="get"+hn,pr="set"+hn,Ln=f[Kn],nr=Ln,Xn=(hn=nr&&nr.prototype,{});Ut?p&&(nr=zt(function(Tn,ct,ft,Qe){return S(Tn,nr,Kn),Te(X(ct)?_(ct)?void 0!==Qe?new Ln(ct,K(ft,En),Qe):void 0!==ft?new Ln(ct,K(ft,En)):new Ln(ct):It(ct)?M(nr,ct):xe.call(nr,ct):new Ln(Z(ct)),Tn,nr)}),Y&&Y(nr,Lt),ae(ve(Ln),function(Tn){Tn in nr||E(nr,Tn,Ln[Tn])}),nr.prototype=hn):(nr=zt(function(Tn,ct,ft,Qe){S(Tn,nr,Kn);var xt,un,An=0,jn=0;if(X(ct)){if(!_(ct))return It(ct)?M(nr,ct):xe.call(nr,ct);var rn=ct;if(jn=K(ft,En),ft=ct.byteLength,void 0===Qe){if(ft%En||(xt=ft-jn)<0)throw Xe(Pt)}else if(ft<(xt=N(Qe)*En)+jn)throw Xe(Pt);un=xt/En}else un=Z(ct),rn=new dt(xt=un*En);for(le(Tn,{buffer:rn,byteOffset:jn,byteLength:xt,length:un,view:new yt(rn)});An<un;)$n(Tn,An++)}),Y&&Y(nr,Lt),hn=nr.prototype=ee(kt)),hn.constructor!==nr&&E(hn,"constructor",nr),ht&&E(hn,ht,Kn),Xn[Kn]=nr,d({global:!0,forced:nr!=Ln,sham:!Ut},Xn),bt in nr||E(nr,bt,En),bt in hn||E(hn,bt,En),ge(Kn)}):_e.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(w,_e,q){var M=w("../internals/global"),C=w("../internals/fails"),_=w("../internals/check-correctness-of-iteration"),I=(w=w("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,M.ArrayBuffer),D=M.Int8Array;_e.exports=!w||!C(function(){D(1)})||!C(function(){new D(-1)})||!_(function(d){new D,new D(null),new D(1.5),new D(d)},!0)||C(function(){return 1!==new D(new I(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(a,_e,q){var M=a("../internals/to-object"),C=a("../internals/to-length"),_=a("../internals/get-iterator-method"),w=a("../internals/is-array-iterator-method"),I=a("../internals/function-bind-context"),D=a("../internals/array-buffer-view-core").aTypedArrayConstructor;_e.exports=function(d){var f,h,p,g,v,S,x=M(d),E=arguments.length,N=1<E?arguments[1]:void 0,Z=void 0!==N,K=_(x);if(null!=K&&!w(K))for(S=(v=K.call(x)).next,x=[];!(g=S.call(v)).done;)x.push(g.value);for(Z&&2<E&&(N=I(N,arguments[2],2)),h=C(x.length),p=new(D(this))(h),f=0;f<h;f++)p[f]=Z?N(x[f],f):x[f];return p}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(a,_e,q){var M=0,C=Math.random();_e.exports=function(_){return"Symbol("+String(void 0===_?"":_)+")_"+(++M+C).toString(36)}},{}],148:[function(a,_e,q){a=a("../internals/native-symbol"),_e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(a,_e,q){a=a("../internals/well-known-symbol"),q.f=a},{"../internals/well-known-symbol":150}],150:[function(D,_e,q){var M=D("../internals/global"),C=D("../internals/shared"),_=D("../internals/has"),w=D("../internals/uid"),I=D("../internals/native-symbol"),d=(D=D("../internals/use-symbol-as-uid"),C("wks")),f=M.Symbol,h=D?f:f&&f.withoutSetter||w;_e.exports=function(p){return _(d,p)||(d[p]=I&&_(f,p)?f[p]:h("Symbol."+p)),d[p]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(a,_e,q){_e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],152:[function(_,_e,q){"use strict";var M=_("../internals/export"),C=_("../internals/global"),I=_("../internals/array-buffer"),w=(_=_("../internals/set-species"),"ArrayBuffer");M({global:!0,forced:C[w]!==(I=I[w])},{ArrayBuffer:I}),_(w)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(x,_e,q){"use strict";var M=x("../internals/export"),C=x("../internals/fails"),_=x("../internals/is-array"),w=x("../internals/is-object"),I=x("../internals/to-object"),D=x("../internals/to-length"),d=x("../internals/create-property"),f=x("../internals/array-species-create"),h=x("../internals/array-method-has-species-support"),S=x("../internals/well-known-symbol"),p=(x=x("../internals/engine-v8-version"),S("isConcatSpreadable")),g=9007199254740991,v="Maximum allowed index exceeded";S=51<=x||!C(function(){var E=[];return E[p]=!1,E.concat()[0]!==E}),x=h("concat"),M({target:"Array",proto:!0,forced:!S||!x},{concat:function(E){for(var N,Z,K,z,G,ie=I(this),X=f(ie,0),ee=0,Y=-1,ve=arguments.length;Y<ve;Y++)if(G=void 0,w(z=K=-1===Y?ie:arguments[Y])&&(void 0!==(G=z[p])?G:_(z))){if(Z=D(K.length),g<ee+Z)throw TypeError(v);for(N=0;N<Z;N++,ee++)N in K&&d(X,ee,K[N])}else{if(g<=ee)throw TypeError(v);d(X,ee++,K)}return X.length=ee,X}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(_,_e,q){var M=_("../internals/export"),C=_("../internals/array-copy-within");_=_("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{copyWithin:C}),_("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(w,_e,q){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").every,_=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),_=_("every"),w=w("every"),M({target:"Array",proto:!0,forced:!_||!w},{every:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(_,_e,q){var M=_("../internals/export"),C=_("../internals/array-fill");_=_("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{fill:C}),_("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(w,_e,q){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").filter,_=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),_=_("filter"),w=w("filter"),M({target:"Array",proto:!0,forced:!_||!w},{filter:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(D,_e,q){"use strict";var M=D("../internals/export"),C=D("../internals/array-iteration").findIndex,_=D("../internals/add-to-unscopables"),w=(D=D("../internals/array-method-uses-to-length"),"findIndex"),I=!0;D=D(w),w in[]&&Array(1)[w](function(){I=!1}),M({target:"Array",proto:!0,forced:I||!D},{findIndex:function(d){return C(this,d,1<arguments.length?arguments[1]:void 0)}}),_(w)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/flatten-into-array"),_=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/a-function"),D=a("../internals/array-species-create");M({target:"Array",proto:!0},{flatMap:function(d){var f,h=_(this),p=w(h.length);return I(d),(f=D(h,0)).length=C(f,h,h,p,0,1,d,1<arguments.length?arguments[1]:void 0),f}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/flatten-into-array"),_=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/to-integer"),D=a("../internals/array-species-create");M({target:"Array",proto:!0},{flat:function(){var d=arguments.length?arguments[0]:void 0,f=_(this),h=w(f.length),p=D(f,0);return p.length=C(p,f,f,h,0,void 0===d?1:I(d)),p}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(C,_e,q){"use strict";var M=C("../internals/export");C=C("../internals/array-for-each"),M({target:"Array",proto:!0,forced:[].forEach!=C},{forEach:C})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(a,_e,q){var M=a("../internals/export"),C=a("../internals/array-from");M({target:"Array",stat:!0,forced:!a("../internals/check-correctness-of-iteration")(function(_){Array.from(_)})},{from:C})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/array-includes").includes,_=a("../internals/add-to-unscopables");M({target:"Array",proto:!0,forced:!a("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(w){return C(this,w,1<arguments.length?arguments[1]:void 0)}}),_("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(D,_e,q){"use strict";var M=D("../internals/export"),C=D("../internals/array-includes").indexOf,I=D("../internals/array-method-is-strict"),_=(D=D("../internals/array-method-uses-to-length"),[].indexOf),w=!!_&&1/[1].indexOf(1,-0)<0;I=I("indexOf"),D=D("indexOf",{ACCESSORS:!0,1:0}),M({target:"Array",proto:!0,forced:w||!I||!D},{indexOf:function(d){return w?_.apply(this,arguments)||0:C(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(I,_e,q){"use strict";var M=I("../internals/to-indexed-object"),C=I("../internals/add-to-unscopables"),_=I("../internals/iterators"),w=I("../internals/internal-state"),D=(I=I("../internals/define-iterator"),"Array Iterator"),d=w.set,f=w.getterFor(D);_e.exports=I(Array,"Array",function(h,p){d(this,{type:D,target:M(h),index:0,kind:p})},function(){var h=f(this),p=h.target,g=h.kind,v=h.index++;return!p||v>=p.length?{value:h.target=void 0,done:!0}:"keys"==g?{value:v,done:!1}:"values"==g?{value:p[v],done:!1}:{value:[v,p[v]],done:!1}},"values"),_.Arguments=_.Array,C("keys"),C("values"),C("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(I,_e,q){"use strict";var M=I("../internals/export"),w=I("../internals/indexed-object"),C=I("../internals/to-indexed-object"),_=(I=I("../internals/array-method-is-strict"),[].join);w=w!=Object,I=I("join",","),M({target:"Array",proto:!0,forced:w||!I},{join:function(D){return _.call(C(this),void 0===D?",":D)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(C,_e,q){C("../internals/export")({target:"Array",proto:!0,forced:(C=C("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:C})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(w,_e,q){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").map,_=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),_=_("map"),w=w("map"),M({target:"Array",proto:!0,forced:!_||!w},{map:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(p,_e,q){"use strict";var M=p("../internals/export"),C=p("../internals/is-object"),_=p("../internals/is-array"),w=p("../internals/to-absolute-index"),I=p("../internals/to-length"),D=p("../internals/to-indexed-object"),d=p("../internals/create-property"),f=p("../internals/well-known-symbol"),h=p("../internals/array-method-has-species-support"),g=(p=p("../internals/array-method-uses-to-length"),h=h("slice"),p=p("slice",{ACCESSORS:!0,0:0,1:2}),f("species")),v=[].slice,S=Math.max;M({target:"Array",proto:!0,forced:!h||!p},{slice:function(x,E){var N,Z,K,z=D(this),G=I(z.length),ie=w(x,G),X=w(void 0===E?G:E,G);if(_(z)&&((N="function"==typeof(N=z.constructor)&&(N===Array||_(N.prototype))||C(N)&&null===(N=N[g])?void 0:N)===Array||void 0===N))return v.call(z,ie,X);for(Z=new(void 0===N?Array:N)(S(X-ie,0)),K=0;ie<X;ie++,K++)ie in z&&d(Z,K,z[ie]);return Z.length=K,Z}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(w,_e,q){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").some,_=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),_=_("some"),w=w("some"),M({target:"Array",proto:!0,forced:!_||!w},{some:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(h,_e,q){"use strict";var M=h("../internals/export"),C=h("../internals/to-absolute-index"),_=h("../internals/to-integer"),w=h("../internals/to-length"),I=h("../internals/to-object"),D=h("../internals/array-species-create"),d=h("../internals/create-property"),f=h("../internals/array-method-has-species-support"),p=(h=h("../internals/array-method-uses-to-length"),f=f("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),g=Math.min;M({target:"Array",proto:!0,forced:!f||!h},{splice:function(ee,S){var x,E,N,Z,K,z,G=I(this),ie=w(G.length),X=C(ee,ie);if(0===(ee=arguments.length)?x=E=0:E=1===ee?(x=0,ie-X):(x=ee-2,g(p(_(S),0),ie-X)),9007199254740991<ie+x-E)throw TypeError("Maximum allowed length exceeded");for(N=D(G,E),Z=0;Z<E;Z++)(K=X+Z)in G&&d(N,Z,G[K]);if(x<(N.length=E)){for(Z=X;Z<ie-E;Z++)z=Z+x,(K=Z+E)in G?G[z]=G[K]:delete G[z];for(Z=ie;ie-E+x<Z;Z--)delete G[Z-1]}else if(E<x)for(Z=ie-E;X<Z;Z--)z=Z+x-1,(K=Z+E-1)in G?G[z]=G[K]:delete G[z];for(Z=0;Z<x;Z++)G[Z+X]=arguments[Z+2];return G.length=ie-E+x,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(a,_e,q){a("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(a,_e,q){a("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(C,_e,q){var M=C("../internals/descriptors"),_=(C=C("../internals/object-define-property").f,Function.prototype),w=_.toString,I=/^\s*function ([^ (]*)/;!M||"name"in _||C(_,"name",{configurable:!0,get:function(){try{return w.call(this).match(I)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(C,_e,q){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),_e.exports=M("Map",function(_){return function(){return _(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(M,_e,q){M=M("../internals/export");var C=Math.hypot,_=Math.abs,w=Math.sqrt;M({target:"Math",stat:!0,forced:!!C&&C(1/0,NaN)!==1/0},{hypot:function(I,D){for(var d,f,h=0,p=0,g=arguments.length,v=0;p<g;)v<(d=_(arguments[p++]))?(h=h*(f=v/d)*f+1,v=d):h+=0<d?(f=d/v)*f:d;return v===1/0?1/0:v*w(h)}})},{"../internals/export":50}],177:[function(M,_e,q){M=M("../internals/export");var C=Math.log,_=Math.LN2;M({target:"Math",stat:!0},{log2:function(w){return C(w)/_}})},{"../internals/export":50}],178:[function(a,_e,q){a("../internals/export")({target:"Math",stat:!0},{sign:a("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(a,_e,q){"use strict";function M(Y){var ve,xe,ae,ge,ne,J,ce,Te=h(Y,!1);if("string"==typeof Te&&2<Te.length)if(43===(Y=(Te=E(Te)).charCodeAt(0))||45===Y){if(88===(ve=Te.charCodeAt(2))||120===ve)return NaN}else if(48===Y){switch(Te.charCodeAt(1)){case 66:case 98:xe=2,ae=49;break;case 79:case 111:xe=8,ae=55;break;default:return+Te}for(ne=(ge=Te.slice(2)).length,J=0;J<ne;J++)if((ce=ge.charCodeAt(J))<48||ae<ce)return NaN;return parseInt(ge,xe)}return+Te}var C=a("../internals/descriptors"),_=a("../internals/global"),w=a("../internals/is-forced"),I=a("../internals/redefine"),D=a("../internals/has"),d=a("../internals/classof-raw"),f=a("../internals/inherit-if-required"),h=a("../internals/to-primitive"),p=a("../internals/fails"),g=a("../internals/object-create"),v=a("../internals/object-get-own-property-names").f,S=a("../internals/object-get-own-property-descriptor").f,x=a("../internals/object-define-property").f,E=a("../internals/string-trim").trim,N="Number",Z=_[N],K=Z.prototype,z=d(g(K))==N;if(w(N,!Z(" 0o1")||!Z("0b1")||Z("+0x1"))){for(var G,ie=function(ve){ve=arguments.length<1?0:ve;var xe=this;return xe instanceof ie&&(z?p(function(){K.valueOf.call(xe)}):d(xe)!=N)?f(new Z(M(ve)),xe,ie):M(ve)},X=C?v(Z):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ee=0;X.length>ee;ee++)D(Z,G=X[ee])&&!D(ie,G)&&x(ie,G,S(Z,G));(ie.prototype=K).constructor=ie,I(_,N,ie)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(a,_e,q){a("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(a,_e,q){a("../internals/export")({target:"Number",stat:!0},{isFinite:a("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(D,_e,q){"use strict";function M(h,p,g){return 0===p?g:p%2==1?M(h,p-1,g*h):M(h*h,p/2,g)}var C=D("../internals/export"),_=D("../internals/to-integer"),w=D("../internals/this-number-value"),I=D("../internals/string-repeat"),d=(D=D("../internals/fails"),1..toFixed),f=Math.floor;C({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!D(function(){d.call({})})},{toFixed:function(N){function p(G,ie){for(var X=-1,ee=ie;++X<6;)Z[X]=(ee+=G*Z[X])%1e7,ee=f(ee/1e7)}function g(G){for(var ie=6,X=0;0<=--ie;)Z[ie]=f((X+=Z[ie])/G),X=X%G*1e7}function v(){for(var G,ie=6,X="";0<=--ie;)""===X&&0!==ie&&0===Z[ie]||(G=String(Z[ie]),X=""===X?G:X+I.call("0",7-G.length)+G);return X}var S,x,E=w(this),Z=(N=_(N),[0,0,0,0,0,0]),K="",z="0";if(N<0||20<N)throw RangeError("Incorrect fraction digits");if(E!=E)return"NaN";if(E<=-1e21||1e21<=E)return String(E);if(E<0&&(K="-",E=-E),1e-21<E)if(E=(S=function(G){for(var ie=0,X=G;4096<=X;)ie+=12,X/=4096;for(;2<=X;)ie+=1,X/=2;return ie}(E*M(2,69,1))-69)<0?E*M(2,-S,1):E/M(2,S,1),E*=4503599627370496,0<(S=52-S)){for(p(0,E),x=N;7<=x;)p(1e7,0),x-=7;for(p(M(10,x,1),0),x=S-1;23<=x;)g(1<<23),x-=23;g(1<<x),p(1,1),g(2),z=v()}else p(0,E),p(1<<-S,0),z=v()+I.call("0",N);return 0<N?K+((E=z.length)<=N?"0."+I.call("0",N-E)+z:z.slice(0,E-N)+"."+z.slice(E-N)):K+z}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(C,_e,q){var M=C("../internals/export");C=C("../internals/object-assign"),M({target:"Object",stat:!0,forced:Object.assign!==C},{assign:C})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(a,_e,q){var M=a("../internals/export"),C=a("../internals/object-to-array").entries;M({target:"Object",stat:!0},{entries:function(_){return C(_)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(a,_e,q){var M=a("../internals/export"),C=a("../internals/iterate"),_=a("../internals/create-property");M({target:"Object",stat:!0},{fromEntries:function(w){var I={};return C(w,function(D,d){_(I,D,d)},void 0,!0),I}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(w,_e,q){var M=w("../internals/export"),I=w("../internals/fails"),C=w("../internals/to-indexed-object"),_=w("../internals/object-get-own-property-descriptor").f;w=w("../internals/descriptors"),I=I(function(){_(1)}),M({target:"Object",stat:!0,forced:!w||I,sham:!w},{getOwnPropertyDescriptor:function(D,d){return _(C(D),d)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(_,_e,q){var M=_("../internals/export"),C=_("../internals/fails");_=_("../internals/object-get-own-property-names-external").f,M({target:"Object",stat:!0,forced:C(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:_})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(I,_e,q){var M=I("../internals/export"),C=I("../internals/fails"),_=I("../internals/to-object"),w=I("../internals/object-get-prototype-of");I=I("../internals/correct-prototype-getter"),M({target:"Object",stat:!0,forced:C(function(){w(1)}),sham:!I},{getPrototypeOf:function(D){return w(_(D))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(a,_e,q){var M=a("../internals/export"),C=a("../internals/to-object"),_=a("../internals/object-keys");M({target:"Object",stat:!0,forced:a("../internals/fails")(function(){_(1)})},{keys:function(w){return _(C(w))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(_,_e,q){var M=_("../internals/to-string-tag-support"),C=_("../internals/redefine");_=_("../internals/object-to-string"),M||C(Object.prototype,"toString",_,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(fn,_e,q){"use strict";var M,C,_,w,I=fn("../internals/export"),D=fn("../internals/is-pure"),d=fn("../internals/global"),f=fn("../internals/get-built-in"),h=fn("../internals/native-promise-constructor"),p=fn("../internals/redefine"),g=fn("../internals/redefine-all"),v=fn("../internals/set-to-string-tag"),S=fn("../internals/set-species"),x=fn("../internals/is-object"),E=fn("../internals/a-function"),N=fn("../internals/an-instance"),Z=fn("../internals/classof-raw"),K=fn("../internals/inspect-source"),z=fn("../internals/iterate"),G=fn("../internals/check-correctness-of-iteration"),ie=fn("../internals/species-constructor"),X=fn("../internals/task").set,ee=fn("../internals/microtask"),Y=fn("../internals/promise-resolve"),ve=fn("../internals/host-report-errors"),xe=fn("../internals/new-promise-capability"),ae=fn("../internals/perform"),ge=fn("../internals/internal-state"),ne=fn("../internals/is-forced"),$n=fn("../internals/well-known-symbol"),J=fn("../internals/engine-v8-version"),ce=$n("species"),Te="Promise",et=ge.get,le=ge.set,V=ge.getterFor(Te),me=h,Oe=d.TypeError,Xe=d.document,dt=d.process,yt=f("fetch"),Ut=xe.f,ht=Ut,Lt="process"==Z(dt),kt=!!(Xe&&Xe.createEvent&&d.dispatchEvent),lt="unhandledrejection",En=($n=(fn=ne(Te,function(){var Xn,Tn;return K(me)===String(me)&&(66===J||!Lt&&"function"!=typeof PromiseRejectionEvent)||!((!D||me.prototype.finally)&&(51<=J&&/native code/.test(me)||(Tn=function(ct){ct(function(){},function(){})},((Xn=me.resolve(1)).constructor={})[ce]=Tn,Xn.then(function(){})instanceof Tn)))}))||!G(function(Xn){me.all(Xn).catch(function(){})}),function(Xn){var Tn;return!(!x(Xn)||"function"!=typeof(Tn=Xn.then))&&Tn}),Kn=function(Xn,Tn,ct){var ft;Tn.notified||(Tn.notified=!0,ft=Tn.reactions,ee(function(){for(var Qe,xt,un=Tn.value,An=1==Tn.state,jn=0;ft.length>jn;){var rn,bn,Pn,Un=ft[jn++],pn=An?Un.ok:Un.fail,Xt=Un.resolve,yn=Un.reject,Kt=Un.domain;try{pn?(An||(2===Tn.rejection&&function(an,Yn){X.call(d,function(){Lt?dt.emit("rejectionHandled",an):Mn("rejectionhandled",an,Yn.value)})}(Xn,Tn),Tn.rejection=1),!0===pn?rn=un:(Kt&&Kt.enter(),rn=pn(un),Kt&&(Kt.exit(),Pn=!0)),rn===Un.promise?yn(Oe("Promise-chain cycle")):(bn=En(rn))?bn.call(rn,Xt,yn):Xt(rn)):yn(un)}catch(an){Kt&&!Pn&&Kt.exit(),yn(an)}}Tn.reactions=[],Tn.notified=!1,ct&&!Tn.rejection&&(Qe=Xn,xt=Tn,X.call(d,function(){var an=xt.value,Yn=pr(xt);if(Yn&&(Yn=ae(function(){Lt?dt.emit("unhandledRejection",an,Qe):Mn(lt,Qe,an)}),xt.rejection=Lt||pr(xt)?2:1,Yn.error))throw Yn.value}))}))},Mn=function(Xn,Tn,ct){var ft;kt?((ft=Xe.createEvent("Event")).promise=Tn,ft.reason=ct,ft.initEvent(Xn,!1,!0),d.dispatchEvent(ft)):ft={promise:Tn,reason:ct},(Tn=d["on"+Xn])?Tn(ft):Xn===lt&&ve("Unhandled promise rejection",ct)},pr=function(Xn){return 1!==Xn.rejection&&!Xn.parent},Ln=function(Xn,Tn,ct,ft){return function(Qe){Xn(Tn,ct,Qe,ft)}},nr=function(Xn,Tn,ct,ft){Tn.done||(Tn.done=!0,(Tn=ft||Tn).value=ct,Tn.state=2,Kn(Xn,Tn,!0))},hn=function(Xn,Tn,ct,ft){if(!Tn.done){Tn.done=!0,ft&&(Tn=ft);try{if(Xn===ct)throw Oe("Promise can't be resolved itself");var Qe=En(ct);Qe?ee(function(){var xt={done:!1};try{Qe.call(ct,Ln(hn,Xn,xt,Tn),Ln(nr,Xn,xt,Tn))}catch(un){nr(Xn,xt,un,Tn)}}):(Tn.value=ct,Tn.state=1,Kn(Xn,Tn,!1))}catch(xt){nr(Xn,{done:!1},xt,Tn)}}};fn&&(me=function(Xn){N(this,me,Te),E(Xn),M.call(this);var Tn=et(this);try{Xn(Ln(hn,this,Tn),Ln(nr,this,Tn))}catch(ct){nr(this,Tn,ct)}},(M=function(Xn){le(this,{type:Te,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(me.prototype,{then:function(Xn,Tn){var ct=V(this),ft=Ut(ie(this,me));return ft.ok="function"!=typeof Xn||Xn,ft.fail="function"==typeof Tn&&Tn,ft.domain=Lt?dt.domain:void 0,ct.parent=!0,ct.reactions.push(ft),0!=ct.state&&Kn(this,ct,!1),ft.promise},catch:function(Xn){return this.then(void 0,Xn)}}),C=function(){var Xn=new M,Tn=et(Xn);this.promise=Xn,this.resolve=Ln(hn,Xn,Tn),this.reject=Ln(nr,Xn,Tn)},xe.f=Ut=function(Xn){return Xn===me||Xn===_?new C:ht(Xn)},D||"function"!=typeof h||(w=h.prototype.then,p(h.prototype,"then",function(Xn,Tn){var ct=this;return new me(function(ft,Qe){w.call(ct,ft,Qe)}).then(Xn,Tn)},{unsafe:!0}),"function"==typeof yt&&I({global:!0,enumerable:!0,forced:!0},{fetch:function(Xn){return Y(me,yt.apply(d,arguments))}}))),I({global:!0,wrap:!0,forced:fn},{Promise:me}),v(me,Te,!1,!0),S(Te),_=f(Te),I({target:Te,stat:!0,forced:fn},{reject:function(Xn){var Tn=Ut(this);return Tn.reject.call(void 0,Xn),Tn.promise}}),I({target:Te,stat:!0,forced:D||fn},{resolve:function(Xn){return Y(D&&this===_?me:this,Xn)}}),I({target:Te,stat:!0,forced:$n},{all:function(Xn){var Tn=this,ct=Ut(Tn),ft=ct.resolve,Qe=ct.reject,xt=ae(function(){var un=E(Tn.resolve),An=[],jn=0,rn=1;z(Xn,function(bn){var Pn=jn++,Un=!1;An.push(void 0),rn++,un.call(Tn,bn).then(function(pn){Un||(Un=!0,An[Pn]=pn,--rn||ft(An))},Qe)}),--rn||ft(An)});return xt.error&&Qe(xt.value),ct.promise},race:function(Xn){var Tn=this,ct=Ut(Tn),ft=ct.reject,Qe=ae(function(){var xt=E(Tn.resolve);z(Xn,function(un){xt.call(Tn,un).then(ct.resolve,ft)})});return Qe.error&&ft(Qe.value),ct.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(d,_e,q){var M=d("../internals/export"),g=d("../internals/get-built-in"),C=d("../internals/a-function"),_=d("../internals/an-object"),w=d("../internals/is-object"),I=d("../internals/object-create"),D=d("../internals/function-bind"),f=(d=d("../internals/fails"),g("Reflect","construct")),h=d(function(){function v(){}return!(f(function(){},[],v)instanceof v)}),p=!d(function(){f(function(){})});M({target:"Reflect",stat:!0,forced:g=h||p,sham:g},{construct:function(v,S){C(v),_(S);var x=arguments.length<3?v:C(arguments[2]);if(p&&!h)return f(v,S,x);if(v==x){switch(S.length){case 0:return new v;case 1:return new v(S[0]);case 2:return new v(S[0],S[1]);case 3:return new v(S[0],S[1],S[2]);case 4:return new v(S[0],S[1],S[2],S[3])}var E=[null];return E.push.apply(E,S),new(D.apply(v,E))}return x=I(w(E=x.prototype)?E:Object.prototype),E=Function.apply.call(v,x,S),w(E)?E:x}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(a,_e,q){var M=a("../internals/export"),C=a("../internals/is-object"),_=a("../internals/an-object"),w=a("../internals/has"),I=a("../internals/object-get-own-property-descriptor"),D=a("../internals/object-get-prototype-of");M({target:"Reflect",stat:!0},{get:function d(f,h){var p,g=arguments.length<3?f:arguments[2];return _(f)===g?f[h]:(p=I.f(f,h))?w(p,"value")?p.value:void 0===p.get?void 0:p.get.call(g):C(p=D(f))?d(p,h,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(a,_e,q){var M=a("../internals/descriptors"),C=a("../internals/global"),_=a("../internals/is-forced"),w=a("../internals/inherit-if-required"),I=a("../internals/object-define-property").f,D=a("../internals/object-get-own-property-names").f,d=a("../internals/is-regexp"),f=a("../internals/regexp-flags"),h=a("../internals/regexp-sticky-helpers"),p=a("../internals/redefine"),g=a("../internals/fails"),v=a("../internals/internal-state").set,S=a("../internals/set-species"),x=a("../internals/well-known-symbol")("match"),E=C.RegExp,N=E.prototype,Z=/a/g,K=/a/g,z=new E(Z)!==Z,G=h.UNSUPPORTED_Y;if(M&&_("RegExp",!z||G||g(function(){return K[x]=!1,E(Z)!=Z||E(K)==K||"/a/i"!=E(Z,"i")}))){for(var ie=function(Y,ve){var xe,ae=this instanceof ie,ge=d(Y),ne=void 0===ve;return!ae&&ge&&Y.constructor===ie&&ne?Y:(z?ge&&!ne&&(Y=Y.source):Y instanceof ie&&(ne&&(ve=f.call(Y)),Y=Y.source),G&&(xe=!!ve&&-1<ve.indexOf("y"))&&(ve=ve.replace(/y/g,"")),ge=w(z?new E(Y,ve):E(Y,ve),ae?this:N,ie),G&&xe&&v(ge,{sticky:xe}),ge)},X=D(E),ee=0;X.length>ee;)!function(Y){Y in ie||I(ie,Y,{configurable:!0,get:function(){return E[Y]},set:function(ve){E[Y]=ve}})}(X[ee++]);(N.constructor=ie).prototype=N,p(C,"RegExp",ie)}S("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(C,_e,q){"use strict";var M=C("../internals/export");C=C("../internals/regexp-exec"),M({target:"RegExp",proto:!0,forced:/./.exec!==C},{exec:C})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(w,_e,q){"use strict";var M=w("../internals/redefine"),C=w("../internals/an-object"),d=w("../internals/fails"),_=w("../internals/regexp-flags"),I=(w="toString",RegExp.prototype),D=I[w];((d=d(function(){return"/a/b"!=D.call({source:"a",flags:"b"})}))||D.name!=w)&&M(RegExp.prototype,w,function(){var h=C(this),p=String(h.source),g=h.flags;return"/"+p+"/"+String(void 0===g&&h instanceof RegExp&&!("flags"in I)?_.call(h):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(C,_e,q){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),_e.exports=M("Set",function(_){return function(){return _(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(D,_e,q){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,_=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".endsWith),f=Math.min;h=h("endsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"endsWith"))&&!M.writable||h)},{endsWith:function(p){var g=String(I(this)),v=(w(p),1<arguments.length?arguments[1]:void 0),S=_(g.length);return v=void 0===v?S:f(_(v),S),S=String(p),d?d.call(g,S,v):g.slice(v-S.length,v)===S}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/not-a-regexp"),_=a("../internals/require-object-coercible");M({target:"String",proto:!0,forced:!a("../internals/correct-is-regexp-logic")("includes")},{includes:function(w){return!!~String(_(this)).indexOf(C(w),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(_,_e,q){"use strict";var M=_("../internals/string-multibyte").charAt,C=_("../internals/internal-state"),w=(_=_("../internals/define-iterator"),"String Iterator"),I=C.set,D=C.getterFor(w);_(String,"String",function(d){I(this,{type:w,string:String(d),index:0})},function(){var d=D(this),f=d.string,h=d.index;return h>=f.length?{value:void 0,done:!0}:(f=M(f,h),d.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(a,_e,q){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),_=a("../internals/to-length"),w=a("../internals/require-object-coercible"),I=a("../internals/advance-string-index"),D=a("../internals/regexp-exec-abstract");M("match",1,function(d,f,h){return[function(p){var g=w(this),v=null==p?void 0:p[d];return void 0!==v?v.call(p,g):new RegExp(p)[d](String(g))},function(p){var g=h(f,p,this);if(g.done)return g.value;var v=C(p),S=String(this);if(!v.global)return D(v,S);for(var x=v.unicode,E=[],N=v.lastIndex=0;null!==(Z=D(v,S));){var Z=String(Z[0]);""===(E[N]=Z)&&(v.lastIndex=I(S,_(v.lastIndex),x)),N++}return 0===N?null:E}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/string-pad").start;M({target:"String",proto:!0,forced:a("../internals/string-pad-webkit-bug")},{padStart:function(_){return C(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(a,_e,q){a("../internals/export")({target:"String",proto:!0},{repeat:a("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(a,_e,q){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),_=a("../internals/to-object"),w=a("../internals/to-length"),I=a("../internals/to-integer"),D=a("../internals/require-object-coercible"),d=a("../internals/advance-string-index"),f=a("../internals/regexp-exec-abstract"),h=Math.max,p=Math.min,g=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,S=/\$([$&'`]|\d\d?)/g;M("replace",2,function(x,E,N,Z){var K=Z.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,z=Z.REPLACE_KEEPS_$0,G=K?"$":"$0";return[function(ie,X){var ee=D(this),Y=null==ie?void 0:ie[x];return void 0!==Y?Y.call(ie,ee,X):E.call(String(ee),ie,X)},function(ie,X){if(!K&&z||"string"==typeof X&&-1===X.indexOf(G)){var ee=N(E,ie,this,X);if(ee.done)return ee.value}for(var Y,ve=C(ie),xe=String(this),ae="function"==typeof X,ge=(ae||(X=String(X)),ve.global),ne=(ge&&(Y=ve.unicode,ve.lastIndex=0),[]);null!==(le=f(ve,xe))&&(ne.push(le),ge);)""===String(le[0])&&(ve.lastIndex=d(xe,w(ve.lastIndex),Y));for(var J,ce="",Te=0,et=0;et<ne.length;et++){for(var le=ne[et],V=String(le[0]),me=h(p(I(le.index),xe.length),0),Oe=[],Xe=1;Xe<le.length;Xe++)Oe.push(void 0===(J=le[Xe])?J:String(J));var dt=le.groups,yt=ae?(yt=[V].concat(Oe,me,xe),void 0!==dt&&yt.push(dt),String(X.apply(void 0,yt))):function(Ut,ht,Lt,kt,lt,It){var bt=Lt+Ut.length,Pt=kt.length,St=S;return void 0!==lt&&(lt=_(lt),St=v),E.call(It,St,function(zt,fn){var $n;switch(fn.charAt(0)){case"$":return"$";case"&":return Ut;case"`":return ht.slice(0,Lt);case"'":return ht.slice(bt);case"<":$n=lt[fn.slice(1,-1)];break;default:var En,Kn=+fn;if(0==Kn)return zt;if(Pt<Kn)return 0!==(En=g(Kn/10))&&En<=Pt?void 0===kt[En-1]?fn.charAt(1):kt[En-1]+fn.charAt(1):zt;$n=kt[Kn-1]}return void 0===$n?"":$n})}(V,xe,me,Oe,dt,X);Te<=me&&(ce+=xe.slice(Te,me)+yt,Te=me+V.length)}return ce+xe.slice(Te)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(a,_e,q){"use strict";var M=a("../internals/fix-regexp-well-known-symbol-logic"),C=a("../internals/an-object"),_=a("../internals/require-object-coercible"),w=a("../internals/same-value"),I=a("../internals/regexp-exec-abstract");M("search",1,function(D,d,f){return[function(h){var p=_(this),g=null==h?void 0:h[D];return void 0!==g?g.call(h,p):new RegExp(h)[D](String(p))},function(h){var p,g=f(d,h,this);return g.done?g.value:(g=C(h),h=String(this),w(p=g.lastIndex,0)||(g.lastIndex=0),h=I(g,h),w(g.lastIndex,p)||(g.lastIndex=p),null===h?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(p,_e,q){"use strict";var M=p("../internals/fix-regexp-well-known-symbol-logic"),C=p("../internals/is-regexp"),_=p("../internals/an-object"),w=p("../internals/require-object-coercible"),I=p("../internals/species-constructor"),D=p("../internals/advance-string-index"),d=p("../internals/to-length"),f=p("../internals/regexp-exec-abstract"),h=p("../internals/regexp-exec"),g=(p=p("../internals/fails"),[].push),v=Math.min,S=4294967295,x=!p(function(){return!RegExp(S,"y")});M("split",2,function(E,N,Z){var K="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(z,G){var ie=String(w(this)),X=void 0===G?S:G>>>0;if(0==X)return[];if(void 0===z)return[ie];if(!C(z))return N.call(ie,z,X);for(var ee,Y,ve,xe=[],ae=(G=(z.ignoreCase?"i":"")+(z.multiline?"m":"")+(z.unicode?"u":"")+(z.sticky?"y":""),0),ge=new RegExp(z.source,G+"g");(ee=h.call(ge,ie))&&!(ae<(Y=ge.lastIndex)&&(xe.push(ie.slice(ae,ee.index)),1<ee.length&&ee.index<ie.length&&g.apply(xe,ee.slice(1)),ve=ee[0].length,ae=Y,xe.length>=X));)ge.lastIndex===ee.index&&ge.lastIndex++;return ae===ie.length?!ve&&ge.test("")||xe.push(""):xe.push(ie.slice(ae)),xe.length>X?xe.slice(0,X):xe}:"0".split(void 0,0).length?function(z,G){return void 0===z&&0===G?[]:N.call(this,z,G)}:N;return[function(z,G){var ie=w(this),X=null==z?void 0:z[E];return void 0!==X?X.call(z,ie,G):K.call(String(ie),z,G)},function(ee,G){if((ie=Z(K,ee,this,G,K!==N)).done)return ie.value;var ie=_(ee),X=String(this),Y=(ee=I(ie,RegExp),ie.unicode),xe=new ee(x?ie:"^(?:"+ie.source+")",(ie.ignoreCase?"i":"")+(ie.multiline?"m":"")+(ie.unicode?"u":"")+(x?"y":"g")),ae=void 0===G?S:G>>>0;if(0==ae)return[];if(0===X.length)return null===f(xe,X)?[X]:[];for(var ge=0,ne=0,J=[];ne<X.length;){xe.lastIndex=x?ne:0;var ce,Te=f(xe,x?X:X.slice(ne));if(null===Te||(ce=v(d(xe.lastIndex+(x?0:ne)),X.length))===ge)ne=D(X,ne,Y);else{if(J.push(X.slice(ge,ne)),J.length===ae)return J;for(var et=1;et<=Te.length-1;et++)if(J.push(Te[et]),J.length===ae)return J;ne=ge=ce}}return J.push(X.slice(ge)),J}]},!x)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(D,_e,q){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,_=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".startsWith),f=Math.min;h=h("startsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"startsWith"))&&!M.writable||h)},{startsWith:function(S){var g=String(I(this)),v=(w(S),_(f(1<arguments.length?arguments[1]:void 0,g.length)));return S=String(S),d?d.call(g,S,v):g.slice(v,v+S.length)===S}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/create-html");M({target:"String",proto:!0,forced:a("../internals/string-html-forced")("sub")},{sub:function(){return C(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(a,_e,q){"use strict";var M=a("../internals/export"),C=a("../internals/string-trim").trim;M({target:"String",proto:!0,forced:a("../internals/string-trim-forced")("trim")},{trim:function(){return C(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(v,_e,q){"use strict";var M,C,_,w,I,D=v("../internals/export"),d=v("../internals/descriptors"),f=v("../internals/global"),h=v("../internals/has"),p=v("../internals/is-object"),g=v("../internals/object-define-property").f,S=(v=v("../internals/copy-constructor-properties"),f.Symbol);!d||"function"!=typeof S||"description"in S.prototype&&void 0===S().description||(M={},v(C=function(){var x=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),E=this instanceof C?new S(x):void 0===x?S():S(x);return""===x&&(M[E]=!0),E},S),(f=C.prototype=S.prototype).constructor=C,_=f.toString,w="Symbol(test)"==String(S("test")),I=/^Symbol\((.*)\)[^)]+$/,g(f,"description",{configurable:!0,get:function(){var x=p(this)?this.valueOf():this,E=_.call(x);return h(M,x)?"":""===(x=w?E.slice(7,-1):E.replace(I,"$1"))?void 0:x}}),D({global:!0,forced:!0},{Symbol:C}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(a,_e,q){a("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ht,_e,q){"use strict";function M(Qe,xt){var un=$n[Qe]=ie(It[Ut]);return Lt(un,{type:yt,tag:Qe,description:xt}),h||(un.description=xt),un}function C(Qe,An){N(Qe);var un=K(An);return An=X(un).concat(ft(un)),Xe(An,function(jn){h&&!ct.call(un,jn)||Tn(Qe,jn,un[jn])}),Qe}function _(An,jn){var un;if(An=K(An),jn=z(jn,!0),An!==lt||!S($n,jn)||S(En,jn))return!(un=Pt(An,jn))||!S($n,jn)||S(An,dt)&&An[dt][jn]||(un.enumerable=!0),un}function w(xt){xt=zt(K(xt));var un=[];return Xe(xt,function(An){S($n,An)||S(Te,An)||un.push(An)}),un}var I=ht("../internals/export"),D=ht("../internals/global"),d=ht("../internals/get-built-in"),f=ht("../internals/is-pure"),h=ht("../internals/descriptors"),p=ht("../internals/native-symbol"),g=ht("../internals/use-symbol-as-uid"),v=ht("../internals/fails"),S=ht("../internals/has"),x=ht("../internals/is-array"),E=ht("../internals/is-object"),N=ht("../internals/an-object"),Z=ht("../internals/to-object"),K=ht("../internals/to-indexed-object"),z=ht("../internals/to-primitive"),G=ht("../internals/create-property-descriptor"),ie=ht("../internals/object-create"),X=ht("../internals/object-keys"),ee=ht("../internals/object-get-own-property-names"),Y=ht("../internals/object-get-own-property-names-external"),ve=ht("../internals/object-get-own-property-symbols"),xe=ht("../internals/object-get-own-property-descriptor"),ae=ht("../internals/object-define-property"),ge=ht("../internals/object-property-is-enumerable"),ne=ht("../internals/create-non-enumerable-property"),J=ht("../internals/redefine"),ce=ht("../internals/shared"),pr=ht("../internals/shared-key"),Te=ht("../internals/hidden-keys"),et=ht("../internals/uid"),le=ht("../internals/well-known-symbol"),V=ht("../internals/well-known-symbol-wrapped"),me=ht("../internals/define-well-known-symbol"),Oe=ht("../internals/set-to-string-tag"),Ln=ht("../internals/internal-state"),Xe=ht("../internals/array-iteration").forEach,dt=pr("hidden"),yt="Symbol",Ut="prototype",Lt=(ht=le("toPrimitive"),Ln.set),kt=Ln.getterFor(yt),lt=Object[Ut],It=D.Symbol,bt=d("JSON","stringify"),Pt=xe.f,St=ae.f,zt=Y.f,fn=ge.f,$n=ce("symbols"),En=ce("op-symbols"),Kn=ce("string-to-symbol-registry"),Mn=ce("symbol-to-string-registry"),nr=(pr=ce("wks"),!(Ln=D.QObject)||!Ln[Ut]||!Ln[Ut].findChild),hn=h&&v(function(){return 7!=ie(St({},"a",{get:function(){return St(this,"a",{value:7}).a}})).a})?function(Qe,xt,un){var An=Pt(lt,xt);An&&delete lt[xt],St(Qe,xt,un),An&&Qe!==lt&&St(lt,xt,An)}:St,Xn=g?function(Qe){return"symbol"==typeof Qe}:function(Qe){return Object(Qe)instanceof It},Tn=function(Qe,xt,un){return Qe===lt&&Tn(En,xt,un),N(Qe),xt=z(xt,!0),N(un),(S($n,xt)?(un.enumerable?(S(Qe,dt)&&Qe[dt][xt]&&(Qe[dt][xt]=!1),un=ie(un,{enumerable:G(0,!1)})):(S(Qe,dt)||St(Qe,dt,G(1,{})),Qe[dt][xt]=!0),hn):St)(Qe,xt,un)},ct=function(xt){xt=z(xt,!0);var un=fn.call(this,xt);return!(this===lt&&S($n,xt)&&!S(En,xt))&&(!(un||!S(this,xt)||!S($n,xt)||S(this,dt)&&this[dt][xt])||un)},ft=function(un){var xt=un===lt,An=(un=zt(xt?En:K(un)),[]);return Xe(un,function(jn){!S($n,jn)||xt&&!S(lt,jn)||An.push($n[jn])}),An};p||(J((It=function(){if(this instanceof It)throw TypeError("Symbol is not a constructor");var Qe=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,xt=et(Qe),un=function(An){this===lt&&un.call(En,An),S(this,dt)&&S(this[dt],xt)&&(this[dt][xt]=!1),hn(this,xt,G(1,An))};return h&&nr&&hn(lt,xt,{configurable:!0,set:un}),M(xt,Qe)})[Ut],"toString",function(){return kt(this).tag}),J(It,"withoutSetter",function(Qe){return M(et(Qe),Qe)}),ge.f=ct,ae.f=Tn,xe.f=_,ee.f=Y.f=w,ve.f=ft,V.f=function(Qe){return M(le(Qe),Qe)},h&&(St(It[Ut],"description",{configurable:!0,get:function(){return kt(this).description}}),f||J(lt,"propertyIsEnumerable",ct,{unsafe:!0}))),I({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:It}),Xe(X(pr),function(Qe){me(Qe)}),I({target:yt,stat:!0,forced:!p},{for:function(un){var xt;return un=String(un),S(Kn,un)?Kn[un]:(xt=It(un),Kn[un]=xt,Mn[xt]=un,xt)},keyFor:function(Qe){if(!Xn(Qe))throw TypeError(Qe+" is not a symbol");if(S(Mn,Qe))return Mn[Qe]},useSetter:function(){nr=!0},useSimple:function(){nr=!1}}),I({target:"Object",stat:!0,forced:!p,sham:!h},{create:function(Qe,xt){return void 0===xt?ie(Qe):C(ie(Qe),xt)},defineProperty:Tn,defineProperties:C,getOwnPropertyDescriptor:_}),I({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:w,getOwnPropertySymbols:ft}),I({target:"Object",stat:!0,forced:v(function(){ve.f(1)})},{getOwnPropertySymbols:function(Qe){return ve.f(Z(Qe))}}),bt&&I({target:"JSON",stat:!0,forced:!p||v(function(){var Qe=It();return"[null]"!=bt([Qe])||"{}"!=bt({a:Qe})||"{}"!=bt(Object(Qe))})},{stringify:function(Qe,xt,un){for(var An,jn=[Qe],rn=1;rn<arguments.length;)jn.push(arguments[rn++]);if((E(An=xt)||void 0!==Qe)&&!Xn(Qe))return x(xt)||(xt=function(bn,Pn){if("function"==typeof An&&(Pn=An.call(this,bn,Pn)),!Xn(Pn))return Pn}),jn[1]=xt,bt.apply(null,jn)}}),It[Ut][ht]||ne(It[Ut],ht,It[Ut].valueOf),Oe(It,yt),Te[dt]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-copy-within"),_=M.aTypedArray;(0,M.exportTypedArrayMethod)("copyWithin",function(w,I){return C.call(_(this),w,I,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").every,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("every",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-fill"),_=M.aTypedArray;(0,M.exportTypedArrayMethod)("fill",function(w){return C.apply(_(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").filter,_=a("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("filter",function(D){for(var d=C(w(this),D,1<arguments.length?arguments[1]:void 0),f=(D=_(this,this.constructor),0),h=d.length,p=new(I(D))(h);f<h;)p[f]=d[f++];return p})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").findIndex,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("findIndex",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").find,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("find",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(a,_e,q){a("../internals/typed-array-constructor")("Float32",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],220:[function(a,_e,q){a("../internals/typed-array-constructor")("Float64",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],221:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").forEach,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("forEach",function(w){C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-includes").includes,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("includes",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-includes").indexOf,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("indexOf",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(a,_e,q){a("../internals/typed-array-constructor")("Int16",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],225:[function(a,_e,q){a("../internals/typed-array-constructor")("Int32",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],226:[function(C,_e,q){"use strict";function M(){return _.call(D(this))}var h=C("../internals/global"),f=C("../internals/array-buffer-view-core"),d=C("../modules/es.array.iterator"),_=(C=C("../internals/well-known-symbol")("iterator"),d.values),w=d.keys,I=d.entries,D=f.aTypedArray;d=f.exportTypedArrayMethod,h=!!(f=(h=h.Uint8Array)&&h.prototype[C])&&("values"==f.name||null==f.name),d("entries",function(){return I.call(D(this))}),d("keys",function(){return w.call(D(this))}),d("values",M,!h),d(C,M,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(C,_e,q){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,_=[].join;(C=C.exportTypedArrayMethod)("join",function(w){return _.apply(M(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-last-index-of"),_=M.aTypedArray;(0,M.exportTypedArrayMethod)("lastIndexOf",function(w){return C.apply(_(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").map,_=a("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("map",function(D){return C(w(this),D,1<arguments.length?arguments[1]:void 0,function(d,f){return new(I(_(d,d.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-reduce").right,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduceRight",function(w){return C(_(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-reduce").left,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduce",function(w){return C(_(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(C,_e,q){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,_=(C=C.exportTypedArrayMethod,Math.floor);C("reverse",function(){for(var w,I=M(this).length,D=_(I/2),d=0;d<D;)w=this[d],this[d++]=this[--I],this[I]=w;return this})},{"../internals/array-buffer-view-core":12}],233:[function(I,_e,q){"use strict";var M=I("../internals/array-buffer-view-core"),C=I("../internals/to-length"),_=I("../internals/to-offset"),w=I("../internals/to-object"),D=(I=I("../internals/fails"),M.aTypedArray);(0,M.exportTypedArrayMethod)("set",function(d){D(this);var f=_(1<arguments.length?arguments[1]:void 0,1),h=this.length,p=w(d),g=C(p.length),v=0;if(h<g+f)throw RangeError("Wrong length");for(;v<g;)this[f+v]=p[v++]},I(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(C,_e,q){"use strict";var I=C("../internals/array-buffer-view-core"),M=C("../internals/species-constructor"),_=(C=C("../internals/fails"),I.aTypedArray),w=I.aTypedArrayConstructor,D=[].slice;(I=I.exportTypedArrayMethod)("slice",function(d,f){for(var h=D.call(_(this),d,f),p=(d=M(this,this.constructor),0),g=h.length,v=new(w(d))(g);p<g;)v[p]=h[p++];return v},C(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/array-iteration").some,_=M.aTypedArray;(0,M.exportTypedArrayMethod)("some",function(w){return C(_(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(C,_e,q){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,_=[].sort;(C=C.exportTypedArrayMethod)("sort",function(w){return _.call(M(this),w)})},{"../internals/array-buffer-view-core":12}],237:[function(a,_e,q){"use strict";var M=a("../internals/array-buffer-view-core"),C=a("../internals/to-length"),_=a("../internals/to-absolute-index"),w=a("../internals/species-constructor"),I=M.aTypedArray;(0,M.exportTypedArrayMethod)("subarray",function(p,d){var f=I(this),h=f.length;return p=_(p,h),new(w(f,f.constructor))(f.buffer,f.byteOffset+p*f.BYTES_PER_ELEMENT,C((void 0===d?h:_(d,h))-p))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(C,_e,q){"use strict";var I=C("../internals/global"),M=C("../internals/array-buffer-view-core"),_=(C=C("../internals/fails"),I.Int8Array),w=M.aTypedArray,D=(I=M.exportTypedArrayMethod,[].toLocaleString),d=[].slice,f=!!_&&C(function(){D.call(new _(1))});I("toLocaleString",function(){return D.apply(f?d.call(w(this)):w(this),arguments)},C(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!C(function(){_.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(C,_e,q){"use strict";var M=C("../internals/array-buffer-view-core").exportTypedArrayMethod,I=C("../internals/fails"),_=(C=(C=C("../internals/global").Uint8Array)&&C.prototype||{},[].toString),w=[].join;I(function(){_.call({})})&&(_=function(){return w.call(this)}),M("toString",_,I=C.toString!=_)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(a,_e,q){a("../internals/typed-array-constructor")("Uint16",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],241:[function(a,_e,q){a("../internals/typed-array-constructor")("Uint32",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],242:[function(a,_e,q){a("../internals/typed-array-constructor")("Uint8",function(M){return function(C,_,w){return M(this,C,_,w)}})},{"../internals/typed-array-constructor":144}],243:[function(a,_e,q){a("../internals/typed-array-constructor")("Uint8",function(M){return function(C,_,w){return M(this,C,_,w)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(S,N,q){"use strict";function M(Z){return function(){return Z(this,arguments.length?arguments[0]:void 0)}}var C,_,w,I,D,x=S("../internals/global"),d=S("../internals/redefine-all"),f=S("../internals/internal-metadata"),h=S("../internals/collection"),p=S("../internals/collection-weak"),g=S("../internals/is-object"),v=S("../internals/internal-state").enforce,E=(S=S("../internals/native-weak-map"),x=!x.ActiveXObject&&"ActiveXObject"in x,Object.isExtensible);N=N.exports=h("WeakMap",M,p),S&&x&&(C=p.getConstructor(M,"WeakMap",!0),f.REQUIRED=!0,_=(h=N.prototype).delete,w=h.has,I=h.get,D=h.set,d(h,{delete:function(Z){var K;return g(Z)&&!E(Z)?((K=v(this)).frozen||(K.frozen=new C),_.call(this,Z)||K.frozen.delete(Z)):_.call(this,Z)},has:function(Z){var K;return g(Z)&&!E(Z)?((K=v(this)).frozen||(K.frozen=new C),w.call(this,Z)||K.frozen.has(Z)):w.call(this,Z)},get:function(Z){var K;return!g(Z)||E(Z)||((K=v(this)).frozen||(K.frozen=new C),w.call(this,Z))?I.call(this,Z):K.frozen.get(Z)},set:function(Z,K){var z;return!g(Z)||E(Z)||((z=v(this)).frozen||(z.frozen=new C),w.call(this,Z))?D.call(this,Z,K):z.frozen.set(Z,K),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(a,_e,q){var M,C=a("../internals/global"),_=a("../internals/dom-iterables"),w=a("../internals/array-for-each"),I=a("../internals/create-non-enumerable-property");for(M in _){var D;if((D=(D=C[M])&&D.prototype)&&D.forEach!==w)try{I(D,"forEach",w)}catch{D.forEach=w}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(D,_e,q){var M,C=D("../internals/global"),_=D("../internals/dom-iterables"),w=D("../modules/es.array.iterator"),I=D("../internals/create-non-enumerable-property"),d=(D=D("../internals/well-known-symbol"))("iterator"),f=D("toStringTag"),h=w.values;for(M in _){var p=C[M],g=p&&p.prototype;if(g){if(g[d]!==h)try{I(g,d,h)}catch{g[d]=h}if(g[f]||I(g,f,M),_[M])for(var v in w)if(g[v]!==w[v])try{I(g,v,w[v])}catch{g[v]=w[v]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(dt,_e,q){"use strict";function M(yt){try{return decodeURIComponent(yt)}catch{return yt}}function C(yt){return me[yt]}function _(yt){return encodeURIComponent(yt).replace(V,C)}function w(yt){this.entries.length=0,Oe(this.entries,yt)}function I(yt,Ut){if(yt<Ut)throw TypeError("Not enough arguments")}function D(){x(this,D,ae);var yt,Ut,ht,Lt,kt,lt,It,bt,Pt=0<arguments.length?arguments[0]:void 0,St=[];if(ne(this,{type:ae,entries:St,updateURL:function(){},updateSearchParams:w}),void 0!==Pt)if(z(Pt))if("function"==typeof(yt=ee(Pt)))for(ht=(Ut=yt.call(Pt)).next;!(Lt=ht.call(Ut)).done;){if((lt=(kt=(Lt=X(K(Lt.value))).next).call(Lt)).done||(It=kt.call(Lt)).done||!kt.call(Lt).done)throw TypeError("Expected sequence with length 2");St.push({key:lt.value+"",value:It.value+""})}else for(bt in Pt)E(Pt,bt)&&St.push({key:bt,value:Pt[bt]+""});else Oe(St,"string"==typeof Pt?"?"===Pt.charAt(0)?Pt.slice(1):Pt:Pt+"")}dt("../modules/es.array.iterator");var d=dt("../internals/export"),xe=dt("../internals/get-built-in"),f=dt("../internals/native-url"),h=dt("../internals/redefine"),p=dt("../internals/redefine-all"),g=dt("../internals/set-to-string-tag"),v=dt("../internals/create-iterator-constructor"),S=dt("../internals/internal-state"),x=dt("../internals/an-instance"),E=dt("../internals/has"),N=dt("../internals/function-bind-context"),Z=dt("../internals/classof"),K=dt("../internals/an-object"),z=dt("../internals/is-object"),G=dt("../internals/object-create"),ie=dt("../internals/create-property-descriptor"),X=dt("../internals/get-iterator"),ee=dt("../internals/get-iterator-method"),Y=(dt=dt("../internals/well-known-symbol"),xe("fetch")),ve=xe("Headers"),ae=(xe=dt("iterator"),"URLSearchParams"),ge=ae+"Iterator",ne=S.set,J=S.getterFor(ae),ce=S.getterFor(ge),Te=/\+/g,et=Array(4),le=function(yt){var Ut,ht=yt.replace(Te," "),Lt=4;try{return decodeURIComponent(ht)}catch{for(;Lt;)ht=ht.replace((Ut=Lt--,et[Ut-1]||(et[Ut-1]=RegExp("((?:%[\\da-f]{2}){"+Ut+"})","gi"))),M);return ht}},V=/[!'()~]|%20/g,me={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Oe=function(yt,Ut){if(Ut)for(var ht,Lt=Ut.split("&"),kt=0;kt<Lt.length;)(ht=Lt[kt++]).length&&(ht=ht.split("="),yt.push({key:le(ht.shift()),value:le(ht.join("="))}))},Xe=v(function(yt,Ut){ne(this,{type:ge,iterator:X(J(yt).entries),kind:Ut})},"Iterator",function(){var Ut,yt=(Ut=ce(this)).kind,ht=(Ut=Ut.iterator.next()).value;return Ut.done||(Ut.value="keys"===yt?ht.key:"values"===yt?ht.value:[ht.key,ht.value]),Ut});p(dt=D.prototype,{append:function(yt,Ut){I(arguments.length,2);var ht=J(this);ht.entries.push({key:yt+"",value:Ut+""}),ht.updateURL()},delete:function(yt){I(arguments.length,1);for(var Ut=J(this),ht=Ut.entries,Lt=yt+"",kt=0;kt<ht.length;)ht[kt].key===Lt?ht.splice(kt,1):kt++;Ut.updateURL()},get:function(yt){I(arguments.length,1);for(var Ut=J(this).entries,ht=yt+"",Lt=0;Lt<Ut.length;Lt++)if(Ut[Lt].key===ht)return Ut[Lt].value;return null},getAll:function(yt){I(arguments.length,1);for(var Ut=J(this).entries,ht=yt+"",Lt=[],kt=0;kt<Ut.length;kt++)Ut[kt].key===ht&&Lt.push(Ut[kt].value);return Lt},has:function(yt){I(arguments.length,1);for(var Ut=J(this).entries,ht=yt+"",Lt=0;Lt<Ut.length;)if(Ut[Lt++].key===ht)return!0;return!1},set:function(yt,Ut){I(arguments.length,1);for(var ht,Lt=J(this),kt=Lt.entries,lt=!1,It=yt+"",bt=Ut+"",Pt=0;Pt<kt.length;Pt++)(ht=kt[Pt]).key===It&&(lt?kt.splice(Pt--,1):(lt=!0,ht.value=bt));lt||kt.push({key:It,value:bt}),Lt.updateURL()},sort:function(){for(var yt,Ut,ht=J(this),Lt=ht.entries,kt=Lt.slice(),lt=Lt.length=0;lt<kt.length;lt++){for(yt=kt[lt],Ut=0;Ut<lt;Ut++)if(Lt[Ut].key>yt.key){Lt.splice(Ut,0,yt);break}Ut===lt&&Lt.push(yt)}ht.updateURL()},forEach:function(yt){for(var Ut,ht=J(this).entries,Lt=N(yt,1<arguments.length?arguments[1]:void 0,3),kt=0;kt<ht.length;)Lt((Ut=ht[kt++]).value,Ut.key,this)},keys:function(){return new Xe(this,"keys")},values:function(){return new Xe(this,"values")},entries:function(){return new Xe(this,"entries")}},{enumerable:!0}),h(dt,xe,dt.entries),h(dt,"toString",function(){for(var yt,Ut=J(this).entries,ht=[],Lt=0;Lt<Ut.length;)yt=Ut[Lt++],ht.push(_(yt.key)+"="+_(yt.value));return ht.join("&")},{enumerable:!0}),g(D,ae),d({global:!0,forced:!f},{URLSearchParams:D}),f||"function"!=typeof Y||"function"!=typeof ve||d({global:!0,enumerable:!0,forced:!0},{fetch:function(kt){var Ut,ht,Lt;return kt=[kt],1<arguments.length&&(z(Ut=arguments[1])&&Z(ht=Ut.body)===ae&&((Lt=Ut.headers?new ve(Ut.headers):new ve).has("content-type")||Lt.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Ut=G(Ut,{body:ie(0,String(ht)),headers:ie(0,Lt)})),kt.push(Ut)),Y.apply(this,kt)}}),_e.exports={URLSearchParams:D,getState:J}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(X,_e,q){"use strict";function M(L){var se,H,de,Ke;if("number"==typeof L){for(se=[],H=0;H<4;H++)se.unshift(L%256),L=ge(L/256);return se.join(".")}if("object"!=typeof L)return L;for(se="",de=It(L),H=0;H<8;H++)Ke&&0===L[H]||(Ke=Ke&&!1,de===H?(se+=H?":":"::",Ke=!0):(se+=L[H].toString(16),H<7&&(se+=":")));return"["+se+"]"}function C(L){return!L.host||L.cannotBeABaseURL||"file"==L.scheme}function _(L,se,H,de){var Ke,Ve,vt,Ft=H||Xn,_n=0,He="",$e=!1,pt=!1,ot=!1;for(H||(L.scheme="",L.username="",L.password="",L.host=null,L.port=null,L.path=[],L.query=null,L.fragment=null,L.cannotBeABaseURL=!1,se=se.replace(Lt,"")),se=se.replace(kt,""),Ke=Z(se);_n<=Ke.length;){switch(Ve=Ke[_n],Ft){case Xn:if(!Ve||!le.test(Ve)){if(H)return ce;Ft=ct;continue}He+=Ve.toLowerCase(),Ft=Tn;break;case Tn:if(Ve&&(V.test(Ve)||"+"==Ve||"-"==Ve||"."==Ve))He+=Ve.toLowerCase();else{if(":"!=Ve){if(H)return ce;He="",Ft=ct,_n=0;continue}if(H&&(En(L)!=E($n,He)||"file"==He&&(Kn(L)||null!==L.port)||"file"==L.scheme&&!L.host))return;if(L.scheme=He,H)return void(En(L)&&$n[L.scheme]==L.port&&(L.port=null));He="","file"==L.scheme?Ft=pn:En(L)&&de&&de.scheme==L.scheme?Ft=ft:En(L)?Ft=An:"/"==Ke[_n+1]?(Ft=Qe,_n++):(L.cannotBeABaseURL=!0,L.path.push(""),Ft=Yn)}break;case ct:if(!de||de.cannotBeABaseURL&&"#"!=Ve)return ce;if(de.cannotBeABaseURL&&"#"==Ve){L.scheme=de.scheme,L.path=de.path.slice(),L.query=de.query,L.fragment="",L.cannotBeABaseURL=!0,Ft=nn;break}Ft="file"==de.scheme?pn:xt;continue;case ft:if("/"!=Ve||"/"!=Ke[_n+1]){Ft=xt;continue}Ft=jn,_n++;break;case Qe:if("/"==Ve){Ft=rn;break}Ft=an;continue;case xt:if(L.scheme=de.scheme,Ve==D)L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query=de.query;else if("/"==Ve||"\\"==Ve&&En(L))Ft=un;else if("?"==Ve)L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query="",Ft=Bt;else{if("#"!=Ve){L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.path.pop(),Ft=an;continue}L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,L.path=de.path.slice(),L.query=de.query,L.fragment="",Ft=nn}break;case un:if(!En(L)||"/"!=Ve&&"\\"!=Ve){if("/"!=Ve){L.username=de.username,L.password=de.password,L.host=de.host,L.port=de.port,Ft=an;continue}Ft=rn}else Ft=jn;break;case An:if(Ft=jn,"/"!=Ve||"/"!=He.charAt(_n+1))continue;_n++;break;case jn:if("/"==Ve||"\\"==Ve)break;Ft=rn;continue;case rn:if("@"==Ve){$e&&(He="%40"+He),$e=!0;for(var Dt=Z(He),vn=0;vn<Dt.length;vn++){var Hn=Dt[vn];":"!=Hn||ot?(Hn=fn(Hn,zt),ot?L.password+=Hn:L.username+=Hn):ot=!0}He=""}else if(Ve==D||"/"==Ve||"?"==Ve||"#"==Ve||"\\"==Ve&&En(L)){if($e&&""==He)return J;_n-=Z(He).length+1,He="",Ft=bn}else He+=Ve;break;case bn:case Pn:if(H&&"file"==L.scheme){Ft=yn;continue}if(":"!=Ve||pt){if(Ve==D||"/"==Ve||"?"==Ve||"#"==Ve||"\\"==Ve&&En(L)){if(En(L)&&""==He)return Te;if(H&&""==He&&(Kn(L)||null!==L.port))return;if(vt=lt(L,He))return vt;if(He="",Ft=Kt,H)return;continue}"["==Ve?pt=!0:"]"==Ve&&(pt=!1),He+=Ve}else{if(""==He)return Te;if(vt=lt(L,He))return vt;if(He="",Ft=Un,H==Pn)return}break;case Un:if(!me.test(Ve)){if(Ve==D||"/"==Ve||"?"==Ve||"#"==Ve||"\\"==Ve&&En(L)||H){if(""!=He){var cr=parseInt(He,10);if(65535<cr)return et;L.port=En(L)&&cr===$n[L.scheme]?null:cr,He=""}if(H)return;Ft=Kt;continue}return et}He+=Ve;break;case pn:if(L.scheme="file","/"==Ve||"\\"==Ve)Ft=Xt;else{if(!de||"file"!=de.scheme){Ft=an;continue}if(Ve==D)L.host=de.host,L.path=de.path.slice(),L.query=de.query;else if("?"==Ve)L.host=de.host,L.path=de.path.slice(),L.query="",Ft=Bt;else{if("#"!=Ve){pr(Ke.slice(_n).join(""))||(L.host=de.host,L.path=de.path.slice(),Ln(L)),Ft=an;continue}L.host=de.host,L.path=de.path.slice(),L.query=de.query,L.fragment="",Ft=nn}}break;case Xt:if("/"==Ve||"\\"==Ve){Ft=yn;break}de&&"file"==de.scheme&&!pr(Ke.slice(_n).join(""))&&(Mn(de.path[0],!0)?L.path.push(de.path[0]):L.host=de.host),Ft=an;continue;case yn:if(Ve==D||"/"==Ve||"\\"==Ve||"?"==Ve||"#"==Ve){if(!H&&Mn(He))Ft=an;else{if(""==He){if(L.host="",H)return}else{if(vt=lt(L,He))return vt;if("localhost"==L.host&&(L.host=""),H)return;He=""}Ft=Kt}continue}He+=Ve;break;case Kt:if(En(L)){if(Ft=an,"/"!=Ve&&"\\"!=Ve)continue}else if(H||"?"!=Ve)if(H||"#"!=Ve){if(Ve!=D&&(Ft=an,"/"!=Ve))continue}else L.fragment="",Ft=nn;else L.query="",Ft=Bt;break;case an:if(Ve==D||"/"==Ve||"\\"==Ve&&En(L)||!H&&("?"==Ve||"#"==Ve)){if(hn(He)?(Ln(L),"/"==Ve||"\\"==Ve&&En(L)||L.path.push("")):nr(He)?"/"==Ve||"\\"==Ve&&En(L)||L.path.push(""):("file"==L.scheme&&!L.path.length&&Mn(He)&&(L.host&&(L.host=""),He=He.charAt(0)+":"),L.path.push(He)),He="","file"==L.scheme&&(Ve==D||"?"==Ve||"#"==Ve))for(;1<L.path.length&&""===L.path[0];)L.path.shift();"?"==Ve?(L.query="",Ft=Bt):"#"==Ve&&(L.fragment="",Ft=nn)}else He+=fn(Ve,St);break;case Yn:"?"==Ve?(L.query="",Ft=Bt):"#"==Ve?(L.fragment="",Ft=nn):Ve!=D&&(L.path[0]+=fn(Ve,bt));break;case Bt:H||"#"!=Ve?Ve!=D&&("'"==Ve&&En(L)?L.query+="%27":L.query+="#"==Ve?"%23":fn(Ve,bt)):(L.fragment="",Ft=nn);break;case nn:Ve!=D&&(L.fragment+=fn(Ve,Pt))}_n++}}function w(Ve){var se,H,de=x(this,w,"URL"),Ke=1<arguments.length?arguments[1]:void 0,vt=(Ve=String(Ve),xe(de,{type:"URL"}));if(void 0!==Ke)if(Ke instanceof w)se=ae(Ke);else if(H=_(se={},String(Ke)))throw TypeError(H);if(H=_(vt,Ve,null,se))throw TypeError(H);var Ft=vt.searchParams=new Y;(Ke=ve(Ft)).updateSearchParams(vt.query),Ke.updateURL=function(){vt.query=String(Ft)||null},p||(de.href=wn.call(de),de.origin=zn.call(de),de.protocol=lr.call(de),de.username=sr.call(de),de.password=mr.call(de),de.host=Mr.call(de),de.hostname=te.call(de),de.port=Ie.call(de),de.pathname=Ye.call(de),de.search=A.call(de),de.searchParams=k.call(de),de.hash=B.call(de))}function I(L,se){return{get:L,set:se,configurable:!0,enumerable:!0}}X("../modules/es.string.iterator");var D,d,f,h=X("../internals/export"),p=X("../internals/descriptors"),g=X("../internals/native-url"),On=X("../internals/global"),v=X("../internals/object-define-properties"),S=X("../internals/redefine"),x=X("../internals/an-instance"),E=X("../internals/has"),N=X("../internals/object-assign"),Z=X("../internals/array-from"),K=X("../internals/string-multibyte").codeAt,z=X("../internals/string-punycode-to-ascii"),G=X("../internals/set-to-string-tag"),ie=X("../modules/web.url-search-params"),ee=(X=X("../internals/internal-state"),On.URL),Y=ie.URLSearchParams,ve=ie.getState,xe=X.set,ae=X.getterFor("URL"),ge=Math.floor,ne=Math.pow,J="Invalid authority",ce="Invalid scheme",Te="Invalid host",et="Invalid port",le=/[A-Za-z]/,V=/[\d+-.A-Za-z]/,me=/\d/,Oe=/^(0x|0X)/,Xe=/^[0-7]+$/,dt=/^\d+$/,yt=/^[\dA-Fa-f]+$/,Ut=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ht=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Lt=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,kt=/[\u0009\u000A\u000D]/g,lt=function(L,se){var H,de,Ke;if("["==se.charAt(0))return"]"==se.charAt(se.length-1)&&(H=function(Ve){var $e,pt,ot,Dt,vn,Hn,cr,vt=[0,0,0,0,0,0,0,0],Ft=0,_n=null,He=0,Pr=function(){return Ve.charAt(He)};if(":"==Pr()){if(":"!=Ve.charAt(1))return;He+=2,_n=++Ft}for(;Pr();){if(8==Ft)return;if(":"!=Pr()){for($e=pt=0;pt<4&&yt.test(Pr());)$e=16*$e+parseInt(Pr(),16),He++,pt++;if("."==Pr()){if(0==pt||(He-=pt,Ft>6))return;for(ot=0;Pr();){if(Dt=null,ot>0){if(!("."==Pr()&&ot<4))return;He++}if(!me.test(Pr()))return;for(;me.test(Pr());){if(vn=parseInt(Pr(),10),null===Dt)Dt=vn;else{if(0==Dt)return;Dt=10*Dt+vn}if(Dt>255)return;He++}vt[Ft]=256*vt[Ft]+Dt,(2==++ot||4==ot)&&Ft++}if(4!=ot)return;break}if(":"==Pr()){if(He++,!Pr())return}else if(Pr())return;vt[Ft++]=$e}else{if(null!==_n)return;He++,_n=++Ft}}if(null!==_n)for(Hn=Ft-_n,Ft=7;0!=Ft&&Hn>0;)cr=vt[Ft],vt[Ft--]=vt[_n+Hn-1],vt[_n+--Hn]=cr;else if(8!=Ft)return;return vt}(se.slice(1,-1)))?void(L.host=H):Te;if(En(L))return se=z(se),Ut.test(se)||null===(H=function(Ve){var Ft,_n,He,$e,pt,ot,Dt,vt=Ve.split(".");if(vt.length&&""==vt[vt.length-1]&&vt.pop(),(Ft=vt.length)>4)return Ve;for(_n=[],He=0;He<Ft;He++){if(""==($e=vt[He]))return Ve;if(pt=10,$e.length>1&&"0"==$e.charAt(0)&&(pt=Oe.test($e)?16:8,$e=$e.slice(8==pt?1:2)),""===$e)ot=0;else{if(!(10==pt?dt:8==pt?Xe:yt).test($e))return Ve;ot=parseInt($e,pt)}_n.push(ot)}for(He=0;He<Ft;He++)if(ot=_n[He],He==Ft-1){if(ot>=ne(256,5-Ft))return null}else if(ot>255)return null;for(Dt=_n.pop(),He=0;He<_n.length;He++)Dt+=_n[He]*ne(256,3-He);return Dt}(se))?Te:void(L.host=H);if(ht.test(se))return Te;for(H="",de=Z(se),Ke=0;Ke<de.length;Ke++)H+=fn(de[Ke],bt);L.host=H},It=function(L){for(var se=null,H=1,de=null,Ke=0,Ve=0;Ve<8;Ve++)0!==L[Ve]?(H<Ke&&(se=de,H=Ke),de=null,Ke=0):(null===de&&(de=Ve),++Ke);return H<Ke&&(se=de,H=Ke),se},bt={},Pt=N({},bt,{" ":1,'"':1,"<":1,">":1,"`":1}),St=N({},Pt,{"#":1,"?":1,"{":1,"}":1}),zt=N({},St,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),fn=function(L,se){var H=K(L,0);return 32<H&&H<127&&!E(se,L)?L:encodeURIComponent(L)},$n={ftp:21,file:null,http:80,https:443,ws:80,wss:443},En=function(L){return E($n,L.scheme)},Kn=function(L){return""!=L.username||""!=L.password},Mn=function(L,se){return 2==L.length&&le.test(L.charAt(0))&&(":"==(L=L.charAt(1))||!se&&"|"==L)},pr=function(L){return 1<L.length&&Mn(L.slice(0,2))&&(2==L.length||"/"===(L=L.charAt(2))||"\\"===L||"?"===L||"#"===L)},Ln=function(L){var se=L.path,H=se.length;!H||"file"==L.scheme&&1==H&&Mn(se[0],!0)||se.pop()},nr=function(L){return"."===L||"%2e"===L.toLowerCase()},hn=function(L){return".."===(L=L.toLowerCase())||"%2e."===L||".%2e"===L||"%2e%2e"===L},Xn={},Tn={},ct={},ft={},Qe={},xt={},un={},An={},jn={},rn={},bn={},Pn={},Un={},pn={},Xt={},yn={},Kt={},an={},Yn={},Bt={},nn={},wn=(On=w.prototype,function(){var L=ae(this),se=L.scheme,H=L.username,de=L.password,Ke=L.host,Ve=L.port,vt=L.path,Ft=L.query,_n=L.fragment,He=se+":";return null!==Ke?(He+="//",Kn(L)&&(He+=H+(de?":"+de:"")+"@"),He+=M(Ke),null!==Ve&&(He+=":"+Ve)):"file"==se&&(He+="//"),He+=L.cannotBeABaseURL?vt[0]:vt.length?"/"+vt.join("/"):"",null!==Ft&&(He+="?"+Ft),null!==_n&&(He+="#"+_n),He}),zn=function(){var L=ae(this),se=L.scheme,H=L.port;if("blob"==se)try{return new URL(se.path[0]).origin}catch{return"null"}return"file"!=se&&En(L)?se+"://"+M(L.host)+(null!==H?":"+H:""):"null"},lr=function(){return ae(this).scheme+":"},sr=function(){return ae(this).username},mr=function(){return ae(this).password},Mr=function(){var L=(se=ae(this)).host,se=se.port;return null===L?"":null===se?M(L):M(L)+":"+se},te=function(){var L=ae(this).host;return null===L?"":M(L)},Ie=function(){var L=ae(this).port;return null===L?"":String(L)},Ye=function(){var L=ae(this),se=L.path;return L.cannotBeABaseURL?se[0]:se.length?"/"+se.join("/"):""},A=function(){var L=ae(this).query;return L?"?"+L:""},k=function(){return ae(this).searchParams},B=function(){var L=ae(this).fragment;return L?"#"+L:""};p&&v(On,{href:I(wn,function(H){var se=ae(this);if(H=_(se,H=String(H)))throw TypeError(H);ve(se.searchParams).updateSearchParams(se.query)}),origin:I(zn),protocol:I(lr,function(L){_(ae(this),String(L)+":",Xn)}),username:I(sr,function(L){var se=ae(this),H=Z(String(L));if(!C(se)){se.username="";for(var de=0;de<H.length;de++)se.username+=fn(H[de],zt)}}),password:I(mr,function(L){var se=ae(this),H=Z(String(L));if(!C(se)){se.password="";for(var de=0;de<H.length;de++)se.password+=fn(H[de],zt)}}),host:I(Mr,function(L){var se=ae(this);se.cannotBeABaseURL||_(se,String(L),bn)}),hostname:I(te,function(L){var se=ae(this);se.cannotBeABaseURL||_(se,String(L),Pn)}),port:I(Ie,function(L){var se=ae(this);C(se)||(""==(L=String(L))?se.port=null:_(se,L,Un))}),pathname:I(Ye,function(L){var se=ae(this);se.cannotBeABaseURL||(se.path=[],_(se,L+"",Kt))}),search:I(A,function(L){var se=ae(this);""==(L=String(L))?se.query=null:("?"==L.charAt(0)&&(L=L.slice(1)),se.query="",_(se,L,Bt)),ve(se.searchParams).updateSearchParams(se.query)}),searchParams:I(k),hash:I(B,function(L){var se=ae(this);""==(L=String(L))?se.fragment=null:("#"==L.charAt(0)&&(L=L.slice(1)),se.fragment="",_(se,L,nn))})}),S(On,"toJSON",function(){return wn.call(this)},{enumerable:!0}),S(On,"toString",function(){return wn.call(this)},{enumerable:!0}),ee&&(f=ee.revokeObjectURL,(d=ee.createObjectURL)&&S(w,"createObjectURL",function(L){return d.apply(ee,arguments)}),f&&S(w,"revokeObjectURL",function(L){return f.apply(ee,arguments)})),G(w,"URL"),h({global:!0,forced:!g,sham:!p},{URL:w})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(a,_e,q){"use strict";_e.exports=a("./").polyfill()},{"./":250}],250:[function(a,_e,q){(function(M,C){var w;w=function(){"use strict";function I(lt){return"function"==typeof lt}var D=Array.isArray||function(lt){return"[object Array]"===Object.prototype.toString.call(lt)},d=0,f=void 0,h=void 0,p=function(lt,It){N[d]=lt,N[d+1]=It,2===(d+=2)&&(h?h(Z):Y())},g=typeof window<"u"?window:void 0,v=(v=g||{}).MutationObserver||v.WebKitMutationObserver,S=typeof self>"u"&&void 0!==M&&"[object process]"==={}.toString.call(M),x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function E(){var lt=setTimeout;return function(){return lt(Z,1)}}var N=new Array(1e3);function Z(){for(var lt=0;lt<d;lt+=2)(0,N[lt])(N[lt+1]),N[lt]=void 0,N[lt+1]=void 0;d=0}var z,G,ie,Y=void 0;function X(lt,It){var bt,Pt=this,St=new this.constructor(xe),zt=(void 0===St[ve]&&yt(St),Pt._state);return zt?(bt=arguments[zt-1],p(function(){return Xe(zt,St,bt,Pt._result)})):me(Pt,St,lt,It),St}function ee(lt){var It;return lt&&"object"==typeof lt&&lt.constructor===this?lt:(Te(It=new this(xe),lt),It)}Y=S?function(){return M.nextTick(Z)}:v?(G=0,S=new v(Z),ie=document.createTextNode(""),S.observe(ie,{characterData:!0}),function(){ie.data=G=++G%2}):x?((z=new MessageChannel).port1.onmessage=Z,function(){return z.port2.postMessage(0)}):(void 0===g&&"function"==typeof a?function K(){try{var lt=Function("return this")().require("vertx");return void 0!==(f=lt.runOnLoop||lt.runOnContext)?function(){f(Z)}:E()}catch{return E()}}:E)();var ve=Math.random().toString(36).substring(2);function xe(){}var ae=void 0,ge=1,ne=2;function J(lt,It,bt){p(function(Pt){var St=!1,zt=function(fn,$n,En,Kn){try{fn.call($n,function(fn){St||(St=!0,(It!==fn?Te:le)(Pt,fn))},function(fn){St||(St=!0,V(Pt,fn))})}catch(Mn){return Mn}}(bt,It);!St&&zt&&(St=!0,V(Pt,zt))},lt)}function ce(lt,It,bt){var Pt,St;It.constructor===lt.constructor&&bt===X&&It.constructor.resolve===ee?(Pt=lt,(St=It)._state===ge?le(Pt,St._result):St._state===ne?V(Pt,St._result):me(St,void 0,function(zt){return Te(Pt,zt)},function(zt){return V(Pt,zt)})):void 0!==bt&&I(bt)?J(lt,It,bt):le(lt,It)}function Te(lt,It){if(lt===It)V(lt,new TypeError("You cannot resolve a promise with itself"));else if(bt=typeof It,null===It||"object"!=bt&&"function"!=bt)le(lt,It);else{bt=void 0;try{bt=It.then}catch(Pt){return void V(lt,Pt)}ce(lt,It,bt)}var bt}function et(lt){lt._onerror&&lt._onerror(lt._result),Oe(lt)}function le(lt,It){lt._state===ae&&(lt._result=It,lt._state=ge,0!==lt._subscribers.length&&p(Oe,lt))}function V(lt,It){lt._state===ae&&(lt._state=ne,lt._result=It,p(et,lt))}function me(lt,It,bt,Pt){var St=lt._subscribers,zt=St.length;lt._onerror=null,St[zt]=It,St[zt+ge]=bt,St[zt+ne]=Pt,0===zt&&lt._state&&p(Oe,lt)}function Oe(lt){var It=lt._subscribers,bt=lt._state;if(0!==It.length){for(var Pt,St=void 0,zt=lt._result,fn=0;fn<It.length;fn+=3)St=It[fn+bt],(Pt=It[fn])?Xe(bt,Pt,St,zt):St(zt);lt._subscribers.length=0}}function Xe(lt,It,bt,Pt){var St=I(bt),zt=void 0,fn=void 0,$n=!0;if(St){try{zt=bt(Pt)}catch(En){$n=!1,fn=En}if(It===zt)return void V(It,new TypeError("A promises callback cannot return that same promise."))}else zt=Pt;It._state===ae&&(St&&$n?Te(It,zt):!1===$n?V(It,fn):lt===ge?le(It,zt):lt===ne&&V(It,zt))}var dt=0;function yt(lt){lt[ve]=dt++,lt._state=void 0,lt._result=void 0,lt._subscribers=[]}ht.prototype._enumerate=function(lt){for(var It=0;this._state===ae&&It<lt.length;It++)this._eachEntry(lt[It],It)},ht.prototype._eachEntry=function(lt,It){var bt=this._instanceConstructor,Pt=bt.resolve;if(Pt===ee){var St,zt=void 0,fn=void 0,$n=!1;try{zt=lt.then}catch(En){$n=!0,fn=En}zt===X&&lt._state!==ae?this._settledAt(lt._state,It,lt._result):"function"!=typeof zt?(this._remaining--,this._result[It]=lt):bt===Lt?(St=new bt(xe),$n?V(St,fn):ce(St,lt,zt),this._willSettleAt(St,It)):this._willSettleAt(new bt(function(En){return En(lt)}),It)}else this._willSettleAt(Pt(lt),It)},ht.prototype._settledAt=function(lt,It,bt){var Pt=this.promise;Pt._state===ae&&(this._remaining--,lt===ne?V(Pt,bt):this._result[It]=bt),0===this._remaining&&le(Pt,this._result)},ht.prototype._willSettleAt=function(lt,It){var bt=this;me(lt,void 0,function(Pt){return bt._settledAt(ge,It,Pt)},function(Pt){return bt._settledAt(ne,It,Pt)})};var Ut=ht;function ht(lt,It){this._instanceConstructor=lt,this.promise=new lt(xe),this.promise[ve]||yt(this.promise),D(It)?(this.length=It.length,this._remaining=It.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(It),0!==this._remaining)||le(this.promise,this._result)):V(this.promise,new Error("Array Methods must be provided an Array"))}kt.prototype.catch=function(lt){return this.then(null,lt)},kt.prototype.finally=function(lt){var It=this.constructor;return I(lt)?this.then(function(bt){return It.resolve(lt()).then(function(){return bt})},function(bt){return It.resolve(lt()).then(function(){throw bt})}):this.then(lt,lt)};var Lt=kt;function kt(lt){if(this[ve]=dt++,this._result=this._state=void 0,this._subscribers=[],xe!==lt){if("function"!=typeof lt)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof kt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var It=this;try{lt(function(bt){Te(It,bt)},function(bt){V(It,bt)})}catch(bt){V(It,bt)}}}return Lt.prototype.then=X,Lt.all=function(lt){return new Ut(this,lt).promise},Lt.race=function(lt){var It=this;return D(lt)?new It(function(bt,Pt){for(var St=lt.length,zt=0;zt<St;zt++)It.resolve(lt[zt]).then(bt,Pt)}):new It(function(bt,Pt){return Pt(new TypeError("You must pass an array to race."))})},Lt.resolve=ee,Lt.reject=function(lt){var It=new this(xe);return V(It,lt),It},Lt._setScheduler=function(lt){h=lt},Lt._setAsap=function(lt){p=lt},Lt._asap=p,Lt.polyfill=function(){var lt=void 0;if(void 0!==C)lt=C;else if(typeof self<"u")lt=self;else try{lt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var It=lt.Promise;if(It){var bt=null;try{bt=Object.prototype.toString.call(It.resolve())}catch{}if("[object Promise]"===bt&&!It.cast)return}lt.Promise=Lt},Lt.Promise=Lt},"object"==typeof q&&void 0!==_e?_e.exports=w():this.ES6Promise=w()}).call(this,a("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(a,_e,q){var C;C=function(_,w){"use strict";function d(h){try{delete window[h]}catch{window[h]=void 0}}function f(h){(h=document.getElementById(h))&&document.getElementsByTagName("head")[0].removeChild(h)}w.exports=function(h){var p=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=h,v=p.timeout||5e3,S=p.jsonpCallback||"callback",x=void 0;return new Promise(function(E,N){var Z=p.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),K=S+"_"+Z,z=(window[Z]=function(G){E({ok:!0,json:function(){return Promise.resolve(G)}}),x&&clearTimeout(x),f(K),d(Z)},g+=-1===g.indexOf("?")?"?":"&",document.createElement("script"));z.setAttribute("src",""+g+S+"="+Z),p.charset&&z.setAttribute("charset",p.charset),z.id=K,document.getElementsByTagName("head")[0].appendChild(z),x=setTimeout(function(){N(new Error("JSONP request to "+h+" timed out")),d(Z),f(K),window[Z]=function(){d(Z)}},v),z.onerror=function(){N(new Error("JSONP request to "+h+" failed")),d(Z),f(K),x&&clearTimeout(x)}})}},void 0!==q&&void 0!==_e?C(0,_e):(C(C={exports:{}},C),this.fetchJsonp=C.exports)},{}],252:[function(a,_e,q){var M=function(C){"use strict";var _,w,I,D,d,f,p,g,v,S;if(!(void 0===C||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return _=function(){return C.URL||C.webkitURL||C},w=(S=C.document).createElementNS("http://www.w3.org/1999/xhtml","a"),I="download"in w,D=/constructor/i.test(C.HTMLElement)||C.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(x){(C.setImmediate||C.setTimeout)(function(){throw x},0)},4e4,p=function(x){setTimeout(function(){"string"==typeof x?_().revokeObjectURL(x):x.remove()},4e4)},g=function(x){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\ufeff",x],{type:x.type}):x},S=(v=function(x,E,G){G||(x=g(x));var Z,K,z=this,ie=(G="application/octet-stream"===x.type,function(){for(var X=z,ee="writestart progress write writeend".split(" "),ve=(ee=[].concat(ee)).length;ve--;){var xe=X["on"+ee[ve]];if("function"==typeof xe)try{xe.call(X,X)}catch(ae){f(ae)}}});z.readyState=z.INIT,I?(Z=_().createObjectURL(x),setTimeout(function(){var X,ee;w.href=Z,w.download=E,X=w,ee=new MouseEvent("click"),X.dispatchEvent(ee),ie(),p(Z),z.readyState=z.DONE})):(d||G&&D)&&C.FileReader?((K=new FileReader).onloadend=function(){var X=d?K.result:K.result.replace(/^data:[^;]*;/,"data:attachment/file;");C.open(X,"_blank")||(C.location.href=X),X=void 0,z.readyState=z.DONE,ie()},K.readAsDataURL(x),z.readyState=z.INIT):(Z=Z||_().createObjectURL(x),!G&&C.open(Z,"_blank")||(C.location.href=Z),z.readyState=z.DONE,ie(),p(Z))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(x,E,N){return E=E||x.name||"download",N||(x=g(x)),navigator.msSaveOrOpenBlob(x,E)}:(S.abort=function(){},S.readyState=S.INIT=0,S.WRITING=1,S.DONE=2,S.error=S.onwritestart=S.onprogress=S.onwrite=S.onabort=S.onerror=S.onwriteend=null,function(x,E,N){return new v(x,E||x.name||"download",N)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);void 0!==_e&&_e.exports&&(_e.exports.saveAs=M)},{}],253:[function(a,_e,q){var M,C=Object.defineProperty,_=(C(q,"__esModule",{value:!0}),q),w={GIFEncoder:()=>ie,applyPalette:()=>function(ae,ge,ne="rgb565"){if(!ae||!ae.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(ae instanceof Uint8Array||ae instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<ge.length)throw new Error("applyPalette() only works with 256 colors or less");const J=new Uint32Array(ae.buffer),ce=J.length,Te="rgb444"===ne?4096:65536,et=new Uint8Array(ce),le=new Array(Te);if("rgba4444"===ne)for(let kt=0;kt<ce;kt++){var Xe,V=(Xe=J[kt])>>24&255,me=Xe>>16&255,Oe=Xe>>8&255,dt=(dt=p(Xe&=255,Oe,me,V))in le?le[dt]:le[dt]=function(lt,It,bt,Pt,St){let zt=0,fn=1e100;for(let Mn=0;Mn<St.length;Mn++){var En=St[Mn],Kn=K(En[3]-Pt);Kn>fn||(Kn+=K(En[0]-lt))>fn||(Kn+=K(En[1]-It))>fn||(Kn+=K(En[2]-bt))>fn||(fn=Kn,zt=Mn)}return zt}(Xe,Oe,me,V,ge);et[kt]=dt}else{const kt="rgb444"===ne?g:h;for(let lt=0;lt<ce;lt++){var ht,yt=(ht=J[lt])>>16&255,Ut=ht>>8&255,Lt=(Lt=kt(ht&=255,Ut,yt))in le?le[Lt]:le[Lt]=function(It,bt,Pt,St){let zt=0,fn=1e100;for(let Mn=0;Mn<St.length;Mn++){var En=St[Mn],Kn=K(En[0]-It);Kn>fn||(Kn+=K(En[1]-bt))>fn||(Kn+=K(En[2]-Pt))>fn||(fn=Kn,zt=Mn)}return zt}(ht,Ut,yt,ge);et[lt]=Lt}}return et},default:()=>xe,nearestColor:()=>function(ae,ge,ne=N){return ae[z(ae,ge,ne)]},nearestColorIndex:()=>z,nearestColorIndexWithDistance:()=>G,prequantize:()=>function(ae,{roundRGB:ge=5,roundAlpha:ne=10,oneBitAlpha:J=null}={}){const ce=new Uint32Array(ae.buffer);for(let me=0;me<ce.length;me++){let Oe=(V=ce[me])>>24&255;var et=V>>16&255,le=V>>8&255,V=255&V;Oe=Z(Oe,ne),J&&(Oe=Oe<=("number"==typeof J?J:127)?0:255),V=Z(V,ge),le=Z(le,ge),et=Z(et,ge),ce[me]=Oe<<24|et<<16|le<<8|V}},quantize:()=>function(ae,ge,ne={}){var{format:J="rgb565",clearAlpha:ce=!0,clearAlphaColor:Te=0,clearAlphaThreshold:et=0,oneBitAlpha:le=!1}=ne;if(!ae||!ae.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(ae instanceof Uint8Array||ae instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");ae=new Uint32Array(ae.buffer);let V=!1!==ne.useSqrt;const me="rgba4444"===J,Oe=function(pr,Ln){const hn=new Array("rgb444"===Ln?4096:65536),Xn=pr.length;if("rgba4444"===Ln)for(let Xt=0;Xt<Xn;++Xt){var Qe,Tn=(Qe=pr[Xt])>>24&255,ct=Qe>>16&255,ft=Qe>>8&255,xt=p(Qe&=255,ft,ct,Tn);let yn=xt in hn?hn[xt]:hn[xt]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};yn.rc+=Qe,yn.gc+=ft,yn.bc+=ct,yn.ac+=Tn,yn.cnt++}else if("rgb444"===Ln)for(let Xt=0;Xt<Xn;++Xt){var jn,un=(jn=pr[Xt])>>16&255,An=jn>>8&255,rn=g(jn&=255,An,un);let yn=rn in hn?hn[rn]:hn[rn]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};yn.rc+=jn,yn.gc+=An,yn.bc+=un,yn.cnt++}else for(let Xt=0;Xt<Xn;++Xt){var Un,bn=(Un=pr[Xt])>>16&255,Pn=Un>>8&255,pn=h(Un&=255,Pn,bn);let yn=pn in hn?hn[pn]:hn[pn]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};yn.rc+=Un,yn.gc+=Pn,yn.bc+=bn,yn.cnt++}return hn}(ae,J),Xe=Oe.length,dt=Xe-1,yt=new Uint32Array(Xe+1);for(var Ut=0,ht=0;ht<Xe;++ht){const pr=Oe[ht];null!=pr&&(En=1/pr.cnt,me&&(pr.ac*=En),pr.rc*=En,pr.gc*=En,pr.bc*=En,Oe[Ut++]=pr)}var Lt,kt,lt;for(S(ge)/Ut<.022&&(V=!1),ht=0;ht<Ut-1;++ht)Oe[ht].fw=ht+1,Oe[ht+1].bk=ht,V&&(Oe[ht].cnt=Math.sqrt(Oe[ht].cnt));for(V&&(Oe[ht].cnt=Math.sqrt(Oe[ht].cnt)),ht=0;ht<Ut;++ht){x(Oe,ht,!1);var It=Oe[ht].err;for(kt=++yt[0];1<kt&&!(Oe[Lt=yt[lt=kt>>1]].err<=It);kt=lt)yt[kt]=Lt;yt[kt]=ht}var bt,Pt=Ut-ge;for(ht=0;ht<Pt;){for(;;){var St=yt[1];if((bt=Oe[St]).tm>=bt.mtm&&Oe[bt.nn].mtm<=bt.tm)break;for(bt.mtm==dt?St=yt[1]=yt[yt[0]--]:(x(Oe,St,!1),bt.tm=ht),It=Oe[St].err,kt=1;(lt=kt+kt)<=yt[0]&&(lt<yt[0]&&Oe[yt[lt]].err>Oe[yt[lt+1]].err&&lt++,!(It<=Oe[Lt=yt[lt]].err));kt=lt)yt[kt]=Lt;yt[kt]=St}var zt=Oe[bt.nn],fn=bt.cnt,$n=zt.cnt,En=1/(fn+$n);me&&(bt.ac=En*(fn*bt.ac+$n*zt.ac)),bt.rc=En*(fn*bt.rc+$n*zt.rc),bt.gc=En*(fn*bt.gc+$n*zt.gc),bt.bc=En*(fn*bt.bc+$n*zt.bc),bt.cnt+=zt.cnt,bt.mtm=++ht,Oe[zt.bk].fw=zt.fw,Oe[zt.fw].bk=zt.bk,zt.mtm=dt}let Kn=[];for(ht=0;;0){let pr=v(Math.round(Oe[ht].rc),0,255),Ln=v(Math.round(Oe[ht].gc),0,255),nr=v(Math.round(Oe[ht].bc),0,255),hn=255;me&&(hn=v(Math.round(Oe[ht].ac),0,255),le&&(hn=hn<=(Mn="number"==typeof le?le:127)?0:255),ce&&hn<=et&&(pr=Ln=nr=Te,hn=0));var Mn=me?[pr,Ln,nr,hn]:[pr,Ln,nr];if(function(Xn,Tn){for(let Qe=0;Qe<Xn.length;Qe++){var ct=(ft=Xn[Qe])[0]===Tn[0]&&ft[1]===Tn[1]&&ft[2]===Tn[2],ft=!(4<=ft.length&&4<=Tn.length)||ft[3]===Tn[3];if(ct&&ft)return!0}return!1}(Kn,Mn)||Kn.push(Mn),0==(ht=Oe[ht].fw))break}return Kn},snapColorsToPalette:()=>function(ae,ge,ne=5){if(ae.length&&ge.length){var J=ae.map(V=>V.slice(0,3)),ce=ne*ne,Te=ae[0].length;for(let V=0;V<ge.length;V++){let me=ge[V];me=me.length<Te?[me[0],me[1],me[2],255]:me.length>Te?me.slice(0,3):me.slice();var le,et=(le=G(J,me.slice(0,3),N))[0];0<(le=le[1])&&le<=ce&&(ae[et]=me)}}}};for(M in w)C(_,M,{get:w[M],enumerable:!0});var I={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function D(ae=256){let ge=0,ne=new Uint8Array(ae);return{get buffer(){return ne.buffer},reset(){ge=0},bytesView:()=>ne.subarray(0,ge),bytes:()=>ne.slice(0,ge),writeByte(ce){J(ge+1),ne[ge]=ce,ge++},writeBytes(ce,Te=0,et=ce.length){J(ge+et);for(let le=0;le<et;le++)ne[ge++]=ce[le+Te]},writeBytesView(ce,Te=0,et=ce.byteLength){J(ge+et),ne.set(ce.subarray(Te,Te+et),ge),ge+=et}};function J(ce){var Te=ne.length;if(!(ce<=Te)){ce=Math.max(ce,Te*(Te<1048576?2:1.125)>>>0),0!=Te&&(ce=Math.max(ce,256));const et=ne;ne=new Uint8Array(ce),0<ge&&ne.set(et.subarray(0,ge),0)}}}var d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(ae,ge,ne,me,ce=D(512),Te=new Uint8Array(256),et=new Int32Array(5003),le=new Int32Array(5003)){var V=et.length;me=Math.max(2,me),Te.fill(0),le.fill(0),et.fill(-1);let Oe=0,Xe=0;var dt=me+1;const yt=dt;let Ut=!1,ht=yt,Lt=(1<<ht)-1;var kt=1<<dt-1;const lt=1+kt;let It=2+kt,bt=0,Pt=ne[0],St=0;for(let Mn=V;Mn<65536;Mn*=2)++St;St=8-St,ce.writeByte(me),Kn(kt);var zt=ne.length;for(let Mn=1;Mn<zt;Mn++)e:{var fn=ne[Mn],$n=(fn<<12)+Pt;let pr=fn<<St^Pt;if(et[pr]===$n)Pt=le[pr];else{for(var En=0===pr?1:V-pr;0<=et[pr];)if((pr-=En)<0&&(pr+=V),et[pr]===$n){Pt=le[pr];break e}Kn(Pt),Pt=fn,It<4096?(le[pr]=It++,et[pr]=$n):(et.fill(-1),It=2+kt,Ut=!0,Kn(kt))}}return Kn(Pt),Kn(lt),ce.writeByte(0),ce.bytesView();function Kn(Mn){for(Oe&=d[Xe],0<Xe?Oe|=Mn<<Xe:Oe=Mn,Xe+=ht;8<=Xe;)Te[bt++]=255&Oe,254<=bt&&(ce.writeByte(bt),ce.writeBytesView(Te,0,bt),bt=0),Oe>>=8,Xe-=8;if((It>Lt||Ut)&&(Ut?(ht=yt,Lt=(1<<ht)-1,Ut=!1):(++ht,Lt=12===ht?1<<ht:(1<<ht)-1)),Mn==lt){for(;0<Xe;)Te[bt++]=255&Oe,254<=bt&&(ce.writeByte(bt),ce.writeBytesView(Te,0,bt),bt=0),Oe>>=8,Xe-=8;0<bt&&(ce.writeByte(bt),ce.writeBytesView(Te,0,bt),bt=0)}}};function h(ae,ge,ne){return ae<<8&63488|ge<<2&992|ne>>3}function p(ae,ge,ne,J){return ae>>4|240&ge|(240&ne)<<4|(240&J)<<8}function g(ae,ge,ne){return ae>>4<<8|240&ge|ne>>4}function v(ae,ge,ne){return ae<ge?ge:ne<ae?ne:ae}function S(ae){return ae*ae}function x(ae,ge,ne){var J=0,ce=1e100;const Te=ae[ge];for(var et=Te.cnt,le=Te.ac,V=Te.rc,me=Te.gc,Oe=Te.bc,Xe=Te.fw;0!=Xe;Xe=ae[Xe].fw){var dt,Ut,yt=ae[Xe];ce<=(Ut=et*(Ut=yt.cnt)/(et+Ut))||(dt=0,ne&&ce<=(dt+=Ut*S(yt.ac-le))||ce<=(dt+=Ut*S(yt.rc-V))||ce<=(dt+=Ut*S(yt.gc-me))||ce<=(dt+=Ut*S(yt.bc-Oe))||(ce=dt,J=Xe))}Te.err=ce,Te.nn=J}function N(ae,ge){for(var ne=0,J=0;J<ae.length;J++){var ce=ae[J]-ge[J];ne+=ce*ce}return ne}function Z(ae,ge){return 1<ge?Math.round(ae/ge)*ge:ae}function K(ae){return ae*ae}function z(ae,ge,ne=N){let J=1/0,ce=-1;for(let et=0;et<ae.length;et++){var Te=ne(ge,ae[et]);Te<J&&(J=Te,ce=et)}return ce}function G(ae,ge,ne=N){let J=1/0,ce=-1;for(let et=0;et<ae.length;et++){var Te=ne(ge,ae[et]);Te<J&&(J=Te,ce=et)}return[ce,J]}function ie(ae={}){const{initialCapacity:ge=4096,auto:ne=!0}=ae,J=D(ge),ce=new Uint8Array(256),Te=new Int32Array(5003),et=new Int32Array(5003);let le=!1;return{reset(){J.reset(),le=!1},finish(){J.writeByte(I.trailer)},bytes:()=>J.bytes(),bytesView:()=>J.bytesView(),get buffer(){return J.buffer},get stream(){return J},writeHeader:V,writeFrame(me,Oe,Xe,Pt={}){var{transparent:yt=!1,transparentIndex:Ut=0,delay:En=0,palette:ht=null,repeat:zt=0,colorDepth:Lt=8,dispose:kt=-1}=Pt;let lt=!1;if(ne?le||(lt=!0,V(),le=!0):lt=!!Pt.first,Oe=Math.max(0,Math.floor(Oe)),Xe=Math.max(0,Math.floor(Xe)),lt){if(!ht)throw new Error("First frame must include a { palette } option");var[Pt,fn,bt,$n,St=8]=[J,Oe,Xe,ht,Lt];St=128|St-1<<4|($n=ve($n.length)-1),ee(Pt,fn),ee(Pt,bt),Pt.writeBytes([St,0,0]),X(J,ht),0<=zt&&(fn=zt,($n=J).writeByte(33),$n.writeByte(255),$n.writeByte(11),Y($n,"NETSCAPE2.0"),$n.writeByte(3),$n.writeByte(1),ee($n,fn),$n.writeByte(0))}var It,bt,St=kt,zt=bt=Math.round(En/10),fn=yt,$n=Ut,En=((Pt=J).writeByte(33),Pt.writeByte(249),Pt.writeByte(4),$n<0&&($n=0,fn=!1),fn=fn?(It=1,2):It=0,0<=St&&(fn=7&St),Pt.writeByte((fn<<=2)|It),ee(Pt,zt),Pt.writeByte($n||0),Pt.writeByte(0),!!ht&&!lt);yt=Oe,Ut=Xe,It=En?ht:null,(kt=J).writeByte(44),ee(kt,0),ee(kt,0),ee(kt,yt),ee(kt,Ut),It?(yt=ve(It.length)-1,kt.writeByte(128|yt)):kt.writeByte(0),En&&X(J,ht),[zt,Pt,Ut,yt,kt=8,En,ht,me]=[J,me,Oe,Xe,Lt,ce,Te,et],f(Ut,yt,Pt,kt,zt,En,ht,me)}};function V(){Y(J,"GIF89a")}}function X(ae,ge){var ne=1<<ve(ge.length);for(let J=0;J<ne;J++){let ce=[0,0,0];J<ge.length&&(ce=ge[J]),ae.writeByte(ce[0]),ae.writeByte(ce[1]),ae.writeByte(ce[2])}}function ee(ae,ge){ae.writeByte(255&ge),ae.writeByte(ge>>8&255)}function Y(ae,ge){for(var ne=0;ne<ge.length;ne++)ae.writeByte(ge.charCodeAt(ne))}function ve(ae){return Math.max(Math.ceil(Math.log2(ae)),1)}var xe=ie},{}],254:[function(a,_e,q){q.read=function(M,C,_,w,x){var D,d,f=8*x-w-1,h=(1<<f)-1,p=h>>1,g=-7,v=_?x-1:0,S=_?-1:1;for(x=M[C+v],v+=S,D=x&(1<<-g)-1,x>>=-g,g+=f;0<g;D=256*D+M[C+v],v+=S,g-=8);for(d=D&(1<<-g)-1,D>>=-g,g+=w;0<g;d=256*d+M[C+v],v+=S,g-=8);if(0===D)D=1-p;else{if(D===h)return d?NaN:1/0*(x?-1:1);d+=Math.pow(2,w),D-=p}return(x?-1:1)*d*Math.pow(2,D-w)},q.write=function(M,C,_,w,I,E){var d,f,h=8*E-I-1,p=(1<<h)-1,g=p>>1,v=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,S=w?0:E-1,x=w?1:-1;for(E=C<0||0===C&&1/C<0?1:0,C=Math.abs(C),isNaN(C)||C===1/0?(f=isNaN(C)?1:0,d=p):(d=Math.floor(Math.log(C)/Math.LN2),C*(w=Math.pow(2,-d))<1&&(d--,w*=2),2<=(C+=1<=d+g?v/w:v*Math.pow(2,1-g))*w&&(d++,w/=2),p<=d+g?(f=0,d=p):1<=d+g?(f=(C*w-1)*Math.pow(2,I),d+=g):(f=C*Math.pow(2,g-1)*Math.pow(2,I),d=0));8<=I;M[_+S]=255&f,S+=x,f/=256,I-=8);for(d=d<<I|f,h+=I;0<h;M[_+S]=255&d,S+=x,d/=256,h-=8);M[_+S-x]|=128*E}},{}],255:[function(a,_e,q){"use strict";var M;function C(ct,ft){return ct.b===ft.b&&ct.a===ft.a}function _(ct,ft){return ct.b<ft.b||ct.b===ft.b&&ct.a<=ft.a}function w(ct,ft,Qe){var xt=ft.b-ct.b,un=Qe.b-ft.b;return 0<xt+un?xt<un?ft.a-ct.a+xt/(xt+un)*(ct.a-Qe.a):ft.a-Qe.a+un/(xt+un)*(Qe.a-ct.a):0}function I(ct,ft,Qe){var xt=ft.b-ct.b,un=Qe.b-ft.b;return 0<xt+un?(ft.a-Qe.a)*xt+(ft.a-ct.a)*un:0}function D(ct,ft){return ct.a<ft.a||ct.a===ft.a&&ct.b<=ft.b}function d(ct,ft,Qe){var xt=ft.a-ct.a,un=Qe.a-ft.a;return 0<xt+un?xt<un?ft.b-ct.b+xt/(xt+un)*(ct.b-Qe.b):ft.b-Qe.b+un/(xt+un)*(Qe.b-ct.b):0}function f(ct,ft,Qe){var xt=ft.a-ct.a,un=Qe.a-ft.a;return 0<xt+un?(ft.b-Qe.b)*xt+(ft.b-ct.b)*un:0}function h(ct,ft,Qe,xt){return(ct=ct<0?0:ct)<=(Qe=Qe<0?0:Qe)?0===Qe?(ft+xt)/2:ft+ct/(ct+Qe)*(xt-ft):xt+Qe/(ct+Qe)*(ft-xt)}function p(ct){var ft=E(ct.b);return Z(ft,ct.c),Z(ft.b,ct.c),K(ft,ct.a),ft}function g(ct,ft){var Qe=!1,xt=!1;ct!==ft&&(ft.a!==ct.a&&(xt=!0,G(ft.a,ct.a)),ft.d!==ct.d&&(Qe=!0,ie(ft.d,ct.d)),N(ft,ct),xt||(Z(ft,ct.a),ct.a.c=ct),Qe||(K(ft,ct.d),ct.d.a=ct))}function v(ct){var ft=ct.b,Qe=!1;ct.d!==ct.b.d&&(Qe=!0,ie(ct.d,ct.b.d)),ct.c===ct?G(ct.a,null):(ct.b.d.a=ct.b.e,ct.a.c=ct.c,N(ct,ct.b.e),Qe||K(ct,ct.d)),ft.c===ft?(G(ft.a,null),ie(ft.d,null)):(ct.d.a=ft.b.e,ft.a.c=ft.c,N(ft,ft.b.e)),z(ct)}function S(ct){var ft=E(ct),Qe=ft.b;return N(ft,ct.e),ft.a=ct.b.a,Z(Qe,ft.a),ft.d=Qe.d=ct.d,ft=ft.b,N(ct.b,ct.b.b.e),N(ct.b,ft),ct.b.a=ft.a,ft.b.a.c=ft.b,ft.b.d=ct.b.d,ft.f=ct.f,ft.b.f=ct.b.f,ft}function x(ct,ft){var Qe=!1,xt=E(ct),un=xt.b;return ft.d!==ct.d&&(Qe=!0,ie(ft.d,ct.d)),N(xt,ct.e),N(un,ft),xt.a=ct.b.a,un.a=ft.a,xt.d=un.d=ct.d,ct.d.a=un,Qe||K(xt,ct.d),xt}function E(ct){var ft=new bt,Qe=new bt;return(((Qe.h=ct.b.h).b.h=ft).h=ct).b.h=Qe,ft.b=Qe,((ft.c=ft).e=Qe).b=ft,(Qe.c=Qe).e=ft}function N(ct,ft){var Qe=ct.c,xt=ft.c;Qe.b.e=ft,(xt.b.e=ct).c=xt,ft.c=Qe}function Z(ct,ft){var Qe=ft.f,xt=new St(ft,Qe);for(Qe.e=xt,Qe=(ft.f=xt).c=ct;Qe.a=xt,(Qe=Qe.c)!==ct;);}function K(ct,ft){var Qe=ft.d,xt=new It(ft,Qe);for(Qe.b=xt,(ft.d=xt).a=ct,xt.c=ft.c,Qe=ct;Qe.d=xt,(Qe=Qe.e)!==ct;);}function z(ct){var ft=ct.h;(ft.b.h=ct=ct.b.h).b.h=ft}function G(ct,ft){for(var Qe=ct.c,xt=Qe;xt.a=ft,(xt=xt.c)!==Qe;);((xt=ct.e).f=Qe=ct.f).e=xt}function ie(ct,ft){for(var Qe=ct.a,xt=Qe;xt.d=ft,(xt=xt.e)!==Qe;);((xt=ct.b).d=Qe=ct.d).b=xt}function X(ct){var ft=0;return Math.abs(ct[1])>Math.abs(ct[0])&&(ft=1),Math.abs(ct[2])>Math.abs(ct[ft])?2:ft}function ee(ct,ft){ct.f+=ft.f,ct.b.f+=ft.b.f}function Y(ct,ft,Qe){return Qe=Qe.a,(ft=ft.a).b.a===(ct=ct.a)?Qe.b.a===ct?_(ft.a,Qe.a)?I(Qe.b.a,ft.a,Qe.a)<=0:0<=I(ft.b.a,Qe.a,ft.a):I(Qe.b.a,ct,Qe.a)<=0:Qe.b.a===ct?0<=I(ft.b.a,ct,ft.a):(ft=w(ft.b.a,ct,ft.a),(ct=w(Qe.b.a,ct,Qe.a))<=ft)}function ve(ct){ct.a.i=null;var ft=ct.e;ft.a.c=ft.c,ft.c.a=ft.a,ct.e=null}function xe(ct,ft){v(ct.a),ct.c=!1,(ct.a=ft).i=ct}function ae(ct){for(var ft=ct.a.a;(ct=Tn(ct)).a.a===ft;);return ct.c&&(xe(ct,ft=x(Xn(ct).a.b,ct.a.e)),ct=Tn(ct)),ct}function ge(ct,ft,Qe){var xt=new hn;return xt.a=Qe,xt.e=Ut(ct.f,ft.e,xt),Qe.i=xt}function ne(ct,ft){switch(ct.s){case 100130:return!!(1&ft);case 100131:return 0!==ft;case 100132:return 0<ft;case 100133:return ft<0;case 100134:return 2<=ft||ft<=-2}return!1}function J(ct){var ft=ct.a,Qe=ft.d;Qe.c=ct.d,Qe.a=ft,ve(ct)}function ce(ct,ft,Qe){for(ft=(ct=ft).a;ct!==Qe;){ct.c=!1;var xt=Xn(ct),un=xt.a;if(un.a!==ft.a){if(!xt.c){J(ct);break}xe(xt,un=x(ft.c.b,un.b))}ft.c!==un&&(g(un.b.e,un),g(ft,un)),J(ct),ft=xt.a,ct=xt}return ft}function Te(ct,ft,Qe,xt,un,An){for(var jn=!0;ge(ct,ft,Qe.b),(Qe=Qe.c)!==xt;);for(null===un&&(un=Xn(ft).a.b.c);(Qe=(xt=Xn(ft)).a.b).a===un.a;)Qe.c!==un&&(g(Qe.b.e,Qe),g(un.b.e,Qe)),xt.f=ft.f-Qe.f,xt.d=ne(ct,xt.f),ft.b=!0,!jn&&me(ct,ft)&&(ee(Qe,un),ve(ft),v(un)),jn=!1,ft=xt,un=Qe;ft.b=!0,An&&Xe(ct,ft)}function et(ct,ft,Qe,xt,un){var An=[ft.g[0],ft.g[1],ft.g[2]];ft.d=null,ft.d=ct.o&&ct.o(An,Qe,xt,ct.c)||null,null===ft.d&&(un?ct.n||(lt(ct,100156),ct.n=!0):ft.d=Qe[0])}function le(ct,ft,Qe){var xt=[null,null,null,null];xt[0]=ft.a.d,xt[1]=Qe.a.d,et(ct,ft.a,xt,[.5,.5,0,0],!1),g(ft,Qe)}function V(ct,ft,Qe,xt,un){var An=Math.abs(ft.b-ct.b)+Math.abs(ft.a-ct.a),jn=Math.abs(Qe.b-ct.b)+Math.abs(Qe.a-ct.a),rn=un+1;xt[un]=.5*jn/(An+jn),xt[rn]=.5*An/(An+jn),ct.g[0]+=xt[un]*ft.g[0]+xt[rn]*Qe.g[0],ct.g[1]+=xt[un]*ft.g[1]+xt[rn]*Qe.g[1],ct.g[2]+=xt[un]*ft.g[2]+xt[rn]*Qe.g[2]}function me(ct,ft){var Qe=Xn(ft),xt=ft.a,un=Qe.a;if(_(xt.a,un.a)){if(0<I(un.b.a,xt.a,un.a))return;if(C(xt.a,un.a)){if(xt.a!==un.a){Qe=ct.e;var An=xt.a.h;if(0<=An){var jn=(Qe=Qe.b).d,rn=Qe.e,bn=Qe.c,Pn=bn[An];jn[Pn]=jn[Qe.a],(bn[jn[Pn]]=Pn)<=--Qe.a&&(Pn<=1||_(rn[jn[Pn>>1]],rn[jn[Pn]])?Ln:nr)(Qe,Pn),rn[An]=null,bn[An]=Qe.b,Qe.b=An}else for(Qe.c[-(An+1)]=null;0<Qe.a&&null===Qe.c[Qe.d[Qe.a-1]];)--Qe.a;le(ct,un.b.e,xt)}}else S(un.b),g(xt,un.b.e),ft.b=Qe.b=!0}else{if(I(xt.b.a,un.a,xt.a)<0)return;Tn(ft).b=ft.b=!0,S(xt.b),g(un.b.e,xt)}return 1}function Oe(ct,ft){var Qe=Xn(ft),xt=ft.a,un=Qe.a,An=xt.a,jn=un.a,rn=xt.b.a,bn=un.b.a,Pn=new St;if(I(rn,ct.a,An),I(bn,ct.a,jn),!(An===jn||Math.min(An.a,rn.a)>Math.max(jn.a,bn.a))){if(_(An,jn)){if(0<I(bn,An,jn))return}else if(I(rn,jn,An)<0)return;var Un,pn,Xt=rn,yn=An,Kt=bn,an=jn;if(_(Xt,yn)||(Un=Xt,Xt=yn,yn=Un),_(Kt,an)||(Un=Kt,Kt=an,an=Un),_(Xt,Kt)||(Un=Xt,Xt=Kt,Kt=Un,Un=yn,yn=an,an=Un),_(Kt,yn)?_(yn,an)?((Un=w(Xt,Kt,yn))+(pn=w(Kt,yn,an))<0&&(Un=-Un,pn=-pn),Pn.b=h(Un,Kt.b,pn,yn.b)):((Un=I(Xt,Kt,yn))+(pn=-I(Xt,an,yn))<0&&(Un=-Un,pn=-pn),Pn.b=h(Un,Kt.b,pn,an.b)):Pn.b=(Kt.b+yn.b)/2,D(Xt,yn)||(Un=Xt,Xt=yn,yn=Un),D(Kt,an)||(Un=Kt,Kt=an,an=Un),D(Xt,Kt)||(Un=Xt,Xt=Kt,Kt=Un,Un=yn,yn=an,an=Un),D(Kt,yn)?D(yn,an)?((Un=d(Xt,Kt,yn))+(pn=d(Kt,yn,an))<0&&(Un=-Un,pn=-pn),Pn.a=h(Un,Kt.a,pn,yn.a)):((Un=f(Xt,Kt,yn))+(pn=-f(Xt,an,yn))<0&&(Un=-Un,pn=-pn),Pn.a=h(Un,Kt.a,pn,an.a)):Pn.a=(Kt.a+yn.a)/2,_(Pn,ct.a)&&(Pn.b=ct.a.b,Pn.a=ct.a.a),Xt=_(An,jn)?An:jn,_(Xt,Pn)&&(Pn.b=Xt.b,Pn.a=Xt.a),C(Pn,An)||C(Pn,jn))return me(ct,ft),0;if(!C(rn,ct.a)&&0<=I(rn,ct.a,Pn)||!C(bn,ct.a)&&I(bn,ct.a,Pn)<=0){if(bn===ct.a)S(xt.b),g(un.b,xt),xt=Xn(ft=ae(ft)).a,ce(ct,Xn(ft),Qe),Te(ct,ft,xt.b.e,xt,xt,!0);else{if(rn!==ct.a)return 0<=I(rn,ct.a,Pn)&&(Tn(ft).b=ft.b=!0,S(xt.b),xt.a.b=ct.a.b,xt.a.a=ct.a.a),void(I(bn,ct.a,Pn)<=0&&(ft.b=Qe.b=!0,S(un.b),un.a.b=ct.a.b,un.a.a=ct.a.a));for(S(un.b),g(xt.e,un.b.e),jn=(An=Qe=ft).a.b.a;(An=Tn(An)).a.b.a===jn;);An=Xn(ft=An).a.b.c,Qe.a=un.b.e,Te(ct,ft,(un=ce(ct,Qe,null)).c,xt.b.c,An,!0)}return 1}S(xt.b),S(un.b),g(un.b.e,xt),xt.a.b=Pn.b,xt.a.a=Pn.a,xt.a.h=fn(ct.e,xt.a),un=[0,0,0,0],Pn=[An.d,rn.d,jn.d,bn.d],(xt=xt.a).g[0]=xt.g[1]=xt.g[2]=0,V(xt,An,rn,un,0),V(xt,jn,bn,un,2),et(ct,xt,Pn,un,!0),Tn(ft).b=ft.b=Qe.b=!0}}function Xe(ct,ft){for(var Qe=Xn(ft);;){for(;Qe.b;)Qe=Xn(ft=Qe);if(!(ft.b||null!==(ft=Tn(Qe=ft))&&ft.b))break;ft.b=!1;var xt=ft.a,un=Qe.a;if(An=xt.b.a!==un.b.a)e:{var An,jn=Xn(An=ft),rn=An.a,bn=jn.a,Pn=void 0;if(_(rn.b.a,bn.b.a)){if(I(rn.b.a,bn.b.a,rn.a)<0){An=!1;break e}Tn(An).b=An.b=!0,Pn=S(rn),g(bn.b,Pn),Pn.d.c=An.d}else{if(0<I(bn.b.a,rn.b.a,bn.a)){An=!1;break e}An.b=jn.b=!0,Pn=S(bn),g(rn.e,bn.b),Pn.b.d.c=An.d}An=!0}if(An&&(Qe.c?(ve(Qe),v(un),un=(Qe=Xn(ft)).a):ft.c&&(ve(ft),v(xt),xt=(ft=Tn(Qe)).a)),xt.a!==un.a)if(xt.b.a===un.b.a||ft.c||Qe.c||xt.b.a!==ct.a&&un.b.a!==ct.a)me(ct,ft);else if(Oe(ct,ft))break;xt.a===un.a&&xt.b.a===un.b.a&&(ee(un,xt),ve(ft),v(xt),ft=Tn(Qe))}}function dt(ct,ft){var Qe=new hn,xt=p(ct.b);xt.a.b=4e150,xt.a.a=ft,xt.b.a.b=-4e150,xt.b.a.a=ft,ct.a=xt.b.a,Qe.a=xt,Qe.f=0,Qe.d=!1,Qe.c=!1,Qe.h=!0,Qe.b=!1,xt=Ut(xt=ct.f,xt.a,Qe),Qe.e=xt}function yt(ct){this.a=new ht,this.b=ct,this.c=Y}function Ut(ct,ft,Qe){for(;null!==(ft=ft.c).b&&!ct.c(ct.b,ft.b,Qe););return ct=new ht(Qe,ft.a,ft),ft.a.c=ct,ft.a=ct}function ht(ct,ft,Qe){this.b=ct||null,this.a=ft||this,this.c=Qe||this}function Lt(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function kt(ct,ft){if(ct.d!==ft)for(;ct.d!==ft;)if(ct.d<ft)switch(ct.d){case 0:lt(ct,100151),ct.u(null);break;case 1:lt(ct,100152),ct.t()}else switch(ct.d){case 2:lt(ct,100154),ct.v();break;case 1:lt(ct,100153),ct.w()}}function lt(ct,ft){ct.p&&ct.p(ft,ct.c)}function It(ct,ft){this.b=ct||this,this.d=ft||this,this.a=null,this.c=!1}function bt(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Pt(){this.c=new St,this.a=new It,this.b=new bt,this.d=new bt,this.b.b=this.d,this.d.b=this.b}function St(ct,ft){this.e=ct||this,this.f=ft||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function zt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new En}function fn(ct,ft){var Qe,xt,un;return ct.e?(2*(xt=++(Qe=ct.b).a)>Qe.f&&(Qe.f*=2,Qe.c=Kn(Qe.c,Qe.f+1)),0===Qe.b?un=xt:(un=Qe.b,Qe.b=Qe.c[Qe.b]),Qe.e[un]=ft,Qe.c[un]=xt,Qe.d[xt]=un,Qe.h&&nr(Qe,xt),un):(Qe=ct.a++,ct.c[Qe]=ft,-(Qe+1))}function $n(ct){if(0===ct.a)return pr(ct.b);var ft=ct.c[ct.d[ct.a-1]];if(0!==ct.b.a&&_(Mn(ct.b),ft))return pr(ct.b);for(;--ct.a,0<ct.a&&null===ct.c[ct.d[ct.a-1]];);return ft}function En(){this.d=Kn([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Kn(ct,ft){for(var Qe=Array(ft),xt=0;xt<ct.length;xt++)Qe[xt]=ct[xt];for(;xt<ft;xt++)Qe[xt]=0;return Qe}function Mn(ct){return ct.e[ct.d[1]]}function pr(ct){var ft=ct.d,Qe=ct.e,xt=ct.c,un=ft[1],An=Qe[un];return 0<ct.a&&(ft[1]=ft[ct.a],xt[ft[1]]=1,Qe[un]=null,xt[un]=ct.b,ct.b=un,0<--ct.a&&Ln(ct,1)),An}function Ln(ct,ft){for(var Qe=ct.d,xt=ct.e,un=ct.c,An=ft,jn=Qe[An];;){var rn=An<<1,bn=(rn<ct.a&&_(xt[Qe[rn+1]],xt[Qe[rn]])&&(rn+=1),Qe[rn]);if(rn>ct.a||_(xt[jn],xt[bn])){un[Qe[An]=jn]=An;break}un[Qe[An]=bn]=An,An=rn}}function nr(ct,ft){for(var Qe=ct.d,xt=ct.e,un=ct.c,An=ft,jn=Qe[An];;){var rn=An>>1,bn=Qe[rn];if(0==rn||_(xt[bn],xt[jn])){un[Qe[An]=jn]=An;break}un[Qe[An]=bn]=An,An=rn}}function hn(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Xn(ct){return ct.e.c.b}function Tn(ct){return ct.e.a.b}(M=Lt.prototype).x=function(){kt(this,0)},M.B=function(ct,ft){switch(ct){case 100142:return;case 100140:switch(ft){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ft)}break;case 100141:return void(this.m=!!ft);default:return void lt(this,100900)}lt(this,100901)},M.y=function(ct){switch(ct){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:lt(this,100900)}return!1},M.A=function(ct,ft,Qe){this.j[0]=ct,this.j[1]=ft,this.j[2]=Qe},M.z=function(ct,ft){var Qe=ft||null;switch(ct){case 100100:case 100106:this.h=Qe;break;case 100104:case 100110:this.l=Qe;break;case 100101:case 100107:this.k=Qe;break;case 100102:case 100108:this.i=Qe;break;case 100103:case 100109:this.p=Qe;break;case 100105:case 100111:this.o=Qe;break;case 100112:this.r=Qe;break;default:lt(this,100900)}},M.C=function(ct,ft){var Qe=!1,xt=[0,0,0];kt(this,2);for(var un=0;un<3;++un){var An=ct[un];An<-1e150&&(An=-1e150,Qe=!0),1e150<An&&(An=1e150,Qe=!0),xt[un]=An}Qe&&lt(this,100155),null===(Qe=this.q)?g(Qe=p(this.b),Qe.b):(S(Qe),Qe=Qe.e),Qe.a.d=ft,Qe.a.g[0]=xt[0],Qe.a.g[1]=xt[1],Qe.a.g[2]=xt[2],Qe.f=1,Qe.b.f=-1,this.q=Qe},M.u=function(ct){kt(this,0),this.d=1,this.b=new Pt,this.c=ct},M.t=function(){kt(this,1),this.d=2,this.q=null},M.v=function(){kt(this,2),this.d=1},M.w=function(){kt(this,1),this.d=0;var ct,ft,An=!1,jn=[Qe=this.j[0],xt=this.j[1],un=this.j[2]];if(0===Qe&&0===xt&&0===un){for(var xt=[-2e150,-2e150,-2e150],rn=[2e150,2e150,2e150],un=[],bn=[],Qe=(An=this.b.c).e;Qe!==An;Qe=Qe.e)for(var Pn=0;Pn<3;++Pn){var Un=Qe.g[Pn];Un<rn[Pn]&&(rn[Pn]=Un,bn[Pn]=Qe),Un>xt[Pn]&&(xt[Pn]=Un,un[Pn]=Qe)}if(xt[1]-rn[1]>xt[Qe=0]-rn[0]&&(Qe=1),rn[Qe=xt[2]-rn[2]>xt[Qe]-rn[Qe]?2:Qe]>=xt[Qe])jn[0]=0,jn[1]=0,jn[2]=1;else{for(rn=bn[Qe],bn=[xt=0,0,0],rn=[rn.g[0]-(un=un[Qe]).g[0],rn.g[1]-un.g[1],rn.g[2]-un.g[2]],Pn=[0,0,0],Qe=An.e;Qe!==An;Qe=Qe.e)Pn[0]=Qe.g[0]-un.g[0],Pn[1]=Qe.g[1]-un.g[1],Pn[2]=Qe.g[2]-un.g[2],bn[0]=rn[1]*Pn[2]-rn[2]*Pn[1],bn[1]=rn[2]*Pn[0]-rn[0]*Pn[2],bn[2]=rn[0]*Pn[1]-rn[1]*Pn[0],xt<(Un=bn[0]*bn[0]+bn[1]*bn[1]+bn[2]*bn[2])&&(xt=Un,jn[0]=bn[0],jn[1]=bn[1],jn[2]=bn[2]);xt<=0&&(jn[0]=jn[1]=jn[2]=0,jn[X(rn)]=1)}An=!0}for(xt=((bn=X(jn))+1)%3,un=(bn+2)%3,bn=0<jn[bn]?1:-1,jn=(Qe=this.b.c).e;jn!==Qe;jn=jn.e)jn.b=jn.g[xt],jn.a=bn*jn.g[un];if(An){for(jn=0,Qe=(An=this.b.a).b;Qe!==An;Qe=Qe.b)if(!((xt=Qe.a).f<=0))for(;jn+=(xt.a.b-xt.b.a.b)*(xt.a.a+xt.b.a.a),(xt=xt.e)!==Qe.a;);if(jn<0)for(An=(jn=this.b.c).e;An!==jn;An=An.e)An.a=-An.a}for(this.n=!1,Qe=(jn=this.b.b).h;Qe!==jn;Qe=An)An=Qe.h,xt=Qe.e,C(Qe.a,Qe.b.a)&&Qe.e.e!==Qe&&(le(this,xt,Qe),v(Qe),xt=(Qe=xt).e),xt.e===Qe&&(xt!==Qe&&(xt!==An&&xt!==An.b||(An=An.h),v(xt)),Qe!==An&&Qe!==An.b||(An=An.h),v(Qe));for(this.e=jn=new zt,Qe=(An=this.b.c).e;Qe!==An;Qe=Qe.e)Qe.h=fn(jn,Qe);var pn=jn;pn.d=[];for(var Xt=0;Xt<pn.a;Xt++)pn.d[Xt]=Xt;pn.d.sort(function(an){return function(Yn,Bt){return _(an[Yn],an[Bt])?1:-1}}(pn.c)),pn.e=!0;for(var yn=pn.b,Kt=yn.a;1<=Kt;--Kt)Ln(yn,Kt);for(yn.h=!0,this.f=new yt(this),dt(this,-4e150),dt(this,4e150);null!==(jn=$n(this.e));){for(;;){e:if(0===(Qe=this.e).a)An=Mn(Qe.b);else if(An=Qe.c[Qe.d[Qe.a-1]],0!==Qe.b.a&&_(Qe=Mn(Qe.b),An)){An=Qe;break e}if(null===An||!C(An,jn))break;An=$n(this.e),le(this,jn.c,An.c)}!function an(Yn,Bt){for(var nn,On=(Yn.a=Bt).c;null===On.i;)if((On=On.c)===Bt.c){On=Yn;var wn=Bt;(mr=new hn).a=wn.c.b;for(var Mr=(zn=On.f).a;null!==(Mr=Mr.a).b&&!zn.c(zn.b,mr,Mr.b););var zn,lr,sr=Xn(zn=Mr.b),mr=zn.a;return Mr=sr.a,void(0===I(mr.b.a,wn,mr.a)?C((mr=zn.a).a,wn)||C(mr.b.a,wn)||(S(mr.b),zn.c&&(v(mr.c),zn.c=!1),g(wn.c,mr),an(On,wn)):(lr=_(Mr.b.a,mr.b.a)?zn:sr,sr=void 0,zn.d||lr.c?(sr=lr===zn?x(wn.c.b,mr.e):x(Mr.b.c.b,wn.c).b,lr.c?xe(lr,sr):((zn=ge(mr=On,zn,sr)).f=Tn(zn).f+zn.a.f,zn.d=ne(mr,zn.f)),an(On,wn)):Te(On,zn,wn.c,wn.c,null,!0)))}zn=(mr=Xn(On=ae(On.i))).a,(mr=ce(Yn,mr,null)).c===zn?(mr=(zn=mr).c,Mr=Xn(On),nn=!1,(sr=On.a).b.a!==(lr=Mr.a).b.a&&Oe(Yn,On),C(sr.a,Yn.a)&&(g(mr.b.e,sr),mr=Xn(On=ae(On)).a,ce(Yn,Xn(On),Mr),nn=!0),C(lr.a,Yn.a)&&(g(zn,lr.b.e),zn=ce(Yn,Mr,null),nn=!0),nn?Te(Yn,On,zn.c,mr,mr,!0):(wn=_(lr.a,sr.a)?lr.b.e:sr,Te(Yn,On,wn=x(zn.c.b,wn),wn.c,wn.c,!1),wn.b.i.c=!0,Xe(Yn,On))):Te(Yn,On,mr.c,zn,zn,!0)}(this,jn)}for(this.a=this.f.a.a.b.a.a,jn=0;null!==(An=this.f.a.a.b);)An.h||++jn,ve(An);for(this.f=null,(jn=this.e).b=null,jn.d=null,this.e=jn.c=null,Qe=(jn=this.b).a.b;Qe!==jn.a;Qe=An)An=Qe.b,(Qe=Qe.a).e.e===Qe&&(ee(Qe.c,Qe),v(Qe));if(!this.n){if(jn=this.b,this.m)for(Qe=jn.b.h;Qe!==jn.b;Qe=An)An=Qe.h,Qe.b.d.c!==Qe.d.c?Qe.f=Qe.d.c?1:-1:v(Qe);else for(Qe=jn.a.b;Qe!==jn.a;Qe=An)if(An=Qe.b,Qe.c){for(Qe=Qe.a;_(Qe.b.a,Qe.a);Qe=Qe.c.b);for(;_(Qe.a,Qe.b.a);Qe=Qe.e);for(xt=Qe.c.b,un=void 0;Qe.e!==xt;)if(_(Qe.b.a,xt.a)){for(;xt.e!==Qe&&(_((ft=xt.e).b.a,ft.a)||I(xt.a,xt.b.a,xt.e.b.a)<=0);)xt=(un=x(xt.e,xt)).b;xt=xt.c.b}else{for(;xt.e!==Qe&&(_((ct=Qe.c.b).a,ct.b.a)||0<=I(Qe.b.a,Qe.a,Qe.c.b.a));)Qe=(un=x(Qe,Qe.c.b)).b;Qe=Qe.e}for(;xt.e.e!==Qe;)xt=(un=x(xt.e,xt)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(An=(jn=this.b).a.b;An!==jn.a;An=An.b)if(An.c){for(this.h&&this.h(2,this.c),Qe=An.a;this.k&&this.k(Qe.a.d,this.c),(Qe=Qe.e)!==An.a;);this.i&&this.i(this.c)}}else{for(An=!!this.l,Qe=!1,xt=-1,un=(jn=this.b).a.d;un!==jn.a;un=un.d)if(un.c)for(Qe||(this.h&&this.h(4,this.c),Qe=!0),bn=un.a;An&&xt!==(rn=bn.b.d.c?0:1)&&(xt=rn,this.l&&this.l(!!xt,this.c)),this.k&&this.k(bn.a.d,this.c),(bn=bn.e)!==un.a;);Qe&&this.i&&this.i(this.c)}if(this.r){for(Qe=(jn=this.b).a.b;Qe!==jn.a;Qe=An)if(An=Qe.b,!Qe.c){for(un=(xt=Qe.a).e,bn=void 0;un=(bn=un).e,(bn.d=null)===bn.b.d&&(bn.c===bn?G(bn.a,null):(bn.a.c=bn.c,N(bn,bn.b.e)),(rn=bn.b).c===rn?G(rn.a,null):(rn.a.c=rn.c,N(rn,rn.b.e)),z(bn)),bn!==xt;);xt=Qe.d,((Qe=Qe.b).d=xt).b=Qe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Lt,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Lt.prototype.gluDeleteTess=Lt.prototype.x,Lt.prototype.gluTessProperty=Lt.prototype.B,Lt.prototype.gluGetTessProperty=Lt.prototype.y,Lt.prototype.gluTessNormal=Lt.prototype.A,Lt.prototype.gluTessCallback=Lt.prototype.z,Lt.prototype.gluTessVertex=Lt.prototype.C,Lt.prototype.gluTessBeginPolygon=Lt.prototype.u,Lt.prototype.gluTessBeginContour=Lt.prototype.t,Lt.prototype.gluTessEndContour=Lt.prototype.v,Lt.prototype.gluTessEndPolygon=Lt.prototype.w,void 0!==_e&&(_e.exports=this.libtess)},{}],256:[function(a,_e,q){"use strict";function C(_,w,I,D){for(var d=_[w++],f=1<<d,h=1+f,p=1+h,g=d+1,v=(1<<g)-1,S=0,x=0,E=0,N=_[w++],Z=new Int32Array(4096),K=null;;){for(;S<16&&0!==N;)x|=_[w++]<<S,S+=8,1===N?N=_[w++]:--N;if(S<g)break;var z=x&v;if(x>>=g,S-=g,z==f)p=1+h,v=(1<<(g=d+1))-1,K=null;else{if(z==h)break;for(var G=z<p?z:K,ie=0,X=G;f<X;)X=Z[X]>>8,++ie;var ee=X;if(D<E+ie+(G!==z?1:0))return void console.log("Warning, gif stream longer than expected.");I[E++]=ee;var Y=E+=ie;for(G!==z&&(I[E++]=ee),X=G;ie--;)I[--Y]=255&(X=Z[X]),X>>=8;null!==K&&p<4096&&(Z[p++]=K<<8|ee,v+1<=p&&g<12&&(++g,v=v<<1|1)),K=z}}E!==D&&console.log("Warning, gif stream shorter than expected.")}try{q.GifWriter=function M(_,w,I,D){var d=0,f=void 0===(D=void 0===D?{}:D).loop?null:D.loop,h=void 0===D.palette?null:D.palette;if(w<=0||I<=0||65535<w||65535<I)throw new Error("Width/Height invalid.");function p(K){if((K=K.length)<2||256<K||K&K-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return K}_[d++]=71,_[d++]=73,_[d++]=70,_[d++]=56,_[d++]=57,_[d++]=97;var g=0,v=0;if(null!==h){for(var S=p(h);S>>=1;)++g;if(S=1<<g,--g,void 0!==D.background){if(S<=(v=D.background))throw new Error("Background index out of range.");if(0===v)throw new Error("Background index explicitly passed as 0.")}}if(_[d++]=255&w,_[d++]=w>>8&255,_[d++]=255&I,_[d++]=I>>8&255,_[d++]=(null!==h?128:0)|g,_[d++]=v,_[d++]=0,null!==h)for(var x=0,E=h.length;x<E;++x){var N=h[x];_[d++]=N>>16&255,_[d++]=N>>8&255,_[d++]=255&N}if(null!==f){if(f<0||65535<f)throw new Error("Loop count invalid.");_[d++]=33,_[d++]=255,_[d++]=11,_[d++]=78,_[d++]=69,_[d++]=84,_[d++]=83,_[d++]=67,_[d++]=65,_[d++]=80,_[d++]=69,_[d++]=50,_[d++]=46,_[d++]=48,_[d++]=3,_[d++]=1,_[d++]=255&f,_[d++]=f>>8&255,_[d++]=0}var Z=!1;this.addFrame=function(K,z,G,ie,X,ee){if(!0===Z&&(--d,Z=!1),ee=void 0===ee?{}:ee,K<0||z<0||65535<K||65535<z)throw new Error("x/y invalid.");if(G<=0||ie<=0||65535<G||65535<ie)throw new Error("Width/Height invalid.");if(X.length<G*ie)throw new Error("Not enough pixels for the frame size.");var Y=!0,ve=ee.palette;if(null==ve&&(Y=!1,ve=h),null==ve)throw new Error("Must supply either a local or global palette.");for(var ae=p(ve),xe=0;ae>>=1;)++xe;ae=1<<xe;var ge=void 0===ee.delay?0:ee.delay,ne=void 0===ee.disposal?0:ee.disposal;if(ne<0||3<ne)throw new Error("Disposal out of range.");var J=!1,ce=0;if(null!=ee.transparent&&(J=!0,(ce=ee.transparent)<0||ae<=ce))throw new Error("Transparent color index.");if(0===ne&&!J&&0===ge||(_[d++]=33,_[d++]=249,_[d++]=4,_[d++]=ne<<2|(!0===J?1:0),_[d++]=255&ge,_[d++]=ge>>8&255,_[d++]=ce,_[d++]=0),_[d++]=44,_[d++]=255&K,_[d++]=K>>8&255,_[d++]=255&z,_[d++]=z>>8&255,_[d++]=255&G,_[d++]=G>>8&255,_[d++]=255&ie,_[d++]=ie>>8&255,_[d++]=!0===Y?128|xe-1:0,!0===Y)for(var Te=0,et=ve.length;Te<et;++Te){var le=ve[Te];_[d++]=le>>16&255,_[d++]=le>>8&255,_[d++]=255&le}return d=function(V,me,Oe,Xe){V[me++]=Oe;var dt=me++,yt=1<<Oe,Ut=yt-1,ht=1+yt,Lt=1+ht,kt=Oe+1,lt=0,It=0;function bt(pr){for(;pr<=lt;)V[me++]=255&It,It>>=8,lt-=8,me===dt+256&&(V[dt]=255,dt=me++)}function Pt(pr){It|=pr<<lt,lt+=kt,bt(8)}var St=Xe[0]&Ut,zt={};Pt(yt);for(var fn=1,$n=Xe.length;fn<$n;++fn){var En=Xe[fn]&Ut,Kn=St<<8|En,Mn=zt[Kn];if(void 0===Mn){for(It|=St<<lt,lt+=kt;8<=lt;)V[me++]=255&It,It>>=8,lt-=8,me===dt+256&&(V[dt]=255,dt=me++);4096===Lt?(Pt(yt),Lt=1+ht,kt=Oe+1,zt={}):(1<<kt<=Lt&&++kt,zt[Kn]=Lt++),St=En}else St=Mn}return Pt(St),Pt(ht),bt(1),dt+1===me?V[dt]=0:(V[dt]=me-dt-1,V[me++]=0),me}(_,d,xe<2?2:xe,X)},this.end=function(){return!1===Z&&(_[d++]=59,Z=!0),d},this.getOutputBuffer=function(){return _},this.setOutputBuffer=function(K){_=K},this.getOutputBufferPosition=function(){return d},this.setOutputBufferPosition=function(K){d=K}},q.GifReader=function(_){var w=0;if(71!==_[w++]||73!==_[w++]||70!==_[w++]||56!==_[w++]||56!=(_[w++]+1&253)||97!==_[w++])throw new Error("Invalid GIF 87a/89a header.");var I=_[w++]|_[w++]<<8,D=_[w++]|_[w++]<<8,d=_[w++],h=(w++,w++,null),p=null,g=(d>>7&&(h=w,w+=3*(p=1<<1+(7&d))),!0),v=[],S=0,x=null,E=0,N=null;for(this.width=I,this.height=D;g&&w<_.length;)switch(_[w++]){case 33:switch(_[w++]){case 255:if(11!==_[w]||78==_[w+1]&&69==_[w+2]&&84==_[w+3]&&83==_[w+4]&&67==_[w+5]&&65==_[w+6]&&80==_[w+7]&&69==_[w+8]&&50==_[w+9]&&46==_[w+10]&&48==_[w+11]&&3==_[w+12]&&1==_[w+13]&&0==_[w+16])w+=14,N=_[w++]|_[w++]<<8,w++;else for(w+=12;;){if(!(0<=(K=_[w++])))throw Error("Invalid block size");if(0===K)break;w+=K}break;case 249:if(4!==_[w++]||0!==_[w+4])throw new Error("Invalid graphics extension block.");var Z=_[w++];S=_[w++]|_[w++]<<8,x=_[w++],!(1&Z)&&(x=null),E=Z>>2&7,w++;break;case 254:for(;;){if(!(0<=(K=_[w++])))throw Error("Invalid block size");if(0===K)break;w+=K}break;default:throw new Error("Unknown graphic control label: 0x"+_[w-1].toString(16))}break;case 44:var K,z=_[w++]|_[w++]<<8,G=_[w++]|_[w++]<<8,ie=_[w++]|_[w++]<<8,X=_[w++]|_[w++]<<8,ee=(ge=_[w++])>>6&1,ve=h,xe=p,ae=!1,ge=(ge>>7&&(ae=!0,ve=w,w+=3*(xe=1<<1+(7&ge))),w);for(w++;;){if(!(0<=(K=_[w++])))throw Error("Invalid block size");if(0===K)break;w+=K}v.push({x:z,y:G,width:ie,height:X,has_local_palette:ae,palette_offset:ve,palette_size:xe,data_offset:ge,data_length:w-ge,transparent_index:x,interlaced:!!ee,delay:S,disposal:E});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+_[w-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return N},this.frameInfo=function(ne){if(ne<0||ne>=v.length)throw new Error("Frame index out of range.");return v[ne]},this.decodeAndBlitFrameBGRA=function(ne,J){for(var ce=(ne=this.frameInfo(ne)).width*ne.height,Te=new Uint8Array(ce),et=(C(_,ne.data_offset,Te,ce),ne.palette_offset),le=ne.transparent_index,V=(null===le&&(le=256),ne.width),me=I-V,Oe=V,Xe=4*(ne.y*I+ne.x),dt=4*((ne.y+ne.height)*I+ne.x),yt=Xe,Ut=4*me,ht=(!0===ne.interlaced&&(Ut+=4*I*7),8),Lt=0,kt=Te.length;Lt<kt;++Lt){var lt,It,bt=Te[Lt];0===Oe&&(Oe=V,dt<=(yt+=Ut)&&(Ut=4*me+4*I*(ht-1),yt=Xe+(V+me)*(ht<<1),ht>>=1)),bt===le?yt+=4:(lt=_[et+3*bt],It=_[et+3*bt+1],J[yt++]=bt=_[et+3*bt+2],J[yt++]=It,J[yt++]=lt,J[yt++]=255),--Oe}},this.decodeAndBlitFrameRGBA=function(ne,J){for(var ce=(ne=this.frameInfo(ne)).width*ne.height,Te=new Uint8Array(ce),et=(C(_,ne.data_offset,Te,ce),ne.palette_offset),le=ne.transparent_index,V=(null===le&&(le=256),ne.width),me=I-V,Oe=V,Xe=4*(ne.y*I+ne.x),dt=4*((ne.y+ne.height)*I+ne.x),yt=Xe,Ut=4*me,ht=(!0===ne.interlaced&&(Ut+=4*I*7),8),Lt=0,kt=Te.length;Lt<kt;++Lt){var lt,It,bt=Te[Lt];0===Oe&&(Oe=V,dt<=(yt+=Ut)&&(Ut=4*me+4*I*(ht-1),yt=Xe+(V+me)*(ht<<1),ht>>=1)),bt===le?yt+=4:(lt=_[et+3*bt],It=_[et+3*bt+1],bt=_[et+3*bt+2],J[yt++]=lt,J[yt++]=It,J[yt++]=bt,J[yt++]=255),--Oe}}}}catch{}},{}],257:[function(a,_e,q){(function(M){var _;_=function(w){"use strict";function I(Ce){if(null==this)throw TypeError();var W,re=String(this),he=re.length;if(!((Ce=(Ce=Ce?Number(Ce):0)!=Ce?0:Ce)<0||he<=Ce))return 55296<=(W=re.charCodeAt(Ce))&&W<=56319&&Ce+1<he&&56320<=(he=re.charCodeAt(Ce+1))&&he<=57343?1024*(W-55296)+he-56320+65536:W}String.prototype.codePointAt||((D=function(){try{var R={},W=Object.defineProperty,re=W(R,R,R)&&W}catch{}return re}())?D(String.prototype,"codePointAt",{value:I,configurable:!0,writable:!0}):String.prototype.codePointAt=I);var D;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function p(R,W){this.source=R,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=W,this.destLen=0,this.ltree=new h,this.dtree=new h}var g=new h,v=new h,S=new Uint8Array(30),x=new Uint16Array(30),E=new Uint8Array(30),N=new Uint16Array(30),Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K=new h,z=new Uint8Array(320);function G(R,W,re,he){for(var Ce,We=0;We<re;++We)R[We]=0;for(We=0;We<30-re;++We)R[We+re]=We/re|0;for(Ce=he,We=0;We<30;++We)W[We]=Ce,Ce+=1<<R[We]}var ie=new Uint16Array(16);function X(R,W,re,he){for(var Ce,We=0;We<16;++We)R.table[We]=0;for(We=0;We<he;++We)R.table[W[re+We]]++;for(We=Ce=R.table[0]=0;We<16;++We)ie[We]=Ce,Ce+=R.table[We];for(We=0;We<he;++We)W[re+We]&&(R.trans[ie[W[re+We]]++]=We)}function ee(R,W,re){if(!W)return re;for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;var he=R.tag&65535>>>16-W;return R.tag>>>=W,R.bitcount-=W,he+re}function Y(R,W){for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;for(var re=0,he=0,Ce=0,We=R.tag;he=2*he+(1&We),We>>>=1,re+=W.table[++Ce],0<=(he-=W.table[Ce]););return R.tag=We,R.bitcount-=Ce,W.trans[re+he]}function ve(R,W,re){for(;;){if(256===(he=Y(R,W)))return 0;if(he<256)R.dest[R.destLen++]=he;else for(var Ce,We=ee(R,S[he-=257],x[he]),he=Y(R,re),Je=Ce=R.destLen-ee(R,E[he],N[he]);Je<Ce+We;++Je)R.dest[R.destLen++]=R.dest[Je]}}for(var xe=g,ae=v,ge=0;ge<7;++ge)xe.table[ge]=0;for(xe.table[7]=24,xe.table[8]=152,xe.table[9]=112,ge=0;ge<24;++ge)xe.trans[ge]=256+ge;for(ge=0;ge<144;++ge)xe.trans[24+ge]=ge;for(ge=0;ge<8;++ge)xe.trans[168+ge]=280+ge;for(ge=0;ge<112;++ge)xe.trans[176+ge]=144+ge;for(ge=0;ge<5;++ge)ae.table[ge]=0;for(ae.table[5]=32,ge=0;ge<32;++ge)ae.trans[ge]=ge;G(S,x,4,3),G(E,N,2,1),S[28]=0,x[28]=258;var ne=function(R,W){var re,he,Ce,We=new p(R,W);do{switch(void 0,(he=We).bitcount--||(he.tag=he.source[he.sourceIndex++],he.bitcount=7),Ce=1&he.tag,he.tag>>>=1,he=Ce,ee(We,2,0)){case 0:re=function(Fn){for(var Yr,Gr;8<Fn.bitcount;)Fn.sourceIndex--,Fn.bitcount-=8;if((Yr=256*Fn.source[Fn.sourceIndex+1]+Fn.source[Fn.sourceIndex])!==(65535&~(256*Fn.source[Fn.sourceIndex+3]+Fn.source[Fn.sourceIndex+2])))return-3;for(Fn.sourceIndex+=4,Gr=Yr;Gr;--Gr)Fn.dest[Fn.destLen++]=Fn.source[Fn.sourceIndex++];return Fn.bitcount=0,0}(We);break;case 1:re=ve(We,g,v);break;case 2:Qt=at=Re=Sn=Je=ke=void 0;for(var Je,_t=We,Yt=We.ltree,Ht=We.dtree,xn=ee(_t,5,257),Le=ee(_t,5,1),be=ee(_t,4,4),ke=0;ke<19;++ke)z[ke]=0;for(ke=0;ke<be;++ke){var Re=ee(_t,3,0);z[Z[ke]]=Re}for(X(K,z,0,19),Je=0;Je<xn+Le;){var at=Y(_t,K);switch(at){case 16:for(var Qt=z[Je-1],Sn=ee(_t,2,3);Sn;--Sn)z[Je++]=Qt;break;case 17:for(Sn=ee(_t,3,3);Sn;--Sn)z[Je++]=0;break;case 18:for(Sn=ee(_t,7,11);Sn;--Sn)z[Je++]=0;break;default:z[Je++]=at}}X(Yt,z,0,xn),X(Ht,z,xn,Le),re=ve(We,We.ltree,We.dtree);break;default:re=-3}if(0!==re)throw new Error("Data error")}while(!he);return We.destLen<We.dest.length?"function"==typeof We.dest.slice?We.dest.slice(0,We.destLen):We.dest.subarray(0,We.destLen):We.dest};function J(R,W,re,he,Ce){return Math.pow(1-Ce,3)*R+3*Math.pow(1-Ce,2)*Ce*W+3*(1-Ce)*Math.pow(Ce,2)*re+Math.pow(Ce,3)*he}function ce(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Te(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function et(R){throw new Error(R)}function le(R,W){R||et(W)}ce.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},ce.prototype.addPoint=function(R,W){"number"==typeof R&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=R,this.x2=R),R<this.x1&&(this.x1=R),R>this.x2&&(this.x2=R)),"number"==typeof W&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=W,this.y2=W),W<this.y1&&(this.y1=W),W>this.y2&&(this.y2=W))},ce.prototype.addX=function(R){this.addPoint(R,null)},ce.prototype.addY=function(R){this.addPoint(null,R)},ce.prototype.addBezier=function(R,W,re,he,Ce,We,Je,_t){var Yt=[R,W],Ht=[re,he],xn=[Ce,We],Le=[Je,_t];this.addPoint(R,W),this.addPoint(Je,_t);for(var be=0;be<=1;be++){var ke,Re=6*Yt[be]-12*Ht[be]+6*xn[be],at=-3*Yt[be]+9*Ht[be]-9*xn[be]+3*Le[be],Qt=3*Ht[be]-3*Yt[be];0==at?0==Re||0<(ke=-Qt/Re)&&ke<1&&(0===be&&this.addX(J(Yt[be],Ht[be],xn[be],Le[be],ke)),1===be&&this.addY(J(Yt[be],Ht[be],xn[be],Le[be],ke))):(ke=Math.pow(Re,2)-4*Qt*at)<0||(0<(Qt=(-Re+Math.sqrt(ke))/(2*at))&&Qt<1&&(0===be&&this.addX(J(Yt[be],Ht[be],xn[be],Le[be],Qt)),1===be&&this.addY(J(Yt[be],Ht[be],xn[be],Le[be],Qt))),0<(Qt=(-Re-Math.sqrt(ke))/(2*at))&&Qt<1&&(0===be&&this.addX(J(Yt[be],Ht[be],xn[be],Le[be],Qt)),1===be&&this.addY(J(Yt[be],Ht[be],xn[be],Le[be],Qt))))}},ce.prototype.addQuad=function(R,W,re,he,Ce,We){this.addBezier(R,W,re=R+2/3*(re-R),he=W+2/3*(he-W),re+1/3*(Ce-R),he+1/3*(We-W),Ce,We)},Te.prototype.moveTo=function(R,W){this.commands.push({type:"M",x:R,y:W})},Te.prototype.lineTo=function(R,W){this.commands.push({type:"L",x:R,y:W})},Te.prototype.curveTo=Te.prototype.bezierCurveTo=function(R,W,re,he,Ce,We){this.commands.push({type:"C",x1:R,y1:W,x2:re,y2:he,x:Ce,y:We})},Te.prototype.quadTo=Te.prototype.quadraticCurveTo=function(R,W,re,he){this.commands.push({type:"Q",x1:R,y1:W,x:re,y:he})},Te.prototype.close=Te.prototype.closePath=function(){this.commands.push({type:"Z"})},Te.prototype.extend=function(R){var W;if(R.commands)R=R.commands;else if(R instanceof ce)return this.moveTo((W=R).x1,W.y1),this.lineTo(W.x2,W.y1),this.lineTo(W.x2,W.y2),this.lineTo(W.x1,W.y2),void this.close();Array.prototype.push.apply(this.commands,R)},Te.prototype.getBoundingBox=function(){for(var R=new ce,W=0,re=0,he=0,Ce=0,We=0;We<this.commands.length;We++){var Je=this.commands[We];switch(Je.type){case"M":R.addPoint(Je.x,Je.y),W=he=Je.x,re=Ce=Je.y;break;case"L":R.addPoint(Je.x,Je.y),he=Je.x,Ce=Je.y;break;case"Q":R.addQuad(he,Ce,Je.x1,Je.y1,Je.x,Je.y),he=Je.x,Ce=Je.y;break;case"C":R.addBezier(he,Ce,Je.x1,Je.y1,Je.x2,Je.y2,Je.x,Je.y),he=Je.x,Ce=Je.y;break;case"Z":he=W,Ce=re;break;default:throw new Error("Unexpected path command "+Je.type)}}return R.isEmpty()&&R.addPoint(0,0),R},Te.prototype.draw=function(R){R.beginPath();for(var W=0;W<this.commands.length;W+=1){var re=this.commands[W];"M"===re.type?R.moveTo(re.x,re.y):"L"===re.type?R.lineTo(re.x,re.y):"C"===re.type?R.bezierCurveTo(re.x1,re.y1,re.x2,re.y2,re.x,re.y):"Q"===re.type?R.quadraticCurveTo(re.x1,re.y1,re.x,re.y):"Z"===re.type&&R.closePath()}this.fill&&(R.fillStyle=this.fill,R.fill()),this.stroke&&(R.strokeStyle=this.stroke,R.lineWidth=this.strokeWidth,R.stroke())},Te.prototype.toPathData=function(R){function W(){for(var We=arguments,Je="",_t=0;_t<arguments.length;_t+=1){var Yt=We[_t];0<=Yt&&0<_t&&(Je+=" "),Je+=Math.round(Yt)===Yt?""+Math.round(Yt):Yt.toFixed(R)}return Je}R=void 0!==R?R:2;for(var re="",he=0;he<this.commands.length;he+=1){var Ce=this.commands[he];"M"===Ce.type?re+="M"+W(Ce.x,Ce.y):"L"===Ce.type?re+="L"+W(Ce.x,Ce.y):"C"===Ce.type?re+="C"+W(Ce.x1,Ce.y1,Ce.x2,Ce.y2,Ce.x,Ce.y):"Q"===Ce.type?re+="Q"+W(Ce.x1,Ce.y1,Ce.x,Ce.y):"Z"===Ce.type&&(re+="Z")}return re},Te.prototype.toSVG=function(R){var W=(W='<path d="')+this.toPathData(R)+'"';return this.fill&&"black"!==this.fill&&(W+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(W+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),W+"/>"},Te.prototype.toDOMElement=function(W){W=this.toPathData(W);var re=document.createElementNS("http://www.w3.org/2000/svg","path");return re.setAttribute("d",W),re};var V={fail:et,argument:le,assert:le},me={},Oe={},Xe={};function dt(R){return function(){return R}}Oe.BYTE=function(R){return V.argument(0<=R&&R<=255,"Byte value should be between 0 and 255."),[R]},Xe.BYTE=dt(1),Oe.CHAR=function(R){return[R.charCodeAt(0)]},Xe.CHAR=dt(1),Oe.CHARARRAY=function(R){for(var W=[],re=0;re<R.length;re+=1)W[re]=R.charCodeAt(re);return W},Xe.CHARARRAY=function(R){return R.length},Oe.USHORT=function(R){return[R>>8&255,255&R]},Xe.USHORT=dt(2),Oe.SHORT=function(R){return[(R=32768<=R?-(65536-R):R)>>8&255,255&R]},Xe.SHORT=dt(2),Oe.UINT24=function(R){return[R>>16&255,R>>8&255,255&R]},Xe.UINT24=dt(3),Oe.ULONG=function(R){return[R>>24&255,R>>16&255,R>>8&255,255&R]},Xe.ULONG=dt(4),Oe.LONG=function(R){return[(R=2147483648<=R?-(4294967296-R):R)>>24&255,R>>16&255,R>>8&255,255&R]},Xe.LONG=dt(4),Oe.FIXED=Oe.ULONG,Xe.FIXED=Xe.ULONG,Oe.FWORD=Oe.SHORT,Xe.FWORD=Xe.SHORT,Oe.UFWORD=Oe.USHORT,Xe.UFWORD=Xe.USHORT,Oe.LONGDATETIME=function(R){return[0,0,0,0,R>>24&255,R>>16&255,R>>8&255,255&R]},Xe.LONGDATETIME=dt(8),Oe.TAG=function(R){return V.argument(4===R.length,"Tag should be exactly 4 ASCII characters."),[R.charCodeAt(0),R.charCodeAt(1),R.charCodeAt(2),R.charCodeAt(3)]},Xe.TAG=dt(4),Oe.Card8=Oe.BYTE,Xe.Card8=Xe.BYTE,Oe.Card16=Oe.USHORT,Xe.Card16=Xe.USHORT,Oe.OffSize=Oe.BYTE,Xe.OffSize=Xe.BYTE,Oe.SID=Oe.USHORT,Xe.SID=Xe.USHORT,Oe.NUMBER=function(R){return-107<=R&&R<=107?[R+139]:108<=R&&R<=1131?[247+((R-=108)>>8),255&R]:-1131<=R&&R<=-108?[251+((R=-R-108)>>8),255&R]:-32768<=R&&R<=32767?Oe.NUMBER16(R):Oe.NUMBER32(R)},Xe.NUMBER=function(R){return Oe.NUMBER(R).length},Oe.NUMBER16=function(R){return[28,R>>8&255,255&R]},Xe.NUMBER16=dt(3),Oe.NUMBER32=function(R){return[29,R>>24&255,R>>16&255,R>>8&255,255&R]},Xe.NUMBER32=dt(5),Oe.REAL=function(R){for(var W=R.toString(),re=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(W),he=(re&&(re=parseFloat("1e"+((re[2]?+re[2]:0)+re[1].length)),W=(Math.round(R*re)/re).toString()),""),Ce=0,We=W.length;Ce<We;Ce+=1){var Je=W[Ce];he+="e"===Je?"-"===W[++Ce]?"c":"b":"."===Je?"a":"-"===Je?"e":Je}for(var _t=[30],Yt=0,Ht=(he+=1&he.length?"f":"ff").length;Yt<Ht;Yt+=2)_t.push(parseInt(he.substr(Yt,2),16));return _t},Xe.REAL=function(R){return Oe.REAL(R).length},Oe.NAME=Oe.CHARARRAY,Xe.NAME=Xe.CHARARRAY,Oe.STRING=Oe.CHARARRAY,Xe.STRING=Xe.CHARARRAY,me.UTF8=function(R,W,re){for(var he=[],Ce=re,We=0;We<Ce;We++,W+=1)he[We]=R.getUint8(W);return String.fromCharCode.apply(null,he)},me.UTF16=function(R,W,re){for(var he=[],Ce=re/2,We=0;We<Ce;We++,W+=2)he[We]=R.getUint16(W);return String.fromCharCode.apply(null,he)},Oe.UTF16=function(R){for(var W=[],re=0;re<R.length;re+=1){var he=R.charCodeAt(re);W[W.length]=he>>8&255,W[W.length]=255&he}return W},Xe.UTF16=function(R){return 2*R.length};var yt,Ut={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},ht=(me.MACSTRING=function(R,W,re,he){var Ce=Ut[he];if(void 0!==Ce){for(var We="",Je=0;Je<re;Je++){var _t=R.getUint8(W+Je);We+=_t<=127?String.fromCharCode(_t):Ce[127&_t]}return We}},"function"==typeof WeakMap&&new WeakMap);function Lt(R){return-128<=R&&R<=127}Oe.MACSTRING=function(R,W){var re=function(Je){if(!yt)for(var _t in yt={},Ut)yt[_t]=new String(_t);var Yt=yt[Je];if(void 0!==Yt){if(ht){var Ht=ht.get(Yt);if(void 0!==Ht)return Ht}var xn=Ut[Je];if(void 0!==xn){for(var Le={},be=0;be<xn.length;be++)Le[xn.charCodeAt(be)]=be+128;return ht&&ht.set(Yt,Le),Le}}}(W);if(void 0!==re){for(var he=[],Ce=0;Ce<R.length;Ce++){var We=R.charCodeAt(Ce);if(128<=We&&void 0===(We=re[We]))return;he[Ce]=We}return he}},Xe.MACSTRING=function(R,W){return void 0!==(R=Oe.MACSTRING(R,W))?R.length:0},Oe.VARDELTAS=function(R){for(var he=0,W=[];he<R.length;){var re=R[he];he=(0===re?function(Ce,We,Je){for(var _t=0,Yt=Ce.length;We<Yt&&_t<64&&0===Ce[We];)++We,++_t;return Je.push(128|_t-1),We}:-128<=re&&re<=127?function(Ce,We,Je){for(var _t=0,Yt=Ce.length,Ht=We;Ht<Yt&&_t<64;){var xn=Ce[Ht];if(!Lt(xn)||0===xn&&Ht+1<Yt&&0===Ce[Ht+1])break;++Ht,++_t}Je.push(_t-1);for(var Le=We;Le<Ht;++Le)Je.push(Ce[Le]+256&255);return Ht}:function(Ce,We,Je){for(var _t=0,Yt=Ce.length,Ht=We;Ht<Yt&&_t<64;){var xn=Ce[Ht];if(0===xn||Lt(xn)&&Ht+1<Yt&&Lt(Ce[Ht+1]))break;++Ht,++_t}Je.push(64|_t-1);for(var Le=We;Le<Ht;++Le){var be=Ce[Le];Je.push(be+65536>>8&255,be+256&255)}return Ht})(R,he,W)}return W},Oe.INDEX=function(R){for(var W=1,re=[W],he=[],Ce=0;Ce<R.length;Ce+=1){var We=Oe.OBJECT(R[Ce]);Array.prototype.push.apply(he,We),re.push(W+=We.length)}if(0===he.length)return[0,0];for(var Je=[],_t=1+Math.floor(Math.log(W)/Math.log(2))/8|0,Yt=[void 0,Oe.BYTE,Oe.USHORT,Oe.UINT24,Oe.ULONG][_t],Ht=0;Ht<re.length;Ht+=1){var xn=Yt(re[Ht]);Array.prototype.push.apply(Je,xn)}return Array.prototype.concat(Oe.Card16(R.length),Oe.OffSize(_t),Je,he)},Xe.INDEX=function(R){return Oe.INDEX(R).length},Oe.DICT=function(R){for(var W=[],re=Object.keys(R),he=re.length,Ce=0;Ce<he;Ce+=1){var We=parseInt(re[Ce],0),Je=R[We];W=(W=W.concat(Oe.OPERAND(Je.value,Je.type))).concat(Oe.OPERATOR(We))}return W},Xe.DICT=function(R){return Oe.DICT(R).length},Oe.OPERATOR=function(R){return R<1200?[R]:[12,R-1200]},Oe.OPERAND=function(R,W){var re=[];if(Array.isArray(W))for(var he=0;he<W.length;he+=1)V.argument(R.length===W.length,"Not enough arguments given for type"+W),re=re.concat(Oe.OPERAND(R[he],W[he]));else if("SID"===W)re=re.concat(Oe.NUMBER(R));else if("offset"===W)re=re.concat(Oe.NUMBER32(R));else if("number"===W)re=re.concat(Oe.NUMBER(R));else{if("real"!==W)throw new Error("Unknown operand type "+W);re=re.concat(Oe.REAL(R))}return re},Oe.OP=Oe.BYTE,Xe.OP=Xe.BYTE;var kt="function"==typeof WeakMap&&new WeakMap;function lt(R,W,re){for(var he=0;he<W.length;he+=1){var Ce=W[he];this[Ce.name]=Ce.value}if(this.tableName=R,this.fields=W,re)for(var We=Object.keys(re),Je=0;Je<We.length;Je+=1){var _t=We[Je];void 0!==this[_t]&&(this[_t]=re[_t])}}function It(R,W,re){void 0===re&&(re=W.length);var he=new Array(W.length+1);he[0]={name:R+"Count",type:"USHORT",value:re};for(var Ce=0;Ce<W.length;Ce++)he[Ce+1]={name:R+Ce,type:"USHORT",value:W[Ce]};return he}function bt(R,W,re){var he=W.length,Ce=new Array(he+1);Ce[0]={name:R+"Count",type:"USHORT",value:he};for(var We=0;We<he;We++)Ce[We+1]={name:R+We,type:"TABLE",value:re(W[We],We)};return Ce}function Pt(R,W,re){var he=W.length,Ce=[];Ce[0]={name:R+"Count",type:"USHORT",value:he};for(var We=0;We<he;We++)Ce=Ce.concat(re(W[We],We));return Ce}function St(R){1===R.format?lt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(It("glyph",R.glyphs))):V.assert(!1,"Can't create coverage table format 2 yet.")}function zt(R){lt.call(this,"scriptListTable",Pt("scriptRecord",R,function(W,re){var he=W.script,Ce=he.defaultLangSys;return V.assert(!!Ce,"Unable to write GSUB: script "+W.tag+" has no default language system."),[{name:"scriptTag"+re,type:"TAG",value:W.tag},{name:"script"+re,type:"TABLE",value:new lt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new lt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Ce.reqFeatureIndex}].concat(It("featureIndex",Ce.featureIndexes)))}].concat(Pt("langSys",he.langSysRecords,function(We,Je){var _t=We.langSys;return[{name:"langSysTag"+Je,type:"TAG",value:We.tag},{name:"langSys"+Je,type:"TABLE",value:new lt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:_t.reqFeatureIndex}].concat(It("featureIndex",_t.featureIndexes)))}]})))}]}))}function fn(R){lt.call(this,"featureListTable",Pt("featureRecord",R,function(W,re){var he=W.feature;return[{name:"featureTag"+re,type:"TAG",value:W.tag},{name:"feature"+re,type:"TABLE",value:new lt("featureTable",[{name:"featureParams",type:"USHORT",value:he.featureParams}].concat(It("lookupListIndex",he.lookupListIndexes)))}]}))}function $n(R,W){lt.call(this,"lookupListTable",bt("lookup",R,function(re){var he=W[re.lookupType];return V.assert(!!he,"Unable to write GSUB lookup type "+re.lookupType+" tables."),new lt("lookupTable",[{name:"lookupType",type:"USHORT",value:re.lookupType},{name:"lookupFlag",type:"USHORT",value:re.lookupFlag}].concat(bt("subtable",re.subtables,he)))}))}Oe.CHARSTRING=function(R){if(kt){var W=kt.get(R);if(void 0!==W)return W}for(var We=[],re=R.length,he=0;he<re;he+=1){var Ce=R[he];We=We.concat(Oe[Ce.type](Ce.value))}return kt&&kt.set(R,We),We},Xe.CHARSTRING=function(R){return Oe.CHARSTRING(R).length},Oe.OBJECT=function(R){var W=Oe[R.type];return V.argument(void 0!==W,"No encoding function for type "+R.type),W(R.value)},Xe.OBJECT=function(R){var W=Xe[R.type];return V.argument(void 0!==W,"No sizeOf function for type "+R.type),W(R.value)},Oe.TABLE=function(R){for(var W=[],re=R.fields.length,he=[],Ce=[],We=0;We<re;We+=1){var Je=R.fields[We],_t=(V.argument(void 0!==(Yt=Oe[Je.type]),"No encoding function for field type "+Je.type+" ("+Je.name+")"),R[Je.name]),Yt=Yt(_t=void 0===_t?Je.value:_t);"TABLE"===Je.type?(Ce.push(W.length),W=W.concat([0,0]),he.push(Yt)):W=W.concat(Yt)}for(var Ht=0;Ht<he.length;Ht+=1){var xn=Ce[Ht],Le=W.length;V.argument(Le<65536,"Table "+R.tableName+" too big."),W[xn]=Le>>8,W[xn+1]=255&Le,W=W.concat(he[Ht])}return W},Xe.TABLE=function(R){for(var W=0,re=R.fields.length,he=0;he<re;he+=1){var Ce=R.fields[he],We=Xe[Ce.type],Je=(V.argument(void 0!==We,"No sizeOf function for field type "+Ce.type+" ("+Ce.name+")"),R[Ce.name]);W+=We(Je=void 0===Je?Ce.value:Je),"TABLE"===Ce.type&&(W+=2)}return W},Oe.RECORD=Oe.TABLE,Xe.RECORD=Xe.TABLE,Oe.LITERAL=function(R){return R},Xe.LITERAL=function(R){return R.length},lt.prototype.encode=function(){return Oe.TABLE(this)},lt.prototype.sizeOf=function(){return Xe.TABLE(this)};var En={Table:lt,Record:lt,Coverage:(St.prototype=Object.create(lt.prototype)).constructor=St,ScriptList:(zt.prototype=Object.create(lt.prototype)).constructor=zt,FeatureList:(fn.prototype=Object.create(lt.prototype)).constructor=fn,LookupList:($n.prototype=Object.create(lt.prototype)).constructor=$n,ushortList:It,tableList:bt,recordList:Pt};function Kn(R,W){return R.getUint8(W)}function Mn(R,W){return R.getUint16(W,!1)}function pr(R,W){return R.getUint32(W,!1)}function Ln(R,W){return R.getInt16(W,!1)+R.getUint16(W+2,!1)/65535}var nr={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function hn(R,W){this.data=R,this.offset=W,this.relativeOffset=0}hn.prototype.parseByte=function(){var R=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},hn.prototype.parseChar=function(){var R=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},hn.prototype.parseCard8=hn.prototype.parseByte,hn.prototype.parseCard16=hn.prototype.parseUShort=function(){var R=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},hn.prototype.parseSID=hn.prototype.parseUShort,hn.prototype.parseOffset16=hn.prototype.parseUShort,hn.prototype.parseShort=function(){var R=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},hn.prototype.parseF2Dot14=function(){var R=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,R},hn.prototype.parseOffset32=hn.prototype.parseULong=function(){var R=pr(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},hn.prototype.parseFixed=function(){var R=Ln(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},hn.prototype.parseString=function(R){var W=this.data,re=this.offset+this.relativeOffset,he="";this.relativeOffset+=R;for(var Ce=0;Ce<R;Ce++)he+=String.fromCharCode(W.getUint8(re+Ce));return he},hn.prototype.parseTag=function(){return this.parseString(4)},hn.prototype.parseLongDateTime=function(){var R=pr(this.data,this.offset+this.relativeOffset+4);return R-=2082844800,this.relativeOffset+=8,R},hn.prototype.parseVersion=function(R){var W=Mn(this.data,this.offset+this.relativeOffset),re=Mn(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,W+re/(R=void 0===R?4096:R)/10},hn.prototype.skip=function(R,W){this.relativeOffset+=nr[R]*(W=void 0===W?1:W)},hn.prototype.parseULongList=function(R){void 0===R&&(R=this.parseULong());for(var W=new Array(R),re=this.data,he=this.offset+this.relativeOffset,Ce=0;Ce<R;Ce++)W[Ce]=re.getUint32(he),he+=4;return this.relativeOffset+=4*R,W},hn.prototype.parseOffset16List=hn.prototype.parseUShortList=function(R){void 0===R&&(R=this.parseUShort());for(var W=new Array(R),re=this.data,he=this.offset+this.relativeOffset,Ce=0;Ce<R;Ce++)W[Ce]=re.getUint16(he),he+=2;return this.relativeOffset+=2*R,W},hn.prototype.parseShortList=function(R){for(var W=new Array(R),re=this.data,he=this.offset+this.relativeOffset,Ce=0;Ce<R;Ce++)W[Ce]=re.getInt16(he),he+=2;return this.relativeOffset+=2*R,W},hn.prototype.parseByteList=function(R){for(var W=new Array(R),re=this.data,he=this.offset+this.relativeOffset,Ce=0;Ce<R;Ce++)W[Ce]=re.getUint8(he++);return this.relativeOffset+=R,W},hn.prototype.parseList=function(R,W){W||(W=R,R=this.parseUShort());for(var re=new Array(R),he=0;he<R;he++)re[he]=W.call(this);return re},hn.prototype.parseList32=function(R,W){W||(W=R,R=this.parseULong());for(var re=new Array(R),he=0;he<R;he++)re[he]=W.call(this);return re},hn.prototype.parseRecordList=function(R,W){W||(W=R,R=this.parseUShort());for(var re=new Array(R),he=Object.keys(W),Ce=0;Ce<R;Ce++){for(var We={},Je=0;Je<he.length;Je++){var _t=he[Je];We[_t]=W[_t].call(this)}re[Ce]=We}return re},hn.prototype.parseRecordList32=function(R,W){W||(W=R,R=this.parseULong());for(var re=new Array(R),he=Object.keys(W),Ce=0;Ce<R;Ce++){for(var We={},Je=0;Je<he.length;Je++){var _t=he[Je];We[_t]=W[_t].call(this)}re[Ce]=We}return re},hn.prototype.parseStruct=function(R){if("function"==typeof R)return R.call(this);for(var W=Object.keys(R),re={},he=0;he<W.length;he++){var Ce=W[he];re[Ce]=R[Ce].call(this)}return re},hn.prototype.parseValueRecord=function(R){var W;if(0!==(R=void 0===R?this.parseUShort():R))return W={},1&R&&(W.xPlacement=this.parseShort()),2&R&&(W.yPlacement=this.parseShort()),4&R&&(W.xAdvance=this.parseShort()),8&R&&(W.yAdvance=this.parseShort()),16&R&&(W.xPlaDevice=void 0,this.parseShort()),32&R&&(W.yPlaDevice=void 0,this.parseShort()),64&R&&(W.xAdvDevice=void 0,this.parseShort()),128&R&&(W.yAdvDevice=void 0,this.parseShort()),W},hn.prototype.parseValueRecordList=function(){for(var R=this.parseUShort(),W=this.parseUShort(),re=new Array(W),he=0;he<W;he++)re[he]=this.parseValueRecord(R);return re},hn.prototype.parsePointer=function(R){var W=this.parseOffset16();if(0<W)return new hn(this.data,this.offset+W).parseStruct(R)},hn.prototype.parsePointer32=function(R){var W=this.parseOffset32();if(0<W)return new hn(this.data,this.offset+W).parseStruct(R)},hn.prototype.parseListOfLists=function(R){for(var W=this.parseOffset16List(),re=W.length,he=this.relativeOffset,Ce=new Array(re),We=0;We<re;We++){var Je=W[We];if(0===Je)Ce[We]=void 0;else if(this.relativeOffset=Je,R){for(var _t=this.parseOffset16List(),Yt=new Array(_t.length),Ht=0;Ht<_t.length;Ht++)this.relativeOffset=Je+_t[Ht],Yt[Ht]=R.call(this);Ce[We]=Yt}else Ce[We]=this.parseUShortList()}return this.relativeOffset=he,Ce},hn.prototype.parseCoverage=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort(),re=this.parseUShort();if(1===W)return{format:1,glyphs:this.parseUShortList(re)};if(2!==W)throw new Error("0x"+R.toString(16)+": Coverage format must be 1 or 2.");for(var he=new Array(re),Ce=0;Ce<re;Ce++)he[Ce]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:he}},hn.prototype.parseClassDef=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();if(1===W)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===W)return{format:2,ranges:this.parseRecordList({start:hn.uShort,end:hn.uShort,classId:hn.uShort})};throw new Error("0x"+R.toString(16)+": ClassDef format must be 1 or 2.")},hn.list=function(R,W){return function(){return this.parseList(R,W)}},hn.list32=function(R,W){return function(){return this.parseList32(R,W)}},hn.recordList=function(R,W){return function(){return this.parseRecordList(R,W)}},hn.recordList32=function(R,W){return function(){return this.parseRecordList32(R,W)}},hn.pointer=function(R){return function(){return this.parsePointer(R)}},hn.pointer32=function(R){return function(){return this.parsePointer32(R)}},hn.tag=hn.prototype.parseTag,hn.byte=hn.prototype.parseByte,hn.uShort=hn.offset16=hn.prototype.parseUShort,hn.uShortList=hn.prototype.parseUShortList,hn.uLong=hn.offset32=hn.prototype.parseULong,hn.uLongList=hn.prototype.parseULongList,hn.struct=hn.prototype.parseStruct,hn.coverage=hn.prototype.parseCoverage,hn.classDef=hn.prototype.parseClassDef;var Xn={reserved:hn.uShort,reqFeatureIndex:hn.uShort,featureIndexes:hn.uShortList},Tn=(hn.prototype.parseScriptList=function(){return this.parsePointer(hn.recordList({tag:hn.tag,script:hn.pointer({defaultLangSys:hn.pointer(Xn),langSysRecords:hn.recordList({tag:hn.tag,langSys:hn.pointer(Xn)})})}))||[]},hn.prototype.parseFeatureList=function(){return this.parsePointer(hn.recordList({tag:hn.tag,feature:hn.pointer({featureParams:hn.offset16,lookupListIndexes:hn.uShortList})}))||[]},hn.prototype.parseLookupList=function(R){return this.parsePointer(hn.list(hn.pointer(function(){var W=this.parseUShort(),re=(V.argument(1<=W&&W<=9,"GPOS/GSUB lookup type "+W+" unknown."),this.parseUShort()),he=16&re;return{lookupType:W,lookupFlag:re,subtables:this.parseList(hn.pointer(R[W])),markFilteringSet:he?this.parseUShort():void 0}})))||[]},hn.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var R=this.parseUShort(),W=this.parseUShort();return V.argument(1===R&&W<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:hn.offset32,featureTableSubstitutionOffset:hn.offset32})})||[]},{getByte:Kn,getCard8:Kn,getUShort:Mn,getCard16:Mn,getShort:function(R,W){return R.getInt16(W,!1)},getULong:pr,getFixed:Ln,getTag:function(R,W){for(var re="",he=W;he<W+4;he+=1)re+=String.fromCharCode(R.getInt8(he));return re},getOffset:function(R,W,re){for(var he=0,Ce=0;Ce<re;Ce+=1)he=(he<<=8)+R.getUint8(W+Ce);return he},getBytes:function(R,W,re){for(var he=[],Ce=W;Ce<re;Ce+=1)he.push(R.getUint8(Ce));return he},bytesToString:function(R){for(var W="",re=0;re<R.length;re+=1)W+=String.fromCharCode(R[re]);return W},Parser:hn}),ct_parse=function(R,W){for(var re={},he=(re.version=Tn.getUShort(R,W),V.argument(0===re.version,"cmap table version should be 0."),re.numTables=Tn.getUShort(R,W+2),-1),Ce=re.numTables-1;0<=Ce;--Ce){var We=Tn.getUShort(R,W+4+8*Ce),Je=Tn.getUShort(R,W+4+8*Ce+2);if(3===We&&(0===Je||1===Je||10===Je)||0===We&&(0===Je||1===Je||2===Je||3===Je||4===Je)){he=Tn.getULong(R,W+4+8*Ce+4);break}}if(-1===he)throw new Error("No valid cmap sub-tables found.");var _t=new Tn.Parser(R,W+he);if(re.format=_t.parseUShort(),12===re.format){var Yt,Ht=re,xn=_t;xn.parseUShort(),Ht.length=xn.parseULong(),Ht.language=xn.parseULong(),Ht.groupCount=Yt=xn.parseULong(),Ht.glyphIndexMap={};for(var Le=0;Le<Yt;Le+=1)for(var be=xn.parseULong(),ke=xn.parseULong(),Re=xn.parseULong(),at=be;at<=ke;at+=1)Ht.glyphIndexMap[at]=Re,Re++}else{if(4!==re.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+re.format+").");var Qt=re,Sn=R,Fn=W,Yr=he;Qt.length=_t.parseUShort(),Qt.language=_t.parseUShort(),Qt.segCount=Gr=_t.parseUShort()>>1,_t.skip("uShort",3),Qt.glyphIndexMap={};for(var Gr,ai=new Tn.Parser(Sn,Fn+Yr+14),li=new Tn.Parser(Sn,Fn+Yr+16+2*Gr),ki=new Tn.Parser(Sn,Fn+Yr+16+4*Gr),Ss=new Tn.Parser(Sn,Fn+Yr+16+6*Gr),mo=Fn+Yr+16+8*Gr,Mo=0;Mo<Gr-1;Mo+=1)for(var Ro=void 0,go=ai.parseUShort(),zo=li.parseUShort(),Ps=ki.parseShort(),Bs=Ss.parseUShort(),Jr=zo;Jr<=go;Jr+=1)0!==Bs?(mo=(mo=Ss.offset+Ss.relativeOffset-2)+Bs+2*(Jr-zo),0!==(Ro=Tn.getUShort(Sn,mo))&&(Ro=Ro+Ps&65535)):Ro=Jr+Ps&65535,Qt.glyphIndexMap[Jr]=Ro}return re},ct_make=function(R){for(var W=!0,re=R.length-1;0<re;--re)if(65535<R.get(re).unicode){console.log("Adding CMAP format 12 (needed!)"),W=!1;break}var he,Ce,We=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:W?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:W?12:20}],Je=(We=(We=W?We:We.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new En.Table("cmap",We));for(Je.segments=[],re=0;re<R.length;re+=1){for(var _t=R.get(re),Yt=0;Yt<_t.unicodes.length;Yt+=1)Je.segments.push({end:he=_t.unicodes[Yt],start:he,delta:-(he-(Ce=re)),offset:0,glyphIndex:Ce});Je.segments=Je.segments.sort(function(Fn,Yr){return Fn.start-Yr.start})}Je.segments.push({end:65535,start:65535,delta:1,offset:0});var Ht=Je.segments.length,xn=0,Le=[],be=[],ke=[],Re=[],at=[],Qt=[];for(re=0;re<Ht;re+=1){var Sn=Je.segments[re];Sn.end<=65535&&Sn.start<=65535?(Le=Le.concat({name:"end_"+re,type:"USHORT",value:Sn.end}),be=be.concat({name:"start_"+re,type:"USHORT",value:Sn.start}),ke=ke.concat({name:"idDelta_"+re,type:"SHORT",value:Sn.delta}),Re=Re.concat({name:"idRangeOffset_"+re,type:"USHORT",value:Sn.offset}),void 0!==Sn.glyphId&&(at=at.concat({name:"glyph_"+re,type:"USHORT",value:Sn.glyphId}))):xn+=1,W||void 0===Sn.glyphIndex||(Qt=(Qt=(Qt=Qt.concat({name:"cmap12Start_"+re,type:"ULONG",value:Sn.start})).concat({name:"cmap12End_"+re,type:"ULONG",value:Sn.end})).concat({name:"cmap12Glyph_"+re,type:"ULONG",value:Sn.glyphIndex}))}return Je.segCountX2=2*(Ht-xn),Je.searchRange=2*Math.pow(2,Math.floor(Math.log(Ht-xn)/Math.log(2))),Je.entrySelector=Math.log(Je.searchRange/2)/Math.log(2),Je.rangeShift=Je.segCountX2-Je.searchRange,Je.fields=Je.fields.concat(Le),Je.fields.push({name:"reservedPad",type:"USHORT",value:0}),Je.fields=Je.fields.concat(be),Je.fields=Je.fields.concat(ke),Je.fields=Je.fields.concat(Re),Je.fields=Je.fields.concat(at),Je.cmap4Length=14+2*Le.length+2+2*be.length+2*ke.length+2*Re.length+2*at.length,W||(We=16+4*Qt.length,Je.cmap12Offset=20+Je.cmap4Length,Je.fields=Je.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:We},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Qt.length/3}]),Je.fields=Je.fields.concat(Qt)),Je},ft=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Qe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],xt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],un=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function An(R){this.font=R}function jn(R){this.cmap=R}function rn(R,W){this.encoding=R,this.charset=W}function bn(R){switch(R.version){case 1:this.names=un.slice();break;case 2:this.names=new Array(R.numberOfGlyphs);for(var W=0;W<R.numberOfGlyphs;W++)this.names[W]=R.glyphNameIndex[W]<un.length?un[R.glyphNameIndex[W]]:R.names[R.glyphNameIndex[W]-un.length];break;case 2.5:this.names=new Array(R.numberOfGlyphs);for(var re=0;re<R.numberOfGlyphs;re++)this.names[re]=un[re+R.glyphNameIndex[re]];break;default:this.names=[]}}An.prototype.charToGlyphIndex=function(R){var W=R.codePointAt(0),re=this.font.glyphs;if(re)for(var he=0;he<re.length;he+=1)for(var Ce=re.get(he),We=0;We<Ce.unicodes.length;We+=1)if(Ce.unicodes[We]===W)return he;return null},jn.prototype.charToGlyphIndex=function(R){return this.cmap.glyphIndexMap[R.codePointAt(0)]||0},rn.prototype.charToGlyphIndex=function(R){return R=R.codePointAt(0),this.charset.indexOf(R=this.encoding[R])},bn.prototype.nameToGlyphIndex=function(R){return this.names.indexOf(R)},bn.prototype.glyphIndexToName=function(R){return this.names[R]};var Pn_line=function(R,W,re,he,Ce){R.beginPath(),R.moveTo(W,re),R.lineTo(he,Ce),R.stroke()};function Un(R){this.bindConstructorValues(R)}function pn(R,W,re){Object.defineProperty(R,W,{get:function(){return R[re]},set:function(he){R[re]=he},enumerable:!0,configurable:!0})}function Xt(R,W){if(this.font=R,this.glyphs={},Array.isArray(W))for(var re=0;re<W.length;re++)this.glyphs[re]=W[re];this.length=W&&W.length||0}Un.prototype.bindConstructorValues=function(R){var W;this.index=R.index||0,this.name=R.name||null,this.unicode=R.unicode||void 0,this.unicodes=R.unicodes||void 0!==R.unicode?[R.unicode]:[],R.xMin&&(this.xMin=R.xMin),R.yMin&&(this.yMin=R.yMin),R.xMax&&(this.xMax=R.xMax),R.yMax&&(this.yMax=R.yMax),R.advanceWidth&&(this.advanceWidth=R.advanceWidth),Object.defineProperty(this,"path",(W=(R=R.path)||new Te,{configurable:!0,get:function(){return W="function"==typeof W?W():W},set:function(re){W=re}}))},Un.prototype.addUnicode=function(R){0===this.unicodes.length&&(this.unicode=R),this.unicodes.push(R)},Un.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Un.prototype.getPath=function(R,W,re,he,Ce){R=void 0!==R?R:0,W=void 0!==W?W:0,re=void 0!==re?re:72;for(var We,Je,_t=(he=he||{}).xScale,Yt=he.yScale,Ht=((We=he.hinting&&Ce&&Ce.hinting?this.path&&Ce.hinting.exec(this,re):We)?(Je=Ce.hinting.getCommands(We),R=Math.round(R),W=Math.round(W),_t=Yt=1):(Je=this.path.commands,he=1/this.path.unitsPerEm*re,void 0===_t&&(_t=he),void 0===Yt&&(Yt=he)),new Te),xn=0;xn<Je.length;xn+=1){var Le=Je[xn];"M"===Le.type?Ht.moveTo(R+Le.x*_t,W+-Le.y*Yt):"L"===Le.type?Ht.lineTo(R+Le.x*_t,W+-Le.y*Yt):"Q"===Le.type?Ht.quadraticCurveTo(R+Le.x1*_t,W+-Le.y1*Yt,R+Le.x*_t,W+-Le.y*Yt):"C"===Le.type?Ht.curveTo(R+Le.x1*_t,W+-Le.y1*Yt,R+Le.x2*_t,W+-Le.y2*Yt,R+Le.x*_t,W+-Le.y*Yt):"Z"===Le.type&&Ht.closePath()}return Ht},Un.prototype.getContours=function(){if(void 0===this.points)return[];for(var R=[],W=[],re=0;re<this.points.length;re+=1){var he=this.points[re];W.push(he),he.lastPointOfContour&&(R.push(W),W=[])}return V.argument(0===W.length,"There are still points left in the current contour."),R},Un.prototype.getMetrics=function(){for(var R=this.path.commands,W=[],re=[],he=0;he<R.length;he+=1){var Ce=R[he];"Z"!==Ce.type&&(W.push(Ce.x),re.push(Ce.y)),"Q"!==Ce.type&&"C"!==Ce.type||(W.push(Ce.x1),re.push(Ce.y1)),"C"===Ce.type&&(W.push(Ce.x2),re.push(Ce.y2))}var We={xMin:Math.min.apply(null,W),yMin:Math.min.apply(null,re),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,re),leftSideBearing:this.leftSideBearing};return isFinite(We.xMin)||(We.xMin=0),isFinite(We.xMax)||(We.xMax=this.advanceWidth),isFinite(We.yMin)||(We.yMin=0),isFinite(We.yMax)||(We.yMax=0),We.rightSideBearing=this.advanceWidth-We.leftSideBearing-(We.xMax-We.xMin),We},Un.prototype.draw=function(R,W,re,he,Ce){this.getPath(W,re,he,Ce).draw(R)},Un.prototype.drawPoints=function(R,W,re,he){function Ce(xn,Le,be,ke){var Re=2*Math.PI;R.beginPath();for(var at=0;at<xn.length;at+=1)R.moveTo(Le+xn[at].x*ke,be+xn[at].y*ke),R.arc(Le+xn[at].x*ke,be+xn[at].y*ke,2,0,Re,!1);R.closePath(),R.fill()}W=void 0!==W?W:0,re=void 0!==re?re:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24);for(var We=[],Je=[],_t=this.path,Yt=0;Yt<_t.commands.length;Yt+=1){var Ht=_t.commands[Yt];void 0!==Ht.x&&We.push({x:Ht.x,y:-Ht.y}),void 0!==Ht.x1&&Je.push({x:Ht.x1,y:-Ht.y1}),void 0!==Ht.x2&&Je.push({x:Ht.x2,y:-Ht.y2})}R.fillStyle="blue",Ce(We,W,re,he),R.fillStyle="red",Ce(Je,W,re,he)},Un.prototype.drawMetrics=function(R,W,re,he){W=void 0!==W?W:0,re=void 0!==re?re:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24),R.lineWidth=1,R.strokeStyle="black",Pn_line(R,W,-1e4,W,1e4),Pn_line(R,-1e4,re,1e4,re);var Ce=this.xMin||0,We=this.yMin||0,Je=this.xMax||0,_t=this.yMax||0,Yt=this.advanceWidth||0;R.strokeStyle="blue",Pn_line(R,W+Ce*he,-1e4,W+Ce*he,1e4),Pn_line(R,W+Je*he,-1e4,W+Je*he,1e4),Pn_line(R,-1e4,re+-We*he,1e4,re+-We*he),Pn_line(R,-1e4,re+-_t*he,1e4,re+-_t*he),R.strokeStyle="green",Pn_line(R,W+Yt*he,-1e4,W+Yt*he,1e4)},Xt.prototype.get=function(R){return"function"==typeof this.glyphs[R]&&(this.glyphs[R]=this.glyphs[R]()),this.glyphs[R]},Xt.prototype.push=function(R,W){this.glyphs[R]=W,this.length++};var yn={GlyphSet:Xt,glyphLoader:function(R,W){return new Un({index:W,font:R})},ttfGlyphLoader:function(R,W,re,he,Ce,We){return function(){var Je=new Un({index:W,font:R});return Je.path=function(){re(Je,he,Ce);var _t=We(R.glyphs,Je);return _t.unitsPerEm=R.unitsPerEm,_t},pn(Je,"xMin","_xMin"),pn(Je,"xMax","_xMax"),pn(Je,"yMin","_yMin"),pn(Je,"yMax","_yMax"),Je}},cffGlyphLoader:function(R,W,re,he){return function(){var Ce=new Un({index:W,font:R});return Ce.path=function(){var We=re(R,Ce,he);return We.unitsPerEm=R.unitsPerEm,We},Ce}}};function Kt(R){return R.length<1240?107:R.length<33900?1131:32768}function an(R,W,re){var he,Ce=[],We=[],Je=Tn.getCard16(R,W);if(0!==Je){for(var _t=Tn.getByte(R,W+2),Yt=W+(Je+1)*_t+2,Ht=W+3,xn=0;xn<Je+1;xn+=1)Ce.push(Tn.getOffset(R,Ht,_t)),Ht+=_t;he=Yt+Ce[Je]}else he=W+2;for(var Le=0;Le<Ce.length-1;Le+=1){var be=Tn.getBytes(R,Yt+Ce[Le],Yt+Ce[Le+1]);re&&(be=re(be)),We.push(be)}return{objects:We,startOffset:W,endOffset:he}}function Yn(R,W){if(28===W)return R.parseByte()<<8|R.parseByte();if(29===W)return R.parseByte()<<24|R.parseByte()<<16|R.parseByte()<<8|R.parseByte();if(30===W){for(var re=R,he="",Ce=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var We=(Je=re.parseByte())>>4,Je=15&Je;if(15==We||(he+=Ce[We],15==Je))break;he+=Ce[Je]}return parseFloat(he)}if(32<=W&&W<=246)return W-139;if(247<=W&&W<=250)return 256*(W-247)+R.parseByte()+108;if(251<=W&&W<=254)return 256*-(W-251)-R.parseByte()-108;throw new Error("Invalid b0 "+W)}function Bt(R,W,re){var he=new Tn.Parser(R,W=void 0!==W?W:0),Ce=[],We=[];for(re=void 0!==re?re:R.length;he.relativeOffset<re;){var Je=he.parseByte();Je<=21?(12===Je&&(Je=1200+he.parseByte()),Ce.push([Je,We]),We=[]):We.push(Yn(he,Je))}for(var _t=Ce,Yt={},Ht=0;Ht<_t.length;Ht+=1){var be,xn=_t[Ht][0],Le=_t[Ht][1];if(be=1===Le.length?Le[0]:Le,Yt.hasOwnProperty(xn)&&!isNaN(Yt[xn]))throw new Error("Object "+Yt+" already has key "+xn);Yt[xn]=be}return Yt}function nn(R,W){return W<=390?ft[W]:R[W-391]}function On(R,W,re){for(var he,Ce={},We=0;We<W.length;We+=1){var Je=W[We];if(Array.isArray(Je.type)){var _t=[];_t.length=Je.type.length;for(var Yt=0;Yt<Je.type.length;Yt++)void 0===(he=void 0!==R[Je.op]?R[Je.op][Yt]:void 0)&&(he=void 0!==Je.value&&void 0!==Je.value[Yt]?Je.value[Yt]:null),"SID"===Je.type[Yt]&&(he=nn(re,he)),_t[Yt]=he;Ce[Je.name]=_t}else void 0===(he=R[Je.op])&&(he=void 0!==Je.value?Je.value:null),"SID"===Je.type&&(he=nn(re,he)),Ce[Je.name]=he}return Ce}var wn=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],zn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function lr(R,W,re,he){return On(Bt(R,W,re),zn,he)}function sr(R,W,re,he){for(var Ce=[],We=0;We<re.length;We+=1){var Je,_t=((_t=he,Je=On(Bt(Je=new DataView(new Uint8Array(re[We]).buffer),0,Je.byteLength),wn,_t))._subrs=[],Je._subrsBias=0,Je.private[0]),Yt=Je.private[1];0!==_t&&0!==Yt&&(_t=lr(R,Yt+W,_t,he),Je._defaultWidthX=_t.defaultWidthX,Je._nominalWidthX=_t.nominalWidthX,0!==_t.subrs&&(Yt=an(R,Yt+_t.subrs+W),Je._subrs=Yt.objects,Je._subrsBias=Kt(Je._subrs)),Je._privateDict=_t),Ce.push(Je)}return Ce}function mr(R,W,re){var he,Ce,We,Je,_t,Yt,Ht,xn,Le,be=new Te,ke=[],Re=0,at=!1,Qt=!1,Sn=0,Fn=0,Yr=(Le=(R.isCIDFont?(_t=R.tables.cff.topDict._fdSelect[W.index],_t=R.tables.cff.topDict._fdArray[_t],Yt=_t._subrs,Ht=_t._subrsBias,xn=_t._defaultWidthX,_t):(Yt=R.tables.cff.topDict._subrs,Ht=R.tables.cff.topDict._subrsBias,xn=R.tables.cff.topDict._defaultWidthX,R.tables.cff.topDict))._nominalWidthX,xn);function Gr(li,ki){Qt&&be.closePath(),be.moveTo(li,ki),Qt=!0}function ai(){ke.length%2==0||at||(Yr=ke.shift()+Le),Re+=ke.length>>1,ke.length=0,at=!0}return function li(ki){for(var Ss,mo,Mo,Ro,go,zo,Ps,Bs,Jr,Zs,Js,Cs,ci=0;ci<ki.length;){var Po=ki[ci];switch(ci+=1,Po){case 1:case 3:case 18:case 23:ai();break;case 4:1<ke.length&&!at&&(Yr=ke.shift()+Le,at=!0),Fn+=ke.pop(),Gr(Sn,Fn);break;case 5:for(;0<ke.length;)Sn+=ke.shift(),Fn+=ke.shift(),be.lineTo(Sn,Fn);break;case 6:for(;0<ke.length&&(Sn+=ke.shift(),be.lineTo(Sn,Fn),0!==ke.length);)Fn+=ke.shift(),be.lineTo(Sn,Fn);break;case 7:for(;0<ke.length&&(Fn+=ke.shift(),be.lineTo(Sn,Fn),0!==ke.length);)Sn+=ke.shift(),be.lineTo(Sn,Fn);break;case 8:for(;0<ke.length;)he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),Fn=Je+ke.shift(),be.curveTo(he,Ce,We,Je,Sn,Fn);break;case 10:go=ke.pop()+Ht,(zo=Yt[go])&&li(zo);break;case 11:return;case 12:switch(Po=ki[ci],ci+=1,Po){case 35:he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Ps=We+ke.shift(),Bs=Je+ke.shift(),Jr=Ps+ke.shift(),Zs=Bs+ke.shift(),Js=Jr+ke.shift(),Cs=Zs+ke.shift(),Sn=Js+ke.shift(),Fn=Cs+ke.shift(),ke.shift(),be.curveTo(he,Ce,We,Je,Ps,Bs),be.curveTo(Jr,Zs,Js,Cs,Sn,Fn);break;case 34:he=Sn+ke.shift(),Ce=Fn,We=he+ke.shift(),Je=Ce+ke.shift(),Ps=We+ke.shift(),Bs=Je,Jr=Ps+ke.shift(),Zs=Je,Js=Jr+ke.shift(),Cs=Fn,Sn=Js+ke.shift(),be.curveTo(he,Ce,We,Je,Ps,Bs),be.curveTo(Jr,Zs,Js,Cs,Sn,Fn);break;case 36:he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Ps=We+ke.shift(),Bs=Je,Jr=Ps+ke.shift(),Zs=Je,Js=Jr+ke.shift(),Cs=Zs+ke.shift(),Sn=Js+ke.shift(),be.curveTo(he,Ce,We,Je,Ps,Bs),be.curveTo(Jr,Zs,Js,Cs,Sn,Fn);break;case 37:he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Ps=We+ke.shift(),Bs=Je+ke.shift(),Jr=Ps+ke.shift(),Zs=Bs+ke.shift(),Js=Jr+ke.shift(),Cs=Zs+ke.shift(),Math.abs(Js-Sn)>Math.abs(Cs-Fn)?Sn=Js+ke.shift():Fn=Cs+ke.shift(),be.curveTo(he,Ce,We,Je,Ps,Bs),be.curveTo(Jr,Zs,Js,Cs,Sn,Fn);break;default:console.log("Glyph "+W.index+": unknown operator 1200"+Po),ke.length=0}break;case 14:0<ke.length&&!at&&(Yr=ke.shift()+Le,at=!0),Qt&&(be.closePath(),Qt=!1);break;case 19:case 20:ai(),ci+=Re+7>>3;break;case 21:2<ke.length&&!at&&(Yr=ke.shift()+Le,at=!0),Fn+=ke.pop(),Gr(Sn+=ke.pop(),Fn);break;case 22:1<ke.length&&!at&&(Yr=ke.shift()+Le,at=!0),Gr(Sn+=ke.pop(),Fn);break;case 24:for(;2<ke.length;)he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),Fn=Je+ke.shift(),be.curveTo(he,Ce,We,Je,Sn,Fn);Sn+=ke.shift(),Fn+=ke.shift(),be.lineTo(Sn,Fn);break;case 25:for(;6<ke.length;)Sn+=ke.shift(),Fn+=ke.shift(),be.lineTo(Sn,Fn);he=Sn+ke.shift(),Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),Fn=Je+ke.shift(),be.curveTo(he,Ce,We,Je,Sn,Fn);break;case 26:for(ke.length%2&&(Sn+=ke.shift());0<ke.length;)he=Sn,Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We,Fn=Je+ke.shift(),be.curveTo(he,Ce,We,Je,Sn,Fn);break;case 27:for(ke.length%2&&(Fn+=ke.shift());0<ke.length;)he=Sn+ke.shift(),Ce=Fn,We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),be.curveTo(he,Ce,We,Je,Sn,Fn=Je);break;case 28:ke.push(((Ss=ki[ci])<<24|(mo=ki[ci+1])<<16)>>16),ci+=2;break;case 29:go=ke.pop()+R.gsubrsBias,(zo=R.gsubrs[go])&&li(zo);break;case 30:for(;0<ke.length&&(he=Sn,Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),Fn=Je+(1===ke.length?ke.shift():0),be.curveTo(he,Ce,We,Je,Sn,Fn),0!==ke.length);)he=Sn+ke.shift(),Ce=Fn,We=he+ke.shift(),Je=Ce+ke.shift(),Fn=Je+ke.shift(),Sn=We+(1===ke.length?ke.shift():0),be.curveTo(he,Ce,We,Je,Sn,Fn);break;case 31:for(;0<ke.length&&(he=Sn+ke.shift(),Ce=Fn,We=he+ke.shift(),Je=Ce+ke.shift(),Fn=Je+ke.shift(),Sn=We+(1===ke.length?ke.shift():0),be.curveTo(he,Ce,We,Je,Sn,Fn),0!==ke.length);)he=Sn,Ce=Fn+ke.shift(),We=he+ke.shift(),Je=Ce+ke.shift(),Sn=We+ke.shift(),Fn=Je+(1===ke.length?ke.shift():0),be.curveTo(he,Ce,We,Je,Sn,Fn);break;default:Po<32?console.log("Glyph "+W.index+": unknown operator "+Po):Po<247?ke.push(Po-139):Po<251?(Ss=ki[ci],ci+=1,ke.push(256*(Po-247)+Ss+108)):Po<255?(Ss=ki[ci],ci+=1,ke.push(256*-(Po-251)-Ss-108)):(Ss=ki[ci],mo=ki[ci+1],Mo=ki[ci+2],Ro=ki[ci+3],ci+=4,ke.push((Ss<<24|mo<<16|Mo<<8|Ro)/65536))}}}(re),W.advanceWidth=Yr,be}function Mr(R,W){var re,he=ft.indexOf(R);return 0<=he&&(re=he),0<=(he=W.indexOf(R))?re=he+ft.length:(re=ft.length+W.length,W.push(R)),re}function te(R,W,re){for(var he={},Ce=0;Ce<R.length;Ce+=1){var We=R[Ce],Je=W[We.name];void 0===Je||function _t(Yt,Ht){if(Yt===Ht)return 1;if(Array.isArray(Yt)&&Array.isArray(Ht)&&Yt.length===Ht.length){for(var xn=0;xn<Yt.length;xn+=1)if(!_t(Yt[xn],Ht[xn]))return;return 1}}(Je,We.value)||("SID"===We.type&&(Je=Mr(Je,re)),he[We.op]={name:We.name,type:We.type,value:Je})}return he}function Ie(R,W){var re=new En.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return re.dict=te(wn,R,W),re}function Ye(R){var W=new En.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return W.topDicts=[{name:"topDict_0",type:"TABLE",value:R}],W}var k_parse=function(R,W,re){re.tables.cff={},(Ce={}).formatMajor=Tn.getCard8(_t=R,he=W),Ce.formatMinor=Tn.getCard8(_t,he+1),Ce.size=Tn.getCard8(_t,he+2),Ce.offsetSize=Tn.getCard8(_t,he+3),Ce.startOffset=he,Ce.endOffset=he+4;var _t=an(R,Ce.endOffset,Tn.bytesToString),he=an(R,_t.endOffset),Ce=an(R,he.endOffset,Tn.bytesToString);if(_t=an(R,Ce.endOffset),re.gsubrs=_t.objects,re.gsubrsBias=Kt(re.gsubrs),1!==(_t=sr(R,W,he.objects,Ce.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+_t.length);if((re.tables.cff.topDict=he=_t[0])._privateDict&&(re.defaultWidthX=he._privateDict.defaultWidthX,re.nominalWidthX=he._privateDict.nominalWidthX),void 0!==he.ros[0]&&void 0!==he.ros[1]&&(re.isCIDFont=!0),re.isCIDFont){var We=he.fdSelect;if(0===(_t=he.fdArray)||0===We)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");_t=sr(R,W,an(R,_t+=W).objects,Ce.objects),he._fdArray=_t,he._fdSelect=function(be,ke,Re,at){var Qt,Sn=[],Fn=new Tn.Parser(be,ke);if(0===(be=Fn.parseCard8()))for(var Yr=0;Yr<Re;Yr++){if(at<=(Qt=Fn.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Qt+" (FD count "+at+")");Sn.push(Qt)}else{if(3!==be)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+be);var Gr,ai=Fn.parseCard16(),li=Fn.parseCard16();if(0!==li)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+li);for(var ki=0;ki<ai;ki++){if(Qt=Fn.parseCard8(),Gr=Fn.parseCard16(),at<=Qt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Qt+" (FD count "+at+")");if(Re<Gr)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Gr);for(;li<Gr;li++)Sn.push(Qt);li=Gr}if(Gr!==Re)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Gr)}return Sn}(R,We+=W,re.numGlyphs,_t.length)}_t=lr(R,We=W+he.private[1],he.private[0],Ce.objects);var Je=(re.defaultWidthX=_t.defaultWidthX,re.nominalWidthX=_t.nominalWidthX,0!==_t.subrs?(We=an(R,We+_t.subrs),re.subrs=We.objects,re.subrsBias=Kt(re.subrs)):(re.subrs=[],re.subrsBias=0),an(R,W+he.charStrings));re.nGlyphs=Je.objects.length,_t=function(xn,Le,be,ke){var Re=new Tn.Parser(xn,Le),at=(--be,[".notdef"]);if(0===(xn=Re.parseCard8()))for(var Qt=0;Qt<be;Qt+=1)Sn=Re.parseSID(),at.push(nn(ke,Sn));else if(1===xn)for(;at.length<=be;)for(var Sn=Re.parseSID(),Fn=Re.parseCard8(),Yr=0;Yr<=Fn;Yr+=1)at.push(nn(ke,Sn)),Sn+=1;else{if(2!==xn)throw new Error("Unknown charset format "+xn);for(;at.length<=be;){Sn=Re.parseSID(),Fn=Re.parseCard16();for(var Gr=0;Gr<=Fn;Gr+=1)at.push(nn(ke,Sn)),Sn+=1}}return at}(R,W+he.charset,re.nGlyphs,Ce.objects),re.cffEncoding=0===he.encoding?new rn(Qe,_t):1===he.encoding?new rn(xt,_t):function(xn,Le,be){var ke={},Re=new Tn.Parser(xn,Le);if(0===(xn=Re.parseCard8()))for(var at=Re.parseCard8(),Qt=0;Qt<at;Qt+=1)ke[Fn=Re.parseCard8()]=Qt;else{if(1!==xn)throw new Error("Unknown encoding format "+xn);for(var Sn=Re.parseCard8(),Fn=1,Yr=0;Yr<Sn;Yr+=1)for(var Gr=Re.parseCard8(),ai=Re.parseCard8(),li=Gr;li<=Gr+ai;li+=1)ke[li]=Fn,Fn+=1}return new rn(ke,be)}(R,W+he.encoding,_t),re.encoding=re.encoding||re.cffEncoding,re.glyphs=new yn.GlyphSet(re);for(var Yt=0;Yt<re.nGlyphs;Yt+=1)re.glyphs.push(Yt,yn.cffGlyphLoader(re,Yt,mr,Je.objects[Yt]))},k_make=function(R,xn){for(var re,he=new En.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Ce={version:xn.version,fullName:xn.fullName,familyName:xn.familyName,weight:xn.weightName,fontBBox:xn.fontBBox||[0,0,0,0],fontMatrix:[Ce=1/xn.unitsPerEm,0,0,Ce,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},We=[],Je=1;Je<R.length;Je+=1)re=R.get(Je),We.push(re.name);var _t,Yt,Ht=[],Le=(he.header=new En.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),he.nameIndex=function(be){var ke=new En.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);ke.names=[];for(var Re=0;Re<be.length;Re+=1)ke.names.push({name:"name_"+Re,type:"NAME",value:be[Re]});return ke}([xn.postScriptName]),xn=Ie(Ce,Ht),he.topDictIndex=Ye(xn),he.globalSubrIndex=new En.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),he.charsets=function(be,ke){for(var Re=new En.Record("Charsets",[{name:"format",type:"Card8",value:0}]),at=0;at<be.length;at+=1){var Qt=Mr(be[at],ke);Re.fields.push({name:"glyph_"+at,type:"SID",value:Qt})}return Re}(We,Ht),he.charStringsIndex=function A(R){for(var W=new En.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),re=0;re<R.length;re+=1){var he=R.get(re),Ce=function(We){for(var Je=[],_t=We.path,Yt=(Je.push({name:"width",type:"NUMBER",value:We.advanceWidth}),0),Ht=0,xn=0;xn<_t.commands.length;xn+=1){var Le,be,ke,Re,at=void 0,Qt=void 0,Sn=_t.commands[xn];"M"===(Sn="Q"===Sn.type?{type:"C",x:Sn.x,y:Sn.y,x1:1/3*Yt+2/3*Sn.x1,y1:1/3*Ht+2/3*Sn.y1,x2:1/3*Sn.x+2/3*Sn.x1,y2:1/3*Sn.y+2/3*Sn.y1}:Sn).type?(at=Math.round(Sn.x-Yt),Qt=Math.round(Sn.y-Ht),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rmoveto",type:"OP",value:21}),Yt=Math.round(Sn.x),Ht=Math.round(Sn.y)):"L"===Sn.type?(at=Math.round(Sn.x-Yt),Qt=Math.round(Sn.y-Ht),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rlineto",type:"OP",value:5}),Yt=Math.round(Sn.x),Ht=Math.round(Sn.y)):"C"===Sn.type&&(Le=Math.round(Sn.x1-Yt),be=Math.round(Sn.y1-Ht),ke=Math.round(Sn.x2-Sn.x1),Re=Math.round(Sn.y2-Sn.y1),at=Math.round(Sn.x-Sn.x2),Qt=Math.round(Sn.y-Sn.y2),Je.push({name:"dx1",type:"NUMBER",value:Le}),Je.push({name:"dy1",type:"NUMBER",value:be}),Je.push({name:"dx2",type:"NUMBER",value:ke}),Je.push({name:"dy2",type:"NUMBER",value:Re}),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rrcurveto",type:"OP",value:8}),Yt=Math.round(Sn.x),Ht=Math.round(Sn.y))}return Je.push({name:"endchar",type:"OP",value:14}),Je}(he);W.charStrings.push({name:he.name,type:"CHARSTRING",value:Ce})}return W}(R),he.privateDict=(Le={},_t=Ht,(Yt=new En.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=te(zn,Le,_t),Yt),he.stringIndex=function(be){var ke=new En.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);ke.strings=[];for(var Re=0;Re<be.length;Re+=1)ke.strings.push({name:"string_"+Re,type:"STRING",value:be[Re]});return ke}(Ht),he.header.sizeOf()+he.nameIndex.sizeOf()+he.topDictIndex.sizeOf()+he.stringIndex.sizeOf()+he.globalSubrIndex.sizeOf());return Ce.charset=Le,Ce.encoding=0,Ce.charStrings=Ce.charset+he.charsets.sizeOf(),Ce.private[1]=Ce.charStrings+he.charStringsIndex.sizeOf(),xn=Ie(Ce,Ht),he.topDictIndex=Ye(xn),he},B_parse=function(he,W){var re={};return he=new Tn.Parser(he,W),re.version=he.parseVersion(),re.fontRevision=Math.round(1e3*he.parseFixed())/1e3,re.checkSumAdjustment=he.parseULong(),re.magicNumber=he.parseULong(),V.argument(1594834165===re.magicNumber,"Font header has wrong magic number."),re.flags=he.parseUShort(),re.unitsPerEm=he.parseUShort(),re.created=he.parseLongDateTime(),re.modified=he.parseLongDateTime(),re.xMin=he.parseShort(),re.yMin=he.parseShort(),re.xMax=he.parseShort(),re.yMax=he.parseShort(),re.macStyle=he.parseUShort(),re.lowestRecPPEM=he.parseUShort(),re.fontDirectionHint=he.parseShort(),re.indexToLocFormat=he.parseShort(),re.glyphDataFormat=he.parseShort(),re},B_make=function(R){var W=Math.round((new Date).getTime()/1e3)+2082844800,re=W;return R.createdTimestamp&&(re=R.createdTimestamp+2082844800),new En.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:re},{name:"modified",type:"LONGDATETIME",value:W},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],R)},L_parse=function(he,W){var re={};return he=new Tn.Parser(he,W),re.version=he.parseVersion(),re.ascender=he.parseShort(),re.descender=he.parseShort(),re.lineGap=he.parseShort(),re.advanceWidthMax=he.parseUShort(),re.minLeftSideBearing=he.parseShort(),re.minRightSideBearing=he.parseShort(),re.xMaxExtent=he.parseShort(),re.caretSlopeRise=he.parseShort(),re.caretSlopeRun=he.parseShort(),re.caretOffset=he.parseShort(),he.relativeOffset+=8,re.metricDataFormat=he.parseShort(),re.numberOfHMetrics=he.parseUShort(),re},L_make=function(R){return new En.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],R)},se_parse=function(R,W,re,he,Ce){for(var We,Je,_t=new Tn.Parser(R,W),Yt=0;Yt<he;Yt+=1){Yt<re&&(We=_t.parseUShort(),Je=_t.parseShort());var Ht=Ce.get(Yt);Ht.advanceWidth=We,Ht.leftSideBearing=Je}},se_make=function(R){for(var W=new En.Table("hmtx",[]),re=0;re<R.length;re+=1){var he=(Ce=R.get(re)).advanceWidth||0,Ce=Ce.leftSideBearing||0;W.fields.push({name:"advanceWidth_"+re,type:"USHORT",value:he}),W.fields.push({name:"leftSideBearing_"+re,type:"SHORT",value:Ce})}return W},H_make=function(R){for(var W=new En.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:R.length}]),re="",he=12+4*R.length,Ce=0;Ce<R.length;++Ce){var We=re.indexOf(R[Ce]);We<0&&(We=re.length,re+=R[Ce]),W.fields.push({name:"offset "+Ce,type:"USHORT",value:he+We}),W.fields.push({name:"length "+Ce,type:"USHORT",value:R[Ce].length})}return W.fields.push({name:"stringPool",type:"CHARARRAY",value:re}),W},H_parse=function(R,W){for(var re=new Tn.Parser(R,W),he=re.parseULong(),Ce=(V.argument(1===he,"Unsupported ltag table version."),re.skip("uLong",1),re.parseULong()),We=[],Je=0;Je<Ce;Je++){for(var _t="",Yt=W+re.parseUShort(),Ht=re.parseUShort(),xn=Yt;xn<Yt+Ht;++xn)_t+=String.fromCharCode(R.getInt8(xn));We.push(_t)}return We},de_parse=function(he,W){var re={};return he=new Tn.Parser(he,W),re.version=he.parseVersion(),re.numGlyphs=he.parseUShort(),1===re.version&&(re.maxPoints=he.parseUShort(),re.maxContours=he.parseUShort(),re.maxCompositePoints=he.parseUShort(),re.maxCompositeContours=he.parseUShort(),re.maxZones=he.parseUShort(),re.maxTwilightPoints=he.parseUShort(),re.maxStorage=he.parseUShort(),re.maxFunctionDefs=he.parseUShort(),re.maxInstructionDefs=he.parseUShort(),re.maxStackElements=he.parseUShort(),re.maxSizeOfInstructions=he.parseUShort(),re.maxComponentElements=he.parseUShort(),re.maxComponentDepth=he.parseUShort()),re},de_make=function(R){return new En.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:R}])},Ke=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ve={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},vt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Ft={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},_n="utf-16",He={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},$e={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function pt(R,W,re){switch(R){case 0:return _n;case 1:return $e[re]||He[W];case 3:if(1===W||10===W)return _n}}function ot(R){var W,re={};for(W in R)re[R[W]]=parseInt(W);return re}function Dt(R,W,re,he,Ce,We){return new En.Record("NameRecord",[{name:"platformID",type:"USHORT",value:R},{name:"encodingID",type:"USHORT",value:W},{name:"languageID",type:"USHORT",value:re},{name:"nameID",type:"USHORT",value:he},{name:"length",type:"USHORT",value:Ce},{name:"offset",type:"USHORT",value:We}])}function vn(R,W){if((re=function(We,Je){var _t=We.length,Yt=Je.length-_t+1;e:for(var Ht=0;Ht<Yt;Ht++)for(;Ht<Yt;Ht++){for(var xn=0;xn<_t;xn++)if(Je[Ht+xn]!==We[xn])continue e;return Ht}return-1}(R,W))<0)for(var re=W.length,he=0,Ce=R.length;he<Ce;++he)W.push(R[he]);return re}var Hn_parse=function(R,W,re){for(var he={},Ce=new Tn.Parser(R,W),We=(W=Ce.parseUShort(),Ce.parseUShort()),Je=Ce.offset+Ce.parseUShort(),_t=0;_t<We;_t++){var Re=Ce.parseUShort(),Yt=Ce.parseUShort(),Ht=Ce.parseUShort(),xn=Ce.parseUShort(),Le=(xn=Ke[xn]||xn,Ce.parseUShort()),be=Ce.parseUShort(),ke=function(Qt,Sn,Fn){switch(Qt){case 0:if(65535===Sn)return"und";if(Fn)return Fn[Sn];break;case 1:return Ve[Sn];case 3:return Ft[Sn]}}(Re,Ht,re);void 0!==(Re=pt(Re,Yt,Ht))&&void 0!==ke&&(Yt=void 0,(Yt=Re===_n?me.UTF16(R,Je+be,Le):me.MACSTRING(R,Je+be,Le,Re))&&((Ht=void 0===(Ht=he[xn])?he[xn]={}:Ht)[ke]=Yt))}return 1===W&&Ce.parseUShort(),he},Hn_make=function(R,W){var re,he=[],Ce={},We=ot(Ke);for(re in R){var Je=We[re];if(void 0===Je&&(Je=re),be=parseInt(Je),isNaN(be))throw new Error('Name table entry "'+re+'" does not exist, see nameTableNames for complete list.');Ce[be]=R[re],he.push(be)}for(var _t=ot(Ve),Yt=ot(Ft),Ht=[],xn=[],Le=0;Le<he.length;Le++){var be,ke,Re=Ce[be=he[Le]];for(ke in Re){var Gr,at=Re[ke],Qt=_t[ke],Sn=vt[Qt],Fn=pt(Gr=1,Sn,Qt),Yr=(void 0===(Fn=Oe.MACSTRING(at,Fn))&&(Gr=0,(Qt=W.indexOf(ke))<0&&(Qt=W.length,W.push(ke)),Sn=4,Fn=Oe.UTF16(at)),vn(Fn,xn));void 0!==(Ht.push(Dt(Gr,Sn,Qt,be,Fn.length,Yr)),Gr=Yt[ke])&&(Qt=vn(Sn=Oe.UTF16(at),xn),Ht.push(Dt(3,1,Gr,be,Sn.length,Qt)))}}Ht.sort(function(ki,Ss){return ki.platformID-Ss.platformID||ki.encodingID-Ss.encodingID||ki.languageID-Ss.languageID||ki.nameID-Ss.nameID});for(var ai=new En.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ht.length},{name:"stringOffset",type:"USHORT",value:6+12*Ht.length}]),li=0;li<Ht.length;li++)ai.fields.push({name:"record_"+li,type:"RECORD",value:Ht[li]});return ai.fields.push({name:"strings",type:"LITERAL",value:xn}),ai},cr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Pr_parse=function(R,W){var re={},he=new Tn.Parser(R,W);re.version=he.parseUShort(),re.xAvgCharWidth=he.parseShort(),re.usWeightClass=he.parseUShort(),re.usWidthClass=he.parseUShort(),re.fsType=he.parseUShort(),re.ySubscriptXSize=he.parseShort(),re.ySubscriptYSize=he.parseShort(),re.ySubscriptXOffset=he.parseShort(),re.ySubscriptYOffset=he.parseShort(),re.ySuperscriptXSize=he.parseShort(),re.ySuperscriptYSize=he.parseShort(),re.ySuperscriptXOffset=he.parseShort(),re.ySuperscriptYOffset=he.parseShort(),re.yStrikeoutSize=he.parseShort(),re.yStrikeoutPosition=he.parseShort(),re.sFamilyClass=he.parseShort(),re.panose=[];for(var Ce=0;Ce<10;Ce++)re.panose[Ce]=he.parseByte();return re.ulUnicodeRange1=he.parseULong(),re.ulUnicodeRange2=he.parseULong(),re.ulUnicodeRange3=he.parseULong(),re.ulUnicodeRange4=he.parseULong(),re.achVendID=String.fromCharCode(he.parseByte(),he.parseByte(),he.parseByte(),he.parseByte()),re.fsSelection=he.parseUShort(),re.usFirstCharIndex=he.parseUShort(),re.usLastCharIndex=he.parseUShort(),re.sTypoAscender=he.parseShort(),re.sTypoDescender=he.parseShort(),re.sTypoLineGap=he.parseShort(),re.usWinAscent=he.parseUShort(),re.usWinDescent=he.parseUShort(),1<=re.version&&(re.ulCodePageRange1=he.parseULong(),re.ulCodePageRange2=he.parseULong()),2<=re.version&&(re.sxHeight=he.parseShort(),re.sCapHeight=he.parseShort(),re.usDefaultChar=he.parseUShort(),re.usBreakChar=he.parseUShort(),re.usMaxContent=he.parseUShort()),re},Pr_make=function(R){return new En.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],R)},Pr_getUnicodeRange=function(R){for(var W=0;W<cr.length;W+=1){var re=cr[W];if(R>=re.begin&&R<re.end)return W}return-1},Ui_parse=function(R,W){var re={},he=new Tn.Parser(R,W);switch(re.version=he.parseVersion(),re.italicAngle=he.parseFixed(),re.underlinePosition=he.parseShort(),re.underlineThickness=he.parseShort(),re.isFixedPitch=he.parseULong(),re.minMemType42=he.parseULong(),re.maxMemType42=he.parseULong(),re.minMemType1=he.parseULong(),re.maxMemType1=he.parseULong(),re.version){case 1:re.names=un.slice();break;case 2:re.numberOfGlyphs=he.parseUShort(),re.glyphNameIndex=new Array(re.numberOfGlyphs);for(var Ce=0;Ce<re.numberOfGlyphs;Ce++)re.glyphNameIndex[Ce]=he.parseUShort();re.names=[];for(var We,Je=0;Je<re.numberOfGlyphs;Je++)re.glyphNameIndex[Je]>=un.length&&(We=he.parseChar(),re.names.push(he.parseString(We)));break;case 2.5:re.numberOfGlyphs=he.parseUShort(),re.offset=new Array(re.numberOfGlyphs);for(var _t=0;_t<re.numberOfGlyphs;_t++)re.offset[_t]=he.parseChar()}return re},Ui_make=function(){return new En.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},ji=new Array(9),Us=(ji[1]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{substFormat:1,coverage:this.parsePointer(hn.coverage),deltaGlyphId:this.parseUShort()}:2===W?{substFormat:2,coverage:this.parsePointer(hn.coverage),substitute:this.parseOffset16List()}:void V.assert(!1,"0x"+R.toString(16)+": lookup type 1 format must be 1 or 2.")},ji[2]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(hn.coverage),sequences:this.parseListOfLists()}},ji[3]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(hn.coverage),alternateSets:this.parseListOfLists()}},ji[4]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB ligature table identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(hn.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:hn.uShort,lookupListIndex:hn.uShort});ji[5]=function(){var R,W,re=this.offset+this.relativeOffset,he=this.parseUShort();return 1===he?{substFormat:he,coverage:this.parsePointer(hn.coverage),ruleSets:this.parseListOfLists(function(){var Ce=this.parseUShort(),We=this.parseUShort();return{input:this.parseUShortList(Ce-1),lookupRecords:this.parseRecordList(We,Us)}})}:2===he?{substFormat:he,coverage:this.parsePointer(hn.coverage),classDef:this.parsePointer(hn.classDef),classSets:this.parseListOfLists(function(){var Ce=this.parseUShort(),We=this.parseUShort();return{classes:this.parseUShortList(Ce-1),lookupRecords:this.parseRecordList(We,Us)}})}:3===he?(R=this.parseUShort(),W=this.parseUShort(),{substFormat:he,coverages:this.parseList(R,hn.pointer(hn.coverage)),lookupRecords:this.parseRecordList(W,Us)}):void V.assert(!1,"0x"+re.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ji[6]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{substFormat:1,coverage:this.parsePointer(hn.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})}:2===W?{substFormat:2,coverage:this.parsePointer(hn.coverage),backtrackClassDef:this.parsePointer(hn.classDef),inputClassDef:this.parsePointer(hn.classDef),lookaheadClassDef:this.parsePointer(hn.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})}:3===W?{substFormat:3,backtrackCoverage:this.parseList(hn.pointer(hn.coverage)),inputCoverage:this.parseList(hn.pointer(hn.coverage)),lookaheadCoverage:this.parseList(hn.pointer(hn.coverage)),lookupRecords:this.parseRecordList(Us)}:void V.assert(!1,"0x"+R.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ji[7]=function(){var R=this.parseUShort(),W=(V.argument(1===R,"GSUB Extension Substitution subtable identifier-format must be 1"),R=this.parseUShort(),new hn(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:R,extension:ji[R].call(W)}},ji[8]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(hn.coverage),backtrackCoverage:this.parseList(hn.pointer(hn.coverage)),lookaheadCoverage:this.parseList(hn.pointer(hn.coverage)),substitutes:this.parseUShortList()}};var xs=new Array(9);xs[1]=function(R){return new En.Table("substitutionTable",1===R.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new En.Coverage(R.coverage)},{name:"deltaGlyphID",type:"USHORT",value:R.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new En.Coverage(R.coverage)}].concat(En.ushortList("substitute",R.substitute)))},xs[3]=function(R){return V.assert(1===R.substFormat,"Lookup type 3 substFormat must be 1."),new En.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new En.Coverage(R.coverage)}].concat(En.tableList("altSet",R.alternateSets,function(W){return new En.Table("alternateSetTable",En.ushortList("alternate",W))})))},xs[4]=function(R){return V.assert(1===R.substFormat,"Lookup type 4 substFormat must be 1."),new En.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new En.Coverage(R.coverage)}].concat(En.tableList("ligSet",R.ligatureSets,function(W){return new En.Table("ligatureSetTable",En.tableList("ligature",W,function(re){return new En.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:re.ligGlyph}].concat(En.ushortList("component",re.components,re.components.length+1)))}))})))};var wi_parse=function(R,W){return W=(R=new hn(R,W=W||0)).parseVersion(1),V.argument(1===W||1.1===W,"Unsupported GSUB table version."),1===W?{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(ji)}:{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(ji),variations:R.parseFeatureVariationsList()}},wi_make=function(R){return new En.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new En.ScriptList(R.scripts)},{name:"features",type:"TABLE",value:new En.FeatureList(R.features)},{name:"lookups",type:"TABLE",value:new En.LookupList(R.lookups,xs)}])},ds_parse=function(R,W){for(var re=new Tn.Parser(R,W),he=re.parseULong(),Ce=(V.argument(1===he,"Unsupported META table version."),re.parseULong(),re.parseULong(),re.parseULong()),We={},Je=0;Je<Ce;Je++){var _t=re.parseTag(),Ht=re.parseULong(),Yt=re.parseULong();Ht=me.UTF8(R,W+Ht,Yt),We[_t]=Ht}return We},ds_make=function(R){var W,re=Object.keys(R).length,he="",Ce=16+12*re,We=new En.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Ce},{name:"numTags",type:"ULONG",value:re}]);for(W in R){var Je=he.length;he+=R[W],We.fields.push({name:"tag "+W,type:"TAG",value:W}),We.fields.push({name:"offset "+W,type:"ULONG",value:Ce+Je}),We.fields.push({name:"length "+W,type:"ULONG",value:R[W].length})}return We.fields.push({name:"stringPool",type:"CHARARRAY",value:he}),We};function $s(R){return Math.log(R)/Math.log(2)|0}function vs(R){for(;R.length%4!=0;)R.push(0);for(var W=0,re=0;re<R.length;re+=4)W+=(R[re]<<24)+(R[re+1]<<16)+(R[re+2]<<8)+R[re+3];return W%Math.pow(2,32)}function Vs(R,W,re,he){return new En.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==R?R:""},{name:"checkSum",type:"ULONG",value:void 0!==W?W:0},{name:"offset",type:"ULONG",value:void 0!==re?re:0},{name:"length",type:"ULONG",value:void 0!==he?he:0}])}function Ko(R){for(var W=new En.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),re=(W.tables=R,W.numTables=R.length,Math.pow(2,$s(W.numTables))),he=(W.searchRange=16*re,W.entrySelector=$s(re),W.rangeShift=16*W.numTables-W.searchRange,[]),Ce=[],We=W.sizeOf()+Vs().sizeOf()*W.numTables;We%4!=0;)We+=1,Ce.push({name:"padding",type:"BYTE",value:0});for(var Je=0;Je<R.length;Je+=1){var _t=R[Je],Yt=(V.argument(4===_t.tableName.length,"Table name"+_t.tableName+" is invalid."),_t.sizeOf()),Ht=Vs(_t.tableName,vs(_t.encode()),We,Yt);for(he.push({name:Ht.tag+" Table Record",type:"RECORD",value:Ht}),Ce.push({name:_t.tableName+" table",type:"RECORD",value:_t}),We+=Yt,V.argument(!isNaN(We),"Something went wrong calculating the offset.");We%4!=0;)We+=1,Ce.push({name:"padding",type:"BYTE",value:0})}return he.sort(function(xn,Le){return xn.value.tag>Le.value.tag?1:-1}),W.fields=W.fields.concat(he),W.fields=W.fields.concat(Ce),W}function fo(R,W,re){for(var he=0;he<W.length;he+=1){var Ce=R.charToGlyphIndex(W[he]);if(0<Ce)return R.glyphs.get(Ce).getMetrics()}return re}var Vo_fontToTable=function(R){for(var W,re=[],he=[],Ce=[],We=[],Je=[],_t=[],Yt=[],Ht=0,xn=0,Le=0,be=0,ke=0,Re=0;Re<R.glyphs.length;Re+=1){var at=R.glyphs.get(Re),Qt=0|at.unicode;if(isNaN(at.advanceWidth))throw new Error("Glyph "+at.name+" ("+Re+"): advanceWidth is not a number.");if((Qt<W||void 0===W)&&0<Qt&&(W=Qt),Ht<Qt&&(Ht=Qt),(Qt=Pr_getUnicodeRange(Qt))<32)xn|=1<<Qt;else if(Qt<64)Le|=1<<Qt-32;else if(Qt<96)be|=1<<Qt-64;else{if(!(Qt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ke|=1<<Qt-96}".notdef"!==at.name&&(Qt=at.getMetrics(),re.push(Qt.xMin),he.push(Qt.yMin),Ce.push(Qt.xMax),We.push(Qt.yMax),_t.push(Qt.leftSideBearing),Yt.push(Qt.rightSideBearing),Je.push(at.advanceWidth))}var Sn,Fn={xMin:Math.min.apply(null,re),yMin:Math.min.apply(null,he),xMax:Math.max.apply(null,Ce),yMax:Math.max.apply(null,We),advanceWidthMax:Math.max.apply(null,Je),advanceWidthAvg:function(Po){for(var hr=0,Gi=0;Gi<Po.length;Gi+=1)hr+=Po[Gi];return hr/Po.length}(Je),minLeftSideBearing:Math.min.apply(null,_t),maxLeftSideBearing:Math.max.apply(null,_t),minRightSideBearing:Math.min.apply(null,Yt)},Yr=(Fn.ascender=R.ascender,Fn.descender=R.descender,B_make({flags:3,unitsPerEm:R.unitsPerEm,xMin:Fn.xMin,yMin:Fn.yMin,xMax:Fn.xMax,yMax:Fn.yMax,lowestRecPPEM:3,createdTimestamp:R.createdTimestamp})),Gr=L_make({ascender:Fn.ascender,descender:Fn.descender,advanceWidthMax:Fn.advanceWidthMax,minLeftSideBearing:Fn.minLeftSideBearing,minRightSideBearing:Fn.minRightSideBearing,xMaxExtent:Fn.maxLeftSideBearing+(Fn.xMax-Fn.xMin),numberOfHMetrics:R.glyphs.length}),ai=de_make(R.glyphs.length),li=Pr_make({xAvgCharWidth:Math.round(Fn.advanceWidthAvg),usWeightClass:R.tables.os2.usWeightClass,usWidthClass:R.tables.os2.usWidthClass,usFirstCharIndex:W,usLastCharIndex:Ht,ulUnicodeRange1:xn,ulUnicodeRange2:Le,ulUnicodeRange3:be,ulUnicodeRange4:ke,fsSelection:R.tables.os2.fsSelection,sTypoAscender:Fn.ascender,sTypoDescender:Fn.descender,sTypoLineGap:0,usWinAscent:Fn.yMax,usWinDescent:Math.abs(Fn.yMin),ulCodePageRange1:1,sxHeight:fo(R,"xyvw",{yMax:Math.round(Fn.ascender/2)}).yMax,sCapHeight:fo(R,"HIKLEFJMNTZBDPRAGOQSUVWXY",Fn).yMax,usDefaultChar:R.hasChar(" ")?32:0,usBreakChar:R.hasChar(" ")?32:0}),ki=se_make(R.glyphs),Ss=ct_make(R.glyphs),Ps=(Bs=R.getEnglishName("fontFamily"))+" "+(Jr=R.getEnglishName("fontSubfamily")),mo=(mo=R.getEnglishName("postScriptName"))||Bs.replace(/\s/g,"")+"-"+Jr,Mo={};for(Sn in R.names)Mo[Sn]=R.names[Sn];Mo.uniqueID||(Mo.uniqueID={en:R.getEnglishName("manufacturer")+":"+Ps}),Mo.postScriptName||(Mo.postScriptName={en:mo}),Mo.preferredFamily||(Mo.preferredFamily=R.names.fontFamily),Mo.preferredSubfamily||(Mo.preferredSubfamily=R.names.fontSubfamily);var Ro=Hn_make(Mo,go=[]),go=0<go.length?H_make(go):void 0,zo=Ui_make(),Bs=(Ps=k_make(R.glyphs,{version:R.getEnglishName("version"),fullName:Ps,familyName:Bs,weightName:Jr,postScriptName:mo,unitsPerEm:R.unitsPerEm,fontBBox:[0,Fn.yMin,Fn.ascender,Fn.advanceWidthMax]}),R.metas&&0<Object.keys(R.metas).length?ds_make(R.metas):void 0),Jr=[Yr,Gr,ai,li,Ro,Ss,zo,Ps,ki];go&&Jr.push(go),R.tables.gsub&&Jr.push(wi_make(R.tables.gsub)),Bs&&Jr.push(Bs);for(var Zs=vs((mo=Ko(Jr)).encode()),Js=mo.fields,Cs=!1,ci=0;ci<Js.length;ci+=1)if("head table"===Js[ci].name){Js[ci].value.checkSumAdjustment=2981146554-Zs,Cs=!0;break}if(Cs)return mo;throw new Error("Could not find head table with checkSum to adjust.")};function ea(R,W){for(var re=0,he=R.length-1;re<=he;){var Ce=re+he>>>1,We=R[Ce].tag;if(We===W)return Ce;We<W?re=1+Ce:he=Ce-1}return-re-1}function ta(R,W){for(var re=0,he=R.length-1;re<=he;){var Ce=re+he>>>1,We=R[Ce];if(We===W)return Ce;We<W?re=1+Ce:he=Ce-1}return-re-1}function la(R,W){for(var re=0,he=R.length-1;re<=he;){var Ce,We=re+he>>>1,Je=(Ce=R[We]).start;if(Je===W)return Ce;Je<W?re=1+We:he=We-1}if(0<re)return W>(Ce=R[re-1]).end?0:Ce}function eo(R,W){this.font=R,this.tableName=W}function ca(R){eo.call(this,R,"gpos")}function _o(R){eo.call(this,R,"gsub")}function Na(R,W,re){for(var he=R.subtables,Ce=0;Ce<he.length;Ce++){var We=he[Ce];if(We.substFormat===W)return We}if(re)return he.push(re),re}function Wa(R){for(var W=new ArrayBuffer(R.length),re=new Uint8Array(W),he=0;he<R.length;++he)re[he]=R[he];return W}function Ne(R,W){if(!R)throw W}function ut(R,W,re,he,Ce){var We=0<(W&he)?(We=R.parseByte(),re+(We=W&Ce?We:-We)):0<(W&Ce)?re:re+R.parseShort();return We}function Nt(R,W,re){var he,Ce=new Tn.Parser(W,re);if(R.numberOfContours=Ce.parseShort(),R._xMin=Ce.parseShort(),R._yMin=Ce.parseShort(),R._xMax=Ce.parseShort(),R._yMax=Ce.parseShort(),0<R.numberOfContours){for(var We=R.endPointIndices=[],Je=0;Je<R.numberOfContours;Je+=1)We.push(Ce.parseUShort());R.instructionLength=Ce.parseUShort(),R.instructions=[];for(var _t=0;_t<R.instructionLength;_t+=1)R.instructions.push(Ce.parseByte());for(var Yt=We[We.length-1]+1,Ht=[],xn=0;xn<Yt;xn+=1)if(he=Ce.parseByte(),Ht.push(he),0<(8&he))for(var Le=Ce.parseByte(),be=0;be<Le;be+=1)Ht.push(he),xn+=1;if(V.argument(Ht.length===Yt,"Bad flags."),0<We.length){var ke,Re=[];if(0<Yt){for(var at=0;at<Yt;at+=1)(ke={}).onCurve=!!(1&(he=Ht[at])),ke.lastPointOfContour=0<=We.indexOf(at),Re.push(ke);for(var Qt=0,Sn=0;Sn<Yt;Sn+=1)(ke=Re[Sn]).x=ut(Ce,he=Ht[Sn],Qt,2,16),Qt=ke.x;for(var Fn=0,Yr=0;Yr<Yt;Yr+=1)(ke=Re[Yr]).y=ut(Ce,he=Ht[Yr],Fn,4,32),Fn=ke.y}R.points=Re}else R.points=[]}else if(0===R.numberOfContours)R.points=[];else{R.isComposite=!0,R.points=[],R.components=[];for(var Gr=!0;Gr;){Ht=Ce.parseUShort();var ai={glyphIndex:Ce.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Ht)?0<(2&Ht)?(ai.dx=Ce.parseShort(),ai.dy=Ce.parseShort()):ai.matchedPoints=[Ce.parseUShort(),Ce.parseUShort()]:0<(2&Ht)?(ai.dx=Ce.parseChar(),ai.dy=Ce.parseChar()):ai.matchedPoints=[Ce.parseByte(),Ce.parseByte()],0<(8&Ht)?ai.xScale=ai.yScale=Ce.parseF2Dot14():0<(64&Ht)?(ai.xScale=Ce.parseF2Dot14(),ai.yScale=Ce.parseF2Dot14()):0<(128&Ht)&&(ai.xScale=Ce.parseF2Dot14(),ai.scale01=Ce.parseF2Dot14(),ai.scale10=Ce.parseF2Dot14(),ai.yScale=Ce.parseF2Dot14()),R.components.push(ai),Gr=!!(32&Ht)}if(256&Ht){R.instructionLength=Ce.parseUShort(),R.instructions=[];for(var li=0;li<R.instructionLength;li+=1)R.instructions.push(Ce.parseByte())}}}function Be(R,W){for(var re=[],he=0;he<R.length;he+=1){var Ce;re.push(Ce={x:W.xScale*(Ce=R[he]).x+W.scale01*Ce.y+W.dx,y:W.scale10*Ce.x+W.yScale*Ce.y+W.dy,onCurve:Ce.onCurve,lastPointOfContour:Ce.lastPointOfContour})}return re}function Vt(R){var W=new Te;if(R)for(var re=function(Le){for(var be=[],ke=[],Re=0;Re<Le.length;Re+=1){var at=Le[Re];ke.push(at),at.lastPointOfContour&&(be.push(ke),ke=[])}return V.argument(0===ke.length,"There are still points left in the current contour."),be}(R),he=0;he<re.length;++he){var Ce,We=re[he],_t=We[0];(Je=We[We.length-1]).onCurve?W.moveTo(Je.x,Je.y):_t.onCurve?W.moveTo(_t.x,_t.y):W.moveTo((Ce={x:.5*(Je.x+_t.x),y:.5*(Je.y+_t.y)}).x,Ce.y);for(var Yt=0;Yt<We.length;++Yt){var Ht,Je=_t;_t=We[(Yt+1)%We.length],Je.onCurve?W.lineTo(Je.x,Je.y):(Ht=_t,_t.onCurve||(Ht={x:.5*(Je.x+_t.x),y:.5*(Je.y+_t.y)}),W.quadraticCurveTo(Je.x,Je.y,Ht.x,Ht.y))}W.closePath()}return W}function In(R,W){if(W.isComposite)for(var re=0;re<W.components.length;re+=1){var Ce=R.get((he=W.components[re]).glyphIndex);if(Ce.getPath(),Ce.points){var We=void 0;if(void 0===he.matchedPoints)We=Be(Ce.points,he);else{if(he.matchedPoints[0]>W.points.length-1||he.matchedPoints[1]>Ce.points.length-1)throw Error("Matched points out of range in "+W.name);var he,Je=W.points[he.matchedPoints[0]],_t=Be([_t=Ce.points[he.matchedPoints[1]]],he={xScale:he.xScale,scale01:he.scale01,scale10:he.scale10,yScale:he.yScale,dx:0,dy:0})[0];he.dx=Je.x-_t.x,he.dy=Je.y-_t.y,We=Be(Ce.points,he)}W.points=W.points.concat(We)}}return Vt(W.points)}(ca.prototype=eo.prototype={searchTag:ea,binSearch:ta,getTable:function(R){var W=this.font.tables[this.tableName];return!W&&R?this.font.tables[this.tableName]=this.createDefaultTable():W},getScriptNames:function(){var R=this.getTable();return R?R.scripts.map(function(W){return W.tag}):[]},getDefaultScriptName:function(){var R=this.getTable();if(R){for(var W=!1,re=0;re<R.scripts.length;re++){var he=R.scripts[re].tag;if("DFLT"===he)return he;"latn"===he&&(W=!0)}return W?"latn":void 0}},getScriptTable:function(R,W){var re,he=this.getTable(W);if(he)return re=he.scripts,0<=(he=ea(he.scripts,R=R||"DFLT"))?re[he].script:W?(re.splice(-1-he,0,W={tag:R,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),W.script):void 0},getLangSysTable:function(Ce,W,re){var he;if(Ce=this.getScriptTable(Ce,re))return W&&"dflt"!==W&&"DFLT"!==W?0<=(he=ea(Ce.langSysRecords,W))?Ce.langSysRecords[he].langSys:re?(Ce.langSysRecords.splice(-1-he,0,re={tag:W,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),re.langSys):void 0:Ce.defaultLangSys},getFeatureTable:function(R,W,re,he){if(R=this.getLangSysTable(R,W,he)){for(var Ce,We=R.featureIndexes,Je=this.font.tables[this.tableName].features,_t=0;_t<We.length;_t++)if((Ce=Je[We[_t]]).tag===re)return Ce.feature;if(he)return V.assert(0===(W=Je.length)||re>=Je[W-1].tag,"Features must be added in alphabetical order."),Je.push(Ce={tag:re,feature:{params:0,lookupListIndexes:[]}}),We.push(W),Ce.feature}},getLookupTables:function(We,W,re,he,Ce){var Je=[];if(We=this.getFeatureTable(We,W,re,Ce)){for(var _t,Yt=We.lookupListIndexes,Ht=this.font.tables[this.tableName].lookups,xn=0;xn<Yt.length;xn++)(_t=Ht[Yt[xn]]).lookupType===he&&Je.push(_t);if(0===Je.length&&Ce)return W=Ht.length,Ht.push(_t={lookupType:he,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Yt.push(W),[_t]}return Je},getGlyphClass:function(R,W){switch(R.format){case 1:return R.startGlyph<=W&&W<R.startGlyph+R.classes.length?R.classes[W-R.startGlyph]:0;case 2:var re=la(R.ranges,W);return re?re.classId:0}},getCoverageIndex:function(R,W){switch(R.format){case 1:var re=ta(R.glyphs,W);return 0<=re?re:-1;case 2:return(re=la(R.ranges,W))?re.index+W-re.start:-1}},expandCoverage:function(R){if(1===R.format)return R.glyphs;for(var W=[],re=R.ranges,he=0;he<re.length;he++)for(var Ce=re[he],Je=Ce.end,_t=Ce.start;_t<=Je;_t++)W.push(_t);return W}}).init=function(){var R=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(R)},ca.prototype.getKerningValue=function(R,W,re){for(var he=0;he<R.length;he++)for(var Ce=R[he].subtables,We=0;We<Ce.length;We++){var Je=Ce[We],_t=this.getCoverageIndex(Je.coverage,W);if(!(_t<0))switch(Je.posFormat){case 1:for(var Yt=Je.pairSets[_t],Ht=0;Ht<Yt.length;Ht++){var xn=Yt[Ht];if(xn.secondGlyph===re)return xn.value1&&xn.value1.xAdvance||0}break;case 2:var be=this.getGlyphClass(Je.classDef1,W),Le=this.getGlyphClass(Je.classDef2,re);return(be=Je.classRecords[be][Le]).value1&&be.value1.xAdvance||0}}return 0},ca.prototype.getKerningTables=function(R,W){if(this.font.tables.gpos)return this.getLookupTables(R,W,"kern",2)},(_o.prototype=eo.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},_o.prototype.getSingle=function(R,W,re){for(var he=[],Ce=this.getLookupTables(W,re,R,1),We=0;We<Ce.length;We++)for(var Je=Ce[We].subtables,_t=0;_t<Je.length;_t++){var Yt=Je[_t],Ht=this.expandCoverage(Yt.coverage),xn=void 0;if(1===Yt.substFormat){var Le=Yt.deltaGlyphId;for(xn=0;xn<Ht.length;xn++){var be=Ht[xn];he.push({sub:be,by:be+Le})}}else{var ke=Yt.substitute;for(xn=0;xn<Ht.length;xn++)he.push({sub:Ht[xn],by:ke[xn]})}}return he},_o.prototype.getAlternates=function(R,W,re){for(var he=[],Ce=this.getLookupTables(W,re,R,3),We=0;We<Ce.length;We++)for(var Je=Ce[We].subtables,_t=0;_t<Je.length;_t++)for(var Yt=Je[_t],Ht=this.expandCoverage(Yt.coverage),xn=Yt.alternateSets,Le=0;Le<Ht.length;Le++)he.push({sub:Ht[Le],by:xn[Le]});return he},_o.prototype.getLigatures=function(R,W,re){for(var he=[],Ce=this.getLookupTables(W,re,R,4),We=0;We<Ce.length;We++)for(var Je=Ce[We].subtables,_t=0;_t<Je.length;_t++)for(var Yt=Je[_t],Ht=this.expandCoverage(Yt.coverage),xn=Yt.ligatureSets,Le=0;Le<Ht.length;Le++)for(var be=Ht[Le],ke=xn[Le],Re=0;Re<ke.length;Re++){var at=ke[Re];he.push({sub:[be].concat(at.components),by:at.ligGlyph})}return he},_o.prototype.addSingle=function(R,W,re,he){re=Na(this.getLookupTables(re,he,R,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),V.assert(1===re.coverage.format,"Ligature: unable to modify coverage table format "+re.coverage.format),(R=this.binSearch(re.coverage.glyphs,he=W.sub))<0&&(re.coverage.glyphs.splice(R=-1-R,0,he),re.substitute.splice(R,0,0)),re.substitute[R]=W.by},_o.prototype.addAlternate=function(R,W,re,he){re=Na(this.getLookupTables(re,he,R,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),V.assert(1===re.coverage.format,"Ligature: unable to modify coverage table format "+re.coverage.format),(R=this.binSearch(re.coverage.glyphs,he=W.sub))<0&&(re.coverage.glyphs.splice(R=-1-R,0,he),re.alternateSets.splice(R,0,0)),re.alternateSets[R]=W.by},_o.prototype.addLigature=function(We,Yt,_t,Ce){(Ce=(_t=this.getLookupTables(_t,Ce,We,4,!0)[0]).subtables[0])||(_t.subtables[0]=Ce={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),V.assert(1===Ce.coverage.format,"Ligature: unable to modify coverage table format "+Ce.coverage.format),We=Yt.sub[0];var Je=Yt.sub.slice(1);if(_t={ligGlyph:Yt.by,components:Je},0<=(Yt=this.binSearch(Ce.coverage.glyphs,We))){for(var Ht=Ce.ligatureSets[Yt],xn=0;xn<Ht.length;xn++)if(function(Le,be){var ke=Le.length;if(ke===be.length){for(var Re=0;Re<ke;Re++)if(Le[Re]!==be[Re])return;return 1}}(Ht[xn].components,Je))return;Ht.push(_t)}else Ce.coverage.glyphs.splice(Yt=-1-Yt,0,We),Ce.ligatureSets.splice(Yt,0,[_t])},_o.prototype.getFeature=function(R,W,re){if(/ss\d\d/.test(R))return this.getSingle(R,W,re);switch(R){case"aalt":case"salt":return this.getSingle(R,W,re).concat(this.getAlternates(R,W,re));case"dlig":case"liga":case"rlig":return this.getLigatures(R,W,re)}},_o.prototype.add=function(R,W,re,he){if(/ss\d\d/.test(R))return this.addSingle(R,W,re,he);switch(R){case"aalt":case"salt":return"number"==typeof W.by?this.addSingle(R,W,re,he):this.addAlternate(R,W,re,he);case"dlig":case"liga":case"rlig":return this.addLigature(R,W,re,he)}};var ts={getPath:Vt,parse:function(R,W,re,he){for(var Ce=new yn.GlyphSet(he),We=0;We<re.length-1;We+=1){var Je=re[We];Ce.push(We,Je!==re[We+1]?yn.ttfGlyphLoader(he,We,Nt,R,W+Je,In):yn.glyphLoader(he,We))}return Ce}};function Gs(R){this.font=R,this.getCommands=function(W){return ts.getPath(W).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Go(R){return R}function Aa(R){return Math.sign(R)*Math.round(Math.abs(R))}function ba(R){return Math.sign(R)*Math.round(Math.abs(2*R))/2}function ll(R){return Math.sign(R)*(Math.round(Math.abs(R)+.5)-.5)}function Rl(R){return Math.sign(R)*Math.ceil(Math.abs(R))}function Pl(R){return Math.sign(R)*Math.floor(Math.abs(R))}function Ol(R){var W=this.srPeriod,re=this.srPhase,he=1;return R<0&&(R=-R,he=-1),R+=this.srThreshold-re,R=Math.trunc(R/W)*W,(R+=re)<0?re*he:R*he}var Io={x:1,y:0,axis:"x",distance:function(R,W,re,he){return(re?R.xo:R.x)-(he?W.xo:W.x)},interpolate:function(R,W,re,he){var Ce,We,Je,_t,Yt,Ht,xn;if(!he||he===this)return Ce=R.xo-W.xo,We=R.xo-re.xo,Yt=W.x-W.xo,Ht=re.x-re.xo,0===(xn=(Je=Math.abs(Ce))+(_t=Math.abs(We)))?void(R.x=R.xo+(Yt+Ht)/2):void(R.x=R.xo+(Yt*_t+Ht*Je)/xn);Ce=he.distance(R,W,!0,!0),We=he.distance(R,re,!0,!0),Yt=he.distance(W,W,!1,!0),Ht=he.distance(re,re,!1,!0),0===(xn=(Je=Math.abs(Ce))+(_t=Math.abs(We)))?Io.setRelative(R,R,(Yt+Ht)/2,he,!0):Io.setRelative(R,R,(Yt*_t+Ht*Je)/xn,he,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(R,W,re,he,Ce){var We,Je;he&&he!==this?(We=Ce?W.xo:W.x,Je=Ce?W.yo:W.y,R.x=(We+=re*he.x)+(R.y-(Je+=re*he.y))/he.normalSlope):R.x=(Ce?W.xo:W.x)+re},slope:0,touch:function(R){R.xTouched=!0},touched:function(R){return R.xTouched},untouch:function(R){R.xTouched=!1}},No={x:0,y:1,axis:"y",distance:function(R,W,re,he){return(re?R.yo:R.y)-(he?W.yo:W.y)},interpolate:function(R,W,re,he){var Ce,We,Je,_t,Yt,Ht,xn;if(!he||he===this)return Ce=R.yo-W.yo,We=R.yo-re.yo,Yt=W.y-W.yo,Ht=re.y-re.yo,0===(xn=(Je=Math.abs(Ce))+(_t=Math.abs(We)))?void(R.y=R.yo+(Yt+Ht)/2):void(R.y=R.yo+(Yt*_t+Ht*Je)/xn);Ce=he.distance(R,W,!0,!0),We=he.distance(R,re,!0,!0),Yt=he.distance(W,W,!1,!0),Ht=he.distance(re,re,!1,!0),0===(xn=(Je=Math.abs(Ce))+(_t=Math.abs(We)))?No.setRelative(R,R,(Yt+Ht)/2,he,!0):No.setRelative(R,R,(Yt*_t+Ht*Je)/xn,he,!0)},normalSlope:0,setRelative:function(R,W,re,he,Ce){var We,Je;he&&he!==this?(We=Ce?W.xo:W.x,Je=Ce?W.yo:W.y,R.y=(Je+=re*he.y)+he.normalSlope*(R.x-(We+=re*he.x))):R.y=(Ce?W.yo:W.y)+re},slope:Number.POSITIVE_INFINITY,touch:function(R){R.yTouched=!0},touched:function(R){return R.yTouched},untouch:function(R){R.yTouched=!1}};function ao(R,W){this.x=R,this.y=W,this.axis=void 0,this.slope=W/R,this.normalSlope=-R/W,Object.freeze(this)}function Eo(R,W){var re=Math.sqrt(R*R+W*W);return W/=re,1==(R/=re)&&0===W?Io:0===R&&1===W?No:new ao(R,W)}function it(R,W,re,he){this.x=this.xo=Math.round(64*R)/64,this.y=this.yo=Math.round(64*W)/64,this.lastPointOfContour=re,this.onCurve=he,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Io),Object.freeze(No),ao.prototype.distance=function(R,W,re,he){return this.x*Io.distance(R,W,re,he)+this.y*No.distance(R,W,re,he)},ao.prototype.interpolate=function(R,Ce,We,he){var Je=he.distance(R,Ce,!0,!0),_t=he.distance(R,We,!0,!0),Yt=(Ce=he.distance(Ce,Ce,!1,!0),We=he.distance(We,We,!1,!0),(Je=Math.abs(Je))+(_t=Math.abs(_t)));this.setRelative(R,R,0===Yt?(Ce+We)/2:(Ce*_t+We*Je)/Yt,he,!0)},ao.prototype.setRelative=function(R,We,Yt,Ht,_t){var Je=_t?We.xo:We.x,xn=(_t=_t?We.yo:We.y,We=Je+Yt*(Ht=Ht||this).x,Je=_t+Yt*Ht.y,_t=Ht.normalSlope,R.y);R.x=((Yt=this.slope)*(Ht=R.x)-_t*We+Je-xn)/(Yt-_t),R.y=Yt*(R.x-Ht)+xn},ao.prototype.touch=function(R){R.xTouched=!0,R.yTouched=!0},it.prototype.nextTouched=function(R){for(var W=this.nextPointOnContour;!R.touched(W)&&W!==this;)W=W.nextPointOnContour;return W},it.prototype.prevTouched=function(R){for(var W=this.prevPointOnContour;!R.touched(W)&&W!==this;)W=W.prevPointOnContour;return W};var At=Object.freeze(new it(0,0)),on={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function mn(R,W){switch(this.env=R,this.stack=[],this.prog=W,R){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Io,this.round=Aa}}function Rn(R){for(var W=R.tZone=new Array(R.gZone.length),re=0;re<W.length;re++)W[re]=new it(0,0)}function Dn(R,W){var re,he=R.prog,Ce=R.ip,We=1;do{if(88===(re=he[++Ce]))We++;else if(89===re)We--;else if(64===re)Ce+=he[Ce+1]+1;else if(65===re)Ce+=2*he[Ce+1]+1;else if(176<=re&&re<=183)Ce+=re-176+1;else if(184<=re&&re<=191)Ce+=2*(re-184+1);else if(W&&1===We&&27===re)break}while(0<We);R.ip=Ce}function ir(R,W){w.DEBUG&&console.log(W.step,"SVTCA["+R.axis+"]"),W.fv=W.pv=W.dpv=R}function dr(R,W){w.DEBUG&&console.log(W.step,"SPVTCA["+R.axis+"]"),W.pv=W.dpv=R}function vr(R,W){w.DEBUG&&console.log(W.step,"SFVTCA["+R.axis+"]"),W.fv=R}function xr(R,W){var re,he=(Ce=W.stack).pop(),Ce=Ce.pop(),We=W.z2[he],Je=W.z1[Ce];w.DEBUG&&console.log("SPVTL["+R+"]",he,Ce),he=R?(re=We.y-Je.y,Je.x-We.x):(re=Je.x-We.x,Je.y-We.y),W.pv=W.dpv=Eo(re,he)}function Xr(R,W){var re,he=(Ce=W.stack).pop(),Ce=Ce.pop(),We=W.z2[he],Je=W.z1[Ce];w.DEBUG&&console.log("SFVTL["+R+"]",he,Ce),he=R?(re=We.y-Je.y,Je.x-We.x):(re=Je.x-We.x,Je.y-We.y),W.fv=Eo(re,he)}function Vr(R){w.DEBUG&&console.log(R.step,"POP[]"),R.stack.pop()}function ni(R,W){var re=W.stack.pop(),he=W.z0[re],Ce=W.fv,We=W.pv,Je=(w.DEBUG&&console.log(W.step,"MDAP["+R+"]",re),We.distance(he,At));R&&(Je=W.round(Je)),Ce.setRelative(he,At,Je,We),Ce.touch(he),W.rp0=W.rp1=re}function oi(R,W){var re,he,Ce,We=W.z2,Je=We.length-2;w.DEBUG&&console.log(W.step,"IUP["+R.axis+"]");for(var _t=0;_t<Je;_t++)R.touched(re=We[_t])||(he=re.prevTouched(R))!==re&&(he===(Ce=re.nextTouched(R))&&R.setRelative(re,re,R.distance(he,he,!1,!0),R,!0),R.interpolate(re,he,Ce,R))}function Ii(R,W){for(var re=W.stack,Ce=(R?W.z0:W.z1)[R?W.rp1:W.rp2],We=W.fv,Je=W.pv,_t=W.loop,Yt=W.z2;_t--;){var Ht=re.pop(),xn=Yt[Ht],Le=Je.distance(Ce,Ce,!1,!0);We.setRelative(xn,xn,Le,Je),We.touch(xn),w.DEBUG&&console.log(W.step,(1<W.loop?"loop "+(W.loop-_t)+": ":"")+"SHP["+(R?"rp1":"rp2")+"]",Ht)}W.loop=1}function Vi(R,W){for(var he=(R?W.z0:W.z1)[R?W.rp1:W.rp2],Ce=W.fv,We=W.pv,Je=W.stack.pop(),_t=W.z2[W.contours[Je]],Yt=_t,Ht=(w.DEBUG&&console.log(W.step,"SHC["+R+"]",Je),We.distance(he,he,!1,!0));Yt!==he&&Ce.setRelative(Yt,Yt,Ht,We),(Yt=Yt.nextPointOnContour)!==_t;);}function hs(R,W){var re,he,Ce=(R?W.z0:W.z1)[Ce=R?W.rp1:W.rp2],We=W.fv,Je=W.pv,_t=(_t=W.stack).pop();switch(w.DEBUG&&console.log(W.step,"SHZ["+R+"]",_t),_t){case 0:re=W.tZone;break;case 1:re=W.gZone;break;default:throw new Error("Invalid zone")}for(var Yt=Je.distance(Ce,Ce,!1,!0),Ht=re.length-2,xn=0;xn<Ht;xn++)We.setRelative(he=re[xn],he,Yt,Je)}function Pi(R,W){var re=(he=W.stack).pop()/64,he=he.pop(),Ce=W.z1[he],Je=W.fv;Je.setRelative(Ce,W.z0[W.rp0],re,W.pv),Je.touch(Ce),w.DEBUG&&console.log(W.step,"MSIRP["+R+"]",re,he),W.rp1=W.rp0,W.rp2=he,R&&(W.rp0=he)}function Ys(R,W){var _t=(re=W.stack).pop(),re=re.pop(),he=W.z0[re],Ce=W.fv,We=W.pv,Je=W.cvt[_t];w.DEBUG&&console.log(W.step,"MIAP["+R+"]",_t,"(",Je,")",re),_t=We.distance(he,At),R&&(Math.abs(_t-Je)<W.cvCutIn&&(_t=Je),_t=W.round(_t)),Ce.setRelative(he,At,_t,We),0===W.zp0&&(he.xo=he.x,he.yo=he.y),Ce.touch(he),W.rp0=W.rp1=re}function Ir(R,W){var re=W.stack,he=re.pop(),Ce=W.z2[he];w.DEBUG&&console.log(W.step,"GC["+R+"]",he),re.push(64*W.dpv.distance(Ce,At,R,!1))}function na(R,W){var re=(he=W.stack).pop(),he=he.pop(),We=W.dpv.distance(We=W.z0[he],W.z1[re],R,R);w.DEBUG&&console.log(W.step,"MD["+R+"]",re,he,"->",We),W.stack.push(Math.round(64*We))}function Ca(R,W){var re=W.stack,he=re.pop(),Ce=W.fv,We=W.pv,Je=W.ppem,_t=W.deltaBase+16*(R-1),Yt=W.deltaShift,Ht=W.z0;w.DEBUG&&console.log(W.step,"DELTAP["+R+"]",he,re);for(var xn=0;xn<he;xn++){var Le=re.pop(),be=re.pop();_t+((240&be)>>4)===Je&&(0<=(be=(15&be)-8)&&be++,w.DEBUG&&console.log(W.step,"DELTAPFIX",Le,"by",be*Yt),Ce.setRelative(Le=Ht[Le],Le,be*Yt,We))}}function Hs(R,W){var re=W.stack,he=re.pop();w.DEBUG&&console.log(W.step,"ROUND[]"),re.push(64*W.round(he/64))}function Yl(R,W){var re=W.stack,he=re.pop(),Ce=W.ppem,We=W.deltaBase+16*(R-1),Je=W.deltaShift;w.DEBUG&&console.log(W.step,"DELTAC["+R+"]",he,re);for(var _t=0;_t<he;_t++){var Yt=re.pop(),Ht=re.pop();We+((240&Ht)>>4)===Ce&&(0<=(Ht=(15&Ht)-8)&&Ht++,Ht*=Je,w.DEBUG&&console.log(W.step,"DELTACFIX",Yt,"by",Ht),W.cvt[Yt]+=Ht)}}function lu(R,W){var re,he=(Ce=W.stack).pop(),Ce=Ce.pop(),We=W.z2[he],Je=W.z1[Ce];w.DEBUG&&console.log(W.step,"SDPVTL["+R+"]",he,Ce),he=R?(re=We.y-Je.y,Je.x-We.x):(re=Je.x-We.x,Je.y-We.y),W.dpv=Eo(re,he)}function Yo(R,W){var re=W.stack,he=W.prog,Ce=W.ip;w.DEBUG&&console.log(W.step,"PUSHB["+R+"]");for(var We=0;We<R;We++)re.push(he[++Ce]);W.ip=Ce}function to(R,W){var re=W.ip,he=W.prog,Ce=W.stack;w.DEBUG&&console.log(W.ip,"PUSHW["+R+"]");for(var We=0;We<R;We++){var Je=he[++re]<<8|he[++re];32768&Je&&(Je=-(1+(65535^Je))),Ce.push(Je)}W.ip=re}function ri(R,W,re,he,Ce,We){var Je,_t,xn,Ht=We.stack,Yt=R&&Ht.pop(),Le=(Ht=Ht.pop(),We.z1[Ht]),be=We.minDis,ke=We.fv,Re=We.dpv,at=Je=Re.distance(Le,xn=We.z0[xn=We.rp0],!0,!0),Qt=0<=at?1:-1;at=Math.abs(at),R&&(_t=We.cvt[Yt],he&&Math.abs(at-_t)<We.cvCutIn&&(at=_t)),re&&at<be&&(at=be),he&&(at=We.round(at)),ke.setRelative(Le,xn,Qt*at,Re),ke.touch(Le),w.DEBUG&&console.log(We.step,(R?"MIRP[":"MDRP[")+(W?"M":"m")+(re?">":"_")+(he?"R":"_")+(0===Ce?"Gr":1===Ce?"Bl":2===Ce?"Wh":"")+"]",R?Yt+"("+We.cvt[Yt]+","+_t+")":"",Ht,"(d =",Je,"->",Qt*at,")"),We.rp1=We.rp0,We.rp2=Ht,W&&(We.rp0=Ht)}Gs.prototype.exec=function(R,W){if("number"!=typeof W)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var re=this.font,he=this._prepState;if(!he||he.ppem!==W){var Ce=this._fpgmState;if(!Ce){mn.prototype=on,(Ce=this._fpgmState=new mn("fpgm",re.tables.fpgm)).funcs=[],Ce.font=re,w.DEBUG&&(console.log("---EXEC FPGM---"),Ce.step=-1);try{ua(Ce)}catch(Ht){return console.log("Hinting error in FPGM:"+Ht),void(this._errorState=3)}}mn.prototype=Ce,(he=this._prepState=new mn("prep",re.tables.prep)).ppem=W;var We=re.tables.cvt;if(We)for(var Je=he.cvt=new Array(We.length),_t=W/re.unitsPerEm,Yt=0;Yt<We.length;Yt++)Je[Yt]=We[Yt]*_t;else he.cvt=[];w.DEBUG&&(console.log("---EXEC PREP---"),he.step=-1);try{ua(he)}catch(Ht){this._errorState<2&&console.log("Hinting error in PREP:"+Ht),this._errorState=2}}if(!(1<this._errorState))try{return ka(R,he)}catch(Ht){this._errorState<1&&(console.log("Hinting error:"+Ht),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var ka=function(R,W){var re=W.ppem/W.font.unitsPerEm,he=re,Ce=R.components;if(mn.prototype=W,Ce){for(var We=W.font,Je=[],_t=[],Yt=0;Yt<Ce.length;Yt++){var Ht=Ce[Yt],xn=We.glyphs.get(Ht.glyphIndex),Le=new mn("glyf",xn.instructions);w.DEBUG&&(console.log("---EXEC COMP "+Yt+"---"),Le.step=-1),Xa(xn,Le,re,he);for(var be=Math.round(Ht.dx*re),ke=Math.round(Ht.dy*he),Re=Le.gZone,at=Le.contours,Qt=0;Qt<Re.length;Qt++){var Sn=Re[Qt];Sn.xTouched=Sn.yTouched=!1,Sn.xo=Sn.x=Sn.x+be,Sn.yo=Sn.y=Sn.y+ke}var Fn=Je.length;Je.push.apply(Je,Re);for(var Yr=0;Yr<at.length;Yr++)_t.push(at[Yr]+Fn)}R.instructions&&!Le.inhibitGridFit&&((Le=new mn("glyf",R.instructions)).gZone=Le.z0=Le.z1=Le.z2=Je,Le.contours=_t,Je.push(new it(0,0),new it(Math.round(R.advanceWidth*re),0)),w.DEBUG&&(console.log("---EXEC COMPOSITE---"),Le.step=-1),ua(Le),Je.length-=2)}else Le=new mn("glyf",R.instructions),w.DEBUG&&(console.log("---EXEC GLYPH---"),Le.step=-1),Xa(R,Le,re,he),Je=Le.gZone;return Je},Xa=function(R,W,re,he){for(var Ce,We,_t=R.points||[],Yt=_t.length,Ht=W.gZone=W.z0=W.z1=W.z2=[],xn=W.contours=[],Le=0;Le<Yt;Le++)Ht[Le]=new it((Ce=_t[Le]).x*re,Ce.y*he,Ce.lastPointOfContour,Ce.onCurve);for(var be=0;be<Yt;be++)Ce=Ht[be],We||(We=Ce,xn.push(be)),Ce.lastPointOfContour?((Ce.nextPointOnContour=We).prevPointOnContour=Ce,We=void 0):(Ce.nextPointOnContour=Ht[be+1]).prevPointOnContour=Ce;if(!W.inhibitGridFit){if(w.DEBUG){console.log("PROCESSING GLYPH",W.stack);for(var ke=0;ke<Yt;ke++)console.log(ke,Ht[ke].x,Ht[ke].y)}if(Ht.push(new it(0,0),new it(Math.round(R.advanceWidth*re),0)),ua(W),Ht.length-=2,w.DEBUG){console.log("FINISHED GLYPH",W.stack);for(var Re=0;Re<Yt;Re++)console.log(Re,Ht[Re].x,Ht[Re].y)}}},ua=function(R){var W=R.prog;if(W){var re,he=W.length;for(R.ip=0;R.ip<he;R.ip++){if(w.DEBUG&&R.step++,!(re=Zl[W[R.ip]]))throw new Error("unknown instruction: 0x"+Number(W[R.ip]).toString(16));re(R)}}},Zl=[ir.bind(void 0,No),ir.bind(void 0,Io),dr.bind(void 0,No),dr.bind(void 0,Io),vr.bind(void 0,No),vr.bind(void 0,Io),xr.bind(void 0,0),xr.bind(void 0,1),Xr.bind(void 0,0),Xr.bind(void 0,1),function(R){var W=(re=R.stack).pop(),re=re.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",W,re),R.pv=R.dpv=Eo(re,W)},function(R){var W=(re=R.stack).pop(),re=re.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",W,re),R.fv=Eo(re,W)},function(R){var W=R.stack,re=R.pv;w.DEBUG&&console.log(R.step,"GPV[]"),W.push(16384*re.x),W.push(16384*re.y)},function(R){var W=R.stack,re=R.fv;w.DEBUG&&console.log(R.step,"GFV[]"),W.push(16384*re.x),W.push(16384*re.y)},function(R){R.fv=R.pv,w.DEBUG&&console.log(R.step,"SFVTPV[]")},function(W){var re=(Je=W.stack).pop(),he=Je.pop(),Ce=Je.pop(),We=Je.pop(),Je=Je.pop(),_t=(Yt=W.z0)[re],Yt=Yt[he],Ht=(xn=W.z1)[Ce],xn=xn[We],Le=(W=W.z2[Je],w.DEBUG&&console.log("ISECT[], ",re,he,Ce,We,Je),re=_t.x,he=_t.y,_t=Ht.y,re*(We=Yt.y)-he*(Ce=Yt.x)),be=(Je=Ht.x)*(Ht=xn.y)-_t*(Yt=xn.x);W.x=(Le*(Je-Yt)-be*(re-Ce))/(xn=(re-Ce)*(_t-Ht)-(he-We)*(Je-Yt)),W.y=(Le*(_t-Ht)-be*(he-We))/xn},function(R){R.rp0=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP0[]",R.rp0)},function(R){R.rp1=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP1[]",R.rp1)},function(R){R.rp2=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP2[]",R.rp2)},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP0[]",W),R.zp0=W){case 0:R.tZone||Rn(R),R.z0=R.tZone;break;case 1:R.z0=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP1[]",W),R.zp1=W){case 0:R.tZone||Rn(R),R.z1=R.tZone;break;case 1:R.z1=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP2[]",W),R.zp2=W){case 0:R.tZone||Rn(R),R.z2=R.tZone;break;case 1:R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZPS[]",W),R.zp0=R.zp1=R.zp2=W){case 0:R.tZone||Rn(R),R.z0=R.z1=R.z2=R.tZone;break;case 1:R.z0=R.z1=R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){R.loop=R.stack.pop(),w.DEBUG&&console.log(R.step,"SLOOP[]",R.loop)},function(R){w.DEBUG&&console.log(R.step,"RTG[]"),R.round=Aa},function(R){w.DEBUG&&console.log(R.step,"RTHG[]"),R.round=ll},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SMD[]",W),R.minDis=W/64},function(R){w.DEBUG&&console.log(R.step,"ELSE[]"),Dn(R,!1)},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"JMPR[]",W),R.ip+=W-1},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCVTCI[]",W),R.cvCutIn=W/64},void 0,void 0,function(R){var W=R.stack;w.DEBUG&&console.log(R.step,"DUP[]"),W.push(W[W.length-1])},Vr,function(R){w.DEBUG&&console.log(R.step,"CLEAR[]"),R.stack.length=0},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"SWAP[]"),W.push(re),W.push(he)},function(R){var W=R.stack;w.DEBUG&&console.log(R.step,"DEPTH[]"),W.push(W.length)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"CINDEX[]",re),W.push(W[W.length-re])},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"MINDEX[]",re),W.push(W.splice(W.length-re,1)[0])},void 0,void 0,void 0,function(R){var W=(he=R.stack).pop(),re=he.pop(),he=(w.DEBUG&&console.log(R.step,"LOOPCALL[]",W,re),R.ip),Ce=R.prog;R.prog=R.funcs[W];for(var We=0;We<re;We++)ua(R),w.DEBUG&&console.log(++R.step,We+1<re?"next loopcall":"done loopcall",We);R.ip=he,R.prog=Ce},function(R){var W=R.stack.pop(),re=(w.DEBUG&&console.log(R.step,"CALL[]",W),R.ip),he=R.prog;R.prog=R.funcs[W],ua(R),R.ip=re,R.prog=he,w.DEBUG&&console.log(++R.step,"returning from",W)},function(R){if("fpgm"!==R.env)throw new Error("FDEF not allowed here");var W=R.prog,re=R.ip,he=(he=R.stack).pop(),Ce=re;for(w.DEBUG&&console.log(R.step,"FDEF[]",he);45!==W[++re];);R.ip=re,R.funcs[he]=W.slice(Ce+1,re)},void 0,ni.bind(void 0,0),ni.bind(void 0,1),oi.bind(void 0,No),oi.bind(void 0,Io),Ii.bind(void 0,0),Ii.bind(void 0,1),Vi.bind(void 0,0),Vi.bind(void 0,1),hs.bind(void 0,0),hs.bind(void 0,1),function(R){for(var W=R.stack,re=R.loop,he=R.fv,Ce=W.pop()/64,We=R.z2;re--;){var Je=W.pop(),_t=We[Je];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-re)+": ":"")+"SHPIX[]",Je,Ce),he.setRelative(_t,_t,Ce),he.touch(_t)}R.loop=1},function(R){for(var W=R.stack,re=R.rp1,he=R.rp2,Ce=R.loop,We=R.z0[re],Je=R.z1[he],_t=R.fv,Yt=R.dpv,Ht=R.z2;Ce--;){var xn=W.pop(),Le=Ht[xn];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-Ce)+": ":"")+"IP[]",xn,re,"<->",he),_t.interpolate(Le,We,Je,Yt),_t.touch(Le)}R.loop=1},Pi.bind(void 0,0),Pi.bind(void 0,1),function(R){for(var W=R.stack,he=R.z0[R.rp0],Ce=R.loop,We=R.fv,Je=R.pv,_t=R.z1;Ce--;){var Yt=W.pop(),Ht=_t[Yt];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-Ce)+": ":"")+"ALIGNRP[]",Yt),We.setRelative(Ht,he,0,Je),We.touch(Ht)}R.loop=1},function(R){w.DEBUG&&console.log(R.step,"RTDG[]"),R.round=ba},Ys.bind(void 0,0),Ys.bind(void 0,1),function(R){var W=R.prog,re=R.ip,he=R.stack,Ce=W[++re];w.DEBUG&&console.log(R.step,"NPUSHB[]",Ce);for(var We=0;We<Ce;We++)he.push(W[++re]);R.ip=re},function(R){var W=R.ip,re=R.prog,he=R.stack,Ce=re[++W];w.DEBUG&&console.log(R.step,"NPUSHW[]",Ce);for(var We=0;We<Ce;We++){var Je=re[++W]<<8|re[++W];32768&Je&&(Je=-(1+(65535^Je))),he.push(Je)}R.ip=W},function(R){var he=R.stack,W=(W=R.store)||(R.store=[]),re=he.pop();he=he.pop(),w.DEBUG&&console.log(R.step,"WS",re,he),W[he]=re},function(Ce){var W=Ce.stack,re=Ce.store,he=W.pop();w.DEBUG&&console.log(Ce.step,"RS",he),W.push(Ce=re&&re[he]||0)},function(R){var W=(re=R.stack).pop(),re=re.pop();w.DEBUG&&console.log(R.step,"WCVTP",W,re),R.cvt[re]=W/64},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"RCVT",re),W.push(64*R.cvt[re])},Ir.bind(void 0,0),Ir.bind(void 0,1),void 0,na.bind(void 0,0),na.bind(void 0,1),function(R){w.DEBUG&&console.log(R.step,"MPPEM[]"),R.stack.push(R.ppem)},void 0,function(R){w.DEBUG&&console.log(R.step,"FLIPON[]"),R.autoFlip=!0},void 0,void 0,function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"LT[]",re,he),W.push(he<re?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"LTEQ[]",re,he),W.push(he<=re?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"GT[]",re,he),W.push(re<he?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"GTEQ[]",re,he),W.push(re<=he?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"EQ[]",re,he),W.push(re===he?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"NEQ[]",re,he),W.push(re!==he?1:0)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"ODD[]",re),W.push(Math.trunc(re)%2?1:0)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"EVEN[]",re),W.push(Math.trunc(re)%2?0:1)},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"IF[]",W),W||(Dn(R,!0),w.DEBUG&&console.log(R.step,"EIF[]"))},function(R){w.DEBUG&&console.log(R.step,"EIF[]")},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"AND[]",re,he),W.push(re&&he?1:0)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"OR[]",re,he),W.push(re||he?1:0)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"NOT[]",re),W.push(re?0:1)},Ca.bind(void 0,1),function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SDB[]",W),R.deltaBase=W},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SDS[]",W),R.deltaShift=Math.pow(.5,W)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"ADD[]",re,he),W.push(he+re)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"SUB[]",re,he),W.push(he-re)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"DIV[]",re,he),W.push(64*he/re)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"MUL[]",re,he),W.push(he*re/64)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"ABS[]",re),W.push(Math.abs(re))},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"NEG[]",re),W.push(-re)},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"FLOOR[]",re),W.push(64*Math.floor(re/64))},function(R){var W=R.stack,re=W.pop();w.DEBUG&&console.log(R.step,"CEILING[]",re),W.push(64*Math.ceil(re/64))},Hs.bind(void 0,0),Hs.bind(void 0,1),Hs.bind(void 0,2),Hs.bind(void 0,3),void 0,void 0,void 0,void 0,function(R){var W=(re=R.stack).pop(),re=re.pop();w.DEBUG&&console.log(R.step,"WCVTF[]",W,re),R.cvt[re]=W*R.ppem/R.font.unitsPerEm},Ca.bind(void 0,2),Ca.bind(void 0,3),Yl.bind(void 0,1),Yl.bind(void 0,2),Yl.bind(void 0,3),function(R){var W,re=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SROUND[]",re),R.round=Ol,192&re){case 0:W=.5;break;case 64:W=1;break;case 128:W=2;break;default:throw new Error("invalid SROUND value")}switch(R.srPeriod=W,48&re){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*W;break;case 32:R.srPhase=.5*W;break;case 48:R.srPhase=.75*W;break;default:throw new Error("invalid SROUND value")}R.srThreshold=0==(re&=15)?0:(re/8-.5)*W},function(R){var W,re=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"S45ROUND[]",re),R.round=Ol,192&re){case 0:W=Math.sqrt(2)/2;break;case 64:W=Math.sqrt(2);break;case 128:W=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(R.srPeriod=W,48&re){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*W;break;case 32:R.srPhase=.5*W;break;case 48:R.srPhase=.75*W;break;default:throw new Error("invalid S45ROUND value")}R.srThreshold=0==(re&=15)?0:(re/8-.5)*W},void 0,void 0,function(R){w.DEBUG&&console.log(R.step,"ROFF[]"),R.round=Go},void 0,function(R){w.DEBUG&&console.log(R.step,"RUTG[]"),R.round=Rl},function(R){w.DEBUG&&console.log(R.step,"RDTG[]"),R.round=Pl},Vr,Vr,void 0,void 0,void 0,void 0,void 0,function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANCTRL[]",W)},lu.bind(void 0,0),lu.bind(void 0,1),function(R){var W=R.stack,re=W.pop(),he=0;w.DEBUG&&console.log(R.step,"GETINFO[]",re),1&re&&(he=35),32&re&&(he|=4096),W.push(he)},void 0,function(R){var W=R.stack,re=W.pop(),he=W.pop(),Ce=W.pop();w.DEBUG&&console.log(R.step,"ROLL[]"),W.push(he),W.push(re),W.push(Ce)},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"MAX[]",re,he),W.push(Math.max(he,re))},function(R){var W=R.stack,re=W.pop(),he=W.pop();w.DEBUG&&console.log(R.step,"MIN[]",re,he),W.push(Math.min(he,re))},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANTYPE[]",W)},function(R){var W=R.stack.pop(),re=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"INSTCTRL[]",W,re),W){case 1:return void(R.inhibitGridFit=!!re);case 2:return void(R.ignoreCvt=!!re);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Yo.bind(void 0,1),Yo.bind(void 0,2),Yo.bind(void 0,3),Yo.bind(void 0,4),Yo.bind(void 0,5),Yo.bind(void 0,6),Yo.bind(void 0,7),Yo.bind(void 0,8),to.bind(void 0,1),to.bind(void 0,2),to.bind(void 0,3),to.bind(void 0,4),to.bind(void 0,5),to.bind(void 0,6),to.bind(void 0,7),to.bind(void 0,8),ri.bind(void 0,0,0,0,0,0),ri.bind(void 0,0,0,0,0,1),ri.bind(void 0,0,0,0,0,2),ri.bind(void 0,0,0,0,0,3),ri.bind(void 0,0,0,0,1,0),ri.bind(void 0,0,0,0,1,1),ri.bind(void 0,0,0,0,1,2),ri.bind(void 0,0,0,0,1,3),ri.bind(void 0,0,0,1,0,0),ri.bind(void 0,0,0,1,0,1),ri.bind(void 0,0,0,1,0,2),ri.bind(void 0,0,0,1,0,3),ri.bind(void 0,0,0,1,1,0),ri.bind(void 0,0,0,1,1,1),ri.bind(void 0,0,0,1,1,2),ri.bind(void 0,0,0,1,1,3),ri.bind(void 0,0,1,0,0,0),ri.bind(void 0,0,1,0,0,1),ri.bind(void 0,0,1,0,0,2),ri.bind(void 0,0,1,0,0,3),ri.bind(void 0,0,1,0,1,0),ri.bind(void 0,0,1,0,1,1),ri.bind(void 0,0,1,0,1,2),ri.bind(void 0,0,1,0,1,3),ri.bind(void 0,0,1,1,0,0),ri.bind(void 0,0,1,1,0,1),ri.bind(void 0,0,1,1,0,2),ri.bind(void 0,0,1,1,0,3),ri.bind(void 0,0,1,1,1,0),ri.bind(void 0,0,1,1,1,1),ri.bind(void 0,0,1,1,1,2),ri.bind(void 0,0,1,1,1,3),ri.bind(void 0,1,0,0,0,0),ri.bind(void 0,1,0,0,0,1),ri.bind(void 0,1,0,0,0,2),ri.bind(void 0,1,0,0,0,3),ri.bind(void 0,1,0,0,1,0),ri.bind(void 0,1,0,0,1,1),ri.bind(void 0,1,0,0,1,2),ri.bind(void 0,1,0,0,1,3),ri.bind(void 0,1,0,1,0,0),ri.bind(void 0,1,0,1,0,1),ri.bind(void 0,1,0,1,0,2),ri.bind(void 0,1,0,1,0,3),ri.bind(void 0,1,0,1,1,0),ri.bind(void 0,1,0,1,1,1),ri.bind(void 0,1,0,1,1,2),ri.bind(void 0,1,0,1,1,3),ri.bind(void 0,1,1,0,0,0),ri.bind(void 0,1,1,0,0,1),ri.bind(void 0,1,1,0,0,2),ri.bind(void 0,1,1,0,0,3),ri.bind(void 0,1,1,0,1,0),ri.bind(void 0,1,1,0,1,1),ri.bind(void 0,1,1,0,1,2),ri.bind(void 0,1,1,0,1,3),ri.bind(void 0,1,1,1,0,0),ri.bind(void 0,1,1,1,0,1),ri.bind(void 0,1,1,1,0,2),ri.bind(void 0,1,1,1,0,3),ri.bind(void 0,1,1,1,1,0),ri.bind(void 0,1,1,1,1,1),ri.bind(void 0,1,1,1,1,2),ri.bind(void 0,1,1,1,1,3)],Ll=Array.from||function(R){return R.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function As(R){(R=R||{}).empty||(Ne(R.familyName,"When creating a new Font object, familyName is required."),Ne(R.styleName,"When creating a new Font object, styleName is required."),Ne(R.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ne(R.ascender,"When creating a new Font object, ascender is required."),Ne(R.descender,"When creating a new Font object, descender is required."),Ne(R.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:R.familyName||" "},fontSubfamily:{en:R.styleName||" "},fullName:{en:R.fullName||R.familyName+" "+R.styleName},postScriptName:{en:R.postScriptName||(R.familyName+R.styleName).replace(/\s/g,"")},designer:{en:R.designer||" "},designerURL:{en:R.designerURL||" "},manufacturer:{en:R.manufacturer||" "},manufacturerURL:{en:R.manufacturerURL||" "},license:{en:R.license||" "},licenseURL:{en:R.licenseURL||" "},version:{en:R.version||"Version 0.1"},description:{en:R.description||" "},copyright:{en:R.copyright||" "},trademark:{en:R.trademark||" "}},this.unitsPerEm=R.unitsPerEm||1e3,this.ascender=R.ascender,this.descender=R.descender,this.createdTimestamp=R.createdTimestamp,this.tables={os2:{usWeightClass:R.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:R.widthClass||this.usWidthClasses.MEDIUM,fsSelection:R.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new yn.GlyphSet(this,R.glyphs||[]),this.encoding=new An(this),this.position=new ca(this),this.substitution=new _o(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new Gs(this):void 0)}})}As.prototype.hasChar=function(R){return null!==this.encoding.charToGlyphIndex(R)},As.prototype.charToGlyphIndex=function(R){return this.encoding.charToGlyphIndex(R)},As.prototype.charToGlyph=function(R){return R=this.charToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},As.prototype.stringToGlyphs=function(R,W){W=W||this.defaultRenderOptions;for(var re=Ll(R),he=[],Ce=0;Ce<re.length;Ce+=1)he.push(this.charToGlyphIndex(re[Ce]));var Je=he.length;if(W.features){R=W.script||this.substitution.getDefaultScriptName();var _t=[];W.features.liga&&(_t=_t.concat(this.substitution.getFeature("liga",R,W.language))),W.features.rlig&&(_t=_t.concat(this.substitution.getFeature("rlig",R,W.language)));for(var Yt=0;Yt<Je;Yt+=1)for(var Ht=0;Ht<_t.length;Ht++){for(var xn=_t[Ht],Le=xn.sub,be=Le.length,ke=0;ke<be&&Le[ke]===he[Yt+ke];)ke++;ke===be&&(he.splice(Yt,be,xn.by),Je=Je-be+1)}}for(var Re=new Array(Je),at=this.glyphs.get(0),Qt=0;Qt<Je;Qt+=1)Re[Qt]=this.glyphs.get(he[Qt])||at;return Re},As.prototype.nameToGlyphIndex=function(R){return this.glyphNames.nameToGlyphIndex(R)},As.prototype.nameToGlyph=function(R){return R=this.nameToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},As.prototype.glyphIndexToName=function(R){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(R):""},As.prototype.getKerningValue=function(R,W){R=R.index||R,W=W.index||W;var re=this.position.defaultKerningTables;return re?this.position.getKerningValue(re,R,W):this.kerningPairs[R+","+W]||0},As.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},As.prototype.forEachGlyph=function(R,W,re,he,Ce,We){W=void 0!==W?W:0,re=void 0!==re?re:0;var Je,_t=1/this.unitsPerEm*(he=void 0!==he?he:72),Yt=this.stringToGlyphs(R,Ce=Ce||this.defaultRenderOptions);Ce.kerning&&(R=Ce.script||this.position.getDefaultScriptName(),Je=this.position.getKerningTables(R,Ce.language));for(var Ht=0;Ht<Yt.length;Ht+=1){var xn=Yt[Ht];We.call(this,xn,W,re,he,Ce),xn.advanceWidth&&(W+=xn.advanceWidth*_t),Ce.kerning&&Ht<Yt.length-1&&(W+=(Je?this.position.getKerningValue(Je,xn.index,Yt[Ht+1].index):this.getKerningValue(xn,Yt[Ht+1]))*_t),Ce.letterSpacing?W+=Ce.letterSpacing*he:Ce.tracking&&(W+=Ce.tracking/1e3*he)}return W},As.prototype.getPath=function(R,W,re,he,Ce){var We=new Te;return this.forEachGlyph(R,W,re,he,Ce,function(Je,_t,Yt,Ht){Je=Je.getPath(_t,Yt,Ht,Ce,this),We.extend(Je)}),We},As.prototype.getPaths=function(R,W,re,he,Ce){var We=[];return this.forEachGlyph(R,W,re,he,Ce,function(Je,_t,Yt,Ht){Je=Je.getPath(_t,Yt,Ht,Ce,this),We.push(Je)}),We},As.prototype.getAdvanceWidth=function(R,W,re){return this.forEachGlyph(R,0,0,W,re,function(){})},As.prototype.draw=function(R,W,re,he,Ce,We){this.getPath(W,re,he,Ce,We).draw(R)},As.prototype.drawPoints=function(R,W,re,he,Ce,We){this.forEachGlyph(W,re,he,Ce,We,function(Je,_t,Yt,Ht){Je.drawPoints(R,_t,Yt,Ht)})},As.prototype.drawMetrics=function(R,W,re,he,Ce,We){this.forEachGlyph(W,re,he,Ce,We,function(Je,_t,Yt,Ht){Je.drawMetrics(R,_t,Yt,Ht)})},As.prototype.getEnglishName=function(R){if(R=this.names[R])return R.en},As.prototype.validate=function(){var R=this;function W(re){(re=R.getEnglishName(re))&&re.trim()}W("fontFamily"),W("weightName"),W("manufacturer"),W("copyright"),W("version")},As.prototype.toTables=function(){return Vo_fontToTable(this)},As.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},As.prototype.toArrayBuffer=function(){for(var R=this.toTables().encode(),W=new ArrayBuffer(R.length),re=new Uint8Array(W),he=0;he<R.length;he++)re[he]=R[he];return W},As.prototype.download=function(R){var W=this.getEnglishName("fontFamily"),re=this.getEnglishName("fontSubfamily"),he=(R=R||W.replace(/\s/g,"")+"-"+re+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,he.byteLength,function(Ce){Ce.root.getFile(R,{create:!0},function(We){We.createWriter(function(Je){var _t=new DataView(he);_t=new Blob([_t],{type:"font/opentype"}),Je.write(_t),Je.addEventListener("writeend",function(){location.href=We.toURL()},!1)})})},function(Ce){throw new Error(Ce.name+": "+Ce.message)})):(W=a("fs"),re=function(Ce){for(var We=new M(Ce.byteLength),Je=new Uint8Array(Ce),_t=0;_t<We.length;++_t)We[_t]=Je[_t];return We}(he),W.writeFileSync(R,re))},As.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},As.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},As.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var cu_parse=function(R,W,re){for(var he,We,Je,_t=new Tn.Parser(R,W),Yt=_t.parseULong(),Ht=(V.argument(65536===Yt,"Unsupported fvar table version."),_t.parseOffset16()),xn=(_t.skip("uShort",1),_t.parseUShort()),Le=_t.parseUShort(),be=_t.parseUShort(),ke=_t.parseUShort(),Re=[],at=0;at<xn;at++)Re.push((We=re,Je={},he=new Tn.Parser(he=R,W+Ht+at*Le),Je.tag=he.parseTag(),Je.minValue=he.parseFixed(),Je.defaultValue=he.parseFixed(),Je.maxValue=he.parseFixed(),he.skip("uShort",1),Je.name=We[he.parseUShort()]||{},Je));for(var Qt=[],Sn=W+Ht+xn*Le,Fn=0;Fn<be;Fn++)Qt.push(function(Yr,Gr,ai,li){var ki={},Ss=new Tn.Parser(Yr,Gr);ki.name=li[Ss.parseUShort()]||{},Ss.skip("uShort",1),ki.coordinates={};for(var mo=0;mo<ai.length;++mo)ki.coordinates[ai[mo].tag]=Ss.parseFixed();return ki}(R,Sn+Fn*ke,Re,re));return{axes:Re,instances:Qt}},da=new Array(10);da[1]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{posFormat:1,coverage:this.parsePointer(hn.coverage),value:this.parseValueRecord()}:2===W?{posFormat:2,coverage:this.parsePointer(hn.coverage),values:this.parseValueRecordList()}:void V.assert(!1,"0x"+R.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},da[2]=function(){var R,W,re,he,We=this.offset+this.relativeOffset,Ce=this.parseUShort(),Je=(V.assert(1===Ce||2===Ce,"0x"+We.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),We=this.parsePointer(hn.coverage),this.parseUShort()),_t=this.parseUShort();return 1===Ce?{posFormat:Ce,coverage:We,valueFormat1:Je,valueFormat2:_t,pairSets:this.parseList(hn.pointer(hn.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(Je),value2:this.parseValueRecord(_t)}})))}:2===Ce?(R=this.parsePointer(hn.classDef),W=this.parsePointer(hn.classDef),re=this.parseUShort(),he=this.parseUShort(),{posFormat:Ce,coverage:We,valueFormat1:Je,valueFormat2:_t,classDef1:R,classDef2:W,class1Count:re,class2Count:he,classRecords:this.parseList(re,hn.list(he,function(){return{value1:this.parseValueRecord(Je),value2:this.parseValueRecord(_t)}}))}):void 0},da[3]=function(){return{error:"GPOS Lookup 3 not supported"}},da[4]=function(){return{error:"GPOS Lookup 4 not supported"}},da[5]=function(){return{error:"GPOS Lookup 5 not supported"}},da[6]=function(){return{error:"GPOS Lookup 6 not supported"}},da[7]=function(){return{error:"GPOS Lookup 7 not supported"}},da[8]=function(){return{error:"GPOS Lookup 8 not supported"}},da[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var Nl_parse=function(R,W){return W=(R=new hn(R,W=W||0)).parseVersion(1),V.argument(1===W||1.1===W,"Unsupported GPOS table version "+W),1===W?{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(da)}:{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(da),variations:R.parseFeatureVariationsList()}},po_parse=function(R,W){if(0===(W=(R=new Tn.Parser(R,W)).parseUShort())){var re=R,he={},Le=(re.skip("uShort"),re.parseUShort()),Ce=(V.argument(0===Le,"Unsupported kern sub-table version."),re.skip("uShort",2),re.parseUShort());re.skip("uShort",3);for(var We=0;We<Ce;We+=1){var Je=re.parseUShort(),_t=re.parseUShort(),Yt=re.parseShort();he[Je+","+_t]=Yt}return he}if(1!==W)throw new Error("Unsupported kern table version ("+W+").");var Ht=R,xn={};if(Ht.skip("uShort"),1<Ht.parseULong()&&console.warn("Only the first kern subtable is supported."),Ht.skip("uLong"),Le=255&Ht.parseUShort(),Ht.skip("uShort"),0==Le){var be=Ht.parseUShort();Ht.skip("uShort",3);for(var ke=0;ke<be;ke+=1){var Re=Ht.parseUShort(),at=Ht.parseUShort(),Qt=Ht.parseShort();xn[Re+","+at]=Qt}}return xn},kl_parse=function(R,W,re,he){for(var Ce=new Tn.Parser(R,W),We=he?Ce.parseUShort:Ce.parseULong,Je=[],_t=0;_t<re+1;_t+=1){var Yt=We.call(Ce);he&&(Yt*=2),Je.push(Yt)}return Je};function vl(R,W){a("fs").readFile(R,function(re,he){if(re)return W(re.message);W(null,Wa(he))})}function ja(R,W){var re=new XMLHttpRequest;re.open("get",R,!0),re.responseType="arraybuffer",re.onload=function(){return re.response?W(null,re.response):W("Font could not be loaded: "+re.statusText)},re.onerror=function(){W("Font could not be loaded")},re.send()}function pc(R,W){for(var re=[],he=12,Ce=0;Ce<W;Ce+=1){var We=Tn.getTag(R,he),Je=Tn.getULong(R,he+4),_t=Tn.getULong(R,he+8),Yt=Tn.getULong(R,he+12);re.push({tag:We,checksum:Je,offset:_t,length:Yt,compression:!1}),he+=16}return re}function ii(re,W){if("WOFF"!==W.compression)return{data:re,offset:W.offset};re=new Uint8Array(re.buffer,W.offset+2,W.compressedLength-2);var he=new Uint8Array(W.length);if(ne(re,he),he.byteLength!==W.length)throw new Error("Decompression error: "+W.tag+" decompressed length doesn't match recorded length");return{data:new DataView(he.buffer,0),offset:0}}function Fa(Fn){var W,re,he,Ce,We,Je,_t,Yt,Ht,xn,Le,be,ke,Re,at=new As({empty:!0}),Qt=new DataView(Fn,0),Sn=[];if("\0\x01\0\0"===(Fn=Tn.getTag(Qt,0))||"true"===Fn||"typ1"===Fn)at.outlinesFormat="truetype",Sn=pc(Qt,he=Tn.getUShort(Qt,4));else if("OTTO"===Fn)at.outlinesFormat="cff",Sn=pc(Qt,he=Tn.getUShort(Qt,4));else{if("wOFF"!==Fn)throw new Error("Unsupported OpenType signature "+Fn);if("\0\x01\0\0"===(Yr=Tn.getTag(Qt,4)))at.outlinesFormat="truetype";else{if("OTTO"!==Yr)throw new Error("Unsupported OpenType flavor "+Fn);at.outlinesFormat="cff"}Sn=function(Bs,Jr){for(var Zs=[],Js=44,Cs=0;Cs<Jr;Cs+=1){var ci=Tn.getTag(Bs,Js),Po=Tn.getULong(Bs,Js+4),hr=Tn.getULong(Bs,Js+8),Gi=Tn.getULong(Bs,Js+12);Zs.push({tag:ci,offset:Po,compression:hr<Gi&&"WOFF",compressedLength:hr,length:Gi}),Js+=20}return Zs}(Qt,he=Tn.getUShort(Qt,12))}for(var Gr=0;Gr<he;Gr+=1){var ai=Sn[Gr],li=void 0;switch(ai.tag){case"cmap":li=ii(Qt,ai),at.tables.cmap=ct_parse(li.data,li.offset),at.encoding=new jn(at.tables.cmap);break;case"cvt ":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.cvt=Re.parseShortList(ai.length/2);break;case"fvar":We=ai;break;case"fpgm":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.fpgm=Re.parseByteList(ai.length);break;case"head":li=ii(Qt,ai),at.tables.head=B_parse(li.data,li.offset),at.unitsPerEm=at.tables.head.unitsPerEm,W=at.tables.head.indexToLocFormat;break;case"hhea":li=ii(Qt,ai),at.tables.hhea=L_parse(li.data,li.offset),at.ascender=at.tables.hhea.ascender,at.descender=at.tables.hhea.descender,at.numberOfHMetrics=at.tables.hhea.numberOfHMetrics;break;case"hmtx":Ht=ai;break;case"ltag":li=ii(Qt,ai),re=H_parse(li.data,li.offset);break;case"maxp":li=ii(Qt,ai),at.tables.maxp=de_parse(li.data,li.offset),at.numGlyphs=at.tables.maxp.numGlyphs;break;case"name":be=ai;break;case"OS/2":li=ii(Qt,ai),at.tables.os2=Pr_parse(li.data,li.offset);break;case"post":li=ii(Qt,ai),at.tables.post=Ui_parse(li.data,li.offset),at.glyphNames=new bn(at.tables.post);break;case"prep":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.prep=Re.parseByteList(ai.length);break;case"glyf":Je=ai;break;case"loca":Le=ai;break;case"CFF ":Ce=ai;break;case"kern":xn=ai;break;case"GPOS":_t=ai;break;case"GSUB":Yt=ai;break;case"meta":ke=ai}}if(Yr=ii(Qt,be),at.tables.name=Hn_parse(Yr.data,Yr.offset,re),at.names=at.tables.name,Je&&Le)Fn=0===W,Yr=ii(Qt,Le),Yr=kl_parse(Yr.data,Yr.offset,at.numGlyphs,Fn),Fn=ii(Qt,Je),at.glyphs=ts.parse(Fn.data,Fn.offset,Yr,at);else{if(!Ce)throw new Error("Font doesn't contain TrueType or CFF outlines.");Fn=ii(Qt,Ce),k_parse(Fn.data,Fn.offset,at)}for(var Yr=ii(Qt,Ht),ki=(se_parse(Yr.data,Yr.offset,at.numberOfHMetrics,at.numGlyphs,at.glyphs),at),Ss=ki.tables.cmap.glyphIndexMap,mo=Object.keys(Ss),Mo=0;Mo<mo.length;Mo+=1){var Ro,go=mo[Mo];(Ro=ki.glyphs.get(Ss[go])).addUnicode(parseInt(go))}for(var Ps=0;Ps<ki.glyphs.length;Ps+=1)Ro=ki.glyphs.get(Ps),ki.cffEncoding?Ro.name=ki.isCIDFont?"gid"+Ps:ki.cffEncoding.charset[Ps]:ki.glyphNames.names&&(Ro.name=ki.glyphNames.glyphIndexToName(Ps));return xn?(Fn=ii(Qt,xn),at.kerningPairs=po_parse(Fn.data,Fn.offset)):at.kerningPairs={},_t&&(Yr=ii(Qt,_t),at.tables.gpos=Nl_parse(Yr.data,Yr.offset),at.position.init()),Yt&&(Fn=ii(Qt,Yt),at.tables.gsub=wi_parse(Fn.data,Fn.offset)),We&&(Yr=ii(Qt,We),at.tables.fvar=cu_parse(Yr.data,Yr.offset,at.names)),ke&&(Fn=ii(Qt,ke),at.tables.meta=ds_parse(Fn.data,Fn.offset),at.metas=at.tables.meta),at}w.Font=As,w.Glyph=Un,w.Path=Te,w.BoundingBox=ce,w._parse=Tn,w.parse=Fa,w.load=function(R,W){(typeof window>"u"?vl:ja)(R,function(re,he){if(re)return W(re);var Ce;try{Ce=Fa(he)}catch(We){return W(We,null)}return W(null,Ce)})},w.loadSync=function(R){return Fa(Wa(a("fs").readFileSync(R)))},Object.defineProperty(w,"__esModule",{value:!0})},_("object"==typeof q&&void 0!==_e?q:this.opentype={})}).call(this,a("buffer").Buffer)},{buffer:4,fs:2}],258:[function(a,_e,q){(function(M){function C(I,D){for(var d=0,f=I.length-1;0<=f;f--){var h=I[f];"."===h?I.splice(f,1):".."===h?(I.splice(f,1),d++):d&&(I.splice(f,1),d--)}if(D)for(;d--;)I.unshift("..");return I}function _(I,D){if(I.filter)return I.filter(D);for(var d=[],f=0;f<I.length;f++)D(I[f],f,I)&&d.push(I[f]);return d}q.resolve=function(){for(var I="",D=!1,d=arguments.length-1;-1<=d&&!D;d--){var f=0<=d?arguments[d]:M.cwd();if("string"!=typeof f)throw new TypeError("Arguments to path.resolve must be strings");f&&(I=f+"/"+I,D="/"===f.charAt(0))}return(D?"/":"")+(I=C(_(I.split("/"),function(h){return!!h}),!D).join("/"))||"."},q.normalize=function(I){var D=q.isAbsolute(I),d="/"===w(I,-1);return(I=(I=C(_(I.split("/"),function(f){return!!f}),!D).join("/"))||D?I:".")&&d&&(I+="/"),(D?"/":"")+I},q.isAbsolute=function(I){return"/"===I.charAt(0)},q.join=function(){var I=Array.prototype.slice.call(arguments,0);return q.normalize(_(I,function(D,d){if("string"!=typeof D)throw new TypeError("Arguments to path.join must be strings");return D}).join("/"))},q.relative=function(I,D){function d(x){for(var E=0;E<x.length&&""===x[E];E++);for(var N=x.length-1;0<=N&&""===x[N];N--);return N<E?[]:x.slice(E,N-E+1)}I=q.resolve(I).substr(1),D=q.resolve(D).substr(1);for(var f=d(I.split("/")),h=d(D.split("/")),p=Math.min(f.length,h.length),g=p,v=0;v<p;v++)if(f[v]!==h[v]){g=v;break}var S=[];for(v=g;v<f.length;v++)S.push("..");return(S=S.concat(h.slice(g))).join("/")},q.sep="/",q.delimiter=":",q.dirname=function(I){if("string"!=typeof I&&(I+=""),0===I.length)return".";for(var D=47===I.charCodeAt(0),d=-1,f=!0,h=I.length-1;1<=h;--h)if(47===I.charCodeAt(h)){if(!f){d=h;break}}else f=!1;return-1===d?D?"/":".":D&&1===d?"/":I.slice(0,d)},q.basename=function(I,D){return I=function(d){"string"!=typeof d&&(d+="");for(var f=0,h=-1,p=!0,g=d.length-1;0<=g;--g)if(47===d.charCodeAt(g)){if(!p){f=g+1;break}}else-1===h&&(p=!1,h=g+1);return-1===h?"":d.slice(f,h)}(I),D&&I.substr(-1*D.length)===D?I.substr(0,I.length-D.length):I},q.extname=function(I){"string"!=typeof I&&(I+="");for(var D=-1,d=0,f=-1,h=!0,p=0,g=I.length-1;0<=g;--g){var v=I.charCodeAt(g);if(47===v){if(h)continue;d=g+1;break}-1===f&&(h=!1,f=g+1),46===v?-1===D?D=g:1!==p&&(p=1):-1!==D&&(p=-1)}return-1===D||-1===f||0===p||1===p&&D===f-1&&D===d+1?"":I.slice(D,f)};var w=function(I,D,d){return I.substr(D,d)}}).call(this,a("_process"))},{_process:259}],259:[function(a,_,q){var M,C;function w(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}_=_.exports={};try{M="function"==typeof setTimeout?setTimeout:w}catch{M=w}try{C="function"==typeof clearTimeout?clearTimeout:I}catch{C=I}function D(E){if(M===setTimeout)return setTimeout(E,0);if((M===w||!M)&&setTimeout)return(M=setTimeout)(E,0);try{return M(E,0)}catch{try{return M.call(null,E,0)}catch{return M.call(this,E,0)}}}var d,f=[],h=!1,p=-1;function g(){h&&d&&(h=!1,d.length?f=d.concat(f):p=-1,f.length&&v())}function v(){if(!h){for(var E=D(g),N=(h=!0,f.length);N;){for(d=f,f=[];++p<N;)d&&d[p].run();p=-1,N=f.length}d=null,h=!1,function(Z){if(C===clearTimeout)return clearTimeout(Z);if((C===I||!C)&&clearTimeout)return(C=clearTimeout)(Z);try{C(Z)}catch{try{return C.call(null,Z)}catch{return C.call(this,Z)}}}(E)}}function S(E,N){this.fun=E,this.array=N}function x(){}_.nextTick=function(E){var N=new Array(arguments.length-1);if(1<arguments.length)for(var Z=1;Z<arguments.length;Z++)N[Z-1]=arguments[Z];f.push(new S(E,N)),1!==f.length||h||D(v)},S.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=x,_.addListener=x,_.once=x,_.off=x,_.removeListener=x,_.removeAllListeners=x,_.emit=x,_.prependListener=x,_.prependOnceListener=x,_.listeners=function(E){return[]},_.binding=function(E){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(E){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],260:[function(a,_e,q){_e=function(M){"use strict";var C,_=Object.prototype,w=_.hasOwnProperty,I=(K="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",D=K.asyncIterator||"@@asyncIterator",d=K.toStringTag||"@@toStringTag";function f(ge,me,J,Oe){var Te,et,le,V;return me=me&&me.prototype instanceof E?me:E,me=Object.create(me.prototype),Oe=new ve(Oe||[]),me._invoke=(Te=ge,et=J,le=Oe,V=p,function(Xe,dt){if(V===v)throw new Error("Generator is already running");if(V===S){if("throw"===Xe)throw dt;return ae()}for(le.method=Xe,le.arg=dt;;){var yt=le.delegate;if(yt&&(yt=function Ut(ht,Lt){var kt=ht.iterator[Lt.method];if(kt===C){if(Lt.delegate=null,"throw"===Lt.method){if(ht.iterator.return&&(Lt.method="return",Lt.arg=C,Ut(ht,Lt),"throw"===Lt.method))return x;Lt.method="throw",Lt.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}return"throw"===(kt=h(kt,ht.iterator,Lt.arg)).type?(Lt.method="throw",Lt.arg=kt.arg,Lt.delegate=null,x):(kt=kt.arg)?kt.done?(Lt[ht.resultName]=kt.value,Lt.next=ht.nextLoc,"return"!==Lt.method&&(Lt.method="next",Lt.arg=C),Lt.delegate=null,x):kt:(Lt.method="throw",Lt.arg=new TypeError("iterator result is not an object"),Lt.delegate=null,x)}(yt,le))){if(yt===x)continue;return yt}if("next"===le.method)le.sent=le._sent=le.arg;else if("throw"===le.method){if(V===p)throw V=S,le.arg;le.dispatchException(le.arg)}else"return"===le.method&&le.abrupt("return",le.arg);if(V=v,"normal"===(yt=h(Te,et,le)).type){if(V=le.done?S:g,yt.arg!==x)return{value:yt.arg,done:le.done}}else"throw"===yt.type&&(V=S,le.method="throw",le.arg=yt.arg)}}),me}function h(ge,ne,J){try{return{type:"normal",arg:ge.call(ne,J)}}catch(ce){return{type:"throw",arg:ce}}}M.wrap=f;var p="suspendedStart",g="suspendedYield",v="executing",S="completed",x={};function E(){}function N(){}function Z(){}var K,z,G=((K={})[I]=function(){return this},(z=(z=Object.getPrototypeOf)&&z(z(xe([]))))&&z!==_&&w.call(z,I)&&(K=z),Z.prototype=E.prototype=Object.create(K));function ie(ge){["next","throw","return"].forEach(function(ne){ge[ne]=function(J){return this._invoke(ne,J)}})}function X(ge){var ne;this._invoke=function(J,ce){function Te(){return new Promise(function(et,le){!function V(Ut,Oe,Xe,dt){var yt;if("throw"!==(Ut=h(ge[Ut],ge,Oe)).type)return(Oe=(yt=Ut.arg).value)&&"object"==typeof Oe&&w.call(Oe,"__await")?Promise.resolve(Oe.__await).then(function(ht){V("next",ht,Xe,dt)},function(ht){V("throw",ht,Xe,dt)}):Promise.resolve(Oe).then(function(ht){yt.value=ht,Xe(yt)},function(ht){return V("throw",ht,Xe,dt)});dt(Ut.arg)}(J,ce,et,le)})}return ne=ne?ne.then(Te,Te):Te()}}function ee(ge){var ne={tryLoc:ge[0]};1 in ge&&(ne.catchLoc=ge[1]),2 in ge&&(ne.finallyLoc=ge[2],ne.afterLoc=ge[3]),this.tryEntries.push(ne)}function Y(ge){var ne=ge.completion||{};ne.type="normal",delete ne.arg,ge.completion=ne}function ve(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(ee,this),this.reset(!0)}function xe(ge){if(ge){var ne,J=ge[I];if(J)return J.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length))return ne=-1,(J=function ce(){for(;++ne<ge.length;)if(w.call(ge,ne))return ce.value=ge[ne],ce.done=!1,ce;return ce.value=C,ce.done=!0,ce}).next=J}return{next:ae}}function ae(){return{value:C,done:!0}}return(N.prototype=G.constructor=Z).constructor=N,Z[d]=N.displayName="GeneratorFunction",M.isGeneratorFunction=function(ge){return!!(ge="function"==typeof ge&&ge.constructor)&&(ge===N||"GeneratorFunction"===(ge.displayName||ge.name))},M.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,Z):(ge.__proto__=Z,d in ge||(ge[d]="GeneratorFunction")),ge.prototype=Object.create(G),ge},M.awrap=function(ge){return{__await:ge}},ie(X.prototype),X.prototype[D]=function(){return this},M.AsyncIterator=X,M.async=function(ge,ne,J,ce){var Te=new X(f(ge,ne,J,ce));return M.isGeneratorFunction(ne)?Te:Te.next().then(function(et){return et.done?et.value:Te.next()})},ie(G),G[d]="Generator",G[I]=function(){return this},G.toString=function(){return"[object Generator]"},M.keys=function(ge){var ne,J=[];for(ne in ge)J.push(ne);return J.reverse(),function ce(){for(;J.length;){var Te=J.pop();if(Te in ge)return ce.value=Te,ce.done=!1,ce}return ce.done=!0,ce}},M.values=xe,ve.prototype={constructor:ve,reset:function(ge){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(Y),!ge)for(var ne in this)"t"===ne.charAt(0)&&w.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=C)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if("throw"===ge.type)throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var ne=this;function J(me,Oe){return et.type="throw",et.arg=ge,ne.next=me,Oe&&(ne.method="next",ne.arg=C),!!Oe}for(var ce=this.tryEntries.length-1;0<=ce;--ce){var Te=this.tryEntries[ce],et=Te.completion;if("root"===Te.tryLoc)return J("end");if(Te.tryLoc<=this.prev){var le=w.call(Te,"catchLoc"),V=w.call(Te,"finallyLoc");if(le&&V){if(this.prev<Te.catchLoc)return J(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return J(Te.finallyLoc)}else if(le){if(this.prev<Te.catchLoc)return J(Te.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return J(Te.finallyLoc)}}}},abrupt:function(ge,ne){for(var J=this.tryEntries.length-1;0<=J;--J){var ce=this.tryEntries[J];if(ce.tryLoc<=this.prev&&w.call(ce,"finallyLoc")&&this.prev<ce.finallyLoc){var Te=ce;break}}var et=(Te=Te&&("break"===ge||"continue"===ge)&&Te.tryLoc<=ne&&ne<=Te.finallyLoc?null:Te)?Te.completion:{};return et.type=ge,et.arg=ne,Te?(this.method="next",this.next=Te.finallyLoc,x):this.complete(et)},complete:function(ge,ne){if("throw"===ge.type)throw ge.arg;return"break"===ge.type||"continue"===ge.type?this.next=ge.arg:"return"===ge.type?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):"normal"===ge.type&&ne&&(this.next=ne),x},finish:function(ge){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J=this.tryEntries[ne];if(J.finallyLoc===ge)return this.complete(J.completion,J.afterLoc),Y(J),x}},catch:function(ge){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J,ce,Te=this.tryEntries[ne];if(Te.tryLoc===ge)return"throw"===(J=Te.completion).type&&(ce=J.arg,Y(Te)),ce}throw new Error("illegal catch attempt")},delegateYield:function(ge,ne,J){return this.delegate={iterator:xe(ge),resultName:ne,nextLoc:J},"next"===this.method&&(this.arg=C),x}},M}("object"==typeof _e?_e.exports:{});try{regeneratorRuntime=_e}catch{Function("r","regeneratorRuntime = r")(_e)}},{}],261:[function(a,_e,q){!function(M){"use strict";var C,_,w,I,D,d,f,h,p,g;function v(Y){if("string"!=typeof Y&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Y))throw new TypeError("Invalid character in header field name");return Y.toLowerCase()}function S(Y){return"string"!=typeof Y?String(Y):Y}function x(Y){var ve={next:function(){var xe=Y.shift();return{done:void 0===xe,value:xe}}};return _&&(ve[Symbol.iterator]=function(){return ve}),ve}function E(Y){this.map={},Y instanceof E?Y.forEach(function(ve,xe){this.append(xe,ve)},this):Array.isArray(Y)?Y.forEach(function(ve){this.append(ve[0],ve[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(ve){this.append(ve,Y[ve])},this)}function N(Y){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}function Z(Y){return new Promise(function(ve,xe){Y.onload=function(){ve(Y.result)},Y.onerror=function(){xe(Y.error)}})}function K(Y){var ve=new FileReader,xe=Z(ve);return ve.readAsArrayBuffer(Y),xe}function z(Y){var ve;return Y.slice?Y.slice(0):((ve=new Uint8Array(Y.byteLength)).set(new Uint8Array(Y)),ve.buffer)}function G(){return this.bodyUsed=!1,this._initBody=function(Y){if(this._bodyInit=Y)if("string"==typeof Y)this._bodyText=Y;else if(w&&Blob.prototype.isPrototypeOf(Y))this._bodyBlob=Y;else if(I&&FormData.prototype.isPrototypeOf(Y))this._bodyFormData=Y;else if(C&&URLSearchParams.prototype.isPrototypeOf(Y))this._bodyText=Y.toString();else if(D&&w&&f(Y))this._bodyArrayBuffer=z(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!D||!ArrayBuffer.prototype.isPrototypeOf(Y)&&!h(Y))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=z(Y)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof Y?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w&&(this.blob=function(){var Y=N(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(K)}),this.text=function(){var Y,ve,xe=N(this);if(xe)return xe;if(this._bodyBlob)return xe=this._bodyBlob,ve=Z(Y=new FileReader),Y.readAsText(xe),ve;if(this._bodyArrayBuffer)return Promise.resolve(function(ae){for(var ge=new Uint8Array(ae),ne=new Array(ge.length),J=0;J<ge.length;J++)ne[J]=String.fromCharCode(ge[J]);return ne.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},I&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}function ie(Y,ve){var xe,ae=(ve=ve||{}).body;if(Y instanceof ie){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,ve.headers||(this.headers=new E(Y.headers)),this.method=Y.method,this.mode=Y.mode,ae||null==Y._bodyInit||(ae=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=ve.credentials||this.credentials||"omit",!ve.headers&&this.headers||(this.headers=new E(ve.headers)),this.method=(xe=(Y=ve.method||this.method||"GET").toUpperCase(),-1<p.indexOf(xe)?xe:Y),this.mode=ve.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&ae)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ae)}function X(Y){var ve=new FormData;return Y.trim().split("&").forEach(function(xe){var ae;xe&&(ae=(xe=xe.split("=")).shift().replace(/\+/g," "),xe=xe.join("=").replace(/\+/g," "),ve.append(decodeURIComponent(ae),decodeURIComponent(xe)))}),ve}function ee(Y,ve){ve=ve||{},this.type="default",this.status=void 0===ve.status?200:ve.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in ve?ve.statusText:"OK",this.headers=new E(ve.headers),this.url=ve.url||"",this._initBody(Y)}M.fetch||(C="URLSearchParams"in M,_="Symbol"in M&&"iterator"in Symbol,w="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch{return!1}}(),I="FormData"in M,(D="ArrayBuffer"in M)&&(d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(Y){return Y&&DataView.prototype.isPrototypeOf(Y)},h=ArrayBuffer.isView||function(Y){return Y&&-1<d.indexOf(Object.prototype.toString.call(Y))}),E.prototype.append=function(Y,ve){Y=v(Y),ve=S(ve);var xe=this.map[Y];this.map[Y]=xe?xe+","+ve:ve},E.prototype.delete=function(Y){delete this.map[v(Y)]},E.prototype.get=function(Y){return Y=v(Y),this.has(Y)?this.map[Y]:null},E.prototype.has=function(Y){return this.map.hasOwnProperty(v(Y))},E.prototype.set=function(Y,ve){this.map[v(Y)]=S(ve)},E.prototype.forEach=function(Y,ve){for(var xe in this.map)this.map.hasOwnProperty(xe)&&Y.call(ve,this.map[xe],xe,this)},E.prototype.keys=function(){var Y=[];return this.forEach(function(ve,xe){Y.push(xe)}),x(Y)},E.prototype.values=function(){var Y=[];return this.forEach(function(ve){Y.push(ve)}),x(Y)},E.prototype.entries=function(){var Y=[];return this.forEach(function(ve,xe){Y.push([xe,ve])}),x(Y)},_&&(E.prototype[Symbol.iterator]=E.prototype.entries),p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],ie.prototype.clone=function(){return new ie(this,{body:this._bodyInit})},G.call(ie.prototype),G.call(ee.prototype),ee.prototype.clone=function(){return new ee(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},ee.error=function(){var Y=new ee(null,{status:0,statusText:""});return Y.type="error",Y},g=[301,302,303,307,308],ee.redirect=function(Y,ve){if(-1===g.indexOf(ve))throw new RangeError("Invalid status code");return new ee(null,{status:ve,headers:{location:Y}})},M.Headers=E,M.Request=ie,M.Response=ee,M.fetch=function(Y,ve){return new Promise(function(xe,ae){var ge=new ie(Y,ve),ne=new XMLHttpRequest;ne.onload=function(){var J,ce={status:ne.status,statusText:ne.statusText,headers:(ce=ne.getAllResponseHeaders()||"",J=new E,ce.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(le){var V=(le=le.split(":")).shift().trim();V&&(le=le.join(":").trim(),J.append(V,le))}),J)},Te=(ce.url="responseURL"in ne?ne.responseURL:ce.headers.get("X-Request-URL"),"response"in ne?ne.response:ne.responseText);xe(new ee(Te,ce))},ne.onerror=function(){ae(new TypeError("Network request failed"))},ne.ontimeout=function(){ae(new TypeError("Network request failed"))},ne.open(ge.method,ge.url,!0),"include"===ge.credentials?ne.withCredentials=!0:"omit"===ge.credentials&&(ne.withCredentials=!1),"responseType"in ne&&w&&(ne.responseType="blob"),ge.headers.forEach(function(J,ce){ne.setRequestHeader(ce,J)}),ne.send(void 0===ge._bodyInit?null:ge._bodyInit)})},M.fetch.polyfill=!0)}(typeof self<"u"?self:this)},{}],262:[function(a,_e,q){"use strict";a("core-js/modules/es.function.name"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M,C=w(a("../core/main")),_=w(a("../color/color_conversion"));function w(d){return d&&d.__esModule?d:{default:d}}var I=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],D=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];C.default.prototype._rgbColorName=function(p){p=_.default._rgbaToHSBA(p);var f,h,g=[(M=p)[0],p[1],p[2]];0!==g[0]&&(g[0]=Math.round(100*g[0]),(p=g[0].toString().split(""))[h=p.length-1]=parseInt(p[h]),p[h]<2.5?p[h]=0:2.5<=p[h]&&p[h]<7.5&&(p[h]=5),2===p.length?(p[0]=parseInt(p[0]),7.5<=p[h]&&(p[h]=0,p[0]=p[0]+1),g[0]=10*p[0]+p[1]):g[0]=7.5<=p[h]?10:p[h]),g[2]=g[2]/255;for(var v=g.length-1;1<=v;v--)g[v]=g[v]<=.25?0:.25<g[v]&&g[v]<.75?.5:1;if(0===g[0]&&0===g[1]&&1===g[2]){for(var S=2;0<=S;S--)M[S]=Math.round(1e4*M[S])/1e4;for(var x=0;x<I.length;x++){if(I[x].h===M[0]&&I[x].s===M[1]&&I[x].b===M[2]){f=I[x].name;break}f="white"}}else for(var E=0;E<D.length;E++)if(D[E].h===g[0]&&D[E].s===g[1]&&D[E].b===g[2]){f=D[E].name;break}return f},q.default=a=C.default},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.replace"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a},C="_Description",_="_fallbackDesc",w="_fallbackTable",I="_Label",D="_labelDesc",d="_labelTable";function f(h){if("label"===h||"fallback"===h)throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}M.default.prototype.describe=function(h,p){var g;M.default._validateParameters("describe",arguments),"string"==typeof h&&(g=this.canvas.id,h=f(h),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),p===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},M.default.prototype.describeElement=function(h,p,g){var v,S;M.default._validateParameters("describeElement",arguments),"string"==typeof p&&"string"==typeof h&&(v=this.canvas.id,p=f(p),S=function(x){if("label"===x||"fallback"===x)throw new Error("element name should not be LABEL or FALLBACK");return x.endsWith(".")||x.endsWith(";")||x.endsWith(",")?x=x.replace(/.$/,":"):x.endsWith(":")||(x+=":"),x}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),S='<th scope="row">'.concat(S,"</th><td>").concat(p,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==S&&(this.descriptions.fallbackElements[h].innerHTML=S):this._describeElementHTML("fallback",h,S),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==S&&(this.descriptions.labelElements[h].innerHTML=S):this._describeElementHTML("label",h,S)))},M.default.prototype._describeHTML=function(h,p){var g,v=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(v+C))?this.dummyDOM.querySelector("#"+v+w).insertAdjacentHTML("beforebegin",'<p id="'.concat(v+_,'"></p>')):(g='<div id="'.concat(v).concat(C,'" role="region" aria-label="Canvas Description"><p id="').concat(v).concat(_,'"></p></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(v)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(v).concat(_)),this.descriptions.fallback.innerHTML=p):"label"===h&&(this.dummyDOM.querySelector("#".concat(v+I))?this.dummyDOM.querySelector("#".concat(v+d))&&this.dummyDOM.querySelector("#".concat(v+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(v).concat(D,'"></p>')):(g='<div id="'.concat(v).concat(I,'" class="p5Label"><p id="').concat(v).concat(D,'"></p></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+v+D),this.descriptions.label.innerHTML=p)},M.default.prototype._describeElementHTML=function(h,p,g){var v,S=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(S+C))?this.dummyDOM.querySelector("#"+S+w)||this.dummyDOM.querySelector("#"+S+_).insertAdjacentHTML("afterend",'<table id="'.concat(S).concat(w,'"><caption>Canvas elements and their descriptions</caption></table>')):(v='<div id="'.concat(S).concat(C,'" role="region" aria-label="Canvas Description"><table id="').concat(S).concat(w,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(S,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(S,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+S).innerHTML=v),(v=document.createElement("tr")).id=S+"_fte_"+p,this.dummyDOM.querySelector("#"+S+w).appendChild(v),this.descriptions.fallbackElements[p]=this.dummyDOM.querySelector("#".concat(S).concat("_fte_").concat(p)),this.descriptions.fallbackElements[p].innerHTML=g):"label"===h&&(this.dummyDOM.querySelector("#".concat(S+I))?this.dummyDOM.querySelector("#".concat(S+d))||this.dummyDOM.querySelector("#"+S+D).insertAdjacentHTML("afterend",'<table id="'.concat(S+d,'"></table>')):(v='<div id="'.concat(S).concat(I,'" class="p5Label"><table id="').concat(S).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(S,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(S,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+S).insertAdjacentHTML("afterend",v)),(h=document.createElement("tr")).id=S+"_lte_"+p,this.dummyDOM.querySelector("#"+S+d).appendChild(h),this.descriptions.labelElements[p]=this.dummyDOM.querySelector("#".concat(S).concat("_lte_").concat(p)),this.descriptions.labelElements[p].innerHTML=g)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.map"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.map"),a("core-js/modules/es.string.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype._updateGridOutput=function(M){var C,_,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(_=function(D,d){var f,h="",p="",g=0;for(f in d){var v,S=0;for(v in d[f]){var x='<li id="'.concat(D,"shape").concat(g,'">').concat(d[f][v].color," ").concat(f,",");"line"===f?x+=" location = ".concat(d[f][v].pos,", length = ").concat(d[f][v].length," pixels"):(x+=" location = ".concat(d[f][v].pos),"point"!==f&&(x+=", area = ".concat(d[f][v].area," %")),x+="</li>"),h+=x,S++,g++}p=1<S?"".concat(p," ").concat(S," ").concat(f,"s"):"".concat(p," ").concat(S," ").concat(f)}return{numShapes:[g,p],details:h}}(M,this.ingredients.shapes)).numShapes,f=this.width,h=this.height,d="".concat(d=this.ingredients.colors.background," canvas, ").concat(f," by ").concat(h," pixels, contains ").concat(D[0]),w=d="".concat(d,1===D[0]?" shape: ":" shapes: ").concat(D[1]),I=function(D,d){var f,h,p=0,g="",v=Array.from(Array(10),function(){return Array(10)});for(f in d)for(var S in d[f]){var x;x="line"!==f?'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][S].color," ").concat(f,"</a>"):'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][S].color," ").concat(f," midpoint</a>"),d[f][S].loc.locY<v.length&&d[f][S].loc.locX<v[d[f][S].loc.locY].length&&(v[d[f][S].loc.locY][d[f][S].loc.locX]=v[d[f][S].loc.locY][d[f][S].loc.locX]?v[d[f][S].loc.locY][d[f][S].loc.locX]+"  "+x:x,p++)}for(h in v){var E,N="<tr>";for(E in v[h])N+="<td>",void 0!==v[h][E]&&(N+=v[h][E]),N+="</td>";g=g+N+"</tr>"}return g}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),I!==C.map.innerHTML&&(C.map.innerHTML=I),_.details!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=_.details),this._accessibleOutputs[M]=C)},q.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.to-fixed"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function _(w,I,D){return 10===(I=Math.floor(w[0]/I*10))&&(I-=1),10===(w=Math.floor(w[1]/D*10))&&(w-=1),{locX:I,locY:w}}M.default.prototype.textOutput=function(w){M.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},M.default.prototype.gridOutput=function(w){M.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},M.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},M.default.prototype._createOutput=function(w,I){var D,d,f,h=this.canvas.id,p=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");"Fallback"===I?(D=h+w,this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===I&&(D=h+w+(p=I),this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"+I))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(d,'"></div>'))),this._accessibleOutputs[D]={},"textOutput"===w?(p="#".concat(h,"gridOutput").concat(p),f='<div id="'.concat(D,'">Text Output<div id="').concat(D,'Summary" aria-label="text output summary"><p id="').concat(D,'_summary"></p><ul id="').concat(D,'_list"></ul></div><table id="').concat(D,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].list=this.dummyDOM.querySelector("#".concat(D,"_list"))):"gridOutput"===w&&(p="#".concat(h,"textOutput").concat(p),f='<div id="'.concat(D,'">Grid Output<p id="').concat(D,'_summary" aria-label="grid output summary"><table id="').concat(D,'_map" summary="grid output content"></table><ul id="').concat(D,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].map=this.dummyDOM.querySelector("#".concat(D,"_map"))),this._accessibleOutputs[D].shapeDetails=this.dummyDOM.querySelector("#".concat(D,"_shapeDetails")),this._accessibleOutputs[D].summary=this.dummyDOM.querySelector("#".concat(D,"_summary"))},M.default.prototype._updateAccsOutput=function(){var w=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(w+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(w+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(w+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(w+"gridOutputLabel"))},M.default.prototype._accsBackground=function(w){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==w&&(this.ingredients.colors.backgroundRGBA=w,this.ingredients.colors.background=this._rgbColorName(w))},M.default.prototype._accsCanvasColors=function(w,I){"fill"===w?this.ingredients.colors.fillRGBA!==I&&(this.ingredients.colors.fillRGBA=I,this.ingredients.colors.fill=this._rgbColorName(I)):"stroke"===w&&this.ingredients.colors.strokeRGBA!==I&&(this.ingredients.colors.strokeRGBA=I,this.ingredients.colors.stroke=this._rgbColorName(I))},M.default.prototype._accsOutput=function(w,I){"ellipse"===w&&I[2]===I[3]?w="circle":"rectangle"===w&&I[2]===I[3]&&(w="square");var D,d,v,S,x,f={},h=!0,p=(S=I,v="rectangle"===(v=w)||"ellipse"===v||"arc"===v||"circle"===v||"square"===v?(x=Math.round(S[0]+S[2]/2),Math.round(S[1]+S[3]/2)):"triangle"===v?(x=(S[0]+S[2]+S[4])/3,(S[1]+S[3]+S[5])/3):"quadrilateral"===v?(x=(S[0]+S[2]+S[4]+S[6])/4,(S[1]+S[3]+S[5]+S[7])/4):"line"===v?(x=(S[0]+S[2])/2,(S[1]+S[3])/2):(x=S[0],S[1]),[x,v]);if("line"===w?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(I[0],I[1],I[2],I[3])),D=this._getPos(I[0],[1]),d=this._getPos(I[2],[3]),f.loc=_(p,this.width,this.height),f.pos=D===d?"at ".concat(D):"from ".concat(D," to ").concat(d)):("point"===w?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(w,I)),f.pos=this._getPos.apply(this,function C(w){return function(I){if(Array.isArray(I)){for(var D=0,d=new Array(I.length);D<I.length;D++)d[D]=I[D];return d}}(w)||function(I){if(Symbol.iterator in Object(I)||"[object Arguments]"===Object.prototype.toString.call(I))return Array.from(I)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(p)),f.loc=_(p,this.width,this.height)),this.ingredients.shapes[w]){if(this.ingredients.shapes[w]!==[f]){for(var g in this.ingredients.shapes[w])JSON.stringify(this.ingredients.shapes[w][g])===JSON.stringify(f)&&(h=!1);!0===h&&this.ingredients.shapes[w].push(f)}}else this.ingredients.shapes[w]=[f]},M.default.prototype._getPos=function(d,D){d=new DOMPointReadOnly(d,D),D=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),D=(d=d.matrixTransform(D)).x,d=d.y;var f=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return D<.4*f?d<.4*h?"top left":.6*h<d?"bottom left":"mid left":.6*f<D?d<.4*h?"top right":.6*h<d?"bottom right":"mid right":d<.4*h?"top middle":.6*h<d?"bottom middle":"middle"},M.default.prototype._getArea=function(w,I){var D,d,f=0,h=("arc"===w?(f=(D=((I[5]-I[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*I[2]*I[3]/8,"open"!==I[6]&&"chord"!==I[6]||(d=I[0],S=I[1],h=I[0]+I[2]/2*Math.cos(I[4]).toFixed(2),x=I[1]+I[3]/2*Math.sin(I[4]).toFixed(2),g=I[0]+I[2]/2*Math.cos(I[5]).toFixed(2),p=I[1]+I[3]/2*Math.sin(I[5]).toFixed(2),d=Math.abs(d*(x-p)+h*(p-S)+g*(S-x))/2,D>Math.PI?f+=d:f-=d)):"ellipse"===w||"circle"===w?f=3.14*I[2]/2*I[3]/2:"line"===w||"point"===w?f=0:"quadrilateral"===w?f=Math.abs((I[6]+I[0])*(I[7]-I[1])+(I[0]+I[2])*(I[1]-I[3])+(I[2]+I[4])*(I[3]-I[5])+(I[4]+I[6])*(I[5]-I[7]))/2:"rectangle"===w||"square"===w?f=I[2]*I[3]:"triangle"===w&&(f=Math.abs(I[0]*(I[3]-I[5])+I[2]*(I[5]-I[1])+I[4]*(I[1]-I[3]))/2),this.width*this._pixelDensity),p=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,p),new DOMPoint(0,p)],v=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),S=g.map(function(E){return E.matrixTransform(v)}),x=Math.abs((S[3].x+S[0].x)*(S[3].y-S[0].y)+(S[0].x+S[1].x)*(S[0].y-S[1].y)+(S[1].x+S[2].x)*(S[1].y-S[2].y)+(S[2].x+S[3].x)*(S[2].y-S[3].y))/2;return Math.round(100*f/x)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.concat"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype._updateTextOutput=function(M){var C,_,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(_=function(D,d){var f,h="",p=0;for(f in d)for(var g in d[f]){var v='<li><a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][g].color," ").concat(f,"</a>");"line"===f?v+=", ".concat(d[f][g].pos,", ").concat(d[f][g].length," pixels long.</li>"):(v+=", at ".concat(d[f][g].pos),"point"!==f&&(v+=", covering ".concat(d[f][g].area,"% of the canvas")),v+=".</li>"),h+=v,p++}return{numShapes:p,listShapes:h}}(M,this.ingredients.shapes)).numShapes,d=this.ingredients.colors.background,h=this.height,f="Your output is a, ".concat(f=this.width," by ").concat(h," pixels, ").concat(d," canvas containing the following"),w=f=1===D?"".concat(f," shape:"):"".concat(f," ").concat(D," shapes:"),I=function(D,d){var f,h="",p=0;for(f in d)for(var g in d[f]){var v='<tr id="'.concat(D,"shape").concat(p,'"><th>').concat(d[f][g].color," ").concat(f,"</th>");"line"===f?v+="<td>location = ".concat(d[f][g].pos,"</td><td>length = ").concat(d[f][g].length," pixels</td></tr>"):(v+="<td>location = ".concat(d[f][g].pos,"</td>"),"point"!==f&&(v+="<td> area = ".concat(d[f][g].area,"%</td>")),v+="</tr>"),h+=v,p++}return h}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),_.listShapes!==C.list.innerHTML&&(C.list.innerHTML=_.listShapes),I!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=I),this._accessibleOutputs[M]=C)},q.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(a,_e,q){"use strict";var M=(M=a("./core/main"))&&M.__esModule?M:{default:M};a("./core/constants"),a("./core/environment"),a("./core/friendly_errors/stacktrace"),a("./core/friendly_errors/validate_params"),a("./core/friendly_errors/file_errors"),a("./core/friendly_errors/fes_core"),a("./core/friendly_errors/sketch_reader"),a("./core/helpers"),a("./core/legacy"),a("./core/preload"),a("./core/p5.Element"),a("./core/p5.Graphics"),a("./core/p5.Renderer"),a("./core/p5.Renderer2D"),a("./core/rendering"),a("./core/shim"),a("./core/structure"),a("./core/transform"),a("./core/shape/2d_primitives"),a("./core/shape/attributes"),a("./core/shape/curves"),a("./core/shape/vertex"),a("./accessibility/outputs"),a("./accessibility/textOutput"),a("./accessibility/gridOutput"),a("./accessibility/color_namer"),a("./color/color_conversion"),a("./color/creating_reading"),a("./color/p5.Color"),a("./color/setting"),a("./data/p5.TypedDict"),a("./data/local_storage.js"),a("./dom/dom"),a("./accessibility/describe"),a("./events/acceleration"),a("./events/keyboard"),a("./events/mouse"),a("./events/touch"),a("./image/filters"),a("./image/image"),a("./image/loading_displaying"),a("./image/p5.Image"),a("./image/pixels"),a("./io/files"),a("./io/p5.Table"),a("./io/p5.TableRow"),a("./io/p5.XML"),a("./math/calculation"),a("./math/math"),a("./math/noise"),a("./math/p5.Vector"),a("./math/random"),a("./math/trigonometry"),a("./typography/attributes"),a("./typography/loading_displaying"),a("./typography/p5.Font"),a("./utilities/array_functions"),a("./utilities/conversion"),a("./utilities/string_functions"),a("./utilities/time_date"),a("./webgl/3d_primitives"),a("./webgl/interaction"),a("./webgl/light"),a("./webgl/loading"),a("./webgl/material"),a("./webgl/p5.Camera"),a("./webgl/p5.DataArray"),a("./webgl/p5.Geometry"),a("./webgl/p5.Matrix"),a("./webgl/p5.Quat"),a("./webgl/p5.RendererGL.Immediate"),a("./webgl/p5.RendererGL"),a("./webgl/p5.RendererGL.Retained"),a("./webgl/p5.Framebuffer"),a("./webgl/p5.Shader"),a("./webgl/p5.RenderBuffer"),a("./webgl/p5.Texture"),a("./webgl/text"),a("./core/init"),_e.exports=M.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.ColorConversion={_hsbaToHSLA:function(M){var _=M[1],w=M[2],I=(2-_)*w/2;return 0!=I&&(1==I?_=0:I<.5?_/=2-_:_=_*w/(2-2*I)),[M[0],_,I,M[3]]},_hsbaToRGBA:function(M){var C,_,w,I,D,d=6*M[0],f=M[1],h=M[2];return 0===f?[h,h,h,M[3]]:(_=h*(1-f),w=h*(1-f*(d-(C=Math.floor(d)))),f=h*(1-f*(1+C-d)),d=1===C?(I=w,D=h,_):2===C?(I=_,D=h,f):3===C?(I=_,D=w,h):4===C?(I=f,D=_,h):5===C?(I=h,D=_,w):(I=h,D=f,_),[I,D,d,M[3]])},_hslaToHSBA:function(M){var _=M[1],w=M[2],I=w<.5?(1+_)*w:w+_-w*_;return[M[0],_=2*(I-w)/I,I,M[3]]},_hslaToRGBA:function(M){var C,_=6*M[0],w=M[1],I=M[2];return 0===w?[I,I,I,M[3]]:[(C=function(D,d,f){return D<0?D+=6:6<=D&&(D-=6),D<1?d+(f-d)*D:D<3?f:D<4?d+(f-d)*(4-D):d})(2+_,w=2*I-(I=I<.5?(1+w)*I:I+w-I*w),I),C(_,w,I),C(_-2,w,I),M[3]]},_rgbaToHSBA:function(M){var C,_,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d-Math.min(w,I,D);return 0==f?_=C=0:(_=f/d,w===d?C=(I-D)/f:I===d?C=2+(D-w)/f:D===d&&(C=4+(w-I)/f),C<0?C+=6:6<=C&&(C-=6)),[C/6,_,d,M[3]]},_rgbaToHSLA:function(M){var C,_,h,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d+(h=Math.min(w,I,D));return 0==(h=d-h)?_=C=0:(_=f<1?h/f:h/(2-f),w===d?C=(I-D)/h:I===d?C=2+(D-w)/h:D===d&&(C=4+(w-I)/h),C<0?C+=6:6<=C&&(C-=6)),[C/6,_,f/2,M[3]]}},q.default=a=a.default.ColorConversion},{"../core/main":283}],269:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.map"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Color"),a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),_.default.prototype.alpha=function(d){return _.default._validateParameters("alpha",arguments),this.color(d)._getAlpha()},_.default.prototype.blue=function(d){return _.default._validateParameters("blue",arguments),this.color(d)._getBlue()},_.default.prototype.brightness=function(d){return _.default._validateParameters("brightness",arguments),this.color(d)._getBrightness()},_.default.prototype.color=function(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return _.default._validateParameters("color",h),h[0]instanceof _.default.Color?h[0]:(d=Array.isArray(h[0])?h[0]:h,new _.default.Color(this,d))},_.default.prototype.green=function(d){return _.default._validateParameters("green",arguments),this.color(d)._getGreen()},_.default.prototype.hue=function(d){return _.default._validateParameters("hue",arguments),this.color(d)._getHue()},_.default.prototype.lerpColor=function(d,f,h){_.default._validateParameters("lerpColor",arguments);var p,g,v,S=this._colorMode,x=this._colorMaxes;if(S===w.RGB)g=d.levels.map(function(E){return E/255}),v=f.levels.map(function(E){return E/255});else if(S===w.HSB)d._getBrightness(),f._getBrightness(),g=d.hsba,v=f.hsba;else{if(S!==w.HSL)throw new Error("".concat(S," cannot be used for interpolation."));d._getLightness(),f._getLightness(),g=d.hsla,v=f.hsla}return h=Math.max(Math.min(h,1),0),void 0===this.lerp&&(this.lerp=function(E,N,Z){return Z*(N-E)+E}),S===w.RGB?p=this.lerp(g[0],v[0],h):(.5<Math.abs(g[0]-v[0])&&(g[0]>v[0]?v[0]+=1:g[0]+=1),1<=(p=this.lerp(g[0],v[0],h))&&--p),d=this.lerp(g[1],v[1],h),f=this.lerp(g[2],v[2],h),g=this.lerp(g[3],v[3],h),this.color(p*=x[S][0],d*=x[S][1],f*=x[S][2],g*=x[S][3])},_.default.prototype.lightness=function(d){return _.default._validateParameters("lightness",arguments),this.color(d)._getLightness()},_.default.prototype.red=function(d){return _.default._validateParameters("red",arguments),this.color(d)._getRed()},_.default.prototype.saturation=function(d){return _.default._validateParameters("saturation",arguments),this.color(d)._getSaturation()};var D=_.default;q.default=D},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(p,_e,q){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(N){return M(N)}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":M(N)})(E)}p("core-js/modules/es.symbol"),p("core-js/modules/es.symbol.description"),p("core-js/modules/es.symbol.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.iterator"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.get-own-property-descriptor"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.iterator"),p("core-js/modules/es.string.trim"),p("core-js/modules/es.weak-map"),p("core-js/modules/web.dom-collections.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.trim"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=d(p("../core/main")),w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var N=D();if(N&&N.has(E))return N.get(E);var Z,K={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in E){var G;Object.prototype.hasOwnProperty.call(E,Z)&&((G=z?Object.getOwnPropertyDescriptor(E,Z):null)&&(G.get||G.set)?Object.defineProperty(K,Z,G):K[Z]=E[Z])}return K.default=E,N&&N.set(E,K),K}(p("../core/constants")),I=d(p("./color_conversion"));function D(){var E;return"function"!=typeof WeakMap?null:(D=function(){return E},E=new WeakMap)}function d(E){return E&&E.__esModule?E:{default:E}}function f(E,N){for(var Z=0;Z<N.length;Z++){var K=N[Z];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(E,K.key,K)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},x=(p=/\s*/,/(\d{1,3})/),g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,v=new RegExp("".concat(g.source,"%")),S={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",x.source,",",x.source,",",x.source,"\\)$"].join(p.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(p.source),"i"),RGBA:new RegExp(["^rgba\\(",x.source,",",x.source,",",x.source,",",g.source,"\\)$"].join(p.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",g.source,"\\)$"].join(p.source),"i"),HSL:new RegExp(["^hsl\\(",x.source,",",v.source,",",v.source,"\\)$"].join(p.source),"i"),HSLA:new RegExp(["^hsla\\(",x.source,",",v.source,",",v.source,",",g.source,"\\)$"].join(p.source),"i"),HSB:new RegExp(["^hsb\\(",x.source,",",v.source,",",v.source,"\\)$"].join(p.source),"i"),HSBA:new RegExp(["^hsba\\(",x.source,",",v.source,",",v.source,",",g.source,"\\)$"].join(p.source),"i")};_.default.Color=function(){function E(z,G){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(z._colorMode,z._colorMaxes),![w.RGB,w.HSL,w.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=E._parseInputs.apply(this,G),this._calculateLevels()}var N,Z,K;return N=E,K=[{key:"_parseInputs",value:function(z,G,ie,X){var ee,Y=arguments.length,ve=this.mode,xe=this.maxes[ve],ae=[];if(3<=Y){for(ae[0]=z/xe[0],ae[1]=G/xe[1],ae[2]=ie/xe[2],ae[3]="number"==typeof X?X/xe[3]:1,ee=ae.length-1;0<=ee;--ee){var ge=ae[ee];ge<0?ae[ee]=0:1<ge&&(ae[ee]=1)}return ve===w.HSL?I.default._hslaToRGBA(ae):ve===w.HSB?I.default._hsbaToRGBA(ae):ae}if(1===Y&&"string"==typeof z){if(ie=z.trim().toLowerCase(),h[ie])return E._parseInputs.call(this,h[ie]);if(S.HEX3.test(ie))return(ae=S.HEX3.exec(ie).slice(1).map(function(ne){return parseInt(ne+ne,16)/255}))[3]=1,ae;if(S.HEX6.test(ie))return(ae=S.HEX6.exec(ie).slice(1).map(function(ne){return parseInt(ne,16)/255}))[3]=1,ae;if(S.HEX4.test(ie))return S.HEX4.exec(ie).slice(1).map(function(ne){return parseInt(ne+ne,16)/255});if(S.HEX8.test(ie))return S.HEX8.exec(ie).slice(1).map(function(ne){return parseInt(ne,16)/255});if(S.RGB.test(ie))return(ae=S.RGB.exec(ie).slice(1).map(function(ne){return ne/255}))[3]=1,ae;if(S.RGB_PERCENT.test(ie))return(ae=S.RGB_PERCENT.exec(ie).slice(1).map(function(ne){return parseFloat(ne)/100}))[3]=1,ae;if(S.RGBA.test(ie))return S.RGBA.exec(ie).slice(1).map(function(ne,J){return 3===J?parseFloat(ne):ne/255});if(S.RGBA_PERCENT.test(ie))return S.RGBA_PERCENT.exec(ie).slice(1).map(function(ne,J){return 3===J?parseFloat(ne):parseFloat(ne)/100});if(S.HSL.test(ie)?(ae=S.HSL.exec(ie).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:parseInt(ne,10)/100}))[3]=1:S.HSLA.test(ie)&&(ae=S.HSLA.exec(ie).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:3===J?parseFloat(ne):parseInt(ne,10)/100})),(ae=ae.map(function(ne){return Math.max(Math.min(ne,1),0)})).length)return I.default._hslaToRGBA(ae);if(S.HSB.test(ie)?(ae=S.HSB.exec(ie).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:parseInt(ne,10)/100}))[3]=1:S.HSBA.test(ie)&&(ae=S.HSBA.exec(ie).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:3===J?parseFloat(ne):parseInt(ne,10)/100})),ae.length){for(ee=ae.length-1;0<=ee;--ee)ae[ee]=Math.max(Math.min(ae[ee],1),0);return I.default._hsbaToRGBA(ae)}ae=[1,1,1,1]}else{if(1!==Y&&2!==Y||"number"!=typeof z)throw new Error("".concat(arguments,"is not a valid color representation."));ae[0]=z/xe[2],ae[1]=z/xe[2],ae[2]=z/xe[2],ae[3]="number"==typeof G?G/xe[3]:1,ae=ae.map(function(ne){return Math.max(Math.min(ne,1),0)})}return ae}}],(Z=[{key:"toString",value:function(z){var G=this.levels,ie=this._array,X=ie[3];switch(z){case"#rrggbb":return"#".concat(G[0]<16?"0".concat(G[0].toString(16)):G[0].toString(16),G[1]<16?"0".concat(G[1].toString(16)):G[1].toString(16),G[2]<16?"0".concat(G[2].toString(16)):G[2].toString(16));case"#rrggbbaa":return"#".concat(G[0]<16?"0".concat(G[0].toString(16)):G[0].toString(16),G[1]<16?"0".concat(G[1].toString(16)):G[1].toString(16),G[2]<16?"0".concat(G[2].toString(16)):G[2].toString(16),G[3]<16?"0".concat(G[3].toString(16)):G[3].toString(16));case"#rgb":return"#".concat(Math.round(15*ie[0]).toString(16),Math.round(15*ie[1]).toString(16),Math.round(15*ie[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*ie[0]).toString(16),Math.round(15*ie[1]).toString(16),Math.round(15*ie[2]).toString(16),Math.round(15*ie[3]).toString(16));case"rgb":return"rgb(".concat(G[0],", ",G[1],", ",G[2],")");case"rgb%":return"rgb(".concat((100*ie[0]).toPrecision(3),"%, ",(100*ie[1]).toPrecision(3),"%, ",(100*ie[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*ie[0]).toPrecision(3),"%, ",(100*ie[1]).toPrecision(3),"%, ",(100*ie[2]).toPrecision(3),"%, ",(100*ie[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],", ",X,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*X).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],", ",X,")");case"hsla%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*X).toPrecision(3),"%)");default:return"rgba(".concat(G[0],",",G[1],",",G[2],",",X,")")}}},{key:"setRed",value:function(z){this._array[0]=z/this.maxes[w.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(z){this._array[1]=z/this.maxes[w.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(z){this._array[2]=z/this.maxes[w.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(z){this._array[3]=z/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var z=this._array,G=this.levels=new Array(z.length),ie=z.length-1;0<=ie;--ie)G[ie]=Math.round(255*z[ie]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(z,G){this.mode=z,this.maxes=G}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[w.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[w.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[w.RGB][1]}},{key:"_getHue",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[w.HSB][0]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[w.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[w.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[w.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[w.HSB][1]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[w.HSL][1])}}])&&f(N.prototype,Z),K&&f(N,K),E}(),q.default=x=_.default.Color},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.fill"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Color"),_.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},_.default.prototype.endClip=function(){this._renderer.endClip()},_.default.prototype.clip=function(d,f){this._renderer.beginClip(f),d(),this._renderer.endClip(f)},_.default.prototype.background=function(){var d;return(d=this._renderer).background.apply(d,arguments),this},_.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},_.default.prototype.colorMode=function(d,f,h,p,g){return _.default._validateParameters("colorMode",arguments),d!==w.RGB&&d!==w.HSB&&d!==w.HSL||(this._colorMode=d,d=this._colorMaxes[d],2===arguments.length?(d[0]=f,d[1]=f,d[2]=f,d[3]=f):4===arguments.length?(d[0]=f,d[1]=h,d[2]=p):5===arguments.length&&(d[0]=f,d[1]=h,d[2]=p,d[3]=g)),this},_.default.prototype.fill=function(){var d;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(d=this._renderer).fill.apply(d,arguments),this},_.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},_.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},_.default.prototype.stroke=function(){var d;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(d=this._renderer).stroke.apply(d,arguments),this},_.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},_.default.prototype.noErase=function(){return this._renderer.noErase(),this};var D=_.default;q.default=D},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QUADRATIC=q.LINEAR=q._CTX_MIDDLE=q._DEFAULT_LEADMULT=q._DEFAULT_TEXT_FILL=q.WORD=q.CHAR=q.BOLDITALIC=q.BOLD=q.ITALIC=q.NORMAL=q.BLUR=q.ERODE=q.DILATE=q.POSTERIZE=q.INVERT=q.OPAQUE=q.GRAY=q.THRESHOLD=q.BURN=q.DODGE=q.SOFT_LIGHT=q.HARD_LIGHT=q.OVERLAY=q.REPLACE=q.SCREEN=q.MULTIPLY=q.EXCLUSION=q.SUBTRACT=q.DIFFERENCE=q.LIGHTEST=q.DARKEST=q.ADD=q.REMOVE=q.BLEND=q.UP_ARROW=q.TAB=q.SHIFT=q.RIGHT_ARROW=q.RETURN=q.OPTION=q.LEFT_ARROW=q.ESCAPE=q.ENTER=q.DOWN_ARROW=q.DELETE=q.CONTROL=q.BACKSPACE=q.ALT=q.AUTO=q.HSL=q.HSB=q.RGB=q.MITER=q.BEVEL=q.ROUND=q.SQUARE=q.PROJECT=q.PIE=q.CHORD=q.OPEN=q.CLOSE=q.TESS=q.QUAD_STRIP=q.QUADS=q.TRIANGLE_STRIP=q.TRIANGLE_FAN=q.TRIANGLES=q.LINE_LOOP=q.LINE_STRIP=q.LINES=q.POINTS=q.BASELINE=q.BOTTOM=q.TOP=q.CENTER=q.LEFT=q.RIGHT=q.RADIUS=q.CORNERS=q.CORNER=q.RAD_TO_DEG=q.DEG_TO_RAD=q.RADIANS=q.DEGREES=q.TWO_PI=q.TAU=q.QUARTER_PI=q.PI=q.HALF_PI=q.WAIT=q.TEXT=q.MOVE=q.HAND=q.CROSS=q.ARROW=q.WEBGL2=q.WEBGL=q.P2D=q.VERSION=void 0,q.RGBA=q.HALF_FLOAT=q.FLOAT=q.UNSIGNED_INT=q.UNSIGNED_BYTE=q.COVER=q.CONTAIN=q.FALLBACK=q.LABEL=q.AXES=q.GRID=q._DEFAULT_FILL=q._DEFAULT_STROKE=q.PORTRAIT=q.LANDSCAPE=q.SMOOTH=q.FLAT=q.MIRROR=q.CLAMP=q.REPEAT=q.NEAREST=q.IMAGE=q.IMMEDIATE=q.TEXTURE=q.FILL=q.STROKE=q.CURVE=q.BEZIER=void 0;var M=Math.PI,C=(q.VERSION="1.10.0",q.P2D="p2d",q.WEBGL="webgl",q.WEBGL2="webgl2",q.ARROW="default",q.CROSS="crosshair",q.HAND="pointer",q.MOVE="move",q.TEXT="text",q.WAIT="wait",M/2);q.HALF_PI=C,q.PI=C=M,q.QUARTER_PI=C=M/4,q.TAU=C=2*M,q.TWO_PI=C=2*M,q.DEGREES="degrees",q.RADIANS="radians",q.DEG_TO_RAD=C=M/180,q.RAD_TO_DEG=C=180/M,q.CORNER="corner",q.CORNERS="corners",q.RADIUS="radius",q.RIGHT="right",q.LEFT="left",q.CENTER="center",q.TOP="top",q.BOTTOM="bottom",q.BASELINE="alphabetic",q.POINTS=0,q.LINES=1,q.LINE_STRIP=3,q.LINE_LOOP=2,q.TRIANGLES=4,q.TRIANGLE_FAN=6,q.TRIANGLE_STRIP=5,q.QUADS="quads",q.QUAD_STRIP="quad_strip",q.TESS="tess",q.CLOSE="close",q.OPEN="open",q.CHORD="chord",q.PIE="pie",q.PROJECT="square",q.SQUARE="butt",q.ROUND="round",q.BEVEL="bevel",q.MITER="miter",q.RGB="rgb",q.HSB="hsb",q.HSL="hsl",q.AUTO="auto",q.ALT=18,q.BACKSPACE=8,q.CONTROL=17,q.DELETE=46,q.DOWN_ARROW=40,q.ENTER=13,q.ESCAPE=27,q.LEFT_ARROW=37,q.OPTION=18,q.RETURN=13,q.RIGHT_ARROW=39,q.SHIFT=16,q.TAB=9,q.UP_ARROW=38,q.BLEND="source-over",q.REMOVE="destination-out",q.ADD="lighter",q.DARKEST="darken",q.LIGHTEST="lighten",q.DIFFERENCE="difference",q.SUBTRACT="subtract",q.EXCLUSION="exclusion",q.MULTIPLY="multiply",q.SCREEN="screen",q.REPLACE="copy",q.OVERLAY="overlay",q.HARD_LIGHT="hard-light",q.SOFT_LIGHT="soft-light",q.DODGE="color-dodge",q.BURN="color-burn",q.THRESHOLD="threshold",q.GRAY="gray",q.OPAQUE="opaque",q.INVERT="invert",q.POSTERIZE="posterize",q.DILATE="dilate",q.ERODE="erode",q.BLUR="blur",q.NORMAL="normal",q.ITALIC="italic",q.BOLD="bold",q.BOLDITALIC="bold italic",q.CHAR="CHAR",q.WORD="WORD",q._DEFAULT_TEXT_FILL="#000000",q._DEFAULT_LEADMULT=1.25,q._CTX_MIDDLE="middle",q.LINEAR="linear",q.QUADRATIC="quadratic",q.BEZIER="bezier",q.CURVE="curve",q.STROKE="stroke",q.FILL="fill",q.TEXTURE="texture",q.IMMEDIATE="immediate",q.IMAGE="image",q.NEAREST="nearest",q.REPEAT="repeat",q.CLAMP="clamp",q.MIRROR="mirror",q.FLAT="flat",q.SMOOTH="smooth",q.LANDSCAPE="landscape",q.PORTRAIT="portrait",q._DEFAULT_STROKE="#000000",q._DEFAULT_FILL="#FFFFFF",q.GRID="grid",q.AXES="axes",q.LABEL="label",q.FALLBACK="fallback",q.CONTAIN="contain",q.COVER="cover",q.UNSIGNED_BYTE="unsigned-byte",q.UNSIGNED_INT="unsigned-int",q.FLOAT="float",q.HALF_FLOAT="half-float",q.RGBA="rgba"},{}],273:[function(a,_e,q){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function C(g){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(v){return M(v)}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":M(v)})(g)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.search"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.search"),a("core-js/modules/es.string.split"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(w=a("./main"))&&w.__esModule?w:{default:w},w=function(g){if(g&&g.__esModule)return g;if(null===g||"object"!==C(g)&&"function"!=typeof g)return{default:g};var v=I();if(v&&v.has(g))return v.get(g);var S,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g){var N;Object.prototype.hasOwnProperty.call(g,S)&&((N=E?Object.getOwnPropertyDescriptor(g,S):null)&&(N.get||N.set)?Object.defineProperty(x,S,N):x[S]=g[S])}return x.default=g,v&&v.set(g,x),x}(a("./constants"));function I(){var g;return"function"!=typeof WeakMap?null:(I=function(){return g},g=new WeakMap)}var D=[w.ARROW,w.CROSS,w.HAND,w.MOVE,w.TEXT,w.WAIT],d=(_.default.prototype._frameRate=0,_.default.prototype._lastFrameTime=window.performance.now(),_.default.prototype._targetFrameRate=60,window.print),f=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function p(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}_.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):f||(d(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(f=!0))},_.default.prototype.frameCount=0,_.default.prototype.deltaTime=0,_.default.prototype.focused=document.hasFocus(),_.default.prototype.cursor=function(g,v,S){var x,E="auto",N=this._curElement.elt;D.includes(g)?E=g:"string"==typeof g&&(x="",v&&S&&"number"==typeof v&&"number"==typeof S&&(x="".concat(v," ").concat(S)),E="http://"===g.substring(0,7)||"https://"===g.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(x,", auto"):g),N.style.cursor=E},_.default.prototype.frameRate=function(g){return _.default._validateParameters("frameRate",arguments),"number"!=typeof g||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),0===g&&this._setProperty("_frameRate",g),this)},_.default.prototype.getFrameRate=function(){return this.frameRate()},_.default.prototype.setFrameRate=function(g){return this.frameRate(g)},_.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},_.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},_.default.prototype.webglVersion=w.P2D,_.default.prototype.displayWidth=screen.width,_.default.prototype.displayHeight=screen.height,_.default.prototype.windowWidth=0,_.default.prototype.windowHeight=0,_.default.prototype._onresize=function(g){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p());var v=this._isGlobal?window:this;"function"!=typeof v.windowResized||void 0===(v=v.windowResized(g))||v||g.preventDefault()},_.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p())},_.default.prototype.width=0,_.default.prototype.height=0,_.default.prototype.fullscreen=function(g){if(_.default._validateParameters("fullscreen",arguments),void 0===g)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},_.default.prototype.pixelDensity=function(g){var v;return _.default._validateParameters("pixelDensity",arguments),"number"==typeof g?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(v=this).resizeCanvas(this.width,this.height,!0)):v=this._pixelDensity,v},_.default.prototype.displayDensity=function(){return window.devicePixelRatio},_.default.prototype.getURL=function(){return location.href},_.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return""!==g})},_.default.prototype.getURLParams=function(){for(var g,v=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,S={};null!=(g=v.exec(location.search));)g.index===v.lastIndex&&v.lastIndex++,S[g[1]]=g[2];return S},q.default=a=_.default},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.starts-with"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.starts-with"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(D=a("../main"))&&D.__esModule?D:{default:D};function C(d,f){f=f||console.log.bind(console),_||I(),_.some(function(h){var p;if(d.message&&null!==d.message.match("\\W?".concat(h.name,"\\W")))return p="function"===h.type?"".concat(h.name,"()"):h.name,f("Did you just try to use p5.js's ".concat(p," ").concat(h.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(w)),!0})}a("../internationalization");var _=null,I=null,w=(M.default._friendlyError=M.default._checkForUserDefinedFunctions=M.default._fesErrorMonitor=function(){},_=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),D=(I=function(){function d(h){return Object.getOwnPropertyNames(h).filter(function(p){return"_"!==p[0]&&!(p in f)&&(f[p]=!0)}).map(function(p){var g="function"==typeof h[p]?"function":p===p.toUpperCase()?"constant":"variable";return{name:p,type:g}})}var f={};(_=[].concat(d(M.default.prototype),d(a("../constants")))).sort(function(h,p){return p.name.length-h.name.length})},M.default.prototype._helpForMisusedAtTopLevelCode=C,"complete"!==document.readyState&&(window.addEventListener("error",C,!1),window.addEventListener("load",function(){window.removeEventListener("error",C,!1)})),M.default);q.default=D},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(M=a("../main"))&&M.__esModule?M:{default:M};a("../internationalization"),M.default._friendlyFileLoadError=function(){},q.default=a=M.default},{"../internationalization":281,"../main":283}],276:[function(a,_e,q){"use strict";function M(V){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(V)}function C(V){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(me){return M(me)}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":M(me)})(V)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=function ne(V){return V&&V.__esModule?V:{default:V}}(a("../main"));function ae(){var V;return"function"!=typeof WeakMap?null:(ae=function(){return V},V=new WeakMap)}a("../internationalization"),function ge(V){if(V&&V.__esModule)return V;if(null===V||"object"!==C(V)&&"function"!=typeof V)return{default:V};var me=ae();if(me&&me.has(V))return me.get(V);var Oe,Xe,dt={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Oe in V)Object.prototype.hasOwnProperty.call(V,Oe)&&((Xe=yt?Object.getOwnPropertyDescriptor(V,Oe):null)&&(Xe.get||Xe.set)?Object.defineProperty(dt,Oe,Xe):dt[Oe]=V[Oe]);return dt.default=V,me&&me.set(V,dt),dt}(a("../constants")),_.default._fesCodeReader=function(){},q.default=_.default},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(a,_e,q){"use strict";function M(){var C=/(^|@)\S+:\d+/,_=/^\s*at .*(\S+:\d+|\(native\))/m,w=/^(eval@)?(\[native code])?$/;return{parse:function(I){return void 0!==I.stacktrace||void 0!==I["opera#sourceloc"]?this.parseOpera(I):I.stack&&I.stack.match(_)?this.parseV8OrIE(I):I.stack?this.parseFFOrSafari(I):void 0},extractLocation:function(I){return-1===I.indexOf(":")?[I]:[(I=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(I.replace(/[()]/g,"")))[1],I[2]||void 0,I[3]||void 0]},parseV8OrIE:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(_)},this).map(function(D){var f=(d=(D=-1<D.indexOf("(eval ")?D.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):D).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),d=(d=f?d.replace(f[0],""):d).split(/\s+/).slice(1);return f=this.extractLocation(f?f[1]:d.pop()),{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseFFOrSafari:function(I){return I.stack.split("\n").filter(function(D){return!D.match(w)},this).map(function(D){var d,f;return-1===(D=-1<D.indexOf(" > eval")?D.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):D).indexOf("@")&&-1===D.indexOf(":")?{functionName:D}:{functionName:(f=D.match(d=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(D.replace(d,"")))[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseOpera:function(I){return!I.stacktrace||-1<I.message.indexOf("\n")&&I.message.split("\n").length>I.stacktrace.split("\n").length?this.parseOpera9(I):I.stack?this.parseOpera11(I):this.parseOpera10(I)},parseOpera9:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)/i,d=I.message.split("\n"),f=[],h=2,p=d.length;h<p;h+=2){var g=D.exec(d[h]);g&&f.push({fileName:g[2],lineNumber:g[1],source:d[h]})}return f},parseOpera10:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=I.stacktrace.split("\n"),f=[],h=0,p=d.length;h<p;h+=2){var g=D.exec(d[h]);g&&f.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:d[h]})}return f},parseOpera11:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(C)&&!D.match(/^Error created at/)},this).map(function(D){var d,h=D.split("@"),f=this.extractLocation(h.pop());return{functionName:(h=h.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(d=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):d)||"[arguments not available]"===d?void 0:d.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)}}}a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../main"))&&a.__esModule?a:{default:a}).default._getErrorStackParser=function(){return new M},q.default=a=a.default},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(a,_e,q){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(C=a("../main"))&&C.__esModule?C:{default:C};function _(){var I;return"function"!=typeof WeakMap?null:(_=function(){return I},I=new WeakMap)}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}(function(I){if(!(I&&I.__esModule||null===I||"object"!==w(I)&&"function"!=typeof I)){var D=_();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}f.default=I,D&&D.set(I,f)}})(a("../constants")),a("../internationalization"),C.default._validateParameters=C.default._clearValidateParamsCache=function(){},q.default=a=C.default},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(a,_e,q){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}function C(I){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=function(I){if(I&&I.__esModule)return I;if(null===I||"object"!==C(I)&&"function"!=typeof I)return{default:I};var D=w();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}return f.default=I,D&&D.set(I,f),f}(a("./constants"));function w(){var I;return"function"!=typeof WeakMap?null:(w=function(){return I},I=new WeakMap)}q.default={modeAdjust:function(I,D,d,f,h){return h===_.CORNER?{x:I,y:D,w:d,h:f}:h===_.CORNERS?{x:I,y:D,w:d-I,h:f-D}:h===_.RADIUS?{x:I-d,y:D-f,w:2*d,h:2*f}:h===_.CENTER?{x:I-.5*d,y:D-.5*f,w:d,h:f}:void 0}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(a,_e,q){"use strict";a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator");var M=(C=a("../core/main"))&&C.__esModule?C:{default:C};a("./internationalization");var C=Promise.resolve();Promise.all([new Promise(function(_,w){"complete"===document.readyState?_():window.addEventListener("load",_,!1)}),C]).then(function(){void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!M.default.instance&&new M.default})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(a,_e,q){"use strict";a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.setTranslatorLanguage=q.currentTranslatorLanguage=q.availableTranslatorLanguages=q.initialize=q.translator=void 0;var M,_=I(a("i18next")),w=I(a("i18next-browser-languagedetector"));function I(f){return f&&f.__esModule?f:{default:f}}function D(f,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}var d=function(){function f(v,S){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(v,S)}var h,p;return h=f,(p=[{key:"fetchWithTimeout",value:function(v,S){var x=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(v,S),new Promise(function(E,N){return setTimeout(function(){return N(new Error("timeout"))},x)})])}},{key:"init",value:function(v){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=v,this.options=S}},{key:"read",value:function(v,S,x){var E=this.options.loadPath;v===this.options.fallback?x(null,M[v][S]):undefined.includes(v)?(E=this.services.interpolator.interpolate(E,{lng:v,ns:S}),this.loadUrl(E,x)):x("Not found",!1)}},{key:"loadUrl",value:function(v,S){this.fetchWithTimeout(v).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(v))},function(){throw new Error("failed loading ".concat(v))}).then(function(x){return S(null,x)}).catch(S)}}])&&D(h.prototype,p),f}();d.type="backend",q.translator=function(f,h){console.debug("p5.js translator called before translations were loaded"),_.default.t(f,h)},q.initialize=function(){return _.default.use(w.default).use(d).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:M}).then(function(f){q.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},q.availableTranslatorLanguages=function(){return _.default.languages},q.currentTranslatorLanguage=function(f){return _.default.language},q.setTranslatorLanguage=function(f){return _.default.changeLanguage(f||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("./main"))&&a.__esModule?a:{default:a}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},a.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},a.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},a.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},q.default=a=a.default},{"./main":283}],283:[function(a,_e,q){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-names"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,a("./shim");var _=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var S;Object.prototype.hasOwnProperty.call(f,p)&&((S=v?Object.getOwnPropertyDescriptor(f,p):null)&&(S.get||S.set)?Object.defineProperty(g,p,S):g[p]=f[p])}return g.default=f,h&&h.set(f,g),g}(a("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}var D,d=function(){function f(v,E){var x=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=E,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},E=Object.getOwnPropertyNames(f.prototype._registeredMethods);var N=!0,Z=!1,K=void 0;try{for(var z,G=E[Symbol.iterator]();!(N=(z=G.next()).done);N=!0){var ie=z.value;this._registeredMethods[ie]=f.prototype._registeredMethods[ie].slice()}}catch(J){Z=!0,K=J}finally{try{N||null==G.return||G.return()}finally{if(Z)throw K}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),f.prototype.callRegisteredHooksFor=function(J){var ce=this||f.prototype,Te=this._isGlobal?window:this;if(ce._registeredMethods.hasOwnProperty(J)){ce=ce._registeredMethods[J];var et=!0,le=void(J=!1);try{for(var V,me=ce[Symbol.iterator]();!(et=(V=me.next()).done);et=!0){var Oe=V.value;"function"==typeof Oe&&Oe.call(Te)}}catch(yt){J=!0,le=yt}finally{try{et||null==me.return||me.return()}finally{if(J)throw le}}}},this._start=function(){x._userNode&&"string"==typeof x._userNode&&(x._userNode=document.getElementById(x._userNode));var J=x._isGlobal?window:x;if(J.preload){x.callRegisteredHooksFor("beforePreload");var ce,Te=document.getElementById(x._loadingScreenId),et=(Te||((Te=document.createElement("div")).innerHTML="Loading...",Te.style.position="absolute",Te.id=x._loadingScreenId,(x._userNode||document.body).appendChild(Te)),x._preloadMethods);for(ce in et){et[ce]=et[ce]||f;var le=et[ce];le!==f.prototype&&le!==f||(x._isGlobal&&(window[ce]=x._wrapPreload(x,ce)),le=x),x._registeredPreloadMethods[ce]=le[ce],le[ce]=x._wrapPreload(le,ce)}J.preload(),x._runIfPreloadsAreDone()}else x._setup(),x._recording||x._draw()},this._runIfPreloadsAreDone=function(){var J,ce=this._isGlobal?window:this;0===ce._preloadCount&&((J=document.getElementById(ce._loadingScreenId))&&J.parentNode.removeChild(J),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),ce._setup(),this._recording||ce._draw()))},this._decrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||"function"!=typeof J.preload||(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,ce){var Te=this;return function(){Te._incrementPreload();for(var et=arguments.length,le=new Array(et),V=0;V<et;V++)le[V]=arguments[V];return Te._registeredPreloadMethods[ce].apply(J,le)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){x.callRegisteredHooksFor("beforeSetup"),x.createCanvas(x._defaultCanvasSize.width,x._defaultCanvasSize.height,"p2d");var J=x._isGlobal?window:x;if("function"==typeof J.preload)for(var ce in x._preloadMethods)J[ce]=x._preloadMethods[ce][ce],J[ce]&&x&&(J[ce]=J[ce].bind(x));x._millisStart=window.performance.now(),J._preloadDone=!0,"function"==typeof J.setup&&J.setup();var Te=document.getElementsByTagName("canvas"),et=!0,le=!1,V=void 0;try{for(var me,Oe=Te[Symbol.iterator]();!(et=(me=Oe.next()).done);et=!0){var Xe=me.value;"true"===Xe.dataset.hidden&&(Xe.style.visibility="",delete Xe.dataset.hidden)}}catch(dt){le=!0,V=dt}finally{try{et||null==Oe.return||Oe.return()}finally{if(le)throw V}}x._lastTargetFrameTime=window.performance.now(),x._lastRealFrameTime=window.performance.now(),x._setupDone=!0,(x._accessibleOutputs.grid||x._accessibleOutputs.text)&&x._updateAccsOutput(),x.callRegisteredHooksFor("afterSetup")},this._draw=function(ce){ce=ce||window.performance.now();var et=1e3/x._targetFrameRate;(!x._loop||et-5<=ce-x._lastTargetFrameTime)&&(x.deltaTime=ce-x._lastRealFrameTime,x._setProperty("deltaTime",x.deltaTime),x._frameRate=1e3/x.deltaTime,x.redraw(),x._lastTargetFrameTime=Math.max(x._lastTargetFrameTime+et,ce),x._lastRealFrameTime=ce,void 0!==x._updateMouseCoords&&(x._updateMouseCoords(),x._setProperty("movedX",0),x._setProperty("movedY",0))),x._loop&&(x._requestAnimId=window.requestAnimationFrame(x._draw))},this._setProperty=function(J,ce){x[J]=ce,x._isGlobal&&(window[J]=ce)},this.remove=function(){if(x._startListener&&window.removeEventListener("load",x._startListener,!1),(J=document.getElementById(x._loadingScreenId))&&(J.parentNode.removeChild(J),x._incrementPreload()),x._curElement){for(var ce in x._loop=!1,x._requestAnimId&&window.cancelAnimationFrame(x._requestAnimId),x._events)window.removeEventListener(ce,x._events[ce]);var Te=!0,J=!1,et=void 0;try{for(var le,V=x._elements[Symbol.iterator]();!(Te=(le=V.next()).done);Te=!0){var me,Oe=le.value;for(me in Oe.elt&&Oe.elt.parentNode&&Oe.elt.parentNode.removeChild(Oe.elt),Oe._events)Oe.elt.removeEventListener(me,Oe._events[me])}}catch(ht){J=!0,et=ht}finally{try{Te||null==V.return||V.return()}finally{if(J)throw et}}var Xe=x;x._registeredMethods.remove.forEach(function(ht){void 0!==ht&&ht.call(Xe)})}if(x._isGlobal){for(var dt in f.prototype)try{delete window[dt]}catch{window[dt]=void 0}for(var yt in x)if(x.hasOwnProperty(yt))try{delete window[yt]}catch{window[yt]=void 0}f.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(J){void 0!==J&&J.call(this)},this),this._setupPromisePreloads();var X,ee,Y=this._createFriendlyGlobalFunctionBinder();if(v)v(this),f._checkForUserDefinedFunctions(this);else{for(var ve in this._isGlobal=!0,f.instance=this,f.prototype)"function"==typeof f.prototype[ve]?(X=ve.substring(2),this._events.hasOwnProperty(X)||(Math.hasOwnProperty(ve)&&Math[ve]===f.prototype[ve]?Y(ve,f.prototype[ve]):Y(ve,f.prototype[ve].bind(this)))):Y(ve,f.prototype[ve]);for(var xe in this)this.hasOwnProperty(xe)&&Y(xe,this[xe])}for(ee in this._events){var ae=this["_on".concat(ee)];ae&&(ae=ae.bind(this),window.addEventListener(ee,ae,{passive:!1}),this._events[ee]=ae)}function ge(){x._setProperty("focused",!0)}function ne(){x._setProperty("focused",!1)}window.addEventListener("focus",ge),window.addEventListener("blur",ne),this.registerMethod("remove",function(){window.removeEventListener("focus",ge),window.removeEventListener("blur",ne)}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,p;return h=f,(p=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=_.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(v,S){f.prototype._preloadMethods.hasOwnProperty(v)||(f.prototype._preloadMethods[v]=S)}},{key:"registerMethod",value:function(v,S){var x=this||f.prototype;x._registeredMethods.hasOwnProperty(v)||(x._registeredMethods[v]=[]),x._registeredMethods[v].push(S)}},{key:"unregisterMethod",value:function(v,S){var x=this||f.prototype;if(x._registeredMethods.hasOwnProperty(v)){for(var E=x._registeredMethods[v],N=[],Z=0;Z<E.length;Z++)E[Z]===S&&N.push(Z);for(var K=N.length-1;0<=K;K--)E.splice(N[K],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var v=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=v.globalObject||window;return v.log||console.log.bind(console),function(x,E){S[x]=E}}}])&&I(h.prototype,p),f}();for(D in d.instance=null,d.disableFriendlyErrors=!1,_)d.prototype[D]=_[D];d.VERSION=_.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={},q.default=d},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("./main"))&&a.__esModule?a:{default:a};function C(_,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}M.default.Element=function(){function _(d,f){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.elt=d,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var w,I,D;return w=_,D=[{key:"_adjustListener",value:function(d,f,h){return!1===f?M.default.Element._detachListener(d,h):M.default.Element._attachListener(d,f,h),this}},{key:"_attachListener",value:function(d,f,h){h._events[d]&&M.default.Element._detachListener(d,h),f=f.bind(h),h.elt.addEventListener(d,f,!1),h._events[d]=f}},{key:"_detachListener",value:function(d,f){f.elt.removeEventListener(d,f._events[d],!1),f._events[d]=null}}],(I=[{key:"parent",value:function(d){return void 0===d?this.elt.parentNode:("string"==typeof d?("#"===d[0]&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof M.default.Element&&(d=d.elt),d.appendChild(this.elt),this)}},{key:"id",value:function(d){return void 0===d?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(d){return void 0===d?this.elt.className:(this.elt.className=d,this)}},{key:"mousePressed",value:function(d){return M.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),d.call(this,f)},this),this}},{key:"doubleClicked",value:function(d){return M.default.Element._adjustListener("dblclick",d,this),this}},{key:"mouseWheel",value:function(d){return M.default.Element._adjustListener("wheel",d,this),this}},{key:"mouseReleased",value:function(d){return M.default.Element._adjustListener("mouseup",d,this),this}},{key:"mouseClicked",value:function(d){return M.default.Element._adjustListener("click",d,this),this}},{key:"mouseMoved",value:function(d){return M.default.Element._adjustListener("mousemove",d,this),this}},{key:"mouseOver",value:function(d){return M.default.Element._adjustListener("mouseover",d,this),this}},{key:"mouseOut",value:function(d){return M.default.Element._adjustListener("mouseout",d,this),this}},{key:"touchStarted",value:function(d){return M.default.Element._adjustListener("touchstart",d,this),this}},{key:"touchMoved",value:function(d){return M.default.Element._adjustListener("touchmove",d,this),this}},{key:"touchEnded",value:function(d){return M.default.Element._adjustListener("touchend",d,this),this}},{key:"dragOver",value:function(d){return M.default.Element._adjustListener("dragover",d,this),this}},{key:"dragLeave",value:function(d){return M.default.Element._adjustListener("dragleave",d,this),this}},{key:"_setProperty",value:function(d,f){this[d]=f}}])&&C(w.prototype,I),D&&C(w,D),_}(),q.default=a=M.default.Element},{"./main":283}],285:[function(a,_e,q){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(S)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(v=a("./main"))&&v.__esModule?v:{default:v},w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var x=I();if(x&&x.has(S))return x.get(S);var E,N={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in S){var K;Object.prototype.hasOwnProperty.call(S,E)&&((K=Z?Object.getOwnPropertyDescriptor(S,E):null)&&(K.get||K.set)?Object.defineProperty(N,E,K):N[E]=S[E])}return N.default=S,x&&x.set(S,N),N}(a("./constants"));function I(){var S;return"function"!=typeof WeakMap?null:(I=function(){return S},S=new WeakMap)}function D(S,x){for(var E=0;E<x.length;E++){var N=x[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function d(S,x){return(d=Object.setPrototypeOf||function(E,N){return E.__proto__=N,E})(S,x)}function h(S,x){return!x||"object"!==C(x)&&"function"!=typeof x?p(S):x}function p(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function g(S){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(S)}_.default.Graphics=function(S){var x=Z;if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(S&&S.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),S&&d(x,S);var N=function f(S){return function(){var x,E=g(S);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=g(this).constructor,Reflect.construct(E,arguments,x)):E.apply(this,arguments))}}(Z);function Z(K,z,xe,ie,X){var ee;if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function");ve=X||document.createElement("canvas"),(ee=N.call(this,ve,ie)).canvas=ve;var Y,ve=xe||w.P2D;for(Y in xe=ie._userNode||document.body,X||xe.appendChild(ee.canvas),_.default.prototype)ee[Y]||(ee[Y]="function"==typeof _.default.prototype[Y]?_.default.prototype[Y].bind(p(ee)):_.default.prototype[Y]);return _.default.prototype._initializeInstanceVariables.apply(p(ee)),ee.width=K,ee.height=z,ee._pixelDensity=ie._pixelDensity,ve===w.WEBGL?(ee._renderer=new _.default.RendererGL(ee.canvas,p(ee),!1),K=(X=ee._renderer._adjustDimensions(K,z)).adjustedWidth,z=X.adjustedHeight):ee._renderer=new _.default.Renderer2D(ee.canvas,p(ee),!1),ie._elements.push(p(ee)),Object.defineProperty(p(ee),"deltaTime",{get:function(){return this._pInst.deltaTime}}),ee._renderer.resize(K,z),ee._renderer._applyDefaults(),h(ee,p(ee))}return x=Z,(S=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var K,z=this._pInst._elements.indexOf(this);for(K in-1!==z&&this._pInst._elements.splice(z,1),this._events)this.elt.removeEventListener(K,this._events[K]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(K){return new _.default.Framebuffer(this,K)}}])&&D(x.prototype,S),Z}(_.default.Element);var v=_.default.Graphics;q.default=v},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(a,_e,q){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(S)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(g=a("./main"))&&g.__esModule?g:{default:g},_=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==I(S)&&"function"!=typeof S)return{default:S};var x=w();if(x&&x.has(S))return x.get(S);var E,N={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in S){var K;Object.prototype.hasOwnProperty.call(S,E)&&((K=Z?Object.getOwnPropertyDescriptor(S,E):null)&&(K.get||K.set)?Object.defineProperty(N,E,K):N[E]=S[E])}return N.default=S,x&&x.set(S,N),N}(a("../core/constants"));function w(){var S;return"function"!=typeof WeakMap?null:(w=function(){return S},S=new WeakMap)}function I(S){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(S)}function D(S,x){for(var E=0;E<x.length;E++){var N=x[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function d(S,x){return(d=Object.setPrototypeOf||function(E,N){return E.__proto__=N,E})(S,x)}function h(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function p(S){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(S)}var g=function(S){var x=Z;if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(S&&S.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),S&&d(x,S);var N=function f(S){return function(){var x,E,N=p(S);return x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=p(this).constructor,Reflect.construct(N,arguments,x)):N.apply(this,arguments),N=this,!(E=x)||"object"!==I(E)&&"function"!=typeof E?h(N):E}}(Z);function Z(K,z,G){var ie;if(this instanceof Z)return(ie=N.call(this,K,z)).canvas=K,ie._pixelsState=z,G?(ie._isMainCanvas=!0,ie._pInst._setProperty("_curElement",h(ie)),ie._pInst._setProperty("canvas",ie.canvas),ie._pInst._setProperty("width",ie.width),ie._pInst._setProperty("height",ie.height)):(ie.canvas.style.display="none",ie._styles=[]),ie._clipping=!1,ie._clipInvert=!1,ie._textSize=12,ie._textLeading=15,ie._textFont="sans-serif",ie._textStyle=_.NORMAL,ie._textAscent=null,ie._textDescent=null,ie._textAlign=_.LEFT,ie._textBaseline=_.BASELINE,ie._textWrap=_.WORD,ie._rectMode=_.CORNER,ie._ellipseMode=_.CENTER,ie._curveTightness=0,ie._imageMode=_.CORNER,ie._tint=null,ie._doStroke=!0,ie._doFill=!0,ie._strokeSet=!1,ie._fillSet=!1,ie._leadingSet=!1,ie._pushPopDepth=0,ie;throw new TypeError("Cannot call a class as a function")}return x=Z,(S=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(K){this._pushPopDepth--,K.properties&&Object.assign(this,K.properties)}},{key:"beginClip",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=K.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(K,z){this.width=K,this.height=z,this.elt.width=K*this._pInst._pixelDensity,this.elt.height=z*this._pInst._pixelDensity,this.elt.style.width="".concat(K,"px"),this.elt.style.height="".concat(z,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(K,z,G,ie){var X=this._pixelsState,ee=X._pixelDensity,Y=this.canvas;if(void 0===K&&void 0===z)K=z=0,G=X.width,ie=X.height;else if(K*=ee,z*=ee,void 0===G&&void 0===ie)return K<0||z<0||K>=Y.width||z>=Y.height?[0,0,0,0]:this._getPixel(K,z);return(X=new C.default.Image(G*ee,ie*ee)).pixelDensity(ee),X.canvas.getContext("2d").drawImage(Y,K,z,G*ee,ie*ee,0,0,G*ee,ie*ee),X}},{key:"textLeading",value:function(K){return"number"==typeof K?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",K),this._pInst):this._textLeading}},{key:"textStyle",value:function(K){return K?(K!==_.NORMAL&&K!==_.ITALIC&&K!==_.BOLD&&K!==_.BOLDITALIC||this._setProperty("_textStyle",K),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(K,z){return void 0!==K?(this._setProperty("_textAlign",K),void 0!==z&&this._setProperty("_textBaseline",z),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(K){return this._setProperty("_textWrap",K),this._textWrap}},{key:"text",value:function(K,z,G,ie,X){var ee,Y,ve,xe,ae=this._pInst,ge=this._textWrap,ne=Number.MAX_VALUE,J=G;if((this._doFill||this._doStroke)&&void 0!==K){if(ee=(K=(K="string"!=typeof K?K.toString():K).replace(/(\t)/g,"  ")).split("\n"),void 0!==ie){switch(this._rectMode===_.CENTER&&(z-=ie/2),this._textAlign){case _.CENTER:z+=ie/2;break;case _.RIGHT:z+=ie}if(void 0!==X){this._rectMode===_.CENTER&&(G-=X/2,J-=X/2),K=G;var ce=ae.textAscent();switch(this._textBaseline){case _.BOTTOM:xe=G+X,G=Math.max(xe,G),J+=ce;break;case _.CENTER:xe=G+X/2,G=Math.max(xe,G),J+=ce/2}ne=G+X-ce,this._textBaseline===_.CENTER&&(ne=K+X-ce/2)}else this._textBaseline!==_.BOTTOM&&this._textBaseline!==_.CENTER||(J=G-(K=ae.textSize()*this._textLeading)/2,ne=G+K/2);if(ge===_.WORD){for(var Te=[],et=0;et<ee.length;et++){for(var le="",V=ee[et].split(" "),me=0;me<V.length;me++)Y="".concat(le+V[me])+" ",le=ie<(ve=this.textWidth(Y))&&0<le.length?(Te.push(le),"".concat(V[me])+" "):Y;Te.push(le)}var Oe=0;this._textBaseline===_.CENTER?Oe=(Te.length-1)*ae.textLeading()/2:this._textBaseline===_.BOTTOM&&(Oe=(Te.length-1)*ae.textLeading());for(var Xe=0;Xe<ee.length;Xe++){le="",V=ee[Xe].split(" ");for(var dt=0;dt<V.length;dt++)Y="".concat(le+V[dt])+" ",ie<(ve=this.textWidth(Y))&&0<le.length?(this._renderText(ae,le.trim(),z,G-Oe,ne,J),le="".concat(V[dt])+" ",G+=ae.textLeading()):le=Y;this._renderText(ae,le.trim(),z,G-Oe,ne,J),G+=ae.textLeading()}}else{for(var yt=[],Ut=0;Ut<ee.length;Ut++)for(var ht=ee[Ut].split(le=""),Lt=0;Lt<ht.length;Lt++)Y="".concat(le+ht[Lt]),(ve=this.textWidth(Y))<=ie?le+=ht[Lt]:ie<ve&&0<le.length&&(yt.push(le),le="".concat(ht[Lt]));yt.push(le);var kt=0;this._textBaseline===_.CENTER?kt=(yt.length-1)*ae.textLeading()/2:this._textBaseline===_.BOTTOM&&(kt=(yt.length-1)*ae.textLeading());for(var lt=0;lt<ee.length;lt++){ht=ee[lt].split(le="");for(var It=0;It<ht.length;It++)Y="".concat(le+ht[It]),(ve=this.textWidth(Y))<=ie?le+=ht[It]:ie<ve&&0<le.length&&(this._renderText(ae,le.trim(),z,G-kt,ne,J),G+=ae.textLeading(),le="".concat(ht[It]))}this._renderText(ae,le.trim(),z,G-kt,ne,J),G+=ae.textLeading()}}else{var bt=0;this._textBaseline===_.CENTER?bt=(ee.length-1)*ae.textLeading()/2:this._textBaseline===_.BOTTOM&&(bt=(ee.length-1)*ae.textLeading());for(var Pt=0;Pt<ee.length;Pt++)this._renderText(ae,ee[Pt],z,G-bt,ne,J-bt),G+=ae.textLeading()}return ae}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===I(K)&&K.font&&K.font.supported}},{key:"_updateTextMetrics",value:function(){var K,z,G,ie,X,ee;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((K=document.createElement("span")).style.fontFamily=this._textFont,K.style.fontSize="".concat(this._textSize,"px"),K.innerHTML="ABCjgq|",(ee=document.createElement("div")).style.display="inline-block",ee.style.width="1px",ee.style.height="0px",(z=document.createElement("div")).appendChild(K),z.appendChild(ee),z.style.height="0px",z.style.overflow="hidden",document.body.appendChild(z),ee.style.verticalAlign="baseline",ie=v(ee),X=v(K),G=ie[1]-X[1],ee.style.verticalAlign="bottom",ie=v(ee),X=v(K),ee=ie[1]-X[1]-G,document.body.removeChild(z),this._setProperty("_textAscent",G),this._setProperty("_textDescent",ee)),this}}])&&D(x.prototype,S),Z}(C.default.Element);function v(S){var x=0,E=0;if(S.offsetParent)for(;x+=S.offsetLeft,E+=S.offsetTop,S=S.offsetParent;);else x+=S.offsetLeft,E+=S.offsetTop;return[x,E]}g.prototype.textSize=function(S){return"number"==typeof S?(this._setProperty("_textSize",S),this._leadingSet||this._setProperty("_textLeading",S*_._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},C.default.Renderer=g,q.default=a=C.default.Renderer},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(S,_e,q){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}S("core-js/modules/es.symbol"),S("core-js/modules/es.symbol.description"),S("core-js/modules/es.symbol.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.for-each"),S("core-js/modules/es.array.iterator"),S("core-js/modules/es.array.join"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.function.name"),S("core-js/modules/es.number.to-fixed"),S("core-js/modules/es.object.get-own-property-descriptor"),S("core-js/modules/es.object.get-prototype-of"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.reflect.construct"),S("core-js/modules/es.reflect.get"),S("core-js/modules/es.regexp.exec"),S("core-js/modules/es.regexp.to-string"),S("core-js/modules/es.string.iterator"),S("core-js/modules/es.weak-map"),S("core-js/modules/web.dom-collections.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.for-each"),S("core-js/modules/es.array.join"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.function.name"),S("core-js/modules/es.number.to-fixed"),S("core-js/modules/es.object.get-prototype-of"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.regexp.exec"),S("core-js/modules/es.regexp.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(v=S("./main"))&&v.__esModule?v:{default:v},w=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=I();if(E&&E.has(x))return E.get(x);var N,Z={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in x){var z;Object.prototype.hasOwnProperty.call(x,N)&&((z=K?Object.getOwnPropertyDescriptor(x,N):null)&&(z.get||z.set)?Object.defineProperty(Z,N,z):Z[N]=x[N])}return Z.default=x,E&&E.set(x,Z),Z}(S("./constants"));function I(){var x;return"function"!=typeof WeakMap?null:(I=function(){return x},x=new WeakMap)}function D(x,E){for(var N=0;N<E.length;N++){var Z=E[N];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(x,Z.key,Z)}}function d(x,E,N){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(G,K,z){if(G=function(ie,X){for(;!Object.prototype.hasOwnProperty.call(ie,X)&&null!==(ie=p(ie)););return ie}(G,K))return(G=Object.getOwnPropertyDescriptor(G,K)).get?G.get.call(z):G.value})(x,E,N||x)}function f(x,E){return(f=Object.setPrototypeOf||function(N,Z){return N.__proto__=Z,N})(x,E)}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}S("./p5.Renderer");var g="rgba(0,0,0,0)",v=function(x){var E=K;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&f(E,x);var Z=function h(x){return function(){var E,N=p(x);if(E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=p(this).constructor,Reflect.construct(N,arguments,E)):N.apply(this,arguments),N=this,!E||"object"!==C(E)&&"function"!=typeof E){if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return E}}(K);function K(z,G,ie){if(this instanceof K)return(z=Z.call(this,z,G,ie)).drawingContext=z.canvas.getContext("2d"),z._pInst._setProperty("drawingContext",z.drawingContext),z;throw new TypeError("Cannot call a class as a function")}return E=K,(x=[{key:"getFilterGraphicsLayer",value:function(){return this.filterGraphicsLayer||(this.filterGraphicsLayer=new _.default.Graphics(this.width,this.height,w.WEBGL,(this._pInst instanceof _.default.Graphics?this._pInst:this)._pInst)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=w.BLEND,this._setFill(w._DEFAULT_FILL),this._setStroke(w._DEFAULT_STROKE),this.drawingContext.lineCap=w.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(z,G){d(p(K.prototype),"resize",this).call(this,z,G),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var z,G;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof _.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(z=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(z,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(z=this._getFill(),G=(G=this._pInst).color.apply(G,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(G.levels),G=G.toString(),this._setFill(G),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(z),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var z=(z=this._pInst).color.apply(z,arguments);this._setFill(z.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",z.levels)}},{key:"stroke",value:function(){var z=(z=this._pInst).color.apply(z,arguments);this._setStroke(z.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",z.levels)}},{key:"erase",value:function(z,G){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,z=this._pInst.color(255,z).toString(),this.drawingContext.fillStyle=z,this._cachedStrokeStyle=this.drawingContext.strokeStyle,z=this._pInst.color(255,G).toString(),this.drawingContext.strokeStyle=z,G=this._cachedBlendMode,this.blendMode(w.REMOVE),this._cachedBlendMode=G,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(p(K.prototype),"beginClip",this).call(this,z),this._cachedFillStyle=this.drawingContext.fillStyle,z=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=z,this._cachedStrokeStyle=this.drawingContext.strokeStyle,z=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=z,z=this._cachedBlendMode,this.blendMode(w.BLEND),this._cachedBlendMode=z,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),d(p(K.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(z,G,ie,X,ee,Y,ve,xe,ae){z.gifProperties&&z._animateGif(this._pInst);try{_.default.MediaElement&&z instanceof _.default.MediaElement&&z._ensureCanvas();var ge=(ge=this._tint&&z.canvas?this._getTintedImageCanvas(z):ge)||z.canvas||z.elt,ne=1;z.width&&0<z.width&&(ne=ge.width/z.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(ge,ne*G,ne*ie,ne*X,ne*ee,Y,ve,xe,ae),this._isErasing&&this._pInst.erase()}catch(J){if("NS_ERROR_NOT_AVAILABLE"!==J.name)throw J}}},{key:"_getTintedImageCanvas",value:function(z){if(!z.canvas)return z;z.tintCanvas||(z.tintCanvas=document.createElement("canvas")),z.tintCanvas.width!==z.canvas.width&&(z.tintCanvas.width=z.canvas.width),z.tintCanvas.height!==z.canvas.height&&(z.tintCanvas.height=z.canvas.height);var G=z.tintCanvas.getContext("2d");return G.save(),G.clearRect(0,0,z.canvas.width,z.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(G.drawImage(z.canvas,0,0),G.globalCompositeOperation="luminosity",G.drawImage(z.canvas,0,0),G.globalCompositeOperation="color",G.drawImage(z.canvas,0,0),G.globalCompositeOperation="multiply",G.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),G.fillRect(0,0,z.canvas.width,z.canvas.height),G.globalCompositeOperation="destination-in"),G.globalAlpha=this._tint[3]/255,G.drawImage(z.canvas,0,0),G.restore(),z.tintCanvas}},{key:"blendMode",value:function(z){if(z===w.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(z!==w.BLEND&&z!==w.REMOVE&&z!==w.DARKEST&&z!==w.LIGHTEST&&z!==w.DIFFERENCE&&z!==w.MULTIPLY&&z!==w.EXCLUSION&&z!==w.SCREEN&&z!==w.REPLACE&&z!==w.OVERLAY&&z!==w.HARD_LIGHT&&z!==w.SOFT_LIGHT&&z!==w.DODGE&&z!==w.BURN&&z!==w.ADD)throw new Error("Mode ".concat(z," not recognized."));this._cachedBlendMode=z,this.drawingContext.globalCompositeOperation=z}}},{key:"blend",value:function(){for(var z=this.drawingContext.globalCompositeOperation,G=arguments.length,ie=new Array(G),X=0;X<G;X++)ie[X]=arguments[X];var ee=ie[ie.length-1],Y=Array.prototype.slice.call(ie,0,ie.length-1);this.drawingContext.globalCompositeOperation=ee,_.default.prototype.copy.apply(this,Y),this.drawingContext.globalCompositeOperation=z}},{key:"_getPixel",value:function(z,G){return[(z=this.drawingContext.getImageData(z,G,1,1).data)[0],z[1],z[2],z[3]]}},{key:"loadPixels",value:function(){var G,z=this._pixelsState,ie=this.drawingContext.getImageData(0,0,ie=this.width*(G=z._pixelDensity),G*=this.height);z._setProperty("imageData",ie),z._setProperty("pixels",ie.data)}},{key:"set",value:function(z,G,ie){z=Math.floor(z),G=Math.floor(G);var X=this._pixelsState;if(ie instanceof _.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(X._pixelDensity,X._pixelDensity),this.drawingContext.clearRect(z,G,ie.width,ie.height),this.drawingContext.drawImage(ie.canvas,z,G),this.drawingContext.restore();else{var ee=0,Y=0,ve=0,xe=0,ae=4*(G*X._pixelDensity*(this.width*X._pixelDensity)+z*X._pixelDensity);if(X.imageData||X.loadPixels(),"number"==typeof ie)ae<X.pixels.length&&(ve=Y=ee=ie,xe=255);else if(Array.isArray(ie)){if(ie.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");ae<X.pixels.length&&(ee=ie[0],Y=ie[1],ve=ie[2],xe=ie[3])}else ie instanceof _.default.Color&&ae<X.pixels.length&&(ee=ie.levels[0],Y=ie.levels[1],ve=ie.levels[2],xe=ie.levels[3]);for(var ge=0;ge<X._pixelDensity;ge++)for(var ne=0;ne<X._pixelDensity;ne++)X.pixels[ae=4*((G*X._pixelDensity+ne)*this.width*X._pixelDensity+(z*X._pixelDensity+ge))]=ee,X.pixels[ae+1]=Y,X.pixels[ae+2]=ve,X.pixels[ae+3]=xe}}},{key:"updatePixels",value:function(z,G,ie,X){var ee=this._pixelsState,Y=ee._pixelDensity;void 0===z&&void 0===G&&void 0===ie&&void 0===X&&(G=z=0,ie=this.width,X=this.height),z*=Y,G*=Y,ie*=Y,X*=Y,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=ee.imageData),this.drawingContext.putImageData(ee.imageData,z,G,0,0,ie,X)}},{key:"_acuteArcToBezier",value:function(z,G){var Y=G/2,ie=Math.cos(Y),xe=Math.sin(Y),X=1/Math.tan(Y),ee=(Y=z+Y,Math.cos(Y)),ve=(Y=Math.sin(Y),(4-ie)/3);return xe+=(ie-ve)*X,{ax:Math.cos(z).toFixed(7),ay:Math.sin(z).toFixed(7),bx:(ve*ee+xe*Y).toFixed(7),by:(ve*Y-xe*ee).toFixed(7),cx:(ve*ee-xe*Y).toFixed(7),cy:(ve*Y+xe*ee).toFixed(7),dx:Math.cos(z+G).toFixed(7),dy:Math.sin(z+G).toFixed(7)}}},{key:"arc",value:function(z,G,ie,X,ee,Y,ve){var xe,ae=this.drawingContext,ge=ie/2,ne=X/2,J=[];for(z+=ge,G+=ne;1e-5<=Y-ee;)xe=Math.min(Y-ee,w.HALF_PI),J.push(this._acuteArcToBezier(ee,xe)),ee+=xe;return this._doFill&&(this._clipping||ae.beginPath(),J.forEach(function(ce,Te){0===Te&&ae.moveTo(z+ce.ax*ge,G+ce.ay*ne),ae.bezierCurveTo(z+ce.bx*ge,G+ce.by*ne,z+ce.cx*ge,G+ce.cy*ne,z+ce.dx*ge,G+ce.dy*ne)}),ve!==w.PIE&&null!=ve||ae.lineTo(z,G),ae.closePath(),this._clipping||ae.fill()),this._doStroke&&(this._clipping||ae.beginPath(),J.forEach(function(ce,Te){0===Te&&ae.moveTo(z+ce.ax*ge,G+ce.ay*ne),ae.bezierCurveTo(z+ce.bx*ge,G+ce.by*ne,z+ce.cx*ge,G+ce.cy*ne,z+ce.dx*ge,G+ce.dy*ne)}),ve===w.PIE?(ae.lineTo(z,G),ae.closePath()):ve===w.CHORD&&ae.closePath(),this._clipping||ae.stroke()),this}},{key:"ellipse",value:function(xe){var G=this.drawingContext,ie=this._doFill,X=this._doStroke,ee=parseFloat(xe[0]),Y=parseFloat(xe[1]),ve=parseFloat(xe[2]);if(xe=parseFloat(xe[3]),ie&&!X){if(this._getFill()===g)return this}else if(!ie&&X&&this._getStroke()===g)return this;ee+=ve/2,Y+=xe/2,ve/=2,xe/=2,this._clipping||G.beginPath(),G.ellipse(ee,Y,ve,xe,0,0,2*Math.PI),!this._clipping&&ie&&G.fill(),!this._clipping&&X&&G.stroke()}},{key:"line",value:function(z,G,ie,X){var ee=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||ee.beginPath(),ee.moveTo(z,G),ee.lineTo(ie,X),ee.stroke()),this}},{key:"point",value:function(z,G){var ie,X,ee=this.drawingContext;return this._doStroke&&this._getStroke()!==g?(ie=this._getStroke(),X=this._getFill(),this._clipping||this._setFill(ie),this._clipping||ee.beginPath(),ee.arc(z,G,ee.lineWidth/2,0,w.TWO_PI,!1),void(this._clipping||(ee.fill(),this._setFill(X)))):this}},{key:"quad",value:function(z,G,ie,X,ee,Y,ve,xe){var ae=this.drawingContext,ge=this._doFill,ne=this._doStroke;if(ge&&!ne){if(this._getFill()===g)return this}else if(!ge&&ne&&this._getStroke()===g)return this;return this._clipping||ae.beginPath(),ae.moveTo(z,G),ae.lineTo(ie,X),ae.lineTo(ee,Y),ae.lineTo(ve,xe),ae.closePath(),!this._clipping&&ge&&ae.fill(),!this._clipping&&ne&&ae.stroke(),this}},{key:"rect",value:function(ne){var G,ie,X=ne[0],ee=ne[1],Y=ne[2],ve=ne[3],xe=ne[4],ae=ne[5],ge=ne[6],J=(ne=ne[7],this.drawingContext),ce=this._doFill,Te=this._doStroke;if(ce&&!Te){if(this._getFill()===g)return this}else if(!ce&&Te&&this._getStroke()===g)return this;return this._clipping||J.beginPath(),void 0===xe?J.rect(X,ee,Y,ve):(void 0===ae&&(ae=xe),void 0===ge&&(ge=ae),void 0===ne&&(ne=ge),Te=(ce=Math.abs(Y))/2,ie=(G=Math.abs(ve))/2,G<2*(xe=ce<2*xe?Te:xe)&&(xe=ie),G<2*(ae=ce<2*ae?Te:ae)&&(ae=ie),G<2*(ge=ce<2*ge?Te:ge)&&(ge=ie),G<2*(ne=ce<2*ne?Te:ne)&&(ne=ie),this._clipping||J.beginPath(),J.moveTo(X+xe,ee),J.arcTo(X+Y,ee,X+Y,ee+ve,ae),J.arcTo(X+Y,ee+ve,X,ee+ve,ge),J.arcTo(X,ee+ve,X,ee,ne),J.arcTo(X,ee,X+Y,ee,xe),J.closePath()),!this._clipping&&this._doFill&&J.fill(),!this._clipping&&this._doStroke&&J.stroke(),this}},{key:"triangle",value:function(ge){var G=this.drawingContext,ie=this._doFill,X=this._doStroke,ee=ge[0],Y=ge[1],ve=ge[2],xe=ge[3],ae=ge[4];if(ge=ge[5],ie&&!X){if(this._getFill()===g)return this}else if(!ie&&X&&this._getStroke()===g)return this;this._clipping||G.beginPath(),G.moveTo(ee,Y),G.lineTo(ve,xe),G.lineTo(ae,ge),G.closePath(),!this._clipping&&ie&&G.fill(),!this._clipping&&X&&G.stroke()}},{key:"endShape",value:function(z,G,ie,X,ee,Y,ve){if(0!==G.length&&(this._doStroke||this._doFill)){var xe,ae,ge,ne=z===w.CLOSE,J=(ne&&!Y&&G.push(G[0]),G.length);if(ie&&null===ve){if(3<J){var ce=[],Te=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(G[1][0],G[1][1]),ae=1;ae+2<J;ae++)ce[0]=[(xe=G[ae])[0],xe[1]],ce[1]=[xe[0]+(Te*G[ae+1][0]-Te*G[ae-1][0])/6,xe[1]+(Te*G[ae+1][1]-Te*G[ae-1][1])/6],ce[2]=[G[ae+1][0]+(Te*G[ae][0]-Te*G[ae+2][0])/6,G[ae+1][1]+(Te*G[ae][1]-Te*G[ae+2][1])/6],ce[3]=[G[ae+1][0],G[ae+1][1]],this.drawingContext.bezierCurveTo(ce[1][0],ce[1][1],ce[2][0],ce[2][1],ce[3][0],ce[3][1]);ne&&this.drawingContext.lineTo(G[ae+1][0],G[ae+1][1]),this._doFillStrokeClose(ne)}}else if(X&&null===ve){for(this._clipping||this.drawingContext.beginPath(),ae=0;ae<J;ae++)G[ae].isVert?G[ae].moveTo?this.drawingContext.moveTo(G[ae][0],G[ae][1]):this.drawingContext.lineTo(G[ae][0],G[ae][1]):this.drawingContext.bezierCurveTo(G[ae][0],G[ae][1],G[ae][2],G[ae][3],G[ae][4],G[ae][5]);this._doFillStrokeClose(ne)}else if(ee&&null===ve){for(this._clipping||this.drawingContext.beginPath(),ae=0;ae<J;ae++)G[ae].isVert?G[ae].moveTo?this.drawingContext.moveTo(G[ae][0],G[ae][1]):this.drawingContext.lineTo(G[ae][0],G[ae][1]):this.drawingContext.quadraticCurveTo(G[ae][0],G[ae][1],G[ae][2],G[ae][3]);this._doFillStrokeClose(ne)}else if(ve===w.POINTS)for(ae=0;ae<J;ae++)xe=G[ae],this._doStroke&&this._pInst.stroke(xe[6]),this._pInst.point(xe[0],xe[1]);else if(ve===w.LINES)for(ae=0;ae+1<J;ae+=2)xe=G[ae],this._doStroke&&this._pInst.stroke(G[ae+1][6]),this._pInst.line(xe[0],xe[1],G[ae+1][0],G[ae+1][1]);else if(ve===w.TRIANGLES)for(ae=0;ae+2<J;ae+=3)xe=G[ae],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(xe[0],xe[1]),this.drawingContext.lineTo(G[ae+1][0],G[ae+1][1]),this.drawingContext.lineTo(G[ae+2][0],G[ae+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(G[ae+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(G[ae+2][6]),this.drawingContext.stroke());else if(ve===w.TRIANGLE_STRIP)for(ae=0;ae+1<J;ae++)xe=G[ae],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(G[ae+1][0],G[ae+1][1]),this.drawingContext.lineTo(xe[0],xe[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(G[ae+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(G[ae+1][5]),ae+2<J&&(this.drawingContext.lineTo(G[ae+2][0],G[ae+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(G[ae+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(G[ae+2][5])),this._doFillStrokeClose(ne);else if(ve===w.TRIANGLE_FAN){if(2<J){for(this._clipping||this.drawingContext.beginPath(),ae=2;ae<J;ae++)xe=G[ae],this.drawingContext.moveTo(G[0][0],G[0][1]),this.drawingContext.lineTo(G[ae-1][0],G[ae-1][1]),this.drawingContext.lineTo(xe[0],xe[1]),this.drawingContext.lineTo(G[0][0],G[0][1]),ae<J-1&&(this._doFill&&xe[5]!==G[ae+1][5]||this._doStroke&&xe[6]!==G[ae+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(xe[5]),this.drawingContext.fill(),this._pInst.fill(G[ae+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(xe[6]),this.drawingContext.stroke(),this._pInst.stroke(G[ae+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(ne)}}else if(ve===w.QUADS)for(ae=0;ae+3<J;ae+=4){for(xe=G[ae],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(xe[0],xe[1]),ge=1;ge<4;ge++)this.drawingContext.lineTo(G[ae+ge][0],G[ae+ge][1]);this.drawingContext.lineTo(xe[0],xe[1]),!this._clipping&&this._doFill&&this._pInst.fill(G[ae+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(G[ae+3][6]),this._doFillStrokeClose(ne)}else if(ve===w.QUAD_STRIP){if(3<J)for(ae=0;ae+1<J;ae+=2)xe=G[ae],this._clipping||this.drawingContext.beginPath(),ae+3<J?(this.drawingContext.moveTo(G[ae+2][0],G[ae+2][1]),this.drawingContext.lineTo(xe[0],xe[1]),this.drawingContext.lineTo(G[ae+1][0],G[ae+1][1]),this.drawingContext.lineTo(G[ae+3][0],G[ae+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(G[ae+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(G[ae+3][6])):(this.drawingContext.moveTo(xe[0],xe[1]),this.drawingContext.lineTo(G[ae+1][0],G[ae+1][1])),this._doFillStrokeClose(ne)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(G[0][0],G[0][1]),ae=1;ae<J;ae++)(xe=G[ae]).isVert&&(xe.moveTo?(ne&&this.drawingContext.closePath(),this.drawingContext.moveTo(xe[0],xe[1])):this.drawingContext.lineTo(xe[0],xe[1]));this._doFillStrokeClose(ne)}Y=ee=X=ie=!1,ne&&G.pop()}return this}},{key:"strokeCap",value:function(z){return z!==w.ROUND&&z!==w.SQUARE&&z!==w.PROJECT||(this.drawingContext.lineCap=z),this}},{key:"strokeJoin",value:function(z){return z!==w.ROUND&&z!==w.BEVEL&&z!==w.MITER||(this.drawingContext.lineJoin=z),this}},{key:"strokeWeight",value:function(z){return this.drawingContext.lineWidth=void 0===z||0===z?1e-4:z,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(z){z!==this._cachedFillStyle&&(this.drawingContext.fillStyle=z,this._cachedFillStyle=z)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(z){z!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=z,this._cachedStrokeStyle=z)}},{key:"bezier",value:function(z,G,ie,X,ee,Y,ve,xe){return this._pInst.beginShape(),this._pInst.vertex(z,G),this._pInst.bezierVertex(ie,X,ee,Y,ve,xe),this._pInst.endShape(),this}},{key:"curve",value:function(z,G,ie,X,ee,Y,ve,xe){return this._pInst.beginShape(),this._pInst.curveVertex(z,G),this._pInst.curveVertex(ie,X),this._pInst.curveVertex(ee,Y),this._pInst.curveVertex(ve,xe),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(z){z&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(z,G,ie,X,ee,Y){this.drawingContext.transform(z,G,ie,X,ee,Y)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(z){this.drawingContext.rotate(z)}},{key:"scale",value:function(z,G){return this.drawingContext.scale(z,G),this}},{key:"translate",value:function(z,G){return z instanceof _.default.Vector&&(G=z.y,z=z.x),this.drawingContext.translate(z,G),this}},{key:"_renderText",value:function(z,G,ie,X,ee,Y){if(!(X<Y||ee<=X))return z.push(),this._isOpenType()?this._textFont._renderPath(G,ie,X,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(G,ie,X),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(w._DEFAULT_TEXT_FILL),this.drawingContext.fillText(G,ie,X))),z.pop(),z}},{key:"textWidth",value:function(z){return this._isOpenType()?this._textFont._textWidth(z,this._textSize):this.drawingContext.measureText(z).width}},{key:"_applyTextProperties",value:function(){var z=this._pInst,G=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),G=this._textFont,this._isOpenType()&&(G=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),G||"sans-serif");return/\s/.exec(G)&&(G='"'.concat(G,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(G),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===w.CENTER?w._CTX_MIDDLE:this._textBaseline,z}},{key:"push",value:function(){return this.drawingContext.save(),d(p(K.prototype),"push",this).call(this)}},{key:"pop",value:function(z){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d(p(K.prototype),"pop",this).call(this,z)}}])&&D(E.prototype,x),K}(_.default.Renderer);v.prototype.text=function(x,E,N,G,K){var z;return void 0!==G&&this.drawingContext.textBaseline===w.BASELINE&&(z=!0,this.drawingContext.textBaseline=w.TOP),G=_.default.Renderer.prototype.text.apply(this,arguments),z&&(this.drawingContext.textBaseline=w.BASELINE),G},_.default.Renderer2D=v,q.default=S=_.default.Renderer2D},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator");var M=(a=a("./main"))&&a.__esModule?a:{default:a};function C(){return{}}M.default.prototype._promisePreloads=[];var _=!(M.default.prototype.registerPromisePreload=function(w){M.default.prototype._promisePreloads.push(w)});M.default.prototype._setupPromisePreloads=function(){var w=!0,I=!1,D=void 0;try{for(var d,f=this._promisePreloads[Symbol.iterator]();!(w=(d=f.next()).done);w=!0){var h=d.value,p=this,g=h.method,v=h.addCallbacks,S=h.legacyPreloadSetup,x=h.target||this,E=x[g].bind(x);if(x===M.default.prototype){if(_)continue;p=null,E=x[g]}x[g]=this._wrapPromisePreload(p,E,v),S&&(x[S.method]=this._legacyPreloadGenerator(p,S,x[g]))}}catch(N){I=!0,D=N}finally{try{w||null==f.return||f.return()}finally{if(I)throw D}}_=!0},M.default.prototype._wrapPromisePreload=function(w,I,D){var d=function(){for(var f=this,h=(this._incrementPreload(),null),p=null,g=arguments.length,v=new Array(g),S=0;S<g;S++)v[S]=arguments[S];if(D)for(var x=v.length-1;0<=x&&!p&&"function"==typeof v[x];x--)p=h,h=v.pop();var E=Promise.resolve(I.apply(this,v));return h&&E.then(h),p&&E.catch(p),E.then(function(){return f._decrementPreload()}),E};return w?d.bind(w):d},M.default.prototype._legacyPreloadGenerator=function(w,f,D){var d=f.createBaseObject||C;return f=function(){var h=this;this._incrementPreload();for(var p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];var S=d.apply(this,g);return D.apply(this,g).then(function(x){Object.assign(S,x),h._decrementPreload()}),S},w?f.bind(w):f}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(a,_e,q){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(d=a("./main"))&&d.__esModule?d:{default:d},_=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==I(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var S;Object.prototype.hasOwnProperty.call(f,p)&&((S=v?Object.getOwnPropertyDescriptor(f,p):null)&&(S.get||S.set)?Object.defineProperty(g,p,S):g[p]=f[p])}return g.default=f,h&&h.set(f,g),g}(a("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("./p5.Graphics"),a("./p5.Renderer2D"),a("../webgl/p5.RendererGL");var D="defaultCanvas0",d=(C.default.prototype.createCanvas=function(f,h,p,g){var v,S,x;if(C.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(p=_.P2D,g=arguments[2]):v=p||_.P2D,g)(x=document.getElementById(D))&&x.parentNode.removeChild(x),x=g,this._defaultGraphicsCreated=!1;else{if(v===_.WEBGL)(x=document.getElementById(D))&&(x.parentNode.removeChild(x),S=this._renderer,this._elements=this._elements.filter(function(N){return N!==S})),(x=document.createElement("canvas")).id=D,x.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)x=this.canvas;else{x=g||document.createElement("canvas");for(var E=0;document.getElementById("defaultCanvas".concat(E));)E++;D="defaultCanvas".concat(E),x.id=D,x.classList.add("p5Canvas")}this._setupDone||(x.dataset.hidden=!0,x.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(p=document.createElement("main"),document.body.appendChild(p)),document.getElementsByTagName("main")[0])).appendChild(x)}return v===_.WEBGL?(this._setProperty("_renderer",new C.default.RendererGL(x,this,!0)),this._elements.push(this._renderer),f=(g=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new C.default.Renderer2D(x,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,h),this._renderer._applyDefaults(),this._renderer},C.default.prototype.resizeCanvas=function(f,h,p){if(C.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,v,S,x={};for(g in this.drawingContext){var E=this.drawingContext[g];"object"!==I(E)&&"function"!=typeof E&&(x[g]=E)}for(S in this._renderer instanceof C.default.RendererGL&&(f=(v=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=v.adjustedHeight),this.width=f,this.height=h,this._renderer.resize(f,h),x)try{this.drawingContext[S]=x[S]}catch{}p||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},C.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},C.default.prototype.createGraphics=function(f,h){for(var p=arguments.length,g=new Array(2<p?p-2:0),v=2;v<p;v++)g[v-2]=arguments[v];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=_.P2D),C.default._validateParameters("createGraphics",arguments),new C.default.Graphics(f,h,g[0],this,g[1])},C.default.prototype.createFramebuffer=function(f){return new C.default.Framebuffer(this,f)},C.default.prototype.clearDepth=function(f){this._assert3d("clearDepth"),this._renderer.clearDepth(f)},C.default.prototype.blendMode=function(f){C.default._validateParameters("blendMode",arguments),f===_.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=_.BLEND),this._renderer.blendMode(f)},C.default);q.default=d},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(a,_e,q){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.slice"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=d(a("../main")),w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var g,v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=S?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(v,g,x):v[g]=h[g])}return v.default=h,p&&p.set(h,v),v}(a("../constants")),I=d(a("../helpers"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){return h&&h.__esModule?h:{default:h}}a("../friendly_errors/fes_core"),a("../friendly_errors/file_errors"),a("../friendly_errors/validate_params"),_.default.prototype._normalizeArcAngles=function(h,p,g,v,S){var x;return h-=w.TWO_PI*Math.floor(h/w.TWO_PI),p-=w.TWO_PI*Math.floor(p/w.TWO_PI),x=Math.min(Math.abs(h-p),w.TWO_PI-Math.abs(h-p)),S&&(h=h<=w.HALF_PI?Math.atan(g/v*Math.tan(h)):h>w.HALF_PI&&h<=3*w.HALF_PI?Math.atan(g/v*Math.tan(h))+w.PI:Math.atan(g/v*Math.tan(h))+w.TWO_PI,p=p<=w.HALF_PI?Math.atan(g/v*Math.tan(p)):p>w.HALF_PI&&p<=3*w.HALF_PI?Math.atan(g/v*Math.tan(p))+w.PI:Math.atan(g/v*Math.tan(p))+w.TWO_PI),p<h&&(p+=w.TWO_PI),{start:h,stop:p,correspondToSamePoint:x<1e-5}},_.default.prototype.arc=function(h,p,g,v,S,x,E,N){return _.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&S!==x&&(S=this._toRadians(S),x=this._toRadians(x),g=Math.abs(g),v=Math.abs(v),h=I.default.modeAdjust(h,p,g,v,this._renderer._ellipseMode),(p=this._normalizeArcAngles(S,x,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,N]):(this._renderer.arc(h.x,h.y,h.w,h.h,p.start,p.stop,E,N),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,p.start,p.stop,E]))),this},_.default.prototype.ellipse=function(h,p,g,v,S){return _.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},_.default.prototype.circle=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];_.default._validateParameters("circle",p);var v=p.slice(0,2);return v.push(p[2],p[2]),this._renderEllipse.apply(this,function f(h){return function(p){if(Array.isArray(p)){for(var g=0,v=new Array(p.length);g<p.length;g++)v[g]=p[g];return v}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(v))},_.default.prototype._renderEllipse=function(h,p,g,v,S){return(this._renderer._doStroke||this._renderer._doFill)&&(g<0&&(g=Math.abs(g)),void 0===v?v=g:v<0&&(v=Math.abs(v)),h=I.default.modeAdjust(h,p,g,v,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,S]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},_.default.prototype.line=function(){for(var h,p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return _.default._validateParameters("line",g),this._renderer._doStroke&&(h=this._renderer).line.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},_.default.prototype.point=function(){for(var h,p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return _.default._validateParameters("point",g),this._renderer._doStroke&&(1===g.length&&g[0]instanceof _.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((h=this._renderer).point.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},_.default.prototype.quad=function(){for(var h,p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return _.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((h=this._renderer).quad.apply(h,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},_.default.prototype.rect=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return _.default._validateParameters("rect",p),this._renderRect.apply(this,p)},_.default.prototype.square=function(h,p,g,v,S,x,E){return _.default._validateParameters("square",arguments),this._renderRect.call(this,h,p,g,g,v,S,x,E)},_.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var h=I.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),p=[h.x,h.y,h.w,h.h],g=4;g<arguments.length;g++)p[g]=arguments[g];this._renderer.rect(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},_.default.prototype.triangle=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return _.default._validateParameters("triangle",p),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",p),this},q.default=a=_.default},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}_.default.prototype.ellipseMode=function(d){return _.default._validateParameters("ellipseMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._ellipseMode=d),this},_.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},_.default.prototype.rectMode=function(d){return _.default._validateParameters("rectMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._rectMode=d),this},_.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},_.default.prototype.strokeCap=function(d){return _.default._validateParameters("strokeCap",arguments),d!==w.ROUND&&d!==w.SQUARE&&d!==w.PROJECT||this._renderer.strokeCap(d),this},_.default.prototype.strokeJoin=function(d){return _.default._validateParameters("strokeJoin",arguments),d!==w.ROUND&&d!==w.BEVEL&&d!==w.MITER||this._renderer.strokeJoin(d),this},_.default.prototype.strokeWeight=function(d){return _.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(d),this};var D=_.default;q.default=D},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(C=a("../main"))&&C.__esModule?C:{default:C};a("../friendly_errors/fes_core"),a("../friendly_errors/file_errors"),a("../friendly_errors/validate_params"),M.default.prototype.bezier=function(){for(var _,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("bezier",I),(this._renderer._doStroke||this._renderer._doFill)&&(_=this._renderer).bezier.apply(_,I),this},M.default.prototype.bezierDetail=function(_){return M.default._validateParameters("bezierDetail",arguments),this._bezierDetail=_,this},M.default.prototype.bezierPoint=function(_,w,I,D,d){M.default._validateParameters("bezierPoint",arguments);var f=1-d;return Math.pow(f,3)*_+3*Math.pow(f,2)*d*w+3*f*Math.pow(d,2)*I+Math.pow(d,3)*D},M.default.prototype.bezierTangent=function(_,w,I,D,d){M.default._validateParameters("bezierTangent",arguments);var f=1-d;return 3*D*Math.pow(d,2)-3*I*Math.pow(d,2)+6*I*f*d-6*w*f*d+3*w*Math.pow(f,2)-3*_*Math.pow(f,2)},M.default.prototype.curve=function(){for(var _,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("curve",I),this._renderer._doStroke&&(_=this._renderer).curve.apply(_,I),this},M.default.prototype.curveDetail=function(_){return M.default._validateParameters("curveDetail",arguments),this._curveDetail=_<3?3:_,this},M.default.prototype.curveTightness=function(_){return M.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=_,this},M.default.prototype.curvePoint=function(_,w,I,D,d){M.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,h=d*d*d,p=d*d;return _*((f-1)/2*h+(1-f)*p+(f-1)/2*d)+w*((f+3)/2*h+(-5-f)/2*p+1)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2*d)+D*((1-f)/2*h+(f-1)/2*p)},M.default.prototype.curveTangent=function(_,w,I,D,p){M.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,h=p*p*3;return _*((f-1)/2*h+(1-f)*(p*=2)+(f-1)/2)+w*((f+3)/2*h+(-5-f)/2*p)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2)+D*((1-f)/2*h+(f-1)/2*p)};var C=M.default;q.default=C},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(a,_e,q){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(N){return M(N)}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":M(N)})(E)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.slice"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(x=a("../main"))&&x.__esModule?x:{default:x},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var N=I();if(N&&N.has(E))return N.get(E);var Z,K={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in E){var G;Object.prototype.hasOwnProperty.call(E,Z)&&((G=z?Object.getOwnPropertyDescriptor(E,Z):null)&&(G.get||G.set)?Object.defineProperty(K,Z,G):K[Z]=E[Z])}return K.default=E,N&&N.set(E,K),K}(a("../constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}var D=null,d=[],f=[],h=!1,p=!1,g=!1,v=!1,S=!0,x=(_.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(f=[],v=!0),this},_.default.prototype.beginShape=function(E){var N;return _.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(N=this._renderer).beginShape.apply(N,arguments):(D=E===w.POINTS||E===w.LINES||E===w.TRIANGLES||E===w.TRIANGLE_FAN||E===w.TRIANGLE_STRIP||E===w.QUADS||E===w.QUAD_STRIP?E:null,d=[],f=[]),this},_.default.prototype.bezierVertex=function(){for(var E,N=arguments.length,Z=new Array(N),K=0;K<N;K++)Z[K]=arguments[K];if(_.default._validateParameters("bezierVertex",Z),this._renderer.isP3D)(E=this._renderer).bezierVertex.apply(E,Z);else if(0===d.length)_.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var z=[],G=0;G<Z.length;G++)z[G]=Z[G];z.isVert=!1,(v?f:d).push(z)}return this},_.default.prototype.curveVertex=function(){for(var E,N=arguments.length,Z=new Array(N),K=0;K<N;K++)Z[K]=arguments[K];return _.default._validateParameters("curveVertex",Z),this._renderer.isP3D?(E=this._renderer).curveVertex.apply(E,Z):(p=!0,this.vertex(Z[0],Z[1])),this},_.default.prototype.endContour=function(){if(!this._renderer.isP3D){var E=f[0].slice();E.isVert=f[0].isVert,E.moveTo=!1,f.push(E),S&&(d.push(d[0]),S=!1);for(var N=0;N<f.length;N++)d.push(f[N])}return this},_.default.prototype.endShape=function(E){var N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(_.default._validateParameters("endShape",arguments),N<1&&(console.log("\u{1f338} p5.js says: You can not have less than one instance"),N=1),this._renderer.isP3D)this._renderer.endShape(E,p,h,g,v,D,N);else{if(1!==N&&console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode"),0===d.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(N=E===w.CLOSE)&&!v&&d.push(d[0]),this._renderer.endShape(E,d,p,h,g,v,D),S=!(v=g=h=p=!1),N&&d.pop()}return this},_.default.prototype.quadraticVertex=function(){for(var E,N=arguments.length,Z=new Array(N),K=0;K<N;K++)Z[K]=arguments[K];if(_.default._validateParameters("quadraticVertex",Z),this._renderer.isP3D)(E=this._renderer).quadraticVertex.apply(E,Z);else{if(this._contourInited)return(E={}).x=Z[0],E.y=Z[1],E.x3=Z[2],E.y3=Z[3],E.type=w.QUADRATIC,this._contourVertices.push(E),this;if(0<d.length){g=!0;for(var z=[],G=0;G<Z.length;G++)z[G]=Z[G];z.isVert=!1,(v?f:d).push(z)}else _.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},_.default.prototype.vertex=function(E,N,Z,K,z){var G;return this._renderer.isP3D?(G=this._renderer).vertex.apply(G,arguments):((G=[]).isVert=!0,G[0]=E,G[1]=N,G[2]=0,G[3]=0,G[4]=0,G[5]=this._renderer._getFill(),G[6]=this._renderer._getStroke(),Z&&(G.moveTo=Z),(v?(0===f.length&&(G.moveTo=!0),f):d).push(G)),this},_.default.prototype.normal=function(E,N,Z){var K;return this._assert3d("normal"),_.default._validateParameters("normal",arguments),(K=this._renderer).normal.apply(K,arguments),this},_.default);q.default=x},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(a,_e,q){},{}],295:[function(a,_e,q){"use strict";a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.assign"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("./main"))&&a.__esModule?a:{default:a}).default.prototype.noLoop=function(){this._loop=!1},a.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},a.default.prototype.isLooping=function(){return this._loop},a.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},a.default.prototype.pop=function(){var M=this._styles.pop();M?(this._renderer.pop(M.renderer),Object.assign(this,M.props)):console.warn("pop() was called without matching push()")},a.default.prototype.redraw=function(M){if(!this._inUserDraw&&this._setupDone){var C=parseInt(M),_=((isNaN(C)||C<1)&&(C=1),this._isGlobal?window:this);if("function"==typeof _.draw){void 0===_.setup&&_.scale(_._pixelDensity,_._pixelDensity);for(var w=0;w<C;w++){_.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),_._renderer.isP3D&&_._renderer._update(),_._setProperty("frameCount",_.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{_.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},q.default=a=a.default},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("./main"))&&a.__esModule?a:{default:a};M.default.prototype.applyMatrix=function(){var _=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||_?(_=this._renderer).applyMatrix.apply(_,function C(_){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(_)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(_=this._renderer).applyMatrix.apply(_,arguments),this},M.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},M.default.prototype.rotate=function(_,w){return M.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(_),w),this},M.default.prototype.rotateX=function(_){return this._assert3d("rotateX"),M.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(_)),this},M.default.prototype.rotateY=function(_){return this._assert3d("rotateY"),M.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(_)),this},M.default.prototype.rotateZ=function(_){return this._assert3d("rotateZ"),M.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(_)),this},M.default.prototype.scale=function(_,w,I){var D;return M.default._validateParameters("scale",arguments),_ instanceof M.default.Vector?(_=(D=_).x,w=D.y,I=D.z):Array.isArray(_)&&(_=(D=_)[0],w=D[1],I=D[2]||1),isNaN(w)?w=I=_:isNaN(I)&&(I=1),this._renderer.scale(_,w,I),this},M.default.prototype.shearX=function(_){return M.default._validateParameters("shearX",arguments),_=this._toRadians(_),this._renderer.applyMatrix(1,0,Math.tan(_),1,0,0),this},M.default.prototype.shearY=function(_){return M.default._validateParameters("shearY",arguments),_=this._toRadians(_),this._renderer.applyMatrix(1,Math.tan(_),0,1,0,0),this},M.default.prototype.translate=function(_,w,I){return M.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(_,w,I):this._renderer.translate(_,w),this},q.default=a=M.default},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(a,_e,q){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.ends-with"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator");var C=(a=a("../core/main"))&&a.__esModule?a:{default:a};function _(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}C.default.prototype.storeItem=function(I,D){"string"!=typeof I&&console.log("The argument that you passed to storeItem() - ".concat(I," is not a string.")),I.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(I," must not end with 'p5TypeID'.")),void 0===D&&console.log("You cannot store undefined variables using storeItem().");var d=w(D);switch(d){case"number":case"boolean":D=D.toString();break;case"object":D instanceof C.default.Color?d="p5.Color":D instanceof C.default.Vector&&(d="p5.Vector",D=[D.x,D.y,D.z]),D=JSON.stringify(D)}localStorage.setItem(I,D),I="".concat(I,"p5TypeID"),localStorage.setItem(I,d)},C.default.prototype.getItem=function(I){var D=localStorage.getItem(I),d=localStorage.getItem("".concat(I,"p5TypeID"));if(void 0===d)console.log("Unable to determine type of item stored under ".concat(I,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==D)switch(d){case"number":D=parseFloat(D);break;case"boolean":D="true"===D;break;case"object":D=JSON.parse(D);break;case"p5.Color":D=JSON.parse(D),D=this.color.apply(this,_(D.levels));break;case"p5.Vector":D=JSON.parse(D),D=this.createVector.apply(this,_(D))}return D},C.default.prototype.clearStorage=function(){var I=this;Object.keys(localStorage).forEach(function(D){D.endsWith("p5TypeID")&&I.removeItem(D.replace("p5TypeID",""))})},C.default.prototype.removeItem=function(I){"string"!=typeof I&&console.log("The argument that you passed to removeItem() - ".concat(I," is not a string.")),localStorage.removeItem(I),localStorage.removeItem("".concat(I,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(a,_e,q){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function C(g){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(v){return M(v)}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":M(v)})(g)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.object.keys"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(a=a("../core/main"))&&a.__esModule?a:{default:a};function w(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),v&&I(g,v)}function I(g,v){return(I=Object.setPrototypeOf||function(S,x){return S.__proto__=x,S})(g,v)}function D(g){return function(){var v,S=d(g);if(v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=d(this).constructor,Reflect.construct(S,arguments,v)):S.apply(this,arguments),S=this,!v||"object"!==C(v)&&"function"!=typeof v){if(void 0!==S)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return v}}function d(g){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(g)}function f(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function h(g,v){for(var S=0;S<v.length;S++){var x=v[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}function p(g,v,S){v&&h(g.prototype,v),S&&h(g,S)}_.default.prototype.createStringDict=function(g,v){return _.default._validateParameters("createStringDict",arguments),new _.default.StringDict(g,v)},_.default.prototype.createNumberDict=function(g,v){return _.default._validateParameters("createNumberDict",arguments),new _.default.NumberDict(g,v)},_.default.TypedDict=function(){function g(v,S){return f(this,g),v instanceof Object?this.data=v:(this.data={},this.data[v]=S),this}return p(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(v){return this.data.hasOwnProperty(v)}},{key:"get",value:function(v){if(this.data.hasOwnProperty(v))return this.data[v];console.log("".concat(v," does not exist in this Dictionary"))}},{key:"set",value:function(v,S){this._validate(S)?this.data[v]=S:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(v){for(var S in v)this.set(S,v[S])}},{key:"create",value:function(v,S){v instanceof Object&&void 0===S?this._addObj(v):void 0!==v?this.set(v,S):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(v){if(!this.data.hasOwnProperty(v))throw new Error("".concat(v," does not exist in this Dictionary"));delete this.data[v]}},{key:"print",value:function(){for(var v in this.data)console.log("key:".concat(v," value:").concat(this.data[v]))}},{key:"saveTable",value:function(v){var S,x="";for(S in this.data)x+="".concat(S,",").concat(this.data[S],"\n");var E=new Blob([x],{type:"text/csv"});_.default.prototype.downloadFile(E,v||"mycsv","csv")}},{key:"saveJSON",value:function(v,S){_.default.prototype.saveJSON(this.data,v,S)}},{key:"_validate",value:function(v){return!0}}]),g}(),_.default.StringDict=function(){w(v,_.default.TypedDict);var g=D(v);function v(){f(this,v);for(var S=arguments.length,x=new Array(S),E=0;E<S;E++)x[E]=arguments[E];return g.call.apply(g,[this].concat(x))}return p(v,[{key:"_validate",value:function(S){return"string"==typeof S}}]),v}(),_.default.NumberDict=function(){w(v,_.default.TypedDict);var g=D(v);function v(){f(this,v);for(var S=arguments.length,x=new Array(S),E=0;E<S;E++)x[E]=arguments[E];return g.call.apply(g,[this].concat(x))}return p(v,[{key:"_validate",value:function(S){return"number"==typeof S}},{key:"add",value:function(S,x){this.data.hasOwnProperty(S)?this.data[S]+=x:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"sub",value:function(S,x){this.add(S,-x)}},{key:"mult",value:function(S,x){this.data.hasOwnProperty(S)?this.data[S]*=x:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"div",value:function(S,x){this.data.hasOwnProperty(S)?this.data[S]/=x:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"_valueTest",value:function(S){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var x,E=this.data[Object.keys(this.data)[0]];for(x in this.data)this.data[x]*S<E*S&&(E=this.data[x]);return E}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(S){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var x=Object.keys(this.data)[0],E=1;E<Object.keys(this.data).length;E++)Object.keys(this.data)[E]*S<x*S&&(x=Object.keys(this.data)[E]);return x}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),v}(),q.default=a=_.default.TypedDict},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(a,_e,q){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(a=a("../core/main"))&&a.__esModule?a:{default:a};function _(x,E){for(var N=0;N<E.length;N++){var Z=E[N];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(x,Z.key,Z)}}function w(x,E,N){E&&_(x.prototype,E),N&&_(x,N)}function I(x,E){return(I=Object.setPrototypeOf||function(N,Z){return N.__proto__=Z,N})(x,E)}function d(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function f(x){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}function h(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function p(x){return(p="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}function g(x,E,N){return(E._userNode||document.body).appendChild(x),N=new(N?C.default.MediaElement:C.default.Element)(x,E),E._elements.push(N),N}function v(x,G,N,Z){var K=document.createElement(G),z=("string"==typeof(N=N||"")&&(N=[N]),!0),ie=void(G=!1);try{for(var X,ee=N[Symbol.iterator]();!(z=(X=ee.next()).done);z=!0){var Y=X.value,ve=document.createElement("source");ve.setAttribute("src",Y),K.appendChild(ve)}}catch(ae){G=!0,ie=ae}finally{try{z||null==ee.return||ee.return()}finally{if(G)throw ie}}"function"==typeof Z&&K.addEventListener("canplaythrough",function ae(){Z(),K.removeEventListener("canplaythrough",ae)});var xe=g(K,x,!0);return xe.loadedmetadata=!1,K.addEventListener("loadedmetadata",function(){xe.width=K.videoWidth,xe.height=K.videoHeight,0===xe.elt.width&&(xe.elt.width=K.videoWidth),0===xe.elt.height&&(xe.elt.height=K.videoHeight),xe.presetPlaybackRate&&(xe.elt.playbackRate=xe.presetPlaybackRate,delete xe.presetPlaybackRate),xe.loadedmetadata=!0}),xe}function S(x,E,N,Z){h(this,S),this.callback=x,this.time=E,this.id=N,this.val=Z}C.default.prototype.select=function(x,E){return C.default._validateParameters("select",arguments),(E=this._getContainer(E).querySelector(x))?this._wrapElement(E):null},C.default.prototype.selectAll=function(x,E){C.default._validateParameters("selectAll",arguments);var N=[],Z=this._getContainer(E).querySelectorAll(x);if(Z)for(var K=0;K<Z.length;K++){var z=this._wrapElement(Z[K]);N.push(z)}return N},C.default.prototype._getContainer=function(x){var E=document;return"string"==typeof x?E=document.querySelector(x)||document:x instanceof C.default.Element?E=x.elt:x instanceof HTMLElement&&(E=x),E},C.default.prototype._wrapElement=function(x){var E,N=Array.prototype.slice.call(x.children);return"INPUT"===x.tagName&&"checkbox"===x.type?((E=new C.default.Element(x,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},E):"VIDEO"===x.tagName||"AUDIO"===x.tagName?new C.default.MediaElement(x,this):"SELECT"===x.tagName?this.createSelect(new C.default.Element(x,this)):0<N.length&&N.every(function(Z){return"INPUT"===Z.tagName||"LABEL"===Z.tagName})&&("DIV"===x.tagName||"SPAN"===x.tagName)?this.createRadio(new C.default.Element(x,this)):new C.default.Element(x,this)},C.default.prototype.removeElements=function(x){C.default._validateParameters("removeElements",arguments),this._elements.filter(function(E){return!(E.elt instanceof HTMLCanvasElement)}).map(function(E){return E.remove()})},C.default.Element.prototype.changed=function(x){return C.default.Element._adjustListener("change",x,this),this},C.default.Element.prototype.input=function(x){return C.default.Element._adjustListener("input",x,this),this},C.default.prototype.createDiv=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",E=document.createElement("div");return E.innerHTML=x,g(E,this)},C.default.prototype.createP=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",E=document.createElement("p");return E.innerHTML=x,g(E,this)},C.default.prototype.createSpan=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",E=document.createElement("span");return E.innerHTML=x,g(E,this)},C.default.prototype.createImg=function(){C.default._validateParameters("createImg",arguments);var x,E=document.createElement("img"),N=arguments;return 1<N.length&&"string"==typeof N[1]&&(E.alt=N[1]),2<N.length&&"string"==typeof N[2]&&(E.crossOrigin=N[2]),E.src=N[0],x=g(E,this),E.addEventListener("load",function(){x.width=E.offsetWidth||E.width,x.height=E.offsetHeight||E.height;var Z=N[N.length-1];"function"==typeof Z&&Z(x)}),x},C.default.prototype.createA=function(x,E,N){C.default._validateParameters("createA",arguments);var Z=document.createElement("a");return Z.href=x,Z.innerHTML=E,N&&(Z.target=N),g(Z,this)},C.default.prototype.createSlider=function(x,E,N,Z){C.default._validateParameters("createSlider",arguments);var K=document.createElement("input");return K.type="range",K.min=x,K.max=E,0===Z?K.step=1e-18:Z&&(K.step=Z),"number"==typeof N&&(K.value=N),g(K,this)},C.default.prototype.createButton=function(x,E){C.default._validateParameters("createButton",arguments);var N=document.createElement("button");return N.innerHTML=x,E&&(N.value=E),g(N,this)},C.default.prototype.createCheckbox=function(){for(var x=arguments.length,E=new Array(x),N=0;N<x;N++)E[N]=arguments[N];C.default._validateParameters("createCheckbox",E);var Z=document.createElement("div"),K=document.createElement("input"),z=(K.type="checkbox",document.createElement("label")),G=(z.appendChild(K),Z.appendChild(z),g(Z,this));return G.checked=function(){var ie=G.elt.firstElementChild.getElementsByTagName("input")[0];if(ie){if(0===arguments.length)return ie.checked;ie.checked=!(arguments.length<=0||!arguments[0])}return G},this.value=function(ie){return G.value=ie,this},E[0]&&(G.value(E[0]),(Z=document.createElement("span")).innerHTML=E[0],z.appendChild(Z)),E[1]&&(K.checked=!0),G},C.default.prototype.createSelect=function(){for(var x,E=arguments.length,N=new Array(E),Z=0;Z<E;Z++)N[Z]=arguments[Z];C.default._validateParameters("createSelect",N);var K,z=N[0];return z instanceof C.default.Element&&z.elt instanceof HTMLSelectElement?this.elt=(x=z).elt:z instanceof HTMLSelectElement?(x=g(z,this),this.elt=z):(K=document.createElement("select"),z&&"boolean"==typeof z&&K.setAttribute("multiple","true"),x=g(K,this),this.elt=K),x.option=function(G,ie){var X;if(void 0!==G){for(var ee,Y=0;Y<this.elt.length;Y+=1)if(this.elt[Y].textContent===G){X=Y;break}void 0!==X?!1===ie?this.elt.remove(X):this.elt[X].value=ie:((ee=document.createElement("option")).textContent=G,ee.value=void 0===ie?G:ie,this.elt.appendChild(ee),this._pInst._elements.push(ee))}},x.selected=function(G){if(void 0!==G){for(var ie=0;ie<this.elt.length;ie+=1)this.elt[ie].value.toString()===G.toString()&&(this.elt.selectedIndex=ie);return this}if(this.elt.getAttribute("multiple")){var X=[],ee=!0,Y=!1,ve=void 0;try{for(var xe,ae=this.elt.selectedOptions[Symbol.iterator]();!(ee=(xe=ae.next()).done);ee=!0)X.push(xe.value.value)}catch(ne){Y=!0,ve=ne}finally{try{ee||null==ae.return||ae.return()}finally{if(Y)throw ve}}return X}return this.elt.value},x.disable=function(G){if("string"==typeof G)for(var ie=0;ie<this.elt.length;ie++)this.elt[ie].value.toString()===G&&(this.elt[ie].disabled=!0,this.elt[ie].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(G){if("string"==typeof G)for(var ie=0;ie<this.elt.length;ie++)this.elt[ie].value.toString()===G&&(this.elt[ie].disabled=!1,this.elt[ie].selected=!1);else{this.elt.disabled=!1;for(var X=0;X<this.elt.length;X++)this.elt[X].disabled=!1,this.elt[X].selected=!1}return this},x},C.default.prototype.createRadio=function(){function x(G){return G instanceof HTMLInputElement&&"radio"===G.type}function E(G){return G instanceof HTMLLabelElement}var N,Z,K,z=arguments.length<=0?void 0:arguments[0];return z instanceof C.default.Element&&(z.elt instanceof HTMLDivElement||z.elt instanceof HTMLSpanElement)?(N=z,this.elt=z.elt):z instanceof HTMLDivElement||z instanceof HTMLSpanElement?(N=g(z,this),Z=this.elt=z,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(K=arguments.length<=1?void 0:arguments[1])):("string"==typeof z&&(K=z),Z=document.createElement("div"),N=g(Z,this),this.elt=Z),N._name=K||"radioOption",N._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(G){return x(G)||E(G)&&x(G.firstElementChild)}).map(function(G){return x(G)?G:G.firstElementChild})},N.option=function(G,ie){var X,ee,Y,ve=!0,xe=!1,ae=void 0;try{for(var ge,ne=N._getOptionsArray()[Symbol.iterator]();!(ve=(ge=ne.next()).done);ve=!0){var J=ge.value;if(J.value===G){X=J;break}}}catch(ce){xe=!0,ae=ce}finally{try{ve||null==ne.return||ne.return()}finally{if(xe)throw ae}}return void 0===X&&((X=document.createElement("input")).setAttribute("type","radio"),X.setAttribute("value",G)),X.setAttribute("name",N._name),E(X.parentElement)?ee=X.parentElement:(ee=document.createElement("label")).insertAdjacentElement("afterbegin",X),ee.lastElementChild instanceof HTMLSpanElement?Y=ee.lastElementChild:(Y=document.createElement("span"),X.insertAdjacentElement("afterend",Y)),Y.innerHTML=void 0===ie?G:ie,this.elt.appendChild(ee),X},N.remove=function(G){var ie=!0,X=!1,ee=void 0;try{for(var Y,ve=N._getOptionsArray()[Symbol.iterator]();!(ie=(Y=ve.next()).done);ie=!0){var xe=Y.value;if(xe.value===G)return void(E(xe.parentElement)?xe.parentElement:xe).remove()}}catch(ae){X=!0,ee=ae}finally{try{ie||null==ve.return||ve.return()}finally{if(X)throw ee}}},N.value=function(){var G="",ie=!0,X=!1,ee=void 0;try{for(var Y,ve=N._getOptionsArray()[Symbol.iterator]();!(ie=(Y=ve.next()).done);ie=!0){var xe=Y.value;if(xe.checked){G=xe.value;break}}}catch(ae){X=!0,ee=ae}finally{try{ie||null==ve.return||ve.return()}finally{if(X)throw ee}}return G},N.selected=function(G){var ie=null;if(void 0===G){var X=!0,ee=!1,Y=void 0;try{for(var ve,xe=N._getOptionsArray()[Symbol.iterator]();!(X=(ve=xe.next()).done);X=!0){var ae=ve.value;if(ae.checked){ie=ae;break}}}catch(Te){ee=!0,Y=Te}finally{try{X||null==xe.return||xe.return()}finally{if(ee)throw Y}}}else{N._getOptionsArray().forEach(function(le){le.checked=!1,le.removeAttribute("checked")});var ge=!0;ee=!1,Y=void 0;try{for(var ne,J=N._getOptionsArray()[Symbol.iterator]();!(ge=(ne=J.next()).done);ge=!0){var ce=ne.value;ce.value===G&&(ce.setAttribute("checked",!0),ce.checked=!0,ie=ce)}}catch(le){ee=!0,Y=le}finally{try{ge||null==J.return||J.return()}finally{if(ee)throw Y}}}return ie},N.disable=function(){var G=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],ie=!0,X=!1,ee=void 0;try{for(var Y,ve=N._getOptionsArray()[Symbol.iterator]();!(ie=(Y=ve.next()).done);ie=!0)Y.value.setAttribute("disabled",G)}catch(xe){X=!0,ee=xe}finally{try{ie||null==ve.return||ve.return()}finally{if(X)throw ee}}},N},C.default.prototype.createColorPicker=function(x){C.default._validateParameters("createColorPicker",arguments);var E=document.createElement("input");return E.type="color",x?x instanceof C.default.Color?E.value=x.toString("#rrggbb"):(C.default.prototype._colorMode="rgb",C.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},E.value=C.default.prototype.color(x).toString("#rrggbb")):E.value="#000000",(E=g(E,this)).color=function(){return x&&(x.mode&&(C.default.prototype._colorMode=x.mode),x.maxes&&(C.default.prototype._colorMaxes=x.maxes)),C.default.prototype.color(this.elt.value)},E},C.default.prototype.createInput=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",N=(C.default._validateParameters("createInput",arguments),document.createElement("input"));return N.setAttribute("value",x),N.setAttribute("type",E),g(N,this)},C.default.prototype.createFileInput=function(x){var E,N=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(C.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(E=document.createElement("input")).setAttribute("type","file"),N&&E.setAttribute("multiple",!0),E.addEventListener("change",function(Z){var K=!0,z=!1,G=void 0;try{for(var ie,X=Z.target.files[Symbol.iterator]();!(K=(ie=X.next()).done);K=!0)C.default.File._load(ie.value,x)}catch(Y){z=!0,G=Y}finally{try{K||null==X.return||X.return()}finally{if(z)throw G}}},!1),g(E,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},C.default.prototype.createVideo=function(x,E){return C.default._validateParameters("createVideo",arguments),v(this,"video",x,E)},C.default.prototype.createAudio=function(x,E){return C.default._validateParameters("createAudio",arguments),v(this,"audio",x,E)},C.default.prototype.VIDEO="video",C.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(x){var E=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return E?new Promise(function(N,Z){E.call(navigator,x,N,Z)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),C.default.prototype.createCapture=function(){for(var x=arguments.length,E=new Array(x),N=0;N<x;N++)E[N]=arguments[N];if(C.default._validateParameters("createCapture",E),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var Z,K=!0,z=!0,G=!1,ie=0,X=E;ie<X.length;ie++){var ee=X[ie];ee===C.default.prototype.VIDEO?z=!1:ee===C.default.prototype.AUDIO?K=!1:"object"===p(ee)?(void 0!==ee.flipped&&(G=ee.flipped,delete ee.flipped),Y=Object.assign({},Y,ee)):"function"==typeof ee&&(Z=ee)}var Y=Object.assign({},{video:K,audio:z},Y),ve=document.createElement("video"),xe=(ve.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(Y).then(function(ae){try{"srcObject"in ve?ve.srcObject=ae:ve.src=window.URL.createObjectURL(ae)}catch{ve.src=ae}}).catch(function(ae){"NotFoundError"===ae.name&&C.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===ae.name&&C.default._friendlyError("Access to the camera was denied","createCapture"),console.error(ae)}),g(ve,this,!0));return xe.loadedmetadata=!1,ve.addEventListener("loadedmetadata",function(){ve.play(),ve.width?(xe.width=ve.width,xe.height=ve.height,G&&(xe.elt.style.transform="scaleX(-1)")):(xe.width=xe.elt.width=ve.videoWidth,xe.height=xe.elt.height=ve.videoHeight),xe.loadedmetadata=!0,Z&&Z(ve.srcObject)}),xe.flipped=G,xe},C.default.prototype.createElement=function(x,E){return C.default._validateParameters("createElement",arguments),x=document.createElement(x),void 0!==E&&(x.innerHTML=E),g(x,this)},C.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},C.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},C.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},C.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},C.default.Element.prototype.child=function(x){return void 0===x?this.elt.childNodes:("string"==typeof x?("#"===x[0]&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof C.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},C.default.Element.prototype.center=function(x){var E=this.elt.style.display,N="none"===this.elt.style.display,Z="none"===this.parent().style.display,K={x:this.elt.offsetLeft,y:this.elt.offsetTop},z=(N&&this.show(),Z&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),G=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===x||void 0===x?this.position(z/2+this.parent().offsetLeft,G/2+this.parent().offsetTop):"horizontal"===x?this.position(z/2+this.parent().offsetLeft,K.y):"vertical"===x&&this.position(K.x,G/2+this.parent().offsetTop),this.style("display",E),N&&this.hide(),Z&&this.parent().hide(),this},C.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},C.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},C.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},C.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},C.default.Element.prototype.style=function(x,E){if(void 0===(E=E instanceof C.default.Color?"rgba("+E.levels[0]+","+E.levels[1]+","+E.levels[2]+","+E.levels[3]/255+")":E)){if(-1===x.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(x);for(var N=x.split(";"),Z=0;Z<N.length;Z++){var K=N[Z].split(":");K[0]&&K[1]&&(this.elt.style[K[0].trim()]=K[1].trim())}}else this.elt.style[x]=E,"width"!==x&&"height"!==x&&"left"!==x&&"top"!==x||(E=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(E,10)));return this},C.default.Element.prototype.attribute=function(x,E){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===E?this.elt.getAttribute(x):(this.elt.setAttribute(x,E),this);if(void 0===E)return this.elt.firstChild.getAttribute(x);for(var N=0;N<this.elt.childNodes.length;N++)this.elt.childNodes[N].setAttribute(x,E)},C.default.Element.prototype.removeAttribute=function(x){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var E=0;E<this.elt.childNodes.length;E++)this.elt.childNodes[E].removeAttribute(x);return this.elt.removeAttribute(x),this},C.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},C.default.Element.prototype.show=function(){return this.elt.style.display="block",this},C.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},C.default.Element.prototype.size=function(x,E){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var N=x,Z=E,K=C.default.prototype.AUTO;if(N!==K||Z!==K){if(N===K?N=E*this.width/this.height:Z===K&&(Z=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var z,G={},ie=this.elt.getContext("2d");for(z in ie)G[z]=ie[z];for(z in this.elt.setAttribute("width",N*this._pInst._pixelDensity),this.elt.setAttribute("height",Z*this._pInst._pixelDensity),this.elt.style.width=N+"px",this.elt.style.height=Z+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),G)this.elt.getContext("2d")[z]=G[z]}else this.elt.style.width=N+"px",this.elt.style.height=Z+"px",this.elt.width=N,this.elt.height=Z;this.width=N,this.height=Z,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",N),this._pInst._setProperty("height",Z))}return this},C.default.Element.prototype.remove=function(){this instanceof C.default.MediaElement&&(this.stop(),null!==(E=this.elt.srcObject)&&E.getTracks().forEach(function(N){N.stop()}));var x,E=this._pInst._elements.indexOf(this);for(x in-1!==E&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},C.default.Element.prototype.drop=function(x,E){var N;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",N=function(Z){Z.preventDefault()}),this.elt.addEventListener("dragleave",N)),C.default.Element._attachListener("drop",function(K){K.preventDefault(),"function"==typeof E&&E.call(this,K),K=K.dataTransfer.files;var z=!0,G=!1,ie=void 0;try{for(var X,ee=K[Symbol.iterator]();!(z=(X=ee.next()).done);z=!0)C.default.File._load(X.value,x)}catch(ve){G=!0,ie=ve}finally{try{z||null==ee.return||ee.return()}finally{if(G)throw ie}}},this)):console.log("The File APIs are not fully supported in this browser."),this},C.default.Element.prototype.draggable=function(x){var E,N="ontouchstart"in window,Z=0,K=0,z=0,G=0,ie=N?"touchend":"mouseup",X=N?"touchmove":"mousemove";function ee(ve){var xe;ve=ve||window.event,G=N?(xe=ve.changedTouches,Z=z-parseInt(xe[0].clientX),K=G-parseInt(xe[0].clientY),z=parseInt(xe[0].clientX),parseInt(xe[0].clientY)):(Z=z-parseInt(ve.clientX),K=G-parseInt(ve.clientY),z=parseInt(ve.clientX),parseInt(ve.clientY)),x.style.left=x.offsetLeft-Z+"px",x.style.top=x.offsetTop-K+"px"}function Y(){document.removeEventListener(ie,Y,!1),document.removeEventListener(X,ee,!1)}return void 0===x?E=x=this.elt:x!==this.elt&&x.elt!==this.elt&&(x=x.elt,E=this.elt),E.addEventListener(N?"touchstart":"mousedown",function(ve){var xe;return ve=ve||window.event,G=N?(xe=ve.changedTouches,z=parseInt(xe[0].clientX),parseInt(xe[0].clientY)):(z=parseInt(ve.clientX),parseInt(ve.clientY)),document.addEventListener(ie,Y,!1),document.addEventListener(X,ee,!1),!1},!1),E.style.cursor="move",this},a=function(x){var E=Z;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&I(E,x);var N=function D(x){return function(){var E,N,Z=f(x);return E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=f(this).constructor,Reflect.construct(Z,arguments,E)):Z.apply(this,arguments),Z=this,!(N=E)||"object"!==p(N)&&"function"!=typeof N?d(Z):N}}(Z);function Z(K,z){h(this,Z);var G=d(z=N.call(this,K,z));return z.elt.crossOrigin="anonymous",z._prevTime=0,z._cueIDCounter=0,z._cues=[],z.pixels=[],z._pixelsState=d(z),z._pixelDensity=1,z._modified=!1,z._frameOnCanvas=-1,Object.defineProperty(G,"src",{get:function(){var ie=G.elt.children[0].src,X=G.elt.src===window.location.href?"":G.elt.src;return ie===window.location.href?X:ie},set:function(ie){for(var X=0;X<G.elt.children.length;X++)G.elt.removeChild(G.elt.children[X]);var ee=document.createElement("source");ee.src=ie,K.appendChild(ee),G.elt.src=ie,G.modified=!0}}),G._onended=function(){},G.elt.onended=function(){G._onended(G)},z}return w(Z,[{key:"play",value:function(){var K;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(K=this.elt.play())&&K.catch&&K.catch(function(z){"NotAllowedError"===z.name?console.error(z):console.error("Media play method encountered an unexpected error",z)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var K=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(K)},{passive:!0,once:!0})}},{key:"autoplay",value:function(K){var z=this,G=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",K),K&&!G&&(K=function(){return z._setupAutoplayFailDetection()},4===this.elt.readyState?K():this.elt.addEventListener("canplay",K,{passive:!0,once:!0})),this}},{key:"volume",value:function(K){if(void 0===K)return this.elt.volume;this.elt.volume=K}},{key:"speed",value:function(K){if(void 0===K)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=K:this.presetPlaybackRate=K}},{key:"time",value:function(K){return void 0===K?this.elt.currentTime:(this.elt.currentTime=K,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&this._frameOnCanvas!==this._pInst.frameCount&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var K=arguments.length,z=new Array(K),G=0;G<K;G++)z[G]=arguments[G];return C.default.Renderer2D.prototype.loadPixels.apply(this,z)}},{key:"updatePixels",value:function(K,z,G,ie){return this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.updatePixels.call(this,K,z,G,ie)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var K=arguments.length,z=new Array(K),G=0;G<K;G++)z[G]=arguments[G];return C.default.Renderer2D.prototype.get.apply(this,z)}},{key:"_getPixel",value:function(){this.loadPixels();for(var K=arguments.length,z=new Array(K),G=0;G<K;G++)z[G]=arguments[G];return C.default.Renderer2D.prototype._getPixel.apply(this,z)}},{key:"set",value:function(K,z,G){this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.set.call(this,K,z,G),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var K=arguments.length,z=new Array(K),G=0;G<K;G++)z[G]=arguments[G];C.default.prototype.copy.apply(this,z)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var K=arguments.length,z=new Array(K),G=0;G<K;G++)z[G]=arguments[G];C.default.Image.prototype.mask.apply(this,z)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(K){this._modified=K}},{key:"onended",value:function(K){return this._onended=K,this}},{key:"connect",value:function(K){var z,G;if("function"==typeof C.default.prototype.getAudioContext)z=C.default.prototype.getAudioContext(),G=C.default.soundOut.input;else try{G=(z=K.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=z.createMediaElementSource(this.elt),this.audioSourceNode.connect(G)),this.audioSourceNode.connect(K?K.input?K.input:K:G)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(K,X,G){var ie=this._cueIDCounter++;return X=new S(X,K,ie,G),this._cues.push(X),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),ie}},{key:"removeCue",value:function(K){for(var z=0;z<this._cues.length;z++)this._cues[z].id===K&&(console.log(K),this._cues.splice(z,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var K=this.time(),z=0;z<this._cues.length;z++){var G=this._cues[z].time;this._prevTime<G&&G<=K&&this._cues[z].callback(this._cues[z].val)}this._prevTime=K}}]),Z}(C.default.Element),C.default.MediaElement=a,a=function(){function x(E,N){h(this,x),this.file=E,this._pInst=N,N=E.type.split("/"),this.type=N[0],this.subtype=N[1],this.name=E.name,this.size=E.size,this.data=void 0}return w(x,null,[{key:"_createLoader",value:function(E,N){var Z=new FileReader;return Z.onload=function(K){var z,G=new C.default.File(E);"application/json"===G.file.type?G.data=JSON.parse(K.target.result):"text/xml"===G.file.type?(z=(new DOMParser).parseFromString(K.target.result,"text/xml"),G.data=new C.default.XML(z.documentElement)):G.data=K.target.result,N(G)},Z}},{key:"_load",value:function(E,N){var Z;/^text\//.test(E.type)||"application/json"===E.type?C.default.File._createLoader(E,N).readAsText(E):/^(video|audio)\//.test(E.type)?((Z=new C.default.File(E)).data=URL.createObjectURL(E),N(Z)):C.default.File._createLoader(E,N).readAsDataURL(E)}}]),x}(),C.default.File=a,q.default=a=C.default},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(p,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(p=p("../core/main"))&&p.__esModule?p:{default:p};M.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",M.default.prototype.accelerationX=0,M.default.prototype.accelerationY=0,M.default.prototype.accelerationZ=0,M.default.prototype.pAccelerationX=0,M.default.prototype.pAccelerationY=0,M.default.prototype.pAccelerationZ=0,M.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},M.default.prototype.rotationX=0,M.default.prototype.rotationY=0,M.default.prototype.rotationZ=0,M.default.prototype.pRotationX=0,M.default.prototype.pRotationY=0;var C=M.default.prototype.pRotationZ=0,_=0,w=0,I="clockwise",D="clockwise",d="clockwise",f=(M.default.prototype.pRotateDirectionX=void 0,M.default.prototype.pRotateDirectionY=void 0,M.default.prototype.pRotateDirectionZ=void 0,M.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},M.default.prototype.turnAxis=void 0,.5),h=30;M.default.prototype.setMoveThreshold=function(g){M.default._validateParameters("setMoveThreshold",arguments),f=g},M.default.prototype.setShakeThreshold=function(g){M.default._validateParameters("setShakeThreshold",arguments),h=g},M.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},M.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},M.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var g,v,S,x,E,N=this._isGlobal?window:this;"function"==typeof N.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&N.deviceMoved(),"function"==typeof N.deviceTurned&&(v=this._toDegrees(this.rotationX)+180,S=this._toDegrees(this.pRotationX)+180,g=C+180,0<v-S&&v-S<270||v-S<-270?I="clockwise":(v-S<0||270<v-S)&&(I="counter-clockwise"),I!==this.pRotateDirectionX&&(g=v),90<Math.abs(v-g)&&Math.abs(v-g)<270&&(g=v,this._setProperty("turnAxis","X"),N.deviceTurned()),this.pRotateDirectionX=I,C=g-180,S=this._toDegrees(this.rotationY)+180,v=this._toDegrees(this.pRotationY)+180,g=_+180,0<S-v&&S-v<270||S-v<-270?D="clockwise":(S-v<0||270<S-this.pRotationY)&&(D="counter-clockwise"),D!==this.pRotateDirectionY&&(g=S),90<Math.abs(S-g)&&Math.abs(S-g)<270&&(g=S,this._setProperty("turnAxis","Y"),N.deviceTurned()),this.pRotateDirectionY=D,_=g-180,0<(v=this._toDegrees(this.rotationZ))-(S=this._toDegrees(this.pRotationZ))&&v-S<270||v-S<-270?d="clockwise":(v-S<0||270<v-S)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(w=v),90<Math.abs(v-w)&&Math.abs(v-w)<270&&(w=v,this._setProperty("turnAxis","Z"),N.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)),"function"==typeof N.deviceShaken&&(null!==this.pAccelerationX&&(x=Math.abs(this.accelerationX-this.pAccelerationX),E=Math.abs(this.accelerationY-this.pAccelerationY)),h<x+E&&N.deviceShaken())},q.default=p=M.default},{"../core/main":283}],301:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.isKeyPressed=!1,M.default.prototype.keyIsPressed=!1,M.default.prototype.key="",M.default.prototype.keyCode=0,M.default.prototype._onkeydown=function(C){var _;this._downKeys[C.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",C.which),this._downKeys[C.which]=!0,this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),"function"!=typeof(_=this._isGlobal?window:this).keyPressed||C.charCode||!1===_.keyPressed(C)&&C.preventDefault())},M.default.prototype._onkeyup=function(C){this._downKeys[C.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),this._setProperty("keyCode",C.which);var _=this._isGlobal?window:this;"function"==typeof _.keyReleased&&!1===_.keyReleased(C)&&C.preventDefault()},M.default.prototype._onkeypress=function(C){var _;C.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",C.which),this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),"function"==typeof(_=this._isGlobal?window:this).keyTyped&&!1===_.keyTyped(C)&&C.preventDefault())},M.default.prototype._onblur=function(C){this._downKeys={}},M.default.prototype.keyIsDown=function(C){return M.default._validateParameters("keyIsDown",arguments),this._downKeys[C]||!1},M.default.prototype._areDownKeys=function(){for(var C in this._downKeys)if(this._downKeys.hasOwnProperty(C)&&!0===this._downKeys[C])return!0;return!1},q.default=a=M.default},{"../core/main":283}],302:[function(a,_e,q){"use strict";function M(D){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(D)}function C(D){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(D)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(_=a("../core/main"))&&_.__esModule?_:{default:_},w=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!==C(D)&&"function"!=typeof D)return{default:D};var d=I();if(d&&d.has(D))return d.get(D);var f,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in D){var g;Object.prototype.hasOwnProperty.call(D,f)&&((g=p?Object.getOwnPropertyDescriptor(D,f):null)&&(g.get||g.set)?Object.defineProperty(h,f,g):h[f]=D[f])}return h.default=D,d&&d.set(D,h),h}(a("../core/constants"));function I(){var D;return"function"!=typeof WeakMap?null:(I=function(){return D},D=new WeakMap)}_.default.prototype.movedX=0,_.default.prototype.movedY=0,_.default.prototype._hasMouseInteracted=!1,_.default.prototype.mouseX=0,_.default.prototype.mouseY=0,_.default.prototype.pmouseX=0,_.default.prototype.pmouseY=0,_.default.prototype.winMouseX=0,_.default.prototype.winMouseY=0,_.default.prototype.pwinMouseX=0,_.default.prototype.pwinMouseY=0,_.default.prototype.mouseButton=0,_.default.prototype.mouseIsPressed=!1,_.default.prototype._updateNextMouseCoords=function(D){var d,f,h,p,g;null!==this._curElement&&(!D.touches||0<D.touches.length)&&(f=this.width,h=this.height,(p=D)&&!p.clientX&&(p.touches?p=p.touches[0]:p.changedTouches&&(p=p.changedTouches[0])),g=(d=this._curElement.elt).getBoundingClientRect(),h={x:(p.clientX-g.left)/(f=d.scrollWidth/f||1),y:(p.clientY-g.top)/(d=d.scrollHeight/h||1),winX:p.clientX,winY:p.clientY,id:p.identifier},this._setProperty("movedX",D.movementX),this._setProperty("movedY",D.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},_.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},_.default.prototype._setMouseButton=function(D){this._setProperty("mouseButton",1===D.button?w.CENTER:2===D.button?w.RIGHT:w.LEFT)},_.default.prototype._onmousemove=function(D){var d=this._isGlobal?window:this;this._updateNextMouseCoords(D),this.mouseIsPressed?"function"==typeof d.mouseDragged?!1===d.mouseDragged(D)&&D.preventDefault():"function"==typeof d.touchMoved&&!1===d.touchMoved(D)&&D.preventDefault():"function"==typeof d.mouseMoved&&!1===d.mouseMoved(D)&&D.preventDefault()},_.default.prototype._onmousedown=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(D),this._updateNextMouseCoords(D),this.touchstart||("function"==typeof d.mousePressed?!1===d.mousePressed(D)&&D.preventDefault():"function"==typeof d.touchStarted&&!1===d.touchStarted(D)&&D.preventDefault(),this.touchstart=!1)},_.default.prototype._onmouseup=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof d.mouseReleased?!1===d.mouseReleased(D)&&D.preventDefault():"function"==typeof d.touchEnded&&!1===d.touchEnded(D)&&D.preventDefault(),this.touchend=!1)},_.default.prototype._ondragend=_.default.prototype._onmouseup,_.default.prototype._ondragover=_.default.prototype._onmousemove,_.default.prototype._onclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.mouseClicked&&!1===d.mouseClicked(D)&&D.preventDefault()},_.default.prototype._ondblclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.doubleClicked&&!1===d.doubleClicked(D)&&D.preventDefault()},_.default.prototype._mouseWheelDeltaY=0,_.default.prototype._pmouseWheelDeltaY=0,_.default.prototype._onwheel=function(D){var d=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",D.deltaY),"function"==typeof d.mouseWheel&&(D.delta=D.deltaY,!1===d.mouseWheel(D)&&D.preventDefault())},_.default.prototype.requestPointerLock=function(){var D=this._curElement.elt;return D.requestPointerLock=D.requestPointerLock||D.mozRequestPointerLock,D.requestPointerLock?(D.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},_.default.prototype.exitPointerLock=function(){document.exitPointerLock()},q.default=a=_.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.touches=[],a.default.prototype._updateTouchCoords=function(M){if(null!==this._curElement){for(var C=[],_=0;_<M.touches.length;_++)C[_]=function(g,p,v,d){var f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=g.getBoundingClientRect();return p=g.scrollWidth/p||1,g=g.scrollHeight/v||1,{x:((v=d.touches[f]||d.changedTouches[f]).clientX-h.left)/p,y:(v.clientY-h.top)/g,winX:v.clientX,winY:v.clientY,id:v.identifier}}(this._curElement.elt,this.width,this.height,M,_);this._setProperty("touches",C)}},a.default.prototype._ontouchstart=function(M){var C=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(M),this._updateNextMouseCoords(M),this._updateMouseCoords(),"function"==typeof C.touchStarted&&(!1===C.touchStarted(M)&&M.preventDefault(),this.touchstart=!0)},a.default.prototype._ontouchmove=function(M){var C=this._isGlobal?window:this;this._updateTouchCoords(M),this._updateNextMouseCoords(M),"function"==typeof C.touchMoved?!1===C.touchMoved(M)&&M.preventDefault():"function"==typeof C.mouseDragged&&!1===C.mouseDragged(M)&&M.preventDefault()},a.default.prototype._ontouchend=function(M){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(M),this._updateNextMouseCoords(M);var C=this._isGlobal?window:this;"function"==typeof C.touchEnded&&(!1===C.touchEnded(M)&&M.preventDefault(),this.touchend=!0)},q.default=a=a.default},{"../core/main":283}],304:[function(a,_e,q){"use strict";a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.int32-array"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.int32-array"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M,C,_,w,I={_toPixels:function(D){var d,f;return D instanceof ImageData?D.data:D.getContext("2d")?D.getContext("2d").getImageData(0,0,D.width,D.height).data:D.getContext("webgl")?(f=(d=D.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,f=new Uint8Array(f),d.readPixels(0,0,D.width,D.height,d.RGBA,d.UNSIGNED_BYTE,f),f):void 0},_getARGB:function(D,d){return D[3+(d*=4)]<<24&4278190080|D[d]<<16&16711680|D[1+d]<<8&65280|255&D[2+d]},_setPixels:function(D,d){for(var f,h=0,p=D.length;h<p;h++)D[0+(f=4*h)]=(16711680&d[h])>>>16,D[1+f]=(65280&d[h])>>>8,D[2+f]=255&d[h],D[3+f]=(4278190080&d[h])>>>24},_toImageData:function(D){return D instanceof ImageData?D:D.getContext("2d").getImageData(0,0,D.width,D.height)},_createImageData:function(D,d){return I._tmpCanvas=document.createElement("canvas"),I._tmpCtx=I._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(D,d)},apply:function(D,g,f){var h=D.getContext("2d"),p=h.getImageData(0,0,D.width,D.height);(g=g(p,f))instanceof ImageData?h.putImageData(g,0,0,0,0,D.width,D.height):h.putImageData(p,0,0,0,0,D.width,D.height)},threshold:function(D){for(var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,f=I._toPixels(D),h=Math.floor(255*d),p=0;p<f.length;p+=4)f[p]=f[p+1]=f[p+2]=h<=.2126*f[p]+.7152*f[p+1]+.0722*f[p+2]?255:0},gray:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=d[f+1]=d[f+2]=.2126*d[f]+.7152*d[f+1]+.0722*d[f+2]},opaque:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f+3]=255;return d},invert:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2]},posterize:function(D){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,f=I._toPixels(D);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=d-1,p=0;p<f.length;p+=4){var v=f[p+1],S=f[p+2];f[p]=255*(f[p]*d>>8)/h,f[p+1]=255*(v*d>>8)/h,f[p+2]=255*(S*d>>8)/h}},dilate:function(D){for(var d,f,h,p,g,v,S,x,E,N=I._toPixels(D),Z=0,K=N.length?N.length/4:0,z=new Int32Array(K);Z<K;)for(f=(d=Z)+D.width;Z<f;)p=h=I._getARGB(N,Z),(E=Z-1)<d&&(E=Z),f<=(x=Z+1)&&(x=Z),(g=Z-D.width)<0&&(g=0),K<=(v=Z+D.width)&&(v=Z),g=I._getARGB(N,g),E=I._getARGB(N,E),v=I._getARGB(N,v),(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(S=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))&&(h=E,p=S),p<(S=77*((E=I._getARGB(N,x))>>16&255)+151*(E>>8&255)+28*(255&E))&&(h=E,p=S),p<(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,p=x),p<(E=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(h=v,p=E),z[Z++]=h;I._setPixels(N,z)},erode:function(D){for(var d,f,h,p,g,v,S,x,E,N=I._toPixels(D),Z=0,K=N.length?N.length/4:0,z=new Int32Array(K);Z<K;)for(f=(d=Z)+D.width;Z<f;)p=h=I._getARGB(N,Z),(E=Z-1)<d&&(E=Z),f<=(x=Z+1)&&(x=Z),(g=Z-D.width)<0&&(g=0),K<=(v=Z+D.width)&&(v=Z),g=I._getARGB(N,g),E=I._getARGB(N,E),v=I._getARGB(N,v),(S=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))<(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(h=E,p=S),(S=77*((E=I._getARGB(N,x))>>16&255)+151*(E>>8&255)+28*(255&E))<p&&(h=E,p=S),(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<p&&(h=g,p=x),(E=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<p&&(h=v,p=E),z[Z++]=h;I._setPixels(N,z)},blur:function(D,d){for(var f,h,p,g,v,S,x,E,N,Z,K=I._toPixels(D),z=D.width,G=D.height,ie=z*G,X=new Int32Array(ie),ee=0;ee<ie;ee++)X[ee]=I._getARGB(K,ee);var Y,ve,xe,ae,ge,ne,J,ce,Te=new Int32Array(ie),et=new Int32Array(ie),le=new Int32Array(ie),V=new Int32Array(ie),me=0,Oe=3.5*d|0;if(M!==(Oe=Oe<1?1:Oe<248?Oe:248)){C=1+(M=Oe)<<1,_=new Int32Array(C),w=new Array(C);for(var Xe=0;Xe<C;Xe++)w[Xe]=new Int32Array(256);for(var dt=1,yt=Oe-1;dt<Oe;dt++){_[Oe+dt]=_[yt]=ne=yt*yt,J=w[Oe+dt],ce=w[yt--];for(var Ut=0;Ut<256;Ut++)J[Ut]=ce[Ut]=ne*Ut}ge=_[Oe]=Oe*Oe,J=w[Oe];for(var ht=0;ht<256;ht++)J[ht]=ge*ht}for(ve=0;ve<G;ve++){for(Y=0;Y<z;Y++){if(g=p=h=v=f=0,(S=Y-M)<0)Z=-S,S=0;else{if(z<=S)break;Z=0}for(xe=Z;xe<C&&!(z<=S);xe++){var Lt=X[S+me];v+=(ae=w[xe])[(-16777216&Lt)>>>24],h+=ae[(16711680&Lt)>>16],p+=ae[(65280&Lt)>>8],g+=ae[255&Lt],f+=_[xe],S++}Te[x=me+Y]=v/f,et[x]=h/f,le[x]=p/f,V[x]=g/f}me+=z}for(N=(E=-M)*z,ve=me=0;ve<G;ve++){for(Y=0;Y<z;Y++){if(g=p=h=v=f=0,E<0)Z=x=-E,S=Y;else{if(G<=E)break;Z=0,x=E,S=Y+N}for(xe=Z;xe<C&&!(G<=x);xe++)v+=(ae=w[xe])[Te[S]],h+=ae[et[S]],p+=ae[le[S]],g+=ae[V[S]],f+=_[xe],x++,S+=z;X[Y+me]=v/f<<24|h/f<<16|p/f<<8|g/f}me+=z,N+=z,E++}I._setPixels(K,X)}};q.default=I},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=_(a("../core/main")),C=_(a("omggif"));function _(I){return I&&I.__esModule?I:{default:I}}function w(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.createImage=function(I,D){return M.default._validateParameters("createImage",arguments),new M.default.Image(I,D)},M.default.prototype.saveCanvas=function(){for(var I,D,d,f,h,p,g=arguments.length,v=new Array(g),S=0;S<g;S++)v[S]=arguments[S];switch(M.default._validateParameters("saveCanvas",v),v[0]instanceof HTMLCanvasElement?(I=v[0],v.shift()):v[0]instanceof M.default.Element?(I=v[0].elt,v.shift()):v[0]instanceof M.default.Framebuffer?((h=this.createGraphics((f=v[0]).width,f.height)).pixelDensity(pixelDensity()),f.loadPixels(),h.loadPixels(),h.pixels.set(f.pixels),h.updatePixels(),I=h.elt,v.shift()):I=this._curElement&&this._curElement.elt,1<=v.length&&(D=v[0]),d=(d=2<=v.length?v[1]:d)||M.default.prototype._checkFileExtension(D,d)[1]||"png"){default:p="image/png";break;case"webp":p="image/webp";break;case"jpeg":case"jpg":p="image/jpeg"}I.toBlob(function(x){M.default.prototype.downloadFile(x,D,d),h&&h.remove()},p)},M.default.prototype.encodeAndDownloadGif=function(I,D){for(var d=I.gifProperties,h=(1===(f=d.loopLimit)?f=null:null===f&&(f=0),new Uint8Array(I.width*I.height*d.numFrames)),p=[],g={},v=0;v<d.numFrames;v++){for(var S=new Set,x=d.frames[v].image.data,E=x.length,N=new Uint32Array(I.width*I.height),Z=0,K=0;Z<E;Z+=4,K++){var z=x[Z+0]<<16|x[Z+1]<<8|x[Z+2];S.add(z),N[K]=z}var G=w(S).sort().toString();void 0===g[G]?g[G]={freq:1,frames:[v]}:(g[G].freq+=1,g[G].frames.push(v)),p.push(N)}for(var ee=[],ie=Object.keys(g).sort(function(le,V){return g[V].freq-g[le].freq}),X=ie[0].split(",").map(function(le){return parseInt(le)}),Y=(ee=ee.concat(g[X].frames),new Set(X)),ve=1;ve<ie.length;ve++){var xe=ie[ve].split(",").map(function(le){return parseInt(le)}).filter(function(le){return!Y.has(le)});if(X.length+xe.length<=256){for(var ae=0;ae<xe.length;ae++)X.push(xe[ae]),Y.add(xe[ae]);ee=ee.concat(g[ie[ve]].frames)}}ee=new Set(ee);for(var ge={},ne=0;ne<X.length;ne++)ge[X[ne]]||(ge[X[ne]]=ne);for(var J=1;J<X.length;)J<<=1;X.length=J;for(var f={loop:f,palette:new Uint32Array(X)},ce=new C.default.GifWriter(h,I.width,I.height,f),Te={},et=0;et<d.numFrames;et++)!function(V){var me=!ee.has(V),Oe=me?[]:X,Xe=new Uint8Array(I.width*I.height),dt={},yt=new Set,Ut=(p[V].forEach(function(It,bt){me?(void 0===dt[It]&&(dt[It]=Oe.length,Oe.push(It)),Xe[bt]=dt[It]):Xe[bt]=ge[It],0<V&&p[V-1][bt]!==It&&yt.add(It)}),{});if(0<(ht=Oe.filter(function(It){return!yt.has(It)})).length){var ht,Lt=(me?dt:ge)[ht=ht[0]];if(0<V){for(var kt=0;kt<p[V].length;kt++)p[V-1][kt]===p[V][kt]&&(Xe[kt]=Lt);Ut.transparent=Lt,Te.frameOpts.disposal=1}}if(Ut.delay=d.frames[V].delay/10,me){for(var lt=1;lt<Oe.length;)lt<<=1;Oe.length=lt,Ut.palette=new Uint32Array(Oe)}0<V&&ce.addFrame(0,0,I.width,I.height,Te.pixelPaletteIndex,Te.frameOpts),Te={pixelPaletteIndex:Xe,frameOpts:Ut}}(et);Te.frameOpts.disposal=1,ce.addFrame(0,0,I.width,I.height,Te.pixelPaletteIndex,Te.frameOpts),f=new Blob([h.slice(0,ce.end())],{type:"image/gif"}),M.default.prototype.downloadFile(f,D,"gif")},M.default.prototype.saveFrames=function(I,D,d,p,h){M.default._validateParameters("saveFrames",arguments),d=M.default.prototype.constrain(d=d||3,0,15),d*=1e3,p=M.default.prototype.constrain(p||15,0,22);var g=0,v=M.default.prototype._makeFrame,S=this._curElement.elt,x=[],E=setInterval(function(){x.push(v(I+g,D,S)),g++},1e3/p);setTimeout(function(){if(clearInterval(E),h)h(x);else for(var N=0,Z=x;N<Z.length;N++){var K=Z[N];M.default.prototype.downloadFile(K.imageData,K.filename,K.ext)}x=[]},.01+d)},M.default.prototype._makeFrame=function(I,D,h){var f;if(h=this?this._curElement.elt:h,D)switch(D.toLowerCase()){case"png":default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}else D="png",f="image/png";h=(h=h.toDataURL(f)).replace(f,"image/octet-stream");var p={};return p.imageData=h,p.filename=I,p.ext=D,p},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(a,_e,q){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(S)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.copy-within"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint8-clamped-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.copy-within"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.uint8-clamped-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,a("regenerator-runtime/runtime");var _=h(a("../core/main")),w=h(a("../core/helpers")),I=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var x=f();if(x&&x.has(S))return x.get(S);var E,N={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in S){var K;Object.prototype.hasOwnProperty.call(S,E)&&((K=Z?Object.getOwnPropertyDescriptor(S,E):null)&&(K.get||K.set)?Object.defineProperty(N,E,K):N[E]=S[E])}return N.default=S,x&&x.set(S,N),N}(a("../core/constants")),D=h(a("omggif")),d=a("gifenc");function f(){var S;return"function"!=typeof WeakMap?null:(f=function(){return S},S=new WeakMap)}function h(S){return S&&S.__esModule?S:{default:S}}function p(S,x,E,N,Z,K,z){try{var G=S[K](z),ie=G.value}catch(X){return void E(X)}G.done?x(ie):Promise.resolve(ie).then(N,Z)}function v(S,x){return 0<S&&S<x?S:x}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),_.default.prototype.loadImage=function(S,x,E){_.default._validateParameters("loadImage",arguments);var N=new _.default.Image(1,1,this),Z=this,K=new Request(S,{method:"GET",mode:"cors"});return fetch(S,K).then(function(z){var G,ie=z.headers.get("content-type");null===ie&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),ie&&ie.includes("image/gif")?z.arrayBuffer().then(function(X){if(X){X=new Uint8Array(X);for(var ee=N,Y=x,ve=E,xe=function(me){Z._decrementPreload()}.bind(Z),ae=new D.default.GifReader(X),ge=(ee.width=ee.canvas.width=ae.width,ee.height=ee.canvas.height=ae.height,[]),ne=ae.numFrames(),J=new Uint8ClampedArray(ee.width*ee.height*4),ce=0;ce<ne;ce++){var Te=ae.frameInfo(ce),et=ee.drawingContext.getImageData(0,0,ee.width,ee.height),le=(J=et.data.slice(),function(me,Oe){try{Oe.decodeAndBlitFrameRGBA(me,J)}catch(Xe){_.default._friendlyFileLoadError(8,ee.src),"function"==typeof ve?ve(Xe):console.error(Xe)}}(ce,ae),new ImageData(J,ee.width,ee.height));0===(ee.drawingContext.putImageData(le,0,0),le=Te.delay)&&(le=10),ge.push({image:ee.drawingContext.getImageData(0,0,ee.width,ee.height),delay:10*le}),2===Te.disposal?ee.drawingContext.clearRect(Te.x,Te.y,Te.width,Te.height):3===Te.disposal&&ee.drawingContext.putImageData(et,0,0,Te.x,Te.y,Te.width,Te.height)}null===(X=ae.loopCount())?X=1:0===X&&(X=null),ee.drawingContext.putImageData(ge[0].image,0,0),1<ge.length&&(ee.gifProperties={displayIndex:0,loopLimit:X,loopCount:0,frames:ge,numFrames:ne,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof Y&&Y(ee),xe()}},function(X){"function"==typeof E?(E(X),Z._decrementPreload()):console.error(X)}):((G=new Image).onload=function(){N.width=N.canvas.width=G.width,N.height=N.canvas.height=G.height,N.drawingContext.drawImage(G,0,0),N.modified=!0,"function"==typeof x&&x(N),Z._decrementPreload()},G.onerror=function(X){_.default._friendlyFileLoadError(0,G.src),"function"==typeof E?(E(X),Z._decrementPreload()):console.error(X)},0!==S.indexOf("data:image/")&&(G.crossOrigin="Anonymous"),G.src=S),N.modified=!0}).catch(function(z){_.default._friendlyFileLoadError(0,S),"function"==typeof E?(E(z),Z._decrementPreload()):console.error(z)}),N},_.default.prototype.saveGif=function(){S=F.mark(function E(N,Z){var K,z,G,ie,X,ee,Y,ve,xe,ae,ge,ne,J,ce,Te,et,le,V,me,Oe,Xe,dt,yt,Ut,ht,Lt,kt=arguments;return F.wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(K=2<kt.length&&void 0!==kt[2]?kt[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof N)throw TypeError("fileName parameter must be a string");lt.next=3;break;case 3:if("number"!=typeof Z)throw TypeError("Duration parameter must be a number");lt.next=5;break;case 5:if(G=K&&K.units||"seconds",ie=K&&K.silent||!1,X=K&&K.notificationDuration||0,ee=K&&K.notificationID||"progressBar","number"!=typeof(z=K&&K.delay||0))throw TypeError("Delay parameter must be a number");lt.next=12;break;case 12:if("seconds"!==G&&"frames"!==G)throw TypeError('Units parameter must be either "frames" or "seconds"');lt.next=14;break;case 14:if("boolean"!=typeof ie)throw TypeError("Silent parameter must be a boolean");lt.next=16;break;case 16:if("number"!=typeof X)throw TypeError("Notification duration parameter must be a number");lt.next=18;break;case 18:if("string"!=typeof ee)throw TypeError("Notification ID parameter must be a string");lt.next=20;break;case 20:return this._recording=!0,Y=(Y=1/(ae=(ae=this._targetFrameRate)!==1/0&&void 0!==ae&&0!==ae?ae:60)*1e3)<20?20:Y,xe=(ve="seconds"===G?Z*ae:Z)+(ae="seconds"===G?z*ae:z),this.frameCount=ae,ge=this._pixelDensity,this.pixelDensity(1),ne=[],null!==document.getElementById(ee)&&document.getElementById(ee).remove(),ie||((J=this.createP("")).id(ee),J.style("font-size","16px"),J.style("font-family","Montserrat"),J.style("background-color","#ffffffa0"),J.style("padding","8px"),J.style("border-radius","10px"),J.position(0,0)),this._renderer instanceof _.default.RendererGL&&(Te=this.drawingContext,ce=new Uint8Array(Te.drawingBufferWidth*Te.drawingBufferHeight*4)),this.noLoop(),lt.next=39,Promise.resolve();case 39:if(ae<xe)return this.redraw(),Ut=void 0,Ut=this._renderer instanceof _.default.RendererGL?(ce=new Uint8Array(Te.drawingBufferWidth*Te.drawingBufferHeight*4),Te.readPixels(0,0,Te.drawingBufferWidth,Te.drawingBufferHeight,Te.RGBA,Te.UNSIGNED_BYTE,ce),function(It,bt,Pt){for(var St=parseInt(Pt/2),zt=4*bt,fn=new Uint8Array(4*bt),$n=0;$n<St;++$n){var En=$n*zt,Kn=(Pt-$n-1)*zt;fn.set(It.subarray(En,En+zt)),It.copyWithin(En,Kn,Kn+zt),It.set(fn,Kn)}return It}(ce,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,ne.push(Ut),ae++,ie||J.html("Saved frame <b>"+ne.length.toString()+"</b> out of "+ve.toString()),lt.next=48,new Promise(function(It){return setTimeout(It,0)});lt.next=50;break;case 48:lt.next=39;break;case 50:ie||J.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(ge),et=(0,d.GIFEncoder)(),le=function(It){for(var bt=new Uint8Array(It.length*It[0].length),Pt=0;Pt<It.length;Pt++)bt.set(It[Pt],Pt*It[0].length);var St=(0,d.quantize)(bt,256,{format:"rgba4444",oneBitAlpha:!0});return 256===St.length?St[St.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:St.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),St}(ne),V={},me=function(It){for(var bt=It.length/4,Pt=new Uint8Array(bt),St=0;St<bt;St++){var zt=It[4*St]<<24|It[4*St+1]<<16|It[4*St+2]<<8|It[4*St+3];void 0===V[zt]&&(V[zt]=(0,d.nearestColorIndex)(le,It.slice(4*St,4*(St+1)))),Pt[St]=V[zt]}return Pt},Oe=le.length-1,Xe=[],dt=0;case 60:if(!(dt<ne.length)){lt.next=71;break}if(yt=me(ne[dt]),Ut=yt.slice(),0===dt)et.writeFrame(yt,this.width,this.height,{palette:le,delay:Y,dispose:1});else{for(ht=0;ht<yt.length;ht++)yt[ht]===Xe[ht]&&(yt[ht]=Oe);et.writeFrame(yt,this.width,this.height,{delay:Y,transparent:!0,transparentIndex:Oe,dispose:1})}return Xe=Ut,ie||J.html("Rendered frame <b>"+dt.toString()+"</b> out of "+ve.toString()),lt.next=68,new Promise(function(It){return setTimeout(It,0)});case 68:dt++,lt.next=60;break;case 71:et.finish(),Lt=et.bytesView(),Lt=new Blob([Lt],{type:"image/gif"}),ne=[],this._recording=!1,this.loop(),ie||(J.html("Done. Downloading your gif!\u{1f338}"),0<X&&setTimeout(function(){return J.remove()},1e3*X)),_.default.prototype.downloadFile(Lt,N,"gif");case 80:case"end":return lt.stop()}},E,this)});var S,x=function(){var E=this,N=arguments;return new Promise(function(Z,K){var z=S.apply(E,N);function G(X){p(z,Z,K,G,ie,"next",X)}function ie(X){p(z,Z,K,G,ie,"throw",X)}G(void 0)})};return function(E,N){return x.apply(this,arguments)}}(),_.default.prototype.image=function(S,x,E,N,ae,ge,ne,J,Te,X,ee,Y){_.default._validateParameters("image",arguments);var ce=S.width,ve=S.height,xe=(Y=Y||I.CENTER,ee=ee||I.CENTER,S.elt&&(ce=void 0!==ce?ce:S.elt.width,ve=void 0!==ve?ve:S.elt.height),S.elt&&S.elt.videoWidth&&!S.canvas&&(ce=void 0!==ce?ce:S.elt.videoWidth,ve=void 0!==ve?ve:S.elt.videoHeight),N||ce);ae=ae||ve,ge=ge||0,ne=ne||0,J=v(void 0!==J?J:ce,ce),ce=v(void 0!==Te?Te:ve,ve),Te=1,S.elt&&!S.canvas&&S.elt.style.width&&(Te=S.elt.videoWidth&&!N?S.elt.videoWidth:S.elt.width,Te/=parseInt(S.elt.style.width,10)),ge*=Te,ne*=Te,ce*=Te,J*=Te,ve=function g(S,x,E,N,Z,K,z,G,ie,X,ee){var Y,ve,xe,ae,ge,ne,J,ce,Te;return S===I.COVER&&(Y=x,xe=E,J=K,ce=z,ne=G,Te=ie,ve=X,ae=ee,J/=ge=Math.max(J/ve,ce/ae),ce/=ge,ge=ne,ne=Te,Y===I.CENTER?ge+=(ve-J)/2:Y===I.RIGHT&&(ge+=ve-J),xe===I.CENTER?ne+=(ae-ce)/2:xe===I.BOTTOM&&(ne+=ae-ce),G=(Te={x:ge,y:ne,w:J,h:ce}).x,ie=Te.y,X=Te.w,ee=Te.h),S===I.CONTAIN&&(Y=x,ve=E,xe=N,ae=Z,ge=K,ne=z,J=X,ce=ee,J/=Te=Math.max(J/ge,ce/ne),ce/=Te,Te=xe,xe=ae,Y===I.CENTER?Te+=(ge-J)/2:Y===I.RIGHT&&(Te+=ge-J),ve===I.CENTER?xe+=(ne-ce)/2:ve===I.BOTTOM&&(xe+=ne-ce),N=(S={x:Te,y:xe,w:J,h:ce}).x,Z=S.y,K=S.w,z=S.h),{sx:G,sy:ie,sw:X,sh:ee,dx:N,dy:Z,dw:K,dh:z}}(X,ee,Y,(ve=w.default.modeAdjust(x,E,xe,ae,this._renderer._imageMode)).x,ve.y,ve.w,ve.h,ge,ne,J,ce),this._renderer.image(S,ve.sx,ve.sy,ve.sw,ve.sh,ve.dx,ve.dy,ve.dw,ve.dh)},_.default.prototype.tint=function(){for(var S=arguments.length,x=new Array(S),E=0;E<S;E++)x[E]=arguments[E];_.default._validateParameters("tint",x);var N=this.color.apply(this,x);this._renderer._tint=N.levels},_.default.prototype.noTint=function(){this._renderer._tint=null},_.default.prototype._getTintedImageCanvas=_.default.Renderer2D.prototype._getTintedImageCanvas,_.default.prototype.imageMode=function(S){_.default._validateParameters("imageMode",arguments),S!==I.CORNER&&S!==I.CORNERS&&S!==I.CENTER||(this._renderer._imageMode=S)},q.default=a=_.default},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=_(a("../core/main")),C=_(a("./filters"));function _(I){return I&&I.__esModule?I:{default:I}}function w(I,D){for(var d=0;d<D.length;d++){var f=D[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,f.key,f)}}M.default.Image=function(){function I(h,p){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var D,d;return D=I,(d=[{key:"pixelDensity",value:function(h){return void 0!==h?(h<=0&&(M.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(v){var p,g=this.gifProperties;v=v._lastRealFrameTime||window.performance.now(),0===g.lastChangeTime&&(g.lastChangeTime=v),g.playing&&(g.timeDisplayed=v-g.lastChangeTime,g.timeDisplayed>=(p=g.frames[g.displayIndex].delay)&&(p=Math.floor(g.timeDisplayed/p),g.timeDisplayed=0,g.lastChangeTime=v,g.displayIndex+=p,g.loopCount=Math.floor(g.displayIndex/g.numFrames),null!==g.loopLimit&&g.loopCount>=g.loopLimit?g.playing=!1:(this.drawingContext.putImageData(g.frames[v=g.displayIndex%g.numFrames].image,0,0),g.displayIndex=v,this.setModified(!0))))}},{key:"_setProperty",value:function(h,p){this[h]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){M.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,p,g,v){M.default.Renderer2D.prototype.updatePixels.call(this,h,p,g,v),this.setModified(!0)}},{key:"get",value:function(h,p,g,v){return M.default._validateParameters("p5.Image.get",arguments),M.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return M.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(h,p,g){M.default.Renderer2D.prototype.set.call(this,h,p,g),this.setModified(!0)}},{key:"resize",value:function(h,p){0===h&&0===p?(h=this.canvas.width,p=this.canvas.height):0===h?h=this.canvas.width*p/this.canvas.height:0===p&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var g=document.createElement("canvas");if(g.width=h,g.height=p,this.gifProperties)for(var v=this.gifProperties,S=0;S<v.numFrames;S++){for(var x=this.drawingContext.createImageData(h,p),E=(G=G=z=K=Z=void 0,v.frames[S].image),N=x,Z=0,K=0;K<N.height;K++)for(var z=0;z<N.width;z++){var G=Math.floor(z*E.width/N.width);G=4*(Math.floor(K*E.height/N.height)*E.width+G),N.data[Z++]=E.data[G++],N.data[Z++]=E.data[G++],N.data[Z++]=E.data[G++],N.data[Z++]=E.data[+G]}v.frames[S].image=x}g.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,g.width,g.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(g,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];M.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(h){var p=this.drawingContext.globalCompositeOperation,g=this._pixelDensity,v=1,S=[h=void 0===h?this:h,0,0,(v=h instanceof M.default.Renderer?h._pInst._pixelDensity:v)*h.width,v*h.height,0,0,g*this.width,g*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var x=0;x<this.gifProperties.frames.length;x++)this.drawingContext.putImageData(this.gifProperties.frames[x].image,0,0),this.copy.apply(this,S),this.gifProperties.frames[x].image=this.drawingContext.getImageData(0,0,g*this.width,g*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,S);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(h,p){C.default.apply(this.canvas,C.default[h],p),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];M.default._validateParameters("p5.Image.blend",arguments),M.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,p){this.gifProperties?M.default.prototype.encodeAndDownloadGif(this,h):M.default.prototype.saveCanvas(this.canvas,h,p)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var p;this.gifProperties&&(h<(p=this.gifProperties).numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,p){if(this.gifProperties){var g=this.gifProperties;if(p<g.numFrames&&0<=p)g.frames[p].delay=h;else{var v=!0,S=void(p=!1);try{for(var x,E=g.frames[Symbol.iterator]();!(v=(x=E.next()).done);v=!0)x.value.delay=h}catch(Z){p=!0,S=Z}finally{try{v||null==E.return||E.return()}finally{if(p)throw S}}}}}}])&&w(D.prototype,d),I}(),q.default=a=M.default.Image},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(a,_e,q){"use strict";a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.filter"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=_(a("../core/main")),C=_(a("./filters"));function _(w){return w&&w.__esModule?w:{default:w}}a("../color/p5.Color"),M.default.prototype.pixels=[],M.default.prototype.blend=function(){for(var w,I=arguments.length,D=new Array(I),d=0;d<I;d++)D[d]=arguments[d];M.default._validateParameters("blend",D),this._renderer?(w=this._renderer).blend.apply(w,D):M.default.Renderer2D.prototype.blend.apply(this,D)},M.default.prototype.copy=function(){for(var w,I,D,d,f,h,p,g,v,S=arguments.length,x=new Array(S),E=0;E<S;E++)x[E]=arguments[E];if(M.default._validateParameters("copy",x),9===x.length)w=x[0],I=x[1],D=x[2],d=x[3],f=x[4],h=x[5],p=x[6],g=x[7],v=x[8];else{if(8!==x.length)throw new Error("Signature not supported");w=this,I=x[0],D=x[1],d=x[2],f=x[3],h=x[4],p=x[5],g=x[6],v=x[7]}M.default.prototype._copyHelper(this,w,I,D,d,f,h,p,g,v)},M.default.prototype._copyHelper=function(w,I,D,d,f,h,p,g,v,S){var x=I.canvas.width/I.width,E=0,N=0;I._renderer&&I._renderer.isP3D&&(E=I.width/2,N=I.height/2),w._renderer&&w._renderer.isP3D?(w.push(),w.resetMatrix(),w.noLights(),w.blendMode(w.BLEND),w.imageMode(w.CORNER),M.default.RendererGL.prototype.image.call(w._renderer,I,D+E,d+N,f,h,p,g,v,S),w.pop()):w.drawingContext.drawImage(I.canvas,x*(D+E),x*(d+N),x*f,x*h,p,g,v,S)},M.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},M.default.prototype.filter=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("filter",I);var p=function(){var g,v={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof M.default.Shader?v.shader=arguments.length<=0?void 0:arguments[0]:(v.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(v.value=arguments.length<=1?void 0:arguments[1]),!1===((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])&&(v.useWebGL=!1)),v}.apply(void 0,I),d=p.shader,f=p.operation,h=p.value;p=p.useWebGL,this._renderer.isP3D&&d?M.default.RendererGL.prototype.filter.call(this._renderer,d):p||this._renderer.isP3D?(!p&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?M.default.RendererGL.prototype.filter.call(this._renderer,f,h):((d=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),d.filter.apply(d,I),this.copy(d._renderer,0,0,this.width,this.height,0,0,this.width,this.height),d.clear())):C.default.apply(void 0!==this.canvas?this.canvas:this.elt,C.default[f],h)},M.default.prototype.get=function(w,I,D,d){var f;return M.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},M.default.prototype.loadPixels=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("loadPixels",I),this._renderer.loadPixels()},M.default.prototype.set=function(w,I,D){this._renderer.set(w,I,D)},M.default.prototype.updatePixels=function(w,I,D,d){M.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(w,I,D,d)},q.default=a=M.default},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(a,_e,q){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/web.url"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=I(a("../core/main")),_=(a("whatwg-fetch"),a("es6-promise/auto"),I(a("fetch-jsonp"))),w=I(a("file-saver"));function I(h){return h&&h.__esModule?h:{default:h}}function D(h){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}function d(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(h,p){p&&!0!==p&&"true"!==p||(p="");var g="";return(h=h||"untitled")&&h.includes(".")&&(g=h.split(".").pop()),p&&g!==p&&(g=p,h="".concat(h,".").concat(g)),[h,g]}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),C.default.prototype.loadJSON=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];C.default._validateParameters("loadJSON",p);for(var v,S,x,E=p[0],N={},Z="json",K=1;K<p.length;K++){var z=p[K];"string"==typeof z?"jsonp"!==z&&"json"!==z||(Z=z):"function"==typeof z?v?S=z:v=z:"object"===D(z)&&(z.hasOwnProperty("jsonpCallback")||z.hasOwnProperty("jsonpCallbackFunction"))&&(Z="jsonp",x=z)}var G=this;return this.httpDo(E,"GET",x,Z,function(ie){for(var X in ie)N[X]=ie[X];void 0!==v&&v(ie),G._decrementPreload()},function(ie){if(C.default._friendlyFileLoadError(5,E),!S)throw ie;S(ie)}),N},C.default.prototype.loadStrings=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];C.default._validateParameters("loadStrings",p);for(var v,S,x=[],E=1;E<p.length;E++){var N=p[E];"function"==typeof N&&(void 0===v?v=N:void 0===S&&(S=N))}var Z=this;return C.default.prototype.httpDo.call(this,p[0],"GET","text",function(K){for(var z=K.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),G=0,ie=z.length;G<ie;G+=32768)Array.prototype.push.apply(x,z.slice(G,Math.min(G+32768,ie)));void 0!==v&&v(x),Z._decrementPreload()},function(K){if(C.default._friendlyFileLoadError(3,K),!S)throw K;S(K)}),x},C.default.prototype.loadTable=function(h){var p,g,v,S=[],x=!1,E=h.substring(h.lastIndexOf(".")+1,h.length);"csv"===E?v=",":"ssv"===E?v=";":"tsv"===E&&(v="\t");for(var N=1;N<arguments.length;N++)"function"==typeof arguments[N]?void 0===p?p=arguments[N]:void 0===g&&(g=arguments[N]):"string"==typeof arguments[N]&&(S.push(arguments[N]),"header"===arguments[N]&&(x=!0),"csv"===arguments[N]?v=",":"ssv"===arguments[N]?v=";":"tsv"===arguments[N]&&(v="\t"));var Z=new C.default.Table,K=this;return this.httpDo(h,"GET","table",function(z){for(var G,ie,X={},Y=[],ve=0,xe=null,ae=function(){X.currentState=0,X.token=""},ge=function(){xe.push(X.token),ae()},ne=function(){X.currentState=4,Y.push(xe),xe=null};;){if(null==(G=z[ve++])){if(X.escaped)throw new Error("Unclosed quote in file.");if(xe){ge(),ne();break}}if(null===xe&&(X.escaped=!1,xe=[],ae()),0===X.currentState){if('"'===G){X.escaped=!0,X.currentState=1;continue}X.currentState=1}if(1===X.currentState&&X.escaped)if('"'===G)'"'===z[ve]?(X.token+='"',ve++):(X.escaped=!1,X.currentState=2);else{if("\r"===G)continue;X.token+=G}else"\r"===G?("\n"===z[ve]&&ve++,ge(),ne()):"\n"===G?(ge(),ne()):G===v?ge():1===X.currentState&&(X.token+=G)}if(x)Z.columns=Y.shift();else for(var J=0;J<Y[0].length;J++)Z.columns[J]="null";for(var ce=0;ce<Y.length;ce++)(1!==Y[ce].length||"undefined"!==Y[ce][0]&&""!==Y[ce][0])&&((ie=new C.default.TableRow).arr=Y[ce],ie.obj=function(Te,et){if(void 0===(et=et||[]))for(var le=0;le<Te.length;le++)et[le.toString()]=le;return Object.fromEntries(et.map(function(V,me){return[V,Te[me]]}))}(Y[ce],Z.columns),Z.addRow(ie));"function"==typeof p&&p(Z),K._decrementPreload()},function(z){C.default._friendlyFileLoadError(2,h),g?g(z):console.error(z)}),Z},C.default.prototype.loadXML=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];for(var v,S,x=new C.default.XML,E=1;E<p.length;E++){var N=p[E];"function"==typeof N&&(void 0===v?v=N:void 0===S&&(S=N))}var Z=this;return this.httpDo(p[0],"GET","xml",function(K){for(var z in K)x[z]=K[z];void 0!==v&&v(x),Z._decrementPreload()},function(K){if(C.default._friendlyFileLoadError(1,K),!S)throw K;S(K)}),x},C.default.prototype.loadBytes=function(h,p,g){var v={},S=this;return this.httpDo(h,"GET","arrayBuffer",function(x){v.bytes=new Uint8Array(x),"function"==typeof p&&p(v),S._decrementPreload()},function(x){if(C.default._friendlyFileLoadError(6,h),!g)throw x;g(x)}),v},C.default.prototype.httpGet=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return C.default._validateParameters("httpGet",p),p.splice(1,0,"GET"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpPost=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return C.default._validateParameters("httpPost",p),p.splice(1,0,"POST"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpDo=function(){for(var h,p,g,v={},S=0,x="text/plain",E=arguments.length-1;0<E&&"function"==typeof(E<0||arguments.length<=E?void 0:arguments[E]);E--)S++;var Z=arguments.length<=0?void 0:arguments[0];if(2==(N=arguments.length-S)&&"string"==typeof Z&&"object"===D(arguments.length<=1?void 0:arguments[1]))ee=new Request(Z,arguments.length<=1?void 0:arguments[1]),p=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var K,z="GET",G=1;G<arguments.length;G++){var ie=G<0||arguments.length<=G?void 0:arguments[G];if("string"==typeof ie)"GET"===ie||"POST"===ie||"PUT"===ie||"DELETE"===ie?z=ie:"json"===ie||"jsonp"===ie||"binary"===ie||"arrayBuffer"===ie||"xml"===ie||"text"===ie||"table"===ie?h=ie:K=ie;else if("number"==typeof ie)K=ie.toString();else if("object"===D(ie))if(ie.hasOwnProperty("jsonpCallback")||ie.hasOwnProperty("jsonpCallbackFunction"))for(var X in ie)v[X]=ie[X];else x=ie instanceof C.default.XML?(K=ie.serialize(),"application/xml"):(K=JSON.stringify(ie),"application/json");else"function"==typeof ie&&(p?g=ie:p=ie)}var N="GET"===z?new Headers:new Headers({"Content-Type":x}),ee=new Request(Z,{method:z,mode:"cors",body:K,headers:N})}return(N=(N="jsonp"===(h=h||(Z.includes("json")?"json":Z.includes("xml")?"xml":"text"))?(0,_.default)(Z,v):fetch(ee)).then(function(Y){if(!Y.ok)throw(ve=new Error(Y.body)).status=Y.status,ve.ok=!1,ve;var ve=0;switch((ve="jsonp"!==h?Y.headers.get("content-length"):ve)&&64e6<ve&&C.default._friendlyFileLoadError(7,Z),h){case"json":case"jsonp":return Y.json();case"binary":return Y.blob();case"arrayBuffer":return Y.arrayBuffer();case"xml":return Y.text().then(function(xe){return xe=(new DOMParser).parseFromString(xe,"text/xml"),new C.default.XML(xe.documentElement)});default:return Y.text()}})).then(p||function(){}),N.catch(g||console.error),N},window.URL=window.URL||window.webkitURL,C.default.prototype._pWriters=[],C.default.prototype.createWriter=function(h,p){var g,v;for(v in C.default.prototype._pWriters)if(C.default.prototype._pWriters[v].name===h)return g=new C.default.PrintWriter(h+this.millis(),p),C.default.prototype._pWriters.push(g),g;return g=new C.default.PrintWriter(h,p),C.default.prototype._pWriters.push(g),g},C.default.PrintWriter=function(h,p){var g=this;this.name=h,this.content="",this.write=function(v){this.content+=v},this.print=function(v){this.content+="".concat(v,"\n")},this.clear=function(){this.content=""},this.close=function(){var v,S=[];for(v in S.push(this.content),C.default.prototype.writeFile(S,h,p),C.default.prototype._pWriters)C.default.prototype._pWriters[v].name===this.name&&C.default.prototype._pWriters.splice(v,1);g.clear(),g={}}},C.default.prototype.save=function(h,p,g){var v=arguments,S=(this._curElement||this).elt;if(0===v.length)C.default.prototype.saveCanvas(S);else if(v[0]instanceof C.default.Renderer||v[0]instanceof C.default.Graphics)C.default.prototype.saveCanvas(v[0].elt,v[1],v[2]);else if(1===v.length&&"string"==typeof v[0])C.default.prototype.saveCanvas(S,v[0]);else switch(f(v[1],v[2])[1]){case"json":return void C.default.prototype.saveJSON(v[0],v[1],v[2]);case"txt":return void C.default.prototype.saveStrings(v[0],v[1],v[2]);default:v[0]instanceof Array?C.default.prototype.saveStrings(v[0],v[1],v[2]):v[0]instanceof C.default.Table?C.default.prototype.saveTable(v[0],v[1],v[2]):v[0]instanceof C.default.Image?C.default.prototype.saveCanvas(v[0].canvas,v[1]):v[0]instanceof C.default.SoundFile&&C.default.prototype.saveSound(v[0],v[1],v[2],v[3])}},C.default.prototype.saveJSON=function(h,p,g){C.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(g.split("\n"),p,"json")},C.default.prototype.saveJSONObject=C.default.prototype.saveJSON,C.default.prototype.saveJSONArray=C.default.prototype.saveJSON,C.default.prototype.saveStrings=function(h,p,g,v){C.default._validateParameters("saveStrings",arguments);for(var S=this.createWriter(p,g||"txt"),x=0;x<h.length;x++)S.write(v?h[x]+"\r\n":h[x]+"\n");S.close(),S.clear()},C.default.prototype.saveTable=function(h,p,g){C.default._validateParameters("saveTable",arguments),v=void 0===g?p.substring(p.lastIndexOf(".")+1,p.length):g;var v,S=this.createWriter(p,v),x=h.columns,E="tsv"===v?"\t":",";if("html"!==v){if("0"!==x[0]){for(var N=0;N<x.length;N++)S.write(N<x.length-1?x[N]+E:x[N]);S.write("\n")}for(var Z=0;Z<h.rows.length;Z++){var K=void 0;for(K=0;K<h.rows[Z].arr.length;K++)K<h.rows[Z].arr.length-1?"csv"===v&&String(h.rows[Z].arr[K]).includes(",")?S.write('"'+h.rows[Z].arr[K]+'"'+E):S.write(h.rows[Z].arr[K]+E):"csv"===v&&String(h.rows[Z].arr[K]).includes(",")?S.write('"'+h.rows[Z].arr[K]+'"'):S.write(h.rows[Z].arr[K]);S.write("\n")}}else{if(S.print("<html>"),S.print("<head>"),S.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),S.print("</head>"),S.print("<body>"),S.print("  <table>"),"0"!==x[0]){S.print("    <tr>");for(var z=0;z<x.length;z++){var G=d(x[z]);S.print("      <td>".concat(G)),S.print("      </td>")}S.print("    </tr>")}for(var ie=0;ie<h.rows.length;ie++){S.print("    <tr>");for(var X=0;X<h.columns.length;X++){var ee=d(h.rows[ie].getString(X));S.print("      <td>".concat(ee)),S.print("      </td>")}S.print("    </tr>")}S.print("  </table>"),S.print("</body>"),S.print("</html>")}S.close(),S.clear()},C.default.prototype.writeFile=function(S,p,g){var v="application/octet-stream";C.default.prototype._isSafari()&&(v="text/plain"),S=new Blob(S,{type:v}),C.default.prototype.downloadFile(S,p,g)},C.default.prototype.downloadFile=function(h,S,x){var v;x=(S=f(S,x))[0],h instanceof Blob?w.default.saveAs(h,x):((v=document.createElement("a")).href=h,v.download=x,v.onclick=function(E){document.body.removeChild(E.target),E.stopPropagation()},v.style.display="none",document.body.appendChild(v),C.default.prototype._isSafari()&&(h=(h='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(S[1],'"'),alert(h)),v.click())},C.default.prototype._checkFileExtension=f,C.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},q.default=a=C.default},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.replace"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(_,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}M.default.Table=function(){function _(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=d}var w,I;return w=_,(I=[{key:"addRow",value:function(d){if(void 0===(d=d||new M.default.TableRow).arr||void 0===d.obj)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d}},{key:"removeRow",value:function(d){this.rows[d].table=null,d=this.rows.splice(d+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(d)}},{key:"getRow",value:function(d){return this.rows[d]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(d,f){if("string"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[f]===d)return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[f]===d)return this.rows[p];return null}},{key:"findRows",value:function(d,f){var h=[];if("string"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].obj[f]===d&&h.push(this.rows[p]);else for(var g=0;g<this.rows.length;g++)this.rows[g].arr[f]===d&&h.push(this.rows[g]);return h}},{key:"matchRow",value:function(d,f){if("number"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[f].match(d))return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[f].match(d))return this.rows[p];return null}},{key:"matchRows",value:function(d,f){var h=[];if("number"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].arr[f].match(d)&&h.push(this.rows[p]);else for(var g=0;g<this.rows.length;g++)this.rows[g].obj[f].match(d)&&h.push(this.rows[g]);return h}},{key:"getColumn",value:function(d){var f=[];if("string"==typeof d)for(var h=0;h<this.rows.length;h++)f.push(this.rows[h].obj[d]);else for(var p=0;p<this.rows.length;p++)f.push(this.rows[p].arr[d]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(d){this.columns.push(d||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(d,f){for(var h=[],p=0;p<d.length;p++)h.push(d.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var g=new RegExp(h.join("|"),"g");if(void 0===f)for(var v=0;v<this.columns.length;v++)for(var S=0;S<this.rows.length;S++){var x=(x=this.rows[S].arr[v]).replace(g,"");this.rows[S].arr[v]=x,this.rows[S].obj[this.columns[v]]=x}else if("string"==typeof f)for(var E=0;E<this.rows.length;E++){var N=(N=this.rows[E].obj[f]).replace(g,""),Z=(this.rows[E].obj[f]=N,this.columns.indexOf(f));this.rows[E].arr[Z]=N}else for(var K=0;K<this.rows.length;K++){var z=(z=this.rows[K].arr[f]).replace(g,"");this.rows[K].arr[f]=z,this.rows[K].obj[this.columns[f]]=z}}},{key:"trim",value:function(d){var f=new RegExp(" ","g");if(void 0===d)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var g=(g=this.rows[p].arr[h]).replace(f,"");this.rows[p].arr[h]=g,this.rows[p].obj[this.columns[h]]=g}else if("string"==typeof d)for(var v=0;v<this.rows.length;v++){var S=(S=this.rows[v].obj[d]).replace(f,""),x=(this.rows[v].obj[d]=S,this.columns.indexOf(d));this.rows[v].arr[x]=S}else for(var E=0;E<this.rows.length;E++){var N=(N=this.rows[E].arr[d]).replace(f,"");this.rows[E].arr[d]=N,this.rows[E].obj[this.columns[d]]=N}}},{key:"removeColumn",value:function(p){var f,h;"string"==typeof p?h=this.columns.indexOf(f=p):f=this.columns[h=p],p=this.columns.splice(h+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(p);for(var g=0;g<this.rows.length;g++){var v=this.rows[g].arr,S=v.splice(h+1,v.length);v.pop(),this.rows[g].arr=v.concat(S),delete this.rows[g].obj[f]}}},{key:"set",value:function(d,f,h){this.rows[d].set(f,h)}},{key:"setNum",value:function(d,f,h){this.rows[d].setNum(f,h)}},{key:"setString",value:function(d,f,h){this.rows[d].setString(f,h)}},{key:"get",value:function(d,f){return this.rows[d].get(f)}},{key:"getNum",value:function(d,f){return this.rows[d].getNum(f)}},{key:"getString",value:function(d,f){return this.rows[d].getString(f)}},{key:"getObject",value:function(d){for(var f,h={},p=0;p<this.rows.length;p++)if(f=this.rows[p].obj,"string"==typeof d){if(!(0<=this.columns.indexOf(d)))throw new Error('This table has no column named "'.concat(d,'"'));h[f[d]]=f}else h[p]=this.rows[p].obj;return h}},{key:"getArray",value:function(){for(var d=[],f=0;f<this.rows.length;f++)d.push(this.rows[f].arr);return d}}])&&C(w.prototype,I),_}(),q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(a,_e,q){"use strict";function M(C,_){for(var w=0;w<_.length;w++){var I=_[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.from-entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.TableRow=function(){function C(D,d){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");var f=[];D&&(f=D.split(d=d||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var _,w;return _=C,(w=[{key:"set",value:function(D,d){if("string"==typeof D){var f=this.table.columns.indexOf(D);if(!(0<=f))throw new Error('This table has no column named "'.concat(D,'"'));this.obj[D]=d,this.arr[f]=d}else{if(!(D<this.table.columns.length))throw new Error("Column #".concat(D," is out of the range of this table"));this.arr[D]=d,this.obj[f=this.table.columns[D]]=d}}},{key:"setNum",value:function(D,d){d=parseFloat(d),this.set(D,d)}},{key:"setString",value:function(D,d){d=d.toString(),this.set(D,d)}},{key:"get",value:function(D){return("string"==typeof D?this.obj:this.arr)[D]}},{key:"getNum",value:function(D){var d=parseFloat("string"==typeof D?this.obj[D]:this.arr[D]);if("NaN"===d.toString())throw"Error: ".concat(this.obj[D]," is NaN (Not a Number)");return d}},{key:"getString",value:function(D){return("string"==typeof D?this.obj:this.arr)[D].toString()}}])&&M(_.prototype,w),C}(),q.default=a=a.default},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.XML=function(){function w(f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");f?this.DOM=f:(f=document.implementation.createDocument(null,"doc"),this.DOM=f.createElement("root"))}var I,D;return I=w,(D=[{key:"getParent",value:function(){return new M.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(f){var h=this.DOM.innerHTML,p=this.DOM.attributes,g=document.implementation.createDocument(null,"default").createElement(f);g.innerHTML=h;for(var v=0;v<p.length;v++)g.setAttribute(p[v].nodeName,p[v].nodeValue);this.DOM=g}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var f=[],h=0;h<this.DOM.childNodes.length;h++)f.push(this.DOM.childNodes[h].nodeName);return f}},{key:"getChildren",value:function(f){return function _(w){for(var I=[],D=0;D<w.length;D++)I.push(new M.default.XML(w[D]));return I}(f?this.DOM.getElementsByTagName(f):this.DOM.children)}},{key:"getChild",value:function(f){if("string"!=typeof f)return new M.default.XML(this.DOM.children[f]);var h=!0,p=!1,g=void 0;try{for(var v,S=this.DOM.children[Symbol.iterator]();!(h=(v=S.next()).done);h=!0){var x=v.value;if(x.tagName===f)return new M.default.XML(x)}}catch(E){p=!0,g=E}finally{try{h||null==S.return||S.return()}finally{if(p)throw g}}}},{key:"addChild",value:function(f){f instanceof M.default.XML&&this.DOM.appendChild(f.DOM)}},{key:"removeChild",value:function(f){var h=-1;if("string"==typeof f){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===f){h=p;break}}else h=f;-1!==h&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var f=[],h=!0,p=!1,g=void 0;try{for(var v,S=this.DOM.attributes[Symbol.iterator]();!(h=(v=S.next()).done);h=!0)f.push(v.value.nodeName)}catch(E){p=!0,g=E}finally{try{h||null==S.return||S.return()}finally{if(p)throw g}}return f}},{key:"hasAttribute",value:function(f){var h={},p=!0,g=!1,v=void 0;try{for(var S,x=this.DOM.attributes[Symbol.iterator]();!(p=(S=x.next()).done);p=!0){var E=S.value;h[E.nodeName]=E.nodeValue}}catch(N){g=!0,v=N}finally{try{p||null==x.return||x.return()}finally{if(g)throw v}}return!!h[f]}},{key:"getNum",value:function(f,h){var p={},g=!0,v=!1,S=void 0;try{for(var x,E=this.DOM.attributes[Symbol.iterator]();!(g=(x=E.next()).done);g=!0){var N=x.value;p[N.nodeName]=N.nodeValue}}catch(Z){v=!0,S=Z}finally{try{g||null==E.return||E.return()}finally{if(v)throw S}}return Number(p[f])||h||0}},{key:"getString",value:function(f,h){var p={},g=!0,v=!1,S=void 0;try{for(var x,E=this.DOM.attributes[Symbol.iterator]();!(g=(x=E.next()).done);g=!0){var N=x.value;p[N.nodeName]=N.nodeValue}}catch(Z){v=!0,S=Z}finally{try{g||null==E.return||E.return()}finally{if(v)throw S}}return p[f]?String(p[f]):h||null}},{key:"setAttribute",value:function(f,h){this.DOM.setAttribute(f,h)}},{key:"getContent",value:function(f){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||f||null}},{key:"setContent",value:function(f){this.DOM.children.length||(this.DOM.textContent=f)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&C(I.prototype,D),w}(),q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.string.includes"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(_){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(_)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.abs=Math.abs,M.default.prototype.ceil=Math.ceil,M.default.prototype.constrain=function(_,w,I){return M.default._validateParameters("constrain",arguments),Math.max(Math.min(_,I),w)},M.default.prototype.dist=function(){for(var _=arguments.length,w=new Array(_),I=0;I<_;I++)w[I]=arguments[I];return M.default._validateParameters("dist",w),4===w.length?Math.hypot(w[2]-w[0],w[3]-w[1]):6===w.length?Math.hypot(w[3]-w[0],w[4]-w[1],w[5]-w[2]):void 0},M.default.prototype.exp=Math.exp,M.default.prototype.floor=Math.floor,M.default.prototype.lerp=function(_,w,I){return M.default._validateParameters("lerp",arguments),I*(w-_)+_},M.default.prototype.log=Math.log,M.default.prototype.mag=function(_,w){return M.default._validateParameters("mag",arguments),Math.hypot(_,w)},M.default.prototype.map=function(_,w,I,D,d,f){return M.default._validateParameters("map",arguments),_=(_-w)/(I-w)*(d-D)+D,f?D<d?this.constrain(_,D,d):this.constrain(_,d,D):_},M.default.prototype.max=function(){for(var _=function(d){return Math.max.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?_(I[0]):_(I)},M.default.prototype.min=function(){for(var _=function(d){return Math.min.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?_(I[0]):_(I)},M.default.prototype.norm=function(_,w,I){return M.default._validateParameters("norm",arguments),this.map(_,w,I,0,1)},M.default.prototype.pow=Math.pow,M.default.prototype.round=function(_,w){return w?(w=Math.pow(10,w),Math.round(_*w)/w):Math.round(_)},M.default.prototype.sq=function(_){return _*_},M.default.prototype.sqrt=Math.sqrt,M.default.prototype.fract=function(D){M.default._validateParameters("fract",arguments);var w,I=0;return D=Number(D),isNaN(D)||Math.abs(D)===1/0?D:(D<0&&(D=-D,I=1),String(D).includes(".")&&!String(D).includes("e")?(w=+("0"+(w=String(D)).slice(w.indexOf("."))),Math.abs(I-w)):D<1?Math.abs(I-D):0)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(w,I,D){return(C=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(d,f,h){var p=[null];return p.push.apply(p,f),f=new(Function.bind.apply(d,p)),h&&_(f,h.prototype),f}).apply(null,arguments)}function _(w,I){return(_=Object.setPrototypeOf||function(D,d){return D.__proto__=d,D})(w,I)}M.default.prototype.createVector=function(w,I,D){return this instanceof M.default?C(M.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new M.default.Vector(w,I,D)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(D,_e,q){"use strict";function M(d){return.5*(1-Math.cos(d*Math.PI))}Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,D=(D=D("../core/main"))&&D.__esModule?D:{default:D};var C,_=4095,w=4,I=.5;D.default.prototype.noise=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==C){C=new Array(4096);for(var p=0;p<4096;p++)C[p]=Math.random()}d<0&&(d=-d),f<0&&(f=-f),h<0&&(h=-h);for(var g,v,S=Math.floor(d),x=Math.floor(f),E=Math.floor(h),N=d-S,Z=f-x,K=h-E,z=0,G=.5,ie=0;ie<w;ie++){var X=S+(x<<4)+(E<<8),ee=M(N),Y=M(Z),ve=C[X&_];ve+=ee*(C[X+1&_]-ve),g=C[X+16&_],ve+=Y*((g+=ee*(C[X+16+1&_]-g))-ve),g=C[(X+=256)&_],g+=ee*(C[X+1&_]-g),v=C[X+16&_],g+=Y*((v+=ee*(C[X+16+1&_]-v))-g),z+=(ve+=M(K)*(g-ve))*G,G*=I,S<<=1,x<<=1,E<<=1,1<=(N*=2)&&(S++,N--),1<=(Z*=2)&&(x++,Z--),1<=(K*=2)&&(E++,K--)}return z},D.default.prototype.noiseDetail=function(d,f){0<d&&(w=d),0<f&&(I=f)},D.default.prototype.noiseSeed=function(d){p=4294967296;var h,p,g_rand=function(){return(h=(1664525*h+1013904223)%p)/p};(function(S){h=(null==S?Math.random()*p:S)>>>0})(d),C=new Array(4096);for(var v=0;v<4096;v++)C[v]=g_rand()},q.default=D=D.default},{"../core/main":283}],316:[function(a,_e,q){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.number.epsilon"),a("core-js/modules/es.number.is-finite"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.some"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.number.epsilon"),a("core-js/modules/es.number.is-finite"),a("core-js/modules/es.string.sub"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(d=a("../core/main"))&&d.__esModule?d:{default:d},w=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var S;Object.prototype.hasOwnProperty.call(f,p)&&((S=v?Object.getOwnPropertyDescriptor(f,p):null)&&(S.get||S.set)?Object.defineProperty(g,p,S):g[p]=f[p])}return g.default=f,h&&h.set(f,g),g}(a("../core/constants"));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}_.default.Vector=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var S,x,E="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],S=(arguments.length<=2?void 0:arguments[2])||0,x=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(S=(arguments.length<=0?void 0:arguments[0])||0,x=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=S,this.y=x,this.z=E}var h,p,g;return h=f,g=[{key:"fromAngle",value:function(v){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new _.default.Vector(S*Math.cos(v),S*Math.sin(v),0)}},{key:"fromAngles",value:function(K,N){var x=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,E=Math.cos(N),Z=(N=Math.sin(N),Math.cos(K));return K=Math.sin(K),new _.default.Vector(x*K*N,-x*Z,x*K*E)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*w.TWO_PI)}},{key:"random3D",value:function(){var v=Math.random()*w.TWO_PI,S=2*Math.random()-1,x=(E=Math.sqrt(1-S*S))*Math.cos(v),E=E*Math.sin(v);return new _.default.Vector(x,E,S)}},{key:"copy",value:function(v){return v.copy(v)}},{key:"add",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return Z?Z.set(E):(Z=E.copy(),3===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),Z.add(N),Z}},{key:"rem",value:function(v,S){if(v instanceof _.default.Vector&&S instanceof _.default.Vector)return(v=v.copy()).rem(S),v}},{key:"sub",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return Z?Z.set(E):(Z=E.copy(),3===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),Z.sub(N),Z}},{key:"mult",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return Z?Z.set(E):(Z=E.copy(),3===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),Z.mult(N),Z}},{key:"rotate",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return 2===S.length?Z=E.copy():(Z instanceof _.default.Vector||_.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),Z.set(E)),Z.rotate(N),Z}},{key:"div",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return Z?Z.set(E):(Z=E.copy(),3===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),Z.div(N),Z}},{key:"dot",value:function(v,S){return v.dot(S)}},{key:"cross",value:function(v,S){return v.cross(S)}},{key:"dist",value:function(v,S){return v.dist(S)}},{key:"lerp",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2],K=S[3];return K?K.set(E):(K=E.copy(),4===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),K.lerp(N,Z),K}},{key:"slerp",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2],K=S[3];return K?K.set(E):(K=E.copy(),4===S.length&&_.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),K.slerp(N,Z),K}},{key:"mag",value:function(v){return v.mag()}},{key:"magSq",value:function(v){return v.magSq()}},{key:"normalize",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1];return S.length<2?N=E.copy():(N instanceof _.default.Vector||_.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),N.set(E)),N.normalize()}},{key:"limit",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return S.length<3?Z=E.copy():(Z instanceof _.default.Vector||_.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),Z.set(E)),Z.limit(N)}},{key:"setMag",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return S.length<3?Z=E.copy():(Z instanceof _.default.Vector||_.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),Z.set(E)),Z.setMag(N)}},{key:"heading",value:function(v){return v.heading()}},{key:"angleBetween",value:function(v,S){return v.angleBetween(S)}},{key:"reflect",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];return S.length<3?Z=E.copy():(Z instanceof _.default.Vector||_.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),Z.set(E)),Z.reflect(N)}},{key:"array",value:function(v){return v.array()}},{key:"equals",value:function(v,S){var x;return v instanceof _.default.Vector?x=v:Array.isArray(v)?x=(new _.default.Vector).set(v):_.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),x.equals(S)}}],(p=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(v,S,x){return v instanceof _.default.Vector?(this.x=v.x||0,this.y=v.y||0,this.z=v.z||0):Array.isArray(v)?(this.x=v[0]||0,this.y=v[1]||0,this.z=v[2]||0):(this.x=v||0,this.y=S||0,this.z=x||0),this}},{key:"copy",value:function(){return this.isPInst?new _.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new _.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(v,S,x){return v instanceof _.default.Vector?(this.x+=v.x||0,this.y+=v.y||0,this.z+=v.z||0):Array.isArray(v)?(this.x+=v[0]||0,this.y+=v[1]||0,this.z+=v[2]||0):(this.x+=v||0,this.y+=S||0,this.z+=x||0),this}},{key:"calculateRemainder2D",value:function(v,S){return 0!==v&&(this.x=this.x%v),0!==S&&(this.y=this.y%S),this}},{key:"calculateRemainder3D",value:function(v,S,x){return 0!==v&&(this.x=this.x%v),0!==S&&(this.y=this.y%S),0!==x&&(this.z=this.z%x),this}},{key:"rem",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E,N,Z,K=S[0],z=S[1],G=S[2];if(K instanceof _.default.Vector){if([K.x,K.y,K.z].every(Number.isFinite))return E=parseFloat(K.x),N=parseFloat(K.y),Z=parseFloat(K.z),this.calculateRemainder3D(E,N,Z)}else if(Array.isArray(K)){if(K.every(Number.isFinite))return 2===K.length?this.calculateRemainder2D(K[0],K[1]):3===K.length?this.calculateRemainder3D(K[0],K[1],K[2]):void 0}else if(1===S.length){if(Number.isFinite(K)&&0!==K)return this.x=this.x%K,this.y=this.y%K,this.z=this.z%K,this}else if(2===S.length){if(S.every(Number.isFinite))return this.calculateRemainder2D(K,z)}else if(3===S.length&&S.every(Number.isFinite))return this.calculateRemainder3D(K,z,G)}},{key:"sub",value:function(v,S,x){return v instanceof _.default.Vector?(this.x-=v.x||0,this.y-=v.y||0,this.z-=v.z||0):Array.isArray(v)?(this.x-=v[0]||0,this.y-=v[1]||0,this.z-=v[2]||0):(this.x-=v||0,this.y-=S||0,this.z-=x||0),this}},{key:"mult",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E,N=S[0],Z=S[1],K=S[2];return N instanceof _.default.Vector?Number.isFinite(N.x)&&Number.isFinite(N.y)&&Number.isFinite(N.z)&&"number"==typeof N.x&&"number"==typeof N.y&&"number"==typeof N.z?(this.x*=N.x,this.y*=N.y,this.z*=N.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(N)?N.every(function(z){return Number.isFinite(z)})&&N.every(function(z){return"number"==typeof z})?1===N.length?(this.x*=N[0],this.y*=N[0],this.z*=N[0]):2===N.length?(this.x*=N[0],this.y*=N[1]):3===N.length&&(this.x*=N[0],this.y*=N[1],this.z*=N[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(E=S).every(function(z){return Number.isFinite(z)})&&E.every(function(z){return"number"==typeof z})?(1===S.length&&(this.x*=N,this.y*=N,this.z*=N),2===S.length&&(this.x*=N,this.y*=Z),3===S.length&&(this.x*=N,this.y*=Z,this.z*=K)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var v=arguments.length,S=new Array(v),x=0;x<v;x++)S[x]=arguments[x];var E=S[0],N=S[1],Z=S[2];if(E instanceof _.default.Vector)if(Number.isFinite(E.x)&&Number.isFinite(E.y)&&Number.isFinite(E.z)&&"number"==typeof E.x&&"number"==typeof E.y&&"number"==typeof E.z){var K=0===E.z&&0===this.z;if(0===E.x||0===E.y||!K&&0===E.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=E.x,this.y/=E.y,K||(this.z/=E.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(E))if(E.every(Number.isFinite)&&E.every(function(z){return"number"==typeof z})){if(E.some(function(z){return 0===z}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===E.length?(this.x/=E[0],this.y/=E[0],this.z/=E[0]):2===E.length?(this.x/=E[0],this.y/=E[1]):3===E.length&&(this.x/=E[0],this.y/=E[1],this.z/=E[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(S.every(Number.isFinite)&&S.every(function(z){return"number"==typeof z})){if(S.some(function(z){return 0===z}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===S.length&&(this.x/=E,this.y/=E,this.z/=E),2===S.length&&(this.x/=E,this.y/=N),3===S.length&&(this.x/=E,this.y/=N,this.z/=Z)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var v=this.x,S=this.y,x=this.z;return v*v+S*S+x*x}},{key:"dot",value:function(v,S,x){return v instanceof _.default.Vector?this.dot(v.x,v.y,v.z):this.x*(v||0)+this.y*(S||0)+this.z*(x||0)}},{key:"cross",value:function(E){var S=this.y*E.z-this.z*E.y,x=this.z*E.x-this.x*E.z;return E=this.x*E.y-this.y*E.x,this.isPInst?new _.default.Vector(this._fromRadians,this._toRadians,S,x,E):new _.default.Vector(S,x,E)}},{key:"dist",value:function(v){return v.copy().sub(this).mag()}},{key:"normalize",value:function(){var v=this.mag();return 0!==v&&this.mult(1/v),this}},{key:"limit",value:function(v){var S=this.magSq();return v*v<S&&this.div(Math.sqrt(S)).mult(v),this}},{key:"setMag",value:function(v){return this.normalize().mult(v)}},{key:"heading",value:function(){var v=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(v):v}},{key:"setHeading",value:function(v){this.isPInst&&(v=this._toRadians(v));var S=this.mag();return this.x=S*Math.cos(v),this.y=S*Math.sin(v),this}},{key:"rotate",value:function(S){S=this.heading()+S;var x=(this.isPInst&&(S=this._toRadians(S)),this.mag());return this.x=Math.cos(S)*x,this.y=Math.sin(S)*x,this}},{key:"angleBetween",value:function(v){var S;return this.magSq()*v.magSq()==0?NaN:(S=this.cross(v),v=Math.atan2(S.mag(),this.dot(v))*Math.sign(S.z||1),this.isPInst?this._fromRadians(v):v)}},{key:"lerp",value:function(v,S,x,E){return v instanceof _.default.Vector?this.lerp(v.x,v.y,v.z,S):(this.x+=(v-this.x)*E||0,this.y+=(S-this.y)*E||0,this.z+=(x-this.z)*E||0,this)}},{key:"slerp",value:function(v,S){if(0!==S){if(1===S)return this.set(v);var x=this.mag(),E=v.mag();if(x*E==0)this.mult(1-S).add(v.x*S,v.y*S,v.z*S);else{var N=this.cross(v),Z=N.mag(),K=Math.atan2(Z,this.dot(v));if(0<Z)N.x/=Z,N.y/=Z,N.z/=Z;else{if(K<.5*Math.PI)return this.mult(1-S).add(v.x*S,v.y*S,v.z*S),this;0===this.z&&0===v.z?N.set(0,0,1):0!==this.x?N.set(this.y,-this.x,0).normalize():N.set(1,0,0)}Z=N.cross(this),N=(v=1-S+S*E/x)*Math.cos(S*K),E=v*Math.sin(S*K),this.x=this.x*N+Z.x*E,this.y=this.y*N+Z.y*E,this.z=this.z*N+Z.z*E}}return this}},{key:"reflect",value:function(v){return v=_.default.Vector.normalize(v),this.sub(v.mult(2*this.dot(v)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(Z,S,x){var E,N;return Z=Z instanceof _.default.Vector?(E=Z.x||0,N=Z.y||0,Z.z||0):Array.isArray(Z)?(E=Z[0]||0,N=Z[1]||0,Z[2]||0):(E=Z||0,N=S||0,x||0),this.x===E&&this.y===N&&this.z===Z}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(v){return Math.abs(+(v||0))<=Number.EPSILON?0:v}}])&&D(h.prototype,p),g&&D(h,g),f}();var d=_.default.Vector;q.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(I,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I},C="_lcg_random_state",_=4294967296,w=0;M.default.prototype._lcg=function(D){return this[D]=(1664525*this[D]+1013904223)%_,this[D]/_},M.default.prototype._lcgSetSeed=function(D,d){this[D]=(null==d?Math.random()*_:d)>>>0},M.default.prototype.randomSeed=function(D){this._lcgSetSeed(C,D),this._gaussian_previous=!1},M.default.prototype.random=function(D,d){var f,h;return M.default._validateParameters("random",arguments),f=null!=this[C]?this._lcg(C):Math.random(),void 0===D?f:void 0===d?Array.isArray(D)?D[Math.floor(f*D.length)]:f*D:(d<D&&(h=D,D=d,d=h),f*(d-D)+D)},M.default.prototype.randomGaussian=function(D){var d,f,h,p,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)d=w,this._gaussian_previous=!1;else{for(;1<=(p=(f=this.random(2)-1)*f+(h=this.random(2)-1)*h););d=f*(p=Math.sqrt(-2*Math.log(p)/p)),w=h*p,this._gaussian_previous=!0}return d*g+(D||0)},q.default=I=M.default},{"../core/main":283}],318:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}_.default.prototype._angleMode=w.RADIANS,_.default.prototype.acos=function(d){return this._fromRadians(Math.acos(d))},_.default.prototype.asin=function(d){return this._fromRadians(Math.asin(d))},_.default.prototype.atan=function(d){return this._fromRadians(Math.atan(d))},_.default.prototype.atan2=function(d,f){return this._fromRadians(Math.atan2(d,f))},_.default.prototype.cos=function(d){return Math.cos(this._toRadians(d))},_.default.prototype.sin=function(d){return Math.sin(this._toRadians(d))},_.default.prototype.tan=function(d){return Math.tan(this._toRadians(d))},_.default.prototype.degrees=function(d){return d*w.RAD_TO_DEG},_.default.prototype.radians=function(d){return d*w.DEG_TO_RAD},_.default.prototype.angleMode=function(d){if(_.default._validateParameters("angleMode",arguments),void 0===d)return this._angleMode;d!==w.DEGREES&&d!==w.RADIANS||d!==this._angleMode&&(d===w.RADIANS?(this._setProperty("pRotationX",this.pRotationX*w.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*w.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*w.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*w.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*w.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*w.RAD_TO_DEG)),this._angleMode=d)},_.default.prototype._toRadians=function(d){return this._angleMode===w.DEGREES?d*w.DEG_TO_RAD:d},_.default.prototype._toDegrees=function(d){return this._angleMode===w.RADIANS?d*w.RAD_TO_DEG:d},_.default.prototype._fromRadians=function(d){return this._angleMode===w.DEGREES?d*w.RAD_TO_DEG:d},_.default.prototype._fromDegrees=function(d){return this._angleMode===w.RADIANS?d*w.DEG_TO_RAD:d};var D=_.default;q.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(a,_e,q){"use strict";a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.textAlign=function(C,_){var w;return M.default._validateParameters("textAlign",arguments),(w=this._renderer).textAlign.apply(w,arguments)},M.default.prototype.textLeading=function(C){var _;return M.default._validateParameters("textLeading",arguments),(_=this._renderer).textLeading.apply(_,arguments)},M.default.prototype.textSize=function(C){var _;return M.default._validateParameters("textSize",arguments),(_=this._renderer).textSize.apply(_,arguments)},M.default.prototype.textStyle=function(C){var _;return M.default._validateParameters("textStyle",arguments),(_=this._renderer).textStyle.apply(_,arguments)},M.default.prototype.textWidth=function(){for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];if(_[0]+="",M.default._validateParameters("textWidth",_),0===_[0].length)return 0;for(var I=_[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),D=[],d=0;d<I.length;d++)D.push(this._renderer.textWidth(I[d]));return Math.max.apply(Math,D)},M.default.prototype.textAscent=function(){for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];return M.default._validateParameters("textAscent",_),this._renderer.textAscent()},M.default.prototype.textDescent=function(){for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];return M.default._validateParameters("textDescent",_),this._renderer.textDescent()},M.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},M.default.prototype.textWrap=function(C){return M.default._validateParameters("textWrap",[C]),this._renderer.textWrap(C)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(a,_e,q){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.split"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=d(a("../core/constants")),I=d(a("opentype.js"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var g,v,S={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&((v=x?Object.getOwnPropertyDescriptor(h,g):null)&&(v.get||v.set)?Object.defineProperty(S,g,v):S[g]=h[g]);return S.default=h,p&&p.set(h,S),S}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),_.default.prototype.loadFont=function(h,p,g){_.default._validateParameters("loadFont",arguments);var v=new _.default.Font(this),S=this;return I.load(h,function(N,Z){if(N)return _.default._friendlyFileLoadError(4,h),void 0!==g?g(N):void console.error(N,h);v.font=Z,void 0!==p&&p(v),S._decrementPreload();var K=(Z=(N=h.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:N.slice(Z+1);["ttf","otf","woff","woff2"].includes(K)&&(K=N.slice(0,-1!==Z?Z:0),(N=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(K,";\nsrc: url(").concat(h,");\n}\n"))),document.head.appendChild(N))}),v},_.default.prototype.text=function(h,p,g,v,S){var x;return _.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(x=this._renderer).text.apply(x,arguments):this},_.default.prototype.textFont=function(h,p){if(_.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),p&&(this._renderer._setProperty("_textSize",p),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",p*w._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=_.default;q.default=f},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(a,_e,q){"use strict";function M(z){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(G){return typeof G}:function(G){return G&&"function"==typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(z)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.function.name"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(C=a("../core/main"))&&C.__esModule?C:{default:C},_=function(z){if(z&&z.__esModule)return z;if(null===z||"object"!==I(z)&&"function"!=typeof z)return{default:z};var G=w();if(G&&G.has(z))return G.get(z);var ie,X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ie in z){var Y;Object.prototype.hasOwnProperty.call(z,ie)&&((Y=ee?Object.getOwnPropertyDescriptor(z,ie):null)&&(Y.get||Y.set)?Object.defineProperty(X,ie,Y):X[ie]=z[ie])}return X.default=z,G&&G.set(z,X),X}(a("../core/constants"));function w(){var z;return"function"!=typeof WeakMap?null:(w=function(){return z},z=new WeakMap)}function I(z){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(G){return M(G)}:function(G){return G&&"function"==typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":M(G)})(z)}function D(z,G){for(var ie=0;ie<G.length;ie++){var X=G[ie];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(z,X.key,X)}}function d(z,G){var ie=z.length;return z[G<0?G%ie+ie:G%ie]}function f(z,G,ie,X){var ee,Y,ve;return X?(void 0===f.tmpPoint1&&(f.tmpPoint1=[],f.tmpPoint2=[]),ve=f.tmpPoint2,(Y=f.tmpPoint1).x=G.x-z.x,Y.y=G.y-z.y,ve.x=ie.x-G.x,ve.y=ie.y-G.y,ee=Y.x*ve.x+Y.y*ve.y,Y=Math.sqrt(Y.x*Y.x+Y.y*Y.y),ve=Math.sqrt(ve.x*ve.x+ve.y*ve.y),Math.acos(ee/(Y*ve))<X):(G[0]-z[0])*(ie[1]-z[1])-(ie[0]-z[0])*(G[1]-z[1])==0}function h(V,Oe,me,Xe,dt,Y,ve,xe,ae){var ge=1-ae,ne=(J=Math.pow(ge,3))*V+3*(ce=Math.pow(ge,2))*ae*me+3*ge*ae*ae*dt+(Te=(le=ae*ae)*ae)*ve,J=J*Oe+3*ce*ae*Xe+3*ge*ae*ae*Y+Te*xe,ce=V+2*ae*(me-V)+le*(dt-2*me+V),Te=Oe+2*ae*(Xe-Oe)+le*(Y-2*Xe+Oe),et=me+2*ae*(dt-me)+le*(ve-2*dt+me),le=Xe+2*ae*(Y-Xe)+le*(xe-2*Y+Xe);return V=ge*V+ae*me,me=ge*Oe+ae*Xe,Oe=ge*dt+ae*ve,Xe=ge*Y+ae*xe,dt=90-180*Math.atan2(ce-et,Te-le)/Math.PI,(et<ce||Te<le)&&(dt+=180),{x:ne,y:J,m:{x:ce,y:Te},n:{x:et,y:le},start:{x:V,y:me},end:{x:Oe,y:Xe},alpha:dt}}function p(z,G,ie,X,ee,Y,ve,xe,ae){return null==ae?Z(z,G,ie,X,ee,Y,ve,xe):h(z,G,ie,X,ee,Y,ve,xe,function(ge,ne,J,ce,Te,et,le,V,me){if(!(me<0||Z(ge,ne,J,ce,Te,et,le,V)<me)){var Oe,Xe=.5,dt=1-Xe;for(Oe=Z(ge,ne,J,ce,Te,et,le,V,dt);.01<Math.abs(Oe-me);)Oe=Z(ge,ne,J,ce,Te,et,le,V,dt+=(Oe<me?1:-1)*(Xe/=2));return dt}}(z,G,ie,X,ee,Y,ve,xe,ae))}function g(z,G,ie){for(var X,ee,Y,ve,xe,ae=0,ge=0,ne=(z=function(J,ce){function Te(St,zt,fn){var $n,En;if(!St)return["C",zt.x,zt.y,zt.x,zt.y,zt.x,zt.y];switch(St[0]in{T:1,Q:1}||(zt.qx=zt.qy=null),St[0]){case"M":zt.X=St[1],zt.Y=St[2];break;case"A":St=["C"].concat(S.apply(0,[zt.x,zt.y].concat(St.slice(1))));break;case"S":En="C"===fn||"S"===fn?($n=2*zt.x-zt.bx,2*zt.y-zt.by):($n=zt.x,zt.y),St=["C",$n,En].concat(St.slice(1));break;case"T":"Q"===fn||"T"===fn?(zt.qx=2*zt.x-zt.qx,zt.qy=2*zt.y-zt.qy):(zt.qx=zt.x,zt.qy=zt.y),St=["C"].concat(N(zt.x,zt.y,zt.qx,zt.qy,St[1],St[2]));break;case"Q":zt.qx=St[1],zt.qy=St[2],St=["C"].concat(N(zt.x,zt.y,St[1],St[2],St[3],St[4]));break;case"L":St=["C"].concat(E(zt.x,zt.y,St[1],St[2]));break;case"H":St=["C"].concat(E(zt.x,zt.y,St[1],zt.y));break;case"V":St=["C"].concat(E(zt.x,zt.y,zt.x,St[1]));break;case"Z":St=["C"].concat(E(zt.x,zt.y,zt.X,zt.Y))}return St}function et(St,zt){if(7<St[zt].length){St[zt].shift();for(var fn=St[zt];fn.length;)yt[zt]="A",Oe&&(Ut[zt]="A"),St.splice(zt++,0,["C"].concat(fn.splice(0,6)));St.splice(zt,1),V=Math.max(me.length,Oe&&Oe.length||0)}}function le(St,zt,fn,$n,En){St&&zt&&"M"===St[En][0]&&"M"!==zt[En][0]&&(zt.splice(En,0,["M",$n.x,$n.y]),fn.bx=0,fn.by=0,fn.x=St[En][1],fn.y=St[En][2],V=Math.max(me.length,Oe&&Oe.length||0))}var V,me=v(J),Oe=undefined,Xe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},yt=[],Ut=[],ht="",Lt="";V=Math.max(me.length,Oe&&Oe.length||0);for(var kt=0;kt<V;kt++){"C"!==(ht=me[kt]?me[kt][0]:ht)&&(yt[kt]=ht,kt&&(Lt=yt[kt-1])),me[kt]=Te(me[kt],Xe,Lt),"A"!==yt[kt]&&"C"===ht&&(yt[kt]="C"),et(me,kt),Oe&&("C"!==(ht=Oe[kt]?Oe[kt][0]:ht)&&(Ut[kt]=ht,kt&&(Lt=Ut[kt-1])),Oe[kt]=Te(Oe[kt],dt,Lt),"A"!==Ut[kt]&&"C"===ht&&(Ut[kt]="C"),et(Oe,kt)),le(me,Oe,Xe,dt,kt),le(Oe,me,dt,Xe,kt);var lt=me[kt],It=Oe&&Oe[kt],bt=lt.length,Pt=Oe&&It.length;Xe.x=lt[bt-2],Xe.y=lt[bt-1],Xe.bx=parseFloat(lt[bt-4])||Xe.x,Xe.by=parseFloat(lt[bt-3])||Xe.y,dt.bx=Oe&&(parseFloat(It[Pt-4])||dt.x),dt.by=Oe&&(parseFloat(It[Pt-3])||dt.y),dt.x=Oe&&It[Pt-2],dt.y=Oe&&It[Pt-1]}return Oe?[me,Oe]:me}(z)).length;ge<ne;ge++){if("M"===(Y=z[ge])[0])X=+Y[1],ee=+Y[2];else{if(G<ae+(ve=p(X,ee,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]))&&!ie)return{x:(xe=p(X,ee,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],G-ae)).x,y:xe.y,alpha:xe.alpha};ae+=ve,X=+Y[5],ee=+Y[6]}Y.shift()}return(xe=ie?ae:h(X,ee,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],1)).alpha?{x:xe.x,y:xe.y,alpha:xe.alpha}:xe}function v(z){var G=[],ie=0,X=0,ee=0,Y=0,ve=0;if(z){"M"===z[0][0]&&(ee=ie=+z[0][1],Y=X=+z[0][2],ve++,G[0]=["M",ie,X]);for(var xe,ae,ge=3===z.length&&"M"===z[0][0]&&"R"===z[1][0].toUpperCase()&&"Z"===z[2][0].toUpperCase(),ne=ve,J=z.length;ne<J;ne++){if(G.push(xe=[]),(ae=z[ne])[0]!==ae[0].toUpperCase())switch(xe[0]=ae[0].toUpperCase(),xe[0]){case"A":xe[1]=ae[1],xe[2]=ae[2],xe[3]=ae[3],xe[4]=ae[4],xe[5]=ae[5],xe[6]=+(ae[6]+ie),xe[7]=+(ae[7]+X);break;case"V":xe[1]=+ae[1]+X;break;case"H":xe[1]=+ae[1]+ie;break;case"R":for(var ce,Te=2,et=(ce=[ie,X].concat(ae.slice(1))).length;Te<et;Te++)ce[Te]=+ce[Te]+ie,ce[++Te]=+ce[Te]+X;G.pop(),G=G.concat(x(ce,ge));break;case"M":ee=+ae[1]+ie,Y=+ae[2]+X;break;default:for(var le=1,V=ae.length;le<V;le++)xe[le]=+ae[le]+(le%2?ie:X)}else if("R"===ae[0])ce=[ie,X].concat(ae.slice(1)),G.pop(),G=G.concat(x(ce,ge)),xe=["R"].concat(ae.slice(-2));else for(var me=0,Oe=ae.length;me<Oe;me++)xe[me]=ae[me];switch(xe[0]){case"Z":ie=ee,X=Y;break;case"H":ie=xe[1];break;case"V":X=xe[1];break;case"M":ee=xe[xe.length-2],Y=xe[xe.length-1];break;default:ie=xe[xe.length-2],X=xe[xe.length-1]}}}return G}function S(z,G,ie,X,Oe,yt,Xe,xe,ae,ge){function ne(Pt,St,zt){return{x:Pt*Math.cos(zt)-St*Math.sin(zt),y:Pt*Math.sin(zt)+St*Math.cos(zt)}}var J,me=120*(V=Math.PI)/180,ce=V/180*(+Oe||0),Te=[],et=(ge?(kt=ge[0],J=ge[1],ht=ge[2],Lt=ge[3]):(z=(dt=ne(z,G,-ce)).x,G=dt.y,1<(et=(le=(z-(xe=(dt=ne(xe,ae,-ce)).x))/2)*le/(ie*ie)+(dt=(G-(ae=dt.y))/2)*dt/(X*X))&&(ie*=et=Math.sqrt(et),X*=et),et=ie*ie,Ut=X*X,ht=(yt=(yt===Xe?-1:1)*Math.sqrt(Math.abs((et*Ut-et*dt*dt-Ut*le*le)/(et*dt*dt+Ut*le*le))))*ie*dt/X+(z+xe)/2,Lt=yt*-X*le/ie+(G+ae)/2,kt=Math.asin(((G-Lt)/X).toFixed(9)),J=Math.asin(((ae-Lt)/X).toFixed(9)),(kt=z<ht?V-kt:kt)<0&&(kt=2*V+kt),(J=xe<ht?V-J:J)<0&&(J=2*V+J),Xe&&J<kt&&(kt-=2*V),!Xe&&kt<J&&(J-=2*V)),J-kt),le=(Math.abs(et)>me&&(Ut=J,dt=xe,yt=ae,J=kt+me*(Xe&&kt<J?1:-1),Te=S(xe=ht+ie*Math.cos(J),ae=Lt+X*Math.sin(J),ie,X,Oe,0,Xe,dt,yt,[J,Ut,ht,Lt])),et=J-kt,Math.cos(kt)),V=Math.sin(kt),dt=(me=Math.cos(J),Oe=Math.sin(J),4/3*ie*(Xe=Math.tan(et/4))),Ut=[z,G],ht=[z+dt*V,G-(yt=4/3*X*Xe)*le],Lt=[xe+dt*Oe,ae-yt*me],kt=[xe,ae];if(ht[0]=2*Ut[0]-ht[0],ht[1]=2*Ut[1]-ht[1],ge)return[ht,Lt,kt].concat(Te);for(var lt=[],It=0,bt=(Te=[ht,Lt,kt].concat(Te).join().split(",")).length;It<bt;It++)lt[It]=It%2?ne(Te[It-1],Te[It],ce).y:ne(Te[It],Te[It+1],ce).x;return lt}function x(z,G){for(var ie=[],X=0,ee=z.length;X<ee-2*!G;X+=2){var Y=[{x:+z[X-2],y:+z[X-1]},{x:+z[X],y:+z[X+1]},{x:+z[X+2],y:+z[X+3]},{x:+z[X+4],y:+z[X+5]}];G?X?ee-4===X?Y[3]={x:+z[0],y:+z[1]}:ee-2===X&&(Y[2]={x:+z[0],y:+z[1]},Y[3]={x:+z[2],y:+z[3]}):Y[0]={x:+z[ee-2],y:+z[ee-1]}:ee-4===X?Y[3]=Y[2]:X||(Y[0]={x:+z[X],y:+z[X+1]}),ie.push(["C",(6*Y[1].x-Y[0].x+Y[2].x)/6,(6*Y[1].y-Y[0].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return ie}function E(z,G,ie,X){return[z,G,ie,X,ie,X]}function N(z,G,ie,X,ee,Y){return[1/3*z+2/3*ie,1/3*G+2/3*X,1/3*ee+2/3*ie,1/3*Y+2/3*X,ee,Y]}function Z(z,G,ie,X,ee,Y,ve,xe,ae){for(var ge=(ae=1<(ae=null==ae?1:ae)?1:ae<0?0:ae)/2,ne=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],J=0,ce=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Te=0;Te<12;Te++){var et=K(le=ge*ne[Te]+ge,z,ie,ee,ve),le=K(le,G,X,Y,xe);J+=ce[Te]*Math.sqrt(et*et+le*le)}return ge*J}function K(z,G,ie,X,ee){return z*(z*(-3*G+9*ie-9*X+3*ee)+6*G-12*ie+6*X)-3*G+3*ie}C.default.Font=function(){function z(ee){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");this.parent=ee,this.cache={},this.font=void 0}var G,ie;return G=z,(ie=[{key:"textBounds",value:function(ee){var Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,ve=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,xe=4<arguments.length?arguments[4]:void 0,ae=xe&&xe.renderer&&xe.renderer._pInst||this.parent,ge=ae._renderer.drawingContext,ne=(ne=3<arguments.length?arguments[3]:void 0)||ae._renderer._textSize;if(!yt){for(var J=[],ce=[],Te=[],et=(Te[0]=[],[]),le=this._scale(ne),V=ae._renderer.textLeading(),me=0,Oe=(this.font.forEachGlyph(ee,Y,ve,ne,xe,function(Lt,kt,lt,It){var bt=Lt.getMetrics();0===Lt.index?Te[me+=1]=[]:(Te[me].push(kt+bt.xMin*le),Te[me].push(kt+bt.xMax*le),et.push(lt+me*V+-bt.yMin*le),et.push(lt+me*V+-bt.yMax*le))}),0<Te[me].length&&(J[me]=Math.min.apply(null,Te[me]),ce[me]=Math.max.apply(null,Te[me])),0),Xe=0;Xe<=me;Xe++){J[Xe]=Math.min.apply(null,Te[Xe]),ce[Xe]=Math.max.apply(null,Te[Xe]);var dt=ce[Xe]-J[Xe];Oe<dt&&(Oe=dt)}var yt={x:ge=Math.min.apply(null,J),y:ve=Math.min.apply(null,et),h:Math.max.apply(null,et)-ve,w:Oe,advance:ge-Y};ne=this._handleAlignment(ae._renderer,ee,yt.x,yt.y,yt.w+yt.advance),yt.x=ne.x,yt.y=ne.y}return yt}},{key:"textToPoints",value:function(ee,Y,ve,xe,ae){var ge=Y,ne=[],J=ee.split(/\r?\n|\r|\n/g);xe=xe||this.parent._renderer._textSize;for(var ce,Te,et,le=0;le<J.length;le++){var V=0;Y=ge;for(var me=(me=J[le]).replace("\t","  "),Oe=this._getGlyphs(me),Xe=0;Xe<Oe.length;Xe++){if(Te=me,!((et=Oe)[ce=Xe].name&&"space"===et[ce].name||Te.length===et.length&&" "===Te[ce]))for(var dt=function(Lt){for(var kt,lt=[],It=0;It<Lt.length;It++)"M"===Lt[It].type&&(kt&&lt.push(kt),kt=[]),kt.push((Pt=void 0,Pt=[(bt=Lt[It]).type],"M"===bt.type||"L"===bt.type?Pt.push(bt.x,bt.y):"C"===bt.type?Pt.push(bt.x1,bt.y1,bt.x2,bt.y2,bt.x,bt.y):"Q"===bt.type&&Pt.push(bt.x1,bt.y1,bt.x,bt.y),Pt));var bt,Pt;return lt.push(kt),lt}(Oe[Xe].getPath(Y,ve,xe).commands),yt=0;yt<dt.length;yt++)for(var Ut=function(Lt,kt){kt=function(zt,fn){if("object"!==I(zt))zt=fn;else for(var $n in fn)void 0===zt[$n]&&(zt[$n]=fn[$n]);return zt}(kt,{sampleFactor:.1,simplifyThreshold:0});for(var lt=g(Lt,0,1),It=lt/(lt*kt.sampleFactor),bt=[],Pt=0;Pt<lt;Pt+=It)bt.push(g(Lt,Pt));return kt.simplifyThreshold&&function(St){for(var zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,$n=St.length-1;3<St.length&&0<=$n;--$n)f(d(St,$n-1),d(St,$n),d(St,$n+1),zt)&&St.splice($n%St.length,1)}(bt,kt.simplifyThreshold),bt}(dt[yt],ae),ht=0;ht<Ut.length;ht++)Ut[ht].x+=V,ne.push(Ut[ht]);V+=Oe[Xe].advanceWidth*this._scale(xe)}ve+=this.parent._renderer._textLeading}return ne}},{key:"_getGlyphs",value:function(ee){return this.font.stringToGlyphs(ee)}},{key:"_getPath",value:function(ee,ge,ve,xe){var ae=(xe&&xe.renderer&&xe.renderer._pInst||this.parent)._renderer;return ge=this._handleAlignment(ae,ee,ge,ve),this.font.getPath(ee,ge.x,ge.y,ae._textSize,xe)}},{key:"_getPathData",value:function(ee,Y,ve,xe){var ae=3;return"string"==typeof ee&&2<arguments.length?ee=this._getPath(ee,Y,ve,xe):"object"===I(Y)&&(xe=Y),xe&&"number"==typeof xe.decimals&&(ae=xe.decimals),ee.toPathData(ae)}},{key:"_getSVG",value:function(ee,Y,ve,xe){var ae=3;return"string"==typeof ee&&2<arguments.length?ee=this._getPath(ee,Y,ve,xe):"object"===I(Y)&&(xe=Y),xe&&("number"==typeof xe.decimals&&(ae=xe.decimals),"number"==typeof xe.strokeWidth&&(ee.strokeWidth=xe.strokeWidth),void 0!==xe.fill&&(ee.fill=xe.fill),void 0!==xe.stroke&&(ee.stroke=xe.stroke)),ee.toSVG(ae)}},{key:"_renderPath",value:function(ne,ce,Te,xe){var ae=xe&&xe.renderer||this.parent._renderer,ge=ae.drawingContext,J=(ne=("object"===I(ne)&&ne.commands?ne:this._getPath(ne,ce,Te,xe)).commands,ae._clipping||ge.beginPath(),!0);ce=!1,Te=void 0;try{for(var et,le=ne[Symbol.iterator]();!(J=(et=le.next()).done);J=!0){var V=et.value;"M"===V.type?ge.moveTo(V.x,V.y):"L"===V.type?ge.lineTo(V.x,V.y):"C"===V.type?ge.bezierCurveTo(V.x1,V.y1,V.x2,V.y2,V.x,V.y):"Q"===V.type?ge.quadraticCurveTo(V.x1,V.y1,V.x,V.y):"Z"===V.type&&ge.closePath()}}catch(me){ce=!0,Te=me}finally{try{J||null==le.return||le.return()}finally{if(ce)throw Te}}return ae._doStroke&&ae._strokeSet&&!ae._clipping&&ge.stroke(),ae._doFill&&!ae._clipping&&(ae._fillSet||ae._setFill(_._DEFAULT_TEXT_FILL),ge.fill()),this}},{key:"_textWidth",value:function(ee,Y){return this.font.getAdvanceWidth(ee,Y)}},{key:"_textAscent",value:function(ee){return this.font.ascender*this._scale(ee)}},{key:"_textDescent",value:function(ee){return-this.font.descender*this._scale(ee)}},{key:"_scale",value:function(ee){return 1/this.font.unitsPerEm*(ee||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(ee,Y,ve,xe,ae){var ge=ee._textSize;switch(void 0===ae&&(ae=this._textWidth(Y,ge)),ee._textAlign){case _.CENTER:ve-=ae/2;break;case _.RIGHT:ve-=ae}switch(ee._textBaseline){case _.TOP:xe+=this._textAscent(ge);break;case _.CENTER:xe+=this._textAscent(ge)/2;break;case _.BOTTOM:xe-=this._textDescent(ge)}return{x:ve,y:xe}}}])&&D(G.prototype,ie),z}(),q.default=a=C.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(a,_e,q){"use strict";a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.object.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.append=function(M,C){return M.push(C),M},a.default.prototype.arrayCopy=function(M,C,_,w,I){var D,d;M=void 0!==I?(d=Math.min(I,M.length),D=w,M.slice(C,d+C)):(d=void 0!==_?(d=_,Math.min(d,M.length)):M.length,_=C,M.slice(D=0,d)),Array.prototype.splice.apply(_,[D,d].concat(M))},a.default.prototype.concat=function(M,C){return M.concat(C)},a.default.prototype.reverse=function(M){return M.reverse()},a.default.prototype.shorten=function(M){return M.pop(),M},a.default.prototype.shuffle=function(M,C){for(var _,w,I=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(M),D=(M=C||I?M:M.slice()).length;1<D;)_=this.random(0,1)*D|0,w=M[--D],M[D]=M[_],M[_]=w;return M},a.default.prototype.sort=function(M,w){var _=w?M.slice(0,Math.min(w,M.length)):M;return w=w?M.slice(Math.min(w,M.length)):[],(_="string"==typeof _[0]?_.sort():_.sort(function(I,D){return I-D})).concat(w)},a.default.prototype.splice=function(M,C,_){return Array.prototype.splice.apply(M,[_,0].concat(C)),M},a.default.prototype.subset=function(M,C,_){return M.slice(C,void 0!==_?C+_:M.length)},q.default=a=a.default},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(a,_e,q){"use strict";a("core-js/modules/es.array.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.repeat"),a("core-js/modules/es.array.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.repeat"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.float=function(C){return C instanceof Array?C.map(parseFloat):parseFloat(C)},M.default.prototype.int=function(C){var _=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return C===1/0||"Infinity"===C?1/0:C===-1/0||"-Infinity"===C?-1/0:"string"==typeof C?parseInt(C,_):"number"==typeof C?0|C:"boolean"==typeof C?C?1:0:C instanceof Array?C.map(function(w){return M.default.prototype.int(w,_)}):void 0},M.default.prototype.str=function(C){return C instanceof Array?C.map(M.default.prototype.str):String(C)},M.default.prototype.boolean=function(C){return"number"==typeof C?0!==C:"string"==typeof C?"true"===C.toLowerCase():"boolean"==typeof C?C:C instanceof Array?C.map(M.default.prototype.boolean):void 0},M.default.prototype.byte=function(C){return"number"==typeof(C=M.default.prototype.int(C,10))?(C+128)%256-128:C instanceof Array?C.map(M.default.prototype.byte):void 0},M.default.prototype.char=function(C){return"number"!=typeof C||isNaN(C)?C instanceof Array?C.map(M.default.prototype.char):"string"==typeof C?M.default.prototype.char(parseInt(C,10)):void 0:String.fromCharCode(C)},M.default.prototype.unchar=function(C){return"string"==typeof C&&1===C.length?C.charCodeAt(0):C instanceof Array?C.map(M.default.prototype.unchar):void 0},M.default.prototype.hex=function(C,_){if(_=null==_?8:_,C instanceof Array)return C.map(function(I){return M.default.prototype.hex(I,_)});if(C===1/0||C===-1/0)return(C===1/0?"F":"0").repeat(_);if("number"==typeof C){C<0&&(C=4294967295+C+1);for(var w=Number(C).toString(16).toUpperCase();w.length<_;)w="0".concat(w);return w.length>=_?w.substring(w.length-_,w.length):w}},M.default.prototype.unhex=function(C){return C instanceof Array?C.map(M.default.prototype.unhex):parseInt("0x".concat(C),16)},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.pad-start"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.pad-start"),a("core-js/modules/es.string.replace"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(d=a("../core/main"))&&d.__esModule?d:{default:d};function C(f,h){return function(p){if(Array.isArray(p))return p}(f)||function(p,g){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p)){var v=[],S=!0,x=!1,E=void 0;try{for(var N,Z=p[Symbol.iterator]();!(S=(N=Z.next()).done)&&(v.push(N.value),!g||v.length!==g);S=!0);}catch(K){x=!0,E=K}finally{try{S||null==Z.return||Z.return()}finally{if(x)throw E}}return v}}(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(f,h,p){var g=(v=C(f.toString().split("."),2))[0],v=v[1];return void 0===p?(g=g.padStart(h,"0"),v?g+"."+v:g):(g=(f=C(f.toFixed(p).toString().split("."),2))[0],v=f[1],g=g.padStart(h,"0"),void 0===v?g:g+"."+v)}function w(v,h){var p=(v=v.toString()).indexOf("."),g=-1!==p?v.substring(p):"";if(v=(v=-1!==p?v.substring(0,p):v).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===h)g="";else if(void 0!==h)if(h>g.length)for(var S=h-(g+=-1===p?".":"").length+1,x=0;x<S;x++)g+="0";else g=g.substring(0,h+1);return v+g}function I(f){return 0<parseFloat(f)?"+".concat(f.toString()):f.toString()}function D(f){return 0<=parseFloat(f)?" ".concat(f.toString()):f.toString()}a("../core/friendly_errors/validate_params"),a("../core/friendly_errors/file_errors"),a("../core/friendly_errors/fes_core"),M.default.prototype.join=function(f,h){return M.default._validateParameters("join",arguments),f.join(h)},M.default.prototype.match=function(f,h){return M.default._validateParameters("match",arguments),f.match(h)},M.default.prototype.matchAll=function(f,h){M.default._validateParameters("matchAll",arguments);for(var p=new RegExp(h,"g"),g=p.exec(f),v=[];null!==g;)v.push(g),g=p.exec(f);return v},M.default.prototype.nf=function(f,h,p){return M.default._validateParameters("nf",arguments),f instanceof Array?f.map(function(g){return _(g,h,p)}):"[object Arguments]"===Object.prototype.toString.call(f)?3===f.length?this.nf(f[0],f[1],f[2]):2===f.length?this.nf(f[0],f[1]):this.nf(f[0]):_(f,h,p)},M.default.prototype.nfc=function(f,h){return M.default._validateParameters("nfc",arguments),f instanceof Array?f.map(function(p){return w(p,h)}):w(f,h)},M.default.prototype.nfp=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfp",h);var g=M.default.prototype.nf.apply(this,h);return g instanceof Array?g.map(I):I(g)},M.default.prototype.nfs=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfs",h);var g=M.default.prototype.nf.apply(this,h);return g instanceof Array?g.map(D):D(g)},M.default.prototype.split=function(f,h){return M.default._validateParameters("split",arguments),f.split(h)},M.default.prototype.splitTokens=function(f,h){var p,g;return M.default._validateParameters("splitTokens",arguments),g=void 0!==h?(g=/\]/g.exec(h),(p=/\[/g.exec(h))&&g?(h=h.slice(0,g.index)+h.slice(g.index+1),p=/\[/g.exec(h),h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):g?(h=h.slice(0,g.index)+h.slice(g.index+1),new RegExp("[".concat(h,"\\]]"),"g")):p?(h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,f.split(g).filter(function(v){return v})},M.default.prototype.trim=function(f){return M.default._validateParameters("trim",arguments),f instanceof Array?f.map(this.trim):f.trim()};var d=M.default;q.default=d},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.prototype.day=function(){return(new Date).getDate()},a.default.prototype.hour=function(){return(new Date).getHours()},a.default.prototype.minute=function(){return(new Date).getMinutes()},a.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},a.default.prototype.month=function(){return(new Date).getMonth()+1},a.default.prototype.second=function(){return(new Date).getSeconds()},a.default.prototype.year=function(){return(new Date).getFullYear()},q.default=a=a.default},{"../core/main":283}],326:[function(a,_e,q){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.number.to-fixed"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(d=a("../core/main"))&&d.__esModule?d:{default:d},w=(a("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var S;Object.prototype.hasOwnProperty.call(f,p)&&((S=v?Object.getOwnPropertyDescriptor(f,p):null)&&(S.get||S.set)?Object.defineProperty(g,p,S):g[p]=f[p])}return g.default=f,h&&h.set(f,g),g}(a("../core/constants")));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h,p,g,v,S,x){f=f<=0?1:f,h=h<0?0:h,p=p<=0?f:p,g=g<3?3:g;for(var E,N,Z=(S=void 0===S||S)?-2:0,K=(v=v<1?1:v)+((x=void 0===x?0!==h:x)?2:0),z=Math.atan2(f-h,p),G=Math.sin(z),ie=Math.cos(z),X=Z;X<=K;++X){var ee=X/v,Y=p*ee,ve=void 0;for(ve=X<0?(ee=Y=0,f):v<X?(Y=p,ee=1,h):f+(h-f)*ee,-2!==X&&X!==v+2||(ve=0),Y-=p/2,E=0;E<g;++E){var xe=E/(g-1),ge=2*Math.PI*xe,ae=Math.sin(ge),ne=(ge=Math.cos(ge),this.vertices.push(new _.default.Vector(ae*ve,Y,ge*ve)));ne=X<0?new _.default.Vector(0,-1,0):v<X&&h?new _.default.Vector(0,1,0):new _.default.Vector(ae*ie,G,ge*ie),this.vertexNormals.push(ne),this.uvs.push(xe,ee)}}var J=0;if(S){for(N=0;N<g;++N)this.faces.push([J+N,J+g+(N+1)%g,J+g+N]);J+=2*g}for(X=0;X<v;++X){for(E=0;E<g;++E){var ce=(E+1)%g;this.faces.push([J+E,J+ce,J+g+ce]),this.faces.push([J+E,J+g+ce,J+g+E])}J+=g}if(x)for(J+=g,E=0;E<g;++E)this.faces.push([J+E,J+(E+1)%g,J+g])}_.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},_.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},_.default.prototype.buildGeometry=function(f){return this._renderer.buildGeometry(f)},_.default.prototype.freeGeometry=function(f){this._renderer._freeBuffers(f.gid)},_.default.prototype.plane=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,v=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,S=(this._assert3d("plane"),_.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(v));return this._renderer.geometryInHash(S)||((f=new _.default.Geometry(g,v,function(){for(var x,E,N=0;N<=this.detailY;N++)for(var Z=N/this.detailY,K=0;K<=this.detailX;K++)E=new _.default.Vector((x=K/this.detailX)-.5,Z-.5,0),this.vertices.push(E),this.uvs.push(x,Z)})).computeFaces().computeNormals(),g<=1&&v<=1?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(S,f)),this._renderer.drawBuffersScaled(S,h,p,1),this},_.default.prototype.box=function(f,h,p,g,v){this._assert3d("box"),_.default._validateParameters("box",arguments),void 0===f&&(f=50),void 0===h&&(h=f),void 0===p&&(p=h);var S,x=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===v&&(v=x?1:4),x="box|".concat(g=void 0===g?x?1:4:g,"|").concat(v),this._renderer.geometryInHash(x)||((S=new _.default.Geometry(g,v,function(){var E=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(N,Z){Z*=4;for(var K=0;K<4;K++){var z=new _.default.Vector((2*(1&(z=N[K]))-1)/2,((2&z)-1)/2,((4&z)/2-1)/2);E.vertices.push(z),E.uvs.push(1&K,(2&K)/2)}E.faces.push([Z,1+Z,2+Z]),E.faces.push([2+Z,1+Z,3+Z])})})).computeNormals(),g<=4&&v<=4?S._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(x,S)),this._renderer.drawBuffersScaled(x,f,h,p),this},_.default.prototype.sphere=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),_.default._validateParameters("sphere",arguments),this.ellipsoid(f,f,f,h,p),this},_.default.prototype.cylinder=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,v=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,S=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],x=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],E=(this._assert3d("cylinder"),_.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(v,"|").concat(S,"|").concat(x));return this._renderer.geometryInHash(E)||(f=new _.default.Geometry(g,v),D.call(f,1,1,1,g,v,S,x),g<=24&&v<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,h),this},_.default.prototype.cone=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,v=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,S=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],x=(this._assert3d("cone"),_.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(v,"|").concat(S));return this._renderer.geometryInHash(x)||(f=new _.default.Geometry(g,v),D.call(f,1,0,1,g,v,S,!1),g<=24&&v<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,h,p,h),this},_.default.prototype.ellipsoid=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,v=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,S=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,x=(this._assert3d("ellipsoid"),_.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(v,"|").concat(S));return this._renderer.geometryInHash(x)||((f=new _.default.Geometry(v,S,function(){for(var E=0;E<=this.detailY;E++)for(var N=E/this.detailY,Z=Math.PI*N-Math.PI/2,K=Math.cos(Z),z=Math.sin(Z),G=0;G<=this.detailX;G++){var ie=G/this.detailX,ee=2*Math.PI*ie,X=Math.cos(ee);ee=Math.sin(ee),ee=new _.default.Vector(K*ee,z,K*X),this.vertices.push(ee),this.vertexNormals.push(ee),this.uvs.push(ie,N)}})).computeFaces(),v<=24&&S<=24?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,h,p,g),this},_.default.prototype.torus=function(f,x,p,g){if(this._assert3d("torus"),_.default._validateParameters("torus",arguments),void 0===f)f=50;else if(!f)return;if(void 0===x)x=10;else if(!x)return;void 0===p&&(p=24),void 0===g&&(g=16);var v,S=(x/f).toPrecision(4);return x="torus|".concat(S,"|").concat(p,"|").concat(g),this._renderer.geometryInHash(x)||((v=new _.default.Geometry(p,g,function(){for(var E=0;E<=this.detailY;E++)for(var N=E/this.detailY,Z=2*Math.PI*N,K=Math.cos(Z),z=Math.sin(Z),G=1+S*K,ie=0;ie<=this.detailX;ie++){var X=ie/this.detailX,ee=2*Math.PI*X,ve=Math.cos(ee),Y=(ee=Math.sin(ee),new _.default.Vector(G*ve,G*ee,S*z));ve=new _.default.Vector(K*ve,K*ee,z),this.vertices.push(Y),this.vertexNormals.push(ve),this.uvs.push(X,N)}})).computeFaces(),p<=24&&g<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,v)),this._renderer.drawBuffersScaled(x,f,f,f),this},_.default.RendererGL.prototype.point=function(f,h){var p=[];return p.push(new _.default.Vector(f,h,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(p,this.immediateMode.buffers.point),this},_.default.RendererGL.prototype.triangle=function(x){var h=x[0],p=x[1],g=x[2],v=x[3],S=x[4],E=(x=x[5],this.geometryInHash("tri")||((E=new _.default.Geometry(1,1,function(){var K=[];K.push(new _.default.Vector(0,0,0)),K.push(new _.default.Vector(1,0,0)),K.push(new _.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=K,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),E.computeNormals(),this.createBuffers("tri",E)),this.uModelMatrix.copy());try{var N=Math.sign(h*v-g*p+g*x-S*v+S*p-h*x),Z=new _.default.Matrix([g-h,v-p,0,0,S-h,x-p,0,0,0,0,N,0,h,p,0,1]).mult(this.uModelMatrix);this.uModelMatrix=Z,this.drawBuffers("tri")}finally{this.uModelMatrix=E}return this},_.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,w.TWO_PI,w.OPEN,f[4])},_.default.RendererGL.prototype.arc=function(){var f,h=arguments.length<=0?void 0:arguments[0],p=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],v=arguments.length<=3?void 0:arguments[3],S=arguments.length<=4?void 0:arguments[4],x=arguments.length<=5?void 0:arguments[5],E=arguments.length<=6?void 0:arguments[6],N=(arguments.length<=7?void 0:arguments[7])||25,Z=(Math.abs(x-S)>=w.TWO_PI?"".concat(K="ellipse","|"):"".concat(K="arc","|").concat(S,"|").concat(x,"|").concat(E,"|")).concat(N,"|"),K=(this.geometryInHash(Z)||((f=new _.default.Geometry(N,1,function(){if(S.toFixed(10)!==x.toFixed(10)){E!==w.PIE&&void 0!==E||(this.vertices.push(new _.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var z=0;z<=N;z++){var ie=z/N*(x-S)+S,G=.5+Math.cos(ie)/2;ie=.5+Math.sin(ie)/2,this.vertices.push(new _.default.Vector(G,ie,0)),this.uvs.push([G,ie]),z<N-1&&(this.faces.push([0,z+1,z+2]),this.edges.push([z+1,z+2]))}switch(E){case w.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case w.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case w.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),N<=50?f._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(K," with more than 50 detail")),this.createBuffers(Z,f)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(g,v,1),this.drawBuffers(Z)}finally{this.uModelMatrix=K}return this},_.default.RendererGL.prototype.rect=function(f){var h=f[0],p=f[1],g=f[2],v=f[3];if(void 0===f[4]){var E=this._pInst._glAttributes.perPixelLighting,S=f[4]||(E?1:24),x=f[5]||(E?1:16),N=(E="rect|".concat(S,"|").concat(x),this.geometryInHash(E)||((N=new _.default.Geometry(S,x,function(){for(var ne=0;ne<=this.detailY;ne++)for(var J=ne/this.detailY,ce=0;ce<=this.detailX;ce++){var Te=ce/this.detailX,et=new _.default.Vector(Te,J,0);this.vertices.push(et),this.uvs.push(Te,J)}0<S&&0<x&&(this.edges=[[0,S],[S,(S+1)*(x+1)-1],[(S+1)*(x+1)-1,(S+1)*x],[(S+1)*x,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(E,N)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(g,v,1),this.drawBuffers(E)}finally{this.uModelMatrix=N}}else{E=f[4],N=void 0===f[5]?E:f[5];var Z=void 0===f[6]?N:f[6],ee=(f=void 0===f[7]?Z:f[7],g),K=v,z=((ee+=h)<h&&(ie=h,h=ee,ee=ie),(K+=p)<p&&(ie=p,p=K,K=ie),(ie=Math.min((ee-h)/2,(K-p)/2))<E&&(E=ie),ie<N&&(N=ie),ie<Z&&(Z=ie),ie<f&&(f=ie),h),G=p,ie=ee,X=(h=K,this.beginShape(),0!==N?(this.vertex(ie-N,G),this.quadraticVertex(ie,G,ie,G+N)):this.vertex(ie,G),0!==Z?(this.vertex(ie,h-Z),this.quadraticVertex(ie,h,ie-Z,h)):this.vertex(ie,h),0!==f?(this.vertex(z+f,h),this.quadraticVertex(z,h,z,h-f)):this.vertex(z,h),0!==E?(this.vertex(z,G+E),this.quadraticVertex(z,G,z+E,G)):this.vertex(z,G),!(this.immediateMode.geometry.uvs.length=0));p=!1,ee=void 0;try{for(var Y,ve=this.immediateMode.geometry.vertices[Symbol.iterator]();!(X=(Y=ve.next()).done);X=!0){var xe=Y.value;this.immediateMode.geometry.uvs.push((xe.x-z)/g,(xe.y-G)/v)}}catch(le){p=!0,ee=le}finally{try{X||null==ve.return||ve.return()}finally{if(p)throw ee}}this.endShape(w.CLOSE)}return this},_.default.RendererGL.prototype.quad=function(f,h,p,g,v,S,x,E,N,Z,K,z){var G=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,ie=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,X="quad|".concat(f,"|").concat(h,"|").concat(p,"|").concat(g,"|").concat(v,"|").concat(S,"|").concat(x,"|").concat(E,"|").concat(N,"|").concat(Z,"|").concat(K,"|").concat(z,"|").concat(G,"|").concat(ie);if(!this.geometryInHash(X)){var ee=new _.default.Geometry(G,ie,function(){for(var ce=1/(this.detailX-1),Te=1/(this.detailY-1),et=0;et<this.detailY;et++)for(var le=0;le<this.detailX;le++){var V=le*ce,me=et*Te;this.vertices.push(new _.default.Vector((1-V)*((1-me)*f+me*Z)+V*((1-me)*g+me*x),(1-V)*((1-me)*h+me*K)+V*((1-me)*v+me*E),(1-V)*((1-me)*p+me*z)+V*((1-me)*S+me*N))),this.uvs.push([V,me])}});ee.faces=[];for(var Y=0;Y<ie-1;Y++)for(var ve=0;ve<G-1;ve++){var xe=ve+Y*G,ae=ve+1+(Y+1)*G,ge=ve+(Y+1)*G;ee.faces.push([xe,ve+1+Y*G,ae]),ee.faces.push([xe,ae,ge])}ee.computeNormals();for(var ne=[ee.edges.length=0,2,3,1],J=0;J<ne.length;J++)ee.edges.push([ne[J],ne[(J+1)%ne.length]]);ee._edgesToVertices(),this.createBuffers(X,ee)}return this.drawBuffers(X),this},_.default.RendererGL.prototype.bezier=function(f,h,p,g,v,S,x,E,N,Z,K,z){8===arguments.length&&(K=E,Z=x,E=S,x=v,v=g,g=p,p=S=N=z=0);var G=this._pInst._bezierDetail||20;this.beginShape();for(var ie=0;ie<=G;ie++){var X=Math.pow(1-ie/G,3),ee=ie/G*3*Math.pow(1-ie/G,2),Y=3*Math.pow(ie/G,2)*(1-ie/G),ve=Math.pow(ie/G,3);this.vertex(f*X+g*ee+x*Y+Z*ve,h*X+v*ee+E*Y+K*ve,p*X+S*ee+N*Y+z*ve)}return this.endShape(),this},_.default.RendererGL.prototype.curve=function(f,h,p,g,v,S,x,E,N,Z,K,z){8===arguments.length&&(Z=x,K=E,x=v,E=g,v=g=p,p=S=N=z=0);var G=this._pInst._curveDetail;this.beginShape();for(var ie=0;ie<=G;ie++){var X=.5*Math.pow(ie/G,3),ee=.5*Math.pow(ie/G,2),Y=ie/G*.5;this.vertex(X*(3*g-f-3*x+Z)+ee*(2*f-5*g+4*x-Z)+Y*(-f+x)+2*g*.5,X*(3*v-h-3*E+K)+ee*(2*h-5*v+4*E-K)+Y*(-h+E)+2*v*.5,X*(3*S-p-3*N+z)+ee*(2*p-5*S+4*N-z)+Y*(-p+N)+2*S*.5)}return this.endShape(),this},_.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},_.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var f,h,p,g,v,S,x=[],E=[],N=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var Z=1/this._lutBezierDetail,K=0,z=1,G=0;K<1;){if(S=parseFloat(K.toFixed(6)),this._lookUpTableBezier[G]=this._bezierCoefficients(S),z.toFixed(6)===Z.toFixed(6)){S=parseFloat(z.toFixed(6))+parseFloat(K.toFixed(6)),++G,this._lookUpTableBezier[G]=this._bezierCoefficients(S);break}K+=Z,z-=Z,++G}}for(var ie=this._lookUpTableBezier.length,X=[],ee=0;ee<4;ee++)X.push([]);X[0]=this.immediateMode.geometry.vertexColors.slice(-4),X[3]=this.curFillColor.slice();var Y=[];for(ee=0;ee<4;ee++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[3]=this.curStrokeColor.slice(),6===N){this.isBezier=!0,x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],E=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var ve=Math.hypot(x[0]-x[1],E[0]-E[1]),ae=Math.hypot(x[1]-x[2],E[1]-E[2]),xe=Math.hypot(x[2]-x[3],E[2]-E[3]);for(ve/=ae=ve+ae+xe,xe/=ae,v=0;v<4;v++)X[1].push(X[0][v]*(1-ve)+X[3][v]*ve),X[2].push(X[0][v]*xe+X[3][v]*(1-xe)),Y[1].push(Y[0][v]*(1-ve)+Y[3][v]*ve),Y[2].push(Y[0][v]*xe+Y[3][v]*(1-xe));for(g=0;g<ie;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ee=f=h=0;ee<4;ee++){for(v=0;v<4;v++)this.curFillColor[v]+=this._lookUpTableBezier[g][ee]*X[ee][v],this.curStrokeColor[v]+=this._lookUpTableBezier[g][ee]*Y[ee][v];f+=x[ee]*this._lookUpTableBezier[g][ee],h+=E[ee]*this._lookUpTableBezier[g][ee]}this.vertex(f,h)}this.curFillColor=X[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===N){this.isBezier=!0,x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],E=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var ge=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],ne=Math.hypot(x[0]-x[1],E[0]-E[1],ge[0]-ge[1]),J=(ae=Math.hypot(x[1]-x[2],E[1]-E[2],ge[1]-ge[2]),Math.hypot(x[2]-x[3],E[2]-E[3],ge[2]-ge[3]));for(ne/=N=ne+ae+J,J/=N,v=0;v<4;v++)X[1].push(X[0][v]*(1-ne)+X[3][v]*ne),X[2].push(X[0][v]*J+X[3][v]*(1-J)),Y[1].push(Y[0][v]*(1-ne)+Y[3][v]*ne),Y[2].push(Y[0][v]*J+Y[3][v]*(1-J));for(g=0;g<ie;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ee=f=h=p=0;ee<4;ee++){for(v=0;v<4;v++)this.curFillColor[v]+=this._lookUpTableBezier[g][ee]*X[ee][v],this.curStrokeColor[v]+=this._lookUpTableBezier[g][ee]*Y[ee][v];f+=x[ee]*this._lookUpTableBezier[g][ee],h+=E[ee]*this._lookUpTableBezier[g][ee],p+=ge[ee]*this._lookUpTableBezier[g][ee]}this.vertex(f,h,p)}this.curFillColor=X[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},_.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var f,h,p,g,v,S,x=[],E=[],N=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var Z=1/this._lutQuadraticDetail,K=0,z=1,G=0;K<1;){if(S=parseFloat(K.toFixed(6)),this._lookUpTableQuadratic[G]=this._quadraticCoefficients(S),z.toFixed(6)===Z.toFixed(6)){S=parseFloat(z.toFixed(6))+parseFloat(K.toFixed(6)),++G,this._lookUpTableQuadratic[G]=this._quadraticCoefficients(S);break}K+=Z,z-=Z,++G}}for(var ie=this._lookUpTableQuadratic.length,X=[],ee=0;ee<3;ee++)X.push([]);X[0]=this.immediateMode.geometry.vertexColors.slice(-4),X[2]=this.curFillColor.slice();var Y=[];for(ee=0;ee<3;ee++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[2]=this.curStrokeColor.slice(),4===N){this.isQuadratic=!0,x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],E=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var ve=Math.hypot(x[0]-x[1],E[0]-E[1]);for(ve/=ve+Math.hypot(x[1]-x[2],E[1]-E[2]),v=0;v<4;v++)X[1].push(X[0][v]*(1-ve)+X[2][v]*ve),Y[1].push(Y[0][v]*(1-ve)+Y[2][v]*ve);for(g=0;g<ie;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ee=f=h=0;ee<3;ee++){for(v=0;v<4;v++)this.curFillColor[v]+=this._lookUpTableQuadratic[g][ee]*X[ee][v],this.curStrokeColor[v]+=this._lookUpTableQuadratic[g][ee]*Y[ee][v];f+=x[ee]*this._lookUpTableQuadratic[g][ee],h+=E[ee]*this._lookUpTableQuadratic[g][ee]}this.vertex(f,h)}this.curFillColor=X[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===N){this.isQuadratic=!0,x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],E=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var xe=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],ae=Math.hypot(x[0]-x[1],E[0]-E[1],xe[0]-xe[1]);for(ae/=ae+Math.hypot(x[1]-x[2],E[1]-E[2],xe[1]-xe[2]),v=0;v<4;v++)X[1].push(X[0][v]*(1-ae)+X[2][v]*ae),Y[1].push(Y[0][v]*(1-ae)+Y[2][v]*ae);for(g=0;g<ie;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],ee=f=h=p=0;ee<3;ee++){for(v=0;v<4;v++)this.curFillColor[v]+=this._lookUpTableQuadratic[g][ee]*X[ee][v],this.curStrokeColor[v]+=this._lookUpTableQuadratic[g][ee]*Y[ee][v];f+=x[ee]*this._lookUpTableQuadratic[g][ee],h+=E[ee]*this._lookUpTableQuadratic[g][ee],p+=xe[ee]*this._lookUpTableQuadratic[g][ee]}this.vertex(f,h,p)}this.curFillColor=X[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},_.default.RendererGL.prototype.curveVertex=function(){var f,v,S,x=[],E=[],N=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var Z=1/this._lutBezierDetail,K=0,z=1,G=0;K<1;){if(S=parseFloat(K.toFixed(6)),this._lookUpTableBezier[G]=this._bezierCoefficients(S),z.toFixed(6)===Z.toFixed(6)){S=parseFloat(z.toFixed(6))+parseFloat(K.toFixed(6)),++G,this._lookUpTableBezier[G]=this._bezierCoefficients(S);break}K+=Z,z-=Z,++G}}var ie=this._lookUpTableBezier.length;if(2===N){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),E=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),v=0;v<ie;v++)this.vertex(x[0]*this._lookUpTableBezier[v][0]+x[1]*this._lookUpTableBezier[v][1]+x[2]*this._lookUpTableBezier[v][2]+x[3]*this._lookUpTableBezier[v][3],E[0]*this._lookUpTableBezier[v][0]+E[1]*this._lookUpTableBezier[v][1]+E[2]*this._lookUpTableBezier[v][2]+E[3]*this._lookUpTableBezier[v][3]);for(v=0;v<N;v++)this.immediateMode._curveVertex.shift()}}else if(3===N&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),E=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),v=0;v<ie;v++)this.vertex(x[0]*this._lookUpTableBezier[v][0]+x[1]*this._lookUpTableBezier[v][1]+x[2]*this._lookUpTableBezier[v][2]+x[3]*this._lookUpTableBezier[v][3],E[0]*this._lookUpTableBezier[v][0]+E[1]*this._lookUpTableBezier[v][1]+E[2]*this._lookUpTableBezier[v][2]+E[3]*this._lookUpTableBezier[v][3],f[0]*this._lookUpTableBezier[v][0]+f[1]*this._lookUpTableBezier[v][1]+f[2]*this._lookUpTableBezier[v][2]+f[3]*this._lookUpTableBezier[v][3]);for(v=0;v<N;v++)this.immediateMode._curveVertex.shift()}},_.default.RendererGL.prototype.image=function(f,z,p,G,v,S,x,E,N){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(w.NORMAL);var Z=0,K=(z<=f.width&&(Z=z/f.width),1);z+G<=f.width&&(K=(z+G)/f.width),z=0,p<=f.height&&(z=p/f.height),G=1,p+v<=f.height&&(G=(p+v)/f.height),this.beginShape(),this.vertex(S,x,0,Z,z),this.vertex(S+E,x,0,K,z),this.vertex(S+E,x+N,0,K,G),this.vertex(S,x+N,0,Z,G),this.endShape(w.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(w.REMOVE)};var d=_.default;q.default=d},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(a,_e,q){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.every"),a("core-js/modules/es.array.map"),a("core-js/modules/es.object.assign"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var g,v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=S?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(v,g,x):v[g]=h[g])}return v.default=h,p&&p.set(h,v),v}(a("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var g=0,v=new Array(p.length);g<p.length;g++)v[g]=p[g];return v}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(h,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}var f=function(){function h(S){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=S)._pInst.push(),this.identityMatrix=new _.default.Matrix,S.uModelMatrix=new _.default.Matrix,this.geometry=new _.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var p,g;return p=h,(g=[{key:"transformVertices",value:function(S){var x=this;return this.hasTransform?S.map(function(E){return x.renderer.uModelMatrix.multiplyPoint(E)}):S}},{key:"transformNormals",value:function(S){var x=this;return this.hasTransform?S.map(function(E){return x.renderer.uNMatrix.multiplyVec3(E)}):S}},{key:"addGeometry",value:function(S){for(var x,E=this,N=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(K,z){return K===E.identityMatrix.mat4[z]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),Z=((x=this.geometry.vertices).push.apply(x,D(this.transformVertices(S.vertices))),(x=this.geometry.vertexNormals).push.apply(x,D(this.transformNormals(S.vertexNormals))),(x=this.geometry.uvs).push.apply(x,D(S.uvs)),this.renderer._doFill&&(x=this.geometry.faces).push.apply(x,D(S.faces.map(function(K){return K.map(function(z){return z+N})}))),this.renderer._doStroke&&(x=this.geometry.edges).push.apply(x,D(S.edges.map(function(K){return K.map(function(z){return z+N})}))),D(S.vertexColors));Z.length<4*S.vertices.length;)Z.push.apply(Z,D(this.renderer.curFillColor));(x=this.geometry.vertexColors).push.apply(x,D(Z))}},{key:"addImmediate",value:function(){var S=this.renderer.immediateMode.geometry,x=this.renderer.immediateMode.shapeMode,E=[];if(this.renderer._doFill)if(x===w.TRIANGLE_STRIP||x===w.QUAD_STRIP)for(var N=2;N<S.vertices.length;N++)E.push(N%2==0?[N,N-1,N-2]:[N,N-2,N-1]);else if(x===w.TRIANGLE_FAN)for(var Z=2;Z<S.vertices.length;Z++)E.push([0,Z-1,Z]);else for(var K=0;K<S.vertices.length;K+=3)E.push([K,K+1,K+2]);this.addGeometry(Object.assign({},S,{faces:E}))}},{key:"addRetained",value:function(S){this.addGeometry(S.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&d(p.prototype,g),h}();f.nextGeometryId=0,q.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.math.sign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var C=(D=a("../core/main"))&&D.__esModule?D:{default:D},_=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==I(d)&&"function"!=typeof d)return{default:d};var f=w();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function w(){var d;return"function"!=typeof WeakMap?null:(w=function(){return d},d=new WeakMap)}function I(d){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}C.default.prototype.orbitControl=function(d,f,h,N){var g=this,v=(this._assert3d("orbitControl"),C.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===d&&(d=1),void 0===f&&(f=d),void 0===h&&(h=1),"object"!==I(N)&&(N={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var K=N.disableTouchActions;!0===this.touchActionsDisabled||void 0!==K&&!K||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),N=void 0!==(K=N.freeRotation)&&K;var S,x,E,Z=[],z=(this.touches.forEach(function(ve){g._renderer.prevTouches.forEach(function(xe){ve.id===xe.id&&Z.push(xe={x:ve.x,y:ve.y,px:xe.x,py:xe.y})})}),this._renderer.prevTouches=this.touches,K=0,0),G=0,ie=0,X=0,ee=this.height<this.width?this.height:this.width,Y=!1;return 0<Z.length?(Y=0<Z[0].x&&Z[0].x<this.width&&0<Z[0].y&&Z[0].y<this.height,1===Z.length?(z=-d*((S=Z[0]).x-S.px)/ee,G=f*(S.y-S.py)/ee):(S=Z[0],x=Z[1],K=-(Math.hypot(S.x-x.x,S.y-x.y)-Math.hypot(S.px-x.px,S.py-x.py))*h*4e-4,ie=.5*(S.x+x.x)-.5*(S.px+x.px),X=.5*(S.y+x.y)-.5*(S.py+x.py)),0<this.touches.length?Y&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(Y=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(K=Math.sign(this._mouseWheelDeltaY)*h,K*=.01,this._mouseWheelDeltaY=0,Y&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(z=-d*this.movedX/ee,G=f*this.movedY/ee):this.mouseButton===this.RIGHT&&(ie=this.movedX,X=this.movedY*v.yScale),Y&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==K&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=K),.001<Math.abs(this._renderer.zoomVelocity)?(N?v._orbitFree(0,0,this._renderer.zoomVelocity):v._orbit(0,0,this._renderer.zoomVelocity),0!==v.projMatrix.mat4[15]&&(v.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),v.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=v.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=v.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===z&&0===G||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*z,.6*G),1e-6<this._renderer.rotateVelocity.magSq()?(N?v._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):v._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===ie&&0===X||!this._renderer.executeRotateAndMove||this._renderer.moveVelocity.add(.15*(S=2*ie/this.width),.15*(x=2*-X/this.height)),1e-6<this._renderer.moveVelocity.magSq()?(h=v._getLocalAxes(),d=v.eyeX-v.centerX,f=v.eyeY-v.centerY,ee=v.eyeZ-v.centerZ,Y=Math.sqrt(d*d+f*f+ee*ee),K=new C.default.Vector(v.centerX,v.centerY,v.centerZ),K=v.cameraMatrix.multiplyPoint(K),(K=this._renderer.uPMatrix.multiplyAndNormalizePoint(K)).x-=this._renderer.moveVelocity.x,K.y-=this._renderer.moveVelocity.y,G=0===(z=this._renderer.uPMatrix.mat4)[15]?(E=(z[8]+K.x)/z[0]*Y,(z[9]+K.y)/z[5]*Y):(E=(K.x-z[12])/z[0],(K.y-z[13])/z[5]),v.setPosition(v.eyeX+E*h.x[0]+G*h.y[0],v.eyeY+E*h.x[1]+G*h.y[1],v.eyeZ+E*h.x[2]+G*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},C.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];C.default._validateParameters("debugMode",f);for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1);f[0]===_.GRID?this.registerMethod("post",this._grid(f[1],f[2],f[3],f[4],f[5])):f[0]===_.AXES?this.registerMethod("post",this._axesIcon(f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid(f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon(f[5],f[6],f[7],f[8])))},C.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1)},C.default.prototype._grid=function(d,f,h,p,g){void 0===d&&(d=this.width/2),void 0===f&&(f=Math.round(d/30)<4?4:Math.round(d/30)),void 0===h&&(h=0),void 0===p&&(p=0),void 0===g&&(g=0);var v=d/f,S=d/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var x=0;x<=f;x++)this.beginShape(this.LINES),this.vertex(-S+h,p,x*v-S+g),this.vertex(S+h,p,x*v-S+g),this.endShape();for(var E=0;E<=f;E++)this.beginShape(this.LINES),this.vertex(E*v-S+h,p,-S+g),this.vertex(E*v-S+h,p,S+g),this.endShape();this.pop()}},C.default.prototype._axesIcon=function(d,f,h,p){return void 0===d&&(d=40<this.width/20?this.width/20:40),void 0===f&&(f=-this.width/4),void 0===h&&(h=f),void 0===p&&(p=f),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f+d,h,p),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h+d,p),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h,p+d),this.endShape(),this.pop()}};var D=C.default;q.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(a,_e,q){"use strict";a("core-js/modules/es.array.filter"),a("core-js/modules/es.array.filter"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};M.default.prototype.ambientLight=function(C,_,w,I){this._assert3d("ambientLight"),M.default._validateParameters("ambientLight",arguments);var D=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(D._array[0],D._array[1],D._array[2]),this._renderer._enableLighting=!0,this},M.default.prototype.specularColor=function(C,_,w){this._assert3d("specularColor"),M.default._validateParameters("specularColor",arguments);var I=this.color.apply(this,arguments);return this._renderer.specularColors=[I._array[0],I._array[1],I._array[2]],this},M.default.prototype.directionalLight=function(C,g,p,I,D,d){var f,h;return this._assert3d("directionalLight"),M.default._validateParameters("directionalLight",arguments),C=C instanceof M.default.Color?C:this.color(C,g,p),p="number"==typeof(g=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=g.x,h=g.y,g.z),g=Math.sqrt(f*f+h*h+p*p),this._renderer.directionalLightDirections.push(f/g,h/g,p/g),this._renderer.directionalLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.pointLight=function(C,p,g,I,D,d){var f,h;return this._assert3d("pointLight"),M.default._validateParameters("pointLight",arguments),C=C instanceof M.default.Color?C:this.color(C,p,g),g="number"==typeof(p=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=p.x,h=p.y,p.z),this._renderer.pointLightPositions.push(f,h,g),this._renderer.pointLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.imageLight=function(C){this._renderer.activeImageLight=C,this._renderer._enableLighting=!0},M.default.prototype.panorama=function(C){this.filter(this._renderer._getSphereMapping(C))},M.default.prototype.lights=function(){this._assert3d("lights");var C=this.color("rgb(128,128,128)");return this.ambientLight(C),this.directionalLight(C,0,0,-1),this},M.default.prototype.lightFalloff=function(C,_,w){return this._assert3d("lightFalloff"),M.default._validateParameters("lightFalloff",arguments),C<0&&(C=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),_<0&&(_=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),w<0&&(w=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===C&&0===_&&0===w&&(C=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=C,this._renderer.linearAttenuation=_,this._renderer.quadraticAttenuation=w,this},M.default.prototype.spotLight=function(C,_,w,I,D,d,f,h,p,g,v){this._assert3d("spotLight"),M.default._validateParameters("spotLight",arguments);var S,x,E,N=arguments.length;switch(N){case 11:case 10:S=this.color(C,_,w),x=new M.default.Vector(I,D,d),E=new M.default.Vector(f,h,p);break;case 9:C instanceof M.default.Color?(S=C,x=new M.default.Vector(_,w,I),E=new M.default.Vector(D,d,f),g=h,v=p):I instanceof M.default.Vector?(S=this.color(C,_,w),x=I,E=new M.default.Vector(D,d,f),g=h,v=p):f instanceof M.default.Vector?(S=this.color(C,_,w),x=new M.default.Vector(I,D,d),E=f,g=h,v=p):(S=this.color(C,_,w),x=new M.default.Vector(I,D,d),E=new M.default.Vector(f,h,p));break;case 8:E=C instanceof M.default.Color?(S=C,x=new M.default.Vector(_,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(S=this.color(C,_,w),x=I,new M.default.Vector(D,d,f)):(S=this.color(C,_,w),x=new M.default.Vector(I,D,d),f),g=h;break;case 7:C instanceof M.default.Color&&_ instanceof M.default.Vector?(S=C,x=_,E=new M.default.Vector(w,I,D),g=d,v=f):C instanceof M.default.Color&&D instanceof M.default.Vector?(S=C,x=new M.default.Vector(_,w,I),E=D,g=d,v=f):I instanceof M.default.Vector&&D instanceof M.default.Vector?(S=this.color(C,_,w),x=I,E=D,g=d,v=f):E=C instanceof M.default.Color?(S=C,x=new M.default.Vector(_,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(S=this.color(C,_,w),x=I,new M.default.Vector(D,d,f)):(S=this.color(C,_,w),x=new M.default.Vector(I,D,d),f);break;case 6:I instanceof M.default.Vector&&D instanceof M.default.Vector?(S=this.color(C,_,w),x=I,E=D,g=d):C instanceof M.default.Color&&D instanceof M.default.Vector?(S=C,x=new M.default.Vector(_,w,I),E=D,g=d):C instanceof M.default.Color&&_ instanceof M.default.Vector&&(S=C,x=_,E=new M.default.Vector(w,I,D),g=d);break;case 5:C instanceof M.default.Color&&_ instanceof M.default.Vector&&w instanceof M.default.Vector?(S=C,x=_,E=w,g=I,v=D):I instanceof M.default.Vector&&D instanceof M.default.Vector?(S=this.color(C,_,w),x=I,E=D):C instanceof M.default.Color&&D instanceof M.default.Vector?(S=C,x=new M.default.Vector(_,w,I),E=D):C instanceof M.default.Color&&_ instanceof M.default.Vector&&(S=C,x=_,E=new M.default.Vector(w,I,D));break;case 4:S=C,x=_,E=w,g=I;break;case 3:S=C,x=_,E=w;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(N<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(S._array[0],S._array[1],S._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(x.x,x.y,x.z),E.normalize(),this._renderer.spotLightDirections.push(E.x,E.y,E.z),void 0===g&&(g=Math.PI/3),void 0!==v&&v<1?(v=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===v&&(v=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(v),this._renderer._enableLighting=!0,this},M.default.prototype.noLights=function(){this._assert3d("noLights");for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];return M.default._validateParameters("noLights",_),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},q.default=a=M.default},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(a,_e,q){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.splice"),a("core-js/modules/es.object.assign"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.promise"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.match"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.trim"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,a("regenerator-runtime/runtime");var C=(d=a("../core/main"))&&d.__esModule?d:{default:d};function _(f){return function(h){if(Array.isArray(h)){for(var p=0,g=new Array(h.length);p<h.length;p++)g[p]=h[p];return g}}(f)||function(h){if(Symbol.iterator in Object(h)||"[object Arguments]"===Object.prototype.toString.call(h))return Array.from(h)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(f,h,p,g,v,S,x){try{var E=f[S](x),N=E.value}catch(Z){return void p(Z)}E.done?h(N):Promise.resolve(N).then(g,v)}function I(f){return function(){var h=this,p=arguments;return new Promise(function(g,v){var S=f.apply(h,p);function x(N){w(S,g,v,x,E,"next",N)}function E(N){w(S,g,v,x,E,"throw",N)}x(void 0)})}}function D(f){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}a("./p5.Geometry"),C.default.prototype.loadModel=function(f,h){C.default._validateParameters("loadModel",arguments);var p,g,G,v=!1,S=!1,x=!1,E=f.slice(-4),N=(h&&"object"===D(h)?(v=h.normalize||!1,p=h.successCallback,g=h.failureCallback,E=h.fileType||E,S=h.flipU||!1,x=h.flipV||!1):"boolean"==typeof h?(v=h,p=arguments[2],g=arguments[3],void 0!==arguments[4]&&(E=arguments[4])):(p="function"==typeof h?h:void 0,g=arguments[2],void 0!==arguments[3]&&(E=arguments[3])),new C.default.Geometry),Z=(N.gid="".concat(f,"|").concat(v),this);function K(){return(K=I(F.mark(function G(ie){var X,ee,Y,ve;return F.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:for(X=[],ee=0;ee<ie.length;ee++)(Y=ie[ee].match(/^mtllib (.+)/))&&function(){var ae,ge=Y[1],ne=f.split("/");ae=1<ne.length?(ne.pop(),ne.join("/")+"/"+ge):ge,X.push(function(){return z.apply(this,arguments)}(ae).then(function(J){return J?(ce=Z,Te=ae,new Promise(function(et,le){var V=null,me={};ce.loadStrings(Te,function(Oe){for(var Xe=0;Xe<Oe.length;++Xe){var yt=Oe[Xe].trim().split(/\s+/);"newmtl"===yt[0]?me[V=yt[1]]={}:"Kd"===yt[0]?me[V].diffuseColor=[parseFloat(yt[1]),parseFloat(yt[2]),parseFloat(yt[3])]:"Ka"===yt[0]?me[V].ambientColor=[parseFloat(yt[1]),parseFloat(yt[2]),parseFloat(yt[3])]:"Ks"===yt[0]?me[V].specularColor=[parseFloat(yt[1]),parseFloat(yt[2]),parseFloat(yt[3])]:"map_Kd"===yt[0]&&(me[V].texturePath=yt[1])}et(me)},le)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(ae)),{});var ce,Te}).catch(function(J){return console.warn("Error loading MTL file: ".concat(ae),J),{}}))}();return xe.prev=2,xe.next=5,Promise.all(X);case 5:return ve=xe.sent,ve=Object.assign.apply(Object,[{}].concat(_(ve))),xe.abrupt("return",ve);case 10:return xe.prev=10,xe.t0=xe.catch(2),xe.abrupt("return",{});case 13:case"end":return xe.stop()}},G,null,[[2,10]])}))).apply(this,arguments)}function z(){return(z=I(F.mark(function G(ie){return F.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.prev=0,ee.next=3,fetch(ie,{method:"HEAD"});case 3:return ee.abrupt("return",ee.sent.ok);case 7:return ee.prev=7,ee.t0=ee.catch(0),ee.abrupt("return",!1);case 10:case"end":return ee.stop()}},G,null,[[0,7]])}))).apply(this,arguments)}return E.match(/\.stl$/i)?this.httpDo(f,"GET","arrayBuffer",function(G){(function(ie,X){if(function(ee){for(var Y=new DataView(ee),ve=[115,111,108,105,100],xe=0;xe<5;xe++)if(function(ae,ge,ne){for(var J=0,ce=ae.length;J<ce;J++)if(ae[J]!==ge.getUint8(ne+J,!1))return;return 1}(ve,Y,xe))return;return 1}(X))!function(ee,Y){for(var ve,xe,ae,ge,ne,J,ce,Te=new DataView(Y),et=Te.getUint32(80,!0),le=!1,V=0;V<70;V++)1129270351===Te.getUint32(V,!1)&&82===Te.getUint8(V+4)&&61===Te.getUint8(V+5)&&(le=!0,ge=[],ne=Te.getUint8(V+6)/255,J=Te.getUint8(V+7)/255,ce=Te.getUint8(V+8)/255);for(var me=0;me<et;me++){for(var Oe,Xe=84+50*me,dt=Te.getFloat32(Xe,!0),yt=Te.getFloat32(4+Xe,!0),Ut=Te.getFloat32(8+Xe,!0),ht=(le&&(ae=32768&(Oe=Te.getUint16(48+Xe,!0))?(ve=ne,xe=J,ce):(ve=(31&Oe)/31,xe=(Oe>>5&31)/31,(Oe>>10&31)/31)),new C.default.Vector(dt,yt,Ut)),Lt=1;Lt<=3;Lt++){var kt=new C.default.Vector(Te.getFloat32(kt=Xe+12*Lt,!0),Te.getFloat32(4+kt,!0),Te.getFloat32(8+kt,!0));ee.vertices.push(kt),ee.vertexNormals.push(ht),le&&ge.push(ve,xe,ae)}ee.faces.push([3*me,3*me+1,3*me+2]),ee.uvs.push([0,0],[0,0],[0,0])}}(ie,X);else{if(X=new DataView(X),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(ee,Y){for(var ve,xe,ae="",ge=[],ne=0;ne<Y.length;++ne){for(var J=Y[ne].trim(),ce=J.split(" "),Te=0;Te<ce.length;++Te)""===ce[Te]&&ce.splice(Te,1);if(0!==ce.length)switch(ae){case"":if("solid"!==ce[0])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "solid"'));ae="solid";break;case"solid":if("facet"!==ce[0]||"normal"!==ce[1])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "facet normal"'));ve=new C.default.Vector(parseFloat(ce[2]),parseFloat(ce[3]),parseFloat(ce[4])),ee.vertexNormals.push(ve,ve,ve),ae="facet normal";break;case"facet normal":if("outer"!==ce[0]||"loop"!==ce[1])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "outer loop"'));ae="vertex";break;case"vertex":if("vertex"===ce[0])xe=new C.default.Vector(parseFloat(ce[1]),parseFloat(ce[2]),parseFloat(ce[3])),ee.vertices.push(xe),ee.uvs.push([0,0]),ge.push(ee.vertices.indexOf(xe));else{if("endloop"!==ce[0])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "vertex" or "endloop"'));ee.faces.push(ge),ge=[],ae="endloop"}break;case"endloop":if("endfacet"!==ce[0])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "endfacet"'));ae="endfacet";break;case"endfacet":if("endsolid"!==ce[0]){if("facet"!==ce[0]||"normal"!==ce[1])return console.error(J),console.error('Invalid state "'.concat(ce[0],'", should be "endsolid" or "facet normal"'));ve=new C.default.Vector(parseFloat(ce[2]),parseFloat(ce[3]),parseFloat(ce[4])),ee.vertexNormals.push(ve,ve,ve),ae="facet normal"}break;default:console.error('Invalid state "'.concat(ae,'"'))}}}(ie,X=new TextDecoder("utf-8").decode(X).split("\n"))}})(N,G),v&&N.normalize(),S&&N.flipU(),x&&N.flipV(),Z._decrementPreload(),"function"==typeof p&&p(N)},g):E.match(/\.obj$/i)?this.loadStrings(f,(G=I(F.mark(function ie(X){return F.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,function(){return K.apply(this,arguments)}(X);case 3:(function(ve,xe){for(var ae=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},ge={v:[],vt:[],vn:[]},ne={},J=null,ce=new Set,Te=!1,et=!1,le=0;le<xe.length;++le){var V=xe[le].trim().split(/\b\s+/);if(0<V.length)if("usemtl"===V[0])J=V[1];else if("v"===V[0]||"vn"===V[0]){var me=new C.default.Vector(parseFloat(V[1]),parseFloat(V[2]),parseFloat(V[3]));ge[V[0]].push(me)}else if("vt"===V[0])me=[parseFloat(V[1]),1-parseFloat(V[2])],ge[V[0]].push(me);else if("f"===V[0])for(var Oe=3;Oe<V.length;++Oe){for(var Xe=[],dt=[1,Oe-1,Oe],yt=0;yt<dt.length;++yt){for(var Ut,ht=V[dt[yt]],Lt=ht.split("/"),kt=0;kt<Lt.length;kt++)Lt[kt]=parseInt(Lt[kt])-1;ne[ht]||(ne[ht]={}),void 0===ne[ht][J]?(Ut=ve.vertices.length,ve.vertices.push(ge.v[Lt[0]].copy()),ve.uvs.push(ge.vt[Lt[1]]?ge.vt[Lt[1]].slice():[0,0]),ve.vertexNormals.push(ge.vn[Lt[2]]?ge.vn[Lt[2]].copy():new C.default.Vector),ne[ht][J]=Ut,Xe.push(Ut),J&&ae[J]&&ae[J].diffuseColor&&ce.add(ge.v[Lt[0]])):Xe.push(ne[ht][J])}if(Xe[0]!==Xe[1]&&Xe[0]!==Xe[2]&&Xe[1]!==Xe[2])if(ve.faces.push(Xe),J&&ae[J]&&ae[J].diffuseColor){Te=Te=!0;for(var lt=ae[J].diffuseColor,It=0;It<Xe.length;It++)ve.vertexColors.push(lt[0]),ve.vertexColors.push(lt[1]),ve.vertexColors.push(lt[2])}else et=!0}}if(0===ve.vertexNormals.length&&ve.computeNormals(),Te===et)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")})(N,X,Y.sent),Y.next=11;break;case 7:return Y.prev=7,Y.t0=Y.catch(0),g?g(Y.t0):C.default._friendlyError("Error during parsing: "+Y.t0.message),Y.abrupt("return");case 11:return Y.prev=11,v&&N.normalize(),S&&N.flipU(),x&&N.flipV(),Z._decrementPreload(),"function"==typeof p&&p(N),Y.finish(11);case 18:case"end":return Y.stop()}},ie,null,[[0,7,11,18]])})),function(ie){return G.apply(this,arguments)}),g):(C.default._friendlyFileLoadError(3,f),g?g():C.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),N},C.default.prototype.model=function(f){this._assert3d("model"),C.default._validateParameters("model",arguments),0<f.vertices.length&&(this._renderer.geometryInHash(f.gid)||(0===f.edges.length&&f._makeTriangleEdges(),f._edgesToVertices(),this._renderer.createBuffers(f.gid,f)),this._renderer.drawBuffers(f.gid))};var d=C.default;q.default=d},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}a("./p5.Texture"),_.default.prototype.loadShader=function(d,f,h,p){function g(){S._decrementPreload(),h&&h(v)}_.default._validateParameters("loadShader",arguments),p=p||console.error;var v=new _.default.Shader,S=this,x=!1,E=!1;return this.loadStrings(d,function(N){v._vertSrc=N.join("\n"),E=!0,x&&g()},p),this.loadStrings(f,function(N){v._fragSrc=N.join("\n"),x=!0,E&&g()},p),v},_.default.prototype.createShader=function(d,f){return _.default._validateParameters("createShader",arguments),new _.default.Shader(this._renderer,d,f)},_.default.prototype.createFilterShader=function(d){_.default._validateParameters("createFilterShader",arguments);var f=d.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return(f=new _.default.Shader(this._renderer,f,d)).ensureCompiledOnContext(this._renderer.GL?this:this._renderer.getFilterGraphicsLayer()),f},_.default.prototype.shader=function(d){return this._assert3d("shader"),_.default._validateParameters("shader",arguments),d.ensureCompiledOnContext(this),d.isStrokeShader()?this._renderer.userStrokeShader=d:(this._renderer.userFillShader=d,this._renderer._useNormalMaterial=!1),this},_.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},_.default.prototype.texture=function(d){return this._assert3d("texture"),_.default._validateParameters("texture",arguments),d.gifProperties&&d._animateGif(this),this._renderer.drawMode=w.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=d,this._renderer._setProperty("_doFill",!0),this},_.default.prototype.textureMode=function(d){d!==w.IMAGE&&d!==w.NORMAL?console.warn("You tried to set ".concat(d," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=d},_.default.prototype.textureWrap=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,h=(this._renderer.textureWrapX=d,this._renderer.textureWrapY=f,!0),p=!1,g=void 0;try{for(var v,S=this._renderer.textures.values()[Symbol.iterator]();!(h=(v=S.next()).done);h=!0)v.value.setWrapMode(d,f)}catch(x){p=!0,g=x}finally{try{h||null==S.return||S.return()}finally{if(p)throw g}}},_.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return _.default._validateParameters("normalMaterial",f),this._renderer.drawMode=w.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},_.default.prototype.ambientMaterial=function(d,f,h){this._assert3d("ambientMaterial"),_.default._validateParameters("ambientMaterial",arguments);var p=_.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=p._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},_.default.prototype.emissiveMaterial=function(d,f,h,p){this._assert3d("emissiveMaterial"),_.default._validateParameters("emissiveMaterial",arguments);var g=_.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},_.default.prototype.specularMaterial=function(d,f,h,p){this._assert3d("specularMaterial"),_.default._validateParameters("specularMaterial",arguments);var g=_.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},_.default.prototype.shininess=function(d){return this._assert3d("shininess"),_.default._validateParameters("shininess",arguments),this._renderer._useShininess=d=d<1?1:d,this},_.default.prototype.metalness=function(d){return this._assert3d("metalness"),d=1-Math.exp(-d/100),this._renderer._useMetalness=d,this},_.default.RendererGL.prototype._applyColorBlend=function(d,g){var h=this.GL;return(g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||this.drawMode===w.TEXTURE||this.curBlendMode!==w.BLEND||d[d.length-1]<1||this._isErasing)!==this._isBlending&&(g||this.curBlendMode!==w.BLEND&&this.curBlendMode!==w.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=g),this._applyBlendMode(),d},_.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var d=this.GL;switch(this.curBlendMode){case w.BLEND:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.ADD:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE);break;case w.REMOVE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ZERO,d.ONE_MINUS_SRC_ALPHA);break;case w.MULTIPLY:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA);break;case w.SCREEN:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_COLOR);break;case w.EXCLUSION:d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE_MINUS_DST_COLOR,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE);break;case w.REPLACE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO);break;case w.SUBTRACT:d.blendEquationSeparate(d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.DARKEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case w.LIGHTEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var D=_.default;q.default=D},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(a,_e,q){"use strict";a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.hypot"),a("core-js/modules/es.string.sub"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(_,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}M.default.prototype.camera=function(){var _;this._assert3d("camera");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("camera",I),(_=this._renderer._curCamera).camera.apply(_,I),this},M.default.prototype.perspective=function(){var _;this._assert3d("perspective");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("perspective",I),(_=this._renderer._curCamera).perspective.apply(_,I),this},M.default.prototype.linePerspective=function(_){if(M.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof M.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===_)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=_},M.default.prototype.ortho=function(){var _;this._assert3d("ortho");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("ortho",I),(_=this._renderer._curCamera).ortho.apply(_,I),this},M.default.prototype.frustum=function(){var _;this._assert3d("frustum");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("frustum",I),(_=this._renderer._curCamera).frustum.apply(_,I),this},M.default.prototype.createCamera=function(){this._assert3d("createCamera");var _=new M.default.Camera(this._renderer);return _._computeCameraDefaultSettings(),_._setDefaultCamera(),this._renderer._curCamera=_},M.default.Camera=function(){function _(d){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this._renderer=d,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new M.default.Matrix,this.projMatrix=new M.default.Matrix,this.yScale=1}var w,I;return w=_,(I=[{key:"perspective",value:function(g,f,h,p){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===g?g=this.defaultCameraFOV:this._renderer._pInst._toRadians(g),void 0===f&&(f=this.defaultAspectRatio),void 0===h&&(h=this.defaultCameraNear),void 0===p&&(p=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=h,this.cameraFar=p,this.projMatrix=M.default.Matrix.identity(),g=1/Math.tan(this.cameraFOV/2);var v=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(g/f,0,0,0,0,-g*this.yScale,0,0,0,0,(p+h)*v,-1,0,0,2*p*h*v,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(z,K,h,p,g,v){var G=this.fbo||this._renderer,S=(void 0===z&&(z=-G.width/2),void 0===K&&(K=+G.width/2),void 0===h&&(h=-G.height/2),void 0===p&&(p=+G.height/2),void 0===g&&(g=0),void 0===v&&(v=Math.max(G.width,G.height)+800),this.cameraNear=g,G=K-z,p-h),x=(this.cameraFar=v)-g,E=2/G,N=2/S*this.yScale,Z=-2/x;K=-(K+z)/G,z=-(p+h)/S,G=-(v+g)/x,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(E,0,0,0,0,-N,0,0,0,0,Z,0,K,z,G,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(z,K,h,p,g,v){void 0===z&&(z=.05*-this._renderer.width),void 0===K&&(K=.05*+this._renderer.width),void 0===h&&(h=.05*+this._renderer.height),void 0===p&&(p=.05*-this._renderer.height),void 0===g&&(g=this.defaultCameraNear),void 0===v&&(v=this.defaultCameraFar),this.cameraNear=g;var G=K-z,S=p-h,x=(this.cameraFar=v)-g,E=2*g/G,N=2*g/S*this.yScale,Z=-2*v*g/x;K=(K+z)/G,z=(p+h)/S,G=-(v+g)/x,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(E,0,0,0,0,-N,0,0,K,z,G,-1,0,0,Z,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(E,f,h,p){var g=this.centerX,v=this.centerY,S=this.centerZ,x=(g-=this.eyeX,v-=this.eyeY,S-=this.eyeZ,M.default.Matrix.identity(this._renderer._pInst));(x.rotate(this._renderer._pInst._toRadians(E),f,h,p),E=[g*x.mat4[0]+v*x.mat4[4]+S*x.mat4[8],g*x.mat4[1]+v*x.mat4[5]+S*x.mat4[9],g*x.mat4[2]+v*x.mat4[6]+S*x.mat4[10]])[0]+=this.eyeX,E[1]+=this.eyeY,E[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,E[0],E[1],E[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(h){var f=this._getLocalAxes();h=M.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(h),f.z[0],f.z[1],f.z[2]).rotateVector(new M.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"pan",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(d,f,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,d,f,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(d,f,h,p,g,v,S,x,E){return void 0===d&&(h=this.defaultEyeZ,p=d=this.defaultEyeX,g=f=this.defaultEyeY,x=1,E=S=v=0),this.eyeX=d,this.eyeY=f,this.eyeZ=h,void 0!==p&&(this.centerX=p,this.centerY=g,this.centerZ=v),void 0!==S&&(this.upX=S,this.upY=x,this.upZ=E),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),this.cameraMatrix.translate([g=-d,-f,-h]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(p,g,h){var v=this._getLocalAxes();this.camera(this.eyeX+(p=[v.x[0]*p,v.x[1]*p,v.x[2]*p])[0]+(g=[v.y[0]*g,v.y[1]*g,v.y[2]*g])[0]+(v=[v.z[0]*h,v.z[1]*h,v.z[2]*h])[0],this.eyeY+p[1]+g[1]+v[1],this.eyeZ+p[2]+g[2]+v[2],this.centerX+p[0]+g[0]+v[0],this.centerY+p[1]+g[1]+v[1],this.centerZ+p[2]+g[2]+v[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(d,f,h){this.camera(d,f,h,this.centerX+(d-this.eyeX),this.centerY+(f-this.eyeY),this.centerZ+(h-this.eyeZ),this.upX,this.upY,this.upZ)}},{key:"set",value:function(d){for(var f=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];f<h.length;f++){var p=h[f];this[p]=d[p]}this.cameraMatrix=d.cameraMatrix.copy(),this.projMatrix=d.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(d,f,h){var p,g,v,S,x,E,N,Z,K,z,G,ie,X,ee,Y,ve,xe,ae;0===h?this.set(d):1===h?this.set(f):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=d.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/d.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=d.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/d.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),S=new M.default.Vector(d.eyeX,d.eyeY,d.eyeZ),x=new M.default.Vector(f.eyeX,f.eyeY,f.eyeZ),ve=new M.default.Vector(d.centerX,d.centerY,d.centerZ),ae=new M.default.Vector(f.centerX,f.centerY,f.centerZ),v=M.default.Vector.dist(S,ve),p=M.default.Vector.dist(x,ae),p=v*Math.pow(p/v,h),v=M.default.Vector.sub(S,x),g=1,1e-6<(xe=(ee=S.copy().sub(x).sub(ve).add(ae)).magSq())&&(g=M.default.Vector.dot(v,ee)/xe,g=Math.max(0,Math.min(g,1))),v=M.default.Vector.lerp(M.default.Vector.lerp(S,ve,g),M.default.Vector.lerp(x,ae,g),h),ee=d.cameraMatrix.createSubMatrix3x3(),xe=f.cameraMatrix.createSubMatrix3x3(),S=ee.row(2),ve=xe.row(2),x=ee.row(1),ae=xe.row(1),d=new M.default.Vector,f=new M.default.Vector,E=new M.default.Vector,N=new M.default.Vector,1-(Z=.5*((ee=(xe=xe.mult3x3(ee.copy().transpose3x3())).diagonal())[0]+ee[1]+ee[2]-1))<1e-7?(d.set(M.default.Vector.lerp(S,ve,h)).normalize(),E.set(d).mult(g*p).add(v),N.set(d).mult((g-1)*p).add(v),f.set(M.default.Vector.lerp(x,ae,h)).normalize()):(ve=1/(1-Z),ae=Math.max(ee[0],ee[1],ee[2]),ie=xe.mat3[1]+xe.mat3[3],X=xe.mat3[2]+xe.mat3[6],Y=xe.mat3[5]+xe.mat3[7],ae=ae===ee[0]?(z=.5*ie*(ve/=K=Math.sqrt((ee[0]-Z)*ve)),G=.5*X*ve,.5*(xe.mat3[7]-xe.mat3[5])/K):ae===ee[1]?(G=.5*Y*(ve/=z=Math.sqrt((ee[1]-Z)*ve)),K=.5*ie*ve,.5*(xe.mat3[2]-xe.mat3[6])/z):(K=.5*X*(ve/=G=Math.sqrt((ee[2]-Z)*ve)),z=.5*Y*ve,.5*(xe.mat3[3]-xe.mat3[1])/G),ie=h*Math.atan2(ae,Z),X=Math.cos(ie),ee=Math.sin(ie),(ae=new M.default.Matrix("mat3",[X+(Y=1-X)*K*K,Y*(ve=K*z)+ee*G,Y*(xe=G*K)-ee*z,Y*ve-ee*G,X+Y*z*z,Y*(h=z*G)+ee*K,Y*xe+ee*z,Y*h-ee*K,X+Y*G*G])).multiplyVec3(S,d),E.set(d).mult(g*p).add(v),N.set(d).mult((g-1)*p).add(v),ae.multiplyVec3(x,f)),this.camera(E.x,E.y,E.z,N.x,N.y,N.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var d=new M.default.Camera(this._renderer);return d.cameraFOV=this.cameraFOV,d.aspectRatio=this.aspectRatio,d.eyeX=this.eyeX,d.eyeY=this.eyeY,d.eyeZ=this.eyeZ,d.centerX=this.centerX,d.centerY=this.centerY,d.centerZ=this.centerZ,d.upX=this.upX,d.upY=this.upY,d.upZ=this.upZ,d.cameraNear=this.cameraNear,d.cameraFar=this.cameraFar,d.cameraType=this.cameraType,d.cameraMatrix=this.cameraMatrix.copy(),d.projMatrix=this.projMatrix.copy(),d.yScale=this.yScale,d}},{key:"_getLocalAxes",value:function(){var N,d=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,S=(0!==(S=Math.sqrt(d*d+f*f+h*h))&&(d/=S,f/=S,h/=S),this.upX),p=(x=this.upY)*h-(E=this.upZ)*f,g=-S*h+E*d,v=S*f-x*d,x=(S=f*v-h*g,-d*v+h*p),E=d*g-f*p;return 0!==(0!==(N=Math.sqrt(p*p+g*g+v*v))&&(p/=N,g/=N,v/=N),N=Math.sqrt(S*S+x*x+E*E))&&(S/=N,x/=N,E/=N),{x:[p,g,v],y:[S,x,E],z:[d,f,h]}}},{key:"_orbit",value:function(d,N,E){var g=this.eyeX-this.centerX,v=this.eyeY-this.centerY,S=this.eyeZ-this.centerZ,p=Math.hypot(g,v,S),x=(g=new M.default.Vector(g,v,S).normalize(),v=new M.default.Vector(this.upX,this.upY,this.upZ).normalize(),S=M.default.Vector.cross(v,g).normalize(),M.default.Vector.cross(S,v));(p=(p*=Math.pow(10,E))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),E=Math.acos(Math.max(-1,Math.min(1,M.default.Vector.dot(g,v))))+N,N=d,(E<=0||E>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),v.mult(Math.cos(E)),x.mult(Math.cos(N)*Math.sin(E)),S.mult(Math.sin(N)*Math.sin(E)),g.set(v).add(x).add(S),this.eyeX=p*g.x+this.centerX,this.eyeY=p*g.y+this.centerY,this.eyeZ=p*g.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(E,N,K){var g=this.eyeX-this.centerX,v=this.eyeY-this.centerY,S=this.eyeZ-this.centerZ,p=Math.hypot(g,v,S),x=(g=new M.default.Vector(g,v,S).normalize(),v=new M.default.Vector(this.upX,this.upY,this.upZ),S=M.default.Vector.cross(v,g).normalize(),M.default.Vector.cross(g,S)),z=Math.atan2(N,E),Z=(x.mult(Math.sin(z)),S.mult(Math.cos(z)).add(x),z=Math.sqrt(E*E+N*N),x=M.default.Vector.cross(g,S),(p=(p*=Math.pow(10,K))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),E=Math.cos(z),N=Math.sin(z),(K=v.dot(g))*E+(z=v.dot(S))*N);K=-K*N+z*E,z=v.dot(x),v.x=Z*g.x+K*S.x+z*x.x,v.y=Z*g.y+K*S.y+z*x.y,v.z=Z*g.z+K*S.z+z*x.z,S.mult(-N),g.mult(E).add(S).mult(p),this.camera(g.x+this.centerX,g.y+this.centerY,g.z+this.centerZ,this.centerX,this.centerY,this.centerZ,v.x,v.y,v.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&C(w.prototype,I),_}(),M.default.prototype.setCamera=function(_){this._renderer._curCamera=_,this._renderer.uPMatrix.set(_.projMatrix),this._renderer.uViewMatrix.set(_.cameraMatrix)},q.default=a=M.default.Camera},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(a,_e,q){"use strict";function M(C,_){for(var w=0;w<_.length;w++){var I=_[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.log2"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.math.log2"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.DataArray=function(){function C(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(D),this.initialLength=D}var _,w;return _=C,(w=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var D;this.length<this.data.length/2&&(D=1<<Math.ceil(Math.log2(this.length)),(D=new Float32Array(D)).set(this.data.subarray(0,this.length),0),this.data=D)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var D=arguments.length,d=new Array(D),f=0;f<D;f++)d[f]=arguments[f];this.ensureLength(this.length+d.length),this.data.set(d,this.length),this.length+=d.length}},{key:"slice",value:function(D,d){return this.data.slice(D,Math.min(d,this.length))}},{key:"subArray",value:function(D,d){return this.data.subarray(D,Math.min(d,this.length))}},{key:"ensureLength",value:function(D){for(;this.data.length<D;){var d=new Float32Array(2*this.data.length);d.set(this.data,0),this.data=d}}}])&&M(_.prototype,w),C}(),q.default=a=a.default.DataArray},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(G,_e,q){"use strict";function M(ie){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(ie)}function C(ie){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(X){return M(X)}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":M(X)})(ie)}G("core-js/modules/es.symbol"),G("core-js/modules/es.symbol.description"),G("core-js/modules/es.symbol.iterator"),G("core-js/modules/es.array.fill"),G("core-js/modules/es.array.includes"),G("core-js/modules/es.array.iterator"),G("core-js/modules/es.object.get-own-property-descriptor"),G("core-js/modules/es.object.get-prototype-of"),G("core-js/modules/es.object.to-string"),G("core-js/modules/es.reflect.construct"),G("core-js/modules/es.reflect.get"),G("core-js/modules/es.regexp.to-string"),G("core-js/modules/es.string.includes"),G("core-js/modules/es.string.iterator"),G("core-js/modules/es.typed-array.float32-array"),G("core-js/modules/es.typed-array.uint8-array"),G("core-js/modules/es.typed-array.uint8-clamped-array"),G("core-js/modules/es.typed-array.copy-within"),G("core-js/modules/es.typed-array.every"),G("core-js/modules/es.typed-array.fill"),G("core-js/modules/es.typed-array.filter"),G("core-js/modules/es.typed-array.find"),G("core-js/modules/es.typed-array.find-index"),G("core-js/modules/es.typed-array.for-each"),G("core-js/modules/es.typed-array.includes"),G("core-js/modules/es.typed-array.index-of"),G("core-js/modules/es.typed-array.iterator"),G("core-js/modules/es.typed-array.join"),G("core-js/modules/es.typed-array.last-index-of"),G("core-js/modules/es.typed-array.map"),G("core-js/modules/es.typed-array.reduce"),G("core-js/modules/es.typed-array.reduce-right"),G("core-js/modules/es.typed-array.reverse"),G("core-js/modules/es.typed-array.set"),G("core-js/modules/es.typed-array.slice"),G("core-js/modules/es.typed-array.some"),G("core-js/modules/es.typed-array.sort"),G("core-js/modules/es.typed-array.subarray"),G("core-js/modules/es.typed-array.to-locale-string"),G("core-js/modules/es.typed-array.to-string"),G("core-js/modules/es.weak-map"),G("core-js/modules/web.dom-collections.iterator"),G("core-js/modules/es.array.fill"),G("core-js/modules/es.array.includes"),G("core-js/modules/es.array.iterator"),G("core-js/modules/es.object.get-prototype-of"),G("core-js/modules/es.object.to-string"),G("core-js/modules/es.string.includes"),G("core-js/modules/es.typed-array.float32-array"),G("core-js/modules/es.typed-array.uint8-array"),G("core-js/modules/es.typed-array.uint8-clamped-array"),G("core-js/modules/es.typed-array.copy-within"),G("core-js/modules/es.typed-array.every"),G("core-js/modules/es.typed-array.fill"),G("core-js/modules/es.typed-array.filter"),G("core-js/modules/es.typed-array.find"),G("core-js/modules/es.typed-array.find-index"),G("core-js/modules/es.typed-array.for-each"),G("core-js/modules/es.typed-array.includes"),G("core-js/modules/es.typed-array.index-of"),G("core-js/modules/es.typed-array.iterator"),G("core-js/modules/es.typed-array.join"),G("core-js/modules/es.typed-array.last-index-of"),G("core-js/modules/es.typed-array.map"),G("core-js/modules/es.typed-array.reduce"),G("core-js/modules/es.typed-array.reduce-right"),G("core-js/modules/es.typed-array.reverse"),G("core-js/modules/es.typed-array.set"),G("core-js/modules/es.typed-array.slice"),G("core-js/modules/es.typed-array.some"),G("core-js/modules/es.typed-array.sort"),G("core-js/modules/es.typed-array.subarray"),G("core-js/modules/es.typed-array.to-locale-string"),G("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(z=G("../core/main"))&&z.__esModule?z:{default:z},w=function(ie){if(ie&&ie.__esModule)return ie;if(null===ie||"object"!==C(ie)&&"function"!=typeof ie)return{default:ie};var X=d();if(X&&X.has(ie))return X.get(ie);var ee,Y={},ve=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ee in ie){var xe;Object.prototype.hasOwnProperty.call(ie,ee)&&((xe=ve?Object.getOwnPropertyDescriptor(ie,ee):null)&&(xe.get||xe.set)?Object.defineProperty(Y,ee,xe):Y[ee]=ie[ee])}return Y.default=ie,X&&X.set(ie,Y),Y}(G("../core/constants")),I=G("./p5.Texture"),D=G("./p5.RendererGL");function d(){var ie;return"function"!=typeof WeakMap?null:(d=function(){return ie},ie=new WeakMap)}function f(ie,X){return function(ee){if(Array.isArray(ee))return ee}(ie)||function(ee,Y){if(Symbol.iterator in Object(ee)||"[object Arguments]"===Object.prototype.toString.call(ee)){var ve=[],xe=!0,ae=!1,ge=void 0;try{for(var ne,J=ee[Symbol.iterator]();!(xe=(ne=J.next()).done)&&(ve.push(ne.value),!Y||ve.length!==Y);xe=!0);}catch(ce){ae=!0,ge=ce}finally{try{xe||null==J.return||J.return()}finally{if(ae)throw ge}}return ve}}(ie,X)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(ie,X,ee){return X in ie?Object.defineProperty(ie,X,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ie[X]=ee,ie}function p(ie,X){if(!(ie instanceof X))throw new TypeError("Cannot call a class as a function")}function g(ie,X){for(var ee=0;ee<X.length;ee++){var Y=X[ee];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(ie,Y.key,Y)}}function v(ie,X,ee){X&&g(ie.prototype,X),ee&&g(ie,ee)}function S(ie,X,ee){return(S=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(ae,ve,xe){if(ae=function(ge,ne){for(;!Object.prototype.hasOwnProperty.call(ge,ne)&&null!==(ge=N(ge)););return ge}(ae,ve))return(ae=Object.getOwnPropertyDescriptor(ae,ve)).get?ae.get.call(xe):ae.value})(ie,X,ee||ie)}function x(ie,X){return(x=Object.setPrototypeOf||function(ee,Y){return ee.__proto__=Y,ee})(ie,X)}function N(ie){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)})(ie)}var Z=function(ie){var X=Y;if("function"!=typeof ie&&null!==ie)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(ie&&ie.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),ie&&x(X,ie);var ee=function E(ie){return function(){var X,ee=N(ie);if(X=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(X=N(this).constructor,Reflect.construct(ee,arguments,X)):ee.apply(this,arguments),ee=this,!X||"object"!==C(X)&&"function"!=typeof X){if(void 0!==ee)return ee;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return X}}(Y);function Y(ve){var xe;return p(this,Y),(xe=ee.call(this,ve.target._renderer)).fbo=ve,xe.yScale=-1,xe}return v(Y,[{key:"_computeCameraDefaultSettings",value:function(){S(N(Y.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),Y}(_.default.Camera),K=(_.default.FramebufferCamera=Z,function(){function ie(X,ee){p(this,ie),this.framebuffer=X,this.property=ee}return v(ie,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),ie}()),z=(_.default.FramebufferTexture=K,function(){function ie(X){var ee=this,Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ve=(p(this,ie),this.target=X,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=Y.format||w.UNSIGNED_BYTE,this.channels=Y.channels||(X._renderer._pInst._glAttributes.alpha?w.RGBA:w.RGB),this.useDepth=void 0===Y.depth||Y.depth,this.depthFormat=Y.depthFormat||w.FLOAT,this.textureFiltering=Y.textureFiltering||w.LINEAR,this.antialiasSamples=void 0===Y.antialias?X._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof Y.antialias?Y.antialias:Y.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&X.webglVersion!==w.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=Y.density||X.pixelDensity(),X._renderer.GL);if(this.gl=ve,Y.width&&Y.height?(xe=X._renderer._adjustDimensions(Y.width,Y.height),this.width=xe.adjustedWidth,this.height=xe.adjustedHeight,this._autoSized=!1):(void 0===Y.width!=(void 0===Y.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=X.width,this.height=X.height,this._autoSized=!0),this._checkIfFormatsAvailable(),Y.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===Y.stencil||Y.stencil),this.framebuffer=ve.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=ve.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var xe=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=xe,this.draw(function(){return ee.target.clear()})}return v(ie,[{key:"resize",value:function(X,ee){this._autoSized=!1;var Y=this.target._renderer._adjustDimensions(X,ee);ee=Y.adjustedHeight,this.width=X=Y.adjustedWidth,this.height=ee,this._handleResize()}},{key:"pixelDensity",value:function(X){if(!X)return this.density;this._autoSized=!1,this.density=X,this._handleResize()}},{key:"autoSized",value:function(X){if(void 0===X)return this._autoSized;this._autoSized=X,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var X=this.gl;(this.useDepth&&this.target.webglVersion===w.WEBGL&&!X.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===w.WEBGL&&this.depthFormat===w.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),[w.UNSIGNED_BYTE,w.FLOAT,w.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&![w.UNSIGNED_INT,w.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=w.FLOAT),X=(0,I.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==w.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&!X.float&&this.depthFormat===w.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),X.halfFloat||this.format!==w.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.channels===w.RGB&&[w.FLOAT,w.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=w.RGBA)}},{key:"_recreateTextures",value:function(){var X=this.gl,ee=(this._updateSize(),X.getParameter(X.TEXTURE_BINDING_2D)),Y=X.getParameter(X.FRAMEBUFFER_BINDING);if(!(ve=X.createTexture()))throw new Error("Unable to create color texture");X.bindTexture(X.TEXTURE_2D,ve);var xe=this._glColorFormat();if(X.texImage2D(X.TEXTURE_2D,0,xe.internalFormat,this.width*this.density,this.height*this.density,0,xe.format,xe.type,null),this.colorTexture=ve,X.bindFramebuffer(X.FRAMEBUFFER,this.framebuffer),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,ve,0),this.useDepth){var ve;if(!(ve=X.createTexture()))throw new Error("Unable to create depth texture");var ae=this._glDepthFormat();X.bindTexture(X.TEXTURE_2D,ve),X.texImage2D(X.TEXTURE_2D,0,ae.internalFormat,this.width*this.density,this.height*this.density,0,ae.format,ae.type,null),X.framebufferTexture2D(X.FRAMEBUFFER,this.useStencil?X.DEPTH_STENCIL_ATTACHMENT:X.DEPTH_ATTACHMENT,X.TEXTURE_2D,ve,0),this.depthTexture=ve}this.antialias&&(this.colorRenderbuffer=X.createRenderbuffer(),X.bindRenderbuffer(X.RENDERBUFFER,this.colorRenderbuffer),X.renderbufferStorageMultisample(X.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,X.getParameter(X.MAX_SAMPLES))),xe.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(ae=this._glDepthFormat(),this.depthRenderbuffer=X.createRenderbuffer(),X.bindRenderbuffer(X.RENDERBUFFER,this.depthRenderbuffer),X.renderbufferStorageMultisample(X.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,X.getParameter(X.MAX_SAMPLES))),ae.internalFormat,this.width*this.density,this.height*this.density)),X.bindFramebuffer(X.FRAMEBUFFER,this.aaFramebuffer),X.framebufferRenderbuffer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&X.framebufferRenderbuffer(X.FRAMEBUFFER,this.useStencil?X.DEPTH_STENCIL_ATTACHMENT:X.DEPTH_ATTACHMENT,X.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new K(this,"depthTexture"),this.depthP5Texture=new _.default.Texture(this.target._renderer,this.depth,{minFilter:ve=X.NEAREST,magFilter:ve}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new K(this,"colorTexture"),this.colorP5Texture=new _.default.Texture(this.target._renderer,this.color,{minFilter:xe=this.textureFiltering===w.LINEAR?X.LINEAR:X.NEAREST,magFilter:xe}),this.target._renderer.textures.set(this.color,this.colorP5Texture),X.bindTexture(X.TEXTURE_2D,ee),X.bindFramebuffer(X.FRAMEBUFFER,Y)}},{key:"_glColorFormat",value:function(){var X,ee,Y=this.gl,ve=this.format===w.FLOAT?Y.FLOAT:this.format===w.HALF_FLOAT?this.target.webglVersion===w.WEBGL2?Y.HALF_FLOAT:Y.getExtension("OES_texture_half_float").HALF_FLOAT_OES:Y.UNSIGNED_BYTE,xe=this.channels===w.RGBA?Y.RGBA:Y.RGB;return{internalFormat:this.target.webglVersion===w.WEBGL2?(h(ee={},Y.FLOAT,h({},Y.RGBA,Y.RGBA32F)),h(ee,Y.HALF_FLOAT,h({},Y.RGBA,Y.RGBA16F)),h(ee,Y.UNSIGNED_BYTE,(h(X={},Y.RGBA,Y.RGBA8),h(X,Y.RGB,Y.RGB8),X)),ee[ve][xe]):this.format===w.HALF_FLOAT?Y.RGBA:xe,format:xe,type:ve}}},{key:"_glDepthFormat",value:function(){var Y=this.gl,X=this.useStencil?this.depthFormat===w.FLOAT?Y.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===w.WEBGL2?Y.UNSIGNED_INT_24_8:Y.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===w.FLOAT?Y.FLOAT:Y.UNSIGNED_INT,ee=this.useStencil?Y.DEPTH_STENCIL:Y.DEPTH_COMPONENT;return{internalFormat:Y=this.useStencil?this.depthFormat===w.FLOAT?Y.DEPTH32F_STENCIL8:this.target.webglVersion===w.WEBGL2?Y.DEPTH24_STENCIL8:Y.DEPTH_STENCIL:this.target.webglVersion===w.WEBGL2?this.depthFormat===w.FLOAT?Y.DEPTH_COMPONENT32F:Y.DEPTH_COMPONENT24:Y.DEPTH_COMPONENT,format:ee,type:X}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var X=this.depth,ee=this.colorRenderbuffer,Y=this.depthRenderbuffer,ve=(this._deleteTexture(ve=this.color),X&&this._deleteTexture(X),this.gl);ee&&ve.deleteRenderbuffer(ee),Y&&ve.deleteRenderbuffer(Y),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var X=new Z(this);return X._computeCameraDefaultSettings(),X._setDefaultCamera(),this.target._renderer._curCamera=X}},{key:"_deleteTexture",value:function(X){this.gl.deleteTexture(X.rawTexture()),this.target._renderer.textures.delete(X)}},{key:"remove",value:function(){var X=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),X.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&X.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&X.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&X.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var X=this.gl,ee=(X.bindFramebuffer(X.READ_FRAMEBUFFER,this.aaFramebuffer),X.bindFramebuffer(X.DRAW_FRAMEBUFFER,this.framebuffer),[[X.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&ee.push([X.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var Y=0,ve=ee;Y<ve.length;Y++){var ae=f(ve[Y],2);X.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,ae[0],ae=ae[1])}}}},{key:"end",value:function(){var X=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(X.bindFramebuffer(X.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(X){this.begin(),X(),this.end()}},{key:"loadPixels",value:function(){var X=this.gl,ee=this.target._renderer.activeFramebuffer(),Y=(X.bindFramebuffer(X.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,D.readPixelsWebGL)(this.pixels,X,this.framebuffer,0,0,this.width*this.density,this.height*this.density,Y.format,Y.type),X.bindFramebuffer(X.FRAMEBUFFER,ee?ee._framebufferToBind():null)}},{key:"get",value:function(X,ee,Y,ve){_.default._validateParameters("p5.Framebuffer.get",arguments);var xe=this._glColorFormat();if(void 0===X&&void 0===ee)ee=X=0,Y=this.width,ve=this.height;else if(void 0===Y&&void 0===ve)return(X<0||ee<0||X>=this.width||ee>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),X=this.target.constrain(X,0,this.width-1),ee=this.target.constrain(ee,0,this.height-1)),(0,D.readPixelWebGL)(this.gl,this.framebuffer,X*this.density,ee*this.density,xe.format,xe.type);X=this.target.constrain(X,0,this.width-1),ee=this.target.constrain(ee,0,this.height-1),Y=this.target.constrain(Y,1,this.width-X),ve=this.target.constrain(ve,1,this.height-ee);for(var ae=(0,D.readPixelsWebGL)(void 0,this.gl,this.framebuffer,X*this.density,ee*this.density,Y*this.density,ve*this.density,xe.format,xe.type),ge=new Uint8ClampedArray(Y*ve*this.density*this.density*4),ne=(ge.fill(255),xe.type===this.gl.RGB?3:4),J=0;J<ve*this.density;J++)for(var ce=0;ce<Y*this.density;ce++)for(var Te=0;Te<4;Te++){var le=4*(J*Y*this.density+ce)+Te;Te<ne&&(ge[le]=ae[4==ne?le:(J*Y*this.density+ce)*ne+Te])}return(X=new _.default.Image(Y*this.density,ve*this.density)).imageData=X.canvas.getContext("2d").createImageData(X.width,X.height),X.imageData.data.set(ge),X.pixels=X.imageData.data,X.updatePixels(),1!==this.density&&X.resize(Y,ve),X}},{key:"updatePixels",value:function(){var X=this.gl,ee=(this.colorP5Texture.bindTexture(),this._glColorFormat()),Y=this.width*this.height*this.density*this.density*(Y=ee.format===X.RGBA?4:3),ve=ee.type===X.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof ve)||this.pixels.length!==Y)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");X.texImage2D(X.TEXTURE_2D,0,ee.internalFormat,this.width*this.density,this.height*this.density,0,ee.format,ee.type,this.pixels),this.colorP5Texture.unbindTexture(),ve=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(X.clearDepth(1),X.clear(X.DEPTH_BUFFER_BIT)),this.end()):(X.bindFramebuffer(X.FRAMEBUFFER,this.framebuffer),this.useDepth&&(X.clearDepth(1),X.clear(X.DEPTH_BUFFER_BIT)),X.bindFramebuffer(X.FRAMEBUFFER,ve?ve._framebufferToBind():null))}}]),ie}());G=_.default.Framebuffer=z,q.default=G},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(a,_e,q){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function C(p){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(p)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.flat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.unscopables.flat"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.entries"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.flat"),a("core-js/modules/es.array.for-each"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.last-index-of"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.unscopables.flat"),a("core-js/modules/es.array-buffer.constructor"),a("core-js/modules/es.map"),a("core-js/modules/es.number.constructor"),a("core-js/modules/es.object.entries"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.set"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.sub"),a("core-js/modules/web.dom-collections.for-each"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(h=a("../core/main"))&&h.__esModule?h:{default:h},w=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==C(p)&&"function"!=typeof p)return{default:p};var g=I();if(g&&g.has(p))return g.get(p);var v,S={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in p){var E;Object.prototype.hasOwnProperty.call(p,v)&&((E=x?Object.getOwnPropertyDescriptor(p,v):null)&&(E.get||E.set)?Object.defineProperty(S,v,E):S[v]=p[v])}return S.default=p,g&&g.set(p,S),S}(a("../core/constants"));function I(){var p;return"function"!=typeof WeakMap?null:(I=function(){return p},p=new WeakMap)}function D(p){return function(g){if(Array.isArray(g)){for(var v=0,S=new Array(g.length);v<g.length;v++)S[v]=g[v];return S}}(p)||function(g){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g))return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(p,g){return function(v){if(Array.isArray(v))return v}(p)||function(v,S){if(Symbol.iterator in Object(v)||"[object Arguments]"===Object.prototype.toString.call(v)){var x=[],E=!0,N=!1,Z=void 0;try{for(var K,z=v[Symbol.iterator]();!(E=(K=z.next()).done)&&(x.push(K.value),!S||x.length!==S);E=!0);}catch(G){N=!0,Z=G}finally{try{E||null==z.return||z.return()}finally{if(N)throw Z}}return x}}(p,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(p,g){for(var v=0;v<g.length;v++){var S=g[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}_.default.Geometry=function(){function p(x,E,N){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new _.default.DataArray,this.lineTangentsIn=new _.default.DataArray,this.lineTangentsOut=new _.default.DataArray,this.lineSides=new _.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new _.default.DataArray,this.detailX=void 0!==x?x:1,this.detailY=void 0!==E?E:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,N instanceof Function&&N.call(this)}var g,v;return g=p,(v=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new _.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),E=new _.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),N=0;N<this.vertices.length;N++){var Z=this.vertices[N];x.x=Math.min(x.x,Z.x),x.y=Math.min(x.y,Z.y),x.z=Math.min(x.z,Z.z),E.x=Math.max(E.x,Z.x),E.y=Math.max(E.y,Z.y),E.z=Math.max(E.z,Z.z)}var K=new _.default.Vector(E.x-x.x,E.y-x.y,E.z-x.z),z=new _.default.Vector((x.x+E.x)/2,(x.y+E.y)/2,(x.z+E.z)/2);this.boundingBoxCache={min:x,max:E,size:K,offset:z}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var x=this,E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",N="";if(this.vertices.forEach(function(z){N+="v ".concat(z.x," ").concat(z.y," ").concat(z.z,"\n")}),this.uvs&&0<this.uvs.length)for(var Z=0;Z<this.uvs.length;Z+=2)N+="vt ".concat(this.uvs[Z]," ").concat(this.uvs[Z+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(z){N+="vn ".concat(z.x," ").concat(z.y," ").concat(z.z,"\n")}),this.faces.forEach(function(z){var G="f";z.forEach(function(ie){G=G+" "+(ie+1),(0<x.vertexNormals.length||0<x.uvs.length)&&(G+="/",0<x.uvs.length&&(G+=ie+1),G+="/",0<x.vertexNormals.length&&(G+=ie+1))}),N+=G+"\n"});var K=new Blob([N],{type:"text/plain"});_.default.prototype.downloadFile(K,E,"obj")}},{key:"saveStl",value:function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",E=void 0!==(E=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&E,N=x.substring(0,x.lastIndexOf(".")),Z=[],K=!0,z=!1,G=void 0;try{for(var ie,X=this.faces[Symbol.iterator]();!(K=(ie=X.next()).done);K=!0){var ee=ie.value,Y=_.default.Vector.sub(this.vertices[ee[1]],this.vertices[ee[0]]),ve=_.default.Vector.sub(this.vertices[ee[2]],this.vertices[ee[0]]);Z.push(new _.default.Vector(Y.y*ve.z-Y.z*ve.y,Y.z*ve.x-Y.x*ve.z,Y.x*ve.y-Y.y*ve.x).normalize())}}catch(fn){z=!0,G=fn}finally{try{K||null==X.return||X.return()}finally{if(z)throw G}}if(E){var ne,J=80;z=2*this.faces.length+3*this.faces.length*4*4+80+4,G=new ArrayBuffer(z),(ne=new DataView(G)).setUint32(J,this.faces.length,!0),J+=4;for(var ce=0,Te=Object.entries(this.faces);ce<Te.length;ce++){var V=(et=d(Te[ce],2))[0],et=et[1],le=(ne.setFloat32(J,(V=Z[V]).x,!0),ne.setFloat32(J+=4,V.y,!0),ne.setFloat32(J+=4,V.z,!0),J+=4,!0),me=void(V=!1);try{for(var Oe,Xe=et[Symbol.iterator]();!(le=(Oe=Xe.next()).done);le=!0){var yt=this.vertices[Oe.value];ne.setFloat32(J,yt.x,!0),ne.setFloat32(J+=4,yt.y,!0),ne.setFloat32(J+=4,yt.z,!0),J+=4}}catch(En){V=!0,me=En}finally{try{le||null==Xe.return||Xe.return()}finally{if(V)throw me}}ne.setUint16(J,0,!0),J+=2}}else{ne="solid "+N+"\n";for(var Ut=0,ht=Object.entries(this.faces);Ut<ht.length;Ut++){var lt=(Lt=d(ht[Ut],2))[0],Lt=Lt[1],kt=(ne=ne+" facet norm "+(lt=Z[lt]).x+" "+lt.y+" "+lt.z+"\n  outer loop\n",!0),It=void(lt=!1);try{for(var bt,Pt=Lt[Symbol.iterator]();!(kt=(bt=Pt.next()).done);kt=!0){var zt=this.vertices[bt.value];ne+="   vertex "+zt.x+" "+zt.y+" "+zt.z+"\n"}}catch(fn){lt=!0,It=fn}finally{try{kt||null==Pt.return||Pt.return()}finally{if(lt)throw It}}ne+="  endloop\n endfacet\n"}ne+="endsolid "+N+"\n"}E=new Blob([ne],{type:"text/plain"}),_.default.prototype.downloadFile(E,x,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,E){return E%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,E){return E%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,E,N,Z=this.detailX+1,K=0;K<this.detailY;K++)for(var z=0;z<this.detailX;z++)E=(K+1)*Z+z+1,this.faces.push([K*Z+z,x=K*Z+z+1,N=(K+1)*Z+z]),this.faces.push([N,x,E]);return this}},{key:"_getFaceNormal",value:function(E){var N=this.vertices[(E=this.faces[E])[0]],K=this.vertices[E[1]],Z=(E=this.vertices[E[2]],K=_.default.Vector.sub(K,N),E=_.default.Vector.sub(E,N),N=_.default.Vector.cross(K,E),_.default.Vector.mag(N));return 0==(K=Z/(_.default.Vector.mag(K)*_.default.Vector.mag(E)))||isNaN(K)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),N):(1<K&&(K=1),N.mult(Math.asin(K)/Z))}},{key:"computeNormals",value:function(){var x,E=this,Z=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,K=this.vertexNormals,z=this.vertices,G=this.faces;if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:w.FLAT)===w.SMOOTH){for(var ie={},X=[],ee=Math.pow(10,void 0===Z?3:Z),Y=function(ne){return Math.round(ne*ee)/ee},ve=function(ne){return"".concat(Y(ne.x),",").concat(Y(ne.y),",").concat(Y(ne.z))},xe=0;xe<z.length;xe++){var ae=z[xe],ge=ve(ae);void 0===ie[ge]&&(ie[ge]=X.length,X.push(ae))}G.forEach(function(ne){for(var J=0;J<3;++J){var ce=ve(ce=z[ce=ne[J]]);ne[J]=ie[ce]}}),this.edges.forEach(function(ne){for(var J=0;J<2;++J){var ce=ve(ce=z[ce=ne[J]]);ne[J]=ie[ce]}}),this.vertices=z=X}for(x=K.length=0;x<z.length;++x)K.push(new _.default.Vector);for(G.forEach(function(ne,J){for(var ce=E._getFaceNormal(J),Te=0;Te<3;++Te)K[ne[Te]].add(ce)}),x=0;x<z.length;++x)K[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var E=this.detailX+1,N=_.default.Vector.add(this.vertexNormals[x*E],this.vertexNormals[x*E+this.detailX]);N=_.default.Vector.div(N,2),this.vertexNormals[x*E]=N,this.vertexNormals[x*E+this.detailX]=N}return this}},{key:"averagePoleNormals",value:function(){for(var x=new _.default.Vector(0,0,0),E=0;E<this.detailX;E++)x.add(this.vertexNormals[E]);x=_.default.Vector.div(x,this.detailX);for(var N=0;N<this.detailX;N++)this.vertexNormals[N]=x;x=new _.default.Vector(0,0,0);for(var Z=this.vertices.length-1;Z>this.vertices.length-1-this.detailX;Z--)x.add(this.vertexNormals[Z]);x=_.default.Vector.div(x,this.detailX);for(var K=this.vertices.length-1;K>this.vertices.length-1-this.detailX;K--)this.vertexNormals[K]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,E=new Map,N=new Set,Z=0;Z<this.edges.length;Z++){var K,z=this.edges[Z-1],G=this.edges[Z],ie=this.vertices[G[0]],X=this.vertices[G[1]],ee=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*G[0],4*(G[0]+1)):[0,0,0,0],Y=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*G[1],4*(G[1]+1)):[0,0,0,0],ve=X.copy().sub(ie).normalize(),xe=0<ve.magSq();xe&&this._addSegment(ie,X,ee,Y,ve),0<Z&&z[1]===G[0]?N.has(G[0])||(N.add(G[0]),E.delete(G[0]),x&&xe&&ve.dot(x)<1-1e-8&&this._addJoin(ie,x,ve,ee)):(xe&&!N.has(G[0])&&((K=E.get(G[0]))?(this._addJoin(ie,K.dir,ve,ee),E.delete(G[0]),N.add(G[0])):E.set(G[0],{point:ie,dir:ve.copy().mult(-1),color:ee})),x&&!N.has(z[1])&&((K=E.get(z[1]))?(this._addJoin(this.vertices[z[1]],x,K.dir.copy().mult(-1),ee),E.delete(z[1]),N.add(z[1])):E.set(z[1],{point:this.vertices[z[1]],dir:x,color:ee}),x=void 0)),Z!==this.edges.length-1||N.has(G[1])||((ie=E.get(G[1]))?(this._addJoin(X,ve,ie.dir.copy().mult(-1),Y),E.delete(G[1]),N.add(G[1])):E.set(G[1],{point:X,dir:ve,color:Y})),xe&&(x=ve)}var ae=!0,ge=!1,ne=void 0;try{for(var J,ce=E.values()[Symbol.iterator]();!(ae=(J=ce.next()).done);ae=!0){var Te=J.value;this._addCap(Te.point,Te.dir,Te.color)}}catch(me){ge=!0,ne=me}finally{try{ae||null==ce.return||ce.return()}finally{if(ge)throw ne}}return this}},{key:"_addSegment",value:function(z,G,N,Z,K){z=z.array(),G=G.array();var ie=K.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var X=0,ee=[this.lineTangentsIn,this.lineTangentsOut];X<ee.length;X++)for(var Y=ee[X],ve=0;ve<6;ve++)Y.push.apply(Y,D(ie));return(K=this.lineVertices).push.apply(K,D(z).concat(D(G),D(z),D(G),D(G),D(z))),(K=this.lineVertexColors).push.apply(K,D(N).concat(D(Z),D(N),D(Z),D(Z),D(N))),this}},{key:"_addCap",value:function(x,E,N){for(var Z,K=x.array(),z=E.array(),G=[0,0,0],ie=0;ie<6;ie++)(Z=this.lineVertices).push.apply(Z,D(K)),(Z=this.lineTangentsIn).push.apply(Z,D(z)),(Z=this.lineTangentsOut).push.apply(Z,G),(Z=this.lineVertexColors).push.apply(Z,D(N));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,E,N,Z){for(var K,z=x.array(),G=E.array(),ie=N.array(),X=0;X<12;X++)(K=this.lineVertices).push.apply(K,D(z)),(K=this.lineTangentsIn).push.apply(K,D(G)),(K=this.lineTangentsOut).push.apply(K,D(ie)),(K=this.lineVertexColors).push.apply(K,D(Z));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),E=this.vertices[0].copy(),N=0;N<this.vertices.length;N++)x.x=Math.max(x.x,this.vertices[N].x),E.x=Math.min(E.x,this.vertices[N].x),x.y=Math.max(x.y,this.vertices[N].y),E.y=Math.min(E.y,this.vertices[N].y),x.z=Math.max(x.z,this.vertices[N].z),E.z=Math.min(E.z,this.vertices[N].z);for(var Z=_.default.Vector.lerp(x,E,.5),K=_.default.Vector.sub(x,E),z=200/Math.max(Math.max(K.x,K.y),K.z),G=0;G<this.vertices.length;G++)this.vertices[G].sub(Z),this.vertices[G].mult(z)}return this}}])&&f(g.prototype,v),p}();var h=_.default.Geometry;q.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(I,_e,q){"use strict";I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I};function C(D,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(D,h.key,h)}}var _=Array,w=function(D){return Array.isArray(D)};typeof Float32Array<"u"&&(_=Float32Array,w=function(D){return Array.isArray(D)||D instanceof Float32Array}),M.default.Matrix=function(){function D(){var p=this,g=D;if(p instanceof g)return arguments.length&&((p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p])instanceof M.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new _([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new _([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var d,f,h;return d=D,h=[{key:"identity",value:function(p){return new M.default.Matrix(p)}}],(f=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(p){var g=arguments;if(p instanceof M.default.Matrix?g=p.mat4:w(p)&&(g=p),16!==g.length)M.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var v=0;v<16;v++)this.mat4[v]=g[v];return this}},{key:"get",value:function(){return new M.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var p;return void 0!==this.mat3?((p=new M.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],p.mat3[1]=this.mat3[1],p.mat3[2]=this.mat3[2],p.mat3[3]=this.mat3[3],p.mat3[4]=this.mat3[4],p.mat3[5]=this.mat3[5],p.mat3[6]=this.mat3[6],p.mat3[7]=this.mat3[7],p.mat3[8]=this.mat3[8]):((p=new M.default.Matrix(this.p5)).mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15]),p}},{key:"transpose",value:function(p){var g,v,S,x,E,N;return p instanceof M.default.Matrix?(g=p.mat4[1],v=p.mat4[2],S=p.mat4[3],x=p.mat4[6],E=p.mat4[7],N=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=g,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=v,this.mat4[9]=x,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=S,this.mat4[13]=E,this.mat4[14]=N,this.mat4[15]=p.mat4[15]):w(p)&&(g=p[1],v=p[2],S=p[3],x=p[6],E=p[7],N=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=g,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=v,this.mat4[9]=x,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=S,this.mat4[13]=E,this.mat4[14]=N,this.mat4[15]=p[15]),this}},{key:"invert",value:function(ae){ae instanceof M.default.Matrix?(g=ae.mat4[0],v=ae.mat4[1],S=ae.mat4[2],x=ae.mat4[3],E=ae.mat4[4],N=ae.mat4[5],Z=ae.mat4[6],K=ae.mat4[7],z=ae.mat4[8],G=ae.mat4[9],ie=ae.mat4[10],X=ae.mat4[11],ee=ae.mat4[12],Y=ae.mat4[13],ve=ae.mat4[14],xe=ae.mat4[15]):w(ae)&&(g=ae[0],v=ae[1],S=ae[2],x=ae[3],E=ae[4],N=ae[5],Z=ae[6],K=ae[7],z=ae[8],G=ae[9],ie=ae[10],X=ae[11],ee=ae[12],Y=ae[13],ve=ae[14],xe=ae[15]);var g,v,S,x,E,N,Z,K,z,G,ie,X,ee,Y,ve,xe,ge=g*Z-S*E,ne=g*K-x*E,J=v*Z-S*N,ce=v*K-x*N,Te=S*K-x*Z,et=z*Y-G*ee,le=z*ve-ie*ee,V=z*xe-X*ee,me=G*ve-ie*Y,Oe=G*xe-X*Y,Xe=ie*xe-X*ve,dt=(ae=g*N-v*E)*Xe-ge*Oe+ne*me+J*V-ce*le+Te*et;return dt?(this.mat4[0]=(N*Xe-Z*Oe+K*me)*(dt=1/dt),this.mat4[1]=(S*Oe-v*Xe-x*me)*dt,this.mat4[2]=(Y*Te-ve*ce+xe*J)*dt,this.mat4[3]=(ie*ce-G*Te-X*J)*dt,this.mat4[4]=(Z*V-E*Xe-K*le)*dt,this.mat4[5]=(g*Xe-S*V+x*le)*dt,this.mat4[6]=(ve*ne-ee*Te-xe*ge)*dt,this.mat4[7]=(z*Te-ie*ne+X*ge)*dt,this.mat4[8]=(E*Oe-N*V+K*et)*dt,this.mat4[9]=(v*V-g*Oe-x*et)*dt,this.mat4[10]=(ee*ce-Y*ne+xe*ae)*dt,this.mat4[11]=(G*ne-z*ce-X*ae)*dt,this.mat4[12]=(N*le-E*me-Z*et)*dt,this.mat4[13]=(g*me-v*le+S*et)*dt,this.mat4[14]=(Y*ge-ee*J-ve*ae)*dt,this.mat4[15]=(z*J-G*ge+ie*ae)*dt,this):null}},{key:"invert3x3",value:function(){var p=this.mat3[0],g=this.mat3[1],v=this.mat3[2],S=this.mat3[3],x=this.mat3[4],E=this.mat3[5],N=this.mat3[6],Z=this.mat3[7],K=this.mat3[8],z=K*x-E*Z,G=-K*S+E*N,ie=Z*S-x*N,X=p*z+g*G+v*ie;return X?(this.mat3[0]=z*(X=1/X),this.mat3[1]=(-K*g+v*Z)*X,this.mat3[2]=(E*g-v*x)*X,this.mat3[3]=G*X,this.mat3[4]=(K*p-v*N)*X,this.mat3[5]=(-E*p+v*S)*X,this.mat3[6]=ie*X,this.mat3[7]=(-Z*p+g*N)*X,this.mat3[8]=(x*p-g*S)*X,this):null}},{key:"transpose3x3",value:function(p){var g=(p=void 0===p?this.mat3:p)[1],v=p[2],S=p[5];return this.mat3[0]=p[0],this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=g,this.mat3[4]=p[4],this.mat3[5]=p[7],this.mat3[6]=v,this.mat3[7]=S,this.mat3[8]=p[8],this}},{key:"inverseTranspose",value:function(p){if(p=p.mat4,void 0===this.mat3?M.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=p[0],this.mat3[1]=p[1],this.mat3[2]=p[2],this.mat3[3]=p[4],this.mat3[4]=p[5],this.mat3[5]=p[6],this.mat3[6]=p[8],this.mat3[7]=p[9],this.mat3[8]=p[10]),p=this.invert3x3())p.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){return(this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4])*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-(this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4])*(this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13])+(this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4])*(this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13])+(this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5])*(this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12])-(this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5])*(this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12])+(this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6])*(this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12])}},{key:"mult",value:function(v){var g;if(v===this||v===this.mat4)g=this.copy().mat4;else if(v instanceof M.default.Matrix)g=v.mat4;else if(w(v))g=v;else{if(16!==arguments.length)return;g=arguments}var S=this.mat4[1],x=this.mat4[2],E=this.mat4[3];return this.mat4[0]=(v=this.mat4[0])*g[0]+S*g[4]+x*g[8]+E*g[12],this.mat4[1]=v*g[1]+S*g[5]+x*g[9]+E*g[13],this.mat4[2]=v*g[2]+S*g[6]+x*g[10]+E*g[14],this.mat4[3]=v*g[3]+S*g[7]+x*g[11]+E*g[15],this.mat4[4]=(v=this.mat4[4])*g[0]+(S=this.mat4[5])*g[4]+(x=this.mat4[6])*g[8]+(E=this.mat4[7])*g[12],this.mat4[5]=v*g[1]+S*g[5]+x*g[9]+E*g[13],this.mat4[6]=v*g[2]+S*g[6]+x*g[10]+E*g[14],this.mat4[7]=v*g[3]+S*g[7]+x*g[11]+E*g[15],this.mat4[8]=(v=this.mat4[8])*g[0]+(S=this.mat4[9])*g[4]+(x=this.mat4[10])*g[8]+(E=this.mat4[11])*g[12],this.mat4[9]=v*g[1]+S*g[5]+x*g[9]+E*g[13],this.mat4[10]=v*g[2]+S*g[6]+x*g[10]+E*g[14],this.mat4[11]=v*g[3]+S*g[7]+x*g[11]+E*g[15],this.mat4[12]=(v=this.mat4[12])*g[0]+(S=this.mat4[13])*g[4]+(x=this.mat4[14])*g[8]+(E=this.mat4[15])*g[12],this.mat4[13]=v*g[1]+S*g[5]+x*g[9]+E*g[13],this.mat4[14]=v*g[2]+S*g[6]+x*g[10]+E*g[14],this.mat4[15]=v*g[3]+S*g[7]+x*g[11]+E*g[15],this}},{key:"apply",value:function(v){var g;if(v===this||v===this.mat4)g=this.copy().mat4;else if(v instanceof M.default.Matrix)g=v.mat4;else if(w(v))g=v;else{if(16!==arguments.length)return;g=arguments}var x,E,N,S=((v=this.mat4)[0]=g[0]*(S=v[0])+g[1]*(x=v[4])+g[2]*(E=v[8])+g[3]*(N=v[12]),v[4]=g[4]*S+g[5]*x+g[6]*E+g[7]*N,v[8]=g[8]*S+g[9]*x+g[10]*E+g[11]*N,v[12]=g[12]*S+g[13]*x+g[14]*E+g[15]*N,v[1]);return v[1]=g[0]*S+g[1]*(x=v[5])+g[2]*(E=v[9])+g[3]*(N=v[13]),v[5]=g[4]*S+g[5]*x+g[6]*E+g[7]*N,v[9]=g[8]*S+g[9]*x+g[10]*E+g[11]*N,v[13]=g[12]*S+g[13]*x+g[14]*E+g[15]*N,v[2]=g[0]*(S=v[2])+g[1]*(x=v[6])+g[2]*(E=v[10])+g[3]*(N=v[14]),v[6]=g[4]*S+g[5]*x+g[6]*E+g[7]*N,v[10]=g[8]*S+g[9]*x+g[10]*E+g[11]*N,v[14]=g[12]*S+g[13]*x+g[14]*E+g[15]*N,v[3]=g[0]*(S=v[3])+g[1]*(x=v[7])+g[2]*(E=v[11])+g[3]*(N=v[15]),v[7]=g[4]*S+g[5]*x+g[6]*E+g[7]*N,v[11]=g[8]*S+g[9]*x+g[10]*E+g[11]*N,v[15]=g[12]*S+g[13]*x+g[14]*E+g[15]*N,this}},{key:"scale",value:function(p,g,v){return p instanceof M.default.Vector?(g=p.y,v=p.z,p=p.x):p instanceof Array&&(g=p[1],v=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=v,this.mat4[9]*=v,this.mat4[10]*=v,this.mat4[11]*=v,this}},{key:"rotate",value:function(ae,Oe,me,S){Oe instanceof M.default.Vector?(me=Oe.y,S=Oe.z,Oe=Oe.x):Oe instanceof Array&&(me=Oe[1],S=Oe[2],Oe=Oe[0]);var x=(Oe*=1/(x=Math.sqrt(Oe*Oe+me*me+S*S)),me*=1/x,S*=1/x,this.mat4[0]),E=this.mat4[1],N=this.mat4[2],Z=this.mat4[3],K=this.mat4[4],z=this.mat4[5],G=this.mat4[6],ie=this.mat4[7],X=this.mat4[8],ee=this.mat4[9],Y=this.mat4[10],ve=this.mat4[11],xe=Math.sin(ae),ge=1-(ae=Math.cos(ae)),ne=Oe*Oe*ge+ae,J=me*Oe*ge+S*xe,ce=S*Oe*ge-me*xe,Te=Oe*me*ge-S*xe,et=me*me*ge+ae,le=S*me*ge+Oe*xe,V=Oe*S*ge+me*xe;return me=me*S*ge-Oe*xe,Oe=S*S*ge+ae,this.mat4[0]=x*ne+K*J+X*ce,this.mat4[1]=E*ne+z*J+ee*ce,this.mat4[2]=N*ne+G*J+Y*ce,this.mat4[3]=Z*ne+ie*J+ve*ce,this.mat4[4]=x*Te+K*et+X*le,this.mat4[5]=E*Te+z*et+ee*le,this.mat4[6]=N*Te+G*et+Y*le,this.mat4[7]=Z*Te+ie*et+ve*le,this.mat4[8]=x*V+K*me+X*Oe,this.mat4[9]=E*V+z*me+ee*Oe,this.mat4[10]=N*V+G*me+Y*Oe,this.mat4[11]=Z*V+ie*me+ve*Oe,this}},{key:"translate",value:function(S){var g=S[0],v=S[1];this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*v+this.mat4[8]*(S=S[2]||0),this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*v+this.mat4[9]*S,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*v+this.mat4[10]*S,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*v+this.mat4[11]*S}},{key:"rotateX",value:function(p){this.rotate(p,1,0,0)}},{key:"rotateY",value:function(p){this.rotate(p,0,1,0)}},{key:"rotateZ",value:function(p){this.rotate(p,0,0,1)}},{key:"perspective",value:function(x,g,v,S){x=1/Math.tan(x/2);var E=1/(v-S);return this.mat4[0]=x/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=x,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(S+v)*E,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*S*v*E,this.mat4[15]=0,this}},{key:"ortho",value:function(p,g,v,S,x,E){var N=1/(p-g),Z=1/(v-S),K=1/(x-E);return this.mat4[0]=-2*N,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*Z,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*K,this.mat4[11]=0,this.mat4[12]=(p+g)*N,this.mat4[13]=(S+v)*Z,this.mat4[14]=(E+x)*K,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(p,g,v,S){var x=new Array(4),E=this.mat4;return x[0]=E[0]*p+E[4]*g+E[8]*v+E[12]*S,x[1]=E[1]*p+E[5]*g+E[9]*v+E[13]*S,x[2]=E[2]*p+E[6]*g+E[10]*v+E[14]*S,x[3]=E[3]*p+E[7]*g+E[11]*v+E[15]*S,x}},{key:"multiplyPoint",value:function(v){var S=this.multiplyVec4(S=v.x,v.y,v=v.z,1);return new M.default.Vector(S[0],S[1],S[2])}},{key:"multiplyAndNormalizePoint",value:function(v){var S;return(S=this.multiplyVec4(S=v.x,v.y,v=v.z,1))[0]/=S[3],S[1]/=S[3],S[2]/=S[3],new M.default.Vector(S[0],S[1],S[2])}},{key:"multiplyDirection",value:function(v){var S=this.multiplyVec4(S=v.x,v.y,v=v.z,0);return new M.default.Vector(S[0],S[1],S[2])}},{key:"mult3x3",value:function(v){var g;if(v===this||v===this.mat3)g=this.copy().mat3;else if(v instanceof M.default.Matrix)g=v.mat3;else if(w(v))g=v;else{if(9!==arguments.length)return;g=arguments}var S=this.mat3[1],x=this.mat3[2];return this.mat3[0]=(v=this.mat3[0])*g[0]+S*g[3]+x*g[6],this.mat3[1]=v*g[1]+S*g[4]+x*g[7],this.mat3[2]=v*g[2]+S*g[5]+x*g[8],this.mat3[3]=(v=this.mat3[3])*g[0]+(S=this.mat3[4])*g[3]+(x=this.mat3[5])*g[6],this.mat3[4]=v*g[1]+S*g[4]+x*g[7],this.mat3[5]=v*g[2]+S*g[5]+x*g[8],this.mat3[6]=(v=this.mat3[6])*g[0]+(S=this.mat3[7])*g[3]+(x=this.mat3[8])*g[6],this.mat3[7]=v*g[1]+S*g[4]+x*g[7],this.mat3[8]=v*g[2]+S*g[5]+x*g[8],this}},{key:"column",value:function(p){return new M.default.Vector(this.mat3[3*p],this.mat3[3*p+1],this.mat3[3*p+2])}},{key:"row",value:function(p){return new M.default.Vector(this.mat3[p],this.mat3[p+3],this.mat3[p+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(p,g){return(g=void 0===g?p.copy():g).x=this.row(0).dot(p),g.y=this.row(1).dot(p),g.z=this.row(2).dot(p),g}},{key:"createSubMatrix3x3",value:function(){var p=new M.default.Matrix("mat3");return p.mat3[0]=this.mat4[0],p.mat3[1]=this.mat4[1],p.mat3[2]=this.mat4[2],p.mat3[3]=this.mat4[4],p.mat3[4]=this.mat4[5],p.mat3[5]=this.mat4[6],p.mat3[6]=this.mat4[8],p.mat3[7]=this.mat4[9],p.mat3[8]=this.mat4[10],p}}])&&C(d.prototype,f),h&&C(d,h),D}(),q.default=I=M.default.Matrix},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(a,_e,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(_,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}M.default.Quat=function(){function _(d,f,h,p){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.w=d,this.vec=new M.default.Vector(f,h,p)}var w,I,D;return w=_,D=[{key:"fromAxisAngle",value:function(d,v,h,p){var g=Math.cos(d/2);return v=new M.default.Vector(v,h,p).normalize().mult(Math.sin(d/2)),new M.default.Quat(g,v.x,v.y,v.z)}}],(I=[{key:"conjugate",value:function(){return new M.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(d){return new M.default.Quat(this.w*d.w-this.vec.x*d.vec.x-this.vec.y*d.vec.y-this.vec.z-d.vec.z,this.w*d.vec.x+this.vec.x*d.w+this.vec.y*d.vec.z-this.vec.z*d.vec.y,this.w*d.vec.y-this.vec.x*d.vec.z+this.vec.y*d.w+this.vec.z*d.vec.x,this.w*d.vec.z+this.vec.x*d.vec.y-this.vec.y*d.vec.x+this.vec.z*d.w)}},{key:"rotateVector",value:function(d){return new M.default.Vector.mult(d,this.w*this.w-this.vec.dot(this.vec)).add(M.default.Vector.mult(this.vec,2*d.dot(this.vec))).add(M.default.Vector.mult(this.vec,2*this.w).cross(d)).clampToZero()}},{key:"rotateBy",value:function(d){return d.multiply(this).multiply(d.conjugate()).vec.clampToZero()}}])&&C(w.prototype,I),D&&C(w,D),_}(),q.default=a=M.default.Quat},{"../core/main":283}],338:[function(a,_e,q){"use strict";function M(C,_){for(var w=0;w<_.length;w++){var I=_[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}a("core-js/modules/es.array.map"),a("core-js/modules/es.array.map"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,(a=(a=a("../core/main"))&&a.__esModule?a:{default:a}).default.RenderBuffer=function(){function C(D,d,f,h,p,g){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.size=D,this.src=d,this.dst=f,this.attr=h,this._renderer=p,this.map=g}var _,w;return _=C,(w=[{key:"_prepareBuffer",value:function(D,d){var f,h,p,S,g=this._renderer.GL,v=D.model||D;(S=(S=d.attributes)[this.attr])&&(f=D[this.dst],0<(h=v[this.src]).length?((p=!f)&&(D[this.dst]=f=g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,f),!p&&!1===v.dirtyFlags[this.src]||(p=(D=this.map)?D(h):h,this._renderer._bindBuffer(f,g.ARRAY_BUFFER,p),v.dirtyFlags[this.src]=!1),d.enableAttrib(S,this.size)):-1!==(D=S.location)&&this._renderer.registerEnabled.has(D)&&(g.disableVertexAttribArray(D),this._renderer.registerEnabled.delete(D)))}}])&&M(_.prototype,w),C}(),q.default=a=a.default.RenderBuffer},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(a,_e,q){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.find-index"),a("core-js/modules/es.array.from"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.map"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.concat"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.find-index"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.map"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(f=a("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var g,v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=S?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(v,g,x):v[g]=h[g])}return v.default=h,p&&p.set(h,v),v}(a("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var g=0,v=new Array(p.length);g<p.length;g++)v[g]=p[g];return v}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a("./p5.RenderBuffer"),_.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=void 0!==h?h:w.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var d={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(_.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==w.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},_.default.RendererGL.prototype.vertex=function(h,p){if(this.immediateMode.shapeMode===w.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in d){var v=d[g];(g=this.immediateMode.geometry[g]).push.apply(g,D(g.slice(g.length-3*v,g.length-2*v)).concat(D(g.slice(g.length-v,g.length))))}var S,x,E=S=x=0,N=(3===arguments.length?E=arguments[2]:4===arguments.length?(S=arguments[2],x=arguments[3]):5===arguments.length&&(E=arguments[2],S=arguments[3],x=arguments[4]),new _.default.Vector(h,p,E));return this.immediateMode.geometry.vertices.push(N),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.immediateMode.geometry.vertexColors.push((N=this.curFillColor||[.5,.5,.5,1])[0],N[1],N[2],N[3]),this.immediateMode.geometry.vertexStrokeColors.push((N=this.curStrokeColor||[.5,.5,.5,1])[0],N[1],N[2],N[3]),this.textureMode!==w.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(S/=this._tex.width,x/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(S,x),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=p,this.immediateMode._bezierVertex[2]=E,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=p,this.immediateMode._quadraticVertex[2]=E,this},_.default.RendererGL.prototype.normal=function(h,p,g){return this._currentNormal=h instanceof _.default.Vector?h:new _.default.Vector(h,p,g),this},_.default.RendererGL.prototype.endShape=function(h,p,g,v,S,x){var E,N=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===w.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),E=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==w.LINE_STRIP&&this.immediateMode.shapeMode!==w.LINES||(this.immediateMode.shapeMode=w.TRIANGLE_FAN,E=!0),this.immediateMode.shapeMode===w.QUADS?this.immediateMode.shapeMode=w.TRIANGLES:this.immediateMode.shapeMode===w.QUAD_STRIP&&(this.immediateMode.shapeMode=w.TRIANGLE_STRIP),this._doFill&&!E&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(N),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},_.default.RendererGL.prototype._processVertices=function(h){var p;0!==this.immediateMode.geometry.vertices.length&&(h=h===w.CLOSE,this._doStroke&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),p=this.immediateMode.shapeMode===w.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||p||h)&&this.immediateMode.shapeMode!==w.LINES&&this._tesselateShape())},_.default.RendererGL.prototype._calculateEdges=function(h,p,g){var v=[],S=0,x=this.immediateMode.contourIndices.slice(),E=0;switch(h){case w.TRIANGLE_STRIP:for(S=0;S<p.length-2;S++)v.push([S,S+1]),v.push([S,S+2]);v.push([S,S+1]);break;case w.TRIANGLE_FAN:for(S=1;S<p.length-1;S++)v.push([0,S]),v.push([S,S+1]);v.push([0,p.length-1]);break;case w.TRIANGLES:for(S=0;S<p.length-2;S+=3)v.push([S,S+1]),v.push([S+1,S+2]),v.push([S+2,S]);break;case w.LINES:for(S=0;S<p.length-1;S+=2)v.push([S,S+1]);break;case w.QUADS:for(S=0;S<p.length-5;S+=6)v.push([S,S+1]),v.push([S+1,S+2]),v.push([S+3,S+5]),v.push([S+4,S+5]);break;case w.QUAD_STRIP:for(S=0;S<p.length-2;S+=2)v.push([S,S+1]),v.push([S,S+2]),v.push([S+1,S+3]);v.push([S,S+1]);break;default:for(S=0;S<p.length;S++)S+1<p.length&&S+1!==x[0]?v.push([S,S+1]):((g||E)&&v.push([S,E]),0<x.length&&(E=x.shift()))}return h!==w.TESS&&g&&v.push([p.length-1,0]),v},_.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,p=(this.immediateMode.shapeMode=w.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),p.push([])),p[p.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var v,S=this._triangulate(p),x=this.immediateMode.geometry.vertices,E=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),N=0,Z=S.length;N<Z;N+=_.default.RendererGL.prototype.tessyVertexSize)E.push.apply(E,D(S.slice(N+5,N+9))),this.normal.apply(this,D(S.slice(N+9,N+12))),this.vertex.apply(this,D(S.slice(N,N+5)));this.geometryBuilder&&(v=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(K){return K.map(function(z){if(!v.has(z)){var G=x[z],ie=h.immediateMode.geometry.vertices.findIndex(function(ge){return G.x===ge.x&&G.y===ge.y&&G.z===ge.z});if(-1===ie){for(var X=1/0,ee=0,Y=0;Y<h.immediateMode.geometry.vertices.length;Y++){var xe,ae,ve=G.y-(xe=h.immediateMode.geometry.vertices[Y]).y;(ae=(ae=G.x-xe.x)*ae+ve*ve+(xe=G.z-xe.z)*xe)<X&&(X=ae,ee=Y)}ie=ee}v.set(z,ie)}return v.get(z)})})),this.immediateMode.geometry.vertexColors=E},_.default.RendererGL.prototype._drawImmediateFill=function(){var h,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,g=this.GL,v=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),S=!1,x=void 0;try{for(var E,N=this.immediateMode.buffers.fill[Symbol.iterator]();!(v=(E=N.next()).done);v=!0)E.value._prepareBuffer(this.immediateMode.geometry,h)}catch(Z){S=!0,x=Z}finally{try{v||null==N.return||N.return()}finally{if(S)throw x}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===p)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,p)}catch{console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},_.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,p=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(p),!0),v=!1,S=void 0;try{for(var x,E=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(x=E.next()).done);g=!0)x.value._prepareBuffer(this.immediateMode.geometry,p)}catch(N){v=!0,S=N}finally{try{g||null==E.return||E.return()}finally{if(v)throw S}}p.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),p.unbindShader()},_.default.RendererGL);q.default=f},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(a,_e,q){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.uint16-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.fill"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.some"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.uint16-array"),a("core-js/modules/es.typed-array.uint32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var _=(D=a("../core/main"))&&D.__esModule?D:{default:D},w=(a("./p5.RendererGL"),a("./p5.RenderBuffer"),function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var v;Object.prototype.hasOwnProperty.call(d,h)&&((v=g?Object.getOwnPropertyDescriptor(d,h):null)&&(v.get||v.set)?Object.defineProperty(p,h,v):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(a("../core/constants")));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}_.default.RendererGL.prototype.freeGeometry=function(d){d.gid?this._freeBuffers(d.gid):console.warn("The model you passed to freeGeometry does not have an id!")},_.default.RendererGL.prototype._initBufferDefaults=function(d){var f;return this._freeBuffers(d),1e3<Object.keys(this.retainedMode.geometry).length&&(f=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(f)),this.retainedMode.geometry[d]={}},_.default.RendererGL.prototype._freeBuffers=function(d){var f,h=this.retainedMode.geometry[d];function p(g){var v=!0,S=!1,x=void 0;try{for(var E,N=g[Symbol.iterator]();!(v=(E=N.next()).done);v=!0){var Z=E.value;h[Z.dst]&&(f.deleteBuffer(h[Z.dst]),h[Z.dst]=null)}}catch(K){S=!0,x=K}finally{try{v||null==N.return||N.return()}finally{if(S)throw x}}}h&&(delete this.retainedMode.geometry[d],f=this.GL,h.indexBuffer&&f.deleteBuffer(h.indexBuffer),p(this.retainedMode.buffers.stroke),p(this.retainedMode.buffers.fill))},_.default.RendererGL.prototype.createBuffers=function(S,f){var h,p,g,v=this.GL,x=((S=this._initBufferDefaults(S)).model=f,S.indexBuffer);return f.faces.length?(x=x||(S.indexBuffer=v.createBuffer()),g=(p=(h=_.default.RendererGL.prototype._flatten(f.faces)).some(function(E){return 65535<E}))?Uint32Array:Uint16Array,this._bindBuffer(x,v.ELEMENT_ARRAY_BUFFER,h,g),S.indexBufferType=p?v.UNSIGNED_INT:v.UNSIGNED_SHORT,S.vertexCount=3*f.faces.length):(x&&(v.deleteBuffer(x),S.indexBuffer=null),S.vertexCount=f.vertices?f.vertices.length:0),S.lineVertexCount=f.lineVertices?f.lineVertices.length/3:0,S},_.default.RendererGL.prototype.drawBuffers=function(d){var f=this.GL,h=this.retainedMode.geometry[d];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[d].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var p=this._getRetainedFillShader(),g=(this._setFillUniforms(p),!0),v=!1,S=void 0;try{for(var x,E=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(x=E.next()).done);g=!0)x.value._prepareBuffer(h,p)}catch(G){v=!0,S=G}finally{try{g||null==E.return||E.return()}finally{if(v)throw S}}p.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(f.TRIANGLES,d),p.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var N=this._getRetainedStrokeShader(),Z=(this._setStrokeUniforms(N),!0);v=!1,S=void 0;try{for(var K,z=this.retainedMode.buffers.stroke[Symbol.iterator]();!(Z=(K=z.next()).done);Z=!0)K.value._prepareBuffer(h,N)}catch(X){v=!0,S=X}finally{try{Z||null==z.return||z.return()}finally{if(v)throw S}}N.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(f.TRIANGLES,d),N.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},_.default.RendererGL.prototype.drawBuffersScaled=function(d,f,h,p){var g=this.uModelMatrix.copy();try{this.uModelMatrix.scale(f,h,p),this.drawBuffers(d)}finally{this.uModelMatrix=g}},_.default.RendererGL.prototype._drawArrays=function(d,f){return this.GL.drawArrays(d,0,this.retainedMode.geometry[f].lineVertexCount),this},_.default.RendererGL.prototype._drawElements=function(d,h){var p=this.GL;if((h=this.retainedMode.geometry[h]).indexBuffer){if(this._pInst.webglVersion!==w.WEBGL2&&h.indexBufferType===p.UNSIGNED_INT&&!p.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");p.drawElements(p.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else p.drawArrays(d||p.TRIANGLES,0,h.vertexCount)},_.default.RendererGL.prototype._drawPoints=function(d,f){var h=this.GL,p=this._getImmediatePointShader();this._setPointUniforms(p),this._bindBuffer(f,h.ARRAY_BUFFER,this._vToNArray(d),Float32Array,h.STATIC_DRAW),p.enableAttrib(p.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,d.length),p.unbindShader()};var D=_.default.RendererGL;q.default=D},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(Y,_e,q){"use strict";function M(J){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce})(J)}function C(J){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(ce){return M(ce)}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":M(ce)})(J)}Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.get-own-property-descriptor"),Y("core-js/modules/es.object.get-prototype-of"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.reflect.construct"),Y("core-js/modules/es.reflect.get"),Y("core-js/modules/es.regexp.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/es.weak-map"),Y("core-js/modules/web.dom-collections.iterator"),Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.readPixelsWebGL=ge,q.readPixelWebGL=ne,q.default=void 0;var _=h(Y("../core/main")),w=function(J){if(J&&J.__esModule)return J;if(null===J||"object"!==C(J)&&"function"!=typeof J)return{default:J};var ce=f();if(ce&&ce.has(J))return ce.get(J);var Te,et={},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Te in J){var V;Object.prototype.hasOwnProperty.call(J,Te)&&((V=le?Object.getOwnPropertyDescriptor(J,Te):null)&&(V.get||V.set)?Object.defineProperty(et,Te,V):et[Te]=J[Te])}return et.default=J,ce&&ce.set(J,et),et}(Y("../core/constants")),I=h(Y("./GeometryBuilder")),D=h(Y("libtess")),d=(Y("./p5.Shader"),Y("./p5.Camera"),Y("../core/p5.Renderer"),Y("./p5.Matrix"),Y("./p5.Framebuffer"),Y("path"),Y("./p5.Texture"));function f(){var J;return"function"!=typeof WeakMap?null:(f=function(){return J},J=new WeakMap)}function h(J){return J&&J.__esModule?J:{default:J}}function p(J){return function(ce){if(Array.isArray(ce)){for(var Te=0,et=new Array(ce.length);Te<ce.length;Te++)et[Te]=ce[Te];return et}}(J)||function(ce){if(Symbol.iterator in Object(ce)||"[object Arguments]"===Object.prototype.toString.call(ce))return Array.from(ce)}(J)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(J,ce){for(var Te=0;Te<ce.length;Te++){var et=ce[Te];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(J,et.key,et)}}function v(J,ce,Te){return(v=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(me,le,V){if(me=function(Oe,Xe){for(;!Object.prototype.hasOwnProperty.call(Oe,Xe)&&null!==(Oe=N(Oe)););return Oe}(me,le))return(me=Object.getOwnPropertyDescriptor(me,le)).get?me.get.call(V):me.value})(J,ce,Te||J)}function S(J,ce){return(S=Object.setPrototypeOf||function(Te,et){return Te.__proto__=et,Te})(J,ce)}function E(J){if(void 0===J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function N(J){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)})(J)}function Z(J,ce,Te){ce in J?Object.defineProperty(J,ce,{value:Te,enumerable:!0,configurable:!0,writable:!0}):J[ce]=Te}function K(J,ce){ee+="#define STROKE_CAP_".concat(J," ").concat(ce,"\n"),ie[w[J]]=ce}function z(J,ce){ee+="#define STROKE_JOIN_".concat(J," ").concat(ce,"\n"),X[w[J]]=ce}var G,ie={},X={},ee="",ve={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  OUT_COLOR = vec4(vVertexNormal, 1.0);\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",lightVert:(K("ROUND",0),K("PROJECT",1),K("SQUARE",2),z("ROUND",0),z("MITER",1),z("BEVEL",2),(Y='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float metallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n// roughness for use in calculateImageSpecular\nuniform float levelOfDetail;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition);\n    totalSpecular += calculateImageSpecular(normal, modelPosition);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",phongFrag:Y+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec4 baseColor = isTexture\n    // Textures come in with premultiplied alpha. To apply tint and still have\n    // premultiplied alpha output, we need to multiply the RGB channels by the\n    // tint RGB, and all channels by the tint alpha.\n    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n    // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n    // channels by alpha to convert it to premultiplied alpha.\n    : vec4(vColor.rgb * vColor.a, vColor.a);\n  OUT_COLOR = vec4(diffuse * baseColor.rgb + \n                    vAmbientColor * (\n                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb\n                    ) + \n                    specular * uSpecularMatColor.rgb + \n                    uEmissiveMatColor.rgb, baseColor.a);\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:ee+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));\n  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // This prevents popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  \n  float zOffset = mix(-0.00045, -1., facingCamera);\n  posp.z -= zOffset;\n  posqIn.z -= zOffset;\n  posqOut.z -= zOffset;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = p.xy;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * uStrokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * uStrokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * uStrokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * uStrokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * uStrokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));\n    } else {\n      vMaxDist = uStrokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      uStrokeWeight * 0.5;\n    vMaxDist = uStrokeWeight / 2.;\n  }\n  vPosition = vCenter + offset;\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);\n}\n",lineFrag:ee+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\nuniform float uStrokeWeight;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nvoid main() {\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      dot(vPosition - vCenter, vTangent) > 0.\n    ) {\n      discard;\n    }\n    // Use full area for PROJECT\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-vTangent.y, vTangent.x);\n      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {\n        discard;\n      }\n    }\n    // Use full area for MITER\n  }\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(mask > 0.98){\n    discard;\n  }\n\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},xe=ve.sphereMappingFrag;for(G in ve)ve[G]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+ve[G];Z(Y={},w.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),Z(Y,w.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),Z(Y,w.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),Z(Y,w.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),Z(Y,w.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),Z(Y,w.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),Z(Y,w.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),Z(Y,w.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var ae=Y;function ge(J,ce,Ut,et,le,V,me,Oe,Xe,dt){var yt=ce.getParameter(ce.FRAMEBUFFER_BINDING),ht=V*me*(ce.bindFramebuffer(ce.FRAMEBUFFER,Ut),Ut=Oe===ce.RGBA?4:3),Lt=Xe===ce.UNSIGNED_BYTE?Uint8Array:Float32Array;if(J instanceof Lt&&J.length===ht||(J=new Lt(ht)),ce.readPixels(et,dt?dt-le-me:le,V,me,Oe,Xe,J),ce.bindFramebuffer(ce.FRAMEBUFFER,yt),dt)for(var kt=Math.floor(me/2),lt=new Lt(V*Ut),It=0;It<kt;It++){var bt=It*V*4,Pt=(me-It-1)*V*4;lt.set(J.subarray(bt,bt+4*V)),J.copyWithin(bt,Pt,Pt+4*V),J.set(lt,Pt)}return J}function ne(J,Xe,Te,et,le,V,me){var Oe=J.getParameter(J.FRAMEBUFFER_BINDING);return J.bindFramebuffer(J.FRAMEBUFFER,Xe),Xe=le===J.RGBA?4:3,Xe=new(V===J.UNSIGNED_BYTE?Uint8Array:Float32Array)(Xe),J.readPixels(Te,me?me-et-1:et,1,1,le,V,Xe),J.bindFramebuffer(J.FRAMEBUFFER,Oe),Array.from(Xe)}_.default.prototype.setAttributes=function(J,ce){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Te=!0;if(void 0!==ce?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[J]!==ce&&(this._glAttributes[J]=ce,Te=!1)):J instanceof Object&&this._glAttributes!==J&&(this._glAttributes=J,Te=!1),this._renderer.isP3D&&!Te){if(!this._setupDone)for(var et in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(et))return void _.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},_.default.RendererGL=function(J){var ce=le;if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(J&&J.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),J&&S(ce,J);var et=function x(J){return function(){var ce,Te,et=N(J);return ce=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(ce=N(this).constructor,Reflect.construct(et,arguments,ce)):et.apply(this,arguments),et=this,!(Te=ce)||"object"!==C(Te)&&"function"!=typeof Te?E(et):Te}}(le);function le(V,me,Oe,Xe){if(this instanceof le)return(V=et.call(this,V,me,Oe))._setAttributeDefaults(me),V._initContext(),V.isP3D=!0,V.geometryBuilder=void 0,V.GL=V.drawingContext,V._pInst._setProperty("drawingContext",V.drawingContext),V._isErasing=!1,V._clipDepths=[],V._isClipApplied=!1,V._stencilTestOn=!1,V._enableLighting=!1,V.ambientLightColors=[],V.mixedAmbientLight=[],V.mixedSpecularColor=[],V.specularColors=[1,1,1],V.directionalLightDirections=[],V.directionalLightDiffuseColors=[],V.directionalLightSpecularColors=[],V.pointLightPositions=[],V.pointLightDiffuseColors=[],V.pointLightSpecularColors=[],V.spotLightPositions=[],V.spotLightDirections=[],V.spotLightDiffuseColors=[],V.spotLightSpecularColors=[],V.spotLightAngle=[],V.spotLightConc=[],V.activeImageLight=null,V.diffusedTextures=new Map,V.specularTextures=new Map,V.drawMode=w.FILL,V.curFillColor=V._cachedFillStyle=[1,1,1,1],V.curAmbientColor=V._cachedFillStyle=[1,1,1,1],V.curSpecularColor=V._cachedFillStyle=[0,0,0,0],V.curEmissiveColor=V._cachedFillStyle=[0,0,0,0],V.curStrokeColor=V._cachedStrokeStyle=[0,0,0,1],V.curBlendMode=w.BLEND,V.preEraseBlend=void 0,V._cachedBlendMode=void 0,V.blendExt=V.webglVersion===w.WEBGL2?V.GL:V.GL.getExtension("EXT_blend_minmax"),V._isBlending=!1,V._hasSetAmbient=!1,V._useSpecularMaterial=!1,V._useEmissiveMaterial=!1,V._useNormalMaterial=!1,V._useShininess=1,V._useMetalness=0,V._useLineColor=!1,V._useVertexColor=!1,V.registerEnabled=new Set,V._tint=[255,255,255,255],V.constantAttenuation=1,V.linearAttenuation=0,V.quadraticAttenuation=0,V.uModelMatrix=new _.default.Matrix,V.uViewMatrix=new _.default.Matrix,V.uMVMatrix=new _.default.Matrix,V.uPMatrix=new _.default.Matrix,V.uNMatrix=new _.default.Matrix("mat3"),V.curMatrix=new _.default.Matrix("mat3"),V._currentNormal=new _.default.Vector(0,0,1),V._curCamera=new _.default.Camera(E(V)),V._curCamera._computeCameraDefaultSettings(),V._curCamera._setDefaultCamera(),V.filterCamera=new _.default.Camera(E(V)),V.filterCamera._computeCameraDefaultSettings(),V.filterCamera._setDefaultCamera(),V.prevTouches=[],V.zoomVelocity=0,V.rotateVelocity=new _.default.Vector(0,0),V.moveVelocity=new _.default.Vector(0,0),V.executeZoom=!1,V.executeRotateAndMove=!1,V.specularShader=void 0,V.sphereMapping=void 0,V.diffusedShader=void 0,V._defaultLightShader=void 0,V._defaultImmediateModeShader=void 0,V._defaultNormalShader=void 0,V._defaultColorShader=void 0,V._defaultPointShader=void 0,V.userFillShader=void 0,V.userStrokeShader=void 0,V.userPointShader=void 0,V.retainedMode={geometry:{},buffers:{stroke:[new _.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",E(V)),new _.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",E(V)),new _.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",E(V)),new _.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",E(V)),new _.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",E(V))],fill:[new _.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",E(V),V._vToNArray),new _.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",E(V),V._vToNArray),new _.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",E(V)),new _.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",E(V)),new _.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",E(V),V._flatten)],text:[new _.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",E(V),V._vToNArray),new _.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",E(V),V._flatten)]}},V.immediateMode={geometry:new _.default.Geometry,shapeMode:w.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new _.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",E(V),V._vToNArray),new _.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",E(V),V._vToNArray),new _.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",E(V)),new _.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",E(V)),new _.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",E(V),V._flatten)],stroke:[new _.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",E(V)),new _.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",E(V)),new _.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",E(V)),new _.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",E(V)),new _.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",E(V))],point:V.GL.createBuffer()}},V.pointSize=5,V.curStrokeWeight=1,V.curStrokeCap=w.ROUND,V.curStrokeJoin=w.ROUND,V.textures=new Map,V.framebuffers=new Set,V.activeFramebuffers=[],V.filterShader=void 0,V.filterLayer=void 0,V.filterLayerTemp=void 0,V.defaultFilterShaders={},V.textureMode=w.IMAGE,V.textureWrapX=w.CLAMP,V.textureWrapY=w.CLAMP,V._tex=null,V._curveTightness=6,V._lookUpTableBezier=[],V._lookUpTableQuadratic=[],V._lutBezierDetail=0,V._lutQuadraticDetail=0,V.isProcessingVertices=!1,V._tessy=V._initTessy(),V.fontInfos={},V._curShader=void 0,V;throw new TypeError("Cannot call a class as a function")}return ce=le,(J=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new I.default(this)}},{key:"endGeometry",value:function(){var V;if(this.geometryBuilder)return V=this.geometryBuilder.finish(),this.geometryBuilder=void 0,V;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(V){return this.beginGeometry(),V(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(V){var me={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};V._glAttributes=null===V._glAttributes?me:Object.assign(me,V._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?w.WEBGL2:w.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var V=this.drawingContext;V.enable(V.DEPTH_TEST),V.depthFunc(V.LEQUAL),V.viewport(0,0,V.drawingBufferWidth,V.drawingBufferHeight),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var V=this.drawingContext;return V.getParameter(V.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(V,me){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Xe=this._maxTextureSize,Oe=(Xe=Math.floor(Xe/this.pixelDensity()),Math.min(V,Xe));return Xe=Math.min(me,Xe),Oe===V&&Xe===me||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(Oe,", height: ").concat(Xe,".")),{adjustedWidth:Oe,adjustedHeight:Xe}}},{key:"_resetContext",value:function(V,me){var Oe,Xe=this.width,dt=this.height,Ut=this.canvas.id,yt=this._pInst instanceof _.default.Graphics;yt?((Oe=this._pInst).canvas.parentNode.removeChild(Oe.canvas),Oe.canvas=document.createElement("canvas"),(Oe._pInst._userNode||document.body).appendChild(Oe.canvas),_.default.Element.call(Oe,Oe.canvas,Oe._pInst),Oe.width=Xe,Oe.height=dt):((Oe=this.canvas)&&Oe.parentNode.removeChild(Oe),(Oe=document.createElement("canvas")).id=Ut,(this._pInst._userNode||document.body).appendChild(Oe),this._pInst.canvas=Oe,this.canvas=Oe),Ut=new _.default.RendererGL(this._pInst.canvas,this._pInst,!yt),this._pInst._setProperty("_renderer",Ut),Ut.resize(Xe,dt),Ut._applyDefaults(),yt||this._pInst._elements.push(Ut),"function"==typeof me&&setTimeout(function(){me.apply(window._renderer,V)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Xe=(Xe=this._pInst).color.apply(Xe,arguments);this.clear(Xe.levels[0]/255,Xe.levels[1]/255,Xe.levels[2]/255,Xe=Xe.levels[3]/255)}},{key:"fill",value:function(V,me,Oe,Xe){var dt=_.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=dt._array,this.drawMode=w.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(V,me,Oe,Xe){var dt=_.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=dt._array}},{key:"strokeCap",value:function(V){this.curStrokeCap=V}},{key:"strokeJoin",value:function(V){this.curStrokeJoin=V}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(V,me){V.width===me.width&&V.height===me.height||V.resize(me.width,me.height),V.pixelDensity()!==me.pixelDensity()&&V.pixelDensity(me.pixelDensity())}},{key:"filter",value:function(){var V,me,Oe=this,Xe=this.getFilterLayer(),dt=void 0,yt=void 0,Ut=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(yt=arguments.length<=0?void 0:arguments[0],Z(V={},w.BLUR,3),Z(V,w.POSTERIZE,4),Z(V,w.THRESHOLD,.5),dt=yt in V&&void 0===(arguments.length<=1?void 0:arguments[1])?V[yt]:arguments.length<=1?void 0:arguments[1],yt in this.defaultFilterShaders||(this.defaultFilterShaders[yt]=new _.default.Shader(Xe._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",ae[yt])),this.filterShader=this.defaultFilterShaders[yt]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ht=(this.matchSize(Xe,Ut),Xe.draw(function(){return Oe._pInst.clear()}),[1/(Ut.width*Ut.pixelDensity()),1/(Ut.height*Ut.pixelDensity())]);yt===w.BLUR?(me=this.getFilterLayerTemp(),this.matchSize(me,Ut),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(w.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ht),this.filterShader.setUniform("canvasSize",[Ut.width,Ut.height]),this.filterShader.setUniform("radius",Math.max(1,dt)),me.draw(function(){Oe.filterShader.setUniform("direction",[1,0]),Oe.filterShader.setUniform("tex0",Ut),Oe._pInst.clear(),Oe._pInst.shader(Oe.filterShader),Oe._pInst.noLights(),Oe._pInst.plane(Ut.width,Ut.height)}),Xe.draw(function(){Oe.filterShader.setUniform("direction",[0,1]),Oe.filterShader.setUniform("tex0",me),Oe._pInst.clear(),Oe._pInst.shader(Oe.filterShader),Oe._pInst.noLights(),Oe._pInst.plane(Ut.width,Ut.height)}),this._pInst.pop()):Xe.draw(function(){Oe._pInst.noStroke(),Oe._pInst.blendMode(w.BLEND),Oe._pInst.shader(Oe.filterShader),Oe.filterShader.setUniform("tex0",Ut),Oe.filterShader.setUniform("texelSize",ht),Oe.filterShader.setUniform("canvasSize",[Ut.width,Ut.height]),Oe.filterShader.setUniform("filterParameter",dt),Oe._pInst.noLights(),Oe._pInst.plane(Ut.width,Ut.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(w.CORNER),this._pInst.blendMode(w.BLEND),Ut.filterCamera._resize(),this._pInst.setCamera(Ut.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Xe,-Ut.width/2,-Ut.height/2,Ut.width,Ut.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(V){return V?this._pInst.pixelDensity(V):this._pInst.pixelDensity()}},{key:"blendMode",value:function(V){V===w.DARKEST||V===w.LIGHTEST||V===w.ADD||V===w.BLEND||V===w.SUBTRACT||V===w.SCREEN||V===w.EXCLUSION||V===w.REPLACE||V===w.MULTIPLY||V===w.REMOVE?this.curBlendMode=V:V!==w.BURN&&V!==w.OVERLAY&&V!==w.HARD_LIGHT&&V!==w.SOFT_LIGHT&&V!==w.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(V,me){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(w.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,V/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,me/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var V=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(v(N(le.prototype),"beginClip",this).call(this,V),this.drawTarget()._isClipApplied=!0,V=this.GL).clearStencil(0),V.clear(V.STENCIL_BUFFER_BIT),V.enable(V.STENCIL_TEST),this._stencilTestOn=!0,V.stencilFunc(V.ALWAYS,1,255),V.stencilOp(V.KEEP,V.KEEP,V.REPLACE),V.disable(V.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var V=this.GL;V.stencilOp(V.KEEP,V.KEEP,V.KEEP),V.stencilFunc(this._clipInvert?V.EQUAL:V.NOTEQUAL,0,255),V.enable(V.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),v(N(le.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(V){this.curStrokeWeight!==V&&(this.pointSize=V,this.curStrokeWeight=V)}},{key:"_getPixel",value:function(V,me){var Oe=this.GL;return ne(Oe,null,V,me,Oe.RGBA,Oe.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var V,me,Oe=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):Oe._setProperty("pixels",ge(Oe.pixels,me=this.GL,null,0,0,this.width*(V=this._pInst._pixelDensity),this.height*V,me.RGBA,me.UNSIGNED_BYTE,this.height*V))}},{key:"updatePixels",value:function(){var V=this._getTempFramebuffer();V.pixels=this._pixelsState.pixels,V.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(w.CENTER),this._pInst.image(V,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:w.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:w.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(V){return void 0!==this.retainedMode.geometry[V]}},{key:"viewport",value:function(V,me){this._viewport=[0,0,V,me],this.GL.viewport(0,0,V,me)}},{key:"resize",value:function(dt,Xe){_.default.Renderer.prototype.resize.call(this,dt,Xe),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Oe=(void 0!==(dt=this._pixelsState).pixels&&dt._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);Xe=!1,dt=void 0;try{for(var yt,Ut=this.framebuffers[Symbol.iterator]();!(Oe=(yt=Ut.next()).done);Oe=!0)yt.value._canvasSizeChanged()}catch(ht){Xe=!0,dt=ht}finally{try{Oe||null==Ut.return||Ut.return()}finally{if(Xe)throw dt}}}},{key:"clear",value:function(){var V=(arguments.length<=0?void 0:arguments[0])||0,me=(arguments.length<=1?void 0:arguments[1])||0,Oe=(arguments.length<=2?void 0:arguments[2])||0,Xe=(arguments.length<=3?void 0:arguments[3])||0,dt=this.activeFramebuffer();dt&&dt.format===w.UNSIGNED_BYTE&&!dt.antialias&&0===Xe&&(Xe=1e-10),this.GL.clearColor(V*Xe,me*Xe,Oe*Xe,Xe),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(V,me,Oe,Xe,dt,yt){16===arguments.length?_.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([V,me,0,0,Oe,Xe,0,0,0,0,1,0,dt,yt,0,1])}},{key:"translate",value:function(V,me,Oe){return V instanceof _.default.Vector&&(Oe=V.z,me=V.y,V=V.x),this.uModelMatrix.translate([V,me,Oe]),this}},{key:"scale",value:function(V,me,Oe){return this.uModelMatrix.scale(V,me,Oe),this}},{key:"rotate",value:function(V,me){return void 0===me?this.rotateZ(V):(_.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(V){return this.rotate(V,1,0,0),this}},{key:"rotateY",value:function(V){return this.rotate(V,0,1,0),this}},{key:"rotateZ",value:function(V){return this.rotate(V,0,0,1),this}},{key:"push",value:function(){var V=_.default.Renderer.prototype.push.apply(this),me=V.properties;return me.uModelMatrix=this.uModelMatrix.copy(),me.uViewMatrix=this.uViewMatrix.copy(),me.uPMatrix=this.uPMatrix.copy(),me._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),me.ambientLightColors=this.ambientLightColors.slice(),me.specularColors=this.specularColors.slice(),me.directionalLightDirections=this.directionalLightDirections.slice(),me.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),me.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),me.pointLightPositions=this.pointLightPositions.slice(),me.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),me.pointLightSpecularColors=this.pointLightSpecularColors.slice(),me.spotLightPositions=this.spotLightPositions.slice(),me.spotLightDirections=this.spotLightDirections.slice(),me.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),me.spotLightSpecularColors=this.spotLightSpecularColors.slice(),me.spotLightAngle=this.spotLightAngle.slice(),me.spotLightConc=this.spotLightConc.slice(),me.userFillShader=this.userFillShader,me.userStrokeShader=this.userStrokeShader,me.userPointShader=this.userPointShader,me.pointSize=this.pointSize,me.curStrokeWeight=this.curStrokeWeight,me.curStrokeColor=this.curStrokeColor,me.curFillColor=this.curFillColor,me.curAmbientColor=this.curAmbientColor,me.curSpecularColor=this.curSpecularColor,me.curEmissiveColor=this.curEmissiveColor,me._hasSetAmbient=this._hasSetAmbient,me._useSpecularMaterial=this._useSpecularMaterial,me._useEmissiveMaterial=this._useEmissiveMaterial,me._useShininess=this._useShininess,me._useMetalness=this._useMetalness,me.constantAttenuation=this.constantAttenuation,me.linearAttenuation=this.linearAttenuation,me.quadraticAttenuation=this.quadraticAttenuation,me._enableLighting=this._enableLighting,me._useNormalMaterial=this._useNormalMaterial,me._tex=this._tex,me.drawMode=this.drawMode,me._currentNormal=this._currentNormal,me.curBlendMode=this.curBlendMode,me.activeImageLight=this.activeImageLight,V}},{key:"pop",value:function(){var V;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var me=arguments.length,Oe=new Array(me),Xe=0;Xe<me;Xe++)Oe[Xe]=arguments[Xe];(V=v(N(le.prototype),"pop",this)).call.apply(V,[this].concat(Oe)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var V=this.drawTarget();V._isClipApplied!==this._stencilTestOn&&(V._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var V=this.userStrokeShader;return V&&V.isStrokeShader()?V:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(V){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(xe)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",V),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var V=this.userFillShader;if(this._useNormalMaterial&&(!V||!V.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!V||!V.isLightShader())return this._getLightShader()}else if(this._tex){if(!V||!V.isTextureShader())return this._getLightShader()}else if(!V)return this._getImmediateModeShader();return V}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var V=this.userFillShader;if(this._enableLighting){if(!V||!V.isLightShader())return this._getLightShader()}else if(this._tex){if(!V||!V.isTextureShader())return this._getLightShader()}else if(!V)return this._getColorShader();return V}},{key:"_getImmediatePointShader",value:function(){var V=this.userPointShader;return V&&V.isPointShader()?V:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._defaultLightShader=this._pInst._glAttributes.perPixelLighting?new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+ve.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+ve.phongFrag):new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+ve.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+ve.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===w.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new _.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+ve.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+ve.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(V,me){var Oe="";return this.webglVersion===w.WEBGL2&&(Oe+="#version 300 es\n#define WEBGL2\n"),"vert"===V?Oe+="#define VERTEX_SHADER\n":"frag"===V&&(Oe+="#define FRAGMENT_SHADER\n"),me&&(Oe+="precision ".concat(me," float;\n")),Oe}},{key:"_getEmptyTexture",value:function(){var V;return this._emptyTexture||((V=new _.default.Image(1,1)).set(0,0,255),this._emptyTexture=new _.default.Texture(this,V)),this._emptyTexture}},{key:"getTexture",value:function(V){V instanceof _.default.Framebuffer&&(V=V.color);var me=this.textures.get(V);return me||(me=new _.default.Texture(this,V),this.textures.set(V,me),me)}},{key:"getDiffusedTexture",value:function(V){var me,Oe,Xe=this;return null!=this.diffusedTextures.get(V)?this.diffusedTextures.get(V):(me=Math.floor(V.height/V.width*200),Oe=this._pInst.createFramebuffer({width:200,height:me,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(ve.imageLightVert,ve.imageLightDiffusedFrag)),Oe.draw(function(){Xe._pInst.shader(Xe.diffusedShader),Xe.diffusedShader.setUniform("environmentMap",V),Xe._pInst.noStroke(),Xe._pInst.rectMode(w.CENTER),Xe._pInst.noLights(),Xe._pInst.rect(0,0,200,me)}),this.diffusedTextures.set(V,Oe),Oe)}},{key:"getSpecularTexture",value:function(V){var me=this;if(null!=this.specularTextures.get(V))return this.specularTextures.get(V);for(var Oe,Xe=[],dt=this._pInst.createFramebuffer({width:512,height:512,density:1}),yt=Math.log(512)/Math.log(2),Ut=(this.specularShader||(this.specularShader=this._pInst.createShader(ve.imageLightVert,ve.imageLightSpecularFrag)),512);1<=Ut;Ut/=2)!function(ht){dt.resize(ht,ht);var Lt=1-Math.log(ht)/Math.log(2)/yt;dt.draw(function(){me._pInst.shader(me.specularShader),me._pInst.clear(),me.specularShader.setUniform("environmentMap",V),me.specularShader.setUniform("roughness",Lt),me._pInst.noStroke(),me._pInst.noLights(),me._pInst.plane(ht,ht)}),Xe.push(dt.get().drawingContext.getImageData(0,0,ht,ht))}(Ut);return dt.remove(),Oe=new d.MipmapTexture(this,Xe,{}),this.specularTextures.set(V,Oe),Oe}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(V){return new _.default.Framebuffer(this,V)}},{key:"_setStrokeUniforms",value:function(V){V.bindShader(),V.setUniform("uUseLineColor",this._useLineColor),V.setUniform("uMaterialColor",this.curStrokeColor),V.setUniform("uStrokeWeight",this.curStrokeWeight),V.setUniform("uStrokeCap",ie[this.curStrokeCap]),V.setUniform("uStrokeJoin",X[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(V){var me=this,Oe=(V.bindShader(),this.mixedSpecularColor=p(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Xe,dt){return me.curFillColor[dt]*me._useMetalness+Xe*(1-me._useMetalness)})),V.setUniform("uUseVertexColor",this._useVertexColor),V.setUniform("uMaterialColor",this.curFillColor),V.setUniform("isTexture",!!this._tex),this._tex&&V.setUniform("uSampler",this._tex),V.setUniform("uTint",this._tint),V.setUniform("uHasSetAmbient",this._hasSetAmbient),V.setUniform("uAmbientMatColor",this.curAmbientColor),V.setUniform("uSpecularMatColor",this.mixedSpecularColor),V.setUniform("uEmissiveMatColor",this.curEmissiveColor),V.setUniform("uSpecular",this._useSpecularMaterial),V.setUniform("uEmissive",this._useEmissiveMaterial),V.setUniform("uShininess",this._useShininess),V.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(V),V.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);V.setUniform("uPointLightCount",Oe),V.setUniform("uPointLightLocation",this.pointLightPositions),V.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),V.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),V.setUniform("uDirectionalLightCount",Oe=this.directionalLightDiffuseColors.length/3),V.setUniform("uLightingDirection",this.directionalLightDirections),V.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),V.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),Oe=this.ambientLightColors.length/3,this.mixedAmbientLight=p(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Xe){return Math.max(0,Xe-=me._useMetalness)})),V.setUniform("uAmbientLightCount",Oe),V.setUniform("uAmbientColor",this.mixedAmbientLight),V.setUniform("uSpotLightCount",Oe=this.spotLightDiffuseColors.length/3),V.setUniform("uSpotLightAngle",this.spotLightAngle),V.setUniform("uSpotLightConc",this.spotLightConc),V.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),V.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),V.setUniform("uSpotLightLocation",this.spotLightPositions),V.setUniform("uSpotLightDirection",this.spotLightDirections),V.setUniform("uConstantAttenuation",this.constantAttenuation),V.setUniform("uLinearAttenuation",this.linearAttenuation),V.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),V.bindTextures()}},{key:"_setImageLightUniforms",value:function(V){var me;V.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(me=this.getDiffusedTexture(this.activeImageLight),V.setUniform("environmentMapDiffused",me),me=this.getSpecularTexture(this.activeImageLight),V.setUniform("levelOfDetail",20/this._useShininess*8),V.setUniform("environmentMapSpecular",me))}},{key:"_setPointUniforms",value:function(V){V.bindShader(),V.setUniform("uMaterialColor",this.curStrokeColor),V.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(V,me,Oe,Xe,dt){this.GL.bindBuffer(me=me||this.GL.ARRAY_BUFFER,V),void 0!==Oe&&((V=Oe)instanceof _.default.DataArray?V=Oe.dataArray():V instanceof(Xe||Float32Array)||(V=new(Xe||Float32Array)(V)),this.GL.bufferData(me,V,dt||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(V,me){return V.length===me.length&&V.every(function(Oe,Xe){return Oe===me[Xe]})}},{key:"_isTypedArray",value:function(V){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(me){return V instanceof me})}},{key:"_flatten",value:function(V){return V.flat()}},{key:"_vToNArray",value:function(V){return V.flatMap(function(me){return[me.x,me.y,me.z]})}},{key:"_bezierCoefficients",value:function(V){var me=V*V,Oe=1-V,Xe=Oe*Oe;return[Xe*Oe,3*Xe*V,3*Oe*me,me*V]}},{key:"_quadraticCoefficients",value:function(V){var me=1-V;return[me*me,2*me*V,V*V]}},{key:"_bezierToCatmull",value:function(V){return[V[1],V[1]+(V[2]-V[0])/this._curveTightness,V[2]-(V[3]-V[1])/this._curveTightness,V[2]]}},{key:"_initTessy",value:function(){var V=new D.default.GluTesselator;return V.gluTessCallback(D.default.gluEnum.GLU_TESS_VERTEX_DATA,function(me,Oe){var Xe=!0,dt=!1,yt=void 0;try{for(var Ut,ht=me[Symbol.iterator]();!(Xe=(Ut=ht.next()).done);Xe=!0)Oe.push(Ut.value)}catch(kt){dt=!0,yt=kt}finally{try{Xe||null==ht.return||ht.return()}finally{if(dt)throw yt}}}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_BEGIN,function(me){me!==D.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(me))}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_ERROR,function(me){console.log("error callback"),console.log("error number: ".concat(me))}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_COMBINE,function(me,Oe,Xe){for(var dt=new Array(_.default.RendererGL.prototype.tessyVertexSize).fill(0),yt=0;yt<Xe.length;yt++)for(var Ut=0;Ut<dt.length;Ut++)0!==Xe[yt]&&Oe[yt]&&(dt[Ut]+=Oe[yt][Ut]*Xe[yt]);return dt}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_EDGE_FLAG,function(me){}),V.gluTessProperty(D.default.gluEnum.GLU_TESS_WINDING_RULE,D.default.windingRule.GLU_TESS_WINDING_NONZERO),V}},{key:"_triangulate",value:function(V){var me=V[0]?V[0][2]:void 0,Oe=!0,Xe=!0,Lt=!1,lt=void 0;try{for(var dt,yt=V[Symbol.iterator]();!(Xe=(dt=yt.next()).done);Xe=!0)for(var Ut=dt.value,ht=0;ht<Ut.length;ht+=_.default.RendererGL.prototype.tessyVertexSize)if(Ut[ht+2]!==me){Oe=!1;break}}catch($n){Lt=!0,lt=$n}finally{try{Xe||null==yt.return||yt.return()}finally{if(Lt)throw lt}}this._tessy.gluTessNormal(0,0,Oe?1:0);var kt=(this._tessy.gluTessBeginPolygon(Lt=[]),!0),It=void(lt=!1);try{for(var bt,Pt=V[Symbol.iterator]();!(kt=(bt=Pt.next()).done);kt=!0){var St=bt.value;this._tessy.gluTessBeginContour();for(var zt=0;zt<St.length;zt+=_.default.RendererGL.prototype.tessyVertexSize){var fn=St.slice(zt,zt+_.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(fn,fn)}this._tessy.gluTessEndContour()}}catch($n){lt=!0,It=$n}finally{try{kt||null==Pt.return||Pt.return()}finally{if(lt)throw It}}return this._tessy.gluTessEndPolygon(),Lt}}])&&g(ce.prototype,J),le}(_.default.Renderer),_.default.prototype._assert3d=function(J){if(!this._renderer.isP3D)throw new Error("".concat(J,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},_.default.RendererGL.prototype.tessyVertexSize=12,q.default=Y=_.default.RendererGL},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(a,_e,q){"use strict";a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.index-of"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.array.some"),a("core-js/modules/es.function.name"),a("core-js/modules/es.object.keys"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var M=(a=a("../core/main"))&&a.__esModule?a:{default:a};function C(_,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}M.default.Shader=function(){function _(d,f,h){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this._renderer=d,this._vertSrc=f,this._fragSrc=h,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var w,I;return w=_,(I=[{key:"init",value:function(){if(0===this._glProgram){var d=this._renderer.GL;if(this._vertShader=d.createShader(d.VERTEX_SHADER),d.shaderSource(this._vertShader,this._vertSrc),d.compileShader(this._vertShader),!d.getShaderParameter(this._vertShader,d.COMPILE_STATUS))return M.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(d.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=d.createShader(d.FRAGMENT_SHADER),d.shaderSource(this._fragShader,this._fragSrc),d.compileShader(this._fragShader),!d.getShaderParameter(this._fragShader,d.COMPILE_STATUS))return M.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(d.getShaderInfoLog(this._fragShader))),null;this._glProgram=d.createProgram(),d.attachShader(this._glProgram,this._vertShader),d.attachShader(this._glProgram,this._fragShader),d.linkProgram(this._glProgram),d.getProgramParameter(this._glProgram,d.LINK_STATUS)||M.default._friendlyError("Snap! Error linking shader program: ".concat(d.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(d){var f=new M.default.Shader(d._renderer,this._vertSrc,this._fragSrc);return f.ensureCompiledOnContext(d),f}},{key:"ensureCompiledOnContext",value:function(d){if(0!==this._glProgram&&this._renderer!==d._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=d._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var d=this._renderer.GL,f=d.getProgramParameter(this._glProgram,d.ACTIVE_ATTRIBUTES),h=0;h<f;++h){var p=d.getActiveAttrib(this._glProgram,h),g=p.name,v=d.getAttribLocation(this._glProgram,g),S={};S.name=g,S.location=v,S.index=h,S.type=p.type,S.size=p.size,this.attributes[g]=S}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var d=this._renderer.GL,f=d.getProgramParameter(this._glProgram,d.ACTIVE_UNIFORMS),h=0,p=0;p<f;++p){var g=d.getActiveUniform(this._glProgram,p),v={},S=(v.location=d.getUniformLocation(this._glProgram,g.name),v.size=g.size,g.name);1<g.size&&(S=S.substring(0,S.indexOf("[0]"))),v.name=S,v.type=g.type,v._cachedData=void 0,v.type===d.SAMPLER_2D&&(v.samplerIndex=h,h++,this.samplers.push(v)),v.isArray=1<g.size||v.type===d.FLOAT_MAT3||v.type===d.FLOAT_MAT4||v.type===d.FLOAT_VEC2||v.type===d.FLOAT_VEC3||v.type===d.FLOAT_VEC4||v.type===d.INT_VEC2||v.type===d.INT_VEC4||v.type===d.INT_VEC3,this.uniforms[S]=v}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var d=this._renderer.GL,f=!0,h=!1,p=void 0;try{for(var g,v=this.samplers[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var S=g.value,x=S.texture;void 0===x&&(x=this._renderer._getEmptyTexture()),d.activeTexture(d.TEXTURE0+S.samplerIndex),x.bindTexture(),x.update(),d.uniform1i(S.location,S.samplerIndex)}}catch(E){h=!0,p=E}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}},{key:"updateTextures",value:function(){var d=!0,f=!1,h=void 0;try{for(var p,g=this.samplers[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value.texture;v&&v.update()}}catch(S){f=!0,h=S}finally{try{d||null==g.return||g.return()}finally{if(f)throw h}}}},{key:"unbindTextures",value:function(){var d=!0,f=!1,h=void 0;try{for(var p,g=this.samplers[Symbol.iterator]();!(d=(p=g.next()).done);d=!0)this.setUniform(p.value.name,this._renderer._getEmptyTexture())}catch(S){f=!0,h=S}finally{try{d||null==g.return||g.return()}finally{if(f)throw h}}}},{key:"_setMatrixUniforms",value:function(){var d=this._renderer.uModelMatrix,f=this._renderer.uViewMatrix,h=this._renderer.uPMatrix,p=d.copy().mult(f),g=(this._renderer.uMVMatrix=p).copy();g.mult(h),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",f.mat4),this.setUniform("uProjectionMatrix",h.mat4),this.setUniform("uModelMatrix",d.mat4),this.setUniform("uModelViewMatrix",p.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){return this._renderer._curShader!==this&&(this._renderer.GL.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(d,f){var h=this.uniforms[d];if(h){var p=this._renderer.GL;if(h.isArray){if(h._cachedData&&this._renderer._arraysEqual(h._cachedData,f))return;h._cachedData=f.slice(0)}else{if(h._cachedData&&h._cachedData===f)return;h._cachedData=Array.isArray(f)?f.slice(0):f}var g=h.location;switch(this.useProgram(),h.type){case p.BOOL:p.uniform1i(g,!0===f?1:0);break;case p.INT:1<h.size?f.length&&p.uniform1iv(g,f):p.uniform1i(g,f);break;case p.FLOAT:1<h.size?f.length&&p.uniform1fv(g,f):p.uniform1f(g,f);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(g,!1,f);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(g,!1,f);break;case p.FLOAT_VEC2:1<h.size?f.length&&p.uniform2fv(g,f):p.uniform2f(g,f[0],f[1]);break;case p.FLOAT_VEC3:1<h.size?f.length&&p.uniform3fv(g,f):p.uniform3f(g,f[0],f[1],f[2]);break;case p.FLOAT_VEC4:1<h.size?f.length&&p.uniform4fv(g,f):p.uniform4f(g,f[0],f[1],f[2],f[3]);break;case p.INT_VEC2:1<h.size?f.length&&p.uniform2iv(g,f):p.uniform2i(g,f[0],f[1]);break;case p.INT_VEC3:1<h.size?f.length&&p.uniform3iv(g,f):p.uniform3i(g,f[0],f[1],f[2]);break;case p.INT_VEC4:1<h.size?f.length&&p.uniform4iv(g,f):p.uniform4i(g,f[0],f[1],f[2],f[3]);break;case p.SAMPLER_2D:p.activeTexture(p.TEXTURE0+h.samplerIndex),h.texture=f instanceof M.default.Texture?f:this._renderer.getTexture(f),p.uniform1i(g,h.samplerIndex),h.texture.src.gifProperties&&h.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(d){return void 0!==d})}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(d,f,h,p,g,v){var S;return d&&-1!==(d=d.location)&&(S=this._renderer.GL,this._renderer.registerEnabled.has(d)||(S.enableVertexAttribArray(d),this._renderer.registerEnabled.add(d)),this._renderer.GL.vertexAttribPointer(d,f,h||S.FLOAT,p||!1,g||0,v||0)),this}},{key:"disableRemainingAttributes",value:function(){var d=this,f=!0,h=!1,p=void 0;try{for(var g,v=this._renderer.registerEnabled.values()[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)!function(){var S=g.value;Object.keys(d.attributes).some(function(x){return d.attributes[x].location===S})||(d._renderer.GL.disableVertexAttribArray(S),d._renderer.registerEnabled.delete(S))}()}catch(S){h=!0,p=S}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}}])&&C(w.prototype,I),_}(),q.default=a=M.default.Shader},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(a,_e,q){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.get-prototype-of"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.reflect.construct"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.uint8-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(q,"__esModule",{value:!0}),q.checkWebGLCapabilities=S,q.default=q.MipmapTexture=void 0;var _=(v=a("../core/main"))&&v.__esModule?v:{default:v},w=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=I();if(E&&E.has(x))return E.get(x);var N,Z={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in x){var z;Object.prototype.hasOwnProperty.call(x,N)&&((z=K?Object.getOwnPropertyDescriptor(x,N):null)&&(z.get||z.set)?Object.defineProperty(Z,N,z):Z[N]=x[N])}return Z.default=x,E&&E.set(x,Z),Z}(a("../core/constants"));function I(){var x;return"function"!=typeof WeakMap?null:(I=function(){return x},x=new WeakMap)}function D(x,E){return(D=Object.setPrototypeOf||function(N,Z){return N.__proto__=Z,N})(x,E)}function f(x){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}function h(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function p(x,E){for(var N=0;N<E.length;N++){var Z=E[N];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(x,Z.key,Z)}}function g(x,E,N){E&&p(x.prototype,E),N&&p(x,N)}_.default.Texture=function(){function x(G,N,z){h(this,x),this._renderer=G;var K=this._renderer.GL;return z=z||{},this.src=N,this.glTex=void 0,this.glTarget=K.TEXTURE_2D,this.glFormat=z.format||K.RGBA,this.mipmaps=!1,this.glMinFilter=z.minFilter||K.LINEAR,this.glMagFilter=z.magFilter||K.LINEAR,this.glWrapS=z.wrapS||K.CLAMP_TO_EDGE,this.glWrapT=z.wrapT||K.CLAMP_TO_EDGE,this.glDataType=z.dataType||K.UNSIGNED_BYTE,z=S(G),this.glFormat!==K.HALF_FLOAT||z.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=K.FLOAT),this.glFormat!==K.HALF_FLOAT||this.glMinFilter!==K.LINEAR&&this.glMagFilter!==K.LINEAR||z.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===K.LINEAR&&(this.glMinFilter=K.NEAREST),this.glMagFilter===K.LINEAR&&(this.glMagFilter=K.NEAREST)),this.glFormat!==K.FLOAT||z.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=K.UNSIGNED_BYTE),this.glFormat!==K.FLOAT||this.glMinFilter!==K.LINEAR&&this.glMagFilter!==K.LINEAR||z.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===K.LINEAR&&(this.glMinFilter=K.NEAREST),this.glMagFilter===K.LINEAR&&(this.glMagFilter=K.NEAREST)),this.isSrcMediaElement=void 0!==_.default.MediaElement&&N instanceof _.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==_.default.Element&&N instanceof _.default.Element&&!(N instanceof _.default.Graphics)&&!(N instanceof _.default.Renderer),this.isSrcP5Image=N instanceof _.default.Image,this.isSrcP5Graphics=N instanceof _.default.Graphics,this.isSrcP5Renderer=N instanceof _.default.Renderer,this.isImageData=typeof ImageData<"u"&&N instanceof ImageData,this.isFramebufferTexture=N instanceof _.default.FramebufferTexture,G=this._getTextureDataFromSource(),this.width=G.width,this.height=G.height,this.init(G),this}return g(x,[{key:"_getTextureDataFromSource",value:function(){var E;return this.isFramebufferTexture?E=this.src.rawTexture():this.isSrcP5Image?E=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?E=this.src.elt:this.isImageData&&(E=this.src),E}},{key:"init",value:function(E){var N,Z=this._renderer.GL;this.isFramebufferTexture||(this.glTex=Z.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,this.glMagFilter),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(N=new Uint8Array([1,1,1,1]),Z.texImage2D(this.glTarget,0,Z.RGBA,1,1,0,this.glFormat,this.glDataType,N)):Z.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,E))}},{key:"update",value:function(){var E,N,Z,K=this.src;return 0!==K.width&&0!==K.height&&!this.isFramebufferTexture&&(E=this._getTextureDataFromSource(),N=!1,Z=this._renderer.GL,E.width!==this.width||E.height!==this.height?(N=!0,this.width=E.width||K.width,this.height=E.height||K.height,this.isSrcP5Image?K.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&K.setModified(!0)):this.isSrcP5Image?K.isModified()&&K.setModified(!(N=!0)):this.isSrcMediaElement?K.isModified()?K.setModified(!(N=!0)):K.loadedmetadata&&this._videoPrevUpdateTime!==K.time()&&(this._videoPrevUpdateTime=K.time(),N=!0):this.isImageData?K._dirty&&(N=!(K._dirty=!1)):N=!0,N&&(this.bindTexture(),Z.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,E)),N)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(E,N){var Z=this._renderer.GL;this.glMinFilter=this.glFilter(E),this.glMagFilter=this.glFilter(N),this.bindTexture(),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,this.glMinFilter),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(E){var N=this._renderer.GL;return E===w.NEAREST?N.NEAREST:N.LINEAR}},{key:"setWrapMode",value:function(E,N){function Z(ie){return!(ie&ie-1)}var K=this._renderer.GL,G=(G=this._getTextureDataFromSource()).naturalWidth&&G.naturalHeight?(z=G.naturalWidth,G.naturalHeight):(z=this.width,this.height),z=Z(z);G=Z(G),E===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||z&&G?this.glWrapS=K.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=K.CLAMP_TO_EDGE):E===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||z&&G?this.glWrapS=K.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=K.CLAMP_TO_EDGE):this.glWrapS=K.CLAMP_TO_EDGE,N===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||z&&G?this.glWrapT=K.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=K.CLAMP_TO_EDGE):N===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||z&&G?this.glWrapT=K.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=K.CLAMP_TO_EDGE):this.glWrapT=K.CLAMP_TO_EDGE,this.bindTexture(),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,this.glWrapS),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),x}();var v=function(x){var E=Z;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&D(E,x);var N=function d(x){return function(){var E,N=f(x);if(E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=f(this).constructor,Reflect.construct(N,arguments,E)):N.apply(this,arguments),N=this,!E||"object"!==C(E)&&"function"!=typeof E){if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return E}}(Z);function Z(K,z,G){return h(this,Z),z=(K=N.call(this,K,z,G))._renderer.GL,K.glMinFilter===z.LINEAR&&(K.glMinFilter=z.LINEAR_MIPMAP_LINEAR),K}return g(Z,[{key:"glFilter",value:function(K){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(K){var z=this._renderer.GL;this.glTex=z.createTexture(),this.bindTexture();for(var G=0;G<K.length;G++)z.texImage2D(this.glTarget,G,this.glFormat,this.glFormat,this.glDataType,K[G]);this.glMinFilter=z.LINEAR_MIPMAP_LINEAR,z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,this.glMagFilter),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),Z}(_.default.Texture);function S(K){var E=K.GL,N=(K=K.webglVersion)===w.WEBGL2?E.getExtension("EXT_color_buffer_float")&&E.getExtension("EXT_float_blend"):E.getExtension("OES_texture_float");return{float:N,floatLinear:N&&E.getExtension("OES_texture_float_linear"),halfFloat:K=E.getExtension(K===w.WEBGL2?"EXT_color_buffer_float":"OES_texture_half_float"),halfFloatLinear:K&&E.getExtension("OES_texture_half_float_linear")}}q.MipmapTexture=v,q.default=a=_.default.Texture},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(a,_e,q){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.sub"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.split"),a("core-js/modules/es.string.sub"),a("core-js/modules/web.dom-collections.iterator");var _,w=(_=a("../core/main"))&&_.__esModule?_:{default:_},I=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=D();if(E&&E.has(x))return E.get(x);var N,Z={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in x){var z;Object.prototype.hasOwnProperty.call(x,N)&&((z=K?Object.getOwnPropertyDescriptor(x,N):null)&&(z.get||z.set)?Object.defineProperty(Z,N,z):Z[N]=x[N])}return Z.default=x,E&&E.set(x,Z),Z}(a("../core/constants"));function D(){var x;return"function"!=typeof WeakMap?null:(D=function(){return x},x=new WeakMap)}function d(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function f(x,E){for(var N=0;N<E.length;N++){var Z=E[N];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(x,Z.key,Z)}}function h(x,E,N){E&&f(x.prototype,E),N&&f(x,N)}a("./p5.Shader"),a("./p5.RendererGL.Retained"),w.default.RendererGL.prototype._applyTextProperties=function(){},w.default.RendererGL.prototype.textWidth=function(x){return this._isOpenType()?this._textFont._textWidth(x,this._textSize):0};var p=function(){function x(E,N){d(this,x),this.width=E,this.height=N,this.infos=[]}return h(x,[{key:"findImage",value:function(E){var N,Z,K=this.width*this.height;if(K<E)throw new Error("font is too complex to render in 3D");for(var z=this.infos.length-1;0<=z;--z){var G=this.infos[z];if(G.index+E<K){Z=(N=G).imageData;break}}if(!N){try{Z=new ImageData(this.width,this.height)}catch{var ie=document.getElementsByTagName("canvas")[0],X=!ie,ee=(ie||((ie=document.createElement("canvas")).style.display="none",document.body.appendChild(ie)),ie.getContext("2d"));ee&&(Z=ee.createImageData(this.width,this.height)),X&&document.body.removeChild(ie)}this.infos.push(N={index:0,imageData:Z})}return ee=N.index,N.index+=E,Z._dirty=!0,{imageData:Z,index:ee}}}]),x}();function g(G,E,N,Z,K){var z=G.imageData.data;G=4*G.index++,z[G++]=E,z[G++]=N,z[G++]=Z,z[+G]=K}var v=Math.sqrt(3),S=function(){function x(E){d(this,x),this.font=E,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={}}return h(x,[{key:"getGlyphInfo",value:function(E){var N=this.glyphInfos[E.index];if(!N){var Z=E.getBoundingBox(),K=Z.x1,z=Z.y1,G=Z.x2-K,ie=Z.y2-z,X=E.path.commands;if(0==G||0==ie||!X.length)return this.glyphInfos[E.index]={};for(var ee=[],Y=[],ve=[],xe=8;0<=xe;--xe)ve.push([]);for(xe=8;0<=xe;--xe)Y.push([]);var ae,ge,ne,J,ce=function(){function Mn(pr,Ln,nr,hn){d(this,Mn),this.p0=pr,this.c0=Ln,this.c1=nr,this.p1=hn}return h(Mn,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return w.default.Vector.sub(w.default.Vector.sub(this.p1,this.p0),w.default.Vector.mult(w.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Xn){var Ln=w.default.Vector.lerp(this.p0,this.c0,Xn),hn=w.default.Vector.lerp(this.c0,this.c1,Xn),nr=w.default.Vector.lerp(Ln,hn,Xn);return this.c1=w.default.Vector.lerp(this.c1,this.p1,Xn),this.c0=w.default.Vector.lerp(hn,this.c1,Xn),hn=w.default.Vector.lerp(nr,this.c0,Xn),Xn=new Mn(this.p0,Ln,nr,hn),this.p0=hn,Xn}},{key:"splitInflections",value:function(){var pr=w.default.Vector.sub(this.c0,this.p0),Ln=w.default.Vector.sub(w.default.Vector.sub(this.c1,this.c0),pr),nr=w.default.Vector.sub(w.default.Vector.sub(w.default.Vector.sub(this.p1,this.c1),pr),w.default.Vector.mult(Ln,2)),hn=[],Xn=Ln.x*nr.y-Ln.y*nr.x;return 0!==Xn&&0<=(pr=(nr=pr.x*nr.y-pr.y*nr.x)*nr-4*Xn*(pr.x*Ln.y-pr.y*Ln.x))&&(Xn<0&&(Xn=-Xn,nr=-nr),pr=(-nr+(Ln=Math.sqrt(pr)))/(2*Xn),0<(nr=(-nr-Ln)/(2*Xn))&&nr<1&&(hn.push(this.split(nr)),pr=1-(1-pr)/(1-nr)),0<pr&&pr<1&&hn.push(this.split(pr))),hn.push(this),hn}}]),Mn}(),Te=!0,et=!1,le=void 0;try{for(var V,me=X[Symbol.iterator]();!(Te=(V=me.next()).done);Te=!0){var Oe=V.value,Xe=(Oe.x-K)/G,dt=(Oe.y-z)/ie;if(!En(ae,ge,Xe,dt)){switch(Oe.type){case"M":ne=Xe,J=dt;break;case"L":$n(ae,ge,Xe,dt);break;case"Q":var yt=(Oe.x1-K)/G,Ut=(Oe.y1-z)/ie;zt([ae,Xe,yt],[ge,dt,Ut],{x:ae,y:ge,cx:yt,cy:Ut});break;case"Z":En(ae,ge,ne,J)?ee.push({x:ae,y:ge}):($n(ae,ge,ne,J),ee.push({x:ne,y:J}));break;case"C":for(var ht=function(ft,An,jn,nr,hn,Xn,Tn,ct){ft=new ce(new w.default.Vector(ft,An),new w.default.Vector(jn,nr),new w.default.Vector(hn,Xn),new w.default.Vector(Tn,ct)).splitInflections();var Qe=[],xt=30/v,un=!0;An=!1,jn=void 0;try{for(var rn,bn=ft[Symbol.iterator]();!(un=(rn=bn.next()).done);un=!0){for(var Pn=rn.value,Un=[],pn=void 0;!(.125<=(pn=xt/Pn.quadError()));){var Xt=Math.pow(pn,.3333333333333333),yn=Pn.split(Xt),Kt=Pn.split(1-Xt/(1-Xt));Qe.push(yn),Un.push(Pn),Pn=Kt}pn<1&&Qe.push(Pn.split(.5)),Qe.push(Pn),Array.prototype.push.apply(Qe,Un.reverse())}}catch(an){An=!0,jn=an}finally{try{un||null==bn.return||bn.return()}finally{if(An)throw jn}}return Qe}(ae,ge,(Oe.x1-K)/G,(Oe.y1-z)/ie,(Oe.x2-K)/G,(Oe.y2-z)/ie,Xe,dt),Lt=0;Lt<ht.length;Lt++){var kt=ht[Lt].toQuadratic();zt([kt.x,kt.x1,kt.cx],[kt.y,kt.y1,kt.cy],kt)}break;default:throw new Error("unknown command type: ".concat(Oe.type))}ae=Xe,ge=dt}}}catch(Mn){et=!0,le=Mn}finally{try{Te||null==me.return||me.return()}finally{if(et)throw le}}for(var lt=ee.length,It=this.strokeImageInfos.findImage(lt),bt=It.index,Pt=0;Pt<lt;++Pt){var St=ee[Pt];g(It,fn(St.x),fn(St.y),fn(St.cx),fn(St.cy))}(N=this.glyphInfos[E.index]={glyph:E,uGlyphRect:[Z.x1,-Z.y1,Z.x2,-Z.y2],strokeImageInfo:It,strokes:ee,colInfo:Kn(ve,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Kn(Y,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[N.colInfo.dimOffset,N.rowInfo.dimOffset]}return N;function zt(Mn,pr,Ln){var nr=ee.length;function hn(Qe,xt,un){for(var An=Qe.length;0<An--;){var jn=Qe[An];jn<xt&&(xt=jn),un<jn&&(un=jn)}return{min:xt,max:un}}ee.push(Ln),Ln=hn(Mn,1,0),Mn=Math.max(Math.floor(9*Ln.min-.5),0);for(var Xn=Math.min(Math.ceil(9*Ln.max+.5),9),Tn=Mn;Tn<Xn;++Tn)ve[Tn].push(nr);Ln=hn(pr,1,0),Mn=Math.max(Math.floor(9*Ln.min-.5),0);for(var ct=Math.min(Math.ceil(9*Ln.max+.5),9),ft=Mn;ft<ct;++ft)Y[ft].push(nr)}function fn(Mn){return(Mn=255*Mn)<0?0:255<Mn?255:Mn}function $n(Mn,pr,Ln,nr){zt([Mn,Ln],[pr,nr],{x:Mn,y:pr,cx:(Mn+Ln)/2,cy:(pr+nr)/2})}function En(Mn,pr,Ln,nr){return Math.abs(Ln-Mn)<1e-5&&Math.abs(nr-pr)<1e-5}function Kn(Mn,pr,Ln){for(var nr=Mn.length,hn=pr.findImage(nr),Xn=(pr=hn.index,0),Tn=0;Tn<nr;++Tn)Xn+=Mn[Tn].length;for(var ct=Ln.findImage(Xn),ft=0;ft<nr;++ft){var Qe=Mn[ft],xt=Qe.length,un=ct.index;g(hn,un>>7,127&un,xt>>7,127&xt);for(var An=0;An<xt;++An){var jn=Qe[An]+bt;g(ct,jn>>7,127&jn,0,0)}}return{cellImageInfo:ct,dimOffset:pr,dimImageInfo:hn}}}}]),x}();w.default.RendererGL.prototype._renderText=function(x,E,N,Z,K){if(this._textFont&&"string"!=typeof this._textFont){if(!(K<=Z)&&this._doFill){if(this._isOpenType()){x.push(),K=this._doStroke;var z=this.drawMode,G=(this._doStroke=!1,this.drawMode=I.TEXTURE,this._textFont.font),ie=(ie=this._textFont._fontInfo)||(this._textFont._fontInfo=new S(G)),X=(N=this._textFont._handleAlignment(this,E,N,Z),Z=this._textSize/G.unitsPerEm,this.translate(N.x,N.y,0),this.scale(Z,Z,1),this.GL),ee=(N=!this._defaultFontShader,this._getFontShader()),Y=(ee.init(),ee.bindShader(),N&&(ee.setUniform("uGridImageSize",[64,64]),ee.setUniform("uCellsImageSize",[64,64]),ee.setUniform("uStrokeImageSize",[64,64]),ee.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),ve=(Y||((Z=this._textGeom=new w.default.Geometry(1,1,function(){for(var Lt=0;Lt<=1;Lt++)for(var kt=0;kt<=1;kt++)this.vertices.push(new w.default.Vector(kt,Lt,0)),this.uvs.push(kt,Lt)})).computeFaces().computeNormals(),Y=this.createBuffers("glyph",Z)),!0);N=!1,Z=void 0;try{for(var xe,ae=this.retainedMode.buffers.text[Symbol.iterator]();!(ve=(xe=ae.next()).done);ve=!0)xe.value._prepareBuffer(Y,ee)}catch(Lt){N=!0,Z=Lt}finally{try{ve||null==ae.return||ae.return()}finally{if(N)throw Z}}this._bindBuffer(Y.indexBuffer,X.ELEMENT_ARRAY_BUFFER),ee.setUniform("uMaterialColor",this.curFillColor),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var ge=0,ne=null,J=G.stringToGlyphs(E),ce=!0,Te=!1,et=void 0;try{for(var le,V=J[Symbol.iterator]();!(ce=(le=V.next()).done);ce=!0){var me,Oe,Xe=le.value,dt=(ne&&(ge+=G.getKerningValue(ne,Xe)),ie.getGlyphInfo(Xe));dt.uGlyphRect&&(me=dt.rowInfo,Oe=dt.colInfo,ee.setUniform("uSamplerStrokes",dt.strokeImageInfo.imageData),ee.setUniform("uSamplerRowStrokes",me.cellImageInfo.imageData),ee.setUniform("uSamplerRows",me.dimImageInfo.imageData),ee.setUniform("uSamplerColStrokes",Oe.cellImageInfo.imageData),ee.setUniform("uSamplerCols",Oe.dimImageInfo.imageData),ee.setUniform("uGridOffset",dt.uGridOffset),ee.setUniform("uGlyphRect",dt.uGlyphRect),ee.setUniform("uGlyphOffset",ge),ee.bindTextures(),X.drawElements(X.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),ge+=Xe.advanceWidth,ne=Xe}}catch(Lt){Te=!0,et=Lt}finally{try{ce||null==V.return||V.return()}finally{if(Te)throw et}}}finally{ee.unbindShader(),this._doStroke=K,this.drawMode=z,X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),x.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return x}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)},4023:(br,kn,je)=>{function F(d){this.mode=Mt.MODE_8BIT_BYTE,this.data=d,this.parsedData=[];for(var f=0,h=this.data.length;f<h;f++){var p=[],g=this.data.charCodeAt(f);g>65536?(p[0]=240|(1835008&g)>>>18,p[1]=128|(258048&g)>>>12,p[2]=128|(4032&g)>>>6,p[3]=128|63&g):g>2048?(p[0]=224|(61440&g)>>>12,p[1]=128|(4032&g)>>>6,p[2]=128|63&g):g>128?(p[0]=192|(1984&g)>>>6,p[1]=128|63&g):p[0]=g,this.parsedData.push(p)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function j(d,f){this.typeNumber=d,this.errorCorrectLevel=f,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}F.prototype={getLength:function(d){return this.parsedData.length},write:function(d){for(var f=0,h=this.parsedData.length;f<h;f++)d.put(this.parsedData[f],8)}},j.prototype={addData:function(d){var f=new F(d);this.dataList.push(f),this.dataCache=null},isDark:function(d,f){if(d<0||this.moduleCount<=d||f<0||this.moduleCount<=f)throw new Error(d+","+f);return this.modules[d][f]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(d,f){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[h][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(d,f),this.typeNumber>=7&&this.setupTypeNumber(d),null==this.dataCache&&(this.dataCache=j.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,f)},setupPositionProbePattern:function(d,f){for(var h=-1;h<=7;h++)if(!(d+h<=-1||this.moduleCount<=d+h))for(var p=-1;p<=7;p++)f+p<=-1||this.moduleCount<=f+p||(this.modules[d+h][f+p]=0<=h&&h<=6&&(0==p||6==p)||0<=p&&p<=6&&(0==h||6==h)||2<=h&&h<=4&&2<=p&&p<=4)},getBestMaskPattern:function(){for(var d=0,f=0,h=0;h<8;h++){this.makeImpl(!0,h);var p=_e.getLostPoint(this);(0==h||d>p)&&(d=p,f=h)}return f},createMovieClip:function(d,f,h){var p=d.createEmptyMovieClip(f,h);this.make();for(var v=0;v<this.modules.length;v++)for(var S=1*v,x=0;x<this.modules[v].length;x++){var E=1*x;this.modules[v][x]&&(p.beginFill(0,100),p.moveTo(E,S),p.lineTo(E+1,S),p.lineTo(E+1,S+1),p.lineTo(E,S+1),p.endFill())}return p},setupTimingPattern:function(){for(var d=8;d<this.moduleCount-8;d++)null==this.modules[d][6]&&(this.modules[d][6]=d%2==0);for(var f=8;f<this.moduleCount-8;f++)null==this.modules[6][f]&&(this.modules[6][f]=f%2==0)},setupPositionAdjustPattern:function(){for(var d=_e.getPatternPosition(this.typeNumber),f=0;f<d.length;f++)for(var h=0;h<d.length;h++){var p=d[f],g=d[h];if(null==this.modules[p][g])for(var v=-2;v<=2;v++)for(var S=-2;S<=2;S++)this.modules[p+v][g+S]=-2==v||2==v||-2==S||2==S||0==v&&0==S}},setupTypeNumber:function(d){for(var f=_e.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var p=!d&&1==(f>>h&1);this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=p}for(h=0;h<18;h++)p=!d&&1==(f>>h&1),this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=p},setupTypeInfo:function(d,f){for(var p=_e.getBCHTypeInfo(this.errorCorrectLevel<<3|f),g=0;g<15;g++){var v=!d&&1==(p>>g&1);g<6?this.modules[g][8]=v:g<8?this.modules[g+1][8]=v:this.modules[this.moduleCount-15+g][8]=v}for(g=0;g<15;g++)v=!d&&1==(p>>g&1),g<8?this.modules[8][this.moduleCount-g-1]=v:g<9?this.modules[8][15-g-1+1]=v:this.modules[8][15-g-1]=v;this.modules[this.moduleCount-8][8]=!d},mapData:function(d,f){for(var h=-1,p=this.moduleCount-1,g=7,v=0,S=this.moduleCount-1;S>0;S-=2)for(6==S&&S--;;){for(var x=0;x<2;x++)if(null==this.modules[p][S-x]){var E=!1;v<d.length&&(E=1==(d[v]>>>g&1)),_e.getMask(f,p,S-x)&&(E=!E),this.modules[p][S-x]=E,-1==--g&&(v++,g=7)}if((p+=h)<0||this.moduleCount<=p){p-=h,h=-h;break}}}},j.PAD0=236,j.PAD1=17,j.createData=function(d,f,h){for(var p=_.getRSBlocks(d,f),g=new w,v=0;v<h.length;v++){var S=h[v];g.put(S.mode,4),g.put(S.getLength(),_e.getLengthInBits(S.mode,d)),S.write(g)}var x=0;for(v=0;v<p.length;v++)x+=p[v].dataCount;if(g.getLengthInBits()>8*x)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*x+")");for(g.getLengthInBits()+4<=8*x&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*x||(g.put(j.PAD0,8),g.getLengthInBits()>=8*x));)g.put(j.PAD1,8);return j.createBytes(g,p)},j.createBytes=function(d,f){for(var h=0,p=0,g=0,v=new Array(f.length),S=new Array(f.length),x=0;x<f.length;x++){var E=f[x].dataCount,N=f[x].totalCount-E;p=Math.max(p,E),g=Math.max(g,N),v[x]=new Array(E);for(var Z=0;Z<v[x].length;Z++)v[x][Z]=255&d.buffer[Z+h];h+=E;var K=_e.getErrorCorrectPolynomial(N),G=new C(v[x],K.getLength()-1).mod(K);for(S[x]=new Array(K.getLength()-1),Z=0;Z<S[x].length;Z++){var ie=Z+G.getLength()-S[x].length;S[x][Z]=ie>=0?G.get(ie):0}}var X=0;for(Z=0;Z<f.length;Z++)X+=f[Z].totalCount;var ee=new Array(X),Y=0;for(Z=0;Z<p;Z++)for(x=0;x<f.length;x++)Z<v[x].length&&(ee[Y++]=v[x][Z]);for(Z=0;Z<g;Z++)for(x=0;x<f.length;x++)Z<S[x].length&&(ee[Y++]=S[x][Z]);return ee};for(var Mt={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Jt={L:1,M:0,Q:3,H:2},a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},_e={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var f=d<<10;_e.getBCHDigit(f)-_e.getBCHDigit(_e.G15)>=0;)f^=_e.G15<<_e.getBCHDigit(f)-_e.getBCHDigit(_e.G15);return(d<<10|f)^_e.G15_MASK},getBCHTypeNumber:function(d){for(var f=d<<12;_e.getBCHDigit(f)-_e.getBCHDigit(_e.G18)>=0;)f^=_e.G18<<_e.getBCHDigit(f)-_e.getBCHDigit(_e.G18);return d<<12|f},getBCHDigit:function(d){for(var f=0;0!=d;)f++,d>>>=1;return f},getPatternPosition:function(d){return _e.PATTERN_POSITION_TABLE[d-1]},getMask:function(d,f,h){switch(d){case a.PATTERN000:return(f+h)%2==0;case a.PATTERN001:return f%2==0;case a.PATTERN010:return h%3==0;case a.PATTERN011:return(f+h)%3==0;case a.PATTERN100:return(Math.floor(f/2)+Math.floor(h/3))%2==0;case a.PATTERN101:return f*h%2+f*h%3==0;case a.PATTERN110:return(f*h%2+f*h%3)%2==0;case a.PATTERN111:return(f*h%3+(f+h)%2)%2==0;default:throw new Error("bad maskPattern:"+d)}},getErrorCorrectPolynomial:function(d){for(var f=new C([1],0),h=0;h<d;h++)f=f.multiply(new C([1,q.gexp(h)],0));return f},getLengthInBits:function(d,f){if(1<=f&&f<10)switch(d){case Mt.MODE_NUMBER:return 10;case Mt.MODE_ALPHA_NUM:return 9;case Mt.MODE_8BIT_BYTE:case Mt.MODE_KANJI:return 8;default:throw new Error("mode:"+d)}else if(f<27)switch(d){case Mt.MODE_NUMBER:return 12;case Mt.MODE_ALPHA_NUM:return 11;case Mt.MODE_8BIT_BYTE:return 16;case Mt.MODE_KANJI:return 10;default:throw new Error("mode:"+d)}else{if(!(f<41))throw new Error("type:"+f);switch(d){case Mt.MODE_NUMBER:return 14;case Mt.MODE_ALPHA_NUM:return 13;case Mt.MODE_8BIT_BYTE:return 16;case Mt.MODE_KANJI:return 12;default:throw new Error("mode:"+d)}}},getLostPoint:function(d){for(var f=d.getModuleCount(),h=0,p=0;p<f;p++)for(var g=0;g<f;g++){for(var v=0,S=d.isDark(p,g),x=-1;x<=1;x++)if(!(p+x<0||f<=p+x))for(var E=-1;E<=1;E++)g+E<0||f<=g+E||0==x&&0==E||S==d.isDark(p+x,g+E)&&v++;v>5&&(h+=3+v-5)}for(p=0;p<f-1;p++)for(g=0;g<f-1;g++){var N=0;d.isDark(p,g)&&N++,d.isDark(p+1,g)&&N++,d.isDark(p,g+1)&&N++,d.isDark(p+1,g+1)&&N++,(0==N||4==N)&&(h+=3)}for(p=0;p<f;p++)for(g=0;g<f-6;g++)d.isDark(p,g)&&!d.isDark(p,g+1)&&d.isDark(p,g+2)&&d.isDark(p,g+3)&&d.isDark(p,g+4)&&!d.isDark(p,g+5)&&d.isDark(p,g+6)&&(h+=40);for(g=0;g<f;g++)for(p=0;p<f-6;p++)d.isDark(p,g)&&!d.isDark(p+1,g)&&d.isDark(p+2,g)&&d.isDark(p+3,g)&&d.isDark(p+4,g)&&!d.isDark(p+5,g)&&d.isDark(p+6,g)&&(h+=40);var Z=0;for(g=0;g<f;g++)for(p=0;p<f;p++)d.isDark(p,g)&&Z++;return h+Math.abs(100*Z/f/f-50)/5*10}},q={glog:function(d){if(d<1)throw new Error("glog("+d+")");return q.LOG_TABLE[d]},gexp:function(d){for(;d<0;)d+=255;for(;d>=256;)d-=255;return q.EXP_TABLE[d]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},M=0;M<8;M++)q.EXP_TABLE[M]=1<<M;for(M=8;M<256;M++)q.EXP_TABLE[M]=q.EXP_TABLE[M-4]^q.EXP_TABLE[M-5]^q.EXP_TABLE[M-6]^q.EXP_TABLE[M-8];for(M=0;M<255;M++)q.LOG_TABLE[q.EXP_TABLE[M]]=M;function C(d,f){if(null==d.length)throw new Error(d.length+"/"+f);for(var h=0;h<d.length&&0==d[h];)h++;this.num=new Array(d.length-h+f);for(var p=0;p<d.length-h;p++)this.num[p]=d[p+h]}function _(d,f){this.totalCount=d,this.dataCount=f}function w(){this.buffer=[],this.length=0}C.prototype={get:function(d){return this.num[d]},getLength:function(){return this.num.length},multiply:function(d){for(var f=new Array(this.getLength()+d.getLength()-1),h=0;h<this.getLength();h++)for(var p=0;p<d.getLength();p++)f[h+p]^=q.gexp(q.glog(this.get(h))+q.glog(d.get(p)));return new C(f,0)},mod:function(d){if(this.getLength()-d.getLength()<0)return this;for(var f=q.glog(this.get(0))-q.glog(d.get(0)),h=new Array(this.getLength()),p=0;p<this.getLength();p++)h[p]=this.get(p);for(p=0;p<d.getLength();p++)h[p]^=q.gexp(q.glog(d.get(p))+f);return new C(h,0).mod(d)}},_.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],_.getRSBlocks=function(d,f){var h=_.getRsBlockTable(d,f);if(null==h)throw new Error("bad rs block @ typeNumber:"+d+"/errorCorrectLevel:"+f);for(var p=h.length/3,g=[],v=0;v<p;v++)for(var S=h[3*v+0],x=h[3*v+1],E=h[3*v+2],N=0;N<S;N++)g.push(new _(x,E));return g},_.getRsBlockTable=function(d,f){switch(f){case Jt.L:return _.RS_BLOCK_TABLE[4*(d-1)+0];case Jt.M:return _.RS_BLOCK_TABLE[4*(d-1)+1];case Jt.Q:return _.RS_BLOCK_TABLE[4*(d-1)+2];case Jt.H:return _.RS_BLOCK_TABLE[4*(d-1)+3];default:return}},w.prototype={get:function(d){var f=Math.floor(d/8);return 1==(this.buffer[f]>>>7-d%8&1)},put:function(d,f){for(var h=0;h<f;h++)this.putBit(1==(d>>>f-h-1&1))},getLengthInBits:function(){return this.length},putBit:function(d){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0),d&&(this.buffer[f]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function D(d){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof d&&(d={content:d}),d)for(var h in d)this.options[h]=d[h];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var S=this.options.content,x=function g(N,Z){for(var K=function v(N){var Z=encodeURI(N).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return Z.length+(Z.length!=N?3:0)}(N),z=1,G=0,ie=0,X=I.length;ie<=X;ie++){var ee=I[ie];if(!ee)throw new Error("Content too long: expected "+G+" but got "+K);switch(Z){case"L":G=ee[0];break;case"M":G=ee[1];break;case"Q":G=ee[2];break;case"H":G=ee[3];break;default:throw new Error("Unknwon error correction level: "+Z)}if(K<=G)break;z++}if(z>I.length)throw new Error("Content too long");return z}(S,this.options.ecl),E=function p(N){switch(N){case"L":return Jt.L;case"M":return Jt.M;case"Q":return Jt.Q;case"H":return Jt.H;default:throw new Error("Unknwon error correction level: "+N)}}(this.options.ecl);this.qrcode=new j(x,E),this.qrcode.addData(S),this.qrcode.make()}D.prototype.svg=function(d){var f=this.options||{},h=this.qrcode.modules;typeof d>"u"&&(d={container:f.container||"svg"});for(var p=!(typeof f.pretty<"u"&&!f.pretty),g=p?"  ":"",v=p?"\r\n":"",S=f.width,x=f.height,E=h.length,N=S/(E+2*f.padding),Z=x/(E+2*f.padding),K=typeof f.join<"u"&&!!f.join,z=typeof f.swap<"u"&&!!f.swap,G=!(typeof f.xmlDeclaration<"u"&&!f.xmlDeclaration),ie=typeof f.predefined<"u"&&!!f.predefined,X=ie?g+'<defs><path id="qrmodule" d="M0 0 h'+Z+" v"+N+' H0 z" style="fill:'+f.color+';shape-rendering:crispEdges;" /></defs>'+v:"",ee=g+'<rect x="0" y="0" width="'+S+'" height="'+x+'" style="fill:'+f.background+';shape-rendering:crispEdges;"/>'+v,Y="",ve="",xe=0;xe<E;xe++)for(var ae=0;ae<E;ae++)if(h[ae][xe]){var ne=ae*N+f.padding*N,J=xe*Z+f.padding*Z;if(z){var ce=ne;ne=J,J=ce}if(K){var Te=N+ne,et=Z+J;ne=Number.isInteger(ne)?Number(ne):ne.toFixed(2),J=Number.isInteger(J)?Number(J):J.toFixed(2),Te=Number.isInteger(Te)?Number(Te):Te.toFixed(2),ve+="M"+ne+","+J+" V"+(et=Number.isInteger(et)?Number(et):et.toFixed(2))+" H"+Te+" V"+J+" H"+ne+" Z "}else Y+=ie?g+'<use x="'+ne.toString()+'" y="'+J.toString()+'" href="#qrmodule" />'+v:g+'<rect x="'+ne.toString()+'" y="'+J.toString()+'" width="'+N+'" height="'+Z+'" style="fill:'+f.color+';shape-rendering:crispEdges;"/>'+v}K&&(Y=g+'<path x="0" y="0" style="fill:'+f.color+';shape-rendering:crispEdges;" d="'+ve+'" />');var le="";switch(d.container){case"svg":G&&(le+='<?xml version="1.0" standalone="yes"?>'+v),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+S+'" height="'+x+'">'+v,le+=X+ee+Y,le+="</svg>";break;case"svg-viewbox":G&&(le+='<?xml version="1.0" standalone="yes"?>'+v),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+S+" "+x+'">'+v,le+=X+ee+Y,le+="</svg>";break;case"g":le+='<g width="'+S+'" height="'+x+'">'+v,le+=X+ee+Y,le+="</g>";break;default:le+=(X+ee+Y).replace(/^\s+/,"")}return le},D.prototype.save=function(d,f){var h=this.svg();"function"!=typeof f&&(f=function(g,v){});try{je(Object(function(){var v=new Error("Cannot find module 'fs'");throw v.code="MODULE_NOT_FOUND",v}())).writeFile(d,h,f)}catch(g){f(g)}},br.exports=D},4412:(br,kn,je)=>{"use strict";je.d(kn,{t:()=>j});var F=je(1413);class j extends F.B{constructor(Jt){super(),this._value=Jt}get value(){return this.getValue()}_subscribe(Jt){const a=super._subscribe(Jt);return!a.closed&&Jt.next(this._value),a}getValue(){const{hasError:Jt,thrownError:a,_value:_e}=this;if(Jt)throw a;return this._throwIfClosed(),_e}next(Jt){super.next(this._value=Jt)}}},1985:(br,kn,je)=>{"use strict";je.d(kn,{c:()=>M});var F=je(7707),j=je(8359),Mt=je(3494),Jt=je(1203),a=je(1026),_e=je(8071),q=je(9786);let M=(()=>{class I{constructor(d){d&&(this._subscribe=d)}lift(d){const f=new I;return f.source=this,f.operator=d,f}subscribe(d,f,h){const p=function w(I){return I&&I instanceof F.vU||function _(I){return I&&(0,_e.T)(I.next)&&(0,_e.T)(I.error)&&(0,_e.T)(I.complete)}(I)&&(0,j.Uv)(I)}(d)?d:new F.Ms(d,f,h);return(0,q.Y)(()=>{const{operator:g,source:v}=this;p.add(g?g.call(p,v):v?this._subscribe(p):this._trySubscribe(p))}),p}_trySubscribe(d){try{return this._subscribe(d)}catch(f){d.error(f)}}forEach(d,f){return new(f=C(f))((h,p)=>{const g=new F.Ms({next:v=>{try{d(v)}catch(S){p(S),g.unsubscribe()}},error:p,complete:h});this.subscribe(g)})}_subscribe(d){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(d)}[Mt.s](){return this}pipe(...d){return(0,Jt.m)(d)(this)}toPromise(d){return new(d=C(d))((f,h)=>{let p;this.subscribe(g=>p=g,g=>h(g),()=>f(p))})}}return I.create=D=>new I(D),I})();function C(I){var D;return null!==(D=null!=I?I:a.$.Promise)&&void 0!==D?D:Promise}},1413:(br,kn,je)=>{"use strict";je.d(kn,{B:()=>q});var F=je(1985),j=je(8359);const Jt=(0,je(1853).L)(C=>function(){C(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var a=je(7908),_e=je(9786);let q=(()=>{class C extends F.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(w){const I=new M(this,this);return I.operator=w,I}_throwIfClosed(){if(this.closed)throw new Jt}next(w){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const I of this.currentObservers)I.next(w)}})}error(w){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=w;const{observers:I}=this;for(;I.length;)I.shift().error(w)}})}complete(){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:w}=this;for(;w.length;)w.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var w;return(null===(w=this.observers)||void 0===w?void 0:w.length)>0}_trySubscribe(w){return this._throwIfClosed(),super._trySubscribe(w)}_subscribe(w){return this._throwIfClosed(),this._checkFinalizedStatuses(w),this._innerSubscribe(w)}_innerSubscribe(w){const{hasError:I,isStopped:D,observers:d}=this;return I||D?j.Kn:(this.currentObservers=null,d.push(w),new j.yU(()=>{this.currentObservers=null,(0,a.o)(d,w)}))}_checkFinalizedStatuses(w){const{hasError:I,thrownError:D,isStopped:d}=this;I?w.error(D):d&&w.complete()}asObservable(){const w=new F.c;return w.source=this,w}}return C.create=(_,w)=>new M(_,w),C})();class M extends q{constructor(_,w){super(),this.destination=_,this.source=w}next(_){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.next)||void 0===I||I.call(w,_)}error(_){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.error)||void 0===I||I.call(w,_)}complete(){var _,w;null===(w=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===w||w.call(_)}_subscribe(_){var w,I;return null!==(I=null===(w=this.source)||void 0===w?void 0:w.subscribe(_))&&void 0!==I?I:j.Kn}}},7707:(br,kn,je)=>{"use strict";je.d(kn,{Ms:()=>h,vU:()=>I});var F=je(8071),j=je(8359),Mt=je(1026),Jt=je(5334),a=je(5343);const _e=C("C",void 0,void 0);function C(x,E,N){return{kind:x,value:E,error:N}}var _=je(9270),w=je(9786);class I extends j.yU{constructor(E){super(),this.isStopped=!1,E?(this.destination=E,(0,j.Uv)(E)&&E.add(this)):this.destination=S}static create(E,N,Z){return new h(E,N,Z)}next(E){this.isStopped?v(function M(x){return C("N",x,void 0)}(E),this):this._next(E)}error(E){this.isStopped?v(function q(x){return C("E",void 0,x)}(E),this):(this.isStopped=!0,this._error(E))}complete(){this.isStopped?v(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(E){this.destination.next(E)}_error(E){try{this.destination.error(E)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function d(x,E){return D.call(x,E)}class f{constructor(E){this.partialObserver=E}next(E){const{partialObserver:N}=this;if(N.next)try{N.next(E)}catch(Z){p(Z)}}error(E){const{partialObserver:N}=this;if(N.error)try{N.error(E)}catch(Z){p(Z)}else p(E)}complete(){const{partialObserver:E}=this;if(E.complete)try{E.complete()}catch(N){p(N)}}}class h extends I{constructor(E,N,Z){let K;if(super(),(0,F.T)(E)||!E)K={next:null!=E?E:void 0,error:null!=N?N:void 0,complete:null!=Z?Z:void 0};else{let z;this&&Mt.$.useDeprecatedNextContext?(z=Object.create(E),z.unsubscribe=()=>this.unsubscribe(),K={next:E.next&&d(E.next,z),error:E.error&&d(E.error,z),complete:E.complete&&d(E.complete,z)}):K=E}this.destination=new f(K)}}function p(x){Mt.$.useDeprecatedSynchronousErrorHandling?(0,w.l)(x):(0,Jt.m)(x)}function v(x,E){const{onStoppedNotification:N}=Mt.$;N&&_.f.setTimeout(()=>N(x,E))}const S={closed:!0,next:a.l,error:function g(x){throw x},complete:a.l}},8359:(br,kn,je)=>{"use strict";je.d(kn,{Kn:()=>_e,yU:()=>a,Uv:()=>q});var F=je(8071);const Mt=(0,je(1853).L)(C=>function(w){C(this),this.message=w?`${w.length} errors occurred during unsubscription:\n${w.map((I,D)=>`${D+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=w});var Jt=je(7908);class a{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:w}=this;if(w)if(this._parentage=null,Array.isArray(w))for(const d of w)d.remove(this);else w.remove(this);const{initialTeardown:I}=this;if((0,F.T)(I))try{I()}catch(d){_=d instanceof Mt?d.errors:[d]}const{_finalizers:D}=this;if(D){this._finalizers=null;for(const d of D)try{M(d)}catch(f){_=null!=_?_:[],f instanceof Mt?_=[..._,...f.errors]:_.push(f)}}if(_)throw new Mt(_)}}add(_){var w;if(_&&_!==this)if(this.closed)M(_);else{if(_ instanceof a){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(w=this._finalizers)&&void 0!==w?w:[]).push(_)}}_hasParent(_){const{_parentage:w}=this;return w===_||Array.isArray(w)&&w.includes(_)}_addParent(_){const{_parentage:w}=this;this._parentage=Array.isArray(w)?(w.push(_),w):w?[w,_]:_}_removeParent(_){const{_parentage:w}=this;w===_?this._parentage=null:Array.isArray(w)&&(0,Jt.o)(w,_)}remove(_){const{_finalizers:w}=this;w&&(0,Jt.o)(w,_),_ instanceof a&&_._removeParent(this)}}a.EMPTY=(()=>{const C=new a;return C.closed=!0,C})();const _e=a.EMPTY;function q(C){return C instanceof a||C&&"closed"in C&&(0,F.T)(C.remove)&&(0,F.T)(C.add)&&(0,F.T)(C.unsubscribe)}function M(C){(0,F.T)(C)?C():C.unsubscribe()}},1026:(br,kn,je)=>{"use strict";je.d(kn,{$:()=>F});const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(br,kn,je)=>{"use strict";je.d(kn,{G:()=>_e});var F=je(1985),j=je(8359),Mt=je(9898),Jt=je(4360),a=je(9974);class _e extends F.c{constructor(M,C){super(),this.source=M,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,a.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new j.yU;const C=this.getSubject();M.add(this.source.subscribe((0,Jt._)(C,void 0,()=>{this._teardown(),C.complete()},_=>{this._teardown(),C.error(_)},()=>this._teardown()))),M.closed&&(this._connection=null,M=j.yU.EMPTY)}return M}refCount(){return(0,Mt.B)()(this)}}},4572:(br,kn,je)=>{"use strict";je.d(kn,{z:()=>_});var F=je(1985),j=je(3073),Mt=je(6648),Jt=je(3669),a=je(6450),_e=je(9326),q=je(8496),M=je(4360),C=je(5225);function _(...D){const d=(0,_e.lI)(D),f=(0,_e.ms)(D),{args:h,keys:p}=(0,j.D)(D);if(0===h.length)return(0,Mt.H)([],d);const g=new F.c(function w(D,d,f=Jt.D){return h=>{I(d,()=>{const{length:p}=D,g=new Array(p);let v=p,S=p;for(let x=0;x<p;x++)I(d,()=>{const E=(0,Mt.H)(D[x],d);let N=!1;E.subscribe((0,M._)(h,Z=>{g[x]=Z,N||(N=!0,S--),S||h.next(f(g.slice()))},()=>{--v||h.complete()}))},h)},h)}}(h,d,p?v=>(0,q.e)(p,v):Jt.D));return f?g.pipe((0,a.I)(f)):g}function I(D,d,f){D?(0,C.N)(f,D,d):d()}},8793:(br,kn,je)=>{"use strict";je.d(kn,{x:()=>a});var F=je(6365),Mt=je(9326),Jt=je(6648);function a(..._e){return function j(){return(0,F.U)(1)}()((0,Jt.H)(_e,(0,Mt.lI)(_e)))}},9030:(br,kn,je)=>{"use strict";je.d(kn,{v:()=>Mt});var F=je(1985),j=je(8750);function Mt(Jt){return new F.c(a=>{(0,j.Tg)(Jt()).subscribe(a)})}},983:(br,kn,je)=>{"use strict";je.d(kn,{w:()=>j});const j=new(je(1985).c)(a=>a.complete())},6648:(br,kn,je)=>{"use strict";je.d(kn,{H:()=>Z});var F=je(8750),j=je(5225),Mt=je(9974),Jt=je(4360);function a(K,z=0){return(0,Mt.N)((G,ie)=>{G.subscribe((0,Jt._)(ie,X=>(0,j.N)(ie,K,()=>ie.next(X),z),()=>(0,j.N)(ie,K,()=>ie.complete(),z),X=>(0,j.N)(ie,K,()=>ie.error(X),z)))})}function _e(K,z=0){return(0,Mt.N)((G,ie)=>{ie.add(K.schedule(()=>G.subscribe(ie),z))})}var C=je(1985),w=je(4761),I=je(8071);function d(K,z){if(!K)throw new Error("Iterable cannot be null");return new C.c(G=>{(0,j.N)(G,z,()=>{const ie=K[Symbol.asyncIterator]();(0,j.N)(G,z,()=>{ie.next().then(X=>{X.done?G.complete():G.next(X.value)})},0,!0)})})}var f=je(5055),h=je(7477),p=je(7441),g=je(5397),v=je(7953),S=je(591),x=je(5196);function Z(K,z){return z?function N(K,z){if(null!=K){if((0,f.l)(K))return function q(K,z){return(0,F.Tg)(K).pipe(_e(z),a(z))}(K,z);if((0,p.X)(K))return function _(K,z){return new C.c(G=>{let ie=0;return z.schedule(function(){ie===K.length?G.complete():(G.next(K[ie++]),G.closed||this.schedule())})})}(K,z);if((0,h.y)(K))return function M(K,z){return(0,F.Tg)(K).pipe(_e(z),a(z))}(K,z);if((0,v.T)(K))return d(K,z);if((0,g.x)(K))return function D(K,z){return new C.c(G=>{let ie;return(0,j.N)(G,z,()=>{ie=K[w.l](),(0,j.N)(G,z,()=>{let X,ee;try{({value:X,done:ee}=ie.next())}catch(Y){return void G.error(Y)}ee?G.complete():G.next(X)},0,!0)}),()=>(0,I.T)(null==ie?void 0:ie.return)&&ie.return()})}(K,z);if((0,x.U)(K))return function E(K,z){return d((0,x.C)(K),z)}(K,z)}throw(0,S.L)(K)}(K,z):(0,F.Tg)(K)}},3726:(br,kn,je)=>{"use strict";je.d(kn,{R:()=>_});var F=je(8750),j=je(1985),Mt=je(1397),Jt=je(7441),a=je(8071),_e=je(6450);const q=["addListener","removeListener"],M=["addEventListener","removeEventListener"],C=["on","off"];function _(f,h,p,g){if((0,a.T)(p)&&(g=p,p=void 0),g)return _(f,h,p).pipe((0,_e.I)(g));const[v,S]=function d(f){return(0,a.T)(f.addEventListener)&&(0,a.T)(f.removeEventListener)}(f)?M.map(x=>E=>f[x](h,E,p)):function I(f){return(0,a.T)(f.addListener)&&(0,a.T)(f.removeListener)}(f)?q.map(w(f,h)):function D(f){return(0,a.T)(f.on)&&(0,a.T)(f.off)}(f)?C.map(w(f,h)):[];if(!v&&(0,Jt.X)(f))return(0,Mt.Z)(x=>_(x,h,p))((0,F.Tg)(f));if(!v)throw new TypeError("Invalid event target");return new j.c(x=>{const E=(...N)=>x.next(1<N.length?N:N[0]);return v(E),()=>S(E)})}function w(f,h){return p=>g=>f[p](h,g)}},8750:(br,kn,je)=>{"use strict";je.d(kn,{Tg:()=>D});var F=je(1635),j=je(7441),Mt=je(7477),Jt=je(1985),a=je(5055),_e=je(7953),q=je(591),M=je(5397),C=je(5196),_=je(8071),w=je(5334),I=je(3494);function D(x){if(x instanceof Jt.c)return x;if(null!=x){if((0,a.l)(x))return function d(x){return new Jt.c(E=>{const N=x[I.s]();if((0,_.T)(N.subscribe))return N.subscribe(E);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(x);if((0,j.X)(x))return function f(x){return new Jt.c(E=>{for(let N=0;N<x.length&&!E.closed;N++)E.next(x[N]);E.complete()})}(x);if((0,Mt.y)(x))return function h(x){return new Jt.c(E=>{x.then(N=>{E.closed||(E.next(N),E.complete())},N=>E.error(N)).then(null,w.m)})}(x);if((0,_e.T)(x))return g(x);if((0,M.x)(x))return function p(x){return new Jt.c(E=>{for(const N of x)if(E.next(N),E.closed)return;E.complete()})}(x);if((0,C.U)(x))return function v(x){return g((0,C.C)(x))}(x)}throw(0,q.L)(x)}function g(x){return new Jt.c(E=>{(function S(x,E){var N,Z,K,z;return(0,F.sH)(this,void 0,void 0,function*(){try{for(N=(0,F.xN)(x);!(Z=yield N.next()).done;)if(E.next(Z.value),E.closed)return}catch(G){K={error:G}}finally{try{Z&&!Z.done&&(z=N.return)&&(yield z.call(N))}finally{if(K)throw K.error}}E.complete()})})(x,E).catch(N=>E.error(N))})}},7673:(br,kn,je)=>{"use strict";je.d(kn,{of:()=>Mt});var F=je(9326),j=je(6648);function Mt(...Jt){const a=(0,F.lI)(Jt);return(0,j.H)(Jt,a)}},8810:(br,kn,je)=>{"use strict";je.d(kn,{$:()=>Mt});var F=je(1985),j=je(8071);function Mt(Jt,a){const _e=(0,j.T)(Jt)?Jt:()=>Jt,q=M=>M.error(_e());return new F.c(a?M=>a.schedule(q,0,M):q)}},4360:(br,kn,je)=>{"use strict";je.d(kn,{_:()=>j});var F=je(7707);function j(Jt,a,_e,q,M){return new Mt(Jt,a,_e,q,M)}class Mt extends F.vU{constructor(a,_e,q,M,C,_){super(a),this.onFinalize=C,this.shouldUnsubscribe=_,this._next=_e?function(w){try{_e(w)}catch(I){a.error(I)}}:super._next,this._error=M?function(w){try{M(w)}catch(I){a.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=q?function(){try{q()}catch(w){a.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}}},5964:(br,kn,je)=>{"use strict";je.d(kn,{p:()=>Mt});var F=je(9974),j=je(4360);function Mt(Jt,a){return(0,F.N)((_e,q)=>{let M=0;_e.subscribe((0,j._)(q,C=>Jt.call(a,C,M++)&&q.next(C)))})}},6354:(br,kn,je)=>{"use strict";je.d(kn,{T:()=>Mt});var F=je(9974),j=je(4360);function Mt(Jt,a){return(0,F.N)((_e,q)=>{let M=0;_e.subscribe((0,j._)(q,C=>{q.next(Jt.call(a,C,M++))}))})}},3703:(br,kn,je)=>{"use strict";je.d(kn,{u:()=>j});var F=je(6354);function j(Mt){return(0,F.T)(()=>Mt)}},6365:(br,kn,je)=>{"use strict";je.d(kn,{U:()=>Mt});var F=je(1397),j=je(3669);function Mt(Jt=1/0){return(0,F.Z)(j.D,Jt)}},1397:(br,kn,je)=>{"use strict";je.d(kn,{Z:()=>M});var F=je(6354),j=je(8750),Mt=je(9974),Jt=je(5225),a=je(4360),q=je(8071);function M(C,_,w=1/0){return(0,q.T)(_)?M((I,D)=>(0,F.T)((d,f)=>_(I,d,D,f))((0,j.Tg)(C(I,D))),w):("number"==typeof _&&(w=_),(0,Mt.N)((I,D)=>function _e(C,_,w,I,D,d,f,h){const p=[];let g=0,v=0,S=!1;const x=()=>{S&&!p.length&&!g&&_.complete()},E=Z=>g<I?N(Z):p.push(Z),N=Z=>{d&&_.next(Z),g++;let K=!1;(0,j.Tg)(w(Z,v++)).subscribe((0,a._)(_,z=>{null==D||D(z),d?E(z):_.next(z)},()=>{K=!0},void 0,()=>{if(K)try{for(g--;p.length&&g<I;){const z=p.shift();f?(0,Jt.N)(_,f,()=>N(z)):N(z)}x()}catch(z){_.error(z)}}))};return C.subscribe((0,a._)(_,E,()=>{S=!0,x()})),()=>{null==h||h()}}(I,D,C,w)))}},9898:(br,kn,je)=>{"use strict";je.d(kn,{B:()=>Mt});var F=je(9974),j=je(4360);function Mt(){return(0,F.N)((Jt,a)=>{let _e=null;Jt._refCount++;const q=(0,j._)(a,void 0,void 0,void 0,()=>{if(!Jt||Jt._refCount<=0||0<--Jt._refCount)return void(_e=null);const M=Jt._connection,C=_e;_e=null,M&&(!C||M===C)&&M.unsubscribe(),a.unsubscribe()});Jt.subscribe(q),q.closed||(_e=Jt.connect())})}},5558:(br,kn,je)=>{"use strict";je.d(kn,{n:()=>Jt});var F=je(8750),j=je(9974),Mt=je(4360);function Jt(a,_e){return(0,j.N)((q,M)=>{let C=null,_=0,w=!1;const I=()=>w&&!C&&M.complete();q.subscribe((0,Mt._)(M,D=>{null==C||C.unsubscribe();let d=0;const f=_++;(0,F.Tg)(a(D,f)).subscribe(C=(0,Mt._)(M,h=>M.next(_e?_e(D,h,f,d++):h),()=>{C=null,I()}))},()=>{w=!0,I()}))})}},6697:(br,kn,je)=>{"use strict";je.d(kn,{s:()=>Jt});var F=je(983),j=je(9974),Mt=je(4360);function Jt(a){return a<=0?()=>F.w:(0,j.N)((_e,q)=>{let M=0;_e.subscribe((0,Mt._)(q,C=>{++M<=a&&(q.next(C),a<=M&&q.complete())}))})}},8141:(br,kn,je)=>{"use strict";je.d(kn,{M:()=>a});var F=je(8071),j=je(9974),Mt=je(4360),Jt=je(3669);function a(_e,q,M){const C=(0,F.T)(_e)||q||M?{next:_e,error:q,complete:M}:_e;return C?(0,j.N)((_,w)=>{var I;null===(I=C.subscribe)||void 0===I||I.call(C);let D=!0;_.subscribe((0,Mt._)(w,d=>{var f;null===(f=C.next)||void 0===f||f.call(C,d),w.next(d)},()=>{var d;D=!1,null===(d=C.complete)||void 0===d||d.call(C),w.complete()},d=>{var f;D=!1,null===(f=C.error)||void 0===f||f.call(C,d),w.error(d)},()=>{var d,f;D&&(null===(d=C.unsubscribe)||void 0===d||d.call(C)),null===(f=C.finalize)||void 0===f||f.call(C)}))}):Jt.D}},9270:(br,kn,je)=>{"use strict";je.d(kn,{f:()=>F});const F={setTimeout(j,Mt,...Jt){const{delegate:a}=F;return null!=a&&a.setTimeout?a.setTimeout(j,Mt,...Jt):setTimeout(j,Mt,...Jt)},clearTimeout(j){const{delegate:Mt}=F;return((null==Mt?void 0:Mt.clearTimeout)||clearTimeout)(j)},delegate:void 0}},4761:(br,kn,je)=>{"use strict";je.d(kn,{l:()=>j});const j=function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(br,kn,je)=>{"use strict";je.d(kn,{s:()=>F});const F="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(br,kn,je)=>{"use strict";je.d(kn,{R0:()=>_e,lI:()=>a,ms:()=>Jt});var F=je(8071),j=je(9470);function Mt(q){return q[q.length-1]}function Jt(q){return(0,F.T)(Mt(q))?q.pop():void 0}function a(q){return(0,j.m)(Mt(q))?q.pop():void 0}function _e(q,M){return"number"==typeof Mt(q)?q.pop():M}},3073:(br,kn,je)=>{"use strict";je.d(kn,{D:()=>a});const{isArray:F}=Array,{getPrototypeOf:j,prototype:Mt,keys:Jt}=Object;function a(q){if(1===q.length){const M=q[0];if(F(M))return{args:M,keys:null};if(function _e(q){return q&&"object"==typeof q&&j(q)===Mt}(M)){const C=Jt(M);return{args:C.map(_=>M[_]),keys:C}}}return{args:q,keys:null}}},7908:(br,kn,je)=>{"use strict";function F(j,Mt){if(j){const Jt=j.indexOf(Mt);0<=Jt&&j.splice(Jt,1)}}je.d(kn,{o:()=>F})},1853:(br,kn,je)=>{"use strict";function F(j){const Jt=j(a=>{Error.call(a),a.stack=(new Error).stack});return Jt.prototype=Object.create(Error.prototype),Jt.prototype.constructor=Jt,Jt}je.d(kn,{L:()=>F})},8496:(br,kn,je)=>{"use strict";function F(j,Mt){return j.reduce((Jt,a,_e)=>(Jt[a]=Mt[_e],Jt),{})}je.d(kn,{e:()=>F})},9786:(br,kn,je)=>{"use strict";je.d(kn,{Y:()=>Mt,l:()=>Jt});var F=je(1026);let j=null;function Mt(a){if(F.$.useDeprecatedSynchronousErrorHandling){const _e=!j;if(_e&&(j={errorThrown:!1,error:null}),a(),_e){const{errorThrown:q,error:M}=j;if(j=null,q)throw M}}else a()}function Jt(a){F.$.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=a)}},5225:(br,kn,je)=>{"use strict";function F(j,Mt,Jt,a=0,_e=!1){const q=Mt.schedule(function(){Jt(),_e?j.add(this.schedule(null,a)):this.unsubscribe()},a);if(j.add(q),!_e)return q}je.d(kn,{N:()=>F})},3669:(br,kn,je)=>{"use strict";function F(j){return j}je.d(kn,{D:()=>F})},7441:(br,kn,je)=>{"use strict";je.d(kn,{X:()=>F});const F=j=>j&&"number"==typeof j.length&&"function"!=typeof j},7953:(br,kn,je)=>{"use strict";je.d(kn,{T:()=>j});var F=je(8071);function j(Mt){return Symbol.asyncIterator&&(0,F.T)(null==Mt?void 0:Mt[Symbol.asyncIterator])}},8071:(br,kn,je)=>{"use strict";function F(j){return"function"==typeof j}je.d(kn,{T:()=>F})},5055:(br,kn,je)=>{"use strict";je.d(kn,{l:()=>Mt});var F=je(3494),j=je(8071);function Mt(Jt){return(0,j.T)(Jt[F.s])}},5397:(br,kn,je)=>{"use strict";je.d(kn,{x:()=>Mt});var F=je(4761),j=je(8071);function Mt(Jt){return(0,j.T)(null==Jt?void 0:Jt[F.l])}},7477:(br,kn,je)=>{"use strict";je.d(kn,{y:()=>j});var F=je(8071);function j(Mt){return(0,F.T)(null==Mt?void 0:Mt.then)}},5196:(br,kn,je)=>{"use strict";je.d(kn,{C:()=>Mt,U:()=>Jt});var F=je(1635),j=je(8071);function Mt(a){return(0,F.AQ)(this,arguments,function*(){const q=a.getReader();try{for(;;){const{value:M,done:C}=yield(0,F.N3)(q.read());if(C)return yield(0,F.N3)(void 0);yield yield(0,F.N3)(M)}}finally{q.releaseLock()}})}function Jt(a){return(0,j.T)(null==a?void 0:a.getReader)}},9470:(br,kn,je)=>{"use strict";je.d(kn,{m:()=>j});var F=je(8071);function j(Mt){return Mt&&(0,F.T)(Mt.schedule)}},9974:(br,kn,je)=>{"use strict";je.d(kn,{N:()=>Mt,S:()=>j});var F=je(8071);function j(Jt){return(0,F.T)(null==Jt?void 0:Jt.lift)}function Mt(Jt){return a=>{if(j(a))return a.lift(function(_e){try{return Jt(_e,this)}catch(q){this.error(q)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(br,kn,je)=>{"use strict";je.d(kn,{I:()=>Jt});var F=je(6354);const{isArray:j}=Array;function Jt(a){return(0,F.T)(_e=>function Mt(a,_e){return j(_e)?a(..._e):a(_e)}(a,_e))}},5343:(br,kn,je)=>{"use strict";function F(){}je.d(kn,{l:()=>F})},1203:(br,kn,je)=>{"use strict";je.d(kn,{F:()=>j,m:()=>Mt});var F=je(3669);function j(...Jt){return Mt(Jt)}function Mt(Jt){return 0===Jt.length?F.D:1===Jt.length?Jt[0]:function(_e){return Jt.reduce((q,M)=>M(q),_e)}}},5334:(br,kn,je)=>{"use strict";je.d(kn,{m:()=>Mt});var F=je(1026),j=je(9270);function Mt(Jt){j.f.setTimeout(()=>{const{onUnhandledError:a}=F.$;if(!a)throw Jt;a(Jt)})}},591:(br,kn,je)=>{"use strict";function F(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}je.d(kn,{L:()=>F})},8996:(br,kn,je)=>{var F={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function j(Mt){if(!je.o(F,Mt))return Promise.resolve().then(()=>{var _e=new Error("Cannot find module '"+Mt+"'");throw _e.code="MODULE_NOT_FOUND",_e});var Jt=F[Mt],a=Jt[0];return Promise.all(Jt.slice(1).map(je.e)).then(()=>je(a))}j.keys=()=>Object.keys(F),j.id=8996,br.exports=j},5235:(br,kn,je)=>{var F={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function j(Mt){if(!je.o(F,Mt))return Promise.resolve().then(()=>{var _e=new Error("Cannot find module '"+Mt+"'");throw _e.code="MODULE_NOT_FOUND",_e});var Jt=F[Mt],a=Jt[0];return je.e(Jt[1]).then(()=>je(a))}j.keys=()=>Object.keys(F),j.id=5235,br.exports=j},4633:(br,kn,je)=>{var F=je(3738).default;function j(){"use strict";br.exports=j=function(){return Jt},br.exports.__esModule=!0,br.exports.default=br.exports;var Mt,Jt={},a=Object.prototype,_e=a.hasOwnProperty,q=Object.defineProperty||function(ge,ne,J){ge[ne]=J.value},M="function"==typeof Symbol?Symbol:{},C=M.iterator||"@@iterator",_=M.asyncIterator||"@@asyncIterator",w=M.toStringTag||"@@toStringTag";function I(ge,ne,J){return Object.defineProperty(ge,ne,{value:J,enumerable:!0,configurable:!0,writable:!0}),ge[ne]}try{I({},"")}catch{I=function(J,ce,Te){return J[ce]=Te}}function D(ge,ne,J,ce){var et=Object.create((ne&&ne.prototype instanceof S?ne:S).prototype),le=new xe(ce||[]);return q(et,"_invoke",{value:X(ge,J,le)}),et}function d(ge,ne,J){try{return{type:"normal",arg:ge.call(ne,J)}}catch(ce){return{type:"throw",arg:ce}}}Jt.wrap=D;var f="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function S(){}function x(){}function E(){}var N={};I(N,C,function(){return this});var Z=Object.getPrototypeOf,K=Z&&Z(Z(ae([])));K&&K!==a&&_e.call(K,C)&&(N=K);var z=E.prototype=S.prototype=Object.create(N);function G(ge){["next","throw","return"].forEach(function(ne){I(ge,ne,function(J){return this._invoke(ne,J)})})}function ie(ge,ne){function J(Te,et,le,V){var me=d(ge[Te],ge,et);if("throw"!==me.type){var Oe=me.arg,Xe=Oe.value;return Xe&&"object"==F(Xe)&&_e.call(Xe,"__await")?ne.resolve(Xe.__await).then(function(dt){J("next",dt,le,V)},function(dt){J("throw",dt,le,V)}):ne.resolve(Xe).then(function(dt){Oe.value=dt,le(Oe)},function(dt){return J("throw",dt,le,V)})}V(me.arg)}var ce;q(this,"_invoke",{value:function(et,le){function V(){return new ne(function(me,Oe){J(et,le,me,Oe)})}return ce=ce?ce.then(V,V):V()}})}function X(ge,ne,J){var ce=f;return function(Te,et){if(ce===p)throw Error("Generator is already running");if(ce===g){if("throw"===Te)throw et;return{value:Mt,done:!0}}for(J.method=Te,J.arg=et;;){var le=J.delegate;if(le){var V=ee(le,J);if(V){if(V===v)continue;return V}}if("next"===J.method)J.sent=J._sent=J.arg;else if("throw"===J.method){if(ce===f)throw ce=g,J.arg;J.dispatchException(J.arg)}else"return"===J.method&&J.abrupt("return",J.arg);ce=p;var me=d(ge,ne,J);if("normal"===me.type){if(ce=J.done?g:h,me.arg===v)continue;return{value:me.arg,done:J.done}}"throw"===me.type&&(ce=g,J.method="throw",J.arg=me.arg)}}}function ee(ge,ne){var J=ne.method,ce=ge.iterator[J];if(ce===Mt)return ne.delegate=null,"throw"===J&&ge.iterator.return&&(ne.method="return",ne.arg=Mt,ee(ge,ne),"throw"===ne.method)||"return"!==J&&(ne.method="throw",ne.arg=new TypeError("The iterator does not provide a '"+J+"' method")),v;var Te=d(ce,ge.iterator,ne.arg);if("throw"===Te.type)return ne.method="throw",ne.arg=Te.arg,ne.delegate=null,v;var et=Te.arg;return et?et.done?(ne[ge.resultName]=et.value,ne.next=ge.nextLoc,"return"!==ne.method&&(ne.method="next",ne.arg=Mt),ne.delegate=null,v):et:(ne.method="throw",ne.arg=new TypeError("iterator result is not an object"),ne.delegate=null,v)}function Y(ge){var ne={tryLoc:ge[0]};1 in ge&&(ne.catchLoc=ge[1]),2 in ge&&(ne.finallyLoc=ge[2],ne.afterLoc=ge[3]),this.tryEntries.push(ne)}function ve(ge){var ne=ge.completion||{};ne.type="normal",delete ne.arg,ge.completion=ne}function xe(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(Y,this),this.reset(!0)}function ae(ge){if(ge||""===ge){var ne=ge[C];if(ne)return ne.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length)){var J=-1,ce=function Te(){for(;++J<ge.length;)if(_e.call(ge,J))return Te.value=ge[J],Te.done=!1,Te;return Te.value=Mt,Te.done=!0,Te};return ce.next=ce}}throw new TypeError(F(ge)+" is not iterable")}return x.prototype=E,q(z,"constructor",{value:E,configurable:!0}),q(E,"constructor",{value:x,configurable:!0}),x.displayName=I(E,w,"GeneratorFunction"),Jt.isGeneratorFunction=function(ge){var ne="function"==typeof ge&&ge.constructor;return!!ne&&(ne===x||"GeneratorFunction"===(ne.displayName||ne.name))},Jt.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,E):(ge.__proto__=E,I(ge,w,"GeneratorFunction")),ge.prototype=Object.create(z),ge},Jt.awrap=function(ge){return{__await:ge}},G(ie.prototype),I(ie.prototype,_,function(){return this}),Jt.AsyncIterator=ie,Jt.async=function(ge,ne,J,ce,Te){void 0===Te&&(Te=Promise);var et=new ie(D(ge,ne,J,ce),Te);return Jt.isGeneratorFunction(ne)?et:et.next().then(function(le){return le.done?le.value:et.next()})},G(z),I(z,w,"Generator"),I(z,C,function(){return this}),I(z,"toString",function(){return"[object Generator]"}),Jt.keys=function(ge){var ne=Object(ge),J=[];for(var ce in ne)J.push(ce);return J.reverse(),function Te(){for(;J.length;){var et=J.pop();if(et in ne)return Te.value=et,Te.done=!1,Te}return Te.done=!0,Te}},Jt.values=ae,xe.prototype={constructor:xe,reset:function(ne){if(this.prev=0,this.next=0,this.sent=this._sent=Mt,this.done=!1,this.delegate=null,this.method="next",this.arg=Mt,this.tryEntries.forEach(ve),!ne)for(var J in this)"t"===J.charAt(0)&&_e.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=Mt)},stop:function(){this.done=!0;var ne=this.tryEntries[0].completion;if("throw"===ne.type)throw ne.arg;return this.rval},dispatchException:function(ne){if(this.done)throw ne;var J=this;function ce(Oe,Xe){return le.type="throw",le.arg=ne,J.next=Oe,Xe&&(J.method="next",J.arg=Mt),!!Xe}for(var Te=this.tryEntries.length-1;Te>=0;--Te){var et=this.tryEntries[Te],le=et.completion;if("root"===et.tryLoc)return ce("end");if(et.tryLoc<=this.prev){var V=_e.call(et,"catchLoc"),me=_e.call(et,"finallyLoc");if(V&&me){if(this.prev<et.catchLoc)return ce(et.catchLoc,!0);if(this.prev<et.finallyLoc)return ce(et.finallyLoc)}else if(V){if(this.prev<et.catchLoc)return ce(et.catchLoc,!0)}else{if(!me)throw Error("try statement without catch or finally");if(this.prev<et.finallyLoc)return ce(et.finallyLoc)}}}},abrupt:function(ne,J){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Te=this.tryEntries[ce];if(Te.tryLoc<=this.prev&&_e.call(Te,"finallyLoc")&&this.prev<Te.finallyLoc){var et=Te;break}}et&&("break"===ne||"continue"===ne)&&et.tryLoc<=J&&J<=et.finallyLoc&&(et=null);var le=et?et.completion:{};return le.type=ne,le.arg=J,et?(this.method="next",this.next=et.finallyLoc,v):this.complete(le)},complete:function(ne,J){if("throw"===ne.type)throw ne.arg;return"break"===ne.type||"continue"===ne.type?this.next=ne.arg:"return"===ne.type?(this.rval=this.arg=ne.arg,this.method="return",this.next="end"):"normal"===ne.type&&J&&(this.next=J),v},finish:function(ne){for(var J=this.tryEntries.length-1;J>=0;--J){var ce=this.tryEntries[J];if(ce.finallyLoc===ne)return this.complete(ce.completion,ce.afterLoc),ve(ce),v}},catch:function(ne){for(var J=this.tryEntries.length-1;J>=0;--J){var ce=this.tryEntries[J];if(ce.tryLoc===ne){var Te=ce.completion;if("throw"===Te.type){var et=Te.arg;ve(ce)}return et}}throw Error("illegal catch attempt")},delegateYield:function(ne,J,ce){return this.delegate={iterator:ae(ne),resultName:J,nextLoc:ce},"next"===this.method&&(this.arg=Mt),v}},Jt}br.exports=j,br.exports.__esModule=!0,br.exports.default=br.exports},3738:br=>{function kn(je){return br.exports=kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},br.exports.__esModule=!0,br.exports.default=br.exports,kn(je)}br.exports=kn,br.exports.__esModule=!0,br.exports.default=br.exports},4756:(br,kn,je)=>{var F=je(4633)();br.exports=F;try{regeneratorRuntime=F}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}},177:(br,kn,je)=>{"use strict";je.d(kn,{AJ:()=>Dn,MD:()=>Rn,N0:()=>Ii,QT:()=>Mt,Sm:()=>h,Sq:()=>cr,T3:()=>ta,UE:()=>dr,VF:()=>a,Vy:()=>vr,Xr:()=>Xr,ZD:()=>Jt,_b:()=>He,aZ:()=>g,bT:()=>ji,fw:()=>p,hb:()=>d,hj:()=>C,qQ:()=>q});var F=je(3953);let j=null;function Mt(){return j}function Jt(Se){var Ze;null!==(Ze=j)&&void 0!==Ze||(j=Se)}class a{}const q=new F.nKC("");let M=(()=>{var Se;class Ze{historyGo(qe){throw new Error("")}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=F.jDH({token:Se,factory:()=>(0,F.WQX)(_),providedIn:"platform"}),Ze})();const C=new F.nKC("");let _=(()=>{var Se;class Ze extends M{constructor(){super(),this._doc=(0,F.WQX)(q),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(qe){const Rt=Mt().getGlobalEventTarget(this._doc,"window");return Rt.addEventListener("popstate",qe,!1),()=>Rt.removeEventListener("popstate",qe)}onHashChange(qe){const Rt=Mt().getGlobalEventTarget(this._doc,"window");return Rt.addEventListener("hashchange",qe,!1),()=>Rt.removeEventListener("hashchange",qe)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(qe){this._location.pathname=qe}pushState(qe,Rt,en){this._history.pushState(qe,Rt,en)}replaceState(qe,Rt,en){this._history.replaceState(qe,Rt,en)}forward(){this._history.forward()}back(){this._history.back()}historyGo(qe=0){this._history.go(qe)}getState(){return this._history.state}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=F.jDH({token:Se,factory:()=>new Se,providedIn:"platform"}),Ze})();function w(Se,Ze){if(0==Se.length)return Ze;if(0==Ze.length)return Se;let Zt=0;return Se.endsWith("/")&&Zt++,Ze.startsWith("/")&&Zt++,2==Zt?Se+Ze.substring(1):1==Zt?Se+Ze:Se+"/"+Ze}function I(Se){const Ze=Se.match(/#|\?|$/),Zt=Ze&&Ze.index||Se.length;return Se.slice(0,Zt-("/"===Se[Zt-1]?1:0))+Se.slice(Zt)}function D(Se){return Se&&"?"!==Se[0]?"?"+Se:Se}let d=(()=>{var Se;class Ze{historyGo(qe){throw new Error("")}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=F.jDH({token:Se,factory:()=>(0,F.WQX)(h),providedIn:"root"}),Ze})();const f=new F.nKC("");let h=(()=>{var Se;class Ze extends d{constructor(qe,Rt){var en,mt,Cr;super(),this._platformLocation=qe,this._removeListenerFns=[],this._baseHref=null!==(en=null!==(mt=null!=Rt?Rt:this._platformLocation.getBaseHrefFromDOM())&&void 0!==mt?mt:null===(Cr=(0,F.WQX)(q).location)||void 0===Cr?void 0:Cr.origin)&&void 0!==en?en:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(qe){this._removeListenerFns.push(this._platformLocation.onPopState(qe),this._platformLocation.onHashChange(qe))}getBaseHref(){return this._baseHref}prepareExternalUrl(qe){return w(this._baseHref,qe)}path(qe=!1){const Rt=this._platformLocation.pathname+D(this._platformLocation.search),en=this._platformLocation.hash;return en&&qe?`${Rt}${en}`:Rt}pushState(qe,Rt,en,mt){const Cr=this.prepareExternalUrl(en+D(mt));this._platformLocation.pushState(qe,Rt,Cr)}replaceState(qe,Rt,en,mt){const Cr=this.prepareExternalUrl(en+D(mt));this._platformLocation.replaceState(qe,Rt,Cr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(qe=0){var Rt,en;null===(Rt=(en=this._platformLocation).historyGo)||void 0===Rt||Rt.call(en,qe)}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(F.KVO(M),F.KVO(f,8))},Se.\u0275prov=F.jDH({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Ze})(),p=(()=>{var Se;class Ze extends d{constructor(qe,Rt){super(),this._platformLocation=qe,this._baseHref="",this._removeListenerFns=[],null!=Rt&&(this._baseHref=Rt)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(qe){this._removeListenerFns.push(this._platformLocation.onPopState(qe),this._platformLocation.onHashChange(qe))}getBaseHref(){return this._baseHref}path(qe=!1){var Rt;const en=null!==(Rt=this._platformLocation.hash)&&void 0!==Rt?Rt:"#";return en.length>0?en.substring(1):en}prepareExternalUrl(qe){const Rt=w(this._baseHref,qe);return Rt.length>0?"#"+Rt:Rt}pushState(qe,Rt,en,mt){let Cr=this.prepareExternalUrl(en+D(mt));0==Cr.length&&(Cr=this._platformLocation.pathname),this._platformLocation.pushState(qe,Rt,Cr)}replaceState(qe,Rt,en,mt){let Cr=this.prepareExternalUrl(en+D(mt));0==Cr.length&&(Cr=this._platformLocation.pathname),this._platformLocation.replaceState(qe,Rt,Cr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(qe=0){var Rt,en;null===(Rt=(en=this._platformLocation).historyGo)||void 0===Rt||Rt.call(en,qe)}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(F.KVO(M),F.KVO(f,8))},Se.\u0275prov=F.jDH({token:Se,factory:Se.\u0275fac}),Ze})(),g=(()=>{var Se;class Ze{constructor(qe){this._subject=new F.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=qe;const Rt=this._locationStrategy.getBaseHref();this._basePath=function E(Se){if(new RegExp("^(https?:)?//").test(Se)){const[,Zt]=Se.split(/\/\/[^\/]+/);return Zt}return Se}(I(x(Rt))),this._locationStrategy.onPopState(en=>{this._subject.emit({url:this.path(!0),pop:!0,state:en.state,type:en.type})})}ngOnDestroy(){var qe;null===(qe=this._urlChangeSubscription)||void 0===qe||qe.unsubscribe(),this._urlChangeListeners=[]}path(qe=!1){return this.normalize(this._locationStrategy.path(qe))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(qe,Rt=""){return this.path()==this.normalize(qe+D(Rt))}normalize(qe){return Ze.stripTrailingSlash(function S(Se,Ze){if(!Se||!Ze.startsWith(Se))return Ze;const Zt=Ze.substring(Se.length);return""===Zt||["/",";","?","#"].includes(Zt[0])?Zt:Ze}(this._basePath,x(qe)))}prepareExternalUrl(qe){return qe&&"/"!==qe[0]&&(qe="/"+qe),this._locationStrategy.prepareExternalUrl(qe)}go(qe,Rt="",en=null){this._locationStrategy.pushState(en,"",qe,Rt),this._notifyUrlChangeListeners(this.prepareExternalUrl(qe+D(Rt)),en)}replaceState(qe,Rt="",en=null){this._locationStrategy.replaceState(en,"",qe,Rt),this._notifyUrlChangeListeners(this.prepareExternalUrl(qe+D(Rt)),en)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(qe=0){var Rt,en;null===(Rt=(en=this._locationStrategy).historyGo)||void 0===Rt||Rt.call(en,qe)}onUrlChange(qe){var Rt;return this._urlChangeListeners.push(qe),null!==(Rt=this._urlChangeSubscription)&&void 0!==Rt||(this._urlChangeSubscription=this.subscribe(en=>{this._notifyUrlChangeListeners(en.url,en.state)})),()=>{const en=this._urlChangeListeners.indexOf(qe);var mt;this._urlChangeListeners.splice(en,1),0===this._urlChangeListeners.length&&(null===(mt=this._urlChangeSubscription)||void 0===mt||mt.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(qe="",Rt){this._urlChangeListeners.forEach(en=>en(qe,Rt))}subscribe(qe,Rt,en){return this._subject.subscribe({next:qe,error:Rt,complete:en})}}return(Se=Ze).normalizeQueryParams=D,Se.joinWithSlash=w,Se.stripTrailingSlash=I,Se.\u0275fac=function(qe){return new(qe||Se)(F.KVO(d))},Se.\u0275prov=F.jDH({token:Se,factory:()=>function v(){return new g((0,F.KVO)(d))}(),providedIn:"root"}),Ze})();function x(Se){return Se.replace(/\/index.html$/,"")}function He(Se,Ze){Ze=encodeURIComponent(Ze);for(const Zt of Se.split(";")){const qe=Zt.indexOf("="),[Rt,en]=-1==qe?[Zt,""]:[Zt.slice(0,qe),Zt.slice(qe+1)];if(Rt.trim()===Ze)return decodeURIComponent(en)}return null}class Hn{constructor(Ze,Zt,qe,Rt){this.$implicit=Ze,this.ngForOf=Zt,this.index=qe,this.count=Rt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cr=(()=>{var Se;class Ze{set ngForOf(qe){this._ngForOf=qe,this._ngForOfDirty=!0}set ngForTrackBy(qe){this._trackByFn=qe}get ngForTrackBy(){return this._trackByFn}constructor(qe,Rt,en){this._viewContainer=qe,this._template=Rt,this._differs=en,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(qe){qe&&(this._template=qe)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const qe=this._ngForOf;!this._differ&&qe&&(this._differ=this._differs.find(qe).create(this.ngForTrackBy))}if(this._differ){const qe=this._differ.diff(this._ngForOf);qe&&this._applyChanges(qe)}}_applyChanges(qe){const Rt=this._viewContainer;qe.forEachOperation((en,mt,Cr)=>{if(null==en.previousIndex)Rt.createEmbeddedView(this._template,new Hn(en.item,this._ngForOf,-1,-1),null===Cr?void 0:Cr);else if(null==Cr)Rt.remove(null===mt?void 0:mt);else if(null!==mt){const zi=Rt.get(mt);Rt.move(zi,Cr),Pr(zi,en)}});for(let en=0,mt=Rt.length;en<mt;en++){const zi=Rt.get(en).context;zi.index=en,zi.count=mt,zi.ngForOf=this._ngForOf}qe.forEachIdentityChange(en=>{Pr(Rt.get(en.currentIndex),en)})}static ngTemplateContextGuard(qe,Rt){return!0}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(F.rXU(F.c1b),F.rXU(F.C4Q),F.rXU(F._q3))},Se.\u0275dir=F.FsC({type:Se,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),Ze})();function Pr(Se,Ze){Se.context.$implicit=Ze.item}let ji=(()=>{var Se;class Ze{constructor(qe,Rt){this._viewContainer=qe,this._context=new Us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Rt}set ngIf(qe){this._context.$implicit=this._context.ngIf=qe,this._updateView()}set ngIfThen(qe){xs("ngIfThen",qe),this._thenTemplateRef=qe,this._thenViewRef=null,this._updateView()}set ngIfElse(qe){xs("ngIfElse",qe),this._elseTemplateRef=qe,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(qe,Rt){return!0}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(F.rXU(F.c1b),F.rXU(F.C4Q))},Se.\u0275dir=F.FsC({type:Se,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),Ze})();class Us{constructor(){this.$implicit=null,this.ngIf=null}}function xs(Se,Ze){if(Ze&&!Ze.createEmbeddedView)throw new Error(`${Se} must be a TemplateRef, but received '${(0,F.Tbb)(Ze)}'.`)}let ta=(()=>{var Se;class Ze{constructor(qe){this._viewContainerRef=qe,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(qe){if(this._shouldRecreateView(qe)){var Rt;const en=this._viewContainerRef;if(this._viewRef&&en.remove(en.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const mt=this._createContextForwardProxy();this._viewRef=en.createEmbeddedView(this.ngTemplateOutlet,mt,{injector:null!==(Rt=this.ngTemplateOutletInjector)&&void 0!==Rt?Rt:void 0})}}_shouldRecreateView(qe){return!!qe.ngTemplateOutlet||!!qe.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(qe,Rt,en)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Rt,en),get:(qe,Rt,en)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Rt,en)}})}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(F.rXU(F.c1b))},Se.\u0275dir=F.FsC({type:Se,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[F.OA$]}),Ze})(),Rn=(()=>{var Se;class Ze{}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275mod=F.$C({type:Se}),Se.\u0275inj=F.G2t({}),Ze})();const Dn="browser",ir="server";function dr(Se){return Se===Dn}function vr(Se){return Se===ir}let Xr=(()=>{var Se;class Ze{}return(Se=Ze).\u0275prov=(0,F.jDH)({token:Se,providedIn:"root",factory:()=>dr((0,F.WQX)(F.Agw))?new Vr((0,F.WQX)(q),window):new oi}),Ze})();class Vr{constructor(Ze,Zt){this.document=Ze,this.window=Zt,this.offset=()=>[0,0]}setOffset(Ze){this.offset=Array.isArray(Ze)?()=>Ze:Ze}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Ze){this.window.scrollTo(Ze[0],Ze[1])}scrollToAnchor(Ze){const Zt=function ni(Se,Ze){const Zt=Se.getElementById(Ze)||Se.getElementsByName(Ze)[0];if(Zt)return Zt;if("function"==typeof Se.createTreeWalker&&Se.body&&"function"==typeof Se.body.attachShadow){const qe=Se.createTreeWalker(Se.body,NodeFilter.SHOW_ELEMENT);let Rt=qe.currentNode;for(;Rt;){const en=Rt.shadowRoot;if(en){const mt=en.getElementById(Ze)||en.querySelector(`[name="${Ze}"]`);if(mt)return mt}Rt=qe.nextNode()}}return null}(this.document,Ze);Zt&&(this.scrollToElement(Zt),Zt.focus())}setHistoryScrollRestoration(Ze){this.window.history.scrollRestoration=Ze}scrollToElement(Ze){const Zt=Ze.getBoundingClientRect(),qe=Zt.left+this.window.pageXOffset,Rt=Zt.top+this.window.pageYOffset,en=this.offset();this.window.scrollTo(qe-en[0],Rt-en[1])}}class oi{setOffset(Ze){}getScrollPosition(){return[0,0]}scrollToPosition(Ze){}scrollToAnchor(Ze){}setHistoryScrollRestoration(Ze){}}class Ii{}},3953:(br,kn,je)=>{"use strict";function F(n,i){return Object.is(n,i)}je.d(kn,{iLQ:()=>_b,sZ2:()=>Kd,hnV:()=>YA,Hbi:()=>PP,o8S:()=>ou,BIS:()=>Zv,gRc:()=>uC,Ql9:()=>sP,Ocv:()=>hP,Z63:()=>To,aKT:()=>Xh,uvJ:()=>ul,zcH:()=>cc,bkB:()=>Oo,$GK:()=>fs,nKC:()=>Jr,zZn:()=>Uo,_q3:()=>KS,MKu:()=>YS,xe9:()=>xb,Co$:()=>J_,Vns:()=>_d,SKi:()=>Lo,Xx1:()=>bo,Agw:()=>Dp,PLl:()=>E1,sFG:()=>by,_9s:()=>Af,czy:()=>Gg,WPN:()=>hd,kdw:()=>fu,C4Q:()=>rh,NYb:()=>QR,giA:()=>qA,RxE:()=>VA,c1b:()=>lh,gXe:()=>Fc,mal:()=>hm,L39:()=>fO,EWP:()=>mO,a0P:()=>wO,Ol2:()=>$r,w6W:()=>Ww,oH4:()=>oC,SmG:()=>yP,Rfq:()=>pc,WQX:()=>Ur,QuC:()=>Sr,EmA:()=>ko,fpN:()=>RP,HJs:()=>SO,N4e:()=>xh,vPA:()=>ei,O8t:()=>gO,H3F:()=>GA,zAP:()=>kC,H8p:()=>Hf,KH2:()=>Nm,TgB:()=>pl,wOt:()=>Ir,WHO:()=>WA,e01:()=>XA,lNU:()=>Ys,h9k:()=>b0,$MX:()=>Gp,ZF7:()=>Jd,Kcf:()=>B1,e5t:()=>$1,UyX:()=>G1,cWb:()=>V1,osQ:()=>z1,H5H:()=>gS,mq5:()=>sT,JZv:()=>lo,LfX:()=>Ss,plB:()=>ju,jNT:()=>FS,zjR:()=>KA,TL$:()=>yE,Tbb:()=>po,rcV:()=>Kc,Vt3:()=>qs,GFd:()=>Z_,OA$:()=>Sc,Jv_:()=>gA,aNF:()=>yA,R7$:()=>Kg,BMQ:()=>rS,AVh:()=>cS,wni:()=>zT,VBU:()=>Fe,FsC:()=>Nn,jDH:()=>Gr,G2t:()=>li,$C:()=>Et,EJ8:()=>ur,rXU:()=>Ou,nrm:()=>pS,eu8:()=>mS,bVm:()=>ub,qex:()=>cb,k0s:()=>lb,j41:()=>ab,RV6:()=>nT,xGo:()=>fg,KVO:()=>fi,kS0:()=>zh,QTQ:()=>j0,bIt:()=>_S,lsd:()=>WT,XpG:()=>RT,SdG:()=>OT,NAR:()=>PT,Y8G:()=>aS,lJ4:()=>bA,mGM:()=>HT,sdS:()=>XT,Njj:()=>rc,eBV:()=>eg,B4B:()=>Ug,n$t:()=>w0,Aen:()=>ru,DNE:()=>sl,EFF:()=>rA,JRh:()=>SS,SpI:()=>pb,Lme:()=>ES,DH7:()=>hA,mxI:()=>TS,R50:()=>MS,GBs:()=>$T});let j=null,Mt=!1,Jt=1;const a=Symbol("SIGNAL");function _e(n){const i=j;return j=n,i}const _={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function w(n){if(Mt)throw new Error("");if(null===j)return;j.consumerOnSignalRead(n);const i=j.nextProducerIndex++;Z(j),i<j.producerNode.length&&j.producerNode[i]!==n&&N(j)&&E(j.producerNode[i],j.producerIndexOfThis[i]),j.producerNode[i]!==n&&(j.producerNode[i]=n,j.producerIndexOfThis[i]=N(j)?x(n,j,i):0),j.producerLastReadVersion[i]=n.version}function D(n){if((!N(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Jt)){if(!n.producerMustRecompute(n)&&!v(n))return n.dirty=!1,void(n.lastCleanEpoch=Jt);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Jt}}function d(n){if(void 0===n.liveConsumerNode)return;const i=Mt;Mt=!0;try{for(const o of n.liveConsumerNode)o.dirty||h(o)}finally{Mt=i}}function f(){var n;return!1!==(null===(n=j)||void 0===n?void 0:n.consumerAllowSignalWrites)}function h(n){var i;n.dirty=!0,d(n),null===(i=n.consumerMarkedDirty)||void 0===i||i.call(n,n)}function p(n){return n&&(n.nextProducerIndex=0),_e(n)}function g(n,i){if(_e(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(N(n))for(let o=n.nextProducerIndex;o<n.producerNode.length;o++)E(n.producerNode[o],n.producerIndexOfThis[o]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function v(n){Z(n);for(let i=0;i<n.producerNode.length;i++){const o=n.producerNode[i],c=n.producerLastReadVersion[i];if(c!==o.version||(D(o),c!==o.version))return!0}return!1}function S(n){if(Z(n),N(n))for(let i=0;i<n.producerNode.length;i++)E(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function x(n,i,o){if(K(n),0===n.liveConsumerNode.length&&z(n))for(let c=0;c<n.producerNode.length;c++)n.producerIndexOfThis[c]=x(n.producerNode[c],n,c);return n.liveConsumerIndexOfThis.push(o),n.liveConsumerNode.push(i)-1}function E(n,i){if(K(n),1===n.liveConsumerNode.length&&z(n))for(let c=0;c<n.producerNode.length;c++)E(n.producerNode[c],n.producerIndexOfThis[c]);const o=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[o],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[o],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const c=n.liveConsumerIndexOfThis[i],m=n.liveConsumerNode[i];Z(m),m.producerIndexOfThis[c]=i}}function N(n){var i,o;return n.consumerIsAlwaysLive||(null!==(i=null==n||null===(o=n.liveConsumerNode)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0}function Z(n){var i,o,c;null!==(i=n.producerNode)&&void 0!==i||(n.producerNode=[]),null!==(o=n.producerIndexOfThis)&&void 0!==o||(n.producerIndexOfThis=[]),null!==(c=n.producerLastReadVersion)&&void 0!==c||(n.producerLastReadVersion=[])}function K(n){var i,o;null!==(i=n.liveConsumerNode)&&void 0!==i||(n.liveConsumerNode=[]),null!==(o=n.liveConsumerIndexOfThis)&&void 0!==o||(n.liveConsumerIndexOfThis=[])}function z(n){return void 0!==n.producerNode}const ie=Symbol("UNSET"),X=Symbol("COMPUTING"),ee=Symbol("ERRORED"),Y={..._,value:ie,dirty:!0,error:null,equal:F,producerMustRecompute:n=>n.value===ie||n.value===X,producerRecomputeValue(n){if(n.value===X)throw new Error("Detected cycle in computations.");const i=n.value;n.value=X;const o=p(n);let c;try{c=n.computation()}catch(m){c=ee,n.error=m}finally{g(n,o)}i!==ie&&i!==ee&&c!==ee&&n.equal(i,c)?n.value=i:(n.value=c,n.version++)}};let xe=function ve(){throw new Error};function ae(){xe()}let ne=null;function et(n,i){f()||ae(),n.equal(n.value,i)||(n.value=i,function Oe(n){var i;n.version++,function I(){Jt++}(),d(n),null===(i=ne)||void 0===i||i()}(n))}const me={..._,equal:F,value:void 0};var Vi,ht=je(4412),Lt=je(1413),kt=je(8359),lt=je(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Ys="https://g.co/ng/security#xss";class Ir extends Error{constructor(i,o){super(function na(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function to(n){return{toString:n}.toString()}const ka="__parameters__";function Ll(n,i,o){return to(()=>{const c=function Zl(n){return function(...o){if(n){const c=n(...o);for(const m in c)this[m]=c[m]}}}(i);function m(...P){if(this instanceof m)return c.apply(this,P),this;const $=new m(...P);return ue.annotation=$,ue;function ue(we,Ge,rt){const gt=we.hasOwnProperty(ka)?we[ka]:Object.defineProperty(we,ka,{value:[]})[ka];for(;gt.length<=rt;)gt.push(null);return(gt[rt]=gt[rt]||[]).push($),we}}return o&&(m.prototype=Object.create(o.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}const lo=globalThis;function ws(n){for(let i in n)if(n[i]===ws)return i;throw Error("Could not find renamed property on target object.")}function Nl(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function po(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(po).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function kl(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ja=ws({__forward_ref__:ws});function pc(n){return n.__forward_ref__=pc,n.toString=function(){return po(this())},n}function ii(n){return Fa(n)?n():n}function Fa(n){return"function"==typeof n&&n.hasOwnProperty(ja)&&n.__forward_ref__===pc}function Gr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function li(n){return{providers:n.providers||[],imports:n.imports||[]}}function ki(n){return mo(n,go)||mo(n,Ps)}function Ss(n){return null!==ki(n)}function mo(n,i){return n.hasOwnProperty(i)?n[i]:null}function Ro(n){return n&&(n.hasOwnProperty(zo)||n.hasOwnProperty(Bs))?n[zo]:null}const go=ws({\u0275prov:ws}),zo=ws({\u0275inj:ws}),Ps=ws({ngInjectableDef:ws}),Bs=ws({ngInjectorDef:ws});class Jr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Gr({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function jl(n){return n&&!!n.\u0275providers}const _l=ws({\u0275cmp:ws}),bd=ws({\u0275dir:ws}),du=ws({\u0275pipe:ws}),Fl=ws({\u0275mod:ws}),Ul=ws({\u0275fac:ws}),mc=ws({__NG_ELEMENT_ID__:ws}),xd=ws({__NG_ENV_ID__:ws});function Hi(n){return"string"==typeof n?n:null==n?"":String(n)}function Uu(n,i){throw new Ir(-201,!1)}var fs=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fs||{});let Da;function Ql(){return Da}function ha(n){const i=Da;return Da=n,i}function no(n,i,o){const c=ki(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&fs.Optional?null:void 0!==i?i:void Uu()}const Se={},Ze="__NG_DI_FLAG__",Zt="ngTempTokenPath",Rt=/\n/gm,mt="__source";let Cr;function Si(n){const i=Cr;return Cr=n,i}function ns(n,i=fs.Default){if(void 0===Cr)throw new Ir(-203,!1);return null===Cr?no(n,void 0,i):Cr.get(n,i&fs.Optional?null:void 0,i)}function fi(n,i=fs.Default){return(Ql()||ns)(ii(n),i)}function Ur(n,i=fs.Default){return fi(n,Ws(i))}function Ws(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fa(n){const i=[];for(let o=0;o<n.length;o++){const c=ii(n[o]);if(Array.isArray(c)){if(0===c.length)throw new Ir(900,!1);let m,P=fs.Default;for(let $=0;$<c.length;$++){const ue=c[$],we=xa(ue);"number"==typeof we?-1===we?m=ue.token:P|=we:m=ue}i.push(fi(m,P))}else i.push(fi(c))}return i}function ro(n,i){return n[Ze]=i,n.prototype[Ze]=i,n}function xa(n){return n[Ze]}const bo=ro(Ll("Optional"),8),fu=ro(Ll("SkipSelf"),4);function xl(n,i){return n.hasOwnProperty(Ul)?n[Ul]:null}function Ua(n,i){n.forEach(o=>Array.isArray(o)?Ua(o,i):i(o))}function mh(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function kc(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Mi(n,i,o){let c=Ia(n,i);return c>=0?n[1|c]=o:(c=~c,function Bu(n,i,o,c){let m=n.length;if(m==i)n.push(o,c);else if(1===m)n.push(c,n[0]),n[0]=o;else{for(m--,n.push(n[m-1],n[m]);m>i;)n[m]=n[m-2],m--;n[i]=o,n[i+1]=c}}(n,c,i,o)),c}function jc(n,i){const o=Ia(n,i);if(o>=0)return n[1|o]}function Ia(n,i){return function gh(n,i,o){let c=0,m=n.length>>o;for(;m!==c;){const P=c+(m-c>>1),$=n[P<<o];if(i===$)return P<<o;$>i?m=P:c=P+1}return~(m<<o)}(n,i,1)}const ra={},ps=[],To=new Jr(""),yh=new Jr("",-1),vh=new Jr("");class Za{get(i,o=Se){if(o===Se){const c=new Error(`NullInjectorError: No provider for ${po(i)}!`);throw c.name="NullInjectorError",c}return o}}var mu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mu||{}),Fc=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fc||{}),gc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gc||{});function Vu(n,i,o){let c=n.length;for(;;){const m=n.indexOf(i,o);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const P=i.length;if(m+P===c||n.charCodeAt(m+P)<=32)return m}o=m+1}}function wl(n,i,o){let c=0;for(;c<o.length;){const m=o[c];if("number"==typeof m){if(0!==m)break;c++;const P=o[c++],$=o[c++],ue=o[c++];n.setAttribute(i,$,ue,P)}else{const P=m,$=o[++c];zu(P)?n.setProperty(i,P,$):n.setAttribute(i,P,$),c++}}return c}function Gu(n){return 3===n||4===n||6===n}function zu(n){return 64===n.charCodeAt(0)}function gu(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let c=0;c<i.length;c++){const m=i[c];"number"==typeof m?o=m:0===o||Vf(n,o,m,null,-1===o||2===o?i[++c]:null)}}return n}function Vf(n,i,o,c,m){let P=0,$=n.length;if(-1===i)$=-1;else for(;P<n.length;){const ue=n[P++];if("number"==typeof ue){if(ue===i){$=-1;break}if(ue>i){$=P-1;break}}}for(;P<n.length;){const ue=n[P];if("number"==typeof ue)break;if(ue===o){if(null===c)return void(null!==m&&(n[P+1]=m));if(c===n[P+1])return void(n[P+2]=m)}P++,null!==c&&P++,null!==m&&P++}-1!==$&&(n.splice($,0,i),P=$+1),n.splice(P++,0,o),null!==c&&n.splice(P++,0,c),null!==m&&n.splice(P++,0,m)}const _h="ng-template";function Gf(n,i,o,c){let m=0;if(c){for(;m<i.length&&"string"==typeof i[m];m+=2)if("class"===i[m]&&-1!==Vu(i[m+1].toLowerCase(),o,0))return!0}else if(Sd(n))return!1;if(m=i.indexOf(1,m),m>-1){let P;for(;++m<i.length&&"string"==typeof(P=i[m]);)if(P.toLowerCase()===o)return!0}return!1}function Sd(n){return 4===n.type&&n.value!==_h}function zf(n,i,o){return i===(4!==n.type||o?n.value:_h)}function Um(n,i,o){let c=4;const m=n.attrs,P=null!==m?function yc(n){for(let i=0;i<n.length;i++)if(Gu(n[i]))return i;return n.length}(m):0;let $=!1;for(let ue=0;ue<i.length;ue++){const we=i[ue];if("number"!=typeof we){if(!$)if(4&c){if(c=2|1&c,""!==we&&!zf(n,we,o)||""===we&&1===i.length){if(Sa(c))return!1;$=!0}}else if(8&c){if(null===m||!Gf(n,m,we,o)){if(Sa(c))return!1;$=!0}}else{const Ge=i[++ue],rt=Ed(we,m,Sd(n),o);if(-1===rt){if(Sa(c))return!1;$=!0;continue}if(""!==Ge){let gt;if(gt=rt>P?"":m[rt+1].toLowerCase(),2&c&&Ge!==gt){if(Sa(c))return!1;$=!0}}}}else{if(!$&&!Sa(c)&&!Sa(we))return!1;if($&&Sa(we))continue;$=!1,c=we|1&c}}return Sa(c)||$}function Sa(n){return!(1&n)}function Ed(n,i,o,c){if(null===i)return-1;let m=0;if(c||!o){let P=!1;for(;m<i.length;){const $=i[m];if($===n)return m;if(3===$||6===$)P=!0;else{if(1===$||2===$){let ue=i[++m];for(;"string"==typeof ue;)ue=i[++m];continue}if(4===$)break;if(0===$){m+=4;continue}}m+=P?1:2}return-1}return function $f(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===i)return o;o++}return-1}(i,n)}function Qs(n,i,o=!1){for(let c=0;c<i.length;c++)if(Um(n,i[c],o))return!0;return!1}function vc(n,i){e:for(let o=0;o<i.length;o++){const c=i[o];if(n.length===c.length){for(let m=0;m<n.length;m++)if(n[m]!==c[m])continue e;return!0}}return!1}function yu(n,i){return n?":not("+i.trim()+")":i}function $u(n){let i=n[0],o=1,c=2,m="",P=!1;for(;o<n.length;){let $=n[o];if("string"==typeof $)if(2&c){const ue=n[++o];m+="["+$+(ue.length>0?'="'+ue+'"':"")+"]"}else 8&c?m+="."+$:4&c&&(m+=" "+$);else""!==m&&!Sa($)&&(i+=yu(P,m),m=""),c=$,P=P||!Sa(c);o++}return""!==m&&(i+=yu(P,m)),i}function Fe(n){return to(()=>{var i;const o=Ao(n),c={...o,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:null!==(i=n.signals)&&void 0!==i&&i,data:n.data||{},encapsulation:n.encapsulation||Fc.Emulated,styles:n.styles||ps,_:null,schemas:n.schemas||null,tView:null,id:""};Rs(c);const m=n.dependencies;return c.directiveDefs=io(m,!1),c.pipeDefs=io(m,!0),c.id=function cl(n){let i=0;const o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const m of o)i=Math.imul(31,i)+m.charCodeAt(0)|0;return i+=2147483648,"c"+i}(c),c})}function Ee(n){return Cn(n)||Dr(n)}function ze(n){return null!==n}function Et(n){return to(()=>({type:n.type,bootstrap:n.bootstrap||ps,declarations:n.declarations||ps,imports:n.imports||ps,exports:n.exports||ps,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ot(n,i){if(null==n)return ra;const o={};for(const m in n)if(n.hasOwnProperty(m)){const P=n[m];let $,ue,we=gc.None;var c;Array.isArray(P)?(we=P[0],$=P[1],ue=null!==(c=P[2])&&void 0!==c?c:$):($=P,ue=P),i?(o[$]=we!==gc.None?[m,we]:m,i[$]=ue):o[$]=m}return o}function Nn(n){return to(()=>{const i=Ao(n);return Rs(i),i})}function ur(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Cn(n){return n[_l]||null}function Dr(n){return n[bd]||null}function pi(n){return n[du]||null}function Sr(n){const i=Cn(n)||Dr(n)||pi(n);return null!==i&&i.standalone}function Qr(n,i){const o=n[Fl]||null;if(!o&&!0===i)throw new Error(`Type ${po(n)} does not have '\u0275mod' property.`);return o}function Ao(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||ra,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ps,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ot(n.inputs,i),outputs:Ot(n.outputs),debugInfo:null}}function Rs(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function io(n,i){if(!n)return null;const o=i?pi:Ee;return()=>("function"==typeof n?n():n).map(c=>o(c)).filter(ze)}function ko(n){return{\u0275providers:n}}function Uc(...n){return{\u0275providers:Md(0,n),\u0275fromNgModule:!0}}function Md(n,...i){const o=[],c=new Set;let m;const P=$=>{o.push($)};return Ua(i,$=>{const ue=$;Gl(ue,P,[],c)&&(m||(m=[]),m.push(ue))}),void 0!==m&&jo(m,P),o}function jo(n,i){for(let o=0;o<n.length;o++){const{ngModule:c,providers:m}=n[o];Ls(m,P=>{i(P,c)})}}function Gl(n,i,o,c){if(!(n=ii(n)))return!1;let m=null,P=Ro(n);const $=!P&&Cn(n);if(P||$){if($&&!$.standalone)return!1;m=n}else{const we=n.ngModule;if(P=Ro(we),!P)return!1;m=we}const ue=c.has(m);if($){if(ue)return!1;if(c.add(m),$.dependencies){const we="function"==typeof $.dependencies?$.dependencies():$.dependencies;for(const Ge of we)Gl(Ge,i,o,c)}}else{if(!P)return!1;{if(null!=P.imports&&!ue){let Ge;c.add(m);try{Ua(P.imports,rt=>{Gl(rt,i,o,c)&&(Ge||(Ge=[]),Ge.push(rt))})}finally{}void 0!==Ge&&jo(Ge,i)}if(!ue){const Ge=xl(m)||(()=>new m);i({provide:m,useFactory:Ge,deps:ps},m),i({provide:vh,useValue:m,multi:!0},m),i({provide:To,useValue:()=>fi(m),multi:!0},m)}const we=P.providers;if(null!=we&&!ue){const Ge=n;Ls(we,rt=>{i(rt,Ge)})}}}return m!==n&&void 0!==n.providers}function Ls(n,i){for(let o of n)jl(o)&&(o=o.\u0275providers),Array.isArray(o)?Ls(o,i):i(o)}const nE=ws({provide:String,useValue:ws});function Wy(n){return null!==n&&"object"==typeof n&&nE in n}function vu(n){return"function"==typeof n}const Hf=new Jr(""),Bm={},_i={};let Vm;function Qa(){return void 0===Vm&&(Vm=new Za),Vm}class ul{}class ec extends ul{get destroyed(){return this._destroyed}constructor(i,o,c,m){super(),this.parent=o,this.source=c,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(i,$=>this.processProvider($)),this.records.set(yh,Hu(void 0,this)),m.has("environment")&&this.records.set(ul,Hu(void 0,this));const P=this.records.get(Hf);null!=P&&"string"==typeof P.value&&this.scopes.add(P.value),this.injectorDefTypes=new Set(this.get(vh,ps,fs.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=_e(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=Si(this),c=ha(void 0);try{return i()}finally{Si(o),ha(c)}}get(i,o=Se,c=fs.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(xd))return i[xd](this);c=Ws(c);const P=Si(this),$=ha(void 0);try{if(!(c&fs.SkipSelf)){let we=this.records.get(i);if(void 0===we){const Ge=function Xy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Jr}(i)&&ki(i);we=Ge&&this.injectableDefInScope(Ge)?Hu(el(i),Bm):null,this.records.set(i,we)}if(null!=we)return this.hydrate(i,we)}return(c&fs.Self?Qa():this.parent).get(i,o=c&fs.Optional&&o===Se?null:o)}catch(ue){if("NullInjectorError"===ue.name){if((ue[Zt]=ue[Zt]||[]).unshift(po(i)),P)throw ue;return function wa(n,i,o,c){const m=n[Zt];throw i[mt]&&m.unshift(i[mt]),n.message=function qa(n,i,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let m=po(i);if(Array.isArray(i))m=i.map(po).join(" -> ");else if("object"==typeof i){let P=[];for(let $ in i)if(i.hasOwnProperty($)){let ue=i[$];P.push($+":"+("string"==typeof ue?JSON.stringify(ue):po(ue)))}m=`{${P.join(", ")}}`}return`${o}${c?"("+c+")":""}[${m}]: ${n.replace(Rt,"\n  ")}`}("\n"+n.message,m,o,c),n.ngTokenPath=m,n[Zt]=null,n}(ue,i,"R3InjectorError",this.source)}throw ue}finally{ha($),Si(P)}}resolveInjectorInitializers(){const i=_e(null),o=Si(this),c=ha(void 0);try{const P=this.get(To,ps,fs.Self);for(const $ of P)$()}finally{Si(o),ha(c),_e(i)}}toString(){const i=[],o=this.records;for(const c of o.keys())i.push(po(c));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ir(205,!1)}processProvider(i){let o=vu(i=ii(i))?i:ii(i&&i.provide);const c=function Ea(n){return Wy(n)?Hu(void 0,n.useValue):Hu(Zi(n),Bm)}(i);if(!vu(i)&&!0===i.multi){let m=this.records.get(o);m||(m=Hu(void 0,Bm,!0),m.factory=()=>fa(m.multi),this.records.set(o,m)),o=i,m.multi.push(i)}this.records.set(o,c)}hydrate(i,o){const c=_e(null);try{return o.value===Bm&&(o.value=_i,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Wf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{_e(c)}}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ii(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function el(n){const i=ki(n),o=null!==i?i.factory:xl(n);if(null!==o)return o;if(n instanceof Jr)throw new Ir(204,!1);if(n instanceof Function)return function bh(n){if(n.length>0)throw new Ir(204,!1);const o=function Mo(n){return n&&(n[go]||n[Ps])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ir(204,!1)}function Zi(n,i,o){let c;if(vu(n)){const m=ii(n);return xl(m)||el(m)}if(Wy(n))c=()=>ii(n.useValue);else if(function Pb(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...fa(n.deps||[]));else if(function Rb(n){return!(!n||!n.useExisting)}(n))c=()=>fi(ii(n.useExisting));else{const m=ii(n&&(n.useClass||n.provide));if(!function Wu(n){return!!n.deps}(n))return xl(m)||el(m);c=()=>new m(...fa(n.deps))}return c}function Hu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Td(n,i){for(const o of n)Array.isArray(o)?Td(o,i):o&&jl(o)?Td(o.\u0275providers,i):i(o)}function xh(n,i){n instanceof ec&&n.assertNotDestroyed();const c=Si(n),m=ha(void 0);try{return i()}finally{Si(c),ha(m)}}function wh(){return void 0!==Ql()||null!=function zi(){return Cr}()}const xo=0,jr=1,Li=2,Zo=3,co=4,$o=5,ia=6,Xu=7,so=8,sa=9,Ma=10,Xi=11,qu=12,Kf=13,_u=14,Co=15,bc=16,oa=17,Va=18,Ku=19,Yu=20,zl=21,xc=22,Ra=23,Ti=25,Zu=1,El=7,Vc=9,Ho=10;var Id=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Id||{});function pa(n){return Array.isArray(n)&&"object"==typeof n[Zu]}function Ga(n){return Array.isArray(n)&&!0===n[Zu]}function Rd(n){return!!(4&n.flags)}function wc(n){return n.componentOffset>-1}function Sh(n){return!(1&~n.flags)}function tc(n){return!!n.template}function Pd(n){return!!(512&n[Li])}class Vb{constructor(i,o,c){this.previousValue=i,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function rv(n,i,o,c){null!==i?i.applyValueToInputSignal(i,c):n[o]=c}function Sc(){return wu}function wu(n){return n.type.prototype.ngOnChanges&&(n.setInput=ep),Qf}function Qf(){const n=iv(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===ra)n.previous=i;else for(let c in i)o[c]=i[c];n.current=null,this.ngOnChanges(i)}}function ep(n,i,o,c,m){const P=this.declaredInputs[c],$=iv(n)||function Gb(n,i){return n[tp]=i}(n,{previous:ra,current:null}),ue=$.current||($.current={}),we=$.previous,Ge=we[P];ue[P]=new Vb(Ge&&Ge.currentValue,o,we===ra),rv(n,i,m,o)}Sc.ngInherit=!0;const tp="__ngSimpleChanges__";function iv(n){return n[tp]||null}const Ec=function(n,i,o){};function _s(n){for(;Array.isArray(n);)n=n[xo];return n}function Od(n,i){return _s(i[n])}function nl(n,i){return _s(i[n.index])}function aa(n,i){return n.data[i]}function Ml(n,i){const o=i[n];return pa(o)?o:o[xo]}function Ym(n){return!(128&~n[Li])}function rl(n,i){return null==i?null:n[i]}function Ch(n){n[oa]=0}function Zm(n){1024&n[Li]||(n[Li]|=1024,Ym(n)&&Ih(n))}function Su(n){var i;return!!(9216&n[Li]||null!==(i=n[Ra])&&void 0!==i&&i.dirty)}function Dh(n){var i;null===(i=n[Ma].changeDetectionScheduler)||void 0===i||i.notify(7),64&n[Li]&&(n[Li]|=1024),Su(n)&&Ih(n)}function Ih(n){var i;null===(i=n[Ma].changeDetectionScheduler)||void 0===i||i.notify(0);let o=Tc(n);for(;null!==o&&!(8192&o[Li])&&(o[Li]|=8192,Ym(o));)o=Tc(o)}function nc(n,i){if(!(256&~n[Li]))throw new Ir(911,!1);null===n[zl]&&(n[zl]=[]),n[zl].push(i)}function Tc(n){const i=n[Zo];return Ga(i)?i[Zo]:i}const Wi={lFrame:up(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Eu=!1;function kd(){return Wi.bindingsEnabled}function Mu(){return null!==Wi.skipHydrationRootTNode}function fr(){return Wi.lFrame.lView}function bs(){return Wi.lFrame.tView}function eg(n){return Wi.lFrame.contextLView=n,n[so]}function rc(n){return Wi.lFrame.contextLView=null,n}function Xs(){let n=sv();for(;null!==n&&64===n.type;)n=n.parent;return n}function sv(){return Wi.lFrame.currentTNode}function hl(n,i){const o=Wi.lFrame;o.currentTNode=n,o.isParent=i}function Rh(){return Wi.lFrame.isParent}function Ph(){Wi.lFrame.isParent=!1}function av(){return Eu}function lv(n){Eu=n}function ic(){return Wi.lFrame.bindingIndex++}function zc(n){const i=Wi.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Wb(n,i){const o=Wi.lFrame;o.bindingIndex=o.bindingRootIndex=n,ng(i)}function ng(n){Wi.lFrame.currentDirectiveIndex=n}function lp(){return Wi.lFrame.currentQueryIndex}function Lh(n){Wi.lFrame.currentQueryIndex=n}function cp(n){const i=n[jr];return 2===i.type?i.declTNode:1===i.type?n[$o]:null}function dv(n,i,o){if(o&fs.SkipSelf){let m=i,P=n;for(;!(m=m.parent,null!==m||o&fs.Host||(m=cp(P),null===m||(P=P[_u],10&m.type))););if(null===m)return!1;i=m,n=P}const c=Wi.lFrame=Nh();return c.currentTNode=i,c.lView=n,!0}function jd(n){const i=Nh(),o=n[jr];Wi.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Nh(){const n=Wi.lFrame,i=null===n?null:n.child;return null===i?up(n):i}function up(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function dp(){const n=Wi.lFrame;return Wi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fd=dp;function kh(){const n=dp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ga(){return Wi.lFrame.selectedIndex}function Ac(n){Wi.lFrame.selectedIndex=n}function oo(){const n=Wi.lFrame;return aa(n.tView,n.selectedIndex)}let ig=!0;function sc(){return ig}function fl(n){ig=n}function fp(n,i){for(let Ge=i.directiveStart,rt=i.directiveEnd;Ge<rt;Ge++){const tn=n.data[Ge].type.prototype,{ngAfterContentInit:dn,ngAfterContentChecked:cn,ngAfterViewInit:Qn,ngAfterViewChecked:wr,ngOnDestroy:Or}=tn;var o,c,m,P,$,ue,we;dn&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-Ge,dn),cn&&((null!==(c=n.contentHooks)&&void 0!==c?c:n.contentHooks=[]).push(Ge,cn),(null!==(m=n.contentCheckHooks)&&void 0!==m?m:n.contentCheckHooks=[]).push(Ge,cn)),Qn&&(null!==(P=n.viewHooks)&&void 0!==P?P:n.viewHooks=[]).push(-Ge,Qn),wr&&((null!==($=n.viewHooks)&&void 0!==$?$:n.viewHooks=[]).push(Ge,wr),(null!==(ue=n.viewCheckHooks)&&void 0!==ue?ue:n.viewCheckHooks=[]).push(Ge,wr)),null!=Or&&(null!==(we=n.destroyHooks)&&void 0!==we?we:n.destroyHooks=[]).push(Ge,Or)}}function pp(n,i,o){fv(n,i,3,o)}function mp(n,i,o,c){(3&n[Li])===o&&fv(n,i,o,c)}function sg(n,i){let o=n[Li];(3&o)===i&&(o&=16383,o+=1,n[Li]=o)}function fv(n,i,o,c){const P=null!=c?c:-1,$=i.length-1;let ue=0;for(let we=void 0!==c?65535&n[oa]:0;we<$;we++)if("number"==typeof i[we+1]){if(ue=i[we],null!=c&&ue>=c)break}else i[we]<0&&(n[oa]+=65536),(ue<P||-1==P)&&(Kb(n,o,i,we),n[oa]=(4294901760&n[oa])+we+2),we++}function pv(n,i){Ec(4,n,i);const o=_e(null);try{i.call(n)}finally{_e(o),Ec(5,n,i)}}function Kb(n,i,o,c){const m=o[c]<0,P=o[c+1],ue=n[m?-o[c]:o[c]];m?n[Li]>>14<n[oa]>>16&&(3&n[Li])===i&&(n[Li]+=16384,pv(ue,P)):pv(ue,P)}const Bd=-1;class jh{constructor(i,o,c){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}const gp={};class Cc{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,c){c=Ws(c);const m=this.injector.get(i,gp,c);return m!==gp||o===gp?m:this.parentInjector.get(i,o,c)}}function Gd(n){return n!==Bd}function Uh(n){return 32767&n}function Vh(n,i){let o=function Bh(n){return n>>16}(n),c=i;for(;o>0;)c=c[_u],o--;return c}let yp=!0;function Tu(n){const i=yp;return yp=n,i}const vv=255,Dc=5;let _v=0;const oc={};function vp(n,i){const o=_p(n,i);if(-1!==o)return o;const c=i[jr];c.firstCreatePass&&(n.injectorIndex=i.length,lg(c.data,n),lg(i,null),lg(c.blueprint,null));const m=nd(n,i),P=n.injectorIndex;if(Gd(m)){const $=Uh(m),ue=Vh(m,i),we=ue[jr].data;for(let Ge=0;Ge<8;Ge++)i[P+Ge]=ue[$+Ge]|we[$+Ge]}return i[P+8]=m,P}function lg(n,i){n.push(0,0,0,0,0,0,0,0,i)}function _p(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function nd(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,m=i;for(;null!==m;){if(c=xv(m),null===c)return Bd;if(o++,m=m[_u],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return Bd}function rd(n,i,o){!function ag(n,i,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(mc)&&(c=o[mc]),null==c&&(c=o[mc]=_v++);const m=c&vv;i.data[n+(m>>Dc)]|=1<<m}(n,i,o)}function bp(n,i,o){if(o&fs.Optional||void 0!==n)return n;Uu()}function bv(n,i,o,c){if(o&fs.Optional&&void 0===c&&(c=null),!(o&(fs.Self|fs.Host))){const m=n[sa],P=ha(void 0);try{return m?m.get(i,c,o&fs.Optional):no(i,c,o&fs.Optional)}finally{ha(P)}}return bp(c,0,o)}function Gh(n,i,o,c=fs.Default,m){if(null!==n){if(2048&i[Li]&&!(c&fs.Self)){const $=function Qb(n,i,o,c,m){let P=n,$=i;for(;null!==P&&null!==$&&2048&$[Li]&&!(512&$[Li]);){const ue=xp(P,$,o,c|fs.Self,oc);if(ue!==oc)return ue;let we=P.parent;if(!we){const Ge=$[Yu];if(Ge){const rt=Ge.get(o,oc,c);if(rt!==oc)return rt}we=xv($),$=$[_u]}P=we}return m}(n,i,o,c,oc);if($!==oc)return $}const P=xp(n,i,o,c,oc);if(P!==oc)return P}return bv(i,o,c,m)}function xp(n,i,o,c,m){const P=function Jb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(mc)?n[mc]:void 0;return"number"==typeof i?i>=0?i&vv:ac:i}(o);if("function"==typeof P){if(!dv(i,n,c))return c&fs.Host?bp(m,0,c):bv(i,o,c,m);try{let $;if($=P(c),null!=$||c&fs.Optional)return $;Uu()}finally{Fd()}}else if("number"==typeof P){let $=null,ue=_p(n,i),we=Bd,Ge=c&fs.Host?i[Co][$o]:null;for((-1===ue||c&fs.SkipSelf)&&(we=-1===ue?nd(n,i):i[ue+8],we!==Bd&&hg(c,!1)?($=i[jr],ue=Uh(we),i=Vh(we,i)):ue=-1);-1!==ue;){const rt=i[jr];if(dg(P,ue,rt.data)){const gt=ug(ue,i,o,$,c,Ge);if(gt!==oc)return gt}we=i[ue+8],we!==Bd&&hg(c,i[jr].data[ue+8]===Ge)&&dg(P,ue,i)?($=rt,ue=Uh(we),i=Vh(we,i)):ue=-1}}return m}function ug(n,i,o,c,m,P){const $=i[jr],ue=$.data[n+8],rt=zd(ue,$,o,null==c?wc(ue)&&yp:c!=$&&!!(3&ue.type),m&fs.Host&&P===ue);return null!==rt?$c(i,$,rt,ue):oc}function zd(n,i,o,c,m){const P=n.providerIndexes,$=i.data,ue=1048575&P,we=n.directiveStart,rt=P>>20,tn=m?ue+rt:n.directiveEnd;for(let dn=c?ue:ue+rt;dn<tn;dn++){const cn=$[dn];if(dn<we&&o===cn||dn>=we&&cn.type===o)return dn}if(m){const dn=$[we];if(dn&&tc(dn)&&dn.type===o)return we}return null}function $c(n,i,o,c){let m=n[o];const P=i.data;if(function Yb(n){return n instanceof jh}(m)){const $=m;$.resolving&&function Bl(n,i){throw i&&i.join(" > "),new Ir(-200,n)}(function Os(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Hi(n)}(P[o]));const ue=Tu($.canSeeViewProviders);$.resolving=!0;const Ge=$.injectImpl?ha($.injectImpl):null;dv(n,c,fs.Default);try{m=n[o]=$.factory(void 0,P,n,c),i.firstCreatePass&&o>=c.directiveStart&&function qb(n,i,o){const{ngOnChanges:c,ngOnInit:m,ngDoCheck:P}=i.type.prototype;if(c){var $,ue;const gt=wu(i);(null!==($=o.preOrderHooks)&&void 0!==$?$:o.preOrderHooks=[]).push(n,gt),(null!==(ue=o.preOrderCheckHooks)&&void 0!==ue?ue:o.preOrderCheckHooks=[]).push(n,gt)}var we,Ge,rt;m&&(null!==(we=o.preOrderHooks)&&void 0!==we?we:o.preOrderHooks=[]).push(0-n,m),P&&((null!==(Ge=o.preOrderHooks)&&void 0!==Ge?Ge:o.preOrderHooks=[]).push(n,P),(null!==(rt=o.preOrderCheckHooks)&&void 0!==rt?rt:o.preOrderCheckHooks=[]).push(n,P))}(o,P[o],i)}finally{null!==Ge&&ha(Ge),Tu(ue),$.resolving=!1,Fd()}}return m}function dg(n,i,o){return!!(o[i+(n>>Dc)]&1<<n)}function hg(n,i){return!(n&fs.Self||n&fs.Host&&i)}class Fo{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,c){return Gh(this._tNode,this._lView,i,Ws(c),o)}}function ac(){return new Fo(Xs(),fr())}function fg(n){return to(()=>{const i=n.prototype.constructor,o=i[Ul]||pg(i),c=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==c;){const P=m[Ul]||pg(m);if(P&&P!==o)return P;m=Object.getPrototypeOf(m)}return P=>new P})}function pg(n){return Fa(n)?()=>{const i=pg(ii(n));return i&&i()}:xl(n)}function xv(n){const i=n[jr],o=i.type;return 2===o?i.declTNode:1===o?n[$o]:null}function zh(n){return function cg(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const c=o.length;let m=0;for(;m<c;){const P=o[m];if(Gu(P))break;if(0===P)m+=2;else if("number"==typeof P)for(m++;m<c&&"string"==typeof o[m];)m++;else{if(P===i)return o[m+1];m+=2}}}return null}(Xs(),n)}function Tv(n,i=null,o=null,c){const m=lc(n,i,o,c);return m.resolveInjectorInitializers(),m}function lc(n,i=null,o=null,c,m=new Set){const P=[o||ps,Uc(n)];return c=c||("object"==typeof n?void 0:po(n)),new ec(P,i||Qa(),c||null,m)}class Uo{static create(i,o){if(Array.isArray(i))return Tv({name:""},o,i,"");{var c;const m=null!==(c=i.name)&&void 0!==c?c:"";return Tv({name:m},i.parent,i.providers,m)}}}(Vi=Uo).THROW_IF_NOT_FOUND=Se,Vi.NULL=new Za,Vi.\u0275prov=Gr({token:Vi,providedIn:"any",factory:()=>fi(yh)}),Vi.__NG_ELEMENT_ID__=-1,new Jr("").__NG_ELEMENT_ID__=n=>{const i=Xs();if(null===i)throw new Ir(204,!1);if(2&i.type)return i.value;if(n&fs.Optional)return null;throw new Ir(204,!1)};function Au(n){return n.ngOriginalError}let Hc=(()=>{var n;class i{}return(n=i).__NG_ELEMENT_ID__=o1,n.__NG_ENV_ID__=o=>o,i})();class s1 extends Hc{constructor(i){super(),this._lView=i}onDestroy(i){return nc(this._lView,i),()=>function Nd(n,i){if(null===n[zl])return;const o=n[zl].indexOf(i);-1!==o&&n[zl].splice(o,1)}(this._lView,i)}}function o1(){return new s1(fr())}let pl=(()=>{var n;class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ht.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(n=i).\u0275prov=Gr({token:n,providedIn:"root",factory:()=>new n}),i})();const Oo=class l1 extends Lt.B{constructor(i=!1){var o,c;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=i,wh()&&(this.destroyRef=null!==(o=Ur(Hc,{optional:!0}))&&void 0!==o?o:void 0,this.pendingTasks=null!==(c=Ur(pl,{optional:!0}))&&void 0!==c?c:void 0)}emit(i){const o=_e(null);try{super.next(i)}finally{_e(o)}}subscribe(i,o,c){let m=i,P=o||(()=>null),$=c;if(i&&"object"==typeof i){var ue,we,Ge;const gt=i;m=null===(ue=gt.next)||void 0===ue?void 0:ue.bind(gt),P=null===(we=gt.error)||void 0===we?void 0:we.bind(gt),$=null===(Ge=gt.complete)||void 0===Ge?void 0:Ge.bind(gt)}this.__isAsync&&(P=this.wrapInTimeout(P),m&&(m=this.wrapInTimeout(m)),$&&($=this.wrapInTimeout($)));const rt=super.subscribe({next:m,error:P,complete:$});return i instanceof kt.yU&&i.add(rt),rt}wrapInTimeout(i){return o=>{var c;const m=null===(c=this.pendingTasks)||void 0===c?void 0:c.add();setTimeout(()=>{var P;i(o),void 0!==m&&(null===(P=this.pendingTasks)||void 0===P||P.remove(m))})}}};function $l(...n){}function Av(n){let i,o;function c(){n=$l;try{void 0!==o&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(o),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{n(),c()}),"function"==typeof requestAnimationFrame&&(o=requestAnimationFrame(()=>{n(),c()})),()=>c()}function Tl(n){return queueMicrotask(()=>n()),()=>{n=$l}}class Lo{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oo(!1),this.onMicrotaskEmpty=new Oo(!1),this.onStable=new Oo(!1),this.onError=new Oo(!1),typeof Zone>"u")throw new Ir(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!c&&o,m.shouldCoalesceRunChangeDetection=c,m.callbackScheduled=!1,function c1(n){const i=()=>{!function uE(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{Av(()=>{n.callbackScheduled=!1,Wc(n),n.isCheckStableRunning=!0,Cv(n),n.isCheckStableRunning=!1})}),Wc(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,m,P,$,ue)=>{if(function Iv(n){return Rv(n,"__ignore_ng_zone__")}(ue))return o.invokeTask(m,P,$,ue);try{return Dv(n),o.invokeTask(m,P,$,ue)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||n.shouldCoalesceRunChangeDetection)&&i(),Sp(n)}},onInvoke:(o,c,m,P,$,ue,we)=>{try{return Dv(n),o.invoke(m,P,$,ue,we)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function _g(n){return Rv(n,"__scheduler_tick__")}(ue)&&i(),Sp(n)}},onHasTask:(o,c,m,P)=>{o.hasTask(m,P),c===m&&("microTask"==P.change?(n._hasPendingMicrotasks=P.microTask,Wc(n),Cv(n)):"macroTask"==P.change&&(n.hasPendingMacrotasks=P.macroTask))},onHandleError:(o,c,m,P)=>(o.handleError(m,P),n.runOutsideAngular(()=>n.onError.emit(P)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lo.isInAngularZone())throw new Ir(909,!1)}static assertNotInAngularZone(){if(Lo.isInAngularZone())throw new Ir(909,!1)}run(i,o,c){return this._inner.run(i,o,c)}runTask(i,o,c,m){const P=this._inner,$=P.scheduleEventTask("NgZoneEvent: "+m,i,wp,$l,$l);try{return P.runTask($,o,c)}finally{P.cancelTask($)}}runGuarded(i,o,c){return this._inner.runGuarded(i,o,c)}runOutsideAngular(i){return this._outer.run(i)}}const wp={};function Cv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wc(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Dv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Sp(n){n._nesting--,Cv(n)}class Ep{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oo,this.onMicrotaskEmpty=new Oo,this.onStable=new Oo,this.onError=new Oo}run(i,o,c){return i.apply(o,c)}runGuarded(i,o,c){return i.apply(o,c)}runOutsideAngular(i){return i()}runTask(i,o,c,m){return i.apply(o,c)}}function Rv(n,i){var o;return!(!Array.isArray(n)||1!==n.length)&&!0===(null===(o=n[0])||void 0===o||null===(o=o.data)||void 0===o?void 0:o[i])}class cc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Au(i);for(;o&&Au(o);)o=Au(o);return o||null}}const Wh=new Jr("",{providedIn:"root",factory:()=>{const n=Ur(Lo),i=Ur(cc);return o=>n.runOutsideAngular(()=>i.handleError(o))}});function Lv(){return Xd(Xs(),fr())}function Xd(n,i){return new Xh(nl(n,i))}let Xh=(()=>{class i{constructor(c){this.nativeElement=c}}return i.__NG_ELEMENT_ID__=Lv,i})();function Nv(n){return n instanceof Xh?n.nativeElement:n}function xg(){return this._results[Symbol.iterator]()}class Xc{get changes(){var i;return null!==(i=this._changes)&&void 0!==i?i:this._changes=new Oo}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=Xc.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=xg)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){this.dirty=!1;const c=function zs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function ph(n,i,o){if(n.length!==i.length)return!1;for(let c=0;c<n.length;c++){let m=n[c],P=i[c];if(o&&(m=o(m),P=o(P)),P!==m)return!1}return!0}(this._results,c,o))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){var i;this.dirty=!0,null===(i=this._onDirty)||void 0===i||i.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Kh(n){return!(128&~n.flags)}const wg=new Map;let Tp=0;const Zh="__ngContext__";function za(n,i){pa(i)?(n[Zh]=i[Ku],function fE(n){wg.set(n[Ku],n)}(i)):n[Zh]=i}function Vv(n){return zv(n[qu])}function Gv(n){return zv(n[co])}function zv(n){for(;null!==n&&!Ga(n);)n=n[co];return n}let Cp;function yE(n){Cp=n}const Kd=new Jr("",{providedIn:"root",factory:()=>Yv}),Yv="ng",E1=new Jr(""),Dp=new Jr("",{providedIn:"platform",factory:()=>"unknown"}),Zv=new Jr("",{providedIn:"root",factory:()=>{var n;return(null===(n=function qc(){if(void 0!==Cp)return Cp;if(typeof document<"u")return document;throw new Ir(210,!1)}().body)||void 0===n||null===(n=n.querySelector("[ngCspNonce]"))||void 0===n?void 0:n.getAttribute("ngCspNonce"))||null}});let C1=()=>null;function Jv(n,i,o=!1){return C1(n,i,o)}const o0=new Jr("",{providedIn:"root",factory:()=>!1});let Bp,Vp;function Zd(n){var i;return(null===(i=function Lg(){if(void 0===Bp&&(Bp=null,lo.trustedTypes))try{Bp=lo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bp}())||void 0===i?void 0:i.createHTML(n))||n}function d0(n){var i;return(null===(i=function Ng(){if(void 0===Vp&&(Vp=null,lo.trustedTypes))try{Vp=lo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vp}())||void 0===i?void 0:i.createScriptURL(n))||n}class dd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ys})`}}class L1 extends dd{getTypeName(){return"HTML"}}class N1 extends dd{getTypeName(){return"Style"}}class k1 extends dd{getTypeName(){return"Script"}}class j1 extends dd{getTypeName(){return"URL"}}class F1 extends dd{getTypeName(){return"ResourceURL"}}function Kc(n){return n instanceof dd?n.changingThisBreaksApplicationSecurity:n}function Jd(n,i){const o=function U1(n){return n instanceof dd&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Ys})`)}return o===i}function B1(n){return new L1(n)}function V1(n){return new N1(n)}function G1(n){return new k1(n)}function z1(n){return new j1(n)}function $1(n){return new F1(n)}class H1{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Zd(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class W1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=Zd(i),o}}const q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gp(n){return(n=String(n)).match(q1)?n:"unsafe:"+n}function Yc(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function rf(...n){const i={};for(const o of n)for(const c in o)o.hasOwnProperty(c)&&(i[c]=!0);return i}const f0=Yc("area,br,col,hr,img,wbr"),p0=Yc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m0=Yc("rp,rt"),kg=rf(f0,rf(p0,Yc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rf(m0,Yc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rf(m0,p0)),jg=Yc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g0=rf(jg,Yc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K1=Yc("script,style,template");class Y1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,c=!0,m=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)m.push(o),o=Q1(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let P=J1(o);if(P){o=P;break}o=m.pop()}return this.buf.join("")}startElement(i){const o=y0(i).toLowerCase();if(!kg.hasOwnProperty(o))return this.sanitizedSomething=!0,!K1.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=i.attributes;for(let m=0;m<c.length;m++){const P=c.item(m),$=P.name,ue=$.toLowerCase();if(!g0.hasOwnProperty(ue)){this.sanitizedSomething=!0;continue}let we=P.value;jg[ue]&&(we=Gp(we)),this.buf.push(" ",$,'="',_0(we),'"')}return this.buf.push(">"),!0}endElement(i){const o=y0(i).toLowerCase();kg.hasOwnProperty(o)&&!f0.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(_0(i))}}function J1(n){const i=n.nextSibling;if(i&&n!==i.previousSibling)throw v0(i);return i}function Q1(n){const i=n.firstChild;if(i&&function Z1(n,i){return(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,i))throw v0(i);return i}function y0(n){const i=n.nodeName;return"string"==typeof i?i:"FORM"}function v0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ex=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tx=/([^\#-~ |!])/g;function _0(n){return n.replace(/&/g,"&amp;").replace(ex,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(tx,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zp;function b0(n,i){let o=null;try{zp=zp||function h0(n){const i=new W1(n);return function X1(){try{return!!(new window.DOMParser).parseFromString(Zd(""),"text/html")}catch{return!1}}()?new H1(i):i}(n);let c=i?String(i):"";o=zp.getInertBodyElement(c);let m=5,P=c;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,c=P,P=o.innerHTML,o=zp.getInertBodyElement(c)}while(c!==P);return Zd((new Y1).sanitizeChildren(Fg(o)||o))}finally{if(o){const c=Fg(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Fg(n){return"content"in n&&function nx(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hd||{});function Ug(n){const i=sf();return i?i.sanitize(hd.URL,n)||"":Jd(n,"URL")?Kc(n):Gp(Hi(n))}function x0(n){const i=sf();if(i)return d0(i.sanitize(hd.RESOURCE_URL,n)||"");if(Jd(n,"ResourceURL"))return d0(Kc(n));throw new Ir(904,!1)}function w0(n,i,o){return function lx(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?x0:Ug}(i,o)(n)}function sf(){const n=fr();return n&&n[Ma].sanitizer}const cx=/^>|^->|<!--|-->|--!>|<!-$/g,ux=/(<|>)/g,dx="\u200b$1\u200b";function Wl(n){return n instanceof Function?n():n}var Gg=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gg||{});let A0;function C0(n,i){return A0(n,i)}function lf(n,i,o,c,m){if(null!=c){let P,$=!1;Ga(c)?P=c:pa(c)&&($=!0,c=c[xo]);const ue=_s(c);0===n&&null!==o?null==m?cf(i,o,ue):$a(i,o,ue,m||null,!0):1===n&&null!==o?$a(i,o,ue,m||null,!0):2===n?function fd(n,i,o){const c=Xp(n,i);c&&function Ax(n,i,o,c){n.removeChild(i,o,c)}(n,c,i,o)}(i,ue,$):3===n&&i.destroyNode(ue),null!=P&&function Dx(n,i,o,c,m){const P=o[El];P!==_s(o)&&lf(i,n,c,P,m);for(let ue=Ho;ue<o.length;ue++){const we=o[ue];Pc(we[jr],we,n,i,c,P)}}(i,n,P,o,m)}}function I0(n,i){return n.createComment(function S0(n){return n.replace(cx,i=>i.replace(ux,dx))}(i))}function zg(n,i,o){return n.createElement(i,o)}function Mx(n,i){var o;null===(o=i[Ma].changeDetectionScheduler)||void 0===o||o.notify(8),Pc(n,i,i[Xi],2,null,null)}function Tx(n,i){const o=n[Vc],c=i[Zo];(pa(c)||i[Co]!==c[Zo][Co])&&(n[Li]|=Id.HasTransplantedViews),null===o?n[Vc]=[i]:o.push(i)}function R0(n,i){const o=n[Vc],c=o.indexOf(i);o.splice(c,1)}function Wp(n,i){if(n.length<=Ho)return;const o=Ho+i,c=n[o];if(c){const m=c[bc];null!==m&&m!==n&&R0(m,c),i>0&&(n[o-1][co]=c[co]);const P=kc(n,Ho+i);!function BE(n,i){Mx(n,i),i[xo]=null,i[$o]=null}(c[jr],c);const $=P[Va];null!==$&&$.detachView(P[jr]),c[Zo]=null,c[co]=null,c[Li]&=-129}return c}function $g(n,i){if(!(256&i[Li])){const o=i[Xi];o.destroyNode&&Pc(n,i,o,3,null,null),function GE(n){let i=n[qu];if(!i)return P0(n[jr],n);for(;i;){let o=null;if(pa(i))o=i[qu];else{const c=i[Ho];c&&(o=c)}if(!o){for(;i&&!i[co]&&i!==n;)pa(i)&&P0(i[jr],i),i=i[Zo];null===i&&(i=n),pa(i)&&P0(i[jr],i),o=i&&i[co]}i=o}}(i)}}function P0(n,i){if(256&i[Li])return;const o=_e(null);try{i[Li]&=-129,i[Li]|=256,i[Ra]&&S(i[Ra]),function HE(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const m=i[o[c]];if(!(m instanceof jh)){const P=o[c+1];if(Array.isArray(P))for(let $=0;$<P.length;$+=2){const ue=m[P[$]],we=P[$+1];Ec(4,ue,we);try{we.call(ue)}finally{Ec(5,ue,we)}}else{Ec(4,m,P);try{P.call(m)}finally{Ec(5,m,P)}}}}}(n,i),function $E(n,i){const o=n.cleanup,c=i[Xu];if(null!==o)for(let P=0;P<o.length-1;P+=2)if("string"==typeof o[P]){const $=o[P+3];$>=0?c[$]():c[-$].unsubscribe(),P+=2}else o[P].call(c[o[P+1]]);null!==c&&(i[Xu]=null);const m=i[zl];if(null!==m){i[zl]=null;for(let P=0;P<m.length;P++)(0,m[P])()}}(n,i),1===i[jr].type&&i[Xi].destroy();const c=i[bc];if(null!==c&&Ga(i[Zo])){c!==i[Zo]&&R0(c,i);const m=i[Va];null!==m&&m.detachView(n)}!function Fv(n){wg.delete(n[Ku])}(i)}finally{_e(o)}}function os(n,i,o){return function ti(n,i,o){let c=i;for(;null!==c&&168&c.type;)c=(i=c).parent;if(null===c)return o[xo];{const{componentOffset:m}=c;if(m>-1){const{encapsulation:P}=n.data[c.directiveStart+m];if(P===Fc.None||P===Fc.Emulated)return null}return nl(c,o)}}(n,i.parent,o)}function $a(n,i,o,c,m){n.insertBefore(i,o,c,m)}function cf(n,i,o){n.appendChild(i,o)}function Ru(n,i,o,c,m){null!==c?$a(n,i,o,c,m):cf(n,i,o)}function Xp(n,i){return n.parentNode(i)}function O0(n,i,o){return N0(n,i,o)}let Pu,N0=function L0(n,i,o){return 40&n.type?nl(n,o):null};function Rc(n,i,o,c){const m=os(n,c,i),P=i[Xi],ue=O0(c.parent||i[$o],c,i);if(null!=m)if(Array.isArray(o))for(let we=0;we<o.length;we++)Ru(P,m,o[we],ue,!1);else Ru(P,m,o,ue,!1);void 0!==Pu&&Pu(P,c,i,o,m)}function Zc(n,i){if(null!==i){const o=i.type;if(3&o)return nl(i,n);if(4&o)return uf(-1,n[i.index]);if(8&o){const c=i.child;if(null!==c)return Zc(n,c);{const m=n[i.index];return Ga(m)?uf(-1,m):_s(m)}}if(128&o)return Zc(n,i.next);if(32&o)return C0(i,n)()||_s(n[i.index]);{const c=Wg(n,i);return null!==c?Array.isArray(c)?c[0]:Zc(Tc(n[Co]),c):Zc(n,i.next)}}return null}function Wg(n,i){return null!==i?n[Co][$o].projection[i.projection]:null}function uf(n,i){const o=Ho+n+1;if(o<i.length){const c=i[o],m=c[jr].firstChild;if(null!==m)return Zc(c,m)}return i[El]}function df(n,i,o,c,m,P,$){for(;null!=o;){if(128===o.type){o=o.next;continue}const ue=c[o.index],we=o.type;if($&&0===i&&(ue&&za(_s(ue),c),o.flags|=2),32&~o.flags)if(8&we)df(n,i,o.child,c,m,P,!1),lf(i,n,m,ue,P);else if(32&we){const Ge=C0(o,c);let rt;for(;rt=Ge();)lf(i,n,m,rt,P);lf(i,n,m,ue,P)}else 16&we?Xg(n,i,c,o,m,P):lf(i,n,m,ue,P);o=$?o.projectionNext:o.next}}function Pc(n,i,o,c,m,P){df(o,c,n.firstChild,i,m,P,!1)}function Xg(n,i,o,c,m,P){const $=o[Co],we=$[$o].projection[c.projection];if(Array.isArray(we))for(let Ge=0;Ge<we.length;Ge++)lf(i,n,m,we[Ge],P);else{let Ge=we;const rt=$[Zo];Kh(c)&&(Ge.flags|=128),df(n,i,Ge,rt,m,P,!0)}}function qg(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function hf(n,i,o){const{mergedAttrs:c,classes:m,styles:P}=o;null!==c&&wl(n,i,c),null!==m&&qg(n,i,m),null!==P&&function Ix(n,i,o){n.setAttribute(i,"style",o)}(n,i,P)}const Ji={};function Kg(n=1){Yg(bs(),fr(),ga()+n,!1)}function Yg(n,i,o,c){if(!c)if(3&~i[Li]){const P=n.preOrderHooks;null!==P&&mp(i,P,0,o)}else{const P=n.preOrderCheckHooks;null!==P&&pp(i,P,o)}Ac(o)}function Ou(n,i=fs.Default){const o=fr();return null===o?fi(n,i):Gh(Xs(),o,ii(n),i)}function j0(){throw new Error("invalid")}function F0(n,i,o,c,m,P){const $=_e(null);try{let ue=null;m&gc.SignalBased&&(ue=i[c][a]),null!==ue&&void 0!==ue.transformFn&&(P=ue.transformFn(P)),m&gc.HasDecoratorInputTransform&&(P=n.inputTransforms[c].call(i,P)),null!==n.setInput?n.setInput(i,ue,P,o,c):rv(i,ue,c,P)}finally{_e($)}}function Kp(n,i,o,c,m,P,$,ue,we,Ge,rt){const gt=i.blueprint.slice();return gt[xo]=m,gt[Li]=204|c,(null!==Ge||n&&2048&n[Li])&&(gt[Li]|=2048),Ch(gt),gt[Zo]=gt[_u]=n,gt[so]=o,gt[Ma]=$||n&&n[Ma],gt[Xi]=ue||n&&n[Xi],gt[sa]=we||n&&n[sa]||null,gt[$o]=P,gt[Ku]=function jv(){return Tp++}(),gt[ia]=rt,gt[Yu]=Ge,gt[Co]=2==i.type?n[Co]:gt,gt}function pd(n,i,o,c,m){let P=n.data[i];if(null===P)P=function Zg(n,i,o,c,m){const P=sv(),$=Rh(),we=n.data[i]=function em(n,i,o,c,m,P){let $=i?i.injectorIndex:-1,ue=0;return Mu()&&(ue|=128),{type:o,index:c,insertBeforeIndex:null,injectorIndex:$,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:ue,providerIndexes:0,value:m,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,$?P:P&&P.parent,o,i,c,m);return null===n.firstChild&&(n.firstChild=we),null!==P&&($?null==P.child&&null!==we.parent&&(P.child=we):null===P.next&&(P.next=we,we.prev=P)),we}(n,i,o,c,m),function Oh(){return Wi.lFrame.inI18n}()&&(P.flags|=32);else if(64&P.type){P.type=o,P.value=c,P.attrs=m;const $=function ed(){const n=Wi.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();P.injectorIndex=null===$?-1:$.injectorIndex}return hl(P,!0),P}function ff(n,i,o,c){if(0===o)return-1;const m=i.length;for(let P=0;P<o;P++)i.push(c),n.blueprint.push(c),n.data.push(null);return m}function Jg(n,i,o,c,m){const P=ga(),$=2&c;try{Ac(-1),$&&i.length>Ti&&Yg(n,i,Ti,!1),Ec($?2:0,m),o(c,m)}finally{Ac(P),Ec($?3:1,m)}}function Yp(n,i,o){if(Rd(i)){const c=_e(null);try{const P=i.directiveEnd;for(let $=i.directiveStart;$<P;$++){const ue=n.data[$];ue.contentQueries&&ue.contentQueries(1,o[$],$)}}finally{_e(c)}}}function Zp(n,i,o){kd()&&(function Fx(n,i,o,c){const m=o.directiveStart,P=o.directiveEnd;wc(o)&&function Hx(n,i,o){const c=nl(i,n),m=Qg(o);let $=16;o.signals?$=4096:o.onPush&&($=64);const ue=tm(n,Kp(n,m,null,$,c,i,null,n[Ma].rendererFactory.createRenderer(c,o),null,null,null));n[i.index]=ue}(i,o,n.data[m+o.componentOffset]),n.firstCreatePass||vp(o,i),za(c,i);const $=o.initialInputs;for(let ue=m;ue<P;ue++){const we=n.data[ue],Ge=$c(i,n,ue,o);za(Ge,i),null!==$&&Wx(0,ue-m,Ge,we,0,$),tc(we)&&(Ml(o.index,i)[so]=$c(i,n,ue,o))}}(n,i,o,nl(o,i)),!(64&~o.flags)&&H0(n,i,o))}function Jp(n,i,o=nl){const c=i.localNames;if(null!==c){let m=i.index+1;for(let P=0;P<c.length;P+=2){const $=c[P+1],ue=-1===$?o(i,n):n[$];n[m++]=ue}}}function Qg(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Qp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function Qp(n,i,o,c,m,P,$,ue,we,Ge,rt){const gt=Ti+c,tn=gt+m,dn=function U0(n,i){const o=[];for(let c=0;c<i;c++)o.push(c<n?null:Ji);return o}(gt,tn),cn="function"==typeof Ge?Ge():Ge;return dn[jr]={type:n,blueprint:dn,template:o,queries:null,viewQuery:ue,declTNode:i,data:dn.slice().fill(null,gt),bindingStartIndex:gt,expandoStartIndex:tn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof $?$():$,firstChild:null,schemas:we,consts:cn,incompleteFirstPass:!1,ssrId:rt}}let ey=()=>null;function G0(n,i,o,c,m){for(let $ in i){var P;if(!i.hasOwnProperty($))continue;const ue=i[$];if(void 0===ue)continue;null!==(P=c)&&void 0!==P||(c={});let we,Ge=gc.None;Array.isArray(ue)?(we=ue[0],Ge=ue[1]):we=ue;let rt=$;if(null!==m){if(!m.hasOwnProperty($))continue;rt=m[$]}0===n?z0(c,o,rt,we,Ge):z0(c,o,rt,we)}return c}function z0(n,i,o,c,m){let P;n.hasOwnProperty(o)?(P=n[o]).push(i,c):P=n[o]=[i,c],void 0!==m&&P.push(m)}function ml(n,i,o,c,m,P,$,ue){const we=nl(i,o);let rt,Ge=i.inputs;!ue&&null!=Ge&&(rt=Ge[c])?(sy(n,o,rt,c,m),wc(i)&&function Lx(n,i){const o=Ml(i,n);16&o[Li]||(o[Li]|=64)}(o,i.index)):3&i.type&&(c=function Ox(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),m=null!=$?$(m,i.value||"",c):m,P.setProperty(we,c,m))}function ty(n,i,o,c){if(kd()){const m=null===c?null:{"":-1},P=function Bx(n,i){const o=n.directiveRegistry;let c=null,m=null;if(o)for(let $=0;$<o.length;$++){const ue=o[$];if(Qs(i,ue.selectors,!1))if(c||(c=[]),tc(ue))if(null!==ue.findHostDirectiveDefs){const we=[];m=m||new Map,ue.findHostDirectiveDefs(ue,we,m),c.unshift(...we,ue),ny(n,i,we.length)}else c.unshift(ue),ny(n,i,0);else{var P;m=m||new Map,null===(P=ue.findHostDirectiveDefs)||void 0===P||P.call(ue,ue,c,m),c.push(ue)}}return null===c?null:[c,m]}(n,o);let $,ue;null===P?$=ue=null:[$,ue]=P,null!==$&&$0(n,i,o,$,m,ue),m&&function Vx(n,i,o){if(i){const c=n.localNames=[];for(let m=0;m<i.length;m+=2){const P=o[i[m+1]];if(null==P)throw new Ir(-301,!1);c.push(i[m],P)}}}(o,c,m)}o.mergedAttrs=gu(o.mergedAttrs,o.attrs)}function $0(n,i,o,c,m,P){for(let gt=0;gt<c.length;gt++)rd(vp(o,i),n,c[gt].type);!function zx(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,c.length);for(let gt=0;gt<c.length;gt++){const tn=c[gt];tn.providersResolver&&tn.providersResolver(tn)}let $=!1,ue=!1,we=ff(n,i,c.length,null);for(let gt=0;gt<c.length;gt++){const tn=c[gt];o.mergedAttrs=gu(o.mergedAttrs,tn.hostAttrs),$x(n,o,i,we,tn),Gx(we,tn,m),null!==tn.contentQueries&&(o.flags|=4),(null!==tn.hostBindings||null!==tn.hostAttrs||0!==tn.hostVars)&&(o.flags|=64);const dn=tn.type.prototype;var Ge,rt;!$&&(dn.ngOnChanges||dn.ngOnInit||dn.ngDoCheck)&&((null!==(Ge=n.preOrderHooks)&&void 0!==Ge?Ge:n.preOrderHooks=[]).push(o.index),$=!0),ue||!dn.ngOnChanges&&!dn.ngDoCheck||((null!==(rt=n.preOrderCheckHooks)&&void 0!==rt?rt:n.preOrderCheckHooks=[]).push(o.index),ue=!0),we++}!function Px(n,i,o){const m=i.directiveEnd,P=n.data,$=i.attrs,ue=[];let we=null,Ge=null;for(let rt=i.directiveStart;rt<m;rt++){const gt=P[rt],tn=o?o.get(gt):null,cn=tn?tn.outputs:null;we=G0(0,gt.inputs,rt,we,tn?tn.inputs:null),Ge=G0(1,gt.outputs,rt,Ge,cn);const Qn=null===we||null===$||Sd(i)?null:Xx(we,rt,$);ue.push(Qn)}null!==we&&(we.hasOwnProperty("class")&&(i.flags|=8),we.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=ue,i.inputs=we,i.outputs=Ge}(n,o,P)}function H0(n,i,o){const c=o.directiveStart,m=o.directiveEnd,P=o.index,$=function uv(){return Wi.lFrame.currentDirectiveIndex}();try{Ac(P);for(let ue=c;ue<m;ue++){const we=n.data[ue],Ge=i[ue];ng(ue),(null!==we.hostBindings||0!==we.hostVars||null!==we.hostAttrs)&&Ux(we,Ge)}}finally{Ac(-1),ng($)}}function Ux(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ny(n,i,o){var c;i.componentOffset=o,(null!==(c=n.components)&&void 0!==c?c:n.components=[]).push(i.index)}function Gx(n,i,o){if(o){if(i.exportAs)for(let c=0;c<i.exportAs.length;c++)o[i.exportAs[c]]=n;tc(i)&&(o[""]=n)}}function $x(n,i,o,c,m){n.data[c]=m;const P=m.factory||(m.factory=xl(m.type)),$=new jh(P,tc(m),Ou);n.blueprint[c]=$,o[c]=$,function kx(n,i,o,c,m){const P=m.hostBindings;if(P){let $=n.hostBindingOpCodes;null===$&&($=n.hostBindingOpCodes=[]);const ue=~i.index;(function jx(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})($)!=ue&&$.push(ue),$.push(o,c,P)}}(n,i,c,ff(n,o,m.hostVars,Ji),m)}function Oc(n,i,o,c,m,P){const $=nl(n,i);!function ry(n,i,o,c,m,P,$){if(null==P)n.removeAttribute(i,m,o);else{const ue=null==$?Hi(P):$(P,c||"",m);n.setAttribute(i,m,ue,o)}}(i[Xi],$,P,n.value,o,c,m)}function Wx(n,i,o,c,m,P){const $=P[i];if(null!==$)for(let ue=0;ue<$.length;)F0(c,o,$[ue++],$[ue++],$[ue++],$[ue++])}function Xx(n,i,o){let c=null,m=0;for(;m<o.length;){const P=o[m];if(0!==P)if(5!==P){if("number"==typeof P)break;if(n.hasOwnProperty(P)){null===c&&(c=[]);const $=n[P];for(let ue=0;ue<$.length;ue+=3)if($[ue]===i){c.push(P,$[ue+1],$[ue+2],o[m+1]);break}}m+=2}else m+=2;else m+=4}return c}function W0(n,i,o,c){return[n,!0,0,i,null,c,null,o,null,null]}function X0(n,i){const o=n.contentQueries;if(null!==o){const c=_e(null);try{for(let m=0;m<o.length;m+=2){const $=o[m+1];if(-1!==$){const ue=n.data[$];Lh(o[m]),ue.contentQueries(2,i[$],$)}}}finally{_e(c)}}}function tm(n,i){return n[qu]?n[Kf][co]=i:n[qu]=i,n[Kf]=i,i}function iy(n,i,o){Lh(0);const c=_e(null);try{i(n,o)}finally{_e(c)}}function q0(n){var i;return null!==(i=n[Xu])&&void 0!==i?i:n[Xu]=[]}function K0(n){var i;return null!==(i=n.cleanup)&&void 0!==i?i:n.cleanup=[]}function nm(n,i){const o=n[sa],c=o?o.get(cc,null):null;c&&c.handleError(i)}function sy(n,i,o,c,m){for(let P=0;P<o.length;){const $=o[P++],ue=o[P++],we=o[P++];F0(n.data[$],i[$],c,ue,we,m)}}function Jc(n,i,o){const c=Od(i,n);!function Ex(n,i,o){n.setValue(i,o)}(n[Xi],c,o)}function qx(n,i){const o=Ml(i,n),c=o[jr];!function Kx(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])}(c,o);const m=o[xo];null!==m&&null===o[ia]&&(o[ia]=Jv(m,o[sa])),oy(c,o,o[so])}function oy(n,i,o){jd(i);try{var c;const m=n.viewQuery;null!==m&&iy(1,m,o);const P=n.template;null!==P&&Jg(n,i,P,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),null===(c=i[Va])||void 0===c||c.finishViewCreation(n),n.staticContentQueries&&X0(n,i),n.staticViewQueries&&iy(2,n.viewQuery,o);const $=n.components;null!==$&&function Yx(n,i){for(let o=0;o<i.length;o++)qx(n,i[o])}(i,$)}catch(m){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),m}finally{i[Li]&=-5,kh()}}function th(n,i,o,c){const m=_e(null);try{var P,$,ue;const we=i.tView,gt=Kp(n,we,o,4096&n[Li]?4096:16,null,i,null,null,null!==(P=null==c?void 0:c.injector)&&void 0!==P?P:null,null!==($=null==c?void 0:c.embeddedViewInjector)&&void 0!==$?$:null,null!==(ue=null==c?void 0:c.dehydratedView)&&void 0!==ue?ue:null);gt[bc]=n[i.index];const dn=n[Va];return null!==dn&&(gt[Va]=dn.createEmbeddedView(we)),oy(we,gt,o),gt}finally{_e(m)}}function Qc(n,i){return!i||null===i.firstChild||Kh(n)}function md(n,i,o,c=!0){const m=i[jr];if(function zE(n,i,o,c){const m=Ho+c,P=o.length;c>0&&(o[m-1][co]=i),c<P-Ho?(i[co]=o[m],mh(o,Ho+c,i)):(o.push(i),i[co]=null),i[Zo]=o;const $=i[bc];null!==$&&o!==$&&Tx($,i);const ue=i[Va];null!==ue&&ue.insertView(n),Dh(i),i[Li]|=128}(m,i,n,o),c){const $=uf(o,n),ue=i[Xi],we=Xp(ue,n[El]);null!==we&&function VE(n,i,o,c,m,P){c[xo]=m,c[$o]=i,Pc(n,c,o,1,m,P)}(m,n[$o],ue,i,we,$)}const P=i[ia];null!==P&&null!==P.firstChild&&(P.firstChild=null)}function Lu(n,i,o,c,m=!1){for(;null!==o;){if(128===o.type){o=m?o.projectionNext:o.next;continue}const P=i[o.index];null!==P&&c.push(_s(P)),Ga(P)&&ly(P,c);const $=o.type;if(8&$)Lu(n,i,o.child,c);else if(32&$){const ue=C0(o,i);let we;for(;we=ue();)c.push(we)}else if(16&$){const ue=Wg(i,o);if(Array.isArray(ue))c.push(...ue);else{const we=Tc(i[Co]);Lu(we[jr],we,ue,c,!0)}}o=m?o.projectionNext:o.next}return c}function ly(n,i){for(let o=Ho;o<n.length;o++){const c=n[o],m=c[jr].firstChild;null!==m&&Lu(c[jr],c,m,i)}n[El]!==n[xo]&&i.push(n[El])}let J0=[];const Qx={..._,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ih(n.lView)},consumerOnSignalRead(){this.lView[Ra]=this}},ew={..._,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let i=Tc(n.lView);for(;i&&!t_(i[jr]);)i=Tc(i);i&&Zm(i)},consumerOnSignalRead(){this.lView[Ra]=this}};function t_(n){return 2!==n.type}const rm=100;function im(n,i=!0,o=0){const c=n[Ma],m=c.rendererFactory;var $;null===($=m.begin)||void 0===$||$.call(m);try{!function tw(n,i){const o=av();try{lv(!0),pf(n,i);let c=0;for(;Su(n);){if(c===rm)throw new Ir(103,!1);c++,pf(n,1)}}finally{lv(o)}}(n,o)}catch(Ge){throw i&&nm(n,Ge),Ge}finally{var ue,we;null===(ue=m.end)||void 0===ue||ue.call(m),null===(we=c.inlineEffectRunner)||void 0===we||we.flush()}}function nw(n,i,o,c){var m;const P=i[Li];if(!(256&~P))return;null===(m=i[Ma].inlineEffectRunner)||void 0===m||m.flush(),jd(i);let we=!0,Ge=null,rt=null;t_(n)?(rt=function Zx(n){var i;return null!==(i=n[Ra])&&void 0!==i?i:function Jx(n){var i;const o=null!==(i=J0.pop())&&void 0!==i?i:Object.create(Qx);return o.lView=n,o}(n)}(i),Ge=p(rt)):null===function q(){return j}()?(we=!1,rt=function e_(n){var i;const o=null!==(i=n[Ra])&&void 0!==i?i:Object.create(ew);return o.lView=n,o}(i),Ge=p(rt)):i[Ra]&&(S(i[Ra]),i[Ra]=null);try{Ch(i),function cv(n){return Wi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Jg(n,i,o,2,c);const gt=!(3&~P);if(gt){const cn=n.preOrderCheckHooks;null!==cn&&pp(i,cn,null)}else{const cn=n.preOrderHooks;null!==cn&&mp(i,cn,0,null),sg(i,0)}if(function r_(n){for(let i=Vv(n);null!==i;i=Gv(i)){if(!(i[Li]&Id.HasTransplantedViews))continue;const o=i[Vc];for(let c=0;c<o.length;c++)Zm(o[c])}}(i),nh(i,0),null!==n.contentQueries&&X0(n,i),gt){const cn=n.contentCheckHooks;null!==cn&&pp(i,cn)}else{const cn=n.contentHooks;null!==cn&&mp(i,cn,1),sg(i,1)}!function Rx(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const m=o[c];if(m<0)Ac(~m);else{const P=m,$=o[++c],ue=o[++c];Wb($,P),ue(2,i[P])}}}finally{Ac(-1)}}(n,i);const tn=n.components;null!==tn&&o_(i,tn,0);const dn=n.viewQuery;if(null!==dn&&iy(2,dn,c),gt){const cn=n.viewCheckHooks;null!==cn&&pp(i,cn)}else{const cn=n.viewHooks;null!==cn&&mp(i,cn,2),sg(i,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[xc]){for(const cn of i[xc])cn();i[xc]=null}i[Li]&=-73}catch(gt){throw Ih(i),gt}finally{null!==rt&&(g(rt,Ge),we&&function Q0(n){n.lView[Ra]!==n&&(n.lView=null,J0.push(n))}(rt)),kh()}}function nh(n,i){for(let o=Vv(n);null!==o;o=Gv(o))for(let c=Ho;c<o.length;c++)s_(o[c],i)}function i_(n,i,o){s_(Ml(i,n),o)}function s_(n,i){Ym(n)&&pf(n,i)}function pf(n,i){const c=n[jr],m=n[Li],P=n[Ra];let $=!!(0===i&&16&m);if($||($=!!(64&m&&0===i)),$||($=!!(1024&m)),$||($=!(null==P||!P.dirty||!v(P))),$||($=!1),P&&(P.dirty=!1),n[Li]&=-9217,$)nw(c,n,c.template,n[so]);else if(8192&m){nh(n,1);const ue=c.components;null!==ue&&o_(n,ue,1)}}function o_(n,i,o){for(let c=0;c<i.length;c++)i_(n,i[c],o)}function mf(n,i){var o;const c=av()?64:1088;for(null===(o=n[Ma].changeDetectionScheduler)||void 0===o||o.notify(i);n;){n[Li]|=c;const m=Tc(n);if(Pd(n)&&!m)return n;n=m}return null}class gf{get rootNodes(){const i=this._lView,o=i[jr];return Lu(o,i,o.firstChild,[])}constructor(i,o,c=!0){this._lView=i,this._cdRefInjectingView=o,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[so]}set context(i){this._lView[so]=i}get destroyed(){return!(256&~this._lView[Li])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Zo];if(Ga(i)){const o=i[8],c=o?o.indexOf(this):-1;c>-1&&(Wp(i,c),kc(o,c))}this._attachedToViewContainer=!1}$g(this._lView[jr],this._lView)}onDestroy(i){nc(this._lView,i)}markForCheck(){mf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Li]&=-129}reattach(){Dh(this._lView),this._lView[Li]|=128}detectChanges(){this._lView[Li]|=1024,im(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ir(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=Pd(this._lView),o=this._lView[bc];null!==o&&!i&&R0(o,this._lView),Mx(this._lView[jr],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ir(902,!1);this._appRef=i;const o=Pd(this._lView),c=this._lView[bc];null!==c&&!o&&Tx(c,this._lView),Dh(this._lView)}}let rh=(()=>{class i{}return i.__NG_ELEMENT_ID__=iw,i})();const rw=rh,a_=class extends rw{constructor(i,o,c){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=c}get ssrId(){var i;return(null===(i=this._declarationTContainer.tView)||void 0===i?void 0:i.ssrId)||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,c){const m=th(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:o,dehydratedView:c});return new gf(m)}};function iw(){return sm(Xs(),fr())}function sm(n,i){return 4&n.type?new a_(i,n,Xd(n,i)):null}let I_=()=>null;function Nu(n,i){return I_(n,i)}class sh{}const Mf=new Jr("",{providedIn:"root",factory:()=>!1}),P_=new Jr("");class O_{}class L_{}class N_{resolveComponentFactory(i){throw function Ow(n){const i=Error(`No component factory found for ${po(n)}.`);return i.ngComponent=n,i}(i)}}class oh{}oh.NULL=new N_;class Af{}let by=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function ku(){const n=fr(),o=Ml(Xs().index,n);return(pa(o)?o:n)[Xi]}(),i})(),Lw=(()=>{var n;class i{}return(n=i).\u0275prov=Gr({token:n,providedIn:"root",factory:()=>null}),i})();const j_=new Set;function Qo(n){var i,o;j_.has(n)||(j_.add(n),null===(i=performance)||void 0===i||null===(o=i.mark)||void 0===o||o.call(i,"mark_feature_usage",{detail:{feature:n}}))}var Bo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bo||{});const F_={destroy(){}};function hm(n,i){var o,c;!i&&function Ad(n){if(!wh())throw new Ir(-203,!1)}();const m=null!==(o=null==i?void 0:i.injector)&&void 0!==o?o:Ur(Uo);return function Cl(n){return"browser"===(null!=n?n:Ur(Uo)).get(Dp)}(m)?(Qo("NgAfterNextRender"),function U_(n,i,o,c){var m;const P=function wy(n,i){if(n instanceof Function)switch(i){case Bo.EarlyRead:return{earlyRead:n};case Bo.Write:return{write:n};case Bo.MixedReadWrite:return{mixedReadWrite:n};case Bo.Read:return{read:n}}return n}(n,c),$=i.get(fm),ue=null!==(m=$.handler)&&void 0!==m?m:$.handler=new jw,we=[],Ge=[],rt=()=>{for(const cn of Ge)ue.unregister(cn);gt()},gt=i.get(Hc).onDestroy(rt);let tn=0;const dn=(cn,Qn)=>{if(!Qn)return;const wr=o?(...ar)=>(tn--,tn<1&&rt(),Qn(...ar)):Qn,Or=xh(i,()=>new kw(cn,we,wr));ue.register(Or),Ge.push(Or),tn++};return dn(Bo.EarlyRead,P.earlyRead),dn(Bo.Write,P.write),dn(Bo.MixedReadWrite,P.mixedReadWrite),dn(Bo.Read,P.read),{destroy:rt}}(n,m,!0,null!==(c=null==i?void 0:i.phase)&&void 0!==c?c:Bo.MixedReadWrite)):F_}class kw{constructor(i,o,c){var m;this.phase=i,this.pipelinedArgs=o,this.callbackFn=c,this.zone=Ur(Lo),this.errorHandler=Ur(cc,{optional:!0}),null===(m=Ur(sh,{optional:!0}))||void 0===m||m.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){var i;null===(i=this.errorHandler)||void 0===i||i.handleError(o)}}}class jw{constructor(){this.executingCallbacks=!1,this.buckets={[Bo.EarlyRead]:new Set,[Bo.Write]:new Set,[Bo.MixedReadWrite]:new Set,[Bo.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const o of i)o.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let fm=(()=>{var n;class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var c;this.executeInternalCallbacks(),null===(c=this.handler)||void 0===c||c.execute()}executeInternalCallbacks(){const c=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const m of c)m()}ngOnDestroy(){var c;null===(c=this.handler)||void 0===c||c.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(n=i).\u0275prov=Gr({token:n,providedIn:"root",factory:()=>new n}),i})();function ju(n){return!!Qr(n)}function gm(n,i,o){let c=o?n.styles:null,m=o?n.classes:null,P=0;if(null!==i)for(let $=0;$<i.length;$++){const ue=i[$];"number"==typeof ue?P=ue:1==P?m=kl(m,ue):2==P&&(c=kl(c,ue+": "+i[++$]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=m:n.classesWithoutHost=m}class z_ extends oh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Cn(i);return new ah(o,this.ngModule)}}function $_(n,i){const o=[];for(const c in n){if(!n.hasOwnProperty(c))continue;const m=n[c];if(void 0===m)continue;const P=Array.isArray(m),$=P?m[0]:m;o.push(i?{propName:$,templateName:c,isSignal:!!((P?m[1]:gc.None)&gc.SignalBased)}:{propName:$,templateName:c})}return o}class ah extends L_{get inputs(){const i=this.componentDef,o=i.inputTransforms,c=$_(i.inputs,!0);if(null!==o)for(const m of c)o.hasOwnProperty(m.propName)&&(m.transform=o[m.propName]);return c}get outputs(){return $_(this.componentDef.outputs,!1)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function pe(n){return n.map($u).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,c,m){const P=_e(null);try{var ue;let we=(m=m||this.ngModule)instanceof ul?m:null===(ue=m)||void 0===ue?void 0:ue.injector;we&&null!==this.componentDef.getStandaloneInjector&&(we=this.componentDef.getStandaloneInjector(we)||we);const Ge=we?new Cc(i,we):i,rt=Ge.get(Af,null);if(null===rt)throw new Ir(407,!1);const gt=Ge.get(Lw,null),cn={rendererFactory:rt,sanitizer:gt,inlineEffectRunner:null,afterRenderEventManager:Ge.get(fm,null),changeDetectionScheduler:Ge.get(sh,null)},Qn=rt.createRenderer(null,this.componentDef),wr=this.componentDef.selectors[0][0]||"div",Or=c?function B0(n,i,o,c){const P=c.get(o0,!1)||o===Fc.ShadowDom,$=n.selectRootElement(i,P);return function V0(n){ey(n)}($),$}(Qn,c,this.componentDef.encapsulation,Ge):zg(Qn,wr,function Lc(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(wr));let ar=512;this.componentDef.signals?ar|=4096:this.componentDef.onPush||(ar|=16);let $i=null;null!==Or&&($i=Jv(Or,Ge,!0));const ls=Qp(0,null,null,1,0,null,null,null,null,null,null),Ks=Kp(null,ls,null,ar,null,null,cn,Qn,Ge,null,$i);let al,yl;jd(Ks);try{const au=this.componentDef;let kf,eE=null;au.findHostDirectiveDefs?(kf=[],eE=new Map,au.findHostDirectiveDefs(au,kf,eE),kf.push(au)):kf=[au];const EO=function Uw(n,i){const o=n[jr],c=Ti;return n[c]=i,pd(o,c,2,"#host",null)}(Ks,Or),MO=function Bw(n,i,o,c,m,P,$){const ue=m[jr];!function Vw(n,i,o,c){for(const m of n)i.mergedAttrs=gu(i.mergedAttrs,m.hostAttrs);null!==i.mergedAttrs&&(gm(i,i.mergedAttrs,!0),null!==o&&hf(c,o,i))}(c,n,i,$);let we=null;null!==i&&(we=Jv(i,m[sa]));const Ge=P.rendererFactory.createRenderer(i,o);let rt=16;o.signals?rt=4096:o.onPush&&(rt=64);const gt=Kp(m,Qg(o),null,rt,m[n.index],n,P,Ge,null,null,we);return ue.firstCreatePass&&ny(ue,n,c.length-1),tm(m,gt),m[n.index]=gt}(EO,Or,au,kf,Ks,cn,Qn);yl=aa(ls,Ti),Or&&function zw(n,i,o,c){if(c)wl(n,o,["ng-version","18.1.3"]);else{const{attrs:m,classes:P}=function Ae(n){const i=[],o=[];let c=1,m=2;for(;c<n.length;){let P=n[c];if("string"==typeof P)2===m?""!==P&&i.push(P,n[++c]):8===m&&o.push(P);else{if(!Sa(m))break;m=P}c++}return{attrs:i,classes:o}}(i.selectors[0]);m&&wl(n,o,m),P&&P.length>0&&qg(n,o,P.join(" "))}}(Qn,au,Or,c),void 0!==o&&function $w(n,i,o){const c=n.projection=[];for(let m=0;m<i.length;m++){const P=o[m];c.push(null!=P?Array.from(P):null)}}(yl,this.ngContentSelectors,o),al=function Gw(n,i,o,c,m,P){const $=Xs(),ue=m[jr],we=nl($,m);$0(ue,m,$,o,null,c);for(let rt=0;rt<o.length;rt++)za($c(m,ue,$.directiveStart+rt,$),m);H0(ue,m,$),we&&za(we,m);const Ge=$c(m,ue,$.directiveStart+$.componentOffset,$);if(n[so]=m[so]=Ge,null!==P)for(const rt of P)rt(Ge,i);return Yp(ue,$,m),Ge}(MO,au,kf,eE,Ks,[tu]),oy(ls,Ks,null)}finally{kh()}return new Fw(this.componentType,al,Xd(yl,Ks),Ks,yl)}finally{_e(P)}}}class Fw extends O_{constructor(i,o,c,m,P){super(),this.location=c,this._rootLView=m,this._tNode=P,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new gf(m,void 0,!1),this.componentType=i}setInput(i,o){const c=this._tNode.inputs;let m;if(null!==c&&(m=c[i])){var P;if(null!==(P=this.previousInputValues)&&void 0!==P||(this.previousInputValues=new Map),this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const $=this._rootLView;sy($[jr],$,m,i,o),this.previousInputValues.set(i,o),mf(Ml(this._tNode.index,$),1)}}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function tu(){const n=Xs();fp(fr()[jr],n)}let lh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hw,i})();function Hw(){return l(Xs(),fr())}const y=lh,t=class extends y{constructor(i,o,c){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=c}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const i=nd(this._hostTNode,this._hostLView);if(Gd(i)){const o=Vh(i,this._hostLView),c=Uh(i);return new Fo(o[jr].data[c+8],o)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=r(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Ho}createEmbeddedView(i,o,c){let m,P;"number"==typeof c?m=c:null!=c&&(m=c.index,P=c.injector);const $=Nu(this._lContainer,i.ssrId),ue=i.createEmbeddedViewImpl(o||{},P,$);return this.insertImpl(ue,m,Qc(this._hostTNode,$)),ue}createComponent(i,o,c,m,P){var $,ue,we;const Ge=i&&!function _c(n){return"function"==typeof n}(i);let rt;if(Ge)rt=o;else{const Or=o||{};rt=Or.index,c=Or.injector,m=Or.projectableNodes,P=Or.environmentInjector||Or.ngModuleRef}const gt=Ge?i:new ah(Cn(i)),tn=c||this.parentInjector;if(!P&&null==gt.ngModule){const ar=(Ge?tn:this.parentInjector).get(ul,null);ar&&(P=ar)}const dn=Cn(null!==($=gt.componentType)&&void 0!==$?$:{}),cn=Nu(this._lContainer,null!==(ue=null==dn?void 0:dn.id)&&void 0!==ue?ue:null),Qn=null!==(we=null==cn?void 0:cn.firstChild)&&void 0!==we?we:null,wr=gt.create(tn,m,Qn,P);return this.insertImpl(wr.hostView,rt,Qc(this._hostTNode,cn)),wr}insert(i,o){return this.insertImpl(i,o,!0)}insertImpl(i,o,c){const m=i._lView;if(function Ta(n){return Ga(n[Zo])}(m)){const ue=this.indexOf(i);if(-1!==ue)this.detach(ue);else{const we=m[Zo],Ge=new t(we,we[$o],we[Zo]);Ge.detach(Ge.indexOf(i))}}const P=this._adjustIndex(o),$=this._lContainer;return md($,m,P,c),i.attachToViewContainerRef(),mh(s($),P,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=r(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),c=Wp(this._lContainer,o);c&&(kc(s(this._lContainer),o),$g(c[jr],c))}detach(i){const o=this._adjustIndex(i,-1),c=Wp(this._lContainer,o);return c&&null!=kc(s(this._lContainer),o)?new gf(c):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function r(n){return n[8]}function s(n){return n[8]||(n[8]=[])}function l(n,i){let o;const c=i[n.index];return Ga(c)?o=c:(o=W0(c,i,null,n),i[n.index]=o,tm(i,o)),b(o,i,n,c),new t(o,n,i)}let b=function U(n,i,o,c){if(n[El])return;let m;m=8&o.type?_s(c):function u(n,i){const o=n[Xi],c=o.createComment(""),m=nl(i,n);return $a(o,Xp(o,m),c,function Cx(n,i){return n.nextSibling(i)}(o,m),!1),c}(i,o),n[El]=m},T=()=>!1;class ye{constructor(i){this.queryList=i,this.matches=null}clone(){return new ye(this.queryList)}setDirty(){this.queryList.setDirty()}}class Me{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const c=null!==i.contentQueries?i.contentQueries[0]:o.length,m=[];for(let P=0;P<c;P++){const $=o.getByIndex(P);m.push(this.queries[$.indexInDeclarationView].clone())}return new Me(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==gr(i,o).matches&&this.queries[o].setDirty()}}class Ue{constructor(i,o,c=null){this.flags=o,this.read=c,this.predicate="string"==typeof i?function qn(n){return n.split(",").map(i=>i.trim())}(i):i}}class Pe{constructor(i=[]){this.queries=i}elementStart(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let c=0;c<this.length;c++){const m=null!==o?o.length:0,P=this.getByIndex(c).embeddedTView(i,m);P&&(P.indexInDeclarationView=c,null!==o?o.push(P):o=[P])}return null!==o?new Pe(o):null}template(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class De{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new De(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let c=i.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let m=0;m<c.length;m++){const P=c[m];this.matchTNodeWithReadOption(i,o,tt(o,P)),this.matchTNodeWithReadOption(i,o,zd(o,i,P,!1,!1))}else c===rh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,zd(o,i,c,!1,!1))}matchTNodeWithReadOption(i,o,c){if(null!==c){const m=this.metadata.read;if(null!==m)if(m===Xh||m===lh||m===rh&&4&o.type)this.addMatch(o.index,-2);else{const P=zd(o,i,m,!1,!1);null!==P&&this.addMatch(o.index,P)}else this.addMatch(o.index,c)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function tt(n,i){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===i)return o[c+1];return null}function nt(n,i,o,c){return-1===o?function st(n,i){return 11&n.type?Xd(n,i):4&n.type?sm(n,i):null}(i,n):-2===o?function $t(n,i,o){return o===Xh?Xd(i,n):o===rh?sm(i,n):o===lh?l(i,n):void 0}(n,i,c):$c(n,n[jr],o,i)}function Ct(n,i,o,c){const m=i[Va].queries[c];if(null===m.matches){const P=n.data,$=o.matches,ue=[];for(let we=0;null!==$&&we<$.length;we+=2){const Ge=$[we];ue.push(Ge<0?null:nt(i,P[Ge],$[we+1],o.metadata.read))}m.matches=ue}return m.matches}function Gt(n,i,o,c){const m=n.queries.getByIndex(o),P=m.matches;if(null!==P){const $=Ct(n,i,m,o);for(let ue=0;ue<P.length;ue+=2){const we=P[ue];if(we>0)c.push($[ue/2]);else{const Ge=P[ue+1],rt=i[-we];for(let gt=Ho;gt<rt.length;gt++){const tn=rt[gt];tn[bc]===tn[Zo]&&Gt(tn[jr],tn,Ge,c)}if(null!==rt[Vc]){const gt=rt[Vc];for(let tn=0;tn<gt.length;tn++){const dn=gt[tn];Gt(dn[jr],dn,Ge,c)}}}}}return c}function Tt(n,i,o){var c;const m=new Xc(!(4&~o));return function va(n,i,o,c){const m=q0(i);m.push(o),n.firstCreatePass&&K0(n).push(c,m.length-1)}(n,i,m,m.destroy),(null!==(c=i[Va])&&void 0!==c?c:i[Va]=new Me).queries.push(new ye(m))-1}function Vn(n,i,o){null===n.queries&&(n.queries=new Pe),n.queries.track(new De(i,o))}function gr(n,i){return n.queries.getByIndex(i)}function Zn(n,i){const o=n[jr],c=gr(o,i);return c.crossesNgTemplate?Gt(o,n,i,[]):Ct(o,n,c,i)}function ei(n,i){Qo("NgSignals");const o=function J(n){const i=Object.create(me);i.value=n;const o=()=>(w(i),i.value);return o[a]=i,o}(n),c=o[a];return null!=i&&i.equal&&(c.equal=i.equal),o.set=m=>et(c,m),o.update=m=>function le(n,i){f()||ae(),et(n,i(n.value))}(c,m),o.asReadonly=mi.bind(o),o}function mi(){const n=this[a];if(void 0===n.readonlyFn){const i=()=>this();i[a]=n,n.readonlyFn=i}return n.readonlyFn}function qi(n){return function Lr(n){return"function"==typeof n&&void 0!==n[a]}(n)&&"function"==typeof n.set}function qs(n){let i=function Pa(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;i;){let m;if(tc(n))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ir(903,!1);m=i.\u0275dir}if(m){if(o){c.push(m);const $=n;$.inputs=If(n.inputs),$.inputTransforms=If(n.inputTransforms),$.declaredInputs=If(n.declaredInputs),$.outputs=If(n.outputs);const ue=m.hostBindings;ue&&My(n,ue);const we=m.viewQuery,Ge=m.contentQueries;if(we&&H_(n,we),Ge&&vd(n,Ge),dc(n,m),Nl(n.outputs,m.outputs),tc(m)&&m.data.animation){const rt=n.data;rt.animation=(rt.animation||[]).concat(m.data.animation)}}const P=m.features;if(P)for(let $=0;$<P.length;$++){const ue=P[$];ue&&ue.ngInherit&&ue(n),ue===qs&&(o=!1)}}i=Object.getPrototypeOf(i)}!function nu(n){let i=0,o=null;for(let c=n.length-1;c>=0;c--){const m=n[c];m.hostVars=i+=m.hostVars,m.hostAttrs=gu(m.hostAttrs,o=gu(o,m.hostAttrs))}}(c)}function dc(n,i){for(const c in i.inputs){if(!i.inputs.hasOwnProperty(c)||n.inputs.hasOwnProperty(c))continue;const m=i.inputs[c];if(void 0!==m&&(n.inputs[c]=m,n.declaredInputs[c]=i.declaredInputs[c],null!==i.inputTransforms)){var o;const P=Array.isArray(m)?m[0]:m;if(!i.inputTransforms.hasOwnProperty(P))continue;null!==(o=n.inputTransforms)&&void 0!==o||(n.inputTransforms={}),n.inputTransforms[P]=i.inputTransforms[P]}}}function If(n){return n===ra?{}:n===ps?[]:n}function H_(n,i){const o=n.viewQuery;n.viewQuery=o?(c,m)=>{i(c,m),o(c,m)}:i}function vd(n,i){const o=n.contentQueries;n.contentQueries=o?(c,m,P)=>{i(c,m,P),o(c,m,P)}:i}function My(n,i){const o=n.hostBindings;n.hostBindings=o?(c,m)=>{i(c,m),o(c,m)}:i}function Z_(n){const i=n.inputConfig,o={};for(const c in i)if(i.hasOwnProperty(c)){const m=i[c];Array.isArray(m)&&m[3]&&(o[c]=m[3])}n.inputTransforms=o}class _d{}class J_{}function Ww(n,i){return new Gn(n,null!=i?i:null,[])}class Gn extends _d{constructor(i,o,c){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const m=Qr(i);this._bootstrapComponents=Wl(m.bootstrap),this._r3Injector=lc(i,o,[{provide:_d,useValue:this},{provide:oh,useValue:this.componentFactoryResolver},...c],po(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class rr extends J_{constructor(i){super(),this.moduleType=i}create(i){return new Gn(this.moduleType,i,[])}}class Wn extends _d{constructor(i){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const o=new ec([...i.providers,{provide:_d,useValue:this},{provide:oh,useValue:this.componentFactoryResolver}],i.parent||Qa(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function $r(n,i,o=null){return new Wn({providers:n,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}function xi(n){return!!Bi(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Bi(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function as(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Nc(n,i,o,c,m,P,$,ue,we,Ge){const rt=o+Ti,gt=i.firstCreatePass?function hc(n,i,o,c,m,P,$,ue,we){const Ge=i.consts,rt=pd(i,n,4,$||null,ue||null);ty(i,o,rt,rl(Ge,we)),fp(i,rt);const gt=rt.tView=Qp(2,rt,c,m,P,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Ge,null);return null!==i.queries&&(i.queries.template(i,rt),gt.queries=i.queries.embeddedTView(rt)),rt}(rt,i,n,c,m,P,$,ue,we):i.data[rt];hl(gt,!1);const tn=ch(i,n,gt,o);sc()&&Rc(i,n,tn,gt),za(tn,n);const dn=W0(tn,n,tn,gt);return n[rt]=dn,tm(n,dn),function O(n,i,o){return T(n,i,o)}(dn,gt,n),Sh(gt)&&Zp(i,n,gt),null!=we&&Jp(n,gt,Ge),gt}function sl(n,i,o,c,m,P,$,ue){const we=fr(),Ge=bs();return Nc(we,Ge,n,i,o,c,m,rl(Ge.consts,P),$,ue),sl}let ch=function Do(n,i,o,c){return fl(!0),i[Xi].createComment("")};function rS(n,i,o,c){const m=fr();return as(m,ic(),i)&&(bs(),Oc(oo(),m,n,i,o,c)),rS}function Tm(n,i,o,c,m,P){const ue=function Ts(n,i,o,c){const m=as(n,i,o);return as(n,i+1,c)||m}(n,function Gc(){return Wi.lFrame.bindingIndex}(),o,m);return zc(2),ue?i+Hi(o)+c+Hi(m)+P:Ji}function ib(n,i){return n<<17|i<<2}function dh(n){return n>>17&32767}function iS(n){return 2|n}function Of(n){return(131068&n)>>2}function sS(n,i){return-131069&n|i<<2}function oS(n){return 1|n}function jM(n,i,o,c){const m=n[o+1],P=null===i;let $=c?dh(m):Of(m),ue=!1;for(;0!==$&&(!1===ue||P);){const Ge=n[$+1];jD(n[$],i)&&(ue=!0,n[$+1]=c?oS(Ge):iS(Ge)),$=c?dh(Ge):Of(Ge)}ue&&(n[o+1]=c?iS(m):oS(m))}function jD(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ia(n,i)>=0}const Oa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FM(n){return n.substring(Oa.key,Oa.keyEnd)}function FD(n){return n.substring(Oa.value,Oa.valueEnd)}function BM(n,i){const o=Oa.textEnd;let c=Oa.key=Om(n,i,o);return o===c?-1:(c=Oa.keyEnd=function GD(n,i,o){let c;for(;i<o&&(45===(c=n.charCodeAt(i))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)i++;return i}(n,c,o),c=GM(n,c,o),c=Oa.value=Om(n,c,o),c=Oa.valueEnd=function zD(n,i,o){let c=-1,m=-1,P=-1,$=i,ue=$;for(;$<o;){const we=n.charCodeAt($++);if(59===we)return ue;34===we||39===we?ue=$=zM(n,we,$,o):i===$-4&&85===P&&82===m&&76===c&&40===we?ue=$=zM(n,41,$,o):we>32&&(ue=$),P=m,m=c,c=-33&we}return ue}(n,c,o),GM(n,c,o))}function Om(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function GM(n,i,o,c){return(i=Om(n,i,o))<o&&i++,i}function zM(n,i,o,c){let m=-1,P=o;for(;P<c;){const $=n.charCodeAt(P++);if($==i&&92!==m)return P;m=92==$&&92===m?0:$}throw new Error}function aS(n,i,o){const c=fr();return as(c,ic(),i)&&ml(bs(),oo(),c,n,i,c[Xi],o,!1),aS}function lS(n,i,o,c,m){const $=m?"class":"style";sy(n,o,i.inputs[$],$,c)}function cS(n,i){return function iu(n,i,o,c){const m=fr(),P=bs(),$=zc(2);P.firstUpdatePass&&WM(P,n,$,c),i!==Ji&&as(m,$,i)&&qM(P,P.data[ga()],m,m[Xi],n,m[$+1]=function QD(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=po(Kc(n)))),n}(i,o),c,$)}(n,i,null,!0),cS}function ru(n){!function su(n,i,o,c){const m=bs(),P=zc(2);m.firstUpdatePass&&WM(m,null,P,c);const $=fr();if(o!==Ji&&as($,P,o)){const ue=m.data[ga()];if(YM(ue,c)&&!HM(m,P)){let we=c?ue.classesWithoutHost:ue.stylesWithoutHost;null!==we&&(o=kl(we,o||"")),lS(m,ue,$,o,c)}else!function JD(n,i,o,c,m,P,$,ue){m===Ji&&(m=ps);let we=0,Ge=0,rt=0<m.length?m[0]:null,gt=0<P.length?P[0]:null;for(;null!==rt||null!==gt;){const tn=we<m.length?m[we+1]:void 0,dn=Ge<P.length?P[Ge+1]:void 0;let Qn,cn=null;rt===gt?(we+=2,Ge+=2,tn!==dn&&(cn=gt,Qn=dn)):null===gt||null!==rt&&rt<gt?(we+=2,cn=rt):(Ge+=2,cn=gt,Qn=dn),null!==cn&&qM(n,i,o,c,cn,Qn,$,ue),rt=we<m.length?m[we]:null,gt=Ge<P.length?P[Ge]:null}}(m,ue,$,$[Xi],$[P+1],$[P+1]=function YD(n,i,o){if(null==o||""===o)return ps;const c=[],m=Kc(o);if(Array.isArray(m))for(let P=0;P<m.length;P++)n(c,m[P],!0);else if("object"==typeof m)for(const P in m)m.hasOwnProperty(P)&&n(c,P,m[P]);else"string"==typeof m&&i(c,m);return c}(n,i,o),c,P)}}(XM,$D,n,!1)}function $D(n,i){for(let o=function BD(n){return function VM(n){Oa.key=0,Oa.keyEnd=0,Oa.value=0,Oa.valueEnd=0,Oa.textEnd=n.length}(n),BM(n,Om(n,0,Oa.textEnd))}(i);o>=0;o=BM(i,o))XM(n,FM(i),FD(i))}function HM(n,i){return i>=n.expandoStartIndex}function WM(n,i,o,c){const m=n.data;if(null===m[o+1]){const P=m[ga()],$=HM(n,o);YM(P,c)&&null===i&&!$&&(i=!1),i=function WD(n,i,o,c){const m=function ap(n){const i=Wi.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let P=c?i.residualClasses:i.residualStyles;if(null===m)0===(c?i.classBindings:i.styleBindings)&&(o=Ry(o=uS(null,n,i,o,c),i.attrs,c),P=null);else{const $=i.directiveStylingLast;if(-1===$||n[$]!==m)if(o=uS(m,n,i,o,c),null===P){let we=function XD(n,i,o){const c=o?i.classBindings:i.styleBindings;if(0!==Of(c))return n[dh(c)]}(n,i,c);void 0!==we&&Array.isArray(we)&&(we=uS(null,n,i,we[1],c),we=Ry(we,i.attrs,c),function qD(n,i,o,c){n[dh(o?i.classBindings:i.styleBindings)]=c}(n,i,c,we))}else P=function KD(n,i,o){let c;const m=i.directiveEnd;for(let P=1+i.directiveStylingLast;P<m;P++)c=Ry(c,n[P].hostAttrs,o);return Ry(c,i.attrs,o)}(n,i,c)}return void 0!==P&&(c?i.residualClasses=P:i.residualStyles=P),o}(m,P,i,c),function ND(n,i,o,c,m,P){let $=P?i.classBindings:i.styleBindings,ue=dh($),we=Of($);n[c]=o;let rt,Ge=!1;if(Array.isArray(o)?(rt=o[1],(null===rt||Ia(o,rt)>0)&&(Ge=!0)):rt=o,m)if(0!==we){const tn=dh(n[ue+1]);n[c+1]=ib(tn,ue),0!==tn&&(n[tn+1]=sS(n[tn+1],c)),n[ue+1]=function OD(n,i){return 131071&n|i<<17}(n[ue+1],c)}else n[c+1]=ib(ue,0),0!==ue&&(n[ue+1]=sS(n[ue+1],c)),ue=c;else n[c+1]=ib(we,0),0===ue?ue=c:n[we+1]=sS(n[we+1],c),we=c;Ge&&(n[c+1]=iS(n[c+1])),jM(n,rt,c,!0),jM(n,rt,c,!1),function kD(n,i,o,c,m){const P=m?n.residualClasses:n.residualStyles;null!=P&&"string"==typeof i&&Ia(P,i)>=0&&(o[c+1]=oS(o[c+1]))}(i,rt,n,c,P),$=ib(ue,we),P?i.classBindings=$:i.styleBindings=$}(m,P,i,o,$,c)}}function uS(n,i,o,c,m){let P=null;const $=o.directiveEnd;let ue=o.directiveStylingLast;for(-1===ue?ue=o.directiveStart:ue++;ue<$&&(P=i[ue],c=Ry(c,P.hostAttrs,m),P!==n);)ue++;return null!==n&&(o.directiveStylingLast=ue),c}function Ry(n,i,o){const c=o?1:2;let m=-1;if(null!==i)for(let P=0;P<i.length;P++){const $=i[P];"number"==typeof $?m=$:m===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mi(n,$,!!o||i[++P]))}return void 0===n?null:n}function XM(n,i,o){Mi(n,i,Kc(o))}function qM(n,i,o,c,m,P,$,ue){if(!(3&i.type))return;const we=n.data,Ge=we[ue+1],rt=function LD(n){return!(1&~n)}(Ge)?KM(we,i,o,m,Of(Ge),$):void 0;sb(rt)||(sb(P)||function PD(n){return!(2&~n)}(Ge)&&(P=KM(we,null,o,m,ue,$)),function k0(n,i,o,c,m){if(i)m?n.addClass(o,c):n.removeClass(o,c);else{let P=-1===c.indexOf("-")?void 0:Gg.DashCase;null==m?n.removeStyle(o,c,P):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),P|=Gg.Important),n.setStyle(o,c,m,P))}}(c,$,Od(ga(),o),m,P))}function KM(n,i,o,c,m,P){const $=null===i;let ue;for(;m>0;){const we=n[m],Ge=Array.isArray(we),rt=Ge?we[1]:we,gt=null===rt;let tn=o[m+1];tn===Ji&&(tn=gt?ps:void 0);let dn=gt?jc(tn,c):rt===c?tn:void 0;if(Ge&&!sb(dn)&&(dn=jc(we,c)),sb(dn)&&(ue=dn,$))return ue;const cn=n[m+1];m=$?dh(cn):Of(cn)}if(null!==i){let we=P?i.residualClasses:i.residualStyles;null!=we&&(ue=jc(we,c))}return ue}function sb(n){return void 0!==n}function YM(n,i){return!!(n.flags&(i?8:16))}function ab(n,i,o,c){const m=fr(),P=bs(),$=Ti+n,ue=m[Xi],we=P.firstCreatePass?function w2(n,i,o,c,m,P){const $=i.consts,we=pd(i,n,2,c,rl($,m));return ty(i,o,we,rl($,P)),null!==we.attrs&&gm(we,we.attrs,!1),null!==we.mergedAttrs&&gm(we,we.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,we),we}($,P,m,i,o,c):P.data[$],Ge=eT(P,m,we,ue,i,n);m[$]=Ge;const rt=Sh(we);return hl(we,!0),hf(ue,Ge,we),!function ks(n){return!(32&~n.flags)}(we)&&sc()&&Rc(P,m,Ge,we),0===function Jm(){return Wi.lFrame.elementDepthCount}()&&za(Ge,m),function ip(){Wi.lFrame.elementDepthCount++}(),rt&&(Zp(P,m,we),Yp(P,we,m)),null!==c&&Jp(m,we),ab}function lb(){let n=Xs();Rh()?Ph():(n=n.parent,hl(n,!1));const i=n;(function $b(n){return Wi.skipHydrationRootTNode===n})(i)&&function aE(){Wi.skipHydrationRootTNode=null}(),function sp(){Wi.lFrame.elementDepthCount--}();const o=bs();return o.firstCreatePass&&(fp(o,n),Rd(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Vd(n){return!!(8&n.flags)}(i)&&lS(o,i,fr(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zb(n){return!!(16&n.flags)}(i)&&lS(o,i,fr(),i.stylesWithoutHost,!1),lb}function pS(n,i,o,c){return ab(n,i,o,c),lb(),pS}let eT=(n,i,o,c,m,P)=>(fl(!0),zg(c,m,function hv(){return Wi.lFrame.currentNamespace}()));function cb(n,i,o){const c=fr(),m=bs(),P=n+Ti,$=m.firstCreatePass?function M2(n,i,o,c,m){const P=i.consts,$=rl(P,c),ue=pd(i,n,8,"ng-container",$);return null!==$&&gm(ue,$,!0),ty(i,o,ue,rl(P,m)),null!==i.queries&&i.queries.elementStart(i,ue),ue}(P,m,c,i,o):m.data[P];hl($,!0);const ue=tT(m,c,$,n);return c[P]=ue,sc()&&Rc(m,c,ue,$),za(ue,c),Sh($)&&(Zp(m,c,$),Yp(m,$,c)),null!=o&&Jp(c,$),cb}function ub(){let n=Xs();const i=bs();return Rh()?Ph():(n=n.parent,hl(n,!1)),i.firstCreatePass&&(fp(i,n),Rd(n)&&i.queries.elementEnd(n)),ub}function mS(n,i,o){return cb(n,i,o),ub(),mS}let tT=(n,i,o,c)=>(fl(!0),I0(i[Xi],""));function nT(){return fr()}const Lf=void 0;var D2=["en",[["a","p"],["AM","PM"],Lf],[["AM","PM"],Lf,Lf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lf,"{1} 'at' {0}",Lf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function C2(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Lm={};function gS(n){const i=function I2(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=oT(i);if(o)return o;const c=i.split("-")[0];if(o=oT(c),o)return o;if("en"===c)return D2;throw new Ir(701,!1)}function sT(n){return gS(n)[Nm.PluralCase]}function oT(n){return n in Lm||(Lm[n]=lo.ng&&lo.ng.common&&lo.ng.common.locales&&lo.ng.common.locales[n]),Lm[n]}var Nm=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Nm||{});const km="en-US";let aT=km;let TT=(n,i,o)=>{};function _S(n,i,o,c){const m=fr(),P=bs(),$=Xs();return bS(P,m,m[Xi],$,n,i,c),_S}function bS(n,i,o,c,m,P,$){const ue=Sh(c),Ge=n.firstCreatePass&&K0(n),rt=i[so],gt=q0(i);let tn=!0;if(3&c.type||$){const Qn=nl(c,i),wr=$?$(Qn):Qn,Or=gt.length,ar=$?ls=>$(_s(ls[c.index])):c.index;let $i=null;if(!$&&ue&&($i=function yI(n,i,o,c){const m=n.cleanup;if(null!=m)for(let P=0;P<m.length-1;P+=2){const $=m[P];if($===o&&m[P+1]===c){const ue=i[Xu],we=m[P+2];return ue.length>we?ue[we]:null}"string"==typeof $&&(P+=2)}return null}(n,i,m,c.index)),null!==$i)($i.__ngLastListenerFn__||$i).__ngNextListenerFn__=P,$i.__ngLastListenerFn__=P,tn=!1;else{P=IT(c,i,rt,P),TT(Qn,m,P);const ls=o.listen(wr,m,P);gt.push(P,ls),Ge&&Ge.push(m,ar,Or,Or+1)}}else P=IT(c,i,rt,P);const dn=c.outputs;let cn;if(tn&&null!==dn&&(cn=dn[m])){const Qn=cn.length;if(Qn)for(let wr=0;wr<Qn;wr+=2){const Ks=i[cn[wr]][cn[wr+1]].subscribe(P),al=gt.length;gt.push(P,Ks),Ge&&Ge.push(m,c.index,al,-(al+1))}}}function DT(n,i,o,c){const m=_e(null);try{return Ec(6,i,o),!1!==o(c)}catch(P){return nm(n,P),!1}finally{Ec(7,i,o),_e(m)}}function IT(n,i,o,c){return function m(P){if(P===Function)return c;mf(n.componentOffset>-1?Ml(n.index,i):i,5);let ue=DT(i,o,c,P),we=m.__ngNextListenerFn__;for(;we;)ue=DT(i,o,we,P)&&ue,we=we.__ngNextListenerFn__;return ue}}function RT(n=1){return function td(n){return(Wi.lFrame.contextLView=function Ld(n,i){for(;n>0;)i=i[_u],n--;return i}(n,Wi.lFrame.contextLView))[so]}(n)}function vI(n,i){let o=null;const c=function Vl(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let m=0;m<i.length;m++){const P=i[m];if("*"!==P){if(null===c?Qs(n,P,!0):vc(c,P))return m}else o=m}return o}function PT(n){const i=fr()[Co][$o];if(!i.projection){const c=i.projection=function Ya(n,i){const o=[];for(let c=0;c<n;c++)o.push(i);return o}(n?n.length:1,null),m=c.slice();let P=i.child;for(;null!==P;){if(128!==P.type){const $=n?vI(P,n):0;null!==$&&(m[$]?m[$].projectionNext=P:c[$]=P,m[$]=P)}P=P.next}}}function OT(n,i=0,o,c,m,P){const $=fr(),ue=bs(),we=c?n+1:null;null!==we&&Nc($,ue,we,c,m,P,null,o);const Ge=pd(ue,Ti+n,16,null,o||null);null===Ge.projection&&(Ge.projection=i),Ph();const gt=!$[ia]||Mu();null===$[Co][$o].projection[Ge.projection]&&null!==we?function _I(n,i,o){const c=Ti+o,m=i.data[c],P=n[c],$=Nu(P,m.tView.ssrId);md(P,th(n,m,void 0,{dehydratedView:$}),0,Qc(m,$))}($,ue,we):gt&&32&~Ge.flags&&function Qd(n,i,o){Xg(i[Xi],0,i,o,os(n,o,i),O0(o.parent||i[$o],o,i))}(ue,$,Ge)}function zT(n,i,o,c){!function gn(n,i,o,c){const m=bs();if(m.firstCreatePass){const P=Xs();Vn(m,new Ue(i,o,c),P.index),function Jn(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(m,n),!(2&~o)&&(m.staticContentQueries=!0)}return Tt(m,fr(),o)}(n,i,o,c)}function $T(n,i,o){!function wt(n,i,o){const c=bs();return c.firstCreatePass&&(Vn(c,new Ue(n,i,o),-1),!(2&~i)&&(c.staticViewQueries=!0)),Tt(c,fr(),i)}(n,i,o)}function HT(n){const i=fr(),o=bs(),c=lp();Lh(c+1);const m=gr(o,c);if(n.dirty&&function Qu(n){return!(4&~n[Li])}(i)===!(2&~m.metadata.flags)){if(null===m.matches)n.reset([]);else{const P=Zn(i,c);n.reset(P,Nv),n.notifyOnChanges()}return!0}return!1}function WT(){return function qt(n,i){return n[Va].queries[i].queryList}(fr(),lp())}function XT(n){return function Mc(n,i){return n[i]}(function op(){return Wi.lFrame.contextLView}(),Ti+n)}function rA(n,i=""){const o=fr(),c=bs(),m=n+Ti,P=c.firstCreatePass?pd(c,m,1,i,null):c.data[m],$=iA(c,o,P,i,n);o[m]=$,sc()&&Rc(c,o,$,P),hl(P,!1)}let iA=(n,i,o,c,m)=>(fl(!0),function D0(n,i){return n.createText(i)}(i[Xi],c));function SS(n){return pb("",n,""),SS}function pb(n,i,o){const c=fr(),m=function Mm(n,i,o,c){return as(n,ic(),o)?i+Hi(o)+c:Ji}(c,n,i,o);return m!==Ji&&Jc(c,ga(),m),pb}function ES(n,i,o,c,m){const P=fr(),$=Tm(P,n,i,o,c,m);return $!==Ji&&Jc(P,ga(),$),ES}function MS(n,i,o){qi(i)&&(i=i());const c=fr();return as(c,ic(),i)&&ml(bs(),oo(),c,n,i,c[Xi],o,!1),MS}function hA(n,i){const o=qi(n);return o&&n.set(i),o}function TS(n,i){const o=fr(),c=bs(),m=Xs();return bS(c,o,o[Xi],m,n,i),TS}function AS(n,i,o,c,m){if(n=ii(n),Array.isArray(n))for(let P=0;P<n.length;P++)AS(n[P],i,o,c,m);else{const P=bs(),$=fr(),ue=Xs();let we=vu(n)?n:ii(n.provide);const Ge=Zi(n),rt=1048575&ue.providerIndexes,gt=ue.directiveStart,tn=ue.providerIndexes>>20;if(vu(n)||!n.multi){const dn=new jh(Ge,m,Ou),cn=DS(we,i,m?rt:rt+tn,gt);-1===cn?(rd(vp(ue,$),P,we),CS(P,n,i.length),i.push(we),ue.directiveStart++,ue.directiveEnd++,m&&(ue.providerIndexes+=1048576),o.push(dn),$.push(dn)):(o[cn]=dn,$[cn]=dn)}else{const dn=DS(we,i,rt+tn,gt),cn=DS(we,i,rt,rt+tn),wr=cn>=0&&o[cn];if(m&&!wr||!m&&!(dn>=0&&o[dn])){rd(vp(ue,$),P,we);const Or=function UI(n,i,o,c,m){const P=new jh(n,o,Ou);return P.multi=[],P.index=i,P.componentProviders=0,mA(P,m,c&&!o),P}(m?FI:jI,o.length,m,c,Ge);!m&&wr&&(o[cn].providerFactory=Or),CS(P,n,i.length,0),i.push(we),ue.directiveStart++,ue.directiveEnd++,m&&(ue.providerIndexes+=1048576),o.push(Or),$.push(Or)}else CS(P,n,dn>-1?dn:cn,mA(o[m?cn:dn],Ge,!m&&c));!m&&c&&wr&&o[cn].componentProviders++}}}function CS(n,i,o,c){const m=vu(i),P=function rE(n){return!!n.useClass}(i);if(m||P){const we=(P?ii(i.useClass):i).prototype.ngOnDestroy;if(we){const Ge=n.destroyHooks||(n.destroyHooks=[]);if(!m&&i.multi){const rt=Ge.indexOf(o);-1===rt?Ge.push(o,[c,we]):Ge[rt+1].push(c,we)}else Ge.push(o,we)}}}function mA(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function DS(n,i,o,c){for(let m=o;m<c;m++)if(i[m]===n)return m;return-1}function jI(n,i,o,c){return IS(this.multi,[])}function FI(n,i,o,c){const m=this.multi;let P;if(this.providerFactory){const $=this.providerFactory.componentProviders,ue=$c(o,o[jr],this.providerFactory.index,c);P=ue.slice(0,$),IS(m,P);for(let we=$;we<ue.length;we++)P.push(ue[we])}else P=[],IS(m,P);return P}function IS(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function gA(n,i=[]){return o=>{o.providersResolver=(c,m)=>function kI(n,i,o){const c=bs();if(c.firstCreatePass){const m=tc(n);AS(o,c.data,c.blueprint,m,!0),AS(i,c.data,c.blueprint,m,!1)}}(c,m?m(n):n,i)}}let BI=(()=>{var n;class i{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const m=Md(0,c.type),P=m.length>0?$r([m],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,P)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(n=i).\u0275prov=Gr({token:n,providedIn:"environment",factory:()=>new n(fi(ul))}),i})();function yA(n){Qo("NgStandalone"),n.getStandaloneInjector=i=>i.get(BI).getOrCreateStandaloneInjector(n)}function bA(n,i,o){const c=function ma(){const n=Wi.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}()+n,m=fr();return m[c]===Ji?function Ms(n,i,o){return n[i]=o}(m,c,o?i.call(o):i()):function yo(n,i){return n[i]}(m,c)}class VA{constructor(i){this.full=i;const o=i.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}let GA=(()=>{var n;class i{log(c){console.log(c)}warn(c){console.warn(c)}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();const WA=new Jr(""),XA=new Jr("");let jS,QR=(()=>{var n;class i{constructor(c,m,P){this._ngZone=c,this.registry=m,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jS||(function eP(n){jS=n}(P),P.addToWindow(m)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb()}});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(m=>!m.updateCb||!m.updateCb(c)||(clearTimeout(m.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,m,P){let $=-1;m&&m>0&&($=setTimeout(()=>{this._callbacks=this._callbacks.filter(ue=>ue.timeoutId!==$),c()},m)),this._callbacks.push({doneCb:c,timeoutId:$,updateCb:P})}whenStable(c,m,P){if(P&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,m,P),this._runCallbacksIfReady()}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,m,P){return[]}}return(n=i).\u0275fac=function(c){return new(c||n)(fi(Lo),fi(qA),fi(XA))},n.\u0275prov=Gr({token:n,factory:n.\u0275fac}),i})(),qA=(()=>{var n;class i{constructor(){this._applications=new Map}registerApplication(c,m){this._applications.set(c,m)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,m=!0){var P,$;return null!==(P=null===($=jS)||void 0===$?void 0:$.findTestabilityInTree(this,c,m))&&void 0!==P?P:null}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();function FS(n){return!!n&&"function"==typeof n.then}function KA(n){return!!n&&"function"==typeof n.subscribe}const YA=new Jr("");let US=(()=>{var n;class i{constructor(){var c;this.initialized=!1,this.done=!1,this.donePromise=new Promise((m,P)=>{this.resolve=m,this.reject=P}),this.appInits=null!==(c=Ur(YA,{optional:!0}))&&void 0!==c?c:[]}runInitializers(){if(this.initialized)return;const c=[];for(const P of this.appInits){const $=P();if(FS($))c.push($);else if(KA($)){const ue=new Promise((we,Ge)=>{$.subscribe({complete:we,error:Ge})});c.push(ue)}}const m=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{m()}).catch(P=>{this.reject(P)}),0===c.length&&m(),this.initialized=!0}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const _b=new Jr("");function QA(n,i){return Array.isArray(i)?i.reduce(QA,n):{...n,...i}}let ou=(()=>{var n;class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ur(Wh),this.afterRenderEffectManager=Ur(fm),this.zonelessEnabled=Ur(Mf),this.externalTestViews=new Set,this.beforeRender=new Lt.B,this.afterTick=new Lt.B,this.componentTypes=[],this.components=[],this.isStable=Ur(pl).hasPendingTasks.pipe((0,lt.T)(c=>!c)),this._injector=Ur(ul)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,m){const P=c instanceof L_;if(!this._injector.get(US).done)throw!P&&Sr(c),new Ir(405,!1);let ue;ue=P?c:this._injector.get(oh).resolveComponentFactory(c),this.componentTypes.push(ue.componentType);const we=function tP(n){return n.isBoundToModule}(ue)?void 0:this._injector.get(_d),rt=ue.create(Uo.NULL,[],m||ue.selector,we),gt=rt.location.nativeElement,tn=rt.injector.get(WA,null);return null==tn||tn.registerApplication(gt),rt.onDestroy(()=>{this.detachView(rt.hostView),bb(this.components,rt),null==tn||tn.unregisterApplication(gt)}),this._loadComponent(rt),rt}tick(){this._tick(!0)}_tick(c){if(this._runningTick)throw new Ir(101,!1);const m=_e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(c)}catch(P){this.internalErrorHandler(P)}finally{this._runningTick=!1,_e(m),this.afterTick.next()}}detectChangesInAttachedViews(c){let m=null;this._injector.destroyed||(m=this._injector.get(Af,null,{optional:!0}));let P=0;const $=this.afterRenderEffectManager;for(;P<10;){const dn=0===P;if(c||!dn){this.beforeRender.next(dn);for(let{_lView:cn,notifyErrorHandler:Qn}of this._views)rP(cn,Qn,dn,this.zonelessEnabled)}else{var ue,we,Ge,rt,gt,tn;null===(ue=m)||void 0===ue||null===(we=(Ge=ue).begin)||void 0===we||we.call(Ge),null===(rt=m)||void 0===rt||null===(gt=(tn=rt).end)||void 0===gt||gt.call(tn)}if(P++,$.executeInternalCallbacks(),!this.allViews.some(({_lView:cn})=>Su(cn))&&($.execute(),!this.allViews.some(({_lView:cn})=>Su(cn))))break}}attachView(c){const m=c;this._views.push(m),m.attachToAppRef(this)}detachView(c){const m=c;bb(this._views,m),m.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const m=this._injector.get(_b,[]);[...this._bootstrapListeners,...m].forEach(P=>P(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>bb(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ir(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function bb(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function rP(n,i,o,c){(o||Su(n))&&im(n,i,o&&!c?0:1)}class iP{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let sP=(()=>{var n;class i{compileModuleSync(c){return new rr(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const m=this.compileModuleSync(c),$=Wl(Qr(c).declarations).reduce((ue,we)=>{const Ge=Cn(we);return Ge&&ue.push(new ah(Ge)),ue},[]);return new iP(m,$)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),lP=(()=>{var n;class i{constructor(){this.zone=Ur(Lo),this.changeDetectionScheduler=Ur(sh),this.applicationRef=Ur(ou)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var c;null===(c=this._onMicrotaskEmptySubscription)||void 0===c||c.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function BS({ngZoneFactory:n,ignoreChangesOutsideZone:i}){var o;return null!==(o=n)&&void 0!==o||(n=()=>new Lo(VS())),[{provide:Lo,useFactory:n},{provide:To,multi:!0,useFactory:()=>{const c=Ur(lP,{optional:!0});return()=>c.initialize()}},{provide:To,multi:!0,useFactory:()=>{const c=Ur(uP);return()=>{c.initialize()}}},!0===i?{provide:P_,useValue:!0}:[]]}function VS(n){var i,o;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(i=null==n?void 0:n.eventCoalescing)&&void 0!==i&&i,shouldCoalesceRunChangeDetection:null!==(o=null==n?void 0:n.runCoalescing)&&void 0!==o&&o}}let uP=(()=>{var n;class i{constructor(){this.subscription=new kt.yU,this.initialized=!1,this.zone=Ur(Lo),this.pendingTasks=Ur(pl)}initialize(){if(this.initialized)return;this.initialized=!0;let c=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(c=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Lo.assertNotInAngularZone(),queueMicrotask(()=>{null!==c&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(c),c=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var m;Lo.assertInAngularZone(),null!==(m=c)&&void 0!==m||(c=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),Gy=(()=>{var n;class i{constructor(){var c;this.appRef=Ur(ou),this.taskService=Ur(pl),this.ngZone=Ur(Lo),this.zonelessEnabled=Ur(Mf),this.disableScheduling=null!==(c=Ur(P_,{optional:!0}))&&void 0!==c&&c,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new kt.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof Ep||!this.zoneIsDefined))}notify(c){if(!this.zonelessEnabled&&5===c)return;switch(c){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const m=this.useMicrotaskScheduler?Tl:Av;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=m(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=m(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Lo.isInAngularZone())}tick(c){if(this.runningTick||this.appRef.destroyed)return;const m=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(c)},void 0,this.schedulerTickApplyArgs)}catch(P){throw this.taskService.remove(m),P}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Tl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(m)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var c;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(c=this.cancelScheduledCallback)||void 0===c||c.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const m=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(m)}}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const xb=new Jr("",{providedIn:"root",factory:()=>Ur(xb,fs.Optional|fs.SkipSelf)||function dP(){return typeof $localize<"u"&&$localize.locale||km}()}),hP=new Jr("",{providedIn:"root",factory:()=>"USD"}),zS=new Jr("");let iC=(()=>{var n;class i{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,m){const P=function Pv(n="zone.js",i){return"noop"===n?new Ep:"zone.js"===n?new Lo(i):n}(null==m?void 0:m.ngZone,VS({eventCoalescing:null==m?void 0:m.ngZoneEventCoalescing,runCoalescing:null==m?void 0:m.ngZoneRunCoalescing}));return P.run(()=>{const ue=function or(n,i,o){return new Gn(n,i,o)}(c.moduleType,this.injector,[...BS({ngZoneFactory:()=>P,ignoreChangesOutsideZone:null==m?void 0:m.ignoreChangesOutsideZone}),{provide:sh,useExisting:Gy}]),we=ue.injector.get(cc,null);return P.runOutsideAngular(()=>{const Ge=P.onError.subscribe({next:rt=>{we.handleError(rt)}});ue.onDestroy(()=>{bb(this._modules,ue),Ge.unsubscribe()})}),function JA(n,i,o){try{const c=o();return FS(c)?c.catch(m=>{throw i.runOutsideAngular(()=>n.handleError(m)),m}):c}catch(c){throw i.runOutsideAngular(()=>n.handleError(c)),c}}(we,P,()=>{const Ge=ue.injector.get(US);return Ge.runInitializers(),Ge.donePromise.then(()=>(function lT(n){"string"==typeof n&&(aT=n.toLowerCase().replace(/_/g,"-"))}(ue.injector.get(xb,km)||km),this._moduleDoBootstrap(ue),ue))})})}bootstrapModule(c,m=[]){const P=QA({},m);return function aP(n,i,o){const c=new rr(o);return Promise.resolve(c)}(0,0,c).then($=>this.bootstrapModuleFactory($,P))}_moduleDoBootstrap(c){const m=c.injector.get(ou);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(P=>m.bootstrap(P));else{if(!c.instance.ngDoBootstrap)throw new Ir(-403,!1);c.instance.ngDoBootstrap(m)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ir(404,!1);this._modules.slice().forEach(m=>m.destroy()),this._destroyListeners.forEach(m=>m());const c=this._injector.get(zS,null);c&&(c.forEach(m=>m()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(n=i).\u0275fac=function(c){return new(c||n)(fi(Uo))},n.\u0275prov=Gr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})(),hh=null;const sC=new Jr("");function oC(n,i,o=[]){const c=`Platform: ${i}`,m=new Jr(c);return(P=[])=>{let $=$S();if(!$||$.injector.get(sC,!1)){const ue=[...o,...P,{provide:m,useValue:!0}];n?n(ue):function pP(n){if(hh&&!hh.get(sC,!1))throw new Ir(400,!1);(function ZA(){!function ge(n){xe=n}(()=>{throw new Ir(600,!1)})})(),hh=n;const i=n.get(iC);(function lC(n){const i=n.get(E1,null);null==i||i.forEach(o=>o())})(n)}(function aC(n=[],i){return Uo.create({name:i,providers:[{provide:Hf,useValue:"platform"},{provide:zS,useValue:new Set([()=>hh=null])},...n]})}(ue,c))}return function mP(n){const i=$S();if(!i)throw new Ir(401,!1);return i}()}}function $S(){var n,i;return null!==(n=null===(i=hh)||void 0===i?void 0:i.get(iC))&&void 0!==n?n:null}function yP(){}let uC=(()=>{class i{}return i.__NG_ELEMENT_ID__=vP,i})();function vP(n){return function _P(n,i,o){if(wc(n)&&!o){const c=Ml(n.index,i);return new gf(c,c)}return 175&n.type?new gf(i[Co],i):null}(Xs(),fr(),!(16&~n))}class pC{constructor(){}supports(i){return xi(i)}create(i){return new EP(i)}}const SP=(n,i)=>i;class EP{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SP}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,c=this._removalsHead,m=0,P=null;for(;o||c;){const $=!c||o&&o.currentIndex<gC(c,m,P)?o:c,ue=gC($,m,P),we=$.currentIndex;if($===c)m--,c=c._nextRemoved;else if(o=o._next,null==$.previousIndex)m++;else{P||(P=[]);const Ge=ue-m,rt=we-m;if(Ge!=rt){for(let tn=0;tn<Ge;tn++){const dn=tn<P.length?P[tn]:P[tn]=0,cn=dn+tn;rt<=cn&&cn<Ge&&(P[tn]=dn+1)}P[$.previousIndex]=rt-Ge}}ue!==we&&i($,ue,we)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!xi(i))throw new Ir(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,P,$,o=this._itHead,c=!1;if(Array.isArray(i)){this.length=i.length;for(let ue=0;ue<this.length;ue++)P=i[ue],$=this._trackByFn(ue,P),null!==o&&Object.is(o.trackById,$)?(c&&(o=this._verifyReinsertion(o,P,$,ue)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,$,ue),c=!0),o=o._next}else m=0,function is(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let c;for(;!(c=o.next()).done;)i(c.value)}}(i,ue=>{$=this._trackByFn(m,ue),null!==o&&Object.is(o.trackById,$)?(c&&(o=this._verifyReinsertion(o,ue,$,m)),Object.is(o.item,ue)||this._addIdentityChange(o,ue)):(o=this._mismatch(o,ue,$,m),c=!0),o=o._next,m++}),this.length=m;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,c,m){let P;return null===i?P=this._itTail:(P=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,P,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(c,m))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,P,m)):i=this._addAfter(new MP(o,c),P,m),i}_verifyReinsertion(i,o,c,m){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==P?i=this._reinsertAfter(P,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,P=i._nextRemoved;return null===m?this._removalsHead=P:m._nextRemoved=P,null===P?this._removalsTail=m:P._prevRemoved=m,this._insertAfter(i,o,c),this._addToMoves(i,c),i}_moveAfter(i,o,c){return this._unlink(i),this._insertAfter(i,o,c),this._addToMoves(i,c),i}_addAfter(i,o,c){return this._insertAfter(i,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,c){const m=null===o?this._itHead:o._next;return i._next=m,i._prev=o,null===m?this._itTail=i:m._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new mC),this._linkedRecords.put(i),i.currentIndex=c,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,c=i._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class MP{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TP{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,i))return c;return null}remove(i){const o=i._prevDup,c=i._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class mC{constructor(){this.map=new Map}put(i){const o=i.trackById;let c=this.map.get(o);c||(c=new TP,this.map.set(o,c)),c.add(i)}get(i,o){const m=this.map.get(i);return m?m.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gC(n,i,o){const c=n.previousIndex;if(null===c)return c;let m=0;return o&&c<o.length&&(m=o[c]),c+i+m}class yC{constructor(){}supports(i){return i instanceof Map||Bi(i)}create(){return new AP}}class AP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Bi(i)))throw new Ir(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(c,m)=>{if(o&&o.key===m)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const P=this._getOrCreateRecordForKey(m,c);o=this._insertBeforeOrAppend(o,P)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const c=i._prev;return o._next=i,o._prev=c,i._prev=o,c&&(c._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,o);const P=m._prev,$=m._next;return P&&(P._next=$),$&&($._prev=P),m._next=null,m._prev=null,m}const c=new CP(i);return this._records.set(i,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(c=>o(i[c],c))}}class CP{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vC(){return new KS([new pC])}let KS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,m){if(null!=m){const P=m.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:m=>i.create(c,m||vC()),deps:[[i,new fu,new bo]]}}find(c){const m=this.factories.find(P=>P.supports(c));if(null!=m)return m;throw new Ir(901,!1)}}return(n=i).\u0275prov=Gr({token:n,providedIn:"root",factory:vC}),i})();function _C(){return new YS([new yC])}let YS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,m){if(m){const P=m.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:m=>i.create(c,m||_C()),deps:[[i,new fu,new bo]]}}find(c){const m=this.factories.find(P=>P.supports(c));if(m)return m;throw new Ir(901,!1)}}return(n=i).\u0275prov=Gr({token:n,providedIn:"root",factory:_C}),i})();const RP=oC(null,"core",[]);let PP=(()=>{var n;class i{constructor(c){}}return(n=i).\u0275fac=function(c){return new(c||n)(fi(ou))},n.\u0275mod=Et({type:n}),n.\u0275inj=li({}),i})();const kC=new Jr("");function fO(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function mO(n,i){Qo("NgSignals");const o=function G(n){const i=Object.create(Y);i.computation=n;const o=()=>{if(D(i),w(i),i.value===ee)throw i.error;return i.value};return o[a]=i,o}(n);return null!=i&&i.equal&&(o[a].equal=i.equal),o}function gO(n){const i=_e(null);try{return n()}finally{_e(i)}}function wO(n,i){const o=Cn(n),c=i.elementInjector||Qa();return new ah(o).create(c,i.projectableNodes,i.hostElement,i.environmentInjector)}function SO(n){const i=Cn(n);if(!i)return null;const o=new ah(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},4341:(br,kn,je)=>{"use strict";je.d(kn,{me:()=>E,YN:()=>Ht,zX:()=>ka,VZ:()=>ua,cz:()=>K,kq:()=>h,vO:()=>zt,BC:()=>Kn,vS:()=>ba,Q0:()=>Pl});var F=je(3953),j=je(177),Mt=je(6648),Jt=je(1985),a=je(3073),_e=je(8750),q=je(9326),M=je(4360),C=je(6450),_=je(8496),I=je(1413),D=je(6354);let d=(()=>{var Le;class be{constructor(Re,at){this._renderer=Re,this._elementRef=at,this.onChange=Qt=>{},this.onTouched=()=>{}}setProperty(Re,at){this._renderer.setProperty(this._elementRef.nativeElement,Re,at)}registerOnTouched(Re){this.onTouched=Re}registerOnChange(Re){this.onChange=Re}setDisabledState(Re){this.setProperty("disabled",Re)}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)(F.rXU(F.sFG),F.rXU(F.aKT))},Le.\u0275dir=F.FsC({type:Le}),be})(),f=(()=>{var Le;class be extends d{}return(Le=be).\u0275fac=(()=>{let ke;return function(at){return(ke||(ke=F.xGo(Le)))(at||Le)}})(),Le.\u0275dir=F.FsC({type:Le,features:[F.Vt3]}),be})();const h=new F.nKC(""),v={provide:h,useExisting:(0,F.Rfq)(()=>E),multi:!0},x=new F.nKC("");let E=(()=>{var Le;class be extends d{constructor(Re,at,Qt){super(Re,at),this._compositionMode=Qt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S(){const Le=(0,j.QT)()?(0,j.QT)().getUserAgent():"";return/android (\d+)/.test(Le.toLowerCase())}())}writeValue(Re){this.setProperty("value",null==Re?"":Re)}_handleInput(Re){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Re)}_compositionStart(){this._composing=!0}_compositionEnd(Re){this._composing=!1,this._compositionMode&&this.onChange(Re)}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)(F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(x,8))},Le.\u0275dir=F.FsC({type:Le,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Re,at){1&Re&&F.bIt("input",function(Sn){return at._handleInput(Sn.target.value)})("blur",function(){return at.onTouched()})("compositionstart",function(){return at._compositionStart()})("compositionend",function(Sn){return at._compositionEnd(Sn.target.value)})},features:[F.Jv_([v]),F.Vt3]}),be})();function N(Le){return null==Le||("string"==typeof Le||Array.isArray(Le))&&0===Le.length}const K=new F.nKC(""),z=new F.nKC("");function J(Le){return null}function ce(Le){return null!=Le}function Te(Le){return(0,F.jNT)(Le)?(0,Mt.H)(Le):Le}function et(Le){let be={};return Le.forEach(ke=>{be=null!=ke?{...be,...ke}:be}),0===Object.keys(be).length?null:be}function le(Le,be){return be.map(ke=>ke(Le))}function me(Le){return Le.map(be=>function V(Le){return!Le.validate}(be)?be:ke=>be.validate(ke))}function Xe(Le){return null!=Le?function Oe(Le){if(!Le)return null;const be=Le.filter(ce);return 0==be.length?null:function(ke){return et(le(ke,be))}}(me(Le)):null}function yt(Le){return null!=Le?function dt(Le){if(!Le)return null;const be=Le.filter(ce);return 0==be.length?null:function(ke){return function w(...Le){const be=(0,q.ms)(Le),{args:ke,keys:Re}=(0,a.D)(Le),at=new Jt.c(Qt=>{const{length:Sn}=ke;if(!Sn)return void Qt.complete();const Fn=new Array(Sn);let Yr=Sn,Gr=Sn;for(let ai=0;ai<Sn;ai++){let li=!1;(0,_e.Tg)(ke[ai]).subscribe((0,M._)(Qt,ki=>{li||(li=!0,Gr--),Fn[ai]=ki},()=>Yr--,void 0,()=>{(!Yr||!li)&&(Gr||Qt.next(Re?(0,_.e)(Re,Fn):Fn),Qt.complete())}))}});return be?at.pipe((0,C.I)(be)):at}(le(ke,be).map(Te)).pipe((0,D.T)(et))}}(me(Le)):null}function Ut(Le,be){return null===Le?[be]:Array.isArray(Le)?[...Le,be]:[Le,be]}function kt(Le){return Le?Array.isArray(Le)?Le:[Le]:[]}function lt(Le,be){return Array.isArray(Le)?Le.includes(be):Le===be}function It(Le,be){const ke=kt(be);return kt(Le).forEach(at=>{lt(ke,at)||ke.push(at)}),ke}function bt(Le,be){return kt(be).filter(ke=>!lt(Le,ke))}class Pt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(be){this._rawValidators=be||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(be){this._rawAsyncValidators=be||[],this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(be){this._onDestroyCallbacks.push(be)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(be=>be()),this._onDestroyCallbacks=[]}reset(be=void 0){this.control&&this.control.reset(be)}hasError(be,ke){return!!this.control&&this.control.hasError(be,ke)}getError(be,ke){return this.control?this.control.getError(be,ke):null}}class St extends Pt{get formDirective(){return null}get path(){return null}}class zt extends Pt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fn{constructor(be){this._cd=be}get isTouched(){var be,ke,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(ke=be._touched)||void 0===ke||ke.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.touched)}get isUntouched(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.untouched)}get isPristine(){var be,ke,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(ke=be._pristine)||void 0===ke||ke.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.pristine)}get isDirty(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.dirty)}get isValid(){var be,ke,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(ke=be._status)||void 0===ke||ke.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.valid)}get isInvalid(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.invalid)}get isPending(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.pending)}get isSubmitted(){var be,ke,Re;return null===(be=this._cd)||void 0===be||null===(ke=be._submitted)||void 0===ke||ke.call(be),!(null===(Re=this._cd)||void 0===Re||!Re.submitted)}}let Kn=(()=>{var Le;class be extends fn{constructor(Re){super(Re)}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)(F.rXU(zt,2))},Le.\u0275dir=F.FsC({type:Le,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Re,at){2&Re&&F.AVh("ng-untouched",at.isUntouched)("ng-touched",at.isTouched)("ng-pristine",at.isPristine)("ng-dirty",at.isDirty)("ng-valid",at.isValid)("ng-invalid",at.isInvalid)("ng-pending",at.isPending)},features:[F.Vt3]}),be})();const Xt="VALID",yn="INVALID",Kt="PENDING",an="DISABLED";class Yn{}class Bt extends Yn{constructor(be,ke){super(),this.value=be,this.source=ke}}class nn extends Yn{constructor(be,ke){super(),this.pristine=be,this.source=ke}}class On extends Yn{constructor(be,ke){super(),this.touched=be,this.source=ke}}class wn extends Yn{constructor(be,ke){super(),this.status=be,this.source=ke}}function Ie(Le){return null!=Le&&!Array.isArray(Le)&&"object"==typeof Le}class k{constructor(be,ke){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,F.EWP)(()=>this.statusReactive()),this.statusReactive=(0,F.vPA)(void 0),this._pristine=(0,F.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,F.vPA)(!0),this._touched=(0,F.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,F.vPA)(!1),this._events=new I.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(be),this._assignAsyncValidators(ke)}get validator(){return this._composedValidatorFn}set validator(be){this._rawValidators=this._composedValidatorFn=be}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(be){this._rawAsyncValidators=this._composedAsyncValidatorFn=be}get parent(){return this._parent}get status(){return(0,F.O8t)(this.statusReactive)}set status(be){(0,F.O8t)(()=>this.statusReactive.set(be))}get valid(){return this.status===Xt}get invalid(){return this.status===yn}get pending(){return this.status==Kt}get disabled(){return this.status===an}get enabled(){return this.status!==an}get pristine(){return(0,F.O8t)(this.pristineReactive)}set pristine(be){(0,F.O8t)(()=>this.pristineReactive.set(be))}get dirty(){return!this.pristine}get touched(){return(0,F.O8t)(this.touchedReactive)}set touched(be){(0,F.O8t)(()=>this.touchedReactive.set(be))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(be){this._assignValidators(be)}setAsyncValidators(be){this._assignAsyncValidators(be)}addValidators(be){this.setValidators(It(be,this._rawValidators))}addAsyncValidators(be){this.setAsyncValidators(It(be,this._rawAsyncValidators))}removeValidators(be){this.setValidators(bt(be,this._rawValidators))}removeAsyncValidators(be){this.setAsyncValidators(bt(be,this._rawAsyncValidators))}hasValidator(be){return lt(this._rawValidators,be)}hasAsyncValidator(be){return lt(this._rawAsyncValidators,be)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(be={}){var ke;const Re=!1===this.touched;this.touched=!0;const at=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;this._parent&&!be.onlySelf&&this._parent.markAsTouched({...be,sourceControl:at}),Re&&!1!==be.emitEvent&&this._events.next(new On(!0,at))}markAllAsTouched(be={}){this.markAsTouched({onlySelf:!0,emitEvent:be.emitEvent,sourceControl:this}),this._forEachChild(ke=>ke.markAllAsTouched(be))}markAsUntouched(be={}){var ke;const Re=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const at=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;this._forEachChild(Qt=>{Qt.markAsUntouched({onlySelf:!0,emitEvent:be.emitEvent,sourceControl:at})}),this._parent&&!be.onlySelf&&this._parent._updateTouched(be,at),Re&&!1!==be.emitEvent&&this._events.next(new On(!1,at))}markAsDirty(be={}){var ke;const Re=!0===this.pristine;this.pristine=!1;const at=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;this._parent&&!be.onlySelf&&this._parent.markAsDirty({...be,sourceControl:at}),Re&&!1!==be.emitEvent&&this._events.next(new nn(!1,at))}markAsPristine(be={}){var ke;const Re=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const at=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;this._forEachChild(Qt=>{Qt.markAsPristine({onlySelf:!0,emitEvent:be.emitEvent})}),this._parent&&!be.onlySelf&&this._parent._updatePristine(be,at),Re&&!1!==be.emitEvent&&this._events.next(new nn(!0,at))}markAsPending(be={}){var ke;this.status=Kt;const Re=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;!1!==be.emitEvent&&(this._events.next(new wn(this.status,Re)),this.statusChanges.emit(this.status)),this._parent&&!be.onlySelf&&this._parent.markAsPending({...be,sourceControl:Re})}disable(be={}){var ke;const Re=this._parentMarkedDirty(be.onlySelf);this.status=an,this.errors=null,this._forEachChild(Qt=>{Qt.disable({...be,onlySelf:!0})}),this._updateValue();const at=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;!1!==be.emitEvent&&(this._events.next(new Bt(this.value,at)),this._events.next(new wn(this.status,at)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...be,skipPristineCheck:Re},this),this._onDisabledChange.forEach(Qt=>Qt(!0))}enable(be={}){const ke=this._parentMarkedDirty(be.onlySelf);this.status=Xt,this._forEachChild(Re=>{Re.enable({...be,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:be.emitEvent}),this._updateAncestors({...be,skipPristineCheck:ke},this),this._onDisabledChange.forEach(Re=>Re(!1))}_updateAncestors(be,ke){this._parent&&!be.onlySelf&&(this._parent.updateValueAndValidity(be),be.skipPristineCheck||this._parent._updatePristine({},ke),this._parent._updateTouched({},ke))}setParent(be){this._parent=be}getRawValue(){return this.value}updateValueAndValidity(be={}){var ke;if(this._setInitialStatus(),this._updateValue(),this.enabled){const at=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xt||this.status===Kt)&&this._runAsyncValidator(at,be.emitEvent)}const Re=null!==(ke=be.sourceControl)&&void 0!==ke?ke:this;!1!==be.emitEvent&&(this._events.next(new Bt(this.value,Re)),this._events.next(new wn(this.status,Re)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!be.onlySelf&&this._parent.updateValueAndValidity({...be,sourceControl:Re})}_updateTreeValidity(be={emitEvent:!0}){this._forEachChild(ke=>ke._updateTreeValidity(be)),this.updateValueAndValidity({onlySelf:!0,emitEvent:be.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?an:Xt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(be,ke){if(this.asyncValidator){this.status=Kt,this._hasOwnPendingAsyncValidator={emitEvent:!1!==ke};const Re=Te(this.asyncValidator(this));this._asyncValidationSubscription=Re.subscribe(at=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(at,{emitEvent:ke,shouldHaveEmitted:be})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var be,ke;this._asyncValidationSubscription.unsubscribe();const Re=null!==(be=null===(ke=this._hasOwnPendingAsyncValidator)||void 0===ke?void 0:ke.emitEvent)&&void 0!==be&&be;return this._hasOwnPendingAsyncValidator=null,Re}return!1}setErrors(be,ke={}){this.errors=be,this._updateControlsErrors(!1!==ke.emitEvent,this,ke.shouldHaveEmitted)}get(be){let ke=be;return null==ke||(Array.isArray(ke)||(ke=ke.split(".")),0===ke.length)?null:ke.reduce((Re,at)=>Re&&Re._find(at),this)}getError(be,ke){const Re=ke?this.get(ke):this;return Re&&Re.errors?Re.errors[be]:null}hasError(be,ke){return!!this.getError(be,ke)}get root(){let be=this;for(;be._parent;)be=be._parent;return be}_updateControlsErrors(be,ke,Re){this.status=this._calculateStatus(),be&&this.statusChanges.emit(this.status),(be||Re)&&this._events.next(new wn(this.status,ke)),this._parent&&this._parent._updateControlsErrors(be,ke,Re)}_initObservables(){this.valueChanges=new F.bkB,this.statusChanges=new F.bkB}_calculateStatus(){return this._allControlsDisabled()?an:this.errors?yn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kt)?Kt:this._anyControlsHaveStatus(yn)?yn:Xt}_anyControlsHaveStatus(be){return this._anyControls(ke=>ke.status===be)}_anyControlsDirty(){return this._anyControls(be=>be.dirty)}_anyControlsTouched(){return this._anyControls(be=>be.touched)}_updatePristine(be,ke){const Re=!this._anyControlsDirty(),at=this.pristine!==Re;this.pristine=Re,this._parent&&!be.onlySelf&&this._parent._updatePristine(be,ke),at&&this._events.next(new nn(this.pristine,ke))}_updateTouched(be={},ke){this.touched=this._anyControlsTouched(),this._events.next(new On(this.touched,ke)),this._parent&&!be.onlySelf&&this._parent._updateTouched(be,ke)}_registerOnCollectionChange(be){this._onCollectionChange=be}_setUpdateStrategy(be){Ie(be)&&null!=be.updateOn&&(this._updateOn=be.updateOn)}_parentMarkedDirty(be){return!be&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(be){return null}_assignValidators(be){this._rawValidators=Array.isArray(be)?be.slice():be,this._composedValidatorFn=function mr(Le){return Array.isArray(Le)?Xe(Le):Le||null}(this._rawValidators)}_assignAsyncValidators(be){this._rawAsyncValidators=Array.isArray(be)?be.slice():be,this._composedAsyncValidatorFn=function te(Le){return Array.isArray(Le)?yt(Le):Le||null}(this._rawAsyncValidators)}}const Ve=new F.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>vt}),vt="always";function _n(Le,be,ke=vt){var Re,at;(function ot(Le,be){const ke=function ht(Le){return Le._rawValidators}(Le);null!==be.validator?Le.setValidators(Ut(ke,be.validator)):"function"==typeof ke&&Le.setValidators([ke]);const Re=function Lt(Le){return Le._rawAsyncValidators}(Le);null!==be.asyncValidator?Le.setAsyncValidators(Ut(Re,be.asyncValidator)):"function"==typeof Re&&Le.setAsyncValidators([Re]);const at=()=>Le.updateValueAndValidity();$e(be._rawValidators,at),$e(be._rawAsyncValidators,at)})(Le,be),be.valueAccessor.writeValue(Le.value),(Le.disabled||"always"===ke)&&(null===(Re=(at=be.valueAccessor).setDisabledState)||void 0===Re||Re.call(at,Le.disabled)),function vn(Le,be){be.valueAccessor.registerOnChange(ke=>{Le._pendingValue=ke,Le._pendingChange=!0,Le._pendingDirty=!0,"change"===Le.updateOn&&cr(Le,be)})}(Le,be),function Pr(Le,be){const ke=(Re,at)=>{be.valueAccessor.writeValue(Re),at&&be.viewToModelUpdate(Re)};Le.registerOnChange(ke),be._registerOnDestroy(()=>{Le._unregisterOnChange(ke)})}(Le,be),function Hn(Le,be){be.valueAccessor.registerOnTouched(()=>{Le._pendingTouched=!0,"blur"===Le.updateOn&&Le._pendingChange&&cr(Le,be),"submit"!==Le.updateOn&&Le.markAsTouched()})}(Le,be),function pt(Le,be){if(be.valueAccessor.setDisabledState){const ke=Re=>{be.valueAccessor.setDisabledState(Re)};Le.registerOnDisabledChange(ke),be._registerOnDestroy(()=>{Le._unregisterOnDisabledChange(ke)})}}(Le,be)}function $e(Le,be){Le.forEach(ke=>{ke.registerOnValidatorChange&&ke.registerOnValidatorChange(be)})}function cr(Le,be){Le._pendingDirty&&Le.markAsDirty(),Le.setValue(Le._pendingValue,{emitModelToViewChange:!1}),be.viewToModelUpdate(Le._pendingValue),Le._pendingChange=!1}function ca(Le,be){const ke=Le.indexOf(be);ke>-1&&Le.splice(ke,1)}function _o(Le){return"object"==typeof Le&&null!==Le&&2===Object.keys(Le).length&&"value"in Le&&"disabled"in Le}Promise.resolve();const Na=class extends k{constructor(be=null,ke,Re){super(function sr(Le){return(Ie(Le)?Le.validators:Le)||null}(ke),function Mr(Le,be){return(Ie(be)?be.asyncValidators:Le)||null}(Re,ke)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(be),this._setUpdateStrategy(ke),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ie(ke)&&(ke.nonNullable||ke.initialValueIsDefault)&&(this.defaultValue=_o(be)?be.value:be)}setValue(be,ke={}){this.value=this._pendingValue=be,this._onChange.length&&!1!==ke.emitModelToViewChange&&this._onChange.forEach(Re=>Re(this.value,!1!==ke.emitViewToModelChange)),this.updateValueAndValidity(ke)}patchValue(be,ke={}){this.setValue(be,ke)}reset(be=this.defaultValue,ke={}){this._applyFormState(be),this.markAsPristine(ke),this.markAsUntouched(ke),this.setValue(this.value,ke),this._pendingChange=!1}_updateValue(){}_anyControls(be){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(be){this._onChange.push(be)}_unregisterOnChange(be){ca(this._onChange,be)}registerOnDisabledChange(be){this._onDisabledChange.push(be)}_unregisterOnDisabledChange(be){ca(this._onDisabledChange,be)}_forEachChild(be){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(be){_o(be)?(this.value=this._pendingValue=be.value,be.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=be}},Go={provide:zt,useExisting:(0,F.Rfq)(()=>ba)},Aa=Promise.resolve();let ba=(()=>{var Le;class be extends zt{constructor(Re,at,Qt,Sn,Fn,Yr){super(),this._changeDetectorRef=Fn,this.callSetDisabledState=Yr,this.control=new Na,this._registered=!1,this.name="",this.update=new F.bkB,this._parent=Re,this._setValidators(at),this._setAsyncValidators(Qt),this.valueAccessor=function fo(Le,be){if(!be)return null;let ke,Re,at;return Array.isArray(be),be.forEach(Qt=>{Qt.constructor===E?ke=Qt:function Vs(Le){return Object.getPrototypeOf(Le.constructor)===f}(Qt)?Re=Qt:at=Qt}),at||Re||ke||null}(0,Sn)}ngOnChanges(Re){if(this._checkForErrors(),!this._registered||"name"in Re){if(this._registered&&(this._checkName(),this.formDirective)){const at=Re.name.previousValue;this.formDirective.removeControl({name:at,path:this._getPath(at)})}this._setUpControl()}"isDisabled"in Re&&this._updateDisabled(Re),function vs(Le,be){if(!Le.hasOwnProperty("model"))return!1;const ke=Le.model;return!!ke.isFirstChange()||!Object.is(be,ke.currentValue)}(Re,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Re){this.viewModel=Re,this.update.emit(Re)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_n(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Re){Aa.then(()=>{var at;this.control.setValue(Re,{emitViewToModelChange:!1}),null===(at=this._changeDetectorRef)||void 0===at||at.markForCheck()})}_updateDisabled(Re){const at=Re.isDisabled.currentValue,Qt=0!==at&&(0,F.L39)(at);Aa.then(()=>{var Sn;Qt&&!this.control.disabled?this.control.disable():!Qt&&this.control.disabled&&this.control.enable(),null===(Sn=this._changeDetectorRef)||void 0===Sn||Sn.markForCheck()})}_getPath(Re){return this._parent?function Ft(Le,be){return[...be.path,Le]}(Re,this._parent):[Re]}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)(F.rXU(St,9),F.rXU(K,10),F.rXU(z,10),F.rXU(h,10),F.rXU(F.gRc,8),F.rXU(Ve,8))},Le.\u0275dir=F.FsC({type:Le,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[F.Jv_([Go]),F.Vt3,F.OA$]}),be})();const Rl={provide:h,useExisting:(0,F.Rfq)(()=>Pl),multi:!0};let Pl=(()=>{var Le;class be extends f{writeValue(Re){this.setProperty("value",null==Re?"":Re)}registerOnChange(Re){this.onChange=at=>{Re(""==at?null:parseFloat(at))}}}return(Le=be).\u0275fac=(()=>{let ke;return function(at){return(ke||(ke=F.xGo(Le)))(at||Le)}})(),Le.\u0275dir=F.FsC({type:Le,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Re,at){1&Re&&F.bIt("input",function(Sn){return at.onChange(Sn.target.value)})("blur",function(){return at.onTouched()})},features:[F.Jv_([Rl]),F.Vt3]}),be})();function Yo(Le){return"number"==typeof Le?Le:parseFloat(Le)}let to=(()=>{var Le;class be{constructor(){this._validator=J}ngOnChanges(Re){if(this.inputName in Re){const at=this.normalizeInput(Re[this.inputName].currentValue);this._enabled=this.enabled(at),this._validator=this._enabled?this.createValidator(at):J,this._onChange&&this._onChange()}}validate(Re){return this._validator(Re)}registerOnValidatorChange(Re){this._onChange=Re}enabled(Re){return null!=Re}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)},Le.\u0275dir=F.FsC({type:Le,features:[F.OA$]}),be})();const ri={provide:K,useExisting:(0,F.Rfq)(()=>ka),multi:!0};let ka=(()=>{var Le;class be extends to{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=Re=>Yo(Re),this.createValidator=Re=>function ee(Le){return be=>{if(N(be.value)||N(Le))return null;const ke=parseFloat(be.value);return!isNaN(ke)&&ke>Le?{max:{max:Le,actual:be.value}}:null}}(Re)}}return(Le=be).\u0275fac=(()=>{let ke;return function(at){return(ke||(ke=F.xGo(Le)))(at||Le)}})(),Le.\u0275dir=F.FsC({type:Le,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Re,at){2&Re&&F.BMQ("max",at._enabled?at.max:null)},inputs:{max:"max"},features:[F.Jv_([ri]),F.Vt3]}),be})();const Xa={provide:K,useExisting:(0,F.Rfq)(()=>ua),multi:!0};let ua=(()=>{var Le;class be extends to{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=Re=>Yo(Re),this.createValidator=Re=>function X(Le){return be=>{if(N(be.value)||N(Le))return null;const ke=parseFloat(be.value);return!isNaN(ke)&&ke<Le?{min:{min:Le,actual:be.value}}:null}}(Re)}}return(Le=be).\u0275fac=(()=>{let ke;return function(at){return(ke||(ke=F.xGo(Le)))(at||Le)}})(),Le.\u0275dir=F.FsC({type:Le,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Re,at){2&Re&&F.BMQ("min",at._enabled?at.min:null)},inputs:{min:"min"},features:[F.Jv_([Xa]),F.Vt3]}),be})(),R=(()=>{var Le;class be{}return(Le=be).\u0275fac=function(Re){return new(Re||Le)},Le.\u0275mod=F.$C({type:Le}),Le.\u0275inj=F.G2t({}),be})(),Ht=(()=>{var Le;class be{static withConfig(Re){var at;return{ngModule:be,providers:[{provide:Ve,useValue:null!==(at=Re.callSetDisabledState)&&void 0!==at?at:vt}]}}}return(Le=be).\u0275fac=function(Re){return new(Re||Le)},Le.\u0275mod=F.$C({type:Le}),Le.\u0275inj=F.G2t({imports:[R]}),be})()},345:(br,kn,je)=>{"use strict";je.d(kn,{Bb:()=>kt,hE:()=>bt,sG:()=>yt,up:()=>ct});var F=je(177),j=je(3953);class Mt extends F.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jt extends Mt{static makeCurrent(){(0,F.ZD)(new Jt)}onAndCancel(Xt,yn,Kt){return Xt.addEventListener(yn,Kt),()=>{Xt.removeEventListener(yn,Kt)}}dispatchEvent(Xt,yn){Xt.dispatchEvent(yn)}remove(Xt){Xt.parentNode&&Xt.parentNode.removeChild(Xt)}createElement(Xt,yn){return(yn=yn||this.getDefaultDocument()).createElement(Xt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Xt){return Xt.nodeType===Node.ELEMENT_NODE}isShadowRoot(Xt){return Xt instanceof DocumentFragment}getGlobalEventTarget(Xt,yn){return"window"===yn?window:"document"===yn?Xt:"body"===yn?Xt.body:null}getBaseHref(Xt){const yn=function _e(){return a=a||document.querySelector("base"),a?a.getAttribute("href"):null}();return null==yn?null:function q(pn){return new URL(pn,document.baseURI).pathname}(yn)}resetBaseElement(){a=null}getUserAgent(){return window.navigator.userAgent}getCookie(Xt){return(0,F._b)(document.cookie,Xt)}}let a=null,C=(()=>{var pn;class Xt{build(){return new XMLHttpRequest}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();const _=new j.nKC("");let w=(()=>{var pn;class Xt{constructor(Kt,an){this._zone=an,this._eventNameToPlugin=new Map,Kt.forEach(Yn=>{Yn.manager=this}),this._plugins=Kt.slice().reverse()}addEventListener(Kt,an,Yn){return this._findPluginFor(an).addEventListener(Kt,an,Yn)}getZone(){return this._zone}_findPluginFor(Kt){let an=this._eventNameToPlugin.get(Kt);if(an)return an;if(an=this._plugins.find(Bt=>Bt.supports(Kt)),!an)throw new j.wOt(5101,!1);return this._eventNameToPlugin.set(Kt,an),an}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(_),j.KVO(j.SKi))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();class I{constructor(Xt){this._doc=Xt}}const D="ng-app-id";let d=(()=>{var pn;class Xt{constructor(Kt,an,Yn,Bt={}){this.doc=Kt,this.appId=an,this.nonce=Yn,this.platformId=Bt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,F.Vy)(Bt),this.resetHostNodes()}addStyles(Kt){for(const an of Kt)1===this.changeUsageCount(an,1)&&this.onStyleAdded(an)}removeStyles(Kt){for(const an of Kt)this.changeUsageCount(an,-1)<=0&&this.onStyleRemoved(an)}ngOnDestroy(){const Kt=this.styleNodesInDOM;Kt&&(Kt.forEach(an=>an.remove()),Kt.clear());for(const an of this.getAllStyles())this.onStyleRemoved(an);this.resetHostNodes()}addHost(Kt){this.hostNodes.add(Kt);for(const an of this.getAllStyles())this.addStyleToHost(Kt,an)}removeHost(Kt){this.hostNodes.delete(Kt)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Kt){for(const an of this.hostNodes)this.addStyleToHost(an,Kt)}onStyleRemoved(Kt){var an;const Yn=this.styleRef;null===(an=Yn.get(Kt))||void 0===an||null===(an=an.elements)||void 0===an||an.forEach(Bt=>Bt.remove()),Yn.delete(Kt)}collectServerRenderedStyles(){var Kt;const an=null===(Kt=this.doc.head)||void 0===Kt?void 0:Kt.querySelectorAll(`style[${D}="${this.appId}"]`);if(null!=an&&an.length){const Yn=new Map;return an.forEach(Bt=>{null!=Bt.textContent&&Yn.set(Bt.textContent,Bt)}),Yn}return null}changeUsageCount(Kt,an){const Yn=this.styleRef;if(Yn.has(Kt)){const Bt=Yn.get(Kt);return Bt.usage+=an,Bt.usage}return Yn.set(Kt,{usage:an,elements:[]}),an}getStyleElement(Kt,an){const Yn=this.styleNodesInDOM,Bt=null==Yn?void 0:Yn.get(an);if((null==Bt?void 0:Bt.parentNode)===Kt)return Yn.delete(an),Bt.removeAttribute(D),Bt;{const nn=this.doc.createElement("style");return this.nonce&&nn.setAttribute("nonce",this.nonce),nn.textContent=an,this.platformIsServer&&nn.setAttribute(D,this.appId),Kt.appendChild(nn),nn}}addStyleToHost(Kt,an){var Yn;const Bt=this.getStyleElement(Kt,an),nn=this.styleRef,On=null===(Yn=nn.get(an))||void 0===Yn?void 0:Yn.elements;On?On.push(Bt):nn.set(an,{elements:[Bt],usage:1})}resetHostNodes(){const Kt=this.hostNodes;Kt.clear(),Kt.add(this.doc.head)}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ),j.KVO(j.sZ2),j.KVO(j.BIS,8),j.KVO(j.Agw))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();const f={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h=/%COMP%/g,p="%COMP%",g=`_nghost-${p}`,v=`_ngcontent-${p}`,x=new j.nKC("",{providedIn:"root",factory:()=>!0});function Z(pn,Xt){return Xt.map(yn=>yn.replace(h,pn))}let K=(()=>{var pn;class Xt{constructor(Kt,an,Yn,Bt,nn,On,wn,zn=null){this.eventManager=Kt,this.sharedStylesHost=an,this.appId=Yn,this.removeStylesOnCompDestroy=Bt,this.doc=nn,this.platformId=On,this.ngZone=wn,this.nonce=zn,this.rendererByCompId=new Map,this.platformIsServer=(0,F.Vy)(On),this.defaultRenderer=new z(Kt,nn,wn,this.platformIsServer)}createRenderer(Kt,an){if(!Kt||!an)return this.defaultRenderer;this.platformIsServer&&an.encapsulation===j.gXe.ShadowDom&&(an={...an,encapsulation:j.gXe.Emulated});const Yn=this.getOrCreateRenderer(Kt,an);return Yn instanceof ve?Yn.applyToHost(Kt):Yn instanceof Y&&Yn.applyStyles(),Yn}getOrCreateRenderer(Kt,an){const Yn=this.rendererByCompId;let Bt=Yn.get(an.id);if(!Bt){const nn=this.doc,On=this.ngZone,wn=this.eventManager,zn=this.sharedStylesHost,lr=this.removeStylesOnCompDestroy,sr=this.platformIsServer;switch(an.encapsulation){case j.gXe.Emulated:Bt=new ve(wn,zn,an,this.appId,lr,nn,On,sr);break;case j.gXe.ShadowDom:return new ee(wn,zn,Kt,an,nn,On,this.nonce,sr);default:Bt=new Y(wn,zn,an,lr,nn,On,sr)}Yn.set(an.id,Bt)}return Bt}ngOnDestroy(){this.rendererByCompId.clear()}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(w),j.KVO(d),j.KVO(j.sZ2),j.KVO(x),j.KVO(F.qQ),j.KVO(j.Agw),j.KVO(j.SKi),j.KVO(j.BIS))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();class z{constructor(Xt,yn,Kt,an){this.eventManager=Xt,this.doc=yn,this.ngZone=Kt,this.platformIsServer=an,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Xt,yn){return yn?this.doc.createElementNS(f[yn]||yn,Xt):this.doc.createElement(Xt)}createComment(Xt){return this.doc.createComment(Xt)}createText(Xt){return this.doc.createTextNode(Xt)}appendChild(Xt,yn){(X(Xt)?Xt.content:Xt).appendChild(yn)}insertBefore(Xt,yn,Kt){Xt&&(X(Xt)?Xt.content:Xt).insertBefore(yn,Kt)}removeChild(Xt,yn){Xt&&Xt.removeChild(yn)}selectRootElement(Xt,yn){let Kt="string"==typeof Xt?this.doc.querySelector(Xt):Xt;if(!Kt)throw new j.wOt(-5104,!1);return yn||(Kt.textContent=""),Kt}parentNode(Xt){return Xt.parentNode}nextSibling(Xt){return Xt.nextSibling}setAttribute(Xt,yn,Kt,an){if(an){yn=an+":"+yn;const Yn=f[an];Yn?Xt.setAttributeNS(Yn,yn,Kt):Xt.setAttribute(yn,Kt)}else Xt.setAttribute(yn,Kt)}removeAttribute(Xt,yn,Kt){if(Kt){const an=f[Kt];an?Xt.removeAttributeNS(an,yn):Xt.removeAttribute(`${Kt}:${yn}`)}else Xt.removeAttribute(yn)}addClass(Xt,yn){Xt.classList.add(yn)}removeClass(Xt,yn){Xt.classList.remove(yn)}setStyle(Xt,yn,Kt,an){an&(j.czy.DashCase|j.czy.Important)?Xt.style.setProperty(yn,Kt,an&j.czy.Important?"important":""):Xt.style[yn]=Kt}removeStyle(Xt,yn,Kt){Kt&j.czy.DashCase?Xt.style.removeProperty(yn):Xt.style[yn]=""}setProperty(Xt,yn,Kt){null!=Xt&&(Xt[yn]=Kt)}setValue(Xt,yn){Xt.nodeValue=yn}listen(Xt,yn,Kt){if("string"==typeof Xt&&!(Xt=(0,F.QT)().getGlobalEventTarget(this.doc,Xt)))throw new Error(`Unsupported event target ${Xt} for event ${yn}`);return this.eventManager.addEventListener(Xt,yn,this.decoratePreventDefault(Kt))}decoratePreventDefault(Xt){return yn=>{if("__ngUnwrap__"===yn)return Xt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Xt(yn)):Xt(yn))&&yn.preventDefault()}}}function X(pn){return"TEMPLATE"===pn.tagName&&void 0!==pn.content}class ee extends z{constructor(Xt,yn,Kt,an,Yn,Bt,nn,On){super(Xt,Yn,Bt,On),this.sharedStylesHost=yn,this.hostEl=Kt,this.shadowRoot=Kt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wn=Z(an.id,an.styles);for(const zn of wn){const lr=document.createElement("style");nn&&lr.setAttribute("nonce",nn),lr.textContent=zn,this.shadowRoot.appendChild(lr)}}nodeOrShadowRoot(Xt){return Xt===this.hostEl?this.shadowRoot:Xt}appendChild(Xt,yn){return super.appendChild(this.nodeOrShadowRoot(Xt),yn)}insertBefore(Xt,yn,Kt){return super.insertBefore(this.nodeOrShadowRoot(Xt),yn,Kt)}removeChild(Xt,yn){return super.removeChild(this.nodeOrShadowRoot(Xt),yn)}parentNode(Xt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Xt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Y extends z{constructor(Xt,yn,Kt,an,Yn,Bt,nn,On){super(Xt,Yn,Bt,nn),this.sharedStylesHost=yn,this.removeStylesOnCompDestroy=an,this.styles=On?Z(On,Kt.styles):Kt.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ve extends Y{constructor(Xt,yn,Kt,an,Yn,Bt,nn,On){const wn=an+"-"+Kt.id;super(Xt,yn,Kt,Yn,Bt,nn,On,wn),this.contentAttr=function E(pn){return v.replace(h,pn)}(wn),this.hostAttr=function N(pn){return g.replace(h,pn)}(wn)}applyToHost(Xt){this.applyStyles(),this.setAttribute(Xt,this.hostAttr,"")}createElement(Xt,yn){const Kt=super.createElement(Xt,yn);return super.setAttribute(Kt,this.contentAttr,""),Kt}}let xe=(()=>{var pn;class Xt extends I{constructor(Kt){super(Kt)}supports(Kt){return!0}addEventListener(Kt,an,Yn){return Kt.addEventListener(an,Yn,!1),()=>this.removeEventListener(Kt,an,Yn)}removeEventListener(Kt,an,Yn){return Kt.removeEventListener(an,Yn)}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})(),ae=(()=>{var pn;class Xt extends I{constructor(Kt){super(Kt),this.delegate=(0,j.WQX)(j.zAP,{optional:!0})}supports(Kt){return!!this.delegate&&this.delegate.supports(Kt)}addEventListener(Kt,an,Yn){return this.delegate.addEventListener(Kt,an,Yn)}removeEventListener(Kt,an,Yn){return this.delegate.removeEventListener(Kt,an,Yn)}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();const ge=["alt","control","meta","shift"],ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J={alt:pn=>pn.altKey,control:pn=>pn.ctrlKey,meta:pn=>pn.metaKey,shift:pn=>pn.shiftKey};let ce=(()=>{var pn;class Xt extends I{constructor(Kt){super(Kt)}supports(Kt){return null!=Xt.parseEventName(Kt)}addEventListener(Kt,an,Yn){const Bt=Xt.parseEventName(an),nn=Xt.eventCallback(Bt.fullKey,Yn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,F.QT)().onAndCancel(Kt,Bt.domEventName,nn))}static parseEventName(Kt){const an=Kt.toLowerCase().split("."),Yn=an.shift();if(0===an.length||"keydown"!==Yn&&"keyup"!==Yn)return null;const Bt=Xt._normalizeKey(an.pop());let nn="",On=an.indexOf("code");if(On>-1&&(an.splice(On,1),nn="code."),ge.forEach(zn=>{const lr=an.indexOf(zn);lr>-1&&(an.splice(lr,1),nn+=zn+".")}),nn+=Bt,0!=an.length||0===Bt.length)return null;const wn={};return wn.domEventName=Yn,wn.fullKey=nn,wn}static matchEventFullKeyCode(Kt,an){let Yn=ne[Kt.key]||Kt.key,Bt="";return an.indexOf("code.")>-1&&(Yn=Kt.code,Bt="code."),!(null==Yn||!Yn)&&(Yn=Yn.toLowerCase()," "===Yn?Yn="space":"."===Yn&&(Yn="dot"),ge.forEach(nn=>{nn!==Yn&&(0,J[nn])(Kt)&&(Bt+=nn+".")}),Bt+=Yn,Bt===an)}static eventCallback(Kt,an,Yn){return Bt=>{Xt.matchEventFullKeyCode(Bt,Kt)&&Yn.runGuarded(()=>an(Bt))}}static _normalizeKey(Kt){return"esc"===Kt?"escape":Kt}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac}),Xt})();const yt=(0,j.oH4)(j.fpN,"browser",[{provide:j.Agw,useValue:F.AJ},{provide:j.PLl,useValue:function me(){Jt.makeCurrent()},multi:!0},{provide:F.qQ,useFactory:function Xe(){return(0,j.TL$)(document),document},deps:[]}]),Ut=new j.nKC(""),ht=[{provide:j.e01,useClass:class M{addToWindow(Xt){j.JZv.getAngularTestability=(Kt,an=!0)=>{const Yn=Xt.findTestabilityInTree(Kt,an);if(null==Yn)throw new j.wOt(5103,!1);return Yn},j.JZv.getAllAngularTestabilities=()=>Xt.getAllTestabilities(),j.JZv.getAllAngularRootElements=()=>Xt.getAllRootElements(),j.JZv.frameworkStabilizers||(j.JZv.frameworkStabilizers=[]),j.JZv.frameworkStabilizers.push(Kt=>{const an=j.JZv.getAllAngularTestabilities();let Yn=an.length;const Bt=function(){Yn--,0==Yn&&Kt()};an.forEach(nn=>{nn.whenStable(Bt)})})}findTestabilityInTree(Xt,yn,Kt){if(null==yn)return null;const an=Xt.getTestability(yn);return null!=an?an:Kt?(0,F.QT)().isShadowRoot(yn)?this.findTestabilityInTree(Xt,yn.host,!0):this.findTestabilityInTree(Xt,yn.parentElement,!0):null}},deps:[]},{provide:j.WHO,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]},{provide:j.NYb,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]}],Lt=[{provide:j.H8p,useValue:"root"},{provide:j.zcH,useFactory:function Oe(){return new j.zcH},deps:[]},{provide:_,useClass:xe,multi:!0,deps:[F.qQ,j.SKi,j.Agw]},{provide:_,useClass:ce,multi:!0,deps:[F.qQ]},{provide:_,useClass:ae,multi:!0},K,d,w,{provide:j._9s,useExisting:K},{provide:F.N0,useClass:C,deps:[]},[]];let kt=(()=>{var pn;class Xt{constructor(Kt){}static withServerTransition(Kt){return{ngModule:Xt,providers:[{provide:j.sZ2,useValue:Kt.appId}]}}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(Ut,12))},pn.\u0275mod=j.$C({type:pn}),pn.\u0275inj=j.G2t({providers:[...Lt,...ht],imports:[F.MD,j.Hbi]}),Xt})(),bt=(()=>{var pn;class Xt{constructor(Kt){this._doc=Kt}getTitle(){return this._doc.title}setTitle(Kt){this._doc.title=Kt||""}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac,providedIn:"root"}),Xt})(),ct=(()=>{var pn;class Xt{}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)},pn.\u0275prov=j.jDH({token:pn,factory:function(Kt){let an=null;return an=Kt?new(Kt||pn):j.KVO(ft),an},providedIn:"root"}),Xt})(),ft=(()=>{var pn;class Xt extends ct{constructor(Kt){super(),this._doc=Kt}sanitize(Kt,an){if(null==an)return null;switch(Kt){case j.WPN.NONE:return an;case j.WPN.HTML:return(0,j.ZF7)(an,"HTML")?(0,j.rcV)(an):(0,j.h9k)(this._doc,String(an)).toString();case j.WPN.STYLE:return(0,j.ZF7)(an,"Style")?(0,j.rcV)(an):an;case j.WPN.SCRIPT:if((0,j.ZF7)(an,"Script"))return(0,j.rcV)(an);throw new j.wOt(5200,!1);case j.WPN.URL:return(0,j.ZF7)(an,"URL")?(0,j.rcV)(an):(0,j.$MX)(String(an));case j.WPN.RESOURCE_URL:if((0,j.ZF7)(an,"ResourceURL"))return(0,j.rcV)(an);throw new j.wOt(5201,!1);default:throw new j.wOt(5202,!1)}}bypassSecurityTrustHtml(Kt){return(0,j.Kcf)(Kt)}bypassSecurityTrustStyle(Kt){return(0,j.cWb)(Kt)}bypassSecurityTrustScript(Kt){return(0,j.UyX)(Kt)}bypassSecurityTrustUrl(Kt){return(0,j.osQ)(Kt)}bypassSecurityTrustResourceUrl(Kt){return(0,j.e5t)(Kt)}}return(pn=Xt).\u0275fac=function(Kt){return new(Kt||pn)(j.KVO(F.qQ))},pn.\u0275prov=j.jDH({token:pn,factory:pn.\u0275fac,providedIn:"root"}),Xt})()},9858:(br,kn,je)=>{"use strict";je.d(kn,{nX:()=>Vr,Zp:()=>on,Z:()=>$s,Xk:()=>ht,Kp:()=>Ua,b:()=>fi,Ix:()=>bo,Wk:()=>wd,iI:()=>_h,Sd:()=>jn});var F=je(3953),j=je(1985),Mt=je(8071),a=je(6648),_e=je(7673),q=je(4412),M=je(4572);const _=(0,je(1853).L)(pe=>function(){pe(this),this.name="EmptyError",this.message="no elements in sequence"});var w=je(8793),I=je(9030),D=je(1203),d=je(8810),f=je(983),h=je(17),p=je(1413),g=je(8359),v=je(177),S=je(6354),x=je(5558),E=je(6697),N=je(9326),Z=je(9974),z=je(5964),G=je(1397),ie=je(4360);function X(pe){return(0,Z.N)((Ae,Fe)=>{let Ee=!1;Ae.subscribe((0,ie._)(Fe,ze=>{Ee=!0,Fe.next(ze)},()=>{Ee||Fe.next(pe),Fe.complete()}))})}function ee(pe=Y){return(0,Z.N)((Ae,Fe)=>{let Ee=!1;Ae.subscribe((0,ie._)(Fe,ze=>{Ee=!0,Fe.next(ze)},()=>Ee?Fe.complete():Fe.error(pe())))})}function Y(){return new _}var ve=je(3669);function xe(pe,Ae){const Fe=arguments.length>=2;return Ee=>Ee.pipe(pe?(0,z.p)((ze,Et)=>pe(ze,Et,Ee)):ve.D,(0,E.s)(1),Fe?X(Ae):ee(()=>new _))}function ae(pe,Ae){return(0,Mt.T)(Ae)?(0,G.Z)(pe,Ae,1):(0,G.Z)(pe,1)}var ge=je(8141),ne=je(8750);function J(pe){return(0,Z.N)((Ae,Fe)=>{let Et,Ee=null,ze=!1;Ee=Ae.subscribe((0,ie._)(Fe,void 0,void 0,Ot=>{Et=(0,ne.Tg)(pe(Ot,J(pe)(Ae))),Ee?(Ee.unsubscribe(),Ee=null,Et.subscribe(Fe)):ze=!0})),ze&&(Ee.unsubscribe(),Ee=null,Et.subscribe(Fe))})}function et(pe){return pe<=0?()=>f.w:(0,Z.N)((Ae,Fe)=>{let Ee=[];Ae.subscribe((0,ie._)(Fe,ze=>{Ee.push(ze),pe<Ee.length&&Ee.shift()},()=>{for(const ze of Ee)Fe.next(ze);Fe.complete()},void 0,()=>{Ee=null}))})}var V=je(3703);function me(pe){return(0,Z.N)((Ae,Fe)=>{try{Ae.subscribe(Fe)}finally{Fe.add(pe)}})}var Oe=je(9898),Xe=je(5343),yt=je(6365),Ut=je(345);const ht="primary",Lt=Symbol("RouteTitle");class kt{constructor(Ae){this.params=Ae||{}}has(Ae){return Object.prototype.hasOwnProperty.call(this.params,Ae)}get(Ae){if(this.has(Ae)){const Fe=this.params[Ae];return Array.isArray(Fe)?Fe[0]:Fe}return null}getAll(Ae){if(this.has(Ae)){const Fe=this.params[Ae];return Array.isArray(Fe)?Fe:[Fe]}return[]}get keys(){return Object.keys(this.params)}}function lt(pe){return new kt(pe)}function It(pe,Ae,Fe){const Ee=Fe.path.split("/");if(Ee.length>pe.length||"full"===Fe.pathMatch&&(Ae.hasChildren()||Ee.length<pe.length))return null;const ze={};for(let Et=0;Et<Ee.length;Et++){const Ot=Ee[Et],Nn=pe[Et];if(":"===Ot[0])ze[Ot.substring(1)]=Nn;else if(Ot!==Nn.path)return null}return{consumed:pe.slice(0,Ee.length),posParams:ze}}function Pt(pe,Ae){const Fe=pe?St(pe):void 0,Ee=Ae?St(Ae):void 0;if(!Fe||!Ee||Fe.length!=Ee.length)return!1;let ze;for(let Et=0;Et<Fe.length;Et++)if(ze=Fe[Et],!zt(pe[ze],Ae[ze]))return!1;return!0}function St(pe){return[...Object.keys(pe),...Object.getOwnPropertySymbols(pe)]}function zt(pe,Ae){if(Array.isArray(pe)&&Array.isArray(Ae)){if(pe.length!==Ae.length)return!1;const Fe=[...pe].sort(),Ee=[...Ae].sort();return Fe.every((ze,Et)=>Ee[Et]===ze)}return pe===Ae}function fn(pe){return pe.length>0?pe[pe.length-1]:null}function $n(pe){return function Jt(pe){return!!pe&&(pe instanceof j.c||(0,Mt.T)(pe.lift)&&(0,Mt.T)(pe.subscribe))}(pe)?pe:(0,F.jNT)(pe)?(0,a.H)(Promise.resolve(pe)):(0,_e.of)(pe)}const En={exact:function Ln(pe,Ae,Fe){if(!un(pe.segments,Ae.segments)||!Tn(pe.segments,Ae.segments,Fe)||pe.numberOfChildren!==Ae.numberOfChildren)return!1;for(const Ee in Ae.children)if(!pe.children[Ee]||!Ln(pe.children[Ee],Ae.children[Ee],Fe))return!1;return!0},subset:hn},Kn={exact:function pr(pe,Ae){return Pt(pe,Ae)},subset:function nr(pe,Ae){return Object.keys(Ae).length<=Object.keys(pe).length&&Object.keys(Ae).every(Fe=>zt(pe[Fe],Ae[Fe]))},ignored:()=>!0};function Mn(pe,Ae,Fe){return En[Fe.paths](pe.root,Ae.root,Fe.matrixParams)&&Kn[Fe.queryParams](pe.queryParams,Ae.queryParams)&&!("exact"===Fe.fragment&&pe.fragment!==Ae.fragment)}function hn(pe,Ae,Fe){return Xn(pe,Ae,Ae.segments,Fe)}function Xn(pe,Ae,Fe,Ee){if(pe.segments.length>Fe.length){const ze=pe.segments.slice(0,Fe.length);return!(!un(ze,Fe)||Ae.hasChildren()||!Tn(ze,Fe,Ee))}if(pe.segments.length===Fe.length){if(!un(pe.segments,Fe)||!Tn(pe.segments,Fe,Ee))return!1;for(const ze in Ae.children)if(!pe.children[ze]||!hn(pe.children[ze],Ae.children[ze],Ee))return!1;return!0}{const ze=Fe.slice(0,pe.segments.length),Et=Fe.slice(pe.segments.length);return!!(un(pe.segments,ze)&&Tn(pe.segments,ze,Ee)&&pe.children[ht])&&Xn(pe.children[ht],Ae,Et,Ee)}}function Tn(pe,Ae,Fe){return Ae.every((Ee,ze)=>Kn[Fe](pe[ze].parameters,Ee.parameters))}class ct{constructor(Ae=new ft([],{}),Fe={},Ee=null){this.root=Ae,this.queryParams=Fe,this.fragment=Ee}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return bn.serialize(this)}}class ft{constructor(Ae,Fe){this.segments=Ae,this.children=Fe,this.parent=null,Object.values(Fe).forEach(Ee=>Ee.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pn(this)}}class Qe{constructor(Ae,Fe){this.path=Ae,this.parameters=Fe}get parameterMap(){var Ae;return null!==(Ae=this._parameterMap)&&void 0!==Ae||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return Bt(this)}}function un(pe,Ae){return pe.length===Ae.length&&pe.every((Fe,Ee)=>Fe.path===Ae[Ee].path)}let jn=(()=>{var pe;class Ae{}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:()=>new rn,providedIn:"root"}),Ae})();class rn{parse(Ae){const Fe=new Ye(Ae);return new ct(Fe.parseRootSegment(),Fe.parseQueryParams(),Fe.parseFragment())}serialize(Ae){const Fe=`/${Un(Ae.root,!0)}`,Ee=function On(pe){const Ae=Object.entries(pe).map(([Fe,Ee])=>Array.isArray(Ee)?Ee.map(ze=>`${Xt(Fe)}=${Xt(ze)}`).join("&"):`${Xt(Fe)}=${Xt(Ee)}`).filter(Fe=>Fe);return Ae.length?`?${Ae.join("&")}`:""}(Ae.queryParams);return`${Fe}${Ee}${"string"==typeof Ae.fragment?`#${function yn(pe){return encodeURI(pe)}(Ae.fragment)}`:""}`}}const bn=new rn;function Pn(pe){return pe.segments.map(Ae=>Bt(Ae)).join("/")}function Un(pe,Ae){if(!pe.hasChildren())return Pn(pe);if(Ae){const Fe=pe.children[ht]?Un(pe.children[ht],!1):"",Ee=[];return Object.entries(pe.children).forEach(([ze,Et])=>{ze!==ht&&Ee.push(`${ze}:${Un(Et,!1)}`)}),Ee.length>0?`${Fe}(${Ee.join("//")})`:Fe}{const Fe=function An(pe,Ae){let Fe=[];return Object.entries(pe.children).forEach(([Ee,ze])=>{Ee===ht&&(Fe=Fe.concat(Ae(ze,Ee)))}),Object.entries(pe.children).forEach(([Ee,ze])=>{Ee!==ht&&(Fe=Fe.concat(Ae(ze,Ee)))}),Fe}(pe,(Ee,ze)=>ze===ht?[Un(pe.children[ht],!1)]:[`${ze}:${Un(Ee,!1)}`]);return 1===Object.keys(pe.children).length&&null!=pe.children[ht]?`${Pn(pe)}/${Fe[0]}`:`${Pn(pe)}/(${Fe.join("//")})`}}function pn(pe){return encodeURIComponent(pe).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xt(pe){return pn(pe).replace(/%3B/gi,";")}function Kt(pe){return pn(pe).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function an(pe){return decodeURIComponent(pe)}function Yn(pe){return an(pe.replace(/\+/g,"%20"))}function Bt(pe){return`${Kt(pe.path)}${function nn(pe){return Object.entries(pe).map(([Ae,Fe])=>`;${Kt(Ae)}=${Kt(Fe)}`).join("")}(pe.parameters)}`}const wn=/^[^\/()?;#]+/;function zn(pe){const Ae=pe.match(wn);return Ae?Ae[0]:""}const lr=/^[^\/()?;=#]+/,mr=/^[^=?&#]+/,te=/^[^&#]+/;class Ye{constructor(Ae){this.url=Ae,this.remaining=Ae}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){const Ae={};if(this.consumeOptional("?"))do{this.parseQueryParam(Ae)}while(this.consumeOptional("&"));return Ae}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const Ae=[];for(this.peekStartsWith("(")||Ae.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Ae.push(this.parseSegment());let Fe={};this.peekStartsWith("/(")&&(this.capture("/"),Fe=this.parseParens(!0));let Ee={};return this.peekStartsWith("(")&&(Ee=this.parseParens(!1)),(Ae.length>0||Object.keys(Fe).length>0)&&(Ee[ht]=new ft(Ae,Fe)),Ee}parseSegment(){const Ae=zn(this.remaining);if(""===Ae&&this.peekStartsWith(";"))throw new F.wOt(4009,!1);return this.capture(Ae),new Qe(an(Ae),this.parseMatrixParams())}parseMatrixParams(){const Ae={};for(;this.consumeOptional(";");)this.parseParam(Ae);return Ae}parseParam(Ae){const Fe=function sr(pe){const Ae=pe.match(lr);return Ae?Ae[0]:""}(this.remaining);if(!Fe)return;this.capture(Fe);let Ee="";if(this.consumeOptional("=")){const ze=zn(this.remaining);ze&&(Ee=ze,this.capture(Ee))}Ae[an(Fe)]=an(Ee)}parseQueryParam(Ae){const Fe=function Mr(pe){const Ae=pe.match(mr);return Ae?Ae[0]:""}(this.remaining);if(!Fe)return;this.capture(Fe);let Ee="";if(this.consumeOptional("=")){const Ot=function Ie(pe){const Ae=pe.match(te);return Ae?Ae[0]:""}(this.remaining);Ot&&(Ee=Ot,this.capture(Ee))}const ze=Yn(Fe),Et=Yn(Ee);if(Ae.hasOwnProperty(ze)){let Ot=Ae[ze];Array.isArray(Ot)||(Ot=[Ot],Ae[ze]=Ot),Ot.push(Et)}else Ae[ze]=Et}parseParens(Ae){const Fe={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Ee=zn(this.remaining),ze=this.remaining[Ee.length];if("/"!==ze&&")"!==ze&&";"!==ze)throw new F.wOt(4010,!1);let Et;Ee.indexOf(":")>-1?(Et=Ee.slice(0,Ee.indexOf(":")),this.capture(Et),this.capture(":")):Ae&&(Et=ht);const Ot=this.parseChildren();Fe[Et]=1===Object.keys(Ot).length?Ot[ht]:new ft([],Ot),this.consumeOptional("//")}return Fe}peekStartsWith(Ae){return this.remaining.startsWith(Ae)}consumeOptional(Ae){return!!this.peekStartsWith(Ae)&&(this.remaining=this.remaining.substring(Ae.length),!0)}capture(Ae){if(!this.consumeOptional(Ae))throw new F.wOt(4011,!1)}}function A(pe){return pe.segments.length>0?new ft([],{[ht]:pe}):pe}function k(pe){const Ae={};for(const[Ee,ze]of Object.entries(pe.children)){const Et=k(ze);if(Ee===ht&&0===Et.segments.length&&Et.hasChildren())for(const[Ot,Nn]of Object.entries(Et.children))Ae[Ot]=Nn;else(Et.segments.length>0||Et.hasChildren())&&(Ae[Ee]=Et)}return function B(pe){if(1===pe.numberOfChildren&&pe.children[ht]){const Ae=pe.children[ht];return new ft(pe.segments.concat(Ae.segments),Ae.children)}return pe}(new ft(pe.segments,Ae))}function L(pe){return pe instanceof ct}function H(pe){var Ae;let Fe;const Et=A(function Ee(Ot){const Nn={};for(const Cn of Ot.children){const Dr=Ee(Cn);Nn[Cn.outlet]=Dr}const ur=new ft(Ot.url,Nn);return Ot===pe&&(Fe=ur),ur}(pe.root));return null!==(Ae=Fe)&&void 0!==Ae?Ae:Et}function de(pe,Ae,Fe,Ee){let ze=pe;for(;ze.parent;)ze=ze.parent;if(0===Ae.length)return vt(ze,ze,ze,Fe,Ee);const Et=function He(pe){if("string"==typeof pe[0]&&1===pe.length&&"/"===pe[0])return new _n(!0,0,pe);let Ae=0,Fe=!1;const Ee=pe.reduce((ze,Et,Ot)=>{if("object"==typeof Et&&null!=Et){if(Et.outlets){const Nn={};return Object.entries(Et.outlets).forEach(([ur,Cn])=>{Nn[ur]="string"==typeof Cn?Cn.split("/"):Cn}),[...ze,{outlets:Nn}]}if(Et.segmentPath)return[...ze,Et.segmentPath]}return"string"!=typeof Et?[...ze,Et]:0===Ot?(Et.split("/").forEach((Nn,ur)=>{0==ur&&"."===Nn||(0==ur&&""===Nn?Fe=!0:".."===Nn?Ae++:""!=Nn&&ze.push(Nn))}),ze):[...ze,Et]},[]);return new _n(Fe,Ae,Ee)}(Ae);if(Et.toRoot())return vt(ze,ze,new ft([],{}),Fe,Ee);const Ot=function pt(pe,Ae,Fe){if(pe.isAbsolute)return new $e(Ae,!0,0);if(!Fe)return new $e(Ae,!1,NaN);if(null===Fe.parent)return new $e(Fe,!0,0);const Ee=Ke(pe.commands[0])?0:1;return function ot(pe,Ae,Fe){let Ee=pe,ze=Ae,Et=Fe;for(;Et>ze;){if(Et-=ze,Ee=Ee.parent,!Ee)throw new F.wOt(4005,!1);ze=Ee.segments.length}return new $e(Ee,!1,ze-Et)}(Fe,Fe.segments.length-1+Ee,pe.numberOfDoubleDots)}(Et,ze,pe),Nn=Ot.processChildren?Hn(Ot.segmentGroup,Ot.index,Et.commands):vn(Ot.segmentGroup,Ot.index,Et.commands);return vt(ze,Ot.segmentGroup,Nn,Fe,Ee)}function Ke(pe){return"object"==typeof pe&&null!=pe&&!pe.outlets&&!pe.segmentPath}function Ve(pe){return"object"==typeof pe&&null!=pe&&pe.outlets}function vt(pe,Ae,Fe,Ee,ze){let Ot,Et={};Ee&&Object.entries(Ee).forEach(([ur,Cn])=>{Et[ur]=Array.isArray(Cn)?Cn.map(Dr=>`${Dr}`):`${Cn}`}),Ot=pe===Ae?Fe:Ft(pe,Ae,Fe);const Nn=A(k(Ot));return new ct(Nn,Et,ze)}function Ft(pe,Ae,Fe){const Ee={};return Object.entries(pe.children).forEach(([ze,Et])=>{Ee[ze]=Et===Ae?Fe:Ft(Et,Ae,Fe)}),new ft(pe.segments,Ee)}class _n{constructor(Ae,Fe,Ee){if(this.isAbsolute=Ae,this.numberOfDoubleDots=Fe,this.commands=Ee,Ae&&Ee.length>0&&Ke(Ee[0]))throw new F.wOt(4003,!1);const ze=Ee.find(Ve);if(ze&&ze!==fn(Ee))throw new F.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $e{constructor(Ae,Fe,Ee){this.segmentGroup=Ae,this.processChildren=Fe,this.index=Ee}}function vn(pe,Ae,Fe){var Ee;if(null!==(Ee=pe)&&void 0!==Ee||(pe=new ft([],{})),0===pe.segments.length&&pe.hasChildren())return Hn(pe,Ae,Fe);const ze=function cr(pe,Ae,Fe){let Ee=0,ze=Ae;const Et={match:!1,pathIndex:0,commandIndex:0};for(;ze<pe.segments.length;){if(Ee>=Fe.length)return Et;const Ot=pe.segments[ze],Nn=Fe[Ee];if(Ve(Nn))break;const ur=`${Nn}`,Cn=Ee<Fe.length-1?Fe[Ee+1]:null;if(ze>0&&void 0===ur)break;if(ur&&Cn&&"object"==typeof Cn&&void 0===Cn.outlets){if(!Us(ur,Cn,Ot))return Et;Ee+=2}else{if(!Us(ur,{},Ot))return Et;Ee++}ze++}return{match:!0,pathIndex:ze,commandIndex:Ee}}(pe,Ae,Fe),Et=Fe.slice(ze.commandIndex);if(ze.match&&ze.pathIndex<pe.segments.length){const Ot=new ft(pe.segments.slice(0,ze.pathIndex),{});return Ot.children[ht]=new ft(pe.segments.slice(ze.pathIndex),pe.children),Hn(Ot,0,Et)}return ze.match&&0===Et.length?new ft(pe.segments,{}):ze.match&&!pe.hasChildren()?Pr(pe,Ae,Fe):ze.match?Hn(pe,0,Et):Pr(pe,Ae,Fe)}function Hn(pe,Ae,Fe){if(0===Fe.length)return new ft(pe.segments,{});{const Ee=function Dt(pe){return Ve(pe[0])?pe[0].outlets:{[ht]:pe}}(Fe),ze={};if(Object.keys(Ee).some(Et=>Et!==ht)&&pe.children[ht]&&1===pe.numberOfChildren&&0===pe.children[ht].segments.length){const Et=Hn(pe.children[ht],Ae,Fe);return new ft(pe.segments,Et.children)}return Object.entries(Ee).forEach(([Et,Ot])=>{"string"==typeof Ot&&(Ot=[Ot]),null!==Ot&&(ze[Et]=vn(pe.children[Et],Ae,Ot))}),Object.entries(pe.children).forEach(([Et,Ot])=>{void 0===Ee[Et]&&(ze[Et]=Ot)}),new ft(pe.segments,ze)}}function Pr(pe,Ae,Fe){const Ee=pe.segments.slice(0,Ae);let ze=0;for(;ze<Fe.length;){const Et=Fe[ze];if(Ve(Et)){const ur=Ui(Et.outlets);return new ft(Ee,ur)}if(0===ze&&Ke(Fe[0])){Ee.push(new Qe(pe.segments[Ae].path,ji(Fe[0]))),ze++;continue}const Ot=Ve(Et)?Et.outlets[ht]:`${Et}`,Nn=ze<Fe.length-1?Fe[ze+1]:null;Ot&&Nn&&Ke(Nn)?(Ee.push(new Qe(Ot,ji(Nn))),ze+=2):(Ee.push(new Qe(Ot,{})),ze++)}return new ft(Ee,{})}function Ui(pe){const Ae={};return Object.entries(pe).forEach(([Fe,Ee])=>{"string"==typeof Ee&&(Ee=[Ee]),null!==Ee&&(Ae[Fe]=Pr(new ft([],{}),0,Ee))}),Ae}function ji(pe){const Ae={};return Object.entries(pe).forEach(([Fe,Ee])=>Ae[Fe]=`${Ee}`),Ae}function Us(pe,Ae,Fe){return pe==Fe.path&&Pt(Ae,Fe.parameters)}const xs="imperative";var wi=function(pe){return pe[pe.NavigationStart=0]="NavigationStart",pe[pe.NavigationEnd=1]="NavigationEnd",pe[pe.NavigationCancel=2]="NavigationCancel",pe[pe.NavigationError=3]="NavigationError",pe[pe.RoutesRecognized=4]="RoutesRecognized",pe[pe.ResolveStart=5]="ResolveStart",pe[pe.ResolveEnd=6]="ResolveEnd",pe[pe.GuardsCheckStart=7]="GuardsCheckStart",pe[pe.GuardsCheckEnd=8]="GuardsCheckEnd",pe[pe.RouteConfigLoadStart=9]="RouteConfigLoadStart",pe[pe.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",pe[pe.ChildActivationStart=11]="ChildActivationStart",pe[pe.ChildActivationEnd=12]="ChildActivationEnd",pe[pe.ActivationStart=13]="ActivationStart",pe[pe.ActivationEnd=14]="ActivationEnd",pe[pe.Scroll=15]="Scroll",pe[pe.NavigationSkipped=16]="NavigationSkipped",pe}(wi||{});class ds{constructor(Ae,Fe){this.id=Ae,this.url=Fe}}class $s extends ds{constructor(Ae,Fe,Ee="imperative",ze=null){super(Ae,Fe),this.type=wi.NavigationStart,this.navigationTrigger=Ee,this.restoredState=ze}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vs extends ds{constructor(Ae,Fe,Ee){super(Ae,Fe),this.urlAfterRedirects=Ee,this.type=wi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Vs=function(pe){return pe[pe.Redirect=0]="Redirect",pe[pe.SupersededByNewNavigation=1]="SupersededByNewNavigation",pe[pe.NoDataFromResolver=2]="NoDataFromResolver",pe[pe.GuardRejected=3]="GuardRejected",pe}(Vs||{}),Ko=function(pe){return pe[pe.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",pe[pe.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",pe}(Ko||{});class fo extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.reason=Ee,this.code=ze,this.type=wi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vo extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.reason=Ee,this.code=ze,this.type=wi.NavigationSkipped}}class ea extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.error=Ee,this.target=ze,this.type=wi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ta extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.urlAfterRedirects=Ee,this.state=ze,this.type=wi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.urlAfterRedirects=Ee,this.state=ze,this.type=wi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eo extends ds{constructor(Ae,Fe,Ee,ze,Et){super(Ae,Fe),this.urlAfterRedirects=Ee,this.state=ze,this.shouldActivate=Et,this.type=wi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ca extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.urlAfterRedirects=Ee,this.state=ze,this.type=wi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _o extends ds{constructor(Ae,Fe,Ee,ze){super(Ae,Fe),this.urlAfterRedirects=Ee,this.state=ze,this.type=wi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Na{constructor(Ae){this.route=Ae,this.type=wi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wa{constructor(Ae){this.route=Ae,this.type=wi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ne{constructor(Ae){this.snapshot=Ae,this.type=wi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(Ae){this.snapshot=Ae,this.type=wi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nt{constructor(Ae){this.snapshot=Ae,this.type=wi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Be{constructor(Ae){this.snapshot=Ae,this.type=wi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vt{constructor(Ae,Fe,Ee){this.routerEvent=Ae,this.position=Fe,this.anchor=Ee,this.type=wi.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class In{}class ts{constructor(Ae,Fe){this.url=Ae,this.navigationBehaviorOptions=Fe}}function ao(pe){return pe.outlet||ht}function it(pe){var Ae;if(!pe)return null;if(null!==(Ae=pe.routeConfig)&&void 0!==Ae&&Ae._injector)return pe.routeConfig._injector;for(let Fe=pe.parent;Fe;Fe=Fe.parent){const Ee=Fe.routeConfig;if(null!=Ee&&Ee._loadedInjector)return Ee._loadedInjector;if(null!=Ee&&Ee._injector)return Ee._injector}return null}class At{get injector(){var Ae,Fe;return null!==(Ae=it(null===(Fe=this.route)||void 0===Fe?void 0:Fe.snapshot))&&void 0!==Ae?Ae:this.rootInjector}set injector(Ae){}constructor(Ae){this.rootInjector=Ae,this.outlet=null,this.route=null,this.children=new on(this.rootInjector),this.attachRef=null}}let on=(()=>{var pe;class Ae{constructor(Ee){this.rootInjector=Ee,this.contexts=new Map}onChildOutletCreated(Ee,ze){const Et=this.getOrCreateContext(Ee);Et.outlet=ze,this.contexts.set(Ee,Et)}onChildOutletDestroyed(Ee){const ze=this.getContext(Ee);ze&&(ze.outlet=null,ze.attachRef=null)}onOutletDeactivated(){const Ee=this.contexts;return this.contexts=new Map,Ee}onOutletReAttached(Ee){this.contexts=Ee}getOrCreateContext(Ee){let ze=this.getContext(Ee);return ze||(ze=new At(this.rootInjector),this.contexts.set(Ee,ze)),ze}getContext(Ee){return this.contexts.get(Ee)||null}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)(F.KVO(F.uvJ))},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();class mn{constructor(Ae){this._root=Ae}get root(){return this._root.value}parent(Ae){const Fe=this.pathFromRoot(Ae);return Fe.length>1?Fe[Fe.length-2]:null}children(Ae){const Fe=Rn(Ae,this._root);return Fe?Fe.children.map(Ee=>Ee.value):[]}firstChild(Ae){const Fe=Rn(Ae,this._root);return Fe&&Fe.children.length>0?Fe.children[0].value:null}siblings(Ae){const Fe=Dn(Ae,this._root);return Fe.length<2?[]:Fe[Fe.length-2].children.map(ze=>ze.value).filter(ze=>ze!==Ae)}pathFromRoot(Ae){return Dn(Ae,this._root).map(Fe=>Fe.value)}}function Rn(pe,Ae){if(pe===Ae.value)return Ae;for(const Fe of Ae.children){const Ee=Rn(pe,Fe);if(Ee)return Ee}return null}function Dn(pe,Ae){if(pe===Ae.value)return[Ae];for(const Fe of Ae.children){const Ee=Dn(pe,Fe);if(Ee.length)return Ee.unshift(Ae),Ee}return[]}class ir{constructor(Ae,Fe){this.value=Ae,this.children=Fe}toString(){return`TreeNode(${this.value})`}}function dr(pe){const Ae={};return pe&&pe.children.forEach(Fe=>Ae[Fe.value.outlet]=Fe),Ae}class vr extends mn{constructor(Ae,Fe){super(Ae),this.snapshot=Fe,Vi(this,Ae)}toString(){return this.snapshot.toString()}}function xr(pe){const Ae=function Xr(pe){const Et=new oi([],{},{},"",{},ht,pe,null,{});return new Ii("",new ir(Et,[]))}(pe),Fe=new q.t([new Qe("",{})]),Ee=new q.t({}),ze=new q.t({}),Et=new q.t({}),Ot=new q.t(""),Nn=new Vr(Fe,Ee,Et,Ot,ze,ht,pe,Ae.root);return Nn.snapshot=Ae.root,new vr(new ir(Nn,[]),Ae)}class Vr{constructor(Ae,Fe,Ee,ze,Et,Ot,Nn,ur){var Cn,Dr;this.urlSubject=Ae,this.paramsSubject=Fe,this.queryParamsSubject=Ee,this.fragmentSubject=ze,this.dataSubject=Et,this.outlet=Ot,this.component=Nn,this._futureSnapshot=ur,this.title=null!==(Cn=null===(Dr=this.dataSubject)||void 0===Dr?void 0:Dr.pipe((0,S.T)(pi=>pi[Lt])))&&void 0!==Cn?Cn:(0,_e.of)(void 0),this.url=Ae,this.params=Fe,this.queryParams=Ee,this.fragment=ze,this.data=Et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ae;return null!==(Ae=this._paramMap)&&void 0!==Ae||(this._paramMap=this.params.pipe((0,S.T)(Fe=>lt(Fe)))),this._paramMap}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=this.queryParams.pipe((0,S.T)(Fe=>lt(Fe)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ni(pe,Ae,Fe="emptyOnly"){var Ee;let ze;const{routeConfig:Et}=pe;var Ot;return ze=null===Ae||"always"!==Fe&&""!==(null==Et?void 0:Et.path)&&(Ae.component||null!==(Ee=Ae.routeConfig)&&void 0!==Ee&&Ee.loadComponent)?{params:{...pe.params},data:{...pe.data},resolve:{...pe.data,...null!==(Ot=pe._resolvedData)&&void 0!==Ot?Ot:{}}}:{params:{...Ae.params,...pe.params},data:{...Ae.data,...pe.data},resolve:{...pe.data,...Ae.data,...null==Et?void 0:Et.data,...pe._resolvedData}},Et&&Ir(Et)&&(ze.resolve[Lt]=Et.title),ze}class oi{get title(){var Ae;return null===(Ae=this.data)||void 0===Ae?void 0:Ae[Lt]}constructor(Ae,Fe,Ee,ze,Et,Ot,Nn,ur,Cn){this.url=Ae,this.params=Fe,this.queryParams=Ee,this.fragment=ze,this.data=Et,this.outlet=Ot,this.component=Nn,this.routeConfig=ur,this._resolve=Cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ae;return null!==(Ae=this._paramMap)&&void 0!==Ae||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){var Ae;return null!==(Ae=this._queryParamMap)&&void 0!==Ae||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Ee=>Ee.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ii extends mn{constructor(Ae,Fe){super(Fe),this.url=Ae,Vi(this,Fe)}toString(){return hs(this._root)}}function Vi(pe,Ae){Ae.value._routerState=pe,Ae.children.forEach(Fe=>Vi(pe,Fe))}function hs(pe){const Ae=pe.children.length>0?` { ${pe.children.map(hs).join(", ")} } `:"";return`${pe.value}${Ae}`}function Pi(pe){if(pe.snapshot){const Ae=pe.snapshot,Fe=pe._futureSnapshot;pe.snapshot=Fe,Pt(Ae.queryParams,Fe.queryParams)||pe.queryParamsSubject.next(Fe.queryParams),Ae.fragment!==Fe.fragment&&pe.fragmentSubject.next(Fe.fragment),Pt(Ae.params,Fe.params)||pe.paramsSubject.next(Fe.params),function bt(pe,Ae){if(pe.length!==Ae.length)return!1;for(let Fe=0;Fe<pe.length;++Fe)if(!Pt(pe[Fe],Ae[Fe]))return!1;return!0}(Ae.url,Fe.url)||pe.urlSubject.next(Fe.url),Pt(Ae.data,Fe.data)||pe.dataSubject.next(Fe.data)}else pe.snapshot=pe._futureSnapshot,pe.dataSubject.next(pe._futureSnapshot.data)}function Ys(pe,Ae){const Fe=Pt(pe.params,Ae.params)&&function xt(pe,Ae){return un(pe,Ae)&&pe.every((Fe,Ee)=>Pt(Fe.parameters,Ae[Ee].parameters))}(pe.url,Ae.url);return Fe&&!(!pe.parent!=!Ae.parent)&&(!pe.parent||Ys(pe.parent,Ae.parent))}function Ir(pe){return"string"==typeof pe.title||null===pe.title}let na=(()=>{var pe;class Ae{constructor(){this.activated=null,this._activatedRoute=null,this.name=ht,this.activateEvents=new F.bkB,this.deactivateEvents=new F.bkB,this.attachEvents=new F.bkB,this.detachEvents=new F.bkB,this.parentContexts=(0,F.WQX)(on),this.location=(0,F.WQX)(F.c1b),this.changeDetector=(0,F.WQX)(F.gRc),this.inputBinder=(0,F.WQX)(Hs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(Ee){if(Ee.name){const{firstChange:ze,previousValue:Et}=Ee.name;if(ze)return;this.isTrackedInParentContexts(Et)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Et)),this.initializeOutletWithName()}}ngOnDestroy(){var Ee;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(Ee=this.inputBinder)||void 0===Ee||Ee.unsubscribeFromRouteData(this)}isTrackedInParentContexts(Ee){var ze;return(null===(ze=this.parentContexts.getContext(Ee))||void 0===ze?void 0:ze.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const Ee=this.parentContexts.getContext(this.name);null!=Ee&&Ee.route&&(Ee.attachRef?this.attach(Ee.attachRef,Ee.route):this.activateWith(Ee.route,Ee.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F.wOt(4012,!1);this.location.detach();const Ee=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Ee.instance),Ee}attach(Ee,ze){var Et;this.activated=Ee,this._activatedRoute=ze,this.location.insert(Ee.hostView),null===(Et=this.inputBinder)||void 0===Et||Et.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(Ee.instance)}deactivate(){if(this.activated){const Ee=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Ee)}}activateWith(Ee,ze){var Et;if(this.isActivated)throw new F.wOt(4013,!1);this._activatedRoute=Ee;const Ot=this.location,ur=Ee.snapshot.component,Cn=this.parentContexts.getOrCreateContext(this.name).children,Dr=new Ca(Ee,Cn,Ot.injector);this.activated=Ot.createComponent(ur,{index:Ot.length,injector:Dr,environmentInjector:ze}),this.changeDetector.markForCheck(),null===(Et=this.inputBinder)||void 0===Et||Et.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275dir=F.FsC({type:pe,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[F.OA$]}),Ae})();class Ca{__ngOutletInjector(Ae){return new Ca(this.route,this.childContexts,Ae)}constructor(Ae,Fe,Ee){this.route=Ae,this.childContexts=Fe,this.parent=Ee}get(Ae,Fe){return Ae===Vr?this.route:Ae===on?this.childContexts:this.parent.get(Ae,Fe)}}const Hs=new F.nKC("");let Yl=(()=>{var pe;class Ae{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(Ee){this.unsubscribeFromRouteData(Ee),this.subscribeToRouteData(Ee)}unsubscribeFromRouteData(Ee){var ze;null===(ze=this.outletDataSubscriptions.get(Ee))||void 0===ze||ze.unsubscribe(),this.outletDataSubscriptions.delete(Ee)}subscribeToRouteData(Ee){const{activatedRoute:ze}=Ee,Et=(0,M.z)([ze.queryParams,ze.params,ze.data]).pipe((0,x.n)(([Ot,Nn,ur],Cn)=>(ur={...Ot,...Nn,...ur},0===Cn?(0,_e.of)(ur):Promise.resolve(ur)))).subscribe(Ot=>{if(!Ee.isActivated||!Ee.activatedComponentRef||Ee.activatedRoute!==ze||null===ze.component)return void this.unsubscribeFromRouteData(Ee);const Nn=(0,F.HJs)(ze.component);if(Nn)for(const{templateName:ur}of Nn.inputs)Ee.activatedComponentRef.setInput(ur,Ot[ur]);else this.unsubscribeFromRouteData(Ee)});this.outletDataSubscriptions.set(Ee,Et)}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac}),Ae})();function Yo(pe,Ae,Fe){if(Fe&&pe.shouldReuseRoute(Ae.value,Fe.value.snapshot)){const Ee=Fe.value;Ee._futureSnapshot=Ae.value;const ze=function to(pe,Ae,Fe){return Ae.children.map(Ee=>{for(const ze of Fe.children)if(pe.shouldReuseRoute(Ee.value,ze.value.snapshot))return Yo(pe,Ee,ze);return Yo(pe,Ee)})}(pe,Ae,Fe);return new ir(Ee,ze)}{if(pe.shouldAttach(Ae.value)){const Et=pe.retrieve(Ae.value);if(null!==Et){const Ot=Et.route;return Ot.value._futureSnapshot=Ae.value,Ot.children=Ae.children.map(Nn=>Yo(pe,Nn)),Ot}}const Ee=function ri(pe){return new Vr(new q.t(pe.url),new q.t(pe.params),new q.t(pe.queryParams),new q.t(pe.fragment),new q.t(pe.data),pe.outlet,pe.component,pe)}(Ae.value),ze=Ae.children.map(Et=>Yo(pe,Et));return new ir(Ee,ze)}}class ka{constructor(Ae,Fe){this.redirectTo=Ae,this.navigationBehaviorOptions=Fe}}const Xa="ngNavigationCancelingError";function ua(pe,Ae){const{redirectTo:Fe,navigationBehaviorOptions:Ee}=L(Ae)?{redirectTo:Ae,navigationBehaviorOptions:void 0}:Ae,ze=Zl(!1,Vs.Redirect);return ze.url=Fe,ze.navigationBehaviorOptions=Ee,ze}function Zl(pe,Ae){const Fe=new Error(`NavigationCancelingError: ${pe||""}`);return Fe[Xa]=!0,Fe.cancellationCode=Ae,Fe}function As(pe){return!!pe&&pe[Xa]}class da{constructor(Ae,Fe,Ee,ze,Et){this.routeReuseStrategy=Ae,this.futureState=Fe,this.currState=Ee,this.forwardEvent=ze,this.inputBindingEnabled=Et}activate(Ae){const Fe=this.futureState._root,Ee=this.currState?this.currState._root:null;this.deactivateChildRoutes(Fe,Ee,Ae),Pi(this.futureState.root),this.activateChildRoutes(Fe,Ee,Ae)}deactivateChildRoutes(Ae,Fe,Ee){const ze=dr(Fe);Ae.children.forEach(Et=>{const Ot=Et.value.outlet;this.deactivateRoutes(Et,ze[Ot],Ee),delete ze[Ot]}),Object.values(ze).forEach(Et=>{this.deactivateRouteAndItsChildren(Et,Ee)})}deactivateRoutes(Ae,Fe,Ee){const ze=Ae.value,Et=Fe?Fe.value:null;if(ze===Et)if(ze.component){const Ot=Ee.getContext(ze.outlet);Ot&&this.deactivateChildRoutes(Ae,Fe,Ot.children)}else this.deactivateChildRoutes(Ae,Fe,Ee);else Et&&this.deactivateRouteAndItsChildren(Fe,Ee)}deactivateRouteAndItsChildren(Ae,Fe){Ae.value.component&&this.routeReuseStrategy.shouldDetach(Ae.value.snapshot)?this.detachAndStoreRouteSubtree(Ae,Fe):this.deactivateRouteAndOutlet(Ae,Fe)}detachAndStoreRouteSubtree(Ae,Fe){const Ee=Fe.getContext(Ae.value.outlet),ze=Ee&&Ae.value.component?Ee.children:Fe,Et=dr(Ae);for(const Ot of Object.values(Et))this.deactivateRouteAndItsChildren(Ot,ze);if(Ee&&Ee.outlet){const Ot=Ee.outlet.detach(),Nn=Ee.children.onOutletDeactivated();this.routeReuseStrategy.store(Ae.value.snapshot,{componentRef:Ot,route:Ae,contexts:Nn})}}deactivateRouteAndOutlet(Ae,Fe){const Ee=Fe.getContext(Ae.value.outlet),ze=Ee&&Ae.value.component?Ee.children:Fe,Et=dr(Ae);for(const Ot of Object.values(Et))this.deactivateRouteAndItsChildren(Ot,ze);Ee&&(Ee.outlet&&(Ee.outlet.deactivate(),Ee.children.onOutletDeactivated()),Ee.attachRef=null,Ee.route=null)}activateChildRoutes(Ae,Fe,Ee){const ze=dr(Fe);Ae.children.forEach(Et=>{this.activateRoutes(Et,ze[Et.value.outlet],Ee),this.forwardEvent(new Be(Et.value.snapshot))}),Ae.children.length&&this.forwardEvent(new ut(Ae.value.snapshot))}activateRoutes(Ae,Fe,Ee){const ze=Ae.value,Et=Fe?Fe.value:null;if(Pi(ze),ze===Et)if(ze.component){const Ot=Ee.getOrCreateContext(ze.outlet);this.activateChildRoutes(Ae,Fe,Ot.children)}else this.activateChildRoutes(Ae,Fe,Ee);else if(ze.component){const Ot=Ee.getOrCreateContext(ze.outlet);if(this.routeReuseStrategy.shouldAttach(ze.snapshot)){const Nn=this.routeReuseStrategy.retrieve(ze.snapshot);this.routeReuseStrategy.store(ze.snapshot,null),Ot.children.onOutletReAttached(Nn.contexts),Ot.attachRef=Nn.componentRef,Ot.route=Nn.route.value,Ot.outlet&&Ot.outlet.attach(Nn.componentRef,Nn.route.value),Pi(Nn.route.value),this.activateChildRoutes(Ae,null,Ot.children)}else Ot.attachRef=null,Ot.route=ze,Ot.outlet&&Ot.outlet.activateWith(ze,Ot.injector),this.activateChildRoutes(Ae,null,Ot.children)}else this.activateChildRoutes(Ae,null,Ee)}}class ws{constructor(Ae){this.path=Ae,this.route=this.path[this.path.length-1]}}class Nl{constructor(Ae,Fe){this.component=Ae,this.route=Fe}}function po(pe,Ae,Fe){const Ee=pe._root;return ja(Ee,Ae?Ae._root:null,Fe,[Ee.value])}function vl(pe,Ae){const Fe=Symbol(),Ee=Ae.get(pe,Fe);return Ee===Fe?"function"!=typeof pe||(0,F.LfX)(pe)?Ae.get(pe):pe:Ee}function ja(pe,Ae,Fe,Ee,ze={canDeactivateChecks:[],canActivateChecks:[]}){const Et=dr(Ae);return pe.children.forEach(Ot=>{(function pc(pe,Ae,Fe,Ee,ze={canDeactivateChecks:[],canActivateChecks:[]}){const Et=pe.value,Ot=Ae?Ae.value:null,Nn=Fe?Fe.getContext(pe.value.outlet):null;if(Ot&&Et.routeConfig===Ot.routeConfig){const ur=function ii(pe,Ae,Fe){if("function"==typeof Fe)return Fe(pe,Ae);switch(Fe){case"pathParamsChange":return!un(pe.url,Ae.url);case"pathParamsOrQueryParamsChange":return!un(pe.url,Ae.url)||!Pt(pe.queryParams,Ae.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ys(pe,Ae)||!Pt(pe.queryParams,Ae.queryParams);default:return!Ys(pe,Ae)}}(Ot,Et,Et.routeConfig.runGuardsAndResolvers);ur?ze.canActivateChecks.push(new ws(Ee)):(Et.data=Ot.data,Et._resolvedData=Ot._resolvedData),ja(pe,Ae,Et.component?Nn?Nn.children:null:Fe,Ee,ze),ur&&Nn&&Nn.outlet&&Nn.outlet.isActivated&&ze.canDeactivateChecks.push(new Nl(Nn.outlet.component,Ot))}else Ot&&Fa(Ae,Nn,ze),ze.canActivateChecks.push(new ws(Ee)),ja(pe,null,Et.component?Nn?Nn.children:null:Fe,Ee,ze)})(Ot,Et[Ot.value.outlet],Fe,Ee.concat([Ot.value]),ze),delete Et[Ot.value.outlet]}),Object.entries(Et).forEach(([Ot,Nn])=>Fa(Nn,Fe.getContext(Ot),ze)),ze}function Fa(pe,Ae,Fe){const Ee=dr(pe),ze=pe.value;Object.entries(Ee).forEach(([Et,Ot])=>{Fa(Ot,ze.component?Ae?Ae.children.getContext(Et):null:Ae,Fe)}),Fe.canDeactivateChecks.push(new Nl(ze.component&&Ae&&Ae.outlet&&Ae.outlet.isActivated?Ae.outlet.component:null,ze))}function R(pe){return"function"==typeof pe}function _t(pe){return pe instanceof _||"EmptyError"===(null==pe?void 0:pe.name)}const Yt=Symbol("INITIAL_VALUE");function Ht(){return(0,x.n)(pe=>(0,M.z)(pe.map(Ae=>Ae.pipe((0,E.s)(1),function K(...pe){const Ae=(0,N.lI)(pe);return(0,Z.N)((Fe,Ee)=>{(Ae?(0,w.x)(pe,Fe,Ae):(0,w.x)(pe,Fe)).subscribe(Ee)})}(Yt)))).pipe((0,S.T)(Ae=>{for(const Fe of Ae)if(!0!==Fe){if(Fe===Yt)return Yt;if(!1===Fe||xn(Fe))return Fe}return!0}),(0,z.p)(Ae=>Ae!==Yt),(0,E.s)(1)))}function xn(pe){return L(pe)||pe instanceof ka}function Gr(pe){return(0,D.F)((0,ge.M)(Ae=>{if("boolean"!=typeof Ae)throw ua(0,Ae)}),(0,S.T)(Ae=>!0===Ae))}class li{constructor(Ae){this.segmentGroup=Ae||null}}class ki extends Error{constructor(Ae){super(),this.urlTree=Ae}}function Ss(pe){return(0,d.$)(new li(pe))}class go{constructor(Ae,Fe){this.urlSerializer=Ae,this.urlTree=Fe}lineralizeSegments(Ae,Fe){let Ee=[],ze=Fe.root;for(;;){if(Ee=Ee.concat(ze.segments),0===ze.numberOfChildren)return(0,_e.of)(Ee);if(ze.numberOfChildren>1||!ze.children[ht])return(0,d.$)(new F.wOt(4e3,!1));ze=ze.children[ht]}}applyRedirectCommands(Ae,Fe,Ee,ze,Et){if("string"!=typeof Fe){const Nn=Fe,{queryParams:ur,fragment:Cn,routeConfig:Dr,url:pi,outlet:Sr,params:Qr,data:Ao,title:Rs}=ze,io=(0,F.N4e)(Et,()=>Nn({params:Qr,data:Ao,queryParams:ur,fragment:Cn,routeConfig:Dr,url:pi,outlet:Sr,title:Rs}));if(io instanceof ct)throw new ki(io);Fe=io}const Ot=this.applyRedirectCreateUrlTree(Fe,this.urlSerializer.parse(Fe),Ae,Ee);if("/"===Fe[0])throw new ki(Ot);return Ot}applyRedirectCreateUrlTree(Ae,Fe,Ee,ze){const Et=this.createSegmentGroup(Ae,Fe.root,Ee,ze);return new ct(Et,this.createQueryParams(Fe.queryParams,this.urlTree.queryParams),Fe.fragment)}createQueryParams(Ae,Fe){const Ee={};return Object.entries(Ae).forEach(([ze,Et])=>{if("string"==typeof Et&&":"===Et[0]){const Nn=Et.substring(1);Ee[ze]=Fe[Nn]}else Ee[ze]=Et}),Ee}createSegmentGroup(Ae,Fe,Ee,ze){const Et=this.createSegments(Ae,Fe.segments,Ee,ze);let Ot={};return Object.entries(Fe.children).forEach(([Nn,ur])=>{Ot[Nn]=this.createSegmentGroup(Ae,ur,Ee,ze)}),new ft(Et,Ot)}createSegments(Ae,Fe,Ee,ze){return Fe.map(Et=>":"===Et.path[0]?this.findPosParam(Ae,Et,ze):this.findOrReturn(Et,Ee))}findPosParam(Ae,Fe,Ee){const ze=Ee[Fe.path.substring(1)];if(!ze)throw new F.wOt(4001,!1);return ze}findOrReturn(Ae,Fe){let Ee=0;for(const ze of Fe){if(ze.path===Ae.path)return Fe.splice(Ee),ze;Ee++}return Ae}}const zo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ps(pe,Ae,Fe,Ee,ze){const Et=Bs(pe,Ae,Fe);return Et.matched?(Ee=function Go(pe,Ae){var Fe;return pe.providers&&!pe._injector&&(pe._injector=(0,F.Ol2)(pe.providers,Ae,`Route: ${pe.path}`)),null!==(Fe=pe._injector)&&void 0!==Fe?Fe:Ae}(Ae,Ee),function ai(pe,Ae,Fe,Ee){const ze=Ae.canMatch;if(!ze||0===ze.length)return(0,_e.of)(!0);const Et=ze.map(Ot=>{const Nn=vl(Ot,pe);return $n(function Je(pe){return pe&&R(pe.canMatch)}(Nn)?Nn.canMatch(Ae,Fe):(0,F.N4e)(pe,()=>Nn(Ae,Fe)))});return(0,_e.of)(Et).pipe(Ht(),Gr())}(Ee,Ae,Fe).pipe((0,S.T)(Ot=>!0===Ot?Et:{...zo}))):(0,_e.of)(Et)}function Bs(pe,Ae,Fe){var Ee,ze;if("**"===Ae.path)return function Jr(pe){return{matched:!0,parameters:pe.length>0?fn(pe).parameters:{},consumedSegments:pe,remainingSegments:[],positionalParamSegments:{}}}(Fe);if(""===Ae.path)return"full"===Ae.pathMatch&&(pe.hasChildren()||Fe.length>0)?{...zo}:{matched:!0,consumedSegments:[],remainingSegments:Fe,parameters:{},positionalParamSegments:{}};const Ot=(Ae.matcher||It)(Fe,pe,Ae);if(!Ot)return{...zo};const Nn={};Object.entries(null!==(Ee=Ot.posParams)&&void 0!==Ee?Ee:{}).forEach(([Cn,Dr])=>{Nn[Cn]=Dr.path});const ur=Ot.consumed.length>0?{...Nn,...Ot.consumed[Ot.consumed.length-1].parameters}:Nn;return{matched:!0,consumedSegments:Ot.consumed,remainingSegments:Fe.slice(Ot.consumed.length),parameters:ur,positionalParamSegments:null!==(ze=Ot.posParams)&&void 0!==ze?ze:{}}}function Zs(pe,Ae,Fe,Ee){return Fe.length>0&&function ci(pe,Ae,Fe){return Fe.some(Ee=>hr(pe,Ae,Ee)&&ao(Ee)!==ht)}(pe,Fe,Ee)?{segmentGroup:new ft(Ae,Cs(Ee,new ft(Fe,pe.children))),slicedSegments:[]}:0===Fe.length&&function Po(pe,Ae,Fe){return Fe.some(Ee=>hr(pe,Ae,Ee))}(pe,Fe,Ee)?{segmentGroup:new ft(pe.segments,Js(pe,Fe,Ee,pe.children)),slicedSegments:Fe}:{segmentGroup:new ft(pe.segments,pe.children),slicedSegments:Fe}}function Js(pe,Ae,Fe,Ee){const ze={};for(const Et of Fe)if(hr(pe,Ae,Et)&&!Ee[ao(Et)]){const Ot=new ft([],{});ze[ao(Et)]=Ot}return{...Ee,...ze}}function Cs(pe,Ae){const Fe={};Fe[ht]=Ae;for(const Ee of pe)if(""===Ee.path&&ao(Ee)!==ht){const ze=new ft([],{});Fe[ao(Ee)]=ze}return Fe}function hr(pe,Ae,Fe){return(!(pe.hasChildren()||Ae.length>0)||"full"!==Fe.pathMatch)&&""===Fe.path}class jf{}class _l{constructor(Ae,Fe,Ee,ze,Et,Ot,Nn){this.injector=Ae,this.configLoader=Fe,this.rootComponentType=Ee,this.config=ze,this.urlTree=Et,this.paramsInheritanceStrategy=Ot,this.urlSerializer=Nn,this.applyRedirects=new go(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(Ae){return new F.wOt(4002,`'${Ae.segmentGroup}'`)}recognize(){const Ae=Zs(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(Ae).pipe((0,S.T)(({children:Fe,rootSnapshot:Ee})=>{const ze=new ir(Ee,Fe),Et=new Ii("",ze),Ot=function se(pe,Ae,Fe=null,Ee=null){return de(H(pe),Ae,Fe,Ee)}(Ee,[],this.urlTree.queryParams,this.urlTree.fragment);return Ot.queryParams=this.urlTree.queryParams,Et.url=this.urlSerializer.serialize(Ot),{state:Et,tree:Ot}}))}match(Ae){const Fe=new oi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ht,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,Ae,ht,Fe).pipe((0,S.T)(Ee=>({children:Ee,rootSnapshot:Fe})),J(Ee=>{if(Ee instanceof ki)return this.urlTree=Ee.urlTree,this.match(Ee.urlTree.root);throw Ee instanceof li?this.noMatchError(Ee):Ee}))}processSegmentGroup(Ae,Fe,Ee,ze,Et){return 0===Ee.segments.length&&Ee.hasChildren()?this.processChildren(Ae,Fe,Ee,Et):this.processSegment(Ae,Fe,Ee,Ee.segments,ze,!0,Et).pipe((0,S.T)(Ot=>Ot instanceof ir?[Ot]:[]))}processChildren(Ae,Fe,Ee,ze){const Et=[];for(const Ot of Object.keys(Ee.children))"primary"===Ot?Et.unshift(Ot):Et.push(Ot);return(0,a.H)(Et).pipe(ae(Ot=>{const Nn=Ee.children[Ot],ur=function Eo(pe,Ae){const Fe=pe.filter(Ee=>ao(Ee)===Ae);return Fe.push(...pe.filter(Ee=>ao(Ee)!==Ae)),Fe}(Fe,Ot);return this.processSegmentGroup(Ae,ur,Nn,Ot,ze)}),function Te(pe,Ae){return(0,Z.N)(function ce(pe,Ae,Fe,Ee,ze){return(Et,Ot)=>{let Nn=Fe,ur=Ae,Cn=0;Et.subscribe((0,ie._)(Ot,Dr=>{const pi=Cn++;ur=Nn?pe(ur,Dr,pi):(Nn=!0,Dr),Ee&&Ot.next(ur)},ze&&(()=>{Nn&&Ot.next(ur),Ot.complete()})))}}(pe,Ae,arguments.length>=2,!0))}((Ot,Nn)=>(Ot.push(...Nn),Ot)),X(null),function le(pe,Ae){const Fe=arguments.length>=2;return Ee=>Ee.pipe(pe?(0,z.p)((ze,Et)=>pe(ze,Et,Ee)):ve.D,et(1),Fe?X(Ae):ee(()=>new _))}(),(0,G.Z)(Ot=>{if(null===Ot)return Ss(Ee);const Nn=Fl(Ot);return function bd(pe){pe.sort((Ae,Fe)=>Ae.value.outlet===ht?-1:Fe.value.outlet===ht?1:Ae.value.outlet.localeCompare(Fe.value.outlet))}(Nn),(0,_e.of)(Nn)}))}processSegment(Ae,Fe,Ee,ze,Et,Ot,Nn){return(0,a.H)(Fe).pipe(ae(ur=>{var Cn;return this.processSegmentAgainstRoute(null!==(Cn=ur._injector)&&void 0!==Cn?Cn:Ae,Fe,ur,Ee,ze,Et,Ot,Nn).pipe(J(Dr=>{if(Dr instanceof li)return(0,_e.of)(null);throw Dr}))}),xe(ur=>!!ur),J(ur=>{if(_t(ur))return function uu(pe,Ae,Fe){return 0===Ae.length&&!pe.children[Fe]}(Ee,ze,Et)?(0,_e.of)(new jf):Ss(Ee);throw ur}))}processSegmentAgainstRoute(Ae,Fe,Ee,ze,Et,Ot,Nn,ur){return function Gi(pe,Ae,Fe,Ee){return!!(ao(pe)===Ee||Ee!==ht&&hr(Ae,Fe,pe))&&Bs(Ae,pe,Fe).matched}(Ee,ze,Et,Ot)?void 0===Ee.redirectTo?this.matchSegmentAgainstRoute(Ae,ze,Ee,Et,Ot,ur):this.allowRedirects&&Nn?this.expandSegmentAgainstRouteUsingRedirect(Ae,ze,Fe,Ee,Et,Ot,ur):Ss(ze):Ss(ze)}expandSegmentAgainstRouteUsingRedirect(Ae,Fe,Ee,ze,Et,Ot,Nn){var ur,Cn;const{matched:Dr,parameters:pi,consumedSegments:Sr,positionalParamSegments:Qr,remainingSegments:Ao}=Bs(Fe,ze,Et);if(!Dr)return Ss(Fe);"string"==typeof ze.redirectTo&&"/"===ze.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Rs=new oi(Et,pi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mc(ze),ao(ze),null!==(ur=null!==(Cn=ze.component)&&void 0!==Cn?Cn:ze._loadedComponent)&&void 0!==ur?ur:null,ze,xd(ze)),io=ni(Rs,Nn,this.paramsInheritanceStrategy);Rs.params=Object.freeze(io.params),Rs.data=Object.freeze(io.data);const Ja=this.applyRedirects.applyRedirectCommands(Sr,ze.redirectTo,Qr,Rs,Ae);return this.applyRedirects.lineralizeSegments(ze,Ja).pipe((0,G.Z)(cl=>this.processSegment(Ae,Ee,Fe,cl.concat(Ao),Ot,!1,Nn)))}matchSegmentAgainstRoute(Ae,Fe,Ee,ze,Et,Ot){const Nn=Ps(Fe,Ee,ze,Ae);return"**"===Ee.path&&(Fe.children={}),Nn.pipe((0,x.n)(ur=>{var Cn;return ur.matched?(Ae=null!==(Cn=Ee._injector)&&void 0!==Cn?Cn:Ae,this.getChildConfig(Ae,Ee,ze).pipe((0,x.n)(({routes:Dr})=>{var pi,Sr,Qr;const Ao=null!==(pi=Ee._loadedInjector)&&void 0!==pi?pi:Ae,{parameters:Rs,consumedSegments:io,remainingSegments:Ja}=ur,cl=new oi(io,Rs,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mc(Ee),ao(Ee),null!==(Sr=null!==(Qr=Ee.component)&&void 0!==Qr?Qr:Ee._loadedComponent)&&void 0!==Sr?Sr:null,Ee,xd(Ee)),ko=ni(cl,Ot,this.paramsInheritanceStrategy);cl.params=Object.freeze(ko.params),cl.data=Object.freeze(ko.data);const{segmentGroup:Uc,slicedSegments:Md}=Zs(Fe,io,Ja,Dr);if(0===Md.length&&Uc.hasChildren())return this.processChildren(Ao,Dr,Uc,cl).pipe((0,S.T)(Gl=>new ir(cl,Gl)));if(0===Dr.length&&0===Md.length)return(0,_e.of)(new ir(cl,[]));const jo=ao(Ee)===Et;return this.processSegment(Ao,Dr,Uc,Md,jo?ht:Et,!0,cl).pipe((0,S.T)(Gl=>new ir(cl,Gl instanceof ir?[Gl]:[])))}))):Ss(Fe)}))}getChildConfig(Ae,Fe,Ee){return Fe.children?(0,_e.of)({routes:Fe.children,injector:Ae}):Fe.loadChildren?void 0!==Fe._loadedRoutes?(0,_e.of)({routes:Fe._loadedRoutes,injector:Fe._loadedInjector}):function Yr(pe,Ae,Fe,Ee){const ze=Ae.canLoad;if(void 0===ze||0===ze.length)return(0,_e.of)(!0);const Et=ze.map(Ot=>{const Nn=vl(Ot,pe);return $n(function re(pe){return pe&&R(pe.canLoad)}(Nn)?Nn.canLoad(Ae,Fe):(0,F.N4e)(pe,()=>Nn(Ae,Fe)))});return(0,_e.of)(Et).pipe(Ht(),Gr())}(Ae,Fe,Ee).pipe((0,G.Z)(ze=>ze?this.configLoader.loadChildren(Ae,Fe).pipe((0,ge.M)(Et=>{Fe._loadedRoutes=Et.routes,Fe._loadedInjector=Et.injector})):function Ro(pe){return(0,d.$)(Zl(!1,Vs.GuardRejected))}())):(0,_e.of)({routes:[],injector:Ae})}}function du(pe){const Ae=pe.value.routeConfig;return Ae&&""===Ae.path}function Fl(pe){const Ae=[],Fe=new Set;for(const Ee of pe){if(!du(Ee)){Ae.push(Ee);continue}const ze=Ae.find(Et=>Ee.value.routeConfig===Et.value.routeConfig);void 0!==ze?(ze.children.push(...Ee.children),Fe.add(ze)):Ae.push(Ee)}for(const Ee of Fe){const ze=Fl(Ee.children);Ae.push(new ir(Ee.value,ze))}return Ae.filter(Ee=>!Fe.has(Ee))}function mc(pe){return pe.data||{}}function xd(pe){return pe.resolve||{}}function Uf(pe){const Ae=pe.children.map(Fe=>Uf(Fe)).flat();return[pe,...Ae]}function Jl(pe){return(0,x.n)(Ae=>{const Fe=pe(Ae);return Fe?(0,a.H)(Fe).pipe((0,S.T)(()=>Ae)):(0,_e.of)(Ae)})}let Uu=(()=>{var pe;class Ae{buildTitle(Ee){let ze,Et=Ee.root;for(;void 0!==Et;){var Ot;ze=null!==(Ot=this.getResolvedTitleForRoute(Et))&&void 0!==Ot?Ot:ze,Et=Et.children.find(Nn=>Nn.outlet===ht)}return ze}getResolvedTitleForRoute(Ee){return Ee.data[Lt]}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:()=>(0,F.WQX)(fs),providedIn:"root"}),Ae})(),fs=(()=>{var pe;class Ae extends Uu{constructor(Ee){super(),this.title=Ee}updateTitle(Ee){const ze=this.buildTitle(Ee);void 0!==ze&&this.title.setTitle(ze)}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)(F.KVO(Ut.hE))},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();const Da=new F.nKC("",{providedIn:"root",factory:()=>({})});let Ql=(()=>{var pe;class Ae{}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275cmp=F.VBU({type:pe,selectors:[["ng-component"]],standalone:!0,features:[F.aNF],decls:1,vars:0,template:function(Ee,ze){1&Ee&&F.nrm(0,"router-outlet")},dependencies:[na],encapsulation:2}),Ae})();function ha(pe){const Ae=pe.children&&pe.children.map(ha),Fe=Ae?{...pe,children:Ae}:{...pe};return!Fe.component&&!Fe.loadComponent&&(Ae||Fe.loadChildren)&&Fe.outlet&&Fe.outlet!==ht&&(Fe.component=Ql),Fe}const no=new F.nKC("");let Ds=(()=>{var pe;class Ae{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,F.WQX)(F.Ql9)}loadComponent(Ee){if(this.componentLoaders.get(Ee))return this.componentLoaders.get(Ee);if(Ee._loadedComponent)return(0,_e.of)(Ee._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(Ee);const ze=$n(Ee.loadComponent()).pipe((0,S.T)(Ze),(0,ge.M)(Ot=>{this.onLoadEndListener&&this.onLoadEndListener(Ee),Ee._loadedComponent=Ot}),me(()=>{this.componentLoaders.delete(Ee)})),Et=new h.G(ze,()=>new p.B).pipe((0,Oe.B)());return this.componentLoaders.set(Ee,Et),Et}loadChildren(Ee,ze){if(this.childrenLoaders.get(ze))return this.childrenLoaders.get(ze);if(ze._loadedRoutes)return(0,_e.of)({routes:ze._loadedRoutes,injector:ze._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(ze);const Ot=function fh(pe,Ae,Fe,Ee){return $n(pe.loadChildren()).pipe((0,S.T)(Ze),(0,G.Z)(ze=>ze instanceof F.Co$||Array.isArray(ze)?(0,_e.of)(ze):(0,a.H)(Ae.compileModuleAsync(ze))),(0,S.T)(ze=>{Ee&&Ee(pe);let Et,Ot,Nn=!1;return Array.isArray(ze)?(Ot=ze,!0):(Et=ze.create(Fe).injector,Ot=Et.get(no,[],{optional:!0,self:!0}).flat()),{routes:Ot.map(ha),injector:Et}}))}(ze,this.compiler,Ee,this.onLoadEndListener).pipe(me(()=>{this.childrenLoaders.delete(ze)})),Nn=new h.G(Ot,()=>new p.B).pipe((0,Oe.B)());return this.childrenLoaders.set(ze,Nn),Nn}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();function Ze(pe){return function Se(pe){return pe&&"object"==typeof pe&&"default"in pe}(pe)?pe.default:pe}let Zt=(()=>{var pe;class Ae{}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:()=>(0,F.WQX)(qe),providedIn:"root"}),Ae})(),qe=(()=>{var pe;class Ae{shouldProcessUrl(Ee){return!0}extract(Ee){return Ee}merge(Ee,ze){return Ee}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();const Rt=new F.nKC(""),en=new F.nKC("");function mt(pe,Ae,Fe){const Ee=pe.get(en),ze=pe.get(v.qQ);return pe.get(F.SKi).runOutsideAngular(()=>{if(!ze.startViewTransition||Ee.skipNextTransition)return Ee.skipNextTransition=!1,new Promise(Cn=>setTimeout(Cn));let Et;const Ot=new Promise(Cn=>{Et=Cn}),Nn=ze.startViewTransition(()=>(Et(),function Cr(pe){return new Promise(Ae=>{(0,F.mal)({read:()=>setTimeout(Ae)},{injector:pe})})}(pe))),{onViewTransitionCreated:ur}=Ee;return ur&&(0,F.N4e)(pe,()=>ur({transition:Nn,from:Ae,to:Fe})),Ot})}const zi=new F.nKC("");let Si=(()=>{var pe;class Ae{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new p.B,this.transitionAbortSubject=new p.B,this.configLoader=(0,F.WQX)(Ds),this.environmentInjector=(0,F.WQX)(F.uvJ),this.urlSerializer=(0,F.WQX)(jn),this.rootContexts=(0,F.WQX)(on),this.location=(0,F.WQX)(v.aZ),this.inputBindingEnabled=null!==(0,F.WQX)(Hs,{optional:!0}),this.titleStrategy=(0,F.WQX)(Uu),this.options=(0,F.WQX)(Da,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,F.WQX)(Zt),this.createViewTransition=(0,F.WQX)(Rt,{optional:!0}),this.navigationErrorHandler=(0,F.WQX)(zi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_e.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Et=>this.events.next(new Wa(Et)),this.configLoader.onLoadStartListener=Et=>this.events.next(new Na(Et))}complete(){var Ee;null===(Ee=this.transitions)||void 0===Ee||Ee.complete()}handleNavigationRequest(Ee){var ze;const Et=++this.navigationId;null===(ze=this.transitions)||void 0===ze||ze.next({...this.transitions.value,...Ee,id:Et})}setupNavigations(Ee,ze,Et){return this.transitions=new q.t({id:0,currentUrlTree:ze,currentRawUrl:ze,extractedUrl:this.urlHandlingStrategy.extract(ze),urlAfterRedirects:this.urlHandlingStrategy.extract(ze),rawUrl:ze,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xs,restoredState:null,currentSnapshot:Et.snapshot,targetSnapshot:null,currentRouterState:Et,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,z.p)(Ot=>0!==Ot.id),(0,S.T)(Ot=>({...Ot,extractedUrl:this.urlHandlingStrategy.extract(Ot.rawUrl)})),(0,x.n)(Ot=>{let Nn=!1,ur=!1;return(0,_e.of)(Ot).pipe((0,x.n)(Cn=>{var Dr;if(this.navigationId>Ot.id)return this.cancelNavigationTransition(Ot,"",Vs.SupersededByNewNavigation),f.w;this.currentTransition=Ot,this.currentNavigation={id:Cn.id,initialUrl:Cn.rawUrl,extractedUrl:Cn.extractedUrl,targetBrowserUrl:"string"==typeof Cn.extras.browserUrl?this.urlSerializer.parse(Cn.extras.browserUrl):Cn.extras.browserUrl,trigger:Cn.source,extras:Cn.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const pi=!Ee.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Sr=null!==(Dr=Cn.extras.onSameUrlNavigation)&&void 0!==Dr?Dr:Ee.onSameUrlNavigation;if(!pi&&"reload"!==Sr){const Qr="";return this.events.next(new Vo(Cn.id,this.urlSerializer.serialize(Cn.rawUrl),Qr,Ko.IgnoredSameUrlNavigation)),Cn.resolve(!1),f.w}if(this.urlHandlingStrategy.shouldProcessUrl(Cn.rawUrl))return(0,_e.of)(Cn).pipe((0,x.n)(Qr=>{var Ao,Rs;const io=null===(Ao=this.transitions)||void 0===Ao?void 0:Ao.getValue();return this.events.next(new $s(Qr.id,this.urlSerializer.serialize(Qr.extractedUrl),Qr.source,Qr.restoredState)),io!==(null===(Rs=this.transitions)||void 0===Rs?void 0:Rs.getValue())?f.w:Promise.resolve(Qr)}),function Hi(pe,Ae,Fe,Ee,ze,Et){return(0,G.Z)(Ot=>function Ff(pe,Ae,Fe,Ee,ze,Et,Ot="emptyOnly"){return new _l(pe,Ae,Fe,Ee,ze,Ot,Et).recognize()}(pe,Ae,Fe,Ee,Ot.extractedUrl,ze,Et).pipe((0,S.T)(({state:Nn,tree:ur})=>({...Ot,targetSnapshot:Nn,urlAfterRedirects:ur}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,Ee.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ge.M)(Qr=>{Ot.targetSnapshot=Qr.targetSnapshot,Ot.urlAfterRedirects=Qr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Qr.urlAfterRedirects};const Ao=new ta(Qr.id,this.urlSerializer.serialize(Qr.extractedUrl),this.urlSerializer.serialize(Qr.urlAfterRedirects),Qr.targetSnapshot);this.events.next(Ao)}));if(pi&&this.urlHandlingStrategy.shouldProcessUrl(Cn.currentRawUrl)){const{id:Qr,extractedUrl:Ao,source:Rs,restoredState:io,extras:Ja}=Cn,cl=new $s(Qr,this.urlSerializer.serialize(Ao),Rs,io);this.events.next(cl);const ko=xr(this.rootComponentType).snapshot;return this.currentTransition=Ot={...Cn,targetSnapshot:ko,urlAfterRedirects:Ao,extras:{...Ja,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Ao,(0,_e.of)(Ot)}{const Qr="";return this.events.next(new Vo(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),Qr,Ko.IgnoredByUrlHandlingStrategy)),Cn.resolve(!1),f.w}}),(0,ge.M)(Cn=>{const Dr=new la(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),this.urlSerializer.serialize(Cn.urlAfterRedirects),Cn.targetSnapshot);this.events.next(Dr)}),(0,S.T)(Cn=>(this.currentTransition=Ot={...Cn,guards:po(Cn.targetSnapshot,Cn.currentSnapshot,this.rootContexts)},Ot)),function Le(pe,Ae){return(0,G.Z)(Fe=>{const{targetSnapshot:Ee,currentSnapshot:ze,guards:{canActivateChecks:Et,canDeactivateChecks:Ot}}=Fe;return 0===Ot.length&&0===Et.length?(0,_e.of)({...Fe,guardsResult:!0}):function be(pe,Ae,Fe,Ee){return(0,a.H)(pe).pipe((0,G.Z)(ze=>function Fn(pe,Ae,Fe,Ee,ze){const Et=Ae&&Ae.routeConfig?Ae.routeConfig.canDeactivate:null;if(!Et||0===Et.length)return(0,_e.of)(!0);const Ot=Et.map(Nn=>{var ur;const Cn=null!==(ur=it(Ae))&&void 0!==ur?ur:ze,Dr=vl(Nn,Cn);return $n(function We(pe){return pe&&R(pe.canDeactivate)}(Dr)?Dr.canDeactivate(pe,Ae,Fe,Ee):(0,F.N4e)(Cn,()=>Dr(pe,Ae,Fe,Ee))).pipe(xe())});return(0,_e.of)(Ot).pipe(Ht())}(ze.component,ze.route,Fe,Ae,Ee)),xe(ze=>!0!==ze,!0))}(Ot,Ee,ze,pe).pipe((0,G.Z)(Nn=>Nn&&function W(pe){return"boolean"==typeof pe}(Nn)?function ke(pe,Ae,Fe,Ee){return(0,a.H)(Ae).pipe(ae(ze=>(0,w.x)(function at(pe,Ae){return null!==pe&&Ae&&Ae(new Ne(pe)),(0,_e.of)(!0)}(ze.route.parent,Ee),function Re(pe,Ae){return null!==pe&&Ae&&Ae(new Nt(pe)),(0,_e.of)(!0)}(ze.route,Ee),function Sn(pe,Ae,Fe){const Ee=Ae[Ae.length-1],Et=Ae.slice(0,Ae.length-1).reverse().map(Ot=>function kl(pe){const Ae=pe.routeConfig?pe.routeConfig.canActivateChild:null;return Ae&&0!==Ae.length?{node:pe,guards:Ae}:null}(Ot)).filter(Ot=>null!==Ot).map(Ot=>(0,I.v)(()=>{const Nn=Ot.guards.map(ur=>{var Cn;const Dr=null!==(Cn=it(Ot.node))&&void 0!==Cn?Cn:Fe,pi=vl(ur,Dr);return $n(function Ce(pe){return pe&&R(pe.canActivateChild)}(pi)?pi.canActivateChild(Ee,pe):(0,F.N4e)(Dr,()=>pi(Ee,pe))).pipe(xe())});return(0,_e.of)(Nn).pipe(Ht())}));return(0,_e.of)(Et).pipe(Ht())}(pe,ze.path,Fe),function Qt(pe,Ae,Fe){const Ee=Ae.routeConfig?Ae.routeConfig.canActivate:null;if(!Ee||0===Ee.length)return(0,_e.of)(!0);const ze=Ee.map(Et=>(0,I.v)(()=>{var Ot;const Nn=null!==(Ot=it(Ae))&&void 0!==Ot?Ot:Fe,ur=vl(Et,Nn);return $n(function he(pe){return pe&&R(pe.canActivate)}(ur)?ur.canActivate(Ae,pe):(0,F.N4e)(Nn,()=>ur(Ae,pe))).pipe(xe())}));return(0,_e.of)(ze).pipe(Ht())}(pe,ze.route,Fe))),xe(ze=>!0!==ze,!0))}(Ee,Et,pe,Ae):(0,_e.of)(Nn)),(0,S.T)(Nn=>({...Fe,guardsResult:Nn})))})}(this.environmentInjector,Cn=>this.events.next(Cn)),(0,ge.M)(Cn=>{if(Ot.guardsResult=Cn.guardsResult,Cn.guardsResult&&"boolean"!=typeof Cn.guardsResult)throw ua(0,Cn.guardsResult);const Dr=new eo(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),this.urlSerializer.serialize(Cn.urlAfterRedirects),Cn.targetSnapshot,!!Cn.guardsResult);this.events.next(Dr)}),(0,z.p)(Cn=>!!Cn.guardsResult||(this.cancelNavigationTransition(Cn,"",Vs.GuardRejected),!1)),Jl(Cn=>{if(Cn.guards.canActivateChecks.length)return(0,_e.of)(Cn).pipe((0,ge.M)(Dr=>{const pi=new ca(Dr.id,this.urlSerializer.serialize(Dr.extractedUrl),this.urlSerializer.serialize(Dr.urlAfterRedirects),Dr.targetSnapshot);this.events.next(pi)}),(0,x.n)(Dr=>{let pi=!1;return(0,_e.of)(Dr).pipe(function Os(pe,Ae){return(0,G.Z)(Fe=>{const{targetSnapshot:Ee,guards:{canActivateChecks:ze}}=Fe;if(!ze.length)return(0,_e.of)(Fe);const Et=new Set(ze.map(ur=>ur.route)),Ot=new Set;for(const ur of Et)if(!Ot.has(ur))for(const Cn of Uf(ur))Ot.add(Cn);let Nn=0;return(0,a.H)(Ot).pipe(ae(ur=>Et.has(ur)?function Es(pe,Ae,Fe,Ee){const ze=pe.routeConfig,Et=pe._resolve;return void 0!==(null==ze?void 0:ze.title)&&!Ir(ze)&&(Et[Lt]=ze.title),function Bl(pe,Ae,Fe,Ee){const ze=St(pe);if(0===ze.length)return(0,_e.of)({});const Et={};return(0,a.H)(ze).pipe((0,G.Z)(Ot=>function hu(pe,Ae,Fe,Ee){var ze;const Et=null!==(ze=it(Ae))&&void 0!==ze?ze:Ee,Ot=vl(pe,Et);return $n(Ot.resolve?Ot.resolve(Ae,Fe):(0,F.N4e)(Et,()=>Ot(Ae,Fe)))}(pe[Ot],Ae,Fe,Ee).pipe(xe(),(0,ge.M)(Nn=>{if(Nn instanceof ka)throw ua(new rn,Nn);Et[Ot]=Nn}))),et(1),(0,V.u)(Et),J(Ot=>_t(Ot)?f.w:(0,d.$)(Ot)))}(Et,pe,Ae,Ee).pipe((0,S.T)(Ot=>(pe._resolvedData=Ot,pe.data=ni(pe,pe.parent,Fe).resolve,null)))}(ur,Ee,pe,Ae):(ur.data=ni(ur,ur.parent,pe).resolve,(0,_e.of)(void 0))),(0,ge.M)(()=>Nn++),et(1),(0,G.Z)(ur=>Nn===Ot.size?(0,_e.of)(Fe):f.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ge.M)({next:()=>pi=!0,complete:()=>{pi||this.cancelNavigationTransition(Dr,"",Vs.NoDataFromResolver)}}))}),(0,ge.M)(Dr=>{const pi=new _o(Dr.id,this.urlSerializer.serialize(Dr.extractedUrl),this.urlSerializer.serialize(Dr.urlAfterRedirects),Dr.targetSnapshot);this.events.next(pi)}))}),Jl(Cn=>{const Dr=pi=>{var Sr;const Qr=[];null!==(Sr=pi.routeConfig)&&void 0!==Sr&&Sr.loadComponent&&!pi.routeConfig._loadedComponent&&Qr.push(this.configLoader.loadComponent(pi.routeConfig).pipe((0,ge.M)(Ao=>{pi.component=Ao}),(0,S.T)(()=>{})));for(const Ao of pi.children)Qr.push(...Dr(Ao));return Qr};return(0,M.z)(Dr(Cn.targetSnapshot.root)).pipe(X(null),(0,E.s)(1))}),Jl(()=>this.afterPreactivation()),(0,x.n)(()=>{var Cn;const{currentSnapshot:Dr,targetSnapshot:pi}=Ot,Sr=null===(Cn=this.createViewTransition)||void 0===Cn?void 0:Cn.call(this,this.environmentInjector,Dr.root,pi.root);return Sr?(0,a.H)(Sr).pipe((0,S.T)(()=>Ot)):(0,_e.of)(Ot)}),(0,S.T)(Cn=>{const Dr=function lu(pe,Ae,Fe){const Ee=Yo(pe,Ae._root,Fe?Fe._root:void 0);return new vr(Ee,Ae)}(Ee.routeReuseStrategy,Cn.targetSnapshot,Cn.currentRouterState);return this.currentTransition=Ot={...Cn,targetRouterState:Dr},this.currentNavigation.targetRouterState=Dr,Ot}),(0,ge.M)(()=>{this.events.next(new In)}),((pe,Ae,Fe,Ee)=>(0,S.T)(ze=>(new da(Ae,ze.targetRouterState,ze.currentRouterState,Fe,Ee).activate(pe),ze)))(this.rootContexts,Ee.routeReuseStrategy,Cn=>this.events.next(Cn),this.inputBindingEnabled),(0,E.s)(1),(0,ge.M)({next:Cn=>{var Dr;Nn=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vs(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),this.urlSerializer.serialize(Cn.urlAfterRedirects))),null===(Dr=this.titleStrategy)||void 0===Dr||Dr.updateTitle(Cn.targetRouterState.snapshot),Cn.resolve(!0)},complete:()=>{Nn=!0}}),function dt(pe){return(0,Z.N)((Ae,Fe)=>{(0,ne.Tg)(pe).subscribe((0,ie._)(Fe,()=>Fe.complete(),Xe.l)),!Fe.closed&&Ae.subscribe(Fe)})}(this.transitionAbortSubject.pipe((0,ge.M)(Cn=>{throw Cn}))),me(()=>{var Cn;!Nn&&!ur&&this.cancelNavigationTransition(Ot,"",Vs.SupersededByNewNavigation),(null===(Cn=this.currentTransition)||void 0===Cn?void 0:Cn.id)===Ot.id&&(this.currentNavigation=null,this.currentTransition=null)}),J(Cn=>{if(ur=!0,As(Cn))this.events.next(new fo(Ot.id,this.urlSerializer.serialize(Ot.extractedUrl),Cn.message,Cn.cancellationCode)),function Ll(pe){return As(pe)&&L(pe.url)}(Cn)?this.events.next(new ts(Cn.url,Cn.navigationBehaviorOptions)):Ot.resolve(!1);else{var Dr;const pi=new ea(Ot.id,this.urlSerializer.serialize(Ot.extractedUrl),Cn,null!==(Dr=Ot.targetSnapshot)&&void 0!==Dr?Dr:void 0);try{const Sr=(0,F.N4e)(this.environmentInjector,()=>{var Qr;return null===(Qr=this.navigationErrorHandler)||void 0===Qr?void 0:Qr.call(this,pi)});if(Sr instanceof ka){const{message:Qr,cancellationCode:Ao}=ua(0,Sr);this.events.next(new fo(Ot.id,this.urlSerializer.serialize(Ot.extractedUrl),Qr,Ao)),this.events.next(new ts(Sr.redirectTo,Sr.navigationBehaviorOptions))}else{this.events.next(pi);const Qr=Ee.errorHandler(Cn);Ot.resolve(!!Qr)}}catch(Sr){this.options.resolveNavigationPromiseOnError?Ot.resolve(!1):Ot.reject(Sr)}}return f.w}))}))}cancelNavigationTransition(Ee,ze,Et){const Ot=new fo(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),ze,Et);this.events.next(Ot),Ee.resolve(!1)}isUpdatingInternalState(){var Ee,ze;return(null===(Ee=this.currentTransition)||void 0===Ee?void 0:Ee.extractedUrl.toString())!==(null===(ze=this.currentTransition)||void 0===ze?void 0:ze.currentUrlTree.toString())}isUpdatedBrowserUrl(){var Ee,ze,Et,Ot;const Nn=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),ur=null!==(Ee=null===(ze=this.currentNavigation)||void 0===ze?void 0:ze.targetBrowserUrl)&&void 0!==Ee?Ee:null===(Et=this.currentNavigation)||void 0===Et?void 0:Et.extractedUrl;return Nn.toString()!==(null==ur?void 0:ur.toString())&&!(null!==(Ot=this.currentNavigation)&&void 0!==Ot&&Ot.extras.skipLocationChange)}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();function ns(pe){return pe!==xs}let fi=(()=>{var pe;class Ae{}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:()=>(0,F.WQX)(Ur),providedIn:"root"}),Ae})();class Is{shouldDetach(Ae){return!1}store(Ae,Fe){}shouldAttach(Ae){return!1}retrieve(Ae){return null}shouldReuseRoute(Ae,Fe){return Ae.routeConfig===Fe.routeConfig}}let Ur=(()=>{var pe;class Ae extends Is{}return(pe=Ae).\u0275fac=(()=>{let Fe;return function(ze){return(Fe||(Fe=F.xGo(pe)))(ze||pe)}})(),pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})(),Ws=(()=>{var pe;class Ae{}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:()=>(0,F.WQX)(fa),providedIn:"root"}),Ae})(),fa=(()=>{var pe;class Ae extends Ws{constructor(){super(...arguments),this.location=(0,F.WQX)(v.aZ),this.urlSerializer=(0,F.WQX)(jn),this.options=(0,F.WQX)(Da,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,F.WQX)(Zt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ct,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var Ee,ze;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(Ee=null===(ze=this.restoredState())||void 0===ze?void 0:ze.\u0275routerPageId)&&void 0!==Ee?Ee:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(Ee){return this.location.subscribe(ze=>{"popstate"===ze.type&&Ee(ze.url,ze.state)})}handleRouterEvent(Ee,ze){if(Ee instanceof $s)this.stateMemento=this.createStateMemento();else if(Ee instanceof Vo)this.rawUrlTree=ze.initialUrl;else if(Ee instanceof ta){if("eager"===this.urlUpdateStrategy&&!ze.extras.skipLocationChange){var Et;const Nn=this.urlHandlingStrategy.merge(ze.finalUrl,ze.initialUrl);this.setBrowserUrl(null!==(Et=ze.targetBrowserUrl)&&void 0!==Et?Et:Nn,ze)}}else if(Ee instanceof In){var Ot;this.currentUrlTree=ze.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(ze.finalUrl,ze.initialUrl),this.routerState=ze.targetRouterState,"deferred"!==this.urlUpdateStrategy||ze.extras.skipLocationChange||this.setBrowserUrl(null!==(Ot=ze.targetBrowserUrl)&&void 0!==Ot?Ot:this.rawUrlTree,ze)}else Ee instanceof fo&&(Ee.code===Vs.GuardRejected||Ee.code===Vs.NoDataFromResolver)?this.restoreHistory(ze):Ee instanceof ea?this.restoreHistory(ze,!0):Ee instanceof vs&&(this.lastSuccessfulId=Ee.id,this.currentPageId=this.browserPageId)}setBrowserUrl(Ee,ze){const Et=Ee instanceof ct?this.urlSerializer.serialize(Ee):Ee;if(this.location.isCurrentPathEqualTo(Et)||ze.extras.replaceUrl){const Nn={...ze.extras.state,...this.generateNgRouterState(ze.id,this.browserPageId)};this.location.replaceState(Et,"",Nn)}else{const Ot={...ze.extras.state,...this.generateNgRouterState(ze.id,this.browserPageId+1)};this.location.go(Et,"",Ot)}}restoreHistory(Ee,ze=!1){if("computed"===this.canceledNavigationResolution){const Ot=this.currentPageId-this.browserPageId;0!==Ot?this.location.historyGo(Ot):this.currentUrlTree===Ee.finalUrl&&0===Ot&&(this.resetState(Ee),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(ze&&this.resetState(Ee),this.resetUrlToCurrentUrlTree())}resetState(Ee){var ze;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(ze=Ee.finalUrl)&&void 0!==ze?ze:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(Ee,ze){return"computed"===this.canceledNavigationResolution?{navigationId:Ee,\u0275routerPageId:ze}:{navigationId:Ee}}}return(pe=Ae).\u0275fac=(()=>{let Fe;return function(ze){return(Fe||(Fe=F.xGo(pe)))(ze||pe)}})(),pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();var ro=function(pe){return pe[pe.COMPLETE=0]="COMPLETE",pe[pe.FAILED=1]="FAILED",pe[pe.REDIRECTING=2]="REDIRECTING",pe}(ro||{});function xa(pe,Ae){pe.events.pipe((0,z.p)(Fe=>Fe instanceof vs||Fe instanceof fo||Fe instanceof ea||Fe instanceof Vo),(0,S.T)(Fe=>Fe instanceof vs||Fe instanceof Vo?ro.COMPLETE:Fe instanceof fo&&(Fe.code===Vs.Redirect||Fe.code===Vs.SupersededByNewNavigation)?ro.REDIRECTING:ro.FAILED),(0,z.p)(Fe=>Fe!==ro.REDIRECTING),(0,E.s)(1)).subscribe(()=>{Ae()})}function wa(pe){throw pe}const qa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ka={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bo=(()=>{var pe;class Ae{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var Ee,ze;this.disposed=!1,this.console=(0,F.WQX)(F.H3F),this.stateManager=(0,F.WQX)(Ws),this.options=(0,F.WQX)(Da,{optional:!0})||{},this.pendingTasks=(0,F.WQX)(F.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,F.WQX)(Si),this.urlSerializer=(0,F.WQX)(jn),this.location=(0,F.WQX)(v.aZ),this.urlHandlingStrategy=(0,F.WQX)(Zt),this._events=new p.B,this.errorHandler=this.options.errorHandler||wa,this.navigated=!1,this.routeReuseStrategy=(0,F.WQX)(fi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(Ee=null===(ze=(0,F.WQX)(no,{optional:!0}))||void 0===ze?void 0:ze.flat())&&void 0!==Ee?Ee:[],this.componentInputBindingEnabled=!!(0,F.WQX)(Hs,{optional:!0}),this.eventsSubscription=new g.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:Et=>{this.console.warn(Et)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const Ee=this.navigationTransitions.events.subscribe(ze=>{try{const Et=this.navigationTransitions.currentTransition,Ot=this.navigationTransitions.currentNavigation;if(null!==Et&&null!==Ot)if(this.stateManager.handleRouterEvent(ze,Ot),ze instanceof fo&&ze.code!==Vs.Redirect&&ze.code!==Vs.SupersededByNewNavigation)this.navigated=!0;else if(ze instanceof vs)this.navigated=!0;else if(ze instanceof ts){const Nn=ze.navigationBehaviorOptions,ur=this.urlHandlingStrategy.merge(ze.url,Et.currentRawUrl),Cn={browserUrl:Et.extras.browserUrl,info:Et.extras.info,skipLocationChange:Et.extras.skipLocationChange,replaceUrl:Et.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ns(Et.source),...Nn};this.scheduleNavigation(ur,xs,null,Cn,{resolve:Et.resolve,reject:Et.reject,promise:Et.promise})}(function fu(pe){return!(pe instanceof In||pe instanceof ts)})(ze)&&this._events.next(ze)}catch(Et){this.navigationTransitions.transitionAbortSubject.next(Et)}});this.eventsSubscription.add(Ee)}resetRootComponentType(Ee){this.routerState.root.component=Ee,this.navigationTransitions.rootComponentType=Ee}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xs,this.stateManager.restoredState())}setUpLocationChangeListener(){var Ee;null!==(Ee=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==Ee||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((ze,Et)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(ze,"popstate",Et)},0)}))}navigateToSyncWithBrowser(Ee,ze,Et){const Ot={replaceUrl:!0},Nn=null!=Et&&Et.navigationId?Et:null;if(Et){const Cn={...Et};delete Cn.navigationId,delete Cn.\u0275routerPageId,0!==Object.keys(Cn).length&&(Ot.state=Cn)}const ur=this.parseUrl(Ee);this.scheduleNavigation(ur,ze,Nn,Ot)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(Ee){this.config=Ee.map(ha),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(Ee,ze={}){const{relativeTo:Et,queryParams:Ot,fragment:Nn,queryParamsHandling:ur,preserveFragment:Cn}=ze,Dr=Cn?this.currentUrlTree.fragment:Nn;let Sr,pi=null;switch(ur){case"merge":pi={...this.currentUrlTree.queryParams,...Ot};break;case"preserve":pi=this.currentUrlTree.queryParams;break;default:pi=Ot||null}null!==pi&&(pi=this.removeEmptyProps(pi));try{Sr=H(Et?Et.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof Ee[0]||"/"!==Ee[0][0])&&(Ee=[]),Sr=this.currentUrlTree.root}return de(Sr,Ee,pi,null!=Dr?Dr:null)}navigateByUrl(Ee,ze={skipLocationChange:!1}){const Et=L(Ee)?Ee:this.parseUrl(Ee),Ot=this.urlHandlingStrategy.merge(Et,this.rawUrlTree);return this.scheduleNavigation(Ot,xs,null,ze)}navigate(Ee,ze={skipLocationChange:!1}){return function bl(pe){for(let Ae=0;Ae<pe.length;Ae++)if(null==pe[Ae])throw new F.wOt(4008,!1)}(Ee),this.navigateByUrl(this.createUrlTree(Ee,ze),ze)}serializeUrl(Ee){return this.urlSerializer.serialize(Ee)}parseUrl(Ee){try{return this.urlSerializer.parse(Ee)}catch{return this.urlSerializer.parse("/")}}isActive(Ee,ze){let Et;if(Et=!0===ze?{...qa}:!1===ze?{...Ka}:ze,L(Ee))return Mn(this.currentUrlTree,Ee,Et);const Ot=this.parseUrl(Ee);return Mn(this.currentUrlTree,Ot,Et)}removeEmptyProps(Ee){return Object.entries(Ee).reduce((ze,[Et,Ot])=>(null!=Ot&&(ze[Et]=Ot),ze),{})}scheduleNavigation(Ee,ze,Et,Ot,Nn){if(this.disposed)return Promise.resolve(!1);let ur,Cn,Dr;Nn?(ur=Nn.resolve,Cn=Nn.reject,Dr=Nn.promise):Dr=new Promise((Sr,Qr)=>{ur=Sr,Cn=Qr});const pi=this.pendingTasks.add();return xa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(pi))}),this.navigationTransitions.handleNavigationRequest({source:ze,restoredState:Et,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:Ee,extras:Ot,resolve:ur,reject:Cn,promise:Dr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dr.catch(Sr=>Promise.reject(Sr))}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})(),wd=(()=>{var pe;class Ae{constructor(Ee,ze,Et,Ot,Nn,ur){var Cn;this.router=Ee,this.route=ze,this.tabIndexAttribute=Et,this.renderer=Ot,this.el=Nn,this.locationStrategy=ur,this.href=null,this.onChanges=new p.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const Dr=null===(Cn=Nn.nativeElement.tagName)||void 0===Cn?void 0:Cn.toLowerCase();this.isAnchorElement="a"===Dr||"area"===Dr,this.isAnchorElement?this.subscription=Ee.events.subscribe(pi=>{pi instanceof vs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(Ee){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",Ee)}ngOnChanges(Ee){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(Ee){null==Ee?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=L(Ee)||Array.isArray(Ee)?Ee:[Ee],this.setTabIndexIfNotOnNativeEl("0"))}onClick(Ee,ze,Et,Ot,Nn){const ur=this.urlTree;return!!(null===ur||this.isAnchorElement&&(0!==Ee||ze||Et||Ot||Nn||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(ur,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var Ee;null===(Ee=this.subscription)||void 0===Ee||Ee.unsubscribe()}updateHref(){var Ee;const ze=this.urlTree;this.href=null!==ze&&this.locationStrategy?null===(Ee=this.locationStrategy)||void 0===Ee?void 0:Ee.prepareExternalUrl(this.router.serializeUrl(ze)):null;const Et=null===this.href?null:(0,F.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",Et)}applyAttributeValue(Ee,ze){const Et=this.renderer,Ot=this.el.nativeElement;null!==ze?Et.setAttribute(Ot,Ee,ze):Et.removeAttribute(Ot,Ee)}get urlTree(){return null===this.routerLinkInput?null:L(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)(F.rXU(bo),F.rXU(Vr),F.kS0("tabindex"),F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(v.hb))},pe.\u0275dir=F.FsC({type:pe,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(Ee,ze){1&Ee&&F.bIt("click",function(Ot){return ze.onClick(Ot.button,Ot.ctrlKey,Ot.shiftKey,Ot.altKey,Ot.metaKey)}),2&Ee&&F.BMQ("target",ze.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",F.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",F.L39],replaceUrl:[2,"replaceUrl","replaceUrl",F.L39],routerLink:"routerLink"},standalone:!0,features:[F.GFd,F.OA$]}),Ae})();class zs{}let Ua=(()=>{var pe;class Ae{preload(Ee,ze){return ze().pipe(J(()=>(0,_e.of)(null)))}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})(),kc=(()=>{var pe;class Ae{constructor(Ee,ze,Et,Ot,Nn){this.router=Ee,this.injector=Et,this.preloadingStrategy=Ot,this.loader=Nn}setUpPreloading(){this.subscription=this.router.events.pipe((0,z.p)(Ee=>Ee instanceof vs),ae(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Ee,ze){const Et=[];for(const Cn of ze){var Ot,Nn;Cn.providers&&!Cn._injector&&(Cn._injector=(0,F.Ol2)(Cn.providers,Ee,`Route: ${Cn.path}`));const Dr=null!==(Ot=Cn._injector)&&void 0!==Ot?Ot:Ee,pi=null!==(Nn=Cn._loadedInjector)&&void 0!==Nn?Nn:Dr;var ur;(Cn.loadChildren&&!Cn._loadedRoutes&&void 0===Cn.canLoad||Cn.loadComponent&&!Cn._loadedComponent)&&Et.push(this.preloadConfig(Dr,Cn)),(Cn.children||Cn._loadedRoutes)&&Et.push(this.processRoutes(pi,null!==(ur=Cn.children)&&void 0!==ur?ur:Cn._loadedRoutes))}return(0,a.H)(Et).pipe((0,yt.U)())}preloadConfig(Ee,ze){return this.preloadingStrategy.preload(ze,()=>{let Et;Et=ze.loadChildren&&void 0===ze.canLoad?this.loader.loadChildren(Ee,ze):(0,_e.of)(null);const Ot=Et.pipe((0,G.Z)(Nn=>{var ur;return null===Nn?(0,_e.of)(void 0):(ze._loadedRoutes=Nn.routes,ze._loadedInjector=Nn.injector,this.processRoutes(null!==(ur=Nn.injector)&&void 0!==ur?ur:Ee,Nn.routes))}));if(ze.loadComponent&&!ze._loadedComponent){const Nn=this.loader.loadComponent(ze);return(0,a.H)([Ot,Nn]).pipe((0,yt.U)())}return Ot})}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)(F.KVO(bo),F.KVO(F.Ql9),F.KVO(F.uvJ),F.KVO(zs),F.KVO(Ds))},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Ae})();const Ya=new F.nKC("");let pu=(()=>{var pe;class Ae{constructor(Ee,ze,Et,Ot,Nn={}){this.urlSerializer=Ee,this.transitions=ze,this.viewportScroller=Et,this.zone=Ot,this.options=Nn,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Nn.scrollPositionRestoration||(Nn.scrollPositionRestoration="disabled"),Nn.anchorScrolling||(Nn.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(Ee=>{Ee instanceof $s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Ee.navigationTrigger,this.restoredId=Ee.restoredState?Ee.restoredState.navigationId:0):Ee instanceof vs?(this.lastId=Ee.id,this.scheduleScrollEvent(Ee,this.urlSerializer.parse(Ee.urlAfterRedirects).fragment)):Ee instanceof Vo&&Ee.code===Ko.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(Ee,this.urlSerializer.parse(Ee.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(Ee=>{Ee instanceof Vt&&(Ee.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Ee.position):Ee.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Ee.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Ee,ze){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vt(Ee,"popstate"===this.lastSource?this.store[this.restoredId]:null,ze))})},0)})}ngOnDestroy(){var Ee,ze;null===(Ee=this.routerEventsSubscription)||void 0===Ee||Ee.unsubscribe(),null===(ze=this.scrollEventsSubscription)||void 0===ze||ze.unsubscribe()}}return(pe=Ae).\u0275fac=function(Ee){F.QTQ()},pe.\u0275prov=F.jDH({token:pe,factory:pe.\u0275fac}),Ae})();function Ba(pe,Ae){return{\u0275kind:pe,\u0275providers:Ae}}function gh(){const pe=(0,F.WQX)(F.zZn);return Ae=>{var Fe,Ee;const ze=pe.get(F.o8S);if(Ae!==ze.components[0])return;const Et=pe.get(bo),Ot=pe.get(ra);1===pe.get(ps)&&Et.initialNavigation(),null===(Fe=pe.get(Za,null,F.$GK.Optional))||void 0===Fe||Fe.setUpPreloading(),null===(Ee=pe.get(Ya,null,F.$GK.Optional))||void 0===Ee||Ee.init(),Et.resetRootComponentType(ze.componentTypes[0]),Ot.closed||(Ot.next(),Ot.complete(),Ot.unsubscribe())}}const ra=new F.nKC("",{factory:()=>new p.B}),ps=new F.nKC("",{providedIn:"root",factory:()=>1}),Za=new F.nKC("");function mu(pe){return Ba(0,[{provide:Za,useExisting:kc},{provide:zs,useExisting:pe}])}function Gu(pe){return Ba(9,[{provide:Rt,useValue:mt},{provide:en,useValue:{skipNextTransition:!(null==pe||!pe.skipInitialTransition),...pe}}])}const gu=new F.nKC("ROUTER_FORROOT_GUARD"),Vf=[v.aZ,{provide:jn,useClass:rn},bo,on,{provide:Vr,useFactory:function Bu(pe){return pe.routerState.root},deps:[bo]},Ds,[]];let _h=(()=>{var pe;class Ae{constructor(Ee){}static forRoot(Ee,ze){return{ngModule:Ae,providers:[Vf,[],{provide:no,multi:!0,useValue:Ee},{provide:gu,useFactory:Um,deps:[[bo,new F.Xx1,new F.kdw]]},{provide:Da,useValue:ze||{}},null!=ze&&ze.useHash?{provide:v.hb,useClass:v.fw}:{provide:v.hb,useClass:v.Sm},{provide:Ya,useFactory:()=>{const pe=(0,F.WQX)(v.Xr),Ae=(0,F.WQX)(F.SKi),Fe=(0,F.WQX)(Da),Ee=(0,F.WQX)(Si),ze=(0,F.WQX)(jn);return Fe.scrollOffset&&pe.setOffset(Fe.scrollOffset),new pu(ze,Ee,pe,Ae,Fe)}},null!=ze&&ze.preloadingStrategy?mu(ze.preloadingStrategy).\u0275providers:[],null!=ze&&ze.initialNavigation?Sa(ze):[],null!=ze&&ze.bindToComponentInputs?Ba(8,[Yl,{provide:Hs,useExisting:Yl}]).\u0275providers:[],null!=ze&&ze.enableViewTransitions?Gu().\u0275providers:[],[{provide:Ed,useFactory:gh},{provide:F.iLQ,multi:!0,useExisting:Ed}]]}}static forChild(Ee){return{ngModule:Ae,providers:[{provide:no,multi:!0,useValue:Ee}]}}}return(pe=Ae).\u0275fac=function(Ee){return new(Ee||pe)(F.KVO(gu,8))},pe.\u0275mod=F.$C({type:pe}),pe.\u0275inj=F.G2t({}),Ae})();function Um(pe){return"guarded"}function Sa(pe){return["disabled"===pe.initialNavigation?Ba(3,[{provide:F.hnV,multi:!0,useFactory:()=>{const Ae=(0,F.WQX)(bo);return()=>{Ae.setUpLocationChangeListener()}}},{provide:ps,useValue:2}]).\u0275providers:[],"enabledBlocking"===pe.initialNavigation?Ba(2,[{provide:ps,useValue:0},{provide:F.hnV,multi:!0,deps:[F.zZn],useFactory:Ae=>{const Fe=Ae.get(v.hj,Promise.resolve());return()=>Fe.then(()=>new Promise(Ee=>{const ze=Ae.get(bo),Et=Ae.get(ra);xa(ze,()=>{Ee(!0)}),Ae.get(Si).afterPreactivation=()=>(Ee(!0),Et.closed?(0,_e.of)(void 0):Et),ze.initialNavigation()}))}}]).\u0275providers:[]]}const Ed=new F.nKC("")},3656:(br,kn,je)=>{"use strict";je.d(kn,{Yq:()=>fn,TS:()=>bt,sR:()=>Pt,el:()=>te,Sb:()=>jn,QE:()=>B,CF:()=>xt,Rg:()=>On,p4:()=>L,jM:()=>Ft,q9:()=>Lt,y8:()=>zt,Kb:()=>_n,OD:()=>yt,CE:()=>Ie,pF:()=>Ye,fL:()=>H,YV:()=>sr,er:()=>se,z3:()=>de});var F=je(467),j=je(9842),Mt=je(3953),Jt=je(9858),a=je(177),_e=je(5531),q=je(4442);var X=je(1413),ee=je(3726),Y=je(4412),ve=je(4572),xe=je(7673),ae=je(1635),ge=je(5964),ne=je(5558),J=je(3669),ce=je(9974),Te=je(4360);function le(He,$e){return He===$e}var V=je(4341);const me=["tabsInner"];let yt=(()=>{var He;class $e{constructor(ot,Dt){(0,j.A)(this,"doc",void 0),(0,j.A)(this,"_readyPromise",void 0),(0,j.A)(this,"win",void 0),(0,j.A)(this,"backButton",new X.B),(0,j.A)(this,"keyboardDidShow",new X.B),(0,j.A)(this,"keyboardDidHide",new X.B),(0,j.A)(this,"pause",new X.B),(0,j.A)(this,"resume",new X.B),(0,j.A)(this,"resize",new X.B),this.doc=ot,Dt.run(()=>{var vn;let Hn;this.win=ot.defaultView,this.backButton.subscribeWithPriority=function(cr,Pr){return this.subscribe(Ui=>Ui.register(cr,ji=>Dt.run(()=>Pr(ji))))},ht(this.pause,ot,"pause",Dt),ht(this.resume,ot,"resume",Dt),ht(this.backButton,ot,"ionBackButton",Dt),ht(this.resize,this.win,"resize",Dt),ht(this.keyboardDidShow,this.win,"ionKeyboardDidShow",Dt),ht(this.keyboardDidHide,this.win,"ionKeyboardDidHide",Dt),this._readyPromise=new Promise(cr=>{Hn=cr}),null!==(vn=this.win)&&void 0!==vn&&vn.cordova?ot.addEventListener("deviceready",()=>{Hn("cordova")},{once:!0}):Hn("dom")})}is(ot){return(0,_e.a)(this.win,ot)}platforms(){return(0,_e.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(ot){return Ut(this.win.location.href,ot)}isLandscape(){return!this.isPortrait()}isPortrait(){var ot,Dt;return null===(ot=(Dt=this.win).matchMedia)||void 0===ot?void 0:ot.call(Dt,"(orientation: portrait)").matches}testUserAgent(ot){const Dt=this.win.navigator;return!!(null!=Dt&&Dt.userAgent&&Dt.userAgent.indexOf(ot)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.KVO(a.qQ),Mt.KVO(Mt.SKi))}),(0,j.A)($e,"\u0275prov",Mt.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})),$e})();const Ut=(He,$e)=>{$e=$e.replace(/[[\]\\]/g,"\\$&");const ot=new RegExp("[\\?&]"+$e+"=([^&#]*)").exec(He);return ot?decodeURIComponent(ot[1].replace(/\+/g," ")):null},ht=(He,$e,pt,ot)=>{$e&&$e.addEventListener(pt,Dt=>{ot.run(()=>{He.next(null!=Dt?Dt.detail:void 0)})})};let Lt=(()=>{var He;class $e{constructor(ot,Dt,vn,Hn){(0,j.A)(this,"location",void 0),(0,j.A)(this,"serializer",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"topOutlet",void 0),(0,j.A)(this,"direction",lt),(0,j.A)(this,"animated",It),(0,j.A)(this,"animationBuilder",void 0),(0,j.A)(this,"guessDirection","forward"),(0,j.A)(this,"guessAnimation",void 0),(0,j.A)(this,"lastNavId",-1),this.location=Dt,this.serializer=vn,this.router=Hn,Hn&&Hn.events.subscribe(cr=>{if(cr instanceof Jt.Z){const Pr=cr.restoredState?cr.restoredState.navigationId:cr.id;this.guessDirection=this.guessAnimation=Pr<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?cr.id:Pr}}),ot.backButton.subscribeWithPriority(0,cr=>{this.pop(),cr()})}navigateForward(ot,Dt={}){return this.setDirection("forward",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(ot,Dt)}navigateBack(ot,Dt={}){return this.setDirection("back",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(ot,Dt)}navigateRoot(ot,Dt={}){return this.setDirection("root",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(ot,Dt)}back(ot={animated:!0,animationDirection:"back"}){return this.setDirection("back",ot.animated,ot.animationDirection,ot.animation),this.location.back()}pop(){var ot=this;return(0,F.A)(function*(){let Dt=ot.topOutlet;for(;Dt;){if(yield Dt.pop())return!0;Dt=Dt.parentOutlet}return!1})()}setDirection(ot,Dt,vn,Hn){this.direction=ot,this.animated=kt(ot,Dt,vn),this.animationBuilder=Hn}setTopOutlet(ot){this.topOutlet=ot}consumeTransition(){let Dt,ot="root";const vn=this.animationBuilder;return"auto"===this.direction?(ot=this.guessDirection,Dt=this.guessAnimation):(Dt=this.animated,ot=this.direction),this.direction=lt,this.animated=It,this.animationBuilder=void 0,{direction:ot,animation:Dt,animationBuilder:vn}}navigate(ot,Dt){if(Array.isArray(ot))return this.router.navigate(ot,Dt);{const vn=this.serializer.parse(ot.toString());return void 0!==Dt.queryParams&&(vn.queryParams={...Dt.queryParams}),void 0!==Dt.fragment&&(vn.fragment=Dt.fragment),this.router.navigateByUrl(vn,Dt)}}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.KVO(yt),Mt.KVO(a.aZ),Mt.KVO(Jt.Sd),Mt.KVO(Jt.Ix,8))}),(0,j.A)($e,"\u0275prov",Mt.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})),$e})();const kt=(He,$e,pt)=>{if(!1!==$e){if(void 0!==pt)return pt;if("forward"===He||"back"===He)return He;if("root"===He&&!0===$e)return"forward"}},lt="auto",It=void 0;let bt=(()=>{var He;class $e{get(ot,Dt){const vn=St();return vn?vn.get(ot,Dt):null}getBoolean(ot,Dt){const vn=St();return!!vn&&vn.getBoolean(ot,Dt)}getNumber(ot,Dt){const vn=St();return vn?vn.getNumber(ot,Dt):0}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)}),(0,j.A)($e,"\u0275prov",Mt.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})),$e})();const Pt=new Mt.nKC("USERCONFIG"),St=()=>{if(typeof window<"u"){const He=window.Ionic;if(null!=He&&He.config)return He.config}return null};class zt{constructor($e={}){(0,j.A)(this,"data",void 0),this.data=$e,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get($e){return this.data[$e]}}let fn=(()=>{var He;class $e{constructor(){(0,j.A)(this,"zone",(0,Mt.WQX)(Mt.SKi)),(0,j.A)(this,"applicationRef",(0,Mt.WQX)(Mt.o8S)),(0,j.A)(this,"config",(0,Mt.WQX)(Pt))}create(ot,Dt,vn){var Hn;return new $n(ot,Dt,this.applicationRef,this.zone,vn,null!==(Hn=this.config.useSetInputAPI)&&void 0!==Hn&&Hn)}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)}),(0,j.A)($e,"\u0275prov",Mt.jDH({token:He,factory:He.\u0275fac})),$e})();class $n{constructor($e,pt,ot,Dt,vn,Hn){(0,j.A)(this,"environmentInjector",void 0),(0,j.A)(this,"injector",void 0),(0,j.A)(this,"applicationRef",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"elementReferenceKey",void 0),(0,j.A)(this,"enableSignalsSupport",void 0),(0,j.A)(this,"elRefMap",new WeakMap),(0,j.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=$e,this.injector=pt,this.applicationRef=ot,this.zone=Dt,this.elementReferenceKey=vn,this.enableSignalsSupport=Hn}attachViewToDom($e,pt,ot,Dt){return this.zone.run(()=>new Promise(vn=>{const Hn={...ot};void 0!==this.elementReferenceKey&&(Hn[this.elementReferenceKey]=$e),vn(En(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,$e,pt,Hn,Dt,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom($e,pt){return this.zone.run(()=>new Promise(ot=>{const Dt=this.elRefMap.get(pt);if(Dt){Dt.destroy(),this.elRefMap.delete(pt);const vn=this.elEventsMap.get(pt);vn&&(vn(),this.elEventsMap.delete(pt))}ot()}))}}const En=(He,$e,pt,ot,Dt,vn,Hn,cr,Pr,Ui,ji,Us)=>{const xs=Mt.zZn.create({providers:Ln(Pr),parent:pt}),wi=(0,Mt.a0P)(cr,{environmentInjector:$e,elementInjector:xs}),ds=wi.instance,$s=wi.location.nativeElement;if(Pr)if(ji&&void 0!==ds[ji]&&console.error(`[Ionic Error]: ${ji} is a reserved property when using ${Hn.tagName.toLowerCase()}. Rename or remove the "${ji}" property from ${cr.name}.`),!0===Us&&void 0!==wi.setInput){const{modal:Vs,popover:Ko,...fo}=Pr;for(const Vo in fo)wi.setInput(Vo,fo[Vo]);void 0!==Vs&&Object.assign(ds,{modal:Vs}),void 0!==Ko&&Object.assign(ds,{popover:Ko})}else Object.assign(ds,Pr);if(Ui)for(const Vs of Ui)$s.classList.add(Vs);const vs=Mn(He,ds,$s);return Hn.appendChild($s),ot.attachView(wi.hostView),Dt.set($s,wi),vn.set($s,vs),$s},Kn=[q.L,q.a,q.b,q.c,q.d],Mn=(He,$e,pt)=>He.run(()=>{const ot=Kn.filter(Dt=>"function"==typeof $e[Dt]).map(Dt=>{const vn=Hn=>$e[Dt](Hn.detail);return pt.addEventListener(Dt,vn),()=>pt.removeEventListener(Dt,vn)});return()=>ot.forEach(Dt=>Dt())}),pr=new Mt.nKC("NavParamsToken"),Ln=He=>[{provide:pr,useValue:He},{provide:zt,useFactory:nr,deps:[pr]}],nr=He=>new zt(He),hn=(He,$e)=>{const pt=He.prototype;$e.forEach(ot=>{Object.defineProperty(pt,ot,{get(){return this.el[ot]},set(Dt){this.z.runOutsideAngular(()=>this.el[ot]=Dt)}})})},Xn=(He,$e)=>{const pt=He.prototype;$e.forEach(ot=>{pt[ot]=function(){const Dt=arguments;return this.z.runOutsideAngular(()=>this.el[ot].apply(this.el,Dt))}})},Tn=(He,$e,pt)=>{pt.forEach(ot=>He[ot]=(0,ee.R)($e,ot))};function ct(He){return function(pt){const{defineCustomElementFn:ot,inputs:Dt,methods:vn}=He;return void 0!==ot&&ot(),Dt&&hn(pt,Dt),vn&&Xn(pt,vn),pt}}const ft=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],Qe=["present","dismiss","onDidDismiss","onWillDismiss"];let xt=(()=>{var He;let $e=((0,j.A)(He=class{constructor(ot,Dt,vn){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=vn,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ot.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ot.detectChanges()}),Tn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(Mt.gRc),Mt.rXU(Mt.aKT),Mt.rXU(Mt.SKi))}),(0,j.A)(He,"\u0275dir",Mt.FsC({type:He,selectors:[["ion-popover"]],contentQueries:function(ot,Dt,vn){if(1&ot&&Mt.wni(vn,Mt.C4Q,5),2&ot){let Hn;Mt.mGM(Hn=Mt.lsd())&&(Dt.template=Hn.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),He);return $e=(0,ae.Cg)([ct({inputs:ft,methods:Qe})],$e),$e})();const un=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],An=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let jn=(()=>{var He;let $e=((0,j.A)(He=class{constructor(ot,Dt,vn){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=vn,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ot.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ot.detectChanges()}),Tn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(Mt.gRc),Mt.rXU(Mt.aKT),Mt.rXU(Mt.SKi))}),(0,j.A)(He,"\u0275dir",Mt.FsC({type:He,selectors:[["ion-modal"]],contentQueries:function(ot,Dt,vn){if(1&ot&&Mt.wni(vn,Mt.C4Q,5),2&ot){let Hn;Mt.mGM(Hn=Mt.lsd())&&(Dt.template=Hn.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),He);return $e=(0,ae.Cg)([ct({inputs:un,methods:An})],$e),$e})();const bn=(He,$e)=>((He=He.filter(pt=>pt.stackId!==$e.stackId)).push($e),He),pn=(He,$e)=>{const pt=He.createUrlTree(["."],{relativeTo:$e});return He.serializeUrl(pt)},Xt=(He,$e)=>!$e||He.stackId!==$e.stackId,yn=(He,$e)=>{if(!He)return;const pt=Kt($e);for(let ot=0;ot<pt.length;ot++){if(ot>=He.length)return pt[ot];if(pt[ot]!==He[ot])return}},Kt=He=>He.split("/").map($e=>$e.trim()).filter($e=>""!==$e),an=He=>{He&&(He.ref.destroy(),He.unlistenEvents())};class Yn{constructor($e,pt,ot,Dt,vn,Hn){(0,j.A)(this,"containerEl",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"location",void 0),(0,j.A)(this,"views",[]),(0,j.A)(this,"runningTask",void 0),(0,j.A)(this,"skipTransition",!1),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"activeView",void 0),(0,j.A)(this,"nextId",0),this.containerEl=pt,this.router=ot,this.navCtrl=Dt,this.zone=vn,this.location=Hn,this.tabsPrefix=void 0!==$e?Kt($e):void 0}createView($e,pt){var ot;const Dt=pn(this.router,pt),vn=null==$e||null===(ot=$e.location)||void 0===ot?void 0:ot.nativeElement,Hn=Mn(this.zone,$e.instance,vn);return{id:this.nextId++,stackId:yn(this.tabsPrefix,Dt),unlistenEvents:Hn,element:vn,ref:$e,url:Dt}}getExistingView($e){const pt=pn(this.router,$e),ot=this.views.find(Dt=>Dt.url===pt);return ot&&ot.ref.changeDetectorRef.reattach(),ot}setActive($e){var pt,ot;const Dt=this.navCtrl.consumeTransition();let{direction:vn,animation:Hn,animationBuilder:cr}=Dt;const Pr=this.activeView,Ui=Xt($e,Pr);Ui&&(vn="back",Hn=void 0);const ji=this.views.slice();let Us;const xs=this.router;xs.getCurrentNavigation?Us=xs.getCurrentNavigation():null!==(pt=xs.navigations)&&void 0!==pt&&pt.value&&(Us=xs.navigations.value),null!==(ot=Us)&&void 0!==ot&&null!==(ot=ot.extras)&&void 0!==ot&&ot.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const wi=this.views.includes($e),ds=this.insertView($e,vn);wi||$e.ref.changeDetectorRef.detectChanges();const $s=$e.animationBuilder;return void 0===cr&&"back"===vn&&!Ui&&void 0!==$s&&(cr=$s),Pr&&(Pr.animationBuilder=cr),this.zone.runOutsideAngular(()=>this.wait(()=>(Pr&&Pr.ref.changeDetectorRef.detach(),$e.ref.changeDetectorRef.reattach(),this.transition($e,Pr,Hn,this.canGoBack(1),!1,cr).then(()=>Bt($e,ds,ji,this.location,this.zone)).then(()=>({enteringView:$e,direction:vn,animation:Hn,tabSwitch:Ui})))))}canGoBack($e,pt=this.getActiveStackId()){return this.getStack(pt).length>$e}pop($e,pt=this.getActiveStackId()){return this.zone.run(()=>{const ot=this.getStack(pt);if(ot.length<=$e)return Promise.resolve(!1);const Dt=ot[ot.length-$e-1];let vn=Dt.url;const Hn=Dt.savedData;if(Hn){var cr;const Ui=Hn.get("primary");null!=Ui&&null!==(cr=Ui.route)&&void 0!==cr&&null!==(cr=cr._routerState)&&void 0!==cr&&cr.snapshot.url&&(vn=Ui.route._routerState.snapshot.url)}const{animationBuilder:Pr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(vn,{...Dt.savedExtras,animation:Pr}).then(()=>!0)})}startBackTransition(){const $e=this.activeView;if($e){const pt=this.getStack($e.stackId),ot=pt[pt.length-2],Dt=ot.animationBuilder;return this.wait(()=>this.transition(ot,$e,"back",this.canGoBack(2),!0,Dt))}return Promise.resolve()}endBackTransition($e){$e?(this.skipTransition=!0,this.pop(1)):this.activeView&&nn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl($e){const pt=this.getStack($e);return pt.length>0?pt[pt.length-1]:void 0}getRootUrl($e){const pt=this.getStack($e);return pt.length>0?pt[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(an),this.activeView=void 0,this.views=[]}getStack($e){return this.views.filter(pt=>pt.stackId===$e)}insertView($e,pt){return this.activeView=$e,this.views=((He,$e,pt)=>"root"===pt?bn(He,$e):"forward"===pt?((He,$e)=>(He.indexOf($e)>=0?He=He.filter(ot=>ot.stackId!==$e.stackId||ot.id<=$e.id):He.push($e),He))(He,$e):((He,$e)=>He.indexOf($e)>=0?He.filter(ot=>ot.stackId!==$e.stackId||ot.id<=$e.id):bn(He,$e))(He,$e))(this.views,$e,pt),this.views.slice()}transition($e,pt,ot,Dt,vn,Hn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(pt===$e)return Promise.resolve(!1);const cr=$e?$e.element:void 0,Pr=pt?pt.element:void 0,Ui=this.containerEl;return cr&&cr!==Pr&&(cr.classList.add("ion-page"),cr.classList.add("ion-page-invisible"),Ui.commit)?Ui.commit(cr,Pr,{duration:void 0===ot?0:void 0,direction:ot,showGoBack:Dt,progressAnimation:vn,animationBuilder:Hn}):Promise.resolve(!1)}wait($e){var pt=this;return(0,F.A)(function*(){void 0!==pt.runningTask&&(yield pt.runningTask,pt.runningTask=void 0);const ot=pt.runningTask=$e();return ot.finally(()=>pt.runningTask=void 0),ot})()}}const Bt=(He,$e,pt,ot,Dt)=>"function"==typeof requestAnimationFrame?new Promise(vn=>{requestAnimationFrame(()=>{nn(He,$e,pt,ot,Dt),vn()})}):Promise.resolve(),nn=(He,$e,pt,ot,Dt)=>{Dt.run(()=>pt.filter(vn=>!$e.includes(vn)).forEach(an)),$e.forEach(vn=>{const cr=ot.path().split("?")[0].split("#")[0];if(vn!==He&&vn.url!==cr){const Pr=vn.element;Pr.setAttribute("aria-hidden","true"),Pr.classList.add("ion-page-hidden"),vn.ref.changeDetectorRef.detach()}})};let On=(()=>{var He;class $e{get activatedComponentRef(){return this.activated}set animation(ot){this.nativeEl.animation=ot}set animated(ot){this.nativeEl.animated=ot}set swipeGesture(ot){this._swipeGesture=ot,this.nativeEl.swipeHandler=ot?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Dt=>this.stackCtrl.endBackTransition(Dt)}:void 0}constructor(ot,Dt,vn,Hn,cr,Pr,Ui,ji){(0,j.A)(this,"parentOutlet",void 0),(0,j.A)(this,"nativeEl",void 0),(0,j.A)(this,"activatedView",null),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"_swipeGesture",void 0),(0,j.A)(this,"stackCtrl",void 0),(0,j.A)(this,"proxyMap",new WeakMap),(0,j.A)(this,"currentActivatedRoute$",new Y.t(null)),(0,j.A)(this,"activated",null),(0,j.A)(this,"_activatedRoute",null),(0,j.A)(this,"name",Jt.Xk),(0,j.A)(this,"stackWillChange",new Mt.bkB),(0,j.A)(this,"stackDidChange",new Mt.bkB),(0,j.A)(this,"activateEvents",new Mt.bkB),(0,j.A)(this,"deactivateEvents",new Mt.bkB),(0,j.A)(this,"parentContexts",(0,Mt.WQX)(Jt.Zp)),(0,j.A)(this,"location",(0,Mt.WQX)(Mt.c1b)),(0,j.A)(this,"environmentInjector",(0,Mt.WQX)(Mt.uvJ)),(0,j.A)(this,"inputBinder",(0,Mt.WQX)(zn,{optional:!0})),(0,j.A)(this,"supportsBindingToComponentInputs",!0),(0,j.A)(this,"config",(0,Mt.WQX)(bt)),(0,j.A)(this,"navCtrl",(0,Mt.WQX)(Lt)),this.parentOutlet=ji,this.nativeEl=Hn.nativeElement,this.name=ot||Jt.Xk,this.tabsPrefix="true"===Dt?pn(cr,Ui):void 0,this.stackCtrl=new Yn(this.tabsPrefix,this.nativeEl,cr,this.navCtrl,Pr,vn),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var ot;this.stackCtrl.destroy(),null===(ot=this.inputBinder)||void 0===ot||ot.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const ot=this.getContext();null!=ot&&ot.route&&this.activateWith(ot.route,ot.injector)}new Promise(ot=>((He,$e)=>{He.componentOnReady?He.componentOnReady().then(pt=>$e(pt)):(He=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(He):"function"==typeof requestAnimationFrame?requestAnimationFrame(He):setTimeout(He)})(()=>$e(He))})(this.nativeEl,ot)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(ot,Dt){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Dt=this.getContext();this.activatedView.savedData=new Map(Dt.children.contexts);const vn=this.activatedView.savedData.get("primary");if(vn&&Dt.route&&(vn.route={...Dt.route}),this.activatedView.savedExtras={},Dt.route){const Hn=Dt.route.snapshot;this.activatedView.savedExtras.queryParams=Hn.queryParams,this.activatedView.savedExtras.fragment=Hn.fragment}}const ot=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(ot)}}activateWith(ot,Dt){var vn;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=ot;let Hn,cr=this.stackCtrl.getExistingView(ot);if(cr){Hn=this.activated=cr.ref;const ji=cr.savedData;ji&&(this.getContext().children.contexts=ji),this.updateActivatedRouteProxy(Hn.instance,ot)}else{var Pr;const ji=ot._futureSnapshot,Us=this.parentContexts.getOrCreateContext(this.name).children,xs=new Y.t(null),wi=this.createActivatedRouteProxy(xs,ot),ds=new wn(wi,Us,this.location.injector),$s=null!==(Pr=ji.routeConfig.component)&&void 0!==Pr?Pr:ji.component;Hn=this.activated=this.outletContent.createComponent($s,{index:this.outletContent.length,injector:ds,environmentInjector:null!=Dt?Dt:this.environmentInjector}),xs.next(Hn.instance),cr=this.stackCtrl.createView(this.activated,ot),this.proxyMap.set(Hn.instance,wi),this.currentActivatedRoute$.next({component:Hn.instance,activatedRoute:ot})}null===(vn=this.inputBinder)||void 0===vn||vn.bindActivatedRouteToOutletComponent(this),this.activatedView=cr,this.navCtrl.setTopOutlet(this);const Ui=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:cr,tabSwitch:Xt(cr,Ui)}),this.stackCtrl.setActive(cr).then(ji=>{this.activateEvents.emit(Hn.instance),this.stackDidChange.emit(ji)})}canGoBack(ot=1,Dt){return this.stackCtrl.canGoBack(ot,Dt)}pop(ot=1,Dt){return this.stackCtrl.pop(ot,Dt)}getLastUrl(ot){const Dt=this.stackCtrl.getLastUrl(ot);return Dt?Dt.url:void 0}getLastRouteView(ot){return this.stackCtrl.getLastUrl(ot)}getRootView(ot){return this.stackCtrl.getRootUrl(ot)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(ot,Dt){const vn=new Jt.nX;return vn._futureSnapshot=Dt._futureSnapshot,vn._routerState=Dt._routerState,vn.snapshot=Dt.snapshot,vn.outlet=Dt.outlet,vn.component=Dt.component,vn._paramMap=this.proxyObservable(ot,"paramMap"),vn._queryParamMap=this.proxyObservable(ot,"queryParamMap"),vn.url=this.proxyObservable(ot,"url"),vn.params=this.proxyObservable(ot,"params"),vn.queryParams=this.proxyObservable(ot,"queryParams"),vn.fragment=this.proxyObservable(ot,"fragment"),vn.data=this.proxyObservable(ot,"data"),vn}proxyObservable(ot,Dt){return ot.pipe((0,ge.p)(vn=>!!vn),(0,ne.n)(vn=>this.currentActivatedRoute$.pipe((0,ge.p)(Hn=>null!==Hn&&Hn.component===vn),(0,ne.n)(Hn=>Hn&&Hn.activatedRoute[Dt]),function et(He,$e=J.D){return He=null!=He?He:le,(0,ce.N)((pt,ot)=>{let Dt,vn=!0;pt.subscribe((0,Te._)(ot,Hn=>{const cr=$e(Hn);(vn||!He(Dt,cr))&&(vn=!1,Dt=cr,ot.next(Hn))}))})}())))}updateActivatedRouteProxy(ot,Dt){const vn=this.proxyMap.get(ot);if(!vn)throw new Error("Could not find activated route proxy for view");vn._futureSnapshot=Dt._futureSnapshot,vn._routerState=Dt._routerState,vn.snapshot=Dt.snapshot,vn.outlet=Dt.outlet,vn.component=Dt.component,this.currentActivatedRoute$.next({component:ot,activatedRoute:Dt})}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.kS0("name"),Mt.kS0("tabs"),Mt.rXU(a.aZ),Mt.rXU(Mt.aKT),Mt.rXU(Jt.Ix),Mt.rXU(Mt.SKi),Mt.rXU(Jt.nX),Mt.rXU(He,12))}),(0,j.A)($e,"\u0275dir",Mt.FsC({type:He,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),$e})();class wn{constructor($e,pt,ot){(0,j.A)(this,"route",void 0),(0,j.A)(this,"childContexts",void 0),(0,j.A)(this,"parent",void 0),this.route=$e,this.childContexts=pt,this.parent=ot}get($e,pt){return $e===Jt.nX?this.route:$e===Jt.Zp?this.childContexts:this.parent.get($e,pt)}}const zn=new Mt.nKC("");let lr=(()=>{var He;class $e{constructor(){(0,j.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(ot){this.unsubscribeFromRouteData(ot),this.subscribeToRouteData(ot)}unsubscribeFromRouteData(ot){var Dt;null===(Dt=this.outletDataSubscriptions.get(ot))||void 0===Dt||Dt.unsubscribe(),this.outletDataSubscriptions.delete(ot)}subscribeToRouteData(ot){const{activatedRoute:Dt}=ot,vn=(0,ve.z)([Dt.queryParams,Dt.params,Dt.data]).pipe((0,ne.n)(([Hn,cr,Pr],Ui)=>(Pr={...Hn,...cr,...Pr},0===Ui?(0,xe.of)(Pr):Promise.resolve(Pr)))).subscribe(Hn=>{if(!ot.isActivated||!ot.activatedComponentRef||ot.activatedRoute!==Dt||null===Dt.component)return void this.unsubscribeFromRouteData(ot);const cr=(0,Mt.HJs)(Dt.component);if(cr)for(const{templateName:Pr}of cr.inputs)ot.activatedComponentRef.setInput(Pr,Hn[Pr]);else this.unsubscribeFromRouteData(ot)});this.outletDataSubscriptions.set(ot,vn)}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)}),(0,j.A)($e,"\u0275prov",Mt.jDH({token:He,factory:He.\u0275fac})),$e})();const sr=()=>({provide:zn,useFactory:mr,deps:[Jt.Ix]});function mr(He){return null!=He&&He.componentInputBindingEnabled?new lr:null}const Mr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let te=(()=>{var He;let $e=((0,j.A)(He=class{constructor(ot,Dt,vn,Hn,cr,Pr){(0,j.A)(this,"routerOutlet",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"config",void 0),(0,j.A)(this,"r",void 0),(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.routerOutlet=ot,this.navCtrl=Dt,this.config=vn,this.r=Hn,this.z=cr,Pr.detach(),this.el=this.r.nativeElement}onClick(ot){var Dt;const vn=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(Dt=this.routerOutlet)&&void 0!==Dt&&Dt.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),ot.preventDefault()):null!=vn&&(this.navCtrl.navigateBack(vn,{animation:this.routerAnimation}),ot.preventDefault())}},"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(On,8),Mt.rXU(Lt),Mt.rXU(bt),Mt.rXU(Mt.aKT),Mt.rXU(Mt.SKi),Mt.rXU(Mt.gRc))}),(0,j.A)(He,"\u0275dir",Mt.FsC({type:He,hostBindings:function(ot,Dt){1&ot&&Mt.bIt("click",function(Hn){return Dt.onClick(Hn)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),He);return $e=(0,ae.Cg)([ct({inputs:Mr})],$e),$e})(),Ie=(()=>{var He;class $e{constructor(ot,Dt,vn,Hn,cr){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=ot,this.navCtrl=Dt,this.elementRef=vn,this.router=Hn,this.routerLink=cr}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ot;if(null!==(ot=this.routerLink)&&void 0!==ot&&ot.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(ot){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),ot.preventDefault()}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(a.hb),Mt.rXU(Lt),Mt.rXU(Mt.aKT),Mt.rXU(Jt.Ix),Mt.rXU(Jt.Wk,8))}),(0,j.A)($e,"\u0275dir",Mt.FsC({type:He,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(ot,Dt){1&ot&&Mt.bIt("click",function(Hn){return Dt.onClick(Hn)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Mt.OA$]})),$e})(),Ye=(()=>{var He;class $e{constructor(ot,Dt,vn,Hn,cr){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=ot,this.navCtrl=Dt,this.elementRef=vn,this.router=Hn,this.routerLink=cr}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ot;if(null!==(ot=this.routerLink)&&void 0!==ot&&ot.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(a.hb),Mt.rXU(Lt),Mt.rXU(Mt.aKT),Mt.rXU(Jt.Ix),Mt.rXU(Jt.Wk,8))}),(0,j.A)($e,"\u0275dir",Mt.FsC({type:He,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(ot,Dt){1&ot&&Mt.bIt("click",function(){return Dt.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Mt.OA$]})),$e})();const A=["animated","animation","root","rootParams","swipeGesture"],k=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let B=(()=>{var He;let $e=((0,j.A)(He=class{constructor(ot,Dt,vn,Hn,cr,Pr){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=cr,Pr.detach(),this.el=ot.nativeElement,ot.nativeElement.delegate=Hn.create(Dt,vn),Tn(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(Mt.aKT),Mt.rXU(Mt.uvJ),Mt.rXU(Mt.zZn),Mt.rXU(fn),Mt.rXU(Mt.SKi),Mt.rXU(Mt.gRc))}),(0,j.A)(He,"\u0275dir",Mt.FsC({type:He,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),He);return $e=(0,ae.Cg)([ct({inputs:A,methods:k})],$e),$e})(),L=(()=>{var He;class $e{constructor(ot){(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"tabsInner",void 0),(0,j.A)(this,"ionTabsWillChange",new Mt.bkB),(0,j.A)(this,"ionTabsDidChange",new Mt.bkB),(0,j.A)(this,"tabBarSlot","bottom"),this.navCtrl=ot}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:ot,tabSwitch:Dt}){const vn=ot.stackId;Dt&&void 0!==vn&&this.ionTabsWillChange.emit({tab:vn})}onStackDidChange({enteringView:ot,tabSwitch:Dt}){const vn=ot.stackId;Dt&&void 0!==vn&&(this.tabBar&&(this.tabBar.selectedTab=vn),this.ionTabsDidChange.emit({tab:vn}))}select(ot){const Dt="string"==typeof ot,vn=Dt?ot:ot.detail.tab,Hn=this.outlet.getActiveStackId()===vn,cr=`${this.outlet.tabsPrefix}/${vn}`;if(Dt||ot.stopPropagation(),Hn){const Pr=this.outlet.getActiveStackId(),Ui=this.outlet.getLastRouteView(Pr);if((null==Ui?void 0:Ui.url)===cr)return;const ji=this.outlet.getRootView(vn);return this.navCtrl.navigateRoot(cr,{...ji&&cr===ji.url&&ji.savedExtras,animated:!0,animationDirection:"back"})}{const Pr=this.outlet.getLastRouteView(vn);return this.navCtrl.navigateRoot((null==Pr?void 0:Pr.url)||cr,{...null==Pr?void 0:Pr.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(ot=>{const Dt=ot.el.getAttribute("slot");Dt!==this.tabBarSlot&&(this.tabBarSlot=Dt,this.relocateTabBar())})}relocateTabBar(){const ot=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(ot):this.tabsInner.nativeElement.after(ot)}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(Lt))}),(0,j.A)($e,"\u0275dir",Mt.FsC({type:He,selectors:[["ion-tabs"]],viewQuery:function(ot,Dt){if(1&ot&&Mt.GBs(me,7,Mt.aKT),2&ot){let vn;Mt.mGM(vn=Mt.lsd())&&(Dt.tabsInner=vn.first)}},hostBindings:function(ot,Dt){1&ot&&Mt.bIt("ionTabButtonClick",function(Hn){return Dt.select(Hn)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),$e})();const se=He=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(He):"function"==typeof requestAnimationFrame?requestAnimationFrame(He):setTimeout(He);let H=(()=>{var He;class $e{constructor(ot,Dt){(0,j.A)(this,"injector",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"onChange",()=>{}),(0,j.A)(this,"onTouched",()=>{}),(0,j.A)(this,"lastValue",void 0),(0,j.A)(this,"statusChanges",void 0),this.injector=ot,this.elementRef=Dt}writeValue(ot){this.elementRef.nativeElement.value=this.lastValue=ot,de(this.elementRef)}handleValueChange(ot,Dt){ot===this.elementRef.nativeElement&&(Dt!==this.lastValue&&(this.lastValue=Dt,this.onChange(Dt)),de(this.elementRef))}_handleBlurEvent(ot){ot===this.elementRef.nativeElement&&(this.onTouched(),de(this.elementRef))}registerOnChange(ot){this.onChange=ot}registerOnTouched(ot){this.onTouched=ot}setDisabledState(ot){this.elementRef.nativeElement.disabled=ot}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let ot;try{ot=this.injector.get(V.vO)}catch{}if(!ot)return;ot.statusChanges&&(this.statusChanges=ot.statusChanges.subscribe(()=>de(this.elementRef)));const Dt=ot.control;Dt&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Hn=>{if(typeof Dt[Hn]<"u"){const cr=Dt[Hn].bind(Dt);Dt[Hn]=(...Pr)=>{cr(...Pr),de(this.elementRef)}}})}}return He=$e,(0,j.A)($e,"\u0275fac",function(ot){return new(ot||He)(Mt.rXU(Mt.zZn),Mt.rXU(Mt.aKT))}),(0,j.A)($e,"\u0275dir",Mt.FsC({type:He,hostBindings:function(ot,Dt){1&ot&&Mt.bIt("ionBlur",function(Hn){return Dt._handleBlurEvent(Hn.target)})}})),$e})();const de=He=>{se(()=>{const $e=He.nativeElement,pt=null!=$e.value&&$e.value.toString().length>0,ot=Ke($e);Ve($e,ot);const Dt=$e.closest("ion-item");Dt&&Ve(Dt,pt?[...ot,"item-has-value"]:ot)})},Ke=He=>{const $e=He.classList,pt=[];for(let ot=0;ot<$e.length;ot++){const Dt=$e.item(ot);null!==Dt&&vt(Dt,"ng-")&&pt.push(`ion-${Dt.substring(3)}`)}return pt},Ve=(He,$e)=>{const pt=He.classList;pt.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),pt.add(...$e)},vt=(He,$e)=>He.substring(0,$e.length)===$e;class Ft{shouldDetach($e){return!1}shouldAttach($e){return!1}store($e,pt){}retrieve($e){return null}shouldReuseRoute($e,pt){if($e.routeConfig!==pt.routeConfig)return!1;const ot=$e.params,Dt=pt.params,vn=Object.keys(ot),Hn=Object.keys(Dt);if(vn.length!==Hn.length)return!1;for(const cr of vn)if(Dt[cr]!==ot[cr])return!1;return!0}}class _n{constructor($e){(0,j.A)(this,"ctrl",void 0),this.ctrl=$e}create($e){return this.ctrl.create($e||{})}dismiss($e,pt,ot){return this.ctrl.dismiss($e,pt,ot)}getTop(){return this.ctrl.getTop()}}},5374:(br,kn,je)=>{"use strict";je.d(kn,{hG:()=>$s,Hx:()=>vs,hB:()=>N,xk:()=>ve,YH:()=>xe,Zy:()=>ge,U1:()=>ne,mC:()=>J,el:()=>vn,Jm:()=>V,QW:()=>me,b_:()=>Oe,I9:()=>Xe,ME:()=>dt,HW:()=>yt,tN:()=>Ut,eY:()=>ht,ZB:()=>Lt,hU:()=>kt,W9:()=>lt,A9:()=>It,M0:()=>fn,lO:()=>$n,eU:()=>En,iq:()=>Kn,$w:()=>nr,uz:()=>Xn,Dg:()=>Tn,he:()=>un,nf:()=>An,AF:()=>jn,T6:()=>ds,Sb:()=>Ui,CF:()=>ji,KO:()=>nn,f0:()=>On,Ob:()=>wn,Rg:()=>ot,ln:()=>te,Nm:()=>k,Ip:()=>B,Jq:()=>de,qW:()=>Ke,p4:()=>Dt,BC:()=>_n,BY:()=>$e,ai:()=>pt,bv:()=>Wa,Xi:()=>fo,W3:()=>ea,su:()=>Z,Je:()=>K,Gw:()=>z});var F=je(9842),j=je(3953),Mt=je(4341),Jt=je(3656),a=je(1635),_e=je(3726),q=je(177),M=je(9858),C=je(617),w=je(467),I=je(8393);const d=je(4921).i,f=function(){var Ne=(0,w.A)(function*(ut,Nt){if(!(typeof window>"u"))return yield d(),(0,I.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),Nt)});return function(Nt,Be){return Ne.apply(this,arguments)}}(),h=["*"],p=["outletContent"],g=["outlet"],v=[[["","slot","top"]],"*"],S=["[slot=top]","*"];function x(Ne,ut){if(1&Ne&&(j.j41(0,"div",1),j.eu8(1,2),j.k0s()),2&Ne){const Nt=j.XpG();j.R7$(),j.Y8G("ngTemplateOutlet",Nt.template)}}function E(Ne,ut){if(1&Ne&&j.eu8(0,1),2&Ne){const Nt=j.XpG();j.Y8G("ngTemplateOutlet",Nt.template)}}let N=(()=>{var Ne;class ut extends Jt.fL{constructor(Be,Vt){super(Be,Vt)}writeValue(Be){this.elementRef.nativeElement.checked=this.lastValue=Be,(0,Jt.z3)(this.elementRef)}_handleIonChange(Be){this.handleValueChange(Be,Be.checked)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(Be,Vt){1&Be&&j.bIt("ionChange",function(ts){return Vt._handleIonChange(ts.target)})},features:[j.Jv_([{provide:Mt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),ut})(),Z=(()=>{var Ne;class ut extends Jt.fL{constructor(Be,Vt){super(Be,Vt),(0,F.A)(this,"el",void 0),this.el=Vt}handleInputEvent(Be){this.handleValueChange(Be,Be.value)}registerOnChange(Be){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName?Vt=>{Be(""===Vt?null:parseFloat(Vt))}:Be)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number"],["ion-range"]],hostBindings:function(Be,Vt){1&Be&&j.bIt("ionInput",function(ts){return Vt.handleInputEvent(ts.target)})},features:[j.Jv_([{provide:Mt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),ut})(),K=(()=>{var Ne;class ut extends Jt.fL{constructor(Be,Vt){super(Be,Vt)}_handleChangeEvent(Be){this.handleValueChange(Be,Be.value)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(Be,Vt){1&Be&&j.bIt("ionChange",function(ts){return Vt._handleChangeEvent(ts.target)})},features:[j.Jv_([{provide:Mt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),ut})(),z=(()=>{var Ne;class ut extends Jt.fL{constructor(Be,Vt){super(Be,Vt)}_handleInputEvent(Be){this.handleValueChange(Be,Be.value)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(Be,Vt){1&Be&&j.bIt("ionInput",function(ts){return Vt._handleInputEvent(ts.target)})},features:[j.Jv_([{provide:Mt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),ut})();const G=(Ne,ut)=>{const Nt=Ne.prototype;ut.forEach(Be=>{Object.defineProperty(Nt,Be,{get(){return this.el[Be]},set(Vt){this.z.runOutsideAngular(()=>this.el[Be]=Vt)},configurable:!0})})},ie=(Ne,ut)=>{const Nt=Ne.prototype;ut.forEach(Be=>{Nt[Be]=function(){const Vt=arguments;return this.z.runOutsideAngular(()=>this.el[Be].apply(this.el,Vt))}})},X=(Ne,ut,Nt)=>{Nt.forEach(Be=>Ne[Be]=(0,_e.R)(ut,Be))};function Y(Ne){return function(Nt){const{defineCustomElementFn:Be,inputs:Vt,methods:In}=Ne;return void 0!==Be&&Be(),Vt&&G(Nt,Vt),In&&ie(Nt,In),Nt}}let ve=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-accordion"]],inputs:{disabled:"disabled",mode:"mode",readonly:"readonly",toggleIcon:"toggleIcon",toggleIconSlot:"toggleIconSlot",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["disabled","mode","readonly","toggleIcon","toggleIconSlot","value"]})],ut),ut})(),xe=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-accordion-group"]],inputs:{animated:"animated",disabled:"disabled",expand:"expand",mode:"mode",multiple:"multiple",readonly:"readonly",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["animated","disabled","expand","mode","multiple","readonly","value"]})],ut),ut})(),ge=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionAlertDidPresent","ionAlertWillPresent","ionAlertWillDismiss","ionAlertDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-alert"]],inputs:{animated:"animated",backdropDismiss:"backdropDismiss",buttons:"buttons",cssClass:"cssClass",enterAnimation:"enterAnimation",header:"header",htmlAttributes:"htmlAttributes",inputs:"inputs",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",message:"message",mode:"mode",subHeader:"subHeader",translucent:"translucent",trigger:"trigger"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["animated","backdropDismiss","buttons","cssClass","enterAnimation","header","htmlAttributes","inputs","isOpen","keyboardClose","leaveAnimation","message","mode","subHeader","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],ut),ut})(),ne=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-app"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({})],ut),ut})(),J=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-avatar"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({})],ut),ut})(),V=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],ut),ut})(),me=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["collapse"]})],ut),ut})(),Oe=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],ut),ut})(),Xe=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["mode"]})],ut),ut})(),dt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode","translucent"]})],ut),ut})(),yt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode"]})],ut),ut})(),Ut=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode"]})],ut),ut})(),ht=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["alignment","checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"]})],ut),ut})(),Lt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","disabled","mode","outline"]})],ut),ut})(),kt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],ut),ut})(),lt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],ut),ut})(),It=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",formatOptions:"formatOptions",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","formatOptions","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],ut),ut})(),fn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["collapse","mode","translucent"]})],ut),ut})(),$n=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["fixed"]})],ut),ut})(),En=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["collapse","mode","translucent"]})],ut),ut})(),Kn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],ut),ut})(),nr=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],ut),ut})(),Xn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],ut),ut})(),Tn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode","sticky"]})],ut),ut})(),un=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode","position"]})],ut),ut})(),An=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],ut),ut})(),jn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-list-header"]],inputs:{color:"color",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","lines","mode"]})],ut),ut})(),nn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],ut),ut})(),On=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["allowEmptySelection","compareWith","name","value"]})],ut),ut})(),wn=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",label:"label",labelPlacement:"labelPlacement",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","label","labelPlacement","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],ut),ut})(),te=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-row"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({})],ut),ut})(),k=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],methods:["open"]})],ut),ut})(),B=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["disabled","value"]})],ut),ut})(),de=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode","selectedTab","translucent"]})],ut),ut})(),Ke=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],ut),ut})(),_n=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","size"]})],ut),ut})(),$e=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement,X(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["alignment","checked","color","disabled","enableOnOffLabels","justify","labelPlacement","mode","name","value"]})],ut),ut})(),pt=(()=>{var Ne;let ut=((0,F.A)(Ne=class{constructor(Be,Vt,In){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=Vt.nativeElement}},"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return ut=(0,a.Cg)([Y({inputs:["color","mode"]})],ut),ut})(),ot=(()=>{var Ne;class ut extends Jt.Rg{constructor(Be,Vt,In,ts,Gs,Go,Aa,ba){super(Be,Vt,In,ts,Gs,Go,Aa,ba),(0,F.A)(this,"parentOutlet",void 0),(0,F.A)(this,"outletContent",void 0),this.parentOutlet=ba}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.kS0("name"),j.kS0("tabs"),j.rXU(q.aZ),j.rXU(j.aKT),j.rXU(M.Ix),j.rXU(j.SKi),j.rXU(M.nX),j.rXU(Ne,12))}),(0,F.A)(ut,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-router-outlet"]],viewQuery:function(Be,Vt){if(1&Be&&j.GBs(p,7,j.c1b),2&Be){let In;j.mGM(In=j.lsd())&&(Vt.outletContent=In.first)}},features:[j.Vt3],ngContentSelectors:h,decls:3,vars:0,consts:[["outletContent",""]],template:function(Be,Vt){1&Be&&(j.NAR(),j.qex(0,null,0),j.SdG(2),j.bVm())},encapsulation:2})),ut})(),Dt=(()=>{var Ne;class ut extends Jt.p4{constructor(...Be){super(...Be),(0,F.A)(this,"outlet",void 0),(0,F.A)(this,"tabBar",void 0),(0,F.A)(this,"tabBars",void 0)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",(()=>{let Nt;return function(Vt){return(Nt||(Nt=j.xGo(Ne)))(Vt||Ne)}})()),(0,F.A)(ut,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tabs"]],contentQueries:function(Be,Vt,In){if(1&Be&&(j.wni(In,de,5),j.wni(In,de,4)),2&Be){let ts;j.mGM(ts=j.lsd())&&(Vt.tabBar=ts.first),j.mGM(ts=j.lsd())&&(Vt.tabBars=ts)}},viewQuery:function(Be,Vt){if(1&Be&&j.GBs(g,5,ot),2&Be){let In;j.mGM(In=j.lsd())&&(Vt.outlet=In.first)}},features:[j.Vt3],ngContentSelectors:S,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(Be,Vt){if(1&Be){const In=j.RV6();j.NAR(v),j.SdG(0),j.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),j.bIt("stackWillChange",function(Gs){return j.eBV(In),j.Njj(Vt.onStackWillChange(Gs))})("stackDidChange",function(Gs){return j.eBV(In),j.Njj(Vt.onStackDidChange(Gs))}),j.k0s()(),j.SdG(5,1)}},dependencies:[ot],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),ut})(),vn=(()=>{var Ne;class ut extends Jt.el{constructor(Be,Vt,In,ts,Gs,Go){super(Be,Vt,In,ts,Gs,Go)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)(j.rXU(ot,8),j.rXU(Jt.q9),j.rXU(Jt.TS),j.rXU(j.aKT),j.rXU(j.SKi),j.rXU(j.gRc))}),(0,F.A)(ut,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-back-button"]],features:[j.Vt3],ngContentSelectors:h,decls:1,vars:0,template:function(Be,Vt){1&Be&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),ut})(),Ui=(()=>{var Ne;class ut extends Jt.Sb{}return Ne=ut,(0,F.A)(ut,"\u0275fac",(()=>{let Nt;return function(Vt){return(Nt||(Nt=j.xGo(Ne)))(Vt||Ne)}})()),(0,F.A)(ut,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-modal"]],features:[j.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(Be,Vt){1&Be&&j.DNE(0,x,2,1,"div",0),2&Be&&j.Y8G("ngIf",Vt.isCmpOpen||Vt.keepContentsMounted)},dependencies:[q.bT,q.T3],encapsulation:2,changeDetection:0})),ut})(),ji=(()=>{var Ne;class ut extends Jt.CF{}return Ne=ut,(0,F.A)(ut,"\u0275fac",(()=>{let Nt;return function(Vt){return(Nt||(Nt=j.xGo(Ne)))(Vt||Ne)}})()),(0,F.A)(ut,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-popover"]],features:[j.Vt3],decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(Be,Vt){1&Be&&j.DNE(0,E,1,1,"ng-container",0),2&Be&&j.Y8G("ngIf",Vt.isCmpOpen||Vt.keepContentsMounted)},dependencies:[q.bT,q.T3],encapsulation:2,changeDetection:0})),ut})();const Us={provide:Mt.cz,useExisting:(0,j.Rfq)(()=>xs),multi:!0};let xs=(()=>{var Ne;class ut extends Mt.zX{}return Ne=ut,(0,F.A)(ut,"\u0275fac",(()=>{let Nt;return function(Vt){return(Nt||(Nt=j.xGo(Ne)))(Vt||Ne)}})()),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Be,Vt){2&Be&&j.BMQ("max",Vt._enabled?Vt.max:null)},features:[j.Jv_([Us]),j.Vt3]})),ut})();const wi={provide:Mt.cz,useExisting:(0,j.Rfq)(()=>ds),multi:!0};let ds=(()=>{var Ne;class ut extends Mt.VZ{}return Ne=ut,(0,F.A)(ut,"\u0275fac",(()=>{let Nt;return function(Vt){return(Nt||(Nt=j.xGo(Ne)))(Vt||Ne)}})()),(0,F.A)(ut,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Be,Vt){2&Be&&j.BMQ("min",Vt._enabled?Vt.min:null)},features:[j.Jv_([wi]),j.Vt3]})),ut})(),$s=(()=>{var Ne;class ut extends Jt.Kb{constructor(){super(C.TN)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)}),(0,F.A)(ut,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),ut})(),vs=(()=>{var Ne;class ut{create(Be){return(0,C.JI)(Be)}easingTime(Be,Vt,In,ts,Gs){return(0,C.sE)(Be,Vt,In,ts,Gs)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)}),(0,F.A)(ut,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),ut})(),fo=(()=>{var Ne;class ut extends Jt.Kb{constructor(){super(C.FJ)}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)}),(0,F.A)(ut,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),ut})(),ea=(()=>{var Ne;class ut extends Jt.Kb{constructor(){super(C.OZ),(0,F.A)(this,"angularDelegate",(0,j.WQX)(Jt.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(Be){return super.create({...Be,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)}),(0,F.A)(ut,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac})),ut})();class la extends Jt.Kb{constructor(){super(C.mF),(0,F.A)(this,"angularDelegate",(0,j.WQX)(Jt.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(ut){return super.create({...ut,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const ca=(Ne,ut,Nt)=>()=>{const Be=ut.defaultView;if(Be&&typeof window<"u"){(0,C.QX)({...Ne,_zoneGate:In=>Nt.run(In)});const Vt="__zone_symbol__addEventListener"in ut.body?"__zone_symbol__addEventListener":"addEventListener";return function _(){var Ne=[];if(typeof window<"u"){var ut=window;(!ut.customElements||ut.Element&&(!ut.Element.prototype.closest||!ut.Element.prototype.matches||!ut.Element.prototype.remove||!ut.Element.prototype.getRootNode))&&Ne.push(je.e(7278).then(je.t.bind(je,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||ut.NodeList&&!ut.NodeList.prototype.forEach||!ut.fetch||!function(){try{var Be=new URL("b","http://a");return Be.pathname="c%20d","http://a/c%20d"===Be.href&&Be.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&Ne.push(je.e(9329).then(je.t.bind(je,7783,23)))}return Promise.all(Ne)}().then(()=>f(Be,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Jt.er,jmp:In=>Nt.runOutsideAngular(In),ael(In,ts,Gs,Go){In[Vt](ts,Gs,Go)},rel(In,ts,Gs,Go){In.removeEventListener(ts,Gs,Go)}}))}};let Wa=(()=>{var Ne;class ut{static forRoot(Be={}){return{ngModule:ut,providers:[{provide:Jt.sR,useValue:Be},{provide:j.hnV,useFactory:ca,multi:!0,deps:[Jt.sR,q.qQ,j.SKi]},Jt.Yq,(0,Jt.YV)()]}}}return Ne=ut,(0,F.A)(ut,"\u0275fac",function(Be){return new(Be||Ne)}),(0,F.A)(ut,"\u0275mod",j.$C({type:Ne})),(0,F.A)(ut,"\u0275inj",j.G2t({providers:[ea,la],imports:[q.MD]})),ut})()},467:(br,kn,je)=>{"use strict";function F(Mt,Jt,a,_e,q,M,C){try{var _=Mt[M](C),w=_.value}catch(I){return void a(I)}_.done?Jt(w):Promise.resolve(w).then(_e,q)}function j(Mt){return function(){var Jt=this,a=arguments;return new Promise(function(_e,q){var M=Mt.apply(Jt,a);function C(w){F(M,_e,q,C,_,"next",w)}function _(w){F(M,_e,q,C,_,"throw",w)}C(void 0)})}}je.d(kn,{A:()=>j})},9842:(br,kn,je)=>{"use strict";function F(a){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_e){return typeof _e}:function(_e){return _e&&"function"==typeof Symbol&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e})(a)}function Jt(a,_e,q){return(_e=function Mt(a){var _e=function j(a,_e){if("object"!=F(a)||!a)return a;var q=a[Symbol.toPrimitive];if(void 0!==q){var M=q.call(a,_e||"default");if("object"!=F(M))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_e?String:Number)(a)}(a,"string");return"symbol"==F(_e)?_e:_e+""}(_e))in a?Object.defineProperty(a,_e,{value:q,enumerable:!0,configurable:!0,writable:!0}):a[_e]=q,a}je.d(kn,{A:()=>Jt})},1635:(br,kn,je)=>{"use strict";function a(ne,J,ce,Te){var V,et=arguments.length,le=et<3?J:null===Te?Te=Object.getOwnPropertyDescriptor(J,ce):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(ne,J,ce,Te);else for(var me=ne.length-1;me>=0;me--)(V=ne[me])&&(le=(et<3?V(le):et>3?V(J,ce,le):V(J,ce))||le);return et>3&&le&&Object.defineProperty(J,ce,le),le}function I(ne,J,ce,Te){return new(ce||(ce=Promise))(function(le,V){function me(dt){try{Xe(Te.next(dt))}catch(yt){V(yt)}}function Oe(dt){try{Xe(Te.throw(dt))}catch(yt){V(yt)}}function Xe(dt){dt.done?le(dt.value):function et(le){return le instanceof ce?le:new ce(function(V){V(le)})}(dt.value).then(me,Oe)}Xe((Te=Te.apply(ne,J||[])).next())})}function x(ne){return this instanceof x?(this.v=ne,this):new x(ne)}function E(ne,J,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Te=ce.apply(ne,J||[]),le=[];return et={},me("next"),me("throw"),me("return",function V(ht){return function(Lt){return Promise.resolve(Lt).then(ht,yt)}}),et[Symbol.asyncIterator]=function(){return this},et;function me(ht,Lt){Te[ht]&&(et[ht]=function(kt){return new Promise(function(lt,It){le.push([ht,kt,lt,It])>1||Oe(ht,kt)})},Lt&&(et[ht]=Lt(et[ht])))}function Oe(ht,Lt){try{!function Xe(ht){ht.value instanceof x?Promise.resolve(ht.value.v).then(dt,yt):Ut(le[0][2],ht)}(Te[ht](Lt))}catch(kt){Ut(le[0][3],kt)}}function dt(ht){Oe("next",ht)}function yt(ht){Oe("throw",ht)}function Ut(ht,Lt){ht(Lt),le.shift(),le.length&&Oe(le[0][0],le[0][1])}}function Z(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,J=ne[Symbol.asyncIterator];return J?J.call(ne):(ne=function h(ne){var J="function"==typeof Symbol&&Symbol.iterator,ce=J&&ne[J],Te=0;if(ce)return ce.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Te>=ne.length&&(ne=void 0),{value:ne&&ne[Te++],done:!ne}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ce={},Te("next"),Te("throw"),Te("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function Te(le){ce[le]=ne[le]&&function(V){return new Promise(function(me,Oe){!function et(le,V,me,Oe){Promise.resolve(Oe).then(function(Xe){le({value:Xe,done:me})},V)}(me,Oe,(V=ne[le](V)).done,V.value)})}}}je.d(kn,{AQ:()=>E,Cg:()=>a,N3:()=>x,sH:()=>I,xN:()=>Z}),"function"==typeof SuppressedError&&SuppressedError}},br=>{br(br.s=3419)}]);