"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[887],{887:(Ie,q,b)=>{b.r(q),b.d(q,{MainPageModule:()=>Ee});var W=b(177),ue=b(4341),E=b(5374),ee=b(9858),w=b(467),L=b(482),ge=b(92),te=b(8326),me=b(617),i=b(3953),fe=b(4234),be=b(4237),pe=b(8065),ye=b(755);function Ce(d,m){1&d&&i.nrm(0,"ion-icon",12)}function ve(d,m){1&d&&i.nrm(0,"ion-icon",13)}function _e(d,m){1&d&&(i.j41(0,"div",14),i.EFF(1,"A"),i.k0s())}function Te(d,m){if(1&d){const h=i.RV6();i.j41(0,"div")(1,"div",15),i.bIt("click",function(){i.eBV(h);const u=i.XpG();return i.Njj(u.nakama.open_add_todo_page())}),i.nrm(2,"ion-icon",16),i.j41(3,"div")(4,"ion-label",17),i.EFF(5),i.k0s()()()()}if(2&d){const h=i.XpG();i.R7$(5),i.JRh(h.lang.text.Main.NoTodo)}}function Pe(d,m){1&d&&(i.j41(0,"div",22),i.EFF(1,"`"),i.k0s())}function je(d,m){if(1&d&&(i.j41(0,"div",22),i.EFF(1),i.k0s()),2&d){const h=i.XpG().index;i.R7$(),i.JRh(h+1)}}function ke(d,m){if(1&d){const h=i.RV6();i.j41(0,"button",19),i.bIt("click",function(){const u=i.eBV(h).$implicit,e=i.XpG(2);return i.Njj(e.ChangeFilterValue(u.value))}),i.DNE(1,je,2,1,"div",20),i.EFF(2),i.k0s()}if(2&d){const h=m.$implicit,c=i.XpG(2);i.Aen("background-color: "+(h.color||"#8888")),i.R7$(),i.Y8G("ngIf",c.global.ShowHint),i.R7$(),i.SpI(" ",c.lang.text.TodoDetail[h.name]," ")}}function Se(d,m){if(1&d){const h=i.RV6();i.j41(0,"div",18)(1,"button",19),i.bIt("click",function(){i.eBV(h);const u=i.XpG();return i.Njj(u.SwitchTargetFilter())}),i.DNE(2,Pe,2,0,"div",20),i.EFF(3),i.k0s(),i.DNE(4,ke,3,4,"button",21),i.k0s()}if(2&d){const h=i.XpG();i.R7$(2),i.Y8G("ngIf",h.global.ShowHint),i.R7$(),i.SpI(" ",h.lang.text.TodoDetail[h.TargetFilterDisplayName]," "),i.R7$(),i.Y8G("ngForOf",h.AllCategories[h.TargetFilterName])}}var p=function(d){return d[d.None=0]="None",d[d.Importance=1]="Importance",d[d.Color=2]="Color",d[d.Creator=3]="Creator",d}(p||{});const xe=[{path:"",component:(()=>{var d;class m{constructor(c,u,e,H,s,l){this.global=c,this.lang=u,this.nakama=e,this.statusBar=H,this.indexed=s,this.alertCtrl=l,this.isPlayingCanvas={loop:!0},this.TargetFilterDisplayName="FilterCat_0",this.TargetFilterName=0,this.AllCategories={},this.CurrentFilterValue=null,this.isEmptyTodo=!1}ngOnInit(){this.global.PortalBottonTabAct.Todo=()=>{this.ViewInitFunc&&this.ViewInitFunc()}}toggle_session(){this.nakama.toggle_all_session(),this.global.p5todo.redraw()}toggleCanvasPlaying(){this.isPlayingCanvas.loop=!this.isPlayingCanvas.loop,this.isPlayingCanvas.loop?this.global.p5todo.loop():this.global.p5todo.noLoop()}SwitchTargetFilter(c){switch(this.TargetFilterName=null!=c?c:(this.TargetFilterName+1)%4,this.TargetFilterName){case p.None:this.TargetFilterDisplayName="FilterCat_0";break;case p.Importance:this.TargetFilterDisplayName="Importance";break;case p.Color:this.TargetFilterDisplayName="CustomColor";break;case p.Creator:this.TargetFilterDisplayName="FilterByCreator"}this.CurrentFilterValue=null,this.global.p5FilteringTodos&&this.global.p5FilteringTodos(p.None)}ChangeFilterValue(c){this.CurrentFilterValue=this.CurrentFilterValue==c?null:c,this.global.p5FilteringTodos()}CreateTodoManager(){var c=this;setTimeout(()=>{"DesktopPWA"!=ge.aH&&this.toggleCanvasPlaying()},8e3);let u=document.getElementById("todo");this.global.p5todo&&this.global.p5todo.remove(),this.global.p5todo=new te(e=>{let y,K,X,le,H=this.statusBar,s={},l=[],R=[],A=[],I=e.createVector(0,0),J=e.createVector(0,0),f=e.createVector(0,0),C=1,V=e.createVector(0,0),G=this.nakama,oe=this.indexed,k=[],_=!1,$=this.isPlayingCanvas;e.setup=(0,w.A)(function*(){let r=e.createCanvas(u.clientWidth,u.clientHeight);r.parent(u),r.id("p5todo"),r.elt.oncontextmenu=function(){var o=(0,w.A)(function*(a){for(let n=0,g=l.length;n<g;n++)if("AddButton"!=s[l[n]].json.id&&s[l[n]].position.dist(x(a.offsetX,a.offsetY))<s[l[n]].EllipseSize/2){let F="";try{let j;try{j=`todo/${s[l[n]].json.id}_${s[l[n]].json.remote.isOfficial}_${s[l[n]].json.remote.target}/thumbnail.png`}catch{j=`todo/${s[l[n]].json.id}/thumbnail.png`}let D=yield oe.loadBlobFromUserPath(j,"image/png"),he=URL.createObjectURL(D);F=`<div style="text-align: center"><img src="${he}" alt="todo_image" style="border-radius: 2px"></div>`,setTimeout(()=>{URL.revokeObjectURL(he)},100)}catch{}c.alertCtrl.create({header:s[l[n]].json.title,message:new me.Vk(F+`<div>${s[l[n]].json.description||""}</div>`),buttons:[{text:c.lang.text.TodoDetail.TodoComplete,handler:function(){var j=(0,w.A)(function*(){try{yield G.doneTodo(s[l[n]].json)}catch{}});return function(){return j.apply(this,arguments)}}()},{text:c.lang.text.TodoDetail.remove,cssClass:"redfont",handler:function(){var j=(0,w.A)(function*(){try{yield G.deleteTodoFromStorage(!0,s[l[n]].json)}catch{}});return function(){return j.apply(this,arguments)}}()}]}).then(j=>{ce(),j.onDidDismiss().then(()=>{_=!1}),_=!0,j.present()});break}});return function(a){return o.apply(this,arguments)}}(),e.smooth(),e.noStroke(),e.pixelDensity(1),e.ellipseMode(e.CENTER),e.rectMode(e.CENTER),e.textAlign(e.CENTER,e.CENTER),e.textSize(20),e.textLeading(28),e.textWrap(e.CHAR),e.imageMode(e.CENTER);let t=Number(localStorage.getItem("p5todoScale")||1);U(),c.ViewInitFunc=U,C=t,localStorage.setItem("p5todoScale",`${C}`),c.global.p5todoStopCanvas=()=>{_=!0,c.isPlayingCanvas.loop||e.noLoop()},c.global.p5todoPlayCanvas=()=>{_=!1,e.windowResized(),c.isPlayingCanvas.loop&&e.loop()},c.global.p5todoAddtodo=o=>{let a=JSON.parse(o);if(!a.removed){if(a.done){for(let n=0,g=l.length;n<g;n++)if(s[l[n]].json.id==a.id)return void s[l[n]].makeDone()}else s[a.id]?(s[a.id].json=a,s[a.id].initialize()):s[a.id]=new se(a);c.isPlayingCanvas.loop||(K=s[a.id],e.loop()),X()}},X=()=>{l=Object.keys(s),c.isEmptyTodo=!l.length,c.isEmptyTodo||(s.AddButton?1==l.length&&s.AddButton.makeDone():(s.AddButton=new se("",!0),l=Object.keys(s)))},c.global.p5removeTodo=o=>{let a=JSON.parse(o);for(let n=0,g=l.length;n<g;n++)if(s[l[n]].json.id==a.id){s[l[n]].RemoveTodo();break}c.isEmptyTodo=!Object.keys(l).length,X(),e.redraw()},le=function(){var o=(0,w.A)(function*(){s={},l.length=0;let a=yield c.indexed.GetFileListFromDB("todo/");for(let n=0,g=a.length;n<g;n++)if(a[n].indexOf("/info.todo")>=0){let P=yield c.indexed.loadTextFromUserPath(a[n]);c.global.p5todoAddtodo(P)}c.isEmptyTodo=!Object.keys(l).length});return function(){return o.apply(this,arguments)}}(),le(),c.SwitchTargetFilter(c.TargetFilterName),c.AllCategories[p.None]=[],c.AllCategories[p.Importance]=[{name:"Importance_0",color:"#58a19288",value:"0"},{name:"Importance_1",color:"#ddbb4188",value:"1"},{name:"Importance_2",color:"#b9543788",value:"2"}],c.AllCategories[p.Color]=[{name:"ColorFilterRed",color:"#ff000088",value:[-30,30]},{name:"ColorFilterYellow",color:"#ffff0088",value:[30,90]},{name:"ColorFilterGreen",color:"#00ff0088",value:[90,150]},{name:"ColorFilterCyan",color:"#00ffff88",value:[150,210]},{name:"ColorFilterBlue",color:"#0000ff88",value:[210,270]},{name:"ColorFilterMagenta",color:"#ff00ff88",value:[270,330]}],c.AllCategories[p.Creator]=[{name:"CreatorLocal",color:"#bbbbbb88",value:"local"},{name:"CreatorMe",color:"#00ff0088",value:"server"},{name:"Requested",color:"#6789ab88",value:"worker"},{name:"CreatorOther",color:"#ba987688",value:"other"}],c.global.p5FilteringTodos=Z});let Z=r=>{switch(null!=r?r:this.TargetFilterName){case p.None:for(let o=0,a=l.length;o<a;o++)s[l[o]].isHidden=!1;break;case p.Importance:if(this.CurrentFilterValue)for(let o=0,a=l.length;o<a;o++)s[l[o]].isHidden="AddButton"!=s[l[o]].json.id&&s[l[o]].json.importance!=this.CurrentFilterValue;else Z(p.None);break;case p.Color:for(let o=0,a=l.length;o<a;o++){let n;e.push(),e.colorMode(e.HSB);try{n=e.color(s[l[o]].json.custom_color)}catch{}if(!n)switch(s[l[o]].json.importance){case"0":n=e.color("#58a192");break;case"1":n=e.color("#ddbb41");break;case"2":n=e.color("#b95437")}if(e.pop(),this.CurrentFilterValue){if(n){let g=(360+this.CurrentFilterValue[0])%360,P=(360+this.CurrentFilterValue[1])%360,F=e.hue(n);s[l[o]].isHidden=g<P?!(g<F&&F<P):P<F&&F<g}}else s[l[o]].isHidden=!1}break;case p.Creator:if(this.CurrentFilterValue)for(let o=0,a=l.length;o<a;o++)if("AddButton"==s[l[o]].json.id)s[l[o]].isHidden=!1;else switch(this.CurrentFilterValue){case"local":s[l[o]].isHidden=s[l[o]].json.storeAt!=this.CurrentFilterValue;break;case"server":s[l[o]].isHidden=void 0===s[l[o]].json.remote;break;case"worker":s[l[o]].isHidden=!(void 0!==s[l[o]].json.workers&&s[l[o]].json.is_me);break;case"other":s[l[o]].isHidden=s[l[o]].json.is_me||"local"==s[l[o]].json.storeAt}else Z(p.None)}e.redraw()},U=()=>{V.x=e.width/2,V.y=e.height/2,f.x=0,f.y=0,C=1,localStorage.setItem("p5todoScale",`${C}`),this.isPlayingCanvas.loop||e.redraw()};e.draw=()=>{e.clear(255,255,255,255),e.push(),e.translate(V),e.scale(C),e.translate(f);for(let r=0,t=l.length;r<t;r++)s[l[r]].display();for(let r=A.length-1;r>=0;r--)A[r].display(),A[r].lifeTime<0&&A.splice(r,1);for(let r=R.length-1;r>=0;r--)R[r].DoneAnim();e.pop(),this.isPlayingCanvas.loop&&(J.x=40*-e.accelerationX,J.y=40*e.accelerationY)},e.windowResized=()=>{_||setTimeout(()=>{let r=f.x/e.width,t=f.y/e.height;e.resizeCanvas(u.clientWidth,u.clientHeight),V.x=e.width/2,V.y=e.height/2,f.x=r*e.width,f.y=t*e.height},50)};let B=!0;class se{constructor(t,o=!1){this.isAddButton=!1,this.EllipseSize=96,this.Velocity=e.createVector(0,0),this.Accel=e.createVector(0,0),this.isGrabbed=!1,this.TextColor=e.color(L.ud?255:0),this.ProgressWeight=8,this.LerpProgress=0,this.isHidden=!1,this.LifeTime=1,this.json=t;let a=e.max(e.width,e.height)||1,n=e.createVector(a/e.min(1,C),0).setHeading(e.random(-e.PI,e.PI));if(o)return this.isAddButton=o,this.position=I.copy(),this.defaultColor=e.color(L.ud?"#bbb":"#888"),void(this.json={id:"AddButton",written:0,limit:1,longSide:53,shortSide:11});this.position=n,this.initialize()}initialize(){if(!this.json.custom_color)switch(this.json.importance){case"0":this.defaultColor=e.color("#58a192");break;case"1":this.defaultColor=e.color("#ddbb41");break;case"2":this.defaultColor=e.color("#b95437")}let o,t=Number(this.json.importance);switch(t){case 0:this.EllipseSize=96;break;case 1:this.EllipseSize=104;break;case 2:this.EllipseSize=112}if(!k[t]){k[t]=e.createImage(this.EllipseSize,this.EllipseSize),k[t].loadPixels();let a=e.createVector(k[t].width/2,k[t].height/2);for(let n=0,g=k[t].height;n<g;n++)for(let P=0,F=k[t].width;P<F;P++){let M=e.createVector(P,n);a.dist(M)<this.EllipseSize/2-1&&k[t].set(P,n,e.color(255,80))}k[t].updatePixels()}try{o=`todo/${this.json.id}_${this.json.remote.isOfficial}_${this.json.remote.target}/thumbnail.png`}catch{o=`todo/${this.json.id}/thumbnail.png`}oe.loadBlobFromUserPath(o,"").then(a=>{let n=URL.createObjectURL(a);e.loadImage(n,g=>{this.ThumbnailImage=g,this.ThumbnailImage.mask(k[t]),URL.revokeObjectURL(n)})}).catch(a=>{this.ThumbnailImage=null})}display(){if(e.push(),this.isGrabbed||(this.CalcPosition(),this.OnCollider(),this.position=this.position.add(this.Velocity)),e.translate(this.position),this.LerpProgress=e.map(Date.now(),this.json.startFrom||this.json.written,this.json.limit,0,1,!0),(this.isAddButton||this.json.written>this.json.limit)&&(this.LerpProgress=1),this.isHidden?e.fill(128,40):e.fill(this.json.remote?H.colors[H.groupServer[this.json.remote.isOfficial][this.json.remote.target]||"offline"]+e.hex(e.floor(e.lerp(34,96,this.LerpProgress)),2):(this.json.custom_color||this.defaultColor.toString("#rrggbb"))+e.hex(e.floor(e.lerp(34,96,this.LerpProgress)),2)),e.ellipse(0,0,this.EllipseSize,this.EllipseSize),!this.isHidden&&this.ThumbnailImage&&e.image(this.ThumbnailImage,0,0,this.EllipseSize,this.EllipseSize),e.push(),!this.isHidden){e.noFill(),this.isAddButton?(e.push(),e.noStroke(),e.fill(255),e.rect(0,0,this.json.shortSide,this.json.longSide),e.rect(0,0,this.json.longSide,this.json.shortSide),e.pop()):(e.stroke(this.json.custom_color||this.defaultColor),e.strokeWeight(this.ProgressWeight)),e.rotate(-e.PI/2);let t=this.EllipseSize-this.ProgressWeight;this.LerpProgress<1?e.arc(0,0,t,t,0,this.LerpProgress*e.TWO_PI):e.circle(0,0,t)}if(e.pop(),!this.isHidden){let t=.9*this.EllipseSize;this.TextColor=e.color(L.ud?255:0,0==this.LerpProgress?128:255),e.fill(this.TextColor),e.text(this.json.title,0,0,t,t)}e.pop()}CalcPosition(){let t=this.position.dist(I),o=e.map(t,0,this.EllipseSize/8,0,1,!0),a=e.map(o,this.EllipseSize/4,0,1,.95,!0);this.Accel.x=o,this.Accel.y=0;let n=this.position.copy().sub(J).heading()-e.PI;this.Accel=this.Accel.setHeading(n),this.Velocity.add(this.Accel).mult(a)}OnCollider(){for(let t=0,o=l.length;t<o;t++)if(s[l[t]]!=this){let a=s[l[t]],n=this.position.dist(a.position),g=this.EllipseSize/2+a.EllipseSize/2;n<g&&($.loop||K==this&&(K=null,e.noLoop()),this.ReflectBounce(a,n/g),a.ReflectBounce(this,n/g))}}ReflectBounce(t,o){let a=te.Vector.sub(this.position,t.position);this.Velocity.add(a.mult(1-o)).mult(.85)}makeDone(){var t=this;return(0,w.A)(function*(){t.LifeTime=1,yield new Promise(n=>setTimeout(n,500)),t.Velocity=I.copy(),t.Accel=I.copy(),t.OriginalEllipseSize=t.EllipseSize,t.OriginalProgWeight=t.ProgressWeight,t.json.done=!0,R.push(t),$.loop||e.loop()})()}DoneAnim(){var t=this;return(0,w.A)(function*(){if($.loop||e.loop(),t.LifeTime-=.04,t.EllipseSize=t.OriginalEllipseSize*t.LifeTime,t.ProgressWeight=t.OriginalProgWeight*t.LifeTime,t.LifeTime<.5&&A.push(new ae(t.position,t.json.custom_color||t.defaultColor)),t.TextColor=e.color(L.ud?255:0,(0==t.LerpProgress?128:255)*t.LifeTime),t.isAddButton&&(t.json.longSide*=t.LifeTime,t.json.shortSide*=t.LifeTime),t.LifeTime<0){$.loop||setTimeout(()=>e.noLoop(),1e3),t.RemoveTodo(),X();for(let o=0;o<20;o++)A.push(new ae(t.position,t.json.custom_color||t.defaultColor))}})()}Clicked(){B&&!_&&!this.json.done&&(this.isAddButton?G.open_add_todo_page():G.open_add_todo_page(JSON.stringify(this.json)))}RemoveTodo(){for(let t=0,o=l.length;t<o;t++)if(l[t]==this.json.id){l.splice(t,1);break}for(let t=0,o=R.length;t<o;t++)if(R[t]=this){R.splice(t,1);break}delete s[this.json.id]}}class ae{constructor(t,o){this.RectSize=4,this.rotate=0,this.pos=t.copy(),e.randomSeed(e.random(-255,255)),this.lifeTime=e.random(180,255),this.vel=e.createVector(e.random(-75,75),e.random(-40,-80)),this.acc=e.createVector(0,e.random(-1,-3)),e.push(),e.colorMode(e.HSB);let a=e.hue(o),n=e.saturation(o),g=e.brightness(o);this.color=e.color(e.random(a-20,a+20),e.random(n-20,n+20),e.random(g-20,g+20),this.lifeTime/255),e.pop(),this.RectSize=e.random(3,4),this.rotate=e.random(-e.PI,e.PI)}display(){this.color.setAlpha(this.lifeTime/255),e.fill(this.color),this.CalcPhysics(),e.push(),e.translate(this.pos),e.rotate(this.rotate),e.rect(0,0,this.RectSize,this.RectSize),e.pop(),this.lifeTime--}CalcPhysics(){this.acc.y+=.07,this.vel.add(this.acc),this.pos.add(this.vel.copy().div(100))}}let Y,T,ne,S,Q=0;e.mousePressed=r=>{let t=r.target==document.getElementById("p5todo");if(!_&&t)switch(B=!0,r.which){case 1:T=e.createVector(e.mouseX,e.mouseY),S=f.copy(),Y=e.createVector(e.mouseX,e.mouseY);for(let o=0,a=l.length;o<a;o++)if(s[l[o]].position.dist(x())<s[l[o]].EllipseSize/2){s[l[o]].isGrabbed=!0,y=s[l[o]],T=x();break}break;case 2:U()}},e.mouseDragged=r=>{let t=r.target==document.getElementById("p5todo");if(!_&&t&&1===(this.isPlayingCanvas.loop||e.redraw(),r.which))try{Y=e.createVector(e.mouseX,e.mouseY);let o=0;y?(y.position=x(),o=T.dist(x())):(f=S.copy().add(Y.sub(T).div(C)),o=S.dist(f)),o>15&&(B=!1)}catch{}},e.mouseReleased=r=>{let t=r.target==document.getElementById("p5todo");!_&&t&&1===r.which&&(Y=null,de())};let x=(r,t)=>{let o=e.createVector(r||e.mouseX,t||e.mouseY);return o.sub(V),o.div(C),o.sub(f),o};e.mouseWheel=r=>{let t=r.target==document.getElementById("p5todo");!_&&t&&(this.isPlayingCanvas.loop||e.redraw(),C*=r.deltaY<0?1.1:.9,localStorage.setItem("p5todoScale",`${C}`))};let v=[],N=!1;const O=56;e.touchStarted=r=>{let t=r.target==document.getElementById("p5todo");if(!_&&t)switch(B=!0,v=r.touches,N=!0,v.length){case 1:re();break;case 2:let o=e.createVector(v[0].clientX,v[0].clientY-O),a=e.createVector(v[1].clientX,v[1].clientY-O);B=!1,Q=o.dist(a),T=o.copy().add(a).div(2),S=f.copy(),ne=C,y&&(y.isGrabbed=!1,y.Velocity=I.copy(),y.Accel=I.copy(),y=null);break;default:N=!1,U()}},e.touchMoved=r=>{let t=r.target==document.getElementById("p5todo");if(!_&&t){switch(this.isPlayingCanvas.loop||e.redraw(),v=r.touches,v.length){case 1:{if(!N)return;let o=r.changedTouches[0],a=e.createVector(o.clientX,o.clientY-O),n=0;y?(y.position=x(),n=T.dist(x(a.x,a.y))):(f=S.copy().add(a.sub(T).div(C)),n=S.dist(f)),n>15&&(B=!1)}break;case 2:{if(!N)return;let o=e.createVector(v[0].clientX,v[0].clientY-O),a=e.createVector(v[1].clientX,v[1].clientY-O),n=o.copy().add(a).div(2);C=o.dist(a)/Q*ne,localStorage.setItem("p5todoScale",`${C}`),f=S.copy().add(n.sub(T).div(C))}}return!1}},e.touchEnded=r=>{let t=r.target==document.getElementById("p5todo");if(!_&&t)switch(v=r.touches,v.length){case 0:de(),N=!1;break;case 1:if(!N)return;re(),Q=0}};let re=()=>{T=e.createVector(v[0].clientX,v[0].clientY-O),S=f.copy();for(let r=0,t=l.length;r<t;r++)if(s[l[r]].position.dist(x(T.x,T.y))<s[l[r]].EllipseSize/2){s[l[r]].isGrabbed=!0,y=s[l[r]];break}},ce=()=>{y&&(y.isGrabbed=!1,y.Velocity=I.copy(),y.Accel=I.copy(),y=null)},de=()=>{ce(),T=null;try{if(S.dist(f)<15)for(let t=0,o=l.length;t<o;t++)if(s[l[t]].position.dist(x())<s[l[t]].EllipseSize/2){s[l[t]].Clicked();break}}catch{}}})}ionViewDidEnter(){document.getElementById("p5todo")?this.global.p5todoPlayCanvas():this.CreateTodoManager(),this.try_add_shortcut()}try_add_shortcut(){this.global.p5KeyShortCut?(this.global.p5KeyShortCut.AddAct=()=>{this.nakama.open_add_todo_page()},this.global.p5KeyShortCut.Backquote=()=>{this.SwitchTargetFilter()},this.global.p5KeyShortCut.Digit=c=>{this.AllCategories[this.TargetFilterName].length>c&&this.ChangeFilterValue(this.AllCategories[this.TargetFilterName][c].value)}):setTimeout(()=>{this.try_add_shortcut()},100)}ionViewWillLeave(){this.global.p5todoStopCanvas&&this.global.p5todoStopCanvas(),this.global.p5KeyShortCut&&(delete this.global.p5KeyShortCut.AddAct,delete this.global.p5KeyShortCut.Backquote,delete this.global.p5KeyShortCut.Digit)}}return(d=m).\u0275fac=function(c){return new(c||d)(i.rXU(L.z3),i.rXU(fe.y),i.rXU(be.X),i.rXU(pe.j),i.rXU(ye.n),i.rXU(E.hG))},d.\u0275cmp=i.VBU({type:d,selectors:[["app-main"]],decls:15,vars:8,consts:[[1,"ion-no-border"],[1,"play_button",3,"click"],["button","","style","width: 24px; height: 24px;","name","play-circle",4,"ngIf"],["button","","style","width: 24px; height: 24px;","name","pause-circle",4,"ngIf"],[1,"add_button",3,"click"],["class","shortcut_hint shortcut_top_add",4,"ngIf"],["button","","name","add-circle-outline",2,"width","24px","height","24px"],[1,"header_online_circle",3,"click"],["oncontextmenu","return false;"],[4,"ngIf"],["id","todo",1,"full_screen",2,"overflow","hidden"],["style","position: absolute; top: 16px; left: 16px;",4,"ngIf"],["button","","name","play-circle",2,"width","24px","height","24px"],["button","","name","pause-circle",2,"width","24px","height","24px"],[1,"shortcut_hint","shortcut_top_add"],[1,"disconnect_info",3,"click"],["color","medium","name","create-outline",2,"width","60px","height","60px"],["color","medium"],[2,"position","absolute","top","16px","left","16px"],[1,"FilterSwitchButton",3,"click"],["class","shortcut_hint shortcut_todo_categories",4,"ngIf"],["class","FilterSwitchButton",3,"style","click",4,"ngFor","ngForOf"],[1,"shortcut_hint","shortcut_todo_categories"]],template:function(c,u){1&c&&(i.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),i.EFF(3),i.k0s(),i.j41(4,"div",1),i.bIt("click",function(){return u.toggleCanvasPlaying()}),i.DNE(5,Ce,1,0,"ion-icon",2)(6,ve,1,0,"ion-icon",3),i.k0s(),i.j41(7,"div",4),i.bIt("click",function(){return u.nakama.open_add_todo_page()}),i.DNE(8,_e,2,0,"div",5),i.nrm(9,"ion-icon",6),i.k0s(),i.j41(10,"div",7),i.bIt("click",function(){return u.toggle_session()}),i.k0s()()(),i.j41(11,"ion-content",8),i.DNE(12,Te,6,1,"div",9),i.j41(13,"div",10),i.DNE(14,Se,5,3,"div",11),i.k0s()()),2&c&&(i.R7$(3),i.JRh(u.lang.text.Main.Title),i.R7$(2),i.Y8G("ngIf",!u.isPlayingCanvas.loop),i.R7$(),i.Y8G("ngIf",u.isPlayingCanvas.loop),i.R7$(2),i.Y8G("ngIf",u.global.ShowHint),i.R7$(2),i.Aen("background-color: "+u.statusBar.colors[u.statusBar.settings.groupServer]+"; cursor: pointer;"),i.R7$(2),i.Y8G("ngIf",u.isEmptyTodo),i.R7$(2),i.Y8G("ngIf",!u.isEmptyTodo))},dependencies:[W.Sq,W.bT,E.W9,E.eU,E.iq,E.he,E.BC,E.ai],styles:[".md[_ngcontent-%COMP%]   .play_button[_ngcontent-%COMP%]{position:absolute;right:116px;top:16px;cursor:pointer}.ios[_ngcontent-%COMP%]   .play_button[_ngcontent-%COMP%]{position:absolute;right:96px;top:10px;cursor:pointer}.md[_ngcontent-%COMP%]   .add_button[_ngcontent-%COMP%]{position:absolute;right:68px;top:16px;cursor:pointer}.ios[_ngcontent-%COMP%]   .add_button[_ngcontent-%COMP%]{position:absolute;right:58px;top:10px;cursor:pointer}.FilterSwitchButton[_ngcontent-%COMP%]{padding:8px;border-radius:8px;font-size:16px;background-color:#8888;margin-right:8px;margin-bottom:8px;color:var(--default-text-color-direction)}"]}),m})()}];let Fe=(()=>{var d;class m{}return(d=m).\u0275fac=function(c){return new(c||d)},d.\u0275mod=i.$C({type:d}),d.\u0275inj=i.G2t({imports:[ee.iI.forChild(xe),ee.iI]}),m})(),Ee=(()=>{var d;class m{}return(d=m).\u0275fac=function(c){return new(c||d)},d.\u0275mod=i.$C({type:d}),d.\u0275inj=i.G2t({imports:[W.MD,ue.YN,E.bv,Fe]}),m})()}}]);