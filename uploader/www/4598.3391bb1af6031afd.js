"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4598,7476],{7476:(D,B,o)=>{o.d(B,{u:()=>P});var x=o(8326),u=o(3953);let P=(()=>{var p;class R{constructor(){this.Buttons={},this.ArrayKeys=[]}CreateFloatButton(){this.p5canvas=new x(t=>{let s,h,g=[],r=c=>{g.push(c),m=0,t.loop()},F=c=>{s=c,c.style("transform-origin","50% 50%"),c.style("opacity","0"),c.style("transform","scale(0)"),m=0,t.loop()},G=c=>{h=c,c.style("transform-origin","50% 50%"),c.style("opacity","1"),c.style("transform","scale(1)"),m=0,t.loop()};t.setup=()=>{t.noCanvas(),this.AddAnimateActFunc=r,this.AddButtonQueue=F,this.RemoveButtonQueue=G,t.noLoop()};let m=0,y=c=>t.sin(c*t.PI/2);t.draw=()=>{m+=.07;let c=m>=1;c&&(m=1,s&&(s=null),h&&(h.remove(),h=null,!this.ArrayKeys.length&&this.p5canvas&&this.p5canvas.remove()),t.noLoop()),s&&(s.style("opacity",`${m}`),s.style("transform",`scale(${y(m)})`)),h&&(h.style("opacity",""+(1-m)),h.style("transform",`scale(${y(1-m)})`));for(let A=g.length-1;A>=0;A--){let I=t.lerp(g[A].start,g[A].end,y(m));g[A].button.style(`right: ${I}px`)}c&&(g.length=0)}})}AddFloatButton(t,g){this.p5canvas||this.CreateFloatButton();for(let s of this.ArrayKeys){let h=Number(this.Buttons[s].style("right").split("px").shift());this.AddAnimateActFunc({type:"add",button:this.Buttons[s],start:h,end:h+80})}let r=this.p5canvas.createDiv(`<ion-icon style="width: 36px; height: 36px" name="${g}"></ion-icon>`);return r.style("position: absolute; right: 0; bottom: 56px; z-index: 1"),r.style("width: 64px; height: 64px"),r.style("text-align: center; align-content: center"),r.style("cursor: pointer"),r.style("margin: 16px"),r.style("padding-top: 6px"),r.style("background-color: #8888"),r.style("border-radius: 24px"),this.AddButtonQueue(r),this.Buttons[t]=r,this.ArrayKeys.push(t),r}RemoveFloatButton(t){if(!this.Buttons[t])return;let g=-1;for(let r=this.ArrayKeys.length-1;r>=0;r--){if(g>=0){let s=Number(this.Buttons[this.ArrayKeys[r]].style("right").split("px").shift());this.AddAnimateActFunc({type:"remove",button:this.Buttons[this.ArrayKeys[r]],start:s,end:s-80})}this.ArrayKeys[r]==t&&(this.RemoveButtonQueue(this.Buttons[this.ArrayKeys[r]]),this.ArrayKeys.splice(r,1),g=r)}}}return(p=R).\u0275fac=function(t){return new(t||p)},p.\u0275prov=u.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),R})()},6767:(D,B,o)=>{o.r(B),o.d(B,{ArcadePageModule:()=>$});var x=o(177),T=o(4341),u=o(5374),P=o(9858),p=o(467),R=o(617),C=o(8326),t=o(3953),g=o(4234),r=o(8065),s=o(4237),h=o(3656),F=o(9347),G=o(482),m=o(755),y=o(9900);const c=["ArcadeDetail"],A=["ArcadeQRShare"];function I(i,d){if(1&i){const n=t.RV6();t.j41(0,"ion-header",10)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"img",11),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.QuickLinkAct())})("contextmenu",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.QuickLinkContextmenu())}),t.k0s(),t.j41(5,"input",12),t.bIt("change",function(e){t.eBV(n);const l=t.XpG();return t.Njj(l.SelectVoidDrawBackgroundImage(e))}),t.k0s(),t.j41(6,"div",13),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.JoinInstantCall())}),t.nrm(7,"ion-icon",14),t.k0s(),t.j41(8,"div",15),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.JoinSmallTalk())}),t.nrm(9,"ion-icon",16),t.k0s(),t.j41(10,"div",17),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.nakama.toggle_all_session())}),t.k0s()()()}if(2&i){const n=t.XpG();t.R7$(3),t.JRh(n.lang.text.Arcade.Title),t.R7$(7),t.Aen("background-color: "+n.statusBar.colors[n.statusBar.settings.groupServer]+"; cursor: pointer;")}}function E(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),t.EFF(3),t.k0s()(),t.j41(4,"div",18)(5,"input",19),t.bIt("change",function(e){t.eBV(n);const l=t.XpG();return t.Njj(l.inputFileSelected(e))}),t.k0s(),t.j41(6,"div",20),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.AddCustomGame())})("contextmenu",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.AddCustomGameFromClipboard())}),t.j41(7,"div",4),t.nrm(8,"ion-icon",21),t.j41(9,"div")(10,"ion-label",6),t.EFF(11),t.k0s()()()()()()}if(2&i){const n=t.XpG();t.R7$(3),t.JRh(n.lang.text.Arcade.AddCustom),t.R7$(8),t.JRh(n.lang.text.Arcade.FromFile)}}function M(i,d){1&i&&(t.j41(0,"div"),t.nrm(1,"div",22),t.k0s())}function Q(i,d){1&i&&(t.j41(0,"div",23),t.nrm(1,"div",24),t.k0s())}function S(i,d){if(1&i){const n=t.RV6();t.j41(0,"img",29),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.copy_address(e.global.ArcadeQRAddress))}),t.k0s()}if(2&i){const n=t.XpG(2);t.Y8G("src",n.global.ArcadeQRCodeSRC,t.B4B)}}function X(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",23)(1,"div",25),t.DNE(2,S,1,1,"img",26),t.j41(3,"ion-item",27),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.copy_address(e.global.ArcadeQRAddress))}),t.j41(4,"ion-label",28),t.EFF(5),t.k0s()()()()}if(2&i){const n=t.XpG();t.R7$(2),t.Y8G("ngIf",n.global.ArcadeQRCodeSRC),t.R7$(3),t.JRh(n.global.ArcadeQRAddress)}}const U=[{path:"",component:(()=>{var i;class d{constructor(a,e,l,v,b,k,f,_,L){this.lang=a,this.statusBar=e,this.nakama=l,this.navCtrl=v,this.client=b,this.global=k,this.indexed=f,this.animationCtrl=_,this.p5toast=L,this.WillLeave=!1,this.enterAnimation=j=>{const w=j.shadowRoot,N=this.animationCtrl.create().addElement(w.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),O=this.animationCtrl.create().addElement(w.querySelector(".modal-wrapper")).keyframes([{offset:0,opacity:"0",transform:"scale(0)"},{offset:1,opacity:"1",transform:"scale(1)"}]);return this.animationCtrl.create().addElement(j).easing("ease-out").duration(250).addAnimation([N,O])},this.leaveAnimation=j=>this.enterAnimation(j).direction("reverse")}ngOnInit(){}ionViewWillEnter(){var a=this;return(0,p.A)(function*(){a.WillLeave=!1})()}WaitingCurrent(){var a=this;return(0,p.A)(function*(){for(;a.WillLeave;)yield new Promise(e=>setTimeout(e,0))})()}ionViewWillLeave(){this.WillLeave=!0}QuickLinkAct(){this.global.PageDismissAct["voiddraw-remote"]=a=>{delete this.global.PageDismissAct["voiddraw-remote"]},this.global.ActLikeModal("portal/arcade/void-draw",{dismiss:"voiddraw-remote"})}AddCustomGame(){document.getElementById("arcade_file_input").click()}inputFileSelected(a){try{let e=a.target.files[0];const l=e.name.split(".").pop();if("pck"!==l)throw l;this.global.CreateArcadeFrame({blob:e})}catch(e){this.p5toast.show({text:`${this.lang.text.Arcade.InputError}: ${e}`}),console.log("\uc544\ucf00\uc774\ub4dc \ud30c\uc77c \uc785\ub825 \uc2e4\ud328: ",e)}document.getElementById("arcade_file_input").value=null}AddCustomGameFromClipboard(){return this.global.ArcadeObject.QRCode=this.ArcadeQRShare,this.global.OpenGodotFromURL(),!1}ShowGameInfo(){this.ArcadeDetail.onDidDismiss().then(()=>{this.global.RestoreShortCutAct("arcade_detail")}),this.global.StoreShortCutAct("arcade_detail"),this.ArcadeDetail.present()}QuickLinkContextmenu(){var a=this;return function(){var l=(0,p.A)(function*(){let v=yield a.global.GetValueFromClipboard();"image/png"===v.type?a.SelectVoidDrawBackgroundImage({target:{files:[v.value]}}):document.getElementById("arcade_voiddraw_img").click()});return function(){return l.apply(this,arguments)}}()(),!1}SelectVoidDrawBackgroundImage(a){var e=this;return(0,p.A)(function*(){const l=a.target.files[0],v=`tmp_files/quick_act/${l.name}`;yield e.indexed.saveBlobToUserPath(l,v);let b=yield e.indexed.loadBlobFromUserPath(v,l.type),k=URL.createObjectURL(b);new C(f=>{f.setup=()=>{document.getElementById("arcade_voiddraw_img").value="",f.noCanvas(),f.loadImage(k,_=>{e.global.PageDismissAct["voiddraw-remote"]=L=>{delete e.global.PageDismissAct["voiddraw-remote"]},e.global.ActLikeModal("portal/arcade/void-draw",{path:v,width:_.width,height:_.height,type:l.type,dismiss:"voiddraw-remote"}),URL.revokeObjectURL(k),f.remove()},_=>{console.log("\ube60\ub978 \ud3b8\uc9d1\uae30 \uc774\ub3d9 \uc2e4\ud328: ",_),URL.revokeObjectURL(k),f.remove()})}})})()}JoinSmallTalk(){"online"!=this.statusBar.settings.dedicated_groupchat&&"certified"!=this.statusBar.settings.dedicated_groupchat&&(this.statusBar.settings.dedicated_groupchat="pending"),this.client.RejoinGroupChat()}JoinInstantCall(){this.navCtrl.navigateForward("portal/arcade/instant-call",{animation:R.NC})}copy_address(a){this.global.WriteValueToClipboard("text/plain",a)}}return(i=d).\u0275fac=function(a){return new(a||i)(t.rXU(g.y),t.rXU(r.j),t.rXU(s.X),t.rXU(h.q9),t.rXU(F.z),t.rXU(G.z3),t.rXU(m.n),t.rXU(u.Hx),t.rXU(y.G))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-arcade"]],viewQuery:function(a,e){if(1&a&&(t.GBs(c,5),t.GBs(A,5)),2&a){let l;t.mGM(l=t.lsd())&&(e.ArcadeDetail=l.first),t.mGM(l=t.lsd())&&(e.ArcadeQRShare=l.first)}},decls:15,vars:7,consts:[["ArcadeDetail",""],["ArcadeQRShare",""],["class","ion-no-border",4,"ngIf"],[3,"fullscreen"],[1,"disconnect_info"],["color","medium","name","game-controller-outline",2,"width","60px","height","60px"],["color","medium"],[4,"ngIf"],[1,"transparent-modal",3,"enterAnimation","leaveAnimation"],[1,"transparent-modal"],[1,"ion-no-border"],["src","assets/icon/voidDraw.png",1,"add_group","top_icon_override_2",2,"width","32px","height","32px",3,"click","contextmenu"],["hidden","","type","file","id","arcade_voiddraw_img","accept","image/*",3,"change"],[1,"add_group","top_icon_override_1",3,"click"],["button","","name","call-outline",2,"width","24px","height","24px"],[1,"add_group",3,"click"],["button","","name","chatbubbles-outline",2,"width","24px","height","24px"],[1,"header_online_circle",3,"click"],[2,"display","flex","flex-direction","row","gap","16px","overflow-x","auto","margin","16px 0px 16px 16px"],["hidden","","type","file","id","arcade_file_input","accept","*",3,"change"],[1,"list_ele","list_add_btn",3,"click","contextmenu"],["color","medium","name","file-tray-full-outline",2,"width","36px","height","36px"],["id","arcade_pck_loaded",1,"full_screen",2,"position","fixed"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],[2,"width","400px","height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px","border-radius","16px"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["style","width: 100%; height: auto; cursor: copy; margin-bottom: 8px;","alt","ArcadeQuickLink",3,"src","click",4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["alt","ArcadeQuickLink",2,"width","100%","height","auto","cursor","copy","margin-bottom","8px",3,"click","src"]],template:function(a,e){1&a&&(t.DNE(0,I,11,3,"ion-header",2),t.j41(1,"ion-content",3)(2,"div",4),t.nrm(3,"ion-icon",5),t.j41(4,"div")(5,"ion-label",6),t.EFF(6),t.k0s()()(),t.DNE(7,E,12,2,"div",7)(8,M,2,0,"div",7),t.j41(9,"ion-modal",8,0),t.DNE(11,Q,2,0,"ng-template"),t.k0s(),t.j41(12,"ion-modal",9,1),t.DNE(14,X,6,2,"ng-template"),t.k0s()()),2&a&&(t.Y8G("ngIf",!e.global.ArcadeLoaded),t.R7$(),t.Y8G("fullscreen",!0),t.R7$(5),t.JRh(e.lang.text.Arcade.Preparing),t.R7$(),t.Y8G("ngIf",!e.global.ArcadeLoaded),t.R7$(),t.Y8G("ngIf",e.global.ArcadeLoaded),t.R7$(),t.Y8G("enterAnimation",e.enterAnimation)("leaveAnimation",e.leaveAnimation))},dependencies:[x.bT,u.W9,u.eU,u.iq,u.uz,u.Dg,u.he,u.BC,u.ai,u.Sb],styles:[".list_form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(135px,1fr));padding:16px;gap:16px}.list_add_btn[_ngcontent-%COMP%]{flex:0 1}.list_ele[_ngcontent-%COMP%]{cursor:pointer;border:1px solid var(--list-shortcut-hint-background);border-radius:8px;min-width:135px;min-height:90px;text-align:center;align-content:center;position:relative}.add_group[_ngcontent-%COMP%]{position:absolute;right:68px;top:16px;cursor:pointer}.top_icon_override_1[_ngcontent-%COMP%]{right:116px}.top_icon_override_2[_ngcontent-%COMP%]{right:164px;top:13px}"]}),d})()},{path:"instant-call",loadChildren:()=>o.e(6524).then(o.bind(o,6524)).then(i=>i.InstantCallPageModule)},{path:"void-draw",loadChildren:()=>o.e(2655).then(o.bind(o,2655)).then(i=>i.VoidDrawPageModule)}];let V=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[P.iI.forChild(U),P.iI]}),d})(),$=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[x.MD,T.YN,u.bv,V]}),d})()}}]);