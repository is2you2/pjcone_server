"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2655],{2655:(lt,xe,y)=>{y.r(xe),y.d(xe,{VoidDrawPageModule:()=>Je});var ce=y(177),ae=y(4341),v=y(5374),re=y(9858),j=y(467),Re=y(8326),Ie=y(92),i=y(3953),Ve=y(4234),We=y(3656),Me=y(482),Le=y(755),je=y(4237),Be=y(9900),Ne=y(4020);const He=["RemoteDraw"],Ge=["ChangeTransparent"],Xe=["AddrQRShare"];function Ee(g,T){1&g&&(i.j41(0,"div",16),i.EFF(1,"Shift + S"),i.k0s())}function $e(g,T){if(1&g&&(i.j41(0,"ion-select-option",17),i.EFF(1),i.k0s()),2&g){const c=T.$implicit;i.Y8G("value",c),i.R7$(),i.JRh(c.info.name)}}function Oe(g,T){if(1&g){const c=i.RV6();i.j41(0,"img",23),i.bIt("click",function(){i.eBV(c);const t=i.XpG(2);return i.Njj(t.copy_address(t.SelectedAddress))}),i.k0s()}if(2&g){const c=i.XpG(2);i.Y8G("src",c.QRCodeSRC,i.B4B)}}function Ye(g,T){if(1&g){const c=i.RV6();i.j41(0,"div",18)(1,"div",19),i.DNE(2,Oe,1,1,"img",20),i.j41(3,"ion-item",21),i.bIt("click",function(){i.eBV(c);const t=i.XpG();return i.Njj(t.copy_address(t.SelectedAddress))}),i.j41(4,"ion-label",22),i.EFF(5),i.k0s()()()()}if(2&g){const c=i.XpG();i.R7$(2),i.Y8G("ngIf",c.QRCodeSRC),i.R7$(3),i.JRh(c.SelectedAddress)}}function Fe(g,T){if(1&g){const c=i.RV6();i.j41(0,"div",24),i.bIt("click",function(t){i.eBV(c);const o=i.XpG();return i.Njj(o.CheckIfDismissAct(t))}),i.j41(1,"div",25)(2,"h4"),i.EFF(3),i.k0s(),i.j41(4,"ion-range",26),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickRed,t)||(o.colorPickRed=t),i.Njj(t)}),i.bIt("ionInput",function(){i.eBV(c);const t=i.XpG();return i.Njj(t.ColorSliderUpdate())}),i.j41(5,"div",27),i.EFF(6),i.k0s(),i.j41(7,"div",28)(8,"input",29),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickRed,t)||(o.colorPickRed=t),i.Njj(t)}),i.k0s()()(),i.j41(9,"ion-range",26),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickGreen,t)||(o.colorPickGreen=t),i.Njj(t)}),i.bIt("ionInput",function(){i.eBV(c);const t=i.XpG();return i.Njj(t.ColorSliderUpdate())}),i.j41(10,"div",27),i.EFF(11),i.k0s(),i.j41(12,"div",28)(13,"input",29),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickGreen,t)||(o.colorPickGreen=t),i.Njj(t)}),i.k0s()()(),i.j41(14,"ion-range",26),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickBlue,t)||(o.colorPickBlue=t),i.Njj(t)}),i.bIt("ionInput",function(){i.eBV(c);const t=i.XpG();return i.Njj(t.ColorSliderUpdate())}),i.j41(15,"div",27),i.EFF(16),i.k0s(),i.j41(17,"div",28)(18,"input",29),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickBlue,t)||(o.colorPickBlue=t),i.Njj(t)}),i.k0s()()(),i.j41(19,"ion-range",26),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickAlpha,t)||(o.colorPickAlpha=t),i.Njj(t)}),i.bIt("ionInput",function(){i.eBV(c);const t=i.XpG();return i.Njj(t.ColorSliderUpdate())}),i.j41(20,"div",27),i.EFF(21),i.k0s(),i.j41(22,"div",28)(23,"input",29),i.mxI("ngModelChange",function(t){i.eBV(c);const o=i.XpG();return i.DH7(o.colorPickAlpha,t)||(o.colorPickAlpha=t),i.Njj(t)}),i.k0s()()()()()}if(2&g){const c=i.XpG();i.R7$(3),i.JRh(c.lang.text.voidDraw.ColorpickDetail),i.R7$(),i.R50("ngModel",c.colorPickRed),i.R7$(2),i.JRh(c.lang.text.voidDraw.ColorpickRed),i.R7$(2),i.R50("ngModel",c.colorPickRed),i.R7$(),i.R50("ngModel",c.colorPickGreen),i.R7$(2),i.JRh(c.lang.text.voidDraw.ColorpickGreen),i.R7$(2),i.R50("ngModel",c.colorPickGreen),i.R7$(),i.R50("ngModel",c.colorPickBlue),i.R7$(2),i.JRh(c.lang.text.voidDraw.ColorpickBlue),i.R7$(2),i.R50("ngModel",c.colorPickBlue),i.R7$(),i.R50("ngModel",c.colorPickAlpha),i.R7$(2),i.JRh(c.lang.text.voidDraw.ColorpickAlpha),i.R7$(2),i.R50("ngModel",c.colorPickAlpha)}}const Ue=[{path:"",component:(()=>{var g;class T{constructor(a,t,o,e,s,w,d,m,S,B,x){this.lang=a,this.alertCtrl=t,this.loadingCtrl=o,this.global=e,this.indexed=s,this.nakama=w,this.p5toast=d,this.webrtc=m,this.router=S,this.route=B,this.navCtrl=x,this.voidDrawId="voidDraw",this.isMobile=!1,this.p5DrawingStack=[],this.colorPickRed=0,this.colorPickGreen=0,this.colorPickBlue=0,this.colorPickAlpha=255,this.isCropMode=!1,this.HasConnectedPeer=!1,this.ServerList=[],this.isDrawServerCreated=!1,this.ReadyToShareAct=!1,this.AlreadyExistServer=!1,this.WillLeaveHere=!1,this.WithoutSave=!0,this.QRNavParams={}}ngOnDestroy(){this.route.queryParams.unsubscribe(),this.global.PageDismissAct[this.navParams.dismiss]&&this.global.PageDismissAct[this.navParams.dismiss]({}),this.p5ActualCanvas&&(this.p5ActualCanvas.remove(),this.p5ActualCanvas=null),!this.AlreadyExistServer&&this.TargetRemoteAddress&&this.nakama.RemoveWebRTCServer(this.TargetRemoteAddress.split("://").pop()),this.p5ImageCanvas&&(this.p5ImageCanvas.remove(),this.p5ImageCanvas=null),this.p5voidDraw&&this.p5voidDraw.remove(),this.IceWebRTCWsClient&&this.IceWebRTCWsClient.close(1e3),this.CancelRemoteAct()}ngOnInit(){var a=this;this.route.queryParams.subscribe(function(){var t=(0,j.A)(function*(o){try{const e=a.router.getCurrentNavigation().extras.state;if(!e)throw"\ud398\uc774\uc9c0 \ubcf5\uadc0";a.navParams=e||{},a.voidDrawId=`voidDraw_${Date.now()}`,a.QueueAfterLoad=()=>{a.create_new_canvas({width:e.width,height:e.height,path:e.path,type:e.type}),e.remote&&setTimeout(()=>{a.Port=e.remote.port,a.username=e.remote.username,a.password=e.remote.password,a.CreateRemoteLocalClient(e.remote.address,e.remote.channel)},1e3)}}catch(e){console.log("\uadf8\ub9bc\ud310 \uc815\ubcf4 \ubc1b\uc9c0 \ubabb\ud568: ",e),a.p5SetDrawable(!0)}});return function(o){return t.apply(this,arguments)}}())}ionViewWillEnter(){this.QueueAfterLoad&&this.QueueAfterLoad(),this.QueueAfterLoad=null,this.p5SetDrawable(!0)}ionViewDidEnter(){var a=this;return(0,j.A)(function*(){a.global.StoreShortCutAct("void-draw"),a.AddShortCut(),a.mainLoading=yield a.loadingCtrl.create({message:a.lang.text.voidDraw.UseThisImage}),a.isMobile="DesktopPWA"!=Ie.aH})()}AddShortCut(){delete this.global.p5KeyShortCut.Digit,this.global.p5KeyShortCut.HistoryAct=a=>{switch(a){case"Z":this.p5history_act(-1);break;case"X":this.p5history_act(1);break;case"C":this.isCropMode?this.p5apply_crop():this.p5change_color();break;case"V":this.p5set_line_weight()}},this.global.p5KeyShortCut.AddAct=()=>{this.ClickRemoteAddButton()},this.global.p5KeyShortCut.SKeyAct=a=>{a.shiftKey?this.p5save_image(!0):this.open_crop_tool()},this.global.p5KeyShortCut.DeleteAct=()=>{this.isCropMode?this.p5apply_crop():this.dismiss_draw()},this.global.p5KeyShortCut.FKeyAct=()=>{},this.global.p5KeyShortCut.Escape=()=>{this.isDrawServerCreated?this.CancelRemoteAct():this.navCtrl.pop()}}CancelRemoteAct(){this.ReadyToShareAct=!1,this.RemoteLoadingCtrl&&this.RemoteLoadingCtrl.dismiss(),this.isDrawServerCreated=!1,this.p5SetDrawable(!0),this.webrtc.close_webrtc(!1)}create_new_canvas(a){a.width=a.width||432,a.height=a.height||432,this.p5ActualCanvas&&(this.p5ActualCanvas.remove(),this.p5ActualCanvas=null),this.p5ImageCanvas&&(this.p5ImageCanvas.remove(),this.p5ImageCanvas=null),this.p5voidDraw&&this.p5voidDraw.remove(),this.create_p5voidDraw(a)}CheckIfDismissAct(a){"colordetailOuter"==a.target.id&&this.ChangeTransparent.dismiss()}create_p5voidDraw(a){var t=this;let o=document.getElementById(this.voidDrawId);this.isCropMode=!1,this.p5voidDraw=new Re(e=>{let s,w,d,m,S,B,x,C,E,ge,A=e.createColorPicker("#000"),de=Math.min(a.width,a.height)/100,he=1;e.setup=(0,j.A)(function*(){A.style("position","absolute"),e.pixelDensity(1),e.noLoop(),e.noFill(),e.imageMode(e.CENTER),e.createCanvas(o.clientWidth,o.clientHeight).parent(o),I.x=e.width/2,I.y=e.height/2,t.p5set_line_weight=()=>{t.alertCtrl.create({header:t.lang.text.voidDraw.changeWeight,inputs:[{label:t.lang.text.voidDraw.weight,name:"weight",placeholder:`${he}`,type:"number"}],buttons:[{text:t.lang.text.voidDraw.apply,handler:_=>{_.weight&&(he=Number(_.weight))}}]}).then(_=>{W=!1,_.onWillDismiss().then(()=>{W=!0}),_.present()})},t.p5change_color=()=>{A.elt.click()},t.p5save_image=(_=!1,M=!1)=>{new Re(u=>{u.setup=()=>{let le=u.createCanvas(s.width,s.height);u.pixelDensity(1),d&&u.image(d,0,0),m&&u.image(m,0,0),s&&u.image(s,0,0);let ye=le.elt.toDataURL("image/png").replace("image/png","image/octet-stream"),Se=`voidDraw_${u.year()}-${u.nf(u.month(),2)}-${u.nf(u.day(),2)}_${u.nf(u.hour(),2)}-${u.nf(u.minute(),2)}-${u.nf(u.second(),2)}.png`;if(M){let J=t.global.Base64ToBlob(ye,"image/png");t.global.WriteValueToClipboard("image/png",J,"image.png")}else{if(_){t.p5toast.show({text:`${t.lang.text.ContentViewer.DownloadThisFile}: ${Se}`});let J=u.createA(ye,null);J.elt.download=Se,J.hide(),J.parent(o),J.elt.click()}else t.navParams.dismiss&&t.global.PageDismissAct[t.navParams.dismiss]({data:{name:Se,img:ye,loadingCtrl:t.mainLoading}}),t.navCtrl.pop();u.remove()}}})},t.p5history_act=(_,M=!1)=>{let u=L+_;if(!(u>t.p5DrawingStack.length)){switch(L=e.min(e.max(0,u),t.p5DrawingStack.length),_){case 1:t.p5DrawingStack.length&&(C.style.fill="var(--ion-color-dark)"),L==t.p5DrawingStack.length&&(E.style.fill="var(--ion-color-medium)"),U(s,t.p5DrawingStack[L-1]);break;case-1:t.p5DrawingStack.length&&(E.style.fill="var(--ion-color-dark)"),L<1?(C.style.fill="var(--ion-color-medium)",s.clear(255,255,255,255),e.redraw()):ne()}!M&&t.ReadyToShareAct&&t.webrtc.dataChannel.send(JSON.stringify({type:"same",act:"history_act",data:_}))}},t.p5open_crop_tool=()=>{t.isCropMode?(t.isCropMode=!1,e.redraw()):(t.isCropMode=!0,W=!0,h.x=s.width,h.y=s.height,G.x=0,G.y=0,e.redraw()),ge()},t.p5apply_crop=(_=!0)=>{_&&t.isMobile&&G.div(b),s.resizeCanvas(h.x,h.y),w=e.createVector(s.width/2,s.height/2),_&&R.sub(G),ne(),d.resizeCanvas(h.x,h.y),d.push(),d.background(t.navParams.isDarkMode?26:255),d.translate(R),t.p5BaseImage&&d.image(t.p5BaseImage,0,0),d.pop(),d.redraw(),m.resizeCanvas(h.x,h.y),m.push(),S&&(m.translate(R),m.image(S,oe.x,oe.y)),m.pop(),m.redraw();let M=m.elt.toDataURL("image/png");if(e.loadImage(M,u=>{oe.x=-R.x,oe.y=-R.y,S=u,m.image(S,0,0),m.redraw()}),t.isCropMode=!1,ge(),t.p5SetCanvasViewportInit(),_&&t.ReadyToShareAct){let u=t.p5getCropPos(),le=t.p5getCropSize();t.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"crop",cropPX:u.x,cropPY:u.y,cropSX:le.x,cropSY:le.y}))}},t.p5SetDrawable=nt,B=e.createElement("table"),B.style("position: absolute; top: 0px;"),B.style(`width: 100%; height: ${V}px;`),B.style("background-color: var(--voidDraw-menu-background);"),B.parent(o);let n=B.elt.insertRow(0),l=n.insertCell(0);l.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">A</div><ion-icon style="width: 27px; height: 27px" name="wifi-outline"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="wifi-outline"></ion-icon>',l.style.textAlign="center",l.style.cursor="pointer",l.onclick=()=>{t.ClickRemoteAddButton()};let P=n.insertCell(1);P.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">S</div><ion-icon style="width: 27px; height: 27px" name="crop"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="crop"></ion-icon>',P.style.textAlign="center",P.style.cursor="pointer",P.onclick=()=>{t.open_crop_tool()};let D=n.insertCell(2);D.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">D</div><ion-icon style="width: 27px; height: 27px" name="checkmark"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="checkmark"></ion-icon>',D.style.textAlign="center",D.style.cursor="pointer",D.onclick=()=>{t.dismiss_draw()},ge=()=>{D.innerHTML=t.isCropMode?t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">D</div><ion-icon style="width: 27px; height: 27px" name="cut-sharp"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="cut-sharp"></ion-icon>':t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">D</div><ion-icon style="width: 27px; height: 27px" name="checkmark"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="checkmark"></ion-icon>'},x=e.createElement("table"),x.style("position: absolute; bottom: 0px;"),x.style(`width: 100%; height: ${V}px;`),x.style("background-color: var(--voidDraw-menu-background);"),x.parent(o);let $=x.elt.insertRow(0),ee=$.insertCell(0);ee.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">Z</div><ion-icon id="undoIcon" style="width: 27px; height: 27px" name="arrow-undo"></ion-icon></div>':'<ion-icon id="undoIcon" style="width: 27px; height: 27px" name="arrow-undo"></ion-icon>',C=document.getElementById("undoIcon"),C.style.fill="var(--ion-color-medium)",ee.style.textAlign="center",ee.style.cursor="pointer",ee.onclick=()=>{t.p5history_act(-1)};let te=$.insertCell(1);te.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">X</div><ion-icon id="redoIcon" style="width: 27px; height: 27px" name="arrow-redo"></ion-icon></div>':'<ion-icon id="redoIcon" style="width: 27px; height: 27px" name="arrow-redo"></ion-icon>',E=document.getElementById("redoIcon"),E.style.fill="var(--ion-color-medium)",te.style.textAlign="center",te.style.cursor="pointer",te.onclick=()=>{t.p5history_act(1)};let X=$.insertCell(2);X.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">C</div><ion-icon style="width: 27px; height: 27px" name="color-palette"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="color-palette"></ion-icon>',A.style("width: 0px; height: 0px; opacity: 0;"),A.parent(X),A.elt.oninput=()=>{let _=A.color().levels,M=`#${e.hex(_[0],2)}${e.hex(_[1],2)}${e.hex(_[2],2)}`;X.childNodes[0].style.color=M,t.colorPickRed=_[0],t.colorPickGreen=_[1],t.colorPickBlue=_[2],t.colorPickAlpha=_[3]},a.path&&(A.value("#ff0000"),A.elt.oninput()),X.style.textAlign="center",X.style.cursor="pointer",X.onclick=()=>{A.elt.click()},X.oncontextmenu=()=>(t.ChangeTransparent.onDidDismiss().then(()=>{W=!0,N=!1,t.global.RestoreShortCutAct("draw-transparent")}),W=!1,t.global.StoreShortCutAct("draw-transparent"),t.ChangeTransparent.present(),!1),t.ColorSliderUpdate=()=>{let _=`#${e.hex(t.colorPickRed,2)}${e.hex(t.colorPickGreen,2)}${e.hex(t.colorPickBlue,2)}`;A.value(_);let M=`#${e.hex(t.colorPickRed,2)}${e.hex(t.colorPickGreen,2)}${e.hex(t.colorPickBlue,2)}${e.hex(t.colorPickAlpha,2)}`;X.childNodes[0].style.color=M};let ie=$.insertCell(3);if(ie.innerHTML=t.global.ShowHint?'<div><div class="shortcut_hint shortcut_voiddraw">V</div><ion-icon style="width: 27px; height: 27px" name="pencil"></ion-icon></div>':'<ion-icon style="width: 27px; height: 27px" name="pencil"></ion-icon>',ie.style.textAlign="center",ie.style.cursor="pointer",ie.onclick=()=>{t.change_line_weight()},t.p5SetCanvasViewportInit=()=>{e.resizeCanvas(o.clientWidth,o.clientHeight),ue=I.copy(),me=b,we=Y.copy(),H=0,pe=!0,e.loop()},s=e.createGraphics(a.width,a.height),w=e.createVector(s.width/2,s.height/2),s.pixelDensity(1),s.noLoop(),s.noFill(),t.p5ActualCanvas=s,d=e.createGraphics(a.width,a.height),d.pixelDensity(1),d.noLoop(),d.noFill(),d.background(t.navParams.isDarkMode?26:255),t.p5ImageCanvas=d,m=e.createGraphics(a.width,a.height),m.pixelDensity(1),m.noLoop(),m.noFill(),m.clear(255,255,255,255),a.path){let _=yield t.indexed.loadBlobFromUserPath(a.path,a.type),M=URL.createObjectURL(_);e.loadImage(M,u=>{t.p5BaseImage=u,d.image(t.p5BaseImage,0,0),d.redraw(),URL.revokeObjectURL(M),setTimeout(()=>{t.p5SetCanvasViewportInit()},100)},u=>{console.error("\uadf8\ub9bc\ud310 \ubc30\uacbd \uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",u),d.redraw(),URL.revokeObjectURL(M),setTimeout(()=>{t.p5SetCanvasViewportInit()},100)})}else d.redraw(),setTimeout(()=>{t.p5SetCanvasViewportInit()},100);a.width<a.height&&(de/=b),t.p5getCropPos=Ke,t.p5setCropPos=ke,t.p5getCropSize=Ze,t.p5setCropSize=qe,t.p5RemoteDrawStart=it,t.p5RemoteDrawing=at,t.p5RemoteDrawingEnd=rt,t.p5updateRemoteCurve=tt,t.p5CancelCurrentDraw=()=>{f=null,e.redraw()},t.navParams.scrollHeight&&ke(0,-t.navParams.scrollHeight)});let I=e.createVector(),b=1,Y=e.createVector(0,0),R=e.createVector(),oe=e.createVector(),G=e.createVector(),h=e.createVector(),pe=!1,H=0,ue=e.createVector(0,0),me=0,we=e.createVector(0,0),Ke=()=>R,Ze=()=>h,ke=(r,n)=>{R.x=r,R.y=n,d.translate(r,n),m.translate(r,n),e.redraw()},qe=(r,n)=>{h.x=r,h.y=n,d.translate(r,n),m.translate(r,n),e.redraw()},F=r=>e.sin(r*e.PI/2);e.draw=()=>{if(pe){H+=.07,H>=1&&(pe=!1,H=1,e.noLoop()),Y.x=e.lerp(we.x,e.width/2,F(H)),Y.y=e.lerp(we.y,e.height/2,F(H)),I.x=e.lerp(ue.x,0,F(H)),I.y=e.lerp(ue.y,0,F(H));let r=o.clientHeight-112;b=e.lerp(me,o.clientWidth/r<s.width/s.height?o.clientWidth/s.width:r/s.height,F(H))}if(e.clear(255,255,255,255),e.push(),e.translate(Y),e.scale(b),e.translate(I),e.image(d,0,0),e.image(m,0,0),s&&e.image(s,0,0),this.isCropMode)e.push(),e.translate(-s.width/2,-s.height/2),e.translate(G),e.noStroke(),e.fill(0,100),e.rect(0,0,h.x,h.y),e.stroke(255,0,0),e.strokeWeight(8),e.beginShape(e.LINES),e.vertex(0,0),e.vertex(h.x,0),e.vertex(h.x,0),e.vertex(h.x,.8*h.y),e.vertex(0,0),e.vertex(0,h.y),e.vertex(0,h.y),e.vertex(.8*h.x,h.y),e.stroke(255,255,0),e.vertex(.8*h.x,h.y),e.vertex(h.x,h.y),e.vertex(h.x,.8*h.y),e.vertex(h.x,h.y),e.endShape(),e.pop();else{if(p&&p.pos&&p.pos.length){e.push(),e.translate(R),e.stroke(p.color),e.strokeWeight(p.weight),e.beginShape();for(let r=0,n=p.pos.length;r<n;r++)e.curveVertex(p.pos[r].x-w.x,p.pos[r].y-w.y);e.endShape(),e.pop()}if(this.ReadyToShareAct&&f&&f.pos&&f.pos.length){e.push(),e.translate(R),e.stroke(f.color),e.strokeWeight(f.weight),e.beginShape();for(let r=0,n=f.pos.length;r<n;r++)e.curveVertex(f.pos[r].x-w.x,f.pos[r].y-w.y);e.endShape(),e.pop()}}e.pop()},this.p5DrawingStack=[],this.p5ClearCurrentDraw=()=>{p={},this.p5DrawingStack.length=0,L=0,ne(),e.redraw()};let L=0,ne=()=>{s.clear(255,255,255,255);for(let r=0;r<L;r++)U(s,this.p5DrawingStack[r])},U=(r,n=p)=>{if(n.color){r.push(),r.translate(R),r.stroke(n.color),r.strokeWeight(n.weight),r.beginShape();for(let l=0,P=n.pos.length;l<P;l++)r.curveVertex(n.pos[l].x,n.pos[l].y);r.endShape(),r.pop(),r.redraw(),e.redraw()}},tt=r=>{for(let n=0,l=r.length;n<l;n++)U(s,r[n]);L=this.p5DrawingStack.length};e.windowResized=()=>{setTimeout(()=>{this.p5SetCanvasViewportInit()},0)};let p={},f={},it=r=>{f=r,e.redraw()},at=r=>{f&&f.pos&&f.pos.push(r),e.redraw()},rt=r=>{f.pos.push(r),f.pos.push(r),this.p5DrawingStack.length=L,f&&(this.p5DrawingStack.push(f),U(s,f)),L=this.p5DrawingStack.length,f=null,e.redraw()};const V=56;let Ce,Q,_e,fe,De,K,be,ve=0,se=!1,N=!1;e.mousePressed=r=>{if(W){if(e.mouseY<V||e.mouseY>e.height-V)return void(N=!0);switch(r.which){case 1:this.isCropMode?Pe():Te();break;case 3:Q=e.createVector(e.mouseX,e.mouseY),K=I.copy(),Ce=e.createVector(e.mouseX,e.mouseY);break;case 2:this.p5SetCanvasViewportInit()}}};let Pe=(r,n)=>{let l=O(r,n),P=G.copy().add(h).sub(e.createVector(s.width/2,s.height/2)),D=l.dist(P),$=.2*e.max(h.x,h.y);se=D<$,se?(fe=e.createVector(e.mouseX,e.mouseY),be=h.copy()):_e=e.createVector(e.mouseX,e.mouseY).sub(G.mult(b))},Te=(r,n)=>{C.style.fill="var(--ion-color-dark)",E.style.fill="var(--ion-color-medium)";let l=O(r,n);l.sub(R),l.add(w);let P={x:l.x,y:l.y},D=A.color().levels,$=`#${e.hex(D[0],2)}${e.hex(D[1],2)}${e.hex(D[2],2)}${e.hex(this.colorPickAlpha,2)}`;p={pos:[],color:$,weight:de*he},p.pos.push(P),p.pos.push(P),this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"start",data:p})),e.redraw()};e.mouseDragged=r=>{if(W&&!N)switch(r.which){case 1:if(this.isCropMode){let n=e.createVector(e.mouseX,e.mouseY);se?h=be.copy().add(fe.copy().sub(n).div(-b)):G=_e.copy().sub(n).div(-b),e.redraw()}else{let n=O();n.sub(R),n.add(w);let l={x:n.x,y:n.y};p&&p.pos&&p.pos.push(l),this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"moved",data:l})),e.redraw()}break;case 3:Ce=e.createVector(e.mouseX,e.mouseY),I=K.copy().add(Ce.sub(Q).div(b)),e.redraw()}},e.mouseWheel=r=>{W&&(e.mouseY<V||e.mouseY>e.height-V?N=!0:(ot(O()),b*=r.deltaY<0?1.1:.9,e.redraw()))},e.mouseReleased=r=>{if(W){if(1===r.which&&!this.isCropMode&&!N){let n=O();n.sub(R),n.add(w);let l={x:n.x,y:n.y};if(p)try{p.pos.push(l),p.pos.push(l),this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"end",data:l}))}catch{}Ae()}N=!1}};let ot=r=>{Y=e.createVector(e.mouseX,e.mouseY),I=r.mult(-1)},O=(r,n)=>{let l=e.createVector(r||e.mouseX,n||e.mouseY);return l.sub(Y),l.div(b),l.sub(I),l},k=[],Z=!1,W=!0,nt=r=>{W=r};e.touchStarted=r=>{if(W){if(k=r.touches,r.changedTouches[0].clientY<V||r.changedTouches[0].clientY>e.height-V)return void(N=!0);switch(Z=!0,k.length){case 1:this.isCropMode?Pe(r.changedTouches[0].clientX,r.changedTouches[0].clientY-V):Te(r.changedTouches[0].clientX,r.changedTouches[0].clientY-V);break;case 2:let n=e.createVector(k[0].clientX,k[0].clientY-56),l=e.createVector(k[1].clientX,k[1].clientY-56);ve=n.dist(l),Q=n.copy().add(l).div(2),K=I.copy(),De=b,p=null,this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"cancel"}));break;default:Z=!1,this.p5SetCanvasViewportInit()}}},e.touchMoved=r=>{if(W&&Z){switch(k=r.touches,k.length){case 1:if(this.isCropMode&&!N){let n=e.createVector(r.changedTouches[0].clientX,r.changedTouches[0].clientY-V);se?h=be.copy().add(fe.copy().sub(n).div(-b)):G=_e.copy().sub(n).div(-b),e.redraw()}else{let n=O(r.changedTouches[0].clientX,r.changedTouches[0].clientY-V);n.sub(R),n.add(w);let l={x:n.x,y:n.y};p&&p.pos&&p.pos.push(l),this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"moved",data:l})),e.redraw()}break;case 2:{let n=e.createVector(k[0].clientX,k[0].clientY-56),l=e.createVector(k[1].clientX,k[1].clientY-56),P=n.copy().add(l).div(2);b=n.dist(l)/ve*De,I=K.copy().add(P.sub(Q).div(b)),e.redraw()}}return!1}},e.touchEnded=r=>{if(W&&r.changedTouches){switch(k=r.touches,Z=!1,k.length){case 0:if(!this.isCropMode&&!N&&p){let n=O(r.changedTouches[0].clientX,r.changedTouches[0].clientY-V);n.sub(R),n.add(w);let l={x:n.x,y:n.y};p.pos.push(l),p.pos.push(l),this.ReadyToShareAct&&this.webrtc.dataChannel.send(JSON.stringify({type:"draw",act:"end",data:l})),Ae()}break;case 1:if(!Z)return;st(),ve=0,p=null}N=!1}};let st=()=>{Q=e.createVector(k[0].clientX,k[0].clientY-56),K=I.copy()},Ae=()=>{if(this.p5DrawingStack.length=L,p)if(this.p5DrawingStack.push(p),this.p5DrawingStack.length>20){let r=this.p5DrawingStack.shift();U(m,r);let n=m.elt.toDataURL("image/png");e.loadImage(n,l=>{S=l,m.redraw()}),ne()}else U(s,p);L=this.p5DrawingStack.length,Q=null,N=!1,p=null,e.redraw()}})}ClickRemoteAddButton(){if(!this.isDrawServerCreated){if(this.IceWebRTCWsClient)return this.isDrawServerCreated=!0,this.global.StoreShortCutAct("voiddraw-remote"),this.p5SetDrawable(!1),this.AddrQRShare.onDidDismiss().then(()=>{this.p5SetDrawable(!0),this.isDrawServerCreated=!1,this.global.RestoreShortCutAct("voiddraw-remote"),this.HasConnectedPeer||this.p5SetDrawable(!0)}),void this.AddrQRShare.present();this.ServerList=this.nakama.get_all_online_server(),this.ServerList.length?(this.p5SetDrawable(!1),this.RemoteDraw.open()):(this.p5SetDrawable(!1),this.RemoteBridgeServerSelected({detail:{value:"local"}}))}}RemoteBridgeServerSelected(a){var t=this;return(0,j.A)(function*(){if(t.isDrawServerCreated)return;let o=a.detail.value;if("local"===o){let e;t.alertCtrl.create({header:t.lang.text.voidDraw.LocalAddrInput,inputs:[{type:"text",placeholder:"(wss://)0.0.0.0(:0)"},{type:"text",placeholder:"rtcport:username:password"}],buttons:[{text:t.lang.text.voidDraw.Confirm,handler:s=>{let w=s[1].split(":");t.Port=w[0],t.username=w[1],t.password=w[2],s[0]?(t.InputCustomAddress=s[0],t.p5SetDrawable(!1),e=!0,t.CreateOnMessageLink(),t.CreateRemoteLocalClient(s[0],s[1])):t.p5toast.show({text:t.lang.text.voidDraw.InputAddress})}}]}).then(s=>{s.onWillDismiss().then(()=>{t.p5SetDrawable(!0)}),s.onDidDismiss().then(()=>{!e&&!t.WillLeaveHere&&t.global.RestoreShortCutAct("voiddraw-remote-bridge")}),t.global.StoreShortCutAct("voiddraw-remote-bridge"),s.present()})}else t.InputCustomAddress=`${o.info.useSSL?"wss":"ws"}://${o.info.address}`,t.p5SetDrawable(!1),t.CreateOnMessageLink(),t.CreateRemoteLocalClient(t.InputCustomAddress,a[1],o.info)})()}CreateRemoteLocalClient(a,t,o){var e=this;return(0,j.A)(function*(){let s=a.split("://"),w=s.pop().split(":");e.TargetRemoteAddress=w[0];let m,d=s.pop();d?d+=":":d=e.global.checkProtocolFromAddress(w[0])?"wss:":"ws:",o?e.AlreadyExistServer=!0:yield e.nakama.SaveWebRTCServer({urls:[`stun:${w[0]}:${e.Port||("wss:"==d?5349:3478)}`,`turn:${w[0]}:${e.Port||("wss"==d?5349:3478)}`],username:e.username||"username",credential:e.password||"password"}).then(S=>e.AlreadyExistServer=S),e.IceWebRTCWsClient=new WebSocket(`${d}//${w[0]}:${w[1]||12013}/`),e.AddShortCut(),e.isDrawServerCreated=!0,e.IceWebRTCWsClient.onopen=(0,j.A)(function*(){e.p5toast.show({text:`${e.lang.text.voidDraw.Connected}: ${w[0]}`}),t?(e.IceWebRTCWsClient.send(JSON.stringify({type:"join",channel:t})),yield new Promise(S=>setTimeout(S,e.global.WebsocketRetryTerm)),e.IceWebRTCWsClient.send(JSON.stringify({type:"size_req",channel:t})),e.RemoteLoadingCtrl=yield e.loadingCtrl.create({message:e.lang.text.voidDraw.WaitingConnection}),e.RemoteLoadingCtrl.present()):e.IceWebRTCWsClient.send(JSON.stringify({type:"init",max:2}))}),e.IceWebRTCWsClient.onmessage=function(){var S=(0,j.A)(function*(B){let x;try{let C=JSON.parse(B.data);if(void 0===m)m=C.uid;else if(m==C.uid)return;switch(C.type){case"join":e.HasConnectedPeer=!0,e.p5SetDrawable(!1);break;case"block":console.error("\uc774\ubbf8 \uc5f0\uacb0\ub41c \uc0ac\uc6a9\uc790 \uc788\uc74c"),e.IceWebRTCWsClient.close(1e3,"block");break;case"leave":e.HasConnectedPeer=!1,e.p5SetDrawable(!0),e.RemoteLoadingCtrl.dismiss(),e.IceWebRTCWsClient.close(1e3,"leave_pair");break;case"init_id":e.QRNavParams={address:a,channel:C.id,user_id:C.uid},e.init_gen_qrcode(),e.AddrQRShare.onDidDismiss().then(()=>{e.isDrawServerCreated=!1,e.global.RestoreShortCutAct("voiddraw-remote"),e.HasConnectedPeer||e.p5SetDrawable(!0)}),e.global.StoreShortCutAct("voiddraw-remote"),e.p5SetDrawable(!1),e.AddrQRShare.present(),e.IceWebRTCWsClient.send(JSON.stringify({type:"join",channel:C.id})),x=C.id;break;case"init_req":e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Init,e.webrtc.initialize("data").then((0,j.A)(function*(){e.webrtc.HangUpCallBack=()=>{e.IceWebRTCWsClient.close(1e3,"hangup_webrtc")},e.CreateOnMessageLink(),e.CreateOnOpenAct(),e.webrtc.CreateOffer(),yield new Promise(A=>setTimeout(A,e.global.WebsocketRetryTerm)),e.IceWebRTCWsClient.send(JSON.stringify({type:"socket_react",channel:x,act:"WEBRTC_INIT_REQ_SIGNAL"}))}));break;case"size_req":e.AddrQRShare.dismiss(),e.RemoteLoadingCtrl=yield e.loadingCtrl.create({message:e.lang.text.voidDraw.WaitingConnection}),e.RemoteLoadingCtrl.present();let E=e.p5getCropPos();e.IceWebRTCWsClient.send(JSON.stringify({type:"size",width:e.p5ActualCanvas.width,height:e.p5ActualCanvas.height,cropX:E.x,cropY:E.y,channel:x}));break;case"socket_react":switch(C.act){case"WEBRTC_REPLY_INIT_SIGNAL":e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Reply,e.nakama.socket_reactive[C.act](C.data_str),"EOL"==C.data_str&&(e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Offer,e.webrtc.CreateAnswer({client:e.IceWebRTCWsClient,channel:x})),e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Ice;break;case"WEBRTC_ICE_CANDIDATES":e.nakama.socket_reactive[C.act](C.data_str,{client:e.IceWebRTCWsClient,channel:x}),e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_datachannel,e.IceWebRTCWsClient.send(JSON.stringify({type:"init_end",channel:x}));break;case"WEBRTC_INIT_REQ_SIGNAL":e.nakama.socket_reactive[C.act]({client:e.IceWebRTCWsClient,channel:x});break;case"WEBRTC_RECEIVE_ANSWER":e.nakama.socket_reactive[C.act](C.data_str,{client:e.IceWebRTCWsClient,channel:x})}break;case"size":e.create_new_canvas({width:C.width,height:C.height}),e.p5SetDrawable(!1),e.p5setCropPos(C.cropX,C.cropY),e.p5voidDraw.redraw(),e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Init,e.webrtc.initialize("data").then(()=>{e.webrtc.HangUpCallBack=()=>{e.IceWebRTCWsClient&&e.IceWebRTCWsClient.close(1e3,"hangup_callback")},e.CreateOnOpenAct(),e.CreateOnMessageLink(),e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_Offer,e.webrtc.CreateOffer(),e.IceWebRTCWsClient.send(JSON.stringify({type:"init_req"}))});break;case"init_end":e.RemoteLoadingCtrl.message=e.lang.text.voidDraw.WebRTC_datachannel}}catch{e.IceWebRTCWsClient.close(1e3)}});return function(B){return S.apply(this,arguments)}}(),e.IceWebRTCWsClient.onerror=S=>{console.log("\uadf8\ub9bc\ud310 \uae30\ub2a5 \uacf5\uc720 \uc5f0\uacb0 \uc624\ub958: ",S),e.IceWebRTCWsClient.close(1e3,"error")},e.IceWebRTCWsClient.onclose=S=>{console.log("\uc5f0\uacb0\uc774 \ub04a\uae30\ub294 \uc774\uc720: ",S),e.p5toast.show({text:e.lang.text.TodoDetail.Disconnected}),e.RemoteLoadingCtrl&&e.RemoteLoadingCtrl.dismiss(),e.AddrQRShare.dismiss(),e.isDrawServerCreated=!1,e.p5SetDrawable(!0),e.webrtc.close_webrtc(!1),e.IceWebRTCWsClient.onopen=null,e.IceWebRTCWsClient.onclose=null,e.IceWebRTCWsClient.onmessage=null,e.IceWebRTCWsClient.onerror=null,e.IceWebRTCWsClient=null}})()}CreateOnOpenAct(a=(0,j.A)(function*(){})){var t=this;this.webrtc.dataChannelOpenAct=(0,j.A)(function*(){if(t.ReadyToShareAct=!0,t.p5ClearCurrentDraw(),a&&(yield a()),t.RemoteLoadingCtrl.message=t.lang.text.voidDraw.WebRTC_ShareBG,t.navParams.path)try{let o=t.navParams.path.split(".").pop(),e=yield t.indexed.loadBlobFromUserPath(t.navParams.path,""),s=t.InputCustomAddress.split("://"),w=s.pop(),d=s.shift();d=d?"wss"==d?"https:":"http:":t.global.checkProtocolFromAddress(t.InputCustomAddress)?"https":"http";let m=yield t.global.upload_file_to_storage({blob:e,size:e.size,file_ext:o,filename:`voidDrawRemoveImage.${o}`},{user_id:`tmp_${t.QRNavParams.channel}_${t.QRNavParams.user_id}`},d,w,!1,t.RemoteLoadingCtrl);t.webrtc.dataChannel.send(JSON.stringify({type:"background",data:m}))}catch(o){t.p5toast.show({text:`${t.lang.text.voidDraw.FailedGetBG}: ${o}`}),console.log("\ubc30\uacbd \uadf8\ub9bc \uacf5\uc720\ud558\uae30 \uc624\ub958: ",o)}t.RemoteLoadingCtrl.dismiss(),t.p5SetDrawable(!0)})}CreateOnMessageLink(){this.webrtc.dataChannelOnMsgAct=a=>{let t=JSON.parse(a);switch(t.type){case"drawline":this.p5DrawingStack=t.data,this.p5updateRemoteCurve(t.data),this.p5voidDraw.redraw();break;case"background":this.p5voidDraw.loadImage(t.data,o=>{this.p5BaseImage=o,this.p5ImageCanvas.image(this.p5BaseImage,0,0),this.p5ImageCanvas.redraw(),this.p5SetCanvasViewportInit()},o=>{console.error("\uadf8\ub9bc\ud310 \ubc30\uacbd \uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",o),this.p5ImageCanvas.redraw(),this.p5SetCanvasViewportInit()}),this.RemoteLoadingCtrl.dismiss();break;case"draw":switch(t.act){case"start":this.p5RemoteDrawStart(t.data);break;case"moved":this.p5RemoteDrawing(t.data);break;case"cancel":this.p5CancelCurrentDraw();break;case"crop":this.p5setCropPos(t.cropPX,t.cropPY),this.p5setCropSize(t.cropSX,t.cropSY),this.isCropMode=!0,this.p5apply_crop(!1);break;case"end":this.p5RemoteDrawingEnd(t.data)}break;case"same":"history_act"===t.act&&this.p5history_act(t.data,!0)}},this.webrtc.dataChannelOnCloseAct=()=>{this.CancelRemoteAct()}}change_line_weight(){this.p5set_line_weight()}open_crop_tool(){this.p5open_crop_tool()}dismiss_draw(){if(this.isCropMode)this.p5apply_crop();else{if("voiddraw-remote"==this.navParams.dismiss)return void this.navCtrl.pop();this.mainLoading.present(),this.WithoutSave=!1,this.p5save_image()}}ionSelectCancel(){this.p5voidDraw&&this.p5SetDrawable&&!this.isDrawServerCreated&&this.p5SetDrawable(!0)}RemoveShortCut(){this.p5voidDraw&&this.p5SetDrawable&&this.p5SetDrawable(!1),delete this.global.p5KeyShortCut.HistoryAct,delete this.global.p5KeyShortCut.AddAct,delete this.global.p5KeyShortCut.DeleteAct,delete this.global.p5KeyShortCut.SKeyAct,delete this.global.p5KeyShortCut.FKeyAct,delete this.global.p5KeyShortCut.Escape}ionViewWillLeave(){this.p5SetDrawable(!1),this.WillLeaveHere=!0,this.RemoveShortCut(),this.global.RestoreShortCutAct("void-draw")}ionViewDidLeave(){this.WithoutSave&&this.mainLoading.remove()}init_gen_qrcode(){var a=this;return(0,j.A)(function*(){let t=a.QRNavParams.address;a.SelectedAddress=`${yield a.global.GetHeaderAddress()}?voidDraw=${t},${a.QRNavParams.channel},${a.Port||""},${a.username||""},${a.password||""}`.replace(" ","%20"),a.QRCodeSRC=a.global.readasQRCodeFromString(a.SelectedAddress)})()}copy_address(a){this.global.WriteValueToClipboard("text/plain",a)}}return(g=T).\u0275fac=function(a){return new(a||g)(i.rXU(Ve.y),i.rXU(v.hG),i.rXU(v.Xi),i.rXU(Me.z3),i.rXU(Le.n),i.rXU(je.X),i.rXU(Be.G),i.rXU(Ne.j),i.rXU(re.Ix),i.rXU(re.nX),i.rXU(We.q9))},g.\u0275cmp=i.VBU({type:g,selectors:[["app-void-draw"]],viewQuery:function(a,t){if(1&a&&(i.GBs(He,5),i.GBs(Ge,5),i.GBs(Xe,5)),2&a){let o;i.mGM(o=i.lsd())&&(t.RemoteDraw=o.first),i.mGM(o=i.lsd())&&(t.ChangeTransparent=o.first),i.mGM(o=i.lsd())&&(t.AddrQRShare=o.first)}},decls:23,vars:6,consts:[["RemoteDraw",""],["AddrQRShare",""],["ChangeTransparent",""],[1,"ion-no-border"],["slot","start"],["defaultHref",""],["slot","end","name","clipboard-outline",1,"top_icon",2,"width","24px","height","24px",3,"click"],["class","shortcut_hint","style","left: auto; right: 4px; top: 0px; padding: 2px 8px; border-radius: 8px;",4,"ngIf"],["slot","end","name","save-outline",1,"top_icon",2,"width","24px","height","24px",3,"click"],["oncontextmenu","return false;"],["hidden",""],["value","local",3,"ionChange","ionCancel","label"],["value","local"],[3,"value",4,"ngFor","ngForOf"],[1,"full_screen",2,"display","flex","overflow","hidden","background-color","black",3,"id"],[1,"transparent-modal"],[1,"shortcut_hint",2,"left","auto","right","4px","top","0px","padding","2px 8px","border-radius","8px"],[3,"value"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["style","width: 100%; height: auto; cursor: copy; margin-bottom: 8px;","alt","QuickLink",3,"src","click",4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["alt","QuickLink",2,"width","100%","height","auto","cursor","copy","margin-bottom","8px",3,"click","src"],["id","colordetailOuter",2,"display","flex","justify-content","center","align-items","center","height","100%",3,"click"],["id","colordetailInner",2,"width","400px","min-height","240px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["max","255",3,"ngModelChange","ionInput","ngModel"],["slot","label",1,"slider_title"],["slot","end",1,"slider_end"],["type","text",1,"slider_input",3,"ngModelChange","ngModel"]],template:function(a,t){if(1&a){const o=i.RV6();i.j41(0,"ion-header",3)(1,"ion-toolbar")(2,"ion-title"),i.EFF(3),i.k0s(),i.j41(4,"ion-buttons",4),i.nrm(5,"ion-back-button",5),i.k0s(),i.j41(6,"ion-icon",6),i.bIt("click",function(){return i.eBV(o),i.Njj(t.p5save_image(!0,!0))}),i.k0s(),i.DNE(7,Ee,2,0,"div",7),i.j41(8,"ion-icon",8),i.bIt("click",function(){return i.eBV(o),i.Njj(t.p5save_image(!0))}),i.k0s()()(),i.j41(9,"ion-content",9)(10,"div",10)(11,"ion-select",11,0),i.bIt("ionChange",function(s){return i.eBV(o),i.Njj(t.RemoteBridgeServerSelected(s))})("ionCancel",function(){return i.eBV(o),i.Njj(t.ionSelectCancel())}),i.j41(13,"ion-select-option",12),i.EFF(14),i.k0s(),i.DNE(15,$e,2,2,"ion-select-option",13),i.k0s()(),i.nrm(16,"div",14),i.j41(17,"ion-modal",15,1),i.DNE(19,Ye,6,2,"ng-template"),i.k0s(),i.j41(20,"ion-modal",15,2),i.DNE(22,Fe,24,13,"ng-template"),i.k0s()()}2&a&&(i.R7$(3),i.JRh(t.lang.text.ChatRoom.voidDraw),i.R7$(4),i.Y8G("ngIf",t.global.ShowHint),i.R7$(4),i.Y8G("label",t.lang.text.voidDraw.ConnectToAddress),i.R7$(3),i.JRh(t.lang.text.voidDraw.InternalConn),i.R7$(),i.Y8G("ngForOf",t.ServerList),i.R7$(),i.Y8G("id",t.voidDrawId))},dependencies:[ce.Sq,ce.bT,ae.me,ae.BC,ae.vS,v.QW,v.W9,v.eU,v.iq,v.uz,v.he,v.Ob,v.Nm,v.Ip,v.BC,v.ai,v.Sb,v.su,v.Je,v.el],styles:[".slider_title[_ngcontent-%COMP%]{width:72px}.slider_end[_ngcontent-%COMP%]{width:40px;margin-left:24px}.slider_input[_ngcontent-%COMP%]{max-width:32px}"]}),T})()}];let Qe=(()=>{var g;class T{}return(g=T).\u0275fac=function(a){return new(a||g)},g.\u0275mod=i.$C({type:g}),g.\u0275inj=i.G2t({imports:[re.iI.forChild(Ue),re.iI]}),T})(),Je=(()=>{var g;class T{}return(g=T).\u0275fac=function(a){return new(a||g)},g.\u0275mod=i.$C({type:g}),g.\u0275inj=i.G2t({imports:[ce.MD,ae.YN,v.bv,Qe]}),T})()}}]);