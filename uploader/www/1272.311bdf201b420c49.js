"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1272],{1272:(M,g,u)=>{u.r(g),u.d(g,{WeblinkGenPageModule:()=>P});var h=u(177),p=u(4341),l=u(5374),d=u(9858),_=u(467),c=u(92),e=u(3953),m=u(4234),v=u(4237),b=u(755),f=u(482),k=u(3656);function I(s,a){if(1&s){const r=e.RV6();e.j41(0,"img",11),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.copy_result_address())}),e.k0s()}if(2&s){const r=e.XpG();e.Y8G("src",r.QRCodeSRC,e.B4B)}}function G(s,a){if(1&s&&(e.j41(0,"ion-select-option",12),e.EFF(1),e.k0s()),2&s){const r=a.$implicit;e.Y8G("value",r),e.R7$(),e.SpI("",r.name," ")}}function R(s,a){if(1&s&&(e.j41(0,"ion-select-option",12),e.EFF(1),e.k0s()),2&s){const r=a.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r.name+" ("+r.server.name+")")}}function C(s,a){if(1&s&&(e.j41(0,"ion-select-option",12),e.EFF(1),e.k0s()),2&s){const r=a.$implicit;e.Y8G("value",r),e.R7$(),e.SpI(" ",r.urls[0],"")}}const W=[{path:"",component:(()=>{var s;class a{constructor(t,n,o,i,S){this.lang=t,this.nakama=n,this.indexed=o,this.global=i,this.navCtrl=S,this.userInput={root:void 0,servers:[],groups:[],group_dedi:void 0,open_prv_channel:"",open_channel:!1,rtcserver:[]},this.servers=[],this.groups=[],this.rtcServer=[]}ngOnInit(){this.targetBaseURL=0==location.host.indexOf("localhost")?`${c.d2}pjcone_pwa/`:`${location.protocol}//${location.host}${window.sub_path}`,this.result_address=this.targetBaseURL,this.update_qrcode(),this.servers=this.nakama.get_all_server_info(),this.groups=this.nakama.rearrange_group_list(!1),this.indexed.loadTextFromUserPath("servers/webrtc_server.json",(t,n)=>{t&&n&&(this.rtcServer=JSON.parse(n))});for(let t=this.groups.length-1;t>=0;t--)"missing"==this.groups[t].status&&this.groups.splice(t,1)}ionViewDidEnter(){this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()}}SelectGroupServer(t){this.userInput.servers=t.detail.value||[],this.information_changed()}SelectGroupChannel(t){this.userInput.groups=t.detail.value||[],this.information_changed()}SelectRTCServer(t){this.userInput.rtcserver=t.detail.value||[],this.information_changed()}baseURLChanged(t){t.detail.value||(this.userInput.root=void 0),this.information_changed()}information_changed(){this.result_address=this.userInput.root||this.targetBaseURL;let t=0;for(let n=0,o=this.userInput.servers.length;n<o;n++)this.result_address+=t?"&":"?",this.result_address+="server=",this.result_address+=`${this.userInput.servers[n].name||""},${this.userInput.servers[n].address||""},${this.userInput.servers[n].useSSL||""},${this.userInput.servers[n].port||7350},${this.userInput.servers[n].key||""}`,t++;for(let n=0,o=this.userInput.groups.length;n<o;n++)this.result_address+=t?"&":"?",this.result_address+="group=",this.result_address+=`${this.userInput.groups[n].name},${this.userInput.groups[n].id}`,t++;for(let n=0,o=this.userInput.rtcserver.length;n<o;n++)this.result_address+=t?"&":"?",this.result_address+="rtcserver=",this.result_address+=`[${this.userInput.rtcserver[n].urls}],${this.userInput.rtcserver[n].username},${this.userInput.rtcserver[n].credential}`,t++;if(this.userInput.open_prv_channel){this.result_address+=t?"&":"?",this.result_address+="open_prv_channel=";try{this.result_address+=`${this.userInput.open_prv_channel},${this.servers[0].isOfficial},${this.userInput.servers[0].target}`}catch{this.result_address+=`${this.userInput.open_prv_channel},,`}t++}this.userInput.open_channel&&(this.result_address+=t?"&":"?",this.result_address+="open_channel=",this.result_address+=`${this.userInput.groups[0].id},${this.userInput.groups[0].server.isOfficial},${this.userInput.groups[0].server.target}`,t++),this.update_qrcode()}update_qrcode(t){this.QRCodeSRC=this.global.readasQRCodeFromString(this.result_address)}copy_result_address(){this.global.WriteValueToClipboard("text/plain",this.result_address)}paste_user_id(){var t=this;return(0,_.A)(function*(){if(t.userInput.open_prv_channel)t.userInput.open_prv_channel="";else try{let n=yield t.global.GetValueFromClipboard();"text/plain"===n.type&&(t.userInput.open_prv_channel=n.value)}catch{}t.information_changed()})()}ionViewWillLeave(){delete this.global.p5KeyShortCut.Escape}}return(s=a).\u0275fac=function(t){return new(t||s)(e.rXU(m.y),e.rXU(v.X),e.rXU(b.n),e.rXU(f.z3),e.rXU(k.q9))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-weblink-gen"]],decls:35,vars:25,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","portal/settings"],["style","width: 100%; height: auto; cursor: copy;","alt","QRCodeSRC",3,"src","click",4,"ngIf"],[1,"infobox",3,"keyup","ngModelChange","ngModel"],[1,"ion-text-end",3,"ngModelChange","ionInput","label","ngModel","placeholder"],["multiple","true",3,"ionChange","label","placeholder"],[3,"value",4,"ngFor","ngForOf"],["button","",3,"click","disabled"],[1,"ignore_toggles",3,"ngModelChange","ngModel"],[1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel","placeholder"],["alt","QRCodeSRC",2,"width","100%","height","auto","cursor","copy",3,"click","src"],[3,"value"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",1),e.nrm(5,"ion-back-button",2),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.EFF(9),e.k0s()(),e.DNE(10,I,1,1,"img",3),e.j41(11,"div")(12,"textarea",4),e.bIt("keyup",function(i){return n.update_qrcode(i)}),e.mxI("ngModelChange",function(i){return e.DH7(n.result_address,i)||(n.result_address=i),i}),e.k0s()(),e.j41(13,"ion-item-divider")(14,"ion-label"),e.EFF(15),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",5),e.mxI("ngModelChange",function(i){return e.DH7(n.userInput.root,i)||(n.userInput.root=i),i}),e.bIt("ionInput",function(i){return n.baseURLChanged(i)}),e.k0s()(),e.j41(18,"ion-item")(19,"ion-select",6),e.bIt("ionChange",function(i){return n.SelectGroupServer(i)}),e.DNE(20,G,2,2,"ion-select-option",7),e.k0s()(),e.j41(21,"ion-item")(22,"ion-select",6),e.bIt("ionChange",function(i){return n.SelectGroupChannel(i)}),e.DNE(23,R,2,2,"ion-select-option",7),e.k0s()(),e.j41(24,"ion-item")(25,"ion-select",6),e.bIt("ionChange",function(i){return n.SelectRTCServer(i)}),e.DNE(26,C,2,2,"ion-select-option",7),e.k0s()(),e.j41(27,"ion-item-divider")(28,"ion-label"),e.EFF(29),e.k0s()(),e.j41(30,"ion-item",8),e.bIt("click",function(){return n.userInput.open_channel=!n.userInput.open_channel,n.information_changed()}),e.j41(31,"ion-toggle",9),e.mxI("ngModelChange",function(i){return e.DH7(n.userInput.open_channel,i)||(n.userInput.open_channel=i),i}),e.EFF(32),e.k0s()(),e.j41(33,"ion-item",8),e.bIt("click",function(){return n.paste_user_id()}),e.j41(34,"ion-input",10),e.mxI("ngModelChange",function(i){return e.DH7(n.userInput.open_prv_channel,i)||(n.userInput.open_prv_channel=i),i}),e.bIt("ionInput",function(){return n.information_changed()}),e.k0s()()()),2&t&&(e.R7$(3),e.JRh(n.lang.text.Settings.WebLinkGen),e.R7$(6),e.JRh(n.lang.text.WebLinkGen.subtitle),e.R7$(),e.Y8G("ngIf",n.QRCodeSRC),e.R7$(2),e.R50("ngModel",n.result_address),e.R7$(3),e.JRh(n.lang.text.WebLinkGen.CustomInfo),e.R7$(2),e.Y8G("label",n.lang.text.WebLinkGen.baseURL),e.R50("ngModel",n.userInput.root),e.Y8G("placeholder",n.targetBaseURL),e.R7$(2),e.Y8G("label",n.lang.text.QuickQRShare.GroupServer)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.R7$(),e.Y8G("ngForOf",n.servers),e.R7$(2),e.Y8G("label",n.lang.text.QuickQRShare.Group)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.R7$(),e.Y8G("ngForOf",n.groups),e.R7$(2),e.Y8G("label",n.lang.text.WebRTCDevManager.Title)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.R7$(),e.Y8G("ngForOf",n.rtcServer),e.R7$(3),e.JRh(n.lang.text.WebLinkGen.AutoOpenChannel),e.R7$(),e.Y8G("disabled",!n.userInput.groups.length||""!=n.userInput.open_prv_channel),e.R7$(),e.R50("ngModel",n.userInput.open_channel),e.R7$(),e.JRh(n.lang.text.WebLinkGen.OpenGroupChannel),e.R7$(),e.Y8G("disabled",n.userInput.open_channel),e.R7$(),e.Y8G("label",n.lang.text.WebLinkGen.OpenPrivateChannel),e.R50("ngModel",n.userInput.open_prv_channel),e.Y8G("placeholder",n.lang.text.WebLinkGen.ClickToPaste))},dependencies:[h.Sq,h.bT,p.me,p.BC,p.vS,l.QW,l.W9,l.eU,l.$w,l.uz,l.Dg,l.he,l.Nm,l.Ip,l.BC,l.BY,l.ai,l.hB,l.Je,l.Gw,l.el],styles:[".ignore_toggles[_ngcontent-%COMP%]{pointer-events:none}"]}),a})()}];let $=(()=>{var s;class a{}return(s=a).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[d.iI.forChild(W),d.iI]}),a})(),P=(()=>{var s;class a{}return(s=a).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[h.MD,p.YN,l.bv,$]}),a})()}}]);