"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[526],{526:(fe,D,p)=>{p.r(D),p.d(D,{PostViewerPageModule:()=>le});var L=p(177),U=p(4341),_=p(5374),T=p(9858),C=p(467),H=p(8326),G=p(222),t=p(3953),N=p(3656),M=p(4234),X=p(755),B=p(4237),W=p(482),Y=p(9900);const Q=["QuickPostView"];function z(s,P){1&s&&(t.j41(0,"div",13)(1,"div",14),t.EFF(2,"A"),t.k0s()())}function J(s,P){if(1&s){const h=t.RV6();t.j41(0,"ion-icon",15),t.bIt("click",function(){t.eBV(h);const i=t.XpG();return t.Njj(i.ChangeToAnother(-1))}),t.k0s()}}function K(s,P){if(1&s&&(t.j41(0,"ion-label",16),t.EFF(1),t.k0s()),2&s){const h=t.XpG();t.R7$(),t.JRh(h.CurrentIndex+" / "+h.nakama.posts.length)}}function Z(s,P){1&s&&(t.j41(0,"div",13)(1,"div",17),t.EFF(2,"D"),t.k0s()())}function q(s,P){if(1&s){const h=t.RV6();t.j41(0,"ion-icon",18),t.bIt("click",function(){t.eBV(h);const i=t.XpG();return t.Njj(i.ChangeToAnother(1))}),t.k0s()}}function ee(s,P){if(1&s&&t.nrm(0,"img",19),2&s){const h=t.XpG();t.Y8G("src",h.PostInfo.mainImage.MainThumbnail,t.B4B)}}function te(s,P){1&s&&(t.j41(0,"div",25),t.EFF(1,"Shift + E"),t.k0s())}function ie(s,P){1&s&&(t.j41(0,"div",25),t.EFF(1,"Shift + D"),t.k0s())}function oe(s,P){if(1&s){const h=t.RV6();t.j41(0,"table",20)(1,"tr")(2,"td")(3,"div",21),t.DNE(4,te,2,0,"div",22),t.j41(5,"ion-button",23),t.bIt("click",function(){t.eBV(h);const i=t.XpG();return t.Njj(i.EditPost())}),t.EFF(6),t.k0s()()(),t.j41(7,"td")(8,"div",21),t.DNE(9,ie,2,0,"div",22),t.j41(10,"ion-button",24),t.bIt("click",function(){t.eBV(h);const i=t.XpG();return t.Njj(i.RemovePost())}),t.EFF(11),t.k0s()()()()()}if(2&s){const h=t.XpG();t.R7$(4),t.Y8G("ngIf",h.global.ShowHint),t.R7$(2),t.SpI(" ",h.lang.text.AddPost.EditTitle," "),t.R7$(3),t.Y8G("ngIf",h.global.ShowHint),t.R7$(2),t.SpI(" ",h.lang.text.PostViewer.RemovePost," ")}}function se(s,P){if(1&s){const h=t.RV6();t.j41(0,"img",32),t.bIt("click",function(){t.eBV(h);const i=t.XpG(2);return t.Njj(i.global.WriteValueToClipboard("text/plain",i.ResultSharedAddress))}),t.k0s()}if(2&s){const h=t.XpG(2);t.Y8G("src",h.QRCodeSRC,t.B4B)}}function ne(s,P){if(1&s){const h=t.RV6();t.j41(0,"div",26),t.bIt("click",function(i){t.eBV(h);const l=t.XpG();return t.Njj(l.CheckIfDismissAct(i))}),t.j41(1,"div",27)(2,"div",28),t.DNE(3,se,1,1,"img",29),t.j41(4,"ion-item",30),t.bIt("click",function(){t.eBV(h);const i=t.XpG();return t.Njj(i.global.WriteValueToClipboard("text/plain",i.ResultSharedAddress))}),t.j41(5,"ion-label",31),t.EFF(6),t.k0s()()()()()}if(2&s){const h=t.XpG();t.R7$(3),t.Y8G("ngIf",h.QRCodeSRC),t.R7$(3),t.JRh(h.ResultSharedAddress)}}const ae=[{path:"",component:(()=>{var s;class P{constructor(e,i,l,w,d,m,I,u,v){this.navCtrl=e,this.lang=i,this.indexed=l,this.nakama=w,this.alertCtrl=d,this.global=m,this.p5toast=I,this.route=u,this.router=v,this.PostInfo={},this.isOwner=!1,this.HavePosts=!1,this.CurrentIndex=1,this.WaitingLoaded=!1,this.BackButtonPressed=!1,this.ScrollPostId="ScrollPostId",this.blenderViewers=[],this.FileURLs=[],this.PlayableElements=[],this.IsFocusOnHere=!0,this.RearrangedRelevance=[],this.ContentChanging=!1,this.PostContentId="PostContentId",this.AlreadyHaveGodot=!1}ngOnInit(){this.cont=new AbortController,this.route.queryParams.subscribe(e=>{try{const i=this.router.getCurrentNavigation().extras.state;this.PostInfo=i.data,this.ScrollPostId=`ScrollPostId_${Date.now()}`,this.PostContentId=`PostContentId_${Date.now()}`,this.CurrentIndex=i.index}catch{}})}WaitingCurrent(){var e=this;return(0,C.A)(function*(){for(;!e.WaitingLoaded;)yield new Promise(i=>setTimeout(i,0))})()}ionViewWillEnter(){this.global.portalHint=!1,this.IsFocusOnHere&&this.initialize(),this.WaitingLoaded=!0,this.global.StoreShortCutAct("post-viewer"),this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()},this.IsFocusOnHere=!0}ChangeContentWithKeyInput(){var e=this;if(this.p5canvas){this.ScrollDiv||(this.ScrollDiv=document.getElementById(this.ScrollPostId)),this.p5canvas.keyPressed=function(){var d=(0,C.A)(function*(m){if(e.IsFocusOnHere)switch(m.code){case"KeyW":e.ScrollDiv.scrollTo({top:e.ScrollDiv.scrollTop-e.ScrollDiv.clientHeight/2,behavior:"smooth"});break;case"KeyS":e.ScrollDiv.scrollTo({top:e.ScrollDiv.scrollTop+e.ScrollDiv.clientHeight/2,behavior:"smooth"});break;case"KeyA":case"ArrowLeft":e.ChangeToAnother(-1);break;case"KeyE":m.shiftKey&&e.EditPost();break;case"KeyD":m.shiftKey&&e.RemovePost();case"ArrowRight":m.shiftKey||e.ChangeToAnother(1);break;case"KeyQ":if(!e.RearrangedRelevance.length)return;let I,u,v;e.global.PageDismissAct["post-viewer-image-view"]=function(){var k=(0,C.A)(function*(V){yield e.WaitingCurrent(),V.data&&V.data.share&&e.navCtrl.pop(),e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-image-view"]});return function(V){return k.apply(this,arguments)}}();try{v=e.PostInfo.creator_id,I=e.PostInfo.server.isOfficial,u=e.PostInfo.server.target}catch{I="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("portal/community/post-viewer/ionic-viewer",{info:{...e.RearrangedRelevance[0],sender_id:v},isOfficial:I,target:u,path:e.RearrangedRelevance[0].content.path,relevance:e.RearrangedRelevance,noEdit:!0,dismiss:"post-viewer-image-view"})}});return function(m){return d.apply(this,arguments)}}();let i=this.p5canvas.createVector(),l={};this.p5canvas.touchStarted=d=>{if(this.IsFocusOnHere&&"changedTouches"in d){for(let I=0,u=d.changedTouches.length;I<u;I++)l[d.changedTouches[I].identifier]=this.p5canvas.createVector(d.changedTouches[I].clientX,d.changedTouches[I].clientY);1===Object.keys(l).length&&(i=l[d.changedTouches[0].identifier].copy())}};const w=100;this.p5canvas.touchEnded=d=>{if(this.IsFocusOnHere&&"changedTouches"in d){let m;for(let u=0,v=d.changedTouches.length;u<v;u++)m=this.p5canvas.createVector(d.changedTouches[u].clientX,d.changedTouches[u].clientY),delete l[d.changedTouches[u].identifier];0===Object.keys(l).length&&(m.sub(i),m.x>w?this.ChangeToAnother(-1):m.x<-w&&this.ChangeToAnother(1))}}}}initialize(){if(this.PostInfo.mainImage)try{let e=this.PostInfo.mainImage.url;e||(e=URL.createObjectURL(this.PostInfo.mainImage.blob),setTimeout(()=>{URL.revokeObjectURL(e)},100)),this.PostInfo.mainImage.MainThumbnail=e}catch{}this.create_content();try{this.isOwner="me"==this.PostInfo.creator_id||this.PostInfo.creator_id==this.nakama.servers[this.PostInfo.server.isOfficial][this.PostInfo.server.target].session.user_id}catch{this.isOwner=!1}this.HavePosts=this.nakama.posts.length>1&&this.CurrentIndex>=0,this.ChangeContentWithKeyInput()}ChangeToAnother(e){if(this.ContentChanging)return;this.ContentChanging=!0;let i=this.CurrentIndex+e;i<=0||i>this.nakama.posts.length?this.ContentChanging=!1:(this.ScrollDiv.scrollTo({top:0}),this.p5canvas&&this.p5canvas.remove(),this.CurrentIndex=i,this.PostInfo=this.nakama.posts[this.CurrentIndex-1],this.initialize())}create_content(){var e=this;let i=document.getElementById(this.PostContentId);this.p5canvas=new H(l=>{l.setup=(0,C.A)(function*(){l.noCanvas();let d=l.createDiv(`${e.PostInfo.OutSource?'<ion-icon id="title_link" style="cursor: pointer;" slot="start" name="link-outline"></ion-icon> ':""}${e.PostInfo.title}`);e.PostInfo.OutSource&&(document.getElementById("title_link").onclick=(0,C.A)(function*(){e.ResultSharedAddress="",e.ResultSharedAddress=`${yield e.global.GetHeaderAddress()}?postViewer=${e.PostInfo.OutSource}`,e.QRCodeSRC=e.global.readasQRCodeFromString(e.ResultSharedAddress),e.QuickPostView.onDidDismiss().then(()=>{e.global.RestoreShortCutAct("quick-post-view")}),e.global.StoreShortCutAct("quick-post-view"),e.QuickPostView.present()})),d.style("font-size","32px"),d.style("font-weight","bold"),d.parent(i);let u,m=l.createDiv();m.style("color","#888"),l.createDiv(`${e.lang.text.PostViewer.CreateTime}: ${new Date(e.PostInfo.create_time).toLocaleString()}`).parent(m),e.PostInfo.create_time!=e.PostInfo.modify_time&&l.createDiv(`${e.lang.text.PostViewer.ModifyTime}: ${new Date(e.PostInfo.modify_time).toLocaleString()}`).parent(m),m.parent(i);try{u=e.nakama.usernameOverride[e.PostInfo.server.isOfficial][e.PostInfo.server.target][e.PostInfo.creator_id]||e.PostInfo.creator_name}catch{u=e.PostInfo.creator_name}let v=l.createSpan(u);v.style("color",`#${e.PostInfo.UserColor}`),v.style("font-weight","bold"),v.style("font-size","17px"),v.style("cursor","pointer"),v.mouseClicked(()=>{if("me"==e.PostInfo.creator_id)e.nakama.open_profile_page();else try{let g=e.PostInfo.server.isOfficial,R=e.PostInfo.server.target,A=e.PostInfo.creator_id;A==e.nakama.servers[g][R].session.user_id?e.nakama.open_profile_page({isOfficial:g,target:R}):e.nakama.open_others_profile({info:{user:e.nakama.load_other_user(A,g,R)},group:{server:{isOfficial:g,target:R}}})}catch(g){e.p5toast.show({text:`${e.lang.text.PostViewer.CannotOpenProfile}: ${g}`})}}),v.parent(i);let k=[];if(e.PostInfo.content){var V;let g=(yield G.xI(e.PostInfo.content)).split("\n"),R=[];for(let a=0,y=g.length;a<y;a++){let E=!1,ce=g[a].length-1,o=0;try{let n=g[a].indexOf("}</p>");o=Number(g[a].substring(4,n)),E=0==g[a].indexOf("<p>{")&&g[a].indexOf("}</p>")==ce-4&&!isNaN(o)}catch{}if(E){if(!Number.isNaN(o)&&!k.includes(o)&&k.push(o),e.PostInfo.server.local)try{if(e.PostInfo.attachments[o].blob)throw"blob \uc900\ube44\ub418\uc5b4\uc788\uc74c";let n=yield e.indexed.loadBlobFromUserPath(e.PostInfo.attachments[o].path,e.PostInfo.attachments[o].type);e.PostInfo.attachments[o].blob=n}catch{}else try{if(e.PostInfo.attachments[o].blob)throw"blob \uc900\ube44\ub418\uc5b4\uc788\uc74c";e.PostInfo.attachments[o].alt_path=`servers/${e.PostInfo.server.isOfficial}/${e.PostInfo.server.target}/posts/${e.PostInfo.creator_id}/${e.PostInfo.id}/[${a}]${e.PostInfo.attachments[a].filename}`;let n=yield e.nakama.sync_load_file(e.PostInfo.attachments[o],e.PostInfo.server.isOfficial,e.PostInfo.server.target,"server_post",e.PostInfo.creator_id,`${e.PostInfo.id}_attach_${o}`,!1);e.PostInfo.attachments[o].blob=n.value}catch{}switch(e.PostInfo.attachments[o].viewer){case"image":{let n=e.PostInfo.attachments[o].url;if(!n)try{n=URL.createObjectURL(e.PostInfo.attachments[o].blob),setTimeout(()=>{URL.revokeObjectURL(n)},100)}catch(c){console.log("\uac8c\uc2dc\ubb3c image \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",c)}let r=l.createP();r.parent(i);let f=l.createImg(n,`${o}`);f.style("cursor","pointer"),f.mouseClicked(()=>{let c,b,x;e.global.PageDismissAct["post-viewer-image-view"]=function(){var S=(0,C.A)(function*(O){yield e.WaitingCurrent(),O.data&&O.data.share&&e.navCtrl.pop(),e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-image-view"]});return function(O){return S.apply(this,arguments)}}();try{x=e.PostInfo.creator_id,c=e.PostInfo.server.isOfficial,b=e.PostInfo.server.target}catch{c="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("portal/community/post-viewer/ionic-viewer",{info:{content:e.PostInfo.attachments[o],sender_id:x},isOfficial:c,target:b,path:e.PostInfo.attachments[o].path,relevance:e.RearrangedRelevance,noEdit:!0,dismiss:"post-viewer-image-view"})}),f.parent(r),g[a]=r}break;case"audio":{let n=e.PostInfo.attachments[o].url;if(!n)try{n=URL.createObjectURL(e.PostInfo.attachments[o].blob),e.FileURLs.push(n)}catch(c){console.log("\uac8c\uc2dc\ubb3c audio \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",c)}let r=l.createP(),f=l.createAudio([n]);f.showControls(),f.elt.onplay=()=>{for(let c=0,b=e.PlayableElements.length;c<b;c++)try{c!=o&&e.PlayableElements[c].pause()}catch{}},f.parent(r),g[a]=r,e.PlayableElements[o]=f.elt}break;case"video":{let n=e.PostInfo.attachments[o].url;if(!n)try{n=URL.createObjectURL(e.PostInfo.attachments[o].blob),e.FileURLs.push(n)}catch(c){console.log("\uac8c\uc2dc\ubb3c video \ucca8\ubd80\ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",c)}let r=l.createP(),f=l.createVideo([n]);f.style("width","100%"),f.style("height","auto"),f.showControls(),f.parent(r),g[a]=r,e.PlayableElements[o]=f.elt}break;case"godot":{let n=`PostViewer_godot_pck_${o}`,r=l.createDiv();r.id(n),r.style("width","100%"),r.style("height","432px"),r.style("margin-top","8px"),g[a]=r,setTimeout(()=>{if(e.AlreadyHaveGodot||e.global.ArcadeLoaded)try{w(r,o),r.mouseClicked(()=>{let f,c,b;e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{b=e.PostInfo.creator_id,f=e.PostInfo.server.isOfficial,c=e.PostInfo.server.target}catch{f="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("portal/community/post-viewer/ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[o])),sender_id:b},isOfficial:f,target:c,path:e.PostInfo.attachments[o].path,relevance:e.RearrangedRelevance,noEdit:!0,dismiss:"post-viewer-file-view"})})}catch(f){console.log("\ud504\ub808\uc784 \uc0ad\uc81c \ud589\ub3d9\uc2e4\ud328: ",f)}else e.AlreadyHaveGodot=!0,e.PostInfo.attachments[o].cont=e.cont,e.global.CreateGodotIFrameWithDuplicateAct(e.PostInfo.attachments[o],n,{path:`tmp_files/duplicate/${e.PostInfo.attachments[o].filename}`,quit_ionic:()=>{try{w(r,o),r.mouseClicked(()=>{let f,c,b;e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{b=e.PostInfo.creator_id,f=e.PostInfo.server.isOfficial,c=e.PostInfo.server.target}catch{f="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("portal/community/post-viewer/ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[o])),sender_id:b},isOfficial:f,target:c,path:e.PostInfo.attachments[o].path,relevance:e.RearrangedRelevance,noEdit:!0,dismiss:"post-viewer-file-view"})})}catch(f){console.log("\ud504\ub808\uc784 \uc0ad\uc81c \ud589\ub3d9\uc2e4\ud328: ",f)}}})},100*o)}break;case"blender":{let n=l.createDiv();n.style("position","relative"),n.style("width","100%"),n.style("height","432px"),n.elt.onwheel=()=>!1,n.elt.oncontextmenu=()=>!1,g[a]=n;let r=e.global.load_blender_file(n.elt,e.PostInfo.attachments[o],()=>{},()=>{},e.cont);e.blenderViewers.push(r)}break;case"code":case"text":if("text/html"==e.PostInfo.attachments[o].type)try{if(!e.PostInfo.attachments[o].blob||!e.PostInfo.attachments[o].blob.size){if(e.PostInfo.attachments[o].url){let c=yield fetch(e.PostInfo.attachments[o].url);if(c.ok){let b=yield c.blob();e.PostInfo.attachments[o].alt_path=`servers/${e.PostInfo.server.isOfficial}/${e.PostInfo.server.target}/posts/${e.PostInfo.creator_id}/${e.PostInfo.id}/[${o}]${e.PostInfo.attachments[o].filename}`,yield e.indexed.saveBlobToUserPath(b,e.PostInfo.attachments[o].alt_path)}}let f=yield e.indexed.loadBlobFromUserPath(e.PostInfo.attachments[o].alt_path||e.PostInfo.attachments[o].path,e.PostInfo.attachments[o].type);e.PostInfo.attachments[o].blob=f}let n=URL.createObjectURL(e.PostInfo.attachments[o].blob);e.FileURLs.push(n);let r=l.createElement("iframe");r.style("width","100%"),r.style("border","0"),r.style("height","432px"),r.attribute("src",n),g[a]=r;break}catch(n){console.log("HTML \ud30c\uc77c \uc77d\uae30 \uc2e4\ud328: ",n)}default:{let n=l.createDiv();n.parent(i),w(n,o),n.mouseClicked(()=>{let r,f,c;e.global.PageDismissAct["post-viewer-file-view"]=()=>{e.IsFocusOnHere=!0,delete e.global.PageDismissAct["post-viewer-file-view"]};try{c=e.PostInfo.creator_id,r=e.PostInfo.server.isOfficial,f=e.PostInfo.server.target}catch{r="local"}e.IsFocusOnHere=!1,e.global.ActLikeModal("portal/community/post-viewer/ionic-viewer",{info:{content:JSON.parse(JSON.stringify(e.PostInfo.attachments[o])),sender_id:c},isOfficial:r,target:f,path:e.PostInfo.attachments[o].path,relevance:e.RearrangedRelevance,noEdit:!0,dismiss:"post-viewer-file-view"})}),g[a]=n}}}else try{let n=e.global.HTMLDecode(g[a].replace("<p>","").replace("</p>","")),r=JSON.parse(n),c=l.createDiv(`[${r.i}] ${e.PostInfo.attachments[r.i].filename} (${r.t})`);c.style("background-color","#8888"),c.style("width","fit-content"),c.style("height","fit-content"),c.style("border-radius","16px"),c.style("padding","8px 16px"),c.style("margin","8px 0px"),c.style("cursor","pointer"),g[a]=c,R.push(()=>{let b=e.PlayableElements[r.i],x=r.t.split(":"),S=0,O=1;for(let F=x.length-1;F>=0;F--){let he=Number(x.pop());S+=he*O,O*=60}c.mouseClicked(()=>{try{b.currentTime=S,b.play()}catch{}})})}catch{}}const A=(null===(V=e.PostInfo.attachments)||void 0===V?void 0:V.length)||0;for(let a=0;a<A;a++)k.includes(a)||k.push(a);for(let a of k)e.RearrangedRelevance.push({content:JSON.parse(JSON.stringify(e.PostInfo.attachments[a]))});let j=[],$=()=>{if(j.length){let a=j.join("\n"),y=l.createDiv();y.style("width","100%"),y.elt.innerHTML=a,y.parent(i),j.length=0}};for(let a=0,y=g.length;a<y;a++)"string"==typeof g[a]?j.push(g[a]):($(),g[a].parent(i));$();for(let a=0,y=R.length;a<y;a++)R[a]();for(let a of e.blenderViewers)a.windowResized()}e.ContentChanging=!1});let w=(d,m)=>{this.PostInfo.attachments[m].blob=null,d.style("width","160px"),d.style("height","112px"),d.style("overflow","hidden"),d.style("background-color","grey"),d.style("margin-top","8px"),d.style("border-radius","8px"),d.style("cursor","pointer");let I=l.createP(this.PostInfo.attachments[m].filename);I.style("margin","0px 4px"),I.style("text-align","start"),I.parent(d);let u=l.createDiv();u.style("background-color","white"),u.style("margin-top","2px"),u.style("position","relative"),u.style("width","100%"),u.style("height","2px"),u.parent(d);let v=l.createSpan(this.lang.text.PostViewer.OpenFromViewer);v.style("margin","2px 4px 0px 4px"),v.style("text-align","start"),v.style("display","grid"),v.parent(d)}})}CheckIfDismissAct(e){"quick_post_link_qr"===e.target.id&&this.QuickPostView.dismiss()}EditPost(){this.navCtrl.pop(),this.nakama.EditPost(this.PostInfo)}ionViewWillLeave(){this.WaitingLoaded=!1,delete this.global.p5KeyShortCut.Escape,this.global.RestoreShortCutAct("post-viewer"),this.IsFocusOnHere=!1}RemovePost(){var i,e=this;this.alertCtrl.create({header:this.lang.text.PostViewer.RemovePost,message:this.lang.text.ChatRoom.CannotUndone,buttons:[{text:this.lang.text.ChatRoom.Delete,cssClass:"redfont",handler:(i=(0,C.A)(function*(){yield e.nakama.RemovePost(e.PostInfo),e.navCtrl.pop()}),function(){return i.apply(this,arguments)})}]}).then(i=>i.present())}ngOnDestroy(){this.route.queryParams.unsubscribe(),this.cont.abort("\uac8c\uc2dc\ubb3c \ubdf0\uc5b4 \ubc97\uc5b4\ub0a8"),this.cont=null;for(let e=0,i=this.FileURLs.length;e<i;e++)URL.revokeObjectURL(this.FileURLs[e]);for(let e=0,i=this.blenderViewers.length;e<i;e++)this.blenderViewers[e].remove();this.p5canvas&&this.p5canvas.remove(),this.global.portalHint=!0}}return(s=P).\u0275fac=function(e){return new(e||s)(t.rXU(N.q9),t.rXU(M.y),t.rXU(X.n),t.rXU(B.X),t.rXU(_.hG),t.rXU(W.z3),t.rXU(Y.G),t.rXU(T.nX),t.rXU(T.Ix))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-post-viewer"]],viewQuery:function(e,i){if(1&e&&t.GBs(Q,5),2&e){let l;t.mGM(l=t.lsd())&&(i.QuickPostView=l.first)}},decls:20,vars:10,consts:[["QuickPostView",""],[1,"ion-no-border"],["slot","start"],["defaultHref","portal/community"],["style","position: relative;","slot","end",4,"ngIf"],["class","relevance_change","style","padding-right: 4px;","slot","end","name","arrow-back-circle-outline",3,"click",4,"ngIf"],["slot","end",4,"ngIf"],["class","relevance_change","style","padding-right: 16px; padding-left: 4px;","slot","end","name","arrow-forward-circle-outline",3,"click",4,"ngIf"],[2,"height","100%","overflow-y","auto",3,"id"],["style","width: 100%; height: auto;","alt","MainImage",3,"src",4,"ngIf"],[2,"padding","16px","height","100%",3,"id"],["style","width: 100%; background-color: black;",4,"ngIf"],[1,"transparent-modal"],["slot","end",2,"position","relative"],[1,"shortcut_hint","shortcut_change_viewer",2,"right","-4px"],["slot","end","name","arrow-back-circle-outline",1,"relevance_change",2,"padding-right","4px",3,"click"],["slot","end"],[1,"shortcut_hint","shortcut_change_viewer"],["slot","end","name","arrow-forward-circle-outline",1,"relevance_change",2,"padding-right","16px","padding-left","4px",3,"click"],["alt","MainImage",2,"width","100%","height","auto",3,"src"],[2,"width","100%","background-color","black"],[2,"position","relative"],["class","shortcut_hint",4,"ngIf"],["expand","block",3,"click"],["color","danger","expand","block",3,"click"],[1,"shortcut_hint"],["id","quick_post_link_qr",1,"OutterModal",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],[2,"width","400px","min-height","455px","background-color","var(--chatroom-background)","text-align","center","padding","16px"],["style","width: 100%; height: auto; cursor: copy; margin-bottom: 8px;","alt","QuickPostViewLink",3,"src","click",4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["alt","QuickPostViewLink",2,"width","100%","height","auto","cursor","copy","margin-bottom","8px",3,"click","src"]],template:function(e,i){1&e&&(t.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",2),t.nrm(5,"ion-back-button",3),t.k0s(),t.DNE(6,z,3,0,"div",4)(7,J,1,0,"ion-icon",5)(8,K,2,1,"ion-label",6)(9,Z,3,0,"div",4)(10,q,1,0,"ion-icon",7),t.k0s()(),t.j41(11,"ion-content")(12,"div",8)(13,"div"),t.DNE(14,ee,1,1,"img",9),t.nrm(15,"div",10),t.DNE(16,oe,12,4,"table",11),t.k0s()(),t.j41(17,"ion-modal",12,0),t.DNE(19,ne,7,2,"ng-template"),t.k0s()()),2&e&&(t.R7$(3),t.JRh(i.lang.text.PostViewer.Title),t.R7$(3),t.Y8G("ngIf",i.global.ShowHint&&i.HavePosts),t.R7$(),t.Y8G("ngIf",i.HavePosts),t.R7$(),t.Y8G("ngIf",i.HavePosts),t.R7$(),t.Y8G("ngIf",i.global.ShowHint&&i.HavePosts),t.R7$(),t.Y8G("ngIf",i.HavePosts),t.R7$(2),t.Y8G("id",i.ScrollPostId),t.R7$(2),t.Y8G("ngIf",i.PostInfo.mainImage&&i.PostInfo.mainImage.MainThumbnail),t.R7$(),t.Y8G("id",i.PostContentId),t.R7$(),t.Y8G("ngIf",i.isOwner&&i.CurrentIndex>=0))},dependencies:[L.bT,_.Jm,_.QW,_.W9,_.eU,_.iq,_.uz,_.he,_.BC,_.ai,_.Sb,_.el]}),P})()},{path:"ionic-viewer",loadChildren:()=>p.e(4803).then(p.bind(p,4803)).then(s=>s.IonicViewerPageModule)}];let re=(()=>{var s;class P{}return(s=P).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[T.iI.forChild(ae),T.iI]}),P})(),le=(()=>{var s;class P{}return(s=P).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[L.MD,U.YN,_.bv,re]}),P})()}}]);