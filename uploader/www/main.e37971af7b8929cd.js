(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(wr,Nn,je)=>{"use strict";je.d(Nn,{E_:()=>p,F3:()=>d,I9:()=>A});var j=je(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var M=function(H){return H.Unimplemented="UNIMPLEMENTED",H.Unavailable="UNAVAILABLE",H}(M||{});class A extends Error{constructor(re,Z,_e){super(re),this.message=re,this.code=Z,this.data=_e}}const w=H=>{var re,Z,_e,xe,oe;const me=H.CapacitorCustomPlatform||null,ne=H.Capacitor||{},J=ne.Plugins=ne.Plugins||{},he=H.CapacitorPlatforms,et=(null===(re=null==he?void 0:he.currentPlatform)||void 0===re?void 0:re.getPlatform)||(()=>null!==me?me.name:(H=>{var re,Z;return null!=H&&H.androidBridge?"android":null!==(Z=null===(re=null==H?void 0:H.webkit)||void 0===re?void 0:re.messageHandlers)&&void 0!==Z&&Z.bridge?"ios":"web"})(H)),V=(null===(Z=null==he?void 0:he.currentPlatform)||void 0===Z?void 0:Z.isNativePlatform)||(()=>"web"!==et()),Le=(null===(_e=null==he?void 0:he.currentPlatform)||void 0===_e?void 0:_e.isPluginAvailable)||(lt=>{const It=dt.get(lt);return!!(null!=It&&It.platforms.has(et())||ut(lt))}),ut=(null===(xe=null==he?void 0:he.currentPlatform)||void 0===xe?void 0:xe.getPluginHeader)||(lt=>{var It;return null===(It=ne.PluginHeaders)||void 0===It?void 0:It.find(Tt=>Tt.name===lt)}),dt=new Map,Bt=(null===(oe=null==he?void 0:he.currentPlatform)||void 0===oe?void 0:oe.registerPlugin)||((lt,It={})=>{const Tt=dt.get(lt);if(Tt)return console.warn(`Capacitor plugin "${lt}" already registered. Cannot register plugins twice.`),Tt.proxy;const Ot=et(),vt=ut(lt);let Gt;const hn=function(){var nr=(0,j.A)(function*(){return!Gt&&Ot in It?Gt=Gt="function"==typeof It[Ot]?yield It[Ot]():It[Ot]:null!==me&&!Gt&&"web"in It&&(Gt=Gt="function"==typeof It.web?yield It.web():It.web),Gt});return function(){return nr.apply(this,arguments)}}(),bn=nr=>{let mn;const qn=(...Tn)=>{const ct=hn().then(pt=>{const Qe=((nr,mn)=>{var qn,Tn;if(!vt){if(nr)return null===(Tn=nr[mn])||void 0===Tn?void 0:Tn.bind(nr);throw new A(`"${lt}" plugin is not implemented on ${Ot}`,M.Unimplemented)}{const ct=null==vt?void 0:vt.methods.find(pt=>mn===pt.name);if(ct)return"promise"===ct.rtype?pt=>ne.nativePromise(lt,mn.toString(),pt):(pt,Qe)=>ne.nativeCallback(lt,mn.toString(),pt,Qe);if(nr)return null===(qn=nr[mn])||void 0===qn?void 0:qn.bind(nr)}})(pt,nr);if(Qe){const xt=Qe(...Tn);return mn=null==xt?void 0:xt.remove,xt}throw new A(`"${lt}.${nr}()" is not implemented on ${Ot}`,M.Unimplemented)});return"addListener"===nr&&(ct.remove=(0,j.A)(function*(){return mn()})),ct};return qn.toString=()=>`${nr.toString()}() { [capacitor code] }`,Object.defineProperty(qn,"name",{value:nr,writable:!1,configurable:!1}),qn},Xn=bn("addListener"),Mn=bn("removeListener"),gr=(nr,mn)=>{const qn=Xn({eventName:nr},mn),Tn=function(){var pt=(0,j.A)(function*(){const Qe=yield qn;Mn({eventName:nr,callbackId:Qe},mn)});return function(){return pt.apply(this,arguments)}}(),ct=new Promise(pt=>qn.then(()=>pt({remove:Tn})));return ct.remove=(0,j.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Tn()}),ct},Ln=new Proxy({},{get(nr,mn){switch(mn){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return vt?gr:Xn;case"removeListener":return Mn;default:return bn(mn)}}});return J[lt]=Ln,dt.set(lt,{name:lt,proxy:Ln,platforms:new Set([...Object.keys(It),...vt?[Ot]:[]])}),Ln});return ne.convertFileSrc||(ne.convertFileSrc=lt=>lt),ne.getPlatform=et,ne.handleError=lt=>H.console.error(lt),ne.isNativePlatform=V,ne.isPluginAvailable=Le,ne.pluginMethodNoop=(lt,It,Tt)=>Promise.reject(`${Tt} does not have an implementation of "${It}".`),ne.registerPlugin=Bt,ne.Exception=A,ne.DEBUG=!!ne.DEBUG,ne.isLoggingEnabled=!!ne.isLoggingEnabled,ne.platform=ne.getPlatform(),ne.isNative=ne.isNativePlatform(),ne},D=(H=>H.Capacitor=w(H))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),d=D.registerPlugin;class p{constructor(re){this.listeners={},this.retainedEventArguments={},this.windowListeners={},re&&(console.warn(`Capacitor WebPlugin "${re.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=re)}addListener(re,Z){var _e=this;let xe=!1;this.listeners[re]||(this.listeners[re]=[],xe=!0),this.listeners[re].push(Z);const me=this.windowListeners[re];me&&!me.registered&&this.addWindowListener(me),xe&&this.sendRetainedArgumentsForEvent(re);const ne=function(){var he=(0,j.A)(function*(){return _e.removeListener(re,Z)});return function(){return he.apply(this,arguments)}}();return Promise.resolve({remove:ne})}removeAllListeners(){var re=this;return(0,j.A)(function*(){re.listeners={};for(const Z in re.windowListeners)re.removeWindowListener(re.windowListeners[Z]);re.windowListeners={}})()}notifyListeners(re,Z,_e){const xe=this.listeners[re];if(xe)xe.forEach(oe=>oe(Z));else if(_e){let oe=this.retainedEventArguments[re];oe||(oe=[]),oe.push(Z),this.retainedEventArguments[re]=oe}}hasListeners(re){return!!this.listeners[re].length}registerWindowListener(re,Z){this.windowListeners[Z]={registered:!1,windowEventName:re,pluginEventName:Z,handler:_e=>{this.notifyListeners(Z,_e)}}}unimplemented(re="not implemented"){return new D.Exception(re,M.Unimplemented)}unavailable(re="not available"){return new D.Exception(re,M.Unavailable)}removeListener(re,Z){var _e=this;return(0,j.A)(function*(){const xe=_e.listeners[re];if(!xe)return;const oe=xe.indexOf(Z);_e.listeners[re].splice(oe,1),_e.listeners[re].length||_e.removeWindowListener(_e.windowListeners[re])})()}addWindowListener(re){window.addEventListener(re.windowEventName,re.handler),re.registered=!0}removeWindowListener(re){re&&(window.removeEventListener(re.windowEventName,re.handler),re.registered=!1)}sendRetainedArgumentsForEvent(re){const Z=this.retainedEventArguments[re];Z&&(delete this.retainedEventArguments[re],Z.forEach(_e=>{this.notifyListeners(re,_e)}))}}const g=H=>encodeURIComponent(H).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),x=H=>H.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends p{getCookies(){return(0,j.A)(function*(){const re=document.cookie,Z={};return re.split(";").forEach(_e=>{if(_e.length<=0)return;let[xe,oe]=_e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");xe=x(xe).trim(),oe=x(oe).trim(),Z[xe]=oe}),Z})()}setCookie(re){return(0,j.A)(function*(){try{const Z=g(re.key),_e=g(re.value),xe=`; expires=${(re.expires||"").replace("expires=","")}`,oe=(re.path||"/").replace("path=",""),me=null!=re.url&&re.url.length>0?`domain=${re.url}`:"";document.cookie=`${Z}=${_e||""}${xe}; path=${oe}; ${me};`}catch(Z){return Promise.reject(Z)}})()}deleteCookie(re){return(0,j.A)(function*(){try{document.cookie=`${re.key}=; Max-Age=0`}catch(Z){return Promise.reject(Z)}})()}clearCookies(){return(0,j.A)(function*(){try{const re=document.cookie.split(";")||[];for(const Z of re)document.cookie=Z.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(re){return Promise.reject(re)}})()}clearAllCookies(){var re=this;return(0,j.A)(function*(){try{yield re.clearCookies()}catch(Z){return Promise.reject(Z)}})()}}d("CapacitorCookies",{web:()=>new E});const k=function(){var H=(0,j.A)(function*(re){return new Promise((Z,_e)=>{const xe=new FileReader;xe.onload=()=>{const oe=xe.result;Z(oe.indexOf(",")>=0?oe.split(",")[1]:oe)},xe.onerror=oe=>_e(oe),xe.readAsDataURL(re)})});return function(Z){return H.apply(this,arguments)}}();class z extends p{request(re){return(0,j.A)(function*(){const Z=((H,re={})=>{const Z=Object.assign({method:H.method||"GET",headers:H.headers},re),xe=((H={})=>{const re=Object.keys(H);return Object.keys(H).map(xe=>xe.toLocaleLowerCase()).reduce((xe,oe,me)=>(xe[oe]=H[re[me]],xe),{})})(H.headers)["content-type"]||"";if("string"==typeof H.data)Z.body=H.data;else if(xe.includes("application/x-www-form-urlencoded")){const oe=new URLSearchParams;for(const[me,ne]of Object.entries(H.data||{}))oe.set(me,ne);Z.body=oe.toString()}else if(xe.includes("multipart/form-data")||H.data instanceof FormData){const oe=new FormData;if(H.data instanceof FormData)H.data.forEach((ne,J)=>{oe.append(J,ne)});else for(const ne of Object.keys(H.data))oe.append(ne,H.data[ne]);Z.body=oe;const me=new Headers(Z.headers);me.delete("content-type"),Z.headers=me}else(xe.includes("application/json")||"object"==typeof H.data)&&(Z.body=JSON.stringify(H.data));return Z})(re,re.webFetchExtra),_e=((H,re=!0)=>H?Object.entries(H).reduce((_e,xe)=>{const[oe,me]=xe;let ne,J;return Array.isArray(me)?(J="",me.forEach(he=>{ne=re?encodeURIComponent(he):he,J+=`${oe}=${ne}&`}),J.slice(0,-1)):(ne=re?encodeURIComponent(me):me,J=`${oe}=${ne}`),`${_e}&${J}`},"").substr(1):null)(re.params,re.shouldEncodeUrlParams),xe=_e?`${re.url}?${_e}`:re.url,oe=yield fetch(xe,Z),me=oe.headers.get("content-type")||"";let J,he,{responseType:ne="text"}=oe.ok?re:{};switch(me.includes("application/json")&&(ne="json"),ne){case"arraybuffer":case"blob":he=yield oe.blob(),J=yield k(he);break;case"json":J=yield oe.json();break;default:J=yield oe.text()}const Ce={};return oe.headers.forEach((et,le)=>{Ce[le]=et}),{data:J,headers:Ce,status:oe.status,url:oe.url}})()}get(re){var Z=this;return(0,j.A)(function*(){return Z.request(Object.assign(Object.assign({},re),{method:"GET"}))})()}post(re){var Z=this;return(0,j.A)(function*(){return Z.request(Object.assign(Object.assign({},re),{method:"POST"}))})()}put(re){var Z=this;return(0,j.A)(function*(){return Z.request(Object.assign(Object.assign({},re),{method:"PUT"}))})()}patch(re){var Z=this;return(0,j.A)(function*(){return Z.request(Object.assign(Object.assign({},re),{method:"PATCH"}))})()}delete(re){var Z=this;return(0,j.A)(function*(){return Z.request(Object.assign(Object.assign({},re),{method:"DELETE"}))})()}}d("CapacitorHttp",{web:()=>new z})},4442:(wr,Nn,je)=>{"use strict";je.d(Nn,{L:()=>l,a:()=>ve,b:()=>K,c:()=>M,d:()=>A,g:()=>oe}),je(5531);const l="ionViewWillEnter",ve="ionViewDidEnter",K="ionViewWillLeave",M="ionViewDidLeave",A="ionViewWillUnload",oe=me=>me.classList.contains("ion-page")?me:me.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||me},5531:(wr,Nn,je)=>{"use strict";je.d(Nn,{a:()=>b,c:()=>F,g:()=>A});class j{constructor(){this.m=new Map}reset(me){this.m=new Map(Object.entries(me))}get(me,ne){const J=this.m.get(me);return void 0!==J?J:ne}getBoolean(me,ne=!1){const J=this.m.get(me);return void 0===J?ne:"string"==typeof J?"true"===J:!!J}getNumber(me,ne){const J=parseFloat(this.m.get(me));return isNaN(J)?void 0!==ne?ne:NaN:J}set(me,ne){this.m.set(me,ne)}}const F=new j,A=oe=>w(oe),b=(oe,me)=>("string"==typeof oe&&(me=oe,oe=void 0),A(oe).includes(me)),w=(oe=window)=>{if(typeof oe>"u")return[];oe.Ionic=oe.Ionic||{};let me=oe.Ionic.platforms;return null==me&&(me=oe.Ionic.platforms=I(oe),me.forEach(ne=>oe.document.documentElement.classList.add(`plt-${ne}`))),me},I=oe=>{const me=F.get("platform");return Object.keys(re).filter(ne=>{const J=null==me?void 0:me[ne];return"function"==typeof J?J(oe):re[ne](oe)})},d=oe=>!!(ee(oe,/iPad/i)||ee(oe,/Macintosh/i)&&E(oe)),p=oe=>ee(oe,/android|sink/i),E=oe=>H(oe,"(any-pointer:coarse)"),k=oe=>X(oe)||Y(oe),X=oe=>!!(oe.cordova||oe.phonegap||oe.PhoneGap),Y=oe=>{const me=oe.Capacitor;return!(null==me||!me.isNative)},ee=(oe,me)=>me.test(oe.navigator.userAgent),H=(oe,me)=>{var ne;return null===(ne=oe.matchMedia)||void 0===ne?void 0:ne.call(oe,me).matches},re={ipad:d,iphone:oe=>ee(oe,/iPhone/i),ios:oe=>ee(oe,/iPhone|iPod/i)||d(oe),android:p,phablet:oe=>{const me=oe.innerWidth,ne=oe.innerHeight,J=Math.min(me,ne),he=Math.max(me,ne);return J>390&&J<520&&he>620&&he<800},tablet:oe=>{const me=oe.innerWidth,ne=oe.innerHeight,J=Math.min(me,ne),he=Math.max(me,ne);return d(oe)||(oe=>p(oe)&&!ee(oe,/mobile/i))(oe)||J>460&&J<820&&he>780&&he<1400},cordova:X,capacitor:Y,electron:oe=>ee(oe,/electron/i),pwa:oe=>{var me;return!!(null!==(me=oe.matchMedia)&&void 0!==me&&me.call(oe,"(display-mode: standalone)").matches||oe.navigator.standalone)},mobile:E,mobileweb:oe=>E(oe)&&!k(oe),desktop:oe=>!E(oe),hybrid:k}},9986:(wr,Nn,je)=>{"use strict";je.d(Nn,{c:()=>ve});var j=je(8476);let F;const Jt=(K,M,A)=>{const b=M.startsWith("animation")?(K=>(void 0===F&&(F=void 0===K.style.animationName&&void 0!==K.style.webkitAnimationName?"-webkit-":""),F))(K):"";K.style.setProperty(b+M,A)},l=(K=[],M)=>{if(void 0!==M){const A=Array.isArray(M)?M:[M];return[...K,...A]}return K},ve=K=>{let M,A,b,w,I,D,m,G,z,ee,_e,d=[],f=[],h=[],p=!1,g={},x=[],E=[],S={},k=0,X=!1,Y=!1,H=!0,re=!1,Z=!0,xe=!1;const oe=K,me=[],ne=[],J=[],he=[],Ce=[],et=[],le=[],V=[],ge=[],Le=[],Ke=[],ut="function"==typeof AnimationEffect||void 0!==j.w&&"function"==typeof j.w.AnimationEffect,_t="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ut,Nt=()=>Ke,It=(Ve,We)=>{const ft=We.findIndex(nt=>nt.c===Ve);ft>-1&&We.splice(ft,1)},Ot=(Ve,We)=>((null!=We&&We.oneTimeCallback?ne:me).push({c:Ve,o:We}),_e),Gt=()=>{_t&&(Ke.forEach(Ve=>{Ve.cancel()}),Ke.length=0)},hn=()=>{et.forEach(Ve=>{null!=Ve&&Ve.parentNode&&Ve.parentNode.removeChild(Ve)}),et.length=0},Qe=()=>void 0!==I?I:m?m.getFill():"both",xt=()=>void 0!==G?G:void 0!==D?D:m?m.getDirection():"normal",fn=()=>X?"linear":void 0!==b?b:m?m.getEasing():"linear",Cn=()=>Y?0:void 0!==z?z:void 0!==A?A:m?m.getDuration():0,jn=()=>void 0!==w?w:m?m.getIterations():1,on=()=>void 0!==ee?ee:void 0!==M?M:m?m.getDelay():0,cr=()=>{0!==k&&(k--,0===k&&((()=>{ge.forEach(Dt=>Dt()),Le.forEach(Dt=>Dt());const Ve=H?1:0,We=x,ft=E,nt=S;he.forEach(Dt=>{const un=Dt.classList;We.forEach(Bn=>un.add(Bn)),ft.forEach(Bn=>un.remove(Bn));for(const Bn in nt)nt.hasOwnProperty(Bn)&&Jt(Dt,Bn,nt[Bn])}),z=void 0,G=void 0,ee=void 0,me.forEach(Dt=>Dt.c(Ve,_e)),ne.forEach(Dt=>Dt.c(Ve,_e)),ne.length=0,Z=!0,H&&(re=!0),H=!0})(),m&&m.animationFinish()))},yr=()=>{(()=>{le.forEach(nt=>nt()),V.forEach(nt=>nt());const Ve=f,We=h,ft=g;he.forEach(nt=>{const Dt=nt.classList;Ve.forEach(un=>Dt.add(un)),We.forEach(un=>Dt.remove(un));for(const un in ft)ft.hasOwnProperty(un)&&Jt(nt,un,ft[un])})})(),d.length>0&&_t&&(he.forEach(Ve=>{const We=Ve.animate(d,{id:oe,delay:on(),duration:Cn(),easing:fn(),iterations:jn(),fill:Qe(),direction:xt()});We.pause(),Ke.push(We)}),Ke.length>0&&(Ke[0].onfinish=()=>{cr()})),p=!0},Tr=Ve=>{Ve=Math.min(Math.max(Ve,0),.9999),_t&&Ke.forEach(We=>{We.currentTime=We.effect.getComputedTiming().delay+Cn()*Ve,We.pause()})},te=Ve=>{Ke.forEach(We=>{We.effect.updateTiming({delay:on(),duration:Cn(),easing:fn(),iterations:jn(),fill:Qe(),direction:xt()})}),void 0!==Ve&&Tr(Ve)},De=(Ve=!1,We=!0,ft)=>(Ve&&Ce.forEach(nt=>{nt.update(Ve,We,ft)}),_t&&te(ft),_e),B=()=>{p&&(_t?Ke.forEach(Ve=>{Ve.pause()}):he.forEach(Ve=>{Jt(Ve,"animation-play-state","paused")}),xe=!0)},Ge=Ve=>new Promise(We=>{null!=Ve&&Ve.sync&&(Y=!0,Ot(()=>Y=!1,{oneTimeCallback:!0})),p||yr(),re&&(_t&&(Tr(0),te()),re=!1),Z&&(k=Ce.length+1,Z=!1);const ft=()=>{It(nt,ne),We()},nt=()=>{It(ft,J),We()};Ot(nt,{oneTimeCallback:!0}),((Ve,We)=>{J.push({c:Ve,o:{oneTimeCallback:!0}})})(ft),Ce.forEach(Dt=>{Dt.play()}),_t?(Ke.forEach(Ve=>{Ve.play()}),(0===d.length||0===he.length)&&cr()):cr(),xe=!1}),gt=(Ve,We)=>{const ft=d[0];return void 0===ft||void 0!==ft.offset&&0!==ft.offset?d=[{offset:0,[Ve]:We},...d]:ft[Ve]=We,_e};return _e={parentAnimation:m,elements:he,childAnimations:Ce,id:oe,animationFinish:cr,from:gt,to:(Ve,We)=>{const ft=d[d.length-1];return void 0===ft||void 0!==ft.offset&&1!==ft.offset?d=[...d,{offset:1,[Ve]:We}]:ft[Ve]=We,_e},fromTo:(Ve,We,ft)=>gt(Ve,We).to(Ve,ft),parent:Ve=>(m=Ve,_e),play:Ge,pause:()=>(Ce.forEach(Ve=>{Ve.pause()}),B(),_e),stop:()=>{Ce.forEach(Ve=>{Ve.stop()}),p&&(Gt(),p=!1),X=!1,Y=!1,Z=!0,G=void 0,z=void 0,ee=void 0,k=0,re=!1,H=!0,xe=!1,J.forEach(Ve=>Ve.c(0,_e)),J.length=0},destroy:Ve=>(Ce.forEach(We=>{We.destroy(Ve)}),(Ve=>{Gt(),Ve&&hn()})(Ve),he.length=0,Ce.length=0,d.length=0,me.length=0,ne.length=0,p=!1,Z=!0,_e),keyframes:Ve=>{const We=d!==Ve;return d=Ve,We&&(Ve=>{_t&&Nt().forEach(We=>{const ft=We.effect;if(ft.setKeyframes)ft.setKeyframes(Ve);else{const nt=new KeyframeEffect(ft.target,Ve,ft.getTiming());We.effect=nt}})})(d),_e},addAnimation:Ve=>{if(null!=Ve)if(Array.isArray(Ve))for(const We of Ve)We.parent(_e),Ce.push(We);else Ve.parent(_e),Ce.push(Ve);return _e},addElement:Ve=>{if(null!=Ve)if(1===Ve.nodeType)he.push(Ve);else if(Ve.length>=0)for(let We=0;We<Ve.length;We++)he.push(Ve[We]);else console.error("Invalid addElement value");return _e},update:De,fill:Ve=>(I=Ve,De(!0),_e),direction:Ve=>(D=Ve,De(!0),_e),iterations:Ve=>(w=Ve,De(!0),_e),duration:Ve=>(!_t&&0===Ve&&(Ve=1),A=Ve,De(!0),_e),easing:Ve=>(b=Ve,De(!0),_e),delay:Ve=>(M=Ve,De(!0),_e),getWebAnimations:Nt,getKeyframes:()=>d,getFill:Qe,getDirection:xt,getDelay:on,getIterations:jn,getEasing:fn,getDuration:Cn,afterAddRead:Ve=>(ge.push(Ve),_e),afterAddWrite:Ve=>(Le.push(Ve),_e),afterClearStyles:(Ve=[])=>{for(const We of Ve)S[We]="";return _e},afterStyles:(Ve={})=>(S=Ve,_e),afterRemoveClass:Ve=>(E=l(E,Ve),_e),afterAddClass:Ve=>(x=l(x,Ve),_e),beforeAddRead:Ve=>(le.push(Ve),_e),beforeAddWrite:Ve=>(V.push(Ve),_e),beforeClearStyles:(Ve=[])=>{for(const We of Ve)g[We]="";return _e},beforeStyles:(Ve={})=>(g=Ve,_e),beforeRemoveClass:Ve=>(h=l(h,Ve),_e),beforeAddClass:Ve=>(f=l(f,Ve),_e),onFinish:Ot,isRunning:()=>0!==k&&!xe,progressStart:(Ve=!1,We)=>(Ce.forEach(ft=>{ft.progressStart(Ve,We)}),B(),X=Ve,p||yr(),De(!1,!0,We),_e),progressStep:Ve=>(Ce.forEach(We=>{We.progressStep(Ve)}),Tr(Ve),_e),progressEnd:(Ve,We,ft)=>(X=!1,Ce.forEach(nt=>{nt.progressEnd(Ve,We,ft)}),void 0!==ft&&(z=ft),re=!1,H=!0,0===Ve?(G="reverse"===xt()?"normal":"reverse","reverse"===G&&(H=!1),_t?(De(),Tr(1-We)):(ee=(1-We)*Cn()*-1,De(!1,!1))):1===Ve&&(_t?(De(),Tr(We)):(ee=We*Cn()*-1,De(!1,!1))),void 0!==Ve&&!m&&Ge(),_e)}}},464:(wr,Nn,je)=>{"use strict";je.d(Nn,{E:()=>b,I:()=>K,a:()=>j,s:()=>M});const j=w=>{try{if(w instanceof K)return w.value;if(!Jt()||"string"!=typeof w||""===w)return w;if(w.includes("onload="))return"";const I=document.createDocumentFragment(),D=document.createElement("div");I.appendChild(D),D.innerHTML=w,ve.forEach(p=>{const m=I.querySelectorAll(p);for(let g=m.length-1;g>=0;g--){const x=m[g];x.parentNode?x.parentNode.removeChild(x):I.removeChild(x);const E=Et(x);for(let S=0;S<E.length;S++)F(E[S])}});const d=Et(I);for(let p=0;p<d.length;p++)F(d[p]);const f=document.createElement("div");f.appendChild(I);const h=f.querySelector("div");return null!==h?h.innerHTML:f.innerHTML}catch(I){return console.error(I),""}},F=w=>{if(w.nodeType&&1!==w.nodeType)return;if(typeof NamedNodeMap<"u"&&!(w.attributes instanceof NamedNodeMap))return void w.remove();for(let D=w.attributes.length-1;D>=0;D--){const d=w.attributes.item(D),f=d.name;if(!l.includes(f.toLowerCase())){w.removeAttribute(f);continue}const h=d.value,p=w[f];(null!=h&&h.toLowerCase().includes("javascript:")||null!=p&&p.toLowerCase().includes("javascript:"))&&w.removeAttribute(f)}const I=Et(w);for(let D=0;D<I.length;D++)F(I[D])},Et=w=>null!=w.children?w.children:w.childNodes,Jt=()=>{var w;const I=window,D=null===(w=null==I?void 0:I.Ionic)||void 0===w?void 0:w.config;return!D||(D.get?D.get("sanitizerEnabled",!0):!0===D.sanitizerEnabled||void 0===D.sanitizerEnabled)},l=["class","id","href","src","name","slot"],ve=["script","style","iframe","meta","link","object","embed"];class K{constructor(I){this.value=I}}const M=w=>{const I=window,D=I.Ionic;if(!D||!D.config||"Object"===D.config.constructor.name)return I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),w),I.Ionic.config},b=!1},3351:(wr,Nn,je)=>{"use strict";je.d(Nn,{g:()=>j});const j=(ve,K,M,A,b)=>Et(ve[1],K[1],M[1],A[1],b).map(w=>F(ve[0],K[0],M[0],A[0],w)),F=(ve,K,M,A,b)=>b*(3*K*Math.pow(b-1,2)+b*(-3*M*b+3*M+A*b))-ve*Math.pow(b-1,3),Et=(ve,K,M,A,b)=>l((A-=b)-3*(M-=b)+3*(K-=b)-(ve-=b),3*M-6*K+3*ve,3*K-3*ve,ve).filter(I=>I>=0&&I<=1),l=(ve,K,M,A)=>{if(0===ve)return((ve,K,M)=>{const A=K*K-4*ve*M;return A<0?[]:[(-K+Math.sqrt(A))/(2*ve),(-K-Math.sqrt(A))/(2*ve)]})(K,M,A);const b=(3*(M/=ve)-(K/=ve)*K)/3,w=(2*K*K*K-9*K*M+27*(A/=ve))/27;if(0===b)return[Math.pow(-w,1/3)];if(0===w)return[Math.sqrt(-b),-Math.sqrt(-b)];const I=Math.pow(w/2,2)+Math.pow(b/3,3);if(0===I)return[Math.pow(w/2,.5)-K/3];if(I>0)return[Math.pow(-w/2+Math.sqrt(I),1/3)-Math.pow(w/2+Math.sqrt(I),1/3)-K/3];const D=Math.sqrt(Math.pow(-b/3,3)),d=Math.acos(-w/(2*Math.sqrt(Math.pow(-b/3,3)))),f=2*Math.pow(D,1/3);return[f*Math.cos(d/3)-K/3,f*Math.cos((d+2*Math.PI)/3)-K/3,f*Math.cos((d+4*Math.PI)/3)-K/3]}},8621:(wr,Nn,je)=>{"use strict";je.d(Nn,{C:()=>l,a:()=>Et,d:()=>Jt});var j=je(467),F=je(4920);const Et=function(){var ve=(0,j.A)(function*(K,M,A,b,w,I){var D;if(K)return K.attachViewToDom(M,A,w,b);if(!(I||"string"==typeof A||A instanceof HTMLElement))throw new Error("framework delegate is missing");const d="string"==typeof A?null===(D=M.ownerDocument)||void 0===D?void 0:D.createElement(A):A;return b&&b.forEach(f=>d.classList.add(f)),w&&Object.assign(d,w),M.appendChild(d),yield new Promise(f=>(0,F.c)(d,f)),d});return function(M,A,b,w,I,D){return ve.apply(this,arguments)}}(),Jt=(ve,K)=>{if(K){if(ve)return ve.removeViewFromDom(K.parentElement,K);K.remove()}return Promise.resolve()},l=()=>{let ve,K;return{attachViewToDom:function(){var b=(0,j.A)(function*(w,I,D={},d=[]){var f,h;let p;if(ve=w,I){const g="string"==typeof I?null===(f=ve.ownerDocument)||void 0===f?void 0:f.createElement(I):I;d.forEach(x=>g.classList.add(x)),Object.assign(g,D),ve.appendChild(g),p=g,yield new Promise(x=>(0,F.c)(g,x))}else if(ve.children.length>0&&("ION-MODAL"===ve.tagName||"ION-POPOVER"===ve.tagName)&&!(p=ve.children[0]).classList.contains("ion-delegate-host")){const x=null===(h=ve.ownerDocument)||void 0===h?void 0:h.createElement("div");x.classList.add("ion-delegate-host"),d.forEach(E=>x.classList.add(E)),x.append(...ve.children),ve.appendChild(x),p=x}const m=document.querySelector("ion-app")||document.body;return K=document.createComment("ionic teleport"),ve.parentNode.insertBefore(K,ve),m.appendChild(ve),null!=p?p:ve});return function(I,D){return b.apply(this,arguments)}}(),removeViewFromDom:()=>(ve&&K&&(K.parentNode.insertBefore(ve,K),K.remove()),Promise.resolve())}}},1970:(wr,Nn,je)=>{"use strict";je.d(Nn,{B:()=>Jt,G:()=>l});class F{constructor(K,M,A,b,w){this.id=M,this.name=A,this.disableScroll=w,this.priority=1e6*b+M,this.ctrl=K}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const K=this.ctrl.capture(this.name,this.id,this.priority);return K&&this.disableScroll&&this.ctrl.disableScroll(this.id),K}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Et{constructor(K,M,A,b){this.id=M,this.disable=A,this.disableScroll=b,this.ctrl=K}block(){if(this.ctrl){if(this.disable)for(const K of this.disable)this.ctrl.disableGesture(K,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const K of this.disable)this.ctrl.enableGesture(K,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Jt="backdrop-no-scroll",l=new class j{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(K){var M;return new F(this,this.newID(),K.name,null!==(M=K.priority)&&void 0!==M?M:0,!!K.disableScroll)}createBlocker(K={}){return new Et(this,this.newID(),K.disable,!!K.disableScroll)}start(K,M,A){return this.canStart(K)?(this.requestedStart.set(M,A),!0):(this.requestedStart.delete(M),!1)}capture(K,M,A){if(!this.start(K,M,A))return!1;const b=this.requestedStart;let w=-1e4;if(b.forEach(I=>{w=Math.max(w,I)}),w===A){this.capturedId=M,b.clear();const I=new CustomEvent("ionGestureCaptured",{detail:{gestureName:K}});return document.dispatchEvent(I),!0}return b.delete(M),!1}release(K){this.requestedStart.delete(K),this.capturedId===K&&(this.capturedId=void 0)}disableGesture(K,M){let A=this.disabledGestures.get(K);void 0===A&&(A=new Set,this.disabledGestures.set(K,A)),A.add(M)}enableGesture(K,M){const A=this.disabledGestures.get(K);void 0!==A&&A.delete(M)}disableScroll(K){this.disabledScroll.add(K),1===this.disabledScroll.size&&document.body.classList.add(Jt)}enableScroll(K){this.disabledScroll.delete(K),0===this.disabledScroll.size&&document.body.classList.remove(Jt)}canStart(K){return!(void 0!==this.capturedId||this.isDisabled(K))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(K){const M=this.disabledGestures.get(K);return!!(M&&M.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(wr,Nn,je)=>{"use strict";je.r(Nn),je.d(Nn,{MENU_BACK_BUTTON_PRIORITY:()=>A,OVERLAY_BACK_BUTTON_PRIORITY:()=>M,blockHardwareBackButton:()=>ve,shouldUseCloseWatcher:()=>l,startHardwareBackButton:()=>K});var j=je(467),F=je(8476),Et=je(4921);je(8393);const l=()=>Et.c.get("experimentalCloseWatcher",!1)&&void 0!==F.w&&"CloseWatcher"in F.w,ve=()=>{document.addEventListener("backbutton",()=>{})},K=()=>{const b=document;let w=!1;const I=()=>{if(w)return;let D=0,d=[];const f=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(m,g){d.push({priority:m,handler:g,id:D++})}}});b.dispatchEvent(f);const h=function(){var m=(0,j.A)(function*(g){try{if(null!=g&&g.handler){const x=g.handler(p);null!=x&&(yield x)}}catch(x){console.error(x)}});return function(x){return m.apply(this,arguments)}}(),p=()=>{if(d.length>0){let m={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};d.forEach(g=>{g.priority>=m.priority&&(m=g)}),w=!0,d=d.filter(g=>g.id!==m.id),h(m).then(()=>w=!1)}};p()};if(l()){let D;const d=()=>{null==D||D.destroy(),D=new F.w.CloseWatcher,D.onclose=()=>{I(),d()}};d()}else b.addEventListener("backbutton",I)},M=100,A=99},4920:(wr,Nn,je)=>{"use strict";je.d(Nn,{a:()=>M,b:()=>A,c:()=>Et,d:()=>d,e:()=>g,f:()=>D,g:()=>b,h:()=>l,i:()=>K,j:()=>f,k:()=>Jt,l:()=>I,m:()=>h,n:()=>m,o:()=>x,p:()=>p,r:()=>w,s:()=>E,t:()=>j});const j=(S,k=0)=>new Promise(X=>{F(S,k,X)}),F=(S,k=0,X)=>{let Y,G;const z={passive:!0},H=()=>{Y&&Y()},re=Z=>{(void 0===Z||S===Z.target)&&(H(),X(Z))};return S&&(S.addEventListener("webkitTransitionEnd",re,z),S.addEventListener("transitionend",re,z),G=setTimeout(re,k+500),Y=()=>{void 0!==G&&(clearTimeout(G),G=void 0),S.removeEventListener("webkitTransitionEnd",re,z),S.removeEventListener("transitionend",re,z)}),H},Et=(S,k)=>{S.componentOnReady?S.componentOnReady().then(X=>k(X)):w(()=>k(S))},Jt=S=>void 0!==S.componentOnReady,l=(S,k=[])=>{const X={};return k.forEach(Y=>{S.hasAttribute(Y)&&(null!==S.getAttribute(Y)&&(X[Y]=S.getAttribute(Y)),S.removeAttribute(Y))}),X},ve=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],K=(S,k)=>{let X=ve;return k&&k.length>0&&(X=X.filter(Y=>!k.includes(Y))),l(S,X)},M=(S,k,X,Y)=>{var G;if(typeof window<"u"){const z=window,ee=null===(G=null==z?void 0:z.Ionic)||void 0===G?void 0:G.config;if(ee){const H=ee.get("_ael");if(H)return H(S,k,X,Y);if(ee._ael)return ee._ael(S,k,X,Y)}}return S.addEventListener(k,X,Y)},A=(S,k,X,Y)=>{var G;if(typeof window<"u"){const z=window,ee=null===(G=null==z?void 0:z.Ionic)||void 0===G?void 0:G.config;if(ee){const H=ee.get("_rel");if(H)return H(S,k,X,Y);if(ee._rel)return ee._rel(S,k,X,Y)}}return S.removeEventListener(k,X,Y)},b=(S,k=S)=>S.shadowRoot||k,w=S=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(S):"function"==typeof requestAnimationFrame?requestAnimationFrame(S):setTimeout(S),I=S=>!!S.shadowRoot&&!!S.attachShadow,D=S=>{if(S.focus(),S.classList.contains("ion-focusable")){const k=S.closest("ion-app");k&&k.setFocus([S])}},d=(S,k,X,Y,G)=>{if(S||I(k)){let z=k.querySelector("input.aux-input");z||(z=k.ownerDocument.createElement("input"),z.type="hidden",z.classList.add("aux-input"),k.appendChild(z)),z.disabled=G,z.name=X,z.value=Y||""}},f=(S,k,X)=>Math.max(S,Math.min(k,X)),h=(S,k)=>{if(!S){const X="ASSERT: "+k;throw console.error(X),new Error(X)}},p=S=>{if(S){const k=S.changedTouches;if(k&&k.length>0){const X=k[0];return{x:X.clientX,y:X.clientY}}if(void 0!==S.pageX)return{x:S.pageX,y:S.pageY}}return{x:0,y:0}},m=S=>{const k="rtl"===document.dir;switch(S){case"start":return k;case"end":return!k;default:throw new Error(`"${S}" is not a valid value for [side]. Use "start" or "end" instead.`)}},g=(S,k)=>{const X=S._original||S;return{_original:S,emit:x(X.emit.bind(X),k)}},x=(S,k=0)=>{let X;return(...Y)=>{clearTimeout(X),X=setTimeout(S,k,...Y)}},E=(S,k)=>{if(null!=S||(S={}),null!=k||(k={}),S===k)return!0;const X=Object.keys(S);if(X.length!==Object.keys(k).length)return!1;for(const Y of X)if(!(Y in k)||S[Y]!==k[Y])return!1;return!0}},8607:(wr,Nn,je)=>{"use strict";je.r(Nn),je.d(Nn,{GESTURE_CONTROLLER:()=>j.G,createGesture:()=>A});var j=je(1970);const F=(D,d,f,h)=>{const p=Et(D)?{capture:!!h.capture,passive:!!h.passive}:!!h.capture;let m,g;return D.__zone_symbol__addEventListener?(m="__zone_symbol__addEventListener",g="__zone_symbol__removeEventListener"):(m="addEventListener",g="removeEventListener"),D[m](d,f,p),()=>{D[g](d,f,p)}},Et=D=>{if(void 0===Jt)try{const d=Object.defineProperty({},"passive",{get:()=>{Jt=!0}});D.addEventListener("optsTest",()=>{},d)}catch{Jt=!1}return!!Jt};let Jt;const K=D=>D instanceof Document?D:D.ownerDocument,A=D=>{let d=!1,f=!1,h=!0,p=!1;const m=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},D),g=m.canStart,x=m.onWillStart,E=m.onStart,S=m.onEnd,k=m.notCaptured,X=m.onMove,Y=m.threshold,G=m.passive,z=m.blurOnStart,ee={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},H=((D,d,f)=>{const h=f*(Math.PI/180),p="x"===D,m=Math.cos(h),g=d*d;let x=0,E=0,S=!1,k=0;return{start(X,Y){x=X,E=Y,k=0,S=!0},detect(X,Y){if(!S)return!1;const G=X-x,z=Y-E,ee=G*G+z*z;if(ee<g)return!1;const H=Math.sqrt(ee),re=(p?G:z)/H;return k=re>m?1:re<-m?-1:0,S=!1,!0},isGesture:()=>0!==k,getDirection:()=>k}})(m.direction,m.threshold,m.maxAngle),re=j.G.createGesture({name:D.gestureName,priority:D.gesturePriority,disableScroll:D.disableScroll}),xe=()=>{d&&(p=!1,X&&X(ee))},oe=()=>!!re.capture()&&(d=!0,h=!1,ee.startX=ee.currentX,ee.startY=ee.currentY,ee.startTime=ee.currentTime,x?x(ee).then(ne):ne(),!0),ne=()=>{z&&(()=>{if(typeof document<"u"){const le=document.activeElement;null!=le&&le.blur&&le.blur()}})(),E&&E(ee),h=!0},J=()=>{d=!1,f=!1,p=!1,h=!0,re.release()},he=le=>{const V=d,ge=h;if(J(),ge){if(b(ee,le),V)return void(S&&S(ee));k&&k(ee)}},Ce=((D,d,f,h,p)=>{let m,g,x,E,S,k,X,Y=0;const G=me=>{Y=Date.now()+2e3,d(me)&&(!g&&f&&(g=F(D,"touchmove",f,p)),x||(x=F(me.target,"touchend",ee,p)),E||(E=F(me.target,"touchcancel",ee,p)))},z=me=>{Y>Date.now()||d(me)&&(!k&&f&&(k=F(K(D),"mousemove",f,p)),X||(X=F(K(D),"mouseup",H,p)))},ee=me=>{re(),h&&h(me)},H=me=>{Z(),h&&h(me)},re=()=>{g&&g(),x&&x(),E&&E(),g=x=E=void 0},Z=()=>{k&&k(),X&&X(),k=X=void 0},_e=()=>{re(),Z()},xe=(me=!0)=>{me?(m||(m=F(D,"touchstart",G,p)),S||(S=F(D,"mousedown",z,p))):(m&&m(),S&&S(),m=S=void 0,_e())};return{enable:xe,stop:_e,destroy:()=>{xe(!1),h=f=d=void 0}}})(m.el,le=>{const V=I(le);return!(f||!h||(w(le,ee),ee.startX=ee.currentX,ee.startY=ee.currentY,ee.startTime=ee.currentTime=V,ee.velocityX=ee.velocityY=ee.deltaX=ee.deltaY=0,ee.event=le,g&&!1===g(ee))||(re.release(),!re.start()))&&(f=!0,0===Y?oe():(H.start(ee.startX,ee.startY),!0))},le=>{d?!p&&h&&(p=!0,b(ee,le),requestAnimationFrame(xe)):(b(ee,le),H.detect(ee.currentX,ee.currentY)&&(!H.isGesture()||!oe())&&et())},he,{capture:!1,passive:G}),et=()=>{J(),Ce.stop(),k&&k(ee)};return{enable(le=!0){le||(d&&he(void 0),J()),Ce.enable(le)},destroy(){re.destroy(),Ce.destroy()}}},b=(D,d)=>{if(!d)return;const f=D.currentX,h=D.currentY,p=D.currentTime;w(d,D);const m=D.currentX,g=D.currentY,E=(D.currentTime=I(d))-p;if(E>0&&E<100){const k=(g-h)/E;D.velocityX=(m-f)/E*.7+.3*D.velocityX,D.velocityY=.7*k+.3*D.velocityY}D.deltaX=m-D.startX,D.deltaY=g-D.startY,D.event=d},w=(D,d)=>{let f=0,h=0;if(D){const p=D.changedTouches;if(p&&p.length>0){const m=p[0];f=m.clientX,h=m.clientY}else void 0!==D.pageX&&(f=D.pageX,h=D.pageY)}d.currentX=f,d.currentY=h},I=D=>D.timeStamp||Date.now()},6073:(wr,Nn,je)=>{"use strict";je.d(Nn,{m:()=>D});var j=je(467),F=je(8476),Et=je(8669),Jt=je(4929),l=je(4920),ve=je(4921),K=je(9986);const M=d=>(0,K.c)().duration(d?400:300),A=d=>{let f,h;const p=d.width+8,m=(0,K.c)(),g=(0,K.c)();d.isEndSide?(f=p+"px",h="0px"):(f=-p+"px",h="0px"),m.addElement(d.menuInnerEl).fromTo("transform",`translateX(${f})`,`translateX(${h})`);const E="ios"===(0,ve.b)(d),S=E?.2:.25;return g.addElement(d.backdropEl).fromTo("opacity",.01,S),M(E).addAnimation([m,g])},b=d=>{let f,h;const p=(0,ve.b)(d),m=d.width;d.isEndSide?(f=-m+"px",h=m+"px"):(f=m+"px",h=-m+"px");const g=(0,K.c)().addElement(d.menuInnerEl).fromTo("transform",`translateX(${h})`,"translateX(0px)"),x=(0,K.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${f})`),E=(0,K.c)().addElement(d.backdropEl).fromTo("opacity",.01,.32);return M("ios"===p).addAnimation([g,x,E])},w=d=>{const f=(0,ve.b)(d),h=d.width*(d.isEndSide?-1:1)+"px",p=(0,K.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${h})`);return M("ios"===f).addAnimation(p)},D=(()=>{const d=new Map,f=[],h=function(){var J=(0,j.A)(function*(he){const Ce=yield k(he,!0);return!!Ce&&Ce.open()});return function(Ce){return J.apply(this,arguments)}}(),p=function(){var J=(0,j.A)(function*(he){const Ce=yield void 0!==he?k(he,!0):X();return void 0!==Ce&&Ce.close()});return function(Ce){return J.apply(this,arguments)}}(),m=function(){var J=(0,j.A)(function*(he){const Ce=yield k(he,!0);return!!Ce&&Ce.toggle()});return function(Ce){return J.apply(this,arguments)}}(),g=function(){var J=(0,j.A)(function*(he,Ce){const et=yield k(Ce);return et&&(et.disabled=!he),et});return function(Ce,et){return J.apply(this,arguments)}}(),x=function(){var J=(0,j.A)(function*(he,Ce){const et=yield k(Ce);return et&&(et.swipeGesture=he),et});return function(Ce,et){return J.apply(this,arguments)}}(),E=function(){var J=(0,j.A)(function*(he){if(null!=he){const Ce=yield k(he);return void 0!==Ce&&Ce.isOpen()}return void 0!==(yield X())});return function(Ce){return J.apply(this,arguments)}}(),S=function(){var J=(0,j.A)(function*(he){const Ce=yield k(he);return!!Ce&&!Ce.disabled});return function(Ce){return J.apply(this,arguments)}}(),k=function(){var J=(0,j.A)(function*(he,Ce=!1){if(yield ne(),"start"===he||"end"===he){const le=f.filter(ge=>ge.side===he&&!ge.disabled);if(le.length>=1)return le.length>1&&Ce&&(0,Jt.p)(`menuController queried for a menu on the "${he}" side, but ${le.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,le.map(ge=>ge.el)),le[0].el;const V=f.filter(ge=>ge.side===he);if(V.length>=1)return V.length>1&&Ce&&(0,Jt.p)(`menuController queried for a menu on the "${he}" side, but ${V.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,V.map(ge=>ge.el)),V[0].el}else if(null!=he)return me(le=>le.menuId===he);return me(le=>!le.disabled)||(f.length>0?f[0].el:void 0)});return function(Ce){return J.apply(this,arguments)}}(),X=function(){var J=(0,j.A)(function*(){return yield ne(),_e()});return function(){return J.apply(this,arguments)}}(),Y=function(){var J=(0,j.A)(function*(){return yield ne(),xe()});return function(){return J.apply(this,arguments)}}(),G=function(){var J=(0,j.A)(function*(){return yield ne(),oe()});return function(){return J.apply(this,arguments)}}(),z=(J,he)=>{d.set(J,he)},re=function(){var J=(0,j.A)(function*(he,Ce,et){if(oe())return!1;if(Ce){const le=yield X();le&&he.el!==le&&(yield le.setOpen(!1,!1))}return he._setOpen(Ce,et)});return function(Ce,et,le){return J.apply(this,arguments)}}(),_e=()=>me(J=>J._isOpen),xe=()=>f.map(J=>J.el),oe=()=>f.some(J=>J.isAnimating),me=J=>{const he=f.find(J);if(void 0!==he)return he.el},ne=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(J=>new Promise(he=>(0,l.c)(J,he))));return z("reveal",w),z("push",b),z("overlay",A),null==F.d||F.d.addEventListener("ionBackButton",J=>{const he=_e();he&&J.detail.register(Et.MENU_BACK_BUTTON_PRIORITY,()=>he.close())}),{registerAnimation:z,get:k,getMenus:Y,getOpen:X,isEnabled:S,swipeGesture:x,isAnimating:G,isOpen:E,enable:g,toggle:m,close:p,open:h,_getOpenSync:_e,_createAnimation:(J,he)=>{const Ce=d.get(J);if(!Ce)throw new Error("animation not registered");return Ce(he)},_register:J=>{f.indexOf(J)<0&&f.push(J)},_unregister:J=>{const he=f.indexOf(J);he>-1&&f.splice(he,1)},_setOpen:re}})()},8393:(wr,Nn,je)=>{"use strict";je.d(Nn,{B:()=>ve,a:()=>Z,b:()=>Pl,c:()=>Qe,d:()=>jn,e:()=>ge,f:()=>Mn,g:()=>xt,h:()=>bn,i:()=>Cn,j:()=>us,k:()=>Ke,r:()=>A,w:()=>Le});var j=je(467);var Jt=Object.defineProperty,ve={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},K=new WeakMap,M=ot=>K.get(ot),A=(ot,Ct)=>K.set(Ct.$lazyInstance$=ot,Ct),w=(ot,Ct)=>Ct in ot,I=(ot,Ct)=>(0,console.error)(ot,Ct),D=new Map,f=new Map,h=[],E="s-id",S="sty-id",k="c-id",Y="slot-fb{display:contents}slot-fb[hidden]{display:none}",G="http://www.w3.org/1999/xlink",z=typeof window<"u"?window:{},ee=z.document||{head:{}},re={$flags$:0,$resourcesUrl$:"",jmp:ot=>ot(),raf:ot=>requestAnimationFrame(ot),ael:(ot,Ct,an,vn)=>ot.addEventListener(Ct,an,vn),rel:(ot,Ct,an,vn)=>ot.removeEventListener(Ct,an,vn),ce:(ot,Ct)=>new CustomEvent(ot,Ct)},Z=ot=>{Object.assign(re,ot)},xe=(()=>{let ot=!1;try{ee.addEventListener("e",null,Object.defineProperty({},"passive",{get(){ot=!0}}))}catch{}return ot})(),me=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ne=!1,J=[],he=[],Ce=(ot,Ct)=>an=>{ot.push(an),ne||(ne=!0,Ct&&4&re.$flags$?V(le):re.raf(le))},et=ot=>{for(let Ct=0;Ct<ot.length;Ct++)try{ot[Ct](performance.now())}catch(an){I(an)}ot.length=0},le=()=>{et(J),et(he),(ne=J.length>0)&&re.raf(le)},V=ot=>Promise.resolve(void 0).then(ot),ge=Ce(J,!1),Le=Ce(he,!0),Ke=ot=>{const Ct=new URL(ot,re.$resourcesUrl$);return Ct.origin!==z.location.origin?Ct.href:Ct.pathname},ut={},Rt=ot=>"object"==(ot=typeof ot)||"function"===ot;function Bt(ot){var Ct,an,vn;return null!=(vn=null==(an=null==(Ct=ot.head)?void 0:Ct.querySelector('meta[name="csp-nonce"]'))?void 0:an.getAttribute("content"))?vn:void 0}((ot,Ct)=>{for(var an in Ct)Jt(ot,an,{get:Ct[an],enumerable:!0})})({},{err:()=>Tt,map:()=>Ot,ok:()=>It,unwrap:()=>vt,unwrapErr:()=>Gt});var It=ot=>({isOk:!0,isErr:!1,value:ot}),Tt=ot=>({isOk:!1,isErr:!0,value:ot});function Ot(ot,Ct){if(ot.isOk){const an=Ct(ot.value);return an instanceof Promise?an.then(vn=>It(vn)):It(an)}if(ot.isErr)return Tt(ot.value);throw"should never get here"}var vt=ot=>{if(ot.isOk)return ot.value;throw ot.value},Gt=ot=>{if(ot.isErr)return ot.value;throw ot.value},bn=(ot,Ct,...an)=>{let vn=null,Rn=null,Dn=null,ir=!1,hr=!1;const vr=[],Sr=Gr=>{for(let ni=0;ni<Gr.length;ni++)vn=Gr[ni],Array.isArray(vn)?Sr(vn):null!=vn&&"boolean"!=typeof vn&&((ir="function"!=typeof ot&&!Rt(vn))&&(vn=String(vn)),ir&&hr?vr[vr.length-1].$text$+=vn:vr.push(ir?Xn(null,vn):vn),hr=ir)};if(Sr(an),Ct){Ct.key&&(Rn=Ct.key),Ct.name&&(Dn=Ct.name);{const Gr=Ct.className||Ct.class;Gr&&(Ct.class="object"!=typeof Gr?Gr:Object.keys(Gr).filter(ni=>Gr[ni]).join(" "))}}if("function"==typeof ot)return ot(null===Ct?{}:Ct,vr,Ln);const qr=Xn(ot,null);return qr.$attrs$=Ct,vr.length>0&&(qr.$children$=vr),qr.$key$=Rn,qr.$name$=Dn,qr},Xn=(ot,Ct)=>({$flags$:0,$tag$:ot,$text$:Ct,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Mn={},Ln={forEach:(ot,Ct)=>ot.map(nr).forEach(Ct),map:(ot,Ct)=>ot.map(nr).map(Ct).map(mn)},nr=ot=>({vattrs:ot.$attrs$,vchildren:ot.$children$,vkey:ot.$key$,vname:ot.$name$,vtag:ot.$tag$,vtext:ot.$text$}),mn=ot=>{if("function"==typeof ot.vtag){const an={...ot.vattrs};return ot.vkey&&(an.key=ot.vkey),ot.vname&&(an.name=ot.vname),bn(ot.vtag,an,...ot.vchildren||[])}const Ct=Xn(ot.vtag,ot.vtext);return Ct.$attrs$=ot.vattrs,Ct.$children$=ot.vchildren,Ct.$key$=ot.vkey,Ct.$name$=ot.vname,Ct},Tn=(ot,Ct,an,vn,Rn,Dn,ir)=>{let hr,vr,Sr,qr;if(1===Dn.nodeType){for(hr=Dn.getAttribute(k),hr&&(vr=hr.split("."),(vr[0]===ir||"0"===vr[0])&&(Sr={$flags$:0,$hostId$:vr[0],$nodeId$:vr[1],$depth$:vr[2],$index$:vr[3],$tag$:Dn.tagName.toLowerCase(),$elm$:Dn,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ct.push(Sr),Dn.removeAttribute(k),ot.$children$||(ot.$children$=[]),ot.$children$[Sr.$index$]=Sr,ot=Sr,vn&&"0"===Sr.$depth$&&(vn[Sr.$index$]=Sr.$elm$))),qr=Dn.childNodes.length-1;qr>=0;qr--)Tn(ot,Ct,an,vn,Rn,Dn.childNodes[qr],ir);if(Dn.shadowRoot)for(qr=Dn.shadowRoot.childNodes.length-1;qr>=0;qr--)Tn(ot,Ct,an,vn,Rn,Dn.shadowRoot.childNodes[qr],ir)}else if(8===Dn.nodeType)vr=Dn.nodeValue.split("."),(vr[1]===ir||"0"===vr[1])&&(hr=vr[0],Sr={$flags$:0,$hostId$:vr[1],$nodeId$:vr[2],$depth$:vr[3],$index$:vr[4],$elm$:Dn,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===hr?(Sr.$elm$=Dn.nextSibling,Sr.$elm$&&3===Sr.$elm$.nodeType&&(Sr.$text$=Sr.$elm$.textContent,Ct.push(Sr),Dn.remove(),ot.$children$||(ot.$children$=[]),ot.$children$[Sr.$index$]=Sr,vn&&"0"===Sr.$depth$&&(vn[Sr.$index$]=Sr.$elm$))):Sr.$hostId$===ir&&("s"===hr?(Sr.$tag$="slot",Dn["s-sn"]=vr[5]?Sr.$name$=vr[5]:"",Dn["s-sr"]=!0,vn&&(Sr.$elm$=ee.createElement(Sr.$tag$),Sr.$name$&&Sr.$elm$.setAttribute("name",Sr.$name$),Dn.parentNode.insertBefore(Sr.$elm$,Dn),Dn.remove(),"0"===Sr.$depth$&&(vn[Sr.$index$]=Sr.$elm$)),an.push(Sr),ot.$children$||(ot.$children$=[]),ot.$children$[Sr.$index$]=Sr):"r"===hr&&(vn?Dn.remove():(Rn["s-cr"]=Dn,Dn["s-cn"]=!0))));else if(ot&&"style"===ot.$tag$){const Gr=Xn(null,Dn.textContent);Gr.$elm$=Dn,Gr.$index$="0",ot.$children$=[Gr]}},ct=(ot,Ct)=>{if(1===ot.nodeType){let an=0;for(;an<ot.childNodes.length;an++)ct(ot.childNodes[an],Ct);if(ot.shadowRoot)for(an=0;an<ot.shadowRoot.childNodes.length;an++)ct(ot.shadowRoot.childNodes[an],Ct)}else if(8===ot.nodeType){const an=ot.nodeValue.split(".");"o"===an[0]&&(Ct.set(an[1]+"."+an[2],ot),ot.nodeValue="",ot["s-en"]=an[3])}},Qe=ot=>h.push(ot),xt=ot=>M(ot).$modeName$,Cn=ot=>M(ot).$hostElement$,jn=(ot,Ct,an)=>{const vn=Cn(ot);return{emit:Rn=>on(vn,Ct,{bubbles:!!(4&an),composed:!!(2&an),cancelable:!!(1&an),detail:Rn})}},on=(ot,Ct,an)=>{const vn=re.ce(Ct,an);return ot.dispatchEvent(vn),vn},xn=new WeakMap,Pn=(ot,Ct,an)=>{let vn=f.get(ot);me&&an?(vn=vn||new CSSStyleSheet,"string"==typeof vn?vn=Ct:vn.replaceSync(Ct)):vn=Ct,f.set(ot,vn)},Un=(ot,Ct,an)=>{var vn;const Rn=qt(Ct,an),Dn=f.get(Rn);if(ot=11===ot.nodeType?ot:ee,Dn)if("string"==typeof Dn){let hr,ir=xn.get(ot=ot.head||ot);if(ir||xn.set(ot,ir=new Set),!ir.has(Rn)){if(ot.host&&(hr=ot.querySelector(`[${S}="${Rn}"]`)))hr.innerHTML=Dn;else{hr=ee.createElement("style"),hr.innerHTML=Dn;const vr=null!=(vn=re.$nonce$)?vn:Bt(ee);null!=vr&&hr.setAttribute("nonce",vr),ot.insertBefore(hr,ot.querySelector("link"))}4&Ct.$flags$&&(hr.innerHTML+=Y),ir&&ir.add(Rn)}}else ot.adoptedStyleSheets.includes(Dn)||(ot.adoptedStyleSheets=[...ot.adoptedStyleSheets,Dn]);return Rn},qt=(ot,Ct)=>"sc-"+(Ct&&32&ot.$flags$?ot.$tagName$+"-"+Ct:ot.$tagName$),_n=ot=>ot.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Kt=(ot,Ct,an,vn,Rn,Dn)=>{if(an!==vn){let ir=w(ot,Ct),hr=Ct.toLowerCase();if("class"===Ct){const vr=ot.classList,Sr=Zn(an),qr=Zn(vn);vr.remove(...Sr.filter(Gr=>Gr&&!qr.includes(Gr))),vr.add(...qr.filter(Gr=>Gr&&!Sr.includes(Gr)))}else if("style"===Ct){for(const vr in an)(!vn||null==vn[vr])&&(vr.includes("-")?ot.style.removeProperty(vr):ot.style[vr]="");for(const vr in vn)(!an||vn[vr]!==an[vr])&&(vr.includes("-")?ot.style.setProperty(vr,vn[vr]):ot.style[vr]=vn[vr])}else if("key"!==Ct)if("ref"===Ct)vn&&vn(ot);else if(ir||"o"!==Ct[0]||"n"!==Ct[1]){const vr=Rt(vn);if((ir||vr&&null!==vn)&&!Rn)try{if(ot.tagName.includes("-"))ot[Ct]=vn;else{const qr=null==vn?"":vn;"list"===Ct?ir=!1:(null==an||ot[Ct]!=qr)&&(ot[Ct]=qr)}}catch{}let Sr=!1;hr!==(hr=hr.replace(/^xlink\:?/,""))&&(Ct=hr,Sr=!0),null==vn||!1===vn?(!1!==vn||""===ot.getAttribute(Ct))&&(Sr?ot.removeAttributeNS(G,Ct):ot.removeAttribute(Ct)):(!ir||4&Dn||Rn)&&!vr&&(vn=!0===vn?"":vn,Sr?ot.setAttributeNS(G,Ct,vn):ot.setAttribute(Ct,vn))}else if(Ct="-"===Ct[2]?Ct.slice(3):w(z,hr)?hr.slice(2):hr[2]+Ct.slice(3),an||vn){const vr=Ct.endsWith(Ut);Ct=Ct.replace(sn,""),an&&re.rel(ot,Ct,an,vr),vn&&re.ael(ot,Ct,vn,vr)}}},ln=/\s/,Zn=ot=>ot?ot.split(ln):[],Ut="Capture",sn=new RegExp(Ut+"$"),On=(ot,Ct,an)=>{const vn=11===Ct.$elm$.nodeType&&Ct.$elm$.host?Ct.$elm$.host:Ct.$elm$,Rn=ot&&ot.$attrs$||ut,Dn=Ct.$attrs$||ut;for(const ir of Sn(Object.keys(Rn)))ir in Dn||Kt(vn,ir,Rn[ir],void 0,an,Ct.$flags$);for(const ir of Sn(Object.keys(Dn)))Kt(vn,ir,Rn[ir],Dn[ir],an,Ct.$flags$)};function Sn(ot){return ot.includes("ref")?[...ot.filter(Ct=>"ref"!==Ct),"ref"]:ot}var zn,cr,sr,yr=!1,Tr=!1,te=!1,De=!1,Ye=(ot,Ct,an,vn)=>{var Rn;const Dn=Ct.$children$[an];let hr,vr,Sr,ir=0;if(yr||(te=!0,"slot"===Dn.$tag$&&(zn&&vn.classList.add(zn+"-s"),Dn.$flags$|=Dn.$children$?2:1)),null!==Dn.$text$)hr=Dn.$elm$=ee.createTextNode(Dn.$text$);else if(1&Dn.$flags$)hr=Dn.$elm$=ee.createTextNode("");else{if(De||(De="svg"===Dn.$tag$),hr=Dn.$elm$=ee.createElementNS(De?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!yr&&2&Dn.$flags$?"slot-fb":Dn.$tag$),De&&"foreignObject"===Dn.$tag$&&(De=!1),On(null,Dn,De),(ot=>null!=ot)(zn)&&hr["s-si"]!==zn&&hr.classList.add(hr["s-si"]=zn),Dt(hr,vn),Dn.$children$)for(ir=0;ir<Dn.$children$.length;++ir)vr=Ye(ot,Dn,ir,hr),vr&&hr.appendChild(vr);"svg"===Dn.$tag$?De=!1:"foreignObject"===hr.tagName&&(De=!0)}return hr["s-hn"]=sr,3&Dn.$flags$&&(hr["s-sr"]=!0,hr["s-cr"]=cr,hr["s-sn"]=Dn.$name$||"",hr["s-rf"]=null==(Rn=Dn.$attrs$)?void 0:Rn.ref,Sr=ot&&ot.$children$&&ot.$children$[an],Sr&&Sr.$tag$===Dn.$tag$&&ot.$elm$&&T(ot.$elm$)),hr},T=ot=>{re.$flags$|=1;const Ct=ot.closest(sr.toLowerCase());if(null!=Ct){const an=Array.from(Ct.childNodes).find(Rn=>Rn["s-cr"]),vn=Array.from(ot.childNodes);for(const Rn of an?vn.reverse():vn)null!=Rn["s-sh"]&&(ft(Ct,Rn,null!=an?an:null),Rn["s-sh"]=void 0,te=!0)}re.$flags$&=-2},N=(ot,Ct)=>{re.$flags$|=1;const an=Array.from(ot.childNodes);if(ot["s-sr"]){let vn=ot;for(;vn=vn.nextSibling;)vn&&vn["s-sn"]===ot["s-sn"]&&vn["s-sh"]===sr&&an.push(vn)}for(let vn=an.length-1;vn>=0;vn--){const Rn=an[vn];Rn["s-hn"]!==sr&&Rn["s-ol"]&&(ft(Ge(Rn),Rn,ce(Rn)),Rn["s-ol"].remove(),Rn["s-ol"]=void 0,Rn["s-sh"]=void 0,te=!0),Ct&&N(Rn,Ct)}re.$flags$&=-2},B=(ot,Ct,an,vn,Rn,Dn)=>{let hr,ir=ot["s-cr"]&&ot["s-cr"].parentNode||ot;for(ir.shadowRoot&&ir.tagName===sr&&(ir=ir.shadowRoot);Rn<=Dn;++Rn)vn[Rn]&&(hr=Ye(null,an,Rn,ot),hr&&(vn[Rn].$elm$=hr,ft(ir,hr,ce(Ct))))},O=(ot,Ct,an)=>{for(let vn=Ct;vn<=an;++vn){const Rn=ot[vn];if(Rn){const Dn=Rn.$elm$;We(Rn),Dn&&(Tr=!0,Dn["s-ol"]?Dn["s-ol"].remove():N(Dn,!0),Dn.remove())}}},q=(ot,Ct,an=!1)=>ot.$tag$===Ct.$tag$&&("slot"===ot.$tag$?ot.$name$===Ct.$name$:!!an||ot.$key$===Ct.$key$),ce=ot=>ot&&ot["s-ol"]||ot,Ge=ot=>(ot["s-ol"]?ot["s-ol"]:ot).parentNode,He=(ot,Ct,an=!1)=>{const vn=Ct.$elm$=ot.$elm$,Rn=ot.$children$,Dn=Ct.$children$,ir=Ct.$tag$,hr=Ct.$text$;let vr;null===hr?(De="svg"===ir||"foreignObject"!==ir&&De,"slot"!==ir||yr?On(ot,Ct,De):ot.$name$!==Ct.$name$&&(Ct.$elm$["s-sn"]=Ct.$name$||"",T(Ct.$elm$.parentElement)),null!==Rn&&null!==Dn?((ot,Ct,an,vn,Rn=!1)=>{let Vi,ds,Dn=0,ir=0,hr=0,vr=0,Sr=Ct.length-1,qr=Ct[0],Gr=Ct[Sr],ni=vn.length-1,oi=vn[0],Pi=vn[ni];for(;Dn<=Sr&&ir<=ni;)if(null==qr)qr=Ct[++Dn];else if(null==Gr)Gr=Ct[--Sr];else if(null==oi)oi=vn[++ir];else if(null==Pi)Pi=vn[--ni];else if(q(qr,oi,Rn))He(qr,oi,Rn),qr=Ct[++Dn],oi=vn[++ir];else if(q(Gr,Pi,Rn))He(Gr,Pi,Rn),Gr=Ct[--Sr],Pi=vn[--ni];else if(q(qr,Pi,Rn))("slot"===qr.$tag$||"slot"===Pi.$tag$)&&N(qr.$elm$.parentNode,!1),He(qr,Pi,Rn),ft(ot,qr.$elm$,Gr.$elm$.nextSibling),qr=Ct[++Dn],Pi=vn[--ni];else if(q(Gr,oi,Rn))("slot"===qr.$tag$||"slot"===Pi.$tag$)&&N(Gr.$elm$.parentNode,!1),He(Gr,oi,Rn),ft(ot,Gr.$elm$,qr.$elm$),Gr=Ct[--Sr],oi=vn[++ir];else{for(hr=-1,vr=Dn;vr<=Sr;++vr)if(Ct[vr]&&null!==Ct[vr].$key$&&Ct[vr].$key$===oi.$key$){hr=vr;break}hr>=0?(ds=Ct[hr],ds.$tag$!==oi.$tag$?Vi=Ye(Ct&&Ct[ir],an,hr,ot):(He(ds,oi,Rn),Ct[hr]=void 0,Vi=ds.$elm$),oi=vn[++ir]):(Vi=Ye(Ct&&Ct[ir],an,ir,ot),oi=vn[++ir]),Vi&&ft(Ge(qr.$elm$),Vi,ce(qr.$elm$))}Dn>Sr?B(ot,null==vn[ni+1]?null:vn[ni+1].$elm$,an,vn,ir,ni):ir>ni&&O(Ct,Dn,Sr)})(vn,Rn,Ct,Dn,an):null!==Dn?(null!==ot.$text$&&(vn.textContent=""),B(vn,null,Ct,Dn,0,Dn.length-1)):null!==Rn&&O(Rn,0,Rn.length-1),De&&"svg"===ir&&(De=!1)):(vr=vn["s-cr"])?vr.parentNode.textContent=hr:ot.$text$!==hr&&(vn.data=hr)},gt=ot=>{const Ct=ot.childNodes;for(const an of Ct)if(1===an.nodeType){if(an["s-sr"]){const vn=an["s-sn"];an.hidden=!1;for(const Rn of Ct)if(Rn!==an)if(Rn["s-hn"]!==an["s-hn"]||""!==vn){if(1===Rn.nodeType&&(vn===Rn.getAttribute("slot")||vn===Rn["s-sn"])||3===Rn.nodeType&&vn===Rn["s-sn"]){an.hidden=!0;break}}else if(1===Rn.nodeType||3===Rn.nodeType&&""!==Rn.textContent.trim()){an.hidden=!0;break}}gt(an)}},Vt=[],cn=ot=>{let Ct,an,vn;for(const Rn of ot.childNodes){if(Rn["s-sr"]&&(Ct=Rn["s-cr"])&&Ct.parentNode){an=Ct.parentNode.childNodes;const Dn=Rn["s-sn"];for(vn=an.length-1;vn>=0;vn--)if(Ct=an[vn],!(Ct["s-cn"]||Ct["s-nr"]||Ct["s-hn"]===Rn["s-hn"]||Ct["s-sh"]&&Ct["s-sh"]===Rn["s-hn"]))if(Ve(Ct,Dn)){let ir=Vt.find(hr=>hr.$nodeToRelocate$===Ct);Tr=!0,Ct["s-sn"]=Ct["s-sn"]||Dn,ir?(ir.$nodeToRelocate$["s-sh"]=Rn["s-hn"],ir.$slotRefNode$=Rn):(Ct["s-sh"]=Rn["s-hn"],Vt.push({$slotRefNode$:Rn,$nodeToRelocate$:Ct})),Ct["s-sr"]&&Vt.map(hr=>{Ve(hr.$nodeToRelocate$,Ct["s-sn"])&&(ir=Vt.find(vr=>vr.$nodeToRelocate$===Ct),ir&&!hr.$slotRefNode$&&(hr.$slotRefNode$=ir.$slotRefNode$))})}else Vt.some(ir=>ir.$nodeToRelocate$===Ct)||Vt.push({$nodeToRelocate$:Ct})}1===Rn.nodeType&&cn(Rn)}},Ve=(ot,Ct)=>1===ot.nodeType?null===ot.getAttribute("slot")&&""===Ct||ot.getAttribute("slot")===Ct:ot["s-sn"]===Ct||""===Ct,We=ot=>{ot.$attrs$&&ot.$attrs$.ref&&ot.$attrs$.ref(null),ot.$children$&&ot.$children$.map(We)},ft=(ot,Ct,an)=>{const vn=null==ot?void 0:ot.insertBefore(Ct,an);return Dt(Ct,ot),vn},nt=ot=>{const Ct=[];return ot&&Ct.push(...ot["s-scs"]||[],ot["s-si"],ot["s-sc"],...nt(ot.parentElement)),Ct},Dt=(ot,Ct,an=!1)=>{var vn;if(ot&&Ct&&1===ot.nodeType){const Rn=new Set(nt(Ct).filter(Boolean));if(Rn.size&&(null==(vn=ot.classList)||vn.add(...ot["s-scs"]=[...Rn]),ot["s-ol"]||an))for(const Dn of Array.from(ot.childNodes))Dt(Dn,ot,!0)}},Bn=(ot,Ct)=>{Ct&&!ot.$onRenderResolve$&&Ct["s-p"]&&Ct["s-p"].push(new Promise(an=>ot.$onRenderResolve$=an))},ar=(ot,Ct)=>{if(ot.$flags$|=16,!(4&ot.$flags$))return Bn(ot,ot.$ancestorComponent$),Le(()=>Pr(ot,Ct));ot.$flags$|=512},Pr=(ot,Ct)=>{const Rn=ot.$lazyInstance$;if(!Rn)throw new Error(`Can't render component <${ot.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let Dn;return Ct&&(ot.$flags$|=256,ot.$queuedListeners$&&(ot.$queuedListeners$.map(([ir,hr])=>ys(Rn,ir,hr)),ot.$queuedListeners$=void 0),Dn=ys(Rn,"componentWillLoad")),Dn=Ui(Dn,()=>ys(Rn,"componentWillRender")),Ui(Dn,()=>Us(ot,Rn,Ct))},Ui=(ot,Ct)=>ji(ot)?ot.then(Ct).catch(an=>{console.error(an),Ct()}):Ct(),ji=ot=>ot instanceof Promise||ot&&ot.then&&"function"==typeof ot.then,Us=function(){var ot=(0,j.A)(function*(Ct,an,vn){var Rn;const Dn=Ct.$hostElement$,hr=Dn["s-rc"];vn&&(ot=>{const Ct=ot.$cmpMeta$,an=ot.$hostElement$,vn=Ct.$flags$,Dn=Un(an.shadowRoot?an.shadowRoot:an.getRootNode(),Ct,ot.$modeName$);10&vn&&(an["s-sc"]=Dn,an.classList.add(Dn+"-h"),2&vn&&an.classList.add(Dn+"-s"))})(Ct);bs(Ct,an,Dn,vn),hr&&(hr.map(Sr=>Sr()),Dn["s-rc"]=void 0);{const Sr=null!=(Rn=Dn["s-p"])?Rn:[],qr=()=>wi(Ct);0===Sr.length?qr():(Promise.all(Sr).then(qr),Ct.$flags$|=4,Sr.length=0)}});return function(an,vn,Rn){return ot.apply(this,arguments)}}(),bs=(ot,Ct,an,vn)=>{try{Ct=Ct.render&&Ct.render(),ot.$flags$&=-17,ot.$flags$|=2,((ot,Ct,an=!1)=>{var vn,Rn,Dn,ir,hr;const vr=ot.$hostElement$,Sr=ot.$cmpMeta$,qr=ot.$vnode$||Xn(null,null),Gr=(ot=>ot&&ot.$tag$===Mn)(Ct)?Ct:bn(null,null,Ct);if(sr=vr.tagName,Sr.$attrsToReflect$&&(Gr.$attrs$=Gr.$attrs$||{},Sr.$attrsToReflect$.map(([ni,oi])=>Gr.$attrs$[oi]=vr[ni])),an&&Gr.$attrs$)for(const ni of Object.keys(Gr.$attrs$))vr.hasAttribute(ni)&&!["key","ref","style","class"].includes(ni)&&(Gr.$attrs$[ni]=vr[ni]);if(Gr.$tag$=null,Gr.$flags$|=4,ot.$vnode$=Gr,Gr.$elm$=qr.$elm$=vr.shadowRoot||vr,zn=vr["s-sc"],yr=!!(1&Sr.$flags$),cr=vr["s-cr"],Tr=!1,He(qr,Gr,an),re.$flags$|=1,te){cn(Gr.$elm$);for(const ni of Vt){const oi=ni.$nodeToRelocate$;if(!oi["s-ol"]){const Pi=ee.createTextNode("");Pi["s-nr"]=oi,ft(oi.parentNode,oi["s-ol"]=Pi,oi)}}for(const ni of Vt){const oi=ni.$nodeToRelocate$,Pi=ni.$slotRefNode$;if(Pi){const Vi=Pi.parentNode;let ds=Pi.nextSibling;if(ds&&1===ds.nodeType){let Li=null==(vn=oi["s-ol"])?void 0:vn.previousSibling;for(;Li;){let Ys=null!=(Rn=Li["s-nr"])?Rn:null;if(Ys&&Ys["s-sn"]===oi["s-sn"]&&Vi===Ys.parentNode){for(Ys=Ys.nextSibling;Ys===oi||null!=Ys&&Ys["s-sr"];)Ys=null==Ys?void 0:Ys.nextSibling;if(!Ys||!Ys["s-nr"]){ds=Ys;break}}Li=Li.previousSibling}}(!ds&&Vi!==oi.parentNode||oi.nextSibling!==ds)&&oi!==ds&&(ft(Vi,oi,ds),1===oi.nodeType&&(oi.hidden=null!=(Dn=oi["s-ih"])&&Dn)),oi&&"function"==typeof Pi["s-rf"]&&Pi["s-rf"](oi)}else 1===oi.nodeType&&(an&&(oi["s-ih"]=null!=(ir=oi.hidden)&&ir),oi.hidden=!0)}}if(Tr&&gt(Gr.$elm$),re.$flags$&=-2,Vt.length=0,2&Sr.$flags$)for(const ni of Gr.$elm$.childNodes)ni["s-hn"]!==sr&&!ni["s-sh"]&&(an&&null==ni["s-ih"]&&(ni["s-ih"]=null!=(hr=ni.hidden)&&hr),ni.hidden=!0);cr=void 0})(ot,Ct,vn)}catch(Rn){I(Rn,ot.$hostElement$)}return null},wi=ot=>{const an=ot.$hostElement$,Rn=ot.$lazyInstance$,Dn=ot.$ancestorComponent$;ys(Rn,"componentDidRender"),64&ot.$flags$?ys(Rn,"componentDidUpdate"):(ot.$flags$|=64,Vs(an),ys(Rn,"componentDidLoad"),ot.$onReadyResolve$(an),Dn||$s()),ot.$onInstanceResolve$(an),ot.$onRenderResolve$&&(ot.$onRenderResolve$(),ot.$onRenderResolve$=void 0),512&ot.$flags$&&V(()=>ar(ot,!1)),ot.$flags$&=-517},us=ot=>{{const Ct=M(ot),an=Ct.$hostElement$.isConnected;return an&&2==(18&Ct.$flags$)&&ar(Ct,!1),an}},$s=ot=>{Vs(ee.documentElement),V(()=>on(z,"appload",{detail:{namespace:"ionic"}}))},ys=(ot,Ct,an)=>{if(ot&&ot[Ct])try{return ot[Ct](an)}catch(vn){I(vn)}},Vs=ot=>ot.classList.add(("hydrated","hydrated")),Vo=(ot,Ct,an)=>{var vn,Rn;const Dn=ot.prototype;if(Ct.$members$||Ct.$watchers$||ot.watchers){ot.watchers&&!Ct.$watchers$&&(Ct.$watchers$=ot.watchers);const ir=Object.entries(null!=(vn=Ct.$members$)?vn:{});if(ir.map(([hr,[vr]])=>{31&vr||2&an&&32&vr?Object.defineProperty(Dn,hr,{get(){return((ot,Ct)=>M(this).$instanceValues$.get(Ct))(0,hr)},set(Sr){((ot,Ct,an,vn)=>{const Rn=M(ot);if(!Rn)throw new Error(`Couldn't find host element for "${vn.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Dn=Rn.$hostElement$,ir=Rn.$instanceValues$.get(Ct),hr=Rn.$flags$,vr=Rn.$lazyInstance$;an=((ot,Ct)=>null==ot||Rt(ot)?ot:4&Ct?"false"!==ot&&(""===ot||!!ot):2&Ct?parseFloat(ot):1&Ct?String(ot):ot)(an,vn.$members$[Ct][0]);const Sr=Number.isNaN(ir)&&Number.isNaN(an);if((!(8&hr)||void 0===ir)&&an!==ir&&!Sr&&(Rn.$instanceValues$.set(Ct,an),vr)){if(vn.$watchers$&&128&hr){const Gr=vn.$watchers$[Ct];Gr&&Gr.map(ni=>{try{vr[ni](an,ir,Ct)}catch(oi){I(oi,Dn)}})}2==(18&hr)&&ar(Rn,!1)}})(this,hr,Sr,Ct)},configurable:!0,enumerable:!0}):1&an&&64&vr&&Object.defineProperty(Dn,hr,{value(...Sr){var qr;const Gr=M(this);return null==(qr=null==Gr?void 0:Gr.$onInstancePromise$)?void 0:qr.then(()=>{var ni;return null==(ni=Gr.$lazyInstance$)?void 0:ni[hr](...Sr)})}})}),1&an){const hr=new Map;Dn.attributeChangedCallback=function(vr,Sr,qr){re.jmp(()=>{var Gr;const ni=hr.get(vr);if(this.hasOwnProperty(ni))qr=this[ni],delete this[ni];else{if(Dn.hasOwnProperty(ni)&&"number"==typeof this[ni]&&this[ni]==qr)return;if(null==ni){const oi=M(this),Pi=null==oi?void 0:oi.$flags$;if(Pi&&!(8&Pi)&&128&Pi&&qr!==Sr){const Vi=oi.$lazyInstance$,ds=null==(Gr=Ct.$watchers$)?void 0:Gr[vr];null==ds||ds.forEach(Li=>{null!=Vi[Li]&&Vi[Li].call(Vi,qr,Sr,vr)})}return}}this[ni]=(null!==qr||"boolean"!=typeof this[ni])&&qr})},ot.observedAttributes=Array.from(new Set([...Object.keys(null!=(Rn=Ct.$watchers$)?Rn:{}),...ir.filter(([vr,Sr])=>15&Sr[0]).map(([vr,Sr])=>{var qr;const Gr=Sr[1]||vr;return hr.set(Gr,vr),512&Sr[0]&&(null==(qr=Ct.$attrsToReflect$)||qr.push([vr,Gr])),Gr})]))}}return ot},ea=function(){var ot=(0,j.A)(function*(Ct,an,vn,Rn){let Dn;if(!(32&an.$flags$)){if(an.$flags$|=32,vn.$lazyBundleId$){const Sr=((ot,Ct,an)=>{const vn=ot.$tagName$.replace(/-/g,"_"),Rn=ot.$lazyBundleId$;if(!Rn)return;const Dn=D.get(Rn);return Dn?Dn[vn]:je(8996)(`./${Rn}.entry.js`).then(ir=>(D.set(Rn,ir),ir[vn]),I)})(vn);if(Sr&&"then"in Sr){const Gr=()=>{};Dn=yield Sr,Gr()}else Dn=Sr;if(!Dn)throw new Error(`Constructor for "${vn.$tagName$}#${an.$modeName$}" was not found`);Dn.isProxied||(vn.$watchers$=Dn.watchers,Vo(Dn,vn,2),Dn.isProxied=!0);const qr=()=>{};an.$flags$|=8;try{new Dn(an)}catch(Gr){I(Gr)}an.$flags$&=-9,an.$flags$|=128,qr(),ta(an.$lazyInstance$)}else Dn=Ct.constructor,customElements.whenDefined(Ct.localName).then(()=>an.$flags$|=128);if(Dn&&Dn.style){let Sr;"string"==typeof Dn.style?Sr=Dn.style:"string"!=typeof Dn.style&&(an.$modeName$=(ot=>h.map(Ct=>Ct(ot)).find(Ct=>!!Ct))(Ct),an.$modeName$&&(Sr=Dn.style[an.$modeName$]));const qr=qt(vn,an.$modeName$);if(!f.has(qr)){const Gr=()=>{};Pn(qr,Sr,!!(1&vn.$flags$)),Gr()}}}const ir=an.$ancestorComponent$,hr=()=>ar(an,!0);ir&&ir["s-rc"]?ir["s-rc"].push(hr):hr()});return function(an,vn,Rn,Dn){return ot.apply(this,arguments)}}(),ta=ot=>{ys(ot,"connectedCallback")},eo=ot=>{const Ct=ot["s-cr"]=ee.createComment("");Ct["s-cn"]=!0,ft(ot,Ct,ot.firstChild)},ca=ot=>{ys(ot,"disconnectedCallback")},_o=function(){var ot=(0,j.A)(function*(Ct){if(!(1&re.$flags$)){const an=M(Ct);an.$rmListeners$&&(an.$rmListeners$.map(vn=>vn()),an.$rmListeners$=void 0),null!=an&&an.$lazyInstance$?ca(an.$lazyInstance$):null!=an&&an.$onReadyPromise$&&an.$onReadyPromise$.then(()=>ca(an.$lazyInstance$))}});return function(an){return ot.apply(this,arguments)}}(),Wa=ot=>{const Ct=ot.cloneNode;ot.cloneNode=function(an){const vn=this,Rn=vn.shadowRoot&&true,Dn=Ct.call(vn,!!Rn&&an);if(!Rn&&an){let hr,vr,ir=0;const Sr=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;ir<vn.childNodes.length;ir++)hr=vn.childNodes[ir]["s-nr"],vr=Sr.every(qr=>!vn.childNodes[ir][qr]),hr&&(Dn.__appendChild?Dn.__appendChild(hr.cloneNode(!0)):Dn.appendChild(hr.cloneNode(!0))),vr&&Dn.appendChild(vn.childNodes[ir].cloneNode(!0))}return Dn}},ke=ot=>{ot.__appendChild=ot.appendChild,ot.appendChild=function(Ct){const an=Ct["s-sn"]=ba(Ct),vn=ll(this.childNodes,an,this.tagName);if(vn){const Rn=Rl(vn,an),Dn=Rn[Rn.length-1],ir=ft(Dn.parentNode,Ct,Dn.nextSibling);return gt(this),ir}return this.__appendChild(Ct)}},ht=ot=>{ot.__removeChild=ot.removeChild,ot.removeChild=function(Ct){if(Ct&&typeof Ct["s-sn"]<"u"){const an=ll(this.childNodes,Ct["s-sn"],this.tagName);if(an){const Rn=Rl(an,Ct["s-sn"]).find(Dn=>Dn===Ct);if(Rn)return Rn.remove(),void gt(this)}}return this.__removeChild(Ct)}},kt=ot=>{const Ct=ot.prepend;ot.prepend=function(...an){an.forEach(vn=>{"string"==typeof vn&&(vn=this.ownerDocument.createTextNode(vn));const Rn=vn["s-sn"]=ba(vn),Dn=ll(this.childNodes,Rn,this.tagName);if(Dn){const ir=document.createTextNode("");ir["s-nr"]=vn,Dn["s-cr"].parentNode.__appendChild(ir),vn["s-ol"]=ir;const vr=Rl(Dn,Rn)[0];return ft(vr.parentNode,vn,vr.nextSibling)}return 1===vn.nodeType&&vn.getAttribute("slot")&&(vn.hidden=!0),Ct.call(this,vn)})}},Be=ot=>{ot.append=function(...Ct){Ct.forEach(an=>{"string"==typeof an&&(an=this.ownerDocument.createTextNode(an)),this.appendChild(an)})}},zt=ot=>{const Ct=ot.insertAdjacentHTML;ot.insertAdjacentHTML=function(an,vn){if("afterbegin"!==an&&"beforeend"!==an)return Ct.call(this,an,vn);const Rn=this.ownerDocument.createElement("_");let Dn;if(Rn.innerHTML=vn,"afterbegin"===an)for(;Dn=Rn.firstChild;)this.prepend(Dn);else if("beforeend"===an)for(;Dn=Rn.firstChild;)this.append(Dn)}},In=ot=>{ot.insertAdjacentText=function(Ct,an){this.insertAdjacentHTML(Ct,an)}},ts=ot=>{const Ct=ot.insertAdjacentElement;ot.insertAdjacentElement=function(an,vn){return"afterbegin"!==an&&"beforeend"!==an?Ct.call(this,an,vn):"afterbegin"===an?(this.prepend(vn),vn):("beforeend"===an&&this.append(vn),vn)}},Gs=ot=>{const Ct=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(ot,"__textContent",Ct),Object.defineProperty(ot,"textContent",{get(){return" "+Ca(this.childNodes).map(Rn=>{var Dn,ir;const hr=[];let vr=Rn.nextSibling;for(;vr&&vr["s-sn"]===Rn["s-sn"];)(3===vr.nodeType||1===vr.nodeType)&&hr.push(null!=(ir=null==(Dn=vr.textContent)?void 0:Dn.trim())?ir:""),vr=vr.nextSibling;return hr.filter(Sr=>""!==Sr).join(" ")}).filter(Rn=>""!==Rn).join(" ")+" "},set(an){Ca(this.childNodes).forEach(Rn=>{let Dn=Rn.nextSibling;for(;Dn&&Dn["s-sn"]===Rn["s-sn"];){const ir=Dn;Dn=Dn.nextSibling,ir.remove()}if(""===Rn["s-sn"]){const ir=this.ownerDocument.createTextNode(an);ir["s-sn"]="",ft(Rn.parentElement,ir,Rn.nextSibling)}else Rn.remove()})}})},Go=(ot,Ct)=>{class an extends Array{item(Rn){return this[Rn]}}if(8&Ct.$flags$){const vn=ot.__lookupGetter__("childNodes");Object.defineProperty(ot,"children",{get(){return this.childNodes.map(Rn=>1===Rn.nodeType)}}),Object.defineProperty(ot,"childElementCount",{get:()=>ot.children.length}),Object.defineProperty(ot,"childNodes",{get(){const Rn=vn.call(this);if(!(1&re.$flags$)&&2&M(this).$flags$){const Dn=new an;for(let ir=0;ir<Rn.length;ir++){const hr=Rn[ir]["s-nr"];hr&&Dn.push(hr)}return Dn}return an.from(Rn)}})}},Ca=ot=>{const Ct=[];for(const an of Array.from(ot))an["s-sr"]&&Ct.push(an),Ct.push(...Ca(an.childNodes));return Ct},ba=ot=>ot["s-sn"]||1===ot.nodeType&&ot.getAttribute("slot")||"",ll=(ot,Ct,an)=>{let Rn,vn=0;for(;vn<ot.length;vn++)if(Rn=ot[vn],Rn["s-sr"]&&Rn["s-sn"]===Ct&&Rn["s-hn"]===an||(Rn=ll(Rn.childNodes,Ct,an),Rn))return Rn;return null},Rl=(ot,Ct)=>{const an=[ot];for(;(ot=ot.nextSibling)&&ot["s-sn"]===Ct;)an.push(ot);return an},Pl=(ot,Ct={})=>{var an;const Rn=[],Dn=Ct.exclude||[],ir=z.customElements,hr=ee.head,vr=hr.querySelector("meta[charset]"),Sr=ee.createElement("style"),qr=[],Gr=ee.querySelectorAll(`[${S}]`);let ni,oi=!0,Pi=0;for(Object.assign(re,Ct),re.$resourcesUrl$=new URL(Ct.resourcesUrl||"./",ee.baseURI).href,re.$flags$|=2;Pi<Gr.length;Pi++)Pn(Gr[Pi].getAttribute(S),_n(Gr[Pi].innerHTML),!0);let Vi=!1;if(ot.map(ds=>{ds[1].map(Li=>{var Ys;const Or={$flags$:Li[0],$tagName$:Li[1],$members$:Li[2],$listeners$:Li[3]};4&Or.$flags$&&(Vi=!0),Or.$members$=Li[2],Or.$listeners$=Li[3],Or.$attrsToReflect$=[],Or.$watchers$=null!=(Ys=Li[4])?Ys:{};const na=Or.$tagName$,Aa=class extends HTMLElement{constructor(Hs){if(super(Hs),this.hasRegisteredEventListeners=!1,((ot,Ct)=>{const an={$flags$:0,$hostElement$:ot,$cmpMeta$:Ct,$instanceValues$:new Map};an.$onInstancePromise$=new Promise(vn=>an.$onInstanceResolve$=vn),an.$onReadyPromise$=new Promise(vn=>an.$onReadyResolve$=vn),ot["s-p"]=[],ot["s-rc"]=[],K.set(ot,an)})(Hs=this,Or),1&Or.$flags$)if(Hs.shadowRoot){if("open"!==Hs.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Or.$tagName$}! Mode is set to ${Hs.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else Hs.attachShadow({mode:"open",delegatesFocus:!!(16&Or.$flags$)})}connectedCallback(){const Hs=M(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,Ol(this,Hs,Or.$listeners$)),ni&&(clearTimeout(ni),ni=null),oi?qr.push(this):re.jmp(()=>(ot=>{if(!(1&re.$flags$)){const Ct=M(ot),an=Ct.$cmpMeta$,vn=()=>{};if(1&Ct.$flags$)Ol(ot,Ct,an.$listeners$),null!=Ct&&Ct.$lazyInstance$?ta(Ct.$lazyInstance$):null!=Ct&&Ct.$onReadyPromise$&&Ct.$onReadyPromise$.then(()=>ta(Ct.$lazyInstance$));else{let Rn;if(Ct.$flags$|=1,Rn=ot.getAttribute(E),Rn){if(1&an.$flags$){const Dn=Un(ot.shadowRoot,an,ot.getAttribute("s-mode"));ot.classList.remove(Dn+"-h",Dn+"-s")}((ot,Ct,an,vn)=>{const Dn=ot.shadowRoot,ir=[],vr=Dn?[]:null,Sr=vn.$vnode$=Xn(Ct,null);re.$orgLocNodes$||ct(ee.body,re.$orgLocNodes$=new Map),ot[E]=an,ot.removeAttribute(E),Tn(Sr,ir,[],vr,ot,ot,an),ir.map(qr=>{const Gr=qr.$hostId$+"."+qr.$nodeId$,ni=re.$orgLocNodes$.get(Gr),oi=qr.$elm$;ni&&""===ni["s-en"]&&ni.parentNode.insertBefore(oi,ni.nextSibling),Dn||(oi["s-hn"]=Ct,ni&&(oi["s-ol"]=ni,oi["s-ol"]["s-nr"]=oi)),re.$orgLocNodes$.delete(Gr)}),Dn&&vr.map(qr=>{qr&&Dn.appendChild(qr)})})(ot,an.$tagName$,Rn,Ct)}Rn||12&an.$flags$&&eo(ot);{let Dn=ot;for(;Dn=Dn.parentNode||Dn.host;)if(1===Dn.nodeType&&Dn.hasAttribute("s-id")&&Dn["s-p"]||Dn["s-p"]){Bn(Ct,Ct.$ancestorComponent$=Dn);break}}an.$members$&&Object.entries(an.$members$).map(([Dn,[ir]])=>{if(31&ir&&ot.hasOwnProperty(Dn)){const hr=ot[Dn];delete ot[Dn],ot[Dn]=hr}}),ea(ot,Ct,an)}vn()}})(this))}disconnectedCallback(){re.jmp(()=>_o(this))}componentOnReady(){return M(this).$onReadyPromise$}};2&Or.$flags$&&((ot,Ct)=>{Wa(ot),ke(ot),Be(ot),kt(ot),ts(ot),zt(ot),In(ot),Gs(ot),Go(ot,Ct),ht(ot)})(Aa.prototype,Or),Or.$lazyBundleId$=ds[0],!Dn.includes(na)&&!ir.get(na)&&(Rn.push(na),ir.define(na,Vo(Aa,Or,1)))})}),Rn.length>0&&(Vi&&(Sr.textContent+=Y),Sr.textContent+=Rn.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Sr.innerHTML.length)){Sr.setAttribute("data-styles","");const ds=null!=(an=re.$nonce$)?an:Bt(ee);null!=ds&&Sr.setAttribute("nonce",ds),hr.insertBefore(Sr,vr?vr.nextSibling:hr.firstChild)}oi=!1,qr.length?qr.map(ds=>ds.connectedCallback()):re.jmp(()=>ni=setTimeout($s,30))},Ol=(ot,Ct,an,vn)=>{an&&an.map(([Rn,Dn,ir])=>{const hr=ko(ot,Rn),vr=Io(Ct,ir),Sr=ao(Rn);re.ael(hr,Dn,vr,Sr),(Ct.$rmListeners$=Ct.$rmListeners$||[]).push(()=>re.rel(hr,Dn,vr,Sr))})},Io=(ot,Ct)=>an=>{var vn;try{256&ot.$flags$?null==(vn=ot.$lazyInstance$)||vn[Ct](an):(ot.$queuedListeners$=ot.$queuedListeners$||[]).push([Ct,an])}catch(Rn){I(Rn)}},ko=(ot,Ct)=>4&Ct?ee:8&Ct?z:16&Ct?ee.body:ot,ao=ot=>xe?{passive:!!(1&ot),capture:!!(2&ot)}:!!(2&ot)},1331:(wr,Nn,je)=>{"use strict";je.d(Nn,{b:()=>M,c:()=>A,d:()=>b,e:()=>_e,g:()=>me,l:()=>re,s:()=>xe,t:()=>m,w:()=>Z});var j=je(467),F=je(4921),Et=je(8393),Jt=je(4929),l=je(4920);const M="ionViewWillLeave",A="ionViewDidLeave",b="ionViewWillUnload",w=ne=>{ne.tabIndex=-1,ne.focus()},I=ne=>null!==ne.offsetParent,d="ion-last-focus",p_saveViewFocus=he=>{if(F.c.get("focusManagerPriority",!1)){const et=document.activeElement;null!==et&&null!=he&&he.contains(et)&&et.setAttribute(d,"true")}},p_setViewFocus=he=>{const Ce=F.c.get("focusManagerPriority",!1);if(Array.isArray(Ce)&&!he.contains(document.activeElement)){const et=he.querySelector(`[${d}]`);if(et&&I(et))return void w(et);for(const le of Ce)switch(le){case"content":const V=he.querySelector('main, [role="main"]');if(V&&I(V))return void w(V);break;case"heading":const ge=he.querySelector('h1, [role="heading"][aria-level="1"]');if(ge&&I(ge))return void w(ge);break;case"banner":const Le=he.querySelector('header, [role="banner"]');if(Le&&I(Le))return void w(Le);break;default:(0,Jt.p)(`Unrecognized focus manager priority value ${le}`)}w(he)}},m=ne=>new Promise((J,he)=>{(0,Et.w)(()=>{g(ne),x(ne).then(Ce=>{Ce.animation&&Ce.animation.destroy(),E(ne),J(Ce)},Ce=>{E(ne),he(Ce)})})}),g=ne=>{const J=ne.enteringEl,he=ne.leavingEl;p_saveViewFocus(he),oe(J,he,ne.direction),ne.showGoBack?J.classList.add("can-go-back"):J.classList.remove("can-go-back"),xe(J,!1),J.style.setProperty("pointer-events","none"),he&&(xe(he,!1),he.style.setProperty("pointer-events","none"))},x=function(){var ne=(0,j.A)(function*(J){const he=yield S(J);return he&&Et.B.isBrowser?k(he,J):X(J)});return function(he){return ne.apply(this,arguments)}}(),E=ne=>{const J=ne.enteringEl,he=ne.leavingEl;J.classList.remove("ion-page-invisible"),J.style.removeProperty("pointer-events"),void 0!==he&&(he.classList.remove("ion-page-invisible"),he.style.removeProperty("pointer-events")),p_setViewFocus(J)},S=function(){var ne=(0,j.A)(function*(J){return J.leavingEl&&J.animated&&0!==J.duration?J.animationBuilder?J.animationBuilder:"ios"===J.mode?(yield Promise.resolve().then(je.bind(je,9856))).iosTransitionAnimation:(yield Promise.resolve().then(je.bind(je,361))).mdTransitionAnimation:void 0});return function(he){return ne.apply(this,arguments)}}(),k=function(){var ne=(0,j.A)(function*(J,he){yield Y(he,!0);const Ce=J(he.baseEl,he);ee(he.enteringEl,he.leavingEl);const et=yield z(Ce,he);return he.progressCallback&&he.progressCallback(void 0),et&&H(he.enteringEl,he.leavingEl),{hasCompleted:et,animation:Ce}});return function(he,Ce){return ne.apply(this,arguments)}}(),X=function(){var ne=(0,j.A)(function*(J){const he=J.enteringEl,Ce=J.leavingEl,et=F.c.get("focusManagerPriority",!1);return yield Y(J,et),ee(he,Ce),H(he,Ce),{hasCompleted:!0}});return function(he){return ne.apply(this,arguments)}}(),Y=function(){var ne=(0,j.A)(function*(J,he){(void 0!==J.deepWait?J.deepWait:he)&&(yield Promise.all([_e(J.enteringEl),_e(J.leavingEl)])),yield G(J.viewIsReady,J.enteringEl)});return function(he,Ce){return ne.apply(this,arguments)}}(),G=function(){var ne=(0,j.A)(function*(J,he){J&&(yield J(he))});return function(he,Ce){return ne.apply(this,arguments)}}(),z=(ne,J)=>{const he=J.progressCallback,Ce=new Promise(et=>{ne.onFinish(le=>et(1===le))});return he?(ne.progressStart(!0),he(ne)):ne.play(),Ce},ee=(ne,J)=>{re(J,M),re(ne,"ionViewWillEnter")},H=(ne,J)=>{re(ne,"ionViewDidEnter"),re(J,A)},re=(ne,J)=>{if(ne){const he=new CustomEvent(J,{bubbles:!1,cancelable:!1});ne.dispatchEvent(he)}},Z=()=>new Promise(ne=>(0,l.r)(()=>(0,l.r)(()=>ne()))),_e=function(){var ne=(0,j.A)(function*(J){const he=J;if(he){if(null!=he.componentOnReady){if(null!=(yield he.componentOnReady()))return}else if(null!=he.__registerHost)return void(yield new Promise(et=>(0,l.r)(et)));yield Promise.all(Array.from(he.children).map(_e))}});return function(he){return ne.apply(this,arguments)}}(),xe=(ne,J)=>{J?(ne.setAttribute("aria-hidden","true"),ne.classList.add("ion-page-hidden")):(ne.hidden=!1,ne.removeAttribute("aria-hidden"),ne.classList.remove("ion-page-hidden"))},oe=(ne,J,he)=>{void 0!==ne&&(ne.style.zIndex="back"===he?"99":"101"),void 0!==J&&(J.style.zIndex="100")},me=ne=>ne.classList.contains("ion-page")?ne:ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ne},4929:(wr,Nn,je)=>{"use strict";je.d(Nn,{a:()=>F,b:()=>Et,p:()=>j});const j=(Jt,...l)=>console.warn(`[Ionic Warning]: ${Jt}`,...l),F=(Jt,...l)=>console.error(`[Ionic Error]: ${Jt}`,...l),Et=(Jt,...l)=>console.error(`<${Jt.tagName.toLowerCase()}> must be used inside ${l.join(" or ")}.`)},8476:(wr,Nn,je)=>{"use strict";je.d(Nn,{d:()=>F,w:()=>j});const j=typeof window<"u"?window:void 0,F=typeof document<"u"?document:void 0},617:(wr,Nn,je)=>{"use strict";je.d(Nn,{FJ:()=>b.l,JI:()=>j.c,NC:()=>Et.iosTransitionAnimation,OZ:()=>b.m,QX:()=>M.s,TN:()=>b.a,V5:()=>Jt.mdTransitionAnimation,Vk:()=>M.I,mF:()=>b.c,sE:()=>l.g});var j=je(9986),Et=(je(1331),je(9856)),Jt=je(361),l=je(3351),M=(je(8607),je(4921),je(464)),b=(je(6073),je(1070));je(8476),je(8393),je(1970),je(8669)},4921:(wr,Nn,je)=>{"use strict";je.d(Nn,{a:()=>w,b:()=>xe,c:()=>Et,i:()=>oe});var j=je(8393);class F{constructor(){this.m=new Map}reset(ne){this.m=new Map(Object.entries(ne))}get(ne,J){const he=this.m.get(ne);return void 0!==he?he:J}getBoolean(ne,J=!1){const he=this.m.get(ne);return void 0===he?J:"string"==typeof he?"true"===he:!!he}getNumber(ne,J){const he=parseFloat(this.m.get(ne));return isNaN(he)?void 0!==J?J:NaN:he}set(ne,J){this.m.set(ne,J)}}const Et=new F,M="ionic:",A="ionic-persist-config",w=(me,ne)=>("string"==typeof me&&(ne=me,me=void 0),(me=>I(me))(me).includes(ne)),I=(me=window)=>{if(typeof me>"u")return[];me.Ionic=me.Ionic||{};let ne=me.Ionic.platforms;return null==ne&&(ne=me.Ionic.platforms=D(me),ne.forEach(J=>me.document.documentElement.classList.add(`plt-${J}`))),ne},D=me=>{const ne=Et.get("platform");return Object.keys(Z).filter(J=>{const he=null==ne?void 0:ne[J];return"function"==typeof he?he(me):Z[J](me)})},f=me=>!!(H(me,/iPad/i)||H(me,/Macintosh/i)&&S(me)),m=me=>H(me,/android|sink/i),S=me=>re(me,"(any-pointer:coarse)"),X=me=>Y(me)||G(me),Y=me=>!!(me.cordova||me.phonegap||me.PhoneGap),G=me=>{const ne=me.Capacitor;return!(null==ne||!ne.isNative)},H=(me,ne)=>ne.test(me.navigator.userAgent),re=(me,ne)=>{var J;return null===(J=me.matchMedia)||void 0===J?void 0:J.call(me,ne).matches},Z={ipad:f,iphone:me=>H(me,/iPhone/i),ios:me=>H(me,/iPhone|iPod/i)||f(me),android:m,phablet:me=>{const ne=me.innerWidth,J=me.innerHeight,he=Math.min(ne,J),Ce=Math.max(ne,J);return he>390&&he<520&&Ce>620&&Ce<800},tablet:me=>{const ne=me.innerWidth,J=me.innerHeight,he=Math.min(ne,J),Ce=Math.max(ne,J);return f(me)||(me=>m(me)&&!H(me,/mobile/i))(me)||he>460&&he<820&&Ce>780&&Ce<1400},cordova:Y,capacitor:G,electron:me=>H(me,/electron/i),pwa:me=>{var ne;return!!(null!==(ne=me.matchMedia)&&void 0!==ne&&ne.call(me,"(display-mode: standalone)").matches||me.navigator.standalone)},mobile:S,mobileweb:me=>S(me)&&!X(me),desktop:me=>!S(me),hybrid:X};let _e;const xe=me=>me&&(0,j.g)(me)||_e,oe=(me={})=>{if(typeof window>"u")return;const ne=window.document,J=window,he=J.Ionic=J.Ionic||{},Ce={};me._ael&&(Ce.ael=me._ael),me._rel&&(Ce.rel=me._rel),me._ce&&(Ce.ce=me._ce),(0,j.a)(Ce);const et=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(me=>{try{const ne=me.sessionStorage.getItem(A);return null!==ne?JSON.parse(ne):{}}catch{return{}}})(J)),{persistConfig:!1}),he.config),(me=>{const ne={};return me.location.search.slice(1).split("&").map(J=>J.split("=")).map(([J,he])=>{try{return[decodeURIComponent(J),decodeURIComponent(he)]}catch{return["",""]}}).filter(([J])=>((me,ne)=>me.substr(0,ne.length)===ne)(J,M)).map(([J,he])=>[J.slice(6),he]).forEach(([J,he])=>{ne[J]=he}),ne})(J)),me);Et.reset(et),Et.getBoolean("persistConfig")&&((me,ne)=>{try{me.sessionStorage.setItem(A,JSON.stringify(ne))}catch{return}})(J,et),I(J),he.config=Et,he.mode=_e=Et.get("mode",ne.documentElement.getAttribute("mode")||(w(J,"ios")?"ios":"md")),Et.set("mode",_e),ne.documentElement.setAttribute("mode",_e),ne.documentElement.classList.add(_e),Et.getBoolean("_testing")&&Et.set("animated",!1);const le=ge=>{var Le;return null===(Le=ge.tagName)||void 0===Le?void 0:Le.startsWith("ION-")},V=ge=>["ios","md"].includes(ge);(0,j.c)(ge=>{for(;ge;){const Le=ge.mode||ge.getAttribute("mode");if(Le){if(V(Le))return Le;le(ge)&&console.warn('Invalid ionic mode: "'+Le+'", expected: "ios" or "md"')}ge=ge.parentElement}return _e})}},9856:(wr,Nn,je)=>{"use strict";je.r(Nn),je.d(Nn,{iosTransitionAnimation:()=>d,shadow:()=>M});var j=je(9986),F=je(1331);je(8476),je(4921),je(8393);const K=h=>document.querySelector(`${h}.ion-cloned-element`),M=h=>h.shadowRoot||h,A=h=>{const p="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs"),m="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=p){const g=p.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=g?g.querySelector(m):null}return h.querySelector(m)},b=(h,p)=>{const m="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs");let g=[];if(null!=m){const x=m.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=x&&(g=x.querySelectorAll("ion-buttons"))}else g=h.querySelectorAll("ion-buttons");for(const x of g){const E=x.closest("ion-header"),S=E&&!E.classList.contains("header-collapse-condense-inactive"),k=x.querySelector("ion-back-button"),X=x.classList.contains("buttons-collapse");if(null!==k&&("start"===x.slot||""===x.slot)&&(X&&S&&p||!X))return k}return null},I=(h,p,m,g,x,E,S,k,X)=>{var Y,G;const z=p?`calc(100% - ${x.right+4}px)`:x.left-4+"px",ee=p?"right":"left",H=p?"left":"right",re=p?"right":"left";let Z=1,_e=1,xe=`scale(${_e})`;const oe="scale(1)";if(E&&S){const vt=(null===(Y=E.textContent)||void 0===Y?void 0:Y.trim())===(null===(G=k.textContent)||void 0===G?void 0:G.trim());Z=X.width/S.width,_e=(X.height-f)/S.height,xe=vt?`scale(${Z}, ${_e})`:`scale(${_e})`}const ne=M(g).querySelector("ion-icon").getBoundingClientRect(),J=p?ne.width/2-(ne.right-x.right)+"px":x.left-ne.width/2+"px",he=p?`-${window.innerWidth-x.right}px`:`${x.left}px`,Ce=`${X.top}px`,et=`${x.top}px`,ge=m?[{offset:0,transform:`translate3d(${he}, ${et}, 0)`},{offset:1,transform:`translate3d(${J}, ${Ce}, 0)`}]:[{offset:0,transform:`translate3d(${J}, ${Ce}, 0)`},{offset:1,transform:`translate3d(${he}, ${et}, 0)`}],ut=m?[{offset:0,opacity:1,transform:oe},{offset:1,opacity:0,transform:xe}]:[{offset:0,opacity:0,transform:xe},{offset:1,opacity:1,transform:oe}],dt=m?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Rt=(0,j.c)(),Bt=(0,j.c)(),lt=(0,j.c)(),It=K("ion-back-button"),Tt=M(It).querySelector(".button-text"),Ot=M(It).querySelector("ion-icon");It.text=g.text,It.mode=g.mode,It.icon=g.icon,It.color=g.color,It.disabled=g.disabled,It.style.setProperty("display","block"),It.style.setProperty("position","fixed"),Bt.addElement(Ot),Rt.addElement(Tt),lt.addElement(It),lt.beforeStyles({position:"absolute",top:"0px",[re]:"0px"}).beforeAddWrite(()=>{g.style.setProperty("display","none"),It.style.setProperty(ee,z)}).afterAddWrite(()=>{g.style.setProperty("display",""),It.style.setProperty("display","none"),It.style.removeProperty(ee)}).keyframes(ge),Rt.beforeStyles({"transform-origin":`${ee} top`}).keyframes(ut),Bt.beforeStyles({"transform-origin":`${H} center`}).keyframes(dt),h.addAnimation([Rt,Bt,lt])},D=(h,p,m,g,x,E,S,k,X)=>{var Y,G;const z=p?"right":"left",ee=p?`calc(100% - ${x.right}px)`:`${x.left}px`,re=`${x.top}px`;let _e=p?`-${window.innerWidth-S.right-8}px`:`${S.x+8}px`,xe=.5;const oe="scale(1)";let me=`scale(${xe})`;if(k&&X){_e=p?`-${window.innerWidth-X.right-8}px`:X.x-8+"px";const Le=(null===(Y=k.textContent)||void 0===Y?void 0:Y.trim())===(null===(G=g.textContent)||void 0===G?void 0:G.trim());xe=X.height/(E.height-f),me=Le?`scale(${X.width/E.width}, ${xe})`:`scale(${xe})`}const he=S.top+S.height/2-x.height*xe/2+"px",le=m?[{offset:0,opacity:0,transform:`translate3d(${_e}, ${he}, 0) ${me}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${re}, 0) ${oe}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${re}, 0) ${oe}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${_e}, ${he}, 0) ${me}`}],V=K("ion-title"),ge=(0,j.c)();V.innerText=g.innerText,V.size=g.size,V.color=g.color,ge.addElement(V),ge.beforeStyles({"transform-origin":`${z} top`,height:`${x.height}px`,display:"",position:"relative",[z]:ee}).beforeAddWrite(()=>{g.style.setProperty("opacity","0")}).afterAddWrite(()=>{g.style.setProperty("opacity",""),V.style.setProperty("display","none")}).keyframes(le),h.addAnimation(ge)},d=(h,p)=>{var m;try{const g="cubic-bezier(0.32,0.72,0,1)",x="opacity",E="transform",S="0%",X="rtl"===h.ownerDocument.dir,Y=X?"-99.5%":"99.5%",G=X?"33%":"-33%",z=p.enteringEl,ee=p.leavingEl,H="back"===p.direction,re=z.querySelector(":scope > ion-content"),Z=z.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),_e=z.querySelectorAll(":scope > ion-header > ion-toolbar"),xe=(0,j.c)(),oe=(0,j.c)();if(xe.addElement(z).duration((null!==(m=p.duration)&&void 0!==m?m:0)||540).easing(p.easing||g).fill("both").beforeRemoveClass("ion-page-invisible"),ee&&null!=h){const he=(0,j.c)();he.addElement(h),xe.addAnimation(he)}if(re||0!==_e.length||0!==Z.length?(oe.addElement(re),oe.addElement(Z)):oe.addElement(z.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),xe.addAnimation(oe),H?oe.beforeClearStyles([x]).fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.8,1):oe.beforeClearStyles([x]).fromTo("transform",`translateX(${Y})`,`translateX(${S})`),re){const he=M(re).querySelector(".transition-effect");if(he){const Ce=he.querySelector(".transition-cover"),et=he.querySelector(".transition-shadow"),le=(0,j.c)(),V=(0,j.c)(),ge=(0,j.c)();le.addElement(he).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),V.addElement(Ce).beforeClearStyles([x]).fromTo(x,0,.1),ge.addElement(et).beforeClearStyles([x]).fromTo(x,.03,.7),le.addAnimation([V,ge]),oe.addAnimation([le])}}const me=z.querySelector("ion-header.header-collapse-condense"),{forward:ne,backward:J}=((h,p,m,g,x)=>{const E=b(g,m),S=A(x),k=A(g),X=b(x,m),Y=null!==E&&null!==S&&!m,G=null!==k&&null!==X&&m;if(Y){const z=S.getBoundingClientRect(),ee=E.getBoundingClientRect(),H=M(E).querySelector(".button-text"),re=null==H?void 0:H.getBoundingClientRect(),_e=M(S).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,S,z,_e,ee,H,re),I(h,p,m,E,ee,H,re,S,_e)}else if(G){const z=k.getBoundingClientRect(),ee=X.getBoundingClientRect(),H=M(X).querySelector(".button-text"),re=null==H?void 0:H.getBoundingClientRect(),_e=M(k).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,k,z,_e,ee,H,re),I(h,p,m,X,ee,H,re,k,_e)}return{forward:Y,backward:G}})(xe,X,H,z,ee);if(_e.forEach(he=>{const Ce=(0,j.c)();Ce.addElement(he),xe.addAnimation(Ce);const et=(0,j.c)();et.addElement(he.querySelector("ion-title"));const le=(0,j.c)(),V=Array.from(he.querySelectorAll("ion-buttons,[menuToggle]")),ge=he.closest("ion-header"),Le=null==ge?void 0:ge.classList.contains("header-collapse-condense-inactive");let Ke;Ke=V.filter(H?Rt=>{const Bt=Rt.classList.contains("buttons-collapse");return Bt&&!Le||!Bt}:Rt=>!Rt.classList.contains("buttons-collapse")),le.addElement(Ke);const ut=(0,j.c)();ut.addElement(he.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const _t=(0,j.c)();_t.addElement(M(he).querySelector(".toolbar-background"));const Nt=(0,j.c)(),dt=he.querySelector("ion-back-button");if(dt&&Nt.addElement(dt),Ce.addAnimation([et,le,ut,_t,Nt]),le.fromTo(x,.01,1),ut.fromTo(x,.01,1),H)Le||et.fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.01,1),ut.fromTo("transform",`translateX(${G})`,`translateX(${S})`),Nt.fromTo(x,.01,1);else if(me||et.fromTo("transform",`translateX(${Y})`,`translateX(${S})`).fromTo(x,.01,1),ut.fromTo("transform",`translateX(${Y})`,`translateX(${S})`),_t.beforeClearStyles([x,"transform"]),(null==ge?void 0:ge.translucent)?_t.fromTo("transform",X?"translateX(-100%)":"translateX(100%)","translateX(0px)"):_t.fromTo(x,.01,"var(--opacity)"),ne||Nt.fromTo(x,.01,1),dt&&!ne){const Bt=(0,j.c)();Bt.addElement(M(dt).querySelector(".button-text")).fromTo("transform",X?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ce.addAnimation(Bt)}}),ee){const he=(0,j.c)(),Ce=ee.querySelector(":scope > ion-content"),et=ee.querySelectorAll(":scope > ion-header > ion-toolbar"),le=ee.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ce||0!==et.length||0!==le.length?(he.addElement(Ce),he.addElement(le)):he.addElement(ee.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),xe.addAnimation(he),H){he.beforeClearStyles([x]).fromTo("transform",`translateX(${S})`,X?"translateX(-100%)":"translateX(100%)");const V=(0,F.g)(ee);xe.afterAddWrite(()=>{"normal"===xe.getDirection()&&V.style.setProperty("display","none")})}else he.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,1,.8);if(Ce){const V=M(Ce).querySelector(".transition-effect");if(V){const ge=V.querySelector(".transition-cover"),Le=V.querySelector(".transition-shadow"),Ke=(0,j.c)(),ut=(0,j.c)(),_t=(0,j.c)();Ke.addElement(V).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ut.addElement(ge).beforeClearStyles([x]).fromTo(x,.1,0),_t.addElement(Le).beforeClearStyles([x]).fromTo(x,.7,.03),Ke.addAnimation([ut,_t]),he.addAnimation([Ke])}}et.forEach(V=>{const ge=(0,j.c)();ge.addElement(V);const Le=(0,j.c)();Le.addElement(V.querySelector("ion-title"));const Ke=(0,j.c)(),ut=V.querySelectorAll("ion-buttons,[menuToggle]"),_t=V.closest("ion-header"),Nt=null==_t?void 0:_t.classList.contains("header-collapse-condense-inactive"),dt=Array.from(ut).filter(Ot=>{const vt=Ot.classList.contains("buttons-collapse");return vt&&!Nt||!vt});Ke.addElement(dt);const Rt=(0,j.c)(),Bt=V.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Bt.length>0&&Rt.addElement(Bt);const lt=(0,j.c)();lt.addElement(M(V).querySelector(".toolbar-background"));const It=(0,j.c)(),Tt=V.querySelector("ion-back-button");if(Tt&&It.addElement(Tt),ge.addAnimation([Le,Ke,Rt,It,lt]),xe.addAnimation(ge),It.fromTo(x,.99,0),Ke.fromTo(x,.99,0),Rt.fromTo(x,.99,0),H){if(Nt||Le.fromTo("transform",`translateX(${S})`,X?"translateX(-100%)":"translateX(100%)").fromTo(x,.99,0),Rt.fromTo("transform",`translateX(${S})`,X?"translateX(-100%)":"translateX(100%)"),lt.beforeClearStyles([x,"transform"]),(null==_t?void 0:_t.translucent)?lt.fromTo("transform","translateX(0px)",X?"translateX(-100%)":"translateX(100%)"):lt.fromTo(x,"var(--opacity)",0),Tt&&!J){const vt=(0,j.c)();vt.addElement(M(Tt).querySelector(".button-text")).fromTo("transform",`translateX(${S})`,`translateX(${(X?-124:124)+"px"})`),ge.addAnimation(vt)}}else Nt||Le.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,.99,0).afterClearStyles([E,x]),Rt.fromTo("transform",`translateX(${S})`,`translateX(${G})`).afterClearStyles([E,x]),It.afterClearStyles([x]),Le.afterClearStyles([x]),Ke.afterClearStyles([x])})}return xe}catch(g){throw g}},f=10},361:(wr,Nn,je)=>{"use strict";je.r(Nn),je.d(Nn,{mdTransitionAnimation:()=>ve});var j=je(9986),F=je(1331);je(8476),je(4921),je(8393);const ve=(K,M)=>{var A,b,w;const I="40px",d="back"===M.direction,h=M.leavingEl,p=(0,F.g)(M.enteringEl),m=p.querySelector("ion-toolbar"),g=(0,j.c)();if(g.addElement(p).fill("both").beforeRemoveClass("ion-page-invisible"),d?g.duration((null!==(A=M.duration)&&void 0!==A?A:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):g.duration((null!==(b=M.duration)&&void 0!==b?b:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${I})`,"translateY(0px)").fromTo("opacity",.01,1),m){const x=(0,j.c)();x.addElement(m),g.addAnimation(x)}if(h&&d){g.duration((null!==(w=M.duration)&&void 0!==w?w:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const x=(0,j.c)();x.addElement((0,F.g)(h)).onFinish(E=>{1===E&&x.elements.length>0&&x.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${I})`).fromTo("opacity",1,0),g.addAnimation(x)}return g}},1070:(wr,Nn,je)=>{"use strict";je.d(Nn,{B:()=>ut,F:()=>It,G:()=>_t,O:()=>Nt,a:()=>p,b:()=>m,c:()=>S,d:()=>dt,e:()=>Rt,f:()=>ne,g:()=>he,h:()=>le,i:()=>ge,j:()=>X,k:()=>Y,l:()=>g,m:()=>x,n:()=>b,o:()=>oe,q:()=>w,s:()=>Ke});var j=je(467),F=je(8476),Et=je(4920),Jt=je(8669),l=je(4921),ve=je(8621),K=je(1970),M=je(4929);const A='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',b=(Tt,Ot)=>{const vt=Tt.querySelector(A);I(vt,null!=Ot?Ot:Tt)},w=(Tt,Ot)=>{const vt=Array.from(Tt.querySelectorAll(A));I(vt.length>0?vt[vt.length-1]:null,null!=Ot?Ot:Tt)},I=(Tt,Ot)=>{let vt=Tt;const Gt=null==Tt?void 0:Tt.shadowRoot;Gt&&(vt=Gt.querySelector(A)||Tt),vt?(0,Et.f)(vt):Ot.focus()};let D=0,d=0;const f=new WeakMap,h=Tt=>({create:Ot=>G(Tt,Ot),dismiss:(Ot,vt,Gt)=>Z(document,Ot,vt,Tt,Gt),getTop:()=>(0,j.A)(function*(){return oe(document,Tt)})()}),p=h("ion-alert"),m=h("ion-action-sheet"),g=h("ion-loading"),x=h("ion-modal"),S=h("ion-popover"),X=Tt=>{typeof document<"u"&&re(document);const Ot=D++;Tt.overlayIndex=Ot},Y=Tt=>(Tt.hasAttribute("id")||(Tt.id="ion-overlay-"+ ++d),Tt.id),G=(Tt,Ot)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Tt).then(()=>{const vt=document.createElement(Tt);return vt.classList.add("overlay-hidden"),Object.assign(vt,Object.assign(Object.assign({},Ot),{hasController:!0})),Ce(document).appendChild(vt),new Promise(Gt=>(0,Et.c)(vt,Gt))}):Promise.resolve(),ee=(Tt,Ot)=>{let vt=Tt;const Gt=null==Tt?void 0:Tt.shadowRoot;Gt&&(vt=Gt.querySelector(A)||Tt),vt?(0,Et.f)(vt):Ot.focus()},re=Tt=>{0===D&&(D=1,Tt.addEventListener("focus",Ot=>{((Tt,Ot)=>{const vt=oe(Ot,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),Gt=Tt.target;vt&&Gt&&!vt.classList.contains(It)&&(vt.shadowRoot?(()=>{if(vt.contains(Gt))vt.lastFocus=Gt;else if("ION-TOAST"===Gt.tagName)ee(vt.lastFocus,vt);else{const bn=vt.lastFocus;b(vt),bn===Ot.activeElement&&w(vt),vt.lastFocus=Ot.activeElement}})():(()=>{if(vt===Gt)vt.lastFocus=void 0;else if("ION-TOAST"===Gt.tagName)ee(vt.lastFocus,vt);else{const bn=(0,Et.g)(vt);if(!bn.contains(Gt))return;const Xn=bn.querySelector(".ion-overlay-wrapper");if(!Xn)return;if(Xn.contains(Gt)||Gt===bn.querySelector("ion-backdrop"))vt.lastFocus=Gt;else{const Mn=vt.lastFocus;b(Xn,vt),Mn===Ot.activeElement&&w(Xn,vt),vt.lastFocus=Ot.activeElement}}})())})(Ot,Tt)},!0),Tt.addEventListener("ionBackButton",Ot=>{const vt=oe(Tt);null!=vt&&vt.backdropDismiss&&Ot.detail.register(Jt.OVERLAY_BACK_BUTTON_PRIORITY,()=>{vt.dismiss(void 0,ut)})}),(0,Jt.shouldUseCloseWatcher)()||Tt.addEventListener("keydown",Ot=>{if("Escape"===Ot.key){const vt=oe(Tt);null!=vt&&vt.backdropDismiss&&vt.dismiss(void 0,ut)}}))},Z=(Tt,Ot,vt,Gt,hn)=>{const $n=oe(Tt,Gt,hn);return $n?$n.dismiss(Ot,vt):Promise.reject("overlay does not exist")},xe=(Tt,Ot)=>((Tt,Ot)=>(void 0===Ot&&(Ot="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(Tt.querySelectorAll(Ot)).filter(vt=>vt.overlayIndex>0)))(Tt,Ot).filter(vt=>!(Tt=>Tt.classList.contains("overlay-hidden"))(vt)),oe=(Tt,Ot,vt)=>{const Gt=xe(Tt,Ot);return void 0===vt?Gt[Gt.length-1]:Gt.find(hn=>hn.id===vt)},me=(Tt=!1)=>{const vt=Ce(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");vt&&(Tt?vt.setAttribute("aria-hidden","true"):vt.removeAttribute("aria-hidden"))},ne=function(){var Tt=(0,j.A)(function*(Ot,vt,Gt,hn,$n){var bn,Xn;if(Ot.presented)return;me(!0),document.body.classList.add(K.B),Bt(Ot.el),Ot.presented=!0,Ot.willPresent.emit(),null===(bn=Ot.willPresentShorthand)||void 0===bn||bn.emit();const Mn=(0,l.b)(Ot),gr=Ot.enterAnimation?Ot.enterAnimation:l.c.get(vt,"ios"===Mn?Gt:hn);(yield et(Ot,gr,Ot.el,$n))&&(Ot.didPresent.emit(),null===(Xn=Ot.didPresentShorthand)||void 0===Xn||Xn.emit()),"ION-TOAST"!==Ot.el.tagName&&J(Ot.el),Ot.keyboardClose&&(null===document.activeElement||!Ot.el.contains(document.activeElement))&&Ot.el.focus(),Ot.el.removeAttribute("aria-hidden")});return function(vt,Gt,hn,$n,bn){return Tt.apply(this,arguments)}}(),J=function(){var Tt=(0,j.A)(function*(Ot){let vt=document.activeElement;if(!vt)return;const Gt=null==vt?void 0:vt.shadowRoot;Gt&&(vt=Gt.querySelector(A)||vt),yield Ot.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&vt.focus()});return function(vt){return Tt.apply(this,arguments)}}(),he=function(){var Tt=(0,j.A)(function*(Ot,vt,Gt,hn,$n,bn,Xn){var Mn,gr;if(!Ot.presented)return!1;void 0!==F.d&&1===xe(F.d).length&&(me(!1),document.body.classList.remove(K.B)),Ot.presented=!1;try{Ot.el.style.setProperty("pointer-events","none"),Ot.willDismiss.emit({data:vt,role:Gt}),null===(Mn=Ot.willDismissShorthand)||void 0===Mn||Mn.emit({data:vt,role:Gt});const nr=(0,l.b)(Ot),mn=Ot.leaveAnimation?Ot.leaveAnimation:l.c.get(hn,"ios"===nr?$n:bn);Gt!==_t&&(yield et(Ot,mn,Ot.el,Xn)),Ot.didDismiss.emit({data:vt,role:Gt}),null===(gr=Ot.didDismissShorthand)||void 0===gr||gr.emit({data:vt,role:Gt}),(f.get(Ot)||[]).forEach(Tn=>Tn.destroy()),f.delete(Ot),Ot.el.classList.add("overlay-hidden"),Ot.el.style.removeProperty("pointer-events"),void 0!==Ot.el.lastFocus&&(Ot.el.lastFocus=void 0)}catch(nr){console.error(nr)}return Ot.el.remove(),lt(),!0});return function(vt,Gt,hn,$n,bn,Xn,Mn){return Tt.apply(this,arguments)}}(),Ce=Tt=>Tt.querySelector("ion-app")||Tt.body,et=function(){var Tt=(0,j.A)(function*(Ot,vt,Gt,hn){Gt.classList.remove("overlay-hidden");const bn=vt(Ot.el,hn);(!Ot.animated||!l.c.getBoolean("animated",!0))&&bn.duration(0),Ot.keyboardClose&&bn.beforeAddWrite(()=>{const Mn=Gt.ownerDocument.activeElement;null!=Mn&&Mn.matches("input,ion-input, ion-textarea")&&Mn.blur()});const Xn=f.get(Ot)||[];return f.set(Ot,[...Xn,bn]),yield bn.play(),!0});return function(vt,Gt,hn,$n){return Tt.apply(this,arguments)}}(),le=(Tt,Ot)=>{let vt;const Gt=new Promise(hn=>vt=hn);return V(Tt,Ot,hn=>{vt(hn.detail)}),Gt},V=(Tt,Ot,vt)=>{const Gt=hn=>{(0,Et.b)(Tt,Ot,Gt),vt(hn)};(0,Et.a)(Tt,Ot,Gt)},ge=Tt=>"cancel"===Tt||Tt===ut,Le=Tt=>Tt(),Ke=(Tt,Ot)=>{if("function"==typeof Tt)return l.c.get("_zoneGate",Le)(()=>{try{return Tt(Ot)}catch(Gt){throw Gt}})},ut="backdrop",_t="gesture",Nt=39,dt=Tt=>{let vt,Ot=!1;const Gt=(0,ve.C)(),hn=(Xn=!1)=>{if(vt&&!Xn)return{delegate:vt,inline:Ot};const{el:Mn,hasController:gr,delegate:Ln}=Tt;return Ot=null!==Mn.parentNode&&!gr,vt=Ot?Ln||Gt:Ln,{inline:Ot,delegate:vt}};return{attachViewToDom:function(){var Xn=(0,j.A)(function*(Mn){const{delegate:gr}=hn(!0);if(gr)return yield gr.attachViewToDom(Tt.el,Mn);const{hasController:Ln}=Tt;if(Ln&&void 0!==Mn)throw new Error("framework delegate is missing");return null});return function(gr){return Xn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Xn}=hn();Xn&&void 0!==Tt.el&&Xn.removeViewFromDom(Tt.el.parentElement,Tt.el)}}},Rt=()=>{let Tt;const Ot=()=>{Tt&&(Tt(),Tt=void 0)};return{addClickListener:(Gt,hn)=>{Ot();const $n=void 0!==hn?document.getElementById(hn):null;$n?Tt=((Xn,Mn)=>{const gr=()=>{Mn.present()};return Xn.addEventListener("click",gr),()=>{Xn.removeEventListener("click",gr)}})($n,Gt):(0,M.p)(`A trigger element with the ID "${hn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Gt)},removeClickListener:Ot}},Bt=Tt=>{var Ot;if(void 0===F.d)return;const vt=xe(F.d);for(let Gt=vt.length-1;Gt>=0;Gt--){const hn=vt[Gt],$n=null!==(Ot=vt[Gt+1])&&void 0!==Ot?Ot:Tt;($n.hasAttribute("aria-hidden")||"ION-TOAST"!==$n.tagName)&&hn.setAttribute("aria-hidden","true")}},lt=()=>{if(void 0===F.d)return;const Tt=xe(F.d);for(let Ot=Tt.length-1;Ot>=0;Ot--){const vt=Tt[Ot];if(vt.removeAttribute("aria-hidden"),"ION-TOAST"!==vt.tagName)break}},It="ion-disable-focus-trap"},1288:(wr,Nn,je)=>{"use strict";je.d(Nn,{H:()=>m,b:()=>$n,c:()=>S,f:()=>dt,g:()=>E,h:()=>h,p:()=>xn,r:()=>qn});var j=je(467);let Et,Jt,l=!1,ve=!1;const b={},d=Ut=>"object"==(Ut=typeof Ut)||"function"===Ut;function f(Ut){var sn,On,Sn;return null!==(Sn=null===(On=null===(sn=Ut.head)||void 0===sn?void 0:sn.querySelector('meta[name="csp-nonce"]'))||void 0===On?void 0:On.getAttribute("content"))&&void 0!==Sn?Sn:void 0}const h=(Ut,sn,...On)=>{let Sn=null,zn=!1,cr=!1;const sr=[],yr=te=>{for(let De=0;De<te.length;De++)Sn=te[De],Array.isArray(Sn)?yr(Sn):null!=Sn&&"boolean"!=typeof Sn&&((zn="function"!=typeof Ut&&!d(Sn))&&(Sn=String(Sn)),zn&&cr?sr[sr.length-1].$text$+=Sn:sr.push(zn?p(null,Sn):Sn),cr=zn)};if(yr(On),sn){const te=sn.className||sn.class;te&&(sn.class="object"!=typeof te?te:Object.keys(te).filter(De=>te[De]).join(" "))}const Tr=p(Ut,null);return Tr.$attrs$=sn,sr.length>0&&(Tr.$children$=sr),Tr},p=(Ut,sn)=>({$flags$:0,$tag$:Ut,$text$:sn,$elm$:null,$children$:null,$attrs$:null}),m={},E=Ut=>mn(Ut).$hostElement$,S=(Ut,sn,On)=>{const Sn=E(Ut);return{emit:zn=>k(Sn,sn,{bubbles:!!(4&On),composed:!!(2&On),cancelable:!!(1&On),detail:zn})}},k=(Ut,sn,On)=>{const Sn=on.ce(sn,On);return Ut.dispatchEvent(Sn),Sn},X=new WeakMap,ee=(Ut,sn)=>"sc-"+Ut.$tagName$,H=(Ut,sn,On,Sn,zn,cr)=>{if(On!==Sn){let sr=ct(Ut,sn),yr=sn.toLowerCase();if("class"===sn){const Tr=Ut.classList,te=Z(On),De=Z(Sn);Tr.remove(...te.filter(Ye=>Ye&&!De.includes(Ye))),Tr.add(...De.filter(Ye=>Ye&&!te.includes(Ye)))}else if("style"===sn){for(const Tr in On)(!Sn||null==Sn[Tr])&&(Tr.includes("-")?Ut.style.removeProperty(Tr):Ut.style[Tr]="");for(const Tr in Sn)(!On||Sn[Tr]!==On[Tr])&&(Tr.includes("-")?Ut.style.setProperty(Tr,Sn[Tr]):Ut.style[Tr]=Sn[Tr])}else if("ref"===sn)Sn&&Sn(Ut);else if(sr||"o"!==sn[0]||"n"!==sn[1]){const Tr=d(Sn);if((sr||Tr&&null!==Sn)&&!zn)try{if(Ut.tagName.includes("-"))Ut[sn]=Sn;else{const te=null==Sn?"":Sn;"list"===sn?sr=!1:(null==On||Ut[sn]!=te)&&(Ut[sn]=te)}}catch{}null==Sn||!1===Sn?(!1!==Sn||""===Ut.getAttribute(sn))&&Ut.removeAttribute(sn):(!sr||4&cr||zn)&&!Tr&&Ut.setAttribute(sn,Sn=!0===Sn?"":Sn)}else sn="-"===sn[2]?sn.slice(3):ct(Cn,yr)?yr.slice(2):yr[2]+sn.slice(3),On&&on.rel(Ut,sn,On,!1),Sn&&on.ael(Ut,sn,Sn,!1)}},re=/\s/,Z=Ut=>Ut?Ut.split(re):[],_e=(Ut,sn,On,Sn)=>{const zn=11===sn.$elm$.nodeType&&sn.$elm$.host?sn.$elm$.host:sn.$elm$,cr=Ut&&Ut.$attrs$||b,sr=sn.$attrs$||b;for(Sn in cr)Sn in sr||H(zn,Sn,cr[Sn],void 0,On,sn.$flags$);for(Sn in sr)H(zn,Sn,cr[Sn],sr[Sn],On,sn.$flags$)},xe=(Ut,sn,On,Sn)=>{const zn=sn.$children$[On];let sr,yr,cr=0;if(null!==zn.$text$)sr=zn.$elm$=jn.createTextNode(zn.$text$);else{if(l||(l="svg"===zn.$tag$),sr=zn.$elm$=jn.createElementNS(l?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",zn.$tag$),l&&"foreignObject"===zn.$tag$&&(l=!1),_e(null,zn,l),(Ut=>null!=Ut)(Et)&&sr["s-si"]!==Et&&sr.classList.add(sr["s-si"]=Et),zn.$children$)for(cr=0;cr<zn.$children$.length;++cr)yr=xe(Ut,zn,cr),yr&&sr.appendChild(yr);"svg"===zn.$tag$?l=!1:"foreignObject"===sr.tagName&&(l=!0)}return sr},oe=(Ut,sn,On,Sn,zn,cr)=>{let yr,sr=Ut;for(sr.shadowRoot&&sr.tagName===Jt&&(sr=sr.shadowRoot);zn<=cr;++zn)Sn[zn]&&(yr=xe(null,On,zn),yr&&(Sn[zn].$elm$=yr,sr.insertBefore(yr,sn)))},me=(Ut,sn,On)=>{for(let Sn=sn;Sn<=On;++Sn){const zn=Ut[Sn];if(zn){const cr=zn.$elm$;Ce(zn),cr&&cr.remove()}}},J=(Ut,sn)=>Ut.$tag$===sn.$tag$,he=(Ut,sn)=>{const On=sn.$elm$=Ut.$elm$,Sn=Ut.$children$,zn=sn.$children$,cr=sn.$tag$,sr=sn.$text$;null===sr?(l="svg"===cr||"foreignObject"!==cr&&l,_e(Ut,sn,l),null!==Sn&&null!==zn?((Ut,sn,On,Sn)=>{let T,zn=0,cr=0,sr=sn.length-1,yr=sn[0],Tr=sn[sr],te=Sn.length-1,De=Sn[0],Ye=Sn[te];for(;zn<=sr&&cr<=te;)null==yr?yr=sn[++zn]:null==Tr?Tr=sn[--sr]:null==De?De=Sn[++cr]:null==Ye?Ye=Sn[--te]:J(yr,De)?(he(yr,De),yr=sn[++zn],De=Sn[++cr]):J(Tr,Ye)?(he(Tr,Ye),Tr=sn[--sr],Ye=Sn[--te]):J(yr,Ye)?(he(yr,Ye),Ut.insertBefore(yr.$elm$,Tr.$elm$.nextSibling),yr=sn[++zn],Ye=Sn[--te]):J(Tr,De)?(he(Tr,De),Ut.insertBefore(Tr.$elm$,yr.$elm$),Tr=sn[--sr],De=Sn[++cr]):(T=xe(sn&&sn[cr],On,cr),De=Sn[++cr],T&&yr.$elm$.parentNode.insertBefore(T,yr.$elm$));zn>sr?oe(Ut,null==Sn[te+1]?null:Sn[te+1].$elm$,On,Sn,cr,te):cr>te&&me(sn,zn,sr)})(On,Sn,sn,zn):null!==zn?(null!==Ut.$text$&&(On.textContent=""),oe(On,null,sn,zn,0,zn.length-1)):null!==Sn&&me(Sn,0,Sn.length-1),l&&"svg"===cr&&(l=!1)):Ut.$text$!==sr&&(On.data=sr)},Ce=Ut=>{Ut.$attrs$&&Ut.$attrs$.ref&&Ut.$attrs$.ref(null),Ut.$children$&&Ut.$children$.map(Ce)},le=(Ut,sn)=>{sn&&!Ut.$onRenderResolve$&&sn["s-p"]&&sn["s-p"].push(new Promise(On=>Ut.$onRenderResolve$=On))},V=(Ut,sn)=>{if(Ut.$flags$|=16,!(4&Ut.$flags$))return le(Ut,Ut.$ancestorComponent$),Zn(()=>ge(Ut,sn));Ut.$flags$|=512},ge=(Ut,sn)=>{const Sn=Ut.$lazyInstance$;return sn&&(Ut.$flags$|=256,Ut.$queuedListeners$&&(Ut.$queuedListeners$.map(([cr,sr])=>Bt(Sn,cr,sr)),Ut.$queuedListeners$=void 0)),Le(void 0,()=>ut(Ut,Sn,sn))},Le=(Ut,sn)=>Ke(Ut)?Ut.then(sn):sn(),Ke=Ut=>Ut instanceof Promise||Ut&&Ut.then&&"function"==typeof Ut.then,ut=function(){var Ut=(0,j.A)(function*(sn,On,Sn){var zn;const cr=sn.$hostElement$,yr=cr["s-rc"];Sn&&(Ut=>{const sn=Ut.$cmpMeta$,On=Ut.$hostElement$,Sn=sn.$flags$,cr=((Ut,sn,On,Sn)=>{var zn;let cr=ee(sn);const sr=fn.get(cr);if(Ut=11===Ut.nodeType?Ut:jn,sr)if("string"==typeof sr){let Tr,yr=X.get(Ut=Ut.head||Ut);if(yr||X.set(Ut,yr=new Set),!yr.has(cr)){{Tr=jn.createElement("style"),Tr.innerHTML=sr;const te=null!==(zn=on.$nonce$)&&void 0!==zn?zn:f(jn);null!=te&&Tr.setAttribute("nonce",te),Ut.insertBefore(Tr,Ut.querySelector("link"))}yr&&yr.add(cr)}}else Ut.adoptedStyleSheets.includes(sr)||(Ut.adoptedStyleSheets=[...Ut.adoptedStyleSheets,sr]);return cr})(On.shadowRoot?On.shadowRoot:On.getRootNode(),sn);10&Sn&&(On["s-sc"]=cr,On.classList.add(cr+"-h"))})(sn);_t(sn,On),yr&&(yr.map(te=>te()),cr["s-rc"]=void 0);{const te=null!==(zn=cr["s-p"])&&void 0!==zn?zn:[],De=()=>Nt(sn);0===te.length?De():(Promise.all(te).then(De),sn.$flags$|=4,te.length=0)}});return function(On,Sn,zn){return Ut.apply(this,arguments)}}(),_t=(Ut,sn,On)=>{try{sn=sn.render(),Ut.$flags$&=-17,Ut.$flags$|=2,((Ut,sn)=>{const On=Ut.$hostElement$,Sn=Ut.$vnode$||p(null,null),zn=(Ut=>Ut&&Ut.$tag$===m)(sn)?sn:h(null,null,sn);Jt=On.tagName,zn.$tag$=null,zn.$flags$|=4,Ut.$vnode$=zn,zn.$elm$=Sn.$elm$=On.shadowRoot||On,Et=On["s-sc"],he(Sn,zn)})(Ut,sn)}catch(Sn){pt(Sn,Ut.$hostElement$)}return null},Nt=Ut=>{const On=Ut.$hostElement$,zn=Ut.$lazyInstance$,cr=Ut.$ancestorComponent$;64&Ut.$flags$||(Ut.$flags$|=64,lt(On),Bt(zn,"componentDidLoad"),Ut.$onReadyResolve$(On),cr||Rt()),Ut.$onInstanceResolve$(On),Ut.$onRenderResolve$&&(Ut.$onRenderResolve$(),Ut.$onRenderResolve$=void 0),512&Ut.$flags$&&ln(()=>V(Ut,!1)),Ut.$flags$&=-517},dt=Ut=>{{const sn=mn(Ut),On=sn.$hostElement$.isConnected;return On&&2==(18&sn.$flags$)&&V(sn,!1),On}},Rt=Ut=>{lt(jn.documentElement),ln(()=>k(Cn,"appload",{detail:{namespace:"ionicpwaelements"}}))},Bt=(Ut,sn,On)=>{if(Ut&&Ut[sn])try{return Ut[sn](On)}catch(Sn){pt(Sn)}},lt=Ut=>Ut.classList.add("hydrated"),Ot=(Ut,sn,On)=>{if(sn.$members$){const Sn=Object.entries(sn.$members$),zn=Ut.prototype;if(Sn.map(([cr,[sr]])=>{31&sr||2&On&&32&sr?Object.defineProperty(zn,cr,{get(){return((Ut,sn)=>mn(this).$instanceValues$.get(sn))(0,cr)},set(yr){((Ut,sn,On,Sn)=>{const zn=mn(Ut),cr=zn.$instanceValues$.get(sn),sr=zn.$flags$,yr=zn.$lazyInstance$;On=((Ut,sn)=>null==Ut||d(Ut)?Ut:4&sn?"false"!==Ut&&(""===Ut||!!Ut):2&sn?parseFloat(Ut):1&sn?String(Ut):Ut)(On,Sn.$members$[sn][0]);const Tr=Number.isNaN(cr)&&Number.isNaN(On);(!(8&sr)||void 0===cr)&&On!==cr&&!Tr&&(zn.$instanceValues$.set(sn,On),yr&&2==(18&sr)&&V(zn,!1))})(this,cr,yr,sn)},configurable:!0,enumerable:!0}):1&On&&64&sr&&Object.defineProperty(zn,cr,{value(...yr){const Tr=mn(this);return Tr.$onInstancePromise$.then(()=>Tr.$lazyInstance$[cr](...yr))}})}),1&On){const cr=new Map;zn.attributeChangedCallback=function(sr,yr,Tr){on.jmp(()=>{const te=cr.get(sr);if(this.hasOwnProperty(te))Tr=this[te],delete this[te];else if(zn.hasOwnProperty(te)&&"number"==typeof this[te]&&this[te]==Tr)return;this[te]=(null!==Tr||"boolean"!=typeof this[te])&&Tr})},Ut.observedAttributes=Sn.filter(([sr,yr])=>15&yr[0]).map(([sr,yr])=>{const Tr=yr[1]||sr;return cr.set(Tr,sr),Tr})}}return Ut},vt=function(){var Ut=(0,j.A)(function*(sn,On,Sn,zn,cr){if(!(32&On.$flags$)){On.$flags$|=32;{if((cr=xt(Sn)).then){const te=()=>{};cr=yield cr,te()}cr.isProxied||(Ot(cr,Sn,2),cr.isProxied=!0);const Tr=()=>{};On.$flags$|=8;try{new cr(On)}catch(te){pt(te)}On.$flags$&=-9,Tr()}if(cr.style){let Tr=cr.style;const te=ee(Sn);if(!fn.has(te)){const De=()=>{};((Ut,sn,On)=>{let Sn=fn.get(Ut);Pn&&On?(Sn=Sn||new CSSStyleSheet,"string"==typeof Sn?Sn=sn:Sn.replaceSync(sn)):Sn=sn,fn.set(Ut,Sn)})(te,Tr,!!(1&Sn.$flags$)),De()}}}const sr=On.$ancestorComponent$,yr=()=>V(On,!0);sr&&sr["s-rc"]?sr["s-rc"].push(yr):yr()});return function(On,Sn,zn,cr,sr){return Ut.apply(this,arguments)}}(),$n=(Ut,sn={})=>{var On;const zn=[],cr=sn.exclude||[],sr=Cn.customElements,yr=jn.head,Tr=yr.querySelector("meta[charset]"),te=jn.createElement("style"),De=[];let Ye,T=!0;Object.assign(on,sn),on.$resourcesUrl$=new URL(sn.resourcesUrl||"./",jn.baseURI).href,Ut.map(N=>{N[1].map(B=>{const O={$flags$:B[0],$tagName$:B[1],$members$:B[2],$listeners$:B[3]};O.$members$=B[2],O.$listeners$=B[3];const ie=O.$tagName$,q=class extends HTMLElement{constructor(ce){super(ce),Tn(ce=this,O),1&O.$flags$&&ce.attachShadow({mode:"open"})}connectedCallback(){Ye&&(clearTimeout(Ye),Ye=null),T?De.push(this):on.jmp(()=>(Ut=>{if(!(1&on.$flags$)){const sn=mn(Ut),On=sn.$cmpMeta$,Sn=()=>{};if(1&sn.$flags$)bn(Ut,sn,On.$listeners$);else{sn.$flags$|=1;{let zn=Ut;for(;zn=zn.parentNode||zn.host;)if(zn["s-p"]){le(sn,sn.$ancestorComponent$=zn);break}}On.$members$&&Object.entries(On.$members$).map(([zn,[cr]])=>{if(31&cr&&Ut.hasOwnProperty(zn)){const sr=Ut[zn];delete Ut[zn],Ut[zn]=sr}}),vt(Ut,sn,On)}Sn()}})(this))}disconnectedCallback(){on.jmp(()=>(Ut=>{if(!(1&on.$flags$)){const sn=mn(this),On=sn.$lazyInstance$;sn.$rmListeners$&&(sn.$rmListeners$.map(Sn=>Sn()),sn.$rmListeners$=void 0),Bt(On,"disconnectedCallback")}})())}componentOnReady(){return mn(this).$onReadyPromise$}};O.$lazyBundleId$=N[0],!cr.includes(ie)&&!sr.get(ie)&&(zn.push(ie),sr.define(ie,Ot(q,O,1)))})});{te.innerHTML=zn+"{visibility:hidden}.hydrated{visibility:inherit}",te.setAttribute("data-styles","");const N=null!==(On=on.$nonce$)&&void 0!==On?On:f(jn);null!=N&&te.setAttribute("nonce",N),yr.insertBefore(te,Tr?Tr.nextSibling:yr.firstChild)}T=!1,De.length?De.map(N=>N.connectedCallback()):on.jmp(()=>Ye=setTimeout(Rt,30))},bn=(Ut,sn,On,Sn)=>{On&&On.map(([zn,cr,sr])=>{const yr=Mn(Ut,zn),Tr=Xn(sn,sr),te=gr(zn);on.ael(yr,cr,Tr,te),(sn.$rmListeners$=sn.$rmListeners$||[]).push(()=>on.rel(yr,cr,Tr,te))})},Xn=(Ut,sn)=>On=>{try{256&Ut.$flags$?Ut.$lazyInstance$[sn](On):(Ut.$queuedListeners$=Ut.$queuedListeners$||[]).push([sn,On])}catch(Sn){pt(Sn)}},Mn=(Ut,sn)=>16&sn?jn.body:Ut,gr=Ut=>!!(2&Ut),nr=new WeakMap,mn=Ut=>nr.get(Ut),qn=(Ut,sn)=>nr.set(sn.$lazyInstance$=Ut,sn),Tn=(Ut,sn)=>{const On={$flags$:0,$hostElement$:Ut,$cmpMeta$:sn,$instanceValues$:new Map};return On.$onInstancePromise$=new Promise(Sn=>On.$onInstanceResolve$=Sn),On.$onReadyPromise$=new Promise(Sn=>On.$onReadyResolve$=Sn),Ut["s-p"]=[],Ut["s-rc"]=[],bn(Ut,On,sn.$listeners$),nr.set(Ut,On)},ct=(Ut,sn)=>sn in Ut,pt=(Ut,sn)=>(0,console.error)(Ut,sn),Qe=new Map,xt=(Ut,sn,On)=>{const Sn=Ut.$tagName$.replace(/-/g,"_"),zn=Ut.$lazyBundleId$,cr=Qe.get(zn);if(cr)return cr[Sn];if(!On||!BUILD.hotModuleReplacement){const sr=yr=>(Qe.set(zn,yr),yr[Sn]);switch(zn){case"pwa-action-sheet":return je.e(6301).then(je.bind(je,6301)).then(sr,pt);case"pwa-camera-modal":return je.e(2982).then(je.bind(je,2982)).then(sr,pt);case"pwa-toast":return je.e(3574).then(je.bind(je,3574)).then(sr,pt);case"pwa-camera-modal-instance":return je.e(5640).then(je.bind(je,5640)).then(sr,pt);case"pwa-camera":return je.e(6086).then(je.bind(je,6086)).then(sr,pt)}}return je(5235)(`./${zn}.entry.js`).then(sr=>(Qe.set(zn,sr),sr[Sn]),pt)},fn=new Map,Cn=typeof window<"u"?window:{},jn=Cn.document||{head:{}},on={$flags$:0,$resourcesUrl$:"",jmp:Ut=>Ut(),raf:Ut=>requestAnimationFrame(Ut),ael:(Ut,sn,On,Sn)=>Ut.addEventListener(sn,On,Sn),rel:(Ut,sn,On,Sn)=>Ut.removeEventListener(sn,On,Sn),ce:(Ut,sn)=>new CustomEvent(Ut,sn)},xn=Ut=>Promise.resolve(Ut),Pn=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Un=[],yn=[],qt=(Ut,sn)=>On=>{Ut.push(On),ve||(ve=!0,sn&&4&on.$flags$?ln(Kt):on.raf(Kt))},_n=Ut=>{for(let sn=0;sn<Ut.length;sn++)try{Ut[sn](performance.now())}catch(On){pt(On)}Ut.length=0},Kt=()=>{_n(Un),_n(yn),(ve=Un.length>0)&&on.raf(Kt)},ln=Ut=>xn().then(Ut),Zn=qt(yn,!0)},5402:(wr,Nn,je)=>{"use strict";je.d(Nn,{R:()=>F});const F=(0,je(5083).F3)("VoiceRecorder",{web:()=>je.e(9888).then(je.bind(je,9888)).then(Et=>new Et.VoiceRecorderWeb)})},92:(wr,Nn,je)=>{"use strict";je.d(Nn,{Yl:()=>d,ZL:()=>f,aH:()=>D});var j=je(467),F=je(8326),Jt=je(3953),l=je(3656),ve=je(5374),K=je(5547),M=je(4237),A=je(755),b=je(4234),w=je(7100),I=je(3307),D="MobilePWA",d=!1;window.p5=F;let f=(()=>{var h;class p{constructor(g,x,E,S,k,X,Y){D=g.is("desktop")?"DesktopPWA":"MobilePWA",d=g.is("electron");const G="init";Y.update({id:G,message:"Initialize..."}).then(()=>{S.initialize((0,j.A)(function*(){k.Callback_nakama=()=>{Y.update({id:G,message:`${k.text.Nakama.Initialize}...`,forceEnd:350}),E.initialize(),X.afterLangInit(),k.Callback_nakama=null};try{let ee=yield S.loadBlobFromUserPath("translate.csv",""),H=URL.createObjectURL(ee);k.load_selected_lang(H)}catch{k.load_selected_lang()}let z=X.CatchGETs(location.href)||{};X.initialize(),E.AddressToQRCodeAct(z),x.initialize(),x.load_settings(),S.GetFileListFromDB("tmp_files").then(ee=>{ee.forEach(H=>S.removeFileFromUserPath(H))})}))})}}return(h=p).\u0275fac=function(g){return new(g||h)(Jt.rXU(l.OD),Jt.rXU(K.r),Jt.rXU(M.X),Jt.rXU(A.n),Jt.rXU(b.y),Jt.rXU(w.z3),Jt.rXU(I.f))},h.\u0275cmp=Jt.VBU({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(g,x){1&g&&(Jt.j41(0,"ion-app"),Jt.nrm(1,"ion-router-outlet"),Jt.k0s())},dependencies:[ve.U1,ve.Rg]}),p})()},7100:(wr,Nn,je)=>{"use strict";je.d(Nn,{xM:()=>lh,z3:()=>Hw,ud:()=>tu});var j=je(467),F=je(4023),Et=je(8326),Jt=je(617),l=je(92),ve=je(5083),K=function(v){return v.Prompt="PROMPT",v.Camera="CAMERA",v.Photos="PHOTOS",v}(K||{}),M=function(v){return v.Rear="REAR",v.Front="FRONT",v}(M||{}),A=function(v){return v.Uri="uri",v.Base64="base64",v.DataUrl="dataUrl",v}(A||{});class b extends ve.E_{getPhoto(t){var r=this;return(0,j.A)(function*(){return new Promise(function(){var s=(0,j.A)(function*(a,u){if(t.webUseInput||t.source===K.Photos)r.fileInputExperience(t,a,u);else if(t.source===K.Prompt){let _=document.querySelector("pwa-action-sheet");_||(_=document.createElement("pwa-action-sheet"),document.body.appendChild(_)),_.header=t.promptLabelHeader||"Photo",_.cancelable=!1,_.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],_.addEventListener("onSelection",function(){var C=(0,j.A)(function*(L){0===L.detail?r.fileInputExperience(t,a,u):r.cameraExperience(t,a,u)});return function(L){return C.apply(this,arguments)}}())}else r.cameraExperience(t,a,u)});return function(a,u){return s.apply(this,arguments)}}())})()}pickImages(t){var r=this;return(0,j.A)(function*(){return new Promise(function(){var s=(0,j.A)(function*(a,u){r.multipleFileInputExperience(a,u)});return function(a,u){return s.apply(this,arguments)}}())})()}cameraExperience(t,r,s){var a=this;return(0,j.A)(function*(){if(customElements.get("pwa-camera-modal")){const u=document.createElement("pwa-camera-modal");u.facingMode=t.direction===M.Front?"user":"environment",document.body.appendChild(u);try{yield u.componentOnReady(),u.addEventListener("onPhoto",function(){var _=(0,j.A)(function*(C){const L=C.detail;null===L?s(new ve.I9("User cancelled photos app")):L instanceof Error?s(L):r(yield a._getCameraPhoto(L,t)),u.dismiss(),document.body.removeChild(u)});return function(C){return _.apply(this,arguments)}}()),u.present()}catch{a.fileInputExperience(t,r,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),a.fileInputExperience(t,r,s)})()}fileInputExperience(t,r,s){let a=document.querySelector("#_capacitor-camera-input");const u=()=>{var _;null===(_=a.parentNode)||void 0===_||_.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",_=>{const C=a.files[0];let L="jpeg";if("image/png"===C.type?L="png":"image/gif"===C.type&&(L="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const U=new FileReader;U.addEventListener("load",()=>{if("dataUrl"===t.resultType)r({dataUrl:U.result,format:L});else if("base64"===t.resultType){const Q=U.result.split(",")[1];r({base64String:Q,format:L})}u()}),U.readAsDataURL(C)}else r({webPath:URL.createObjectURL(C),format:L}),u()}),a.addEventListener("cancel",_=>{s(new ve.I9("User cancelled photos app")),u()})),a.accept="image/*",a.capture=!0,t.source===K.Photos||t.source===K.Prompt?a.removeAttribute("capture"):t.direction===M.Front?a.capture="user":t.direction===M.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(t,r){let s=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var u;null===(u=s.parentNode)||void 0===u||u.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",u=>{const _=[];for(let C=0;C<s.files.length;C++){const L=s.files[C];let U="jpeg";"image/png"===L.type?U="png":"image/gif"===L.type&&(U="gif"),_.push({webPath:URL.createObjectURL(L),format:U})}t({photos:_}),a()}),s.addEventListener("cancel",u=>{r(new ve.I9("User cancelled photos app")),a()})),s.accept="image/*",s.click()}_getCameraPhoto(t,r){return new Promise((s,a)=>{const u=new FileReader,_=t.type.split("/")[1];"uri"===r.resultType?s({webPath:URL.createObjectURL(t),format:_,saved:!1}):(u.readAsDataURL(t),u.onloadend=()=>{const C=u.result;s("dataUrl"===r.resultType?{dataUrl:C,format:_,saved:!1}:{base64String:C.split(",")[1],format:_,saved:!1})},u.onerror=C=>{a(C)})})}checkPermissions(){var t=this;return(0,j.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,j.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,j.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,j.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new b;const I=(0,ve.F3)("Camera",{web:()=>new b});var D=je(5402);const d="174",S=1,k=2,X=3,Mn=0,gr=1,Ln=2,nr=0,mn=1,qn=2,Tn=3,ct=4,pt=5,Qe=6,xt=7,fn="attached",on=301,xn=302,yn=306,qt=1e3,_n=1001,ln=1003,sn=1005,Sn=1006,sr=1008,Tr=1009,te=1010,De=1011,Ye=1012,T=1013,N=1014,B=1015,O=1016,ie=1017,q=1018,ce=1020,Ge=35902,He=1021,gt=1022,Vt=1023,cn=1024,Ve=1025,We=1026,ft=1027,nt=1028,Dt=1029,un=1030,Bn=1031,Pr=1033,Ui=33776,ji=33777,Us=33778,bs=33779,wi=35840,us=35841,$s=35842,ys=35843,Vs=36196,Ko=37492,fo=37496,Vo=37808,ea=37809,ta=37810,la=37811,eo=37812,ca=37813,_o=37814,ka=37815,Wa=37816,ke=37817,ht=37818,kt=37819,Be=37820,zt=37821,In=36492,ts=36494,Gs=36495,Go=36283,Ca=36284,ba=36285,ll=36286,Io=2300,ko=2301,Eo=2400,ot=2401,Pi="srgb",Vi="srgb-linear",ds="linear",Li="srgb",Or=7680,Je="300 es",bt=2e3;class wn{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(r)&&s[t].push(r)}hasEventListener(t,r){const s=this._listeners;return void 0!==s&&void 0!==s[t]&&-1!==s[t].indexOf(r)}removeEventListener(t,r){const s=this._listeners;if(void 0===s)return;const a=s[t];if(void 0!==a){const u=a.indexOf(r);-1!==u&&a.splice(u,1)}}dispatchEvent(t){const r=this._listeners;if(void 0===r)return;const s=r[t.type];if(void 0!==s){t.target=this;const a=s.slice(0);for(let u=0,_=a.length;u<_;u++)a[u].call(this,t);t.target=null}}}const Oe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ne=Math.PI/180,Re=180/Math.PI;function at(){const v=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Oe[255&v]+Oe[v>>8&255]+Oe[v>>16&255]+Oe[v>>24&255]+"-"+Oe[255&t]+Oe[t>>8&255]+"-"+Oe[t>>16&15|64]+Oe[t>>24&255]+"-"+Oe[63&r|128]+Oe[r>>8&255]+"-"+Oe[r>>16&255]+Oe[r>>24&255]+Oe[255&s]+Oe[s>>8&255]+Oe[s>>16&255]+Oe[s>>24&255]).toLowerCase()}function Qt(v,t,r){return Math.max(t,Math.min(r,v))}function En(v,t){return(v%t+t)%t}function zr(v,t,r){return(1-r)*v+r*t}function As(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return v/4294967295;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int32Array:return Math.max(v/2147483647,-1);case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function ci(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return Math.round(4294967295*v);case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int32Array:return Math.round(2147483647*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}const Po_DEG2RAD=Ne,Po_radToDeg=function Ps(v){return v*Re};class fr{constructor(t=0,r=0){fr.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,s=this.y,a=t.elements;return this.x=a[0]*r+a[3]*s+a[6],this.y=a[1]*r+a[4]*s+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(Qt(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y;return r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const s=Math.cos(r),a=Math.sin(r),u=this.x-t.x,_=this.y-t.y;return this.x=u*s-_*a+t.x,this.y=u*a+_*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Gi{constructor(t,r,s,a,u,_,C,L,U){Gi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,r,s,a,u,_,C,L,U)}set(t,r,s,a,u,_,C,L,U){const Q=this.elements;return Q[0]=t,Q[1]=a,Q[2]=C,Q[3]=r,Q[4]=u,Q[5]=L,Q[6]=s,Q[7]=_,Q[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(t,r,s){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,a=r.elements,u=this.elements,_=s[0],C=s[3],L=s[6],U=s[1],Q=s[4],ae=s[7],fe=s[2],ye=s[5],Me=s[8],Ue=a[0],Pe=a[3],Ie=a[6],tt=a[1],it=a[4],rt=a[7],$t=a[2],At=a[5],Ft=a[8];return u[0]=_*Ue+C*tt+L*$t,u[3]=_*Pe+C*it+L*At,u[6]=_*Ie+C*rt+L*Ft,u[1]=U*Ue+Q*tt+ae*$t,u[4]=U*Pe+Q*it+ae*At,u[7]=U*Ie+Q*rt+ae*Ft,u[2]=fe*Ue+ye*tt+Me*$t,u[5]=fe*Pe+ye*it+Me*At,u[8]=fe*Ie+ye*rt+Me*Ft,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],C=t[5],L=t[6],U=t[7],Q=t[8];return r*_*Q-r*C*U-s*u*Q+s*C*L+a*u*U-a*_*L}invert(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],C=t[5],L=t[6],U=t[7],Q=t[8],ae=Q*_-C*U,fe=C*L-Q*u,ye=U*u-_*L,Me=r*ae+s*fe+a*ye;if(0===Me)return this.set(0,0,0,0,0,0,0,0,0);const Ue=1/Me;return t[0]=ae*Ue,t[1]=(a*U-Q*s)*Ue,t[2]=(C*s-a*_)*Ue,t[3]=fe*Ue,t[4]=(Q*r-a*L)*Ue,t[5]=(a*u-C*r)*Ue,t[6]=ye*Ue,t[7]=(s*L-U*r)*Ue,t[8]=(_*r-s*u)*Ue,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,s,a,u,_,C){const L=Math.cos(u),U=Math.sin(u);return this.set(s*L,s*U,-s*(L*_+U*C)+_+t,-a*U,a*L,-a*(-U*_+L*C)+C+r,0,0,1),this}scale(t,r){return this.premultiply(uu.makeScale(t,r)),this}rotate(t){return this.premultiply(uu.makeRotation(-t)),this}translate(t,r){return this.premultiply(uu.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,s,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,s=t.elements;for(let a=0;a<9;a++)if(r[a]!==s[a])return!1;return!0}fromArray(t,r=0){for(let s=0;s<9;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const uu=new Gi;function jf(v){for(let t=v.length-1;t>=0;--t)if(v[t]>=65535)return!0;return!1}function _l(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function bd(){const v=_l("canvas");return v.style.display="block",v}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const du={};function Fl(v){v in du||(du[v]=!0,console.warn(v))}const Hi=(new Gi).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Os=(new Gi).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Uf(){const v={enabled:!0,workingColorSpace:Vi,spaces:{},convert:function(a,u,_){return!1===this.enabled||u===_||!u||!_||(this.spaces[u].transfer===Li&&(a.r=Bl(a.r),a.g=Bl(a.g),a.b=Bl(a.b)),this.spaces[u].primaries!==this.spaces[_].primaries&&(a.applyMatrix3(this.spaces[u].toXYZ),a.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===Li&&(a.r=hu(a.r),a.g=hu(a.g),a.b=hu(a.b))),a},fromWorkingColorSpace:function(a,u){return this.convert(a,this.workingColorSpace,u)},toWorkingColorSpace:function(a,u){return this.convert(a,u,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return""===a?ds:this.spaces[a].transfer},getLuminanceCoefficients:function(a,u=this.workingColorSpace){return a.fromArray(this.spaces[u].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,u,_){return a.copy(this.spaces[u].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],s=[.3127,.329];return v.define({[Vi]:{primaries:t,whitePoint:s,transfer:ds,toXYZ:Hi,fromXYZ:Os,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Pi},outputColorSpaceConfig:{drawingBufferColorSpace:Pi}},[Pi]:{primaries:t,whitePoint:s,transfer:Li,toXYZ:Hi,fromXYZ:Os,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Pi}}}),v}const Ss=Uf();function Bl(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function hu(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}let Jl;class Uu{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Jl&&(Jl=_l("canvas")),Jl.width=t.width,Jl.height=t.height;const s=Jl.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),r=Jl}return r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=_l("canvas");r.width=t.width,r.height=t.height;const s=r.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const a=s.getImageData(0,0,t.width,t.height),u=a.data;for(let _=0;_<u.length;_++)u[_]=255*Bl(u[_]/255);return s.putImageData(a,0,0),r}if(t.data){const r=t.data.slice(0);for(let s=0;s<r.length;s++)r[s]=r instanceof Uint8Array||r instanceof Uint8ClampedArray?Math.floor(255*Bl(r[s]/255)):Bl(r[s]);return{data:r,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let hs=0;class Da{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hs++}),this.uuid=at(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:""},a=this.data;if(null!==a){let u;if(Array.isArray(a)){u=[];for(let _=0,C=a.length;_<C;_++)u.push(Ql(a[_].isDataTexture?a[_].image:a[_]))}else u=Ql(a);s.url=u}return r||(t.images[this.uuid]=s),s}}function Ql(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?Uu.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ha=0,no=(()=>{class v extends wn{constructor(r=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,a=_n,u=_n,_=Sn,C=sr,L=Vt,U=Tr,Q=v.DEFAULT_ANISOTROPY,ae=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ha++}),this.uuid=at(),this.name="",this.source=new Da(r),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=a,this.wrapT=u,this.magFilter=_,this.minFilter=C,this.anisotropy=Q,this.format=L,this.internalFormat=null,this.type=U,this.offset=new fr(0,0),this.repeat=new fr(1,1),this.center=new fr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ae,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.renderTarget=r.renderTarget,this.isRenderTargetTexture=r.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),s||(r.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case qt:r.x=r.x-Math.floor(r.x);break;case _n:r.x=r.x<0?0:1;break;case 1002:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case qt:r.y=r.y-Math.floor(r.y);break;case _n:r.y=r.y<0?0:1;break;case 1002:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(r){!0===r&&this.pmremVersion++}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class Ds{constructor(t=0,r=0,s=0,a=1){Ds.prototype.isVector4=!0,this.x=t,this.y=r,this.z=s,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,s,a){return this.x=t,this.y=r,this.z=s,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,s=this.y,a=this.z,u=this.w,_=t.elements;return this.x=_[0]*r+_[4]*s+_[8]*a+_[12]*u,this.y=_[1]*r+_[5]*s+_[9]*a+_[13]*u,this.z=_[2]*r+_[6]*s+_[10]*a+_[14]*u,this.w=_[3]*r+_[7]*s+_[11]*a+_[15]*u,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,s,a,u;const L=t.elements,U=L[0],Q=L[4],ae=L[8],fe=L[1],ye=L[5],Me=L[9],Ue=L[2],Pe=L[6],Ie=L[10];if(Math.abs(Q-fe)<.01&&Math.abs(ae-Ue)<.01&&Math.abs(Me-Pe)<.01){if(Math.abs(Q+fe)<.1&&Math.abs(ae+Ue)<.1&&Math.abs(Me+Pe)<.1&&Math.abs(U+ye+Ie-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const it=(U+1)/2,rt=(ye+1)/2,$t=(Ie+1)/2,At=(Q+fe)/4,Ft=(ae+Ue)/4,Wt=(Me+Pe)/4;return it>rt&&it>$t?it<.01?(s=0,a=.707106781,u=.707106781):(s=Math.sqrt(it),a=At/s,u=Ft/s):rt>$t?rt<.01?(s=.707106781,a=0,u=.707106781):(a=Math.sqrt(rt),s=At/a,u=Wt/a):$t<.01?(s=.707106781,a=.707106781,u=0):(u=Math.sqrt($t),s=Ft/u,a=Wt/u),this.set(s,a,u,r),this}let tt=Math.sqrt((Pe-Me)*(Pe-Me)+(ae-Ue)*(ae-Ue)+(fe-Q)*(fe-Q));return Math.abs(tt)<.001&&(tt=1),this.x=(Pe-Me)/tt,this.y=(ae-Ue)/tt,this.z=(fe-Q)/tt,this.w=Math.acos((U+ye+Ie-1)/2),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this.z=Qt(this.z,t.z,r.z),this.w=Qt(this.w,t.w,r.w),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this.z=Qt(this.z,t,r),this.w=Qt(this.w,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this.w=t.w+(r.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class fh extends wn{constructor(t=1,r=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new Ds(0,0,t,r),this.scissorTest=!1,this.viewport=new Ds(0,0,t,r);const a={width:t,height:r,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new no(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const _=s.count;for(let C=0;C<_;C++)this.textures[C]=u.clone(),this.textures[C].isRenderTargetTexture=!0,this.textures[C].renderTarget=this;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,r,s=1){if(this.width!==t||this.height!==r||this.depth!==s){this.width=t,this.height=r,this.depth=s;for(let a=0,u=this.textures.length;a<u;a++)this.textures[a].image.width=t,this.textures[a].image.height=r,this.textures[a].image.depth=s;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,s=t.textures.length;r<s;r++){this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const a=Object.assign({},t.textures[r].image);this.textures[r].source=new Da(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Se extends fh{constructor(t=1,r=1,s={}){super(t,r,s),this.isWebGLRenderTarget=!0}}class Ze extends no{constructor(t=null,r=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:s,depth:a},this.magFilter=ln,this.minFilter=ln,this.wrapR=_n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class qe extends no{constructor(t=null,r=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:s,depth:a},this.magFilter=ln,this.minFilter=ln,this.wrapR=_n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class en{constructor(t=0,r=0,s=0,a=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=s,this._w=a}static slerpFlat(t,r,s,a,u,_,C){let L=s[a+0],U=s[a+1],Q=s[a+2],ae=s[a+3];const fe=u[_+0],ye=u[_+1],Me=u[_+2],Ue=u[_+3];if(0===C)return t[r+0]=L,t[r+1]=U,t[r+2]=Q,void(t[r+3]=ae);if(1===C)return t[r+0]=fe,t[r+1]=ye,t[r+2]=Me,void(t[r+3]=Ue);if(ae!==Ue||L!==fe||U!==ye||Q!==Me){let Pe=1-C;const Ie=L*fe+U*ye+Q*Me+ae*Ue,tt=Ie>=0?1:-1,it=1-Ie*Ie;if(it>Number.EPSILON){const $t=Math.sqrt(it),At=Math.atan2($t,Ie*tt);Pe=Math.sin(Pe*At)/$t,C=Math.sin(C*At)/$t}const rt=C*tt;if(L=L*Pe+fe*rt,U=U*Pe+ye*rt,Q=Q*Pe+Me*rt,ae=ae*Pe+Ue*rt,Pe===1-C){const $t=1/Math.sqrt(L*L+U*U+Q*Q+ae*ae);L*=$t,U*=$t,Q*=$t,ae*=$t}}t[r]=L,t[r+1]=U,t[r+2]=Q,t[r+3]=ae}static multiplyQuaternionsFlat(t,r,s,a,u,_){const C=s[a],L=s[a+1],U=s[a+2],Q=s[a+3],ae=u[_],fe=u[_+1],ye=u[_+2],Me=u[_+3];return t[r]=C*Me+Q*ae+L*ye-U*fe,t[r+1]=L*Me+Q*fe+U*ae-C*ye,t[r+2]=U*Me+Q*ye+C*fe-L*ae,t[r+3]=Q*Me-C*ae-L*fe-U*ye,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,s,a){return this._x=t,this._y=r,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){const s=t._x,a=t._y,u=t._z,_=t._order,C=Math.cos,L=Math.sin,U=C(s/2),Q=C(a/2),ae=C(u/2),fe=L(s/2),ye=L(a/2),Me=L(u/2);switch(_){case"XYZ":this._x=fe*Q*ae+U*ye*Me,this._y=U*ye*ae-fe*Q*Me,this._z=U*Q*Me+fe*ye*ae,this._w=U*Q*ae-fe*ye*Me;break;case"YXZ":this._x=fe*Q*ae+U*ye*Me,this._y=U*ye*ae-fe*Q*Me,this._z=U*Q*Me-fe*ye*ae,this._w=U*Q*ae+fe*ye*Me;break;case"ZXY":this._x=fe*Q*ae-U*ye*Me,this._y=U*ye*ae+fe*Q*Me,this._z=U*Q*Me+fe*ye*ae,this._w=U*Q*ae-fe*ye*Me;break;case"ZYX":this._x=fe*Q*ae-U*ye*Me,this._y=U*ye*ae+fe*Q*Me,this._z=U*Q*Me-fe*ye*ae,this._w=U*Q*ae+fe*ye*Me;break;case"YZX":this._x=fe*Q*ae+U*ye*Me,this._y=U*ye*ae+fe*Q*Me,this._z=U*Q*Me-fe*ye*ae,this._w=U*Q*ae-fe*ye*Me;break;case"XZY":this._x=fe*Q*ae-U*ye*Me,this._y=U*ye*ae-fe*Q*Me,this._z=U*Q*Me+fe*ye*ae,this._w=U*Q*ae+fe*ye*Me;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return!0===r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const s=r/2,a=Math.sin(s);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,s=r[0],a=r[4],u=r[8],_=r[1],C=r[5],L=r[9],U=r[2],Q=r[6],ae=r[10],fe=s+C+ae;if(fe>0){const ye=.5/Math.sqrt(fe+1);this._w=.25/ye,this._x=(Q-L)*ye,this._y=(u-U)*ye,this._z=(_-a)*ye}else if(s>C&&s>ae){const ye=2*Math.sqrt(1+s-C-ae);this._w=(Q-L)/ye,this._x=.25*ye,this._y=(a+_)/ye,this._z=(u+U)/ye}else if(C>ae){const ye=2*Math.sqrt(1+C-s-ae);this._w=(u-U)/ye,this._x=(a+_)/ye,this._y=.25*ye,this._z=(L+Q)/ye}else{const ye=2*Math.sqrt(1+ae-s-C);this._w=(_-a)/ye,this._x=(u+U)/ye,this._y=(L+Q)/ye,this._z=.25*ye}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let s=t.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Qt(this.dot(t),-1,1)))}rotateTowards(t,r){const s=this.angleTo(t);if(0===s)return this;const a=Math.min(1,r/s);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const s=t._x,a=t._y,u=t._z,_=t._w,C=r._x,L=r._y,U=r._z,Q=r._w;return this._x=s*Q+_*C+a*U-u*L,this._y=a*Q+_*L+u*C-s*U,this._z=u*Q+_*U+s*L-a*C,this._w=_*Q-s*C-a*L-u*U,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const s=this._x,a=this._y,u=this._z,_=this._w;let C=_*t._w+s*t._x+a*t._y+u*t._z;if(C<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,C=-C):this.copy(t),C>=1)return this._w=_,this._x=s,this._y=a,this._z=u,this;const L=1-C*C;if(L<=Number.EPSILON){const ye=1-r;return this._w=ye*_+r*this._w,this._x=ye*s+r*this._x,this._y=ye*a+r*this._y,this._z=ye*u+r*this._z,this.normalize(),this}const U=Math.sqrt(L),Q=Math.atan2(U,C),ae=Math.sin((1-r)*Q)/U,fe=Math.sin(r*Q)/U;return this._w=_*ae+this._w*fe,this._x=s*ae+this._x*fe,this._y=a*ae+this._y*fe,this._z=u*ae+this._z*fe,this._onChangeCallback(),this}slerpQuaternions(t,r,s){return this.copy(t).slerp(r,s)}random(){const t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),s=Math.random(),a=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(a*Math.sin(t),a*Math.cos(t),u*Math.sin(r),u*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mt{constructor(t=0,r=0,s=0){mt.prototype.isVector3=!0,this.x=t,this.y=r,this.z=s}set(t,r,s){return void 0===s&&(s=this.z),this.x=t,this.y=r,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(zi.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(zi.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,s=this.y,a=this.z,u=t.elements;return this.x=u[0]*r+u[3]*s+u[6]*a,this.y=u[1]*r+u[4]*s+u[7]*a,this.z=u[2]*r+u[5]*s+u[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,s=this.y,a=this.z,u=t.elements,_=1/(u[3]*r+u[7]*s+u[11]*a+u[15]);return this.x=(u[0]*r+u[4]*s+u[8]*a+u[12])*_,this.y=(u[1]*r+u[5]*s+u[9]*a+u[13])*_,this.z=(u[2]*r+u[6]*s+u[10]*a+u[14])*_,this}applyQuaternion(t){const r=this.x,s=this.y,a=this.z,u=t.x,_=t.y,C=t.z,L=t.w,U=2*(_*a-C*s),Q=2*(C*r-u*a),ae=2*(u*s-_*r);return this.x=r+L*U+_*ae-C*Q,this.y=s+L*Q+C*U-u*ae,this.z=a+L*ae+u*Q-_*U,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,s=this.y,a=this.z,u=t.elements;return this.x=u[0]*r+u[4]*s+u[8]*a,this.y=u[1]*r+u[5]*s+u[9]*a,this.z=u[2]*r+u[6]*s+u[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Qt(this.x,t.x,r.x),this.y=Qt(this.y,t.y,r.y),this.z=Qt(this.z,t.z,r.z),this}clampScalar(t,r){return this.x=Qt(this.x,t,r),this.y=Qt(this.y,t,r),this.z=Qt(this.z,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Qt(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const s=t.x,a=t.y,u=t.z,_=r.x,C=r.y,L=r.z;return this.x=a*L-u*C,this.y=u*_-s*L,this.z=s*C-a*_,this}projectOnVector(t){const r=t.lengthSq();if(0===r)return this.set(0,0,0);const s=t.dot(this)/r;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Ir.copy(this).projectOnVector(t),this.sub(Ir)}reflect(t){return this.sub(Ir.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(Qt(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y,a=this.z-t.z;return r*r+s*s+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,s){const a=Math.sin(r)*t;return this.x=a*Math.sin(s),this.y=Math.cos(r)*t,this.z=a*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,s){return this.x=t*Math.sin(r),this.y=s,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=s,this.z=a,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,r=2*Math.random()-1,s=Math.sqrt(1-r*r);return this.x=s*Math.cos(t),this.y=r,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ir=new mt,zi=new en;class Ei{constructor(t=new mt(1/0,1/0,1/0),r=new mt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r+=3)this.expandByPoint(hi.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,s=t.count;r<s;r++)this.expandByPoint(hi.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const s=hi.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===r&&void 0!==u&&!0!==t.isInstancedMesh)for(let _=0,C=u.count;_<C;_++)!0===t.isMesh?t.getVertexPosition(_,hi):hi.fromBufferAttribute(u,_),hi.applyMatrix4(t.matrixWorld),this.expandByPoint(hi);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Is.copy(t.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),Is.copy(s.boundingBox)),Is.applyMatrix4(t.matrixWorld),this.union(Is)}const a=t.children;for(let u=0,_=a.length;u<_;u++)this.expandByObject(a[u],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,hi),hi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,s;return t.normal.x>0?(r=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),r<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(qa),Ka.subVectors(this.max,qa),Br.subVectors(t.a,qa),Ws.subVectors(t.b,qa),fa.subVectors(t.c,qa),ro.subVectors(Ws,Br),xa.subVectors(fa,Ws),wa.subVectors(Br,fa);let r=[0,-ro.z,ro.y,0,-xa.z,xa.y,0,-wa.z,wa.y,ro.z,0,-ro.x,xa.z,0,-xa.x,wa.z,0,-wa.x,-ro.y,ro.x,0,-xa.y,xa.x,0,-wa.y,wa.x,0];return!(!fu(r,Br,Ws,fa,Ka)||(r=[1,0,0,0,1,0,0,0,1],!fu(r,Br,Ws,fa,Ka)))&&(bo.crossVectors(ro,xa),r=[bo.x,bo.y,bo.z],fu(r,Br,Ws,fa,Ka))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,hi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(hi).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ns[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ns[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ns[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ns[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ns[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ns[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ns[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ns[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ns)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ns=[new mt,new mt,new mt,new mt,new mt,new mt,new mt,new mt],hi=new mt,Is=new Ei,Br=new mt,Ws=new mt,fa=new mt,ro=new mt,xa=new mt,wa=new mt,qa=new mt,Ka=new mt,bo=new mt,bl=new mt;function fu(v,t,r,s,a){for(let u=0,_=v.length-3;u<=_;u+=3){bl.fromArray(v,u);const C=a.x*Math.abs(bl.x)+a.y*Math.abs(bl.y)+a.z*Math.abs(bl.z),L=t.dot(bl),U=r.dot(bl),Q=s.dot(bl);if(Math.max(-Math.max(L,U,Q),Math.min(L,U,Q))>C)return!1}return!0}const wd=new Ei,xl=new mt,ph=new mt;class zs{constructor(t=new mt,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const s=this.center;void 0!==r?s.copy(r):wd.setFromPoints(t).getCenter(s);let a=0;for(let u=0,_=t.length;u<_;u++)a=Math.max(a,s.distanceToSquared(t[u]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const s=this.center.distanceToSquared(t);return r.copy(t),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xl.subVectors(t,this.center);const r=xl.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),a=.5*(s-this.radius);this.center.addScaledVector(xl,a/s),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ph.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xl.copy(t.center).add(ph)),this.expandByPoint(xl.copy(t.center).sub(ph))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ua=new mt,mh=new mt,Nc=new mt,Ya=new mt,pu=new mt,Bf=new mt,Bu=new mt;class Ba{constructor(t=new mt,r=new mt(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ua)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=Ua.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(Ua.copy(this.origin).addScaledVector(this.direction,r),Ua.distanceToSquared(t))}distanceSqToSegment(t,r,s,a){mh.copy(t).add(r).multiplyScalar(.5),Nc.copy(r).sub(t).normalize(),Ya.copy(this.origin).sub(mh);const u=.5*t.distanceTo(r),_=-this.direction.dot(Nc),C=Ya.dot(this.direction),L=-Ya.dot(Nc),U=Ya.lengthSq(),Q=Math.abs(1-_*_);let ae,fe,ye,Me;if(Q>0)if(ae=_*L-C,fe=_*C-L,Me=u*Q,ae>=0)if(fe>=-Me)if(fe<=Me){const Ue=1/Q;ae*=Ue,fe*=Ue,ye=ae*(ae+_*fe+2*C)+fe*(_*ae+fe+2*L)+U}else fe=u,ae=Math.max(0,-(_*fe+C)),ye=-ae*ae+fe*(fe+2*L)+U;else fe=-u,ae=Math.max(0,-(_*fe+C)),ye=-ae*ae+fe*(fe+2*L)+U;else fe<=-Me?(ae=Math.max(0,-(-_*u+C)),fe=ae>0?-u:Math.min(Math.max(-u,-L),u),ye=-ae*ae+fe*(fe+2*L)+U):fe<=Me?(ae=0,fe=Math.min(Math.max(-u,-L),u),ye=fe*(fe+2*L)+U):(ae=Math.max(0,-(_*u+C)),fe=ae>0?u:Math.min(Math.max(-u,-L),u),ye=-ae*ae+fe*(fe+2*L)+U);else fe=_>0?-u:u,ae=Math.max(0,-(_*fe+C)),ye=-ae*ae+fe*(fe+2*L)+U;return s&&s.copy(this.origin).addScaledVector(this.direction,ae),a&&a.copy(mh).addScaledVector(Nc,fe),ye}intersectSphere(t,r){Ua.subVectors(t.center,this.origin);const s=Ua.dot(this.direction),a=Ua.dot(Ua)-s*s,u=t.radius*t.radius;if(a>u)return null;const _=Math.sqrt(u-a),C=s-_,L=s+_;return L<0?null:this.at(C<0?L:C,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/r;return s>=0?s:null}intersectPlane(t,r){const s=this.distanceToPlane(t);return null===s?null:this.at(s,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let s,a,u,_,C,L;const U=1/this.direction.x,Q=1/this.direction.y,ae=1/this.direction.z,fe=this.origin;return U>=0?(s=(t.min.x-fe.x)*U,a=(t.max.x-fe.x)*U):(s=(t.max.x-fe.x)*U,a=(t.min.x-fe.x)*U),Q>=0?(u=(t.min.y-fe.y)*Q,_=(t.max.y-fe.y)*Q):(u=(t.max.y-fe.y)*Q,_=(t.min.y-fe.y)*Q),s>_||u>a||((u>s||isNaN(s))&&(s=u),(_<a||isNaN(a))&&(a=_),ae>=0?(C=(t.min.z-fe.z)*ae,L=(t.max.z-fe.z)*ae):(C=(t.max.z-fe.z)*ae,L=(t.min.z-fe.z)*ae),s>L||C>a)||((C>s||s!=s)&&(s=C),(L<a||a!=a)&&(a=L),a<0)?null:this.at(s>=0?s:a,r)}intersectsBox(t){return null!==this.intersectBox(t,Ua)}intersectTriangle(t,r,s,a,u){pu.subVectors(r,t),Bf.subVectors(s,t),Bu.crossVectors(pu,Bf);let C,_=this.direction.dot(Bu);if(_>0){if(a)return null;C=1}else{if(!(_<0))return null;C=-1,_=-_}Ya.subVectors(this.origin,t);const L=C*this.direction.dot(Bf.crossVectors(Ya,Bf));if(L<0)return null;const U=C*this.direction.dot(pu.cross(Ya));if(U<0||L+U>_)return null;const Q=-C*Ya.dot(Bu);return Q<0?null:this.at(Q/_,u)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Mi{constructor(t,r,s,a,u,_,C,L,U,Q,ae,fe,ye,Me,Ue,Pe){Mi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,r,s,a,u,_,C,L,U,Q,ae,fe,ye,Me,Ue,Pe)}set(t,r,s,a,u,_,C,L,U,Q,ae,fe,ye,Me,Ue,Pe){const Ie=this.elements;return Ie[0]=t,Ie[4]=r,Ie[8]=s,Ie[12]=a,Ie[1]=u,Ie[5]=_,Ie[9]=C,Ie[13]=L,Ie[2]=U,Ie[6]=Q,Ie[10]=ae,Ie[14]=fe,Ie[3]=ye,Ie[7]=Me,Ie[11]=Ue,Ie[15]=Pe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mi).fromArray(this.elements)}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(t){const r=this.elements,s=t.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,s){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,r,s){return this.set(t.x,r.x,s.x,0,t.y,r.y,s.y,0,t.z,r.z,s.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,s=t.elements,a=1/jc.setFromMatrixColumn(t,0).length(),u=1/jc.setFromMatrixColumn(t,1).length(),_=1/jc.setFromMatrixColumn(t,2).length();return r[0]=s[0]*a,r[1]=s[1]*a,r[2]=s[2]*a,r[3]=0,r[4]=s[4]*u,r[5]=s[5]*u,r[6]=s[6]*u,r[7]=0,r[8]=s[8]*_,r[9]=s[9]*_,r[10]=s[10]*_,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,s=t.x,a=t.y,u=t.z,_=Math.cos(s),C=Math.sin(s),L=Math.cos(a),U=Math.sin(a),Q=Math.cos(u),ae=Math.sin(u);if("XYZ"===t.order){const fe=_*Q,ye=_*ae,Me=C*Q,Ue=C*ae;r[0]=L*Q,r[4]=-L*ae,r[8]=U,r[1]=ye+Me*U,r[5]=fe-Ue*U,r[9]=-C*L,r[2]=Ue-fe*U,r[6]=Me+ye*U,r[10]=_*L}else if("YXZ"===t.order){const fe=L*Q,ye=L*ae,Me=U*Q,Ue=U*ae;r[0]=fe+Ue*C,r[4]=Me*C-ye,r[8]=_*U,r[1]=_*ae,r[5]=_*Q,r[9]=-C,r[2]=ye*C-Me,r[6]=Ue+fe*C,r[10]=_*L}else if("ZXY"===t.order){const fe=L*Q,ye=L*ae,Me=U*Q,Ue=U*ae;r[0]=fe-Ue*C,r[4]=-_*ae,r[8]=Me+ye*C,r[1]=ye+Me*C,r[5]=_*Q,r[9]=Ue-fe*C,r[2]=-_*U,r[6]=C,r[10]=_*L}else if("ZYX"===t.order){const fe=_*Q,ye=_*ae,Me=C*Q,Ue=C*ae;r[0]=L*Q,r[4]=Me*U-ye,r[8]=fe*U+Ue,r[1]=L*ae,r[5]=Ue*U+fe,r[9]=ye*U-Me,r[2]=-U,r[6]=C*L,r[10]=_*L}else if("YZX"===t.order){const fe=_*L,ye=_*U,Me=C*L,Ue=C*U;r[0]=L*Q,r[4]=Ue-fe*ae,r[8]=Me*ae+ye,r[1]=ae,r[5]=_*Q,r[9]=-C*Q,r[2]=-U*Q,r[6]=ye*ae+Me,r[10]=fe-Ue*ae}else if("XZY"===t.order){const fe=_*L,ye=_*U,Me=C*L,Ue=C*U;r[0]=L*Q,r[4]=-ae,r[8]=U*Q,r[1]=fe*ae+Ue,r[5]=_*Q,r[9]=ye*ae-Me,r[2]=Me*ae-ye,r[6]=C*Q,r[10]=Ue*ae+fe}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ib,t,gh)}lookAt(t,r,s){const a=this.elements;return To.subVectors(t,r),0===To.lengthSq()&&(To.z=1),To.normalize(),ra.crossVectors(s,To),0===ra.lengthSq()&&(1===Math.abs(s.z)?To.x+=1e-4:To.z+=1e-4,To.normalize(),ra.crossVectors(s,To)),ra.normalize(),fs.crossVectors(To,ra),a[0]=ra.x,a[4]=fs.x,a[8]=To.x,a[1]=ra.y,a[5]=fs.y,a[9]=To.y,a[2]=ra.z,a[6]=fs.z,a[10]=To.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,a=r.elements,u=this.elements,_=s[0],C=s[4],L=s[8],U=s[12],Q=s[1],ae=s[5],fe=s[9],ye=s[13],Me=s[2],Ue=s[6],Pe=s[10],Ie=s[14],tt=s[3],it=s[7],rt=s[11],$t=s[15],At=a[0],Ft=a[4],Wt=a[8],Mt=a[12],wt=a[1],gn=a[5],Kn=a[9],Hn=a[13],Jn=a[2],pr=a[6],Yn=a[10],Nr=a[14],tr=a[3],Vr=a[7],Qr=a[11],vi=a[15];return u[0]=_*At+C*wt+L*Jn+U*tr,u[4]=_*Ft+C*gn+L*pr+U*Vr,u[8]=_*Wt+C*Kn+L*Yn+U*Qr,u[12]=_*Mt+C*Hn+L*Nr+U*vi,u[1]=Q*At+ae*wt+fe*Jn+ye*tr,u[5]=Q*Ft+ae*gn+fe*pr+ye*Vr,u[9]=Q*Wt+ae*Kn+fe*Yn+ye*Qr,u[13]=Q*Mt+ae*Hn+fe*Nr+ye*vi,u[2]=Me*At+Ue*wt+Pe*Jn+Ie*tr,u[6]=Me*Ft+Ue*gn+Pe*pr+Ie*Vr,u[10]=Me*Wt+Ue*Kn+Pe*Yn+Ie*Qr,u[14]=Me*Mt+Ue*Hn+Pe*Nr+Ie*vi,u[3]=tt*At+it*wt+rt*Jn+$t*tr,u[7]=tt*Ft+it*gn+rt*pr+$t*Vr,u[11]=tt*Wt+it*Kn+rt*Yn+$t*Qr,u[15]=tt*Mt+it*Hn+rt*Nr+$t*vi,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[4],a=t[8],u=t[12],_=t[1],C=t[5],L=t[9],U=t[13],Q=t[2],ae=t[6],fe=t[10],ye=t[14];return t[3]*(+u*L*ae-a*U*ae-u*C*fe+s*U*fe+a*C*ye-s*L*ye)+t[7]*(+r*L*ye-r*U*fe+u*_*fe-a*_*ye+a*U*Q-u*L*Q)+t[11]*(+r*U*ae-r*C*ye-u*_*ae+s*_*ye+u*C*Q-s*U*Q)+t[15]*(-a*C*Q-r*L*ae+r*C*fe+a*_*ae-s*_*fe+s*L*Q)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,s){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=r,a[14]=s),this}invert(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],C=t[5],L=t[6],U=t[7],Q=t[8],ae=t[9],fe=t[10],ye=t[11],Me=t[12],Ue=t[13],Pe=t[14],Ie=t[15],tt=ae*Pe*U-Ue*fe*U+Ue*L*ye-C*Pe*ye-ae*L*Ie+C*fe*Ie,it=Me*fe*U-Q*Pe*U-Me*L*ye+_*Pe*ye+Q*L*Ie-_*fe*Ie,rt=Q*Ue*U-Me*ae*U+Me*C*ye-_*Ue*ye-Q*C*Ie+_*ae*Ie,$t=Me*ae*L-Q*Ue*L-Me*C*fe+_*Ue*fe+Q*C*Pe-_*ae*Pe,At=r*tt+s*it+a*rt+u*$t;if(0===At)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ft=1/At;return t[0]=tt*Ft,t[1]=(Ue*fe*u-ae*Pe*u-Ue*a*ye+s*Pe*ye+ae*a*Ie-s*fe*Ie)*Ft,t[2]=(C*Pe*u-Ue*L*u+Ue*a*U-s*Pe*U-C*a*Ie+s*L*Ie)*Ft,t[3]=(ae*L*u-C*fe*u-ae*a*U+s*fe*U+C*a*ye-s*L*ye)*Ft,t[4]=it*Ft,t[5]=(Q*Pe*u-Me*fe*u+Me*a*ye-r*Pe*ye-Q*a*Ie+r*fe*Ie)*Ft,t[6]=(Me*L*u-_*Pe*u-Me*a*U+r*Pe*U+_*a*Ie-r*L*Ie)*Ft,t[7]=(_*fe*u-Q*L*u+Q*a*U-r*fe*U-_*a*ye+r*L*ye)*Ft,t[8]=rt*Ft,t[9]=(Me*ae*u-Q*Ue*u-Me*s*ye+r*Ue*ye+Q*s*Ie-r*ae*Ie)*Ft,t[10]=(_*Ue*u-Me*C*u+Me*s*U-r*Ue*U-_*s*Ie+r*C*Ie)*Ft,t[11]=(Q*C*u-_*ae*u-Q*s*U+r*ae*U+_*s*ye-r*C*ye)*Ft,t[12]=$t*Ft,t[13]=(Q*Ue*a-Me*ae*a+Me*s*fe-r*Ue*fe-Q*s*Pe+r*ae*Pe)*Ft,t[14]=(Me*C*a-_*Ue*a-Me*s*L+r*Ue*L+_*s*Pe-r*C*Pe)*Ft,t[15]=(_*ae*a-Q*C*a+Q*s*L-r*ae*L-_*s*fe+r*C*fe)*Ft,this}scale(t){const r=this.elements,s=t.x,a=t.y,u=t.z;return r[0]*=s,r[4]*=a,r[8]*=u,r[1]*=s,r[5]*=a,r[9]*=u,r[2]*=s,r[6]*=a,r[10]*=u,r[3]*=s,r[7]*=a,r[11]*=u,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,r,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const s=Math.cos(r),a=Math.sin(r),u=1-s,_=t.x,C=t.y,L=t.z,U=u*_,Q=u*C;return this.set(U*_+s,U*C-a*L,U*L+a*C,0,U*C+a*L,Q*C+s,Q*L-a*_,0,U*L-a*C,Q*L+a*_,u*L*L+s,0,0,0,0,1),this}makeScale(t,r,s){return this.set(t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,r,s,a,u,_){return this.set(1,s,u,0,t,1,_,0,r,a,1,0,0,0,0,1),this}compose(t,r,s){const a=this.elements,u=r._x,_=r._y,C=r._z,L=r._w,U=u+u,Q=_+_,ae=C+C,fe=u*U,ye=u*Q,Me=u*ae,Ue=_*Q,Pe=_*ae,Ie=C*ae,tt=L*U,it=L*Q,rt=L*ae,$t=s.x,At=s.y,Ft=s.z;return a[0]=(1-(Ue+Ie))*$t,a[1]=(ye+rt)*$t,a[2]=(Me-it)*$t,a[3]=0,a[4]=(ye-rt)*At,a[5]=(1-(fe+Ie))*At,a[6]=(Pe+tt)*At,a[7]=0,a[8]=(Me+it)*Ft,a[9]=(Pe-tt)*Ft,a[10]=(1-(fe+Ue))*Ft,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,r,s){const a=this.elements;let u=jc.set(a[0],a[1],a[2]).length();const _=jc.set(a[4],a[5],a[6]).length(),C=jc.set(a[8],a[9],a[10]).length();this.determinant()<0&&(u=-u),t.x=a[12],t.y=a[13],t.z=a[14],Ia.copy(this);const U=1/u,Q=1/_,ae=1/C;return Ia.elements[0]*=U,Ia.elements[1]*=U,Ia.elements[2]*=U,Ia.elements[4]*=Q,Ia.elements[5]*=Q,Ia.elements[6]*=Q,Ia.elements[8]*=ae,Ia.elements[9]*=ae,Ia.elements[10]*=ae,r.setFromRotationMatrix(Ia),s.x=u,s.y=_,s.z=C,this}makePerspective(t,r,s,a,u,_,C=bt){const L=this.elements,U=2*u/(r-t),Q=2*u/(s-a),ae=(r+t)/(r-t),fe=(s+a)/(s-a);let ye,Me;if(C===bt)ye=-(_+u)/(_-u),Me=-2*_*u/(_-u);else{if(2001!==C)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+C);ye=-_/(_-u),Me=-_*u/(_-u)}return L[0]=U,L[4]=0,L[8]=ae,L[12]=0,L[1]=0,L[5]=Q,L[9]=fe,L[13]=0,L[2]=0,L[6]=0,L[10]=ye,L[14]=Me,L[3]=0,L[7]=0,L[11]=-1,L[15]=0,this}makeOrthographic(t,r,s,a,u,_,C=bt){const L=this.elements,U=1/(r-t),Q=1/(s-a),ae=1/(_-u),fe=(r+t)*U,ye=(s+a)*Q;let Me,Ue;if(C===bt)Me=(_+u)*ae,Ue=-2*ae;else{if(2001!==C)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+C);Me=u*ae,Ue=-1*ae}return L[0]=2*U,L[4]=0,L[8]=0,L[12]=-fe,L[1]=0,L[5]=2*Q,L[9]=0,L[13]=-ye,L[2]=0,L[6]=0,L[10]=Ue,L[14]=-Me,L[3]=0,L[7]=0,L[11]=0,L[15]=1,this}equals(t){const r=this.elements,s=t.elements;for(let a=0;a<16;a++)if(r[a]!==s[a])return!1;return!0}fromArray(t,r=0){for(let s=0;s<16;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t[r+9]=s[9],t[r+10]=s[10],t[r+11]=s[11],t[r+12]=s[12],t[r+13]=s[13],t[r+14]=s[14],t[r+15]=s[15],t}}const jc=new mt,Ia=new Mi,Ib=new mt(0,0,0),gh=new mt(1,1,1),ra=new mt,fs=new mt,To=new mt,yh=new Mi,vh=new en;let Za=(()=>{class v{constructor(r=0,s=0,a=0,u=v.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=s,this._z=a,this._order=u}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,s,a,u=this._order){return this._x=r,this._y=s,this._z=a,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,s=this._order,a=!0){const u=r.elements,_=u[0],C=u[4],L=u[8],U=u[1],Q=u[5],ae=u[9],fe=u[2],ye=u[6],Me=u[10];switch(s){case"XYZ":this._y=Math.asin(Qt(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(-ae,Me),this._z=Math.atan2(-C,_)):(this._x=Math.atan2(ye,Q),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(ae,-1,1)),Math.abs(ae)<.9999999?(this._y=Math.atan2(L,Me),this._z=Math.atan2(U,Q)):(this._y=Math.atan2(-fe,_),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(ye,-1,1)),Math.abs(ye)<.9999999?(this._y=Math.atan2(-fe,Me),this._z=Math.atan2(-C,Q)):(this._y=0,this._z=Math.atan2(U,_));break;case"ZYX":this._y=Math.asin(-Qt(fe,-1,1)),Math.abs(fe)<.9999999?(this._x=Math.atan2(ye,Me),this._z=Math.atan2(U,_)):(this._x=0,this._z=Math.atan2(-C,Q));break;case"YZX":this._z=Math.asin(Qt(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(-ae,Q),this._y=Math.atan2(-fe,_)):(this._x=0,this._y=Math.atan2(L,Me));break;case"XZY":this._z=Math.asin(-Qt(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(ye,Q),this._y=Math.atan2(L,_)):(this._x=Math.atan2(-ae,Me),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===a&&this._onChangeCallback(),this}setFromQuaternion(r,s,a){return yh.makeRotationFromQuaternion(r),this.setFromRotationMatrix(yh,s,a)}setFromVector3(r,s=this._order){return this.set(r.x,r.y,r.z,s)}reorder(r){return vh.setFromEuler(this),this.setFromQuaternion(vh,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return v.DEFAULT_ORDER="XYZ",v})();class mu{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Fc=0;const gc=new mt,Vu=new en,wl=new Mi,Gu=new mt,zu=new mt,gu=new mt,Vf=new en,_h=new mt(1,0,0),Gf=new mt(0,1,0),Sd=new mt(0,0,1),zf={type:"added"},Um={type:"removed"},Sa={type:"childadded",child:null},Ed={type:"childremoved",child:null};let Qs=(()=>{class v extends wn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fc++}),this.uuid=at(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DEFAULT_UP.clone();const r=new mt,s=new Za,a=new en,u=new mt(1,1,1);s._onChange(function _(){a.setFromEuler(s,!1)}),a._onChange(function C(){s.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Mi},normalMatrix:{value:new Gi}}),this.matrix=new Mi,this.matrixWorld=new Mi,this.matrixAutoUpdate=v.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,s){this.quaternion.setFromAxisAngle(r,s)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,s){return Vu.setFromAxisAngle(r,s),this.quaternion.multiply(Vu),this}rotateOnWorldAxis(r,s){return Vu.setFromAxisAngle(r,s),this.quaternion.premultiply(Vu),this}rotateX(r){return this.rotateOnAxis(_h,r)}rotateY(r){return this.rotateOnAxis(Gf,r)}rotateZ(r){return this.rotateOnAxis(Sd,r)}translateOnAxis(r,s){return gc.copy(r).applyQuaternion(this.quaternion),this.position.add(gc.multiplyScalar(s)),this}translateX(r){return this.translateOnAxis(_h,r)}translateY(r){return this.translateOnAxis(Gf,r)}translateZ(r){return this.translateOnAxis(Sd,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(wl.copy(this.matrixWorld).invert())}lookAt(r,s,a){r.isVector3?Gu.copy(r):Gu.set(r,s,a);const u=this.parent;this.updateWorldMatrix(!0,!1),zu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wl.lookAt(zu,Gu,this.up):wl.lookAt(Gu,zu,this.up),this.quaternion.setFromRotationMatrix(wl),u&&(wl.extractRotation(u.matrixWorld),Vu.setFromRotationMatrix(wl),this.quaternion.premultiply(Vu.invert()))}add(r){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.removeFromParent(),r.parent=this,this.children.push(r),r.dispatchEvent(zf),Sa.child=r,this.dispatchEvent(Sa),Sa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const s=this.children.indexOf(r);return-1!==s&&(r.parent=null,this.children.splice(s,1),r.dispatchEvent(Um),Ed.child=r,this.dispatchEvent(Ed),Ed.child=null),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){return this.remove(...this.children)}attach(r){return this.updateWorldMatrix(!0,!1),wl.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),wl.multiply(r.parent.matrixWorld)),r.applyMatrix4(wl),r.removeFromParent(),r.parent=this,this.children.push(r),r.updateWorldMatrix(!1,!0),r.dispatchEvent(zf),Sa.child=r,this.dispatchEvent(Sa),Sa.child=null,this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,s){if(this[r]===s)return this;for(let a=0,u=this.children.length;a<u;a++){const C=this.children[a].getObjectByProperty(r,s);if(void 0!==C)return C}}getObjectsByProperty(r,s,a=[]){this[r]===s&&a.push(this);const u=this.children;for(let _=0,C=u.length;_<C;_++)u[_].getObjectsByProperty(r,s,a);return a}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zu,r,gu),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zu,Vf,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(r){r(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverseVisible(r)}traverseAncestors(r){const s=this.parent;null!==s&&(r(s),s.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,r=!0);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].updateMatrixWorld(r)}updateWorldMatrix(r,s){const a=this.parent;if(!0===r&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let _=0,C=u.length;_<C;_++)u[_].updateWorldMatrix(!1,!0)}}toJSON(r){const s=void 0===r||"string"==typeof r,a={};s&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function _(L,U){return void 0===L[U.uuid]&&(L[U.uuid]=U.toJSON(r)),U.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(L=>({boxInitialized:L.boxInitialized,boxMin:L.box.min.toArray(),boxMax:L.box.max.toArray(),sphereInitialized:L.sphereInitialized,sphereRadius:L.sphere.radius,sphereCenter:L.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(r),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(r)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=_(r.geometries,this.geometry);const L=this.geometry.parameters;if(void 0!==L&&void 0!==L.shapes){const U=L.shapes;if(Array.isArray(U))for(let Q=0,ae=U.length;Q<ae;Q++)_(r.shapes,U[Q]);else _(r.shapes,U)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(_(r.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const L=[];for(let U=0,Q=this.material.length;U<Q;U++)L.push(_(r.materials,this.material[U]));u.material=L}else u.material=_(r.materials,this.material);if(this.children.length>0){u.children=[];for(let L=0;L<this.children.length;L++)u.children.push(this.children[L].toJSON(r).object)}if(this.animations.length>0){u.animations=[];for(let L=0;L<this.animations.length;L++)u.animations.push(_(r.animations,this.animations[L]))}if(s){const L=C(r.geometries),U=C(r.materials),Q=C(r.textures),ae=C(r.images),fe=C(r.shapes),ye=C(r.skeletons),Me=C(r.animations),Ue=C(r.nodes);L.length>0&&(a.geometries=L),U.length>0&&(a.materials=U),Q.length>0&&(a.textures=Q),ae.length>0&&(a.images=ae),fe.length>0&&(a.shapes=fe),ye.length>0&&(a.skeletons=ye),Me.length>0&&(a.animations=Me),Ue.length>0&&(a.nodes=Ue)}return a.object=u,a;function C(L){const U=[];for(const Q in L){const ae=L[Q];delete ae.metadata,U.push(ae)}return U}}clone(r){return(new this.constructor).copy(this,r)}copy(r,s=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations.slice(),this.userData=JSON.parse(JSON.stringify(r.userData)),!0===s)for(let a=0;a<r.children.length;a++)this.add(r.children[a].clone());return this}}return v.DEFAULT_UP=new mt(0,1,0),v.DEFAULT_MATRIX_AUTO_UPDATE=!0,v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,v})();const Vl=new mt,yc=new mt,$f=new mt,vc=new mt,yu=new mt,$u=new mt,pe=new mt,Te=new mt,Fe=new mt,Ee=new mt,$e=new Ds,St=new Ds,Lt=new Ds;class kn{constructor(t=new mt,r=new mt,s=new mt){this.a=t,this.b=r,this.c=s}static getNormal(t,r,s,a){a.subVectors(s,r),Vl.subVectors(t,r),a.cross(Vl);const u=a.lengthSq();return u>0?a.multiplyScalar(1/Math.sqrt(u)):a.set(0,0,0)}static getBarycoord(t,r,s,a,u){Vl.subVectors(a,r),yc.subVectors(s,r),$f.subVectors(t,r);const _=Vl.dot(Vl),C=Vl.dot(yc),L=Vl.dot($f),U=yc.dot(yc),Q=yc.dot($f),ae=_*U-C*C;if(0===ae)return u.set(0,0,0),null;const fe=1/ae,ye=(U*L-C*Q)*fe,Me=(_*Q-C*L)*fe;return u.set(1-ye-Me,Me,ye)}static containsPoint(t,r,s,a){return null!==this.getBarycoord(t,r,s,a,vc)&&vc.x>=0&&vc.y>=0&&vc.x+vc.y<=1}static getInterpolation(t,r,s,a,u,_,C,L){return null===this.getBarycoord(t,r,s,a,vc)?(L.x=0,L.y=0,"z"in L&&(L.z=0),"w"in L&&(L.w=0),null):(L.setScalar(0),L.addScaledVector(u,vc.x),L.addScaledVector(_,vc.y),L.addScaledVector(C,vc.z),L)}static getInterpolatedAttribute(t,r,s,a,u,_){return $e.setScalar(0),St.setScalar(0),Lt.setScalar(0),$e.fromBufferAttribute(t,r),St.fromBufferAttribute(t,s),Lt.fromBufferAttribute(t,a),_.setScalar(0),_.addScaledVector($e,u.x),_.addScaledVector(St,u.y),_.addScaledVector(Lt,u.z),_}static isFrontFacing(t,r,s,a){return Vl.subVectors(s,r),yc.subVectors(t,r),Vl.cross(yc).dot(a)<0}set(t,r,s){return this.a.copy(t),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(t,r,s,a){return this.a.copy(t[r]),this.b.copy(t[s]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,r,s,a){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,a),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Vl.subVectors(this.c,this.b),yc.subVectors(this.a,this.b),.5*Vl.cross(yc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return kn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return kn.getBarycoord(t,this.a,this.b,this.c,r)}getInterpolation(t,r,s,a,u){return kn.getInterpolation(t,this.a,this.b,this.c,r,s,a,u)}containsPoint(t){return kn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return kn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const s=this.a,a=this.b,u=this.c;let _,C;yu.subVectors(a,s),$u.subVectors(u,s),Te.subVectors(t,s);const L=yu.dot(Te),U=$u.dot(Te);if(L<=0&&U<=0)return r.copy(s);Fe.subVectors(t,a);const Q=yu.dot(Fe),ae=$u.dot(Fe);if(Q>=0&&ae<=Q)return r.copy(a);const fe=L*ae-Q*U;if(fe<=0&&L>=0&&Q<=0)return _=L/(L-Q),r.copy(s).addScaledVector(yu,_);Ee.subVectors(t,u);const ye=yu.dot(Ee),Me=$u.dot(Ee);if(Me>=0&&ye<=Me)return r.copy(u);const Ue=ye*U-L*Me;if(Ue<=0&&U>=0&&Me<=0)return C=U/(U-Me),r.copy(s).addScaledVector($u,C);const Pe=Q*Me-ye*ae;if(Pe<=0&&ae-Q>=0&&ye-Me>=0)return pe.subVectors(u,a),C=(ae-Q)/(ae-Q+(ye-Me)),r.copy(a).addScaledVector(pe,C);const Ie=1/(Pe+Ue+fe);return _=Ue*Ie,C=fe*Ie,r.copy(s).addScaledVector(yu,_).addScaledVector($u,C)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},An={h:0,s:0,l:0},Rr={h:0,s:0,l:0};function fi(v,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?v+6*(t-v)*r:r<.5?t:r<2/3?v+6*(t-v)*(2/3-r):v}class Mr{constructor(t,r,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,s)}set(t,r,s){if(void 0===r&&void 0===s){const a=t;a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a)}else this.setRGB(t,r,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Pi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ss.toWorkingColorSpace(this,r),this}setRGB(t,r,s,a=Ss.workingColorSpace){return this.r=t,this.g=r,this.b=s,Ss.toWorkingColorSpace(this,a),this}setHSL(t,r,s,a=Ss.workingColorSpace){if(t=En(t,1),r=Qt(r,0,1),s=Qt(s,0,1),0===r)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+r):s+r-s*r,_=2*s-u;this.r=fi(_,u,t+1/3),this.g=fi(_,u,t),this.b=fi(_,u,t-1/3)}return Ss.toWorkingColorSpace(this,a),this}setStyle(t,r=Pi){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let u;const C=a[2];switch(a[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(C))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,r);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(C))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,r);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(C))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const u=a[1],_=u.length;if(3===_)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,r);if(6===_)return this.setHex(parseInt(u,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=Pi){const s=dr[t.toLowerCase()];return void 0!==s?this.setHex(s,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Bl(t.r),this.g=Bl(t.g),this.b=Bl(t.b),this}copyLinearToSRGB(t){return this.r=hu(t.r),this.g=hu(t.g),this.b=hu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Pi){return Ss.fromWorkingColorSpace(Jr.copy(this),t),65536*Math.round(Qt(255*Jr.r,0,255))+256*Math.round(Qt(255*Jr.g,0,255))+Math.round(Qt(255*Jr.b,0,255))}getHexString(t=Pi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Ss.workingColorSpace){Ss.fromWorkingColorSpace(Jr.copy(this),r);const s=Jr.r,a=Jr.g,u=Jr.b,_=Math.max(s,a,u),C=Math.min(s,a,u);let L,U;const Q=(C+_)/2;if(C===_)L=0,U=0;else{const ae=_-C;switch(U=Q<=.5?ae/(_+C):ae/(2-_-C),_){case s:L=(a-u)/ae+(a<u?6:0);break;case a:L=(u-s)/ae+2;break;case u:L=(s-a)/ae+4}L/=6}return t.h=L,t.s=U,t.l=Q,t}getRGB(t,r=Ss.workingColorSpace){return Ss.fromWorkingColorSpace(Jr.copy(this),r),t.r=Jr.r,t.g=Jr.g,t.b=Jr.b,t}getStyle(t=Pi){Ss.fromWorkingColorSpace(Jr.copy(this),t);const r=Jr.r,s=Jr.g,a=Jr.b;return t!==Pi?`color(${t} ${r.toFixed(3)} ${s.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*a)})`}offsetHSL(t,r,s){return this.getHSL(An),this.setHSL(An.h+t,An.s+r,An.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(An),t.getHSL(Rr);const s=zr(An.h,Rr.h,r),a=zr(An.s,Rr.s,r),u=zr(An.l,Rr.l,r);return this.setHSL(s,a,u),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const r=this.r,s=this.g,a=this.b,u=t.elements;return this.r=u[0]*r+u[3]*s+u[6]*a,this.g=u[1]*r+u[4]*s+u[7]*a,this.b=u[2]*r+u[5]*s+u[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Jr=new Mr;Mr.NAMES=dr;let Co=0;class Rs extends wn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Co++}),this.uuid=at(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Mr(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Or,this.stencilZFail=Or,this.stencilZPass=Or,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){const s=t[r];if(void 0===s){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const a=this[r];void 0!==a?a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[r]=s:console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`)}}toJSON(t){const r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function a(u){const _=[];for(const C in u){const L=u[C];delete L.metadata,_.push(L)}return _}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Or&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Or&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Or&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),r){const u=a(t.textures),_=a(t.images);u.length>0&&(s.textures=u),_.length>0&&(s.images=_)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let s=null;if(null!==r){const a=r.length;s=new Array(a);for(let u=0;u!==a;++u)s[u]=r[u].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class io extends Rs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Mr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const jo=new mt,Gl=new fr;let tE=0;class Ls{constructor(t,r,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:tE++}),this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=B,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,s){t*=this.itemSize,s*=r.itemSize;for(let a=0,u=this.itemSize;a<u;a++)this.array[t+a]=r.array[s+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,s=this.count;r<s;r++)Gl.fromBufferAttribute(this,r),Gl.applyMatrix3(t),this.setXY(r,Gl.x,Gl.y);else if(3===this.itemSize)for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyMatrix3(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}applyMatrix4(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyMatrix4(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.applyNormalMatrix(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)jo.fromBufferAttribute(this,r),jo.transformDirection(t),this.setXYZ(r,jo.x,jo.y,jo.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let s=this.array[t*this.itemSize+r];return this.normalized&&(s=As(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=ci(s,this.array)),this.array[t*this.itemSize+r]=s,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=As(r,this.array)),r}setX(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=As(r,this.array)),r}setY(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=As(r,this.array)),r}setZ(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=As(r,this.array)),r}setW(t,r){return this.normalized&&(r=ci(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,s){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array)),this.array[t+0]=r,this.array[t+1]=s,this}setXYZ(t,r,s,a){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),a=ci(a,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=a,this}setXYZW(t,r,s,a,u){return t*=this.itemSize,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),a=ci(a,this.array),u=ci(u,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=a,this.array[t+3]=u,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class vu extends Ls{constructor(t,r,s){super(new Uint16Array(t),r,s)}}class Hf extends Ls{constructor(t,r,s){super(new Uint32Array(t),r,s)}}class _i extends Ls{constructor(t,r,s){super(new Float32Array(t),r,s)}}let Vm=0;const Qa=new Mi,ul=new Qs,ec=new mt,el=new Ei,bh=new Ei,Ea=new mt;class Zi extends wn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vm++}),this.uuid=at(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(jf(t)?Hf:vu)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,s=0){this.groups.push({start:t,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new Gi).getNormalMatrix(t);s.applyNormalMatrix(u),s.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(t),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qa.makeRotationFromQuaternion(t),this.applyMatrix4(Qa),this}rotateX(t){return Qa.makeRotationX(t),this.applyMatrix4(Qa),this}rotateY(t){return Qa.makeRotationY(t),this.applyMatrix4(Qa),this}rotateZ(t){return Qa.makeRotationZ(t),this.applyMatrix4(Qa),this}translate(t,r,s){return Qa.makeTranslation(t,r,s),this.applyMatrix4(Qa),this}scale(t,r,s){return Qa.makeScale(t,r,s),this.applyMatrix4(Qa),this}lookAt(t){return ul.lookAt(t),ul.updateMatrix(),this.applyMatrix4(ul.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ec).negate(),this.translate(ec.x,ec.y,ec.z),this}setFromPoints(t){const r=this.getAttribute("position");if(void 0===r){const s=[];for(let a=0,u=t.length;a<u;a++){const _=t[a];s.push(_.x,_.y,_.z||0)}this.setAttribute("position",new _i(s,3))}else{const s=Math.min(t.length,r.count);for(let a=0;a<s;a++){const u=t[a];r.setXYZ(a,u.x,u.y,u.z||0)}t.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ei);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new mt(-1/0,-1/0,-1/0),new mt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let s=0,a=r.length;s<a;s++)el.setFromBufferAttribute(r[s]),this.morphTargetsRelative?(Ea.addVectors(this.boundingBox.min,el.min),this.boundingBox.expandByPoint(Ea),Ea.addVectors(this.boundingBox.max,el.max),this.boundingBox.expandByPoint(Ea)):(this.boundingBox.expandByPoint(el.min),this.boundingBox.expandByPoint(el.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zs);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new mt,1/0);if(t){const s=this.boundingSphere.center;if(el.setFromBufferAttribute(t),r)for(let u=0,_=r.length;u<_;u++)bh.setFromBufferAttribute(r[u]),this.morphTargetsRelative?(Ea.addVectors(el.min,bh.min),el.expandByPoint(Ea),Ea.addVectors(el.max,bh.max),el.expandByPoint(Ea)):(el.expandByPoint(bh.min),el.expandByPoint(bh.max));el.getCenter(s);let a=0;for(let u=0,_=t.count;u<_;u++)Ea.fromBufferAttribute(t,u),a=Math.max(a,s.distanceToSquared(Ea));if(r)for(let u=0,_=r.length;u<_;u++){const C=r[u],L=this.morphTargetsRelative;for(let U=0,Q=C.count;U<Q;U++)Ea.fromBufferAttribute(C,U),L&&(ec.fromBufferAttribute(t,U),Ea.add(ec)),a=Math.max(a,s.distanceToSquared(Ea))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=r.position,a=r.normal,u=r.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ls(new Float32Array(4*s.count),4));const _=this.getAttribute("tangent"),C=[],L=[];for(let Wt=0;Wt<s.count;Wt++)C[Wt]=new mt,L[Wt]=new mt;const U=new mt,Q=new mt,ae=new mt,fe=new fr,ye=new fr,Me=new fr,Ue=new mt,Pe=new mt;function Ie(Wt,Mt,wt){U.fromBufferAttribute(s,Wt),Q.fromBufferAttribute(s,Mt),ae.fromBufferAttribute(s,wt),fe.fromBufferAttribute(u,Wt),ye.fromBufferAttribute(u,Mt),Me.fromBufferAttribute(u,wt),Q.sub(U),ae.sub(U),ye.sub(fe),Me.sub(fe);const gn=1/(ye.x*Me.y-Me.x*ye.y);isFinite(gn)&&(Ue.copy(Q).multiplyScalar(Me.y).addScaledVector(ae,-ye.y).multiplyScalar(gn),Pe.copy(ae).multiplyScalar(ye.x).addScaledVector(Q,-Me.x).multiplyScalar(gn),C[Wt].add(Ue),C[Mt].add(Ue),C[wt].add(Ue),L[Wt].add(Pe),L[Mt].add(Pe),L[wt].add(Pe))}let tt=this.groups;0===tt.length&&(tt=[{start:0,count:t.count}]);for(let Wt=0,Mt=tt.length;Wt<Mt;++Wt){const wt=tt[Wt],gn=wt.start;for(let Hn=gn,Jn=gn+wt.count;Hn<Jn;Hn+=3)Ie(t.getX(Hn+0),t.getX(Hn+1),t.getX(Hn+2))}const it=new mt,rt=new mt,$t=new mt,At=new mt;function Ft(Wt){$t.fromBufferAttribute(a,Wt),At.copy($t);const Mt=C[Wt];it.copy(Mt),it.sub($t.multiplyScalar($t.dot(Mt))).normalize(),rt.crossVectors(At,Mt);const gn=rt.dot(L[Wt])<0?-1:1;_.setXYZW(Wt,it.x,it.y,it.z,gn)}for(let Wt=0,Mt=tt.length;Wt<Mt;++Wt){const wt=tt[Wt],gn=wt.start;for(let Hn=gn,Jn=gn+wt.count;Hn<Jn;Hn+=3)Ft(t.getX(Hn+0)),Ft(t.getX(Hn+1)),Ft(t.getX(Hn+2))}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(void 0!==r){let s=this.getAttribute("normal");if(void 0===s)s=new Ls(new Float32Array(3*r.count),3),this.setAttribute("normal",s);else for(let fe=0,ye=s.count;fe<ye;fe++)s.setXYZ(fe,0,0,0);const a=new mt,u=new mt,_=new mt,C=new mt,L=new mt,U=new mt,Q=new mt,ae=new mt;if(t)for(let fe=0,ye=t.count;fe<ye;fe+=3){const Me=t.getX(fe+0),Ue=t.getX(fe+1),Pe=t.getX(fe+2);a.fromBufferAttribute(r,Me),u.fromBufferAttribute(r,Ue),_.fromBufferAttribute(r,Pe),Q.subVectors(_,u),ae.subVectors(a,u),Q.cross(ae),C.fromBufferAttribute(s,Me),L.fromBufferAttribute(s,Ue),U.fromBufferAttribute(s,Pe),C.add(Q),L.add(Q),U.add(Q),s.setXYZ(Me,C.x,C.y,C.z),s.setXYZ(Ue,L.x,L.y,L.z),s.setXYZ(Pe,U.x,U.y,U.z)}else for(let fe=0,ye=r.count;fe<ye;fe+=3)a.fromBufferAttribute(r,fe+0),u.fromBufferAttribute(r,fe+1),_.fromBufferAttribute(r,fe+2),Q.subVectors(_,u),ae.subVectors(a,u),Q.cross(ae),s.setXYZ(fe+0,Q.x,Q.y,Q.z),s.setXYZ(fe+1,Q.x,Q.y,Q.z),s.setXYZ(fe+2,Q.x,Q.y,Q.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let r=0,s=t.count;r<s;r++)Ea.fromBufferAttribute(t,r),Ea.normalize(),t.setXYZ(r,Ea.x,Ea.y,Ea.z)}toNonIndexed(){function t(C,L){const U=C.array,Q=C.itemSize,ae=C.normalized,fe=new U.constructor(L.length*Q);let ye=0,Me=0;for(let Ue=0,Pe=L.length;Ue<Pe;Ue++){ye=C.isInterleavedBufferAttribute?L[Ue]*C.data.stride+C.offset:L[Ue]*Q;for(let Ie=0;Ie<Q;Ie++)fe[Me++]=U[ye++]}return new Ls(fe,Q,ae)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Zi,s=this.index.array,a=this.attributes;for(const C in a){const U=t(a[C],s);r.setAttribute(C,U)}const u=this.morphAttributes;for(const C in u){const L=[],U=u[C];for(let Q=0,ae=U.length;Q<ae;Q++){const ye=t(U[Q],s);L.push(ye)}r.morphAttributes[C]=L}r.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let C=0,L=_.length;C<L;C++){const U=_[C];r.addGroup(U.start,U.count,U.materialIndex)}return r}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const L=this.parameters;for(const U in L)void 0!==L[U]&&(t[U]=L[U]);return t}t.data={attributes:{}};const r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const L in s)t.data.attributes[L]=s[L].toJSON(t.data);const a={};let u=!1;for(const L in this.morphAttributes){const U=this.morphAttributes[L],Q=[];for(let ae=0,fe=U.length;ae<fe;ae++)Q.push(U[ae].toJSON(t.data));Q.length>0&&(a[L]=Q,u=!0)}u&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(t.data.groups=JSON.parse(JSON.stringify(_)));const C=this.boundingSphere;return null!==C&&(t.data.boundingSphere={center:C.center.toArray(),radius:C.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(r));const a=t.attributes;for(const U in a)this.setAttribute(U,a[U].clone(r));const u=t.morphAttributes;for(const U in u){const Q=[],ae=u[U];for(let fe=0,ye=ae.length;fe<ye;fe++)Q.push(ae[fe].clone(r));this.morphAttributes[U]=Q}this.morphTargetsRelative=t.morphTargetsRelative;const _=t.groups;for(let U=0,Q=_.length;U<Q;U++){const ae=_[U];this.addGroup(ae.start,ae.count,ae.materialIndex)}const C=t.boundingBox;null!==C&&(this.boundingBox=C.clone());const L=t.boundingSphere;return null!==L&&(this.boundingSphere=L.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hu=new Mi,Wu=new Ba,Wf=new zs,Xy=new mt,Td=new mt,xh=new mt,wh=new mt,Cd=new mt,Bc=new mt,qy=new mt,Xf=new mt;class ls extends Qs{constructor(t=new Zi,r=new io){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const C=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=u}}}}getVertexPosition(t,r){const s=this.geometry,u=s.morphAttributes.position,_=s.morphTargetsRelative;r.fromBufferAttribute(s.attributes.position,t);const C=this.morphTargetInfluences;if(u&&C){Bc.set(0,0,0);for(let L=0,U=u.length;L<U;L++){const Q=C[L];0!==Q&&(Cd.fromBufferAttribute(u[L],t),Bc.addScaledVector(_?Cd:Cd.sub(r),Q))}r.add(Bc)}return r}raycast(t,r){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),Wf.copy(s.boundingSphere),Wf.applyMatrix4(u),Wu.copy(t.ray).recast(t.near),(!1!==Wf.containsPoint(Wu.origin)||!(null===Wu.intersectSphere(Wf,Xy)||Wu.origin.distanceToSquared(Xy)>(t.far-t.near)**2))&&(Hu.copy(u).invert(),Wu.copy(t.ray).applyMatrix4(Hu),(null===s.boundingBox||!1!==Wu.intersectsBox(s.boundingBox))&&this._computeIntersections(t,r,Wu)))}_computeIntersections(t,r,s){let a;const u=this.geometry,_=this.material,C=u.index,L=u.attributes.position,U=u.attributes.uv,Q=u.attributes.uv1,ae=u.attributes.normal,fe=u.groups,ye=u.drawRange;if(null!==C)if(Array.isArray(_))for(let Me=0,Ue=fe.length;Me<Ue;Me++){const Pe=fe[Me],Ie=_[Pe.materialIndex];for(let rt=Math.max(Pe.start,ye.start),$t=Math.min(C.count,Math.min(Pe.start+Pe.count,ye.start+ye.count));rt<$t;rt+=3)a=qf(this,Ie,t,s,U,Q,ae,C.getX(rt),C.getX(rt+1),C.getX(rt+2)),a&&(a.faceIndex=Math.floor(rt/3),a.face.materialIndex=Pe.materialIndex,r.push(a))}else for(let Pe=Math.max(0,ye.start),Ie=Math.min(C.count,ye.start+ye.count);Pe<Ie;Pe+=3)a=qf(this,_,t,s,U,Q,ae,C.getX(Pe),C.getX(Pe+1),C.getX(Pe+2)),a&&(a.faceIndex=Math.floor(Pe/3),r.push(a));else if(void 0!==L)if(Array.isArray(_))for(let Me=0,Ue=fe.length;Me<Ue;Me++){const Pe=fe[Me],Ie=_[Pe.materialIndex];for(let rt=Math.max(Pe.start,ye.start),$t=Math.min(L.count,Math.min(Pe.start+Pe.count,ye.start+ye.count));rt<$t;rt+=3)a=qf(this,Ie,t,s,U,Q,ae,rt,rt+1,rt+2),a&&(a.faceIndex=Math.floor(rt/3),a.face.materialIndex=Pe.materialIndex,r.push(a))}else for(let Pe=Math.max(0,ye.start),Ie=Math.min(L.count,ye.start+ye.count);Pe<Ie;Pe+=3)a=qf(this,_,t,s,U,Q,ae,Pe,Pe+1,Pe+2),a&&(a.faceIndex=Math.floor(Pe/3),r.push(a))}}function qf(v,t,r,s,a,u,_,C,L,U){v.getVertexPosition(C,Td),v.getVertexPosition(L,xh),v.getVertexPosition(U,wh);const Q=function Ky(v,t,r,s,a,u,_,C){let L;if(L=1===t.side?s.intersectTriangle(_,u,a,!0,C):s.intersectTriangle(a,u,_,0===t.side,C),null===L)return null;Xf.copy(C),Xf.applyMatrix4(v.matrixWorld);const U=r.ray.origin.distanceTo(Xf);return U<r.near||U>r.far?null:{distance:U,point:Xf.clone(),object:v}}(v,t,r,s,Td,xh,wh,qy);if(Q){const ae=new mt;kn.getBarycoord(qy,Td,xh,wh,ae),a&&(Q.uv=kn.getInterpolatedAttribute(a,C,L,U,ae,new fr)),u&&(Q.uv1=kn.getInterpolatedAttribute(u,C,L,U,ae,new fr)),_&&(Q.normal=kn.getInterpolatedAttribute(_,C,L,U,ae,new mt),Q.normal.dot(s.direction)>0&&Q.normal.multiplyScalar(-1));const fe={a:C,b:L,c:U,normal:new mt,materialIndex:0};kn.getNormal(Td,xh,wh,fe.normal),Q.face=fe,Q.barycoord=ae}return Q}class _c extends Zi{constructor(t=1,r=1,s=1,a=1,u=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:s,widthSegments:a,heightSegments:u,depthSegments:_};const C=this;a=Math.floor(a),u=Math.floor(u),_=Math.floor(_);const L=[],U=[],Q=[],ae=[];let fe=0,ye=0;function Me(Ue,Pe,Ie,tt,it,rt,$t,At,Ft,Wt,Mt){const wt=rt/Ft,gn=$t/Wt,Kn=rt/2,Hn=$t/2,Jn=At/2,pr=Ft+1,Yn=Wt+1;let Nr=0,tr=0;const Vr=new mt;for(let Qr=0;Qr<Yn;Qr++){const vi=Qr*gn-Hn;for(let Yi=0;Yi<pr;Yi++)Vr[Ue]=(Yi*wt-Kn)*tt,Vr[Pe]=vi*it,Vr[Ie]=Jn,U.push(Vr.x,Vr.y,Vr.z),Vr[Ue]=0,Vr[Pe]=0,Vr[Ie]=At>0?1:-1,Q.push(Vr.x,Vr.y,Vr.z),ae.push(Yi/Ft),ae.push(1-Qr/Wt),Nr+=1}for(let Qr=0;Qr<Wt;Qr++)for(let vi=0;vi<Ft;vi++){const cs=fe+vi+pr*(Qr+1),_r=fe+(vi+1)+pr*(Qr+1),$r=fe+(vi+1)+pr*Qr;L.push(fe+vi+pr*Qr,cs,$r),L.push(cs,_r,$r),tr+=6}C.addGroup(ye,tr,Mt),ye+=tr,fe+=Nr}Me("z","y","x",-1,-1,s,r,t,_,u,0),Me("z","y","x",1,-1,s,r,-t,_,u,1),Me("x","z","y",1,1,t,s,r,a,_,2),Me("x","z","y",1,-1,t,s,-r,a,_,3),Me("x","y","z",1,-1,t,r,s,a,u,4),Me("x","y","z",-1,-1,t,r,-s,a,u,5),this.setIndex(L),this.setAttribute("position",new _i(U,3)),this.setAttribute("normal",new _i(Q,3)),this.setAttribute("uv",new _i(ae,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _c(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ad(v){const t={};for(const r in v){t[r]={};for(const s in v[r]){const a=v[r][s];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][s]=null):t[r][s]=a.clone():t[r][s]=Array.isArray(a)?a.slice():a}}return t}function tl(v){const t={};for(let r=0;r<v.length;r++){const s=Ad(v[r]);for(const a in s)t[a]=s[a]}return t}function Yy(v){const t=v.getRenderTarget();return null===t?v.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Ss.workingColorSpace}const Lb={clone:Ad,merge:tl};class Sl extends Rs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ad(t.uniforms),this.uniformsGroups=function Ob(v){const t=[];for(let r=0;r<v.length;r++)t.push(v[r].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const _=this.uniforms[a].value;r.uniforms[a]=_&&_.isTexture?{type:"t",value:_.toJSON(t).uuid}:_&&_.isColor?{type:"c",value:_.getHex()}:_&&_.isVector2?{type:"v2",value:_.toArray()}:_&&_.isVector3?{type:"v3",value:_.toArray()}:_&&_.isVector4?{type:"v4",value:_.toArray()}:_&&_.isMatrix3?{type:"m3",value:_.toArray()}:_&&_.isMatrix4?{type:"m4",value:_.toArray()}:{value:_}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const s={};for(const a in this.extensions)!0===this.extensions[a]&&(s[a]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}class xo extends Qs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mi,this.projectionMatrix=new Mi,this.projectionMatrixInverse=new Mi,this.coordinateSystem=bt}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const jr=new mt,ki=new fr,Zo=new fr;class co extends xo{constructor(t=50,r=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=2*Re*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Ne*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Re*Math.atan(Math.tan(.5*Ne*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,r,s){jr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(jr.x,jr.y).multiplyScalar(-t/jr.z),jr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(jr.x,jr.y).multiplyScalar(-t/jr.z)}getViewSize(t,r){return this.getViewBounds(t,ki,Zo),r.subVectors(Zo,ki)}setViewOffset(t,r,s,a,u,_){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(.5*Ne*this.fov)/this.zoom,s=2*r,a=this.aspect*s,u=-.5*a;const _=this.view;if(null!==this.view&&this.view.enabled){const L=_.fullWidth,U=_.fullHeight;u+=_.offsetX*a/L,r-=_.offsetY*s/U,a*=_.width/L,s*=_.height/U}const C=this.filmOffset;0!==C&&(u+=t*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+a,r,r-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class Xu extends Qs{constructor(t,r,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new co(-90,1,t,r);a.layers=this.layers,this.add(a);const u=new co(-90,1,t,r);u.layers=this.layers,this.add(u);const _=new co(-90,1,t,r);_.layers=this.layers,this.add(_);const C=new co(-90,1,t,r);C.layers=this.layers,this.add(C);const L=new co(-90,1,t,r);L.layers=this.layers,this.add(L);const U=new co(-90,1,t,r);U.layers=this.layers,this.add(U)}updateCoordinateSystem(){const t=this.coordinateSystem,r=this.children.concat(),[s,a,u,_,C,L]=r;for(const U of r)this.remove(U);if(t===bt)s.up.set(0,1,0),s.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),_.up.set(0,0,1),_.lookAt(0,-1,0),C.up.set(0,1,0),C.lookAt(0,0,1),L.up.set(0,1,0),L.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);s.up.set(0,-1,0),s.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),_.up.set(0,0,-1),_.lookAt(0,-1,0),C.up.set(0,-1,0),C.lookAt(0,0,1),L.up.set(0,-1,0),L.lookAt(0,0,-1)}for(const U of r)this.add(U),U.updateMatrixWorld()}update(t,r){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[u,_,C,L,U,Q]=this.children,ae=t.getRenderTarget(),fe=t.getActiveCubeFace(),ye=t.getActiveMipmapLevel(),Me=t.xr.enabled;t.xr.enabled=!1;const Ue=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,a),t.render(r,u),t.setRenderTarget(s,1,a),t.render(r,_),t.setRenderTarget(s,2,a),t.render(r,C),t.setRenderTarget(s,3,a),t.render(r,L),t.setRenderTarget(s,4,a),t.render(r,U),s.texture.generateMipmaps=Ue,t.setRenderTarget(s,5,a),t.render(r,Q),t.setRenderTarget(ae,fe,ye),t.xr.enabled=Me,s.texture.needsPMREMUpdate=!0}}class so extends no{constructor(t,r,s,a,u,_,C,L,U,Q){super(t=void 0!==t?t:[],r=void 0!==r?r:on,s,a,u,_,C,L,U,Q),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class sa extends Se{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1};this.texture=new so([s,s,s,s,s,s],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Sn}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new _c(5,5,5),u=new Sl({name:"CubemapFromEquirect",uniforms:Ad(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=r;const _=new ls(a,u),C=r.minFilter;return r.minFilter===sr&&(r.minFilter=Sn),new Xu(1,10,this).update(t,_),r.minFilter=C,_.geometry.dispose(),_.material.dispose(),this}clear(t,r,s,a){const u=t.getRenderTarget();for(let _=0;_<6;_++)t.setRenderTarget(this,_),t.clear(r,s,a);t.setRenderTarget(u)}}class Ma extends Qs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qi={type:"move"};class qu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const s of t.hand.values())this._getHandJoint(r,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,s){let a=null,u=null,_=null;const C=this._targetRay,L=this._grip,U=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(U&&t.hand){_=!0;for(const Ue of t.hand.values()){const Pe=r.getJointPose(Ue,s),Ie=this._getHandJoint(U,Ue);null!==Pe&&(Ie.matrix.fromArray(Pe.transform.matrix),Ie.matrix.decompose(Ie.position,Ie.rotation,Ie.scale),Ie.matrixWorldNeedsUpdate=!0,Ie.jointRadius=Pe.radius),Ie.visible=null!==Pe}const fe=U.joints["index-finger-tip"].position.distanceTo(U.joints["thumb-tip"].position),ye=.02,Me=.005;U.inputState.pinching&&fe>ye+Me?(U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!U.inputState.pinching&&fe<=ye-Me&&(U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==L&&t.gripSpace&&(u=r.getPose(t.gripSpace,s),null!==u&&(L.matrix.fromArray(u.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),L.matrixWorldNeedsUpdate=!0,u.linearVelocity?(L.hasLinearVelocity=!0,L.linearVelocity.copy(u.linearVelocity)):L.hasLinearVelocity=!1,u.angularVelocity?(L.hasAngularVelocity=!0,L.angularVelocity.copy(u.angularVelocity)):L.hasAngularVelocity=!1));null!==C&&(a=r.getPose(t.targetRaySpace,s),null===a&&null!==u&&(a=u),null!==a&&(C.matrix.fromArray(a.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,a.linearVelocity?(C.hasLinearVelocity=!0,C.linearVelocity.copy(a.linearVelocity)):C.hasLinearVelocity=!1,a.angularVelocity?(C.hasAngularVelocity=!0,C.angularVelocity.copy(a.angularVelocity)):C.hasAngularVelocity=!1,this.dispatchEvent(qi)))}return null!==C&&(C.visible=null!==a),null!==L&&(L.visible=null!==u),null!==U&&(U.visible=null!==_),this}_getHandJoint(t,r){if(void 0===t.joints[r.jointName]){const s=new Ma;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[r.jointName]=s,t.add(s)}return t.joints[r.jointName]}}class Ao extends Qs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Za,this.environmentIntensity=1,this.environmentRotation=new Za,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class bc{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=at()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,s){t*=this.stride,s*=r.stride;for(let a=0,u=this.stride;a<u;a++)this.array[t+a]=r.array[s+a];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=at()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(r,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=at()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oa=new mt;class Va{constructor(t,r,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=s,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,s=this.data.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.applyMatrix4(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.applyNormalMatrix(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)oa.fromBufferAttribute(this,r),oa.transformDirection(t),this.setXYZ(r,oa.x,oa.y,oa.z);return this}getComponent(t,r){let s=this.array[t*this.data.stride+this.offset+r];return this.normalized&&(s=As(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=ci(s,this.array)),this.data.array[t*this.data.stride+this.offset+r]=s,this}setX(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=ci(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=As(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=As(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=As(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=As(r,this.array)),r}setXY(t,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this}setXYZ(t,r,s,a){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),a=ci(a,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=a,this}setXYZW(t,r,s,a,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=ci(r,this.array),s=ci(s,this.array),a=ci(a,this.array),u=ci(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=a,this.data.array[t+3]=u,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[a+u])}return new Ls(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Va(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[a+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Pd=new mt,Zy=new Ds,Jy=new Ds,zm=new mt,$m=new Mi,Yf=new mt,Eh=new zs,Nb=new Mi,Qy=new Ba;class jb extends ls{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fn,this.bindMatrix=new Mi,this.bindMatrixInverse=new Mi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ei),this.boundingBox.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Yf),this.boundingBox.expandByPoint(Yf)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new zs),this.boundingSphere.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Yf),this.boundingSphere.expandByPoint(Yf)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){const a=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Eh.copy(this.boundingSphere),Eh.applyMatrix4(a),!1!==t.ray.intersectsSphere(Eh)&&(Nb.copy(a).invert(),Qy.copy(t.ray).applyMatrix4(Nb),(null===this.boundingBox||!1!==Qy.intersectsBox(this.boundingBox))&&this._computeIntersections(t,r,Qy)))}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ds,r=this.geometry.attributes.skinWeight;for(let s=0,a=r.count;s<a;s++){t.fromBufferAttribute(r,s);const u=1/t.manhattanLength();u!==1/0?t.multiplyScalar(u):t.set(1,0,0,0),r.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===fn?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,r){const s=this.skeleton,a=this.geometry;Zy.fromBufferAttribute(a.attributes.skinIndex,t),Jy.fromBufferAttribute(a.attributes.skinWeight,t),Pd.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let u=0;u<4;u++){const _=Jy.getComponent(u);if(0!==_){const C=Zy.getComponent(u);$m.multiplyMatrices(s.bones[C].matrixWorld,s.boneInverses[C]),r.addScaledVector(zm.copy(Pd).applyMatrix4($m),_)}}return r.applyMatrix4(this.bindMatrixInverse)}}class ev extends Qs{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xu extends no{constructor(t=null,r=1,s=1,a,u,_,C,L,U=ln,Q=ln,ae,fe){super(null,_,C,L,U,Q,a,u,ae,fe),this.isDataTexture=!0,this.image={data:t,width:r,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fb=new Mi,iE=new Mi;class Hm{constructor(t=[],r=[]){this.uuid=at(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,a=this.bones.length;s<a;s++)this.boneInverses.push(new Mi)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const s=new Mi;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,r=this.boneInverses,s=this.boneMatrices,a=this.boneTexture;for(let u=0,_=t.length;u<_;u++)Fb.multiplyMatrices(t[u]?t[u].matrixWorld:iE,r[u]),Fb.toArray(s,16*u);null!==a&&(a.needsUpdate=!0)}clone(){return new Hm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const s=new xu(r,t,t,Vt,B);return s.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=s,this}getBoneByName(t){for(let r=0,s=this.bones.length;r<s;r++){const a=this.bones[r];if(a.name===t)return a}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let s=0,a=t.bones.length;s<a;s++){const u=t.bones[s];let _=r[u];void 0===_&&(console.warn("THREE.Skeleton: No bone found with UUID:",u),_=new ev),this.bones.push(_),this.boneInverses.push((new Mi).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,s=this.boneInverses;for(let a=0,u=r.length;a<u;a++)t.bones.push(r[a].uuid),t.boneInverses.push(s[a].toArray());return t}}class Mh extends Ls{constructor(t,r,s,a=1){super(t,r,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Th=new Mi,Ub=new Mi,Wm=[],Xm=new Ei,tv=new Mi,Zf=new ls,Jf=new zs;class Bb extends ls{constructor(t,r,s){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Mh(new Float32Array(16*s),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<s;a++)this.setMatrixAt(a,tv)}computeBoundingBox(){const t=this.geometry,r=this.count;null===this.boundingBox&&(this.boundingBox=new Ei),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Th),Xm.copy(t.boundingBox).applyMatrix4(Th),this.boundingBox.union(Xm)}computeBoundingSphere(){const t=this.geometry,r=this.count;null===this.boundingSphere&&(this.boundingSphere=new zs),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Th),Jf.copy(t.boundingSphere).applyMatrix4(Th),this.boundingSphere.union(Jf)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,r){const s=r.morphTargetInfluences,a=this.morphTexture.source.data.data,_=t*(s.length+1)+1;for(let C=0;C<s.length;C++)s[C]=a[_+C]}raycast(t,r){const s=this.matrixWorld,a=this.count;if(Zf.geometry=this.geometry,Zf.material=this.material,void 0!==Zf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Jf.copy(this.boundingSphere),Jf.applyMatrix4(s),!1!==t.ray.intersectsSphere(Jf)))for(let u=0;u<a;u++){this.getMatrixAt(u,Th),Ub.multiplyMatrices(s,Th),Zf.matrixWorld=Ub,Zf.raycast(t,Wm);for(let _=0,C=Wm.length;_<C;_++){const L=Wm[_];L.instanceId=u,L.object=this,r.push(L)}Wm.length=0}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new Mh(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,r){const s=r.morphTargetInfluences,a=s.length+1;null===this.morphTexture&&(this.morphTexture=new xu(new Float32Array(a*this.count),a,this.count,nt,B));const u=this.morphTexture.source.data.data;let _=0;for(let U=0;U<s.length;U++)_+=s[U];const L=a*t;u[L]=this.geometry.morphTargetsRelative?1:1-_,u.set(s,L+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const nv=new mt,Vb=new mt,rv=new Gi;class Sc{constructor(t=new mt(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,s,a){return this.normal.set(t,r,s),this.constant=a,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,s){const a=nv.subVectors(s,r).cross(Vb.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){const s=t.delta(nv),a=this.normal.dot(s);if(0===a)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;const u=-(t.start.dot(this.normal)+this.constant)/a;return u<0||u>1?null:r.copy(t.start).addScaledVector(s,u)}intersectsLine(t){const r=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return r<0&&s>0||s<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const s=r||rv.getNormalMatrix(t),a=this.coplanarPoint(nv).applyMatrix4(t),u=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(u),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const wu=new zs,Qf=new mt;class ep{constructor(t=new Sc,r=new Sc,s=new Sc,a=new Sc,u=new Sc,_=new Sc){this.planes=[t,r,s,a,u,_]}set(t,r,s,a,u,_){const C=this.planes;return C[0].copy(t),C[1].copy(r),C[2].copy(s),C[3].copy(a),C[4].copy(u),C[5].copy(_),this}copy(t){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,r=bt){const s=this.planes,a=t.elements,u=a[0],_=a[1],C=a[2],L=a[3],U=a[4],Q=a[5],ae=a[6],fe=a[7],ye=a[8],Me=a[9],Ue=a[10],Pe=a[11],Ie=a[12],tt=a[13],it=a[14],rt=a[15];if(s[0].setComponents(L-u,fe-U,Pe-ye,rt-Ie).normalize(),s[1].setComponents(L+u,fe+U,Pe+ye,rt+Ie).normalize(),s[2].setComponents(L+_,fe+Q,Pe+Me,rt+tt).normalize(),s[3].setComponents(L-_,fe-Q,Pe-Me,rt-tt).normalize(),s[4].setComponents(L-C,fe-ae,Pe-Ue,rt-it).normalize(),r===bt)s[5].setComponents(L+C,fe+ae,Pe+Ue,rt+it).normalize();else{if(2001!==r)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);s[5].setComponents(C,ae,Ue,it).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),wu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const r=t.geometry;null===r.boundingSphere&&r.computeBoundingSphere(),wu.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(wu)}intersectsSprite(t){return wu.center.set(0,0,0),wu.radius=.7071067811865476,wu.applyMatrix4(t.matrixWorld),this.intersectsSphere(wu)}intersectsSphere(t){const r=this.planes,s=t.center,a=-t.radius;for(let u=0;u<6;u++)if(r[u].distanceToPoint(s)<a)return!1;return!0}intersectsBox(t){const r=this.planes;for(let s=0;s<6;s++){const a=r[s];if(Qf.x=a.normal.x>0?t.max.x:t.min.x,Qf.y=a.normal.y>0?t.max.y:t.min.y,Qf.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(Qf)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Ta extends Rs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Mr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const rl=new mt,Ah=new mt,Zm=new Mi,Ld=new Ba,Su=new zs,Dh=new mt,Ih=new mt;class nc extends Qs{constructor(t=new Zi,r=new Ta){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[0];for(let a=1,u=r.count;a<u;a++)rl.fromBufferAttribute(r,a-1),Ah.fromBufferAttribute(r,a),s[a]=s[a-1],s[a]+=rl.distanceTo(Ah);t.setAttribute("lineDistance",new _i(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const s=this.geometry,a=this.matrixWorld,u=t.params.Line.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Su.copy(s.boundingSphere),Su.applyMatrix4(a),Su.radius+=u,!1===t.ray.intersectsSphere(Su))return;Zm.copy(a).invert(),Ld.copy(t.ray).applyMatrix4(Zm);const C=u/((this.scale.x+this.scale.y+this.scale.z)/3),L=C*C,U=this.isLineSegments?2:1,Q=s.index,fe=s.attributes.position;if(null!==Q){const ye=Math.max(0,_.start),Me=Math.min(Q.count,_.start+_.count);for(let Ue=ye,Pe=Me-1;Ue<Pe;Ue+=U){const Ie=Q.getX(Ue),tt=Q.getX(Ue+1),it=kd(this,t,Ld,L,Ie,tt,Ue);it&&r.push(it)}if(this.isLineLoop){const Ue=Q.getX(Me-1),Pe=Q.getX(ye),Ie=kd(this,t,Ld,L,Ue,Pe,Me-1);Ie&&r.push(Ie)}}else{const ye=Math.max(0,_.start),Me=Math.min(fe.count,_.start+_.count);for(let Ue=ye,Pe=Me-1;Ue<Pe;Ue+=U){const Ie=kd(this,t,Ld,L,Ue,Ue+1,Ue);Ie&&r.push(Ie)}if(this.isLineLoop){const Ue=kd(this,t,Ld,L,Me-1,ye,Me-1);Ue&&r.push(Ue)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const C=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=u}}}}}function kd(v,t,r,s,a,u,_){const C=v.geometry.attributes.position;if(rl.fromBufferAttribute(C,a),Ah.fromBufferAttribute(C,u),r.distanceSqToSegment(rl,Ah,Dh,Ih)>s)return;Dh.applyMatrix4(v.matrixWorld);const U=t.ray.origin.distanceTo(Dh);return U<t.near||U>t.far?void 0:{distance:U,point:Ih.clone().applyMatrix4(v.matrixWorld),index:_,face:null,faceIndex:null,barycoord:null,object:v}}const Tc=new mt,Wi=new mt;class il extends nc{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[];for(let a=0,u=r.count;a<u;a+=2)Tc.fromBufferAttribute(r,a),Wi.fromBufferAttribute(r,a+1),s[a]=0===a?0:s[a-1],s[a+1]=s[a]+Tc.distanceTo(Wi);t.setAttribute("lineDistance",new _i(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rp extends nc{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Eu extends Rs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Mr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const zb=new Mi,Jm=new Ba,ip=new zs,sp=new mt;class Nd extends Qs{constructor(t=new Zi,r=new Eu){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){const s=this.geometry,a=this.matrixWorld,u=t.params.Points.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),ip.copy(s.boundingSphere),ip.applyMatrix4(a),ip.radius+=u,!1===t.ray.intersectsSphere(ip))return;zb.copy(a).invert(),Jm.copy(t.ray).applyMatrix4(zb);const C=u/((this.scale.x+this.scale.y+this.scale.z)/3),L=C*C,U=s.index,ae=s.attributes.position;if(null!==U)for(let Me=Math.max(0,_.start),Ue=Math.min(U.count,_.start+_.count);Me<Ue;Me++){const Pe=U.getX(Me);sp.fromBufferAttribute(ae,Pe),Mu(sp,Pe,L,a,t,r,this)}else for(let Me=Math.max(0,_.start),Ue=Math.min(ae.count,_.start+_.count);Me<Ue;Me++)sp.fromBufferAttribute(ae,Me),Mu(sp,Me,L,a,t,r,this)}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const C=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=u}}}}}function Mu(v,t,r,s,a,u,_){const C=Jm.distanceSqToPoint(v);if(C<r){const L=new mt;Jm.closestPointToPoint(v,L),L.applyMatrix4(s);const U=a.ray.origin.distanceTo(L);if(U<a.near||U>a.far)return;u.push({distance:U,distanceToRay:Math.sqrt(C),point:L,index:t,face:null,faceIndex:null,barycoord:null,object:_})}}class eg extends no{constructor(t,r,s,a,u,_,C,L,U,Q=We){if(Q!==We&&Q!==ft)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&Q===We&&(s=N),void 0===s&&Q===ft&&(s=ce),super(null,a,u,_,C,L,Q,s,U),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=void 0!==C?C:ln,this.minFilter=void 0!==L?L:ln,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Da(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const r=super.toJSON(t);return null!==this.compareFunction&&(r.compareFunction=this.compareFunction),r}}class rd extends Zi{constructor(t=1,r=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:s,heightSegments:a};const u=t/2,_=r/2,C=Math.floor(s),L=Math.floor(a),U=C+1,Q=L+1,ae=t/C,fe=r/L,ye=[],Me=[],Ue=[],Pe=[];for(let Ie=0;Ie<Q;Ie++){const tt=Ie*fe-_;for(let it=0;it<U;it++)Me.push(it*ae-u,-tt,0),Ue.push(0,0,1),Pe.push(it/C),Pe.push(1-Ie/L)}for(let Ie=0;Ie<L;Ie++)for(let tt=0;tt<C;tt++){const rt=tt+U*(Ie+1),$t=tt+1+U*(Ie+1),At=tt+1+U*Ie;ye.push(tt+U*Ie,rt,At),ye.push(rt,$t,At)}this.setIndex(ye),this.setAttribute("position",new _i(Me,3)),this.setAttribute("normal",new _i(Ue,3)),this.setAttribute("uv",new _i(Pe,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rd(t.width,t.height,t.widthSegments,t.heightSegments)}}class Fo extends Rs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Mr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ac extends Fo{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new fr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Mr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Mr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Mr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class fg extends Rs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Mr(16777215),this.specular=new Mr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Za,this.combine=Mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class zh extends Rs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class wv extends Rs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Ic(v,t,r){return!v||!r&&v.constructor===t?v:"number"==typeof t.BYTES_PER_ELEMENT?new t(v):Array.prototype.slice.call(v)}function Ev(v){const r=v.length,s=new Array(r);for(let a=0;a!==r;++a)s[a]=a;return s.sort(function t(a,u){return v[a]-v[u]}),s}function yg(v,t,r){const s=v.length,a=new v.constructor(s);for(let u=0,_=0;_!==s;++u){const C=r[u]*t;for(let L=0;L!==t;++L)a[_++]=v[C+L]}return a}function vg(v,t,r,s){let a=1,u=v[0];for(;void 0!==u&&void 0===u[s];)u=v[a++];if(void 0===u)return;let _=u[s];if(void 0!==_)if(Array.isArray(_))do{_=u[s],void 0!==_&&(t.push(u.time),r.push(..._)),u=v[a++]}while(void 0!==u);else if(void 0!==_.toArray)do{_=u[s],void 0!==_&&(t.push(u.time),_.toArray(r,r.length)),u=v[a++]}while(void 0!==u);else do{_=u[s],void 0!==_&&(t.push(u.time),r.push(_)),u=v[a++]}while(void 0!==u)}class $h{constructor(t,r,s,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new r.constructor(s),this.sampleValues=r,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let s=this._cachedIndex,a=r[s],u=r[s-1];e:{t:{let _;n:{r:if(!(t<a)){for(let C=s+2;;){if(void 0===a){if(t<u)break r;return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===C)break;if(u=a,a=r[++s],t<a)break t}_=r.length;break n}if(t>=u)break e;{const C=r[1];t<C&&(s=2,u=C);for(let L=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===L)break;if(a=u,u=r[--s-1],t>=u)break t}_=s,s=0}}for(;s<_;){const C=s+_>>>1;t<r[C]?_=C:s=C+1}if(a=r[s],u=r[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,a)}return this.interpolate_(s,u,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=t*a;for(let _=0;_!==a;++_)r[_]=s[u+_];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n1 extends $h{constructor(t,r,s,a){super(t,r,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Eo,endingEnd:Eo}}intervalChanged_(t,r,s){const a=this.parameterPositions;let u=t-2,_=t+1,C=a[u],L=a[_];if(void 0===C)switch(this.getSettings_().endingStart){case ot:u=t,C=2*r-s;break;case 2402:u=a.length-2,C=r+a[u]-a[u+1];break;default:u=t,C=s}if(void 0===L)switch(this.getSettings_().endingEnd){case ot:_=t,L=2*s-r;break;case 2402:_=1,L=s+a[1]-a[0];break;default:_=t-1,L=r}const U=.5*(s-r),Q=this.valueSize;this._weightPrev=U/(r-C),this._weightNext=U/(L-s),this._offsetPrev=u*Q,this._offsetNext=_*Q}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,C=this.valueSize,L=t*C,U=L-C,Q=this._offsetPrev,ae=this._offsetNext,fe=this._weightPrev,ye=this._weightNext,Me=(s-r)/(a-r),Ue=Me*Me,Pe=Ue*Me,Ie=-fe*Pe+2*fe*Ue-fe*Me,tt=(1+fe)*Pe+(-1.5-2*fe)*Ue+(-.5+fe)*Me+1,it=(-1-ye)*Pe+(1.5+ye)*Ue+.5*Me,rt=ye*Pe-ye*Ue;for(let $t=0;$t!==C;++$t)u[$t]=Ie*_[Q+$t]+tt*_[U+$t]+it*_[L+$t]+rt*_[ae+$t];return u}}class r1 extends $h{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,C=this.valueSize,L=t*C,U=L-C,Q=(s-r)/(a-r),ae=1-Q;for(let fe=0;fe!==C;++fe)u[fe]=_[U+fe]*ae+_[L+fe]*Q;return u}}class Tv extends $h{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class lc{constructor(t,r,s,a){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ic(r,this.TimeBufferType),this.values=Ic(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let s;if(r.toJSON!==this.toJSON)s=r.toJSON(t);else{s={name:t.name,times:Ic(t.times,Array),values:Ic(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(s.interpolation=a)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Tv(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new r1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new n1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Io:r=this.InterpolantFactoryMethodDiscrete;break;case ko:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Io;case this.InterpolantFactoryMethodLinear:return ko;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]+=t}return this}scale(t){if(1!==t){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]*=t}return this}trim(t,r){const s=this.times,a=s.length;let u=0,_=a-1;for(;u!==a&&s[u]<t;)++u;for(;-1!==_&&s[_]>r;)--_;if(++_,0!==u||_!==a){u>=_&&(_=Math.max(_,1),u=_-1);const C=this.getValueSize();this.times=s.slice(u,_),this.values=this.values.slice(u*C,_*C)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,a=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let _=null;for(let C=0;C!==u;C++){const L=s[C];if("number"==typeof L&&isNaN(L)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,C,L),t=!1;break}if(null!==_&&_>L){console.error("THREE.KeyframeTrack: Out of order keys.",this,C,L,_),t=!1;break}_=L}if(void 0!==a&&function gg(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}(a))for(let C=0,L=a.length;C!==L;++C){const U=a[C];if(isNaN(U)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,C,U),t=!1;break}}return t}optimize(){const t=this.times.slice(),r=this.values.slice(),s=this.getValueSize(),a=2302===this.getInterpolation(),u=t.length-1;let _=1;for(let C=1;C<u;++C){let L=!1;const U=t[C];if(U!==t[C+1]&&(1!==C||U!==t[0]))if(a)L=!0;else{const ae=C*s,fe=ae-s,ye=ae+s;for(let Me=0;Me!==s;++Me){const Ue=r[ae+Me];if(Ue!==r[fe+Me]||Ue!==r[ye+Me]){L=!0;break}}}if(L){if(C!==_){t[_]=t[C];const ae=C*s,fe=_*s;for(let ye=0;ye!==s;++ye)r[fe+ye]=r[ae+ye]}++_}}if(u>0){t[_]=t[u];for(let C=u*s,L=_*s,U=0;U!==s;++U)r[L+U]=r[C+U];++_}return _!==t.length?(this.times=t.slice(0,_),this.values=r.slice(0,_*s)):(this.times=t,this.values=r),this}clone(){const t=this.times.slice(),r=this.values.slice(),a=new(0,this.constructor)(this.name,t,r);return a.createInterpolant=this.createInterpolant,a}}lc.prototype.TimeBufferType=Float32Array,lc.prototype.ValueBufferType=Float32Array,lc.prototype.DefaultInterpolation=ko;class Uo extends lc{constructor(t,r,s){super(t,r,s)}}Uo.prototype.ValueTypeName="bool",Uo.prototype.ValueBufferType=Array,Uo.prototype.DefaultInterpolation=Io,Uo.prototype.InterpolantFactoryMethodLinear=void 0,Uo.prototype.InterpolantFactoryMethodSmooth=void 0;class i1 extends lc{}i1.prototype.ValueTypeName="color";class Wd extends lc{}Wd.prototype.ValueTypeName="number";class cE extends $h{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,C=this.valueSize,L=(s-r)/(a-r);let U=t*C;for(let Q=U+C;U!==Q;U+=4)en.slerpFlat(u,0,_,U-C,_,U,L);return u}}class id extends lc{InterpolantFactoryMethodLinear(t){return new cE(this.times,this.values,this.getValueSize(),t)}}id.prototype.ValueTypeName="quaternion",id.prototype.InterpolantFactoryMethodSmooth=void 0;class Hh extends lc{constructor(t,r,s){super(t,r,s)}}Hh.prototype.ValueTypeName="string",Hh.prototype.ValueBufferType=Array,Hh.prototype.DefaultInterpolation=Io,Hh.prototype.InterpolantFactoryMethodLinear=void 0,Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class Cu extends lc{}Cu.prototype.ValueTypeName="vector";class Hc{constructor(t="",r=-1,s=[],a=2500){this.name=t,this.tracks=s,this.duration=r,this.blendMode=a,this.uuid=at(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],s=t.tracks,a=1/(t.fps||1);for(let _=0,C=s.length;_!==C;++_)r.push(o1(s[_]).scale(a));const u=new this(t.name,t.duration,r,t.blendMode);return u.uuid=t.uuid,u}static toJSON(t){const r=[],s=t.tracks,a={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let u=0,_=s.length;u!==_;++u)r.push(lc.toJSON(s[u]));return a}static CreateFromMorphTargetSequence(t,r,s,a){const u=r.length,_=[];for(let C=0;C<u;C++){let L=[],U=[];L.push((C+u-1)%u,C,(C+1)%u),U.push(0,1,0);const Q=Ev(L);L=yg(L,1,Q),U=yg(U,1,Q),!a&&0===L[0]&&(L.push(u),U.push(U[0])),_.push(new Wd(".morphTargetInfluences["+r[C].name+"]",L,U).scale(1/s))}return new this(t,-1,_)}static findByName(t,r){let s=t;Array.isArray(t)||(s=t.geometry&&t.geometry.animations||t.animations);for(let a=0;a<s.length;a++)if(s[a].name===r)return s[a];return null}static CreateClipsFromMorphTargetSequences(t,r,s){const a={},u=/^([\w-]*?)([\d]+)$/;for(let C=0,L=t.length;C<L;C++){const U=t[C],Q=U.name.match(u);if(Q&&Q.length>1){const ae=Q[1];let fe=a[ae];fe||(a[ae]=fe=[]),fe.push(U)}}const _=[];for(const C in a)_.push(this.CreateFromMorphTargetSequence(C,a[C],r,s));return _}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(ae,fe,ye,Me,Ue){if(0!==ye.length){const Pe=[],Ie=[];vg(ye,Pe,Ie,Me),0!==Pe.length&&Ue.push(new ae(fe,Pe,Ie))}},a=[],u=t.name||"default",_=t.fps||30,C=t.blendMode;let L=t.length||-1;const U=t.hierarchy||[];for(let ae=0;ae<U.length;ae++){const fe=U[ae].keys;if(fe&&0!==fe.length)if(fe[0].morphTargets){const ye={};let Me;for(Me=0;Me<fe.length;Me++)if(fe[Me].morphTargets)for(let Ue=0;Ue<fe[Me].morphTargets.length;Ue++)ye[fe[Me].morphTargets[Ue]]=-1;for(const Ue in ye){const Pe=[],Ie=[];for(let tt=0;tt!==fe[Me].morphTargets.length;++tt){const it=fe[Me];Pe.push(it.time),Ie.push(it.morphTarget===Ue?1:0)}a.push(new Wd(".morphTargetInfluence["+Ue+"]",Pe,Ie))}L=ye.length*_}else{const ye=".bones["+r[ae].name+"]";s(Cu,ye+".position",fe,"pos",a),s(id,ye+".quaternion",fe,"rot",a),s(Cu,ye+".scale",fe,"scl",a)}}return 0===a.length?null:new this(u,L,a,C)}resetDuration(){let r=0;for(let s=0,a=this.tracks.length;s!==a;++s){const u=this.tracks[s];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o1(v){if(void 0===v.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function s1(v){switch(v.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wd;case"vector":case"vector2":case"vector3":case"vector4":return Cu;case"color":return i1;case"quaternion":return id;case"bool":case"boolean":return Uo;case"string":return Hh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+v)}(v.type);if(void 0===v.times){const r=[],s=[];vg(v.keys,r,s,"value"),v.times=r,v.values=s}return void 0!==t.parse?t.parse(v):new t(v.name,v.times,v.values,v.interpolation)}const pl={enabled:!1,files:{},add:function(v,t){!1!==this.enabled&&(this.files[v]=t)},get:function(v){if(!1!==this.enabled)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class a1{constructor(t,r,s){const a=this;let L,u=!1,_=0,C=0;const U=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=s,this.itemStart=function(Q){C++,!1===u&&void 0!==a.onStart&&a.onStart(Q,_,C),u=!0},this.itemEnd=function(Q){_++,void 0!==a.onProgress&&a.onProgress(Q,_,C),_===C&&(u=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(Q){void 0!==a.onError&&a.onError(Q)},this.resolveURL=function(Q){return L?L(Q):Q},this.setURLModifier=function(Q){return L=Q,this},this.addHandler=function(Q,ae){return U.push(Q,ae),this},this.removeHandler=function(Q){const ae=U.indexOf(Q);return-1!==ae&&U.splice(ae,2),this},this.getHandler=function(Q){for(let ae=0,fe=U.length;ae<fe;ae+=2){const ye=U[ae],Me=U[ae+1];if(ye.global&&(ye.lastIndex=0),ye.test(Q))return Me}return null}}}const l1=new a1;let Oo=(()=>{class v{constructor(r){this.manager=void 0!==r?r:l1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,s){const a=this;return new Promise(function(u,_){a.load(r,u,s,_)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}return v.DEFAULT_MATERIAL_NAME="__DEFAULT",v})();const $l={};class Cv extends Error{constructor(t,r){super(t),this.response=r}}class Tl extends Oo{constructor(t){super(t)}load(t,r,s,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=pl.get(t);if(void 0!==u)return this.manager.itemStart(t),setTimeout(()=>{r&&r(u),this.manager.itemEnd(t)},0),u;if(void 0!==$l[t])return void $l[t].push({onLoad:r,onProgress:s,onError:a});$l[t]=[],$l[t].push({onLoad:r,onProgress:s,onError:a});const _=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),C=this.mimeType,L=this.responseType;fetch(_).then(U=>{if(200===U.status||0===U.status){if(0===U.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===U.body||void 0===U.body.getReader)return U;const Q=$l[t],ae=U.body.getReader(),fe=U.headers.get("X-File-Size")||U.headers.get("Content-Length"),ye=fe?parseInt(fe):0,Me=0!==ye;let Ue=0;const Pe=new ReadableStream({start(Ie){!function tt(){ae.read().then(({done:it,value:rt})=>{if(it)Ie.close();else{Ue+=rt.byteLength;const $t=new ProgressEvent("progress",{lengthComputable:Me,loaded:Ue,total:ye});for(let At=0,Ft=Q.length;At<Ft;At++){const Wt=Q[At];Wt.onProgress&&Wt.onProgress($t)}Ie.enqueue(rt),tt()}},it=>{Ie.error(it)})}()}});return new Response(Pe)}throw new Cv(`fetch for "${U.url}" responded with ${U.status}: ${U.statusText}`,U)}).then(U=>{switch(L){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"document":return U.text().then(Q=>(new DOMParser).parseFromString(Q,C));case"json":return U.json();default:if(void 0===C)return U.text();{const ae=/charset="?([^;"\s]*)"?/i.exec(C),fe=ae&&ae[1]?ae[1].toLowerCase():void 0,ye=new TextDecoder(fe);return U.arrayBuffer().then(Me=>ye.decode(Me))}}}).then(U=>{pl.add(t,U);const Q=$l[t];delete $l[t];for(let ae=0,fe=Q.length;ae<fe;ae++){const ye=Q[ae];ye.onLoad&&ye.onLoad(U)}}).catch(U=>{const Q=$l[t];if(void 0===Q)throw this.manager.itemError(t),U;delete $l[t];for(let ae=0,fe=Q.length;ae<fe;ae++){const ye=Q[ae];ye.onError&&ye.onError(U)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class wp extends Oo{constructor(t){super(t)}load(t,r,s,a){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=pl.get(t);if(void 0!==_)return u.manager.itemStart(t),setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_;const C=_l("img");function L(){Q(),pl.add(t,this),r&&r(this),u.manager.itemEnd(t)}function U(ae){Q(),a&&a(ae),u.manager.itemError(t),u.manager.itemEnd(t)}function Q(){C.removeEventListener("load",L,!1),C.removeEventListener("error",U,!1)}return C.addEventListener("load",L,!1),C.addEventListener("error",U,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(C.crossOrigin=this.crossOrigin),u.manager.itemStart(t),C.src=t,C}}class c1 extends Oo{constructor(t){super(t)}load(t,r,s,a){const u=new no,_=new wp(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(t,function(C){u.image=C,u.needsUpdate=!0,void 0!==r&&r(u)},s,a),u}}class Wc extends Qs{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Mr(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(r.object.target=this.target.uuid),r}}const Sp=new Mi,Ep=new mt,Iv=new mt;class _g{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fr(512,512),this.map=null,this.mapPass=null,this.matrix=new Mi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ep,this._frameExtents=new fr(1,1),this._viewportCount=1,this._viewports=[new Ds(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,s=this.matrix;Ep.setFromMatrixPosition(t.matrixWorld),r.position.copy(Ep),Iv.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Iv),r.updateMatrixWorld(),Sp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sp),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Sp)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Rv extends _g{constructor(){super(new co(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,s=2*Re*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height,u=t.distance||r.far;(s!==r.fov||a!==r.aspect||u!==r.far)&&(r.fov=s,r.aspect=a,r.far=u,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Pv extends Wc{constructor(t,r,s=0,a=Math.PI/3,u=0,_=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qs.DEFAULT_UP),this.updateMatrix(),this.target=new Qs,this.distance=s,this.angle=a,this.penumbra=u,this.decay=_,this.map=null,this.shadow=new Rv}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const cc=new Mi,Wh=new mt,Mp=new mt;class dE extends _g{constructor(){super(new co(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fr(4,2),this._viewportCount=6,this._viewports=[new Ds(2,1,1,1),new Ds(0,1,1,1),new Ds(3,1,1,1),new Ds(1,1,1,1),new Ds(3,0,1,1),new Ds(1,0,1,1)],this._cubeDirections=[new mt(1,0,0),new mt(-1,0,0),new mt(0,0,1),new mt(0,0,-1),new mt(0,1,0),new mt(0,-1,0)],this._cubeUps=[new mt(0,1,0),new mt(0,1,0),new mt(0,1,0),new mt(0,1,0),new mt(0,0,1),new mt(0,0,-1)]}updateMatrices(t,r=0){const s=this.camera,a=this.matrix,u=t.distance||s.far;u!==s.far&&(s.far=u,s.updateProjectionMatrix()),Wh.setFromMatrixPosition(t.matrixWorld),s.position.copy(Wh),Mp.copy(s.position),Mp.add(this._cubeDirections[r]),s.up.copy(this._cubeUps[r]),s.lookAt(Mp),s.updateMatrixWorld(),a.makeTranslation(-Wh.x,-Wh.y,-Wh.z),cc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cc)}}class u1 extends Wc{constructor(t,r,s=0,a=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=a,this.shadow=new dE}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class bg extends xo{constructor(t=-1,r=1,s=1,a=-1,u=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=s,this.bottom=a,this.near=u,this.far=_,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,s,a,u,_){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let u=s-t,_=s+t,C=a+r,L=a-r;if(null!==this.view&&this.view.enabled){const U=(this.right-this.left)/this.view.fullWidth/this.zoom,Q=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=U*this.view.offsetX,_=u+U*this.view.width,C-=Q*this.view.offsetY,L=C-Q*this.view.height}this.projectionMatrix.makeOrthographic(u,_,C,L,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}class hE extends _g{constructor(){super(new bg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ov extends Wc{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qs.DEFAULT_UP),this.updateMatrix(),this.target=new Qs,this.shadow=new hE}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Lv extends Wc{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class Xc{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let r="";for(let s=0,a=t.length;s<a;s++)r+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}static resolveURL(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class wg extends Oo{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,s,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=pl.get(t);if(void 0!==_)return u.manager.itemStart(t),_.then?void _.then(U=>{r&&r(U),u.manager.itemEnd(t)}).catch(U=>{a&&a(U)}):(setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_);const C={};C.credentials="anonymous"===this.crossOrigin?"same-origin":"include",C.headers=this.requestHeader;const L=fetch(t,C).then(function(U){return U.blob()}).then(function(U){return createImageBitmap(U,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(U){return pl.add(t,U),r&&r(U),u.manager.itemEnd(t),U}).catch(function(U){a&&a(U),pl.remove(t),u.manager.itemError(t),u.manager.itemEnd(t)});pl.add(t,L),u.manager.itemStart(t)}}class Eg extends co{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class y1{constructor(t,r,s){let a,u,_;switch(this.binding=t,this.valueSize=s,r){case"quaternion":a=this._slerp,u=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":a=this._select,u=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:a=this._lerp,u=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=u,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const s=this.buffer,a=this.valueSize,u=t*a+a;let _=this.cumulativeWeight;if(0===_){for(let C=0;C!==a;++C)s[u+C]=s[C];_=r}else _+=r,this._mixBufferRegion(s,u,0,r/_,a);this.cumulativeWeight=_}accumulateAdditive(t){const r=this.buffer,s=this.valueSize,a=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,a,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,s=this.buffer,a=t*r+r,u=this.cumulativeWeight,_=this.cumulativeWeightAdditive,C=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(s,a,r*this._origIndex,1-u,r),_>0&&this._mixBufferRegionAdditive(s,a,this._addIndex*r,1,r);for(let L=r,U=r+r;L!==U;++L)if(s[L]!==s[L+r]){C.setValue(s,a);break}}saveOriginalState(){const r=this.buffer,s=this.valueSize,a=s*this._origIndex;this.binding.getValue(r,a);for(let u=s,_=a;u!==_;++u)r[u]=r[a+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let s=t;s<r;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[r+s]=this.buffer[t+s]}_select(t,r,s,a,u){if(a>=.5)for(let _=0;_!==u;++_)t[r+_]=t[s+_]}_slerp(t,r,s,a){en.slerpFlat(t,r,t,r,t,s,a)}_slerpAdditive(t,r,s,a,u){const _=this._workIndex*u;en.multiplyQuaternionsFlat(t,_,t,r,t,s),en.slerpFlat(t,r,t,r,t,_,a)}_lerp(t,r,s,a,u){const _=1-a;for(let C=0;C!==u;++C){const L=r+C;t[L]=t[L]*_+t[s+C]*a}}_lerpAdditive(t,r,s,a,u){for(let _=0;_!==u;++_){const C=r+_;t[C]=t[C]+t[s+_]*a}}}const Tg="\\[\\]\\.:\\/",v1=new RegExp("["+Tg+"]","g"),Cg="[^"+Tg+"]",Vv="[^"+Tg.replace("\\.","")+"]",Hv=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Cg)+/(WCOD+)?/.source.replace("WCOD",Vv)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cg)+"$"),Wv=["material","materials","bones","map"];class Xv{constructor(t,r,s){const a=s||wo.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,a)}getValue(t,r){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(t,r)}setValue(t,r){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,u=s.length;a!==u;++a)s[a].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].unbind()}}let wo=(()=>{class v{constructor(r,s,a){this.path=s,this.parsedPath=a||v.parseTrackName(s),this.node=v.findNode(r,this.parsedPath.nodeName),this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,a){return r&&r.isAnimationObjectGroup?new v.Composite(r,s,a):new v(r,s,a)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(v1,"")}static parseTrackName(r){const s=Hv.exec(r);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const _=a.nodeName.substring(u+1);-1!==Wv.indexOf(_)&&(a.nodeName=a.nodeName.substring(0,u),a.objectName=_)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return a}static findNode(r,s){if(void 0===s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const a=r.skeleton.getBoneByName(s);if(void 0!==a)return a}if(r.children){const a=function(_){for(let C=0;C<_.length;C++){const L=_[C];if(L.name===s||L.uuid===s)return L;const U=a(L.children);if(U)return U}return null},u=a(r.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)r[s++]=a[u]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,a=s.objectName,u=s.propertyName;let _=s.propertyIndex;if(r||(r=v.findNode(this.rootNode,s.nodeName),this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(a){let Q=s.objectIndex;switch(a){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let ae=0;ae<r.length;ae++)if(r[ae].name===Q){Q=ae;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[a]}if(void 0!==Q){if(void 0===r[Q])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[Q]}}const C=r[u];if(void 0===C)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",r);let L=this.Versioning.None;this.targetObject=r,!0===r.isMaterial?L=this.Versioning.NeedsUpdate:!0===r.isObject3D&&(L=this.Versioning.MatrixWorldNeedsUpdate);let U=this.BindingType.Direct;if(void 0!==_){if("morphTargetInfluences"===u){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[_]&&(_=r.morphTargetDictionary[_])}U=this.BindingType.ArrayElement,this.resolvedProperty=C,this.propertyIndex=_}else void 0!==C.fromArray&&void 0!==C.toArray?(U=this.BindingType.HasFromToArray,this.resolvedProperty=C):Array.isArray(C)?(U=this.BindingType.EntireArray,this.resolvedProperty=C):this.propertyName=u;this.getValue=this.GetterByBindingType[U],this.setValue=this.SetterByBindingTypeAndVersioning[U][L]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=Xv,v})();wo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},wo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},wo.prototype.GetterByBindingType=[wo.prototype._getValue_direct,wo.prototype._getValue_array,wo.prototype._getValue_arrayElement,wo.prototype._getValue_toArray],wo.prototype.SetterByBindingTypeAndVersioning=[[wo.prototype._setValue_direct,wo.prototype._setValue_direct_setNeedsUpdate,wo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_array,wo.prototype._setValue_array_setNeedsUpdate,wo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_arrayElement,wo.prototype._setValue_arrayElement_setNeedsUpdate,wo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wo.prototype._setValue_fromArray,wo.prototype._setValue_fromArray_setNeedsUpdate,wo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _1{constructor(t,r,s=null,a=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=s,this.blendMode=a;const u=r.tracks,_=u.length,C=new Array(_),L={endingStart:Eo,endingEnd:Eo};for(let U=0;U!==_;++U){const Q=u[U].createInterpolant(null);C[U]=Q,Q.settings=L}this._interpolantSettings=L,this._interpolants=C,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,s){if(t.fadeOut(r),this.fadeIn(r),s){const a=this._clip.duration,u=t._clip.duration,C=a/u;t.warp(1,u/a,r),this.warp(C,1,r)}return this}crossFadeTo(t,r,s){return t.crossFadeFrom(this,r,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,s){const a=this._mixer,u=a.time,_=this.timeScale;let C=this._timeScaleInterpolant;null===C&&(C=a._lendControlInterpolant(),this._timeScaleInterpolant=C);const L=C.parameterPositions,U=C.sampleValues;return L[0]=u,L[1]=u+s,U[0]=t/_,U[1]=r/_,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,s,a){if(!this.enabled)return void this._updateWeight(t);const u=this._startTime;if(null!==u){const L=(t-u)*s;L<0||0===s?r=0:(this._startTime=null,r=s*L)}r*=this._updateTimeScale(t);const _=this._updateTime(r),C=this._updateWeight(t);if(C>0){const L=this._interpolants,U=this._propertyBindings;if(2501===this.blendMode)for(let Q=0,ae=L.length;Q!==ae;++Q)L[Q].evaluate(_),U[Q].accumulateAdditive(C);else for(let Q=0,ae=L.length;Q!==ae;++Q)L[Q].evaluate(_),U[Q].accumulate(a,C)}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const s=this._weightInterpolant;if(null!==s){const a=s.evaluate(t)[0];r*=a,t>s.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(r*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,s=this.loop;let a=this.time+t,u=this._loopCount;const _=2202===s;if(0===t)return-1===u||!_||1&~u?a:r-a;if(2200===s){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=r)a=r;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===u&&(t>=0?(u=0,this._setEndings(!0,0===this.repetitions,_)):this._setEndings(0===this.repetitions,!0,_)),a>=r||a<0){const C=Math.floor(a/r);a-=r*C,u+=Math.abs(C);const L=this.repetitions-u;if(L<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?r:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===L){const U=t<0;this._setEndings(U,!U,_)}else this._setEndings(!1,!1,_);this._loopCount=u,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:C})}}else this.time=a;if(_&&!(1&~u))return r-a}return a}_setEndings(t,r,s){const a=this._interpolantSettings;s?(a.endingStart=ot,a.endingEnd=ot):(a.endingStart=t?this.zeroSlopeAtStart?ot:Eo:2402,a.endingEnd=r?this.zeroSlopeAtEnd?ot:Eo:2402)}_scheduleFading(t,r,s){const a=this._mixer,u=a.time;let _=this._weightInterpolant;null===_&&(_=a._lendControlInterpolant(),this._weightInterpolant=_);const C=_.parameterPositions,L=_.sampleValues;return C[0]=u,L[0]=r,C[1]=u+t,L[1]=s,this}}const b1=new Float32Array(1);class qv extends wn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const s=t._localRoot||this._root,a=t._clip.tracks,u=a.length,_=t._propertyBindings,C=t._interpolants,L=s.uuid,U=this._bindingsByRootAndName;let Q=U[L];void 0===Q&&(Q={},U[L]=Q);for(let ae=0;ae!==u;++ae){const fe=a[ae],ye=fe.name;let Me=Q[ye];if(void 0!==Me)++Me.referenceCount,_[ae]=Me;else{if(Me=_[ae],void 0!==Me){null===Me._cacheIndex&&(++Me.referenceCount,this._addInactiveBinding(Me,L,ye));continue}Me=new y1(wo.create(s,ye,r&&r._propertyBindings[ae].binding.parsedPath),fe.ValueTypeName,fe.getValueSize()),++Me.referenceCount,this._addInactiveBinding(Me,L,ye),_[ae]=Me}C[ae].resultBuffer=Me.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const s=(t._localRoot||this._root).uuid,a=t._clip.uuid,u=this._actionsByClip[a];this._bindAction(t,u&&u.knownActions[0]),this._addInactiveAction(t,a,s)}const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==u.useCount++&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==--u.useCount&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,s){const a=this._actions,u=this._actionsByClip;let _=u[r];if(void 0===_)_={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[r]=_;else{const C=_.knownActions;t._byClipCacheIndex=C.length,C.push(t)}t._cacheIndex=a.length,a.push(t),_.actionByRoot[s]=t}_removeInactiveAction(t){const r=this._actions,s=r[r.length-1],a=t._cacheIndex;s._cacheIndex=a,r[a]=s,r.pop(),t._cacheIndex=null;const u=t._clip.uuid,_=this._actionsByClip,C=_[u],L=C.knownActions,U=L[L.length-1],Q=t._byClipCacheIndex;U._byClipCacheIndex=Q,L[Q]=U,L.pop(),t._byClipCacheIndex=null,delete C.actionByRoot[(t._localRoot||this._root).uuid],0===L.length&&delete _[u],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==--u.referenceCount&&this._removeInactiveBinding(u)}}_lendAction(t){const r=this._actions,s=t._cacheIndex,a=this._nActiveActions++,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_takeBackAction(t){const r=this._actions,s=t._cacheIndex,a=--this._nActiveActions,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_addInactiveBinding(t,r,s){const a=this._bindingsByRootAndName,u=this._bindings;let _=a[r];void 0===_&&(_={},a[r]=_),_[s]=t,t._cacheIndex=u.length,u.push(t)}_removeInactiveBinding(t){const r=this._bindings,s=t.binding,a=s.rootNode.uuid,u=s.path,_=this._bindingsByRootAndName,C=_[a],L=r[r.length-1],U=t._cacheIndex;L._cacheIndex=U,r[U]=L,r.pop(),delete C[u],0===Object.keys(C).length&&delete _[a]}_lendBinding(t){const r=this._bindings,s=t._cacheIndex,a=this._nActiveBindings++,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_takeBackBinding(t){const r=this._bindings,s=t._cacheIndex,a=--this._nActiveBindings,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let s=t[r];return void 0===s&&(s=new r1(new Float32Array(2),new Float32Array(2),1,b1),s.__cacheIndex=r,t[r]=s),s}_takeBackControlInterpolant(t){const r=this._controlInterpolants,s=t.__cacheIndex,a=--this._nActiveControlInterpolants,u=r[a];t.__cacheIndex=a,r[a]=t,u.__cacheIndex=s,r[s]=u}clipAction(t,r,s){const a=r||this._root,u=a.uuid;let _="string"==typeof t?Hc.findByName(a,t):t;const C=null!==_?_.uuid:t,L=this._actionsByClip[C];let U=null;if(void 0===s&&(s=null!==_?_.blendMode:2500),void 0!==L){const ae=L.actionByRoot[u];if(void 0!==ae&&ae.blendMode===s)return ae;U=L.knownActions[0],null===_&&(_=U._clip)}if(null===_)return null;const Q=new _1(this,_,r,s);return this._bindAction(Q,U),this._addInactiveAction(Q,C,u),Q}existingAction(t,r){const s=r||this._root,a=s.uuid,u="string"==typeof t?Hc.findByName(s,t):t,C=this._actionsByClip[u?u.uuid:t];return void 0!==C&&C.actionByRoot[a]||null}stopAllAction(){const t=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)t[s].stop();return this}update(t){const r=this._actions,s=this._nActiveActions,a=this.time+=t*=this.timeScale,u=Math.sign(t),_=this._accuIndex^=1;for(let U=0;U!==s;++U)r[U]._update(a,t,u,_);const C=this._bindings,L=this._nActiveBindings;for(let U=0;U!==L;++U)C[U].apply(_);return this}setTime(t){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,s=t.uuid,a=this._actionsByClip,u=a[s];if(void 0!==u){const _=u.knownActions;for(let C=0,L=_.length;C!==L;++C){const U=_[C];this._deactivateAction(U);const Q=U._cacheIndex,ae=r[r.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,ae._cacheIndex=Q,r[Q]=ae,r.pop(),this._removeInactiveBindingsForAction(U)}delete a[s]}}uncacheRoot(t){const r=t.uuid,s=this._actionsByClip;for(const _ in s){const L=s[_].actionByRoot[r];void 0!==L&&(this._deactivateAction(L),this._removeInactiveAction(L))}const u=this._bindingsByRootAndName[r];if(void 0!==u)for(const _ in u){const C=u[_];C.restoreOriginalState(),this._removeInactiveBinding(C)}}uncacheAction(t,r){const s=this.existingAction(t,r);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class Yv{constructor(t=1,r=0,s=0){this.radius=t,this.phi=r,this.theta=s}set(t,r,s){return this.radius=t,this.phi=r,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,s){return this.radius=Math.sqrt(t*t+r*r+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(Qt(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const uc=new mt,Rp=new Mi,Jh=new Mi;class Ag extends il{constructor(t){const r=ad(t),s=new Zi,a=[],u=[],_=new Mr(0,0,1),C=new Mr(0,1,0);for(let U=0;U<r.length;U++){const Q=r[U];Q.parent&&Q.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),u.push(_.r,_.g,_.b),u.push(C.r,C.g,C.b))}s.setAttribute("position",new _i(a,3)),s.setAttribute("color",new _i(u,3)),super(s,new Ta({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,s=this.geometry,a=s.getAttribute("position");Jh.copy(this.root.matrixWorld).invert();for(let u=0,_=0;u<r.length;u++){const C=r[u];C.parent&&C.parent.isBone&&(Rp.multiplyMatrices(Jh,C.matrixWorld),uc.setFromMatrixPosition(Rp),a.setXYZ(_,uc.x,uc.y,uc.z),Rp.multiplyMatrices(Jh,C.parent.matrixWorld),uc.setFromMatrixPosition(Rp),a.setXYZ(_+1,uc.x,uc.y,uc.z),_+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ad(v){const t=[];!0===v.isBone&&t.push(v);for(let r=0;r<v.children.length;r++)t.push(...ad(v.children[r]));return t}class Dg extends il{constructor(t=10,r=10,s=4473924,a=8947848){s=new Mr(s),a=new Mr(a);const u=r/2,_=t/r,C=t/2,L=[],U=[];for(let fe=0,ye=0,Me=-C;fe<=r;fe++,Me+=_){L.push(-C,0,Me,C,0,Me),L.push(Me,0,-C,Me,0,C);const Ue=fe===u?s:a;Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3,Ue.toArray(U,ye),ye+=3}const Q=new Zi;Q.setAttribute("position",new _i(L,3)),Q.setAttribute("color",new _i(U,3)),super(Q,new Ta({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cd=new mt,ud=new mt,C1=new mt;class Ig extends Qs{constructor(t,r,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",void 0===r&&(r=1);let a=new Zi;a.setAttribute("position",new _i([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const u=new Ta({fog:!1,toneMapped:!1});this.lightPlane=new nc(a,u),this.add(this.lightPlane),a=new Zi,a.setAttribute("position",new _i([0,0,0,0,0,1],3)),this.targetLine=new nc(a,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cd.setFromMatrixPosition(this.light.matrixWorld),ud.setFromMatrixPosition(this.light.target.matrixWorld),C1.subVectors(ud,cd),this.lightPlane.lookAt(ud),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ud),this.targetLine.scale.z=C1.length()}}class I1 extends il{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],a=new Zi;a.setAttribute("position",new _i(r,3)),a.setAttribute("color",new _i([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(a,new Ta({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,s){const a=new Mr,u=this.geometry.attributes.color.array;return a.set(t),a.toArray(u,0),a.toArray(u,3),a.set(r),a.toArray(u,6),a.toArray(u,9),a.set(s),a.toArray(u,12),a.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bE extends wn{constructor(t,r=null){super(),this.object=t,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function tf(v,t,r,s){const a=function t0(v){switch(v){case Tr:case te:return{byteLength:1,components:1};case Ye:case De:case O:return{byteLength:2,components:1};case ie:case q:return{byteLength:2,components:4};case N:case T:case B:return{byteLength:4,components:1};case Ge:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${v}.`)}(s);switch(r){case He:case cn:return v*t;case Ve:return v*t*2;case nt:case Dt:return v*t/a.components*a.byteLength;case un:case Bn:return v*t*2/a.components*a.byteLength;case gt:return v*t*3/a.components*a.byteLength;case Vt:case Pr:return v*t*4/a.components*a.byteLength;case Ui:case ji:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case Us:case bs:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case us:case ys:return Math.max(v,16)*Math.max(t,8)/4;case wi:case $s:return Math.max(v,8)*Math.max(t,8)/2;case Vs:case Ko:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case fo:case Vo:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ea:return Math.floor((v+4)/5)*Math.floor((t+3)/4)*16;case ta:return Math.floor((v+4)/5)*Math.floor((t+4)/5)*16;case la:return Math.floor((v+5)/6)*Math.floor((t+4)/5)*16;case eo:return Math.floor((v+5)/6)*Math.floor((t+5)/6)*16;case ca:return Math.floor((v+7)/8)*Math.floor((t+4)/5)*16;case _o:return Math.floor((v+7)/8)*Math.floor((t+5)/6)*16;case ka:return Math.floor((v+7)/8)*Math.floor((t+7)/8)*16;case Wa:return Math.floor((v+9)/10)*Math.floor((t+4)/5)*16;case ke:return Math.floor((v+9)/10)*Math.floor((t+5)/6)*16;case ht:return Math.floor((v+9)/10)*Math.floor((t+7)/8)*16;case kt:return Math.floor((v+9)/10)*Math.floor((t+9)/10)*16;case Be:return Math.floor((v+11)/12)*Math.floor((t+9)/10)*16;case zt:return Math.floor((v+11)/12)*Math.floor((t+11)/12)*16;case In:case ts:case Gs:return Math.ceil(v/4)*Math.ceil(t/4)*16;case Go:case Ca:return Math.ceil(v/4)*Math.ceil(t/4)*8;case ba:case ll:return Math.ceil(v/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Rg(){let v=null,t=!1,r=null,s=null;function a(u,_){r(u,_),s=v.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==r&&(s=v.requestAnimationFrame(a),t=!0)},stop:function(){v.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(u){r=u},setContext:function(u){v=u}}}function Pg(v){const t=new WeakMap;return{get:function a(C){return C.isInterleavedBufferAttribute&&(C=C.data),t.get(C)},remove:function u(C){C.isInterleavedBufferAttribute&&(C=C.data);const L=t.get(C);L&&(v.deleteBuffer(L.buffer),t.delete(C))},update:function _(C,L){if(C.isInterleavedBufferAttribute&&(C=C.data),C.isGLBufferAttribute){const Q=t.get(C);return void((!Q||Q.version<C.version)&&t.set(C,{buffer:C.buffer,type:C.type,bytesPerElement:C.elementSize,version:C.version}))}const U=t.get(C);if(void 0===U)t.set(C,function r(C,L){const U=C.array,Q=C.usage,ae=U.byteLength,fe=v.createBuffer();let ye;if(v.bindBuffer(L,fe),v.bufferData(L,U,Q),C.onUploadCallback(),U instanceof Float32Array)ye=v.FLOAT;else if(U instanceof Uint16Array)ye=C.isFloat16BufferAttribute?v.HALF_FLOAT:v.UNSIGNED_SHORT;else if(U instanceof Int16Array)ye=v.SHORT;else if(U instanceof Uint32Array)ye=v.UNSIGNED_INT;else if(U instanceof Int32Array)ye=v.INT;else if(U instanceof Int8Array)ye=v.BYTE;else if(U instanceof Uint8Array)ye=v.UNSIGNED_BYTE;else{if(!(U instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+U);ye=v.UNSIGNED_BYTE}return{buffer:fe,type:ye,bytesPerElement:U.BYTES_PER_ELEMENT,version:C.version,size:ae}}(C,L));else if(U.version<C.version){if(U.size!==C.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(C,L,U){const Q=L.array,ae=L.updateRanges;if(v.bindBuffer(U,C),0===ae.length)v.bufferSubData(U,0,Q);else{ae.sort((ye,Me)=>ye.start-Me.start);let fe=0;for(let ye=1;ye<ae.length;ye++){const Me=ae[fe],Ue=ae[ye];Ue.start<=Me.start+Me.count+1?Me.count=Math.max(Me.count,Ue.start+Ue.count-Me.start):(++fe,ae[fe]=Ue)}ae.length=fe+1;for(let ye=0,Me=ae.length;ye<Me;ye++){const Ue=ae[ye];v.bufferSubData(U,Ue.start*Q.BYTES_PER_ELEMENT,Q,Ue.start,Ue.count)}L.clearUpdateRanges()}L.onUploadCallback()})(U.buffer,C,L),U.version=C.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d);const ss={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ti={common:{diffuse:{value:new Mr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Gi},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Gi}},envmap:{envMap:{value:null},envMapRotation:{value:new Gi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Gi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Gi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Gi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Gi},normalScale:{value:new fr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Gi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Gi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Gi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Gi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Mr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Mr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0},uvTransform:{value:new Gi}},sprite:{diffuse:{value:new Mr(16777215)},opacity:{value:1},center:{value:new fr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Gi},alphaMap:{value:null},alphaMapTransform:{value:new Gi},alphaTest:{value:0}}},$a={basic:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.fog]),vertexShader:ss.meshbasic_vert,fragmentShader:ss.meshbasic_frag},lambert:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,ti.lights,{emissive:{value:new Mr(0)}}]),vertexShader:ss.meshlambert_vert,fragmentShader:ss.meshlambert_frag},phong:{uniforms:tl([ti.common,ti.specularmap,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,ti.lights,{emissive:{value:new Mr(0)},specular:{value:new Mr(1118481)},shininess:{value:30}}]),vertexShader:ss.meshphong_vert,fragmentShader:ss.meshphong_frag},standard:{uniforms:tl([ti.common,ti.envmap,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.roughnessmap,ti.metalnessmap,ti.fog,ti.lights,{emissive:{value:new Mr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag},toon:{uniforms:tl([ti.common,ti.aomap,ti.lightmap,ti.emissivemap,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.gradientmap,ti.fog,ti.lights,{emissive:{value:new Mr(0)}}]),vertexShader:ss.meshtoon_vert,fragmentShader:ss.meshtoon_frag},matcap:{uniforms:tl([ti.common,ti.bumpmap,ti.normalmap,ti.displacementmap,ti.fog,{matcap:{value:null}}]),vertexShader:ss.meshmatcap_vert,fragmentShader:ss.meshmatcap_frag},points:{uniforms:tl([ti.points,ti.fog]),vertexShader:ss.points_vert,fragmentShader:ss.points_frag},dashed:{uniforms:tl([ti.common,ti.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ss.linedashed_vert,fragmentShader:ss.linedashed_frag},depth:{uniforms:tl([ti.common,ti.displacementmap]),vertexShader:ss.depth_vert,fragmentShader:ss.depth_frag},normal:{uniforms:tl([ti.common,ti.bumpmap,ti.normalmap,ti.displacementmap,{opacity:{value:1}}]),vertexShader:ss.meshnormal_vert,fragmentShader:ss.meshnormal_frag},sprite:{uniforms:tl([ti.sprite,ti.fog]),vertexShader:ss.sprite_vert,fragmentShader:ss.sprite_frag},background:{uniforms:{uvTransform:{value:new Gi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ss.background_vert,fragmentShader:ss.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Gi}},vertexShader:ss.backgroundCube_vert,fragmentShader:ss.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ss.cube_vert,fragmentShader:ss.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ss.equirect_vert,fragmentShader:ss.equirect_frag},distanceRGBA:{uniforms:tl([ti.common,ti.displacementmap,{referencePosition:{value:new mt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ss.distanceRGBA_vert,fragmentShader:ss.distanceRGBA_frag},shadow:{uniforms:tl([ti.lights,ti.fog,{color:{value:new Mr(0)},opacity:{value:1}}]),vertexShader:ss.shadow_vert,fragmentShader:ss.shadow_frag}};$a.physical={uniforms:tl([$a.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Gi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Gi},clearcoatNormalScale:{value:new fr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Gi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Gi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Gi},sheen:{value:0},sheenColor:{value:new Mr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Gi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Gi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Gi},transmissionSamplerSize:{value:new fr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Gi},attenuationDistance:{value:0},attenuationColor:{value:new Mr(0)},specularColor:{value:new Mr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Gi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Gi},anisotropyVector:{value:new fr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Gi}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag};const cf={r:0,b:0,g:0},Ru=new Za,Cx=new Mi;function WE(v,t,r,s,a,u,_){const C=new Mr(0);let U,Q,L=!0===u?0:1,ae=null,fe=0,ye=null;function Me(it){let rt=!0===it.isScene?it.background:null;return rt&&rt.isTexture&&(rt=(it.backgroundBlurriness>0?r:t).get(rt)),rt}function Ie(it,rt){it.getRGB(cf,Yy(v)),s.buffers.color.setClear(cf.r,cf.g,cf.b,rt,_)}return{getClearColor:function(){return C},setClearColor:function(it,rt=1){C.set(it),L=rt,Ie(C,L)},getClearAlpha:function(){return L},setClearAlpha:function(it){L=it,Ie(C,L)},render:function Ue(it){let rt=!1;const $t=Me(it);null===$t?Ie(C,L):$t&&$t.isColor&&(Ie($t,1),rt=!0);const At=v.xr.getEnvironmentBlendMode();"additive"===At?s.buffers.color.setClear(0,0,0,1,_):"alpha-blend"===At&&s.buffers.color.setClear(0,0,0,0,_),(v.autoClear||rt)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil))},addToRenderList:function Pe(it,rt){const $t=Me(rt);$t&&($t.isCubeTexture||$t.mapping===yn)?(void 0===Q&&(Q=new ls(new _c(1,1,1),new Sl({name:"BackgroundCubeMaterial",uniforms:Ad($a.backgroundCube.uniforms),vertexShader:$a.backgroundCube.vertexShader,fragmentShader:$a.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Q.geometry.deleteAttribute("normal"),Q.geometry.deleteAttribute("uv"),Q.onBeforeRender=function(At,Ft,Wt){this.matrixWorld.copyPosition(Wt.matrixWorld)},Object.defineProperty(Q.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(Q)),Ru.copy(rt.backgroundRotation),Ru.x*=-1,Ru.y*=-1,Ru.z*=-1,$t.isCubeTexture&&!1===$t.isRenderTargetTexture&&(Ru.y*=-1,Ru.z*=-1),Q.material.uniforms.envMap.value=$t,Q.material.uniforms.flipEnvMap.value=$t.isCubeTexture&&!1===$t.isRenderTargetTexture?-1:1,Q.material.uniforms.backgroundBlurriness.value=rt.backgroundBlurriness,Q.material.uniforms.backgroundIntensity.value=rt.backgroundIntensity,Q.material.uniforms.backgroundRotation.value.setFromMatrix4(Cx.makeRotationFromEuler(Ru)),Q.material.toneMapped=Ss.getTransfer($t.colorSpace)!==Li,(ae!==$t||fe!==$t.version||ye!==v.toneMapping)&&(Q.material.needsUpdate=!0,ae=$t,fe=$t.version,ye=v.toneMapping),Q.layers.enableAll(),it.unshift(Q,Q.geometry,Q.material,0,0,null)):$t&&$t.isTexture&&(void 0===U&&(U=new ls(new rd(2,2),new Sl({name:"BackgroundMaterial",uniforms:Ad($a.background.uniforms),vertexShader:$a.background.vertexShader,fragmentShader:$a.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),Object.defineProperty(U.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(U)),U.material.uniforms.t2D.value=$t,U.material.uniforms.backgroundIntensity.value=rt.backgroundIntensity,U.material.toneMapped=Ss.getTransfer($t.colorSpace)!==Li,!0===$t.matrixAutoUpdate&&$t.updateMatrix(),U.material.uniforms.uvTransform.value.copy($t.matrix),(ae!==$t||fe!==$t.version||ye!==v.toneMapping)&&(U.material.needsUpdate=!0,ae=$t,fe=$t.version,ye=v.toneMapping),U.layers.enableAll(),it.unshift(U,U.geometry,U.material,0,0,null))},dispose:function tt(){void 0!==Q&&(Q.geometry.dispose(),Q.material.dispose(),Q=void 0),void 0!==U&&(U.geometry.dispose(),U.material.dispose(),U=void 0)}}}function Xp(v,t){const r=v.getParameter(v.MAX_VERTEX_ATTRIBS),s={},a=fe(null);let u=a,_=!1;function U(wt){return v.bindVertexArray(wt)}function Q(wt){return v.deleteVertexArray(wt)}function fe(wt){const gn=[],Kn=[],Hn=[];for(let Jn=0;Jn<r;Jn++)gn[Jn]=0,Kn[Jn]=0,Hn[Jn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:gn,enabledAttributes:Kn,attributeDivisors:Hn,object:wt,attributes:{},index:null}}function Ue(){const wt=u.newAttributes;for(let gn=0,Kn=wt.length;gn<Kn;gn++)wt[gn]=0}function Pe(wt){Ie(wt,0)}function Ie(wt,gn){const Hn=u.enabledAttributes,Jn=u.attributeDivisors;u.newAttributes[wt]=1,0===Hn[wt]&&(v.enableVertexAttribArray(wt),Hn[wt]=1),Jn[wt]!==gn&&(v.vertexAttribDivisor(wt,gn),Jn[wt]=gn)}function tt(){const wt=u.newAttributes,gn=u.enabledAttributes;for(let Kn=0,Hn=gn.length;Kn<Hn;Kn++)gn[Kn]!==wt[Kn]&&(v.disableVertexAttribArray(Kn),gn[Kn]=0)}function it(wt,gn,Kn,Hn,Jn,pr,Yn){!0===Yn?v.vertexAttribIPointer(wt,gn,Kn,Jn,pr):v.vertexAttribPointer(wt,gn,Kn,Hn,Jn,pr)}function Wt(){Mt(),_=!0,u!==a&&(u=a,U(u.object))}function Mt(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function C(wt,gn,Kn,Hn,Jn){let pr=!1;const Yn=function ae(wt,gn,Kn){const Hn=!0===Kn.wireframe;let Jn=s[wt.id];void 0===Jn&&(Jn={},s[wt.id]=Jn);let pr=Jn[gn.id];void 0===pr&&(pr={},Jn[gn.id]=pr);let Yn=pr[Hn];return void 0===Yn&&(Yn=fe(function L(){return v.createVertexArray()}()),pr[Hn]=Yn),Yn}(Hn,Kn,gn);u!==Yn&&(u=Yn,U(u.object)),pr=function ye(wt,gn,Kn,Hn){const Jn=u.attributes,pr=gn.attributes;let Yn=0;const Nr=Kn.getAttributes();for(const tr in Nr)if(Nr[tr].location>=0){const Qr=Jn[tr];let vi=pr[tr];if(void 0===vi&&("instanceMatrix"===tr&&wt.instanceMatrix&&(vi=wt.instanceMatrix),"instanceColor"===tr&&wt.instanceColor&&(vi=wt.instanceColor)),void 0===Qr||Qr.attribute!==vi||vi&&Qr.data!==vi.data)return!0;Yn++}return u.attributesNum!==Yn||u.index!==Hn}(wt,Hn,Kn,Jn),pr&&function Me(wt,gn,Kn,Hn){const Jn={},pr=gn.attributes;let Yn=0;const Nr=Kn.getAttributes();for(const tr in Nr)if(Nr[tr].location>=0){let Qr=pr[tr];void 0===Qr&&("instanceMatrix"===tr&&wt.instanceMatrix&&(Qr=wt.instanceMatrix),"instanceColor"===tr&&wt.instanceColor&&(Qr=wt.instanceColor));const vi={};vi.attribute=Qr,Qr&&Qr.data&&(vi.data=Qr.data),Jn[tr]=vi,Yn++}u.attributes=Jn,u.attributesNum=Yn,u.index=Hn}(wt,Hn,Kn,Jn),null!==Jn&&t.update(Jn,v.ELEMENT_ARRAY_BUFFER),(pr||_)&&(_=!1,function rt(wt,gn,Kn,Hn){Ue();const Jn=Hn.attributes,pr=Kn.getAttributes(),Yn=gn.defaultAttributeValues;for(const Nr in pr){const tr=pr[Nr];if(tr.location>=0){let Vr=Jn[Nr];if(void 0===Vr&&("instanceMatrix"===Nr&&wt.instanceMatrix&&(Vr=wt.instanceMatrix),"instanceColor"===Nr&&wt.instanceColor&&(Vr=wt.instanceColor)),void 0!==Vr){const Qr=Vr.normalized,vi=Vr.itemSize,Yi=t.get(Vr);if(void 0===Yi)continue;const cs=Yi.buffer,_r=Yi.type,$r=Yi.bytesPerElement,mi=_r===v.INT||_r===v.UNSIGNED_INT||Vr.gpuType===T;if(Vr.isInterleavedBufferAttribute){const Wr=Vr.data,Ci=Wr.stride,Es=Vr.offset;if(Wr.isInstancedInterleavedBuffer){for(let Si=0;Si<tr.locationSize;Si++)Ie(tr.location+Si,Wr.meshPerAttribute);!0!==wt.isInstancedMesh&&void 0===Hn._maxInstanceCount&&(Hn._maxInstanceCount=Wr.meshPerAttribute*Wr.count)}else for(let Si=0;Si<tr.locationSize;Si++)Pe(tr.location+Si);v.bindBuffer(v.ARRAY_BUFFER,cs);for(let Si=0;Si<tr.locationSize;Si++)it(tr.location+Si,vi/tr.locationSize,_r,Qr,Ci*$r,(Es+vi/tr.locationSize*Si)*$r,mi)}else{if(Vr.isInstancedBufferAttribute){for(let Wr=0;Wr<tr.locationSize;Wr++)Ie(tr.location+Wr,Vr.meshPerAttribute);!0!==wt.isInstancedMesh&&void 0===Hn._maxInstanceCount&&(Hn._maxInstanceCount=Vr.meshPerAttribute*Vr.count)}else for(let Wr=0;Wr<tr.locationSize;Wr++)Pe(tr.location+Wr);v.bindBuffer(v.ARRAY_BUFFER,cs);for(let Wr=0;Wr<tr.locationSize;Wr++)it(tr.location+Wr,vi/tr.locationSize,_r,Qr,vi*$r,vi/tr.locationSize*Wr*$r,mi)}}else if(void 0!==Yn){const Qr=Yn[Nr];if(void 0!==Qr)switch(Qr.length){case 2:v.vertexAttrib2fv(tr.location,Qr);break;case 3:v.vertexAttrib3fv(tr.location,Qr);break;case 4:v.vertexAttrib4fv(tr.location,Qr);break;default:v.vertexAttrib1fv(tr.location,Qr)}}}}tt()}(wt,gn,Kn,Hn),null!==Jn&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.get(Jn).buffer))},reset:Wt,resetDefaultState:Mt,dispose:function $t(){Wt();for(const wt in s){const gn=s[wt];for(const Kn in gn){const Hn=gn[Kn];for(const Jn in Hn)Q(Hn[Jn].object),delete Hn[Jn];delete gn[Kn]}delete s[wt]}},releaseStatesOfGeometry:function At(wt){if(void 0===s[wt.id])return;const gn=s[wt.id];for(const Kn in gn){const Hn=gn[Kn];for(const Jn in Hn)Q(Hn[Jn].object),delete Hn[Jn];delete gn[Kn]}delete s[wt.id]},releaseStatesOfProgram:function Ft(wt){for(const gn in s){const Kn=s[gn];if(void 0===Kn[wt.id])continue;const Hn=Kn[wt.id];for(const Jn in Hn)Q(Hn[Jn].object),delete Hn[Jn];delete Kn[wt.id]}},initAttributes:Ue,enableAttribute:Pe,disableUnusedAttributes:tt}}function Ax(v,t,r){let s;function _(U,Q,ae){0!==ae&&(v.drawArraysInstanced(s,U,Q,ae),r.update(Q,s,ae))}this.setMode=function a(U){s=U},this.render=function u(U,Q){v.drawArrays(s,U,Q),r.update(Q,s,1)},this.renderInstances=_,this.renderMultiDraw=function C(U,Q,ae){if(0===ae)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,U,0,Q,0,ae);let ye=0;for(let Me=0;Me<ae;Me++)ye+=Q[Me];r.update(ye,s,1)},this.renderMultiDrawInstances=function L(U,Q,ae,fe){if(0===ae)return;const ye=t.get("WEBGL_multi_draw");if(null===ye)for(let Me=0;Me<U.length;Me++)_(U[Me],Q[Me],fe[Me]);else{ye.multiDrawArraysInstancedWEBGL(s,U,0,Q,0,fe,0,ae);let Me=0;for(let Ue=0;Ue<ae;Ue++)Me+=Q[Ue]*fe[Ue];r.update(Me,s,1)}}}function O0(v,t,r,s){let a;function L(Ft){if("highp"===Ft){if(v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.HIGH_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.HIGH_FLOAT).precision>0)return"highp";Ft="mediump"}return"mediump"===Ft&&v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.MEDIUM_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let U=void 0!==r.precision?r.precision:"highp";const Q=L(U);Q!==U&&(console.warn("THREE.WebGLRenderer:",U,"not supported, using",Q,"instead."),U=Q);const ae=!0===r.logarithmicDepthBuffer,fe=!0===r.reverseDepthBuffer&&t.has("EXT_clip_control"),ye=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS),Me=v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==a)return a;if(!0===t.has("EXT_texture_filter_anisotropic")){const Ft=t.get("EXT_texture_filter_anisotropic");a=v.getParameter(Ft.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:L,textureFormatReadable:function _(Ft){return!(Ft!==Vt&&s.convert(Ft)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function C(Ft){const Wt=Ft===O&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(Ft!==Tr&&s.convert(Ft)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)&&Ft!==B&&!Wt)},precision:U,logarithmicDepthBuffer:ae,reverseDepthBuffer:fe,maxTextures:ye,maxVertexTextures:Me,maxTextureSize:v.getParameter(v.MAX_TEXTURE_SIZE),maxCubemapSize:v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:v.getParameter(v.MAX_VERTEX_ATTRIBS),maxVertexUniforms:v.getParameter(v.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:v.getParameter(v.MAX_VARYING_VECTORS),maxFragmentUniforms:v.getParameter(v.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:Me>0,maxSamples:v.getParameter(v.MAX_SAMPLES)}}function L0(v){const t=this;let r=null,s=0,a=!1,u=!1;const _=new Sc,C=new Gi,L={value:null,needsUpdate:!1};function Q(ae,fe,ye,Me){const Ue=null!==ae?ae.length:0;let Pe=null;if(0!==Ue){if(Pe=L.value,!0!==Me||null===Pe){const Ie=ye+4*Ue,tt=fe.matrixWorldInverse;C.getNormalMatrix(tt),(null===Pe||Pe.length<Ie)&&(Pe=new Float32Array(Ie));for(let it=0,rt=ye;it!==Ue;++it,rt+=4)_.copy(ae[it]).applyMatrix4(tt,C),_.normal.toArray(Pe,rt),Pe[rt+3]=_.constant}L.value=Pe,L.needsUpdate=!0}return t.numPlanes=Ue,t.numIntersection=0,Pe}this.uniform=L,this.numPlanes=0,this.numIntersection=0,this.init=function(ae,fe){const ye=0!==ae.length||fe||0!==s||a;return a=fe,s=ae.length,ye},this.beginShadows=function(){u=!0,Q(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(ae,fe){r=Q(ae,fe,0)},this.setState=function(ae,fe,ye){const Me=ae.clippingPlanes,Ue=ae.clipIntersection,Pe=ae.clipShadows,Ie=v.get(ae);if(!a||null===Me||0===Me.length||u&&!Pe)u?Q(null):function U(){L.value!==r&&(L.value=r,L.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}();else{const tt=u?0:s,it=4*tt;let rt=Ie.clippingState||null;L.value=rt,rt=Q(Me,fe,it,ye);for(let $t=0;$t!==it;++$t)rt[$t]=r[$t];Ie.clippingState=rt,this.numIntersection=Ue?this.numPlanes:0,this.numPlanes+=tt}}}function k0(v){let t=new WeakMap;function r(_,C){return 303===C?_.mapping=on:304===C&&(_.mapping=xn),_}function a(_){const C=_.target;C.removeEventListener("dispose",a);const L=t.get(C);void 0!==L&&(t.delete(C),L.dispose())}return{get:function s(_){if(_&&_.isTexture){const C=_.mapping;if(303===C||304===C){if(t.has(_))return r(t.get(_).texture,_.mapping);{const L=_.image;if(L&&L.height>0){const U=new sa(L.height);return U.fromEquirectangularTexture(v,_),t.set(_,U),_.addEventListener("dispose",a),r(U.texture,_.mapping)}return null}}}return _},dispose:function u(){t=new WeakMap}}}const Hg=[.125,.215,.35,.446,.526,.582],Zc=new bg,Wg=new Mr;let uf=null,fd=0,qp=0,df=!1;const Pc=(1+Math.sqrt(5))/2,Qd=1/Pc,Xg=[new mt(-Pc,Qd,0),new mt(Pc,Qd,0),new mt(-Qd,0,Pc),new mt(Qd,0,Pc),new mt(0,Pc,-Qd),new mt(0,Pc,Qd),new mt(-1,1,-1),new mt(1,1,-1),new mt(-1,1,1),new mt(1,1,1)],Dx=new mt;class N0{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,s=.1,a=100,u={}){const{size:_=256,position:C=Dx}=u;uf=this._renderer.getRenderTarget(),fd=this._renderer.getActiveCubeFace(),qp=this._renderer.getActiveMipmapLevel(),df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(_);const L=this._allocateTargets();return L.depthBuffer=!0,this._sceneToCubeUV(t,s,a,L,C),r>0&&this._blur(L,0,0,r),this._applyPMREM(L),this._cleanup(L),L}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Yg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Kg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(uf,fd,qp),this._renderer.xr.enabled=df,t.scissorTest=!1,hf(t,0,0,t.width,t.height)}_fromTexture(t,r){this._setSize(t.mapping===on||t.mapping===xn?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),uf=this._renderer.getRenderTarget(),fd=this._renderer.getActiveCubeFace(),qp=this._renderer.getActiveMipmapLevel(),df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=r||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,s={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:O,format:Vt,colorSpace:Vi,depthBuffer:!1},a=qg(t,r,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=qg(t,r,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Ix(v){const t=[],r=[],s=[];let a=v;const u=v-4+1+Hg.length;for(let _=0;_<u;_++){const C=Math.pow(2,a);r.push(C);let L=1/C;_>v-4?L=Hg[_-v+4-1]:0===_&&(L=0),s.push(L);const U=1/(C-2),Q=-U,ae=1+U,fe=[Q,Q,ae,Q,ae,ae,Q,Q,ae,ae,Q,ae],ye=6,Me=6,Ue=3,Pe=2,Ie=1,tt=new Float32Array(Ue*Me*ye),it=new Float32Array(Pe*Me*ye),rt=new Float32Array(Ie*Me*ye);for(let At=0;At<ye;At++){const Ft=At%3*2/3-1,Wt=At>2?0:-1;tt.set([Ft,Wt,0,Ft+2/3,Wt,0,Ft+2/3,Wt+1,0,Ft,Wt,0,Ft+2/3,Wt+1,0,Ft,Wt+1,0],Ue*Me*At),it.set(fe,Pe*Me*At),rt.set([At,At,At,At,At,At],Ie*Me*At)}const $t=new Zi;$t.setAttribute("position",new Ls(tt,Ue)),$t.setAttribute("uv",new Ls(it,Pe)),$t.setAttribute("faceIndex",new Ls(rt,Ie)),t.push($t),a>4&&a--}return{lodPlanes:t,sizeLods:r,sigmas:s}}(u)),this._blurMaterial=function Ji(v,t,r){const s=new Float32Array(20),a=new mt(0,1,0);return new Sl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,t,r)}return a}_compileMaterial(t){const r=new ls(this._lodPlanes[0],t);this._renderer.compile(r,Zc)}_sceneToCubeUV(t,r,s,a,u){const L=new co(90,1,r,s),U=[1,-1,1,1,1,1],Q=[1,1,1,-1,-1,-1],ae=this._renderer,fe=ae.autoClear,ye=ae.toneMapping;ae.getClearColor(Wg),ae.toneMapping=nr,ae.autoClear=!1;const Me=new io({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Ue=new ls(new _c,Me);let Pe=!1;const Ie=t.background;Ie?Ie.isColor&&(Me.color.copy(Ie),t.background=null,Pe=!0):(Me.color.copy(Wg),Pe=!0);for(let tt=0;tt<6;tt++){const it=tt%3;0===it?(L.up.set(0,U[tt],0),L.position.set(u.x,u.y,u.z),L.lookAt(u.x+Q[tt],u.y,u.z)):1===it?(L.up.set(0,0,U[tt]),L.position.set(u.x,u.y,u.z),L.lookAt(u.x,u.y+Q[tt],u.z)):(L.up.set(0,U[tt],0),L.position.set(u.x,u.y,u.z),L.lookAt(u.x,u.y,u.z+Q[tt]));const rt=this._cubeSize;hf(a,it*rt,tt>2?rt:0,rt,rt),ae.setRenderTarget(a),Pe&&ae.render(Ue,L),ae.render(t,L)}Ue.geometry.dispose(),Ue.material.dispose(),ae.toneMapping=ye,ae.autoClear=fe,t.background=Ie}_textureToCubeUV(t,r){const s=this._renderer,a=t.mapping===on||t.mapping===xn;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=Yg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Kg());const u=a?this._cubemapMaterial:this._equirectMaterial,_=new ls(this._lodPlanes[0],u);u.uniforms.envMap.value=t;const L=this._cubeSize;hf(r,0,0,3*L,2*L),s.setRenderTarget(r),s.render(_,Zc)}_applyPMREM(t){const r=this._renderer,s=r.autoClear;r.autoClear=!1;const a=this._lodPlanes.length;for(let u=1;u<a;u++){const _=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,_,Xg[(a-u-1)%Xg.length])}r.autoClear=s}_blur(t,r,s,a,u){const _=this._pingPongRenderTarget;this._halfBlur(t,_,r,s,a,"latitudinal",u),this._halfBlur(_,t,s,s,a,"longitudinal",u)}_halfBlur(t,r,s,a,u,_,C){const L=this._renderer,U=this._blurMaterial;"latitudinal"!==_&&"longitudinal"!==_&&console.error("blur direction must be either latitudinal or longitudinal!");const ae=new ls(this._lodPlanes[a],U),fe=U.uniforms,ye=this._sizeLods[s]-1,Me=isFinite(u)?Math.PI/(2*ye):2*Math.PI/39,Ue=u/Me,Pe=isFinite(u)?1+Math.floor(3*Ue):20;Pe>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${Pe} samples when the maximum is set to 20`);const Ie=[];let tt=0;for(let Ft=0;Ft<20;++Ft){const Wt=Ft/Ue,Mt=Math.exp(-Wt*Wt/2);Ie.push(Mt),0===Ft?tt+=Mt:Ft<Pe&&(tt+=2*Mt)}for(let Ft=0;Ft<Ie.length;Ft++)Ie[Ft]=Ie[Ft]/tt;fe.envMap.value=t.texture,fe.samples.value=Pe,fe.weights.value=Ie,fe.latitudinal.value="latitudinal"===_,C&&(fe.poleAxis.value=C);const{_lodMax:it}=this;fe.dTheta.value=Me,fe.mipInt.value=it-s;const rt=this._sizeLods[a];hf(r,3*rt*(a>it-4?a-it+4:0),4*(this._cubeSize-rt),3*rt,2*rt),L.setRenderTarget(r),L.render(ae,Zc)}}function qg(v,t,r){const s=new Se(v,t,r);return s.texture.mapping=yn,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function hf(v,t,r,s,a){v.viewport.set(t,r,s,a),v.scissor.set(t,r,s,a)}function Kg(){return new Sl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Yg(){return new Sl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function j0(v){let t=new WeakMap,r=null;function u(C){const L=C.target;L.removeEventListener("dispose",u);const U=t.get(L);void 0!==U&&(t.delete(L),U.dispose())}return{get:function s(C){if(C&&C.isTexture){const L=C.mapping,U=303===L||304===L,Q=L===on||L===xn;if(U||Q){let ae=t.get(C);if(C.isRenderTargetTexture&&C.pmremVersion!==(void 0!==ae?ae.texture.pmremVersion:0))return null===r&&(r=new N0(v)),ae=U?r.fromEquirectangular(C,ae):r.fromCubemap(C,ae),ae.texture.pmremVersion=C.pmremVersion,t.set(C,ae),ae.texture;if(void 0!==ae)return ae.texture;{const ye=C.image;return U&&ye&&ye.height>0||Q&&ye&&function a(C){let L=0;for(let Q=0;Q<6;Q++)void 0!==C[Q]&&L++;return 6===L}(ye)?(null===r&&(r=new N0(v)),ae=U?r.fromEquirectangular(C):r.fromCubemap(C),ae.texture.pmremVersion=C.pmremVersion,t.set(C,ae),C.addEventListener("dispose",u),ae.texture):null}}}return C},dispose:function _(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function F0(v){const t={};function r(s){if(void 0!==t[s])return t[s];let a;switch(s){case"WEBGL_depth_texture":a=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=v.getExtension(s)}return t[s]=a,a}return{has:function(s){return null!==r(s)},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(s){const a=r(s);return null===a&&Fl("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function Rx(v,t,r,s){const a={},u=new WeakMap;function _(ae){const fe=ae.target;null!==fe.index&&t.remove(fe.index);for(const Me in fe.attributes)t.remove(fe.attributes[Me]);fe.removeEventListener("dispose",_),delete a[fe.id];const ye=u.get(fe);ye&&(t.remove(ye),u.delete(fe)),s.releaseStatesOfGeometry(fe),!0===fe.isInstancedBufferGeometry&&delete fe._maxInstanceCount,r.memory.geometries--}function U(ae){const fe=[],ye=ae.index,Me=ae.attributes.position;let Ue=0;if(null!==ye){const tt=ye.array;Ue=ye.version;for(let it=0,rt=tt.length;it<rt;it+=3){const $t=tt[it+0],At=tt[it+1],Ft=tt[it+2];fe.push($t,At,At,Ft,Ft,$t)}}else{if(void 0===Me)return;Ue=Me.version;for(let it=0,rt=Me.array.length/3-1;it<rt;it+=3){const $t=it+0,At=it+1,Ft=it+2;fe.push($t,At,At,Ft,Ft,$t)}}const Pe=new(jf(fe)?Hf:vu)(fe,1);Pe.version=Ue;const Ie=u.get(ae);Ie&&t.remove(Ie),u.set(ae,Pe)}return{get:function C(ae,fe){return!0===a[fe.id]||(fe.addEventListener("dispose",_),a[fe.id]=!0,r.memory.geometries++),fe},update:function L(ae){const fe=ae.attributes;for(const ye in fe)t.update(fe[ye],v.ARRAY_BUFFER)},getWireframeAttribute:function Q(ae){const fe=u.get(ae);if(fe){const ye=ae.index;null!==ye&&fe.version<ye.version&&U(ae)}else U(ae);return u.get(ae)}}}function Kp(v,t,r){let s,u,_;function U(fe,ye,Me){0!==Me&&(v.drawElementsInstanced(s,ye,u,fe*_,Me),r.update(ye,s,Me))}this.setMode=function a(fe){s=fe},this.setIndex=function C(fe){u=fe.type,_=fe.bytesPerElement},this.render=function L(fe,ye){v.drawElements(s,ye,u,fe*_),r.update(ye,s,1)},this.renderInstances=U,this.renderMultiDraw=function Q(fe,ye,Me){if(0===Me)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,ye,0,u,fe,0,Me);let Pe=0;for(let Ie=0;Ie<Me;Ie++)Pe+=ye[Ie];r.update(Pe,s,1)},this.renderMultiDrawInstances=function ae(fe,ye,Me,Ue){if(0===Me)return;const Pe=t.get("WEBGL_multi_draw");if(null===Pe)for(let Ie=0;Ie<fe.length;Ie++)U(fe[Ie]/_,ye[Ie],Ue[Ie]);else{Pe.multiDrawElementsInstancedWEBGL(s,ye,0,u,fe,0,Ue,0,Me);let Ie=0;for(let tt=0;tt<Me;tt++)Ie+=ye[tt]*Ue[tt];r.update(Ie,s,1)}}}function pd(v){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function a(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function s(u,_,C){switch(r.calls++,_){case v.TRIANGLES:r.triangles+=C*(u/3);break;case v.LINES:r.lines+=C*(u/2);break;case v.LINE_STRIP:r.lines+=C*(u-1);break;case v.LINE_LOOP:r.lines+=C*u;break;case v.POINTS:r.points+=C*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_)}}}}function Zg(v,t,r){const s=new WeakMap,a=new Ds;return{update:function u(_,C,L){const U=_.morphTargetInfluences,Q=C.morphAttributes.position||C.morphAttributes.normal||C.morphAttributes.color,ae=void 0!==Q?Q.length:0;let fe=s.get(C);if(void 0===fe||fe.count!==ae){let Mt=function(){Ft.dispose(),s.delete(C),C.removeEventListener("dispose",Mt)};void 0!==fe&&fe.texture.dispose();const ye=void 0!==C.morphAttributes.position,Me=void 0!==C.morphAttributes.normal,Ue=void 0!==C.morphAttributes.color,Pe=C.morphAttributes.position||[],Ie=C.morphAttributes.normal||[],tt=C.morphAttributes.color||[];let it=0;!0===ye&&(it=1),!0===Me&&(it=2),!0===Ue&&(it=3);let rt=C.attributes.position.count*it,$t=1;rt>t.maxTextureSize&&($t=Math.ceil(rt/t.maxTextureSize),rt=t.maxTextureSize);const At=new Float32Array(rt*$t*4*ae),Ft=new Ze(At,rt,$t,ae);Ft.type=B,Ft.needsUpdate=!0;const Wt=4*it;for(let wt=0;wt<ae;wt++){const gn=Pe[wt],Kn=Ie[wt],Hn=tt[wt],Jn=rt*$t*4*wt;for(let pr=0;pr<gn.count;pr++){const Yn=pr*Wt;!0===ye&&(a.fromBufferAttribute(gn,pr),At[Jn+Yn+0]=a.x,At[Jn+Yn+1]=a.y,At[Jn+Yn+2]=a.z,At[Jn+Yn+3]=0),!0===Me&&(a.fromBufferAttribute(Kn,pr),At[Jn+Yn+4]=a.x,At[Jn+Yn+5]=a.y,At[Jn+Yn+6]=a.z,At[Jn+Yn+7]=0),!0===Ue&&(a.fromBufferAttribute(Hn,pr),At[Jn+Yn+8]=a.x,At[Jn+Yn+9]=a.y,At[Jn+Yn+10]=a.z,At[Jn+Yn+11]=4===Hn.itemSize?a.w:1)}}fe={count:ae,texture:Ft,size:new fr(rt,$t)},s.set(C,fe),C.addEventListener("dispose",Mt)}if(!0===_.isInstancedMesh&&null!==_.morphTexture)L.getUniforms().setValue(v,"morphTexture",_.morphTexture,r);else{let ye=0;for(let Ue=0;Ue<U.length;Ue++)ye+=U[Ue];const Me=C.morphTargetsRelative?1:1-ye;L.getUniforms().setValue(v,"morphTargetBaseInfluence",Me),L.getUniforms().setValue(v,"morphTargetInfluences",U)}L.getUniforms().setValue(v,"morphTargetsTexture",fe.texture,r),L.getUniforms().setValue(v,"morphTargetsTextureSize",fe.size)}}}function ff(v,t,r,s){let a=new WeakMap;function C(L){const U=L.target;U.removeEventListener("dispose",C),r.remove(U.instanceMatrix),null!==U.instanceColor&&r.remove(U.instanceColor)}return{update:function u(L){const U=s.render.frame,ae=t.get(L,L.geometry);if(a.get(ae)!==U&&(t.update(ae),a.set(ae,U)),L.isInstancedMesh&&(!1===L.hasEventListener("dispose",C)&&L.addEventListener("dispose",C),a.get(L)!==U&&(r.update(L.instanceMatrix,v.ARRAY_BUFFER),null!==L.instanceColor&&r.update(L.instanceColor,v.ARRAY_BUFFER),a.set(L,U))),L.isSkinnedMesh){const fe=L.skeleton;a.get(fe)!==U&&(fe.update(),a.set(fe,U))}return ae},dispose:function _(){a=new WeakMap}}}const Jg=new no,Yp=new eg(1,1),Zp=new Ze,Jp=new qe,Qg=new so,Qp=[],U0=[],B0=new Float32Array(16),V0=new Float32Array(9),ey=new Float32Array(4);function eh(v,t,r){const s=v[0];if(s<=0||s>0)return v;const a=t*r;let u=Qp[a];if(void 0===u&&(u=new Float32Array(a),Qp[a]=u),0!==t){s.toArray(u,0);for(let _=1,C=0;_!==t;++_)C+=r,v[_].toArray(u,C)}return u}function ya(v,t){if(v.length!==t.length)return!1;for(let r=0,s=v.length;r<s;r++)if(v[r]!==t[r])return!1;return!0}function va(v,t){for(let r=0,s=t.length;r<s;r++)v[r]=t[r]}function em(v,t){let r=U0[t];void 0===r&&(r=new Int32Array(t),U0[t]=r);for(let s=0;s!==t;++s)r[s]=v.allocateTextureUnit();return r}function G0(v,t){const r=this.cache;r[0]!==t&&(v.uniform1f(this.addr,t),r[0]=t)}function z0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;v.uniform2fv(this.addr,t),va(r,t)}}function Px(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(v.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(ya(r,t))return;v.uniform3fv(this.addr,t),va(r,t)}}function Ox(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;v.uniform4fv(this.addr,t),va(r,t)}}function ml(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;v.uniformMatrix2fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;ey.set(s),v.uniformMatrix2fv(this.addr,!1,ey),va(r,s)}}function Lx(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;v.uniformMatrix3fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;V0.set(s),v.uniformMatrix3fv(this.addr,!1,V0),va(r,s)}}function kx(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(ya(r,t))return;v.uniformMatrix4fv(this.addr,!1,t),va(r,t)}else{if(ya(r,s))return;B0.set(s),v.uniformMatrix4fv(this.addr,!1,B0),va(r,s)}}function XE(v,t){const r=this.cache;r[0]!==t&&(v.uniform1i(this.addr,t),r[0]=t)}function ty(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;v.uniform2iv(this.addr,t),va(r,t)}}function $0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ya(r,t))return;v.uniform3iv(this.addr,t),va(r,t)}}function Nx(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;v.uniform4iv(this.addr,t),va(r,t)}}function jx(v,t){const r=this.cache;r[0]!==t&&(v.uniform1ui(this.addr,t),r[0]=t)}function Fx(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ya(r,t))return;v.uniform2uiv(this.addr,t),va(r,t)}}function H0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ya(r,t))return;v.uniform3uiv(this.addr,t),va(r,t)}}function Ux(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ya(r,t))return;v.uniform4uiv(this.addr,t),va(r,t)}}function Bx(v,t,r){const s=this.cache,a=r.allocateTextureUnit();let u;s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),this.type===v.SAMPLER_2D_SHADOW?(Yp.compareFunction=515,u=Yp):u=Jg,r.setTexture2D(t||u,a)}function ny(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTexture3D(t||Jp,a)}function Vx(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTextureCube(t||Qg,a)}function Gx(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTexture2DArray(t||Zp,a)}function $x(v,t){v.uniform1fv(this.addr,t)}function Hx(v,t){const r=eh(t,this.size,2);v.uniform2fv(this.addr,r)}function Oc(v,t){const r=eh(t,this.size,3);v.uniform3fv(this.addr,r)}function ry(v,t){const r=eh(t,this.size,4);v.uniform4fv(this.addr,r)}function Wx(v,t){const r=eh(t,this.size,4);v.uniformMatrix2fv(this.addr,!1,r)}function Xx(v,t){const r=eh(t,this.size,9);v.uniformMatrix3fv(this.addr,!1,r)}function W0(v,t){const r=eh(t,this.size,16);v.uniformMatrix4fv(this.addr,!1,r)}function X0(v,t){v.uniform1iv(this.addr,t)}function tm(v,t){v.uniform2iv(this.addr,t)}function iy(v,t){v.uniform3iv(this.addr,t)}function qE(v,t){v.uniform4iv(this.addr,t)}function q0(v,t){v.uniform1uiv(this.addr,t)}function K0(v,t){v.uniform2uiv(this.addr,t)}function Y0(v,t){v.uniform3uiv(this.addr,t)}function nm(v,t){v.uniform4uiv(this.addr,t)}function sy(v,t,r){const s=this.cache,a=t.length,u=em(r,a);ya(s,u)||(v.uniform1iv(this.addr,u),va(s,u));for(let _=0;_!==a;++_)r.setTexture2D(t[_]||Jg,u[_])}function Jc(v,t,r){const s=this.cache,a=t.length,u=em(r,a);ya(s,u)||(v.uniform1iv(this.addr,u),va(s,u));for(let _=0;_!==a;++_)r.setTexture3D(t[_]||Jp,u[_])}function qx(v,t,r){const s=this.cache,a=t.length,u=em(r,a);ya(s,u)||(v.uniform1iv(this.addr,u),va(s,u));for(let _=0;_!==a;++_)r.setTextureCube(t[_]||Qg,u[_])}function Kx(v,t,r){const s=this.cache,a=t.length,u=em(r,a);ya(s,u)||(v.uniform1iv(this.addr,u),va(s,u));for(let _=0;_!==a;++_)r.setTexture2DArray(t[_]||Zp,u[_])}class Yx{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.setValue=function zx(v){switch(v){case 5126:return G0;case 35664:return z0;case 35665:return Px;case 35666:return Ox;case 35674:return ml;case 35675:return Lx;case 35676:return kx;case 5124:case 35670:return XE;case 35667:case 35671:return ty;case 35668:case 35672:return $0;case 35669:case 35673:return Nx;case 5125:return jx;case 36294:return Fx;case 36295:return H0;case 36296:return Ux;case 35678:case 36198:case 36298:case 36306:case 35682:return Bx;case 35679:case 36299:case 36307:return ny;case 35680:case 36300:case 36308:case 36293:return Vx;case 36289:case 36303:case 36311:case 36292:return Gx}}(r.type)}}class th{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=function oy(v){switch(v){case 5126:return $x;case 35664:return Hx;case 35665:return Oc;case 35666:return ry;case 35674:return Wx;case 35675:return Xx;case 35676:return W0;case 5124:case 35670:return X0;case 35667:case 35671:return tm;case 35668:case 35672:return iy;case 35669:case 35673:return qE;case 5125:return q0;case 36294:return K0;case 36295:return Y0;case 36296:return nm;case 35678:case 36198:case 36298:case 36306:case 35682:return sy;case 35679:case 36299:case 36307:return Jc;case 35680:case 36300:case 36308:case 36293:return qx;case 36289:case 36303:case 36311:case 36292:return Kx}}(r.type)}}class Z0{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,s){const a=this.seq;for(let u=0,_=a.length;u!==_;++u){const C=a[u];C.setValue(t,r[C.id],s)}}}const Qc=/(\w+)(\])?(\[|\.)?/g;function md(v,t){v.seq.push(t),v.map[t.id]=t}function ay(v,t,r){const s=v.name,a=s.length;for(Qc.lastIndex=0;;){const u=Qc.exec(s);let C=u[1];const U=u[3];if("]"===u[2]&&(C|=0),void 0===U||"["===U&&Qc.lastIndex+2===a){md(r,void 0===U?new Yx(C,v,t):new th(C,v,t));break}{let ae=r.map[C];void 0===ae&&(ae=new Z0(C),md(r,ae)),r=ae}}}class Lu{constructor(t,r){this.seq=[],this.map={};const s=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let a=0;a<s;++a){const u=t.getActiveUniform(r,a);ay(u,t.getUniformLocation(r,u.name),this)}}setValue(t,r,s,a){const u=this.map[r];void 0!==u&&u.setValue(t,s,a)}setOptional(t,r,s){const a=r[s];void 0!==a&&this.setValue(t,s,a)}static upload(t,r,s,a){for(let u=0,_=r.length;u!==_;++u){const C=r[u],L=s[C.id];!1!==L.needsUpdate&&C.setValue(t,L.value,a)}}static seqWithValue(t,r){const s=[];for(let a=0,u=t.length;a!==u;++a){const _=t[a];_.id in r&&s.push(_)}return s}}function ly(v,t,r){const s=v.createShader(t);return v.shaderSource(s,r),v.compileShader(s),s}const J0=37297;let Zx=0;const Q0=new Gi;function e_(v,t,r){const s=v.getShaderParameter(t,v.COMPILE_STATUS),a=v.getShaderInfoLog(t).trim();if(s&&""===a)return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const _=parseInt(u[1]);return r.toUpperCase()+"\n\n"+a+"\n\n"+function Jx(v,t){const r=v.split("\n"),s=[],a=Math.max(t-6,0),u=Math.min(t+6,r.length);for(let _=a;_<u;_++){const C=_+1;s.push(`${C===t?">":" "} ${C}: ${r[_]}`)}return s.join("\n")}(v.getShaderSource(t),_)}return a}function ew(v,t){const r=function Qx(v){Ss._getMatrix(Q0,Ss.workingColorSpace,v);const t=`mat3( ${Q0.elements.map(r=>r.toFixed(4))} )`;switch(Ss.getTransfer(v)){case ds:return[t,"LinearTransferOETF"];case Li:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",v),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${v}( vec4 value ) {`,`\treturn ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join("\n")}function t_(v,t){let r;switch(t){case mn:r="Linear";break;case qn:r="Reinhard";break;case Tn:r="Cineon";break;case ct:r="ACESFilmic";break;case Qe:r="AgX";break;case xt:r="Neutral";break;case pt:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+v+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const rm=new mt;function nh(v){return""!==v}function r_(v,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function i_(v,t){return v.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const s_=/^[ \t]*#include +<([\w\d./]+)>/gm;function pf(v){return v.replace(s_,mf)}const o_=new Map;function mf(v,t){let r=ss[t];if(void 0===r){const s=o_.get(t);if(void 0===s)throw new Error("Can not resolve #include <"+t+">");r=ss[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s)}return pf(r)}const gf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rh(v){return v.replace(gf,rw)}function rw(v,t,r,s){let a="";for(let u=parseInt(t);u<parseInt(r);u++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return a}function a_(v){let t=`precision ${v.precision} float;\n\tprecision ${v.precision} int;\n\tprecision ${v.precision} sampler2D;\n\tprecision ${v.precision} samplerCube;\n\tprecision ${v.precision} sampler3D;\n\tprecision ${v.precision} sampler2DArray;\n\tprecision ${v.precision} sampler2DShadow;\n\tprecision ${v.precision} samplerCubeShadow;\n\tprecision ${v.precision} sampler2DArrayShadow;\n\tprecision ${v.precision} isampler2D;\n\tprecision ${v.precision} isampler3D;\n\tprecision ${v.precision} isamplerCube;\n\tprecision ${v.precision} isampler2DArray;\n\tprecision ${v.precision} usampler2D;\n\tprecision ${v.precision} usampler3D;\n\tprecision ${v.precision} usamplerCube;\n\tprecision ${v.precision} usampler2DArray;\n\t`;return"highp"===v.precision?t+="\n#define HIGH_PRECISION":"mediump"===v.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(t+="\n#define LOW_PRECISION"),t}function YE(v,t,r,s){const a=v.getContext(),u=r.defines;let _=r.vertexShader,C=r.fragmentShader;const L=function iw(v){let t="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===S?t="SHADOWMAP_TYPE_PCF":v.shadowMapType===k?t="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===X&&(t="SHADOWMAP_TYPE_VSM"),t}(r),U=function sm(v){let t="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case on:case xn:t="ENVMAP_TYPE_CUBE";break;case yn:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),Q=function cy(v){let t="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===xn&&(t="ENVMAP_MODE_REFRACTION"),t}(r),ae=function sw(v){let t="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Mn:t="ENVMAP_BLENDING_MULTIPLY";break;case gr:t="ENVMAP_BLENDING_MIX";break;case Ln:t="ENVMAP_BLENDING_ADD"}return t}(r),fe=function KE(v){const t=v.envMapCubeUVHeight;if(null===t)return null;const r=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:s,maxMip:r}}(r),ye=function tw(v){return[v.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",v.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nh).join("\n")}(r),Me=function n_(v){const t=[];for(const r in v){const s=v[r];!1!==s&&t.push("#define "+r+" "+s)}return t.join("\n")}(u),Ue=a.createProgram();let Pe,Ie,tt=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(Pe=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me].filter(nh).join("\n"),Pe.length>0&&(Pe+="\n"),Ie=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me].filter(nh).join("\n"),Ie.length>0&&(Ie+="\n")):(Pe=[a_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+Q:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+L:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(nh).join("\n"),Ie=[a_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Me,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+U:"",r.envMap?"#define "+Q:"",r.envMap?"#define "+ae:"",fe?"#define CUBEUV_TEXEL_WIDTH "+fe.texelWidth:"",fe?"#define CUBEUV_TEXEL_HEIGHT "+fe.texelHeight:"",fe?"#define CUBEUV_MAX_MIP "+fe.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+L:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==nr?"#define TONE_MAPPING":"",r.toneMapping!==nr?ss.tonemapping_pars_fragment:"",r.toneMapping!==nr?t_("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",ss.colorspace_pars_fragment,ew("linearToOutputTexel",r.outputColorSpace),(Ss.getLuminanceCoefficients(rm),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${rm.x.toFixed(4)}, ${rm.y.toFixed(4)}, ${rm.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(nh).join("\n")),_=pf(_),_=r_(_,r),_=i_(_,r),C=pf(C),C=r_(C,r),C=i_(C,r),_=rh(_),C=rh(C),!0!==r.isRawShaderMaterial&&(tt="#version 300 es\n",Pe=[ye,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Pe,Ie=["#define varying in",r.glslVersion===Je?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Je?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Ie);const rt=tt+Ie+C,$t=ly(a,a.VERTEX_SHADER,tt+Pe+_),At=ly(a,a.FRAGMENT_SHADER,rt);function Ft(gn){if(v.debug.checkShaderErrors){const Kn=a.getProgramInfoLog(Ue).trim(),Hn=a.getShaderInfoLog($t).trim(),Jn=a.getShaderInfoLog(At).trim();let pr=!0,Yn=!0;if(!1===a.getProgramParameter(Ue,a.LINK_STATUS))if(pr=!1,"function"==typeof v.debug.onShaderError)v.debug.onShaderError(a,Ue,$t,At);else{const Nr=e_(a,$t,"vertex"),tr=e_(a,At,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(Ue,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+gn.name+"\nMaterial Type: "+gn.type+"\n\nProgram Info Log: "+Kn+"\n"+Nr+"\n"+tr)}else""!==Kn?console.warn("THREE.WebGLProgram: Program Info Log:",Kn):(""===Hn||""===Jn)&&(Yn=!1);Yn&&(gn.diagnostics={runnable:pr,programLog:Kn,vertexShader:{log:Hn,prefix:Pe},fragmentShader:{log:Jn,prefix:Ie}})}a.deleteShader($t),a.deleteShader(At),Wt=new Lu(a,Ue),Mt=function nw(v,t){const r={},s=v.getProgramParameter(t,v.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const u=v.getActiveAttrib(t,a),_=u.name;let C=1;u.type===v.FLOAT_MAT2&&(C=2),u.type===v.FLOAT_MAT3&&(C=3),u.type===v.FLOAT_MAT4&&(C=4),r[_]={type:u.type,location:v.getAttribLocation(t,_),locationSize:C}}return r}(a,Ue)}let Wt,Mt;a.attachShader(Ue,$t),a.attachShader(Ue,At),void 0!==r.index0AttributeName?a.bindAttribLocation(Ue,0,r.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(Ue,0,"position"),a.linkProgram(Ue),this.getUniforms=function(){return void 0===Wt&&Ft(this),Wt},this.getAttributes=function(){return void 0===Mt&&Ft(this),Mt};let wt=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===wt&&(wt=a.getProgramParameter(Ue,J0)),wt},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(Ue),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Zx++,this.cacheKey=t,this.usedTimes=1,this.program=Ue,this.vertexShader=$t,this.fragmentShader=At,this}let ow=0;class aw{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const s=t.fragmentShader,a=this._getShaderStage(t.vertexShader),u=this._getShaderStage(s),_=this._getShaderCacheForMaterial(t);return!1===_.has(a)&&(_.add(a),a.usedTimes++),!1===_.has(u)&&(_.add(u),u.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const s of r)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let s=r.get(t);return void 0===s&&(s=new Set,r.set(t,s)),s}_getShaderStage(t){const r=this.shaderCache;let s=r.get(t);return void 0===s&&(s=new ZE(t),r.set(t,s)),s}}class ZE{constructor(t){this.id=ow++,this.code=t,this.usedTimes=0}}function lw(v,t,r,s,a,u,_){const C=new mu,L=new aw,U=new Set,Q=[],ae=a.logarithmicDepthBuffer,fe=a.vertexTextures;let ye=a.precision;const Me={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Ue(Mt){return U.add(Mt),0===Mt?"uv":`uv${Mt}`}return{getParameters:function Pe(Mt,wt,gn,Kn,Hn){const Jn=Kn.fog,pr=Hn.geometry,Nr=(Mt.isMeshStandardMaterial?r:t).get(Mt.envMap||(Mt.isMeshStandardMaterial?Kn.environment:null)),tr=Nr&&Nr.mapping===yn?Nr.image.height:null,Vr=Me[Mt.type];null!==Mt.precision&&(ye=a.getMaxPrecision(Mt.precision),ye!==Mt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Mt.precision,"not supported, using",ye,"instead."));const Qr=pr.morphAttributes.position||pr.morphAttributes.normal||pr.morphAttributes.color,vi=void 0!==Qr?Qr.length:0;let cs,_r,$r,mi,Yi=0;if(void 0!==pr.morphAttributes.position&&(Yi=1),void 0!==pr.morphAttributes.normal&&(Yi=2),void 0!==pr.morphAttributes.color&&(Yi=3),Vr){const qs=$a[Vr];cs=qs.vertexShader,_r=qs.fragmentShader}else cs=Mt.vertexShader,_r=Mt.fragmentShader,L.update(Mt),$r=L.getVertexShaderID(Mt),mi=L.getFragmentShaderID(Mt);const Wr=v.getRenderTarget(),Ci=v.state.buffers.depth.getReversed(),Es=!0===Hn.isInstancedMesh,Si=!0===Hn.isBatchedMesh,Xi=!!Mt.map,xr=!!Nr,rn=!!Mt.aoMap,pi=!!Mt.lightMap,Dr=!!Mt.bumpMap,ei=!!Mt.normalMap,Fr=!!Mt.displacementMap,Ri=!!Mt.emissiveMap,Kr=!!Mt.metalnessMap,tn=!!Mt.roughnessMap,jt=Mt.anisotropy>0,er=Mt.clearcoat>0,Ur=Mt.iridescence>0,Ar=Mt.sheen>0,Oi=Mt.transmission>0,ui=jt&&!!Mt.anisotropyMap,gi=er&&!!Mt.clearcoatMap,ps=er&&!!Mt.clearcoatNormalMap,Xr=er&&!!Mt.clearcoatRoughnessMap,Di=Ur&&!!Mt.iridescenceMap,Ki=Ur&&!!Mt.iridescenceThicknessMap,Qi=Ar&&!!Mt.sheenColorMap,Ii=Ar&&!!Mt.sheenRoughnessMap,Fs=!!Mt.specularMap,ms=!!Mt.specularColorMap,So=!!Mt.specularIntensityMap,Vn=Oi&&!!Mt.transmissionMap,di=Oi&&!!Mt.thicknessMap,Lr=!!Mt.alphaMap,gs=!!Mt.extensions;let qo=nr;Mt.toneMapped&&(null===Wr||!0===Wr.isXRRenderTarget)&&(qo=v.toneMapping);const Pa={shaderID:Vr,shaderType:Mt.type,shaderName:Mt.name,vertexShader:cs,fragmentShader:_r,defines:Mt.defines,customVertexShaderID:$r,customFragmentShaderID:mi,isRawShaderMaterial:!0===Mt.isRawShaderMaterial,glslVersion:Mt.glslVersion,precision:ye,batching:Si,batchingColor:Si&&null!==Hn._colorsTexture,instancing:Es,instancingColor:Es&&null!==Hn.instanceColor,instancingMorph:Es&&null!==Hn.morphTexture,supportsVertexTextures:fe,outputColorSpace:null===Wr?v.outputColorSpace:!0===Wr.isXRRenderTarget?Wr.texture.colorSpace:Vi,alphaToCoverage:!!Mt.alphaToCoverage,map:Xi,matcap:!!Mt.matcap,envMap:xr,envMapMode:xr&&Nr.mapping,envMapCubeUVHeight:tr,aoMap:rn,lightMap:pi,bumpMap:Dr,normalMap:ei,displacementMap:fe&&Fr,emissiveMap:Ri,normalMapObjectSpace:ei&&1===Mt.normalMapType,normalMapTangentSpace:ei&&0===Mt.normalMapType,metalnessMap:Kr,roughnessMap:tn,anisotropy:jt,anisotropyMap:ui,clearcoat:er,clearcoatMap:gi,clearcoatNormalMap:ps,clearcoatRoughnessMap:Xr,dispersion:Mt.dispersion>0,iridescence:Ur,iridescenceMap:Di,iridescenceThicknessMap:Ki,sheen:Ar,sheenColorMap:Qi,sheenRoughnessMap:Ii,specularMap:Fs,specularColorMap:ms,specularIntensityMap:So,transmission:Oi,transmissionMap:Vn,thicknessMap:di,gradientMap:!!Mt.gradientMap,opaque:!1===Mt.transparent&&1===Mt.blending&&!1===Mt.alphaToCoverage,alphaMap:Lr,alphaTest:Mt.alphaTest>0,alphaHash:!!Mt.alphaHash,combine:Mt.combine,mapUv:Xi&&Ue(Mt.map.channel),aoMapUv:rn&&Ue(Mt.aoMap.channel),lightMapUv:pi&&Ue(Mt.lightMap.channel),bumpMapUv:Dr&&Ue(Mt.bumpMap.channel),normalMapUv:ei&&Ue(Mt.normalMap.channel),displacementMapUv:Fr&&Ue(Mt.displacementMap.channel),emissiveMapUv:Ri&&Ue(Mt.emissiveMap.channel),metalnessMapUv:Kr&&Ue(Mt.metalnessMap.channel),roughnessMapUv:tn&&Ue(Mt.roughnessMap.channel),anisotropyMapUv:ui&&Ue(Mt.anisotropyMap.channel),clearcoatMapUv:gi&&Ue(Mt.clearcoatMap.channel),clearcoatNormalMapUv:ps&&Ue(Mt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Xr&&Ue(Mt.clearcoatRoughnessMap.channel),iridescenceMapUv:Di&&Ue(Mt.iridescenceMap.channel),iridescenceThicknessMapUv:Ki&&Ue(Mt.iridescenceThicknessMap.channel),sheenColorMapUv:Qi&&Ue(Mt.sheenColorMap.channel),sheenRoughnessMapUv:Ii&&Ue(Mt.sheenRoughnessMap.channel),specularMapUv:Fs&&Ue(Mt.specularMap.channel),specularColorMapUv:ms&&Ue(Mt.specularColorMap.channel),specularIntensityMapUv:So&&Ue(Mt.specularIntensityMap.channel),transmissionMapUv:Vn&&Ue(Mt.transmissionMap.channel),thicknessMapUv:di&&Ue(Mt.thicknessMap.channel),alphaMapUv:Lr&&Ue(Mt.alphaMap.channel),vertexTangents:!!pr.attributes.tangent&&(ei||jt),vertexColors:Mt.vertexColors,vertexAlphas:!0===Mt.vertexColors&&!!pr.attributes.color&&4===pr.attributes.color.itemSize,pointsUvs:!0===Hn.isPoints&&!!pr.attributes.uv&&(Xi||Lr),fog:!!Jn,useFog:!0===Mt.fog,fogExp2:!!Jn&&Jn.isFogExp2,flatShading:!0===Mt.flatShading,sizeAttenuation:!0===Mt.sizeAttenuation,logarithmicDepthBuffer:ae,reverseDepthBuffer:Ci,skinning:!0===Hn.isSkinnedMesh,morphTargets:void 0!==pr.morphAttributes.position,morphNormals:void 0!==pr.morphAttributes.normal,morphColors:void 0!==pr.morphAttributes.color,morphTargetsCount:vi,morphTextureStride:Yi,numDirLights:wt.directional.length,numPointLights:wt.point.length,numSpotLights:wt.spot.length,numSpotLightMaps:wt.spotLightMap.length,numRectAreaLights:wt.rectArea.length,numHemiLights:wt.hemi.length,numDirLightShadows:wt.directionalShadowMap.length,numPointLightShadows:wt.pointShadowMap.length,numSpotLightShadows:wt.spotShadowMap.length,numSpotLightShadowsWithMaps:wt.numSpotLightShadowsWithMaps,numLightProbes:wt.numLightProbes,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:Mt.dithering,shadowMapEnabled:v.shadowMap.enabled&&gn.length>0,shadowMapType:v.shadowMap.type,toneMapping:qo,decodeVideoTexture:Xi&&!0===Mt.map.isVideoTexture&&Ss.getTransfer(Mt.map.colorSpace)===Li,decodeVideoTextureEmissive:Ri&&!0===Mt.emissiveMap.isVideoTexture&&Ss.getTransfer(Mt.emissiveMap.colorSpace)===Li,premultipliedAlpha:Mt.premultipliedAlpha,doubleSided:2===Mt.side,flipSided:1===Mt.side,useDepthPacking:Mt.depthPacking>=0,depthPacking:Mt.depthPacking||0,index0AttributeName:Mt.index0AttributeName,extensionClipCullDistance:gs&&!0===Mt.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gs&&!0===Mt.extensions.multiDraw||Si)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:Mt.customProgramCacheKey()};return Pa.vertexUv1s=U.has(1),Pa.vertexUv2s=U.has(2),Pa.vertexUv3s=U.has(3),U.clear(),Pa},getProgramCacheKey:function Ie(Mt){const wt=[];if(Mt.shaderID?wt.push(Mt.shaderID):(wt.push(Mt.customVertexShaderID),wt.push(Mt.customFragmentShaderID)),void 0!==Mt.defines)for(const gn in Mt.defines)wt.push(gn),wt.push(Mt.defines[gn]);return!1===Mt.isRawShaderMaterial&&(function tt(Mt,wt){Mt.push(wt.precision),Mt.push(wt.outputColorSpace),Mt.push(wt.envMapMode),Mt.push(wt.envMapCubeUVHeight),Mt.push(wt.mapUv),Mt.push(wt.alphaMapUv),Mt.push(wt.lightMapUv),Mt.push(wt.aoMapUv),Mt.push(wt.bumpMapUv),Mt.push(wt.normalMapUv),Mt.push(wt.displacementMapUv),Mt.push(wt.emissiveMapUv),Mt.push(wt.metalnessMapUv),Mt.push(wt.roughnessMapUv),Mt.push(wt.anisotropyMapUv),Mt.push(wt.clearcoatMapUv),Mt.push(wt.clearcoatNormalMapUv),Mt.push(wt.clearcoatRoughnessMapUv),Mt.push(wt.iridescenceMapUv),Mt.push(wt.iridescenceThicknessMapUv),Mt.push(wt.sheenColorMapUv),Mt.push(wt.sheenRoughnessMapUv),Mt.push(wt.specularMapUv),Mt.push(wt.specularColorMapUv),Mt.push(wt.specularIntensityMapUv),Mt.push(wt.transmissionMapUv),Mt.push(wt.thicknessMapUv),Mt.push(wt.combine),Mt.push(wt.fogExp2),Mt.push(wt.sizeAttenuation),Mt.push(wt.morphTargetsCount),Mt.push(wt.morphAttributeCount),Mt.push(wt.numDirLights),Mt.push(wt.numPointLights),Mt.push(wt.numSpotLights),Mt.push(wt.numSpotLightMaps),Mt.push(wt.numHemiLights),Mt.push(wt.numRectAreaLights),Mt.push(wt.numDirLightShadows),Mt.push(wt.numPointLightShadows),Mt.push(wt.numSpotLightShadows),Mt.push(wt.numSpotLightShadowsWithMaps),Mt.push(wt.numLightProbes),Mt.push(wt.shadowMapType),Mt.push(wt.toneMapping),Mt.push(wt.numClippingPlanes),Mt.push(wt.numClipIntersection),Mt.push(wt.depthPacking)}(wt,Mt),function it(Mt,wt){C.disableAll(),wt.supportsVertexTextures&&C.enable(0),wt.instancing&&C.enable(1),wt.instancingColor&&C.enable(2),wt.instancingMorph&&C.enable(3),wt.matcap&&C.enable(4),wt.envMap&&C.enable(5),wt.normalMapObjectSpace&&C.enable(6),wt.normalMapTangentSpace&&C.enable(7),wt.clearcoat&&C.enable(8),wt.iridescence&&C.enable(9),wt.alphaTest&&C.enable(10),wt.vertexColors&&C.enable(11),wt.vertexAlphas&&C.enable(12),wt.vertexUv1s&&C.enable(13),wt.vertexUv2s&&C.enable(14),wt.vertexUv3s&&C.enable(15),wt.vertexTangents&&C.enable(16),wt.anisotropy&&C.enable(17),wt.alphaHash&&C.enable(18),wt.batching&&C.enable(19),wt.dispersion&&C.enable(20),wt.batchingColor&&C.enable(21),Mt.push(C.mask),C.disableAll(),wt.fog&&C.enable(0),wt.useFog&&C.enable(1),wt.flatShading&&C.enable(2),wt.logarithmicDepthBuffer&&C.enable(3),wt.reverseDepthBuffer&&C.enable(4),wt.skinning&&C.enable(5),wt.morphTargets&&C.enable(6),wt.morphNormals&&C.enable(7),wt.morphColors&&C.enable(8),wt.premultipliedAlpha&&C.enable(9),wt.shadowMapEnabled&&C.enable(10),wt.doubleSided&&C.enable(11),wt.flipSided&&C.enable(12),wt.useDepthPacking&&C.enable(13),wt.dithering&&C.enable(14),wt.transmission&&C.enable(15),wt.sheen&&C.enable(16),wt.opaque&&C.enable(17),wt.pointsUvs&&C.enable(18),wt.decodeVideoTexture&&C.enable(19),wt.decodeVideoTextureEmissive&&C.enable(20),wt.alphaToCoverage&&C.enable(21),Mt.push(C.mask)}(wt,Mt),wt.push(v.outputColorSpace)),wt.push(Mt.customProgramCacheKey),wt.join()},getUniforms:function rt(Mt){const wt=Me[Mt.type];let gn;return gn=wt?Lb.clone($a[wt].uniforms):Mt.uniforms,gn},acquireProgram:function $t(Mt,wt){let gn;for(let Kn=0,Hn=Q.length;Kn<Hn;Kn++){const Jn=Q[Kn];if(Jn.cacheKey===wt){gn=Jn,++gn.usedTimes;break}}return void 0===gn&&(gn=new YE(v,wt,Mt,u),Q.push(gn)),gn},releaseProgram:function At(Mt){if(0==--Mt.usedTimes){const wt=Q.indexOf(Mt);Q[wt]=Q[Q.length-1],Q.pop(),Mt.destroy()}},releaseShaderCache:function Ft(Mt){L.remove(Mt)},programs:Q,dispose:function Wt(){L.dispose()}}}function JE(){let v=new WeakMap;return{has:function t(_){return v.has(_)},get:function r(_){let C=v.get(_);return void 0===C&&(C={},v.set(_,C)),C},remove:function s(_){v.delete(_)},update:function a(_,C,L){v.get(_)[C]=L},dispose:function u(){v=new WeakMap}}}function cw(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.material.id!==t.material.id?v.material.id-t.material.id:v.z!==t.z?v.z-t.z:v.id-t.id}function l_(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.z!==t.z?t.z-v.z:v.id-t.id}function c_(){const v=[];let t=0;const r=[],s=[],a=[];function _(ae,fe,ye,Me,Ue,Pe){let Ie=v[t];return void 0===Ie?(Ie={id:ae.id,object:ae,geometry:fe,material:ye,groupOrder:Me,renderOrder:ae.renderOrder,z:Ue,group:Pe},v[t]=Ie):(Ie.id=ae.id,Ie.object=ae,Ie.geometry=fe,Ie.material=ye,Ie.groupOrder=Me,Ie.renderOrder=ae.renderOrder,Ie.z=Ue,Ie.group=Pe),t++,Ie}return{opaque:r,transmissive:s,transparent:a,init:function u(){t=0,r.length=0,s.length=0,a.length=0},push:function C(ae,fe,ye,Me,Ue,Pe){const Ie=_(ae,fe,ye,Me,Ue,Pe);ye.transmission>0?s.push(Ie):!0===ye.transparent?a.push(Ie):r.push(Ie)},unshift:function L(ae,fe,ye,Me,Ue,Pe){const Ie=_(ae,fe,ye,Me,Ue,Pe);ye.transmission>0?s.unshift(Ie):!0===ye.transparent?a.unshift(Ie):r.unshift(Ie)},finish:function Q(){for(let ae=t,fe=v.length;ae<fe;ae++){const ye=v[ae];if(null===ye.id)break;ye.id=null,ye.object=null,ye.geometry=null,ye.material=null,ye.group=null}},sort:function U(ae,fe){r.length>1&&r.sort(ae||cw),s.length>1&&s.sort(fe||l_),a.length>1&&a.sort(fe||l_)}}}function uy(){let v=new WeakMap;return{get:function t(s,a){const u=v.get(s);let _;return void 0===u?(_=new c_,v.set(s,[_])):a>=u.length?(_=new c_,u.push(_)):_=u[a],_},dispose:function r(){v=new WeakMap}}}function yf(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new mt,color:new Mr};break;case"SpotLight":r={position:new mt,direction:new mt,color:new Mr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new mt,color:new Mr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new mt,skyColor:new Mr,groundColor:new Mr};break;case"RectAreaLight":r={color:new Mr,position:new mt,halfWidth:new mt,halfHeight:new mt}}return v[t.id]=r,r}}}let om=0;function u_(v,t){return(t.castShadow?2:0)-(v.castShadow?2:0)+(t.map?1:0)-(v.map?1:0)}function vf(v){const t=new yf,r=function dy(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fr,shadowCameraNear:1,shadowCameraFar:1e3}}return v[t.id]=r,r}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let U=0;U<9;U++)s.probe.push(new mt);const a=new mt,u=new Mi,_=new Mi;return{setup:function C(U){let Q=0,ae=0,fe=0;for(let Mt=0;Mt<9;Mt++)s.probe[Mt].set(0,0,0);let ye=0,Me=0,Ue=0,Pe=0,Ie=0,tt=0,it=0,rt=0,$t=0,At=0,Ft=0;U.sort(u_);for(let Mt=0,wt=U.length;Mt<wt;Mt++){const gn=U[Mt],Kn=gn.color,Hn=gn.intensity,Jn=gn.distance,pr=gn.shadow&&gn.shadow.map?gn.shadow.map.texture:null;if(gn.isAmbientLight)Q+=Kn.r*Hn,ae+=Kn.g*Hn,fe+=Kn.b*Hn;else if(gn.isLightProbe){for(let Yn=0;Yn<9;Yn++)s.probe[Yn].addScaledVector(gn.sh.coefficients[Yn],Hn);Ft++}else if(gn.isDirectionalLight){const Yn=t.get(gn);if(Yn.color.copy(gn.color).multiplyScalar(gn.intensity),gn.castShadow){const Nr=gn.shadow,tr=r.get(gn);tr.shadowIntensity=Nr.intensity,tr.shadowBias=Nr.bias,tr.shadowNormalBias=Nr.normalBias,tr.shadowRadius=Nr.radius,tr.shadowMapSize=Nr.mapSize,s.directionalShadow[ye]=tr,s.directionalShadowMap[ye]=pr,s.directionalShadowMatrix[ye]=gn.shadow.matrix,tt++}s.directional[ye]=Yn,ye++}else if(gn.isSpotLight){const Yn=t.get(gn);Yn.position.setFromMatrixPosition(gn.matrixWorld),Yn.color.copy(Kn).multiplyScalar(Hn),Yn.distance=Jn,Yn.coneCos=Math.cos(gn.angle),Yn.penumbraCos=Math.cos(gn.angle*(1-gn.penumbra)),Yn.decay=gn.decay,s.spot[Ue]=Yn;const Nr=gn.shadow;if(gn.map&&(s.spotLightMap[$t]=gn.map,$t++,Nr.updateMatrices(gn),gn.castShadow&&At++),s.spotLightMatrix[Ue]=Nr.matrix,gn.castShadow){const tr=r.get(gn);tr.shadowIntensity=Nr.intensity,tr.shadowBias=Nr.bias,tr.shadowNormalBias=Nr.normalBias,tr.shadowRadius=Nr.radius,tr.shadowMapSize=Nr.mapSize,s.spotShadow[Ue]=tr,s.spotShadowMap[Ue]=pr,rt++}Ue++}else if(gn.isRectAreaLight){const Yn=t.get(gn);Yn.color.copy(Kn).multiplyScalar(Hn),Yn.halfWidth.set(.5*gn.width,0,0),Yn.halfHeight.set(0,.5*gn.height,0),s.rectArea[Pe]=Yn,Pe++}else if(gn.isPointLight){const Yn=t.get(gn);if(Yn.color.copy(gn.color).multiplyScalar(gn.intensity),Yn.distance=gn.distance,Yn.decay=gn.decay,gn.castShadow){const Nr=gn.shadow,tr=r.get(gn);tr.shadowIntensity=Nr.intensity,tr.shadowBias=Nr.bias,tr.shadowNormalBias=Nr.normalBias,tr.shadowRadius=Nr.radius,tr.shadowMapSize=Nr.mapSize,tr.shadowCameraNear=Nr.camera.near,tr.shadowCameraFar=Nr.camera.far,s.pointShadow[Me]=tr,s.pointShadowMap[Me]=pr,s.pointShadowMatrix[Me]=gn.shadow.matrix,it++}s.point[Me]=Yn,Me++}else if(gn.isHemisphereLight){const Yn=t.get(gn);Yn.skyColor.copy(gn.color).multiplyScalar(Hn),Yn.groundColor.copy(gn.groundColor).multiplyScalar(Hn),s.hemi[Ie]=Yn,Ie++}}Pe>0&&(!0===v.has("OES_texture_float_linear")?(s.rectAreaLTC1=ti.LTC_FLOAT_1,s.rectAreaLTC2=ti.LTC_FLOAT_2):(s.rectAreaLTC1=ti.LTC_HALF_1,s.rectAreaLTC2=ti.LTC_HALF_2)),s.ambient[0]=Q,s.ambient[1]=ae,s.ambient[2]=fe;const Wt=s.hash;(Wt.directionalLength!==ye||Wt.pointLength!==Me||Wt.spotLength!==Ue||Wt.rectAreaLength!==Pe||Wt.hemiLength!==Ie||Wt.numDirectionalShadows!==tt||Wt.numPointShadows!==it||Wt.numSpotShadows!==rt||Wt.numSpotMaps!==$t||Wt.numLightProbes!==Ft)&&(s.directional.length=ye,s.spot.length=Ue,s.rectArea.length=Pe,s.point.length=Me,s.hemi.length=Ie,s.directionalShadow.length=tt,s.directionalShadowMap.length=tt,s.pointShadow.length=it,s.pointShadowMap.length=it,s.spotShadow.length=rt,s.spotShadowMap.length=rt,s.directionalShadowMatrix.length=tt,s.pointShadowMatrix.length=it,s.spotLightMatrix.length=rt+$t-At,s.spotLightMap.length=$t,s.numSpotLightShadowsWithMaps=At,s.numLightProbes=Ft,Wt.directionalLength=ye,Wt.pointLength=Me,Wt.spotLength=Ue,Wt.rectAreaLength=Pe,Wt.hemiLength=Ie,Wt.numDirectionalShadows=tt,Wt.numPointShadows=it,Wt.numSpotShadows=rt,Wt.numSpotMaps=$t,Wt.numLightProbes=Ft,s.version=om++)},setupView:function L(U,Q){let ae=0,fe=0,ye=0,Me=0,Ue=0;const Pe=Q.matrixWorldInverse;for(let Ie=0,tt=U.length;Ie<tt;Ie++){const it=U[Ie];if(it.isDirectionalLight){const rt=s.directional[ae];rt.direction.setFromMatrixPosition(it.matrixWorld),a.setFromMatrixPosition(it.target.matrixWorld),rt.direction.sub(a),rt.direction.transformDirection(Pe),ae++}else if(it.isSpotLight){const rt=s.spot[ye];rt.position.setFromMatrixPosition(it.matrixWorld),rt.position.applyMatrix4(Pe),rt.direction.setFromMatrixPosition(it.matrixWorld),a.setFromMatrixPosition(it.target.matrixWorld),rt.direction.sub(a),rt.direction.transformDirection(Pe),ye++}else if(it.isRectAreaLight){const rt=s.rectArea[Me];rt.position.setFromMatrixPosition(it.matrixWorld),rt.position.applyMatrix4(Pe),_.identity(),u.copy(it.matrixWorld),u.premultiply(Pe),_.extractRotation(u),rt.halfWidth.set(.5*it.width,0,0),rt.halfHeight.set(0,.5*it.height,0),rt.halfWidth.applyMatrix4(_),rt.halfHeight.applyMatrix4(_),Me++}else if(it.isPointLight){const rt=s.point[fe];rt.position.setFromMatrixPosition(it.matrixWorld),rt.position.applyMatrix4(Pe),fe++}else if(it.isHemisphereLight){const rt=s.hemi[Ue];rt.direction.setFromMatrixPosition(it.matrixWorld),rt.direction.transformDirection(Pe),Ue++}}},state:s}}function hy(v){const t=new vf(v),r=[],s=[],U={lightsArray:r,shadowsArray:s,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function a(Q){U.camera=Q,r.length=0,s.length=0},state:U,setupLights:function C(){t.setup(r)},setupLightsView:function L(Q){t.setupView(r,Q)},pushLight:function u(Q){r.push(Q)},pushShadow:function _(Q){s.push(Q)}}}function uw(v){let t=new WeakMap;return{get:function r(a,u=0){const _=t.get(a);let C;return void 0===_?(C=new hy(v),t.set(a,[C])):u>=_.length?(C=new hy(v),_.push(C)):C=_[u],C},dispose:function s(){t=new WeakMap}}}function h_(v,t,r){let s=new ep;const a=new fr,u=new fr,_=new Ds,C=new zh({depthPacking:3201}),L=new wv,U={},Q=r.maxTextureSize,ae={0:1,1:0,2:2},fe=new Sl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new fr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),ye=fe.clone();ye.defines.HORIZONTAL_PASS=1;const Me=new Zi;Me.setAttribute("position",new Ls(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Ue=new ls(Me,fe),Pe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S;let Ie=this.type;function tt(At,Ft){const Wt=t.update(Ue);fe.defines.VSM_SAMPLES!==At.blurSamples&&(fe.defines.VSM_SAMPLES=At.blurSamples,ye.defines.VSM_SAMPLES=At.blurSamples,fe.needsUpdate=!0,ye.needsUpdate=!0),null===At.mapPass&&(At.mapPass=new Se(a.x,a.y)),fe.uniforms.shadow_pass.value=At.map.texture,fe.uniforms.resolution.value=At.mapSize,fe.uniforms.radius.value=At.radius,v.setRenderTarget(At.mapPass),v.clear(),v.renderBufferDirect(Ft,null,Wt,fe,Ue,null),ye.uniforms.shadow_pass.value=At.mapPass.texture,ye.uniforms.resolution.value=At.mapSize,ye.uniforms.radius.value=At.radius,v.setRenderTarget(At.map),v.clear(),v.renderBufferDirect(Ft,null,Wt,ye,Ue,null)}function it(At,Ft,Wt,Mt){let wt=null;const gn=!0===Wt.isPointLight?At.customDistanceMaterial:At.customDepthMaterial;if(void 0!==gn)wt=gn;else if(wt=!0===Wt.isPointLight?L:C,v.localClippingEnabled&&!0===Ft.clipShadows&&Array.isArray(Ft.clippingPlanes)&&0!==Ft.clippingPlanes.length||Ft.displacementMap&&0!==Ft.displacementScale||Ft.alphaMap&&Ft.alphaTest>0||Ft.map&&Ft.alphaTest>0){const Kn=wt.uuid,Hn=Ft.uuid;let Jn=U[Kn];void 0===Jn&&(Jn={},U[Kn]=Jn);let pr=Jn[Hn];void 0===pr&&(pr=wt.clone(),Jn[Hn]=pr,Ft.addEventListener("dispose",$t)),wt=pr}return wt.visible=Ft.visible,wt.wireframe=Ft.wireframe,wt.side=Mt===X?null!==Ft.shadowSide?Ft.shadowSide:Ft.side:null!==Ft.shadowSide?Ft.shadowSide:ae[Ft.side],wt.alphaMap=Ft.alphaMap,wt.alphaTest=Ft.alphaTest,wt.map=Ft.map,wt.clipShadows=Ft.clipShadows,wt.clippingPlanes=Ft.clippingPlanes,wt.clipIntersection=Ft.clipIntersection,wt.displacementMap=Ft.displacementMap,wt.displacementScale=Ft.displacementScale,wt.displacementBias=Ft.displacementBias,wt.wireframeLinewidth=Ft.wireframeLinewidth,wt.linewidth=Ft.linewidth,!0===Wt.isPointLight&&!0===wt.isMeshDistanceMaterial&&(v.properties.get(wt).light=Wt),wt}function rt(At,Ft,Wt,Mt,wt){if(!1===At.visible)return;if(At.layers.test(Ft.layers)&&(At.isMesh||At.isLine||At.isPoints)&&(At.castShadow||At.receiveShadow&&wt===X)&&(!At.frustumCulled||s.intersectsObject(At))){At.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,At.matrixWorld);const Hn=t.update(At),Jn=At.material;if(Array.isArray(Jn)){const pr=Hn.groups;for(let Yn=0,Nr=pr.length;Yn<Nr;Yn++){const tr=pr[Yn],Vr=Jn[tr.materialIndex];if(Vr&&Vr.visible){const Qr=it(At,Vr,Mt,wt);At.onBeforeShadow(v,At,Ft,Wt,Hn,Qr,tr),v.renderBufferDirect(Wt,null,Hn,Qr,At,tr),At.onAfterShadow(v,At,Ft,Wt,Hn,Qr,tr)}}}else if(Jn.visible){const pr=it(At,Jn,Mt,wt);At.onBeforeShadow(v,At,Ft,Wt,Hn,pr,null),v.renderBufferDirect(Wt,null,Hn,pr,At,null),At.onAfterShadow(v,At,Ft,Wt,Hn,pr,null)}}const Kn=At.children;for(let Hn=0,Jn=Kn.length;Hn<Jn;Hn++)rt(Kn[Hn],Ft,Wt,Mt,wt)}function $t(At){At.target.removeEventListener("dispose",$t);for(const Wt in U){const Mt=U[Wt],wt=At.target.uuid;wt in Mt&&(Mt[wt].dispose(),delete Mt[wt])}}this.render=function(At,Ft,Wt){if(!1===Pe.enabled||!1===Pe.autoUpdate&&!1===Pe.needsUpdate||0===At.length)return;const Mt=v.getRenderTarget(),wt=v.getActiveCubeFace(),gn=v.getActiveMipmapLevel(),Kn=v.state;Kn.setBlending(0),Kn.buffers.color.setClear(1,1,1,1),Kn.buffers.depth.setTest(!0),Kn.setScissorTest(!1);const Hn=Ie!==X&&this.type===X,Jn=Ie===X&&this.type!==X;for(let pr=0,Yn=At.length;pr<Yn;pr++){const Nr=At[pr],tr=Nr.shadow;if(void 0===tr){console.warn("THREE.WebGLShadowMap:",Nr,"has no shadow.");continue}if(!1===tr.autoUpdate&&!1===tr.needsUpdate)continue;a.copy(tr.mapSize);const Vr=tr.getFrameExtents();if(a.multiply(Vr),u.copy(tr.mapSize),(a.x>Q||a.y>Q)&&(a.x>Q&&(u.x=Math.floor(Q/Vr.x),a.x=u.x*Vr.x,tr.mapSize.x=u.x),a.y>Q&&(u.y=Math.floor(Q/Vr.y),a.y=u.y*Vr.y,tr.mapSize.y=u.y)),null===tr.map||!0===Hn||!0===Jn){const vi=this.type!==X?{minFilter:ln,magFilter:ln}:{};null!==tr.map&&tr.map.dispose(),tr.map=new Se(a.x,a.y,vi),tr.map.texture.name=Nr.name+".shadowMap",tr.camera.updateProjectionMatrix()}v.setRenderTarget(tr.map),v.clear();const Qr=tr.getViewportCount();for(let vi=0;vi<Qr;vi++){const Yi=tr.getViewport(vi);_.set(u.x*Yi.x,u.y*Yi.y,u.x*Yi.z,u.y*Yi.w),Kn.viewport(_),tr.updateMatrices(Nr,vi),s=tr.getFrustum(),rt(Ft,Wt,tr.camera,Nr,this.type)}!0!==tr.isPointLightShadow&&this.type===X&&tt(tr,Wt),tr.needsUpdate=!1}Ie=this.type,Pe.needsUpdate=!1,v.setRenderTarget(Mt,wt,gn)}}const f_={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function p_(v,t){const u=new function r(){let Vn=!1;const di=new Ds;let br=null;const Lr=new Ds(0,0,0,0);return{setMask:function(bi){br!==bi&&!Vn&&(v.colorMask(bi,bi,bi,bi),br=bi)},setLocked:function(bi){Vn=bi},setClear:function(bi,yi,gs,qo,Pa){!0===Pa&&(bi*=qo,yi*=qo,gs*=qo),di.set(bi,yi,gs,qo),!1===Lr.equals(di)&&(v.clearColor(bi,yi,gs,qo),Lr.copy(di))},reset:function(){Vn=!1,br=null,Lr.set(-1,0,0,0)}}},_=new function s(){let Vn=!1,di=!1,br=null,Lr=null,bi=null;return{setReversed:function(yi){if(di!==yi){const gs=t.get("EXT_clip_control");gs.clipControlEXT(gs.LOWER_LEFT_EXT,di?gs.ZERO_TO_ONE_EXT:gs.NEGATIVE_ONE_TO_ONE_EXT);const qo=bi;bi=null,this.setClear(qo)}di=yi},getReversed:function(){return di},setTest:function(yi){yi?Wr(v.DEPTH_TEST):Ci(v.DEPTH_TEST)},setMask:function(yi){br!==yi&&!Vn&&(v.depthMask(yi),br=yi)},setFunc:function(yi){if(di&&(yi=f_[yi]),Lr!==yi){switch(yi){case 0:v.depthFunc(v.NEVER);break;case 1:v.depthFunc(v.ALWAYS);break;case 2:v.depthFunc(v.LESS);break;case 3:default:v.depthFunc(v.LEQUAL);break;case 4:v.depthFunc(v.EQUAL);break;case 5:v.depthFunc(v.GEQUAL);break;case 6:v.depthFunc(v.GREATER);break;case 7:v.depthFunc(v.NOTEQUAL)}Lr=yi}},setLocked:function(yi){Vn=yi},setClear:function(yi){bi!==yi&&(di&&(yi=1-yi),v.clearDepth(yi),bi=yi)},reset:function(){Vn=!1,br=null,Lr=null,bi=null,di=!1}}},C=new function a(){let Vn=!1,di=null,br=null,Lr=null,bi=null,yi=null,gs=null,qo=null,Pa=null;return{setTest:function(qs){Vn||(qs?Wr(v.STENCIL_TEST):Ci(v.STENCIL_TEST))},setMask:function(qs){di!==qs&&!Vn&&(v.stencilMask(qs),di=qs)},setFunc:function(qs,dc,nu){(br!==qs||Lr!==dc||bi!==nu)&&(v.stencilFunc(qs,dc,nu),br=qs,Lr=dc,bi=nu)},setOp:function(qs,dc,nu){(yi!==qs||gs!==dc||qo!==nu)&&(v.stencilOp(qs,dc,nu),yi=qs,gs=dc,qo=nu)},setLocked:function(qs){Vn=qs},setClear:function(qs){Pa!==qs&&(v.clearStencil(qs),Pa=qs)},reset:function(){Vn=!1,di=null,br=null,Lr=null,bi=null,yi=null,gs=null,qo=null,Pa=null}}},L=new WeakMap,U=new WeakMap;let Q={},ae={},fe=new WeakMap,ye=[],Me=null,Ue=!1,Pe=null,Ie=null,tt=null,it=null,rt=null,$t=null,At=null,Ft=new Mr(0,0,0),Wt=0,Mt=!1,wt=null,gn=null,Kn=null,Hn=null,Jn=null;const pr=v.getParameter(v.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Yn=!1,Nr=0;const tr=v.getParameter(v.VERSION);-1!==tr.indexOf("WebGL")?(Nr=parseFloat(/^WebGL (\d)/.exec(tr)[1]),Yn=Nr>=1):-1!==tr.indexOf("OpenGL ES")&&(Nr=parseFloat(/^OpenGL ES (\d)/.exec(tr)[1]),Yn=Nr>=2);let Vr=null,Qr={};const vi=v.getParameter(v.SCISSOR_BOX),Yi=v.getParameter(v.VIEWPORT),cs=(new Ds).fromArray(vi),_r=(new Ds).fromArray(Yi);function $r(Vn,di,br,Lr){const bi=new Uint8Array(4),yi=v.createTexture();v.bindTexture(Vn,yi),v.texParameteri(Vn,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(Vn,v.TEXTURE_MAG_FILTER,v.NEAREST);for(let gs=0;gs<br;gs++)Vn===v.TEXTURE_3D||Vn===v.TEXTURE_2D_ARRAY?v.texImage3D(di,0,v.RGBA,1,1,Lr,0,v.RGBA,v.UNSIGNED_BYTE,bi):v.texImage2D(di+gs,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,bi);return yi}const mi={};function Wr(Vn){!0!==Q[Vn]&&(v.enable(Vn),Q[Vn]=!0)}function Ci(Vn){!1!==Q[Vn]&&(v.disable(Vn),Q[Vn]=!1)}mi[v.TEXTURE_2D]=$r(v.TEXTURE_2D,v.TEXTURE_2D,1),mi[v.TEXTURE_CUBE_MAP]=$r(v.TEXTURE_CUBE_MAP,v.TEXTURE_CUBE_MAP_POSITIVE_X,6),mi[v.TEXTURE_2D_ARRAY]=$r(v.TEXTURE_2D_ARRAY,v.TEXTURE_2D_ARRAY,1,1),mi[v.TEXTURE_3D]=$r(v.TEXTURE_3D,v.TEXTURE_3D,1,1),u.setClear(0,0,0,1),_.setClear(1),C.setClear(0),Wr(v.DEPTH_TEST),_.setFunc(3),Dr(!1),ei(1),Wr(v.CULL_FACE),rn(0);const ur={100:v.FUNC_ADD,101:v.FUNC_SUBTRACT,102:v.FUNC_REVERSE_SUBTRACT};ur[103]=v.MIN,ur[104]=v.MAX;const xr={200:v.ZERO,201:v.ONE,202:v.SRC_COLOR,204:v.SRC_ALPHA,210:v.SRC_ALPHA_SATURATE,208:v.DST_COLOR,206:v.DST_ALPHA,203:v.ONE_MINUS_SRC_COLOR,205:v.ONE_MINUS_SRC_ALPHA,209:v.ONE_MINUS_DST_COLOR,207:v.ONE_MINUS_DST_ALPHA,211:v.CONSTANT_COLOR,212:v.ONE_MINUS_CONSTANT_COLOR,213:v.CONSTANT_ALPHA,214:v.ONE_MINUS_CONSTANT_ALPHA};function rn(Vn,di,br,Lr,bi,yi,gs,qo,Pa,qs){if(0!==Vn){if(!1===Ue&&(Wr(v.BLEND),Ue=!0),5===Vn)bi=bi||di,yi=yi||br,gs=gs||Lr,(di!==Ie||bi!==rt)&&(v.blendEquationSeparate(ur[di],ur[bi]),Ie=di,rt=bi),(br!==tt||Lr!==it||yi!==$t||gs!==At)&&(v.blendFuncSeparate(xr[br],xr[Lr],xr[yi],xr[gs]),tt=br,it=Lr,$t=yi,At=gs),(!1===qo.equals(Ft)||Pa!==Wt)&&(v.blendColor(qo.r,qo.g,qo.b,Pa),Ft.copy(qo),Wt=Pa),Pe=Vn,Mt=!1;else if(Vn!==Pe||qs!==Mt){if((100!==Ie||100!==rt)&&(v.blendEquation(v.FUNC_ADD),Ie=100,rt=100),qs)switch(Vn){case 1:v.blendFuncSeparate(v.ONE,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.ONE,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFuncSeparate(v.ZERO,v.SRC_COLOR,v.ZERO,v.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Vn)}else switch(Vn){case 1:v.blendFuncSeparate(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.SRC_ALPHA,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFunc(v.ZERO,v.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Vn)}tt=null,it=null,$t=null,At=null,Ft.set(0,0,0),Wt=0,Pe=Vn,Mt=qs}}else!0===Ue&&(Ci(v.BLEND),Ue=!1)}function Dr(Vn){wt!==Vn&&(v.frontFace(Vn?v.CW:v.CCW),wt=Vn)}function ei(Vn){0!==Vn?(Wr(v.CULL_FACE),Vn!==gn&&v.cullFace(1===Vn?v.BACK:2===Vn?v.FRONT:v.FRONT_AND_BACK)):Ci(v.CULL_FACE),gn=Vn}function Ri(Vn,di,br){Vn?(Wr(v.POLYGON_OFFSET_FILL),(Hn!==di||Jn!==br)&&(v.polygonOffset(di,br),Hn=di,Jn=br)):Ci(v.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:_,stencil:C},enable:Wr,disable:Ci,bindFramebuffer:function Es(Vn,di){return ae[Vn]!==di&&(v.bindFramebuffer(Vn,di),ae[Vn]=di,Vn===v.DRAW_FRAMEBUFFER&&(ae[v.FRAMEBUFFER]=di),Vn===v.FRAMEBUFFER&&(ae[v.DRAW_FRAMEBUFFER]=di),!0)},drawBuffers:function Si(Vn,di){let br=ye,Lr=!1;if(Vn){br=fe.get(di),void 0===br&&(br=[],fe.set(di,br));const bi=Vn.textures;if(br.length!==bi.length||br[0]!==v.COLOR_ATTACHMENT0){for(let yi=0,gs=bi.length;yi<gs;yi++)br[yi]=v.COLOR_ATTACHMENT0+yi;br.length=bi.length,Lr=!0}}else br[0]!==v.BACK&&(br[0]=v.BACK,Lr=!0);Lr&&v.drawBuffers(br)},useProgram:function Xi(Vn){return Me!==Vn&&(v.useProgram(Vn),Me=Vn,!0)},setBlending:rn,setMaterial:function pi(Vn,di){2===Vn.side?Ci(v.CULL_FACE):Wr(v.CULL_FACE);let br=1===Vn.side;di&&(br=!br),Dr(br),1===Vn.blending&&!1===Vn.transparent?rn(0):rn(Vn.blending,Vn.blendEquation,Vn.blendSrc,Vn.blendDst,Vn.blendEquationAlpha,Vn.blendSrcAlpha,Vn.blendDstAlpha,Vn.blendColor,Vn.blendAlpha,Vn.premultipliedAlpha),_.setFunc(Vn.depthFunc),_.setTest(Vn.depthTest),_.setMask(Vn.depthWrite),u.setMask(Vn.colorWrite);const Lr=Vn.stencilWrite;C.setTest(Lr),Lr&&(C.setMask(Vn.stencilWriteMask),C.setFunc(Vn.stencilFunc,Vn.stencilRef,Vn.stencilFuncMask),C.setOp(Vn.stencilFail,Vn.stencilZFail,Vn.stencilZPass)),Ri(Vn.polygonOffset,Vn.polygonOffsetFactor,Vn.polygonOffsetUnits),!0===Vn.alphaToCoverage?Wr(v.SAMPLE_ALPHA_TO_COVERAGE):Ci(v.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Dr,setCullFace:ei,setLineWidth:function Fr(Vn){Vn!==Kn&&(Yn&&v.lineWidth(Vn),Kn=Vn)},setPolygonOffset:Ri,setScissorTest:function Kr(Vn){Vn?Wr(v.SCISSOR_TEST):Ci(v.SCISSOR_TEST)},activeTexture:function tn(Vn){void 0===Vn&&(Vn=v.TEXTURE0+pr-1),Vr!==Vn&&(v.activeTexture(Vn),Vr=Vn)},bindTexture:function jt(Vn,di,br){void 0===br&&(br=null===Vr?v.TEXTURE0+pr-1:Vr);let Lr=Qr[br];void 0===Lr&&(Lr={type:void 0,texture:void 0},Qr[br]=Lr),(Lr.type!==Vn||Lr.texture!==di)&&(Vr!==br&&(v.activeTexture(br),Vr=br),v.bindTexture(Vn,di||mi[Vn]),Lr.type=Vn,Lr.texture=di)},unbindTexture:function er(){const Vn=Qr[Vr];void 0!==Vn&&void 0!==Vn.type&&(v.bindTexture(Vn.type,null),Vn.type=void 0,Vn.texture=void 0)},compressedTexImage2D:function Cr(){try{v.compressedTexImage2D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},compressedTexImage3D:function Ur(){try{v.compressedTexImage3D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},texImage2D:function Di(){try{v.texImage2D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},texImage3D:function Ki(){try{v.texImage3D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},updateUBOMapping:function Fs(Vn,di){let br=U.get(di);void 0===br&&(br=new WeakMap,U.set(di,br));let Lr=br.get(Vn);void 0===Lr&&(Lr=v.getUniformBlockIndex(di,Vn.name),br.set(Vn,Lr))},uniformBlockBinding:function ms(Vn,di){const Lr=U.get(di).get(Vn);L.get(di)!==Lr&&(v.uniformBlockBinding(di,Lr,Vn.__bindingPointIndex),L.set(di,Lr))},texStorage2D:function ps(){try{v.texStorage2D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},texStorage3D:function Xr(){try{v.texStorage3D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},texSubImage2D:function Ar(){try{v.texSubImage2D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},texSubImage3D:function Oi(){try{v.texSubImage3D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},compressedTexSubImage2D:function ui(){try{v.compressedTexSubImage2D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},compressedTexSubImage3D:function gi(){try{v.compressedTexSubImage3D(...arguments)}catch(Vn){console.error("THREE.WebGLState:",Vn)}},scissor:function Qi(Vn){!1===cs.equals(Vn)&&(v.scissor(Vn.x,Vn.y,Vn.z,Vn.w),cs.copy(Vn))},viewport:function Ii(Vn){!1===_r.equals(Vn)&&(v.viewport(Vn.x,Vn.y,Vn.z,Vn.w),_r.copy(Vn))},reset:function So(){v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.POLYGON_OFFSET_FILL),v.disable(v.SCISSOR_TEST),v.disable(v.STENCIL_TEST),v.disable(v.SAMPLE_ALPHA_TO_COVERAGE),v.blendEquation(v.FUNC_ADD),v.blendFunc(v.ONE,v.ZERO),v.blendFuncSeparate(v.ONE,v.ZERO,v.ONE,v.ZERO),v.blendColor(0,0,0,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(v.LESS),_.setReversed(!1),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(v.ALWAYS,0,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),v.clearStencil(0),v.cullFace(v.BACK),v.frontFace(v.CCW),v.polygonOffset(0,0),v.activeTexture(v.TEXTURE0),v.bindFramebuffer(v.FRAMEBUFFER,null),v.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),Q={},Vr=null,Qr={},ae={},fe=new WeakMap,ye=[],Me=null,Ue=!1,Pe=null,Ie=null,tt=null,it=null,rt=null,$t=null,At=null,Ft=new Mr(0,0,0),Wt=0,Mt=!1,wt=null,gn=null,Kn=null,Hn=null,Jn=null,cs.set(0,0,v.canvas.width,v.canvas.height),_r.set(0,0,v.canvas.width,v.canvas.height),u.reset(),_.reset(),C.reset()}}}function dw(v,t,r,s,a,u,_){const C=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,L=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),U=new fr,Q=new WeakMap;let ae;const fe=new WeakMap;let ye=!1;try{ye=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Me(tn,jt){return ye?new OffscreenCanvas(tn,jt):_l("canvas")}function Ue(tn,jt,er){let Cr=1;const Ur=Kr(tn);if((Ur.width>er||Ur.height>er)&&(Cr=er/Math.max(Ur.width,Ur.height)),Cr<1){if(typeof HTMLImageElement<"u"&&tn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tn instanceof ImageBitmap||typeof VideoFrame<"u"&&tn instanceof VideoFrame){const Ar=Math.floor(Cr*Ur.width),Oi=Math.floor(Cr*Ur.height);void 0===ae&&(ae=Me(Ar,Oi));const ui=jt?Me(Ar,Oi):ae;return ui.width=Ar,ui.height=Oi,ui.getContext("2d").drawImage(tn,0,0,Ar,Oi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ur.width+"x"+Ur.height+") to ("+Ar+"x"+Oi+")."),ui}return"data"in tn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ur.width+"x"+Ur.height+")."),tn}return tn}function Pe(tn){return tn.generateMipmaps}function Ie(tn){v.generateMipmap(tn)}function tt(tn){return tn.isWebGLCubeRenderTarget?v.TEXTURE_CUBE_MAP:tn.isWebGL3DRenderTarget?v.TEXTURE_3D:tn.isWebGLArrayRenderTarget||tn.isCompressedArrayTexture?v.TEXTURE_2D_ARRAY:v.TEXTURE_2D}function it(tn,jt,er,Cr,Ur=!1){if(null!==tn){if(void 0!==v[tn])return v[tn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tn+"'")}let Ar=jt;if(jt===v.RED&&(er===v.FLOAT&&(Ar=v.R32F),er===v.HALF_FLOAT&&(Ar=v.R16F),er===v.UNSIGNED_BYTE&&(Ar=v.R8)),jt===v.RED_INTEGER&&(er===v.UNSIGNED_BYTE&&(Ar=v.R8UI),er===v.UNSIGNED_SHORT&&(Ar=v.R16UI),er===v.UNSIGNED_INT&&(Ar=v.R32UI),er===v.BYTE&&(Ar=v.R8I),er===v.SHORT&&(Ar=v.R16I),er===v.INT&&(Ar=v.R32I)),jt===v.RG&&(er===v.FLOAT&&(Ar=v.RG32F),er===v.HALF_FLOAT&&(Ar=v.RG16F),er===v.UNSIGNED_BYTE&&(Ar=v.RG8)),jt===v.RG_INTEGER&&(er===v.UNSIGNED_BYTE&&(Ar=v.RG8UI),er===v.UNSIGNED_SHORT&&(Ar=v.RG16UI),er===v.UNSIGNED_INT&&(Ar=v.RG32UI),er===v.BYTE&&(Ar=v.RG8I),er===v.SHORT&&(Ar=v.RG16I),er===v.INT&&(Ar=v.RG32I)),jt===v.RGB_INTEGER&&(er===v.UNSIGNED_BYTE&&(Ar=v.RGB8UI),er===v.UNSIGNED_SHORT&&(Ar=v.RGB16UI),er===v.UNSIGNED_INT&&(Ar=v.RGB32UI),er===v.BYTE&&(Ar=v.RGB8I),er===v.SHORT&&(Ar=v.RGB16I),er===v.INT&&(Ar=v.RGB32I)),jt===v.RGBA_INTEGER&&(er===v.UNSIGNED_BYTE&&(Ar=v.RGBA8UI),er===v.UNSIGNED_SHORT&&(Ar=v.RGBA16UI),er===v.UNSIGNED_INT&&(Ar=v.RGBA32UI),er===v.BYTE&&(Ar=v.RGBA8I),er===v.SHORT&&(Ar=v.RGBA16I),er===v.INT&&(Ar=v.RGBA32I)),jt===v.RGB&&er===v.UNSIGNED_INT_5_9_9_9_REV&&(Ar=v.RGB9_E5),jt===v.RGBA){const Oi=Ur?ds:Ss.getTransfer(Cr);er===v.FLOAT&&(Ar=v.RGBA32F),er===v.HALF_FLOAT&&(Ar=v.RGBA16F),er===v.UNSIGNED_BYTE&&(Ar=Oi===Li?v.SRGB8_ALPHA8:v.RGBA8),er===v.UNSIGNED_SHORT_4_4_4_4&&(Ar=v.RGBA4),er===v.UNSIGNED_SHORT_5_5_5_1&&(Ar=v.RGB5_A1)}return(Ar===v.R16F||Ar===v.R32F||Ar===v.RG16F||Ar===v.RG32F||Ar===v.RGBA16F||Ar===v.RGBA32F)&&t.get("EXT_color_buffer_float"),Ar}function rt(tn,jt){let er;return tn?null===jt||jt===N||jt===ce?er=v.DEPTH24_STENCIL8:jt===B?er=v.DEPTH32F_STENCIL8:jt===Ye&&(er=v.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===jt||jt===N||jt===ce?er=v.DEPTH_COMPONENT24:jt===B?er=v.DEPTH_COMPONENT32F:jt===Ye&&(er=v.DEPTH_COMPONENT16),er}function $t(tn,jt){return!0===Pe(tn)||tn.isFramebufferTexture&&tn.minFilter!==ln&&tn.minFilter!==Sn?Math.log2(Math.max(jt.width,jt.height))+1:void 0!==tn.mipmaps&&tn.mipmaps.length>0?tn.mipmaps.length:tn.isCompressedTexture&&Array.isArray(tn.image)?jt.mipmaps.length:1}function At(tn){const jt=tn.target;jt.removeEventListener("dispose",At),function Wt(tn){const jt=s.get(tn);if(void 0===jt.__webglInit)return;const er=tn.source,Cr=fe.get(er);if(Cr){const Ur=Cr[jt.__cacheKey];Ur.usedTimes--,0===Ur.usedTimes&&Mt(tn),0===Object.keys(Cr).length&&fe.delete(er)}s.remove(tn)}(jt),jt.isVideoTexture&&Q.delete(jt)}function Ft(tn){const jt=tn.target;jt.removeEventListener("dispose",Ft),function wt(tn){const jt=s.get(tn);if(tn.depthTexture&&(tn.depthTexture.dispose(),s.remove(tn.depthTexture)),tn.isWebGLCubeRenderTarget)for(let Cr=0;Cr<6;Cr++){if(Array.isArray(jt.__webglFramebuffer[Cr]))for(let Ur=0;Ur<jt.__webglFramebuffer[Cr].length;Ur++)v.deleteFramebuffer(jt.__webglFramebuffer[Cr][Ur]);else v.deleteFramebuffer(jt.__webglFramebuffer[Cr]);jt.__webglDepthbuffer&&v.deleteRenderbuffer(jt.__webglDepthbuffer[Cr])}else{if(Array.isArray(jt.__webglFramebuffer))for(let Cr=0;Cr<jt.__webglFramebuffer.length;Cr++)v.deleteFramebuffer(jt.__webglFramebuffer[Cr]);else v.deleteFramebuffer(jt.__webglFramebuffer);if(jt.__webglDepthbuffer&&v.deleteRenderbuffer(jt.__webglDepthbuffer),jt.__webglMultisampledFramebuffer&&v.deleteFramebuffer(jt.__webglMultisampledFramebuffer),jt.__webglColorRenderbuffer)for(let Cr=0;Cr<jt.__webglColorRenderbuffer.length;Cr++)jt.__webglColorRenderbuffer[Cr]&&v.deleteRenderbuffer(jt.__webglColorRenderbuffer[Cr]);jt.__webglDepthRenderbuffer&&v.deleteRenderbuffer(jt.__webglDepthRenderbuffer)}const er=tn.textures;for(let Cr=0,Ur=er.length;Cr<Ur;Cr++){const Ar=s.get(er[Cr]);Ar.__webglTexture&&(v.deleteTexture(Ar.__webglTexture),_.memory.textures--),s.remove(er[Cr])}s.remove(tn)}(jt)}function Mt(tn){const jt=s.get(tn);v.deleteTexture(jt.__webglTexture),delete fe.get(tn.source)[jt.__cacheKey],_.memory.textures--}let gn=0;function pr(tn,jt){const er=s.get(tn);if(tn.isVideoTexture&&function Fr(tn){const jt=_.render.frame;Q.get(tn)!==jt&&(Q.set(tn,jt),tn.update())}(tn),!1===tn.isRenderTargetTexture&&tn.version>0&&er.__version!==tn.version){const Cr=tn.image;if(null===Cr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Cr.complete)return void _r(er,tn,jt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.bindTexture(v.TEXTURE_2D,er.__webglTexture,v.TEXTURE0+jt)}const Vr={[qt]:v.REPEAT,[_n]:v.CLAMP_TO_EDGE,1002:v.MIRRORED_REPEAT},Qr={[ln]:v.NEAREST,1004:v.NEAREST_MIPMAP_NEAREST,[sn]:v.NEAREST_MIPMAP_LINEAR,[Sn]:v.LINEAR,1007:v.LINEAR_MIPMAP_NEAREST,[sr]:v.LINEAR_MIPMAP_LINEAR},vi={512:v.NEVER,519:v.ALWAYS,513:v.LESS,515:v.LEQUAL,514:v.EQUAL,518:v.GEQUAL,516:v.GREATER,517:v.NOTEQUAL};function Yi(tn,jt){if(jt.type===B&&!1===t.has("OES_texture_float_linear")&&(jt.magFilter===Sn||1007===jt.magFilter||jt.magFilter===sn||jt.magFilter===sr||jt.minFilter===Sn||1007===jt.minFilter||jt.minFilter===sn||jt.minFilter===sr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),v.texParameteri(tn,v.TEXTURE_WRAP_S,Vr[jt.wrapS]),v.texParameteri(tn,v.TEXTURE_WRAP_T,Vr[jt.wrapT]),(tn===v.TEXTURE_3D||tn===v.TEXTURE_2D_ARRAY)&&v.texParameteri(tn,v.TEXTURE_WRAP_R,Vr[jt.wrapR]),v.texParameteri(tn,v.TEXTURE_MAG_FILTER,Qr[jt.magFilter]),v.texParameteri(tn,v.TEXTURE_MIN_FILTER,Qr[jt.minFilter]),jt.compareFunction&&(v.texParameteri(tn,v.TEXTURE_COMPARE_MODE,v.COMPARE_REF_TO_TEXTURE),v.texParameteri(tn,v.TEXTURE_COMPARE_FUNC,vi[jt.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(jt.magFilter===ln||jt.minFilter!==sn&&jt.minFilter!==sr||jt.type===B&&!1===t.has("OES_texture_float_linear"))return;if(jt.anisotropy>1||s.get(jt).__currentAnisotropy){const er=t.get("EXT_texture_filter_anisotropic");v.texParameterf(tn,er.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(jt.anisotropy,a.getMaxAnisotropy())),s.get(jt).__currentAnisotropy=jt.anisotropy}}}function cs(tn,jt){let er=!1;void 0===tn.__webglInit&&(tn.__webglInit=!0,jt.addEventListener("dispose",At));const Cr=jt.source;let Ur=fe.get(Cr);void 0===Ur&&(Ur={},fe.set(Cr,Ur));const Ar=function Jn(tn){const jt=[];return jt.push(tn.wrapS),jt.push(tn.wrapT),jt.push(tn.wrapR||0),jt.push(tn.magFilter),jt.push(tn.minFilter),jt.push(tn.anisotropy),jt.push(tn.internalFormat),jt.push(tn.format),jt.push(tn.type),jt.push(tn.generateMipmaps),jt.push(tn.premultiplyAlpha),jt.push(tn.flipY),jt.push(tn.unpackAlignment),jt.push(tn.colorSpace),jt.join()}(jt);if(Ar!==tn.__cacheKey){void 0===Ur[Ar]&&(Ur[Ar]={texture:v.createTexture(),usedTimes:0},_.memory.textures++,er=!0),Ur[Ar].usedTimes++;const Oi=Ur[tn.__cacheKey];void 0!==Oi&&(Ur[tn.__cacheKey].usedTimes--,0===Oi.usedTimes&&Mt(jt)),tn.__cacheKey=Ar,tn.__webglTexture=Ur[Ar].texture}return er}function _r(tn,jt,er){let Cr=v.TEXTURE_2D;(jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(Cr=v.TEXTURE_2D_ARRAY),jt.isData3DTexture&&(Cr=v.TEXTURE_3D);const Ur=cs(tn,jt),Ar=jt.source;r.bindTexture(Cr,tn.__webglTexture,v.TEXTURE0+er);const Oi=s.get(Ar);if(Ar.version!==Oi.__version||!0===Ur){r.activeTexture(v.TEXTURE0+er);const ui=Ss.getPrimaries(Ss.workingColorSpace),gi=""===jt.colorSpace?null:Ss.getPrimaries(jt.colorSpace),ps=""===jt.colorSpace||ui===gi?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,jt.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,jt.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,jt.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,ps);let Xr=Ue(jt.image,!1,a.maxTextureSize);Xr=Ri(jt,Xr);const Di=u.convert(jt.format,jt.colorSpace),Ki=u.convert(jt.type);let Ii,Qi=it(jt.internalFormat,Di,Ki,jt.colorSpace,jt.isVideoTexture);Yi(Cr,jt);const Fs=jt.mipmaps,ms=!0!==jt.isVideoTexture,So=void 0===Oi.__version||!0===Ur,Vn=Ar.dataReady,di=$t(jt,Xr);if(jt.isDepthTexture)Qi=rt(jt.format===ft,jt.type),So&&(ms?r.texStorage2D(v.TEXTURE_2D,1,Qi,Xr.width,Xr.height):r.texImage2D(v.TEXTURE_2D,0,Qi,Xr.width,Xr.height,0,Di,Ki,null));else if(jt.isDataTexture)if(Fs.length>0){ms&&So&&r.texStorage2D(v.TEXTURE_2D,di,Qi,Fs[0].width,Fs[0].height);for(let br=0,Lr=Fs.length;br<Lr;br++)Ii=Fs[br],ms?Vn&&r.texSubImage2D(v.TEXTURE_2D,br,0,0,Ii.width,Ii.height,Di,Ki,Ii.data):r.texImage2D(v.TEXTURE_2D,br,Qi,Ii.width,Ii.height,0,Di,Ki,Ii.data);jt.generateMipmaps=!1}else ms?(So&&r.texStorage2D(v.TEXTURE_2D,di,Qi,Xr.width,Xr.height),Vn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,Xr.width,Xr.height,Di,Ki,Xr.data)):r.texImage2D(v.TEXTURE_2D,0,Qi,Xr.width,Xr.height,0,Di,Ki,Xr.data);else if(jt.isCompressedTexture)if(jt.isCompressedArrayTexture){ms&&So&&r.texStorage3D(v.TEXTURE_2D_ARRAY,di,Qi,Fs[0].width,Fs[0].height,Xr.depth);for(let br=0,Lr=Fs.length;br<Lr;br++)if(Ii=Fs[br],jt.format!==Vt)if(null!==Di)if(ms){if(Vn)if(jt.layerUpdates.size>0){const bi=tf(Ii.width,Ii.height,jt.format,jt.type);for(const yi of jt.layerUpdates){const gs=Ii.data.subarray(yi*bi/Ii.data.BYTES_PER_ELEMENT,(yi+1)*bi/Ii.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,br,0,0,yi,Ii.width,Ii.height,1,Di,gs)}jt.clearLayerUpdates()}else r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,br,0,0,0,Ii.width,Ii.height,Xr.depth,Di,Ii.data)}else r.compressedTexImage3D(v.TEXTURE_2D_ARRAY,br,Qi,Ii.width,Ii.height,Xr.depth,0,Ii.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ms?Vn&&r.texSubImage3D(v.TEXTURE_2D_ARRAY,br,0,0,0,Ii.width,Ii.height,Xr.depth,Di,Ki,Ii.data):r.texImage3D(v.TEXTURE_2D_ARRAY,br,Qi,Ii.width,Ii.height,Xr.depth,0,Di,Ki,Ii.data)}else{ms&&So&&r.texStorage2D(v.TEXTURE_2D,di,Qi,Fs[0].width,Fs[0].height);for(let br=0,Lr=Fs.length;br<Lr;br++)Ii=Fs[br],jt.format!==Vt?null!==Di?ms?Vn&&r.compressedTexSubImage2D(v.TEXTURE_2D,br,0,0,Ii.width,Ii.height,Di,Ii.data):r.compressedTexImage2D(v.TEXTURE_2D,br,Qi,Ii.width,Ii.height,0,Ii.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ms?Vn&&r.texSubImage2D(v.TEXTURE_2D,br,0,0,Ii.width,Ii.height,Di,Ki,Ii.data):r.texImage2D(v.TEXTURE_2D,br,Qi,Ii.width,Ii.height,0,Di,Ki,Ii.data)}else if(jt.isDataArrayTexture)if(ms){if(So&&r.texStorage3D(v.TEXTURE_2D_ARRAY,di,Qi,Xr.width,Xr.height,Xr.depth),Vn)if(jt.layerUpdates.size>0){const br=tf(Xr.width,Xr.height,jt.format,jt.type);for(const Lr of jt.layerUpdates){const bi=Xr.data.subarray(Lr*br/Xr.data.BYTES_PER_ELEMENT,(Lr+1)*br/Xr.data.BYTES_PER_ELEMENT);r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,Lr,Xr.width,Xr.height,1,Di,Ki,bi)}jt.clearLayerUpdates()}else r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,0,Xr.width,Xr.height,Xr.depth,Di,Ki,Xr.data)}else r.texImage3D(v.TEXTURE_2D_ARRAY,0,Qi,Xr.width,Xr.height,Xr.depth,0,Di,Ki,Xr.data);else if(jt.isData3DTexture)ms?(So&&r.texStorage3D(v.TEXTURE_3D,di,Qi,Xr.width,Xr.height,Xr.depth),Vn&&r.texSubImage3D(v.TEXTURE_3D,0,0,0,0,Xr.width,Xr.height,Xr.depth,Di,Ki,Xr.data)):r.texImage3D(v.TEXTURE_3D,0,Qi,Xr.width,Xr.height,Xr.depth,0,Di,Ki,Xr.data);else if(jt.isFramebufferTexture){if(So)if(ms)r.texStorage2D(v.TEXTURE_2D,di,Qi,Xr.width,Xr.height);else{let br=Xr.width,Lr=Xr.height;for(let bi=0;bi<di;bi++)r.texImage2D(v.TEXTURE_2D,bi,Qi,br,Lr,0,Di,Ki,null),br>>=1,Lr>>=1}}else if(Fs.length>0){if(ms&&So){const br=Kr(Fs[0]);r.texStorage2D(v.TEXTURE_2D,di,Qi,br.width,br.height)}for(let br=0,Lr=Fs.length;br<Lr;br++)Ii=Fs[br],ms?Vn&&r.texSubImage2D(v.TEXTURE_2D,br,0,0,Di,Ki,Ii):r.texImage2D(v.TEXTURE_2D,br,Qi,Di,Ki,Ii);jt.generateMipmaps=!1}else if(ms){if(So){const br=Kr(Xr);r.texStorage2D(v.TEXTURE_2D,di,Qi,br.width,br.height)}Vn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,Di,Ki,Xr)}else r.texImage2D(v.TEXTURE_2D,0,Qi,Di,Ki,Xr);Pe(jt)&&Ie(Cr),Oi.__version=Ar.version,jt.onUpdate&&jt.onUpdate(jt)}tn.__version=jt.version}function mi(tn,jt,er,Cr,Ur,Ar){const Oi=u.convert(er.format,er.colorSpace),ui=u.convert(er.type),gi=it(er.internalFormat,Oi,ui,er.colorSpace),ps=s.get(jt),Xr=s.get(er);if(Xr.__renderTarget=jt,!ps.__hasExternalTextures){const Di=Math.max(1,jt.width>>Ar),Ki=Math.max(1,jt.height>>Ar);Ur===v.TEXTURE_3D||Ur===v.TEXTURE_2D_ARRAY?r.texImage3D(Ur,Ar,gi,Di,Ki,jt.depth,0,Oi,ui,null):r.texImage2D(Ur,Ar,gi,Di,Ki,0,Oi,ui,null)}r.bindFramebuffer(v.FRAMEBUFFER,tn),ei(jt)?C.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,Cr,Ur,Xr.__webglTexture,0,Dr(jt)):(Ur===v.TEXTURE_2D||Ur>=v.TEXTURE_CUBE_MAP_POSITIVE_X&&Ur<=v.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&v.framebufferTexture2D(v.FRAMEBUFFER,Cr,Ur,Xr.__webglTexture,Ar),r.bindFramebuffer(v.FRAMEBUFFER,null)}function Wr(tn,jt,er){if(v.bindRenderbuffer(v.RENDERBUFFER,tn),jt.depthBuffer){const Cr=jt.depthTexture,Ar=rt(jt.stencilBuffer,Cr&&Cr.isDepthTexture?Cr.type:null),Oi=jt.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,ui=Dr(jt);ei(jt)?C.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,ui,Ar,jt.width,jt.height):er?v.renderbufferStorageMultisample(v.RENDERBUFFER,ui,Ar,jt.width,jt.height):v.renderbufferStorage(v.RENDERBUFFER,Ar,jt.width,jt.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,Oi,v.RENDERBUFFER,tn)}else{const Cr=jt.textures;for(let Ur=0;Ur<Cr.length;Ur++){const Ar=Cr[Ur],Oi=u.convert(Ar.format,Ar.colorSpace),ui=u.convert(Ar.type),gi=it(Ar.internalFormat,Oi,ui,Ar.colorSpace),ps=Dr(jt);er&&!1===ei(jt)?v.renderbufferStorageMultisample(v.RENDERBUFFER,ps,gi,jt.width,jt.height):ei(jt)?C.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,ps,gi,jt.width,jt.height):v.renderbufferStorage(v.RENDERBUFFER,gi,jt.width,jt.height)}}v.bindRenderbuffer(v.RENDERBUFFER,null)}function Es(tn){const jt=s.get(tn),er=!0===tn.isWebGLCubeRenderTarget;if(jt.__boundDepthTexture!==tn.depthTexture){const Cr=tn.depthTexture;if(jt.__depthDisposeCallback&&jt.__depthDisposeCallback(),Cr){const Ur=()=>{delete jt.__boundDepthTexture,delete jt.__depthDisposeCallback,Cr.removeEventListener("dispose",Ur)};Cr.addEventListener("dispose",Ur),jt.__depthDisposeCallback=Ur}jt.__boundDepthTexture=Cr}if(tn.depthTexture&&!jt.__autoAllocateDepthBuffer){if(er)throw new Error("target.depthTexture not supported in Cube render targets");!function Ci(tn,jt){if(jt&&jt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(v.FRAMEBUFFER,tn),!jt.depthTexture||!jt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Cr=s.get(jt.depthTexture);Cr.__renderTarget=jt,(!Cr.__webglTexture||jt.depthTexture.image.width!==jt.width||jt.depthTexture.image.height!==jt.height)&&(jt.depthTexture.image.width=jt.width,jt.depthTexture.image.height=jt.height,jt.depthTexture.needsUpdate=!0),pr(jt.depthTexture,0);const Ur=Cr.__webglTexture,Ar=Dr(jt);if(jt.depthTexture.format===We)ei(jt)?C.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Ur,0,Ar):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Ur,0);else{if(jt.depthTexture.format!==ft)throw new Error("Unknown depthTexture format");ei(jt)?C.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Ur,0,Ar):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Ur,0)}}(jt.__webglFramebuffer,tn)}else if(er){jt.__webglDepthbuffer=[];for(let Cr=0;Cr<6;Cr++)if(r.bindFramebuffer(v.FRAMEBUFFER,jt.__webglFramebuffer[Cr]),void 0===jt.__webglDepthbuffer[Cr])jt.__webglDepthbuffer[Cr]=v.createRenderbuffer(),Wr(jt.__webglDepthbuffer[Cr],tn,!1);else{const Ur=tn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Ar=jt.__webglDepthbuffer[Cr];v.bindRenderbuffer(v.RENDERBUFFER,Ar),v.framebufferRenderbuffer(v.FRAMEBUFFER,Ur,v.RENDERBUFFER,Ar)}}else if(r.bindFramebuffer(v.FRAMEBUFFER,jt.__webglFramebuffer),void 0===jt.__webglDepthbuffer)jt.__webglDepthbuffer=v.createRenderbuffer(),Wr(jt.__webglDepthbuffer,tn,!1);else{const Cr=tn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Ur=jt.__webglDepthbuffer;v.bindRenderbuffer(v.RENDERBUFFER,Ur),v.framebufferRenderbuffer(v.FRAMEBUFFER,Cr,v.RENDERBUFFER,Ur)}r.bindFramebuffer(v.FRAMEBUFFER,null)}const xr=[],rn=[];function Dr(tn){return Math.min(a.maxSamples,tn.samples)}function ei(tn){const jt=s.get(tn);return tn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==jt.__useRenderToTexture}function Ri(tn,jt){const er=tn.colorSpace,Cr=tn.format,Ur=tn.type;return!0===tn.isCompressedTexture||!0===tn.isVideoTexture||er!==Vi&&""!==er&&(Ss.getTransfer(er)===Li?(Cr!==Vt||Ur!==Tr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",er)),jt}function Kr(tn){return typeof HTMLImageElement<"u"&&tn instanceof HTMLImageElement?(U.width=tn.naturalWidth||tn.width,U.height=tn.naturalHeight||tn.height):typeof VideoFrame<"u"&&tn instanceof VideoFrame?(U.width=tn.displayWidth,U.height=tn.displayHeight):(U.width=tn.width,U.height=tn.height),U}this.allocateTextureUnit=function Hn(){const tn=gn;return tn>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+tn+" texture units while this GPU supports only "+a.maxTextures),gn+=1,tn},this.resetTextureUnits=function Kn(){gn=0},this.setTexture2D=pr,this.setTexture2DArray=function Yn(tn,jt){const er=s.get(tn);tn.version>0&&er.__version!==tn.version?_r(er,tn,jt):r.bindTexture(v.TEXTURE_2D_ARRAY,er.__webglTexture,v.TEXTURE0+jt)},this.setTexture3D=function Nr(tn,jt){const er=s.get(tn);tn.version>0&&er.__version!==tn.version?_r(er,tn,jt):r.bindTexture(v.TEXTURE_3D,er.__webglTexture,v.TEXTURE0+jt)},this.setTextureCube=function tr(tn,jt){const er=s.get(tn);tn.version>0&&er.__version!==tn.version?function $r(tn,jt,er){if(6!==jt.image.length)return;const Cr=cs(tn,jt),Ur=jt.source;r.bindTexture(v.TEXTURE_CUBE_MAP,tn.__webglTexture,v.TEXTURE0+er);const Ar=s.get(Ur);if(Ur.version!==Ar.__version||!0===Cr){r.activeTexture(v.TEXTURE0+er);const Oi=Ss.getPrimaries(Ss.workingColorSpace),ui=""===jt.colorSpace?null:Ss.getPrimaries(jt.colorSpace),gi=""===jt.colorSpace||Oi===ui?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,jt.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,jt.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,jt.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,gi);const ps=jt.isCompressedTexture||jt.image[0].isCompressedTexture,Xr=jt.image[0]&&jt.image[0].isDataTexture,Di=[];for(let Lr=0;Lr<6;Lr++)Di[Lr]=ps||Xr?Xr?jt.image[Lr].image:jt.image[Lr]:Ue(jt.image[Lr],!0,a.maxCubemapSize),Di[Lr]=Ri(jt,Di[Lr]);const Ki=Di[0],Qi=u.convert(jt.format,jt.colorSpace),Ii=u.convert(jt.type),Fs=it(jt.internalFormat,Qi,Ii,jt.colorSpace),ms=!0!==jt.isVideoTexture,So=void 0===Ar.__version||!0===Cr,Vn=Ur.dataReady;let br,di=$t(jt,Ki);if(Yi(v.TEXTURE_CUBE_MAP,jt),ps){ms&&So&&r.texStorage2D(v.TEXTURE_CUBE_MAP,di,Fs,Ki.width,Ki.height);for(let Lr=0;Lr<6;Lr++){br=Di[Lr].mipmaps;for(let bi=0;bi<br.length;bi++){const yi=br[bi];jt.format!==Vt?null!==Qi?ms?Vn&&r.compressedTexSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi,0,0,yi.width,yi.height,Qi,yi.data):r.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi,Fs,yi.width,yi.height,0,yi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ms?Vn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi,0,0,yi.width,yi.height,Qi,Ii,yi.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi,Fs,yi.width,yi.height,0,Qi,Ii,yi.data)}}}else{if(br=jt.mipmaps,ms&&So){br.length>0&&di++;const Lr=Kr(Di[0]);r.texStorage2D(v.TEXTURE_CUBE_MAP,di,Fs,Lr.width,Lr.height)}for(let Lr=0;Lr<6;Lr++)if(Xr){ms?Vn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,0,0,0,Di[Lr].width,Di[Lr].height,Qi,Ii,Di[Lr].data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,0,Fs,Di[Lr].width,Di[Lr].height,0,Qi,Ii,Di[Lr].data);for(let bi=0;bi<br.length;bi++){const gs=br[bi].image[Lr].image;ms?Vn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi+1,0,0,gs.width,gs.height,Qi,Ii,gs.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi+1,Fs,gs.width,gs.height,0,Qi,Ii,gs.data)}}else{ms?Vn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,0,0,0,Qi,Ii,Di[Lr]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,0,Fs,Qi,Ii,Di[Lr]);for(let bi=0;bi<br.length;bi++){const yi=br[bi];ms?Vn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi+1,0,0,Qi,Ii,yi.image[Lr]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Lr,bi+1,Fs,Qi,Ii,yi.image[Lr])}}}Pe(jt)&&Ie(v.TEXTURE_CUBE_MAP),Ar.__version=Ur.version,jt.onUpdate&&jt.onUpdate(jt)}tn.__version=jt.version}(er,tn,jt):r.bindTexture(v.TEXTURE_CUBE_MAP,er.__webglTexture,v.TEXTURE0+jt)},this.rebindTextures=function Si(tn,jt,er){const Cr=s.get(tn);void 0!==jt&&mi(Cr.__webglFramebuffer,tn,tn.texture,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,0),void 0!==er&&Es(tn)},this.setupRenderTarget=function Xi(tn){const jt=tn.texture,er=s.get(tn),Cr=s.get(jt);tn.addEventListener("dispose",Ft);const Ur=tn.textures,Ar=!0===tn.isWebGLCubeRenderTarget,Oi=Ur.length>1;if(Oi||(void 0===Cr.__webglTexture&&(Cr.__webglTexture=v.createTexture()),Cr.__version=jt.version,_.memory.textures++),Ar){er.__webglFramebuffer=[];for(let ui=0;ui<6;ui++)if(jt.mipmaps&&jt.mipmaps.length>0){er.__webglFramebuffer[ui]=[];for(let gi=0;gi<jt.mipmaps.length;gi++)er.__webglFramebuffer[ui][gi]=v.createFramebuffer()}else er.__webglFramebuffer[ui]=v.createFramebuffer()}else{if(jt.mipmaps&&jt.mipmaps.length>0){er.__webglFramebuffer=[];for(let ui=0;ui<jt.mipmaps.length;ui++)er.__webglFramebuffer[ui]=v.createFramebuffer()}else er.__webglFramebuffer=v.createFramebuffer();if(Oi)for(let ui=0,gi=Ur.length;ui<gi;ui++){const ps=s.get(Ur[ui]);void 0===ps.__webglTexture&&(ps.__webglTexture=v.createTexture(),_.memory.textures++)}if(tn.samples>0&&!1===ei(tn)){er.__webglMultisampledFramebuffer=v.createFramebuffer(),er.__webglColorRenderbuffer=[],r.bindFramebuffer(v.FRAMEBUFFER,er.__webglMultisampledFramebuffer);for(let ui=0;ui<Ur.length;ui++){const gi=Ur[ui];er.__webglColorRenderbuffer[ui]=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,er.__webglColorRenderbuffer[ui]);const ps=u.convert(gi.format,gi.colorSpace),Xr=u.convert(gi.type),Di=it(gi.internalFormat,ps,Xr,gi.colorSpace,!0===tn.isXRRenderTarget),Ki=Dr(tn);v.renderbufferStorageMultisample(v.RENDERBUFFER,Ki,Di,tn.width,tn.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+ui,v.RENDERBUFFER,er.__webglColorRenderbuffer[ui])}v.bindRenderbuffer(v.RENDERBUFFER,null),tn.depthBuffer&&(er.__webglDepthRenderbuffer=v.createRenderbuffer(),Wr(er.__webglDepthRenderbuffer,tn,!0)),r.bindFramebuffer(v.FRAMEBUFFER,null)}}if(Ar){r.bindTexture(v.TEXTURE_CUBE_MAP,Cr.__webglTexture),Yi(v.TEXTURE_CUBE_MAP,jt);for(let ui=0;ui<6;ui++)if(jt.mipmaps&&jt.mipmaps.length>0)for(let gi=0;gi<jt.mipmaps.length;gi++)mi(er.__webglFramebuffer[ui][gi],tn,jt,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+ui,gi);else mi(er.__webglFramebuffer[ui],tn,jt,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+ui,0);Pe(jt)&&Ie(v.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Oi){for(let ui=0,gi=Ur.length;ui<gi;ui++){const ps=Ur[ui],Xr=s.get(ps);r.bindTexture(v.TEXTURE_2D,Xr.__webglTexture),Yi(v.TEXTURE_2D,ps),mi(er.__webglFramebuffer,tn,ps,v.COLOR_ATTACHMENT0+ui,v.TEXTURE_2D,0),Pe(ps)&&Ie(v.TEXTURE_2D)}r.unbindTexture()}else{let ui=v.TEXTURE_2D;if((tn.isWebGL3DRenderTarget||tn.isWebGLArrayRenderTarget)&&(ui=tn.isWebGL3DRenderTarget?v.TEXTURE_3D:v.TEXTURE_2D_ARRAY),r.bindTexture(ui,Cr.__webglTexture),Yi(ui,jt),jt.mipmaps&&jt.mipmaps.length>0)for(let gi=0;gi<jt.mipmaps.length;gi++)mi(er.__webglFramebuffer[gi],tn,jt,v.COLOR_ATTACHMENT0,ui,gi);else mi(er.__webglFramebuffer,tn,jt,v.COLOR_ATTACHMENT0,ui,0);Pe(jt)&&Ie(ui),r.unbindTexture()}tn.depthBuffer&&Es(tn)},this.updateRenderTargetMipmap=function ur(tn){const jt=tn.textures;for(let er=0,Cr=jt.length;er<Cr;er++){const Ur=jt[er];if(Pe(Ur)){const Ar=tt(tn),Oi=s.get(Ur).__webglTexture;r.bindTexture(Ar,Oi),Ie(Ar),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function pi(tn){if(tn.samples>0)if(!1===ei(tn)){const jt=tn.textures,er=tn.width,Cr=tn.height;let Ur=v.COLOR_BUFFER_BIT;const Ar=tn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Oi=s.get(tn),ui=jt.length>1;if(ui)for(let gi=0;gi<jt.length;gi++)r.bindFramebuffer(v.FRAMEBUFFER,Oi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+gi,v.RENDERBUFFER,null),r.bindFramebuffer(v.FRAMEBUFFER,Oi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+gi,v.TEXTURE_2D,null,0);r.bindFramebuffer(v.READ_FRAMEBUFFER,Oi.__webglMultisampledFramebuffer),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Oi.__webglFramebuffer);for(let gi=0;gi<jt.length;gi++){if(tn.resolveDepthBuffer&&(tn.depthBuffer&&(Ur|=v.DEPTH_BUFFER_BIT),tn.stencilBuffer&&tn.resolveStencilBuffer&&(Ur|=v.STENCIL_BUFFER_BIT)),ui){v.framebufferRenderbuffer(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,Oi.__webglColorRenderbuffer[gi]);const ps=s.get(jt[gi]).__webglTexture;v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,ps,0)}v.blitFramebuffer(0,0,er,Cr,0,0,er,Cr,Ur,v.NEAREST),!0===L&&(xr.length=0,rn.length=0,xr.push(v.COLOR_ATTACHMENT0+gi),tn.depthBuffer&&!1===tn.resolveDepthBuffer&&(xr.push(Ar),rn.push(Ar),v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,rn)),v.invalidateFramebuffer(v.READ_FRAMEBUFFER,xr))}if(r.bindFramebuffer(v.READ_FRAMEBUFFER,null),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),ui)for(let gi=0;gi<jt.length;gi++){r.bindFramebuffer(v.FRAMEBUFFER,Oi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+gi,v.RENDERBUFFER,Oi.__webglColorRenderbuffer[gi]);const ps=s.get(jt[gi]).__webglTexture;r.bindFramebuffer(v.FRAMEBUFFER,Oi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+gi,v.TEXTURE_2D,ps,0)}r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Oi.__webglMultisampledFramebuffer)}else tn.depthBuffer&&!1===tn.resolveDepthBuffer&&L&&v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,[tn.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Es,this.setupFrameBufferTexture=mi,this.useMultisampledRTT=ei}function hw(v,t){return{convert:function r(s,a=""){let u;const _=Ss.getTransfer(a);if(s===Tr)return v.UNSIGNED_BYTE;if(s===ie)return v.UNSIGNED_SHORT_4_4_4_4;if(s===q)return v.UNSIGNED_SHORT_5_5_5_1;if(s===Ge)return v.UNSIGNED_INT_5_9_9_9_REV;if(s===te)return v.BYTE;if(s===De)return v.SHORT;if(s===Ye)return v.UNSIGNED_SHORT;if(s===T)return v.INT;if(s===N)return v.UNSIGNED_INT;if(s===B)return v.FLOAT;if(s===O)return v.HALF_FLOAT;if(s===He)return v.ALPHA;if(s===gt)return v.RGB;if(s===Vt)return v.RGBA;if(s===cn)return v.LUMINANCE;if(s===Ve)return v.LUMINANCE_ALPHA;if(s===We)return v.DEPTH_COMPONENT;if(s===ft)return v.DEPTH_STENCIL;if(s===nt)return v.RED;if(s===Dt)return v.RED_INTEGER;if(s===un)return v.RG;if(s===Bn)return v.RG_INTEGER;if(s===Pr)return v.RGBA_INTEGER;if(s===Ui||s===ji||s===Us||s===bs)if(_===Li){if(u=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===Ui)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ji)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Us)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===bs)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=t.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===Ui)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ji)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Us)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===bs)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===wi||s===us||s===$s||s===ys){if(u=t.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===wi)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===us)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$s)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ys)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Vs||s===Ko||s===fo){if(u=t.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===Vs||s===Ko)return _===Li?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===fo)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===Vo||s===ea||s===ta||s===la||s===eo||s===ca||s===_o||s===ka||s===Wa||s===ke||s===ht||s===kt||s===Be||s===zt){if(u=t.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===Vo)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ea)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ta)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===la)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eo)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ca)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_o)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ka)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Wa)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ke)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ht)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===kt)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Be)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===zt)return _===Li?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===In||s===ts||s===Gs){if(u=t.get("EXT_texture_compression_bptc"),null===u)return null;if(s===In)return _===Li?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===ts)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Gs)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===Go||s===Ca||s===ba||s===ll){if(u=t.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===In)return u.COMPRESSED_RED_RGTC1_EXT;if(s===Ca)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ba)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ll)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===ce?v.UNSIGNED_INT_24_8:void 0!==v[s]?v[s]:null}}}class pw{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,r,s){if(null===this.texture){const a=new no;t.properties.get(a).__webglTexture=r.texture,(r.depthNear!==s.depthNear||r.depthFar!==s.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=a}}getMesh(t){if(null!==this.texture&&null===this.mesh){const r=t.cameras[0].viewport,s=new Sl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new ls(new rd(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class mw extends wn{constructor(t,r){super();const s=this;let a=null,u=1,_=null,C="local-floor",L=1,U=null,Q=null,ae=null,fe=null,ye=null,Me=null;const Ue=new pw,Pe=r.getContextAttributes();let Ie=null,tt=null;const it=[],rt=[],$t=new fr;let At=null;const Ft=new co;Ft.viewport=new Ds;const Wt=new co;Wt.viewport=new Ds;const Mt=[Ft,Wt],wt=new Eg;let gn=null,Kn=null;function Hn(_r){const $r=rt.indexOf(_r.inputSource);if(-1===$r)return;const mi=it[$r];void 0!==mi&&(mi.update(_r.inputSource,_r.frame,U||_),mi.dispatchEvent({type:_r.type,data:_r.inputSource}))}function Jn(){a.removeEventListener("select",Hn),a.removeEventListener("selectstart",Hn),a.removeEventListener("selectend",Hn),a.removeEventListener("squeeze",Hn),a.removeEventListener("squeezestart",Hn),a.removeEventListener("squeezeend",Hn),a.removeEventListener("end",Jn),a.removeEventListener("inputsourceschange",pr);for(let _r=0;_r<it.length;_r++){const $r=rt[_r];null!==$r&&(rt[_r]=null,it[_r].disconnect($r))}gn=null,Kn=null,Ue.reset(),t.setRenderTarget(Ie),ye=null,fe=null,ae=null,a=null,tt=null,cs.stop(),s.isPresenting=!1,t.setPixelRatio(At),t.setSize($t.width,$t.height,!1),s.dispatchEvent({type:"sessionend"})}function pr(_r){for(let $r=0;$r<_r.removed.length;$r++){const mi=_r.removed[$r],Wr=rt.indexOf(mi);Wr>=0&&(rt[Wr]=null,it[Wr].disconnect(mi))}for(let $r=0;$r<_r.added.length;$r++){const mi=_r.added[$r];let Wr=rt.indexOf(mi);if(-1===Wr){for(let Es=0;Es<it.length;Es++){if(Es>=rt.length){rt.push(mi),Wr=Es;break}if(null===rt[Es]){rt[Es]=mi,Wr=Es;break}}if(-1===Wr)break}const Ci=it[Wr];Ci&&Ci.connect(mi)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_r){let $r=it[_r];return void 0===$r&&($r=new qu,it[_r]=$r),$r.getTargetRaySpace()},this.getControllerGrip=function(_r){let $r=it[_r];return void 0===$r&&($r=new qu,it[_r]=$r),$r.getGripSpace()},this.getHand=function(_r){let $r=it[_r];return void 0===$r&&($r=new qu,it[_r]=$r),$r.getHandSpace()},this.setFramebufferScaleFactor=function(_r){u=_r,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_r){C=_r,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||_},this.setReferenceSpace=function(_r){U=_r},this.getBaseLayer=function(){return null!==fe?fe:ye},this.getBinding=function(){return ae},this.getFrame=function(){return Me},this.getSession=function(){return a},this.setSession=function(){var _r=(0,j.A)(function*($r){if(a=$r,null!==a){if(Ie=t.getRenderTarget(),a.addEventListener("select",Hn),a.addEventListener("selectstart",Hn),a.addEventListener("selectend",Hn),a.addEventListener("squeeze",Hn),a.addEventListener("squeezestart",Hn),a.addEventListener("squeezeend",Hn),a.addEventListener("end",Jn),a.addEventListener("inputsourceschange",pr),!0!==Pe.xrCompatible&&(yield r.makeXRCompatible()),At=t.getPixelRatio(),t.getSize($t),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Wr=null,Ci=null,Es=null;Pe.depth&&(Es=Pe.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,Wr=Pe.stencil?ft:We,Ci=Pe.stencil?ce:N);const Si={colorFormat:r.RGBA8,depthFormat:Es,scaleFactor:u};ae=new XRWebGLBinding(a,r),fe=ae.createProjectionLayer(Si),a.updateRenderState({layers:[fe]}),t.setPixelRatio(1),t.setSize(fe.textureWidth,fe.textureHeight,!1),tt=new Se(fe.textureWidth,fe.textureHeight,{format:Vt,type:Tr,depthTexture:new eg(fe.textureWidth,fe.textureHeight,Ci,void 0,void 0,void 0,void 0,void 0,void 0,Wr),stencilBuffer:Pe.stencil,colorSpace:t.outputColorSpace,samples:Pe.antialias?4:0,resolveDepthBuffer:!1===fe.ignoreDepthValues,resolveStencilBuffer:!1===fe.ignoreDepthValues})}else ye=new XRWebGLLayer(a,r,{antialias:Pe.antialias,alpha:!0,depth:Pe.depth,stencil:Pe.stencil,framebufferScaleFactor:u}),a.updateRenderState({baseLayer:ye}),t.setPixelRatio(1),t.setSize(ye.framebufferWidth,ye.framebufferHeight,!1),tt=new Se(ye.framebufferWidth,ye.framebufferHeight,{format:Vt,type:Tr,colorSpace:t.outputColorSpace,stencilBuffer:Pe.stencil,resolveDepthBuffer:!1===ye.ignoreDepthValues,resolveStencilBuffer:!1===ye.ignoreDepthValues});tt.isXRRenderTarget=!0,this.setFoveation(L),U=null,_=yield a.requestReferenceSpace(C),cs.setContext(a),cs.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function($r){return _r.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return Ue.getDepthTexture()};const Yn=new mt,Nr=new mt;function Vr(_r,$r){null===$r?_r.matrixWorld.copy(_r.matrix):_r.matrixWorld.multiplyMatrices($r.matrixWorld,_r.matrix),_r.matrixWorldInverse.copy(_r.matrixWorld).invert()}this.updateCamera=function(_r){if(null===a)return;let $r=_r.near,mi=_r.far;null!==Ue.texture&&(Ue.depthNear>0&&($r=Ue.depthNear),Ue.depthFar>0&&(mi=Ue.depthFar)),wt.near=Wt.near=Ft.near=$r,wt.far=Wt.far=Ft.far=mi,(gn!==wt.near||Kn!==wt.far)&&(a.updateRenderState({depthNear:wt.near,depthFar:wt.far}),gn=wt.near,Kn=wt.far),Ft.layers.mask=2|_r.layers.mask,Wt.layers.mask=4|_r.layers.mask,wt.layers.mask=Ft.layers.mask|Wt.layers.mask;const Wr=_r.parent,Ci=wt.cameras;Vr(wt,Wr);for(let Es=0;Es<Ci.length;Es++)Vr(Ci[Es],Wr);2===Ci.length?function tr(_r,$r,mi){Yn.setFromMatrixPosition($r.matrixWorld),Nr.setFromMatrixPosition(mi.matrixWorld);const Wr=Yn.distanceTo(Nr),Ci=$r.projectionMatrix.elements,Es=mi.projectionMatrix.elements,Si=Ci[14]/(Ci[10]-1),Xi=Ci[14]/(Ci[10]+1),ur=(Ci[9]+1)/Ci[5],xr=(Ci[9]-1)/Ci[5],rn=(Ci[8]-1)/Ci[0],pi=(Es[8]+1)/Es[0],Dr=Si*rn,ei=Si*pi,Fr=Wr/(-rn+pi),Ri=Fr*-rn;if($r.matrixWorld.decompose(_r.position,_r.quaternion,_r.scale),_r.translateX(Ri),_r.translateZ(Fr),_r.matrixWorld.compose(_r.position,_r.quaternion,_r.scale),_r.matrixWorldInverse.copy(_r.matrixWorld).invert(),-1===Ci[10])_r.projectionMatrix.copy($r.projectionMatrix),_r.projectionMatrixInverse.copy($r.projectionMatrixInverse);else{const Kr=Si+Fr,tn=Xi+Fr;_r.projectionMatrix.makePerspective(Dr-Ri,ei+(Wr-Ri),ur*Xi/tn*Kr,xr*Xi/tn*Kr,Kr,tn),_r.projectionMatrixInverse.copy(_r.projectionMatrix).invert()}}(wt,Ft,Wt):wt.projectionMatrix.copy(Ft.projectionMatrix),function Qr(_r,$r,mi){null===mi?_r.matrix.copy($r.matrixWorld):(_r.matrix.copy(mi.matrixWorld),_r.matrix.invert(),_r.matrix.multiply($r.matrixWorld)),_r.matrix.decompose(_r.position,_r.quaternion,_r.scale),_r.updateMatrixWorld(!0),_r.projectionMatrix.copy($r.projectionMatrix),_r.projectionMatrixInverse.copy($r.projectionMatrixInverse),_r.isPerspectiveCamera&&(_r.fov=2*Re*Math.atan(1/_r.projectionMatrix.elements[5]),_r.zoom=1)}(_r,wt,Wr)},this.getCamera=function(){return wt},this.getFoveation=function(){if(null!==fe||null!==ye)return L},this.setFoveation=function(_r){L=_r,null!==fe&&(fe.fixedFoveation=_r),null!==ye&&void 0!==ye.fixedFoveation&&(ye.fixedFoveation=_r)},this.hasDepthSensing=function(){return null!==Ue.texture},this.getDepthSensingMesh=function(){return Ue.getMesh(wt)};let vi=null;const cs=new Rg;cs.setAnimationLoop(function Yi(_r,$r){if(Q=$r.getViewerPose(U||_),Me=$r,null!==Q){const mi=Q.views;null!==ye&&(t.setRenderTargetFramebuffer(tt,ye.framebuffer),t.setRenderTarget(tt));let Wr=!1;mi.length!==wt.cameras.length&&(wt.cameras.length=0,Wr=!0);for(let Si=0;Si<mi.length;Si++){const Xi=mi[Si];let ur=null;if(null!==ye)ur=ye.getViewport(Xi);else{const rn=ae.getViewSubImage(fe,Xi);ur=rn.viewport,0===Si&&(t.setRenderTargetTextures(tt,rn.colorTexture,fe.ignoreDepthValues?void 0:rn.depthStencilTexture),t.setRenderTarget(tt))}let xr=Mt[Si];void 0===xr&&(xr=new co,xr.layers.enable(Si),xr.viewport=new Ds,Mt[Si]=xr),xr.matrix.fromArray(Xi.transform.matrix),xr.matrix.decompose(xr.position,xr.quaternion,xr.scale),xr.projectionMatrix.fromArray(Xi.projectionMatrix),xr.projectionMatrixInverse.copy(xr.projectionMatrix).invert(),xr.viewport.set(ur.x,ur.y,ur.width,ur.height),0===Si&&(wt.matrix.copy(xr.matrix),wt.matrix.decompose(wt.position,wt.quaternion,wt.scale)),!0===Wr&&wt.cameras.push(xr)}const Ci=a.enabledFeatures;if(Ci&&Ci.includes("depth-sensing")&&"gpu-optimized"==a.depthUsage&&ae){const Si=ae.getDepthInformation(mi[0]);Si&&Si.isValid&&Si.texture&&Ue.init(t,Si,a.renderState)}}for(let mi=0;mi<it.length;mi++){const Wr=rt[mi],Ci=it[mi];null!==Wr&&void 0!==Ci&&Ci.update(Wr,$r,U||_)}vi&&vi(_r,$r),$r.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:$r}),Me=null}),this.setAnimationLoop=function(_r){vi=_r},this.dispose=function(){}}}const gd=new Za,am=new Mi;function m_(v,t){function r(Pe,Ie){!0===Pe.matrixAutoUpdate&&Pe.updateMatrix(),Ie.value.copy(Pe.matrix)}function u(Pe,Ie){Pe.opacity.value=Ie.opacity,Ie.color&&Pe.diffuse.value.copy(Ie.color),Ie.emissive&&Pe.emissive.value.copy(Ie.emissive).multiplyScalar(Ie.emissiveIntensity),Ie.map&&(Pe.map.value=Ie.map,r(Ie.map,Pe.mapTransform)),Ie.alphaMap&&(Pe.alphaMap.value=Ie.alphaMap,r(Ie.alphaMap,Pe.alphaMapTransform)),Ie.bumpMap&&(Pe.bumpMap.value=Ie.bumpMap,r(Ie.bumpMap,Pe.bumpMapTransform),Pe.bumpScale.value=Ie.bumpScale,1===Ie.side&&(Pe.bumpScale.value*=-1)),Ie.normalMap&&(Pe.normalMap.value=Ie.normalMap,r(Ie.normalMap,Pe.normalMapTransform),Pe.normalScale.value.copy(Ie.normalScale),1===Ie.side&&Pe.normalScale.value.negate()),Ie.displacementMap&&(Pe.displacementMap.value=Ie.displacementMap,r(Ie.displacementMap,Pe.displacementMapTransform),Pe.displacementScale.value=Ie.displacementScale,Pe.displacementBias.value=Ie.displacementBias),Ie.emissiveMap&&(Pe.emissiveMap.value=Ie.emissiveMap,r(Ie.emissiveMap,Pe.emissiveMapTransform)),Ie.specularMap&&(Pe.specularMap.value=Ie.specularMap,r(Ie.specularMap,Pe.specularMapTransform)),Ie.alphaTest>0&&(Pe.alphaTest.value=Ie.alphaTest);const tt=t.get(Ie),it=tt.envMap,rt=tt.envMapRotation;it&&(Pe.envMap.value=it,gd.copy(rt),gd.x*=-1,gd.y*=-1,gd.z*=-1,it.isCubeTexture&&!1===it.isRenderTargetTexture&&(gd.y*=-1,gd.z*=-1),Pe.envMapRotation.value.setFromMatrix4(am.makeRotationFromEuler(gd)),Pe.flipEnvMap.value=it.isCubeTexture&&!1===it.isRenderTargetTexture?-1:1,Pe.reflectivity.value=Ie.reflectivity,Pe.ior.value=Ie.ior,Pe.refractionRatio.value=Ie.refractionRatio),Ie.lightMap&&(Pe.lightMap.value=Ie.lightMap,Pe.lightMapIntensity.value=Ie.lightMapIntensity,r(Ie.lightMap,Pe.lightMapTransform)),Ie.aoMap&&(Pe.aoMap.value=Ie.aoMap,Pe.aoMapIntensity.value=Ie.aoMapIntensity,r(Ie.aoMap,Pe.aoMapTransform))}return{refreshFogUniforms:function s(Pe,Ie){Ie.color.getRGB(Pe.fogColor.value,Yy(v)),Ie.isFog?(Pe.fogNear.value=Ie.near,Pe.fogFar.value=Ie.far):Ie.isFogExp2&&(Pe.fogDensity.value=Ie.density)},refreshMaterialUniforms:function a(Pe,Ie,tt,it,rt){Ie.isMeshBasicMaterial||Ie.isMeshLambertMaterial?u(Pe,Ie):Ie.isMeshToonMaterial?(u(Pe,Ie),function ae(Pe,Ie){Ie.gradientMap&&(Pe.gradientMap.value=Ie.gradientMap)}(Pe,Ie)):Ie.isMeshPhongMaterial?(u(Pe,Ie),function Q(Pe,Ie){Pe.specular.value.copy(Ie.specular),Pe.shininess.value=Math.max(Ie.shininess,1e-4)}(Pe,Ie)):Ie.isMeshStandardMaterial?(u(Pe,Ie),function fe(Pe,Ie){Pe.metalness.value=Ie.metalness,Ie.metalnessMap&&(Pe.metalnessMap.value=Ie.metalnessMap,r(Ie.metalnessMap,Pe.metalnessMapTransform)),Pe.roughness.value=Ie.roughness,Ie.roughnessMap&&(Pe.roughnessMap.value=Ie.roughnessMap,r(Ie.roughnessMap,Pe.roughnessMapTransform)),Ie.envMap&&(Pe.envMapIntensity.value=Ie.envMapIntensity)}(Pe,Ie),Ie.isMeshPhysicalMaterial&&function ye(Pe,Ie,tt){Pe.ior.value=Ie.ior,Ie.sheen>0&&(Pe.sheenColor.value.copy(Ie.sheenColor).multiplyScalar(Ie.sheen),Pe.sheenRoughness.value=Ie.sheenRoughness,Ie.sheenColorMap&&(Pe.sheenColorMap.value=Ie.sheenColorMap,r(Ie.sheenColorMap,Pe.sheenColorMapTransform)),Ie.sheenRoughnessMap&&(Pe.sheenRoughnessMap.value=Ie.sheenRoughnessMap,r(Ie.sheenRoughnessMap,Pe.sheenRoughnessMapTransform))),Ie.clearcoat>0&&(Pe.clearcoat.value=Ie.clearcoat,Pe.clearcoatRoughness.value=Ie.clearcoatRoughness,Ie.clearcoatMap&&(Pe.clearcoatMap.value=Ie.clearcoatMap,r(Ie.clearcoatMap,Pe.clearcoatMapTransform)),Ie.clearcoatRoughnessMap&&(Pe.clearcoatRoughnessMap.value=Ie.clearcoatRoughnessMap,r(Ie.clearcoatRoughnessMap,Pe.clearcoatRoughnessMapTransform)),Ie.clearcoatNormalMap&&(Pe.clearcoatNormalMap.value=Ie.clearcoatNormalMap,r(Ie.clearcoatNormalMap,Pe.clearcoatNormalMapTransform),Pe.clearcoatNormalScale.value.copy(Ie.clearcoatNormalScale),1===Ie.side&&Pe.clearcoatNormalScale.value.negate())),Ie.dispersion>0&&(Pe.dispersion.value=Ie.dispersion),Ie.iridescence>0&&(Pe.iridescence.value=Ie.iridescence,Pe.iridescenceIOR.value=Ie.iridescenceIOR,Pe.iridescenceThicknessMinimum.value=Ie.iridescenceThicknessRange[0],Pe.iridescenceThicknessMaximum.value=Ie.iridescenceThicknessRange[1],Ie.iridescenceMap&&(Pe.iridescenceMap.value=Ie.iridescenceMap,r(Ie.iridescenceMap,Pe.iridescenceMapTransform)),Ie.iridescenceThicknessMap&&(Pe.iridescenceThicknessMap.value=Ie.iridescenceThicknessMap,r(Ie.iridescenceThicknessMap,Pe.iridescenceThicknessMapTransform))),Ie.transmission>0&&(Pe.transmission.value=Ie.transmission,Pe.transmissionSamplerMap.value=tt.texture,Pe.transmissionSamplerSize.value.set(tt.width,tt.height),Ie.transmissionMap&&(Pe.transmissionMap.value=Ie.transmissionMap,r(Ie.transmissionMap,Pe.transmissionMapTransform)),Pe.thickness.value=Ie.thickness,Ie.thicknessMap&&(Pe.thicknessMap.value=Ie.thicknessMap,r(Ie.thicknessMap,Pe.thicknessMapTransform)),Pe.attenuationDistance.value=Ie.attenuationDistance,Pe.attenuationColor.value.copy(Ie.attenuationColor)),Ie.anisotropy>0&&(Pe.anisotropyVector.value.set(Ie.anisotropy*Math.cos(Ie.anisotropyRotation),Ie.anisotropy*Math.sin(Ie.anisotropyRotation)),Ie.anisotropyMap&&(Pe.anisotropyMap.value=Ie.anisotropyMap,r(Ie.anisotropyMap,Pe.anisotropyMapTransform))),Pe.specularIntensity.value=Ie.specularIntensity,Pe.specularColor.value.copy(Ie.specularColor),Ie.specularColorMap&&(Pe.specularColorMap.value=Ie.specularColorMap,r(Ie.specularColorMap,Pe.specularColorMapTransform)),Ie.specularIntensityMap&&(Pe.specularIntensityMap.value=Ie.specularIntensityMap,r(Ie.specularIntensityMap,Pe.specularIntensityMapTransform))}(Pe,Ie,rt)):Ie.isMeshMatcapMaterial?(u(Pe,Ie),function Me(Pe,Ie){Ie.matcap&&(Pe.matcap.value=Ie.matcap)}(Pe,Ie)):Ie.isMeshDepthMaterial?u(Pe,Ie):Ie.isMeshDistanceMaterial?(u(Pe,Ie),function Ue(Pe,Ie){const tt=t.get(Ie).light;Pe.referencePosition.value.setFromMatrixPosition(tt.matrixWorld),Pe.nearDistance.value=tt.shadow.camera.near,Pe.farDistance.value=tt.shadow.camera.far}(Pe,Ie)):Ie.isMeshNormalMaterial?u(Pe,Ie):Ie.isLineBasicMaterial?(function _(Pe,Ie){Pe.diffuse.value.copy(Ie.color),Pe.opacity.value=Ie.opacity,Ie.map&&(Pe.map.value=Ie.map,r(Ie.map,Pe.mapTransform))}(Pe,Ie),Ie.isLineDashedMaterial&&function C(Pe,Ie){Pe.dashSize.value=Ie.dashSize,Pe.totalSize.value=Ie.dashSize+Ie.gapSize,Pe.scale.value=Ie.scale}(Pe,Ie)):Ie.isPointsMaterial?function L(Pe,Ie,tt,it){Pe.diffuse.value.copy(Ie.color),Pe.opacity.value=Ie.opacity,Pe.size.value=Ie.size*tt,Pe.scale.value=.5*it,Ie.map&&(Pe.map.value=Ie.map,r(Ie.map,Pe.uvTransform)),Ie.alphaMap&&(Pe.alphaMap.value=Ie.alphaMap,r(Ie.alphaMap,Pe.alphaMapTransform)),Ie.alphaTest>0&&(Pe.alphaTest.value=Ie.alphaTest)}(Pe,Ie,tt,it):Ie.isSpriteMaterial?function U(Pe,Ie){Pe.diffuse.value.copy(Ie.color),Pe.opacity.value=Ie.opacity,Pe.rotation.value=Ie.rotation,Ie.map&&(Pe.map.value=Ie.map,r(Ie.map,Pe.mapTransform)),Ie.alphaMap&&(Pe.alphaMap.value=Ie.alphaMap,r(Ie.alphaMap,Pe.alphaMapTransform)),Ie.alphaTest>0&&(Pe.alphaTest.value=Ie.alphaTest)}(Pe,Ie):Ie.isShadowMaterial?(Pe.color.value.copy(Ie.color),Pe.opacity.value=Ie.opacity):Ie.isShaderMaterial&&(Ie.uniformsNeedUpdate=!1)}}}function g_(v,t,r,s){let a={},u={},_=[];const C=v.getParameter(v.MAX_UNIFORM_BUFFER_BINDINGS);function ye(tt,it,rt,$t){const At=tt.value,Ft=it+"_"+rt;if(void 0===$t[Ft])return $t[Ft]="number"==typeof At||"boolean"==typeof At?At:At.clone(),!0;{const Wt=$t[Ft];if("number"==typeof At||"boolean"==typeof At){if(Wt!==At)return $t[Ft]=At,!0}else if(!1===Wt.equals(At))return Wt.copy(At),!0}return!1}function Ue(tt){const it={boundary:0,storage:0};return"number"==typeof tt||"boolean"==typeof tt?(it.boundary=4,it.storage=4):tt.isVector2?(it.boundary=8,it.storage=8):tt.isVector3||tt.isColor?(it.boundary=16,it.storage=12):tt.isVector4?(it.boundary=16,it.storage=16):tt.isMatrix3?(it.boundary=48,it.storage=48):tt.isMatrix4?(it.boundary=64,it.storage=64):tt.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",tt),it}function Pe(tt){const it=tt.target;it.removeEventListener("dispose",Pe);const rt=_.indexOf(it.__bindingPointIndex);_.splice(rt,1),v.deleteBuffer(a[it.id]),delete a[it.id],delete u[it.id]}return{bind:function L(tt,it){s.uniformBlockBinding(tt,it.program)},update:function U(tt,it){let rt=a[tt.id];void 0===rt&&(function Me(tt){const it=tt.uniforms;let rt=0;for(let Ft=0,Wt=it.length;Ft<Wt;Ft++){const Mt=Array.isArray(it[Ft])?it[Ft]:[it[Ft]];for(let wt=0,gn=Mt.length;wt<gn;wt++){const Kn=Mt[wt],Hn=Array.isArray(Kn.value)?Kn.value:[Kn.value];for(let Jn=0,pr=Hn.length;Jn<pr;Jn++){const Nr=Ue(Hn[Jn]),tr=rt%16,Vr=tr%Nr.boundary,Qr=tr+Vr;rt+=Vr,0!==Qr&&16-Qr<Nr.storage&&(rt+=16-Qr),Kn.__data=new Float32Array(Nr.storage/Float32Array.BYTES_PER_ELEMENT),Kn.__offset=rt,rt+=Nr.storage}}}const At=rt%16;At>0&&(rt+=16-At),tt.__size=rt,tt.__cache={}}(tt),rt=function Q(tt){const it=function ae(){for(let tt=0;tt<C;tt++)if(-1===_.indexOf(tt))return _.push(tt),tt;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();tt.__bindingPointIndex=it;const rt=v.createBuffer(),$t=tt.__size,At=tt.usage;return v.bindBuffer(v.UNIFORM_BUFFER,rt),v.bufferData(v.UNIFORM_BUFFER,$t,At),v.bindBuffer(v.UNIFORM_BUFFER,null),v.bindBufferBase(v.UNIFORM_BUFFER,it,rt),rt}(tt),a[tt.id]=rt,tt.addEventListener("dispose",Pe)),s.updateUBOMapping(tt,it.program);const At=t.render.frame;u[tt.id]!==At&&(function fe(tt){const rt=tt.uniforms,$t=tt.__cache;v.bindBuffer(v.UNIFORM_BUFFER,a[tt.id]);for(let At=0,Ft=rt.length;At<Ft;At++){const Wt=Array.isArray(rt[At])?rt[At]:[rt[At]];for(let Mt=0,wt=Wt.length;Mt<wt;Mt++){const gn=Wt[Mt];if(!0===ye(gn,At,Mt,$t)){const Kn=gn.__offset,Hn=Array.isArray(gn.value)?gn.value:[gn.value];let Jn=0;for(let pr=0;pr<Hn.length;pr++){const Yn=Hn[pr],Nr=Ue(Yn);"number"==typeof Yn||"boolean"==typeof Yn?(gn.__data[0]=Yn,v.bufferSubData(v.UNIFORM_BUFFER,Kn+Jn,gn.__data)):Yn.isMatrix3?(gn.__data[0]=Yn.elements[0],gn.__data[1]=Yn.elements[1],gn.__data[2]=Yn.elements[2],gn.__data[3]=0,gn.__data[4]=Yn.elements[3],gn.__data[5]=Yn.elements[4],gn.__data[6]=Yn.elements[5],gn.__data[7]=0,gn.__data[8]=Yn.elements[6],gn.__data[9]=Yn.elements[7],gn.__data[10]=Yn.elements[8],gn.__data[11]=0):(Yn.toArray(gn.__data,Jn),Jn+=Nr.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(v.UNIFORM_BUFFER,Kn,gn.__data)}}}v.bindBuffer(v.UNIFORM_BUFFER,null)}(tt),u[tt.id]=At)},dispose:function Ie(){for(const tt in a)v.deleteBuffer(a[tt]);_=[],a={},u={}}}}class y_{constructor(t={}){const{canvas:r=bd(),context:s=null,depth:a=!0,stencil:u=!1,alpha:_=!1,antialias:C=!1,premultipliedAlpha:L=!0,preserveDrawingBuffer:U=!1,powerPreference:Q="default",failIfMajorPerformanceCaveat:ae=!1,reverseDepthBuffer:fe=!1}=t;let ye;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ye=s.getContextAttributes().alpha}else ye=_;const Me=new Uint32Array(4),Ue=new Int32Array(4);let Pe=null,Ie=null;const tt=[],it=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pi,this.toneMapping=nr,this.toneMappingExposure=1;const rt=this;let $t=!1,At=0,Ft=0,Wt=null,Mt=-1,wt=null;const gn=new Ds,Kn=new Ds;let Hn=null;const Jn=new Mr(0);let pr=0,Yn=r.width,Nr=r.height,tr=1,Vr=null,Qr=null;const vi=new Ds(0,0,Yn,Nr),Yi=new Ds(0,0,Yn,Nr);let cs=!1;const _r=new ep;let $r=!1,mi=!1;this.transmissionResolutionScale=1;const Wr=new Mi,Ci=new Mi,Es=new mt,Si=new Ds,Xi={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ur=!1;function xr(){return null===Wt?tr:1}let Dr,ei,Fr,Ri,Kr,tn,jt,er,Cr,Ur,Ar,Oi,ui,gi,ps,Xr,Di,Ki,Qi,Ii,Fs,ms,So,Vn,rn=s;function pi(Xt,Gn){return r.getContext(Xt,Gn)}try{const Xt={alpha:!0,depth:a,stencil:u,antialias:C,premultipliedAlpha:L,preserveDrawingBuffer:U,powerPreference:Q,failIfMajorPerformanceCaveat:ae};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${d}`),r.addEventListener("webglcontextlost",Lr,!1),r.addEventListener("webglcontextrestored",bi,!1),r.addEventListener("webglcontextcreationerror",yi,!1),null===rn){const Gn="webgl2";if(rn=pi(Gn,Xt),null===rn)throw pi(Gn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Xt){throw console.error("THREE.WebGLRenderer: "+Xt.message),Xt}function di(){Dr=new F0(rn),Dr.init(),ms=new hw(rn,Dr),ei=new O0(rn,Dr,t,ms),Fr=new p_(rn,Dr),ei.reverseDepthBuffer&&fe&&Fr.buffers.depth.setReversed(!0),Ri=new pd(rn),Kr=new JE,tn=new dw(rn,Dr,Fr,Kr,ei,ms,Ri),jt=new k0(rt),er=new j0(rt),Cr=new Pg(rn),So=new Xp(rn,Cr),Ur=new Rx(rn,Cr,Ri,So),Ar=new ff(rn,Ur,Cr,Ri),Qi=new Zg(rn,ei,tn),Xr=new L0(Kr),Oi=new lw(rt,jt,er,Dr,ei,So,Xr),ui=new m_(rt,Kr),gi=new uy,ps=new uw(Dr),Ki=new WE(rt,jt,er,Fr,Ar,ye,L),Di=new h_(rt,Ar,ei),Vn=new g_(rn,Ri,ei,Fr),Ii=new Ax(rn,Dr,Ri),Fs=new Kp(rn,Dr,Ri),Ri.programs=Oi.programs,rt.capabilities=ei,rt.extensions=Dr,rt.properties=Kr,rt.renderLists=gi,rt.shadowMap=Di,rt.state=Fr,rt.info=Ri}di();const br=new mw(rt,rn);function Lr(Xt){Xt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$t=!0}function bi(){console.log("THREE.WebGLRenderer: Context Restored."),$t=!1;const Xt=Ri.autoReset,Gn=Di.enabled,rr=Di.autoUpdate,or=Di.needsUpdate,Wn=Di.type;di(),Ri.autoReset=Xt,Di.enabled=Gn,Di.autoUpdate=rr,Di.needsUpdate=or,Di.type=Wn}function yi(Xt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Xt.statusMessage)}function gs(Xt){const Gn=Xt.target;Gn.removeEventListener("dispose",gs),function qo(Xt){(function Pa(Xt){const Gn=Kr.get(Xt).programs;void 0!==Gn&&(Gn.forEach(function(rr){Oi.releaseProgram(rr)}),Xt.isShaderMaterial&&Oi.releaseShaderCache(Xt))})(Xt),Kr.remove(Xt)}(Gn)}function qs(Xt,Gn,rr){!0===Xt.transparent&&2===Xt.side&&!1===Xt.forceSinglePass?(Xt.side=1,Xt.needsUpdate=!0,Rf(Xt,Gn,rr),Xt.side=0,Xt.needsUpdate=!0,Rf(Xt,Gn,rr),Xt.side=2):Rf(Xt,Gn,rr)}this.xr=br,this.getContext=function(){return rn},this.getContextAttributes=function(){return rn.getContextAttributes()},this.forceContextLoss=function(){const Xt=Dr.get("WEBGL_lose_context");Xt&&Xt.loseContext()},this.forceContextRestore=function(){const Xt=Dr.get("WEBGL_lose_context");Xt&&Xt.restoreContext()},this.getPixelRatio=function(){return tr},this.setPixelRatio=function(Xt){void 0!==Xt&&(tr=Xt,this.setSize(Yn,Nr,!1))},this.getSize=function(Xt){return Xt.set(Yn,Nr)},this.setSize=function(Xt,Gn,rr=!0){br.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Yn=Xt,Nr=Gn,r.width=Math.floor(Xt*tr),r.height=Math.floor(Gn*tr),!0===rr&&(r.style.width=Xt+"px",r.style.height=Gn+"px"),this.setViewport(0,0,Xt,Gn))},this.getDrawingBufferSize=function(Xt){return Xt.set(Yn*tr,Nr*tr).floor()},this.setDrawingBufferSize=function(Xt,Gn,rr){Yn=Xt,Nr=Gn,tr=rr,r.width=Math.floor(Xt*rr),r.height=Math.floor(Gn*rr),this.setViewport(0,0,Xt,Gn)},this.getCurrentViewport=function(Xt){return Xt.copy(gn)},this.getViewport=function(Xt){return Xt.copy(vi)},this.setViewport=function(Xt,Gn,rr,or){Xt.isVector4?vi.set(Xt.x,Xt.y,Xt.z,Xt.w):vi.set(Xt,Gn,rr,or),Fr.viewport(gn.copy(vi).multiplyScalar(tr).round())},this.getScissor=function(Xt){return Xt.copy(Yi)},this.setScissor=function(Xt,Gn,rr,or){Xt.isVector4?Yi.set(Xt.x,Xt.y,Xt.z,Xt.w):Yi.set(Xt,Gn,rr,or),Fr.scissor(Kn.copy(Yi).multiplyScalar(tr).round())},this.getScissorTest=function(){return cs},this.setScissorTest=function(Xt){Fr.setScissorTest(cs=Xt)},this.setOpaqueSort=function(Xt){Vr=Xt},this.setTransparentSort=function(Xt){Qr=Xt},this.getClearColor=function(Xt){return Xt.copy(Ki.getClearColor())},this.setClearColor=function(){Ki.setClearColor(...arguments)},this.getClearAlpha=function(){return Ki.getClearAlpha()},this.setClearAlpha=function(){Ki.setClearAlpha(...arguments)},this.clear=function(Xt=!0,Gn=!0,rr=!0){let or=0;if(Xt){let Wn=!1;if(null!==Wt){const Hr=Wt.texture.format;Wn=Hr===Pr||Hr===Bn||Hr===Dt}if(Wn){const Hr=Wt.texture.type,si=Hr===Tr||Hr===N||Hr===Ye||Hr===ce||Hr===ie||Hr===q,Ai=Ki.getClearColor(),xi=Ki.getClearAlpha(),es=Ai.r,rs=Ai.g,Bi=Ai.b;si?(Me[0]=es,Me[1]=rs,Me[2]=Bi,Me[3]=xi,rn.clearBufferuiv(rn.COLOR,0,Me)):(Ue[0]=es,Ue[1]=rs,Ue[2]=Bi,Ue[3]=xi,rn.clearBufferiv(rn.COLOR,0,Ue))}else or|=rn.COLOR_BUFFER_BIT}Gn&&(or|=rn.DEPTH_BUFFER_BIT),rr&&(or|=rn.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),rn.clear(or)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Lr,!1),r.removeEventListener("webglcontextrestored",bi,!1),r.removeEventListener("webglcontextcreationerror",yi,!1),Ki.dispose(),gi.dispose(),ps.dispose(),Kr.dispose(),jt.dispose(),er.dispose(),Ar.dispose(),So.dispose(),Vn.dispose(),Oi.dispose(),br.dispose(),br.removeEventListener("sessionstart",If),br.removeEventListener("sessionend",H_),vd.stop()},this.renderBufferDirect=function(Xt,Gn,rr,or,Wn,Hr){null===Gn&&(Gn=Xi);const si=Wn.isMesh&&Wn.matrixWorld.determinant()<0,Ai=function aM(Xt,Gn,rr,or,Wn){!0!==Gn.isScene&&(Gn=Xi),tn.resetTextureUnits();const Hr=Gn.fog,Ai=null===Wt?rt.outputColorSpace:!0===Wt.isXRRenderTarget?Wt.texture.colorSpace:Vi,xi=(or.isMeshStandardMaterial?er:jt).get(or.envMap||(or.isMeshStandardMaterial?Gn.environment:null)),es=!0===or.vertexColors&&!!rr.attributes.color&&4===rr.attributes.color.itemSize,rs=!!rr.attributes.tangent&&(!!or.normalMap||or.anisotropy>0),Bi=!!rr.morphAttributes.position,ks=!!rr.morphAttributes.normal,Ms=!!rr.morphAttributes.color;let yo=nr;or.toneMapped&&(null===Wt||!0===Wt.isXRRenderTarget)&&(yo=rt.toneMapping);const os=rr.morphAttributes.position||rr.morphAttributes.normal||rr.morphAttributes.color,Ts=void 0!==os?os.length:0,Fi=Kr.get(or),ho=Ie.state.lights;!0!==$r||!0!==mi&&Xt===wt||Xr.setState(or,Xt,Xt===wt&&or.id===Mt);let Ns=!1;or.version===Fi.__version?(Fi.needsLights&&Fi.lightsStateVersion!==ho.state.version||Fi.outputColorSpace!==Ai||Wn.isBatchedMesh&&!1===Fi.batching||!Wn.isBatchedMesh&&!0===Fi.batching||Wn.isBatchedMesh&&!0===Fi.batchingColor&&null===Wn.colorTexture||Wn.isBatchedMesh&&!1===Fi.batchingColor&&null!==Wn.colorTexture||Wn.isInstancedMesh&&!1===Fi.instancing||!Wn.isInstancedMesh&&!0===Fi.instancing||Wn.isSkinnedMesh&&!1===Fi.skinning||!Wn.isSkinnedMesh&&!0===Fi.skinning||Wn.isInstancedMesh&&!0===Fi.instancingColor&&null===Wn.instanceColor||Wn.isInstancedMesh&&!1===Fi.instancingColor&&null!==Wn.instanceColor||Wn.isInstancedMesh&&!0===Fi.instancingMorph&&null===Wn.morphTexture||Wn.isInstancedMesh&&!1===Fi.instancingMorph&&null!==Wn.morphTexture||Fi.envMap!==xi||!0===or.fog&&Fi.fog!==Hr||void 0!==Fi.numClippingPlanes&&(Fi.numClippingPlanes!==Xr.numPlanes||Fi.numIntersection!==Xr.numIntersection)||Fi.vertexAlphas!==es||Fi.vertexTangents!==rs||Fi.morphTargets!==Bi||Fi.morphNormals!==ks||Fi.morphColors!==Ms||Fi.toneMapping!==yo||Fi.morphTargetsCount!==Ts)&&(Ns=!0):(Ns=!0,Fi.__version=or.version);let hc=Fi.currentProgram;!0===Ns&&(hc=Rf(or,Gn,Wn));let kc=!1,sl=!1,ch=!1;const Do=hc.getUniforms(),Xl=Fi.uniforms;if(Fr.useProgram(hc.program)&&(kc=!0,sl=!0,ch=!0),or.id!==Mt&&(Mt=or.id,sl=!0),kc||wt!==Xt){Fr.buffers.depth.getReversed()?(Wr.copy(Xt.projectionMatrix),function mc(v){const t=v.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(Wr),function xd(v){const t=v.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(Wr),Do.setValue(rn,"projectionMatrix",Wr)):Do.setValue(rn,"projectionMatrix",Xt.projectionMatrix),Do.setValue(rn,"viewMatrix",Xt.matrixWorldInverse);const ol=Do.map.cameraPosition;void 0!==ol&&ol.setValue(rn,Es.setFromMatrixPosition(Xt.matrixWorld)),ei.logarithmicDepthBuffer&&Do.setValue(rn,"logDepthBufFC",2/(Math.log(Xt.far+1)/Math.LN2)),(or.isMeshPhongMaterial||or.isMeshToonMaterial||or.isMeshLambertMaterial||or.isMeshBasicMaterial||or.isMeshStandardMaterial||or.isShaderMaterial)&&Do.setValue(rn,"isOrthographic",!0===Xt.isOrthographicCamera),wt!==Xt&&(wt=Xt,sl=!0,ch=!0)}if(Wn.isSkinnedMesh){Do.setOptional(rn,Wn,"bindMatrix"),Do.setOptional(rn,Wn,"bindMatrixInverse");const js=Wn.skeleton;js&&(null===js.boneTexture&&js.computeBoneTexture(),Do.setValue(rn,"boneTexture",js.boneTexture,tn))}Wn.isBatchedMesh&&(Do.setOptional(rn,Wn,"batchingTexture"),Do.setValue(rn,"batchingTexture",Wn._matricesTexture,tn),Do.setOptional(rn,Wn,"batchingIdTexture"),Do.setValue(rn,"batchingIdTexture",Wn._indirectTexture,tn),Do.setOptional(rn,Wn,"batchingColorTexture"),null!==Wn._colorsTexture&&Do.setValue(rn,"batchingColorTexture",Wn._colorsTexture,tn));const ql=rr.morphAttributes;if((void 0!==ql.position||void 0!==ql.normal||void 0!==ql.color)&&Qi.update(Wn,rr,hc),(sl||Fi.receiveShadow!==Wn.receiveShadow)&&(Fi.receiveShadow=Wn.receiveShadow,Do.setValue(rn,"receiveShadow",Wn.receiveShadow)),or.isMeshGouraudMaterial&&null!==or.envMap&&(Xl.envMap.value=xi,Xl.flipEnvMap.value=xi.isCubeTexture&&!1===xi.isRenderTargetTexture?-1:1),or.isMeshStandardMaterial&&null===or.envMap&&null!==Gn.environment&&(Xl.envMapIntensity.value=Gn.environmentIntensity),sl&&(Do.setValue(rn,"toneMappingExposure",rt.toneMappingExposure),Fi.needsLights&&function Y_(Xt,Gn){Xt.ambientLightColor.needsUpdate=Gn,Xt.lightProbe.needsUpdate=Gn,Xt.directionalLights.needsUpdate=Gn,Xt.directionalLightShadows.needsUpdate=Gn,Xt.pointLights.needsUpdate=Gn,Xt.pointLightShadows.needsUpdate=Gn,Xt.spotLights.needsUpdate=Gn,Xt.spotLightShadows.needsUpdate=Gn,Xt.rectAreaLights.needsUpdate=Gn,Xt.hemisphereLights.needsUpdate=Gn}(Xl,ch),Hr&&!0===or.fog&&ui.refreshFogUniforms(Xl,Hr),ui.refreshMaterialUniforms(Xl,or,tr,Nr,Ie.state.transmissionRenderTarget[Xt.id]),Lu.upload(rn,Ty(Fi),Xl,tn)),or.isShaderMaterial&&!0===or.uniformsNeedUpdate&&(Lu.upload(rn,Ty(Fi),Xl,tn),or.uniformsNeedUpdate=!1),or.isSpriteMaterial&&Do.setValue(rn,"center",Wn.center),Do.setValue(rn,"modelViewMatrix",Wn.modelViewMatrix),Do.setValue(rn,"normalMatrix",Wn.normalMatrix),Do.setValue(rn,"modelMatrix",Wn.matrixWorld),or.isShaderMaterial||or.isRawShaderMaterial){const js=or.uniformsGroups;for(let ol=0,Cy=js.length;ol<Cy;ol++){const vo=js[ol];Vn.update(vo,hc),Vn.bind(vo,hc)}}return hc}(Xt,Gn,rr,or,Wn);Fr.setMaterial(or,si);let xi=rr.index,es=1;if(!0===or.wireframe){if(xi=Ur.getWireframeAttribute(rr),void 0===xi)return;es=2}const rs=rr.drawRange,Bi=rr.attributes.position;let ks=rs.start*es,Ms=(rs.start+rs.count)*es;null!==Hr&&(ks=Math.max(ks,Hr.start*es),Ms=Math.min(Ms,(Hr.start+Hr.count)*es)),null!==xi?(ks=Math.max(ks,0),Ms=Math.min(Ms,xi.count)):null!=Bi&&(ks=Math.max(ks,0),Ms=Math.min(Ms,Bi.count));const yo=Ms-ks;if(yo<0||yo===1/0)return;So.setup(Wn,or,Ai,rr,xi);let os,Ts=Ii;if(null!==xi&&(os=Cr.get(xi),Ts=Fs,Ts.setIndex(os)),Wn.isMesh)!0===or.wireframe?(Fr.setLineWidth(or.wireframeLinewidth*xr()),Ts.setMode(rn.LINES)):Ts.setMode(rn.TRIANGLES);else if(Wn.isLine){let Fi=or.linewidth;void 0===Fi&&(Fi=1),Fr.setLineWidth(Fi*xr()),Ts.setMode(Wn.isLineSegments?rn.LINES:Wn.isLineLoop?rn.LINE_LOOP:rn.LINE_STRIP)}else Wn.isPoints?Ts.setMode(rn.POINTS):Wn.isSprite&&Ts.setMode(rn.TRIANGLES);if(Wn.isBatchedMesh)if(null!==Wn._multiDrawInstances)Fl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ts.renderMultiDrawInstances(Wn._multiDrawStarts,Wn._multiDrawCounts,Wn._multiDrawCount,Wn._multiDrawInstances);else if(Dr.get("WEBGL_multi_draw"))Ts.renderMultiDraw(Wn._multiDrawStarts,Wn._multiDrawCounts,Wn._multiDrawCount);else{const Fi=Wn._multiDrawStarts,ho=Wn._multiDrawCounts,Ns=Wn._multiDrawCount,hc=xi?Cr.get(xi).bytesPerElement:1,kc=Kr.get(or).currentProgram.getUniforms();for(let sl=0;sl<Ns;sl++)kc.setValue(rn,"_gl_DrawID",sl),Ts.render(Fi[sl]/hc,ho[sl])}else if(Wn.isInstancedMesh)Ts.renderInstances(ks,yo,Wn.count);else if(rr.isInstancedBufferGeometry){const ho=Math.min(rr.instanceCount,void 0!==rr._maxInstanceCount?rr._maxInstanceCount:1/0);Ts.renderInstances(ks,yo,ho)}else Ts.render(ks,yo)},this.compile=function(Xt,Gn,rr=null){null===rr&&(rr=Xt),Ie=ps.get(rr),Ie.init(Gn),it.push(Ie),rr.traverseVisible(function(Wn){Wn.isLight&&Wn.layers.test(Gn.layers)&&(Ie.pushLight(Wn),Wn.castShadow&&Ie.pushShadow(Wn))}),Xt!==rr&&Xt.traverseVisible(function(Wn){Wn.isLight&&Wn.layers.test(Gn.layers)&&(Ie.pushLight(Wn),Wn.castShadow&&Ie.pushShadow(Wn))}),Ie.setupLights();const or=new Set;return Xt.traverse(function(Wn){if(!(Wn.isMesh||Wn.isPoints||Wn.isLine||Wn.isSprite))return;const Hr=Wn.material;if(Hr)if(Array.isArray(Hr))for(let si=0;si<Hr.length;si++){const Ai=Hr[si];qs(Ai,rr,Wn),or.add(Ai)}else qs(Hr,rr,Wn),or.add(Hr)}),Ie=it.pop(),or},this.compileAsync=function(Xt,Gn,rr=null){const or=this.compile(Xt,Gn,rr);return new Promise(Wn=>{function Hr(){or.forEach(function(si){Kr.get(si).currentProgram.isReady()&&or.delete(si)}),0!==or.size?setTimeout(Hr,10):Wn(Xt)}null!==Dr.get("KHR_parallel_shader_compile")?Hr():setTimeout(Hr,10)})};let dc=null;function If(){vd.stop()}function H_(){vd.start()}const vd=new Rg;function My(Xt,Gn,rr,or){if(!1===Xt.visible)return;if(Xt.layers.test(Gn.layers))if(Xt.isGroup)rr=Xt.renderOrder;else if(Xt.isLOD)!0===Xt.autoUpdate&&Xt.update(Gn);else if(Xt.isLight)Ie.pushLight(Xt),Xt.castShadow&&Ie.pushShadow(Xt);else if(Xt.isSprite){if(!Xt.frustumCulled||_r.intersectsSprite(Xt)){or&&Si.setFromMatrixPosition(Xt.matrixWorld).applyMatrix4(Ci);const si=Ar.update(Xt),Ai=Xt.material;Ai.visible&&Pe.push(Xt,si,Ai,rr,Si.z,null)}}else if((Xt.isMesh||Xt.isLine||Xt.isPoints)&&(!Xt.frustumCulled||_r.intersectsObject(Xt))){const si=Ar.update(Xt),Ai=Xt.material;if(or&&(void 0!==Xt.boundingSphere?(null===Xt.boundingSphere&&Xt.computeBoundingSphere(),Si.copy(Xt.boundingSphere.center)):(null===si.boundingSphere&&si.computeBoundingSphere(),Si.copy(si.boundingSphere.center)),Si.applyMatrix4(Xt.matrixWorld).applyMatrix4(Ci)),Array.isArray(Ai)){const xi=si.groups;for(let es=0,rs=xi.length;es<rs;es++){const Bi=xi[es],ks=Ai[Bi.materialIndex];ks&&ks.visible&&Pe.push(Xt,si,ks,rr,Si.z,Bi)}}else Ai.visible&&Pe.push(Xt,si,Ai,rr,Si.z,null)}const Hr=Xt.children;for(let si=0,Ai=Hr.length;si<Ai;si++)My(Hr[si],Gn,rr,or)}function W_(Xt,Gn,rr,or){const Wn=Xt.opaque,Hr=Xt.transmissive,si=Xt.transparent;Ie.setupLightsView(rr),!0===$r&&Xr.setGlobalState(rt.clippingPlanes,rr),or&&Fr.viewport(gn.copy(or)),Wn.length>0&&ym(Wn,Gn,rr),Hr.length>0&&ym(Hr,Gn,rr),si.length>0&&ym(si,Gn,rr),Fr.buffers.depth.setTest(!0),Fr.buffers.depth.setMask(!0),Fr.buffers.color.setMask(!0),Fr.setPolygonOffset(!1)}function X_(Xt,Gn,rr,or){if(null!==(!0===rr.isScene?rr.overrideMaterial:null))return;void 0===Ie.state.transmissionRenderTarget[or.id]&&(Ie.state.transmissionRenderTarget[or.id]=new Se(1,1,{generateMipmaps:!0,type:Dr.has("EXT_color_buffer_half_float")||Dr.has("EXT_color_buffer_float")?O:Tr,minFilter:sr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ss.workingColorSpace}));const Hr=Ie.state.transmissionRenderTarget[or.id],si=or.viewport||gn;Hr.setSize(si.z*rt.transmissionResolutionScale,si.w*rt.transmissionResolutionScale);const Ai=rt.getRenderTarget();rt.setRenderTarget(Hr),rt.getClearColor(Jn),pr=rt.getClearAlpha(),pr<1&&rt.setClearColor(16777215,.5),rt.clear(),ur&&Ki.render(rr);const xi=rt.toneMapping;rt.toneMapping=nr;const es=or.viewport;if(void 0!==or.viewport&&(or.viewport=void 0),Ie.setupLightsView(or),!0===$r&&Xr.setGlobalState(rt.clippingPlanes,or),ym(Xt,rr,or),tn.updateMultisampleRenderTarget(Hr),tn.updateRenderTargetMipmap(Hr),!1===Dr.has("WEBGL_multisampled_render_to_texture")){let rs=!1;for(let Bi=0,ks=Gn.length;Bi<ks;Bi++){const Ms=Gn[Bi],yo=Ms.object,os=Ms.geometry,Ts=Ms.material,Fi=Ms.group;if(2===Ts.side&&yo.layers.test(or.layers)){const ho=Ts.side;Ts.side=1,Ts.needsUpdate=!0,q_(yo,rr,or,os,Ts,Fi),Ts.side=ho,Ts.needsUpdate=!0,rs=!0}}!0===rs&&(tn.updateMultisampleRenderTarget(Hr),tn.updateRenderTargetMipmap(Hr))}rt.setRenderTarget(Ai),rt.setClearColor(Jn,pr),void 0!==es&&(or.viewport=es),rt.toneMapping=xi}function ym(Xt,Gn,rr){const or=!0===Gn.isScene?Gn.overrideMaterial:null;for(let Wn=0,Hr=Xt.length;Wn<Hr;Wn++){const si=Xt[Wn],Ai=si.object,xi=si.geometry,es=null===or?si.material:or,rs=si.group;Ai.layers.test(rr.layers)&&q_(Ai,Gn,rr,xi,es,rs)}}function q_(Xt,Gn,rr,or,Wn,Hr){Xt.onBeforeRender(rt,Gn,rr,or,Wn,Hr),Xt.modelViewMatrix.multiplyMatrices(rr.matrixWorldInverse,Xt.matrixWorld),Xt.normalMatrix.getNormalMatrix(Xt.modelViewMatrix),Wn.onBeforeRender(rt,Gn,rr,or,Xt,Hr),!0===Wn.transparent&&2===Wn.side&&!1===Wn.forceSinglePass?(Wn.side=1,Wn.needsUpdate=!0,rt.renderBufferDirect(rr,Gn,or,Wn,Xt,Hr),Wn.side=0,Wn.needsUpdate=!0,rt.renderBufferDirect(rr,Gn,or,Wn,Xt,Hr),Wn.side=2):rt.renderBufferDirect(rr,Gn,or,Wn,Xt,Hr),Xt.onAfterRender(rt,Gn,rr,or,Wn,Hr)}function Rf(Xt,Gn,rr){!0!==Gn.isScene&&(Gn=Xi);const or=Kr.get(Xt),Wn=Ie.state.lights,si=Wn.state.version,Ai=Oi.getParameters(Xt,Wn.state,Ie.state.shadowsArray,Gn,rr),xi=Oi.getProgramCacheKey(Ai);let es=or.programs;or.environment=Xt.isMeshStandardMaterial?Gn.environment:null,or.fog=Gn.fog,or.envMap=(Xt.isMeshStandardMaterial?er:jt).get(Xt.envMap||or.environment),or.envMapRotation=null!==or.environment&&null===Xt.envMap?Gn.environmentRotation:Xt.envMapRotation,void 0===es&&(Xt.addEventListener("dispose",gs),es=new Map,or.programs=es);let rs=es.get(xi);if(void 0!==rs){if(or.currentProgram===rs&&or.lightsStateVersion===si)return K_(Xt,Ai),rs}else Ai.uniforms=Oi.getUniforms(Xt),Xt.onBeforeCompile(Ai,rt),rs=Oi.acquireProgram(Ai,xi),es.set(xi,rs),or.uniforms=Ai.uniforms;const Bi=or.uniforms;return(!Xt.isShaderMaterial&&!Xt.isRawShaderMaterial||!0===Xt.clipping)&&(Bi.clippingPlanes=Xr.uniform),K_(Xt,Ai),or.needsLights=function Z_(Xt){return Xt.isMeshLambertMaterial||Xt.isMeshToonMaterial||Xt.isMeshPhongMaterial||Xt.isMeshStandardMaterial||Xt.isShadowMaterial||Xt.isShaderMaterial&&!0===Xt.lights}(Xt),or.lightsStateVersion=si,or.needsLights&&(Bi.ambientLightColor.value=Wn.state.ambient,Bi.lightProbe.value=Wn.state.probe,Bi.directionalLights.value=Wn.state.directional,Bi.directionalLightShadows.value=Wn.state.directionalShadow,Bi.spotLights.value=Wn.state.spot,Bi.spotLightShadows.value=Wn.state.spotShadow,Bi.rectAreaLights.value=Wn.state.rectArea,Bi.ltc_1.value=Wn.state.rectAreaLTC1,Bi.ltc_2.value=Wn.state.rectAreaLTC2,Bi.pointLights.value=Wn.state.point,Bi.pointLightShadows.value=Wn.state.pointShadow,Bi.hemisphereLights.value=Wn.state.hemi,Bi.directionalShadowMap.value=Wn.state.directionalShadowMap,Bi.directionalShadowMatrix.value=Wn.state.directionalShadowMatrix,Bi.spotShadowMap.value=Wn.state.spotShadowMap,Bi.spotLightMatrix.value=Wn.state.spotLightMatrix,Bi.spotLightMap.value=Wn.state.spotLightMap,Bi.pointShadowMap.value=Wn.state.pointShadowMap,Bi.pointShadowMatrix.value=Wn.state.pointShadowMatrix),or.currentProgram=rs,or.uniformsList=null,rs}function Ty(Xt){if(null===Xt.uniformsList){const Gn=Xt.currentProgram.getUniforms();Xt.uniformsList=Lu.seqWithValue(Gn.seq,Xt.uniforms)}return Xt.uniformsList}function K_(Xt,Gn){const rr=Kr.get(Xt);rr.outputColorSpace=Gn.outputColorSpace,rr.batching=Gn.batching,rr.batchingColor=Gn.batchingColor,rr.instancing=Gn.instancing,rr.instancingColor=Gn.instancingColor,rr.instancingMorph=Gn.instancingMorph,rr.skinning=Gn.skinning,rr.morphTargets=Gn.morphTargets,rr.morphNormals=Gn.morphNormals,rr.morphColors=Gn.morphColors,rr.morphTargetsCount=Gn.morphTargetsCount,rr.numClippingPlanes=Gn.numClippingPlanes,rr.numIntersection=Gn.numClipIntersection,rr.vertexAlphas=Gn.vertexAlphas,rr.vertexTangents=Gn.vertexTangents,rr.toneMapping=Gn.toneMapping}vd.setAnimationLoop(function nu(Xt){dc&&dc(Xt)}),typeof self<"u"&&vd.setContext(self),this.setAnimationLoop=function(Xt){dc=Xt,br.setAnimationLoop(Xt),null===Xt?vd.stop():vd.start()},br.addEventListener("sessionstart",If),br.addEventListener("sessionend",H_),this.render=function(Xt,Gn){if(void 0!==Gn&&!0!==Gn.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===$t)return;if(!0===Xt.matrixWorldAutoUpdate&&Xt.updateMatrixWorld(),null===Gn.parent&&!0===Gn.matrixWorldAutoUpdate&&Gn.updateMatrixWorld(),!0===br.enabled&&!0===br.isPresenting&&(!0===br.cameraAutoUpdate&&br.updateCamera(Gn),Gn=br.getCamera()),!0===Xt.isScene&&Xt.onBeforeRender(rt,Xt,Gn,Wt),Ie=ps.get(Xt,it.length),Ie.init(Gn),it.push(Ie),Ci.multiplyMatrices(Gn.projectionMatrix,Gn.matrixWorldInverse),_r.setFromProjectionMatrix(Ci),mi=this.localClippingEnabled,$r=Xr.init(this.clippingPlanes,mi),Pe=gi.get(Xt,tt.length),Pe.init(),tt.push(Pe),!0===br.enabled&&!0===br.isPresenting){const Hr=rt.xr.getDepthSensingMesh();null!==Hr&&My(Hr,Gn,-1/0,rt.sortObjects)}My(Xt,Gn,0,rt.sortObjects),Pe.finish(),!0===rt.sortObjects&&Pe.sort(Vr,Qr),ur=!1===br.enabled||!1===br.isPresenting||!1===br.hasDepthSensing(),ur&&Ki.addToRenderList(Pe,Xt),this.info.render.frame++,!0===$r&&Xr.beginShadows(),Di.render(Ie.state.shadowsArray,Xt,Gn),!0===$r&&Xr.endShadows(),!0===this.info.autoReset&&this.info.reset();const or=Pe.opaque,Wn=Pe.transmissive;if(Ie.setupLights(),Gn.isArrayCamera){const Hr=Gn.cameras;if(Wn.length>0)for(let si=0,Ai=Hr.length;si<Ai;si++)X_(or,Wn,Xt,Hr[si]);ur&&Ki.render(Xt);for(let si=0,Ai=Hr.length;si<Ai;si++){const xi=Hr[si];W_(Pe,Xt,xi,xi.viewport)}}else Wn.length>0&&X_(or,Wn,Xt,Gn),ur&&Ki.render(Xt),W_(Pe,Xt,Gn);null!==Wt&&0===Ft&&(tn.updateMultisampleRenderTarget(Wt),tn.updateRenderTargetMipmap(Wt)),!0===Xt.isScene&&Xt.onAfterRender(rt,Xt,Gn),So.resetDefaultState(),Mt=-1,wt=null,it.pop(),it.length>0?(Ie=it[it.length-1],!0===$r&&Xr.setGlobalState(rt.clippingPlanes,Ie.state.camera)):Ie=null,tt.pop(),Pe=tt.length>0?tt[tt.length-1]:null},this.getActiveCubeFace=function(){return At},this.getActiveMipmapLevel=function(){return Ft},this.getRenderTarget=function(){return Wt},this.setRenderTargetTextures=function(Xt,Gn,rr){Kr.get(Xt.texture).__webglTexture=Gn,Kr.get(Xt.depthTexture).__webglTexture=rr;const or=Kr.get(Xt);or.__hasExternalTextures=!0,or.__autoAllocateDepthBuffer=void 0===rr,or.__autoAllocateDepthBuffer||!0===Dr.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),or.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Xt,Gn){const rr=Kr.get(Xt);rr.__webglFramebuffer=Gn,rr.__useDefaultFramebuffer=void 0===Gn};const _d=rn.createFramebuffer();this.setRenderTarget=function(Xt,Gn=0,rr=0){Wt=Xt,At=Gn,Ft=rr;let or=!0,Wn=null,Hr=!1,si=!1;if(Xt){const xi=Kr.get(Xt);if(void 0!==xi.__useDefaultFramebuffer)Fr.bindFramebuffer(rn.FRAMEBUFFER,null),or=!1;else if(void 0===xi.__webglFramebuffer)tn.setupRenderTarget(Xt);else if(xi.__hasExternalTextures)tn.rebindTextures(Xt,Kr.get(Xt.texture).__webglTexture,Kr.get(Xt.depthTexture).__webglTexture);else if(Xt.depthBuffer){const Bi=Xt.depthTexture;if(xi.__boundDepthTexture!==Bi){if(null!==Bi&&Kr.has(Bi)&&(Xt.width!==Bi.image.width||Xt.height!==Bi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");tn.setupDepthRenderbuffer(Xt)}}const es=Xt.texture;(es.isData3DTexture||es.isDataArrayTexture||es.isCompressedArrayTexture)&&(si=!0);const rs=Kr.get(Xt).__webglFramebuffer;Xt.isWebGLCubeRenderTarget?(Wn=Array.isArray(rs[Gn])?rs[Gn][rr]:rs[Gn],Hr=!0):Wn=Xt.samples>0&&!1===tn.useMultisampledRTT(Xt)?Kr.get(Xt).__webglMultisampledFramebuffer:Array.isArray(rs)?rs[rr]:rs,gn.copy(Xt.viewport),Kn.copy(Xt.scissor),Hn=Xt.scissorTest}else gn.copy(vi).multiplyScalar(tr).floor(),Kn.copy(Yi).multiplyScalar(tr).floor(),Hn=cs;if(0!==rr&&(Wn=_d),Fr.bindFramebuffer(rn.FRAMEBUFFER,Wn)&&or&&Fr.drawBuffers(Xt,Wn),Fr.viewport(gn),Fr.scissor(Kn),Fr.setScissorTest(Hn),Hr){const xi=Kr.get(Xt.texture);rn.framebufferTexture2D(rn.FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,xi.__webglTexture,rr)}else if(si){const xi=Kr.get(Xt.texture);rn.framebufferTextureLayer(rn.FRAMEBUFFER,rn.COLOR_ATTACHMENT0,xi.__webglTexture,rr,Gn)}else if(null!==Xt&&0!==rr){const xi=Kr.get(Xt.texture);rn.framebufferTexture2D(rn.FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_2D,xi.__webglTexture,rr)}Mt=-1},this.readRenderTargetPixels=function(Xt,Gn,rr,or,Wn,Hr,si){if(!Xt||!Xt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ai=Kr.get(Xt).__webglFramebuffer;if(Xt.isWebGLCubeRenderTarget&&void 0!==si&&(Ai=Ai[si]),Ai){Fr.bindFramebuffer(rn.FRAMEBUFFER,Ai);try{const xi=Xt.texture,es=xi.format,rs=xi.type;if(!ei.textureFormatReadable(es))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ei.textureTypeReadable(rs))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Gn>=0&&Gn<=Xt.width-or&&rr>=0&&rr<=Xt.height-Wn&&rn.readPixels(Gn,rr,or,Wn,ms.convert(es),ms.convert(rs),Hr)}finally{const xi=null!==Wt?Kr.get(Wt).__webglFramebuffer:null;Fr.bindFramebuffer(rn.FRAMEBUFFER,xi)}}},this.readRenderTargetPixelsAsync=function(){var Xt=(0,j.A)(function*(Gn,rr,or,Wn,Hr,si,Ai){if(!Gn||!Gn.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xi=Kr.get(Gn).__webglFramebuffer;if(Gn.isWebGLCubeRenderTarget&&void 0!==Ai&&(xi=xi[Ai]),xi){const es=Gn.texture,rs=es.format,Bi=es.type;if(!ei.textureFormatReadable(rs))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ei.textureTypeReadable(Bi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(rr>=0&&rr<=Gn.width-Wn&&or>=0&&or<=Gn.height-Hr){Fr.bindFramebuffer(rn.FRAMEBUFFER,xi);const ks=rn.createBuffer();rn.bindBuffer(rn.PIXEL_PACK_BUFFER,ks),rn.bufferData(rn.PIXEL_PACK_BUFFER,si.byteLength,rn.STREAM_READ),rn.readPixels(rr,or,Wn,Hr,ms.convert(rs),ms.convert(Bi),0);const Ms=null!==Wt?Kr.get(Wt).__webglFramebuffer:null;Fr.bindFramebuffer(rn.FRAMEBUFFER,Ms);const yo=rn.fenceSync(rn.SYNC_GPU_COMMANDS_COMPLETE,0);return rn.flush(),yield function Ul(v,t,r){return new Promise(function(s,a){setTimeout(function u(){switch(v.clientWaitSync(t,v.SYNC_FLUSH_COMMANDS_BIT,0)){case v.WAIT_FAILED:a();break;case v.TIMEOUT_EXPIRED:setTimeout(u,r);break;default:s()}},r)})}(rn,yo,4),rn.bindBuffer(rn.PIXEL_PACK_BUFFER,ks),rn.getBufferSubData(rn.PIXEL_PACK_BUFFER,0,si),rn.deleteBuffer(ks),rn.deleteSync(yo),si}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(Gn,rr,or,Wn,Hr,si,Ai){return Xt.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(Xt,Gn=null,rr=0){!0!==Xt.isTexture&&(Fl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Gn=arguments[0]||null,Xt=arguments[1]);const or=Math.pow(2,-rr),Wn=Math.floor(Xt.image.width*or),Hr=Math.floor(Xt.image.height*or),si=null!==Gn?Gn.x:0,Ai=null!==Gn?Gn.y:0;tn.setTexture2D(Xt,0),rn.copyTexSubImage2D(rn.TEXTURE_2D,rr,0,0,si,Ai,Wn,Hr),Fr.unbindTexture()};const J_=rn.createFramebuffer(),Ww=rn.createFramebuffer();this.copyTextureToTexture=function(Xt,Gn,rr=null,or=null,Wn=0,Hr=null){let si,Ai,xi,es,rs,Bi,ks,Ms,yo;!0!==Xt.isTexture&&(Fl("WebGLRenderer: copyTextureToTexture function signature has changed."),or=arguments[0]||null,Xt=arguments[1],Gn=arguments[2],Hr=arguments[3]||0,rr=null),null===Hr&&(0!==Wn?(Fl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Hr=Wn,Wn=0):Hr=0);const os=Xt.isCompressedTexture?Xt.mipmaps[Hr]:Xt.image;if(null!==rr)si=rr.max.x-rr.min.x,Ai=rr.max.y-rr.min.y,xi=rr.isBox3?rr.max.z-rr.min.z:1,es=rr.min.x,rs=rr.min.y,Bi=rr.isBox3?rr.min.z:0;else{const ql=Math.pow(2,-Wn);si=Math.floor(os.width*ql),Ai=Math.floor(os.height*ql),xi=Xt.isDataArrayTexture?os.depth:Xt.isData3DTexture?Math.floor(os.depth*ql):1,es=0,rs=0,Bi=0}null!==or?(ks=or.x,Ms=or.y,yo=or.z):(ks=0,Ms=0,yo=0);const Ts=ms.convert(Gn.format),Fi=ms.convert(Gn.type);let ho;Gn.isData3DTexture?(tn.setTexture3D(Gn,0),ho=rn.TEXTURE_3D):Gn.isDataArrayTexture||Gn.isCompressedArrayTexture?(tn.setTexture2DArray(Gn,0),ho=rn.TEXTURE_2D_ARRAY):(tn.setTexture2D(Gn,0),ho=rn.TEXTURE_2D),rn.pixelStorei(rn.UNPACK_FLIP_Y_WEBGL,Gn.flipY),rn.pixelStorei(rn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Gn.premultiplyAlpha),rn.pixelStorei(rn.UNPACK_ALIGNMENT,Gn.unpackAlignment);const Ns=rn.getParameter(rn.UNPACK_ROW_LENGTH),hc=rn.getParameter(rn.UNPACK_IMAGE_HEIGHT),kc=rn.getParameter(rn.UNPACK_SKIP_PIXELS),sl=rn.getParameter(rn.UNPACK_SKIP_ROWS),ch=rn.getParameter(rn.UNPACK_SKIP_IMAGES);rn.pixelStorei(rn.UNPACK_ROW_LENGTH,os.width),rn.pixelStorei(rn.UNPACK_IMAGE_HEIGHT,os.height),rn.pixelStorei(rn.UNPACK_SKIP_PIXELS,es),rn.pixelStorei(rn.UNPACK_SKIP_ROWS,rs),rn.pixelStorei(rn.UNPACK_SKIP_IMAGES,Bi);const Do=Xt.isDataArrayTexture||Xt.isData3DTexture,Xl=Gn.isDataArrayTexture||Gn.isData3DTexture;if(Xt.isDepthTexture){const ql=Kr.get(Xt),js=Kr.get(Gn),ol=Kr.get(ql.__renderTarget),Cy=Kr.get(js.__renderTarget);Fr.bindFramebuffer(rn.READ_FRAMEBUFFER,ol.__webglFramebuffer),Fr.bindFramebuffer(rn.DRAW_FRAMEBUFFER,Cy.__webglFramebuffer);for(let vo=0;vo<xi;vo++)Do&&(rn.framebufferTextureLayer(rn.READ_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,Kr.get(Xt).__webglTexture,Wn,Bi+vo),rn.framebufferTextureLayer(rn.DRAW_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,Kr.get(Gn).__webglTexture,Hr,yo+vo)),rn.blitFramebuffer(es,rs,si,Ai,ks,Ms,si,Ai,rn.DEPTH_BUFFER_BIT,rn.NEAREST);Fr.bindFramebuffer(rn.READ_FRAMEBUFFER,null),Fr.bindFramebuffer(rn.DRAW_FRAMEBUFFER,null)}else if(0!==Wn||Xt.isRenderTargetTexture||Kr.has(Xt)){const ql=Kr.get(Xt),js=Kr.get(Gn);Fr.bindFramebuffer(rn.READ_FRAMEBUFFER,J_),Fr.bindFramebuffer(rn.DRAW_FRAMEBUFFER,Ww);for(let ol=0;ol<xi;ol++)Do?rn.framebufferTextureLayer(rn.READ_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,ql.__webglTexture,Wn,Bi+ol):rn.framebufferTexture2D(rn.READ_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_2D,ql.__webglTexture,Wn),Xl?rn.framebufferTextureLayer(rn.DRAW_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,js.__webglTexture,Hr,yo+ol):rn.framebufferTexture2D(rn.DRAW_FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_2D,js.__webglTexture,Hr),0!==Wn?rn.blitFramebuffer(es,rs,si,Ai,ks,Ms,si,Ai,rn.COLOR_BUFFER_BIT,rn.NEAREST):Xl?rn.copyTexSubImage3D(ho,Hr,ks,Ms,yo+ol,es,rs,si,Ai):rn.copyTexSubImage2D(ho,Hr,ks,Ms,es,rs,si,Ai);Fr.bindFramebuffer(rn.READ_FRAMEBUFFER,null),Fr.bindFramebuffer(rn.DRAW_FRAMEBUFFER,null)}else Xl?Xt.isDataTexture||Xt.isData3DTexture?rn.texSubImage3D(ho,Hr,ks,Ms,yo,si,Ai,xi,Ts,Fi,os.data):Gn.isCompressedArrayTexture?rn.compressedTexSubImage3D(ho,Hr,ks,Ms,yo,si,Ai,xi,Ts,os.data):rn.texSubImage3D(ho,Hr,ks,Ms,yo,si,Ai,xi,Ts,Fi,os):Xt.isDataTexture?rn.texSubImage2D(rn.TEXTURE_2D,Hr,ks,Ms,si,Ai,Ts,Fi,os.data):Xt.isCompressedTexture?rn.compressedTexSubImage2D(rn.TEXTURE_2D,Hr,ks,Ms,os.width,os.height,Ts,os.data):rn.texSubImage2D(rn.TEXTURE_2D,Hr,ks,Ms,si,Ai,Ts,Fi,os);rn.pixelStorei(rn.UNPACK_ROW_LENGTH,Ns),rn.pixelStorei(rn.UNPACK_IMAGE_HEIGHT,hc),rn.pixelStorei(rn.UNPACK_SKIP_PIXELS,kc),rn.pixelStorei(rn.UNPACK_SKIP_ROWS,sl),rn.pixelStorei(rn.UNPACK_SKIP_IMAGES,ch),0===Hr&&Gn.generateMipmaps&&rn.generateMipmap(ho),Fr.unbindTexture()},this.copyTextureToTexture3D=function(Xt,Gn,rr=null,or=null,Wn=0){return!0!==Xt.isTexture&&(Fl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),rr=arguments[0]||null,or=arguments[1]||null,Xt=arguments[2],Gn=arguments[3],Wn=arguments[4]||0),Fl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Xt,Gn,rr,or,Wn)},this.initRenderTarget=function(Xt){void 0===Kr.get(Xt).__webglFramebuffer&&tn.setupRenderTarget(Xt)},this.initTexture=function(Xt){Xt.isCubeTexture?tn.setTextureCube(Xt,0):Xt.isData3DTexture?tn.setTexture3D(Xt,0):Xt.isDataArrayTexture||Xt.isCompressedArrayTexture?tn.setTexture2DArray(Xt,0):tn.setTexture2D(Xt,0),Fr.unbindTexture()},this.resetState=function(){At=0,Ft=0,Wt=null,Fr.reset(),So.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bt}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const r=this.getContext();r.drawingBufferColorspace=Ss._getDrawingBufferColorSpace(t),r.unpackColorSpace=Ss._getUnpackColorSpace()}}const v_={type:"change"},lm={type:"start"},cm={type:"end"},yd=new Ba,__=new Sc,gw=Math.cos(70*Po_DEG2RAD),_a=new mt,gl=2*Math.PI,fy=1e-6;class py extends bE{constructor(t,r=null){super(t,r),this.state=-1,this.enabled=!0,this.target=new mt,this.cursor=new mt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new mt,this._lastQuaternion=new en,this._lastTargetPosition=new mt,this._quat=(new en).setFromUnitVectors(t.up,new mt(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Yv,this._sphericalDelta=new Yv,this._scale=1,this._panOffset=new mt,this._rotateStart=new fr,this._rotateEnd=new fr,this._rotateDelta=new fr,this._panStart=new fr,this._panEnd=new fr,this._panDelta=new fr,this._dollyStart=new fr,this._dollyEnd=new fr,this._dollyDelta=new fr,this._dollyDirection=new mt,this._mouse=new fr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=b_.bind(this),this._onPointerDown=xf.bind(this),this._onPointerUp=x_.bind(this),this._onContextMenu=my.bind(this),this._onMouseWheel=um.bind(this),this._onKeyDown=QE.bind(this),this._onTouchStart=vw.bind(this),this._onTouchMove=w_.bind(this),this._onMouseDown=yw.bind(this),this._onMouseMove=wf.bind(this),this._interceptControlDown=_w.bind(this),this._interceptControlUp=S_.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(v_),this.update(),this.state=-1}update(t=null){const r=this.object.position;_a.copy(r).sub(this.target),_a.applyQuaternion(this._quat),this._spherical.setFromVector3(_a),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(s)&&isFinite(a)&&(s<-Math.PI?s+=gl:s>Math.PI&&(s-=gl),a<-Math.PI?a+=gl:a>Math.PI&&(a-=gl),this._spherical.theta=s<=a?Math.max(s,Math.min(a,this._spherical.theta)):this._spherical.theta>(s+a)/2?Math.max(s,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let u=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const _=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),u=_!=this._spherical.radius}if(_a.setFromSpherical(this._spherical),_a.applyQuaternion(this._quatInverse),r.copy(this.target).add(_a),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let _=null;if(this.object.isPerspectiveCamera){const C=_a.length();_=this._clampDistance(C*this._scale);const L=C-_;this.object.position.addScaledVector(this._dollyDirection,L),this.object.updateMatrixWorld(),u=!!L}else if(this.object.isOrthographicCamera){const C=new mt(this._mouse.x,this._mouse.y,0);C.unproject(this.object);const L=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),u=L!==this.object.zoom;const U=new mt(this._mouse.x,this._mouse.y,0);U.unproject(this.object),this.object.position.sub(U).add(C),this.object.updateMatrixWorld(),_=_a.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==_&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(_).add(this.object.position):(yd.origin.copy(this.object.position),yd.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(yd.direction))<gw?this.object.lookAt(this.target):(__.setFromNormalAndCoplanarPoint(this.object.up,this.target),yd.intersectPlane(__,this.target))))}else if(this.object.isOrthographicCamera){const _=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),_!==this.object.zoom&&(this.object.updateProjectionMatrix(),u=!0)}return this._scale=1,this._performCursorZoom=!1,!!(u||this._lastPosition.distanceToSquared(this.object.position)>fy||8*(1-this._lastQuaternion.dot(this.object.quaternion))>fy||this._lastTargetPosition.distanceToSquared(this.target)>fy)&&(this.dispatchEvent(v_),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?gl/60*this.autoRotateSpeed*t:gl/60/60*this.autoRotateSpeed}_getZoomScale(t){const r=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,r){_a.setFromMatrixColumn(r,0),_a.multiplyScalar(-t),this._panOffset.add(_a)}_panUp(t,r){!0===this.screenSpacePanning?_a.setFromMatrixColumn(r,1):(_a.setFromMatrixColumn(r,0),_a.crossVectors(this.object.up,_a)),_a.multiplyScalar(t),this._panOffset.add(_a)}_pan(t,r){const s=this.domElement;if(this.object.isPerspectiveCamera){_a.copy(this.object.position).sub(this.target);let u=_a.length();u*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*u/s.clientHeight,this.object.matrix),this._panUp(2*r*u/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),u=r-s.top,C=s.height;this._mouse.x=(t-s.left)/s.width*2-1,this._mouse.y=-u/C*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(gl*this._rotateDelta.x/r.clientHeight),this._rotateUp(gl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let r=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-gl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0}r&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._rotateStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,a=t.pageY-r.y,u=Math.sqrt(s*s+a*a);this._dollyStart.set(0,u)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const s=this._getSecondPointerPosition(t);this._rotateEnd.set(.5*(t.pageX+s.x),.5*(t.pageY+s.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(gl*this._rotateDelta.x/r.clientHeight),this._rotateUp(gl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panEnd.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,a=t.pageY-r.y,u=Math.sqrt(s*s+a*a);this._dollyEnd.set(0,u),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return void this._pointers.splice(r,1)}_isTrackingPointer(t){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return!0;return!1}_trackPointer(t){let r=this._pointerPositions[t.pointerId];void 0===r&&(r=new fr,this._pointerPositions[t.pointerId]=r),r.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){return this._pointerPositions[t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(t){const s={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(t.deltaMode){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function xf(v){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(v.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(v)&&(this._addPointer(v),"touch"===v.pointerType?this._onTouchStart(v):this._onMouseDown(v)))}function b_(v){!1!==this.enabled&&("touch"===v.pointerType?this._onTouchMove(v):this._onMouseMove(v))}function x_(v){switch(this._removePointer(v),this._pointers.length){case 0:this.domElement.releasePointerCapture(v.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(cm),this.state=-1;break;case 1:const t=this._pointers[0],r=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:r.x,pageY:r.y})}}function yw(v){let t;switch(v.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(v),this.state=1;break;case 0:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}break;case 2:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(lm)}function wf(v){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(v);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(v);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(v)}}function um(v){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(v.preventDefault(),this.dispatchEvent(lm),this._handleMouseWheel(this._customWheelEvent(v)),this.dispatchEvent(cm))}function QE(v){!1!==this.enabled&&this._handleKeyDown(v)}function vw(v){switch(this._trackPointer(v),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(v),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(v),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(v),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(v),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(lm)}function w_(v){switch(this._trackPointer(v),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(v),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(v),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(v),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(v),this.update();break;default:this.state=-1}}function my(v){!1!==this.enabled&&v.preventDefault()}function _w(v){"Control"===v.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function S_(v){"Control"===v.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M_(v,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),v;if(2===t||1===t){let r=v.getIndex();if(null===r){const _=[],C=v.getAttribute("position");if(void 0===C)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),v;for(let L=0;L<C.count;L++)_.push(L);v.setIndex(_),r=v.getIndex()}const s=r.count-2,a=[];if(2===t)for(let _=1;_<=s;_++)a.push(r.getX(0)),a.push(r.getX(_)),a.push(r.getX(_+1));else for(let _=0;_<s;_++)_%2==0?(a.push(r.getX(_)),a.push(r.getX(_+1)),a.push(r.getX(_+2))):(a.push(r.getX(_+2)),a.push(r.getX(_+1)),a.push(r.getX(_)));a.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const u=v.clone();return u.setIndex(a),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),v}class ww extends Oo{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Ew(r)}),this.register(function(r){return new ih(r)}),this.register(function(r){return new D_(r)}),this.register(function(r){return new dm(r)}),this.register(function(r){return new Rw(r)}),this.register(function(r){return new Mw(r)}),this.register(function(r){return new Tw(r)}),this.register(function(r){return new Cw(r)}),this.register(function(r){return new Aw(r)}),this.register(function(r){return new _y(r)}),this.register(function(r){return new Dw(r)}),this.register(function(r){return new C_(r)}),this.register(function(r){return new Iw(r)}),this.register(function(r){return new A_(r)}),this.register(function(r){return new Sf(r)}),this.register(function(r){return new Pw(r)}),this.register(function(r){return new I_(r)})}load(t,r,s,a){const u=this;let _;if(""!==this.resourcePath)_=this.resourcePath;else if(""!==this.path){const U=Xc.extractUrlBase(t);_=Xc.resolveURL(U,this.path)}else _=Xc.extractUrlBase(t);this.manager.itemStart(t);const C=function(U){a?a(U):console.error(U),u.manager.itemError(t),u.manager.itemEnd(t)},L=new Tl(this.manager);L.setPath(this.path),L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setWithCredentials(this.withCredentials),L.load(t,function(U){try{u.parse(U,_,function(Q){r(Q),u.manager.itemEnd(t)},C)}catch(Q){C(Q)}},s,C)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,s,a){let u;const _={},C={},L=new TextDecoder;if("string"==typeof t)u=JSON.parse(t);else if(t instanceof ArrayBuffer)if(L.decode(new Uint8Array(t,0,4))===R_){try{_[is.KHR_BINARY_GLTF]=new sh(t)}catch(ae){return void(a&&a(ae))}u=JSON.parse(_[is.KHR_BINARY_GLTF].content)}else u=JSON.parse(L.decode(t));else u=t;if(void 0===u.asset||u.asset.version[0]<2)return void(a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const U=new jw(u,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});U.fileLoader.setRequestHeader(this.requestHeader);for(let Q=0;Q<this.pluginCallbacks.length;Q++){const ae=this.pluginCallbacks[Q](U);ae.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),C[ae.name]=ae,_[ae.name]=!0}if(u.extensionsUsed)for(let Q=0;Q<u.extensionsUsed.length;++Q){const ae=u.extensionsUsed[Q],fe=u.extensionsRequired||[];switch(ae){case is.KHR_MATERIALS_UNLIT:_[ae]=new vy;break;case is.KHR_DRACO_MESH_COMPRESSION:_[ae]=new Mf(u,this.dracoLoader);break;case is.KHR_TEXTURE_TRANSFORM:_[ae]=new oM;break;case is.KHR_MESH_QUANTIZATION:_[ae]=new P_;break;default:fe.indexOf(ae)>=0&&void 0===C[ae]&&console.warn('THREE.GLTFLoader: Unknown extension "'+ae+'".')}}U.setExtensions(_),U.setPlugins(C),U.parse(s,a)}parseAsync(t,r){const s=this;return new Promise(function(a,u){s.parse(t,r,a,u)})}}function Sw(){let v={};return{get:function(t){return v[t]},add:function(t,r){v[t]=r},remove:function(t){delete v[t]},removeAll:function(){v={}}}}const is={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Sf{constructor(t){this.parser=t,this.name=is.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let s=0,a=r.length;s<a;s++){const u=r[s];u.extensions&&u.extensions[this.name]&&void 0!==u.extensions[this.name].light&&t._addNodeRef(this.cache,u.extensions[this.name].light)}}_loadLight(t){const r=this.parser,s="light:"+t;let a=r.cache.get(s);if(a)return a;const u=r.json,L=((u.extensions&&u.extensions[this.name]||{}).lights||[])[t];let U;const Q=new Mr(16777215);void 0!==L.color&&Q.setRGB(L.color[0],L.color[1],L.color[2],Vi);const ae=void 0!==L.range?L.range:0;switch(L.type){case"directional":U=new Ov(Q),U.target.position.set(0,0,-1),U.add(U.target);break;case"point":U=new u1(Q),U.distance=ae;break;case"spot":U=new Pv(Q),U.distance=ae,L.spot=L.spot||{},L.spot.innerConeAngle=void 0!==L.spot.innerConeAngle?L.spot.innerConeAngle:0,L.spot.outerConeAngle=void 0!==L.spot.outerConeAngle?L.spot.outerConeAngle:Math.PI/4,U.angle=L.spot.outerConeAngle,U.penumbra=1-L.spot.innerConeAngle/L.spot.outerConeAngle,U.target.position.set(0,0,-1),U.add(U.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+L.type)}return U.position.set(0,0,0),Bo(U,L),void 0!==L.intensity&&(U.intensity=L.intensity),U.name=r.createUniqueName(L.name||"light_"+t),a=Promise.resolve(U),r.cache.add(s,a),a}getDependency(t,r){if("light"===t)return this._loadLight(r)}createNodeAttachment(t){const r=this,s=this.parser,u=s.json.nodes[t],C=(u.extensions&&u.extensions[this.name]||{}).light;return void 0===C?null:this._loadLight(C).then(function(L){return s._getNodeRef(r.cache,C,L)})}}class vy{constructor(){this.name=is.KHR_MATERIALS_UNLIT}getMaterialType(){return io}extendParams(t,r,s){const a=[];t.color=new Mr(1,1,1),t.opacity=1;const u=r.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){const _=u.baseColorFactor;t.color.setRGB(_[0],_[1],_[2],Vi),t.opacity=_[3]}void 0!==u.baseColorTexture&&a.push(s.assignTexture(t,"map",u.baseColorTexture,Pi))}return Promise.all(a)}}class _y{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name].emissiveStrength;return void 0!==u&&(r.emissiveIntensity=u),Promise.resolve()}}class Ew{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];if(void 0!==_.clearcoatFactor&&(r.clearcoat=_.clearcoatFactor),void 0!==_.clearcoatTexture&&u.push(s.assignTexture(r,"clearcoatMap",_.clearcoatTexture)),void 0!==_.clearcoatRoughnessFactor&&(r.clearcoatRoughness=_.clearcoatRoughnessFactor),void 0!==_.clearcoatRoughnessTexture&&u.push(s.assignTexture(r,"clearcoatRoughnessMap",_.clearcoatRoughnessTexture)),void 0!==_.clearcoatNormalTexture&&(u.push(s.assignTexture(r,"clearcoatNormalMap",_.clearcoatNormalTexture)),void 0!==_.clearcoatNormalTexture.scale)){const C=_.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new fr(C,C)}return Promise.all(u)}}class ih{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name];return r.dispersion=void 0!==u.dispersion?u.dispersion:0,Promise.resolve()}}class C_{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.iridescenceFactor&&(r.iridescence=_.iridescenceFactor),void 0!==_.iridescenceTexture&&u.push(s.assignTexture(r,"iridescenceMap",_.iridescenceTexture)),void 0!==_.iridescenceIor&&(r.iridescenceIOR=_.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==_.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=_.iridescenceThicknessMinimum),void 0!==_.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=_.iridescenceThicknessMaximum),void 0!==_.iridescenceThicknessTexture&&u.push(s.assignTexture(r,"iridescenceThicknessMap",_.iridescenceThicknessTexture)),Promise.all(u)}}class Mw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[];r.sheenColor=new Mr(0,0,0),r.sheenRoughness=0,r.sheen=1;const _=a.extensions[this.name];if(void 0!==_.sheenColorFactor){const C=_.sheenColorFactor;r.sheenColor.setRGB(C[0],C[1],C[2],Vi)}return void 0!==_.sheenRoughnessFactor&&(r.sheenRoughness=_.sheenRoughnessFactor),void 0!==_.sheenColorTexture&&u.push(s.assignTexture(r,"sheenColorMap",_.sheenColorTexture,Pi)),void 0!==_.sheenRoughnessTexture&&u.push(s.assignTexture(r,"sheenRoughnessMap",_.sheenRoughnessTexture)),Promise.all(u)}}class Tw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.transmissionFactor&&(r.transmission=_.transmissionFactor),void 0!==_.transmissionTexture&&u.push(s.assignTexture(r,"transmissionMap",_.transmissionTexture)),Promise.all(u)}}class Cw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];r.thickness=void 0!==_.thicknessFactor?_.thicknessFactor:0,void 0!==_.thicknessTexture&&u.push(s.assignTexture(r,"thicknessMap",_.thicknessTexture)),r.attenuationDistance=_.attenuationDistance||1/0;const C=_.attenuationColor||[1,1,1];return r.attenuationColor=(new Mr).setRGB(C[0],C[1],C[2],Vi),Promise.all(u)}}class Aw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name];return r.ior=void 0!==u.ior?u.ior:1.5,Promise.resolve()}}class Dw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];r.specularIntensity=void 0!==_.specularFactor?_.specularFactor:1,void 0!==_.specularTexture&&u.push(s.assignTexture(r,"specularIntensityMap",_.specularTexture));const C=_.specularColorFactor||[1,1,1];return r.specularColor=(new Mr).setRGB(C[0],C[1],C[2],Vi),void 0!==_.specularColorTexture&&u.push(s.assignTexture(r,"specularColorMap",_.specularColorTexture,Pi)),Promise.all(u)}}class A_{constructor(t){this.parser=t,this.name=is.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return r.bumpScale=void 0!==_.bumpFactor?_.bumpFactor:1,void 0!==_.bumpTexture&&u.push(s.assignTexture(r,"bumpMap",_.bumpTexture)),Promise.all(u)}}class Iw{constructor(t){this.parser=t,this.name=is.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?ac:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.anisotropyStrength&&(r.anisotropy=_.anisotropyStrength),void 0!==_.anisotropyRotation&&(r.anisotropyRotation=_.anisotropyRotation),void 0!==_.anisotropyTexture&&u.push(s.assignTexture(r,"anisotropyMap",_.anisotropyTexture)),Promise.all(u)}}class D_{constructor(t){this.parser=t,this.name=is.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,s=r.json,a=s.textures[t];if(!a.extensions||!a.extensions[this.name])return null;const u=a.extensions[this.name],_=r.options.ktx2Loader;if(!_){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,u.source,_)}}class dm{constructor(t){this.parser=t,this.name=is.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,a=s.json,u=a.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],C=a.images[_.source];let L=s.textureLoader;if(C.uri){const U=s.options.manager.getHandler(C.uri);null!==U&&(L=U)}return this.detectSupport().then(function(U){if(U)return s.loadTextureImage(t,_.source,L);if(a.extensionsRequired&&a.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Rw{constructor(t){this.parser=t,this.name=is.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,a=s.json,u=a.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],C=a.images[_.source];let L=s.textureLoader;if(C.uri){const U=s.options.manager.getHandler(C.uri);null!==U&&(L=U)}return this.detectSupport().then(function(U){if(U)return s.loadTextureImage(t,_.source,L);if(a.extensionsRequired&&a.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Pw{constructor(t){this.name=is.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,s=r.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const a=s.extensions[this.name],u=this.parser.getDependency("buffer",a.buffer),_=this.parser.options.meshoptDecoder;if(!_||!_.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return u.then(function(C){const Q=a.count,ae=a.byteStride,fe=new Uint8Array(C,a.byteOffset||0,a.byteLength||0);return _.decodeGltfBufferAsync?_.decodeGltfBufferAsync(Q,ae,fe,a.mode,a.filter).then(function(ye){return ye.buffer}):_.ready.then(function(){const ye=new ArrayBuffer(Q*ae);return _.decodeGltfBuffer(new Uint8Array(ye),Q,ae,fe,a.mode,a.filter),ye})})}return null}}class I_{constructor(t){this.name=is.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,s=r.nodes[t];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;const a=r.meshes[s.mesh];for(const U of a.primitives)if(U.mode!==Dl.TRIANGLES&&U.mode!==Dl.TRIANGLE_STRIP&&U.mode!==Dl.TRIANGLE_FAN&&void 0!==U.mode)return null;const _=s.extensions[this.name].attributes,C=[],L={};for(const U in _)C.push(this.parser.getDependency("accessor",_[U]).then(Q=>(L[U]=Q,L[U])));return C.length<1?null:(C.push(this.parser.createNodeMesh(t)),Promise.all(C).then(U=>{const Q=U.pop(),ae=Q.isGroup?Q.children:[Q],fe=U[0].count,ye=[];for(const Me of ae){const Ue=new Mi,Pe=new mt,Ie=new en,tt=new mt(1,1,1),it=new Bb(Me.geometry,Me.material,fe);for(let rt=0;rt<fe;rt++)L.TRANSLATION&&Pe.fromBufferAttribute(L.TRANSLATION,rt),L.ROTATION&&Ie.fromBufferAttribute(L.ROTATION,rt),L.SCALE&&tt.fromBufferAttribute(L.SCALE,rt),it.setMatrixAt(rt,Ue.compose(Pe,Ie,tt));for(const rt in L)if("_COLOR_0"===rt){const $t=L[rt];it.instanceColor=new Mh($t.array,$t.itemSize,$t.normalized)}else"TRANSLATION"!==rt&&"ROTATION"!==rt&&"SCALE"!==rt&&Me.geometry.setAttribute(rt,L[rt]);Qs.prototype.copy.call(it,Me),this.parser.assignFinalMaterial(it),ye.push(it)}return Q.isGroup?(Q.clear(),Q.add(...ye),Q):ye[0]}))}}const R_="glTF";class sh{constructor(t){this.name=is.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,12),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==R_)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-12,u=new DataView(t,12);let _=0;for(;_<a;){const C=u.getUint32(_,!0);_+=4;const L=u.getUint32(_,!0);if(_+=4,1313821514===L){const U=new Uint8Array(t,12+_,C);this.content=s.decode(U)}else if(5130562===L){const U=12+_;this.body=t.slice(U,U+C)}_+=C}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mf{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=is.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const s=this.json,a=this.dracoLoader,u=t.extensions[this.name].bufferView,_=t.extensions[this.name].attributes,C={},L={},U={};for(const Q in _){const ae=by[Q]||Q.toLowerCase();C[ae]=_[Q]}for(const Q in t.attributes){const ae=by[Q]||Q.toLowerCase();if(void 0!==_[Q]){const fe=s.accessors[t.attributes[Q]];U[ae]=Tf[fe.componentType].name,L[ae]=!0===fe.normalized}}return r.getDependency("bufferView",u).then(function(Q){return new Promise(function(ae,fe){a.decodeDracoFile(Q,function(ye){for(const Me in ye.attributes){const Pe=L[Me];void 0!==Pe&&(ye.attributes[Me].normalized=Pe)}ae(ye)},C,U,Vi,fe)})})}}class oM{constructor(){this.name=is.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(void 0===r.texCoord||r.texCoord===t.channel)&&void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.texCoord&&(t.channel=r.texCoord),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class P_{constructor(){this.name=is.KHR_MESH_QUANTIZATION}}class O_ extends $h{constructor(t,r,s,a){super(t,r,s,a)}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=t*a*3+a;for(let _=0;_!==a;_++)r[_]=s[u+_];return r}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,C=this.valueSize,L=2*C,U=3*C,Q=a-r,ae=(s-r)/Q,fe=ae*ae,ye=fe*ae,Me=t*U,Ue=Me-U,Pe=-2*ye+3*fe,Ie=ye-fe,tt=1-Pe,it=Ie-fe+ae;for(let rt=0;rt!==C;rt++)u[rt]=tt*_[Ue+rt+C]+it*(_[Ue+rt+L]*Q)+Pe*_[Me+rt+C]+Ie*(_[Me+rt]*Q);return u}}const L_=new en;class Ow extends O_{interpolate_(t,r,s,a){const u=super.interpolate_(t,r,s,a);return L_.fromArray(u).normalize().toArray(u),u}}const Dl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Tf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k_={9728:ln,9729:Sn,9984:1004,9985:1007,9986:sn,9987:sr},oh={33071:_n,33648:1002,10497:qt},Cf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},by={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lw={CUBICSPLINE:void 0,LINEAR:ko,STEP:Io};function Qo(v,t,r){for(const s in r.extensions)void 0===v[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=r.extensions[s])}function Bo(v,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(v.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xy(v,t){if(v.updateMorphTargets(),void 0!==t.weights)for(let r=0,s=t.weights.length;r<s;r++)v.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(v.morphTargetInfluences.length===r.length){v.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++)v.morphTargetDictionary[r[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function kw(v){let t;const r=v.extensions&&v.extensions[is.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+hm(r.attributes):v.indices+":"+hm(v.attributes)+":"+v.mode,void 0!==v.targets)for(let s=0,a=v.targets.length;s<a;s++)t+=":"+hm(v.targets[s]);return t}function hm(v){let t="";const r=Object.keys(v).sort();for(let s=0,a=r.length;s<a;s++)t+=r[s]+":"+v[r[s]]+";";return t}function wy(v){switch(v){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Nw=new Mi;class jw{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Sw,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,a=-1,u=!1,_=-1;if(typeof navigator<"u"){const C=navigator.userAgent;s=!0===/^((?!chrome|android).)*safari/i.test(C);const L=C.match(/Version\/(\d+)/);a=s&&L?parseInt(L[1],10):-1,u=C.indexOf("Firefox")>-1,_=u?C.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||s&&a<17||u&&_<98?new c1(this.options.manager):new wg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const s=this,a=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(_){return _._markDefs&&_._markDefs()}),Promise.all(this._invokeAll(function(_){return _.beforeRoot&&_.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(_){const C={scene:_[0][a.scene||0],scenes:_[0],animations:_[1],cameras:_[2],asset:a.asset,parser:s,userData:{}};return Qo(u,C,a),Bo(C,a),Promise.all(s._invokeAll(function(L){return L.afterRoot&&L.afterRoot(C)})).then(function(){for(const L of C.scenes)L.updateMatrixWorld();t(C)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],s=this.json.meshes||[];for(let a=0,u=r.length;a<u;a++){const _=r[a].joints;for(let C=0,L=_.length;C<L;C++)t[_[C]].isBone=!0}for(let a=0,u=t.length;a<u;a++){const _=t[a];void 0!==_.mesh&&(this._addNodeRef(this.meshCache,_.mesh),void 0!==_.skin&&(s[_.mesh].isSkinnedMesh=!0)),void 0!==_.camera&&this._addNodeRef(this.cameraCache,_.camera)}}_addNodeRef(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,s){if(t.refs[r]<=1)return s;const a=s.clone(),u=(_,C)=>{const L=this.associations.get(_);null!=L&&this.associations.set(C,L);for(const[U,Q]of _.children.entries())u(Q,C.children[U])};return u(s,a),a.name+="_instance_"+t.uses[r]++,a}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let s=0;s<r.length;s++){const a=t(r[s]);if(a)return a}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const s=[];for(let a=0;a<r.length;a++){const u=t(r[a]);u&&s.push(u)}return s}getDependency(t,r){const s=t+":"+r;let a=this.cache.get(s);if(!a){switch(t){case"scene":a=this.loadScene(r);break;case"node":a=this._invokeOne(function(u){return u.loadNode&&u.loadNode(r)});break;case"mesh":a=this._invokeOne(function(u){return u.loadMesh&&u.loadMesh(r)});break;case"accessor":a=this.loadAccessor(r);break;case"bufferView":a=this._invokeOne(function(u){return u.loadBufferView&&u.loadBufferView(r)});break;case"buffer":a=this.loadBuffer(r);break;case"material":a=this._invokeOne(function(u){return u.loadMaterial&&u.loadMaterial(r)});break;case"texture":a=this._invokeOne(function(u){return u.loadTexture&&u.loadTexture(r)});break;case"skin":a=this.loadSkin(r);break;case"animation":a=this._invokeOne(function(u){return u.loadAnimation&&u.loadAnimation(r)});break;case"camera":a=this.loadCamera(r);break;default:if(a=this._invokeOne(function(u){return u!=this&&u.getDependency&&u.getDependency(t,r)}),!a)throw new Error("Unknown type: "+t)}this.cache.add(s,a)}return a}getDependencies(t){let r=this.cache.get(t);if(!r){const s=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(u,_){return s.getDependency(t,_)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],s=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[is.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(u,_){s.load(Xc.resolveURL(r.uri,a.path),u,void 0,function(){_(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(s){const u=r.byteOffset||0;return s.slice(u,u+(r.byteLength||0))})}loadAccessor(t){const r=this,s=this.json,a=this.json.accessors[t];if(void 0===a.bufferView&&void 0===a.sparse){const _=Cf[a.type],L=!0===a.normalized,U=new(0,Tf[a.componentType])(a.count*_);return Promise.resolve(new Ls(U,_,L))}const u=[];return u.push(void 0!==a.bufferView?this.getDependency("bufferView",a.bufferView):null),void 0!==a.sparse&&(u.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(u).then(function(_){const C=_[0],L=Cf[a.type],U=Tf[a.componentType],Q=U.BYTES_PER_ELEMENT,fe=a.byteOffset||0,ye=void 0!==a.bufferView?s.bufferViews[a.bufferView].byteStride:void 0,Me=!0===a.normalized;let Ue,Pe;if(ye&&ye!==Q*L){const Ie=Math.floor(fe/ye),tt="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+Ie+":"+a.count;let it=r.cache.get(tt);it||(Ue=new U(C,Ie*ye,a.count*ye/Q),it=new bc(Ue,ye/Q),r.cache.add(tt,it)),Pe=new Va(it,L,fe%ye/Q,Me)}else Ue=null===C?new U(a.count*L):new U(C,fe,a.count*L),Pe=new Ls(Ue,L,Me);if(void 0!==a.sparse){const rt=a.sparse.values.byteOffset||0,$t=new(0,Tf[a.sparse.indices.componentType])(_[1],a.sparse.indices.byteOffset||0,a.sparse.count*Cf.SCALAR),At=new U(_[2],rt,a.sparse.count*L);null!==C&&(Pe=new Ls(Pe.array.slice(),Pe.itemSize,Pe.normalized)),Pe.normalized=!1;for(let Ft=0,Wt=$t.length;Ft<Wt;Ft++){const Mt=$t[Ft];if(Pe.setX(Mt,At[Ft*L]),L>=2&&Pe.setY(Mt,At[Ft*L+1]),L>=3&&Pe.setZ(Mt,At[Ft*L+2]),L>=4&&Pe.setW(Mt,At[Ft*L+3]),L>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Pe.normalized=Me}return Pe})}loadTexture(t){const r=this.json,u=r.textures[t].source,_=r.images[u];let C=this.textureLoader;if(_.uri){const L=this.options.manager.getHandler(_.uri);null!==L&&(C=L)}return this.loadTextureImage(t,u,C)}loadTextureImage(t,r,s){const a=this,u=this.json,_=u.textures[t],C=u.images[r],L=(C.uri||C.bufferView)+":"+_.sampler;if(this.textureCache[L])return this.textureCache[L];const U=this.loadImageSource(r,s).then(function(Q){Q.flipY=!1,Q.name=_.name||C.name||"",""===Q.name&&"string"==typeof C.uri&&!1===C.uri.startsWith("data:image/")&&(Q.name=C.uri);const fe=(u.samplers||{})[_.sampler]||{};return Q.magFilter=k_[fe.magFilter]||Sn,Q.minFilter=k_[fe.minFilter]||sr,Q.wrapS=oh[fe.wrapS]||qt,Q.wrapT=oh[fe.wrapT]||qt,Q.generateMipmaps=!Q.isCompressedTexture&&Q.minFilter!==ln&&Q.minFilter!==Sn,a.associations.set(Q,{textures:t}),Q}).catch(function(){return null});return this.textureCache[L]=U,U}loadImageSource(t,r){const a=this.json,u=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(ae=>ae.clone());const _=a.images[t],C=self.URL||self.webkitURL;let L=_.uri||"",U=!1;if(void 0!==_.bufferView)L=this.getDependency("bufferView",_.bufferView).then(function(ae){U=!0;const fe=new Blob([ae],{type:_.mimeType});return L=C.createObjectURL(fe),L});else if(void 0===_.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const Q=Promise.resolve(L).then(function(ae){return new Promise(function(fe,ye){let Me=fe;!0===r.isImageBitmapLoader&&(Me=function(Ue){const Pe=new no(Ue);Pe.needsUpdate=!0,fe(Pe)}),r.load(Xc.resolveURL(ae,u.path),Me,void 0,ye)})}).then(function(ae){return!0===U&&C.revokeObjectURL(L),Bo(ae,_),ae.userData.mimeType=_.mimeType||function U_(v){return v.search(/\.jpe?g($|\?)/i)>0||0===v.search(/^data\:image\/jpeg/)?"image/jpeg":v.search(/\.webp($|\?)/i)>0||0===v.search(/^data\:image\/webp/)?"image/webp":v.search(/\.ktx2($|\?)/i)>0||0===v.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(_.uri),ae}).catch(function(ae){throw console.error("THREE.GLTFLoader: Couldn't load texture",L),ae});return this.sourceCache[t]=Q,Q}assignTexture(t,r,s,a){const u=this;return this.getDependency("texture",s.index).then(function(_){if(!_)return null;if(void 0!==s.texCoord&&s.texCoord>0&&((_=_.clone()).channel=s.texCoord),u.extensions[is.KHR_TEXTURE_TRANSFORM]){const C=void 0!==s.extensions?s.extensions[is.KHR_TEXTURE_TRANSFORM]:void 0;if(C){const L=u.associations.get(_);_=u.extensions[is.KHR_TEXTURE_TRANSFORM].extendTexture(_,C),u.associations.set(_,L)}}return void 0!==a&&(_.colorSpace=a),t[r]=_,_})}assignFinalMaterial(t){const r=t.geometry;let s=t.material;const a=void 0===r.attributes.tangent,u=void 0!==r.attributes.color,_=void 0===r.attributes.normal;if(t.isPoints){const C="PointsMaterial:"+s.uuid;let L=this.cache.get(C);L||(L=new Eu,Rs.prototype.copy.call(L,s),L.color.copy(s.color),L.map=s.map,L.sizeAttenuation=!1,this.cache.add(C,L)),s=L}else if(t.isLine){const C="LineBasicMaterial:"+s.uuid;let L=this.cache.get(C);L||(L=new Ta,Rs.prototype.copy.call(L,s),L.color.copy(s.color),L.map=s.map,this.cache.add(C,L)),s=L}if(a||u||_){let C="ClonedMaterial:"+s.uuid+":";a&&(C+="derivative-tangents:"),u&&(C+="vertex-colors:"),_&&(C+="flat-shading:");let L=this.cache.get(C);L||(L=s.clone(),u&&(L.vertexColors=!0),_&&(L.flatShading=!0),a&&(L.normalScale&&(L.normalScale.y*=-1),L.clearcoatNormalScale&&(L.clearcoatNormalScale.y*=-1)),this.cache.add(C,L),this.associations.set(L,this.associations.get(s))),s=L}t.material=s}getMaterialType(){return Fo}loadMaterial(t){const r=this,a=this.extensions,u=this.json.materials[t];let _;const C={},U=[];if((u.extensions||{})[is.KHR_MATERIALS_UNLIT]){const ae=a[is.KHR_MATERIALS_UNLIT];_=ae.getMaterialType(),U.push(ae.extendParams(C,u,r))}else{const ae=u.pbrMetallicRoughness||{};if(C.color=new Mr(1,1,1),C.opacity=1,Array.isArray(ae.baseColorFactor)){const fe=ae.baseColorFactor;C.color.setRGB(fe[0],fe[1],fe[2],Vi),C.opacity=fe[3]}void 0!==ae.baseColorTexture&&U.push(r.assignTexture(C,"map",ae.baseColorTexture,Pi)),C.metalness=void 0!==ae.metallicFactor?ae.metallicFactor:1,C.roughness=void 0!==ae.roughnessFactor?ae.roughnessFactor:1,void 0!==ae.metallicRoughnessTexture&&(U.push(r.assignTexture(C,"metalnessMap",ae.metallicRoughnessTexture)),U.push(r.assignTexture(C,"roughnessMap",ae.metallicRoughnessTexture))),_=this._invokeOne(function(fe){return fe.getMaterialType&&fe.getMaterialType(t)}),U.push(Promise.all(this._invokeAll(function(fe){return fe.extendMaterialParams&&fe.extendMaterialParams(t,C)})))}!0===u.doubleSided&&(C.side=2);const Q=u.alphaMode||"OPAQUE";if("BLEND"===Q?(C.transparent=!0,C.depthWrite=!1):(C.transparent=!1,"MASK"===Q&&(C.alphaTest=void 0!==u.alphaCutoff?u.alphaCutoff:.5)),void 0!==u.normalTexture&&_!==io&&(U.push(r.assignTexture(C,"normalMap",u.normalTexture)),C.normalScale=new fr(1,1),void 0!==u.normalTexture.scale)){const ae=u.normalTexture.scale;C.normalScale.set(ae,ae)}if(void 0!==u.occlusionTexture&&_!==io&&(U.push(r.assignTexture(C,"aoMap",u.occlusionTexture)),void 0!==u.occlusionTexture.strength&&(C.aoMapIntensity=u.occlusionTexture.strength)),void 0!==u.emissiveFactor&&_!==io){const ae=u.emissiveFactor;C.emissive=(new Mr).setRGB(ae[0],ae[1],ae[2],Vi)}return void 0!==u.emissiveTexture&&_!==io&&U.push(r.assignTexture(C,"emissiveMap",u.emissiveTexture,Pi)),Promise.all(U).then(function(){const ae=new _(C);return u.name&&(ae.name=u.name),Bo(ae,u),r.associations.set(ae,{materials:t}),u.extensions&&Qo(a,ae,u),ae})}createUniqueName(t){const r=wo.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,s=this.extensions,a=this.primitiveCache;function u(C){return s[is.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(C,r).then(function(L){return pm(L,C,r)})}const _=[];for(let C=0,L=t.length;C<L;C++){const U=t[C],Q=kw(U),ae=a[Q];if(ae)_.push(ae.promise);else{let fe;fe=U.extensions&&U.extensions[is.KHR_DRACO_MESH_COMPRESSION]?u(U):pm(new Zi,U,r),a[Q]={primitive:U,promise:fe},_.push(fe)}}return Promise.all(_)}loadMesh(t){const r=this,a=this.extensions,u=this.json.meshes[t],_=u.primitives,C=[];for(let L=0,U=_.length;L<U;L++){const Q=void 0===_[L].material?(void 0===(v=this.cache).DefaultMaterial&&(v.DefaultMaterial=new Fo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),v.DefaultMaterial):this.getDependency("material",_[L].material);C.push(Q)}var v;return C.push(r.loadGeometries(_)),Promise.all(C).then(function(L){const U=L.slice(0,L.length-1),Q=L[L.length-1],ae=[];for(let ye=0,Me=Q.length;ye<Me;ye++){const Ue=Q[ye],Pe=_[ye];let Ie;const tt=U[ye];if(Pe.mode===Dl.TRIANGLES||Pe.mode===Dl.TRIANGLE_STRIP||Pe.mode===Dl.TRIANGLE_FAN||void 0===Pe.mode)Ie=!0===u.isSkinnedMesh?new jb(Ue,tt):new ls(Ue,tt),!0===Ie.isSkinnedMesh&&Ie.normalizeSkinWeights(),Pe.mode===Dl.TRIANGLE_STRIP?Ie.geometry=M_(Ie.geometry,1):Pe.mode===Dl.TRIANGLE_FAN&&(Ie.geometry=M_(Ie.geometry,2));else if(Pe.mode===Dl.LINES)Ie=new il(Ue,tt);else if(Pe.mode===Dl.LINE_STRIP)Ie=new nc(Ue,tt);else if(Pe.mode===Dl.LINE_LOOP)Ie=new rp(Ue,tt);else{if(Pe.mode!==Dl.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Pe.mode);Ie=new Nd(Ue,tt)}Object.keys(Ie.geometry.morphAttributes).length>0&&xy(Ie,u),Ie.name=r.createUniqueName(u.name||"mesh_"+t),Bo(Ie,u),Pe.extensions&&Qo(a,Ie,Pe),r.assignFinalMaterial(Ie),ae.push(Ie)}for(let ye=0,Me=ae.length;ye<Me;ye++)r.associations.set(ae[ye],{meshes:t,primitives:ye});if(1===ae.length)return u.extensions&&Qo(a,ae[0],u),ae[0];const fe=new Ma;u.extensions&&Qo(a,fe,u),r.associations.set(fe,{meshes:t});for(let ye=0,Me=ae.length;ye<Me;ye++)fe.add(ae[ye]);return fe})}loadCamera(t){let r;const s=this.json.cameras[t],a=s[s.type];if(a)return"perspective"===s.type?r=new co(Po_radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===s.type&&(r=new bg(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),s.name&&(r.name=this.createUniqueName(s.name)),Bo(r,s),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const r=this.json.skins[t],s=[];for(let a=0,u=r.joints.length;a<u;a++)s.push(this._loadNodeShallow(r.joints[a]));return s.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(s).then(function(a){const u=a.pop(),_=a,C=[],L=[];for(let U=0,Q=_.length;U<Q;U++){const ae=_[U];if(ae){C.push(ae);const fe=new Mi;null!==u&&fe.fromArray(u.array,16*U),L.push(fe)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[U])}return new Hm(C,L)})}loadAnimation(t){const s=this,a=this.json.animations[t],u=a.name?a.name:"animation_"+t,_=[],C=[],L=[],U=[],Q=[];for(let ae=0,fe=a.channels.length;ae<fe;ae++){const ye=a.channels[ae],Me=a.samplers[ye.sampler],Ue=ye.target,Ie=void 0!==a.parameters?a.parameters[Me.input]:Me.input,tt=void 0!==a.parameters?a.parameters[Me.output]:Me.output;void 0!==Ue.node&&(_.push(this.getDependency("node",Ue.node)),C.push(this.getDependency("accessor",Ie)),L.push(this.getDependency("accessor",tt)),U.push(Me),Q.push(Ue))}return Promise.all([Promise.all(_),Promise.all(C),Promise.all(L),Promise.all(U),Promise.all(Q)]).then(function(ae){const fe=ae[0],ye=ae[1],Me=ae[2],Ue=ae[3],Pe=ae[4],Ie=[];for(let tt=0,it=fe.length;tt<it;tt++){const rt=fe[tt],$t=ye[tt],At=Me[tt],Ft=Ue[tt],Wt=Pe[tt];if(void 0===rt)continue;rt.updateMatrix&&rt.updateMatrix();const Mt=s._createAnimationTracks(rt,$t,At,Ft,Wt);if(Mt)for(let wt=0;wt<Mt.length;wt++)Ie.push(Mt[wt])}return new Hc(u,void 0,Ie)})}createNodeMesh(t){const s=this,a=this.json.nodes[t];return void 0===a.mesh?null:s.getDependency("mesh",a.mesh).then(function(u){const _=s._getNodeRef(s.meshCache,a.mesh,u);return void 0!==a.weights&&_.traverse(function(C){if(C.isMesh)for(let L=0,U=a.weights.length;L<U;L++)C.morphTargetInfluences[L]=a.weights[L]}),_})}loadNode(t){const s=this,a=this.json.nodes[t],u=s._loadNodeShallow(t),_=[],C=a.children||[];for(let U=0,Q=C.length;U<Q;U++)_.push(s.getDependency("node",C[U]));const L=void 0===a.skin?Promise.resolve(null):s.getDependency("skin",a.skin);return Promise.all([u,Promise.all(_),L]).then(function(U){const Q=U[0],ae=U[1],fe=U[2];null!==fe&&Q.traverse(function(ye){ye.isSkinnedMesh&&ye.bind(fe,Nw)});for(let ye=0,Me=ae.length;ye<Me;ye++)Q.add(ae[ye]);return Q})}_loadNodeShallow(t){const s=this.extensions,a=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const u=this.json.nodes[t],_=u.name?a.createUniqueName(u.name):"",C=[],L=a._invokeOne(function(U){return U.createNodeMesh&&U.createNodeMesh(t)});return L&&C.push(L),void 0!==u.camera&&C.push(a.getDependency("camera",u.camera).then(function(U){return a._getNodeRef(a.cameraCache,u.camera,U)})),a._invokeAll(function(U){return U.createNodeAttachment&&U.createNodeAttachment(t)}).forEach(function(U){C.push(U)}),this.nodeCache[t]=Promise.all(C).then(function(U){let Q;if(Q=!0===u.isBone?new ev:U.length>1?new Ma:1===U.length?U[0]:new Qs,Q!==U[0])for(let ae=0,fe=U.length;ae<fe;ae++)Q.add(U[ae]);if(u.name&&(Q.userData.name=u.name,Q.name=_),Bo(Q,u),u.extensions&&Qo(s,Q,u),void 0!==u.matrix){const ae=new Mi;ae.fromArray(u.matrix),Q.applyMatrix4(ae)}else void 0!==u.translation&&Q.position.fromArray(u.translation),void 0!==u.rotation&&Q.quaternion.fromArray(u.rotation),void 0!==u.scale&&Q.scale.fromArray(u.scale);return a.associations.has(Q)||a.associations.set(Q,{}),a.associations.get(Q).nodes=t,Q}),this.nodeCache[t]}loadScene(t){const r=this.extensions,s=this.json.scenes[t],a=this,u=new Ma;s.name&&(u.name=a.createUniqueName(s.name)),Bo(u,s),s.extensions&&Qo(r,u,s);const _=s.nodes||[],C=[];for(let L=0,U=_.length;L<U;L++)C.push(a.getDependency("node",_[L]));return Promise.all(C).then(function(L){for(let Q=0,ae=L.length;Q<ae;Q++)u.add(L[Q]);return a.associations=(Q=>{const ae=new Map;for(const[fe,ye]of a.associations)(fe instanceof Rs||fe instanceof no)&&ae.set(fe,ye);return Q.traverse(fe=>{const ye=a.associations.get(fe);null!=ye&&ae.set(fe,ye)}),ae})(u),u})}_createAnimationTracks(t,r,s,a,u){const _=[],C=t.name?t.name:t.uuid,L=[];let U;switch(Nu[u.path]===Nu.weights?t.traverse(function(fe){fe.morphTargetInfluences&&L.push(fe.name?fe.name:fe.uuid)}):L.push(C),Nu[u.path]){case Nu.weights:U=Wd;break;case Nu.rotation:U=id;break;case Nu.position:case Nu.scale:U=Cu;break;default:U=1===s.itemSize?Wd:Cu}const Q=void 0!==a.interpolation?Lw[a.interpolation]:ko,ae=this._getArrayFromAccessor(s);for(let fe=0,ye=L.length;fe<ye;fe++){const Me=new U(L[fe]+"."+Nu[u.path],r.array,ae,Q);"CUBICSPLINE"===a.interpolation&&this._createCubicSplineTrackInterpolant(Me),_.push(Me)}return _}_getArrayFromAccessor(t){let r=t.array;if(t.normalized){const s=wy(r.constructor),a=new Float32Array(r.length);for(let u=0,_=r.length;u<_;u++)a[u]=r[u]*s;r=a}return r}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){return new(this instanceof id?Ow:O_)(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function pm(v,t,r){const s=t.attributes,a=[];function u(_,C){return r.getDependency("accessor",_).then(function(L){v.setAttribute(C,L)})}for(const _ in s){const C=by[_]||_.toLowerCase();C in v.attributes||a.push(u(s[_],C))}if(void 0!==t.indices&&!v.index){const _=r.getDependency("accessor",t.indices).then(function(C){v.setIndex(C)});a.push(_)}return Ss.workingColorSpace!==Vi&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ss.workingColorSpace}" not supported.`),Bo(v,t),function fm(v,t,r){const s=t.attributes,a=new Ei;if(void 0===s.POSITION)return;{const C=r.json.accessors[s.POSITION],L=C.min,U=C.max;if(void 0===L||void 0===U)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new mt(L[0],L[1],L[2]),new mt(U[0],U[1],U[2])),C.normalized){const Q=wy(Tf[C.componentType]);a.min.multiplyScalar(Q),a.max.multiplyScalar(Q)}}const u=t.targets;if(void 0!==u){const C=new mt,L=new mt;for(let U=0,Q=u.length;U<Q;U++){const ae=u[U];if(void 0!==ae.POSITION){const fe=r.json.accessors[ae.POSITION],ye=fe.min,Me=fe.max;if(void 0!==ye&&void 0!==Me){if(L.setX(Math.max(Math.abs(ye[0]),Math.abs(Me[0]))),L.setY(Math.max(Math.abs(ye[1]),Math.abs(Me[1]))),L.setZ(Math.max(Math.abs(ye[2]),Math.abs(Me[2]))),fe.normalized){const Ue=wy(Tf[fe.componentType]);L.multiplyScalar(Ue)}C.max(L)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(C)}v.boundingBox=a;const _=new zs;a.getCenter(_.center),_.radius=a.min.distanceTo(a.max)/2,v.boundingSphere=_}(v,t,r),Promise.all(a).then(function(){return void 0!==t.targets?function F_(v,t,r){let s=!1,a=!1,u=!1;for(let U=0,Q=t.length;U<Q;U++){const ae=t[U];if(void 0!==ae.POSITION&&(s=!0),void 0!==ae.NORMAL&&(a=!0),void 0!==ae.COLOR_0&&(u=!0),s&&a&&u)break}if(!s&&!a&&!u)return Promise.resolve(v);const _=[],C=[],L=[];for(let U=0,Q=t.length;U<Q;U++){const ae=t[U];if(s){const fe=void 0!==ae.POSITION?r.getDependency("accessor",ae.POSITION):v.attributes.position;_.push(fe)}if(a){const fe=void 0!==ae.NORMAL?r.getDependency("accessor",ae.NORMAL):v.attributes.normal;C.push(fe)}if(u){const fe=void 0!==ae.COLOR_0?r.getDependency("accessor",ae.COLOR_0):v.attributes.color;L.push(fe)}}return Promise.all([Promise.all(_),Promise.all(C),Promise.all(L)]).then(function(U){const ae=U[1],fe=U[2];return s&&(v.morphAttributes.position=U[0]),a&&(v.morphAttributes.normal=ae),u&&(v.morphAttributes.color=fe),v.morphTargetsRelative=!0,v})}(v,t.targets,r):v})}const ju=/^[og]\s*(.+)?/,mm=/^mtllib /,B_=/^usemtl /,Af=/^usemap /,V_=/\s+/,G_=new mt,Df=new mt,Sy=new mt,eu=new mt,Ha=new mt,Ey=new Mr;function gm(){const v={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,r){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==r);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==r,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(a,u){const _=this._finalize(!1);_&&(_.inherited||_.groupCount<=0)&&this.materials.splice(_.index,1);const C={index:this.materials.length,name:a||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:void 0!==_?_.smooth:this.smooth,groupStart:void 0!==_?_.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(L){const U={index:"number"==typeof L?L:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return U.clone=this.clone.bind(U),U}};return this.materials.push(C),C},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(a){const u=this.currentMaterial();if(u&&-1===u.groupEnd&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),a&&this.materials.length>1)for(let _=this.materials.length-1;_>=0;_--)this.materials[_].groupCount<=0&&this.materials.splice(_,1);return a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),u}},s&&s.name&&"function"==typeof s.clone){const a=s.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseNormalIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseUVIndex:function(t,r){const s=parseInt(t,10);return 2*(s>=0?s-1:s+r/2)},addVertex:function(t,r,s){const a=this.vertices,u=this.object.geometry.vertices;u.push(a[t+0],a[t+1],a[t+2]),u.push(a[r+0],a[r+1],a[r+2]),u.push(a[s+0],a[s+1],a[s+2])},addVertexPoint:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addVertexLine:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addNormal:function(t,r,s){const a=this.normals,u=this.object.geometry.normals;u.push(a[t+0],a[t+1],a[t+2]),u.push(a[r+0],a[r+1],a[r+2]),u.push(a[s+0],a[s+1],a[s+2])},addFaceNormal:function(t,r,s){const a=this.vertices,u=this.object.geometry.normals;G_.fromArray(a,t),Df.fromArray(a,r),Sy.fromArray(a,s),Ha.subVectors(Sy,Df),eu.subVectors(G_,Df),Ha.cross(eu),Ha.normalize(),u.push(Ha.x,Ha.y,Ha.z),u.push(Ha.x,Ha.y,Ha.z),u.push(Ha.x,Ha.y,Ha.z)},addColor:function(t,r,s){const a=this.colors,u=this.object.geometry.colors;void 0!==a[t]&&u.push(a[t+0],a[t+1],a[t+2]),void 0!==a[r]&&u.push(a[r+0],a[r+1],a[r+2]),void 0!==a[s]&&u.push(a[s+0],a[s+1],a[s+2])},addUV:function(t,r,s){const a=this.uvs,u=this.object.geometry.uvs;u.push(a[t+0],a[t+1]),u.push(a[r+0],a[r+1]),u.push(a[s+0],a[s+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const r=this.uvs;this.object.geometry.uvs.push(r[t+0],r[t+1])},addFace:function(t,r,s,a,u,_,C,L,U){const Q=this.vertices.length;let ae=this.parseVertexIndex(t,Q),fe=this.parseVertexIndex(r,Q),ye=this.parseVertexIndex(s,Q);if(this.addVertex(ae,fe,ye),this.addColor(ae,fe,ye),void 0!==C&&""!==C){const Me=this.normals.length;ae=this.parseNormalIndex(C,Me),fe=this.parseNormalIndex(L,Me),ye=this.parseNormalIndex(U,Me),this.addNormal(ae,fe,ye)}else this.addFaceNormal(ae,fe,ye);if(void 0!==a&&""!==a){const Me=this.uvs.length;ae=this.parseUVIndex(a,Me),fe=this.parseUVIndex(u,Me),ye=this.parseUVIndex(_,Me),this.addUV(ae,fe,ye),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const r=this.vertices.length;for(let s=0,a=t.length;s<a;s++){const u=this.parseVertexIndex(t[s],r);this.addVertexPoint(u),this.addColor(u)}},addLineGeometry:function(t,r){this.object.geometry.type="Line";const s=this.vertices.length,a=this.uvs.length;for(let u=0,_=t.length;u<_;u++)this.addVertexLine(this.parseVertexIndex(t[u],s));for(let u=0,_=r.length;u<_;u++)this.addUVLine(this.parseUVIndex(r[u],a))}};return v.startObject("",!1),v}class z_ extends Oo{constructor(t){super(t),this.materials=null}load(t,r,s,a){const u=this,_=new Tl(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(C){try{r(u.parse(C))}catch(L){a?a(L):console.error(L),u.manager.itemError(t)}},s,a)}setMaterials(t){return this.materials=t,this}parse(t){const r=new gm;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let a=[];for(let C=0,L=s.length;C<L;C++){const U=s[C].trimStart();if(0===U.length)continue;const Q=U.charAt(0);if("#"!==Q)if("v"===Q){const ae=U.split(V_);switch(ae[0]){case"v":r.vertices.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3])),ae.length>=7?(Ey.setRGB(parseFloat(ae[4]),parseFloat(ae[5]),parseFloat(ae[6]),Pi),r.colors.push(Ey.r,Ey.g,Ey.b)):r.colors.push(void 0,void 0,void 0);break;case"vn":r.normals.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3]));break;case"vt":r.uvs.push(parseFloat(ae[1]),parseFloat(ae[2]))}}else if("f"===Q){const fe=U.slice(1).trim().split(V_),ye=[];for(let Ue=0,Pe=fe.length;Ue<Pe;Ue++){const Ie=fe[Ue];if(Ie.length>0){const tt=Ie.split("/");ye.push(tt)}}const Me=ye[0];for(let Ue=1,Pe=ye.length-1;Ue<Pe;Ue++){const Ie=ye[Ue],tt=ye[Ue+1];r.addFace(Me[0],Ie[0],tt[0],Me[1],Ie[1],tt[1],Me[2],Ie[2],tt[2])}}else if("l"===Q){const ae=U.substring(1).trim().split(" ");let fe=[];const ye=[];if(-1===U.indexOf("/"))fe=ae;else for(let Me=0,Ue=ae.length;Me<Ue;Me++){const Pe=ae[Me].split("/");""!==Pe[0]&&fe.push(Pe[0]),""!==Pe[1]&&ye.push(Pe[1])}r.addLineGeometry(fe,ye)}else if("p"===Q){const fe=U.slice(1).trim().split(" ");r.addPointGeometry(fe)}else if(null!==(a=ju.exec(U))){const ae=(" "+a[0].slice(1).trim()).slice(1);r.startObject(ae)}else if(B_.test(U))r.object.startMaterial(U.substring(7).trim(),r.materialLibraries);else if(mm.test(U))r.materialLibraries.push(U.substring(7).trim());else if(Af.test(U))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===Q){if(a=U.split(" "),a.length>1){const fe=a[1].trim().toLowerCase();r.object.smooth="0"!==fe&&"off"!==fe}else r.object.smooth=!0;const ae=r.object.currentMaterial();ae&&(ae.smooth=r.object.smooth)}else{if("\0"===U)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+U+'"')}}r.finalize();const u=new Ma;if(u.materialLibraries=[].concat(r.materialLibraries),1==!(1===r.objects.length&&0===r.objects[0].geometry.vertices.length))for(let C=0,L=r.objects.length;C<L;C++){const U=r.objects[C],Q=U.geometry,ae=U.materials,fe="Line"===Q.type,ye="Points"===Q.type;let Me=!1;if(0===Q.vertices.length)continue;const Ue=new Zi;Ue.setAttribute("position",new _i(Q.vertices,3)),Q.normals.length>0&&Ue.setAttribute("normal",new _i(Q.normals,3)),Q.colors.length>0&&(Me=!0,Ue.setAttribute("color",new _i(Q.colors,3))),!0===Q.hasUVIndices&&Ue.setAttribute("uv",new _i(Q.uvs,2));const Pe=[];for(let tt=0,it=ae.length;tt<it;tt++){const rt=ae[tt],$t=rt.name+"_"+rt.smooth+"_"+Me;let At=r.materials[$t];if(null!==this.materials)if(At=this.materials.create(rt.name),!fe||!At||At instanceof Ta){if(ye&&At&&!(At instanceof Eu)){const Ft=new Eu({size:10,sizeAttenuation:!1});Rs.prototype.copy.call(Ft,At),Ft.color.copy(At.color),Ft.map=At.map,At=Ft}}else{const Ft=new Ta;Rs.prototype.copy.call(Ft,At),Ft.color.copy(At.color),At=Ft}void 0===At&&(At=fe?new Ta:ye?new Eu({size:1,sizeAttenuation:!1}):new fg,At.name=rt.name,At.flatShading=!rt.smooth,At.vertexColors=Me,r.materials[$t]=At),Pe.push(At)}let Ie;if(Pe.length>1){for(let tt=0,it=ae.length;tt<it;tt++){const rt=ae[tt];Ue.addGroup(rt.groupStart,rt.groupCount,tt)}Ie=fe?new il(Ue,Pe):ye?new Nd(Ue,Pe):new ls(Ue,Pe)}else Ie=fe?new il(Ue,Pe[0]):ye?new Nd(Ue,Pe[0]):new ls(Ue,Pe[0]);Ie.name=U.name,u.add(Ie)}else if(r.vertices.length>0){const C=new Eu({size:1,sizeAttenuation:!1}),L=new Zi;L.setAttribute("position",new _i(r.vertices,3)),r.colors.length>0&&void 0!==r.colors[0]&&(L.setAttribute("color",new _i(r.colors,3)),C.vertexColors=!0);const U=new Nd(L,C);u.add(U)}return u}}class $_ extends Oo{constructor(t){super(t)}load(t,r,s,a){const u=this,_=new Tl(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(C){try{r(u.parse(C))}catch(L){a?a(L):console.error(L),u.manager.itemError(t)}},s,a)}parse(t){function s(U,Q,ae){for(let fe=0,ye=U.length;fe<ye;fe++)if(U[fe]!==Q.getUint8(ae+fe))return!1;return!0}const L=function C(U){if("string"==typeof U){const Q=new Uint8Array(U.length);for(let ae=0;ae<U.length;ae++)Q[ae]=255&U.charCodeAt(ae);return Q.buffer||Q}return U}(t);return function r(U){const Q=new DataView(U);if(84+50*Q.getUint32(80,!0)===Q.byteLength)return!0;const Me=[115,111,108,105,100];for(let Ue=0;Ue<5;Ue++)if(s(Me,Q,Ue))return!1;return!0}(L)?function a(U){const Q=new DataView(U),ae=Q.getUint32(80,!0);let fe,ye,Me,Pe,Ie,tt,it,rt,Ue=!1;for(let gn=0;gn<70;gn++)1129270351==Q.getUint32(gn,!1)&&82==Q.getUint8(gn+4)&&61==Q.getUint8(gn+5)&&(Ue=!0,Pe=new Float32Array(3*ae*3),Ie=Q.getUint8(gn+6)/255,tt=Q.getUint8(gn+7)/255,it=Q.getUint8(gn+8)/255,rt=Q.getUint8(gn+9)/255);const Ft=new Zi,Wt=new Float32Array(3*ae*3),Mt=new Float32Array(3*ae*3),wt=new Mr;for(let gn=0;gn<ae;gn++){const Kn=84+50*gn,Hn=Q.getFloat32(Kn,!0),Jn=Q.getFloat32(Kn+4,!0),pr=Q.getFloat32(Kn+8,!0);if(Ue){const Yn=Q.getUint16(Kn+48,!0);32768&Yn?(fe=Ie,ye=tt,Me=it):(fe=(31&Yn)/31,ye=(Yn>>5&31)/31,Me=(Yn>>10&31)/31)}for(let Yn=1;Yn<=3;Yn++){const Nr=Kn+12*Yn,tr=3*gn*3+3*(Yn-1);Wt[tr]=Q.getFloat32(Nr,!0),Wt[tr+1]=Q.getFloat32(Nr+4,!0),Wt[tr+2]=Q.getFloat32(Nr+8,!0),Mt[tr]=Hn,Mt[tr+1]=Jn,Mt[tr+2]=pr,Ue&&(wt.setRGB(fe,ye,Me,Pi),Pe[tr]=wt.r,Pe[tr+1]=wt.g,Pe[tr+2]=wt.b)}}return Ft.setAttribute("position",new Ls(Wt,3)),Ft.setAttribute("normal",new Ls(Mt,3)),Ue&&(Ft.setAttribute("color",new Ls(Pe,3)),Ft.hasColors=!0,Ft.alpha=rt),Ft}(L):function u(U){const Q=new Zi,ae=/solid([\s\S]*?)endsolid/g,fe=/facet([\s\S]*?)endfacet/g,ye=/solid\s(.+)/;let Me=0;const Ue=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,Pe=new RegExp("vertex"+Ue+Ue+Ue,"g"),Ie=new RegExp("normal"+Ue+Ue+Ue,"g"),tt=[],it=[],rt=[],$t=new mt;let At,Ft=0,Wt=0,Mt=0;for(;null!==(At=ae.exec(U));){Wt=Mt;const wt=At[0],gn=null!==(At=ye.exec(wt))?At[1]:"";for(rt.push(gn);null!==(At=fe.exec(wt));){let Jn=0,pr=0;const Yn=At[0];for(;null!==(At=Ie.exec(Yn));)$t.x=parseFloat(At[1]),$t.y=parseFloat(At[2]),$t.z=parseFloat(At[3]),pr++;for(;null!==(At=Pe.exec(Yn));)tt.push(parseFloat(At[1]),parseFloat(At[2]),parseFloat(At[3])),it.push($t.x,$t.y,$t.z),Jn++,Mt++;1!==pr&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+Me),3!==Jn&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+Me),Me++}const Kn=Wt,Hn=Mt-Wt;Q.userData.groupNames=rt,Q.addGroup(Kn,Hn,Ft),Ft++}return Q.setAttribute("position",new _i(tt,3)),Q.setAttribute("normal",new _i(it,3)),Q}(function _(U){return"string"!=typeof U?(new TextDecoder).decode(U):U}(t))}}var Lc=je(3953),ah=je(5374),Fw=je(3656),Uw=je(9900),Bw=je(4234),Vw=je(345),Gw=je(755),zw=je(3307),$w=je(5547),tu=!1;const lh=8e4;let Hw=(()=>{var v;class t{constructor(s,a,u,_,C,L,U,Q,ae){var fe=this;this.modalCtrl=s,this.p5toast=a,this.lang=u,this.sanitizer=_,this.indexed=C,this.alertCtrl=L,this.navCtrl=U,this.p5loading=Q,this.noti=ae,this.windowOnFocusAct={},this.WindowOnBlurAct={},this.FocusOnPortal=!0,this.portalHint=!0,this.BlockMainShortcut=!1,this.TodoTags={},this.TodoTagsKey=[],this.PIPableInfo={PIPableCanvas:void 0,PIPautoP5:void 0,framerate:void 0},this.PortalBottonTabAct={Todo:void 0,Subscribes:void 0,Arcade:void 0,Community:void 0},this.GodotCache={},this.ArcadeLoaded=!1,this.ArcadeWithFullScreen=!1,this.ToggleChatInput=!1,this.NeedBackgroundMode=!1,this.IsBackgroundMode=!1,this.arcadeChat={logs:[],text:""},this.ArcadeObject={QRCode:void 0},this.CacheShortCut={},this.WebsocketRetryTerm=70,this.useVoiceRecording="",this.videoPIP=!1,this.WaitingConnect=!1,this.useVideo=void 0,this.useCCTV=void 0,this.CCTVHost=!1,this.InitEnd=!1,this.PeerConnected=!1,this.ShowChatInterface=!1,this.DisableChatInput=!1,this.instCallLog={logs:[],text:""},this.PageDismissAct={},this.isOthersVideoExtended=!1,tu=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Me=>{tu=!!Me.matches}),this.CustomLocalAddress=localStorage.getItem("useQRCodeBasic")||"https://is2you2.github.io/pjcone_pwa/",window.onfocus=()=>{let Me=Object.keys(this.windowOnFocusAct);for(let Ue of Me)this.windowOnFocusAct[Ue]()},window.onblur=()=>{let Me=Object.keys(this.WindowOnBlurAct);for(let Ue of Me)this.WindowOnBlurAct[Ue]()};const ye=()=>{this.ArcadeWithFullScreen=!!document.fullscreenElement};document.onfullscreenchange=ye,document.onwebkitfullscreenchange=ye,document.onmozfullscreenchange=ye,document.onMSFullscreenChange=ye,this.autoPIPVideoElement=document.createElement("video"),document.body.appendChild(this.autoPIPVideoElement),this.autoPIPVideoElement.style.display="none",this.autoPIPVideoElement.autoplay=!0,this.autoPIPVideoElement.onloadeddata=(0,j.A)(function*(){try{yield fe.autoPIPVideoElement.requestPictureInPicture()}catch{fe.OnCloseAutoPIPModeAct()}}),this.autoPIPVideoElement.onleavepictureinpicture=()=>{this.OnCloseAutoPIPModeAct()}}toggleBlockMainShortcut(s){this.BlockMainShortcut=s,this.portalHint=!s}initialize(){const s=localStorage.getItem("ShowHint");null!==s&&(this.ShowHint="1"==s),void 0===this.ShowHint&&(this.ShowHint="DesktopPWA"==l.aH),this.p5toast.HTMLEncode||(this.p5toast.HTMLEncode=this.HTMLEncode),this.p5key=new Et(a=>{a.setup=()=>{a.noCanvas(),a.noLoop(),this.p5KeyShortCut={}},a.keyPressed=u=>{if(!this.BlockMainShortcut&&this.p5KeyShortCut){switch(u.code){case"Backspace":this.p5KeyShortCut.Backspace&&this.p5KeyShortCut.Backspace();break;case"Backquote":this.p5KeyShortCut.Backquote&&this.p5KeyShortCut.Backquote();break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":case"Digit0":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":case"Numpad6":case"Numpad7":case"Numpad8":case"Numpad9":case"Numpad0":if(this.p5KeyShortCut.Digit){const _=(Number(u.code.slice(-1))-1+10)%10;this.p5KeyShortCut.Digit(_)}break;case"KeyQ":case"KeyW":case"KeyE":case"KeyR":case"KeyT":this.p5KeyShortCut.BottomTab&&this.p5KeyShortCut.BottomTab(u.code.slice(-1));break;case"KeyA":this.p5KeyShortCut.AddAct&&this.p5KeyShortCut.AddAct();break;case"KeyS":this.p5KeyShortCut.SKeyAct&&this.p5KeyShortCut.SKeyAct(u);break;case"KeyD":this.p5KeyShortCut.DeleteAct&&this.p5KeyShortCut.DeleteAct(u);break;case"KeyF":this.p5KeyShortCut.FKeyAct&&this.p5KeyShortCut.FKeyAct();break;case"KeyZ":case"KeyX":case"KeyC":case"KeyV":this.p5KeyShortCut.HistoryAct&&this.p5KeyShortCut.HistoryAct(u)}"Enter"===u.key&&this.p5KeyShortCut.EnterAct&&this.p5KeyShortCut.EnterAct(u)}}})}AddTodoTags(s){try{for(let u=0,_=null===(a=s.tags)||void 0===a?void 0:a.length;u<_;u++){var a;const C=s.tags[u];this.TodoTags[C]||(this.TodoTags[C]=[],this.TagKeysToForm()),this.TodoTags[C].includes(s.id)||this.TodoTags[C].push(s.id)}}catch(u){console.log("AddTodoTags_on error: ",u)}}RemoveTodoTags(s){try{if(s&&s.tags)for(let a=0,u=s.tags.length;a<u;a++){const _=s.tags[a];if(this.TodoTags[_])for(let C=0,L=this.TodoTags[_].length;C<L;C++)if(s.id==this.TodoTags[_][C]){this.TodoTags[_].splice(C,1);break}this.TodoTags[_].length||(delete this.TodoTags[_],this.TagKeysToForm())}}catch(a){console.log("RemoveTodoTags_on error: ",a)}}TagKeysToForm(){const s=Object.keys(this.TodoTags);this.TodoTagsKey.length=0;for(let a=0,u=s.length;a<u;a++)this.TodoTagsKey.push({force_name:s[a],color:"#bbbbbb88",value:a})}SetPIPableInfo(s,a,u){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=s,this.PIPableInfo.PIPautoP5=a,this.PIPableInfo.framerate=u)}CleanPIPableInfo(){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=null,this.PIPableInfo.framerate=null)}OnCloseAutoPIPModeAct(){var s;null===(s=this.stream)||void 0===s||s.getTracks().forEach(a=>a.stop()),this.stream=null}CraeteAutoPIPMode(){try{var s,a;this.stream=this.PIPableInfo.PIPableCanvas.captureStream(null!==(s=this.PIPableInfo.framerate)&&void 0!==s?s:24),this.autoPIPVideoElement.srcObject=this.stream,null===(a=this.PIPableInfo.PIPautoP5)||void 0===a||a.redraw()}catch(u){console.log("error_CraeteAutoPIPMode: ",u),this.OnCloseAutoPIPModeAct()}}RemoveAutoPIPMode(s=!0){var a=this;return(0,j.A)(function*(){s&&a.CleanPIPableInfo();try{var u;yield null===(u=document)||void 0===u?void 0:u.exitPictureInPicture()}catch{}a.OnCloseAutoPIPModeAct()})()}afterLangInit(){this.NeedBackgroundMode="DesktopPWA"!=l.aH}RemoveAllModals(s=(()=>{})){var a=this;return(0,j.A)(function*(){let u="init";for(;u;)u=yield a.modalCtrl.getTop(),u&&(yield u.dismiss());s&&s()})()}CatchGETs(s){const a=s.split("?");if(a.length>1){const u=a[1].split("&");let _={};for(let C=0,L=u.length;C<L;C++){const U=u[C].split("=");_[U[0]]||(_[U[0]]=[]),_[U[0]].push(decodeURIComponent(U[1]))}return _}}readasQRCodeFromString(s){try{let a=new F({content:s,padding:4,width:8,height:8,color:tu?"#bbb":"#444",background:tu?"#111":"#fff",ecl:"M"}).svg();return this.sanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${btoa(a)}`)}catch(a){console.log("readasQRCodeFromString: ",a),this.p5toast.show({text:`${this.lang.text.GlobalAct.failed_to_gen_qr}: ${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`})}}CreateGodotIFrame(s,a,u=!1){var _=this;return new Promise(function(){var C=(0,j.A)(function*(L){var U,Q;let ae=function(){var Pe=(0,j.A)(function*(){try{if("godot"!=window.godot)throw"No godot";if(!_.godot_window.start_load_pck)throw"No act ready";yield _.indexed.GetGodotIndexedDB(),L()}catch{setTimeout(()=>{ae()},1e3)}});return function(){return Pe.apply(this,arguments)}}();_.godot_window&&_.godot_window.quit_godot&&_.godot_window.quit_godot(),_.godot_window&&_.godot_window.quit_ionic&&u&&_.godot_window.quit_ionic(),null===(U=_.godot_splash)||void 0===U||U.remove(),null===(Q=_.godot)||void 0===Q||Q.remove(),window.godot="",Object.keys(_.GodotCache).forEach(Ie=>{URL.revokeObjectURL(_.GodotCache[Ie]),delete _.GodotCache[Ie]}),_.GodotCache.html="assets/html/index.html";try{if(!localStorage.getItem("useCache"))throw"\uc624\ud504\ub77c\uc778 \uce90\uc2dc \uc6b0\ud68c\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c";const tt=yield(yield fetch("assets/html/index.audio.worklet.js")).blob(),it=URL.createObjectURL(tt);_.GodotCache.audio=it;const $t=yield(yield fetch("assets/html/index.wasm")).blob(),At=URL.createObjectURL($t);_.GodotCache.wasm=At;const Wt=yield(yield fetch("assets/html/index.pck")).blob(),Mt=URL.createObjectURL(Wt);_.GodotCache.pck=Mt;const gn=yield(yield fetch("assets/html/index.png")).blob(),Kn=URL.createObjectURL(gn);_.GodotCache.png=Kn;let Jn=yield(yield fetch("assets/html/index.js")).text();Jn=Jn.replace("`${loadPath}.audio.worklet.js`",`'${it}'`).replace(/`\${loadPath}\.wasm`/g,`'${At}'`).replace("this.config.mainPack || `${exe}.pck`;",`'${Mt}'`);const pr=new Blob([Jn],{type:"application/javascript"}),Yn=URL.createObjectURL(pr);_.GodotCache.js=Yn;let tr=yield(yield fetch("assets/html/index.html")).text();tr=tr.replace('<script src="index.js"><\/script>',`<script src="${Yn}"><\/script>`).replace('src="index.png"',`src="${Kn}"`);const Vr=new Blob([tr],{type:"text/html"}),Qr=URL.createObjectURL(Vr);_.GodotCache.html=Qr}catch(Pe){console.log("\uace0\ub3c4\uc5d4\uc9c4 \uc624\ud504\ub77c\uc778 \ud398\uc774\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",Pe)}let fe=document.createElement("iframe");fe.id="godot",fe.setAttribute("src",_.GodotCache.html),fe.setAttribute("frameborder","0"),fe.setAttribute("class","full_screen"),fe.setAttribute("allow","fullscreen; encrypted-media"),fe.setAttribute("scrolling","no"),fe.setAttribute("withCredentials","true"),s.indexOf("PostViewer_")>=0&&(fe.style.borderRadius="16px"),a.isMobile=_.NeedBackgroundMode,(s.indexOf("content_viewer_canvas")>=0||s.indexOf("avatar_sample")>=0)&&(a.create_thumbnail_p5=(Pe,Ie)=>{Object.keys(_.GodotCache).forEach(it=>{URL.revokeObjectURL(_.GodotCache[it]),delete _.GodotCache[it]}),new Et(tt=>{tt.setup=()=>{tt.noCanvas(),tt.pixelDensity(1),tt.smooth(),tt.loadImage("data:image/png;base64,"+Pe,function(){var it=(0,j.A)(function*(rt){let $t=tt.createCanvas(rt.width,rt.height);tt.image(rt,0,0),tt.textSize(16),tt.textWrap(tt.CHAR);let At=tt.height/24;tt.push(),tt.translate(At/6,At/6),tt.fill(0),tt.text(_.godot_window.filename,At,At,tt.width-2*At,tt.height-2*At),tt.filter(tt.BLUR,1,!1),tt.pop(),tt.fill(255),tt.text(_.godot_window.filename,At,At,tt.width-2*At,tt.height-2*At);let Ft=$t.elt.toDataURL("image/png").replace("image/png","image/octet-stream");try{var Wt,Mt;if(!(null!==(Wt=_.godot_window)&&void 0!==Wt&&Wt.alt_path||null!==(Mt=_.godot_window)&&void 0!==Mt&&Mt.path))throw"\uacbd\ub85c \uc5c6\ub294 \ud30c\uc77c";yield _.indexed.saveBase64ToUserPath(Ft,`${_.godot_window.alt_path||_.godot_window.path}_thumbnail.png`),_.modulate_thumbnail(Ie,"")}catch(wt){console.log("p.saveFrames: ",wt)}tt.remove()});return function(rt){return it.apply(this,arguments)}}(),it=>{console.error("create_thumbnail_load thumbnail failed: ",it),tt.remove()})}})}),a.fullscr_tog=Pe=>{_.ArcadeWithFullScreen=null!=Pe?Pe:!_.ArcadeWithFullScreen};let ye,Me=50;yield new Promise(Pe=>{const Ie=()=>{ye=document.getElementById(s),ye?Pe(void 0):setTimeout(()=>{Me--,Me>0?Ie():Pe(void 0)},100)};Ie()}),ye.appendChild(fe),_.godot_window=fe.contentWindow||fe.contentDocument,Object.keys(a).forEach(Pe=>_.godot_window[Pe]=a[Pe]),_.godot=fe,yield ae()});return function(L){return C.apply(this,arguments)}}())}ToggleFullScreen(s){this.ArcadeWithFullScreen=null!=s?s:!this.ArcadeWithFullScreen;const a=document.documentElement;this.ArcadeWithFullScreen?a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen():document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}CreateArcadeFrame(s){var a=this;return(0,j.A)(function*(){var _;yield a.AnonymousUserCreateName(),a.ArcadeLoaded=!0,a.ArcadeChatLog=null,a.arcadeChat.logs.length=0,a.arcadeChat.text="",a.noti.Current="arcade",a.ToggleChatInput=!1,"DesktopPWA"==l.aH?a.ArcadeWithFullScreen=!0:a.ToggleFullScreen(!0),yield a.CreateGodotIFrameWithDuplicateAct(s,"arcade_pck_loaded",{path:"tmp_files/duplicate/arcade.pck",force:!0,ws_send:_=>{var C;null===(C=a.ArcadeWS)||void 0===C||C.send(_)},webrtc_send:_=>{a.WebRTCService.send(_)},open_modal:()=>{a.GetHeaderAddress().then(_=>{a.ArcadeQRAddress=`${_}?token=${a.ArcadeWSAddress},${12013==a.ArcadeSquarePort?"":a.ArcadeSquarePort},${a.ArcadeSocketId}`,a.ArcadeQRCodeSRC=a.readasQRCodeFromString(a.ArcadeQRAddress),a.OpenArcadeQRCode()})},toggle_chat:_=>{a.ToggleChatInput=null!=_?_:!a.ToggleChatInput,a.ToggleChatInput?setTimeout(()=>{var C;a.ToggleChatInput&&(a.DomArcadeChatInput=null===(C=document.getElementById("arcadeInput"))||void 0===C?void 0:C.childNodes[1].childNodes[1].childNodes[1],a.DomArcadeChatInput.onfocus=()=>{a.toggleBlockMainShortcut(!0),a.portalHint=!1,a.NeedBackgroundMode&&document.fullscreenElement&&(a.ArcadeWithFullScreen=!1)},a.DomArcadeChatInput.onblur=()=>{a.toggleBlockMainShortcut(!1),a.portalHint=!0,a.NeedBackgroundMode&&document.fullscreenElement&&(a.ArcadeWithFullScreen=!0)},a.DomArcadeChatInput.onpaste=L=>{var U;let Q=[];for(const ae of L.clipboardData.files)Q.push({file:ae});if(1==Q.length)return null===(U=a.ArcadeSendAttachFunc)||void 0===U||U.call(a,{target:{files:[Q[0].file]}},"arcade_chat"),!1},a.auto_scroll_down())},500):a.ClearSignals()},get_pid:()=>a.ArcadeWSPeerId,check_mobile:()=>a.NeedBackgroundMode,kick_user:_=>{var C;null===(C=a.ArcadeWS)||void 0===C||C.send(JSON.stringify({type:"kick",pid:_}))},use_custom_character:(_=(0,j.A)(function*(){const C=a.ConvertPathToGodot("custom_characters"),L=yield a.indexed.GetFileListFromDB(C,a.indexed.godotDB);for(const Me of L)yield a.indexed.removeFileFromUserPath(Me,a.indexed.godotDB);const U="servers/self/avatar.pck",Q=a.ConvertPathToGodot("custom_characters/default.pck");if(!(yield a.indexed.checkIfFileExist(Q,a.indexed.godotDB))){const Ue=yield(yield fetch("assets/default.pck")).blob();yield a.indexed.saveBlobToUserPath(Ue,Q,a.indexed.godotDB)}if(yield a.indexed.checkIfFileExist(U)){const Me=yield a.indexed.loadBlobFromUserPath(U,"");yield a.indexed.saveBlobToUserPath(Me,a.ConvertPathToGodot(`custom_characters/${a.ArcadeWSPeerId}/character.pck`),a.indexed.godotDB);let Ue={blob:Me,filename:"character.pck",file_ext:"pck"};try{const Pe=a.ArcadeWSAddress.split("://"),Ie=`${"wss"==Pe[0]?"https":"http"}://${Pe[1]},${a.ArcadeCdnPort||9001},${a.ArcadeFilePort||9002}`,tt=(new Date).getTime(),it=`tmp_${a.ArcadeJoinedChannel}_${a.ArcadeWSPeerId}`;Ue.override_name=`${it.replace(/\//g,"_")}_${tt}_${Ue.filename}`,Ue.override_path="",Ue.override_filename=Ue.override_name,delete Ue.thumbnail;const rt=yield a.try_upload_to_user_custom_fs(Ue,it,void 0,a.lang.text.Arcade.Title,Ie);if(!rt)throw"\uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc \uc2e4\ud328";var ye;null===(ye=a.ArcadeWS)||void 0===ye||ye.send(JSON.stringify({type:"update",keys:["avatar_url"],avatar_url:rt}))}catch(Pe){console.log("\ud30c\uc77c \uc804\uc1a1 \uc2e4\ud328: ",Pe),a.p5toast.show({text:`${a.lang.text.Nakama.FailedUpload}: ${(Pe.statusText?`${Pe.statusText}(${Pe.status})`:Pe.status)||Pe}`})}}a.godot_window.after_use_custom_act()}),function(){return _.apply(this,arguments)})})})()}AnonymousUserCreateName(){var s=this;return(0,j.A)(function*(){s.CallbackNakama.users.self.display_name||(s.toggleBlockMainShortcut(!0),yield new Promise(function(){var a=(0,j.A)(function*(u){let _="";const C=yield s.alertCtrl.create({header:s.lang.text.Profile.name_placeholder,inputs:[{placeholder:s.lang.text.Profile.noname_user,type:"text"}],buttons:[{text:s.lang.text.UserFsDir.OK,handler:L=>{_=L[0]}}]});C.onDidDismiss().then(()=>{s.CallbackNakama.users.self.display_name=_,s.CallbackNakama.save_profile_to_server(),u(void 0)}),C.present()});return function(u){return a.apply(this,arguments)}}()),s.toggleBlockMainShortcut(!1))})()}ClearSignals(){this.DomArcadeChatInput&&(this.DomArcadeChatInput.onfocus=null,this.DomArcadeChatInput.onblur=null,this.DomArcadeChatInput.onpaste=null),this.DomArcadeChatInput=null,this.ArcadeChatLog=null}ConvertPathToGodot(s){return`godot/app_userdata/Client/${s}`}auto_scroll_down(s){this.ArcadeChatLog||(this.ArcadeChatLog=document.getElementById("arcadeChatLog")),this.ArcadeChatLog&&setTimeout(()=>{let a=this.ArcadeChatLog.scrollHeight;a<this.ArcadeChatLog.scrollTop+this.ArcadeChatLog.clientHeight+120&&this.ArcadeChatLog.scrollTo({top:a,behavior:"smooth"})},s||0)}CreateGodotIFrameWithDuplicateAct(s,a,u,_,C){var L=this;return(0,j.A)(function*(){if(L.ArcadeLoaded&&!u.force)L.p5toast.show({text:L.lang.text.Arcade.ArcadeOpened}),null==C||C();else{try{if(s.blob)throw"\uc900\ube44\ub41c blob \uc815\ubcf4";if(!s.url)throw"\ud30c\uc77c \uc815\ubcf4\uc5d0 URL\uc774 \uc5c6\uc74c";try{s.blob=yield L.downloadWithProgressAsBlob(s.url)}catch(ae){throw ae}}catch(ae){console.log("pck \uc5f4\ub78c \uc624\ub958: ",ae)}const U=L.ConvertPathToGodot(u.path);let Q=!1;if(L.indexed.godotDB)try{yield L.indexed.GetGodotIndexedDB(),yield L.indexed.saveBlobToUserPath(s.blob,U,L.indexed.godotDB),Q=!0}catch(ae){console.log("\ub0b4\ubd80 \ud30c\uc77c \uc5c6\uc74c: ",ae)}if(yield L.CreateGodotIFrame(a,u,!0),!Q){try{yield L.indexed.GetGodotIndexedDB(),yield L.indexed.saveBlobToUserPath(s.blob,U,L.indexed.godotDB)}catch{}yield L.CreateGodotIFrame(a,u)}L.PIPableInfo.PIPableCanvas=L.godot_window.document.getElementById("canvas"),L.godot_window.onblur=L.WindowOnBlurAct.pipmode,L.godot_window.onfocus=L.windowOnFocusAct.pipmode,null==_||_(),u.force&&(L.WebRTCService.dataChannelOnMsgAct=ae=>{L.godot_window&&L.godot_window.webrtc_recv&&L.godot_window.webrtc_recv(ae)}),L.godot_window.start_load_pck()}})()}downloadWithProgressAsBlob(s,a,u){var _=this;return(0,j.A)(function*(){let L=0;const U=s.split("/").pop(),Q=u||s;yield _.p5loading.update({id:Q,message:`${_.lang.text.Arcade.TryingDownload}: ${U}`});const ae=function(){var fe=(0,j.A)(function*(){try{const ye=yield fetch(s,{signal:null==a?void 0:a.signal,cache:"default"}),Me=ye.headers.get("Content-Length");if(!Me)throw console.log("Content-Length not available"),`${ye.statusText} (${ye.status})`;const Ue=parseInt(Me,10);let Pe=0;const Ie=ye.body.getReader(),tt=[];for(;;){const{done:rt,value:$t}=yield Ie.read();if(rt)break;tt.push($t),Pe+=$t.length;const At=Pe/Ue;_.p5loading.update({id:Q,message:`${_.lang.text.Arcade.TryingDownload}: ${U}: ${(100*At).toFixed(1)}%`,progress:At}),yield new Promise(Wt=>setTimeout(Wt,0))}const it=new Blob(tt);return _.p5loading.remove(Q),it}catch{if(L<5)return L++,console.log(`Retry ${L} of 5...`),yield new Promise(Me=>setTimeout(Me,1e3)),ae();throw console.log("Max retries reached. Download failed."),_.p5loading.remove(Q),"Download failed after multiple retries."}});return function(){return fe.apply(this,arguments)}}();return ae()})()}ToggleBackgroundMode(s){var a,u,_;this.IsBackgroundMode=null!=s?s:!this.IsBackgroundMode,null===(a=this.BackgroundAudioDiv)||void 0===a||a.remove(),this.BackgroundAudioDiv=null,null===(u=this.BGModeAudio)||void 0===u||u.pause(),null===(_=this.BGModeAudio)||void 0===_||_.remove(),this.BGModeAudio=null,this.IsBackgroundMode?(this.WindowOnBlurAct.bgmode=()=>{this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio))},this.windowOnFocusAct.bgmode=()=>{var C,L,U;this.WebRTCService.OnUse||(null===(C=this.BackgroundAudioDiv)||void 0===C||C.remove(),this.BackgroundAudioDiv=null,null===(L=this.BGModeAudio)||void 0===L||L.pause(),null===(U=this.BGModeAudio)||void 0===U||U.remove(),this.BGModeAudio=null)},this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOn,progress:null,forceEnd:1e3})):(delete this.windowOnFocusAct.bgmode,delete this.WindowOnBlurAct.bgmode,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOff,progress:1,forceEnd:1e3}))}CreateInfoSocket(s){this.ArcadeUserInputAddress?(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var a;null===(a=this.ArcadeWS)||void 0===a||a.send(JSON.stringify({type:"initInfo",act:"arcade",url:s}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct()):this.p5toast.show({text:this.lang.text.Arcade.NoWSAddress})}CatchWebSocketAddressFromServerInfo(s){return`${s.useSSL?"wss":"ws"}://${s.address}`}CreateArcadeWSOnMsgAct(){var s=this;const u="arcade",_=()=>{this.noti.Current==u?window.focus():this.SelectArcadeTab()};this.ArcadeWS.onmessage=C=>{var L,U,Q;let ae;ae="string"==typeof C.data?C.data:C.data.text();try{let Me=JSON.parse(ae);switch(Me.type){case"text":{let Ie=Me.msg.split(" "),tt=[],it="";const rt=this.ArcadeWSPeerId==Me.uid,$t=rt?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,At=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";for(let Wt=0,Mt=Ie.length;Wt<Mt;Wt++)0==Ie[Wt].indexOf("http://")||0==Ie[Wt].indexOf("https://")?(tt.push({text:" "+it+" "}),it="",tt.push({href:!0,text:Ie[Wt]})):it+=" "+Ie[Wt];it&&tt.push({text:" "+it}),this.arcadeChat.logs.push({color:At,text:tt,target:$t,isMe:rt}),this.noti.PushLocal({id:13,title:$t,body:Me.msg,bgcolor:At},u,_),this.auto_scroll_down()}break;case"file":{var fe,ye;const Ie=this.ArcadeWSPeerId==Me.uid,tt=Ie?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,it=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:it,file:Me,target:tt,isMe:Ie}),this.noti.PushLocal({id:13,title:tt,body:this.lang.text.MinimalChat.user_send_attach,image:"image"==(null===(fe=Me.info)||void 0===fe?void 0:fe.viewer)?null===(ye=Me.info)||void 0===ye?void 0:ye.url:void 0,bgcolor:it},u,_),this.auto_scroll_down()}break;case"req_info":this.ArcadeWSPeerId=Me.uid,this.ArcadeJoinedChannel=Me.channel_id;const Ue=Me.url;!function(){var Ie=(0,j.A)(function*(){try{var tt;s.SelectArcadeTab&&s.SelectArcadeTab();const it=yield s.downloadWithProgressAsBlob(Ue);yield s.CreateArcadeFrame({blob:it}),null===(tt=s.ArcadeWS)||void 0===tt||tt.send(JSON.stringify({type:"join",channel:Me.channel_id,name:s.CallbackNakama.users.self.display_name}))}catch(it){console.log("\ube60\ub978 \uc9c4\uc785 \uc2dc\uc791 \uc624\ub958: ",it)}});return function(){return Ie.apply(this,arguments)}}()();break;case"init_id":this.ArcadeJoinedChannel=Me.id,this.ArcadeWSPeerId=Me.uid,null===(L=this.afterInitAct)||void 0===L||L.call(this),this.ArcadeSocketId=Me.socketId,null===(U=this.ArcadeWS)||void 0===U||U.send(JSON.stringify({type:"join",channel:this.ArcadeJoinedChannel,name:this.CallbackNakama.users.self.display_name}));break;case"socket_react":switch(Me.act){case"WEBRTC_REPLY_INIT_SIGNAL":this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Reply),this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),"EOL"==Me.data_str&&(this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Offer),this.WebRTCService.CreateAnswer({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Ice);break;case"WEBRTC_REPLY_INIT_SIGNAL_PART":this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL_PART({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_ICE_CANDIDATES":this.WebRTCService.WEBRTC_ICE_CANDIDATES(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_datachannel),null===(Q=this.ArcadeWS)||void 0===Q||Q.send(JSON.stringify({type:"init_end",channel:this.ArcadeJoinedChannel}));break;case"WEBRTC_INIT_REQ_SIGNAL":this.WebRTCService.WEBRTC_INIT_REQ_SIGNAL({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_RECEIVE_ANSWER":this.WebRTCService.WEBRTC_RECEIVE_ANSWER(Me.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})}break;case"join":{const tt=this.ArcadeWSPeerId==Me.uid?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,it=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:it,text:[{text:" "+this.lang.text.MinimalChat.user_join}],target:tt,isSystem:!0}),this.noti.PushLocal({id:13,title:this.lang.text.MinimalChat.user_join,body:tt+` | ${this.lang.text.MinimalChat.user_join_comment}`,bgcolor:it},u,_),this.auto_scroll_down()}break;case"leave":{const tt=this.ArcadeWSPeerId==Me.uid?Me.name||this.lang.text.MinimalChat.name_me:Me.name||this.lang.text.MinimalChat.name_stranger_group,it=Me.uid?(Me.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):tu?"888888":"444444";this.arcadeChat.logs.push({color:it,text:[{text:" "+this.lang.text.MinimalChat.user_out}],target:tt,isSystem:!0}),this.noti.PushLocal({id:13,title:this.lang.text.MinimalChat.user_out,body:tt+` | ${this.lang.text.MinimalChat.user_out_comment}`,bgcolor:it},u,_),this.auto_scroll_down()}break;default:this.godot_window&&this.godot_window.ws_recv&&this.godot_window.ws_recv(ae)}}catch{}}}CreateArcadeWSCloseAct(){this.ArcadeWS.onerror=s=>{console.log("\uc544\ucf00\uc774\ub4dc \uc18c\ucf13 \uc624\ub958: ",s),this.ArcadeWS.close()},this.ArcadeWS.onclose=s=>{switch(s.reason){case"max_limit":this.p5toast.show({text:this.lang.text.MinimalChat.block});break;case"expired":this.p5toast.show({text:this.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",s.reason)}this.ArcadeSocketId=null,this.ArcadeWSPeerId=null,this.ArcadeJoinedChannel=null,this.WebRTCService.close_webrtc(),this.ArcadeQRAddress=null,this.ArcadeQRCodeSRC=null,this.ArcadeWS.onopen=null,this.ArcadeWS.onmessage=null,this.ArcadeWS.onclose=null,this.afterInitAct=null,this.ArcadeWS=null}}OpenArcadeQRCode(){this.ArcadeObject.QRCode.onDidDismiss().then(()=>{this.RestoreShortCutAct("arcade-qrcode")}),this.StoreShortCutAct("arcade-qrcode"),this.ArcadeObject.QRCode.present()}JoinArcadeWithSocketInfo(s){this.ArcadeWSAddress=s.address,this.ArcadeSquarePort=s.square_port,this.ArcadeCdnPort=s.cdn_port,this.ArcadeFilePort=s.apache_port,this.ArcadeSocketId=s.socketId,this.ArcadeWS?this.p5toast.show({text:this.lang.text.Arcade.AlreadyUseWS}):(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var a;null===(a=this.ArcadeWS)||void 0===a||a.send(JSON.stringify({type:"reqInfo",socketId:this.ArcadeSocketId}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct())}req_file_part_base64(s,a,u){let _="",C=new Uint8Array(s.contents.slice(a*lh,(a+1)*lh));for(let U=0,Q=C.byteLength;U<Q;U++)_+=String.fromCharCode(C[U]);let L=btoa(_);return this.indexed.saveTextFileToUserPath(JSON.stringify({type:"upload",index:a}),`${u}.history`),L}save_file_part(s,a,u){this.indexed.saveBase64ToUserPath(","+u,`${s}_part/${a}.part`),this.indexed.saveTextFileToUserPath(JSON.stringify({type:"download",index:a}),`${s}.history`)}remove_req_file_info(s,a){delete s.content.transfer_index,this.indexed.removeFileFromUserPath(`${a}.history`)}modulate_thumbnail(s,a,u){var _=this;return(0,j.A)(function*(){try{let C=yield _.indexed.loadBlobFromUserPath(`${s.path}_thumbnail.png`,"image/png");const L=URL.createObjectURL(C);return s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(L),void setTimeout(()=>{URL.revokeObjectURL(L),a&&URL.revokeObjectURL(a)},100)}catch{}switch(s.viewer){case"image":try{if(s.size>1e6)return;if(!s.url)throw"No URL";if(s.thumbnail)return;if(!(yield fetch(s.url,{method:"HEAD",signal:null==u?void 0:u.signal})).ok)throw"Not ok";s.thumbnail=s.url}catch{a&&(s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(a))}break;case"text":if(s.url){const C=yield fetch(s.url,{signal:null==u?void 0:u.signal}).then(L=>L.text());s.text=C.substring(0,45).split("\n")}else new Et(C=>{C.setup=()=>{C.noCanvas(),C.loadStrings(a,L=>{const Q=L.join("\n").substring(0,45);s.text=Q.split("\n"),URL.revokeObjectURL(a),C.remove()},L=>{console.log("\ud14d\uc2a4\ud2b8 \uc5f4\ub78c \ubd88\uac00: ",L),s.text=[_.lang.text.ChatRoom.downloaded],URL.revokeObjectURL(a),C.remove()})}})}a&&setTimeout(()=>{URL.revokeObjectURL(a)},100)})()}set_viewer_category(s){try{if(this.set_viewer_category_from_ext(s),"disabled"==s.viewer)if(0==s.type.indexOf("image/"))s.viewer="image";else if(0==s.type.indexOf("audio/"))s.viewer="audio";else if(0==s.type.indexOf("video/"))s.viewer="video";else{if(0!=s.type.indexOf("text/"))throw"\uc790\ub3d9\uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \ud0c0\uc785";s.viewer="text"}}catch(a){console.log("\ubd88\ud655\uc2e4\ud55c \ud0c0\uc785 \uc9c0\uc815: ",a,"/ type: ",s.type)}}set_viewer_category_from_ext(s){switch(s.file_ext){case"obj":case"stl":case"glb":case"gltf":s.viewer="model";break;case"pck":s.viewer="godot";break;case"png":case"jpeg":case"jpg":case"webp":case"gif":case"svg":s.viewer="image";break;case"wav":case"ogg":case"mp3":case"aac":s.viewer="audio";break;case"mp4":case"ogv":s.viewer="video";break;case"webm":try{s.viewer=0==s.type.indexOf("video/")?"video":"audio"}catch(a){console.log("\ud30c\uc77c \ud655\uc7a5\uc790 \uac80\ud1a0 \uc624\ub958: ",a,"/",s),s.viewer="disabled"}break;case"sh":case"c":case"cs":case"ts":case"js":case"cc":case"php":case"h":case"cpp":case"rs":case"java":case"gd":case"shader":case"py":case"ino":case"pde":case"asm":case"bas":case"pas":case"asp":case"html":case"xml":case"css":case"scss":case"pl":case"md":case"markdown":case"prop":case"properties":case"json":case"yml":s.viewer="code";break;case"csv":case"conf":case"log":case"txt":case"gitignore":s.viewer="text";break;case"pdf":s.viewer="pdf";break;default:s.viewer="disabled"}}GetBase64ThroughFileReader(s){return new Promise((a,u)=>{var _;let C=new FileReader;C=null!==(_=C._realReader)&&void 0!==_?_:C,C.onload=L=>{C.onload=null,C.onerror=null,a(L.target.result.replace(/"|\\|=/g,""))},C.onerror=L=>{C.onload=null,C.onerror=null,u(L)},C.readAsDataURL(s)})}Base64ToBlob(s,a=""){const u=atob(s.split(",")[1]),_=new ArrayBuffer(u.length),C=new Int8Array(_);for(let U=0,Q=u.length;U<Q;U++)C[U]=u.charCodeAt(U);return new Blob([C],{type:a})}upload_file_to_storage(s,a,u,_,C,L,U){var Q=this;return(0,j.A)(function*(){const ae=L||`upload_file_to_storage_${Date.now()}`;let ye,Me,fe=!1;C&&(ye=yield Q.try_upload_to_user_custom_fs(s,null==a?void 0:a.user_id,ae,U));try{var Ue;if(ye)throw fe=!0,"\uc0ac\uc6a9\uc790 \uc9c0\uc815\uc11c\ubc84\uc5d0\uc11c \uc774\ubbf8 \uc131\uacf5\ud568";const Pe=(new Date).getTime(),tt=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),it=s.override_name||`${null==a?void 0:a.user_id.replace(/\//g,"_")}_${Pe}_${tt}.${s.file_ext}`,rt=null!==(Ue=s.override_path)&&void 0!==Ue?Ue:`${null==a?void 0:a.user_id}/${Pe}`.replace(/_/g,"/");ye=`${u}//${_}:${(null==a?void 0:a.apache_port)||9002}/cdn/`;const $t=it.replace(/\//g,"_");Me=setInterval((0,j.A)(function*(){try{const gn=yield fetch(`${u}//${_}:${(null==a?void 0:a.cdn_port)||9001}/filesize/${$t}`,{method:"POST"}),Hn=Number(yield gn.text())/s.size,Jn=Math.floor(100*Hn);Q.p5loading.update({id:ae,message:`${U?U+": ":""}${s.filename}: ${Jn||0}%`,progress:Hn})}catch(gn){console.log("\ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",gn),clearInterval(Me)}}),700);let At=new FormData;const Ft=new File([s.blob],it);At.append("files",Ft),At.append("path",rt),At.append("filename",s.override_filename||`${tt}.${s.file_ext}`);let Wt=yield fetch(`${u}//${_}:${(null==a?void 0:a.cdn_port)||9001}/cdn/${it}`,{method:"POST",body:At});if(ye+=(yield Wt.text()),!Wt.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";Q.p5loading.update({id:ae,message:`${U?U+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(Me);const wt=yield fetch(ye,{method:"HEAD"});if(L||Q.p5loading.remove(ae),!wt.ok)throw"\uc694\uccad \uc2e4\ud328";fe=!0}catch(Pe){clearInterval(Me),Q.p5loading.update({id:ae,message:`${Q.lang.text.GlobalAct.CancelingUpload}: ${s.filename}`,forceEnd:350}),console.log("cdn \ud30c\uc77c \uc5c5\ub85c\ub4dc \ub2e8\uacc4 \uc2e4\ud328:",Pe)}return fe?ye:void 0})()}remove_file_from_storage(s,a){return(0,j.A)(function*(){try{let u=s.split("/cdn/");const _=u.pop();let C=u.shift(),L=new FormData;L.append("uuid",a.user_id),L.append("path",_);const U=C.lastIndexOf(":");U>5&&(C=C.substring(0,U)),yield fetch(`${C}:${(null==a?void 0:a.cdn_port)||9001}/remove/`,{method:"POST",body:L})}catch(u){console.log("remove_file_from_storage: ",u)}})()}remove_files_from_storage_with_key(s,a,u){return(0,j.A)(function*(){try{if(!s)throw"\ub300\uc0c1 \uc8fc\uc18c \uc5c6\uc74c";const _=s.lastIndexOf(":");_>5&&(s=s.substring(0,_));let C=new FormData;C.append("uuid",u.user_id),C.append("target_id",a),yield fetch(`${s}:${(null==u?void 0:u.cdn_port)||9001}/remove_key/`,{method:"POST",body:C})}catch(_){throw console.log("remove_files_from_storage_with_key: ",_),_}})()}try_upload_to_user_custom_fs(s,a,u,_,C){var L=this;return(0,j.A)(function*(){var U;const Q=u||`try_upload_to_user_custom_fs_${Date.now()}`;yield L.p5loading.update({id:Q,message:`${L.lang.text.Settings.TryToFallbackFS}: ${s.filename}`,progress:null});const ae=(new Date).getTime(),ye=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),Me=s.override_name||`${a.replace(/\//g,"_")}_${ae}_${ye}.${s.file_ext}`,Ue=null!==(U=s.override_path)&&void 0!==U?U:`${a}/${ae}`.replace(/_/g,"/");let Pe=new FormData;const Ie=new File([s.blob],Me);let tt;Pe.append("files",Ie),Pe.append("path",Ue),Pe.append("filename",s.override_filename||`${ye}.${s.file_ext}`),C||(C=localStorage.getItem("fallback_fs"));try{if(!C)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";const it=C.split(","),rt=it.shift(),$t=it.shift(),At=it.shift(),Ft=rt.split("://"),Wt=Ft.pop();let Mt=Ft.shift();Mt?Mt+=":":Mt=L.checkProtocolFromAddress(Wt)?"https:":"http:";let wt=`${Mt}//${Wt}:${At||9002}/cdn/`;const gn=Me.replace(/\//g,"_");tt=setInterval((0,j.A)(function*(){try{const pr=yield fetch(`${Mt}//${Wt}:${$t||9001}/filesize/${gn}`,{method:"POST"}),Nr=Number(yield pr.text())/s.size,tr=Math.floor(100*Nr);L.p5loading.update({id:Q,message:`${_?_+": ":""}${s.filename}: ${tr||0}%`,progress:Nr})}catch(pr){console.log("FFS \ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",pr),clearInterval(tt)}}),700);const Kn=yield fetch(`${Mt}//${Wt}:${$t||9001}/cdn/${Me}`,{method:"POST",body:Pe});if(wt+=(yield Kn.text()),!Kn.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";L.p5loading.update({id:Q,message:`${_?_+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(tt);const Jn=yield fetch(wt,{method:"HEAD"});if(u||L.p5loading.remove(Q),Jn.ok)return wt;throw"\uc694\uccad \uc2e4\ud328"}catch{return clearInterval(tt),void L.p5loading.remove(Q)}})()}GetHrefThumbnail(s,a,u){var _=this;return(0,j.A)(function*(){let C=null;0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(_.checkProtocolFromAddress(s)?"https://":"http://")+s);try{let U=localStorage.getItem("fallback_fs").split("://"),Q=U.shift(),fe=U.pop().split(":").pop();if(!fe)throw"\uc9c0\uc815\ub41c FFS \uc5c6\uc74c";let ye=yield fetch(`${Q||_.checkProtocolFromAddress(fe)?"https":"http"}://${fe}:9001/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!ye.ok)throw"FFS \uc6b0\ud68c \uc2e4\ud328";C=yield ye.json()}catch{if(!a)throw"\ub300\uc0c1 \uc11c\ubc84 \uc5c6\uc74c";try{const U=yield fetch(`${a}/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!U.ok)throw`${U.statusText} (${U.status})`;C=yield U.json()}catch(U){console.log("GetHrefThumbnail: ",U)}}return C})()}checkProtocolFromAddress(s){return!!s.replace(/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/g,"")}load_openmodel_file(s,a,u,_,C){var L=this;return(0,j.A)(function*(){return yield new Promise((U,Q)=>{const ae=_.createDiv();ae.style("width","100%"),ae.style("height","100%"),ae.parent(s);const fe=_.createDiv();fe.style("position","absolute"),fe.style("top","0px"),fe.style("right","0px"),fe.style("margin","8px"),fe.style("display","flex"),fe.style("width","fit-content"),fe.style("flex-direction","column"),fe.style("gap","8px"),fe.parent(s);const ye=ur=>{ur.style("padding","8px"),ur.style("border-radius","8px"),ur.style("size","16px"),ur.style("width","100%"),ur.style("background-color","#888b"),ur.style("color","white")};let Me;const Ue=_.createButton(L.lang.text.GlobalAct.ToggleWireframe);ye(Ue),Ue.mouseClicked(()=>{var ur;null===(ur=Me)||void 0===ur||ur()}),Ue.parent(fe);let Pe=[],Ie=!1;const tt=_.createDiv();tt.style("overflow","hidden"),tt.style("width","100%"),tt.style("height","fit-content"),tt.style("border-radius","8px"),tt.parent(fe);const it=_.createDiv();it.style("display","flex"),it.style("width","100%"),it.style("height","fit-content"),it.style("max-height","160px"),it.style("overflow-y","auto"),it.style("flex-direction","column"),it.style("gap","0px"),it.parent(tt);const rt=_.createButton(L.lang.text.GlobalAct.ToggleObjVisible);let $t;rt.style("background-color","#888b"),rt.style("color","white"),rt.style("padding","8px"),rt.parent(it),rt.mouseClicked(()=>{Ie=!Ie;for(let ur=0,xr=Pe.length;ur<xr;ur++)Ie?Pe[ur].show():Pe[ur].hide()});const At=_.createButton(L.lang.text.GlobalAct.ToggleSkeleton);ye(At),At.mouseClicked(()=>{var ur;null===(ur=$t)||void 0===ur||ur()}),At.parent(fe),At.hide();const Ft=_.createDiv();Ft.style("position","absolute"),Ft.style("top","0px"),Ft.style("left","0px"),Ft.style("margin","8px"),Ft.style("display","flex"),Ft.style("width","fit-content"),Ft.style("flex-direction","column"),Ft.style("gap","2px"),Ft.style("pointer-events","none"),Ft.style("color","white"),Ft.parent(s);const Wt=_.createDiv();Wt.parent(Ft);const Mt=_.createDiv();Mt.parent(Ft);const wt=_.createDiv();wt.parent(Ft);let gn,Kn=[],Hn=!1;const pr=C||"openmodel",Yn=s.clientWidth,Nr=s.clientHeight,tr=new co(70,Yn/Nr,.01,50);tr.position.set(1,1,3),tr.lookAt(new mt);const Vr=new Ao,Qr=new Mr(4473924);Vr.background=Qr;const vi=new Lv(16777215,1);Vr.add(vi);const Yi=new Dg(10,10,12303291);Vr.add(Yi);const cs=new I1(1);Vr.add(cs);const _r=new Ov(16777215,3);_r.position.set(5,5,5),Vr.add(_r),_r.shadow.bias=-.005,_r.shadow.mapSize.width=512,_r.shadow.mapSize.height=512;const $r=new Ig(_r,2);let Wr,Ci;switch(Vr.add($r),new py(tr,ae.elt).autoRotate=!0,a.file_ext){case"obj":Wr=new z_;break;case"stl":Wr=new $_;break;default:Wr=new ww}Wr.load(u,ur=>{let xr;switch(L.p5loading.remove(pr),a.file_ext){case"obj":xr=ur,Vr.add(xr),At.remove();break;case"stl":const pi=new Fo({color:22015});xr=new ls(ur,pi),Vr.add(xr),At.remove();break;default:xr=ur.scene,Vr.add(xr);let Dr=!1;xr.traverse(ei=>{ei.isSkinnedMesh&&(Dr=!0)}),Dr?(At.show(),Ci=new Ag(xr),Ci.visible=!1,Vr.add(Ci),$t=()=>{Ci.visible=!Ci.visible,At.style("background-color",Ci.visible?"var(--toast-background-color)":"#888b")}):At.remove(),ur.animations&&ur.animations.length>0&&(gn=new qv(xr),(ur=>{const xr=_.createDiv();xr.style("overflow","hidden"),xr.style("width","100%"),xr.style("height","fit-content"),xr.style("border-radius","8px"),xr.parent(fe);const rn=_.createDiv();rn.style("display","flex"),rn.style("width","100%"),rn.style("height","fit-content"),rn.style("max-height","160px"),rn.style("overflow-y","auto"),rn.style("flex-direction","column"),rn.style("gap","0px"),rn.style("size","16px"),rn.parent(xr);const pi=_.createButton(L.lang.text.GlobalAct.PlayAnim);pi.style("background-color","#888b"),pi.style("color","white"),pi.style("padding","8px"),pi.parent(rn),pi.mouseClicked(()=>{Hn=!Hn;for(let Dr=0,ei=Kn.length;Dr<ei;Dr++)Hn?Kn[Dr].show():Kn[Dr].hide()});for(let Dr=0,ei=ur.length;Dr<ei;Dr++){const Fr=_.createButton(ur[Dr].name);Fr.style("background-color","#666b"),Fr.style("color","white"),Fr.style("padding","8px"),Fr.mouseClicked(()=>{gn.stopAllAction(),Kn.forEach(Kr=>Kr.style("background-color","#666b"));const Ri=gn.clipAction(ur[Dr]);Fr.style("background-color","var(--toast-background-color)"),Ri.play()}),Fr.hide(),Fr.parent(rn),Kn.push(Fr)}})(ur.animations))}{let pi=0,Dr=0,ei=0,Fr=[];Vr.traverse(Ri=>{if(Ri.isMesh){pi++,Fr.push(Ri);const Kr=Ri.geometry;Kr.isBufferGeometry?(Dr+=Kr.attributes.position.count,ei+=Kr.index?Kr.index.count/3:Kr.attributes.position.count/3):Kr.isGeometry&&(Dr+=Kr.vertices.length,ei+=Kr.faces.length)}});for(let Ri=0,Kr=Fr.length;Ri<Kr;Ri++){const tn=_.createButton(Fr[Ri].name);tn.style("background-color","#666b"),tn.style("color","white"),tn.style("padding","8px"),tn.mouseClicked(()=>{Fr[Ri].visible=!Fr[Ri].visible,tn.style("background-color",Fr[Ri].visible?"#666b":"var(--toast-background-color)")}),tn.hide(),tn.parent(it),Pe.push(tn)}Wt.html(`Objects: ${pi}`),Mt.html(`Vertices: ${Dr}`),wt.html(`Triangles: ${ei}`)}Me=()=>{let pi;xr.traverse(Dr=>{Dr.isMesh&&(Dr.material.wireframe=!Dr.material.wireframe,pi=Dr.material.wireframe)}),Ue.style("background-color",pi?"var(--toast-background-color)":"#888b")},U({resized:()=>{try{Xi.setSize(0,0),tr.aspect=s.clientWidth/s.clientHeight,tr.updateProjectionMatrix(),Xi.setSize(s.clientWidth,s.clientHeight)}catch(pi){console.log("\ubaa8\ub378\ud30c\uc77c_\ud654\uba74 \ud06c\uae30 \ubcc0\uacbd \uc624\ub958: ",pi)}},snapshot:()=>Xi.domElement.toDataURL("image/png"),cleanup:()=>{for(Xi.setAnimationLoop(null);Vr.children.length>0;)Vr.remove(Vr.children[0]);Xi.dispose(),Xi.domElement=null},canvas:Xi.domElement,setpipinfo:()=>L.SetPIPableInfo(Xi.domElement)})},ur=>{const xr=ur.loaded/ur.total;L.p5loading.update({id:pr,message:`${L.lang.text.ContentViewer.OnLoadContent}: ${a.filename||a.name} (${Math.floor(100*xr)}%)`,progress:xr})},ur=>{L.p5loading.update({id:pr,message:`${L.lang.text.ContentViewer.OnFailedLoadContent}: ${(ur.statusText?`${ur.statusText}(${ur.status})`:ur.status)||ur}`,progress:null,forceEnd:500}),Q(ur)});let Es=0;const Xi=new y_({antialias:!0,preserveDrawingBuffer:!0});Xi.setSize(Yn,Nr),Xi.setAnimationLoop(ur=>{var xr;const rn=(ur-Es)/1e3;Es=ur,null===(xr=gn)||void 0===xr||xr.update(rn),Xi.render(Vr,tr)}),Xi.shadowMap.enabled=!0,Xi.shadowMap.type=S,ae.elt.appendChild(Xi.domElement)})})()}StoreShortCutAct(s){this.CacheShortCut[s]=this.p5KeyShortCut,this.p5KeyShortCut={}}GetConnectedAddress(){return`${location.protocol}//${location.host}${window.sub_path}`}GetHeaderAddress(){var s=this;return(0,j.A)(function*(){let a;try{if(s.CustomLocalAddress)return s.CustomLocalAddress;let u=s.GetConnectedAddress(),_=new AbortController;const C=setTimeout(()=>{_.abort("\uc8fc\uc18c \uac80\ud1a0 \uc2dc\uac04 \ucd08\uacfc"),_=null},250);let L=yield fetch(u,{method:"HEAD",signal:_.signal});if(clearTimeout(C),!L.ok)throw"\uc8fc\uc18c \uc5c6\uc74c";a=u}catch{a="https://is2you2.github.io/pjcone_pwa/"}return a})()}RestoreShortCutAct(s){this.CacheShortCut[s]&&Object.keys(this.CacheShortCut[s]).length&&(this.p5KeyShortCut=this.CacheShortCut[s]),delete this.CacheShortCut[s]}ClearShortCutAct(){let s=Object.keys(this.CacheShortCut);for(let a of s)delete this.CacheShortCut[a]}from_camera(s,a,u){var _=this;return(0,j.A)(function*(){const C=u||`from_camera_${Date.now()}`;let L={};_.p5loading.update({id:C,message:_.lang.text.ChatRoom.LoadImageFromCamera});try{const U=yield I.getPhoto({quality:90,resultType:A.Base64,source:K.Camera});L.filename=`Camera_${(new Date).toLocaleString().replace(/[:|.|\/]/g,"_")}.${U.format}`,L.file_ext=U.format,L.base64="data:image/jpeg;base64,"+U.base64String,_.p5loading.update({id:C,image:L.base64}),L.thumbnail=_.sanitizer.bypassSecurityTrustUrl(L.base64),L.type=`image/${U.format}`,L.typeheader="image",L.content_related_creator=[{user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"camera"}],L.content_creator={user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"camera"},L.path=`${s}${L.filename}`,L.viewer="image";let ae=yield _.indexed.saveBase64ToUserPath(L.base64,L.path);L.blob=new Blob([ae],{type:L.type}),L.size=L.blob.size}catch(U){throw _.p5loading.update({id:C,message:`${_.lang.text.GlobalAct.ErrorFromCamera}: ${(U.statusText?`${U.statusText}(${U.status})`:U.status)||U}`,image:null,forceEnd:350}),console.log("\uce74\uba54\ub77c \ud589\ub3d9 \uc2e4\ud328: ",U),U}return _.p5loading.remove(C),L})()}download_file(s,a){var u=this;return(0,j.A)(function*(){const _=`download_file_${a||Date.now()}`;if(yield u.p5loading.update({id:_,message:`${u.lang.text.ContentViewer.Download}: ${s.filename||s.name}`,forceEnd:null}),yield u.indexed.checkIfFileExist(s.alt_path||s.path))u.indexed.DownloadFileFromUserPath(s.alt_path||s.path,s.type,s.filename||s.name);else if(s.url)try{const L=yield u.downloadWithProgressAsBlob(s.url,void 0,_),U=URL.createObjectURL(L);let Q=document.createElement("a");Q.target="_blank",Q.href=U,Q.download=s.filename||s.name,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),Q.remove(),URL.revokeObjectURL(U)}catch(L){console.log("\ub2e4\uc6b4\ubc1b\uae30 \uc2e4\ud328: ",L),u.p5toast.show({text:`${s.filename||s.name} ${u.lang.text.Nakama.FailedDownload}: ${(L.statusText?`${L.statusText}(${L.status})`:L.status)||L}`,lateable:!0})}u.p5loading.remove(_)})()}selected_blobFile_callback_act(s,a,u,_="loaded",C=[]){let L={};return L.filename=s.name,L.file_ext=s.name.split(".").pop()||s.type||this.lang.text.ChatRoom.unknown_ext,L.size=s.size,L.type=s.type||s.type_override,L.path=`${a}${L.filename}`,L.blob=s,L.content_related_creator=[...C,{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_}],L.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_},this.set_viewer_category(L),L}voidDraw_fileAct_callback(s,a,u,_){var C=this;return(0,j.A)(function*(){let L={};L.filename=s.data.name,L.file_ext=s.data.file_ext||"png",L.type=s.data.type||"image/png",L.viewer="image",_?(L.content_related_creator=_,L.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}):(L.content_related_creator=[{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}],L.content_creator={timestamp:(new Date).getTime(),display_name:C.CallbackNakama.users.self.display_name,various:"voidDraw"}),L.typeheader="image",L.path=`${a}${L.filename}`;const U=URL.createObjectURL(s.data.img);L.thumbnail=C.sanitizer.bypassSecurityTrustUrl(U),yield C.indexed.saveBlobToUserPath(s.data.img,L.path);const Q=new Blob([s.data.img],{type:L.type});return L.blob=new File([Q],s.data.name),L.size=L.blob.size,C.p5loading.remove(s.data.loadingCtrl),setTimeout(()=>{URL.revokeObjectURL(U)},2500),L})()}TextEditorNewFileName(){let s=new Date;return`texteditor_${s.getUTCFullYear()}-${("0"+(s.getMonth()+1)).slice(-2)}-${("0"+s.getDate()).slice(-2)}_${("0"+s.getHours()).slice(-2)}-${("0"+s.getMinutes()).slice(-2)}-${("0"+s.getSeconds()).slice(-2)}.txt`}TextEditorAfterAct(s,a){let u={};return"html"===(u.content_creator={user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"textedit"},u.content_related_creator=[],u.content_related_creator.push(u.content_creator),u.blob=s.blob,u.path=s.path,u.size=s.blob.size,u.filename=s.blob.name||this.TextEditorNewFileName(),u.file_ext=u.filename.split(".").pop(),u.viewer="text",u.file_ext)?(u.type="text/html",u.viewer="code"):u.type="text/plain",u.typeheader="text",u}open_custom_site(s,a){try{let L,u=s.split("://"),C=u.pop().split(":");C.length>1&&C.pop();try{L="https"==u[0]||"wss"==u[0]}catch{L=this.checkProtocolFromAddress(C[0])}C[0]="//"+C[0],C.unshift(L?"https":"http"),window.open(C.join(":")+`:${a||9001}`,"_blank")}catch{}}open_link(s){0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(this.checkProtocolFromAddress(s)?"https://":"http://")+s),s&&window.open(s,"_blank");const a=document.activeElement;a&&a.blur()}GetValueFromClipboard(s){var a=this;return(0,j.A)(function*(){let u={type:"text/plain",value:""};const _=s||"clipboardAct";yield a.p5loading.update({id:_,message:a.lang.text.GlobalAct.ClipboardPaste,image:null,forceEnd:null});try{const C=yield navigator.clipboard.read();for(let L of C)for(let U of L.types){let Q=yield L.getType(U);if("image/png"==U){u.type=U;let ae=new File([Q],"image.png",{type:U});u.value=ae;const fe=URL.createObjectURL(ae);a.p5loading.update({id:_,image:fe}),setTimeout(()=>{URL.revokeObjectURL(fe)},100);break}if("text/plain"==U){u.type=U,u.value=yield Q.text();break}}return a.p5loading.remove(_),u}catch(C){return console.error("\ud074\ub9bd\ubcf4\ub4dc\uc5d0\uc11c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",C),a.p5toast.show({text:`${a.lang.text.GlobalAct.FailedToReadClipboard}: ${(C.statusText?`${C.statusText}(${C.status})`:C.status)||C}`}),u.type="error",u.value=C,a.p5loading.remove(_),u}})()}WriteValueToClipboard(s,a,u,_){var C=this;return(0,j.A)(function*(){if(!a)return;const L=_||"clipboardAct";yield C.p5loading.update({id:L,message:C.lang.text.GlobalAct.ClipboardCopy,image:null,forceEnd:null});try{let U={},Q=a;switch(s){case"text/plain":Q=new Blob([a],{type:s}),a=C.truncateString(a,80);break;case"image/png":const ae=URL.createObjectURL(Q);C.p5loading.update({id:L,image:ae}),setTimeout(()=>{URL.revokeObjectURL(ae)},100)}U[s]=Q,yield navigator.clipboard.write([new ClipboardItem(U)]),C.p5loading.update({id:L,message:`${C.lang.text.GlobalAct.PCClipboard}: ${u||a}`}),C.p5loading.remove(L)}catch(U){throw console.log("\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud558\uae30 \uc624\ub958: ",U),C.p5toast.show({text:`${C.lang.text.GlobalAct.ClipboardFailed}: ${(U.statusText?`${U.statusText}(${U.status})`:U.status)||U}`}),C.p5loading.update({id:L,forceEnd:350}),U}})()}truncateString(s,a){return(null==s?void 0:s.length)>a?s.slice(0,a-1)+"\u2026":s}HTMLEncode(s){let a=(s=[...s]).length,u=[];for(;a--;){let _=s[a].codePointAt(0);u[a]=_<65||_>127||_>90&&_<97?"&#"+_+";":s[a]}return u.join("")}HTMLDecode(s){const a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};return(s=s.replace(/&[a-zA-Z]+;/g,u=>a[u]||u)).replace(/&#(\d+);/g,(u,_)=>String.fromCodePoint(Number(_)))}StopAndSaveVoiceRecording(){var s=this;return(0,j.A)(function*(){try{let a=yield D.R.stopRecording();s.useVoiceRecording=null;let u=s.Base64ToBlob(`${a.value.mimeType},${a.value.recordDataBase64}`);return u.name=`${s.lang.text.ChatRoom.VoiceRecord}.${a.value.mimeType.split("/").pop().split(";")[0]}`,u.type_override=a.value.mimeType,u}catch(a){throw s.useVoiceRecording=null,s.p5toast.show({text:`${s.lang.text.AddPost.FailedToSaveVoice}:${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`}),a}})()}InstantCallSend(s){this.InstantCallWSClient&&this.InstantCallWSClient.readyState==this.InstantCallWSClient.OPEN&&this.InstantCallWSClient.send(s)}ActLikeModal(s,a){var u=this;return(0,j.A)(function*(){yield u.RemoveAllModals(),u.navCtrl.navigateForward(s,{animation:Jt.V5,state:a})})()}subscribeToPush(s){var a=this;return(0,j.A)(function*(){return yield(yield navigator.serviceWorker.register(`${window.sub_path}assets/sw.js`)).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a.urlBase64ToUint8Array(s)})})()}urlBase64ToUint8Array(s){const u=(s+"=".repeat((4-s.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_=atob(u);return new Uint8Array([..._].map(C=>C.charCodeAt(0)))}unsubscribeFromPush(s){return(0,j.A)(function*(){const a=yield navigator.serviceWorker.getRegistration(`${window.sub_path}assets/sw.js`);if(!a)return;const u=yield a.pushManager.getSubscription();u?(yield u.unsubscribe())?yield fetch(`${s}/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:u.endpoint})}):console.warn("\uad6c\ub3c5 \ucde8\uc18c \uc2e4\ud328"):console.log("\ud604\uc7ac \ud478\uc2dc \uad6c\ub3c5 \uc5c6\uc74c")})()}}return(v=t).\u0275fac=function(s){return new(s||v)(Lc.KVO(ah.W3),Lc.KVO(Uw.G),Lc.KVO(Bw.y),Lc.KVO(Vw.up),Lc.KVO(Gw.n),Lc.KVO(ah.hG),Lc.KVO(Fw.q9),Lc.KVO(zw.f),Lc.KVO($w.r))},v.\u0275prov=Lc.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}),t})()},755:(wr,Nn,je)=>{"use strict";je.d(Nn,{n:()=>l});var j=je(467),F=je(3953),Et=je(9900),Jt=je(4234);let l=(()=>{var ve;class K{constructor(A,b){this.p5toast=A,this.lang=b,this.PortalTabCallback=[]}RunInitCallBacks(){for(;this.PortalTabCallback.length;){const A=this.PortalTabCallback.shift();null==A||A()}}initialize(A=(()=>{})){if(this.ionicDB)return this.RunInitCallBacks(),void A();let b=indexedDB.open("/ionicfs",10),w=()=>{b.onsuccess=null,b.onupgradeneeded=null,b.onerror=null};b.onsuccess=I=>{I.target.result.close(),indexedDB.open("/ionicfs",11).onsuccess=f=>{this.ionicDB=f.target.result,this.RunInitCallBacks(),A(),w()}},b.onupgradeneeded=I=>{I.target.result.createObjectStore("FILE_DATA")},b.onerror=I=>{indexedDB.open("/ionicfs",11).onsuccess=d=>{this.ionicDB=d.target.result,this.RunInitCallBacks(),A(),w()}}}GetGodotIndexedDB(){var A=this;return(0,j.A)(function*(){if(!A.godotDB)return new Promise((b,w)=>{let I=indexedDB.open("/userfs",21),D=()=>{I.onsuccess=null,I.onerror=null};I.onsuccess=d=>{A.godotDB=I.result,D(),b(void 0)},I.onerror=d=>{console.error("IndexedDB initialized failed: ",d),D(),w(d)}})})()}createRecursiveDirectory(A,b=this.ionicDB){let w=A.lastIndexOf("/"),I=A.substring(0,w);I&&this.checkIfFileExist(I).then(D=>{if(D)return void this.createRecursiveDirectory(I,b);let d=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${I}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",A),this.createRecursiveDirectory(I,b),f()},d.onerror=h=>{console.error("IndexedDB createRecursiveDirectory failed: ",h),f()}})}createDirectory(A){return new Promise((b,w)=>{this.checkIfFileExist(A).then(I=>{I&&w(this.lang.text.UserFsDir.AlreadyExistFolder);let D=this.ionicDB.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${A}`),d=()=>{D.onsuccess=null,D.onerror=null};D.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",A),d(),b(void 0)},D.onerror=f=>{console.error("IndexedDB createRecursiveDirectory failed: ",f),d(),w(f)}})})}saveTextFileToUserPath(A,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:(new TextEncoder).encode(A)},`/userfs/${b}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),f(),I(h)},d.onerror=h=>{f(),D(h)}})}saveBase64ToUserPath(A,b,w=this.ionicDB){return new Promise((I,D)=>{let d=atob(A.split(",")[1]),f=new ArrayBuffer(d.length),h=new Int8Array(f);for(let m=0,g=d.length;m<g;m++)h[m]=d.charCodeAt(m);this.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,I(h)},p.onerror=m=>{p.onsuccess=null,p.onerror=null,D(m)}})}saveInt8ArrayToUserPath(A,b,w=this.ionicDB){return new Promise((I,D)=>{this.createRecursiveDirectory(b,w);let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:A},`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I()},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}saveBlobToUserPath(A,b,w=this.ionicDB){var I=this;return new Promise(function(){var D=(0,j.A)(function*(d,f){let h;try{let m=yield A.arrayBuffer();h=new Int8Array(m)}catch(m){f(m)}I.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,d(h)},p.onerror=m=>{p.onsuccess=null,p.onerror=null,f(m)}});return function(d,f){return D.apply(this,arguments)}}())}saveFileToUserPath(A,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put(A,`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I(f)},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}checkIfFileExist(A,b=this.ionicDB){return new Promise((w,I)=>{let D=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").count(`/userfs/${A}`);D.onsuccess=d=>{let f=d.target.result;D.onsuccess=null,D.onerror=null,w(f)},D.onerror=d=>{D.onsuccess=null,D.onerror=null,I(d)}})}GetFileListFromDB(A,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").getAllKeys();return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;for(let h=f.length-1;h>=0;h--)f[h].includes(A)?f[h]=f[h].substring(8):f.splice(h,1);w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}GetFileInfoFromDB(A,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${A}`);return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}loadTextFromUserPath(A,b=((I,D)=>{}),w=this.ionicDB){return new Promise(I=>{let D=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${A}`);D.onsuccess=d=>{if(d.target.result){let f=(new TextDecoder).decode(d.target.result.contents);D.onsuccess=null,D.onerror=null,b(!0,f),I(f)}else D.onsuccess=null,D.onerror=null,b(!1,`No file: , ${A}`),I(void 0)},D.onerror=d=>{console.error("IndexedDB loadTextFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null,I(void 0)}})}loadBlobFromUserPath(A,b,w=this.ionicDB){let I=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${A}`);return new Promise((D,d)=>{I.onsuccess=f=>{try{let h=new Blob([f.target.result.contents],{type:b});I.onsuccess=null,I.onerror=null,D(h)}catch(h){I.onsuccess=null,I.onerror=null,d(h)}},I.onerror=f=>{I.onsuccess=null,I.onerror=null,d(f)}})}DownloadFileFromUserPath(A,b,w,I=this.ionicDB){let D=I.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${A}`);D.onsuccess=d=>{try{let f=new Blob([d.target.result.contents],{type:b}),h=URL.createObjectURL(f),p=document.createElement("a");p.download=w,p.href=h,document.body.appendChild(p),p.click(),document.body.removeChild(p),p.remove(),URL.revokeObjectURL(h)}catch(f){console.error("DownloadFileFromUserPath: ",f),this.p5toast.show({text:`${this.lang.text.IndexedDB.FailedToDownloadFile}: ${(f.statusText?`${f.statusText}(${f.status})`:f.status)||f}`})}D.onsuccess=null,D.onerror=null},D.onerror=d=>{console.error("IndexedDB DownloadFileFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null}}removeFileFromUserPath(A,b=this.ionicDB){let w=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").delete(`/userfs/${A}`);return new Promise((I,D)=>{w.onsuccess=d=>{w.onsuccess=null,w.onerror=null,I(d)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}}return(ve=K).\u0275fac=function(A){return new(A||ve)(F.KVO(Et.G),F.KVO(Jt.y))},ve.\u0275prov=F.jDH({token:ve,factory:ve.\u0275fac,providedIn:"root"}),K})()},4234:(wr,Nn,je)=>{"use strict";je.d(Nn,{y:()=>l});var j=je(467),F=je(8326),Jt=je(3953);let l=(()=>{var ve;class K{constructor(){this.text={Portal:{},Main:{},Arcade:{},Subscribes:{},ChatRoom:{},Profile:{},GroupServer:{},Settings:{},Community:{},MinimalChat:{},voidDraw:{},PostViewer:{},TodoDetail:{},InstantCall:{},ContentViewer:{},WebRTCDevManager:{}},this.setable=[],this.lang=navigator.language.split("-")[0];let A=localStorage.getItem("lang");A&&(this.lang=A)}load_selected_lang(A="assets/data/translate.csv"){var b=this;return(0,j.A)(function*(){return yield new Promise((w,I)=>{new F(D=>{D.setup=()=>{D.noCanvas(),D.loadTable(A,"csv","header",d=>{try{let h,f=Object.keys(d.rows[0].obj);b.setable.length=0;for(let p of f)"#"!=p&&b.setable.push({value:p,display_name:d.rows[0].obj[p]});d.columns.includes(b.lang)||(b.lang=b.setable[0].value),localStorage.setItem("lang",b.lang);for(let p=0,m=d.rows.length;p<m;p++)"#"==d.rows[p].obj["#"].charAt(0)?(h=d.rows[p].obj["#"].substring(3),b.text[h]||(b.text[h]={})):h&&(b.text[h][d.rows[p].obj["#"]]=d.rows[p].obj[b.lang]);b.Callback_nakama&&b.Callback_nakama(),A&&URL.revokeObjectURL(A),D.remove(),w(void 0)}catch(f){console.log("\uc0ac\uc6a9\uc790 \uc5b8\uc5b4 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",f),A&&URL.revokeObjectURL(A),D.remove(),b.load_selected_lang(),w(void 0)}},d=>{console.error("\ub0b4\ubd80 \ubb38\uc11c \uc77d\uae30 \uc2e4\ud328: ",d),A&&URL.revokeObjectURL(A),D.remove(),I(d)})}})})})()}}return(ve=K).\u0275fac=function(A){return new(A||ve)},ve.\u0275prov=Jt.jDH({token:ve,factory:ve.\u0275fac,providedIn:"root"}),K})()},5547:(wr,Nn,je)=>{"use strict";je.d(Nn,{r:()=>ve});var j=je(467),F=je(92),Et=je(3953),Jt=je(755),l=je(3307);let ve=(()=>{var K;class M{constructor(b,w){this.indexed=b,this.p5loading=w,this.settings={silent:{icon_mono:!0,diychat:!0,simplechat:!0,todo:!0,engineppt:!0,arcade:!0,voidDraw:!0},simplify:!1,vibrate:!1},this.Current="",this.WebNoties={}}change_silent_settings(b){this.settings.silent[b]=!this.settings.silent[b],this.indexed.saveTextFileToUserPath(JSON.stringify(this.settings),"notification_settings.json")}load_settings(){this.indexed.loadTextFromUserPath("notification_settings.json",(b,w)=>{b&&w&&(this.settings=JSON.parse(w)),"boolean"==typeof this.settings.silent&&(this.settings.silent={icon_mono:this.settings.silent,diychat:this.settings.silent,simplechat:this.settings.silent,todo:this.settings.silent,engineppt:this.settings.silent,arcade:this.settings.silent,voidDraw:this.settings.silent})})}initialize(){var b=this;return(0,j.A)(function*(){b.ClearNoti(11),"serviceWorker"in navigator?(Notification.requestPermission().then(w=>{console.log("granted"===w?"\uc54c\ub9bc \uad8c\ud55c\uc774 \ud5c8\uc6a9\ub428.":"\uc54c\ub9bc \uad8c\ud55c\uc774 \uac70\ubd80\ub428.")},w=>{console.error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800: ",w)}),navigator.serviceWorker.addEventListener("message",w=>{if(w.data.reply){if("12"===w.data.data){let I={msg:w.data.reply};if(!I.msg.trim())return;I.name=b.NakamaCallback.users.self.display_name,b.Sq_client.send(JSON.stringify(I))}}else window.swRegListenerCallback[w.data.data]&&window.swRegListenerCallback[w.data.data](),delete window.swRegListenerCallback[w.data.data]})):console.log("Service Worker is not supported in this browser.")})()}PushLocal(b,w,I=(()=>{})){var D=this;return(0,j.A)(function*(){const d=document.hasFocus();if(d&&D.Current===w||!D.settings.silent[b.smallIcon_ln||w||"icon_mono"])return;const f=D.settings.simplify||d;if(f)return void D.p5loading.update({id:`${b.id||w}`,message:b.body?`${b.title}: ${b.body}`:b.title,clickable:I,image:b.image||b.icon||(b.smallIcon_ln?`assets/icon/${b.smallIcon_ln}.png`:void 0),progress:1,forceEnd:3500,bgcolor:b.bgcolor,soundAlert:f});const h={badge:b.icon||`assets/badge/${b.smallIcon_ln||w||"favicon"}.png`,body:b.body,icon:b.icon||`assets/icon/${b.smallIcon_ln||w||"favicon"}.png`,image:b.image,silent:!D.settings.silent[b.smallIcon_ln]||!1,tag:`${b.id}`,actions:b.actions_wm,data:b.data_wm,requireInteraction:!!b.actions_wm};try{if(D.WebNoties[b.id]){try{D.WebNoties[b.id].close()}catch{}delete D.WebNoties[b.id]}if(F.Yl)delete h.actions,D.WebNoties[b.id]=new Notification(b.title,{...h}),D.WebNoties[b.id].onclick=()=>{I(),window.focus(),D.WebNoties[b.id].close()};else{yield window.swReg.showNotification(b.title,{...h});let p=yield window.swReg.getNotifications();for(let m=0,g=p.length;m<g;m++)if(p[m].tag==`${b.id}`){D.WebNoties[b.id]=p[m];break}window.swRegListenerCallback[b.id]=()=>{I(),window.focus(),D.WebNoties[b.id].close()}}}catch(p){console.log("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958: ",p)}})()}ClearNoti(b){this.p5loading.remove(`${b}`),this.WebNoties[b]&&this.WebNoties[b].close()}}return(K=M).\u0275fac=function(b){return new(b||K)(Et.KVO(Jt.n),Et.KVO(l.f))},K.\u0275prov=Et.jDH({token:K,factory:K.\u0275fac,providedIn:"root"}),M})()},4237:(wr,Nn,je)=>{"use strict";je.d(Nn,{I:()=>yr,X:()=>Tr});var I,D,j=je(467),F=Object.defineProperty,Et=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,ve=(te,De,Ye)=>De in te?F(te,De,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):te[De]=Ye,K=(te,De)=>{for(var Ye in De||(De={}))Jt.call(De,Ye)&&ve(te,Ye,De[Ye]);if(Et)for(var Ye of Et(De))l.call(De,Ye)&&ve(te,Ye,De[Ye]);return te},M=(te,De,Ye)=>new Promise((T,N)=>{var B=q=>{try{ie(Ye.next(q))}catch(ce){N(ce)}},O=q=>{try{ie(Ye.throw(q))}catch(ce){N(ce)}},ie=q=>q.done?T(q.value):Promise.resolve(q.value).then(B,O);ie((Ye=Ye.apply(te,De)).next())}),A=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof A<"u"&&A,b_searchParams="URLSearchParams"in A,b_iterable="Symbol"in A&&"iterator"in Symbol,b_blob="FileReader"in A&&"Blob"in A&&function(){try{return new Blob,!0}catch{return!1}}(),b_formData="FormData"in A,b_arrayBuffer="ArrayBuffer"in A;function d(te){if("string"!=typeof te&&(te=String(te)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(te)||""===te)throw new TypeError('Invalid character in header field name: "'+te+'"');return te.toLowerCase()}function f(te){return"string"!=typeof te&&(te=String(te)),te}function h(te){var De={next:function(){var Ye=te.shift();return{done:void 0===Ye,value:Ye}}};return b_iterable&&(De[Symbol.iterator]=function(){return De}),De}function p(te){this.map={},te instanceof p?te.forEach(function(De,Ye){this.append(Ye,De)},this):Array.isArray(te)?te.forEach(function(De){this.append(De[0],De[1])},this):te&&Object.getOwnPropertyNames(te).forEach(function(De){this.append(De,te[De])},this)}function m(te){if(te.bodyUsed)return Promise.reject(new TypeError("Already read"));te.bodyUsed=!0}function g(te){return new Promise(function(De,Ye){te.onload=function(){De(te.result)},te.onerror=function(){Ye(te.error)}})}function x(te){var De=new FileReader,Ye=g(De);return De.readAsArrayBuffer(te),Ye}function k(te){if(te.slice)return te.slice(0);var De=new Uint8Array(te.byteLength);return De.set(new Uint8Array(te)),De.buffer}function X(){return this.bodyUsed=!1,this._initBody=function(te){this.bodyUsed=this.bodyUsed,this._bodyInit=te,te?"string"==typeof te?this._bodyText=te:b_blob&&Blob.prototype.isPrototypeOf(te)?this._bodyBlob=te:b_formData&&FormData.prototype.isPrototypeOf(te)?this._bodyFormData=te:b_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)?this._bodyText=te.toString():b_arrayBuffer&&b_blob&&function w(te){return te&&DataView.prototype.isPrototypeOf(te)}(te)?(this._bodyArrayBuffer=k(te.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(te)||D(te))?this._bodyArrayBuffer=k(te):this._bodyText=te=Object.prototype.toString.call(te):this._bodyText="",this.headers.get("content-type")||("string"==typeof te?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b_blob&&(this.blob=function(){var te=m(this);if(te)return te;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(x)}),this.text=function(){var te=m(this);if(te)return te;if(this._bodyBlob)return function E(te){var De=new FileReader,Ye=g(De);return De.readAsText(te),Ye}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function S(te){for(var De=new Uint8Array(te),Ye=new Array(De.length),T=0;T<De.length;T++)Ye[T]=String.fromCharCode(De[T]);return Ye.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b_formData&&(this.formData=function(){return this.text().then(ee)}),this.json=function(){return this.text().then(JSON.parse)},this}b_arrayBuffer&&(I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],D=ArrayBuffer.isView||function(te){return te&&I.indexOf(Object.prototype.toString.call(te))>-1}),p.prototype.append=function(te,De){te=d(te),De=f(De);var Ye=this.map[te];this.map[te]=Ye?Ye+", "+De:De},p.prototype.delete=function(te){delete this.map[d(te)]},p.prototype.get=function(te){return te=d(te),this.has(te)?this.map[te]:null},p.prototype.has=function(te){return this.map.hasOwnProperty(d(te))},p.prototype.set=function(te,De){this.map[d(te)]=f(De)},p.prototype.forEach=function(te,De){for(var Ye in this.map)this.map.hasOwnProperty(Ye)&&te.call(De,this.map[Ye],Ye,this)},p.prototype.keys=function(){var te=[];return this.forEach(function(De,Ye){te.push(Ye)}),h(te)},p.prototype.values=function(){var te=[];return this.forEach(function(De){te.push(De)}),h(te)},p.prototype.entries=function(){var te=[];return this.forEach(function(De,Ye){te.push([Ye,De])}),h(te)},b_iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var Y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function z(te,De){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Ye=(De=De||{}).body;if(te instanceof z){if(te.bodyUsed)throw new TypeError("Already read");this.url=te.url,this.credentials=te.credentials,De.headers||(this.headers=new p(te.headers)),this.method=te.method,this.mode=te.mode,this.signal=te.signal,!Ye&&null!=te._bodyInit&&(Ye=te._bodyInit,te.bodyUsed=!0)}else this.url=String(te);if(this.credentials=De.credentials||this.credentials||"same-origin",(De.headers||!this.headers)&&(this.headers=new p(De.headers)),this.method=function G(te){var De=te.toUpperCase();return Y.indexOf(De)>-1?De:te}(De.method||this.method||"GET"),this.mode=De.mode||this.mode||null,this.signal=De.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Ye)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Ye),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==De.cache&&"no-cache"!==De.cache)){var T=/([?&])_=[^&]*/;T.test(this.url)?this.url=this.url.replace(T,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function ee(te){var De=new FormData;return te.trim().split("&").forEach(function(Ye){if(Ye){var T=Ye.split("="),N=T.shift().replace(/\+/g," "),B=T.join("=").replace(/\+/g," ");De.append(decodeURIComponent(N),decodeURIComponent(B))}}),De}function H(te){var De=new p;return te.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(T){return 0===T.indexOf("\n")?T.substr(1,T.length):T}).forEach(function(T){var N=T.split(":"),B=N.shift().trim();if(B){var O=N.join(":").trim();De.append(B,O)}}),De}function re(te,De){if(!(this instanceof re))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');De||(De={}),this.type="default",this.status=void 0===De.status?200:De.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===De.statusText?"":""+De.statusText,this.headers=new p(De.headers),this.url=De.url||"",this._initBody(te)}z.prototype.clone=function(){return new z(this,{body:this._bodyInit})},X.call(z.prototype),X.call(re.prototype),re.prototype.clone=function(){return new re(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},re.error=function(){var te=new re(null,{status:0,statusText:""});return te.type="error",te};var Z=[301,302,303,307,308];re.redirect=function(te,De){if(-1===Z.indexOf(De))throw new RangeError("Invalid status code");return new re(null,{status:De,headers:{location:te}})};var _e=A.DOMException;try{new _e}catch{(_e=function(De,Ye){this.message=De,this.name=Ye;var T=Error(De);this.stack=T.stack}).prototype=Object.create(Error.prototype),_e.prototype.constructor=_e}function xe(te,De){return new Promise(function(Ye,T){var N=new z(te,De);if(N.signal&&N.signal.aborted)return T(new _e("Aborted","AbortError"));var B=new XMLHttpRequest;function O(){B.abort()}B.onload=function(){var q={status:B.status,statusText:B.statusText,headers:H(B.getAllResponseHeaders()||"")};q.url="responseURL"in B?B.responseURL:q.headers.get("X-Request-URL");var ce="response"in B?B.response:B.responseText;setTimeout(function(){Ye(new re(ce,q))},0)},B.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},B.onabort=function(){setTimeout(function(){T(new _e("Aborted","AbortError"))},0)},B.open(N.method,function ie(q){try{return""===q&&A.location.href?A.location.href:q}catch{return q}}(N.url),!0),"include"===N.credentials?B.withCredentials=!0:"omit"===N.credentials&&(B.withCredentials=!1),"responseType"in B&&(b_blob?B.responseType="blob":b_arrayBuffer&&N.headers.get("Content-Type")&&-1!==N.headers.get("Content-Type").indexOf("application/octet-stream")&&(B.responseType="arraybuffer")),!De||"object"!=typeof De.headers||De.headers instanceof p?N.headers.forEach(function(q,ce){B.setRequestHeader(ce,q)}):Object.getOwnPropertyNames(De.headers).forEach(function(q){B.setRequestHeader(q,f(De.headers[q]))}),N.signal&&(N.signal.addEventListener("abort",O),B.onreadystatechange=function(){4===B.readyState&&N.signal.removeEventListener("abort",O)}),B.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}xe.polyfill=!0,A.fetch||(A.fetch=xe,A.Headers=p,A.Request=z,A.Response=re);var oe="function"==typeof atob,me="function"==typeof btoa,ne="function"==typeof Buffer,J="function"==typeof TextDecoder?new TextDecoder:void 0,he="function"==typeof TextEncoder?new TextEncoder:void 0,et=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),le=(te=>{let De={};return te.forEach((Ye,T)=>De[Ye]=T),De})(et),V=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ge=String.fromCharCode.bind(String),Le="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):te=>new Uint8Array(Array.prototype.slice.call(te,0)),ut=te=>te.replace(/[^A-Za-z0-9\+\/]/g,""),Nt=me?te=>btoa(te):ne?te=>Buffer.from(te,"binary").toString("base64"):te=>{let De,Ye,T,N,B="";const O=te.length%3;for(let ie=0;ie<te.length;){if((Ye=te.charCodeAt(ie++))>255||(T=te.charCodeAt(ie++))>255||(N=te.charCodeAt(ie++))>255)throw new TypeError("invalid character found");De=Ye<<16|T<<8|N,B+=et[De>>18&63]+et[De>>12&63]+et[De>>6&63]+et[63&De]}return O?B.slice(0,O-3)+"===".substring(O):B},dt=ne?te=>Buffer.from(te).toString("base64"):te=>{let Ye=[];for(let T=0,N=te.length;T<N;T+=4096)Ye.push(ge.apply(null,te.subarray(T,T+4096)));return Nt(Ye.join(""))},Rt=te=>{if(te.length<2)return(De=te.charCodeAt(0))<128?te:De<2048?ge(192|De>>>6)+ge(128|63&De):ge(224|De>>>12&15)+ge(128|De>>>6&63)+ge(128|63&De);var De=65536+1024*(te.charCodeAt(0)-55296)+(te.charCodeAt(1)-56320);return ge(240|De>>>18&7)+ge(128|De>>>12&63)+ge(128|De>>>6&63)+ge(128|63&De)},Bt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,It=ne?te=>Buffer.from(te,"utf8").toString("base64"):he?te=>dt(he.encode(te)):te=>Nt((te=>te.replace(Bt,Rt))(te)),Tt=(te,De=!1)=>De?(te=>te.replace(/=/g,"").replace(/[+\/]/g,De=>"+"==De?"-":"_"))(It(te)):It(te),Ot=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,vt=te=>{switch(te.length){case 4:var Ye=((7&te.charCodeAt(0))<<18|(63&te.charCodeAt(1))<<12|(63&te.charCodeAt(2))<<6|63&te.charCodeAt(3))-65536;return ge(55296+(Ye>>>10))+ge(56320+(1023&Ye));case 3:return ge((15&te.charCodeAt(0))<<12|(63&te.charCodeAt(1))<<6|63&te.charCodeAt(2));default:return ge((31&te.charCodeAt(0))<<6|63&te.charCodeAt(1))}},$n=oe?te=>atob(ut(te)):ne?te=>Buffer.from(te,"base64").toString("binary"):te=>{if(te=te.replace(/\s+/g,""),!V.test(te))throw new TypeError("malformed base64.");te+="==".slice(2-(3&te.length));let De,T,N,Ye="";for(let B=0;B<te.length;)De=le[te.charAt(B++)]<<18|le[te.charAt(B++)]<<12|(T=le[te.charAt(B++)])<<6|(N=le[te.charAt(B++)]),Ye+=64===T?ge(De>>16&255):64===N?ge(De>>16&255,De>>8&255):ge(De>>16&255,De>>8&255,255&De);return Ye},bn=ne?te=>Le(Buffer.from(te,"base64")):te=>Le($n(te).split("").map(De=>De.charCodeAt(0))),Xn=ne?te=>Buffer.from(te,"base64").toString("utf8"):J?te=>J.decode(bn(te)):te=>(te=>te.replace(Ot,vt))($n(te)),gr=te=>Xn((te=>ut(te.replace(/[-_]/g,De=>"-"==De?"+":"/")))(te));function Ln(te,De,Ye){const T=K(K({},{method:te}),De);if(T.headers=K({},De.headers),typeof XMLHttpRequest<"u"){const N=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");null!=N&&N.set||(T.credentials="cocos-ignore")}return Object.keys(T.headers).includes("Accept")||(T.headers.Accept="application/json"),Object.keys(T.headers).includes("Content-Type")||(T.headers["Content-Type"]="application/json"),Object.keys(T.headers).forEach(N=>{T.headers[N]||delete T.headers[N]}),Ye&&(T.body=Ye),T}var nr=class{constructor(te,De,Ye){this.serverKey=te,this.basePath=De,this.timeoutMs=Ye}healthcheck(te,De={}){const B=this.buildFullUrl(this.basePath,"/healthcheck",new Map),O=Ln("GET",De,"");return te&&(O.headers.Authorization="Bearer "+te),Promise.race([fetch(B,O).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,q)=>setTimeout(q,this.timeoutMs,"Request timed out."))])}deleteAccount(te,De={}){const B=this.buildFullUrl(this.basePath,"/v2/account",new Map),O=Ln("DELETE",De,"");return te&&(O.headers.Authorization="Bearer "+te),Promise.race([fetch(B,O).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,q)=>setTimeout(q,this.timeoutMs,"Request timed out."))])}getAccount(te,De={}){const B=this.buildFullUrl(this.basePath,"/v2/account",new Map),O=Ln("GET",De,"");return te&&(O.headers.Authorization="Bearer "+te),Promise.race([fetch(B,O).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,q)=>setTimeout(q,this.timeoutMs,"Request timed out."))])}updateAccount(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account",N),ie=Ln("PUT",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}authenticateApple(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateCustom(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateDevice(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateEmail(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateFacebook(te,De,Ye,T,N,B,O={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const q=new Map;q.set("create",T),q.set("username",N),q.set("sync",B);let ce="";ce=JSON.stringify(Ye||{});const Ge=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",q),He=Ln("POST",O,ce);return te&&(He.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateGoogle(te,De,Ye,T,N,B={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let q="";q=JSON.stringify(Ye||{});const ce=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",ie),Ge=Ln("POST",B,q);return te&&(Ge.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}authenticateSteam(te,De,Ye,T,N,B,O={}){if(null==Ye)throw new Error("'account' is a required parameter but is null or undefined.");const q=new Map;q.set("create",T),q.set("username",N),q.set("sync",B);let ce="";ce=JSON.stringify(Ye||{});const Ge=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",q),He=Ln("POST",O,ce);return te&&(He.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}linkApple(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/apple",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkCustom(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/custom",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkDevice(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/device",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkEmail(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/email",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkFacebook(te,De,Ye,T={}){if(null==De)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("sync",Ye);let O="";O=JSON.stringify(De||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkGameCenter(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkGoogle(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/google",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}linkSteam(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/link/steam",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}sessionRefresh(te,De,Ye,T={}){if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const B=new Map;let O="";O=JSON.stringify(Ye||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Basic "+Tt(te+":"+De)),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}unlinkApple(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkCustom(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkDevice(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkEmail(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkFacebook(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkGoogle(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}unlinkSteam(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listChannelMessages(te,De,Ye,T,N,B={}){if(null==De)throw new Error("'channelId' is a required parameter but is null or undefined.");const O="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(De))),ie=new Map;ie.set("limit",Ye),ie.set("forward",T),ie.set("cursor",N);const ce=this.buildFullUrl(this.basePath,O,ie),Ge=Ln("GET",B,"");return te&&(Ge.headers.Authorization="Bearer "+te),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}event(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/event",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}deleteFriends(te,De,Ye,T={}){const B=new Map;B.set("ids",De),B.set("usernames",Ye);const ie=this.buildFullUrl(this.basePath,"/v2/friend",B),q=Ln("DELETE",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}listFriends(te,De,Ye,T,N={}){const O=new Map;O.set("limit",De),O.set("state",Ye),O.set("cursor",T);const q=this.buildFullUrl(this.basePath,"/v2/friend",O),ce=Ln("GET",N,"");return te&&(ce.headers.Authorization="Bearer "+te),Promise.race([fetch(q,ce).then(Ge=>{if(204==Ge.status)return Ge;if(Ge.status>=200&&Ge.status<300)return Ge.json();throw Ge}),new Promise((Ge,He)=>setTimeout(He,this.timeoutMs,"Request timed out."))])}addFriends(te,De,Ye,T={}){const B=new Map;B.set("ids",De),B.set("usernames",Ye);const ie=this.buildFullUrl(this.basePath,"/v2/friend",B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}blockFriends(te,De,Ye,T={}){const B=new Map;B.set("ids",De),B.set("usernames",Ye);const ie=this.buildFullUrl(this.basePath,"/v2/friend/block",B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}importFacebookFriends(te,De,Ye,T={}){if(null==De)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("reset",Ye);let O="";O=JSON.stringify(De||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/facebook",B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(te,De,Ye,T={}){const B=new Map;B.set("limit",De),B.set("cursor",Ye);const ie=this.buildFullUrl(this.basePath,"/v2/friend/friends",B),q=Ln("GET",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}importSteamFriends(te,De,Ye,T={}){if(null==De)throw new Error("'account' is a required parameter but is null or undefined.");const B=new Map;B.set("reset",Ye);let O="";O=JSON.stringify(De||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/steam",B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}listGroups(te,De,Ye,T,N,B,O,ie={}){const ce=new Map;ce.set("name",De),ce.set("cursor",Ye),ce.set("limit",T),ce.set("lang_tag",N),ce.set("members",B),ce.set("open",O);const He=this.buildFullUrl(this.basePath,"/v2/group",ce),gt=Ln("GET",ie,"");return te&&(gt.headers.Authorization="Bearer "+te),Promise.race([fetch(He,gt).then(Vt=>{if(204==Vt.status)return Vt;if(Vt.status>=200&&Vt.status<300)return Vt.json();throw Vt}),new Promise((Vt,cn)=>setTimeout(cn,this.timeoutMs,"Request timed out."))])}createGroup(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/group",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}deleteGroup(te,De,Ye={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("DELETE",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}updateGroup(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;let O="";O=JSON.stringify(Ye||{});const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("PUT",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}addGroupUsers(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;B.set("user_ids",Ye);const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}banGroupUsers(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;B.set("user_ids",Ye);const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;B.set("user_ids",Ye);const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}joinGroup(te,De,Ye={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("POST",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}kickGroupUsers(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;B.set("user_ids",Ye);const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}leaveGroup(te,De,Ye={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("POST",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(te,De,Ye,T={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(De))),B=new Map;B.set("user_ids",Ye);const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}listGroupUsers(te,De,Ye,T,N,B={}){if(null==De)throw new Error("'groupId' is a required parameter but is null or undefined.");const O="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(De))),ie=new Map;ie.set("limit",Ye),ie.set("state",T),ie.set("cursor",N);const ce=this.buildFullUrl(this.basePath,O,ie),Ge=Ln("GET",B,"");return te&&(Ge.headers.Authorization="Bearer "+te),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/purchase/facebookinstant",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listSubscriptions(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/subscription",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/subscription/apple",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/iap/subscription/google",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}getSubscription(te,De,Ye={}){if(null==De)throw new Error("'productId' is a required parameter but is null or undefined.");const T="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("GET",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(te,De,Ye={}){if(null==De)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const T="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("DELETE",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(te,De,Ye,T,N,B,O={}){if(null==De)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(De))),q=new Map;q.set("owner_ids",Ye),q.set("limit",T),q.set("cursor",N),q.set("expiry",B);const Ge=this.buildFullUrl(this.basePath,ie,q),He=Ln("GET",O,"");return te&&(He.headers.Authorization="Bearer "+te),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(te,De,Ye,T={}){if(null==De)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(De))),B=new Map;let O="";O=JSON.stringify(Ye||{});const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(te,De,Ye,T,N,B,O={}){if(null==De)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(De))).replace("{ownerId}",encodeURIComponent(String(Ye))),q=new Map;q.set("limit",T),q.set("expiry",N),q.set("cursor",B);const Ge=this.buildFullUrl(this.basePath,ie,q),He=Ln("GET",O,"");return te&&(He.headers.Authorization="Bearer "+te),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}listMatches(te,De,Ye,T,N,B,O,ie={}){const ce=new Map;ce.set("limit",De),ce.set("authoritative",Ye),ce.set("label",T),ce.set("min_size",N),ce.set("max_size",B),ce.set("query",O);const He=this.buildFullUrl(this.basePath,"/v2/match",ce),gt=Ln("GET",ie,"");return te&&(gt.headers.Authorization="Bearer "+te),Promise.race([fetch(He,gt).then(Vt=>{if(204==Vt.status)return Vt;if(Vt.status>=200&&Vt.status<300)return Vt.json();throw Vt}),new Promise((Vt,cn)=>setTimeout(cn,this.timeoutMs,"Request timed out."))])}deleteNotifications(te,De,Ye={}){const N=new Map;N.set("ids",De);const O=this.buildFullUrl(this.basePath,"/v2/notification",N),ie=Ln("DELETE",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listNotifications(te,De,Ye,T={}){const B=new Map;B.set("limit",De),B.set("cacheable_cursor",Ye);const ie=this.buildFullUrl(this.basePath,"/v2/notification",B),q=Ln("GET",T,"");return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}rpcFunc2(te,De,Ye,T,N={}){if(null==De)throw new Error("'id' is a required parameter but is null or undefined.");const B="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(De))),O=new Map;O.set("payload",Ye),O.set("http_key",T);const q=this.buildFullUrl(this.basePath,B,O),ce=Ln("GET",N,"");return te&&(ce.headers.Authorization="Bearer "+te),Promise.race([fetch(q,ce).then(Ge=>{if(204==Ge.status)return Ge;if(Ge.status>=200&&Ge.status<300)return Ge.json();throw Ge}),new Promise((Ge,He)=>setTimeout(He,this.timeoutMs,"Request timed out."))])}rpcFunc(te,De,Ye,T,N={}){if(null==De)throw new Error("'id' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'body' is a required parameter but is null or undefined.");const B="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(De))),O=new Map;O.set("http_key",T);let ie="";ie=JSON.stringify(Ye||{});const q=this.buildFullUrl(this.basePath,B,O),ce=Ln("POST",N,ie);return te&&(ce.headers.Authorization="Bearer "+te),Promise.race([fetch(q,ce).then(Ge=>{if(204==Ge.status)return Ge;if(Ge.status>=200&&Ge.status<300)return Ge.json();throw Ge}),new Promise((Ge,He)=>setTimeout(He,this.timeoutMs,"Request timed out."))])}sessionLogout(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/session/logout",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}readStorageObjects(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Ln("POST",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}writeStorageObjects(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Ln("PUT",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(te,De,Ye={}){if(null==De)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let B="";B=JSON.stringify(De||{});const O=this.buildFullUrl(this.basePath,"/v2/storage/delete",N),ie=Ln("PUT",Ye,B);return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listStorageObjects(te,De,Ye,T,N,B={}){if(null==De)throw new Error("'collection' is a required parameter but is null or undefined.");const O="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(De))),ie=new Map;ie.set("user_id",Ye),ie.set("limit",T),ie.set("cursor",N);const ce=this.buildFullUrl(this.basePath,O,ie),Ge=Ln("GET",B,"");return te&&(Ge.headers.Authorization="Bearer "+te),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}listStorageObjects2(te,De,Ye,T,N,B={}){if(null==De)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'userId' is a required parameter but is null or undefined.");const O="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(De))).replace("{userId}",encodeURIComponent(String(Ye))),ie=new Map;ie.set("limit",T),ie.set("cursor",N);const ce=this.buildFullUrl(this.basePath,O,ie),Ge=Ln("GET",B,"");return te&&(Ge.headers.Authorization="Bearer "+te),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}listTournaments(te,De,Ye,T,N,B,O,ie={}){const ce=new Map;ce.set("category_start",De),ce.set("category_end",Ye),ce.set("start_time",T),ce.set("end_time",N),ce.set("limit",B),ce.set("cursor",O);const He=this.buildFullUrl(this.basePath,"/v2/tournament",ce),gt=Ln("GET",ie,"");return te&&(gt.headers.Authorization="Bearer "+te),Promise.race([fetch(He,gt).then(Vt=>{if(204==Vt.status)return Vt;if(Vt.status>=200&&Vt.status<300)return Vt.json();throw Vt}),new Promise((Vt,cn)=>setTimeout(cn,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(te,De,Ye={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("DELETE",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listTournamentRecords(te,De,Ye,T,N,B,O={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(De))),q=new Map;q.set("owner_ids",Ye),q.set("limit",T),q.set("cursor",N),q.set("expiry",B);const Ge=this.buildFullUrl(this.basePath,ie,q),He=Ln("GET",O,"");return te&&(He.headers.Authorization="Bearer "+te),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(te,De,Ye,T={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(De))),B=new Map;let O="";O=JSON.stringify(Ye||{});const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("POST",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(te,De,Ye,T={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(De))),B=new Map;let O="";O=JSON.stringify(Ye||{});const ie=this.buildFullUrl(this.basePath,N,B),q=Ln("PUT",T,O);return te&&(q.headers.Authorization="Bearer "+te),Promise.race([fetch(ie,q).then(ce=>{if(204==ce.status)return ce;if(ce.status>=200&&ce.status<300)return ce.json();throw ce}),new Promise((ce,Ge)=>setTimeout(Ge,this.timeoutMs,"Request timed out."))])}joinTournament(te,De,Ye={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(De))),O=this.buildFullUrl(this.basePath,T,new Map),ie=Ln("POST",Ye,"");return te&&(ie.headers.Authorization="Bearer "+te),Promise.race([fetch(O,ie).then(q=>{if(204==q.status)return q;if(q.status>=200&&q.status<300)return q.json();throw q}),new Promise((q,ce)=>setTimeout(ce,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(te,De,Ye,T,N,B,O={}){if(null==De)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Ye)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(De))).replace("{ownerId}",encodeURIComponent(String(Ye))),q=new Map;q.set("limit",T),q.set("expiry",N),q.set("cursor",B);const Ge=this.buildFullUrl(this.basePath,ie,q),He=Ln("GET",O,"");return te&&(He.headers.Authorization="Bearer "+te),Promise.race([fetch(Ge,He).then(gt=>{if(204==gt.status)return gt;if(gt.status>=200&&gt.status<300)return gt.json();throw gt}),new Promise((gt,Vt)=>setTimeout(Vt,this.timeoutMs,"Request timed out."))])}getUsers(te,De,Ye,T,N={}){const O=new Map;O.set("ids",De),O.set("usernames",Ye),O.set("facebook_ids",T);const q=this.buildFullUrl(this.basePath,"/v2/user",O),ce=Ln("GET",N,"");return te&&(ce.headers.Authorization="Bearer "+te),Promise.race([fetch(q,ce).then(Ge=>{if(204==Ge.status)return Ge;if(Ge.status>=200&&Ge.status<300)return Ge.json();throw Ge}),new Promise((Ge,He)=>setTimeout(He,this.timeoutMs,"Request timed out."))])}listUserGroups(te,De,Ye,T,N,B={}){if(null==De)throw new Error("'userId' is a required parameter but is null or undefined.");const O="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(De))),ie=new Map;ie.set("limit",Ye),ie.set("state",T),ie.set("cursor",N);const ce=this.buildFullUrl(this.basePath,O,ie),Ge=Ln("GET",B,"");return te&&(Ge.headers.Authorization="Bearer "+te),Promise.race([fetch(ce,Ge).then(He=>{if(204==He.status)return He;if(He.status>=200&&He.status<300)return He.json();throw He}),new Promise((He,gt)=>setTimeout(gt,this.timeoutMs,"Request timed out."))])}buildFullUrl(te,De,Ye){let T=te+De+"?";for(let[N,B]of Ye)B instanceof Array?T+=B.reduce((O,ie)=>O+encodeURIComponent(N)+"="+encodeURIComponent(ie)+"&",""):null!=B&&(T+=encodeURIComponent(N)+"="+encodeURIComponent(B)+"&");return T}},mn=class{constructor(te,De,Ye){this.created=Ye,this.token=te,this.refresh_token=De,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(te,De)}isexpired(te){return this.expires_at-te<0}isrefreshexpired(te){return this.refresh_expires_at-te<0}update(te,De){const Ye=te.split(".");if(3!=Ye.length)throw"jwt is not valid.";const T=JSON.parse($n(Ye[1])),N=Math.floor(parseInt(T.exp));if(De){const B=De.split(".");if(3!=B.length)throw"refresh jwt is not valid.";const O=JSON.parse($n(B[1])),ie=Math.floor(parseInt(O.exp));this.refresh_expires_at=ie,this.refresh_token=De}this.token=te,this.expires_at=N,this.username=T.usn,this.user_id=T.uid,this.vars=T.vrs}static restore(te,De){return new mn(te,De,!1)}},qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ct=0;ct<64;ct++)Tn[qn.charCodeAt(ct)]=ct;var ct,pt=function(te){var Ye,De=new Uint8Array(te),T=De.length,N="";for(Ye=0;Ye<T;Ye+=3)N+=qn[De[Ye]>>2],N+=qn[(3&De[Ye])<<4|De[Ye+1]>>4],N+=qn[(15&De[Ye+1])<<2|De[Ye+2]>>6],N+=qn[63&De[Ye+2]];return T%3==2?N=N.substring(0,N.length-1)+"=":T%3==1&&(N=N.substring(0,N.length-2)+"=="),N},Qe=function(te){var T,B,O,ie,q,De=.75*te.length,Ye=te.length,N=0;"="===te[te.length-1]&&(De--,"="===te[te.length-2]&&De--);var ce=new ArrayBuffer(De),Ge=new Uint8Array(ce);for(T=0;T<Ye;T+=4)B=Tn[te.charCodeAt(T)],O=Tn[te.charCodeAt(T+1)],ie=Tn[te.charCodeAt(T+2)],q=Tn[te.charCodeAt(T+3)],Ge[N++]=B<<2|O>>4,Ge[N++]=(15&O)<<4|ie>>2,Ge[N++]=(3&ie)<<6|63&q;return ce},xt=class{get onClose(){return this._socket.onclose}set onClose(te){this._socket.onclose=te}get onError(){return this._socket.onerror}set onError(te){this._socket.onerror=te}get onMessage(){return this._socket.onmessage}set onMessage(te){te?this._socket.onmessage=De=>{const Ye=JSON.parse(De.data);Ye.match_data&&Ye.match_data.data?Ye.match_data.data=new Uint8Array(Qe(Ye.match_data.data)):Ye.party_data&&Ye.party_data.data&&(Ye.party_data.data=new Uint8Array(Qe(Ye.party_data.data))),te(Ye)}:te=null}get onOpen(){return this._socket.onopen}set onOpen(te){this._socket.onopen=te}isOpen(){var te;return(null==(te=this._socket)?void 0:te.readyState)==WebSocket.OPEN}connect(te,De,Ye,T,N){const B=`${te}${De}:${Ye}/ws?lang=en&status=${encodeURIComponent(T.toString())}&token=${encodeURIComponent(N)}`;this._socket=new WebSocket(B)}close(){this._socket.close(),this._socket=void 0}send(te){if(te.match_data_send){te.match_data_send.op_code=te.match_data_send.op_code.toString();let De=te.match_data_send.data;De&&De instanceof Uint8Array?te.match_data_send.data=pt(De.buffer):De&&(te.match_data_send.data=Nt(De))}else if(te.party_data_send){te.party_data_send.op_code=te.party_data_send.op_code.toString();let De=te.party_data_send.data;De&&De instanceof Uint8Array?te.party_data_send.data=pt(De.buffer):De&&(te.party_data_send.data=Nt(De))}this._socket.send(JSON.stringify(te))}},fn=class{constructor(te,De,Ye=!1,T=!1,N=new xt,B=fn.DefaultSendTimeoutMs){this.host=te,this.port=De,this.useSSL=Ye,this.verbose=T,this.adapter=N,this.sendTimeoutMs=B,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=fn.DefaultHeartbeatTimeoutMs}generatecid(){const te=this.nextCid.toString();return++this.nextCid,te}connect(te,De=!1,Ye=fn.DefaultConnectTimeoutMs){return this.adapter.isOpen()?Promise.resolve(te):(this.adapter.connect(this.useSSL?"wss://":"ws://",this.host,this.port,De,te.token),this.adapter.onClose=N=>{this.ondisconnect(N)},this.adapter.onError=N=>{this.onerror(N)},this.adapter.onMessage=N=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(N)),N.cid){const B=this.cIds[N.cid];if(!B)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",N));delete this.cIds[N.cid],N.error?B.reject(N.error):B.resolve(N)}else N.notifications?N.notifications.notifications.forEach(B=>{B.content=B.content?JSON.parse(B.content):void 0,this.onnotification(B)}):N.match_data?(N.match_data.op_code=parseInt(N.match_data.op_code),this.onmatchdata(N.match_data)):N.match_presence_event?this.onmatchpresence(N.match_presence_event):N.matchmaker_ticket?this.onmatchmakerticket(N.matchmaker_ticket):N.matchmaker_matched?this.onmatchmakermatched(N.matchmaker_matched):N.status_presence_event?this.onstatuspresence(N.status_presence_event):N.stream_presence_event?this.onstreampresence(N.stream_presence_event):N.stream_data?this.onstreamdata(N.stream_data):N.channel_message?(N.channel_message.content=JSON.parse(N.channel_message.content),this.onchannelmessage(N.channel_message)):N.channel_presence_event?this.onchannelpresence(N.channel_presence_event):N.party_data?(N.party_data.op_code=parseInt(N.party_data.op_code),this.onpartydata(N.party_data)):N.party_close?this.onpartyclose(N.party_close):N.party_join_request?this.onpartyjoinrequest(N.party_join_request):N.party_leader?this.onpartyleader(N.party_leader):N.party_matchmaker_ticket?this.onpartymatchmakerticket(N.party_matchmaker_ticket):N.party_presence_event?this.onpartypresence(N.party_presence_event):N.party?this.onparty(N.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",N)},new Promise((N,B)=>{this.adapter.onOpen=O=>{this.verbose&&window&&window.console&&console.log(O),this.pingPong(),N(te)},this.adapter.onError=O=>{B(O),this.adapter.close()},setTimeout(()=>{B("The socket timed out when trying to connect.")},Ye)}))}disconnect(te=!0){this.adapter.isOpen()&&this.adapter.close(),te&&this.ondisconnect({})}setHeartbeatTimeoutMs(te){this._heartbeatTimeoutMs=te}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(te){this.verbose&&window&&window.console&&console.log(te)}onerror(te){this.verbose&&window&&window.console&&console.log(te)}onchannelmessage(te){this.verbose&&window&&window.console&&console.log(te)}onchannelpresence(te){this.verbose&&window&&window.console&&console.log(te)}onnotification(te){this.verbose&&window&&window.console&&console.log(te)}onmatchdata(te){this.verbose&&window&&window.console&&console.log(te)}onmatchpresence(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onmatchmakermatched(te){this.verbose&&window&&window.console&&console.log(te)}onparty(te){this.verbose&&window&&window.console&&console.log(te)}onpartyclose(te){this.verbose&&window&&window.console&&console.log("Party closed: "+te)}onpartyjoinrequest(te){this.verbose&&window&&window.console&&console.log(te)}onpartydata(te){this.verbose&&window&&window.console&&console.log(te)}onpartyleader(te){this.verbose&&window&&window.console&&console.log(te)}onpartymatchmakerticket(te){this.verbose&&window&&window.console&&console.log(te)}onpartypresence(te){this.verbose&&window&&window.console&&console.log(te)}onstatuspresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreampresence(te){this.verbose&&window&&window.console&&console.log(te)}onstreamdata(te){this.verbose&&window&&window.console&&console.log(te)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(te,De=fn.DefaultSendTimeoutMs){const Ye=te;return new Promise((T,N)=>{if(this.adapter.isOpen())if(Ye.match_data_send)this.adapter.send(Ye),T();else if(Ye.party_data_send)this.adapter.send(Ye),T();else{Ye.channel_message_send?Ye.channel_message_send.content=JSON.stringify(Ye.channel_message_send.content):Ye.channel_message_update&&(Ye.channel_message_update.content=JSON.stringify(Ye.channel_message_update.content));const B=this.generatecid();this.cIds[B]={resolve:T,reject:N},setTimeout(()=>{N("The socket timed out while waiting for a response.")},De),Ye.cid=B,this.adapter.send(Ye)}else N("Socket connection has not been established yet.");if(this.verbose&&window&&window.console){const B=K({},Ye);B.match_data_send&&B.match_data_send.data?B.match_data_send.data=gr(B.match_data_send.data):B.party_data_send&&B.party_data_send.data&&(B.party_data_send.data=gr(B.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(B))}})}acceptPartyMember(te,De){return this.send({party_accept:{party_id:te,presence:De}})}addMatchmaker(te,De,Ye,T,N){return M(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:De,max_count:Ye,query:te,string_properties:T,numeric_properties:N}})).matchmaker_ticket})}addMatchmakerParty(te,De,Ye,T,N,B){return M(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:te,min_count:Ye,max_count:T,query:De,string_properties:N,numeric_properties:B}})).party_matchmaker_ticket})}closeParty(te){return M(this,null,function*(){return yield this.send({party_close:{party_id:te}})})}createMatch(te){return M(this,null,function*(){return(yield this.send({match_create:{name:te}})).match})}createParty(te,De){return M(this,null,function*(){return(yield this.send({party_create:{open:te,max_size:De}})).party})}followUsers(te){return M(this,null,function*(){return(yield this.send({status_follow:{user_ids:te}})).status})}joinChat(te,De,Ye,T){return M(this,null,function*(){return(yield this.send({channel_join:{target:te,type:De,persistence:Ye,hidden:T}})).channel})}joinMatch(te,De,Ye){return M(this,null,function*(){const T={match_join:{metadata:Ye}};return De?T.match_join.token=De:T.match_join.match_id=te,(yield this.send(T)).match})}joinParty(te){return M(this,null,function*(){return yield this.send({party_join:{party_id:te}})})}leaveChat(te){return this.send({channel_leave:{channel_id:te}})}leaveMatch(te){return this.send({match_leave:{match_id:te}})}leaveParty(te){return this.send({party_leave:{party_id:te}})}listPartyJoinRequests(te){return M(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:te}})).party_join_request})}promotePartyMember(te,De){return M(this,null,function*(){return(yield this.send({party_promote:{party_id:te,presence:De}})).party_leader})}removeChatMessage(te,De){return M(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:te,message_id:De}})).channel_message_ack})}removeMatchmaker(te){return this.send({matchmaker_remove:{ticket:te}})}removeMatchmakerParty(te,De){return this.send({party_matchmaker_remove:{party_id:te,ticket:De}})}removePartyMember(te,De){return M(this,null,function*(){return this.send({party_remove:{party_id:te,presence:De}})})}rpc(te,De,Ye){return M(this,null,function*(){return(yield this.send({rpc:{id:te,payload:De,http_key:Ye}})).rpc})}sendMatchState(te,De,Ye,T,N){return M(this,null,function*(){return this.send({match_data_send:{match_id:te,op_code:De,data:Ye,presences:null!=T?T:[],reliable:N}})})}sendPartyData(te,De,Ye){return this.send({party_data_send:{party_id:te,op_code:De,data:Ye}})}unfollowUsers(te){return this.send({status_unfollow:{user_ids:te}})}updateChatMessage(te,De,Ye){return M(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:te,message_id:De,content:Ye}})).channel_message_ack})}updateStatus(te){return this.send({status_update:{status:te}})}writeChatMessage(te,De){return M(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:te,content:De}})).channel_message_ack})}pingPong(){return M(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{return void(this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()))}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},Cn=fn;Cn.DefaultHeartbeatTimeoutMs=1e4,Cn.DefaultSendTimeoutMs=1e4,Cn.DefaultConnectTimeoutMs=3e4;var yn=class{constructor(te="defaultkey",De="127.0.0.1",Ye="7350",T=!1,N=7e3,B=!0){this.serverkey=te,this.host=De,this.port=Ye,this.useSSL=T,this.timeout=N,this.autoRefreshSession=B,this.expiredTimespanMs=3e5,this.apiClient=new nr(te,`${T?"https://":"http://"}${De}:${Ye}`,N)}addGroupUsers(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addGroupUsers(te.token,De,Ye).then(T=>void 0!==T)})}addFriends(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.addFriends(te.token,De,Ye).then(T=>void 0!==T)})}authenticateApple(te,De,Ye){return M(this,arguments,function*(T,N,B,O={},ie={}){return this.apiClient.authenticateApple(this.serverkey,"",{token:T,vars:O},N,B,ie).then(ce=>new mn(ce.token||"",ce.refresh_token||"",ce.created||!1))})}authenticateCustom(te,De,Ye,T={},N={}){return this.apiClient.authenticateCustom(this.serverkey,"",{id:te,vars:T},De,Ye,N).then(O=>new mn(O.token||"",O.refresh_token||"",O.created||!1))}authenticateDevice(te,De,Ye,T){return this.apiClient.authenticateDevice(this.serverkey,"",{id:te,vars:T},De,Ye).then(B=>new mn(B.token||"",B.refresh_token||"",B.created||!1))}authenticateEmail(te,De,Ye,T,N){return this.apiClient.authenticateEmail(this.serverkey,"",{email:te,password:De,vars:N},Ye,T).then(O=>new mn(O.token||"",O.refresh_token||"",O.created||!1))}authenticateFacebookInstantGame(te,De,Ye,T,N={}){const B={signed_player_info:te,vars:T};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:B.signed_player_info,vars:B.vars},De,Ye,N).then(O=>new mn(O.token||"",O.refresh_token||"",O.created||!1))}authenticateFacebook(te,De,Ye,T,N,B={}){return this.apiClient.authenticateFacebook(this.serverkey,"",{token:te,vars:N},De,Ye,T,B).then(ie=>new mn(ie.token||"",ie.refresh_token||"",ie.created||!1))}authenticateGoogle(te,De,Ye,T){return M(this,arguments,function*(N,B,O,ie,q={}){const ce={token:N,vars:ie},Ge=yield this.apiClient.authenticateGoogle(this.serverkey,"",ce,B,O,q);return new mn(Ge.token||"",Ge.refresh_token||"",Ge.created||!1)})}authenticateGameCenter(te,De,Ye,T,N,B,O,ie,q){return M(this,arguments,function*(ce,Ge,He,gt,Vt,cn,Ve,We,ft,nt={}){const Dt={bundle_id:ce,player_id:Ge,public_key_url:He,salt:gt,signature:Vt,timestamp_seconds:cn,vars:ft},un=yield this.apiClient.authenticateGameCenter(this.serverkey,"",Dt,We,Ve,nt);return new mn(un.token||"",un.refresh_token||"",un.created||!1)})}authenticateSteam(te,De,Ye,T,N){return M(this,null,function*(){return this.apiClient.authenticateSteam(this.serverkey,"",{token:te,vars:N,sync:T},De,Ye).then(O=>new mn(O.token||"",O.refresh_token||"",O.created||!1))})}banGroupUsers(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.banGroupUsers(te.token,De,Ye).then(T=>void 0!==T)})}blockFriends(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.blockFriends(te.token,De,Ye).then(T=>Promise.resolve(null!=T))})}createGroup(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.createGroup(te.token,De).then(Ye=>Promise.resolve({avatar_url:Ye.avatar_url,create_time:Ye.create_time,creator_id:Ye.creator_id,description:Ye.description,edge_count:Ye.edge_count?Number(Ye.edge_count):0,id:Ye.id,lang_tag:Ye.lang_tag,max_count:Ye.max_count?Number(Ye.max_count):0,metadata:Ye.metadata?JSON.parse(Ye.metadata):void 0,name:Ye.name,open:Ye.open,update_time:Ye.update_time}))})}createSocket(te=!1,De=!1,Ye=new xt,T=Cn.DefaultSendTimeoutMs){return new Cn(this.host,this.port,te,De,Ye,T)}deleteAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteAccount(te.token).then(De=>void 0!==De)})}deleteFriends(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteFriends(te.token,De,Ye).then(T=>void 0!==T)})}deleteGroup(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteGroup(te.token,De).then(Ye=>void 0!==Ye)})}deleteNotifications(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteNotifications(te.token,De).then(Ye=>Promise.resolve(null!=Ye))})}deleteStorageObjects(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.deleteStorageObjects(te.token,De).then(Ye=>Promise.resolve(null!=Ye))})}deleteTournamentRecord(te,De){return M(this,null,function*(){return this.apiClient.deleteTournamentRecord(te.token,De)})}demoteGroupUsers(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.demoteGroupUsers(te.token,De,Ye).then(T=>Promise.resolve(null!=T))})}emitEvent(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.event(te.token,De).then(Ye=>Promise.resolve(null!=Ye))})}getAccount(te){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getAccount(te.token)})}getSubscription(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getSubscription(te.token,De)})}importFacebookFriends(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importFacebookFriends(te.token,De).then(Ye=>void 0!==Ye)})}importSteamFriends(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.importSteamFriends(te.token,De,Ye).then(T=>void 0!==T)})}getUsers(te,De,Ye,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.getUsers(te.token,De,Ye,T).then(N=>{var B={users:[]};return null==N.users||N.users.forEach(O=>{B.users.push({avatar_url:O.avatar_url,create_time:O.create_time,display_name:O.display_name,edge_count:O.edge_count?Number(O.edge_count):0,facebook_id:O.facebook_id,gamecenter_id:O.gamecenter_id,google_id:O.google_id,id:O.id,lang_tag:O.lang_tag,location:O.location,online:O.online,steam_id:O.steam_id,timezone:O.timezone,update_time:O.update_time,username:O.username,metadata:O.metadata?JSON.parse(O.metadata):void 0})}),Promise.resolve(B)})})}joinGroup(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinGroup(te.token,De,{}).then(Ye=>void 0!==Ye)})}joinTournament(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.joinTournament(te.token,De,{}).then(Ye=>void 0!==Ye)})}kickGroupUsers(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.kickGroupUsers(te.token,De,Ye).then(T=>Promise.resolve(null!=T))})}leaveGroup(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.leaveGroup(te.token,De,{}).then(Ye=>void 0!==Ye)})}listChannelMessages(te,De,Ye,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listChannelMessages(te.token,De,Ye,T,N).then(B=>{var O={messages:[],next_cursor:B.next_cursor,prev_cursor:B.prev_cursor,cacheable_cursor:B.cacheable_cursor};return null==B.messages||B.messages.forEach(ie=>{O.messages.push({channel_id:ie.channel_id,code:ie.code?Number(ie.code):0,create_time:ie.create_time,message_id:ie.message_id,persistent:ie.persistent,sender_id:ie.sender_id,update_time:ie.update_time,username:ie.username,content:ie.content?JSON.parse(ie.content):void 0,group_id:ie.group_id,room_name:ie.room_name,user_id_one:ie.user_id_one,user_id_two:ie.user_id_two})}),Promise.resolve(O)})})}listGroupUsers(te,De,Ye,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroupUsers(te.token,De,T,Ye,N).then(B=>{var O={group_users:[],cursor:B.cursor};return null==B.group_users||B.group_users.forEach(ie=>{O.group_users.push({user:{avatar_url:ie.user.avatar_url,create_time:ie.user.create_time,display_name:ie.user.display_name,edge_count:ie.user.edge_count?Number(ie.user.edge_count):0,facebook_id:ie.user.facebook_id,gamecenter_id:ie.user.gamecenter_id,google_id:ie.user.google_id,id:ie.user.id,lang_tag:ie.user.lang_tag,location:ie.user.location,online:ie.user.online,steam_id:ie.user.steam_id,timezone:ie.user.timezone,update_time:ie.user.update_time,username:ie.user.username,metadata:ie.user.metadata?JSON.parse(ie.user.metadata):void 0},state:ie.state?Number(ie.state):0})}),Promise.resolve(O)})})}listUserGroups(te,De,Ye,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listUserGroups(te.token,De,Ye,T,N).then(B=>{var O={user_groups:[],cursor:B.cursor};return null==B.user_groups||B.user_groups.forEach(ie=>{O.user_groups.push({group:{avatar_url:ie.group.avatar_url,create_time:ie.group.create_time,creator_id:ie.group.creator_id,description:ie.group.description,edge_count:ie.group.edge_count?Number(ie.group.edge_count):0,id:ie.group.id,lang_tag:ie.group.lang_tag,max_count:ie.group.max_count,metadata:ie.group.metadata?JSON.parse(ie.group.metadata):void 0,name:ie.group.name,open:ie.group.open,update_time:ie.group.update_time},state:ie.state?Number(ie.state):0})}),Promise.resolve(O)})})}listGroups(te,De,Ye,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listGroups(te.token,De,Ye,T).then(N=>{var B={groups:[]};return null==N.groups||(B.cursor=N.cursor,N.groups.forEach(O=>{B.groups.push({avatar_url:O.avatar_url,create_time:O.create_time,creator_id:O.creator_id,description:O.description,edge_count:O.edge_count?Number(O.edge_count):0,id:O.id,lang_tag:O.lang_tag,max_count:O.max_count,metadata:O.metadata?JSON.parse(O.metadata):void 0,name:O.name,open:O.open,update_time:O.update_time})})),Promise.resolve(B)})})}linkApple(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkApple(te.token,De).then(Ye=>void 0!==Ye)})}linkCustom(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkCustom(te.token,De).then(Ye=>void 0!==Ye)})}linkDevice(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkDevice(te.token,De).then(Ye=>void 0!==Ye)})}linkEmail(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkEmail(te.token,De).then(Ye=>void 0!==Ye)})}linkFacebook(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebook(te.token,De).then(Ye=>void 0!==Ye)})}linkFacebookInstantGame(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkFacebookInstantGame(te.token,De).then(Ye=>void 0!==Ye)})}linkGoogle(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGoogle(te.token,De).then(Ye=>void 0!==Ye)})}linkGameCenter(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkGameCenter(te.token,De).then(Ye=>void 0!==Ye)})}linkSteam(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.linkSteam(te.token,De).then(Ye=>void 0!==Ye)})}listFriends(te,De,Ye,T){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriends(te.token,Ye,De,T).then(N=>{var B={friends:[],cursor:N.cursor};return null==N.friends||N.friends.forEach(O=>{B.friends.push({user:{avatar_url:O.user.avatar_url,create_time:O.user.create_time,display_name:O.user.display_name,edge_count:O.user.edge_count?Number(O.user.edge_count):0,facebook_id:O.user.facebook_id,gamecenter_id:O.user.gamecenter_id,google_id:O.user.google_id,id:O.user.id,lang_tag:O.user.lang_tag,location:O.user.location,online:O.user.online,steam_id:O.user.steam_id,timezone:O.user.timezone,update_time:O.user.update_time,username:O.user.username,metadata:O.user.metadata?JSON.parse(O.user.metadata):void 0,facebook_instant_game_id:O.user.facebook_instant_game_id},state:O.state})}),Promise.resolve(B)})})}listFriendsOfFriends(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listFriendsOfFriends(te.token,De,Ye).then(T=>{var N={friends_of_friends:[],cursor:T.cursor};return null==T.friends_of_friends||T.friends_of_friends.forEach(B=>{N.friends_of_friends.push({referrer:B.referrer,user:{avatar_url:B.user.avatar_url,create_time:B.user.create_time,display_name:B.user.display_name,edge_count:B.user.edge_count?Number(B.user.edge_count):0,facebook_id:B.user.facebook_id,gamecenter_id:B.user.gamecenter_id,google_id:B.user.google_id,id:B.user.id,lang_tag:B.user.lang_tag,location:B.user.location,online:B.user.online,steam_id:B.user.steam_id,timezone:B.user.timezone,update_time:B.user.update_time,username:B.user.username,metadata:B.user.metadata?JSON.parse(B.user.metadata):void 0,facebook_instant_game_id:B.user.facebook_instant_game_id}})}),Promise.resolve(N)})})}listLeaderboardRecords(te,De,Ye,T,N,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecords(te.token,De,Ye,T,N,B).then(O=>{var ie={next_cursor:O.next_cursor,prev_cursor:O.prev_cursor,rank_count:O.rank_count?Number(O.rank_count):0,owner_records:[],records:[]};return null!=O.owner_records&&O.owner_records.forEach(q=>{ie.owner_records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),null!=O.records&&O.records.forEach(q=>{ie.records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),Promise.resolve(ie)})})}listLeaderboardRecordsAroundOwner(te,De,Ye,T,N,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listLeaderboardRecordsAroundOwner(te.token,De,Ye,T,N,B).then(O=>{var ie={next_cursor:O.next_cursor,prev_cursor:O.prev_cursor,rank_count:O.rank_count?Number(O.rank_count):0,owner_records:[],records:[]};return null!=O.owner_records&&O.owner_records.forEach(q=>{ie.owner_records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),null!=O.records&&O.records.forEach(q=>{ie.records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),Promise.resolve(ie)})})}listMatches(te,De,Ye,T,N,B,O){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listMatches(te.token,De,Ye,T,N,B,O)})}listNotifications(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listNotifications(te.token,De,Ye).then(T=>{var N={cacheable_cursor:T.cacheable_cursor,notifications:[]};return null==T.notifications||T.notifications.forEach(B=>{N.notifications.push({code:B.code?Number(B.code):0,create_time:B.create_time,id:B.id,persistent:B.persistent,sender_id:B.sender_id,subject:B.subject,content:B.content?JSON.parse(B.content):void 0})}),Promise.resolve(N)})})}listStorageObjects(te,De,Ye,T,N){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listStorageObjects(te.token,De,Ye,T,N).then(B=>{var O={objects:[],cursor:B.cursor};return null==B.objects||B.objects.forEach(ie=>{O.objects.push({collection:ie.collection,key:ie.key,permission_read:ie.permission_read?Number(ie.permission_read):0,permission_write:ie.permission_write?Number(ie.permission_write):0,value:ie.value?JSON.parse(ie.value):void 0,version:ie.version,user_id:ie.user_id,create_time:ie.create_time,update_time:ie.update_time})}),Promise.resolve(O)})})}listTournaments(te,De,Ye,T,N,B,O){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournaments(te.token,De,Ye,T,N,B,O).then(ie=>{var q={cursor:ie.cursor,tournaments:[]};return null!=ie.tournaments&&ie.tournaments.forEach(ce=>{q.tournaments.push({id:ce.id,title:ce.title,description:ce.description,duration:ce.duration?Number(ce.duration):0,category:ce.category?Number(ce.category):0,sort_order:ce.sort_order?Number(ce.sort_order):0,size:ce.size?Number(ce.size):0,max_size:ce.max_size?Number(ce.max_size):0,max_num_score:ce.max_num_score?Number(ce.max_num_score):0,can_enter:ce.can_enter,end_active:ce.end_active?Number(ce.end_active):0,next_reset:ce.next_reset?Number(ce.next_reset):0,metadata:ce.metadata?JSON.parse(ce.metadata):void 0,create_time:ce.create_time,start_time:ce.start_time,end_time:ce.end_time,start_active:ce.start_active,authoritative:ce.authoritative})}),Promise.resolve(q)})})}listSubscriptions(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listSubscriptions(te.token,{cursor:De,limit:Ye})})}listTournamentRecords(te,De,Ye,T,N,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecords(te.token,De,Ye,T,N,B).then(O=>{var ie={next_cursor:O.next_cursor,prev_cursor:O.prev_cursor,owner_records:[],records:[]};return null!=O.owner_records&&O.owner_records.forEach(q=>{ie.owner_records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),null!=O.records&&O.records.forEach(q=>{ie.records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),Promise.resolve(ie)})})}listTournamentRecordsAroundOwner(te,De,Ye,T,N,B){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.listTournamentRecordsAroundOwner(te.token,De,Ye,T,N,B).then(O=>{var ie={next_cursor:O.next_cursor,prev_cursor:O.prev_cursor,owner_records:[],records:[]};return null!=O.owner_records&&O.owner_records.forEach(q=>{ie.owner_records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),null!=O.records&&O.records.forEach(q=>{ie.records.push({expiry_time:q.expiry_time,leaderboard_id:q.leaderboard_id,metadata:q.metadata?JSON.parse(q.metadata):void 0,num_score:q.num_score?Number(q.num_score):0,owner_id:q.owner_id,rank:q.rank?Number(q.rank):0,score:q.score?Number(q.score):0,subscore:q.subscore?Number(q.subscore):0,update_time:q.update_time,username:q.username,max_num_score:q.max_num_score?Number(q.max_num_score):0})}),Promise.resolve(ie)})})}promoteGroupUsers(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.promoteGroupUsers(te.token,De,Ye)})}readStorageObjects(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.readStorageObjects(te.token,De).then(Ye=>{var T={objects:[]};return null==Ye.objects||Ye.objects.forEach(N=>{T.objects.push({collection:N.collection,key:N.key,permission_read:N.permission_read?Number(N.permission_read):0,permission_write:N.permission_write?Number(N.permission_write):0,value:N.value?JSON.parse(N.value):void 0,version:N.version,user_id:N.user_id,create_time:N.create_time,update_time:N.update_time})}),Promise.resolve(T)})})}rpc(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.rpcFunc(te.token,De,JSON.stringify(Ye)).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0}))})}rpcHttpKey(te,De,Ye){return M(this,null,function*(){return this.apiClient.rpcFunc2("",De,Ye&&JSON.stringify(Ye)||"",te).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0})).catch(T=>{throw T})})}sessionLogout(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.sessionLogout(te.token,{refresh_token:Ye,token:De}).then(T=>void 0!==T)})}sessionRefresh(te){return M(this,arguments,function*(De,Ye={}){if(!De)return console.error("Cannot refresh a null session."),De;De.created&&De.expires_at-De.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),De.created&&De.refresh_expires_at-De.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const T=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:De.refresh_token,vars:Ye});return De.update(T.token,T.refresh_token),De})}unlinkApple(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkApple(te.token,De).then(Ye=>void 0!==Ye)})}unlinkCustom(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkCustom(te.token,De).then(Ye=>void 0!==Ye)})}unlinkDevice(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkDevice(te.token,De).then(Ye=>void 0!==Ye)})}unlinkEmail(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkEmail(te.token,De).then(Ye=>void 0!==Ye)})}unlinkFacebook(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebook(te.token,De).then(Ye=>void 0!==Ye)})}unlinkFacebookInstantGame(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkFacebookInstantGame(te.token,De).then(Ye=>void 0!==Ye)})}unlinkGoogle(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGoogle(te.token,De).then(Ye=>void 0!==Ye)})}unlinkGameCenter(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkGameCenter(te.token,De).then(Ye=>void 0!==Ye)})}unlinkSteam(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.unlinkSteam(te.token,De).then(Ye=>void 0!==Ye)})}updateAccount(te,De){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateAccount(te.token,De).then(Ye=>void 0!==Ye)})}updateGroup(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.updateGroup(te.token,De,Ye).then(T=>void 0!==T)})}validatePurchaseApple(te,De,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseApple(te.token,{receipt:De,persist:Ye})})}validatePurchaseFacebookInstant(te,De,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseFacebookInstant(te.token,{signed_request:De,persist:Ye})})}validatePurchaseGoogle(te,De,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseGoogle(te.token,{purchase:De,persist:Ye})})}validatePurchaseHuawei(te,De,Ye,T=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validatePurchaseHuawei(te.token,{purchase:De,signature:Ye,persist:T})})}validateSubscriptionApple(te,De,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionApple(te.token,{receipt:De,persist:Ye})})}validateSubscriptionGoogle(te,De,Ye=!0){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.validateSubscriptionGoogle(te.token,{receipt:De,persist:Ye})})}writeLeaderboardRecord(te,De,Ye){return M(this,null,function*(){return this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te)),this.apiClient.writeLeaderboardRecord(te.token,De,{metadata:Ye.metadata?JSON.stringify(Ye.metadata):void 0,score:Ye.score,subscore:Ye.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}writeStorageObjects(te,De){return M(this,null,function*(){this.autoRefreshSession&&te.refresh_token&&te.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(te));var Ye={objects:[]};return De.forEach(T=>{Ye.objects.push({collection:T.collection,key:T.key,permission_read:T.permission_read,permission_write:T.permission_write,value:JSON.stringify(T.value),version:T.version})}),this.apiClient.writeStorageObjects(te.token,Ye)})}writeTournamentRecord(te,De,Ye){return M(this,null,function*(){return this.apiClient.writeTournamentRecord(te.token,De,{metadata:Ye.metadata?JSON.stringify(Ye.metadata):void 0,score:Ye.score,subscore:Ye.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}},qt=je(8326),_n=je(617),Kt=je(7100),ln=je(3953),Zn=je(9900),Ut=je(8065),sn=je(755),On=je(5547),Sn=je(5374),zn=je(3656),cr=je(4234),sr=je(3307),yr=function(te){return te[te.MANAGE_TODO=10]="MANAGE_TODO",te[te.EDIT_PROFILE=11]="EDIT_PROFILE",te[te.MANAGE_POST=12]="MANAGE_POST",te[te.ADD_CHANNEL=14]="ADD_CHANNEL",te[te.NAME_OVERRIDED=15]="NAME_OVERRIDED",te[te.USER_PROFILE_CHANGED=100]="USER_PROFILE_CHANGED",te[te.USER_PROFILE_IMAGE_CHANGED=101]="USER_PROFILE_IMAGE_CHANGED",te[te.CHATROOM_CHECKED=102]="CHATROOM_CHECKED",te}(yr||{});let Tr=(()=>{var te;class De{constructor(T,N,B,O,ie,q,ce,Ge,He){this.p5toast=T,this.statusBar=N,this.indexed=B,this.noti=O,this.alertCtrl=ie,this.lang=q,this.global=ce,this.navCtrl=Ge,this.p5loading=He,this.AutoConnect=!1,this.profile={content:{type:void 0,path:void 0}},this.servers={official:{},unofficial:{}},this.showServer=!1,this.OnInit=!0,this.NeedLocalPush=[],this.HasRemovedChannel=!1,this.TogglingSession=!1,this.noti_origin={},this.AfterLoginActDone=!1,this.AfterLoginAct=[],this.ArcadeListOfficial=[],this.ArcadeListOrig={},this.ArcadeList=[],this.RemoteTodoCounter={},this.PromotedGroup={},this.users={self:{},deleted:{},official:{},unofficial:{}},this.notifications_rearrange=[],this.groups={official:{},unofficial:{}},this.channels_orig={local:{},official:{},unofficial:{}},this.noti_id=2e3,this.registered_id=[],this.channels=[],this.socket_reactive={},this.on_socket_connected={},this.on_socket_disconnected={},this.match_act={},this.opened_page_info={},this.subscribe_lock=!1,this.has_new_channel_msg=!1,this.has_new_post=!1,this.posts_orig={local:{target:{me:{}}},official:{},unofficial:{}},this.posts=[],this.HyperLinkDescList=[],this.isRequestingLinkInfo=!1,this.OnTransfer={},this.OnTransferMessage={},this.usernameOverride={local:{target:{}}},this.post_counter={local:{target:{me:0}},official:{},unofficial:{}},this.AutoConnect=!localStorage.getItem("autoConnect"),ce.CallbackNakama=this,O.NakamaCallback=this}initialize(){var T=this;return(0,j.A)(function*(){yield T.set_all_todo_notification();const N=yield T.indexed.loadTextFromUserPath("servers/self/profile.json");N&&(T.users.self=JSON.parse(N));try{let Ge=(yield T.indexed.loadTextFromUserPath("servers/self/profile.img")).replace(/"|\\|=/g,"");Ge&&(T.users.self.img=Ge)}catch{}yield T.LoadOverridesOffline();let B=yield T.indexed.loadTextFromUserPath("servers/groups.json");B&&(T.groups=JSON.parse(B)),T.rearrange_group_list().forEach(function(){var Ge=(0,j.A)(function*(He){let gt=yield T.indexed.loadTextFromUserPath(`servers/${He.server.isOfficial}/${He.server.target}/groups/${He.id}.img`);if(gt&&(He.img=gt.replace(/"|=|\\/g,"")),"missing"!=He.status){delete He.status;let Vt=He.server.isOfficial,cn=He.server.target;if(T.CreateEmptyForm(Vt,cn),He.users)for(let Ve=0,We=He.users.length;Ve<We;Ve++)He.users[Ve].is_me||(He.users[Ve].user=T.load_other_user(He.users[Ve].user.id,Vt,cn))}});return function(He){return Ge.apply(this,arguments)}}()),yield T.load_channel_list(),T.load_posts_counter(),yield T.CheckIfLostLocal(),T.rearrange_channels();const ie=yield T.indexed.loadTextFromUserPath("servers/list.json");ie&&(T.statusBar.groupServer=JSON.parse(ie)),Object.keys(T.statusBar.groupServer).forEach(Ge=>{T.servers[Ge]?Object.keys(T.statusBar.groupServer[Ge]).forEach(gt=>{T.servers[Ge][gt]||delete T.statusBar.groupServer[Ge][gt]}):delete T.statusBar.groupServer[Ge]}),T.showServer=!!localStorage.getItem("showServer"),T.catch_group_server_header("offline");const ce=yield T.indexed.loadTextFromUserPath("servers/list_detail.csv");if(ce)ce.split("\n").forEach(He=>{const gt=He.split(",");let cn={isOfficial:gt[1],name:gt[2],target:gt[3],address:gt[4],nakama_port:gt[5]?+gt[5]:void 0,cdn_port:gt[7]?+gt[7]:void 0,apache_port:gt[8]?+gt[8]:void 0,square_port:gt[9]?+gt[9]:void 0,webrtc_port:gt[10]?+gt[10]:void 0,webpush_port:gt[11]?+gt[11]:void 0,webpush_tog:gt[12]?"true"==gt[12]:void 0,useSSL:"true"==gt[6]};T.servers[cn.isOfficial][cn.target]={},T.servers[cn.isOfficial][cn.target].info=cn,T.init_server(cn),T.AutoConnect&&T.users.self.online&&(T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode(),T.init_session(cn))});else{const Ge=location.href.split("?").length>1;(T.users.self.online||Ge)&&T.toggle_all_session()}})()}CheckIfLostLocal(){var T=this;return(0,j.A)(function*(){let N=yield T.indexed.GetFileListFromDB("servers/local/target/channels");for(let B of N)try{let O=B.split("/");if(5==O.length){let ie=O.pop();T.channels_orig.local.target||(T.channels_orig.local.target={}),T.channels_orig.local.target[ie]||(T.channels_orig.local.target[ie]={CDN:0,id:ie,info:{isOfficial:"local",target:"target",name:T.lang.text.Nakama.DamagedChannel},local:!0,redirect:{type:0},server:{isOfficial:"local",target:"target",name:"\uc0ad\uc81c\ub41c \uc11c\ubc84"},status:"online",title:T.lang.text.Nakama.DamagedChannel})}}catch(O){console.log("\ub85c\uceec \ucc44\ub110 \uc7ac\uac80\ud1a0 \ub2e8\uacc4 \uc624\ub958: ",O)}})()}set_all_todo_notification(){var T=this;return(0,j.A)(function*(){let N=yield T.indexed.GetFileListFromDB("info.todo");for(let B=0,O=N.length;B<O;B++){let ie=yield T.indexed.loadTextFromUserPath(N[B]);if(ie){let q=JSON.parse(ie);T.registered_id.push(q.noti_id),T.set_todo_notification(q)}}})()}getGodotDBRecursive(){var T=this;return(0,j.A)(function*(){try{if(void 0===T.indexed.godotDB)throw"Retry catch godotDB";return}catch{return yield new Promise(B=>{setTimeout(()=>{B(void 0)},100)}),yield T.getGodotDBRecursive()}})()}open_add_todo_page(T="",N="portal/main/add-todo-menu"){this.AddTodoLinkAct?this.AddTodoLinkAct(T):this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(N,{animation:_n.V5,state:{data:T}})})}open_others_profile(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("others-profile",{animation:_n.V5,state:T})})}set_todo_notification(T){var N=this;if(this.RemoveLocalPushSchedule(T),(T.startFrom||T.limit)>Date.now()&&this.NeedLocalPush.push(T),!this.p5todotimer&&this.NeedLocalPush.length){let O=[];this.global.windowOnFocusAct["todo-timer"]=()=>{O.forEach(q=>clearTimeout(q)),O.length=0};const ie=q=>{const ce=q.custom_color;let Ge;switch(q.importance){case"0":Ge="58a192";break;case"1":Ge="ddbb41";break;case"2":Ge="b95437"}return ce?ce.substring(1):Ge};this.global.WindowOnBlurAct["todo-timer"]=()=>{for(let q=this.NeedLocalPush.length-1;q>=0;q--){const ce=this.NeedLocalPush[q],He=new Date(ce.startFrom||ce.limit).getTime()-(new Date).getTime();if(He>0&&He<2147483647){let gt=setTimeout((0,j.A)(function*(){let Vt;try{let Ve;try{Ve=`todo/${ce.id}_${ce.remote.isOfficial}_${ce.remote.target}/thumbnail.png`}catch{Ve=`todo/${ce.id}/thumbnail.png`}let We=yield N.indexed.loadBlobFromUserPath(Ve,"image/png");Vt=URL.createObjectURL(We)}catch{}const cn=ie(ce);yield N.noti.PushLocal({id:ce.noti_id,title:ce.title,body:ce.description,image:Vt,smallIcon_ln:"todo",bgcolor:cn},void 0,Ve=>{N.open_add_todo_page(JSON.stringify(ce),"add-todo-menu")}),setTimeout(()=>{try{URL.revokeObjectURL(Vt)}catch{}},1e3),N.NeedLocalPush.splice(q,1)}),He);O.push(gt)}}},this.p5todotimer=new qt(q=>{q.setup=()=>{q.noCanvas(),q.frameRate(.5)},q.draw=()=>{const ce=Date.now();for(let Ge=this.NeedLocalPush.length-1;Ge>=0;Ge--)(this.NeedLocalPush[Ge].startFrom||this.NeedLocalPush[Ge].limit)<ce&&function(){var Vt=(0,j.A)(function*(){let cn;try{let ft;try{ft=`todo/${N.NeedLocalPush[Ge].id}_${N.NeedLocalPush[Ge].remote.isOfficial}_${N.NeedLocalPush[Ge].remote.target}/thumbnail.png`}catch{ft=`todo/${N.NeedLocalPush[Ge].id}/thumbnail.png`}let nt=yield N.indexed.loadBlobFromUserPath(ft,"image/png");cn=URL.createObjectURL(nt)}catch{}const Ve=JSON.stringify(N.NeedLocalPush[Ge]),We=ie(N.NeedLocalPush[Ge]);yield N.noti.PushLocal({id:N.NeedLocalPush[Ge].noti_id,title:N.NeedLocalPush[Ge].title,body:N.NeedLocalPush[Ge].description,image:cn,smallIcon_ln:"todo",bgcolor:We},void 0,ft=>{N.open_add_todo_page(Ve,"add-todo-menu")}),setTimeout(()=>{try{URL.revokeObjectURL(cn)}catch{}},1e3),N.NeedLocalPush.splice(Ge,1)});return function(){return Vt.apply(this,arguments)}}()();this.NeedLocalPush.length||(q.remove(),this.p5todotimer=null)}})}}RemoveLocalPushSchedule(T){for(let N=this.NeedLocalPush.length-1;N>=0;N--)if(this.NeedLocalPush[N].id==T.id){this.NeedLocalPush.splice(N,1);break}}init_server(T){this.servers[T.isOfficial][T.target]||(this.servers[T.isOfficial][T.target]={}),this.servers[T.isOfficial][T.target].client=new yn(T.key||"defaultkey",T.address,(T.nakama_port||7350).toString(),T.useSSL||!1,3e5,!0)}go_to_chatroom(T,N){return this.has_new_channel_msg=!1,T.update&&delete T.update,this.ChatroomLinkAct?this.ChatroomLinkAct(T,N):(this.SelectSubscribesTab&&this.SelectSubscribesTab(!1),this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/subscribes/chat-room",{state:{info:T,file:N}})})),!1}add_new_group(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("add-group",{animation:_n.V5})})}clear_removed_groups(){var T=this;this.HasRemovedChannel&&this.alertCtrl.create({header:this.lang.text.Nakama.RemovedChannels,message:this.lang.text.Nakama.ClearMissings,buttons:[{text:this.lang.text.UserFsDir.Delete,cssClass:"redfont",handler:()=>{!function(){var B=(0,j.A)(function*(){const O=`subscribes_remove_1:1_${Date.now()}`;for(let ce=T.channels.length-1;ce>=0;ce--)if("missing"==T.channels[ce].status){var ie;const Ge=T.channels[ce].server.isOfficial,He=T.channels[ce].server.target,gt=T.channels[ce];let cn,Vt=gt.title;Vt=2==gt.redirect.type?Vt||T.lang.text.Profile.noname_user:Vt||T.lang.text.ChatRoom.noname_chatroom,yield T.p5loading.update({id:O});try{cn=T.servers[Ge][He].info}catch(ft){console.log("\uc0ad\uc81c\ub41c \uc11c\ubc84\uc758 \ucc44\ub110 \uc0ad\uc81c: ",ft)}try{yield T.remove_group_list(T.groups[Ge][He][gt.group_id],Ge,He,!0)}catch{}delete T.channels_orig[Ge][He][gt.id];try{yield T.remove_channel_files(Ge,He,gt.id,void 0,O)}catch{}let Ve=`${gt.id}_${T.users.self.display_name}`;try{Ve=`${gt.info.id}_${cn.session.user_id}`}catch{}if(0==(null===(ie=gt.id)||void 0===ie?void 0:ie.indexOf("4.")))try{Ve=`${gt.user_id_one!=T.servers[Ge][He].session.user_id?gt.user_id_one:gt.user_id_two}_${T.servers[Ge][He].session.user_id}`}catch{}try{var q;let ft=localStorage.getItem("fallback_fs");if(!ft)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let nt=ft.split("://"),Dt=nt.pop().split(":"),un=nt.pop();un?un+=":":un=T.global.checkProtocolFromAddress(Dt[0])?"https:":"http:";const Bn=null===(q=Dt[1])||void 0===q?void 0:q.split(","),ar=`${un}//${Dt[0]}:${(null==Bn?void 0:Bn[1])||9002}/`;Dt&&(yield T.global.remove_files_from_storage_with_key(ar,Ve,{}))}catch{}try{let nt=cn.address,Dt=`${[cn.useSSL?"https:":"http:"]}//${nt}:${cn.apache_port||9002}/`;nt&&(yield T.global.remove_files_from_storage_with_key(Dt,Ve,{apache_port:cn.apache_port,cdn_port:cn.cdn_port,user_id:T.servers[Ge][He].session.user_id}))}catch{}let We=yield T.indexed.GetFileListFromDB(`servers/${Ge}/${He}/channels/${gt.id}`);for(let ft=0,nt=We.length;ft<nt;ft++){yield T.p5loading.update({id:O,message:`${T.lang.text.UserFsDir.DeleteFile}: ${Vt} (${We[ft].split("/").pop()})`,progress:ft/nt});try{yield T.indexed.removeFileFromUserPath(We[ft])}catch{}}T.rearrange_channels()}T.p5loading.remove(O)});return function(){return B.apply(this,arguments)}}()()}}]}).then(N=>N.present())}open_profile_page(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("group-server",{animation:_n.V5,state:T})})}open_post(T,N,B=""){T.router=B,this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(B+"post-viewer",{animation:_n.V5,state:{data:T,index:N+1}})})}init_all_sessions(){var T=this;return(0,j.A)(function*(){T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode();const N="nakama_login";let B=Object.keys(T.servers.official);for(let ie=0,q=B.length;ie<q;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.unofficial[B[ie]].info.name}`,forceEnd:null},!0),yield T.init_session(T.servers.official[B[ie]].info);let O=Object.keys(T.servers.unofficial);for(let ie=0,q=O.length;ie<q;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.unofficial[O[ie]].info.name}`,forceEnd:null},!0),console.log(),yield T.init_session(T.servers.unofficial[O[ie]].info);return B.length+O.length})()}logout_all_server(){let T=Object.keys(this.statusBar.groupServer);for(let N=0,B=T.length;N<B;N++){let O=Object.keys(this.statusBar.groupServer[T[N]]);for(let ie=0,q=O.length;ie<q;ie++)"online"==this.statusBar.groupServer[T[N]][O[ie]]&&(this.servers[T[N]][O[ie]].socket?this.servers[T[N]][O[ie]].socket.disconnect(!0):this.link_group(T[N],O[ie],!1))}}toggle_all_session(){var T=this;return(0,j.A)(function*(){if(T.TogglingSession)return;const N="nakama_login";if(T.TogglingSession=!0,"online"==T.statusBar.settings.groupServer)T.logout_all_server(),T.p5toast.show({text:T.lang.text.Nakama.SessionLogout});else{yield T.p5loading.update({id:N,message:T.lang.text.Nakama.PendingLogin,forceEnd:null});try{(yield T.init_all_sessions())||(yield T.p5loading.update({id:N,message:T.lang.text.Nakama.NoLoginServer},!0))}catch(B){console.log("\ud14c\uc2a4\ud2b8 \uc11c\ubc84 \uc5f0\uacb0 \uc624\ub958: ",B)}}T.p5loading.remove(N),T.TogglingSession=!1})()}link_group(T,N,B="offline"==this.statusBar.groupServer[T][N]){var O=this;return(0,j.A)(function*(){if(B)O.statusBar.groupServer[T][N]="pending",O.catch_group_server_header("pending"),O.users.self.online&&(yield O.init_session(O.servers[T][N].info));else{O.channels_orig[T]&&O.channels_orig[T][N]&&Object.keys(O.channels_orig[T][N]).forEach(q=>{"missing"!=O.channels_orig[T][N][q].status&&delete O.channels_orig[T][N][q].status}),O.groups[T]&&O.groups[T][N]&&Object.keys(O.groups[T][N]).forEach(q=>{"missing"!=O.groups[T][N][q].status&&(O.groups[T][N][q].status="offline")}),O.set_group_statusBar("offline",T,N),O.statusBar.groupServer[T][N]="offline",O.catch_group_server_header("offline");try{yield O.servers[T][N].client.sessionLogout(O.servers[T][N].session,O.servers[T][N].session.token,O.servers[T][N].session.refresh_token)}catch{}O.noti_origin[T]&&O.noti_origin[T][N]&&delete O.noti_origin[T][N],O.rearrange_notifications(),O.channels_orig[T]&&O.channels_orig[T][N]&&Object.keys(O.channels_orig[T][N]).forEach(q=>{"missing"!=O.channels_orig[T][N][q].status&&delete O.channels_orig[T][N][q].status})}O.indexed.saveTextFileToUserPath(JSON.stringify(O.statusBar.groupServer),"servers/list.json")})()}get_all_online_server(){let T=[];return Object.keys(this.servers.official).forEach(O=>{"online"==this.statusBar.groupServer.official[O]&&T.push(this.servers.official[O])}),Object.keys(this.servers.unofficial).forEach(O=>{"online"==this.statusBar.groupServer.unofficial[O]&&T.push(this.servers.unofficial[O])}),T}get_all_server_info(T=!1,N=!1,B=!1){let O=[],ie=Object.keys(this.servers.official);return T&&ie.forEach(ce=>{N?("online"==this.statusBar.groupServer.official[ce]||"pending"==this.statusBar.groupServer.official[ce]&&!B)&&O.push(this.servers.official[ce].info):this.servers.official[ce]&&O.push(this.servers.official[ce].info)}),Object.keys(this.servers.unofficial).forEach(ce=>{N?("online"==this.statusBar.groupServer.unofficial[ce]||"pending"==this.statusBar.groupServer.unofficial[ce]&&!B)&&O.push(this.servers.unofficial[ce].info):this.servers.unofficial[ce]&&O.push(this.servers.unofficial[ce].info)}),O}add_group_server(T,N=(()=>{})){var B=this;if(this.statusBar.groupServer.unofficial[T.target||T.name])return void this.p5toast.show({text:`${this.lang.text.Nakama.AlreadyHaveTargetName}: ${T.target||T.name}`});T.target=T.target||T.name,T.address=T.address||"192.168.0.1",T.nakama_port=T.nakama_port,T.cdn_port=T.cdn_port,T.apache_port=T.apache_port,T.square_port=T.square_port,T.webrtc_port=T.webrtc_port,T.webpush_port=T.webpush_port,T.useSSL=T.useSSL||!1,T.isOfficial=T.isOfficial||"unofficial",T.key=T.key||"";let O=(new Date).getTime().toString();return O+=`,${T.isOfficial}`,O+=`,${T.name}`,O+=`,${T.target}`,O+=`,${T.address}`,O+=`,${T.nakama_port||""}`,O+=`,${T.useSSL||""}`,O+=`,${T.cdn_port||""}`,O+=`,${T.apache_port||""}`,O+=`,${T.square_port||""}`,O+=`,${T.webrtc_port||""}`,O+=`,${T.webpush_port||""}`,new Promise(function(){var ie=(0,j.A)(function*(q){yield B.AutoGenWebRTCInfo(T),"official"!=T.isOfficial?B.indexed.loadTextFromUserPath("servers/list_detail.csv",function(){var ce=(0,j.A)(function*(Ge,He){let gt=[];Ge&&He&&(gt=He.split("\n")),gt.push(O),B.indexed.saveTextFileToUserPath(gt.join("\n"),"servers/list_detail.csv").then(()=>{B.init_server(T),B.servers[T.isOfficial][T.target].info={...T},N()}),B.statusBar.groupServer[T.isOfficial][T.target]="offline",yield B.indexed.saveTextFileToUserPath(JSON.stringify(B.statusBar.groupServer),"servers/list.json"),q()});return function(Ge,He){return ce.apply(this,arguments)}}()):(B.init_server(T),B.servers[T.isOfficial][T.target].info={...T},B.statusBar.groupServer[T.isOfficial][T.target]="offline",q())});return function(q){return ie.apply(this,arguments)}}())}modify_group_server(T){var N=this;return(0,j.A)(function*(){let B=(new Date).getTime().toString();B+=`,${T.isOfficial}`,B+=`,${T.name}`,B+=`,${T.target}`,B+=`,${T.address}`,B+=`,${T.nakama_port||""}`,B+=`,${T.useSSL||""}`,B+=`,${T.cdn_port||""}`,B+=`,${T.apache_port||""}`,B+=`,${T.square_port||""}`,B+=`,${T.webrtc_port||""}`,B+=`,${T.webpush_port||""}`,B+=`,${T.webpush_tog||""}`;const O=yield N.indexed.loadTextFromUserPath("servers/list_detail.csv");let ie=[];O&&(ie=O.split("\n"));for(let q=0,ce=ie.length;q<ce;q++)if(ie[q].split(",")[3]==T.target){ie.splice(q,1);break}ie.push(B),yield N.indexed.saveTextFileToUserPath(ie.join("\n"),"servers/list_detail.csv")})()}AutoGenWebRTCInfo(T){var N=this;return(0,j.A)(function*(){let B={urls:[`stun:${T.address}:${T.webrtc_port||3478}`,`turn:${T.address}:${T.webrtc_port||3478}`],username:"username",credential:"password"};yield N.SaveWebRTCServer(B,!0)})()}SaveWebRTCServer(T,N=!1){var B=this;return(0,j.A)(function*(){let O=(yield B.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",ie=JSON.parse(O),q=!1;for(let Ge=0,He=Object.keys(ie).length;Ge<He;Ge++)if(B.catch_address_from_rtc_server_address(T)==B.catch_address_from_rtc_server_address(ie[Ge])){ie[Ge]=T,q=!0;break}return(!q||N)&&(q||ie.push(T),B.p5loading.toast(B.lang.text.Nakama.SaveWebRTCServer,"webrtc_server_save"),yield B.indexed.saveTextFileToUserPath(JSON.stringify(ie),"servers/webrtc_server.json")),q})()}RemoveWebRTCServer(T){var N=this;return(0,j.A)(function*(){let B=(yield N.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",O=JSON.parse(B);for(let q=0,ce=Object.keys(O).length;q<ce;q++){let Ge=N.catch_address_from_rtc_server_address(O[q]);T==Ge&&O.splice(q,1)}yield N.indexed.saveTextFileToUserPath(JSON.stringify(O),"servers/webrtc_server.json")})()}catch_address_from_rtc_server_address(T){let N;try{let B=T.urls[0];(B.indexOf("stun:")>=0||B.indexOf("turn:")>=0)&&(B=B.substring(5));let O=B.lastIndexOf(":");N=B.substring(0,O)}catch(B){console.error("webrtc \uc11c\ubc84 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",B)}return N}catch_group_server_header(T){let N=T;this.statusBar.settings.groupServer=T,setTimeout(()=>{Object.keys(this.statusBar.groupServer.official).forEach(O=>{switch(this.statusBar.groupServer.official[O]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),"online"!=N&&Object.keys(this.statusBar.groupServer.unofficial).forEach(ie=>{switch(this.statusBar.groupServer.unofficial[ie]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),this.statusBar.settings.groupServer=N},1500)}init_session(T){var N=this;return(0,j.A)(function*(){N.CreateEmptyForm(T.isOfficial,T.target),N.TogglingSession=!0;try{N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!1),yield N.after_login(T.isOfficial,T.target,T.useSSL)}catch(B){switch(B.status){case 400:N.p5toast.show({text:N.lang.text.Nakama.NeedLoginInfo}),N.open_profile_page(),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 401:N.p5toast.show({text:N.lang.text.Nakama.NeedAccountReset}),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 404:if(N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!0),N.users.self.display_name&&N.servers[T.isOfficial][T.target].client.updateAccount(N.servers[T.isOfficial][T.target].session,{display_name:N.users.self.display_name,lang_tag:navigator.language.split("-")[0]||N.lang.lang}),N.p5toast.show({text:`${N.lang.text.Nakama.RegisterUserSucc}: ${T.name}`,lateable:!0}),N.users.self.img)try{yield N.servers[T.isOfficial][T.target].client.writeStorageObjects(N.servers[T.isOfficial][T.target].session,[{collection:"user_public",key:"profile_image",permission_read:2,permission_write:1,value:{img:N.users.self.img}}])}catch(O){console.error("\uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",O)}yield N.after_login(T.isOfficial,T.target,T.useSSL);break;default:N.p5toast.show({text:`(${T.name}) ${N.lang.text.Nakama.UnexpectedLoginErr}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`}),N.set_group_statusBar("offline",T.isOfficial,T.target),N.p5loading.remove("nakama_login")}}N.TogglingSession=!1})()}CreateEmptyForm(T,N){this.groups[T]||(this.groups[T]={}),this.groups[T][N]||(this.groups[T][N]={}),this.channels_orig[T]||(this.channels_orig[T]={}),this.channels_orig[T][N]||(this.channels_orig[T][N]={}),this.usernameOverride[T]||(this.usernameOverride[T]={}),this.usernameOverride[T][N]||(this.usernameOverride[T][N]={}),this.OnTransfer[T]||(this.OnTransfer[T]={}),this.OnTransfer[T][N]||(this.OnTransfer[T][N]={}),this.noti_origin[T]||(this.noti_origin[T]={}),this.noti_origin[T][N]||(this.noti_origin[T][N]={}),this.RemoteTodoCounter[T]||(this.RemoteTodoCounter[T]={}),this.RemoteTodoCounter[T][N]||(this.RemoteTodoCounter[T][N]=[]),this.PromotedGroup[T]||(this.PromotedGroup[T]={}),this.PromotedGroup[T][N]||(this.PromotedGroup[T][N]={})}after_login(T,N,B){var O=this;return(0,j.A)(function*(){O.set_group_statusBar("pending",T,N),O.servers[T][N].socket=O.servers[T][N].client.createSocket(B),O.servers[T][N].client.getAccount(O.servers[T][N].session).then(q=>{let ce=JSON.parse(q.user.metadata);O.servers[T][N].info.is_admin=ce.is_admin,Object.keys(q.user).forEach(He=>{"display_name"==He?O.users.self[He]=q.user[He]:O.users.self.display_name||(O.users.self[He]=q.user[He])}),O.save_self_profile()}),O.servers[T][N].client.readStorageObjects(O.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:O.servers[T][N].session.user_id}]}).then(q=>{q.objects.length?O.socket_reactive.profile?(O.users.self.img=q.objects[0].value.img,O.socket_reactive.profile(q.objects[0].value.img)):(O.users.self.img=q.objects[0].value.img,O.indexed.saveTextFileToUserPath(JSON.stringify(O.users.self.img),"servers/self/profile.img")):O.socket_reactive.profile&&O.socket_reactive.profile("")}),yield O.SyncTodoCounter(T,N),O.LoadOverrideName(T,N),O.load_server_arcade_list(T,N),yield O.connect_to(T,N),yield O.redirect_channel(T,N),yield O.get_group_list_from_server(T,N),O.rearrange_group_list(),yield O.load_server_todo(T,N),O.set_group_statusBar("online",T,N),yield O.load_posts_counter([O.servers[T][N].info]),yield O.update_notifications(T,N);for(let q=0,ce=O.AfterLoginAct.length;q<ce;q++)try{yield O.AfterLoginAct[q]()}catch(Ge){console.error("\uc9c4\uc785 \ub3d9\uc791 \uc624\ub958: ",Ge)}O.AfterLoginAct.length=0,O.AfterLoginActDone=!0;let ie=Object.keys(O.users[T][N]||{});ie&&O.servers[T][N].client.getUsers(O.servers[T][N].session,ie).then(q=>{for(let ce=0,Ge=q.users.length;ce<Ge;ce++)O.save_other_user(q.users[ce],T,N)}).catch(q=>{console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",q)}),yield O.CheckHasAvatar(T,N),O.p5loading.remove("nakama_login")})()}CheckHasAvatar(T,N){var B=this;return(0,j.A)(function*(){try{var O;const ie="checkAvatar";if(B.global.AvatarThumbnailURL)throw"\uc900\ube44\ub41c \uc544\ubc14\ud0c0 \uc378\ub124\uc77c \uc788\uc74c";if(yield B.indexed.checkIfFileExist("servers/self/avatar.pck"))throw"\uc544\ubc14\ud0c0 pck \ud30c\uc77c \uc788\uc74c";const Ge=null===(O=(yield B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"user_public",key:"avatar",user_id:B.servers[T][N].session.user_id}]})).objects)||void 0===O||null===(O=O[0])||void 0===O||null===(O=O.value)||void 0===O?void 0:O.data;if(!Ge)throw"\ub4f1\ub85d\ub41c \uc544\ubc14\ud0c0 \uc5c6\uc74c";const He=yield B.global.downloadWithProgressAsBlob(Ge.url,void 0,ie);yield B.indexed.saveBlobToUserPath(He,"servers/self/avatar.pck");const gt=yield B.global.downloadWithProgressAsBlob(Ge.thumbnail,void 0,ie);B.global.AvatarThumbnailURL=Ge.thumbnail,yield B.indexed.saveBlobToUserPath(gt,"servers/self/avatar.pck_thumbnail.png")}catch(ie){console.log("\uc544\ubc14\ud0c0 \ubd88\ub7ec\uc624\uae30 \ub3d9\uc791 \ucde8\uc18c: ",ie)}})()}rearrange_arcadeList(){let T=[];const N=Object.keys(this.ArcadeListOrig);for(const B of N){const O=Object.keys(this.ArcadeListOrig[B]);for(const ie of O)T=[...T,...this.ArcadeListOrig[B][ie]]}this.ArcadeList=T}load_server_arcade_list(T,N){var B=this;return(0,j.A)(function*(){try{const O=yield B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"arcade",key:"url"}]});if(O.objects.length){const ie=O.objects[0].value.data,ce=yield(yield fetch(ie)).json();B.ArcadeListOrig[T]||(B.ArcadeListOrig[T]={}),B.ArcadeListOrig[T][N]=ce}}catch(O){console.log("\uc544\ucf00\uc774\ub4dc \ub9ac\uc2a4\ud2b8 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",O)}B.rearrange_arcadeList()})()}load_server_todo(T,N){var B=this;return(0,j.A)(function*(){let O=[];yield new Promise(function(){var q=(0,j.A)(function*(ce){const Ge=B.RemoteTodoCounter[T][N];Ge.length||ce(void 0);for(let He=Ge.length-1;He>=0;He--){const gt=`RemoteTodo_${Ge[He]}`;try{const Vt=yield B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"server_todo",key:gt,user_id:B.servers[T][N].session.user_id}]});if(Vt.objects.length)yield B.modify_remote_info_as_local(Vt.objects[0].value,T,N);else try{let cn;B.RemoteTodoCounter[T][N].splice(He,1);try{cn=`todo/${gt}_${T}_${N}/info.todo`}catch{cn=`todo/${gt}/info.todo`}const Ve=yield B.indexed.loadTextFromUserPath(cn),We=JSON.parse(Ve);B.deleteTodoFromStorage(!0,We,!0)}catch{}O.push(gt),yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[T][N].info.name} (${B.lang.text.Main.Title})`,progress:He/Ge.length})}catch(Vt){console.log("\uc11c\ubc84 \ud574\uc57c\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",Vt)}}ce()});return function(ce){return q.apply(this,arguments)}}());const ie=yield B.indexed.GetFileListFromDB("todo/RemoteTodo_");for(let q=0,ce=ie.length;q<ce;q++){yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[T][N].info.name} (${B.lang.text.Main.Title})`,progress:q/ce});try{if(ie[q].indexOf("info.todo")>=0){const Ge=yield B.indexed.loadTextFromUserPath(ie[q]),He=JSON.parse(Ge);if(He.remote.isOfficial==T&&He.remote.target==N){if(O.includes(He.id)){const Vt=O.indexOf(He.id);O.splice(Vt,1);continue}(yield B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"server_todo",key:He.id,user_id:B.servers[T][N].session.user_id}]})).objects.length||((yield B.indexed.GetFileListFromDB(`todo/${He.id}_${T}_${N}`)).forEach(cn=>B.indexed.removeFileFromUserPath(cn)),B.RemoveLocalPushSchedule(He),B.noti.ClearNoti(He.id),B.global.p5removeTodo&&B.global.p5removeTodo(Ge))}}}catch{}}B.p5loading.remove("nakama_login")})()}getRemoteTodoCounter(T,N){var B=this;return(0,j.A)(function*(){try{B.RemoteTodoCounter[T][N].sort((q,ce)=>q-ce);let O=B.RemoteTodoCounter[T][N].length;if(!O)throw"\uc815\ud574\uc9c4 \uac12\uc774 \uc5c6\uc5b4?";let ie=B.RemoteTodoCounter[T][N][O-1]+1;return B.RemoteTodoCounter[T][N].push(ie),ie}catch{let ie=yield B.SyncTodoCounter(T,N),q=0;return ie&&ie.objects.length&&ie.objects[0].value.data.length?q=ie.objects[0].value.data.pop()+1:B.RemoteTodoCounter[T][N]=[0],q}})()}SyncTodoCounter(T,N){var B=this;return(0,j.A)(function*(){try{let O=yield B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"server_todo",key:"RemoteTodo_Counter",user_id:B.servers[T][N].session.user_id}]});return B.RemoteTodoCounter[T][N]=O.objects[0].value.data,O}catch{}})()}removeRemoteTodoCounter(T,N,B){var O=this;return(0,j.A)(function*(){try{let ie=O.RemoteTodoCounter[T][N].indexOf(B);ie>=0&&O.RemoteTodoCounter[T][N].splice(ie,1)}catch{}yield O.updateRemoteCounter(T,N)})()}updateRemoteCounter(T,N){var B=this;return(0,j.A)(function*(){if(B.RemoteTodoCounter[T][N].length){for(let O=B.RemoteTodoCounter[T][N].length-1;O>=0;O--)(void 0===B.RemoteTodoCounter[T][N][O]||null==B.RemoteTodoCounter[T][N][O])&&B.RemoteTodoCounter[T][N].splice(O,1);B.RemoteTodoCounter[T][N].sort((O,ie)=>O-ie);for(let O=B.RemoteTodoCounter[T][N].length-2;O>=0;O--)B.RemoteTodoCounter[T][N][O+1]==B.RemoteTodoCounter[T][N][O]&&B.RemoteTodoCounter[T][N].splice(O,1)}yield B.servers[T][N].client.writeStorageObjects(B.servers[T][N].session,[{collection:"server_todo",key:"RemoteTodo_Counter",permission_read:2,permission_write:1,value:{data:B.RemoteTodoCounter[T][N]}}])})()}modify_remote_info_as_local(T,N,B){var O=this;return(0,j.A)(function*(){var ie,q;T.remote.name=O.servers[N][B].info.name,T.remote.isOfficial=N,T.remote.target=B,T.remote.type=`${N}/${B}`,O.set_todo_notification(T);try{T.is_me=T.remote.creator_id==O.servers[N][B].session.user_id}catch{}null===(ie=(q=O.global).p5todoAddtodo)||void 0===ie||ie.call(q,JSON.stringify(T));let ce=yield O.indexed.loadTextFromUserPath(`todo/${T.id}_${N}_${B}/info.todo`);if(ce){let Ge=JSON.parse(ce);if(T.written<=Ge.written&&Ge.modified){if(Ge.done)return void O.doneTodo(T,!0);if(Ge.removed)return void O.deleteTodoFromStorage(!0,Ge,!0);delete Ge.modified,O.global.p5todoAddtodo(JSON.stringify(Ge)),yield O.indexed.saveTextFileToUserPath(JSON.stringify(Ge),`todo/${Ge.id}_${N}_${B}/info.todo`);try{const He=yield O.servers[Ge.remote.isOfficial][Ge.remote.target].client.writeStorageObjects(O.servers[Ge.remote.isOfficial][Ge.remote.target].session,[{collection:"server_todo",key:Ge.id,permission_read:2,permission_write:1,value:Ge}]);yield O.servers[Ge.remote.isOfficial][Ge.remote.target].client.rpc(O.servers[Ge.remote.isOfficial][Ge.remote.target].session,"send_noti_fn",{receiver_id:O.servers[Ge.remote.isOfficial][Ge.remote.target].session.user_id,title:"manage_todo",content:{type:"add",collection:He.acks[0].collection,key:He.acks[0].key},code:yr.MANAGE_TODO,persistent:!1})}catch(He){console.log("\ud560 \uc77c \uc218\uc815 \uc804\ud30c \uc624\ub958: ",He)}}else O.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${B}/info.todo`)}else O.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${B}/info.todo`)})()}doneTodo(T,N=!1){var B=this;return(0,j.A)(function*(){var O,ie;T.done=!0;const q=`nakama_doneTodo_${Date.now()}`;if(null===(O=(ie=B.global).p5todoAddtodo)||void 0===O||O.call(ie,JSON.stringify(T)),T.remote){N||B.p5loading.update({id:q});try{yield B.servers[T.remote.isOfficial][T.remote.target].client.rpc(B.servers[T.remote.isOfficial][T.remote.target].session,"send_noti_fn",{receiver_id:B.servers[T.remote.isOfficial][T.remote.target].session.user_id,title:"manage_todo",content:{type:"done",id:T.id},code:yr.MANAGE_TODO,persistent:!1}),N||B.p5loading.remove(q)}catch{let Ge;T.modified=!0;try{Ge=`todo/${T.id}_${T.remote.isOfficial}_${T.remote.target}/info.todo`}catch{Ge=`todo/${T.id}/info.todo`}return yield B.indexed.saveTextFileToUserPath(JSON.stringify(T),Ge),void(N||B.p5loading.remove(q))}}yield B.deleteTodoFromStorage(!1,T,N,q)})()}deleteTodoFromStorage(T,N,B=!1,O){var ie=this;return(0,j.A)(function*(){const q=O||`nakama_deleteTodoFromStorage_${Date.now()}`;if(B||ie.p5loading.update({id:q,message:`${ie.lang.text.TodoDetail.RemoveTodo}: ${N.title}`}),N.attach&&N.attach.length)for(let cn=0,Ve=N.attach.length;cn<Ve;cn++)N.attach[cn].url&&""!==N.attach[cn].type&&ie.global.remove_file_from_storage(N.attach[cn].url,{});if(N.remote)try{if(!ie.servers[N.remote.isOfficial][N.remote.target])throw"Server deleted.";try{const cn=N.remote.isOfficial,Ve=N.remote.target;if(yield ie.servers[cn][Ve].client.deleteStorageObjects(ie.servers[cn][Ve].session,{object_ids:[{collection:"server_todo",key:N.id}]}),N.attach)for(let We=0,ft=N.attach.length;We<ft;We++)N.attach[We].url?""!==N.attach[We].type&&ie.global.remove_file_from_storage(N.attach[We].url,{cdn_port:ie.servers[cn][Ve].info.cdn_port,user_id:ie.servers[cn][Ve].session.user_id}):yield ie.sync_remove_file(N.attach[We].path,cn,Ve,"todo_attach");T&&(yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id,title:"manage_todo",content:{type:"delete",id:N.id},code:yr.MANAGE_TODO,persistent:!1}))}catch(cn){console.error("\ud574\uc57c\ud560 \uc77c \uc0ad\uc81c \uc694\uccad\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",cn)}try{if(N.remote.creator_id!=ie.servers[N.remote.isOfficial][N.remote.target].session.user_id){let cn=(new Date).getTime();try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_done_fn",{id:N.id,creator_id:N.remote.creator_id,user_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id,timestamp:cn,isDelete:T})}catch{}try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:N.remote.creator_id,title:"Manage_todo_add",content:{type:"worker",id:N.id,isDelete:T,timeAt:cn},code:yr.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch{}}}catch{}if(N.workers){try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_delete_fn",{id:N.id,workers:N.workers})}catch{}for(let cn=0,Ve=N.workers.length;cn<Ve;cn++)try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:N.workers[cn].id,title:"Manage_todo_add",content:{type:T?"delete":"done",id:N.id},code:yr.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch{}}try{const ft=`${ie.servers[N.remote.isOfficial][N.remote.target].info.useSSL?"https":"http"}://${ie.servers[N.remote.isOfficial][N.remote.target].info.address}:${ie.servers[N.remote.isOfficial][N.remote.target].info.webpush_port||5e3}`,nt=[...N.workers||[],ie.servers[N.remote.isOfficial][N.remote.target].session.user_id];yield ie.remove_schedule_webpush(ft,{todo_id:N.id},nt)}catch(cn){console.log("\uc6d0\uaca9 \ud560 \uc77c \uc54c\ub9bc \ucde8\uc18c \uc2e4\ud328: ",cn)}yield ie.removeRemoteTodoCounter(N.remote.isOfficial,N.remote.target,Number(N.id.split("_").pop()))}catch{var ce,Ge;let Ve;N.modified=!0,N.removed=!0;try{Ve=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}/info.todo`}catch{Ve=`todo/${N.id}/info.todo`}return yield ie.indexed.saveTextFileToUserPath(JSON.stringify(N),Ve),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id),T&&(null===(ce=(Ge=ie.global).p5removeTodo)||void 0===ce||ce.call(Ge,JSON.stringify(N))),void(B||ie.p5loading.remove(q))}try{var He;let cn=localStorage.getItem("fallback_fs");if(!cn)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Ve=cn.split("://"),We=Ve.pop().split(":"),ft=Ve.pop();ft?ft+=":":ft=ie.global.checkProtocolFromAddress(We[0])?"https:":"http:";const nt=null===(He=We[1])||void 0===He?void 0:He.split(","),Dt=`${ft}//${We[0]}:${(null==nt?void 0:nt[2])||5e3}`;let Bn=[localStorage.getItem("fallback_fs_push_tog")];yield ie.remove_schedule_webpush(Dt,{todo_id:N.id},Bn)}catch(cn){console.log("FFS \ud560 \uc77c \uc54c\ub9bc \uc0ad\uc81c \uc808\ucc28 \uc624\ub958: ",cn)}let gt;ie.global.RemoveTodoTags(N);try{gt=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}`}catch{gt=`todo/${N.id}`}(yield ie.indexed.GetFileListFromDB(gt)).forEach(cn=>ie.indexed.removeFileFromUserPath(cn)),ie.RemoveLocalPushSchedule(N),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id),T&&ie.global.p5todo&&ie.global.p5removeTodo(JSON.stringify(N)),B||ie.p5loading.remove(q)})()}load_groups(T,N,B,O=!1){var ie=this;return(0,j.A)(function*(){let q=ie.groups[T][N][B].channel_id;try{if("missing"!=ie.groups[T][N][B].status){let ce=yield ie.servers[T][N].client.listGroupUsers(ie.servers[T][N].session,B);if(ce.group_users.length){let Ge=!0;for(let He=0,gt=ce.group_users.length;He<gt;He++)if(ce.group_users[He].user.id==ie.servers[T][N].session.user_id){switch(ce.group_users[He].state){case 0:case 1:case 2:ie.groups[T][N][B].status="online";break;case 3:ie.groups[T][N][B].status="pending";break;default:console.log("\uc774\ud574\ud560 \uc218 \uc5c6\ub294 \ucf54\ub4dc \ubc18\ud658: ",ce.group_users[He].state),ie.groups[T][N][B].status="missing"}ie.PromotedGroup[T]||(ie.PromotedGroup[T]={}),ie.PromotedGroup[T][N]||(ie.PromotedGroup[T][N]={}),ce.group_users[He].state<2?ie.PromotedGroup[T][N][B]=!0:delete ie.PromotedGroup[T][N][B],Ge=!1,ce.group_users[He].is_me=!0;break}Ge&&(ie.groups[T][N][B].status="missing",q&&(ie.channels_orig[T][N][q].status="missing"),ie.save_channels_with_less_info())}else ie.groups[T][N][B].status="missing",ie.channels_orig[T][N][q].status="missing",ie.save_channels_with_less_info();ce.group_users.length&&(ie.groups[T][N][B].users=ce.group_users);for(let Ge=0,He=ce.group_users.length;Ge<He;Ge++)if(ce.group_users[Ge].is_me)ce.group_users[Ge].user=ie.users.self;else try{if(O)throw"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub9cc \ubc1b\uc74c";let gt=yield ie.servers[T][N].client.readStorageObjects(ie.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:ce.group_users[Ge].user.id}]});gt.objects.length?ce.group_users[Ge].user.img=gt.objects[0].value.img:delete ce.group_users[Ge].user.img,ie.save_other_user(ce.group_users[Ge].user,T,N)}catch(gt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",gt),ie.save_other_user(ce.group_users[Ge].user,T,N)}ie.save_groups_with_less_info()}}catch(ce){console.log("load_groups_error: ",ce)}})()}save_profile_to_server(T,N=!0){var B=this;return(0,j.A)(function*(){let O=B.get_all_online_server();if(B.users.self.display_name!==T)for(let ie=0,q=O.length;ie<q;ie++){try{yield O[ie].client.updateAccount(O[ie].session,{display_name:B.users.self.display_name});try{yield B.servers[O[ie].info.isOfficial][O[ie].info.target].client.rpc(B.servers[O[ie].info.isOfficial][O[ie].info.target].session,"send_noti_fn",{receiver_id:B.servers[O[ie].info.isOfficial][O[ie].info.target].session.user_id,title:"edit_profile",content:{type:"info"},code:yr.EDIT_PROFILE,persistent:!1})}catch(ce){console.log("\uc140\ud504 \uc54c\ub9bc \uc2e4\ud328: ",ce)}}catch(ce){console.log("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",ce)}if(N&&B.channels_orig[O[ie].info.isOfficial][O[ie].info.target]){let ce=Object.keys(B.channels_orig[O[ie].info.isOfficial][O[ie].info.target]);ce&&ce.forEach(Ge=>{O[ie].socket.writeChatMessage(Ge,{user_update:"modify_data",noti_form:T==B.users.self.display_name?`: ${T}`:`: ${T} -> ${B.users.self.display_name}`})})}}B.save_self_profile()})()}save_self_profile(){let T={...this.users.self};delete T.img,this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/self/profile.json")}rearrange_all_user(){let T=[];return Object.keys(this.users).forEach(B=>{"self"!=B&&Object.keys(this.users[B]).forEach(ie=>{Object.keys(this.users[B][ie]).forEach(ce=>{T.push(this.users[B][ie][ce])})})}),T}load_other_user(T,N,B,O=(q=>{}),ie=!1){try{if(this.servers[N][B].session.user_id==T)return O(this.users.self),this.users.self}catch{}if(this.users[N][B]||(this.users[N][B]={}),this.users[N][B][T]&&!ie)return O(this.users[N][B][T]),this.users[N][B][T];this.users[N][B][T]={};let q=()=>{this.indexed.loadTextFromUserPath(`servers/${N}/${B}/users/${T}/profile.json`,(Ge,He)=>{if(Ge&&He){let gt=JSON.parse(He);Object.keys(gt).forEach(cn=>this.users[N][B][T][cn]=gt[cn])}O(this.users[N][B][T])})};try{this.servers[N][B].client.getUsers(this.servers[N][B].session,[T]).then(Ge=>{Ge.users.length?(Object.keys(Ge.users[0]).forEach(gt=>this.users[N][B][T][gt]=Ge.users[0][gt]),this.users[N][B][T].img||(this.users[N][B][T].img=null),this.save_other_user(this.users[N][B][T],N,B)):(this.indexed.removeFileFromUserPath(`${N}/${B}/users/${T}`),this.indexed.removeFileFromUserPath(`${N}/${B}/users/${T}/profile.json`),this.indexed.removeFileFromUserPath(`${N}/${B}/users/${T}/profile.img`)),O(this.users[N][B][T])}).catch(Ge=>{q()})}catch{q()}let ce=()=>{this.users[N][B][T].img&&(delete this.users[N][B][T].img,this.save_other_user(this.users[N][B][T],N,B)),this.indexed.loadTextFromUserPath(`servers/${N}/${B}/users/${T}/profile.img`,(Ge,He)=>{Ge&&He&&(this.users[N][B][T].img=He.replace(/"|=|\\/g,""))})};try{this.servers[N][B].client.readStorageObjects(this.servers[N][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T}]}).then(Ge=>{Ge.objects.length&&this.users[N][B][T].img!=Ge.objects[0].value.img&&(this.users[N][B][T].img=Ge.objects[0].value.img,this.save_other_user(this.users[N][B][T],N,B))}).catch(Ge=>{ce()})}catch{ce()}return this.users[N][B][T]}save_other_user(T,N,B){if(this.servers[N][B].session.user_id==T.id)return;let O=JSON.parse(JSON.stringify(T));T.id!=this.servers[N][B].session.user_id&&(delete O.img,delete O.online,delete O.todo_checked,delete O.todo_done,this.users[N][B]||(this.users[N][B]={}),this.users[N][B][T.id]||(this.users[N][B][T.id]={}),Object.keys(T).forEach(q=>this.users[N][B][T.id][q]=T[q]),this.indexed.saveTextFileToUserPath(JSON.stringify(O),`servers/${N}/${B}/users/${O.id}/profile.json`),T.img?this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${B}/users/${T.id}/profile.img`):void 0===T.img&&this.indexed.removeFileFromUserPath(`servers/${N}/${B}/users/${T.id}/profile.img`))}update_notifications(T,N){var B=this;return(0,j.A)(function*(){let O=yield B.servers[T][N].client.listNotifications(B.servers[T][N].session,1);B.noti_origin[T][N]={};for(let ie=0,q=O.notifications.length;ie<q;ie++)B.act_on_notification(O.notifications[ie],T,N);B.rearrange_notifications()})()}rearrange_notifications(){let T=[];return Object.keys(this.noti_origin).forEach(B=>{Object.keys(this.noti_origin[B]).forEach(ie=>{Object.keys(this.noti_origin[B][ie]).forEach(ce=>{T.push(this.noti_origin[B][ie][ce])})})}),T.sort((B,O)=>B.create_time<O.create_time?1:B.create_time>O.create_time?-1:0),this.notifications_rearrange=T,T}add_channel(T,N,B,O=!1){var ie=this;return(0,j.A)(function*(){if(!ie.channels_orig[N][B][T.id]){ie.channels_orig[N][B][T.id]={};try{O&&(yield ie.servers[N][B].client.rpc(ie.servers[N][B].session,"send_noti_fn",{receiver_id:ie.servers[N][B].session.user_id,title:"add_channel",content:{type:"add",id:T.redirect.id},code:yr.ADD_CHANNEL,persistent:!1}))}catch(ce){console.log("\uc0c8 \ucc44\ub110 \uc0dd\uc131\ub428 \uc140\ud504 \uc804\ud30c \uc2e4\ud328: ",ce)}}switch(Object.keys(T).forEach(ce=>ie.channels_orig[N][B][T.id][ce]=T[ce]),ie.channels_orig[N][B][T.id].cnoti_id||(ie.channels_orig[N][B][T.id].cnoti_id=ie.get_noti_id()),ie.channels_orig[N][B][T.id].redirect.type){case 2:let ce=ie.channels_orig[N][B][T.id].redirect.id;ie.channels_orig[N][B][T.id].color=(ce.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6);let Ge=ie.load_other_user(ce,N,B).online?"online":"pending";ie.channels_orig[N][B][T.id].status=Ge;break;case 3:try{ie.channels_orig[N][B][T.id].color=(ie.channels_orig[N][B][T.id].redirect.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),"missing"==ie.channels_orig[N][B][T.id].status&&delete ie.channels_orig[N][B][T.id].status}catch(He){console.error("\uadf8\ub8f9 \ucc44\ub110 \uc0dd\uc131 \uc624\ub958: ",He)}break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc885\ub958: ",ie.channels_orig[N][B][T.id])}})()}add_group_user_without_duplicate(T,N,B,O){let ie=!1;this.groups[B][O][N].users||(this.groups[B][O][N].users=[]);for(let q=0,ce=this.groups[B][O][N].users.length;q<ce;q++)if(this.groups[B][O][N].users[q].user.id==T.user.id){ie=!0;break}ie||this.groups[B][O][N].users.push(T)}load_channel_list(){var T=this;return(0,j.A)(function*(){let N=yield T.indexed.loadTextFromUserPath("servers/channels.json");N&&(T.channels_orig=JSON.parse(N),Object.keys(T.channels_orig).forEach(O=>{Object.keys(T.channels_orig[O]).forEach(q=>{T.CreateEmptyForm(O,q),Object.keys(T.channels_orig[O][q]).forEach(Ge=>{try{if(T.channels_orig[O][q][Ge].volatile)throw delete T.channels_orig[O][q][Ge],`\ud718\ubc1c\uc131 \ucc44\ub110 \ubb34\uc2dc: ${Ge}`;2==T.channels_orig[O][q][Ge].redirect.type&&(T.channels_orig[O][q][Ge].info=T.load_other_user(T.channels_orig[O][q][Ge].redirect.id,O,q)),"missing"!=T.channels_orig[O][q][Ge].status&&(delete T.channels_orig[O][q][Ge].status,0==T.channels_orig[O][q][Ge].redirect.type&&(T.channels_orig[O][q][Ge].status="certified")),T.channels_orig[O][q][Ge].is_new&&!T.subscribe_lock&&(T.has_new_channel_msg=!0)}catch{}})})}))})()}get_noti_id(){return this.noti_id=this.check_If_RegisteredId(this.noti_id+1),this.registered_id.push(this.noti_id),this.noti_id}check_If_RegisteredId(T){let N=!1;for(let B=0,O=this.registered_id.length;B<O;B++)if(this.registered_id[B]==T){N=!0;break}return N?this.check_If_RegisteredId(T+1):T}removeRegisteredId(T){for(let N=0,B=this.registered_id.length;N<B;N++)if(this.registered_id[N]==T){this.registered_id.splice(N,1);break}}redirect_channel(T,N){var B=this;return(0,j.A)(function*(){if(B.channels_orig[T][N]){let O=Object.keys(B.channels_orig[T][N]);for(let ie=0,q=O.length;ie<q;ie++)try{yield B.p5loading.update({id:"nakama_login",message:`${B.lang.text.Nakama.SyncingChannel}: ${B.servers[T][N].info.name} (${B.lang.text.Subscribes.Title})`,progress:ie/q}),"missing"!=B.channels_orig[T][N][O[ie]].status&&2===(yield B.servers[T][N].socket.joinChat(B.channels_orig[T][N][O[ie]].redirect.id,B.channels_orig[T][N][O[ie]].redirect.type,B.channels_orig[T][N][O[ie]].redirect.persistence,!1),B.channels_orig[T][N][O[ie]].cnoti_id||(B.channels_orig[T][N][O[ie]].cnoti_id=B.get_noti_id()),B.channels_orig[T][N][O[ie]].color=(B.channels_orig[T][N][O[ie]].info.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),B.channels_orig[T][N][O[ie]].redirect.type)&&(B.servers[T][N].client.readStorageObjects(B.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:B.channels_orig[T][N][O[ie]].redirect.id}]}).then(ce=>{let Ge=B.load_other_user(B.channels_orig[T][N][O[ie]].redirect.id,T,N);Ge.img=ce.objects.length?ce.objects[0].value.img:void 0,B.save_other_user(Ge,T,N)}),B.channels_orig[T][N][O[ie]].update||B.servers[T][N].client.listChannelMessages(B.servers[T][N].session,O[ie],1,!1).then(ce=>{ce.messages.length&&B.update_from_channel_msg(ce.messages[0],T,N)}))}catch{B.channels_orig[T][N][O[ie]].status="missing",B.p5loading.remove("nakama_login")}}})()}rearrange_channels(){this.HasRemovedChannel=!1;let T=[];return Object.keys(this.channels_orig).forEach(B=>{Object.keys(this.channels_orig[B]).forEach(ie=>{Object.keys(this.channels_orig[B][ie]).forEach(ce=>{this.channels_orig[B][ie][ce].server={isOfficial:B,target:ie};try{this.channels_orig[B][ie][ce].server.name=this.servers[B][ie].info.name}catch{this.channels_orig[B][ie][ce].server.name=this.lang.text.Nakama.DeletedServer}try{switch(this.channels_orig[B][ie][ce].info||(this.channels_orig[B][ie][ce].info={}),this.HasRemovedChannel=this.HasRemovedChannel||"missing"==this.channels_orig[B][ie][ce].status,this.channels_orig[B][ie][ce].redirect.type){case 1:break;case 2:let Ge=this.load_other_user(this.channels_orig[B][ie][ce].redirect.id,B,ie);Object.keys(Ge).forEach(gt=>this.channels_orig[B][ie][ce].info[gt]=Ge[gt]),this.channels_orig[B][ie][ce].title=this.channels_orig[B][ie][ce].info.display_name;break;case 3:this.groups[B][ie]&&this.groups[B][ie][this.channels_orig[B][ie][ce].redirect.id]?(this.channels_orig[B][ie][ce].info=this.groups[B][ie][this.channels_orig[B][ie][ce].redirect.id],this.channels_orig[B][ie][ce].title=this.groups[B][ie][this.channels_orig[B][ie][ce].redirect.id].name,"missing"==this.groups[B][ie][this.channels_orig[B][ie][ce].redirect.id].status&&(this.channels_orig[B][ie][ce].status=this.groups[B][ie][this.channels_orig[B][ie][ce].redirect.id].status)):this.channels_orig[B][ie][ce].status="missing";break;case 0:this.channels_orig[B][ie][ce].info||(this.channels_orig[B][ie][ce].info={}),this.channels_orig[B][ie][ce].info.name=this.channels_orig[B][ie][ce].title,this.channels_orig[B][ie][ce].info.img||this.indexed.loadTextFromUserPath(`servers/${B}/${ie}/groups/${ce}.img`,(gt,Vt)=>{gt&&Vt&&(this.channels_orig[B][ie][ce].info.img=Vt)})}}catch{}this.channels_orig[B][ie][ce].info.isOfficial=B,this.channels_orig[B][ie][ce].info.target=ie,this.channels_orig[B][ie][ce].last_comment_time||(this.channels_orig[B][ie][ce].last_comment_time=Date.now()),T.push(this.channels_orig[B][ie][ce])})})}),T.sort((B,O)=>{let ie=new Date(B.last_comment_time||0).getTime(),q=new Date(O.last_comment_time||0).getTime();return ie<q?1:ie>q?-1:0}),T.sort((B,O)=>B.is_new?O.is_new?0:-1:O.is_new?1:0),this.channels=T,this.save_channels_with_less_info(),T}save_channels_with_less_info(){let T=JSON.parse(JSON.stringify(this.channels_orig));Object.keys(T).forEach(B=>{Object.keys(T[B]).forEach(ie=>{let q=Object.keys(T[B][ie]);q.forEach(ce=>{delete T[B][ie][ce].img,delete T[B][ie][ce].group,delete T[B][ie][ce].info,delete T[B][ie][ce].update,delete T[B][ie][ce].presences,delete T[B][ie][ce].cnoti_id,delete T[B][ie][ce].color,delete T[B][ie][ce].isOfficial,delete T[B][ie][ce].target,T[B][ie][ce].is_new||delete T[B][ie][ce].is_new}),q.length||delete T[B][ie]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/channels.json")}limit_image_size(T,N=(B=>{})){new qt(O=>{O.setup=()=>{O.noCanvas(),O.loadImage(T,q=>{q.resize(window.innerWidth,window.innerWidth*q.height/q.width),q.canvas.toDataURL().length>245e3&&ie(q),N(q),O.remove()},q=>{this.p5toast.show({text:this.lang.text.Nakama.CannotOpenImg}),O.remove()})};let ie=q=>{q.resize(.95*q.width,.95*q.height),q.canvas.toDataURL().length>245e3&&ie(q)}})}try_add_group(T){var N=this;return new Promise(function(){var B=(0,j.A)(function*(O,ie){let q=N.get_all_online_server();for(let ce=0,Ge=q.length;ce<Ge;ce++)try{let He=yield q[ce].client.joinGroup(q[ce].session,T.id);if(!He)return void console.log("\uadf8\ub8f9 join \uc2e4\ud328... \ubca4 \ub2f9\ud588\uc744 \ub54c\uc778\ub4ef? \ud5a5\ud6c4\uc5d0 \uac80\ud1a0 \ud544");He=yield q[ce].client.listGroups(q[ce].session,decodeURIComponent(T.name));for(let gt=0,Vt=He.groups.length;gt<Vt;gt++)if(He.groups[gt].id==T.id){let cn=He.groups[gt];cn.status=cn.open?"online":"pending",cn.server=N.servers[q[ce].info.isOfficial][q[ce].info.target].info;try{yield N.load_groups(q[ce].info.isOfficial,q[ce].info.target,He.groups[gt].id,!0)}catch(Ve){console.error("\uadf8\ub8f9 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",Ve)}try{let Ve=yield N.servers[q[ce].info.isOfficial][q[ce].info.target].client.readStorageObjects(N.servers[q[ce].info.isOfficial][q[ce].info.target].session,{object_ids:[{collection:"group_public",key:`group_${He.groups[gt].id}`,user_id:He.groups[gt].creator_id}]});Ve.objects.length?cn.img=Ve.objects[0].value.img:delete cn.img}catch(Ve){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \ud655\uc778 \uc624\ub958: ",Ve)}if(N.save_group_info(cn,q[ce].info.isOfficial,q[ce].info.target),yield N.servers[q[ce].info.isOfficial][q[ce].info.target].client.rpc(N.servers[q[ce].info.isOfficial][q[ce].info.target].session,"send_noti_fn",{receiver_id:N.servers[q[ce].info.isOfficial][q[ce].info.target].session.user_id,title:"add_channel",content:{type:"add",id:He.groups[gt].id},code:yr.ADD_CHANNEL,persistent:!1}),cn.open){let Ve=yield N.join_chat_with_modulation(cn.id,3,q[ce].info.isOfficial,q[ce].info.target);(!N.opened_page_info.channel||N.opened_page_info.channel.isOfficial!=q[ce].info.isOfficial||N.opened_page_info.channel.target!=q[ce].info.target||N.opened_page_info.channel.id!=Ve.id)&&N.servers[q[ce].info.isOfficial][q[ce].info.target].client.listChannelMessages(N.servers[q[ce].info.isOfficial][q[ce].info.target].session,Ve.id,1,!1).then(We=>{We.messages.length&&N.update_from_channel_msg(We.messages[0],q[ce].info.isOfficial,q[ce].info.target),N.save_group_info(cn,q[ce].info.isOfficial,q[ce].info.target),N.go_to_chatroom(Ve)}).catch(We=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",We)})}O();break}}catch(He){switch(He.status){case 400:console.log("\uc774\ubbf8 \uadf8\ub8f9\uc5d0 \uac00\uc785\ub418\uc5b4 \uc788\uc74c: 400");let gt=yield N.join_chat_with_modulation(T.id,3,q[ce].info.isOfficial,q[ce].info.target);N.servers[q[ce].info.isOfficial][q[ce].info.target].client.listChannelMessages(N.servers[q[ce].info.isOfficial][q[ce].info.target].session,gt.id,1,!1).then(Vt=>{Vt.messages.length&&N.update_from_channel_msg(Vt.messages[0],q[ce].info.isOfficial,q[ce].info.target),N.go_to_chatroom(gt)}).catch(Vt=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",Vt)}),O();break;case 404:console.log("\uc774 \uc11c\ubc84\uc5d0 \uc5c6\ub294 \uadf8\ub8f9: 404");break;default:console.error("\uadf8\ub8f9 \ucd94\uac00 \uc624\ub958: ",He)}}ie(N.lang.text.Nakama.GroupAllListDone)});return function(O,ie){return B.apply(this,arguments)}}())}save_group_info(T,N,B){this.groups[N][B]||(this.groups[N][B]={}),this.groups[N][B][T.id]=T,this.save_groups_with_less_info(),this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${B}/groups/${T.id}.img`),T.owner==this.servers[N][B].session.user_id&&T.img&&this.servers[N][B].client.writeStorageObjects(this.servers[N][B].session,[{collection:"group_public",key:`group_${T.id}`,value:{img:T.img},permission_read:2,permission_write:1}])}save_groups_with_less_info(T=(()=>{})){let N=JSON.parse(JSON.stringify(this.groups));Object.keys(N).forEach(O=>{Object.keys(N[O]).forEach(q=>{let ce=Object.keys(N[O][q]);ce.forEach(Ge=>{if(delete N[O][q][Ge].server,delete N[O][q][Ge].img,N[O][q][Ge].users)for(let He=0,gt=N[O][q][Ge].users.length;He<gt;He++)if(N[O][q][Ge].users[He]){delete N[O][q][Ge].users[He].state;try{N[O][q][Ge].users[He].user.id?(N[O][q][Ge].users[He].user={id:N[O][q][Ge].users[He].user.id},this.servers[O][q]&&this.servers[O][q].session&&N[O][q][Ge].users[He].user.id==this.servers[O][q].session.user_id&&(N[O][q][Ge].users[He].is_me=!0)):N[O][q][Ge].users[He].is_me||N[O][q][Ge].users.splice(He,1)}catch{}}}),ce.length||delete N[O][q]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(N),"servers/groups.json").then(()=>{T()})}remove_group_list(T,N,B,O=!1){var ie=this;return(0,j.A)(function*(){try{let ce=T.creator_id==ie.servers[N][B].session.user_id;if(!ie.servers[N][B]||!ce)throw"not a group creator";try{let He=`${T.server.useSSL?"https":"http"}://${T.server.address}`,gt=ie.servers[N][B].info;yield ie.global.remove_files_from_storage_with_key(He,T.id,{cdn_port:gt.cdn_port,apache_port:gt.apache_port,user_id:ie.servers[N][B].session.user_id})}catch{}(yield ie.servers[N][B].client.deleteGroup(ie.servers[N][B].session,T.id))||console.log("\uadf8\ub8f9 \uc0ad\uc81c \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),ie.remove_channel_files(N,B,T.channel_id,ce);try{throw yield ie.servers[N][B].client.deleteStorageObjects(ie.servers[N][B].session,{object_ids:[{collection:"group_public",key:`group_${T.id}`}]}),"Remove group image well"}catch{throw"No group image found"}}catch{try{var q;let Ge=localStorage.getItem("fallback_fs");if(!Ge)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let He=Ge.split("://"),gt=He.pop().split(":"),Vt=He.pop();Vt?Vt+=":":Vt=ie.global.checkProtocolFromAddress(gt[0])?"https:":"http:";const cn=null===(q=gt[1])||void 0===q?void 0:q.split(",");let Ve=`${Vt}//${gt[0]}:${(null==cn?void 0:cn[1])||9002}/`;gt[0]&&(yield ie.global.remove_files_from_storage_with_key(Ve,`${T.id}_${ie.servers[N][B].session.user_id}`,{}))}catch{}try{let Ge=`${T.server.useSSL?"https":"http"}://${T.server.address}`;if(T.server.address){let He=ie.servers[N][B].info;yield ie.global.remove_files_from_storage_with_key(Ge,`${T.id}_${ie.servers[N][B].session.user_id}`,{cdn_port:He.cdn_port,apache_port:He.apache_port,user_id:ie.servers[N][B].session.user_id})}}catch{}}try{if(O){yield ie.indexed.removeFileFromUserPath(`servers/${N}/${B}/groups/${T.id}.img`);try{delete ie.groups[N][B][T.id],ie.save_groups_with_less_info()}catch{}}}catch{}try{delete ie.PromotedGroup[N][B][T.id]}catch{}})()}remove_channel_files(T,N,B,O,ie){var q=this;return(0,j.A)(function*(){var ce,Ge;const He=ie||"remove_channel_files",gt=(null===(ce=q.channels_orig[T][N][B])||void 0===ce?void 0:ce.title)||("4"==B.charAt(0)?null===(Ge=q.users[T][N][B.split(".").find(Vt=>Vt in q.users[T][N])])||void 0===Ge?void 0:Ge.display_name:void 0);try{yield q.p5loading.update({id:He,message:`${q.lang.text.GroupDetail.BreakupGroup}: ${gt}`,forceEnd:null}),yield q.servers[T][N].client.rpc(q.servers[T][N].session,"remove_channel_file",{collection:`file_${B.replace(/[.]/g,"_")}`,is_creator:O}),q.p5loading.update({id:He,progress:1},!0)}catch(Vt){q.p5loading.update({id:He,message:`${q.lang.text.AdminTools.FailedClear}: ${(Vt.statusText?`${Vt.statusText}(${Vt.status})`:Vt.status)||Vt}`,progress:0},!0)}ie||q.p5loading.remove(He)})()}get_group_list_from_server(T,N,B){var O=this;return(0,j.A)(function*(){const ie="nakama_login";yield O.p5loading.update({id:ie,message:`${O.lang.text.Nakama.SyncingChannel}: ${O.servers[T][N].info.name} (${O.lang.text.AddGroup.GroupInfo})`,progress:null});let q=yield O.servers[T][N].client.listUserGroups(O.servers[T][N].session,O.servers[T][N].session.user_id);try{for(let ce=0,Ge=q.user_groups.length;ce<Ge;ce++)B||(yield O.p5loading.update({id:ie,message:`${O.lang.text.Nakama.SyncingChannel}: ${O.servers[T][N].info.name} (${O.lang.text.AddGroup.GroupInfo})`,progress:ce/Ge})),(void 0===B||B==q.user_groups[ce].group.id)&&(O.groups[T][N][q.user_groups[ce].group.id]||(O.groups[T][N][q.user_groups[ce].group.id]={}),O.servers[T][N].client.readStorageObjects(O.servers[T][N].session,{object_ids:[{collection:"group_public",key:`group_${q.user_groups[ce].group.id}`,user_id:q.user_groups[ce].group.creator_id}]}).then(He=>{He.objects.length?(O.groups[T][N][q.user_groups[ce].group.id].img=He.objects[0].value.img,O.indexed.saveTextFileToUserPath(He.objects[0].value.img,`servers/${T}/${N}/groups/${q.user_groups[ce].group.id}.img`)):(delete O.groups[T][N][q.user_groups[ce].group.id].img,O.indexed.removeFileFromUserPath(`servers/${T}/${N}/groups/${q.user_groups[ce].group.id}.img`))}).catch(He=>{console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",He)}),O.groups[T][N][q.user_groups[ce].group.id]={...O.groups[T][N][q.user_groups[ce].group.id],...q.user_groups[ce].group},B&&"missing"==O.groups[T][N][q.user_groups[ce].group.id].status&&(O.groups[T][N][q.user_groups[ce].group.id].status="online"),O.load_groups(T,N,q.user_groups[ce].group.id,!0).then(()=>{O.join_chat_with_modulation(q.user_groups[ce].group.id,3,T,N).then(()=>{O.rearrange_channels()})}))}catch(ce){console.error("\uc0ac\uc6a9\uc790 \uadf8\ub8f9 \uac00\uc838\uc624\uae30 \uc624\ub958: ",ce),O.p5loading.remove(ie)}B&&O.p5loading.remove(ie)})()}rearrange_group_list(T=!0){let N=[];return Object.keys(this.groups).forEach(O=>{Object.keys(this.groups[O]).forEach(q=>{Object.keys(this.groups[O][q]).forEach(Ge=>{try{this.groups[O][q][Ge].server=this.servers[O][q].info,N.push(this.groups[O][q][Ge])}catch{this.groups[O][q][Ge].server={name:this.lang.text.Nakama.DeletedServer,isOfficial:O,target:q},T&&N.push(this.groups[O][q][Ge])}})})}),N}set_group_statusBar(T,N,B){this.statusBar.groupServer[N]||(this.statusBar.groupServer[N]={}),this.statusBar.groupServer[N][B]=T,this.catch_group_server_header(T),this.StatusBarChangedCallback&&this.StatusBarChangedCallback()}count_channel_online_member(T,N,B){var O=this;return(0,j.A)(function*(){let ie="pending";try{if("offline"==O.statusBar.groupServer[N][B])throw"\uc11c\ubc84 \uc624\ud504\ub77c\uc778";if(T.group_id){var q;let ce=null===(q=O.groups[N][B][T.group_id].users)||void 0===q?void 0:q.length;if(O.groups[N][B][T.group_id].max_count<=1)return ie=O.users.self.online?"online":"offline",void("missing"!=O.channels_orig[N][B][T.channel_id||T.id].status&&(O.channels_orig[N][B][T.channel_id||T.id].status=ie));if(void 0!==ce)for(let Ge=0;Ge<ce;Ge++){let He=O.groups[N][B][T.group_id].users[Ge].user.id||O.servers[N][B].session.user_id;if(He!=O.servers[N][B].session.user_id&&(yield new Promise(Vt=>{O.load_other_user(He,N,B,cn=>Vt(cn))})).online){ie="online";break}}else ie="pending"}else if(T.user_id_one)if(O.channels_orig[N][B][T.channel_id||T.id]){let ce=O.channels_orig[N][B][T.channel_id||T.id].redirect.id,Ge=yield O.servers[N][B].client.getUsers(O.servers[N][B].session,[ce]);Object.keys(Ge.users[0]).forEach(gt=>{O.users[N][B][ce][gt]=Ge.users[0][gt]}),ie=O.load_other_user(ce,N,B).online?"online":"pending"}else try{let ce=yield O.join_chat_with_modulation(T.user_id_one!=O.servers[N][B].session.user_id?T.user_id_one:T.user_id_two,2,N,B);ie=O.load_other_user(O.channels_orig[N][B][ce.id].redirect.id,N,B).online?"online":"pending"}catch(ce){console.error(ce)}}catch{ie="offline"==O.statusBar.groupServer[N][B]?"offline":"missing"}O.channels_orig[N][B][T.channel_id||T.id]||(O.channels_orig[N][B][T.channel_id||T.id]={}),"missing"!=O.channels_orig[N][B][T.channel_id||T.id].status&&(O.channels_orig[N][B][T.channel_id||T.id].status=ie)})()}remove_server(T,N,B){var O=this;return(0,j.A)(function*(){const ie="nakama_remove_server";O.p5loading.update({id:ie,message:O.lang.text.Nakama.RemovingAccount});const q=O.servers[T][N].info;try{const gt=O.servers[T][N].session.user_id,Vt=`${q.useSSL?"https":"http"}://${q.address}`;try{if(B)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";yield O.global.remove_files_from_storage_with_key(Vt,gt,{cdn_port:q.cdn_port,apache_port:q.apache_port,user_id:O.servers[T][N].session.user_id})}catch{}try{var ce;if(B)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";const cn=localStorage.getItem("fallback_fs");if(!cn)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let Ve=cn.split("://"),We=Ve.pop().split(":"),ft=Ve.pop();ft?ft+=":":ft=O.global.checkProtocolFromAddress(We[0])?"https:":"http:";const nt=null===(ce=We[1])||void 0===ce?void 0:ce.split(",");let Dt=`${ft}//${We[0]}:${(null==nt?void 0:nt[1])||9002}/`;yield O.global.remove_files_from_storage_with_key(Dt,gt,{})}catch{}yield O.servers[T][N].client.rpc(O.servers[T][N].session,"remove_account_fn",{user_id:gt}).catch(cn=>{})}catch{}if(O.p5loading.update({id:ie,message:O.lang.text.Nakama.LogoutAccount}),"online"==O.statusBar.groupServer[T][N])try{O.servers[T][N].socket.disconnect(!0)}catch{O.link_group(T,N,!1)}O.p5loading.update({id:ie,message:O.lang.text.Nakama.RemovingNotification});try{delete O.noti_origin[T][N]}catch{}O.rearrange_notifications(),O.p5loading.update({id:ie,message:O.lang.text.Nakama.MissingChannels});try{let gt=Object.keys(O.channels_orig[T][N]);O.channels_orig.deleted||(O.channels_orig.deleted={}),O.channels_orig.deleted[N]||(O.channels_orig.deleted[N]={}),gt.forEach(Vt=>{O.channels_orig[T][N][Vt].info.status="missing",O.channels_orig[T][N][Vt].status="missing",O.channels_orig.deleted[N][Vt]=JSON.parse(JSON.stringify(O.channels_orig[T][N][Vt]))}),delete O.channels_orig[T][N]}catch{}O.save_channels_with_less_info();let Ge=yield O.indexed.GetFileListFromDB(`servers/${T}/${N}`);for(let gt=0,Vt=Ge.length;gt<Vt;gt++)try{let cn=yield O.indexed.GetFileInfoFromDB(Ge[gt]),Ve=Ge[gt].replace("/official/","/deleted/").replace(`/${T}/`,"/deleted/");yield O.indexed.saveFileToUserPath(cn,Ve),yield O.indexed.removeFileFromUserPath(Ge[gt]),O.p5loading.update({id:ie,message:`${O.lang.text.Nakama.MissingChannelFiles}: ${Ge[gt]}`})}catch(cn){console.log("\ud30c\uc77c \uc774\uad00 \uc2e4\ud328: ",cn)}O.post_counter.deleted||(O.post_counter.deleted={});try{const gt=yield O.indexed.loadTextFromUserPath("servers/post_counter.json"),Vt=JSON.parse(gt);O.post_counter.deleted[N]=Vt[T][N]}catch{}delete O.post_counter[T][N],delete O.posts_orig[T][N],O.rearrange_posts(),yield O.save_post_counter(),O.p5loading.update({id:ie,message:O.lang.text.Nakama.MissingGroups});try{O.groups.deleted||(O.groups.deleted={}),O.groups.deleted[N]||(O.groups.deleted[N]={}),O.groups.deleted[N]=JSON.parse(JSON.stringify(O.groups[T][N])),Object.keys(O.groups.deleted[N]).forEach(Vt=>{O.groups.deleted[N][Vt].server.name=O.lang.text.Nakama.DeletedServer,O.groups.deleted[N][Vt].server.isOfficial="deleted",O.groups.deleted[N][Vt].status="missing",O.groups.deleted[N][Vt]=JSON.parse(JSON.stringify(O.groups[T][N][Vt]))}),delete O.groups[T][N]}catch{}O.p5loading.update({id:ie,message:O.lang.text.Nakama.DeletingServerInfo}),O.set_group_statusBar("offline",T,N),delete O.statusBar.groupServer[T][N],yield O.RemoveWebRTCServer(O.servers[T][N].info.address),delete O.servers[T][N],O.save_groups_with_less_info(),O.indexed.saveTextFileToUserPath(JSON.stringify(O.statusBar.groupServer),"servers/list.json");let He=yield O.indexed.loadTextFromUserPath("servers/list_detail.csv");if(He){let gt=He.split("\n");for(let Vt=0,cn=gt.length;Vt<cn;Vt++)if(gt[Vt].split(",")[3]==N){gt.splice(Vt,1);break}O.indexed.saveTextFileToUserPath(gt.join("\n"),"servers/list_detail.csv")}O.noti.ClearNoti(9),O.p5loading.remove(ie)})()}connect_to(T="official",N="default"){var B=this;return(0,j.A)(function*(){yield B.servers[T][N].socket.connect(B.servers[T][N].session,!0);let O=B.servers[T][N].socket;Object.keys(B.on_socket_connected).forEach(ce=>B.on_socket_connected[ce]()),O.onnotification=ce=>{B.act_on_notification(ce,T,N),B.rearrange_notifications()};let q=[];return O.onchannelpresence=ce=>{if(void 0!==ce.joins){ce.joins.forEach(He=>{B.servers[T][N].session.user_id!=He.user_id&&(B.load_other_user(He.user_id,T,N).online=!0)});let Ge=!0;for(let He of ce.joins)if(He.user_id!=B.servers[T][N].session.user_id){Ge=!1;break}(!q.includes(ce.channel_id)||!Ge)&&(q.push(ce.channel_id),B.count_channel_online_member(ce,T,N))}else if(void 0!==ce.leaves){let Ge=[];ce.leaves.forEach(He=>{B.servers[T][N].session.user_id!=He.user_id&&B.servers[T][N].client.getUsers(B.servers[T][N].session,[He.user_id]).then(gt=>{let Vt=Object.keys(gt.users[0]);delete B.load_other_user(He.user_id,T,N).online,Vt.forEach(cn=>{B.users[T][N][He.user_id][cn]=gt.users[0][cn]}),Ge.push(He.user_id),Ge.forEach(cn=>B.load_other_user(cn,T,N)),B.count_channel_online_member(ce,T,N)})})}B.socket_reactive["others-online"]&&B.socket_reactive["others-online"]()},O.onchannelmessage=ce=>{B.channels_orig[T][N][ce.channel_id]?(B.update_from_channel_msg(ce,T,N),B.rearrange_channels()):ce.user_id_one?B.join_chat_with_modulation(ce.sender_id,2,T,N):ce.group_id&&B.join_chat_with_modulation(ce.group_id,3,T,N)},O.ondisconnect=ce=>{B.OnSocketDisconnect(T,N)},O})()}OnSocketDisconnect(T,N){this.link_group(T,N,!1),Object.keys(this.on_socket_disconnected).forEach(O=>this.on_socket_disconnected[O]())}saveListedMessage(T,N,B,O,ie){let q={},ce=JSON.parse(JSON.stringify(T)),Ge=ie||!1;for(;ce.length;){q.target!=ce[0].msgDate&&(q.msg&&(this.saveMessageByDate(q,N,B,O,Ge),Ge=!0),q.target=ce[0].msgDate,q.msg=[]);let He=ce.shift();delete He.content.text,delete He.content.img,delete He.content.local_comp,delete He.content.path,delete He.msgDate,delete He.displayDate,delete He.msgTime,delete He.isLastRead,delete He.showInfo,q.msg.push(He)}this.saveMessageByDate(q,N,B,O,Ge)}saveMessageByDate(T,N,B,O,ie=!1){if(!T.msg||!T.msg.length)return;const q=JSON.parse(JSON.stringify(T)),ce=q.target.split("-");this.indexed.loadTextFromUserPath(`servers/${B}/${O}/channels/${N.id}/chats/${ce[0]}/${ce[1]}/${ce[2]}`,(Ge,He)=>{let gt=[],Vt=[];Ge&&He&&(gt=JSON.parse(He)),q.msg.forEach(We=>{for(let ft=gt.length-1;ft>=0;ft--)if(gt[ft].message_id==We.message_id){gt.splice(ft,1);break}Vt.push(We)});let cn=[];if("local"!=B){const We=new Date(Vt[0].create_time).getTime();for(let ft=gt.length-1;ft>=0;ft--)if(ie||We<new Date(gt[ft].create_time).getTime()){let nt=gt.splice(ft,1);nt[0].code=2,cn.push(nt[0])}}let Ve=[...gt,...cn,...Vt];Ve.sort((We,ft)=>We.create_time<ft.create_time?-1:We.create_time>ft.create_time?1:0),this.indexed.saveTextFileToUserPath(JSON.stringify(Ve),`servers/${B}/${O}/channels/${N.id}/chats/${ce[0]}/${ce[1]}/${ce[2]}`)})}CatchQouteMsgUserName(T,N,B){if(T.content.qoute)try{if("local"==T.content.qoute.user_id)throw"\ub85c\uceec \uba54\uc2dc\uc9c0";T.content.qoute.username=this.users[N][B][T.content.qoute.user_id].display_name}catch{T.content.qoute.username=this.users.self.display_name}}ModulateTimeDate(T){let N=new Date(T.create_time),B=N.toLocaleDateString(this.lang.lang);T.displayDate=B,T.msgDate=`${N.getFullYear()}-${("00"+(N.getMonth()+1)).slice(-2)}-${("00"+N.getDate()).slice(-2)}`,T.msgTime=`${("00"+N.getHours()).slice(-2)}:${("00"+N.getMinutes()).slice(-2)}`}join_chat_with_modulation(T,N,B,O,ie=!1){var q=this;return(0,j.A)(function*(){q.channels_orig[B][O]||(q.channels_orig[B][O]={});let ce=yield q.servers[B][O].socket.joinChat(T,N,!0,!1);try{switch(ce.redirect={id:T,type:N,persistence:!0},ce.server={isOfficial:B,target:O},N){case 2:ce.title=q.GetOverrideName(T,B,O)||q.load_other_user(T,B,O).display_name,ce.info=q.load_other_user(T,B,O);break;case 3:ce.title=q.groups[B][O][T].name,ce.info=q.groups[B][O][T],q.groups[B][O][T].channel_id=ce.id;break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc815\ubcf4: ",N)}if(yield q.add_channel(ce,B,O,ie),ie&&q.rearrange_channels(),!q.opened_page_info.channel||q.opened_page_info.channel.isOfficial!=B||q.opened_page_info.channel.target!=O||q.opened_page_info.channel.id!=ce.id){let Ge=yield q.servers[B][O].client.listChannelMessages(q.servers[B][O].session,ce.id,1,!1);try{Ge.messages.length&&(yield q.update_from_channel_msg(Ge.messages[0],B,O,ie))}catch{}}return q.save_groups_with_less_info(),q.count_channel_online_member(ce,B,O),ce}catch(Ge){let He="";throw He=3===Ge.code?q.lang.text.Nakama.AddChannelFailed_Code3:Ge.message,q.p5toast.show({text:`${q.lang.text.Nakama.AddChannelFailed}: ${He}`}),`${q.lang.text.Nakama.AddChannelFailed}: ${He}`}})()}update_from_channel_msg(T,N,B,O=!1){var ie=this;return(0,j.A)(function*(){let q=T.sender_id==ie.servers[N][B].session.user_id,ce=T.message_id!=ie.channels_orig[N][B][T.channel_id].last_comment_id,Ge=ie.modulation_channel_message(T,N,B,!0),He=!1;switch(Ge.code){case 0:Ge.content.gupdate&&(ie.update_group_info(Ge,N,B),He=!0),Ge.content.user_update&&(ie.update_group_user_info(Ge,N,B),He=!0),ce&&!He&&(ie.channels_orig[N][B][T.channel_id].is_new=!q,ie.subscribe_lock||(ie.has_new_channel_msg=!q));break;case 1:case 2:break;case 6:var gt;q&&(delete ie.PromotedGroup[N][B][Ge.group_id],null===(gt=ie.socket_reactive.add_todo_menu)||void 0===gt||gt.UpdateWorkerList());case 3:case 4:case 5:case 7:case 9:let ft;if(ie.socket_reactive.group_detail&&(ft=yield ie.socket_reactive.group_detail.update_GroupUsersList(N,B)),q&&(7==Ge.code||9==Ge.code)){ft||(ft=(yield ie.servers[N][B].client.listGroupUsers(ie.servers[N][B].session,Ge.group_id)).group_users);for(let nt of ft)if(nt.user.id==ie.servers[N][B].session.user_id){var Vt;nt.state<2?ie.PromotedGroup[N][B][Ge.group_id]=!0:delete ie.PromotedGroup[N][B][Ge.group_id],null===(Vt=ie.socket_reactive.add_todo_menu)||void 0===Vt||Vt.UpdateWorkerList();break}}if(3==Ge.code||4==Ge.code||7==Ge.code||9==Ge.code)break;if(ie.noti_origin[N]&&ie.noti_origin[N][B]){let nt=Object.keys(ie.noti_origin[N][B]),Dt=[];nt.forEach(un=>{-5==ie.noti_origin[N][B][un].code&&ie.noti_origin[N][B][un].sender_id==Ge.sender_id&&Dt.push(un)});try{(yield ie.servers[N][B].client.deleteNotifications(ie.servers[N][B].session,Dt))||console.log("\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc54c\ub9bc \uc0ad\uc81c \ud6c4 \uc624\ub958"),ie.update_notifications(N,B)}catch(un){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",un)}}q&&(ie.channels_orig[N][B][Ge.channel_id].status="missing");break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",Ge)}const cn=Ge.content.filename?`(${ie.lang.text.ChatRoom.attachments}) `:"";if(!q&&ce&&!He&&0==Ge.code){var Ve;let ft={id:ie.channels_orig[N][B][T.channel_id].cnoti_id,title:ie.channels_orig[N][B][T.channel_id].info.name||ie.GetOverrideName(ie.channels_orig[N][B][T.channel_id].info.id,N,B)||ie.channels_orig[N][B][T.channel_id].info.display_name||ie.channels_orig[N][B][T.channel_id].title||ie.lang.text.ChatRoom.noname_chatroom,body:cn+Ge.content.msg||Ge.content.noti||"",smallIcon_ln:"diychat",image:null===(Ve=ie.groups[N][B][T.group_id])||void 0===Ve?void 0:Ve.img,bgcolor:ie.channels_orig[N][B][T.channel_id].color};Ge.content.url&&Ge.content.type&&0==Ge.content.type.indexOf("image/")&&(ft.image=Ge.content.url),ie.noti.PushLocal(ft,ie.channels_orig[N][B][T.channel_id].cnoti_id,nt=>{ie.go_to_chatroom(ie.channels_orig[N][B][T.channel_id])})}q&&ie.noti.ClearNoti(ie.channels_orig[N][B][T.channel_id].cnoti_id),ie.ModulateTimeDate(Ge),ie.check_sender_and_show_name(Ge,N,B);let We=T.content.msg;ie.content_to_hyperlink(Ge,N,B),!O&&ie.channels_orig[N][B][Ge.channel_id].update&&ie.channels_orig[N][B][Ge.channel_id].update(Ge),He||(ie.channels_orig[N][B][T.channel_id].last_comment_time=T.update_time,ie.channels_orig[N][B][Ge.channel_id].last_comment_id=Ge.message_id),ie.saveListedMessage([Ge],ie.channels_orig[N][B][Ge.channel_id],N,B),He||(Ge.content.hasLink&&(We=`${ie.lang.text.ChatRoom.memoMsgHere}: ${Ge.content.hasLink.title}`),2!=Ge.code&&(ie.channels_orig[N][B][Ge.channel_id].last_comment=cn+(We||Ge.content.noti||"")))})()}rearrange_posts(){this.posts.length=0;let T=Object.keys(this.posts_orig);for(let N=0,B=T.length;N<B;N++){let O=Object.keys(this.posts_orig[T[N]]);for(let ie=0,q=O.length;ie<q;ie++){let ce=Object.keys(this.posts_orig[T[N]][O[ie]]);for(let Ge=0,He=ce.length;Ge<He;Ge++){let gt=Object.keys(this.posts_orig[T[N]][O[ie]][ce[Ge]]);for(let Vt=0,cn=gt.length;Vt<cn;Vt++)this.posts.push(this.posts_orig[T[N]][O[ie]][ce[Ge]][gt[Vt]])}}}this.posts.sort((N,B)=>N.create_time<B.create_time?1:N.create_time>B.create_time?-1:0)}RemoveCurrentPostAttach(T,N){this.p5loading.toast(`${this.lang.text.AddPost.RemoveAttach}: ${N.attachments[T].filename}`,"add_post"),N.attachments.splice(T,1);let B=N.content.split("\n");for(let O=B.length-1;O>=0;O--){let ie=!1,q=B[O].length-1,ce=0;try{ce=Number(B[O].substring(1,q)),ie="{"==B[O].charAt(0)&&"}"==B[O].charAt(q)&&!isNaN(ce)}catch{}if(ie)if(T==ce){if(""==B[O+1])try{B.splice(O+1,1)}catch{}B.splice(O,1)}else T<ce&&(B[O]=`{${ce-1}}`)}N.content=B.join("\n")}AddPost(T,N,B,O=!1,ie){var q=this;return(0,j.A)(function*(){const ce=T.server.isOfficial,Ge=T.server.target;let He={};try{const We=q.servers[ce][Ge].info;He.cdn_port=We.cdn_port,He.apache_port=We.apache_port,He.user_id=q.servers[ce][Ge].session.user_id}catch{He={}}for(let We=0,ft=T.attachments.length;We<ft;We++)delete T.attachments[We].thumbnail;if(T.mainImage){if(q.p5loading.update({id:N,message:q.lang.text.AddPost.SyncMainImage}),T.mainImage.path=`servers/${ce}/${Ge}/posts/${T.creator_id}/${T.id}/MainImage.${T.mainImage.file_ext}`,T.mainImage.thumbnail=ie,!T.mainImage.blob)try{const ft=yield(yield fetch(ie)).blob();T.mainImage.blob=ft}catch{}if(q.p5loading.update({id:N,image:ie}),O)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let We;if(q.p5loading.update({id:N,message:`${q.lang.text.AddPost.SyncMainImage}: ${T.mainImage.filename}`}),We=yield q.global.try_upload_to_user_custom_fs(T.mainImage,`${q.users.self.display_name}/${T.id}`,N,T.title),!We)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.mainImage.path,delete T.mainImage.partsize,T.mainImage.url=We}catch{try{yield q.indexed.saveBlobToUserPath(T.mainImage.blob,T.mainImage.path)}catch(ft){console.log("\uba54\uc778\uc0ac\uc9c4 \ud30c\uc77c \uae68\uc9d0\ucc98\ub9ac: ",ft),delete T.mainImage}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const We=q.servers[ce][Ge].info.address,ft=q.servers[ce][Ge].info.useSSL?"https:":"http:",nt=yield q.global.upload_file_to_storage(T.mainImage,{user_id:`${q.servers[ce][Ge].session.user_id}/${T.id}`,cdn_port:He.cdn_port,apache_port:He.apache_port},ft,We,1==T.CDN,N,T.title);if(!nt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.mainImage.partsize,T.mainImage.url=nt}catch{yield q.sync_save_file(T.mainImage,ce,Ge,"server_post",`${T.id}_mainImage`)}}const gt=T.attachments.length;if(gt){q.p5loading.update({id:N,message:q.lang.text.AddPost.SyncAttaches});for(let We=gt-1;We>=0;We--)if(O)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let ft;if(q.p5loading.update({id:N,message:`${q.lang.text.AddPost.SyncAttaches}: [${We}]${T.attachments[We].filename}`}),ft=yield q.global.try_upload_to_user_custom_fs(T.attachments[We],`${q.users.self.display_name}/${T.id}`,N,T.title),!ft)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.attachments[We].path,delete T.attachments[We].partsize,T.attachments[We].url=ft}catch{try{T.attachments[We].path=`servers/${ce}/${Ge}/posts/${T.creator_id}/${T.id}/[${We}]${T.attachments[We].filename}`,yield q.indexed.saveBlobToUserPath(T.attachments[We].blob,T.attachments[We].path)}catch(nt){q.p5toast.show({text:`{${We}} ${q.lang.text.AddPost.AttachError}: ${(nt.statusText?`${nt.statusText}(${nt.status})`:nt.status)||nt}`,lateable:!0}),q.RemoveCurrentPostAttach(We,T)}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const ft=q.servers[ce][Ge].info.address,nt=q.servers[ce][Ge].info.useSSL?"https:":"http:",Dt=yield q.global.upload_file_to_storage(T.attachments[We],{user_id:`${q.servers[ce][Ge].session.user_id}/${T.id}`,cdn_port:He.cdn_port,apache_port:He.apache_port},nt,ft,1==T.CDN,N,T.title);if(!Dt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.attachments[We].path,delete T.attachments[We].partsize,T.attachments[We].url=Dt}catch(ft){try{"SQL \uac15\uc81c"==ft&&T.attachments[We].url&&!T.attachments[We].blob&&(T.attachments[We].blob=yield(yield fetch(T.attachments[We].url)).blob()),yield q.sync_save_file(T.attachments[We],ce,Ge,"server_post",`${T.id}_attach_${We}`)}catch(nt){q.p5toast.show({text:`{${We}} ${q.lang.text.AddPost.AttachError}: ${(nt.statusText?`${nt.statusText}(${nt.status})`:nt.status)||nt}`,lateable:!0}),q.RemoveCurrentPostAttach(We,T)}}}if(T.OutSource&&(yield q.global.remove_file_from_storage(T.OutSource,He),T.OutSource=void 0),B=B&&"me"!=T.creator_id){const We=new Blob([JSON.stringify(T)],{type:"text/plain"}),ft={blob:We,filename:`${T.id}.json`,file_ext:"json",size:We.size};try{const nt=q.servers[ce][Ge].info.address,Dt=q.servers[ce][Ge].session.user_id,un=q.servers[ce][Ge].info.useSSL?"https:":"http:",Bn=yield q.global.upload_file_to_storage(ft,{user_id:`${Dt}/${T.id}`,cdn_port:He.cdn_port,apache_port:He.apache_port},un,nt,1==T.CDN,N,T.title);if(!Bn)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=Bn}catch{try{const Dt=q.users.self.display_name,un=yield q.global.try_upload_to_user_custom_fs(ft,`${Dt}/${T.id}`,N,T.title);if(!un)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=un}catch(Dt){T.OutSource=void 0,B=!1,q.p5toast.show({text:`${q.lang.text.AddPost.OutLinkFailed}: ${(Dt.statusText?`${Dt.statusText}(${Dt.status})`:Dt.status)||Dt}`})}}}let Vt=JSON.parse(JSON.stringify(T));Vt.mainImage&&(delete Vt.mainImage.blob,delete Vt.mainImage.thumbnail);for(let We=Vt.attachments.length-1;We>=0;We--)delete Vt.attachments[We].blob;delete Vt.server;try{q.posts_orig[ce][Ge]||(q.posts_orig[ce][Ge]={}),q.posts_orig[ce][Ge][T.creator_id]||(q.posts_orig[ce][Ge][T.creator_id]={}),q.posts_orig[ce][Ge][T.creator_id][T.id]=T}catch(We){q.p5toast.show({text:`${q.lang.text.AddPost.SyncErr}: ${(We.statusText?`${We.statusText}(${We.status})`:We.status)||We}`}),console.log(We)}const cn=JSON.stringify(Vt);yield q.indexed.saveTextFileToUserPath(cn,`servers/${ce}/${Ge}/posts/${T.creator_id}/${T.id}/info.json`),delete Vt.is_me;const Ve=JSON.stringify(Vt);if(!O){let We=new Blob([Ve],{type:"application/json"}),ft={filename:"info.json"};ft.blob=We,ft.size=We.size,ft.type="application/json",ft.file_ext="json",ft.typeheader="text",ft.path=`servers/${ce}/${Ge}/posts/${T.creator_id}/${T.id}/info.json`,yield q.sync_save_file(ft,ce,Ge,"server_post",T.id)}})()}EditPost(T){this.CommunityGoToEditPost&&this.CommunityGoToEditPost(T),this.socket_reactive.try_load_post&&this.socket_reactive.try_load_post()}RemovePost(T,N=!1,B){var O=this;return(0,j.A)(function*(){var ie;const q=JSON.parse(JSON.stringify(T)),ce=q.server.isOfficial,Ge=q.server.target,He=B||`nakama_RemovePost_${Date.now()}`,gt="online"==(null===(ie=O.statusBar.groupServer[ce])||void 0===ie?void 0:ie[Ge]);N||(yield O.p5loading.update({id:He,message:O.lang.text.PostViewer.RemovePost,forceEnd:null}));let Vt=yield O.indexed.GetFileListFromDB(`servers/${ce}/${Ge}/posts/${T.creator_id}/${T.id}`);for(let We=0,ft=Vt.length;We<ft;We++)N||O.p5loading.update({id:He,message:`${O.lang.text.PostViewer.RemovePost}: ${Vt[We]}`,progress:We/ft}),yield O.indexed.removeFileFromUserPath(Vt[We]);N||O.p5loading.update({id:He,progress:null});let cn={};try{const We=O.servers[ce][Ge].info;cn.cdn_port=We.cdn_port,cn.apache_port=We.apache_port,cn.user_id=O.servers[ce][Ge].session.user_id}catch{cn={}}if(T.OutSource&&O.global.remove_file_from_storage(T.OutSource,cn),T.attachments)for(let We=0,ft=T.attachments.length;We<ft;We++)try{if(N||O.p5loading.update({id:He,message:`${O.lang.text.PostViewer.RemovePost}: ${T.attachments[We].filename}`,progress:We/ft}),T.attachments[We].url&&""!==T.attachments[We].type)N||O.global.remove_file_from_storage(T.attachments[We].url,cn);else try{T.server.local||(yield O.sync_remove_file(`${T.id}_attach_${We}`,ce,Ge,"server_post","",`${T.id}_attach_${We}`))}catch{}}catch{}if(N||O.p5loading.update({id:He,progress:null}),T.mainImage)try{if(T.mainImage.url&&""!==T.mainImage.type)N||O.global.remove_file_from_storage(T.mainImage.url,cn);else try{T.server.local||(yield O.sync_remove_file(`${T.id}_mainImage`,ce,Ge,"server_post","",`${T.id}_mainImage`))}catch{}}catch{}try{T.server.local||N||(yield O.sync_remove_file(T.id,ce,Ge,"server_post","",`${T.id}`))}catch{}N||O.p5loading.update({id:He,message:`${O.lang.text.PostViewer.RemovePost}: ${T.title}`}),!N&&!B&&O.p5loading.remove(He);try{delete O.posts_orig[ce][Ge][T.creator_id][T.id]}catch{}if(!N)try{yield O.servers[ce][Ge].client.rpc(O.servers[ce][Ge].session,"send_noti_all_fn",{noti_id:yr.MANAGE_POST,type:"remove",user_id:T.creator_id,post_id:T.id,persistent:!1})}catch{}if(O.rearrange_posts(),O.socket_reactive.try_load_post&&O.socket_reactive.try_load_post(),!gt&&!q.offlineAct&&!T.server.local){var Ve;let We=Number(yield O.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;q.id=`LocalPost_${We}`;try{yield O.indexed.saveTextFileToUserPath(`${We+1}`,"servers/local/target/posts/me/counter.txt")}catch(ft){O.p5toast.show({text:`${O.lang.text.AddPost.SyncErr}: ${(ft.statusText?`${ft.statusText}(${ft.status})`:ft.status)||ft}`}),console.log(ft)}q.offlineAct="remove",q.originalInfo=T,q.creator_id="me",q.server={name:O.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0},yield O.AddPost(q,He,!0,!0,null===(Ve=q.mainImage)||void 0===Ve?void 0:Ve.thumbnail),O.rearrange_posts(),O.p5loading.remove(He)}})()}content_to_hyperlink(T,N,B){if(!T.content.msg||"object"==typeof T.content.msg)return;let O=T.content.msg.split("\n");T.content.msg=[],O.forEach(ie=>{T.content.msg.push([{text:ie}])});for(let ie=0,q=T.content.msg.length;ie<q;ie++)if(T.content.msg[ie][0].text){const ce=/(https?:\/\/[^\s]+|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[^\s]*)?/g,Ge=T.content.msg[ie][0].text,He=Ge.match(ce);if(He){const gt="%extractURL",cn=Ge.replace(ce,gt).split(gt);let Ve=[];for(;cn.length||He.length;){{let We=cn.shift();We&&Ve.push({text:We})}{let We=He.shift();We&&Ve.push({text:We,href:!0})}}T.content.msg[ie]=Ve}else T.content.msg[ie]=[{text:Ge}];try{let gt=T.content.msg[ie][0].text.match(/[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6DC}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F90C}-\u{1F93A}\u{1F93C}-\u{1F945}\u{1F947}-\u{1F9FF}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}]+/gu)[0].replace(/[0-9]/g,"");1==T.content.msg.length&&T.content.msg[ie][0].text.length==gt.length&&(T.content.msg[ie][0].size=48)}catch{}}}CreateHyperLinkDesc(T,N,B,O,ie){try{let ce,q=T.content.msg,Ge=!1;for(let He of q){for(let gt of He)if(gt.href){ce=gt.text,Ge=!0;break}if(Ge)break}Ge&&this.HyperLinkDescList.push({msg:T,url:ce,isOfficial:N,target:B,cont:O,callback:ie}),this.RequestHyperLinkInfo()}catch{}}RequestHyperLinkInfo(){var T=this;return(0,j.A)(function*(){if(!T.isRequestingLinkInfo){for(T.isRequestingLinkInfo=!0;T.HyperLinkDescList.length;){var N;const B=T.HyperLinkDescList.pop();if(B.cont.signal.aborted){console.log("\ub354 \uc774\uc0c1 \ud398\uc774\uc9c0 \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",B.cont.signal.reason);continue}let O,ie;try{O=T.servers[B.isOfficial][B.target].info,ie=`${O.useSSL?"https":"http"}://${O.address}:${O.cdn_port||9001}`}catch{}if(!B.msg.content.hasLink){try{let q=yield T.global.GetHrefThumbnail(B.url,ie,B.cont);if(!q||q.error)throw q;B.msg.content.hasLink=q,T.saveListedMessage([B.msg],T.channels_orig[B.isOfficial][B.target][B.msg.channel_id],B.isOfficial,B.target)}catch(q){console.log("href \uac04\ub7b5\uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc2e4\ud328: ",q)}null===(N=B.callback)||void 0===N||N.call(B)}}T.isRequestingLinkInfo=!1}})()}check_sender_and_show_name(T,N,B){try{T.color="#"+(T.sender_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),T.sender_id==this.servers[N][B].session.user_id?(T.user_display_name=this.users.self.display_name,T.is_me=!0):T.user_display_name=this.load_other_user(T.sender_id,N,B).display_name,T.user_display_name=T.user_display_name||this.lang.text.Profile.noname_user}catch(O){console.log("\ubc1c\uc2e0\uc790 \uccb4\ud06c \uc624\ub958: ",O)}}modulation_channel_message(T,N,B,O=!1){var ie=this;this.translate_updates(T);let ce,q=!1;try{q=T.sender_id==this.servers[N][B].session.user_id}catch{q=T.content.user_update}try{ce=q?this.users.self:this.load_other_user(T.sender_id,N,B)}catch{ce=this.users.self}let Ge=function(){var He=(0,j.A)(function*(){if(O){let gt=yield ie.servers[N][B].client.listGroupUsers(ie.servers[N][B].session,T.group_id);for(let Vt of gt.group_users)if(Vt.user.id==ie.servers[N][B].session.user_id){Vt.is_me=!0,Vt.user=ie.users.self;break}ie.groups[N][B][T.group_id].users=gt.group_users,ie.count_channel_online_member(T,N,B)}});return function(){return He.apply(this,arguments)}}();switch(T.code){case 0:if(T.content.filename){try{T.content.transfer_index=this.OnTransfer[N][B][T.channel_id][T.message_id]}catch{}try{this.OnTransferMessage[T.message_id]=T}catch{}}break;case 1:case 2:break;case 3:case 4:T.content.user_update=ce,T.content.noti=`${this.lang.text.Nakama.GroupUserJoin}: ${ce.display_name}`,O&&Ge();break;case 5:T.content.user_update=ce,T.content.noti=`${this.lang.text.Nakama.GroupUserOut}: ${ce.display_name}`,O&&Ge();break;case 6:T.content.user_update=ce,T.content.noti=`${this.lang.text.Nakama.GroupUserKick}: ${ce.display_name}`,O&&Ge();break;case 7:T.content.user_update=ce,T.content.noti=`${this.lang.text.OtherProfile.PromoteSucc}: ${ce.display_name}`;break;case 9:T.content.user_update=ce,T.content.noti=`${this.lang.text.OtherProfile.DemoteSucc}: ${ce.display_name}`;break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",T)}return T}update_group_info(T,N,B){switch(this.translate_updates(T),T.content.gupdate){case"gimage_modify":this.servers[N][B].client.readStorageObjects(this.servers[N][B].session,{object_ids:[{collection:"group_public",key:`group_${T.group_id}`,user_id:this.groups[N][B][T.group_id].creator_id}]}).then(O=>{O.objects.length?(this.groups[N][B][T.group_id].img=O.objects[0].value.img.replace(/"|=|\\/g,""),this.indexed.saveTextFileToUserPath(O.objects[0].value.img,`servers/${N}/${B}/groups/${T.group_id}.img`)):"missing"!=this.groups[N][B][T.group_id].status&&(delete this.groups[N][B][T.group_id].img,this.indexed.removeFileFromUserPath(`servers/${N}/${B}/groups/${T.group_id}.img`))});break;case"remove":case"force_remove":this.groups[N][B][T.group_id].status="missing",this.save_groups_with_less_info(),this.channels_orig[N][B][T.channel_id].status="missing",this.servers[N][B].socket.leaveChat(T.channel_id);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \ud589\ub3d9: ",T)}}translate_updates(T){if(T.content.user_update)switch(T.content.user_update){case"modify_data":T.content.noti=`${this.lang.text.Profile.user_profile_changed}${T.content.noti_form}`;break;case"modify_img":T.content.noti=`${this.lang.text.Profile.user_image_changed}${T.content.noti_form}`}if(T.content.gupdate)switch(T.content.gupdate){case"gimage_modify":T.content.noti=this.lang.text.GroupDetail.GroupImageChanged;break;case"remove":T.content.noti=this.lang.text.GroupDetail.GroupRemoved;break;case"force_remove":T.content.noti=this.lang.text.GroupDetail.GroupForceRemoved}}update_group_user_info(T,N,B){var O=this;return(0,j.A)(function*(){if(O.translate_updates(T),O.servers[N][B].session.user_id!=T.sender_id)switch(T.content.user_update){case"modify_data":try{let ie=yield O.servers[N][B].client.getUsers(O.servers[N][B].session,[T.sender_id]);ie.users.length?O.save_other_user(ie.users[0],N,B):(delete O.users[N][B][T.sender_id],O.indexed.removeFileFromUserPath(`servers/${N}/${B}/users/${T.sender_id}/profile.json`))}catch(ie){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc815\ubcf4 \ubcc0\uacbd \uc624\ub958: ",ie)}break;case"modify_img":try{let ie=yield O.servers[N][B].client.readStorageObjects(O.servers[N][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T.sender_id}]});if(ie.objects.length)try{if(O.servers[N][B].session.user_id==T.sender_id)throw"me";O.load_other_user(T.sender_id,N,B).img=ie.objects[0].value.img.replace(/"|\\|=/g,""),O.indexed.saveTextFileToUserPath(O.users[N][B][T.sender_id].img,`servers/${N}/${B}/users/${T.sender_id}/profile.img`)}catch{O.users.self.img=ie.objects[0].value.img.replace(/"|\\|=/g,""),yield O.indexed.saveTextFileToUserPath(O.users.self.img,"servers/self/profile.img")}else try{if(O.servers[N][B].session.user_id==T.sender_id)throw"me";delete O.users[N][B][T.sender_id].img,O.indexed.removeFileFromUserPath(`servers/${N}/${B}/users/${T.sender_id}/profile.img`)}catch{delete O.users.self.img}}catch(ie){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",ie)}break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \uc0ac\uc6a9\uc790 \ud589\ub3d9: ",T)}})()}check_notifications(T,N,B){var O=this;return(0,j.A)(function*(){let ie=O.servers[N][B];switch(T.code){case 0:case-2:break;case 1:let q=`<div style="text-align: center"><img src="${decodeURIComponent(T.content.uri)}" alt="noti_image" style="border-radius: 2px"/></div>`,ce=`<div>${decodeURIComponent(O.global.HTMLEncode(T.content.msg))}</div>`;O.alertCtrl.create({header:O.servers[N][B].info.name,message:new _n.Vk(T.content.uri?q+ce:ce),buttons:[{text:O.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var gt=(0,j.A)(function*(){try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id])}catch{}O.noti.ClearNoti(T.code),O.update_notifications(N,B)});return function(){return gt.apply(this,arguments)}}()()}}]}).then(He=>He.present());break;case-1:case-3:case-4:case-6:O.noti.ClearNoti(T.code);try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),O.update_notifications(N,B)}catch(He){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",He)}break;case-5:try{let He=yield ie.client.getUsers(ie.session,[T.sender_id]);if(He.users.length){let gt="";gt+=`${O.lang.text.Nakama.ReqContServer}: ${T.server.name}<br>`,gt+=`${O.lang.text.Nakama.ReqContUserName}: ${He.users[0].display_name}`,O.alertCtrl.create({header:O.lang.text.Nakama.ReqContTitle,message:gt,buttons:[{text:O.lang.text.Nakama.ReqContAccept,handler:()=>{!function(){var cn=(0,j.A)(function*(){try{(yield ie.client.addGroupUsers(ie.session,T.content.group_id,[He.users[0].id]))||console.log("\ubc34\uc778 \uacbd\uc6b0\uc778 \uac83 \uac19\uc74c, \ud655\uc778 \ud544\uc694"),O.noti.ClearNoti(T.code);try{let We=yield ie.client.deleteNotifications(ie.session,[T.id]);We?O.update_notifications(N,B):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",We)}catch(We){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",We)}}catch(Ve){console.error("\uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958: ",Ve)}});return function(){return cn.apply(this,arguments)}}()()}},{text:O.lang.text.Nakama.ReqContReject,handler:()=>{!function(){var cn=(0,j.A)(function*(){try{(yield ie.client.kickGroupUsers(ie.session,T.content.group_id,[He.users[0].id]))||console.log("\uadf8\ub8f9 \ucc38\uc5ec \uac70\uc808\uc744 kick\ud55c \uacbd\uc6b0 \uc624\ub958"),yield ie.client.deleteNotifications(ie.session,[T.id]),O.update_notifications(N,B)}catch(Ve){console.error("\uc0ac\uc6a9\uc790 \uac15\ud1f4 \uc624\ub958: ",Ve)}});return function(){return cn.apply(this,arguments)}}()()},cssClass:"redfont"}]}).then(Vt=>Vt.present())}else try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),O.p5toast.show({text:O.lang.text.Nakama.UserNotFound}),O.update_notifications(N,B)}catch(gt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",gt)}}catch(He){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc624\ub958: ",He)}break;case-7:O.LoginAgain(O.noti_origin,N,B);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \uad6c\ubd84: ",T.code);try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id])}catch{}O.update_notifications(N,B)}})()}act_on_notification(T,N,B){var O=this;return(0,j.A)(function*(){let ie=!1;switch(T.server=O.servers[N][B].info,T.code){case 404:O.remove_server(N,B,!1);break;case yr.USER_PROFILE_CHANGED:break;case yr.USER_PROFILE_IMAGE_CHANGED:try{if(!O.users[N][B][T.content.user_id])throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let gt=yield O.servers[N][B].client.readStorageObjects(O.servers[N][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T.content.user_id}]});if(gt.objects.length)try{if(O.servers[N][B].session.user_id==T.content.user_id)throw"me";O.load_other_user(T.content.user_id,N,B).img=gt.objects[0].value.img.replace(/"|\\|=/g,""),O.indexed.saveTextFileToUserPath(O.users[N][B][T.content.user_id].img,`servers/${N}/${B}/users/${T.content.user_id}/profile.img`)}catch{O.users.self.img=gt.objects[0].value.img.replace(/"|\\|=/g,""),yield O.indexed.saveTextFileToUserPath(O.users.self.img,"servers/self/profile.img")}else try{if(O.servers[N][B].session.user_id==T.content.user_id)throw"me";delete O.users[N][B][T.content.user_id].img,O.indexed.removeFileFromUserPath(`servers/${N}/${B}/users/${T.content.user_id}/profile.img`)}catch{delete O.users.self.img}}catch(gt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",gt)}return;case yr.MANAGE_POST:switch(T.content.type){case"add":try{let Vt=T.content.user_id==O.servers[N][B].session.user_id;if(!O.users[N][B][T.content.user_id]&&!Vt)throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let cn=yield O.load_server_post_with_id(T.content.post_id,N,B,T.content.user_id,Vt);O.rearrange_posts(),!Vt&&cn&&null!=cn&&cn.title&&(O.p5toast.show({text:`${O.lang.text.AddPost.Title}: ${cn.title}`}),O.has_new_post=!0)}catch{}break;case"remove":O.RemovePost({id:T.content.post_id,creator_id:T.content.user_id,attachments:[],server:{isOfficial:N,target:B}},!0)}return;case 1:T.request=`${O.lang.text.Nakama.ServerNoti}: ${decodeURIComponent(T.content.msg)}`;let q=decodeURIComponent(T.content.msg),ce=decodeURIComponent(T.content.uri);O.noti.PushLocal({id:T.code,title:O.servers[N][B].info.name,body:q,image:ce,smallIcon_ln:"diychat"},"global_noti_all",gt=>{let Vt=`<div style="text-align: center"><img src="${ce}" alt="noti_image" style="border-radius: 2px"/></div>`,cn=`<div>${O.global.HTMLEncode(q)}</div>`;O.alertCtrl.create({header:O.servers[N][B].info.name,message:new _n.Vk(ce?Vt+cn:cn),buttons:[{text:O.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var ft=(0,j.A)(function*(){try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id])}catch{}O.noti.ClearNoti(T.code),O.update_notifications(N,B)});return function(){return ft.apply(this,arguments)}}()()}}]}).then(We=>We.present())});break;case 0:T.request=`${T.code}-${T.subject}`;break;case-1:let Ge;T.request=`${T.code}-${T.subject}`,2===(T.content&&T.content.username&&(Ge=2),Ge)?O.join_chat_with_modulation(T.sender_id,Ge,N,B):(console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \ud589\ub3d9\ucc98\ub9ac: ",T,Ge),T.request=`${T.code}-${T.subject}`),ie=!0;try{(yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),O.update_notifications(N,B)}catch(gt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",gt)}break;case-2:case-3:T.request=`${T.code}-${T.subject}`;break;case-4:O.socket_reactive.group_detail&&O.socket_reactive.group_detail.info.id==T.content.group_id&&O.socket_reactive.group_detail.update_from_notification(T);try{O.groups[N][B][T.content.group_id].status="online"}catch{try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}}T.request=`${T.code}-${T.subject}`;try{let gt=yield O.servers[N][B].client.readStorageObjects(O.servers[N][B].session,{object_ids:[{collection:"group_public",key:`group_${T.content.group_id}`,user_id:O.groups[N][B][T.content.group_id].creator_id}]});gt.objects.length&&(O.groups[N][B][T.content.group_id].img=gt.objects[0].value.img,O.indexed.saveTextFileToUserPath(gt.objects[0].value.img,`servers/${N}/${B}/groups/${T.content.group_id}.img`))}catch(gt){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",gt)}try{yield O.load_groups(N,B,T.content.group_id,!0)}catch(gt){console.error("\uadf8\ub8f9 \uc0ac\uc6a9\uc790 \uac00\uc838\uc624\uae30 \uc624\ub958: ",gt)}O.join_chat_with_modulation(T.content.group_id,3,N,B,!0),O.noti.PushLocal({id:T.code,title:`${O.groups[N][B][T.content.group_id].name}: ${O.lang.text.Nakama.LocalNotiTitle}`,body:T.subject,icon:O.groups[N][B][T.content.group_id.img],smallIcon_ln:"diychat"},void 0,gt=>{O.check_notifications(T,N,B)});break;case-5:let He=O.groups[N][B][T.content.group_id];if(He)T.request=`${O.lang.text.Nakama.ReqContTitle}: ${He.name}`;else{ie=!0;try{let gt=yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]);gt?O.update_notifications(N,B):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",gt)}catch(gt){console.error("\uc54c\ub9bc \uc81c\uac70 \uc624\ub958: ",gt)}}O.socket_reactive.group_detail&&O.socket_reactive.group_detail.info.id==T.content.group_id&&O.socket_reactive.group_detail.update_from_notification(T),O.noti.PushLocal({id:T.code,title:`${O.groups[N][B][T.content.group_id].name}: ${O.lang.text.Nakama.ReqContTitle}`,icon:O.groups[N][B][T.content.group_id].img,smallIcon_ln:"diychat"},void 0,gt=>{O.socket_reactive.group_detail.info.id!=T.content.group_id&&O.global.ActLikeModal("group-detail",{info:O.groups[N][B][T.content.group_id],server:{isOfficial:N,target:B}})});break;case-6:T.request=`${T.code}-${T.subject}`;break;case-7:T.request=`${O.servers[N][B].info.name}: ${O.lang.text.Nakama.SessionLogout}`,O.LoginAgain(T,N,B);break;case yr.MANAGE_TODO:{const gt="add_todo";switch(T.content.type){case"add":O.servers[N][B].client.readStorageObjects(O.servers[N][B].session,{object_ids:[{collection:T.content.collection,key:T.content.key,user_id:T.content.sender_id||O.servers[N][B].session.user_id}]}).then(function(){var Ve=(0,j.A)(function*(We){if(We.objects.length){try{let Dt,nt=We.objects[0].value;try{if(Dt=yield O.indexed.loadTextFromUserPath(`todo/${nt.id}_${N}_${B}/info.todo`),!Dt)throw"empty"}catch{Dt=yield O.indexed.loadTextFromUserPath(`todo/${nt.id}/info.todo`)}let un=JSON.parse(Dt);O.global.RemoveTodoTags(un),O.global.AddTodoTags(nt),O.removeRegisteredId(un.noti_id),O.noti.ClearNoti(un.noti_id)}catch{}yield O.modify_remote_info_as_local(We.objects[0].value,N,B);let ft=We.objects[0].value;O.noti.ClearNoti(ft.noti_id),O.set_todo_notification(ft),yield O.p5loading.update({id:gt,message:`${O.lang.text.Main.Title}: ${ft.title}`,progress:1,forceEnd:350})}});return function(We){return Ve.apply(this,arguments)}}());break;case"done":O.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${B}/info.todo`,function(){var Ve=(0,j.A)(function*(We,ft){if(We&&ft){let nt=JSON.parse(ft);nt.done=!0,yield O.modify_remote_info_as_local(nt,N,B),O.indexed.GetFileListFromDB(`todo/${nt.id}`).then(Dt=>{Dt.forEach(un=>O.indexed.removeFileFromUserPath(un)),O.RemoveLocalPushSchedule(nt),O.removeRegisteredId(nt.noti_id),O.noti.ClearNoti(nt.noti_id),O.SyncTodoCounter(N,B)})}else O.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var nt=(0,j.A)(function*(Dt,un){if(Dt&&un){let Bn=JSON.parse(un);Bn.done=!0,yield O.modify_remote_info_as_local(Bn,N,B),O.indexed.GetFileListFromDB(`todo/${Bn.id}`).then(ar=>{ar.forEach(Pr=>O.indexed.removeFileFromUserPath(Pr)),O.RemoveLocalPushSchedule(Bn),O.removeRegisteredId(Bn.noti_id),O.noti.ClearNoti(Bn.noti_id),O.SyncTodoCounter(N,B)})}});return function(Dt,un){return nt.apply(this,arguments)}}())});return function(We,ft){return Ve.apply(this,arguments)}}());break;case"delete":O.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${B}/info.todo`,(Ve,We)=>{if(Ve&&We){let ft=JSON.parse(We);O.global.RemoveTodoTags(ft),O.indexed.GetFileListFromDB(`todo/${ft.id}`).then(nt=>{var Dt,un;nt.forEach(Bn=>O.indexed.removeFileFromUserPath(Bn)),O.RemoveLocalPushSchedule(ft),O.removeRegisteredId(ft.noti_id),O.noti.ClearNoti(ft.noti_id),null===(Dt=(un=O.global).p5removeTodo)||void 0===Dt||Dt.call(un,JSON.stringify(ft))}),O.SyncTodoCounter(N,B)}else O.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,(ft,nt)=>{if(ft&&nt){let Dt=JSON.parse(nt);O.global.RemoveTodoTags(Dt),O.indexed.GetFileListFromDB(`todo/${Dt.id}`).then(un=>{var Bn,ar;un.forEach(Pr=>O.indexed.removeFileFromUserPath(Pr)),O.RemoveLocalPushSchedule(Dt),O.removeRegisteredId(Dt.noti_id),O.noti.ClearNoti(Dt.noti_id),null===(Bn=(ar=O.global).p5removeTodo)||void 0===Bn||Bn.call(ar,JSON.stringify(Dt))}),O.SyncTodoCounter(N,B)}})});break;case"worker":let Vt=T.content.isDelete;O.AddTodoManageUpdateAct&&O.AddTodoManageUpdateAct(T.content.id,T.sender_id,Vt,T.content.timeAt);let cn=Vt?O.lang.text.Main.WorkerAbandon:O.lang.text.Main.WorkerDone;yield O.p5loading.update({id:gt,message:`${cn}: ${O.GetOverrideName(T.sender_id,N,B)||O.users[N][B][T.sender_id].display_name}`,progress:1,forceEnd:350}),O.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${B}/info.todo`,function(){var Ve=(0,j.A)(function*(We,ft){if(We&&ft){let nt=JSON.parse(ft);for(let Dt=0,un=nt.workers.length;Dt<un;Dt++)if((nt.workers[Dt].user_id||nt.workers[Dt].id)==T.sender_id){nt.workers[Dt].isDelete=Vt,nt.workers[Dt].timestamp=T.content.timeAt;break}yield O.modify_remote_info_as_local(nt,N,B),O.SyncTodoCounter(N,B)}else O.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var nt=(0,j.A)(function*(Dt,un){if(Dt&&un){let Bn=JSON.parse(un);for(let ar=0,Pr=Bn.workers.length;ar<Pr;ar++)if((Bn.workers[ar].user_id||Bn.workers[ar].id)==T.sender_id){Bn.workers[ar].isDelete=Vt,Bn.workers[ar].timestamp=T.content.timeAt;break}yield O.modify_remote_info_as_local(Bn,N,B),O.SyncTodoCounter(N,B)}});return function(Dt,un){return nt.apply(this,arguments)}}())});return function(We,ft){return Ve.apply(this,arguments)}}())}O.SyncTodoCounter(N,B);try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}}break;case yr.EDIT_PROFILE:switch(T.content.type){case"info":O.servers[N][B].client.getAccount(O.servers[N][B].session).then(gt=>{Object.keys(gt.user).forEach(cn=>O.users.self[cn]=gt.user[cn]),O.save_self_profile()});break;case"image":O.servers[N][B].client.readStorageObjects(O.servers[N][B].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:O.servers[N][B].session.user_id}]}).then(gt=>{gt.objects.length?(O.indexed.saveTextFileToUserPath(JSON.stringify(gt.objects[0].value.img),"servers/self/profile.img"),O.users.self.img=gt.objects[0].value.img.replace(/"|=|\\/g,"")):O.indexed.removeFileFromUserPath("servers/self/profile.img")})}try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}break;case yr.ADD_CHANNEL:O.get_group_list_from_server(N,B,T.content.id);try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}break;case yr.NAME_OVERRIDED:O.LoadOverrideName(N,B);try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}break;case yr.CHATROOM_CHECKED:delete O.channels_orig[N][B][T.content.id].is_new,O.noti.ClearNoti(O.channels_orig[N][B][T.content.id].cnoti_id),O.rearrange_channels();{let gt=Object.keys(O.channels_orig[N][B]),Vt=!1;for(let cn of gt)if(O.channels_orig[N][B][cn].is_new){Vt=!0;break}Vt||(O.has_new_channel_msg=!1)}try{yield O.servers[N][B].client.deleteNotifications(O.servers[N][B].session,[T.id]),O.update_notifications(N,B)}catch{}break;default:console.log("\ud655\uc778\ub418\uc9c0 \uc54a\uc740 \uc2e4\uc2dc\uac04 \uc54c\ub9bc_nakama_noti: ",T),T.request=`${T.code}-${T.subject}`}ie||(O.noti_origin[N][B][T.id]=T)})()}LoginAgain(T,N,B){this.alertCtrl.create({header:this.servers[N][B].info.name,message:this.lang.text.Nakama.LoginAgain,buttons:[{text:this.lang.text.Profile.login_toggle,handler:()=>{try{delete this.noti_origin[N][B][T.id]}catch{}this.rearrange_notifications(),this.link_group(N,B,!0)}}]}).then(O=>O.present())}WriteStorage_From_channel(T,N,B,O,ie=0,q){var ce=this;return(0,j.A)(function*(){let Ge=JSON.parse(JSON.stringify(T)),He=yield yield ce.indexed.GetFileInfoFromDB(N),gt=Math.ceil(He.contents.length/Kt.xM);const Vt=q||`ForceSQL_write_${Date.now()}`;if(ce.p5loading.update({id:Vt,message:`${ce.lang.text.ChatRoom.forceSQL}: ${ce.lang.text.ChatRoom.SendFile}: ${Ge.content.filename}`}),ce.OnTransfer[B][O][T.channel_id]||(ce.OnTransfer[B][O][T.channel_id]={}),ce.OnTransfer[B][O][T.channel_id][T.message_id]||(ce.OnTransfer[B][O][T.channel_id][T.message_id]={index:gt}),!ce.OnTransfer[B][O][T.channel_id][T.message_id].OnTransfer){T.content.transfer_index||(T.content.transfer_index=ce.OnTransfer[B][O][T.channel_id][T.message_id]);for(let cn=ie;cn<gt;cn++)try{ce.p5loading.update({id:Vt,message:`${ce.lang.text.ChatRoom.forceSQL}: ${ce.lang.text.ChatRoom.SendFile}: ${Ge.content.filename}`,progress:cn/gt});let Ve=ce.global.req_file_part_base64(He,cn,N);yield ce.servers[B][O].client.writeStorageObjects(ce.servers[B][O].session,[{collection:`file_${Ge.channel_id.replace(/[.]/g,"_")}`,key:`msg_${Ge.message_id}_${cn}`,permission_read:2,permission_write:1,value:{data:Ve}}]),ce.OnTransfer[B][O][T.channel_id][T.message_id].index=gt-1-cn,ce.OnTransfer[B][O][T.channel_id][T.message_id].OnTransfer="upload"}catch(Ve){console.log("WriteStorage_From_channel: ",Ve),ce.noti.PushLocal({id:7,title:ce.lang.text.Nakama.FailedUpload,body:`${Ge.content.filename}: ${(Ve.statusText?`${Ve.statusText}(${Ve.status})`:Ve.status)||Ve}`,smallIcon_ln:"diychat"},ce.noti.Current),ce.p5toast.show({text:`${ce.lang.text.Nakama.FailedUpload}: ${(Ve.statusText?`${Ve.statusText}(${Ve.status})`:Ve.status)||Ve}`});break}setTimeout(()=>{ce.p5loading.remove(Vt),delete ce.OnTransfer[B][O][T.channel_id][T.message_id],ce.global.remove_req_file_info(T,N),ce.noti.PushLocal({id:7,title:ce.lang.text.ChatRoom.SendFile,body:Ge.content.filename,smallIcon_ln:"diychat"},ce.noti.Current)},100)}})()}ReadStorage_From_channel(T,N,B,O,ie=0){var q=this;return(0,j.A)(function*(){let ce=JSON.parse(JSON.stringify(T));const Ge=`ForceSQL_read_${Date.now()}`;if(q.p5loading.update({id:Ge,message:`${q.lang.text.ChatRoom.forceSQL}: ${q.lang.text.ChatRoom.SavingFile}: ${ce.content.filename}`}),q.OnTransfer[B][O][T.channel_id]||(q.OnTransfer[B][O][T.channel_id]={}),q.OnTransfer[B][O][T.channel_id][T.message_id]||(q.OnTransfer[B][O][T.channel_id][T.message_id]={index:ce.content.partsize}),q.OnTransfer[B][O][T.channel_id][T.message_id].OnTransfer)return;T.content.transfer_index||(T.content.transfer_index=q.OnTransfer[B][O][T.channel_id][T.message_id]);let He=!0;for(let gt=ie,Vt=ce.content.partsize;gt<Vt;gt++)try{q.p5loading.update({id:Ge,progress:gt/Vt});let cn=yield q.servers[B][O].client.readStorageObjects(q.servers[B][O].session,{object_ids:[{collection:`file_${ce.channel_id.replace(/[.]/g,"_")}`,key:`msg_${ce.message_id}_${gt}`,user_id:ce.sender_id}]});q.global.save_file_part(N,gt,cn.objects[0].value.data),q.OnTransfer[B][O][T.channel_id][T.message_id].index=Vt-1-gt,q.OnTransfer[B][O][T.channel_id][T.message_id].OnTransfer="download"}catch(cn){console.log("ReadStorage_From_channel: ",cn),He=!1,q.p5loading.update({id:Ge,message:`${ce.content.filename} ${q.lang.text.Nakama.FailedDownload}: ${(cn.statusText?`${cn.statusText}(${cn.status})`:cn.status)||cn}`,progress:0});break}if(He){if(T.content.url)T.content.thumbnail=T.content.url;else{T.content.text=[q.lang.text.ChatRoom.SavingFile],delete T.content.transfer_index,delete q.OnTransfer[B][O][ce.channel_id][ce.message_id].index;let Vt=[],cn=0;yield new Promise(function(){var Ve=(0,j.A)(function*(We){for(let ft=0,nt=ce.content.partsize;ft<nt;ft++)try{let Dt=yield q.indexed.GetFileInfoFromDB(`${N}_part/${ft}.part`);cn+=Dt.contents.length,Vt[ft]=Dt}catch(Dt){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",Dt);break}try{let ft=new Int8Array(cn),nt=0;for(let Dt=0,un=Vt.length;Dt<un;Dt++)ft.set(Vt[Dt].contents,nt),nt+=Vt[Dt].contents.length;yield q.indexed.saveInt8ArrayToUserPath(ft,N);for(let Dt=0,un=ce.content.partsize;Dt<un;Dt++)q.indexed.removeFileFromUserPath(`${N}_part/${Dt}.part`);yield q.indexed.removeFileFromUserPath(`${N}_part`),q.global.remove_req_file_info(ce,N),T.content.text=[q.lang.text.ChatRoom.FileSaved]}catch(ft){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",ft)}We(void 0)});return function(We){return Ve.apply(this,arguments)}}()),q.noti.ClearNoti(8)}let gt;if(ce.content.path=N,"godot"!=ce.content.viewer){let Vt=yield q.indexed.loadBlobFromUserPath(N,T.content.type||"");gt=URL.createObjectURL(Vt)}yield q.global.modulate_thumbnail((q.OnTransferMessage[ce.message_id]||T).content,gt),delete q.OnTransfer[B][O][ce.channel_id][ce.message_id],delete q.OnTransferMessage[ce.message_id]}return q.p5loading.remove(Ge),He})()}sync_save_file(T,N,B,O,ie=""){var q=this;return(0,j.A)(function*(){try{var ce;if("online"!=q.statusBar.groupServer[N][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";null!==(ce=T.blob)&&void 0!==ce&&ce.size&&(yield q.indexed.saveBlobToUserPath(T.blob,T.path));let Ge=yield q.indexed.GetFileInfoFromDB(T.path);T.partsize=Math.ceil((T.size||Ge.contents.length)/Kt.xM),delete T.blob,yield q.servers[N][B].client.writeStorageObjects(q.servers[N][B].session,[{collection:O,key:ie||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),permission_read:2,permission_write:1,value:T}]);for(let He=0;He<T.partsize;He++){let gt=q.global.req_file_part_base64(Ge,He,T.path);yield q.servers[N][B].client.writeStorageObjects(q.servers[N][B].session,[{collection:O,key:ie?`${ie}_${He}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${He}`,permission_read:2,permission_write:1,value:{data:gt}}])}q.indexed.removeFileFromUserPath(`${T.path}.history`),q.noti.PushLocal({id:7,title:q.lang.text.ChatRoom.SendFile,body:T.filename,smallIcon_ln:"diychat"},q.noti.Current)}catch(Ge){throw console.log("SyncSaveFailed: ",Ge),q.noti.PushLocal({id:7,title:q.lang.text.Nakama.FailedUpload,body:`${T.filename}: ${(Ge.statusText?`${Ge.statusText}(${Ge.status})`:Ge.status)||Ge}`,smallIcon_ln:"diychat"},q.noti.Current),Ge}})()}sync_load_file(T,N,B,O,ie="",q="",ce=!0){var Ge=this;return(0,j.A)(function*(){try{if("online"!=Ge.statusBar.groupServer[N][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let gt=(yield Ge.servers[N][B].client.readStorageObjects(Ge.servers[N][B].session,{object_ids:[{collection:O,key:q||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||Ge.servers[N][B].session.user_id}]})).objects[0].value,Vt=!0;for(let cn=0;cn<gt.partsize;cn++)try{let Ve=yield Ge.servers[N][B].client.readStorageObjects(Ge.servers[N][B].session,{object_ids:[{collection:O,key:q?`${q}_${cn}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${cn}`,user_id:ie||Ge.servers[N][B].session.user_id}]});Ge.global.save_file_part(T.alt_path||T.path,cn,Ve.objects[0].value.data)}catch(Ve){console.log("sync_load_file failed: ",Ve),Vt=!1,ce&&Ge.p5toast.show({text:`${T.filename||T.name} ${Ge.lang.text.Nakama.FailedDownload}: ${(Ve.statusText?`${Ve.statusText}(${Ve.status})`:Ve.status)||Ve}`,lateable:!0}),T.url&&(T.thumbnail=T.url);break}if(Vt){delete T.url,T.text=[Ge.lang.text.ChatRoom.SavingFile];let cn=[],Ve=0;yield new Promise(function(){var We=(0,j.A)(function*(ft,nt){let Dt=!1;for(let un=0,Bn=gt.partsize;un<Bn;un++)try{let ar=yield Ge.indexed.GetFileInfoFromDB(`${T.alt_path||T.path}_part/${un}.part`);Ve+=ar.contents.length,cn[un]=ar}catch(ar){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",ar),Dt=!0;break}try{if(Dt)throw"\ud30c\uc77c \ubcd1\ud569 \uc2e4\ud328";let un=new Int8Array(Ve),Bn=0;for(let ar=0,Pr=cn.length;ar<Pr;ar++)un.set(cn[ar].contents,Bn),Bn+=cn[ar].contents.length;yield Ge.indexed.saveInt8ArrayToUserPath(un,T.alt_path||T.path);for(let ar=0,Pr=gt.partsize;ar<Pr;ar++)Ge.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part/${ar}.part`);yield Ge.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part`)}catch(un){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",un),nt()}ft(void 0)});return function(ft,nt){return We.apply(this,arguments)}}()),Ge.noti.ClearNoti(8),Ge.indexed.removeFileFromUserPath(`${T.alt_path||T.path}.history`)}return{from:"remote",value:yield Ge.indexed.loadBlobFromUserPath(T.alt_path||T.path,gt.type||"")}}catch{try{return{from:"local",value:yield Ge.indexed.loadBlobFromUserPath(T.alt_path||T.path,T.type||"")}}catch(gt){return{from:"failed",value:null,error:gt}}}})()}sync_remove_file(T,N,B,O,ie="",q=""){var ce=this;return(0,j.A)(function*(){try{yield ce.indexed.removeFileFromUserPath(T)}catch{}try{if("online"!=ce.statusBar.groupServer[N][B])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let He=(yield ce.servers[N][B].client.readStorageObjects(ce.servers[N][B].session,{object_ids:[{collection:O,key:T.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||ce.servers[N][B].session.user_id}]})).objects[0].value;try{yield ce.servers[N][B].client.rpc(ce.servers[N][B].session,"remove_channel_file",{collection:O,key:(q||He.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120))+"_"})}catch(gt){console.log("SQL \uac15\uc81c \ud30c\uc77c \uc0ad\uc81c \uc624\ub958: ",gt)}yield ce.servers[N][B].client.deleteStorageObjects(ce.servers[N][B].session,{object_ids:[{collection:O,key:q||He.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)}]})}catch{}})()}open_url_link(T,N,B=!0){var O=this;return(0,j.A)(function*(){T&&(T.target.style.color="var(--ion-color-primary)");const ie=yield O.global.GetHeaderAddress();if(N)if(0==N.indexOf("https://is2you2.github.io/pjcone_pwa/?")||0==N.indexOf(`${ie}?`)){const q=O.global.CatchGETs(N)||{};try{return yield O.AddressToQRCodeAct(q),!0}catch(ce){console.log("open_url_link: ",ce),O.p5toast.show({text:`${O.lang.text.AddGroup.DiffFormat}: ${(ce.statusText?`${ce.statusText}(${ce.status})`:ce.status)||ce}`})}}else B&&O.global.open_link(N);return!1})()}AddressToQRCodeAct(T,N=!1){var B=this;return(0,j.A)(function*(){let O=[];if(T.open_profile&&O.push({type:"open_profile"}),T.server)for(let ie=0,q=T.server.length;ie<q;ie++){let ce=T.server[ie].split(","),He=ce[0].split("://"),gt="https"==He.shift(),Vt=He.shift().split(":"),cn=Vt[0],Ve=Number(Vt[1]);O.push({type:"server",value:{address:cn||"192.168.0.1",useSSL:gt||!1,nakama_port:Ve,cdn_port:ce[2],apache_port:ce[3],square_port:ce[4],webrtc_port:ce[5],webpush_port:ce[6],key:ce[1]||"",isOfficial:"unofficial"}})}if(T.group)for(let ie=0,q=T.group.length;ie<q;ie++){let ce=T.group[ie].split(",");O.push({type:"group",name:ce[0],id:ce[1]})}if(T.group_dedi){let ie=T.group_dedi[0].split(",");O.push({type:"group_dedi",value:{address:ie[0],channel:ie[1]}})}if(T.open_prv_channel){let ie=T.open_prv_channel[0].split(",");O.push({type:"open_prv_channel",user_id:ie[0],address:ie[1]})}if(T.open_channel){let ie=T.open_channel[0].split(",");O.push({type:"open_channel",group_id:ie[0],address:ie[1]})}if(T.rtcserver)for(let ie=0,q=T.rtcserver.length;ie<q;ie++){let ce=T.rtcserver[ie].split("]"),Ge=ce[0].split("[")[1],He=ce[1].split(",");O.push({type:"rtcserver",value:{urls:Ge.split(","),username:He[1],credential:He[2]}})}if(T.postViewer&&O.push({type:"postViewer",address:T.postViewer[0]}),T.fileviewer){let ie=T.fileviewer[0].split(",");const q=ie.pop(),ce=ie.join(",");O.push({type:"fileviewer",url:ce,viewer:q})}if(T.token){let ie=T.token[0].split(",");O.push({type:"token",address:ie[0],square_port:Number(ie[1]),socketId:ie[2]})}if(N)return O;yield B.act_from_QRInfo(O)})()}GenerateQRCode(T){var N=this;return(0,j.A)(function*(){return`${yield N.global.GetHeaderAddress()}?server=${T.useSSL?"https":"http"}://${T.address||""}${T.nakama_port?`:${T.nakama_port}`:""},${T.key||""},${T.cdn_port||""},${T.apache_port||""},${T.square_port||""},${T.webrtc_port||""},${T.webpush_port||""}`.replace(/ /g,"%20")})()}act_from_QRInfo(T,N=""){var B=this;return(0,j.A)(function*(){for(let O=0,ie=20;O<ie&&!B.lang.text.WebRTCDevManager.SecurityError;O++)yield new Promise(q=>setTimeout(q,1e3));for(let O=0,ie=T.length;O<ie;O++)switch(T[O].type){case"open_profile":B.open_profile_page();break;case"server":if(!B.CheckIfHasServer(`${T[O].value.useSSL?"https":"http"}://${T[O].value.address}:${T[O].value.port||7350}`)){let He=!1;B.global.PageDismissAct["quick-server-detail"]=function(){var Vt=(0,j.A)(function*(cn){B.global.RestoreShortCutAct("quick-server-detail"),delete B.global.PageDismissAct["quick-server-detail"],cn&&(B.init_server(cn),yield B.init_session(cn)),He=!0});return function(cn){return Vt.apply(this,arguments)}}(),B.global.StoreShortCutAct("quick-server-detail"),B.global.ActLikeModal("server-detail",{data:T[O].value,quick:!0}),B.p5toast.show({text:B.lang.text.Nakama.AddNewServer}),yield function(){var Vt=(0,j.A)(function*(){for(;!He;)yield new Promise(cn=>setTimeout(cn,0))});return function(){return Vt.apply(this,arguments)}}()()}break;case"group_dedi":yield B.global.RemoveAllModals(),yield B.global.AnonymousUserCreateName(),B.navCtrl.navigateForward("minimal-chat",{animation:_n.V5,state:{address:T[O].value.address,channel:T[O].value.channel,quick:!0}});break;case"group":B.AfterLoginActDone?yield B.try_add_group(T[O]):B.AfterLoginAct.push((0,j.A)(function*(){yield B.try_add_group(T[O])}));break;case"open_prv_channel":{let He=B.CheckIfHasServer(T[O].address);if(He)if(B.AfterLoginActDone){let gt=yield B.join_chat_with_modulation(T[O].user_id,2,He.isOfficial,He.target,!0);B.go_to_chatroom(gt)}else B.AfterLoginAct.push((0,j.A)(function*(){let gt=yield B.join_chat_with_modulation(T[O].user_id,2,He.isOfficial,He.target,!0);B.go_to_chatroom(gt)})),B.p5toast.show({text:B.lang.text.Nakama.NeedLogin}),B.users.self.online||B.open_profile_page();else B.p5toast.show({text:B.lang.text.Nakama.NoLoginServer})}break;case"open_channel":{let He=B.CheckIfHasServer(T[O].address);if(He)if(B.AfterLoginActDone){let gt=yield B.join_chat_with_modulation(T[O].group_id,3,He.isOfficial,He.target,!0);B.go_to_chatroom(gt)}else B.AfterLoginAct.push((0,j.A)(function*(){let gt=yield B.join_chat_with_modulation(T[O].group_id,3,He.isOfficial,He.target,!0);B.go_to_chatroom(gt)})),B.p5toast.show({text:B.lang.text.Nakama.NeedLogin}),B.users.self.online||B.open_profile_page();else B.p5toast.show({text:B.lang.text.Nakama.NoLoginServer})}break;case"rtcserver":B.SaveWebRTCServer(T[O].value,!0);break;case"postViewer":let Ge=yield fetch(T[O].address);if(Ge.ok){let He=yield Ge.text(),gt=JSON.parse(He);gt.quick=!0,B.open_post(gt,-2,N)}else B.p5toast.show({text:`${B.lang.text.AddPost.NoPostOutLink}: ${Ge.statusText}`});break;case"token":{const gt=T[O].square_port,Vt=T[O].socketId;let cn=new WebSocket(`${T[O].address}:${gt||12013}`);cn.onopen=()=>{cn.send(JSON.stringify({type:"reqInfo",socketId:Vt}))},cn.onmessage=Ve=>{let We;We="string"==typeof Ve.data?Ve.data:Ve.data.text();try{const ft=JSON.parse(We);if("req_info"===ft.type)switch(ft.act){case"voiddraw":B.global.PageDismissAct["voiddraw-remote"]=()=>{delete B.global.PageDismissAct["voiddraw-remote"]},B.global.ActLikeModal(N+"void-draw",{remote:{address:T[O].address,channel:ft.channel_id,port:ft.port||3478,username:ft.username,password:ft.credential},quick:!0,saveClipboard:!0,dismiss:"voiddraw-remote"});break;case"instc":B.global.RemoveAllModals((0,j.A)(function*(){yield B.global.AnonymousUserCreateName(),B.navCtrl.navigateForward(N+"instant-call",{animation:_n.NC,state:{address:T[O].address,channel:ft.channel_id,port:ft.port,username:ft.username,password:ft.password,square_port:gt,useVideo:ft.useVideo,useCCTV:ft.useCCTV,users:ft.users||[],quick:!0}})}));break;case"arcade":T[O].cdn_port=ft.cdn_port||9001,T[O].apache_port=ft.apache_port||9002,B.global.JoinArcadeWithSocketInfo(T[O])}}catch(ft){console.log("\ube60\ub978 \uc9c4\uc785 \uc18c\ucf13 \ud589\ub3d9 \uc624\ub958: ",ft),cn.close(1e3,ft)}cn.close(1e3,"done")},cn.onerror=Ve=>{cn.close(1e3,"onerror")},cn.onclose=Ve=>{switch(console.log("\uc18c\ucf13 \ud589\ub3d9 \uc885\ub8cc: ",Ve),Ve.reason){case"max_limit":B.p5toast.show({text:B.lang.text.MinimalChat.block});break;case"expired":B.p5toast.show({text:B.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",Ve.reason)}cn.onopen=null,cn.onmessage=null,cn.onclose=null,cn.onerror=null,cn=null}}break;case"fileviewer":B.global.PageDismissAct["quick-fileviewer"]=He=>{delete B.global.PageDismissAct["quick-fileviewer"]},B.global.ActLikeModal(N+"ionic-viewer",{info:{content:{filename:T[O].url.split("/").pop(),file_ext:T[O].url.split(".").pop(),url:T[O].url,viewer:T[O].viewer}},relevance:[{content:{filename:T[O].url.split("/").pop(),file_ext:T[O].url.split(".").pop(),url:T[O].url,viewer:T[O].viewer}}],noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"quick-fileviewer"});break;default:throw"\uc9c0\uc815\ub41c \ud2c0 \uc544\ub2d8"}})()}CheckIfHasServer(T){let N=!1;try{let B=T.split("://"),O="https"==B.shift(),ie=B.shift().split(":"),q=ie[0],ce=Number(ie[1])||7350,Ge=this.get_all_server_info(!0);for(let He of Ge)if(He.address==q&&He.useSSL==O&&(He.nakama_port||7350)==ce){N=He;break}}catch{}return N}load_local_post_with_id(T,N,B,O){var ie=this;return(0,j.A)(function*(){let q=yield ie.indexed.loadTextFromUserPath(`servers/${N}/${B}/posts/${O}/${T}/info.json`);try{try{if(ie.posts_orig[N][B][O][T])throw"exist"}catch(Ge){if("exist"==Ge)throw"\uc774\ubbf8 \uc788\ub294 \uac8c\uc2dc\ubb3c"}let ce=JSON.parse(q);try{ce.server={name:ie.servers[N][B].info.name,isOfficial:N,target:B}}catch{ce.server={name:ie.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0}}if(ce.mainImage)try{if(ce.mainImage.url)ce.mainImage.thumbnail=ce.mainImage.url;else{let Ge=yield ie.indexed.loadBlobFromUserPath(ce.mainImage.path,ce.mainImage.type);ce.mainImage.blob=Ge;const He=URL.createObjectURL(Ge);ce.mainImage.thumbnail=He,setTimeout(()=>{URL.revokeObjectURL(He)},5e3)}}catch{}return ie.posts_orig[N][B][O][T]=ce,!0}catch{return!1}})()}GetOverrideName(T,N,B){let O;try{O=this.usernameOverride[N][B][T]}catch{}return O}SaveOverrideName(T,N,B,O){var ie=this;return(0,j.A)(function*(){N?ie.usernameOverride[B][O][T]=N:delete ie.usernameOverride[B][O][T];let q=JSON.stringify(ie.usernameOverride[B][O]),Ge={blob:new Blob([q],{type:"application/json"}),path:`servers/${B}/${O}/users/override_name.json`};yield ie.sync_save_file(Ge,B,O,"usernameOverride","override");try{yield ie.servers[B][O].client.rpc(ie.servers[B][O].session,"send_noti_fn",{receiver_id:ie.servers[B][O].session.user_id,title:"name_overrided",content:{},code:yr.NAME_OVERRIDED,persistent:!1})}catch{}})()}LoadOverrideName(T,N){var B=this;return(0,j.A)(function*(){let O={path:`servers/${T}/${N}/users/override_name.json`},ie=yield B.sync_load_file(O,T,N,"usernameOverride",void 0,"override",!1);if(ie.value){let q=yield ie.value.text(),ce=JSON.parse(q),Ge=Object.keys(ce);B.usernameOverride[T][N]={};for(let He of Ge)B.usernameOverride[T][N][He]=ce[He]}})()}LoadOverridesOffline(){var T=this;return(0,j.A)(function*(){let N=yield T.indexed.GetFileListFromDB("override_name.json");for(let B of N)try{let O=B.split("/");T.usernameOverride[O[1]]||(T.usernameOverride[O[1]]={}),T.usernameOverride[O[1]][O[2]]||(T.usernameOverride[O[1]][O[2]]={});let q=yield(yield T.indexed.loadBlobFromUserPath(B,"")).text(),ce=JSON.parse(q);T.usernameOverride[O[1]][O[2]]=ce}catch{}})()}load_server_post_with_id(T,N,B,O,ie){var q=this;return(0,j.A)(function*(){let ce;try{let He={path:`servers/${N}/${B}/posts/${O}/${T}/info.json`,type:"application/json"};const gt=yield q.sync_load_file(He,N,B,"server_post",O,T,!1);if(gt.error)return!1;const Vt=yield gt.value.text();ce=JSON.parse(Vt),ce.is_me=ce.is_me||ie;const cn=new Blob([JSON.stringify(ce)],{type:"application/json"});if(ce.OutSource&&!ce.is_me)throw"\ub2e4\ub978 \uc0ac\ub78c\uc758 \uc678\ubd80 \uac8c\uc2dc\ubb3c \uc815\ubcf4 \ubb34\uc2dc";q.indexed.saveBlobToUserPath(cn,He.path),ce.server={isOfficial:N,target:B};try{ce.server.name=q.servers[N][B].info.name}catch{ce.server.name=q.lang.text.Nakama.DeletedServer}if(ce.mainImage)if(ce.mainImage.url)ce.mainImage.thumbnail=ce.mainImage.url;else{let Ve={path:ce.mainImage.path,alt_path:`servers/${N}/${B}/posts/${O}/${T}/MainImage.png`,type:"image/png"};const We=yield q.sync_load_file(Ve,N,B,"server_post",O,`${T}_mainImage`,!1);ce.mainImage.blob=We.value;const ft=URL.createObjectURL(We.value);ce.mainImage.thumbnail=ft,setTimeout(()=>{URL.revokeObjectURL(ft)},5e3)}try{ce.creator_name=q.load_other_user(O,N,B).display_name||ce.creator_name}catch{}if(q.posts_orig[N]||(q.posts_orig[N]={}),q.posts_orig[N][B]||(q.posts_orig[N][B]={}),q.posts_orig[N][B][O]||(q.posts_orig[N][B][O]={}),("deleted"!=N||ce.is_me)&&(q.posts_orig[N][B][O][T]=ce),"local"==gt.from)try{if(!(yield q.servers[N][B].client.readStorageObjects(q.servers[N][B].session,{object_ids:[{collection:"server_post",key:T,user_id:O}]})).objects.length)throw"Not RemoteExist"}catch(Ve){if("Not RemoteExist"==Ve)throw"RemoveSelf"}return ce}catch(He){var Ge;return"RemoveSelf"==He?q.RemovePost(q.posts_orig[N][B][O][T],!0):ce&&null!==(Ge=ce)&&void 0!==Ge&&Ge.creator_id&&((yield q.indexed.GetFileListFromDB(`servers/${N}/${B}/posts/${ce.creator_id}/${ce.id}`)).forEach(Vt=>q.indexed.removeFileFromUserPath(Vt)),delete q.posts_orig[N][B][O][T],q.rearrange_posts()),!1}})()}deserialize_text(T){let N="";if(!T.content.msg)return N;for(let B=0,O=T.content.msg.length;B<O;B++){for(let ie=0,q=T.content.msg[B].length;ie<q;ie++)N+=T.content.msg[B][ie].text;B+1<O&&(N+="\n")}return N}load_posts_counter(T){var N=this;return(0,j.A)(function*(){let B={};try{let q=yield N.indexed.loadTextFromUserPath("servers/post_counter.json"),ce=JSON.parse(q);B=q,N.post_counter=ce}catch{}let O=Number(yield N.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;N.post_counter.local.target.me=O;let ie=T||N.get_all_server_info(!0,!0);for(let q=0,ce=ie.length;q<ce;q++){let Ge=ie[q].isOfficial,He=ie[q].target;(!N.post_counter[Ge][He]||T)&&(N.post_counter[Ge][He]={});try{let gt=yield N.servers[Ge][He].client.readStorageObjects(N.servers[Ge][He].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:N.servers[Ge][He].session.user_id}]}),Vt=0;gt.objects.length&&(Vt=gt.objects[0].value.counter),N.post_counter[Ge][He][N.servers[Ge][He].session.user_id]=Vt}catch(gt){console.log("\ub0b4 \uc11c\ubc84 \uac8c\uc2dc\ubb3c \uce74\uc6b4\ud130 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",gt)}if(N.users[Ge][He]){let gt=Object.keys(N.users[Ge][He]);for(let Vt=0,cn=gt.length;Vt<cn;Vt++)try{let Ve=yield N.servers[Ge][He].client.readStorageObjects(N.servers[Ge][He].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:gt[Vt]}]}),We=0;Ve.objects.length&&(We=Ve.objects[0].value.counter),N.post_counter[Ge][He][gt[Vt]]=We;try{if(!N.posts_orig[Ge][He])throw"\uc544\uc9c1 \uc900\ube44\ub418\uc9c0 \uc54a\uc74c";let ft=Object.keys(N.posts_orig[Ge][He][gt[Vt]]);for(let nt of ft){let un=(yield N.servers[Ge][He].client.readStorageObjects(N.servers[Ge][He].session,{object_ids:[{collection:"server_post",key:nt,user_id:gt[Vt]}]})).objects[0].value,Bn=yield N.sync_load_file(un,Ge,He,"server_post",gt[Vt],nt,!1);if("remote"!==Bn.from)throw nt;{let Pr=yield Bn.value.text();JSON.parse(Pr).OutSource&&delete N.posts_orig[Ge][He][gt[Vt]][nt]}}}catch(ft){try{delete N.posts_orig[Ge][He][gt[Vt]][ft]}catch{}}}catch{delete N.post_counter[Ge][He][gt[Vt]]}N.rearrange_posts()}B!=JSON.stringify(N.post_counter)&&(yield N.save_post_counter(),N.has_new_post=!0)}})()}save_post_counter(){var T=this;return(0,j.A)(function*(){yield T.indexed.saveTextFileToUserPath(JSON.stringify(T.post_counter),"servers/post_counter.json")})()}send_webpush(T,N,B){return(0,j.A)(function*(){try{N.users=B;const O=yield fetch(`${T}/send_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!O.ok)throw`${O.statusText} (${O.status})`}catch(O){console.log("onerror_send_webpush: ",O)}})()}schedule_webpush(T,N,B){return(0,j.A)(function*(){try{N.users=B;const O=yield fetch(`${T}/schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!O.ok)throw`${O.statusText} (${O.status})`}catch(O){console.log("onerror_schedule_webpush: ",O)}})()}remove_schedule_webpush(T,N,B){return(0,j.A)(function*(){try{N.users=B;const O=yield fetch(`${T}/remove_schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!O.ok)throw`${O.statusText} (${O.status})`}catch(O){console.log("onerror_remove_schedule_webpush: ",O)}})()}}return(te=De).\u0275fac=function(T){return new(T||te)(ln.KVO(Zn.G),ln.KVO(Ut.j),ln.KVO(sn.n),ln.KVO(On.r),ln.KVO(Sn.hG),ln.KVO(cr.y),ln.KVO(Kt.z3),ln.KVO(zn.q9),ln.KVO(sr.f))},te.\u0275prov=ln.jDH({token:te,factory:te.\u0275fac,providedIn:"root"}),De})()},3307:(wr,Nn,je)=>{"use strict";je.d(Nn,{f:()=>K});var j=je(467),F=je(8326),Jt=je(3953),l=je(4234);!function ve(){("http:"!=window.location.protocol||0==window.location.host.indexOf("localhost"))&&je.e(925).then(je.t.bind(je,925,23))}();let K=(()=>{var M;class A{constructor(w){this.lang=w,this.loadingStack={},this.stackKeys=[],this.queued=[]}create(w){var I=this;return(0,j.A)(function*(){I.CurrentLoading?I.AddLoadingInfo?I.AddLoadingInfo(w):I.queued.push(w):yield new Promise(D=>{I.CurrentLoading=new F(d=>{d.setup=()=>{if(d.noCanvas(),"http:"!=window.location.protocol||0==window.location.host.indexOf("localhost")){let h=new F.Oscillator(372);I.SoundAlert=()=>{if(w.soundAlert)try{h.freq(372),h.start(),h.freq(500,.1),h.freq(320,.15),h.stop(.2)}catch(p){console.log("\uc624\uc2e4\ub808\uc774\ud130 \uc900\ube44\uc911: ",p)}}}I.parentDiv=d.createDiv(),I.parentDiv.style("position: absolute; left: 0; top: 0; z-index: 1"),I.parentDiv.style("width: 100%; height: fit-content"),I.parentDiv.style("padding: 16px;"),I.parentDiv.style("display: flex; flex-direction: column"),I.parentDiv.style("gap: 8px"),I.parentDiv.style("justify-content: center;"),I.parentDiv.style("pointer-events: none"),I.parentDiv.style("user-select: none"),I.AddLoadingInfo=h=>{var p;I.loadingStack[h.id]=h,I.stackKeys=Object.keys(I.loadingStack);const m=d.createDiv();I.loadingStack[h.id].element=m,m.style("width: 100%; height: fit-content"),m.style("word-break: break-all"),m.style("background: "+(h.bgcolor?`#${h.bgcolor}88`:"var(--toast-background-color)")),m.style("border-radius: 32px"),m.style("padding: 8px"),m.style("color: white"),m.parent(I.parentDiv),h.clickable?(m.style("cursor: pointer"),m.style("pointer-events: fill"),m.mouseClicked(()=>{var k;null===(k=h.clickable)||void 0===k||k.call(h),m.style("cursor: auto"),m.style("pointer-events: none"),h.forceEnd=350})):(m.style("cursor: auto"),m.style("pointer-events: none")),(void 0!==h.clickable||h.soundAlert)&&(null===(p=I.SoundAlert)||void 0===p||p.call(I));const g=d.createDiv();g.style("display: flex; flex-direction: row;"),g.parent(m);const x=d.createImg(h.image,"ld_img");x.style("width: 32px; height: 32px;"),x.style("margin-left: 8px"),x.style("object-fit: cover"),x.style("border-radius: 24px;"),h.image||x.hide(),h.imageElement=x,x.parent(g);const E=d.createDiv();E.style("display: flex; flex-direction: row;"),E.style("gap: 4px"),E.style("overflow: hidden"),E.style("flex-grow: 1"),E.style("align-items: center"),E.style("margin-right: 8px"),E.parent(g);const S=d.createDiv(h.message||I.lang.text.TodoDetail.WIP);if(S.style("margin-left: 16px"),S.style("flex-grow: 1"),S.style("overflow: hidden"),S.style("white-space: nowrap"),S.style("text-overflow: ellipsis"),h.messageElement=S,S.parent(E),void 0===h.clickable){const k=d.createDiv();k.style("width: 24px; height: 24px;"),k.style("flex-shrink: 0"),k.style("border-radius: 50%"),null===h.progress&&(h.progress=void 0);const X=Math.floor(100*h.progress)||0;k.style(`background: conic-gradient(var(--loading-done-color) 0% ${X}%, var(--loading-waiting-color) ${X}% 100%)`),h.progressElement=k,h.nullProgress=0,k.parent(E)}h.fade=0,null===h.forceEnd&&delete h.forceEnd},I.AddLoadingInfo(w),D(void 0)},d.draw=()=>{for(let p=I.queued.length-1;p>=0;p--)I.AddLoadingInfo(I.queued[p]),I.queued.splice(p,1);for(let p of I.stackKeys){if(void 0===I.loadingStack[p].progress){var h;I.loadingStack[p].nullProgress=(I.loadingStack[p].nullProgress+2)%120;const m=I.loadingStack[p].nullProgress;null===(h=I.loadingStack[p].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-waiting-color) 0% ${m-20}%, var(--loading-done-color) ${m-20}% ${m}%, var(--loading-waiting-color) ${m}% 100%)`)}void 0!==I.loadingStack[p].forceEnd&&I.loadingStack[p].forceEnd>0&&(I.loadingStack[p].forceEnd-=7),I.loadingStack[p].forceEnd<=0?I.loadingStack[p].fade>0?(I.loadingStack[p].fade-=.07,I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`),I.loadingStack[p].fade<=0&&(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack))):(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack)):I.loadingStack[p].fade<1&&(I.loadingStack[p].fade+=.07,I.loadingStack[p].fade>=1&&(I.loadingStack[p].fade=1),I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`))}I.stackKeys.length||f()};let f=()=>{d.remove(),I.parentDiv=null,I.CurrentLoading=null,I.AddLoadingInfo=null,I.stackKeys.length=0}})})})()}update(w,I=!1){var D=this;return(0,j.A)(function*(){if(D.stackKeys.includes(w.id)){var d;if(w.clickable?(D.loadingStack[w.id].element.style("cursor: pointer"),D.loadingStack[w.id].element.style("pointer-events: fill"),D.loadingStack[w.id].element.mouseClicked(()=>{var p;null===(p=w.clickable)||void 0===p||p.call(w),D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none"),D.loadingStack[w.id].forceEnd=350})):(D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none")),(void 0!==w.clickable||w.soundAlert)&&(null===(d=D.SoundAlert)||void 0===d||d.call(D)),null!=w.bgcolor&&D.loadingStack[w.id].element.style("background: "+(w.bgcolor?`#${w.bgcolor}88`:"var(--toast-background-color)")),void 0!==w.forceEnd)if(null===w.forceEnd)D.loadingStack[w.id].forceEnd=void 0;else if(D.loadingStack[w.id].forceEnd=w.forceEnd,D.loadingStack[w.id].progress){var f;D.loadingStack[w.id].progress=1,null===(f=D.loadingStack[w.id].progressElement)||void 0===f||f.style("background: conic-gradient(var(--loading-done-color) 0% 100%")}if(void 0!==w.message&&(null===w.message?(delete D.loadingStack[w.id],D.loadingStack[w.id].messageElement.html()):(D.loadingStack[w.id].message=w.message,D.loadingStack[w.id].messageElement.html(w.message))),void 0!==w.progress)if(null===w.progress)delete D.loadingStack[w.id].progress;else{var h;D.loadingStack[w.id].progress=w.progress;const p=Math.floor(100*w.progress);null===(h=D.loadingStack[w.id].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-done-color) 0% ${p}%, var(--loading-waiting-color) ${p}% 100%)`)}void 0!==w.image&&(null===w.image?(delete D.loadingStack[w.id].image,D.loadingStack[w.id].imageElement.hide(),D.loadingStack[w.id].imageElement.removeAttribute("src")):(D.loadingStack[w.id].image=w.image,D.loadingStack[w.id].imageElement.attribute("src",w.image),D.loadingStack[w.id].imageElement.show()))}else I||(yield D.create(w))})()}toast(w,I,D=1e3){const d=I||`AsToast_${Date.now()}`;this.update({id:d,message:w,forceEnd:D})}remove(w){this.update({id:w,forceEnd:350},!0)}}return(M=A).\u0275fac=function(w){return new(w||M)(Jt.KVO(l.y))},M.\u0275prov=Jt.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),A})()},9900:(wr,Nn,je)=>{"use strict";je.d(Nn,{G:()=>ve});var j=je(8326),Et=je(7100),Jt=je(3953),l=function(K){return K[K.Idle=0]="Idle",K[K.DivFadeIn=1]="DivFadeIn",K[K.BorderAlert=2]="BorderAlert",K[K.Reading=3]="Reading",K[K.FadeOut=4]="FadeOut",K}(l||{});let ve=(()=>{var K;class M{constructor(){this.isShowing=!1,this.stack=[],this.alert=[],this.status=l.Idle}show(b){let w;b.time=(new Date).getTime(),b.lateable||(this.AlertNow=b,this.status=l.DivFadeIn),this.alert.length&&(w=this.alert[this.alert.length-1]),this.AlertNow&&this.AlertNow.text==b.text?this.status=l.DivFadeIn:w&&w.text==b.text||this.alert.push(b),this.isShowing?this.status==l.FadeOut&&(this.status=l.DivFadeIn):(this.CurrentToast=new j(D=>{let d,f,h,p=0,m=0,g=0;D.setup=()=>{D.noCanvas(),d=D.createDiv(),d.style("position: absolute; left: 0; top: 0; z-index: 2"),d.style("width: 100%; height: fit-content"),d.style("padding: 32px;"),d.style("display: flex; justify-content: center;"),d.style("pointer-events: none"),x(),h=D.createDiv(),h.parent(d),h.style("display: flex; justify-content: center;"),h.style("width: fit-content; height: fit-content"),h.style("border-radius: 24px"),h.style("background: var(--toast-background-color)"),h.style("padding: 4px"),f=D.createDiv(),f.parent(h),f.style("display: flex; justify-content: center;"),f.style("width: fit-content; height: fit-content"),f.style("word-break: break-all"),f.style("background: var(--toast-background-color)"),f.style("border-radius: 20px"),f.style("padding: 12px"),f.style("color: white"),this.AlertNow||(this.AlertNow=this.alert.shift()),f.html(this.HTMLEncode(this.AlertNow.text)),E(),this.status=l.DivFadeIn},D.draw=()=>{switch(this.status){case l.DivFadeIn:p<1?p+=1:(p=1,m=1,this.status=l.BorderAlert,f.html(this.HTMLEncode(this.AlertNow.text)));break;case l.BorderAlert:if(m>0)m-=.03;else{let k;m=0,k=this.AlertNow.duration?1e3*this.AlertNow.duration:24*(new TextEncoder).encode(this.AlertNow.text).length,g=D.millis()+k+960,this.status=l.Reading}break;case l.Reading:D.millis()>g&&(this.alert.length?(this.stack.push(this.AlertNow),this.AlertNow=this.alert.shift(),f.html(this.HTMLEncode(this.AlertNow.text)),this.status=l.DivFadeIn):this.status=l.FadeOut);break;case l.FadeOut:p>0?p-=.04:S()}x(),E()};let x=()=>{d.style(`opacity: ${p}`)},E=()=>{let k=D.lerpColor(D.color("#"+(Et.ud?"30564e88":"b9543788")),D.color("#ffd94ebb"),m).levels;h.style(`padding: ${4*m}px`),f.style(`padding: ${D.lerp(16,12,m)}px`),f.style(`border-radius: ${D.lerp(24,20,m)}px`),h.style(`background: rgba(${k[0]}, ${k[1]}, ${k[2]}, ${k[3]/255})`)},S=()=>{this.stack=[...this.stack,this.AlertNow,...this.alert],this.AlertNow=null,this.alert.length=0,this.isShowing=!1,this.CurrentToast.remove()}}),this.isShowing=!0)}hide(){this.status=l.FadeOut}}return(K=M).\u0275fac=function(b){return new(b||K)},K.\u0275prov=Jt.jDH({token:K,factory:K.\u0275fac,providedIn:"root"}),M})()},8065:(wr,Nn,je)=>{"use strict";je.d(Nn,{j:()=>F});var j=je(3953);let F=(()=>{var Et;class Jt{constructor(){this.colors={offline:"#888888",missing:"#880000",pending:"#dddd0c",online:"#4ff14f",certified:"#00ffff"},this.chatroom={},this.project={},this.task={},this.settings={groupServer:"offline",dedicatedServer:"offline",dedicated_groupchat:"offline"},this.tools={},this.groupServer={official:{default:"offline"},unofficial:{}},setInterval(()=>{},350)}}return(Et=Jt).\u0275fac=function(ve){return new(ve||Et)},Et.\u0275prov=j.jDH({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Jt})()},3419:(wr,Nn,je)=>{"use strict";var j=je(345),F=je(3953),Et=je(9858),Jt=je(3656),l=je(5374),ve=je(92);const K=[{path:"",redirectTo:"portal",pathMatch:"full"},{path:"minimal-chat",loadChildren:()=>Promise.all([je.e(2076),je.e(5502)]).then(je.bind(je,5502)).then(on=>on.MinimalChatPageModule)},{path:"others-profile",loadChildren:()=>je.e(4722).then(je.bind(je,4722)).then(on=>on.OthersProfilePageModule)},{path:"user-fs-dir",loadChildren:()=>je.e(6556).then(je.bind(je,6556)).then(on=>on.UserFsDirPageModule)},{path:"group-server",loadChildren:()=>je.e(36).then(je.bind(je,36)).then(on=>on.GroupServerPageModule)},{path:"add-todo-menu",loadChildren:()=>Promise.all([je.e(2076),je.e(8163)]).then(je.bind(je,8163)).then(on=>on.AddTodoMenuPageModule)},{path:"chat-room",loadChildren:()=>Promise.all([je.e(2076),je.e(6991)]).then(je.bind(je,6991)).then(on=>on.ChatRoomPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([je.e(222),je.e(526)]).then(je.bind(je,526)).then(on=>on.PostViewerPageModule)},{path:"share-content-to-other",loadChildren:()=>je.e(9406).then(je.bind(je,9406)).then(on=>on.ShareContentToOtherPageModule)},{path:"webrtc-manage-io-dev",loadChildren:()=>je.e(5436).then(je.bind(je,5436)).then(on=>on.WebrtcManageIoDevPageModule)},{path:"portal",loadChildren:()=>Promise.all([je.e(4020),je.e(8180)]).then(je.bind(je,8180)).then(on=>on.PortalPageModule)},{path:"group-detail",loadChildren:()=>je.e(3267).then(je.bind(je,3267)).then(on=>on.GroupDetailPageModule)},{path:"instant-call",loadChildren:()=>Promise.all([je.e(4020),je.e(6524),je.e(2076)]).then(je.bind(je,6524)).then(on=>on.InstantCallPageModule)},{path:"add-group",loadChildren:()=>je.e(7601).then(je.bind(je,7601)).then(on=>on.AddGroupPageModule)},{path:"void-draw",loadChildren:()=>Promise.all([je.e(6042),je.e(4020),je.e(2655)]).then(je.bind(je,2655)).then(on=>on.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([je.e(6042),je.e(4803),je.e(222)]).then(je.bind(je,4803)).then(on=>on.IonicViewerPageModule)},{path:"server-detail",loadChildren:()=>je.e(3456).then(je.bind(je,3456)).then(on=>on.ServerDetailPageModule)},{path:"qrcode-modal",loadChildren:()=>Promise.all([je.e(2076),je.e(3992)]).then(je.bind(je,1611)).then(on=>on.QRCodeModalPageModule)}];let M=(()=>{var on;class xn{}return(on=xn).\u0275fac=function(Un){return new(Un||on)},on.\u0275mod=F.$C({type:on}),on.\u0275inj=F.G2t({imports:[Et.iI.forRoot(K,{preloadingStrategy:Et.Kp}),Et.iI]}),xn})();var A=je(177),b=je(9030),w=je(8810),I=je(3726),D=je(7673),d=je(8793),f=je(1413),h=je(1985),p=je(5343);const m=new h.c(p.l);var x=je(6365),E=je(8750),S=je(983),k=je(9326),X=je(6648);function Y(...on){const xn=(0,k.lI)(on),Pn=(0,k.R0)(on,1/0),Un=on;return Un.length?1===Un.length?(0,E.Tg)(Un[0]):(0,x.U)(Pn)((0,X.H)(Un,xn)):S.w}var G=je(6354),z=je(5964),ee=je(5558),H=je(17),re=je(8071),Z=je(9974);const xe={connector:()=>new f.B};function oe(on,xn=xe){const{connector:Pn}=xn;return(0,Z.N)((Un,yn)=>{const qt=Pn();(0,E.Tg)(on(function _e(on){return new h.c(xn=>on.subscribe(xn))}(qt))).subscribe(yn),yn.add(Un.subscribe(qt))})}var J=je(6697),he=je(8141),Ce=je(8359);class et extends Ce.yU{constructor(xn,Pn){super()}schedule(xn,Pn=0){return this}}const le={setInterval(on,xn,...Pn){const{delegate:Un}=le;return null!=Un&&Un.setInterval?Un.setInterval(on,xn,...Pn):setInterval(on,xn,...Pn)},clearInterval(on){const{delegate:xn}=le;return((null==xn?void 0:xn.clearInterval)||clearInterval)(on)},delegate:void 0};var V=je(7908);const Le={now:()=>(Le.delegate||Date).now(),delegate:void 0};class Ke{constructor(xn,Pn=Ke.now){this.schedulerActionCtor=xn,this.now=Pn}schedule(xn,Pn=0,Un){return new this.schedulerActionCtor(this,xn).schedule(Un,Pn)}}Ke.now=Le.now;const _t=new class ut extends Ke{constructor(xn,Pn=Ke.now){super(xn,Pn),this.actions=[],this._active=!1}flush(xn){const{actions:Pn}=this;if(this._active)return void Pn.push(xn);let Un;this._active=!0;do{if(Un=xn.execute(xn.state,xn.delay))break}while(xn=Pn.shift());if(this._active=!1,Un){for(;xn=Pn.shift();)xn.unsubscribe();throw Un}}}(class ge extends et{constructor(xn,Pn){super(xn,Pn),this.scheduler=xn,this.work=Pn,this.pending=!1}schedule(xn,Pn=0){var Un;if(this.closed)return this;this.state=xn;const yn=this.id,qt=this.scheduler;return null!=yn&&(this.id=this.recycleAsyncId(qt,yn,Pn)),this.pending=!0,this.delay=Pn,this.id=null!==(Un=this.id)&&void 0!==Un?Un:this.requestAsyncId(qt,this.id,Pn),this}requestAsyncId(xn,Pn,Un=0){return le.setInterval(xn.flush.bind(xn,this),Un)}recycleAsyncId(xn,Pn,Un=0){if(null!=Un&&this.delay===Un&&!1===this.pending)return Pn;null!=Pn&&le.clearInterval(Pn)}execute(xn,Pn){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Un=this._execute(xn,Pn);if(Un)return Un;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(xn,Pn){let yn,Un=!1;try{this.work(xn)}catch(qt){Un=!0,yn=qt||new Error("Scheduled action threw falsy error")}if(Un)return this.unsubscribe(),yn}unsubscribe(){if(!this.closed){const{id:xn,scheduler:Pn}=this,{actions:Un}=Pn;this.work=this.state=this.scheduler=null,this.pending=!1,(0,V.o)(Un,this),null!=xn&&(this.id=this.recycleAsyncId(Pn,xn,null)),this.delay=null,super.unsubscribe()}}}),Nt=_t;var dt=je(4360),Bt=je(3703),lt=je(1397);function It(on,xn){return xn?Pn=>(0,d.x)(xn.pipe((0,J.s)(1),function Rt(){return(0,Z.N)((on,xn)=>{on.subscribe((0,dt._)(xn,p.l))})}()),Pn.pipe(It(on))):(0,lt.Z)((Pn,Un)=>(0,E.Tg)(on(Pn,Un)).pipe((0,J.s)(1),(0,Bt.u)(Pn)))}var Tt=je(9470);const hn="Service workers are disabled or not supported by this browser";class bn{constructor(xn){if(this.serviceWorker=xn,xn){const Un=(0,I.R)(xn,"controllerchange").pipe((0,G.T)(()=>xn.controller)),yn=(0,b.v)(()=>(0,D.of)(xn.controller)),qt=(0,d.x)(yn,Un);this.worker=qt.pipe((0,z.p)(Ut=>!!Ut)),this.registration=this.worker.pipe((0,ee.n)(()=>xn.getRegistration()));const Zn=(0,I.R)(xn,"message").pipe((0,G.T)(Ut=>Ut.data)).pipe((0,z.p)(Ut=>Ut&&Ut.type)).pipe(function ne(on){return on?xn=>oe(on)(xn):xn=>function me(on,xn){const Pn=(0,re.T)(on)?on:()=>on;return(0,re.T)(xn)?oe(xn,{connector:Pn}):Un=>new H.G(Un,Pn)}(new f.B)(xn)}());Zn.connect(),this.events=Zn}else this.worker=this.events=this.registration=function $n(on){return(0,b.v)(()=>(0,w.$)(new Error(on)))}(hn)}postMessage(xn,Pn){return this.worker.pipe((0,J.s)(1),(0,he.M)(Un=>{Un.postMessage({action:xn,...Pn})})).toPromise().then(()=>{})}postMessageWithOperation(xn,Pn,Un){const yn=this.waitForOperationCompleted(Un),qt=this.postMessage(xn,Pn);return Promise.all([qt,yn]).then(([,_n])=>_n)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(xn){let Pn;return Pn="string"==typeof xn?Un=>Un.type===xn:Un=>xn.includes(Un.type),this.events.pipe((0,z.p)(Pn))}nextEventOfType(xn){return this.eventsOfType(xn).pipe((0,J.s)(1))}waitForOperationCompleted(xn){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,z.p)(Pn=>Pn.nonce===xn),(0,J.s)(1),(0,G.T)(Pn=>{if(void 0!==Pn.result)return Pn.result;throw new Error(Pn.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Xn=(()=>{var on;class xn{get isEnabled(){return this.sw.isEnabled}constructor(Un){if(this.sw=Un,this.pushManager=null,this.subscriptionChanges=new f.B,!Un.isEnabled)return this.messages=m,this.notificationClicks=m,void(this.subscription=m);this.messages=this.sw.eventsOfType("PUSH").pipe((0,G.T)(qt=>qt.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,G.T)(qt=>qt.data)),this.pushManager=this.sw.registration.pipe((0,G.T)(qt=>qt.pushManager));const yn=this.pushManager.pipe((0,ee.n)(qt=>qt.getSubscription()));this.subscription=Y(yn,this.subscriptionChanges)}requestSubscription(Un){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(hn));const yn={userVisibleOnly:!0};let qt=this.decodeBase64(Un.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),_n=new Uint8Array(new ArrayBuffer(qt.length));for(let Kt=0;Kt<qt.length;Kt++)_n[Kt]=qt.charCodeAt(Kt);return yn.applicationServerKey=_n,this.pushManager.pipe((0,ee.n)(Kt=>Kt.subscribe(yn)),(0,J.s)(1)).toPromise().then(Kt=>(this.subscriptionChanges.next(Kt),Kt))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,J.s)(1),(0,ee.n)(yn=>{if(null===yn)throw new Error("Not subscribed to push notifications.");return yn.unsubscribe().then(qt=>{if(!qt)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(hn))}decodeBase64(Un){return atob(Un)}}return(on=xn).\u0275fac=function(Un){return new(Un||on)(F.KVO(bn))},on.\u0275prov=F.jDH({token:on,factory:on.\u0275fac}),xn})(),Mn=(()=>{var on;class xn{get isEnabled(){return this.sw.isEnabled}constructor(Un){if(this.sw=Un,!Un.isEnabled)return this.versionUpdates=m,void(this.unrecoverable=m);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hn));const Un=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:Un},Un)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hn));const Un=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:Un},Un)}}return(on=xn).\u0275fac=function(Un){return new(Un||on)(F.KVO(bn))},on.\u0275prov=F.jDH({token:on,factory:on.\u0275fac}),xn})();const gr=new F.nKC("");function Ln(on,xn,Pn,Un){return()=>{if(!(0,A.UE)(Un)||!("serviceWorker"in navigator)||!1===Pn.enabled)return;const yn=on.get(F.SKi),qt=on.get(F.o8S);let _n;if(yn.runOutsideAngular(()=>{const Kt=navigator.serviceWorker,ln=()=>{var Zn;return null===(Zn=Kt.controller)||void 0===Zn?void 0:Zn.postMessage({action:"INITIALIZE"})};Kt.addEventListener("controllerchange",ln),qt.onDestroy(()=>{Kt.removeEventListener("controllerchange",ln)})}),"function"==typeof Pn.registrationStrategy)_n=Pn.registrationStrategy();else{const[Kt,...ln]=(Pn.registrationStrategy||"registerWhenStable:30000").split(":");switch(Kt){case"registerImmediately":_n=(0,D.of)(null);break;case"registerWithDelay":_n=nr(+ln[0]||0);break;case"registerWhenStable":_n=ln[0]?Y(mn(on),nr(+ln[0])):mn(on);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${Pn.registrationStrategy}`)}}yn.runOutsideAngular(()=>_n.pipe((0,J.s)(1)).subscribe(()=>navigator.serviceWorker.register(xn,{scope:Pn.scope}).catch(Kt=>console.error("Service worker registration failed with:",Kt))))}}function nr(on){return(0,D.of)(null).pipe(function Gt(on,xn=_t){const Pn=function vt(on=0,xn,Pn=Nt){let Un=-1;return null!=xn&&((0,Tt.m)(xn)?Pn=xn:Un=xn),new h.c(yn=>{let qt=function Ot(on){return on instanceof Date&&!isNaN(on)}(on)?+on-Pn.now():on;qt<0&&(qt=0);let _n=0;return Pn.schedule(function(){yn.closed||(yn.next(_n++),0<=Un?this.schedule(void 0,Un):yn.complete())},qt)})}(on,xn);return It(()=>Pn)}(on))}function mn(on){return on.get(F.o8S).isStable.pipe((0,z.p)(Pn=>Pn))}function qn(on,xn){return new bn((0,A.UE)(xn)&&!1!==on.enabled?navigator.serviceWorker:void 0)}class Tn{}function ct(on,xn={}){return(0,F.EmA)([Xn,Mn,{provide:gr,useValue:on},{provide:Tn,useValue:xn},{provide:bn,useFactory:qn,deps:[Tn,F.Agw]},{provide:F.hnV,useFactory:Ln,deps:[F.zZn,gr,Tn,F.Agw],multi:!0}])}let pt=(()=>{var on;class xn{static register(Un,yn={}){return{ngModule:xn,providers:[ct(Un,yn)]}}}return(on=xn).\u0275fac=function(Un){return new(Un||on)},on.\u0275mod=F.$C({type:on}),on.\u0275inj=F.G2t({providers:[Xn,Mn]}),xn})();let xt=(()=>{var on;class xn{}return(on=xn).\u0275fac=function(Un){return new(Un||on)},on.\u0275mod=F.$C({type:on,bootstrap:[ve.ZL]}),on.\u0275inj=F.G2t({providers:[{provide:Et.b,useClass:Jt.jM},Jt.y8],imports:[j.Bb,l.bv.forRoot({mode:"md",innerHTMLTemplatesEnabled:!0,experimentalCloseWatcher:!0,hardwareBackButton:!0}),M,pt.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerImmediately"})]}),xn})();var fn=je(1288);(0,F.SmG)(),j.sG().bootstrapModule(xt).catch(on=>console.log(on)),window,typeof window>"u"?Promise.resolve():(0,fn.p)().then(()=>(0,fn.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined))},8326:(wr,Nn,je)=>{var j=je(4756);wr.exports=function l(ve,K,M){function A(I,D){if(!K[I]){if(!ve[I]){var d=void 0;if(!D&&d)return require(I,!0);if(b)return b(I,!0);throw(D=new Error("Cannot find module '"+I+"'")).code="MODULE_NOT_FOUND",D}d=K[I]={exports:{}},ve[I][0].call(d.exports,function(f){return A(ve[I][1][f]||f)},d,d.exports,l,ve,K,M)}return K[I].exports}for(var b=void 0,w=0;w<M.length;w++)A(M[w]);return A}({1:[function(l,ve,K){"use strict";K.byteLength=function(p){return 3*((p=d(p))[0]+(p=p[1]))/4-p},K.toByteArray=function(f){var h,p,g,X,m=(g=d(f))[0],x=new b(3*(m+(X=g=g[1]))/4-X),E=0,S=0<g?m-4:m;for(p=0;p<S;p+=4)h=A[f.charCodeAt(p)]<<18|A[f.charCodeAt(p+1)]<<12|A[f.charCodeAt(p+2)]<<6|A[f.charCodeAt(p+3)],x[E++]=h>>16&255,x[E++]=h>>8&255,x[E++]=255&h;return 2===g&&(h=A[f.charCodeAt(p)]<<2|A[f.charCodeAt(p+1)]>>4,x[E++]=255&h),1===g&&(h=A[f.charCodeAt(p)]<<10|A[f.charCodeAt(p+1)]<<4|A[f.charCodeAt(p+2)]>>2,x[E++]=h>>8&255,x[E++]=255&h),x},K.fromByteArray=function(f){for(var h,p=f.length,m=p%3,g=[],x=0,E=p-m;x<E;x+=16383)g.push(function(S,k,X){for(var G=[],z=k;z<X;z+=3)G.push(M[(ee=(S[z]<<16&16711680)+(S[z+1]<<8&65280)+(255&S[z+2]))>>18&63]+M[ee>>12&63]+M[ee>>6&63]+M[63&ee]);var ee;return G.join("")}(f,x,E<x+16383?E:x+16383));return 1==m?g.push(M[(h=f[p-1])>>2]+M[h<<4&63]+"=="):2==m&&g.push(M[(h=(f[p-2]<<8)+f[p-1])>>10]+M[h>>4&63]+M[h<<2&63]+"="),g.join("")};for(var M=[],A=[],b=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0;I<64;++I)M[I]=w[I],A[w.charCodeAt(I)]=I;function d(f){var h=f.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=(f=-1===(f=f.indexOf("="))?h:f)===h?0:4-f%4,[f,h]}A[45]=62,A[95]=63},{}],2:[function(l,ve,K){},{}],3:[function(l,ve,K){},{}],4:[function(l,ve,K){(function(d){"use strict";var A=l("base64-js"),b=l("ieee754"),w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,I=(K.Buffer=d,K.SlowBuffer=function(le){return+le!=le&&(le=0),d.alloc(+le)},K.INSPECT_MAX_BYTES=50,2147483647);function D(le){if(I<le)throw new RangeError('The value "'+le+'" is invalid for option "size"');return le=new Uint8Array(le),Object.setPrototypeOf(le,d.prototype),le}function d(le,V,ge){if("number"!=typeof le)return f(le,V,ge);if("string"==typeof V)throw new TypeError('The "string" argument must be of type string. Received type number');return p(le)}function f(le,V,ge){if("string"==typeof le){var Le=le,Ke=V;if(d.isEncoding(Ke="string"==typeof Ke&&""!==Ke?Ke:"utf8"))return(Le=(_t=D(ut=0|x(Le,Ke))).write(Le,Ke))!==ut?_t.slice(0,Le):_t;throw new TypeError("Unknown encoding: "+Ke)}if(ArrayBuffer.isView(le))return m(le);if(null!=le){if(he(le,ArrayBuffer)||le&&he(le.buffer,ArrayBuffer)){var ut=le,_t=ge;if((Le=V)<0||ut.byteLength<Le)throw new RangeError('"offset" is outside of buffer bounds');if(ut.byteLength<Le+(_t||0))throw new RangeError('"length" is outside of buffer bounds');return ut=void 0===Le&&void 0===_t?new Uint8Array(ut):void 0===_t?new Uint8Array(ut,Le):new Uint8Array(ut,Le,_t),Object.setPrototypeOf(ut,d.prototype),ut}if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(Ke=le.valueOf&&le.valueOf())&&Ke!==le)return d.from(Ke,V,ge);var Nt=d.isBuffer(dt=le)?(0!==(Bt=D(Rt=0|g(dt.length))).length&&dt.copy(Bt,0,0,Rt),Bt):void 0!==dt.length?"number"!=typeof dt.length||Ce(dt.length)?D(0):m(dt):"Buffer"===dt.type&&Array.isArray(dt.data)?m(dt.data):void 0;if(Nt)return Nt;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return d.from(le[Symbol.toPrimitive]("string"),V,ge)}var dt,Rt,Bt;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function h(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function p(le){return h(le),D(le<0?0:0|g(le))}function m(le){for(var V=le.length<0?0:0|g(le.length),ge=D(V),Le=0;Le<V;Le+=1)ge[Le]=255&le[Le];return ge}function g(le){if(I<=le)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return 0|le}function x(le,V){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||he(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var ge=le.length,Le=2<arguments.length&&!0===arguments[2];if(!Le&&0===ge)return 0;for(var Ke=!1;;)switch(V){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return me(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ge;case"hex":return ge>>>1;case"base64":return ne(le).length;default:if(Ke)return Le?-1:me(le).length;V=(""+V).toLowerCase(),Ke=!0}}function E(le,V,ge){var Le,Ke=!1;if((V=void 0===V||V<0?0:V)>this.length||(ge=void 0===ge||ge>this.length?this.length:ge)<=0||(ge>>>=0)<=(V>>>=0))return"";for(le=le||"utf8";;)switch(le){case"hex":var _t=ge,Bt=this.length;(!_t||_t<0||Bt<_t)&&(_t=Bt);for(var Nt="",dt=vt=!(vt=V)||vt<0?0:vt;dt<_t;++dt)Nt+=et[this[dt]];return Nt;case"utf8":case"utf-8":return z(this,V,ge);case"ascii":var lt=(Bt=V,ge),It="";lt=Math.min(this.length,lt);for(var Tt=Bt;Tt<lt;++Tt)It+=String.fromCharCode(127&this[Tt]);return It;case"latin1":case"binary":var vt=V,Gt=ge,hn="";Gt=Math.min(this.length,Gt);for(var $n=vt;$n<Gt;++$n)hn+=String.fromCharCode(this[$n]);return hn;case"base64":return bn=this,Le=ge,0===(Xn=V)&&Le===bn.length?A.fromByteArray(bn):A.fromByteArray(bn.slice(Xn,Le));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var bn=V,Xn=ge,Mn=this.slice(bn,Xn),gr="",Ln=0;Ln<Mn.length;Ln+=2)gr+=String.fromCharCode(Mn[Ln]+256*Mn[Ln+1]);return gr;default:if(Ke)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ke=!0}}function S(le,V,ge){var Le=le[V];le[V]=le[ge],le[ge]=Le}function k(le,V,ge,Le,Ke){if(0===le.length)return-1;if("string"==typeof ge?(Le=ge,ge=0):2147483647<ge?ge=2147483647:ge<-2147483648&&(ge=-2147483648),(ge=(ge=Ce(ge=+ge)?Ke?0:le.length-1:ge)<0?le.length+ge:ge)>=le.length){if(Ke)return-1;ge=le.length-1}else if(ge<0){if(!Ke)return-1;ge=0}if("string"==typeof V&&(V=d.from(V,Le)),d.isBuffer(V))return 0===V.length?-1:X(le,V,ge,Le,Ke);if("number"==typeof V)return V&=255,"function"==typeof Uint8Array.prototype.indexOf?(Ke?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(le,V,ge):X(le,[V],ge,Le,Ke);throw new TypeError("val must be string, number or Buffer")}function X(le,V,ge,Le,Ke){var ut=1,_t=le.length,Nt=V.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(le.length<2||V.length<2)return-1;_t/=ut=2,Nt/=2,ge/=2}function dt(Tt,Ot){return 1===ut?Tt[Ot]:Tt.readUInt16BE(Ot*ut)}if(Ke)for(var Rt=-1,Bt=ge;Bt<_t;Bt++)if(dt(le,Bt)===dt(V,-1===Rt?0:Bt-Rt)){if(Bt-(Rt=-1===Rt?Bt:Rt)+1===Nt)return Rt*ut}else-1!==Rt&&(Bt-=Bt-Rt),Rt=-1;else for(Bt=ge=_t<ge+Nt?_t-Nt:ge;0<=Bt;Bt--){for(var lt=!0,It=0;It<Nt;It++)if(dt(le,Bt+It)!==dt(V,It)){lt=!1;break}if(lt)return Bt}return-1}function Y(le,V,ge,Le){return J(function(Ke){for(var ut=[],_t=0;_t<Ke.length;++_t)ut.push(255&Ke.charCodeAt(_t));return ut}(V),le,ge,Le)}function G(le,V,ge,Le){return J(function(Ke,ut){for(var _t,Nt,dt=[],Rt=0;Rt<Ke.length&&!((ut-=2)<0);++Rt)_t=(Nt=Ke.charCodeAt(Rt))>>8,dt.push(Nt%=256),dt.push(_t);return dt}(V,le.length-ge),le,ge,Le)}function z(le,V,ge){ge=Math.min(le.length,ge);for(var Le=[],Ke=V;Ke<ge;){var ut,_t,Nt,dt,Rt=le[Ke],Bt=null,lt=239<Rt?4:223<Rt?3:191<Rt?2:1;if(Ke+lt<=ge)switch(lt){case 1:Rt<128&&(Bt=Rt);break;case 2:128==(192&(ut=le[Ke+1]))&&127<(dt=(31&Rt)<<6|63&ut)&&(Bt=dt);break;case 3:_t=le[Ke+2],128==(192&(ut=le[Ke+1]))&&128==(192&_t)&&2047<(dt=(15&Rt)<<12|(63&ut)<<6|63&_t)&&(dt<55296||57343<dt)&&(Bt=dt);break;case 4:_t=le[Ke+2],Nt=le[Ke+3],128==(192&(ut=le[Ke+1]))&&128==(192&_t)&&128==(192&Nt)&&65535<(dt=(15&Rt)<<18|(63&ut)<<12|(63&_t)<<6|63&Nt)&&dt<1114112&&(Bt=dt)}null===Bt?(Bt=65533,lt=1):65535<Bt&&(Le.push((Bt-=65536)>>>10&1023|55296),Bt=56320|1023&Bt),Le.push(Bt),Ke+=lt}var It=Le,Tt=It.length;if(Tt<=ee)return String.fromCharCode.apply(String,It);for(var Ot="",vt=0;vt<Tt;)Ot+=String.fromCharCode.apply(String,It.slice(vt,vt+=ee));return Ot}K.kMaxLength=I,(d.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(le,V),42===le.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=f,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(le,V,ge){return h(le),le<=0||void 0===V?D(le):"string"==typeof ge?D(le).fill(V,ge):D(le).fill(V)},d.allocUnsafe=p,d.allocUnsafeSlow=p,d.isBuffer=function(le){return null!=le&&!0===le._isBuffer&&le!==d.prototype},d.compare=function(le,V){if(he(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),he(V,Uint8Array)&&(V=d.from(V,V.offset,V.byteLength)),!d.isBuffer(le)||!d.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===V)return 0;for(var ge=le.length,Le=V.length,Ke=0,ut=Math.min(ge,Le);Ke<ut;++Ke)if(le[Ke]!==V[Ke]){ge=le[Ke],Le=V[Ke];break}return ge<Le?-1:Le<ge?1:0},d.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(le,V){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return d.alloc(0);if(void 0===V)for(Ke=V=0;Ke<le.length;++Ke)V+=le[Ke].length;for(var ge=d.allocUnsafe(V),Le=0,Ke=0;Ke<le.length;++Ke){var ut=le[Ke];if(he(ut,Uint8Array)&&(ut=d.from(ut)),!d.isBuffer(ut))throw new TypeError('"list" argument must be an Array of Buffers');ut.copy(ge,Le),Le+=ut.length}return ge},d.byteLength=x,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<le;V+=2)S(this,V,V+1);return this},d.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<le;V+=4)S(this,V,V+3),S(this,V+1,V+2);return this},d.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<le;V+=8)S(this,V,V+7),S(this,V+1,V+6),S(this,V+2,V+5),S(this,V+3,V+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var le=this.length;return 0===le?"":0===arguments.length?z(this,0,le):E.apply(this,arguments)},d.prototype.equals=function(le){if(d.isBuffer(le))return this===le||0===d.compare(this,le);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var V="",le=K.INSPECT_MAX_BYTES;return V=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(V+=" ... "),"<Buffer "+V+">"},w&&(d.prototype[w]=d.prototype.inspect),d.prototype.compare=function(le,V,ge,Le,Ke){if(he(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),!d.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(void 0===ge&&(ge=le?le.length:0),void 0===Le&&(Le=0),void 0===Ke&&(Ke=this.length),(V=void 0===V?0:V)<0||ge>le.length||Le<0||Ke>this.length)throw new RangeError("out of range index");if(Ke<=Le&&ge<=V)return 0;if(Ke<=Le)return-1;if(ge<=V)return 1;if(this===le)return 0;for(var ut=(Ke>>>=0)-(Le>>>=0),_t=(ge>>>=0)-(V>>>=0),Nt=Math.min(ut,_t),dt=this.slice(Le,Ke),Rt=le.slice(V,ge),Bt=0;Bt<Nt;++Bt)if(dt[Bt]!==Rt[Bt]){ut=dt[Bt],_t=Rt[Bt];break}return ut<_t?-1:_t<ut?1:0},d.prototype.includes=function(le,V,ge){return-1!==this.indexOf(le,V,ge)},d.prototype.indexOf=function(le,V,ge){return k(this,le,V,ge,!0)},d.prototype.lastIndexOf=function(le,V,ge){return k(this,le,V,ge,!1)},d.prototype.write=function(le,V,ge,Le){if(void 0===V)Le="utf8",ge=this.length,V=0;else if(void 0===ge&&"string"==typeof V)Le=V,ge=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(ge)?(ge>>>=0,void 0===Le&&(Le="utf8")):(Le=ge,ge=void 0)}var Ke=this.length-V;if((void 0===ge||Ke<ge)&&(ge=Ke),0<le.length&&(ge<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Le=Le||"utf8";for(var ut,_t,Nt,dt=!1;;)switch(Le){case"hex":var Bt=le,lt=V,It=ge,Tt=(lt=Number(lt)||0,this.length-lt);(!It||Tt<(It=Number(It)))&&(It=Tt),(Tt=Bt.length)/2<It&&(It=Tt/2);for(var Ot=0;Ot<It;++Ot){var vt=parseInt(Bt.substr(2*Ot,2),16);if(Ce(vt))return Ot;this[lt+Ot]=vt}return Ot;case"utf8":case"utf-8":return Nt=ge,J(me(le,(_t=this).length-(Tt=V)),_t,Tt,Nt);case"ascii":case"latin1":case"binary":return Y(this,le,V,ge);case"base64":return _t=this,Nt=V,ut=ge,J(ne(le),_t,Nt,ut);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,le,V,ge);default:if(dt)throw new TypeError("Unknown encoding: "+Le);Le=(""+Le).toLowerCase(),dt=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;function H(le,V,ge){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(ge<le+V)throw new RangeError("Trying to access beyond buffer length")}function re(le,V,ge,Le,Ke,ut){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ke<V||V<ut)throw new RangeError('"value" argument is out of bounds');if(ge+Le>le.length)throw new RangeError("Index out of range")}function Z(le,V,ge,Le){if(ge+Le>le.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function _e(le,V,ge,Le,Ke){return V=+V,ge>>>=0,Ke||Z(le,0,ge,4),b.write(le,V,ge,Le,23,4),ge+4}function xe(le,V,ge,Le,Ke){return V=+V,ge>>>=0,Ke||Z(le,0,ge,8),b.write(le,V,ge,Le,52,8),ge+8}d.prototype.slice=function(le,V){var ge=this.length;return(le=~~le)<0?(le+=ge)<0&&(le=0):ge<le&&(le=ge),(V=void 0===V?ge:~~V)<0?(V+=ge)<0&&(V=0):ge<V&&(V=ge),V<le&&(V=le),ge=this.subarray(le,V),Object.setPrototypeOf(ge,d.prototype),ge},d.prototype.readUIntLE=function(le,V,ge){le>>>=0,V>>>=0,ge||H(le,V,this.length);for(var Le=this[le],Ke=1,ut=0;++ut<V&&(Ke*=256);)Le+=this[le+ut]*Ke;return Le},d.prototype.readUIntBE=function(le,V,ge){le>>>=0,V>>>=0,ge||H(le,V,this.length);for(var Le=this[le+--V],Ke=1;0<V&&(Ke*=256);)Le+=this[le+--V]*Ke;return Le},d.prototype.readUInt8=function(le,V){return le>>>=0,V||H(le,1,this.length),this[le]},d.prototype.readUInt16LE=function(le,V){return le>>>=0,V||H(le,2,this.length),this[le]|this[le+1]<<8},d.prototype.readUInt16BE=function(le,V){return le>>>=0,V||H(le,2,this.length),this[le]<<8|this[le+1]},d.prototype.readUInt32LE=function(le,V){return le>>>=0,V||H(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},d.prototype.readUInt32BE=function(le,V){return le>>>=0,V||H(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},d.prototype.readIntLE=function(le,V,ge){le>>>=0,V>>>=0,ge||H(le,V,this.length);for(var Le=this[le],Ke=1,ut=0;++ut<V&&(Ke*=256);)Le+=this[le+ut]*Ke;return(Ke*=128)<=Le&&(Le-=Math.pow(2,8*V)),Le},d.prototype.readIntBE=function(le,V,ge){le>>>=0,V>>>=0,ge||H(le,V,this.length);for(var Le=V,Ke=1,ut=this[le+--Le];0<Le&&(Ke*=256);)ut+=this[le+--Le]*Ke;return(Ke*=128)<=ut&&(ut-=Math.pow(2,8*V)),ut},d.prototype.readInt8=function(le,V){return le>>>=0,V||H(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},d.prototype.readInt16LE=function(le,V){return le>>>=0,V||H(le,2,this.length),32768&(V=this[le]|this[le+1]<<8)?4294901760|V:V},d.prototype.readInt16BE=function(le,V){return le>>>=0,V||H(le,2,this.length),32768&(V=this[le+1]|this[le]<<8)?4294901760|V:V},d.prototype.readInt32LE=function(le,V){return le>>>=0,V||H(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},d.prototype.readInt32BE=function(le,V){return le>>>=0,V||H(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},d.prototype.readFloatLE=function(le,V){return le>>>=0,V||H(le,4,this.length),b.read(this,le,!0,23,4)},d.prototype.readFloatBE=function(le,V){return le>>>=0,V||H(le,4,this.length),b.read(this,le,!1,23,4)},d.prototype.readDoubleLE=function(le,V){return le>>>=0,V||H(le,8,this.length),b.read(this,le,!0,52,8)},d.prototype.readDoubleBE=function(le,V){return le>>>=0,V||H(le,8,this.length),b.read(this,le,!1,52,8)},d.prototype.writeUIntLE=function(le,V,ge,Le){le=+le,V>>>=0,ge>>>=0,Le||re(this,le,V,ge,Math.pow(2,8*ge)-1,0);var Ke=1,ut=0;for(this[V]=255&le;++ut<ge&&(Ke*=256);)this[V+ut]=le/Ke&255;return V+ge},d.prototype.writeUIntBE=function(le,V,ge,Le){le=+le,V>>>=0,ge>>>=0,Le||re(this,le,V,ge,Math.pow(2,8*ge)-1,0);var Ke=ge-1,ut=1;for(this[V+Ke]=255&le;0<=--Ke&&(ut*=256);)this[V+Ke]=le/ut&255;return V+ge},d.prototype.writeUInt8=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,1,255,0),this[V]=255&le,V+1},d.prototype.writeUInt16LE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,2,65535,0),this[V]=255&le,this[V+1]=le>>>8,V+2},d.prototype.writeUInt16BE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,2,65535,0),this[V]=le>>>8,this[V+1]=255&le,V+2},d.prototype.writeUInt32LE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,4,4294967295,0),this[V+3]=le>>>24,this[V+2]=le>>>16,this[V+1]=le>>>8,this[V]=255&le,V+4},d.prototype.writeUInt32BE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,4,4294967295,0),this[V]=le>>>24,this[V+1]=le>>>16,this[V+2]=le>>>8,this[V+3]=255&le,V+4},d.prototype.writeIntLE=function(le,V,ge,Le){le=+le,V>>>=0,Le||re(this,le,V,ge,(Le=Math.pow(2,8*ge-1))-1,-Le);var Ke=0,ut=1,_t=0;for(this[V]=255&le;++Ke<ge&&(ut*=256);)le<0&&0===_t&&0!==this[V+Ke-1]&&(_t=1),this[V+Ke]=(le/ut|0)-_t&255;return V+ge},d.prototype.writeIntBE=function(le,V,ge,Le){le=+le,V>>>=0,Le||re(this,le,V,ge,(Le=Math.pow(2,8*ge-1))-1,-Le);var Ke=ge-1,ut=1,_t=0;for(this[V+Ke]=255&le;0<=--Ke&&(ut*=256);)le<0&&0===_t&&0!==this[V+Ke+1]&&(_t=1),this[V+Ke]=(le/ut|0)-_t&255;return V+ge},d.prototype.writeInt8=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,1,127,-128),this[V]=255&(le=le<0?255+le+1:le),V+1},d.prototype.writeInt16LE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,2,32767,-32768),this[V]=255&le,this[V+1]=le>>>8,V+2},d.prototype.writeInt16BE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,2,32767,-32768),this[V]=le>>>8,this[V+1]=255&le,V+2},d.prototype.writeInt32LE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,4,2147483647,-2147483648),this[V]=255&le,this[V+1]=le>>>8,this[V+2]=le>>>16,this[V+3]=le>>>24,V+4},d.prototype.writeInt32BE=function(le,V,ge){return le=+le,V>>>=0,ge||re(this,le,V,4,2147483647,-2147483648),this[V]=(le=le<0?4294967295+le+1:le)>>>24,this[V+1]=le>>>16,this[V+2]=le>>>8,this[V+3]=255&le,V+4},d.prototype.writeFloatLE=function(le,V,ge){return _e(this,le,V,!0,ge)},d.prototype.writeFloatBE=function(le,V,ge){return _e(this,le,V,!1,ge)},d.prototype.writeDoubleLE=function(le,V,ge){return xe(this,le,V,!0,ge)},d.prototype.writeDoubleBE=function(le,V,ge){return xe(this,le,V,!1,ge)},d.prototype.copy=function(le,V,ge,Le){if(!d.isBuffer(le))throw new TypeError("argument should be a Buffer");if(ge=ge||0,Le||0===Le||(Le=this.length),V>=le.length&&(V=le.length),(Le=0<Le&&Le<ge?ge:Le)===ge||0===le.length||0===this.length)return 0;if((V=V||0)<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("sourceEnd out of bounds");Le>this.length&&(Le=this.length);var Ke=(Le=le.length-V<Le-ge?le.length-V+ge:Le)-ge;if(this===le&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(V,ge,Le);else if(this===le&&ge<V&&V<Le)for(var ut=Ke-1;0<=ut;--ut)le[ut+V]=this[ut+ge];else Uint8Array.prototype.set.call(le,this.subarray(ge,Le),V);return Ke},d.prototype.fill=function(le,V,ge,Le){if("string"==typeof le){if("string"==typeof V?(Le=V,V=0,ge=this.length):"string"==typeof ge&&(Le=ge,ge=this.length),void 0!==Le&&"string"!=typeof Le)throw new TypeError("encoding must be a string");if("string"==typeof Le&&!d.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);var Ke;1===le.length&&(Ke=le.charCodeAt(0),("utf8"===Le&&Ke<128||"latin1"===Le)&&(le=Ke))}else"number"==typeof le?le&=255:"boolean"==typeof le&&(le=Number(le));if(V<0||this.length<V||this.length<ge)throw new RangeError("Out of range index");var ut;if(!(ge<=V))if(V>>>=0,ge=void 0===ge?this.length:ge>>>0,"number"==typeof(le=le||0))for(ut=V;ut<ge;++ut)this[ut]=le;else{var _t=d.isBuffer(le)?le:d.from(le,Le),Nt=_t.length;if(0===Nt)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(ut=0;ut<ge-V;++ut)this[ut+V]=_t[ut%Nt]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function me(le,V){V=V||1/0;for(var ge,Le=le.length,Ke=null,ut=[],_t=0;_t<Le;++_t){if(55295<(ge=le.charCodeAt(_t))&&ge<57344){if(!Ke){if(56319<ge){-1<(V-=3)&&ut.push(239,191,189);continue}if(_t+1===Le){-1<(V-=3)&&ut.push(239,191,189);continue}Ke=ge;continue}if(ge<56320){-1<(V-=3)&&ut.push(239,191,189),Ke=ge;continue}ge=65536+(Ke-55296<<10|ge-56320)}else Ke&&-1<(V-=3)&&ut.push(239,191,189);if(Ke=null,ge<128){if(--V<0)break;ut.push(ge)}else if(ge<2048){if((V-=2)<0)break;ut.push(ge>>6|192,63&ge|128)}else if(ge<65536){if((V-=3)<0)break;ut.push(ge>>12|224,ge>>6&63|128,63&ge|128)}else{if(!(ge<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;ut.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,63&ge|128)}}return ut}function ne(le){return A.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(le))}function J(le,V,ge,Le){for(var Ke=0;Ke<Le&&!(Ke+ge>=V.length||Ke>=le.length);++Ke)V[Ke+ge]=le[Ke];return Ke}function he(le,V){return le instanceof V||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===V.name}function Ce(le){return le!=le}var et=function(){for(var le="0123456789abcdef",V=new Array(256),ge=0;ge<16;++ge)for(var Le=16*ge,Ke=0;Ke<16;++Ke)V[Le+Ke]=le[ge]+le[Ke];return V}()}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(l,ve,K){ve.exports=function(M){if("function"!=typeof M)throw TypeError(String(M)+" is not a function");return M}},{}],6:[function(l,ve,K){var M=l("../internals/is-object");ve.exports=function(A){if(M(A)||null===A)return A;throw TypeError("Can't set "+String(A)+" as a prototype")}},{"../internals/is-object":75}],7:[function(b,ve,K){var M=b("../internals/well-known-symbol"),A=b("../internals/object-create"),w=(b=b("../internals/object-define-property"),M("unscopables")),I=Array.prototype;null==I[w]&&b.f(I,w,{configurable:!0,value:A(null)}),ve.exports=function(D){I[w][D]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(l,ve,K){"use strict";var M=l("../internals/string-multibyte").charAt;ve.exports=function(A,b,w){return b+(w?M(A,b).length:1)}},{"../internals/string-multibyte":125}],9:[function(l,ve,K){ve.exports=function(M,A,b){if(M instanceof A)return M;throw TypeError("Incorrect "+(b?b+" ":"")+"invocation")}},{}],10:[function(l,ve,K){var M=l("../internals/is-object");ve.exports=function(A){if(M(A))return A;throw TypeError(String(A)+" is not an object")}},{"../internals/is-object":75}],11:[function(l,ve,K){ve.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(Z,ve,K){"use strict";function M(xe){return D(xe)&&d(_e,f(xe))}var A,b=Z("../internals/array-buffer-native"),w=Z("../internals/descriptors"),I=Z("../internals/global"),D=Z("../internals/is-object"),d=Z("../internals/has"),f=Z("../internals/classof"),h=Z("../internals/create-non-enumerable-property"),p=Z("../internals/redefine"),m=Z("../internals/object-define-property").f,g=Z("../internals/object-get-prototype-of"),x=Z("../internals/object-set-prototype-of"),ee=Z("../internals/well-known-symbol"),E=(Z=Z("../internals/uid"),I.Int8Array),S=E&&E.prototype,k=(k=I.Uint8ClampedArray)&&k.prototype,X=E&&g(E),Y=S&&g(S),G=Object.prototype,z=G.isPrototypeOf,H=(ee=ee("toStringTag"),Z("TYPED_ARRAY_TAG")),re=b&&!!x&&"Opera"!==f(I.opera),_e=(Z=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(A in _e)I[A]||(re=!1);if((!re||"function"!=typeof X||X===Function.prototype)&&(X=function(){throw TypeError("Incorrect invocation")},re))for(A in _e)I[A]&&x(I[A],X);if((!re||!Y||Y===G)&&(Y=X.prototype,re))for(A in _e)I[A]&&x(I[A].prototype,Y);if(re&&g(k)!==Y&&x(k,Y),w&&!d(Y,ee))for(A in Z=!0,m(Y,ee,{get:function(){return D(this)?this[H]:void 0}}),_e)I[A]&&h(I[A],H,A);ve.exports={NATIVE_ARRAY_BUFFER_VIEWS:re,TYPED_ARRAY_TAG:Z&&H,aTypedArray:function(xe){if(M(xe))return xe;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(xe){if(x){if(z.call(X,xe))return xe}else for(var oe in _e)if(d(_e,A)&&(oe=I[oe])&&(xe===oe||z.call(oe,xe)))return xe;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(xe,oe,me){if(w){if(me)for(var ne in _e)(ne=I[ne])&&d(ne.prototype,xe)&&delete ne.prototype[xe];Y[xe]&&!me||p(Y,xe,!me&&re&&S[xe]||oe)}},exportTypedArrayStaticMethod:function(xe,oe,me){var ne,J;if(w){if(x){if(me)for(ne in _e)(J=I[ne])&&d(J,xe)&&delete J[xe];if(X[xe]&&!me)return;try{return p(X,xe,!me&&re&&E[xe]||oe)}catch{}}for(ne in _e)!(J=I[ne])||J[xe]&&!me||p(J,xe,oe)}},isView:function(xe){return"DataView"===(xe=f(xe))||d(_e,xe)},isTypedArray:M,TypedArray:X,TypedArrayPrototype:Y}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(ge,ve,K){"use strict";function M(lt){return[255&lt]}function A(lt){return[255&lt,lt>>8&255]}function b(lt){return[255&lt,lt>>8&255,lt>>16&255,lt>>24&255]}function w(lt){return lt[3]<<24|lt[2]<<16|lt[1]<<8|lt[0]}function I(lt){return ut(lt,23,4)}function D(lt){return ut(lt,52,8)}function d(lt,It){Z(lt[he],It,{get:function(){return oe(this)[It]}})}function f(hn,It,Gt,Ot){if((Gt=G(Gt))+It>(hn=oe(hn)).byteLength)throw Ke(Ce);return hn=oe(hn.buffer).bytes.slice(Gt+=hn.byteOffset,Gt+It),Ot?hn:hn.reverse()}function h(lt,It,Tt,Ot,vt,Gt){if((Tt=G(Tt))+It>(lt=oe(lt)).byteLength)throw Ke(Ce);for(var hn=oe(lt.buffer).bytes,$n=Tt+lt.byteOffset,bn=Ot(+vt),Xn=0;Xn<It;Xn++)hn[$n+Xn]=bn[Gt?Xn:It-Xn-1]}var p=ge("../internals/global"),m=ge("../internals/descriptors"),g=ge("../internals/array-buffer-native"),x=ge("../internals/create-non-enumerable-property"),E=ge("../internals/redefine-all"),S=ge("../internals/fails"),k=ge("../internals/an-instance"),X=ge("../internals/to-integer"),Y=ge("../internals/to-length"),G=ge("../internals/to-index"),z=ge("../internals/ieee754"),ee=ge("../internals/object-get-prototype-of"),H=ge("../internals/object-set-prototype-of"),re=ge("../internals/object-get-own-property-names").f,Z=ge("../internals/object-define-property").f,_e=ge("../internals/array-fill"),xe=ge("../internals/set-to-string-tag"),oe=(ge=ge("../internals/internal-state")).get,me=ge.set,ne="ArrayBuffer",J="DataView",he="prototype",Ce="Wrong index",et=p[ne],le=et,V=p[J],Le=(ge=V&&V[he],Object.prototype),Ke=p.RangeError,ut=z.pack,_t=z.unpack;if(g){if(!S(function(){et(1)})||!S(function(){new et(-1)})||S(function(){return new et,new et(1.5),new et(NaN),et.name!=ne})){p=(le=function(Tt){return k(this,le),new et(G(Tt))})[he]=et[he];for(var Nt,dt=re(et),Rt=0;dt.length>Rt;)(Nt=dt[Rt++])in le||x(le,Nt,et[Nt]);p.constructor=le}H&&ee(ge)!==Le&&H(ge,Le),z=new V(new le(2));var Bt=ge.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||E(ge,{setInt8:function(It,Tt){Bt.call(this,It,Tt<<24>>24)},setUint8:function(It,Tt){Bt.call(this,It,Tt<<24>>24)}},{unsafe:!0})}else le=function(lt){k(this,le,ne),lt=G(lt),me(this,{bytes:_e.call(new Array(lt),0),byteLength:lt}),m||(this.byteLength=lt)},V=function(lt,vt,Tt){k(this,V,J),k(lt,le,J);var Ot=oe(lt).byteLength;if((vt=X(vt))<0||Ot<vt)throw Ke("Wrong offset");if(Ot<vt+(Tt=void 0===Tt?Ot-vt:Y(Tt)))throw Ke("Wrong length");me(this,{buffer:lt,byteLength:Tt,byteOffset:vt}),m||(this.buffer=lt,this.byteLength=Tt,this.byteOffset=vt)},m&&(d(le,"byteLength"),d(V,"buffer"),d(V,"byteLength"),d(V,"byteOffset")),E(V[he],{getInt8:function(lt){return f(this,1,lt)[0]<<24>>24},getUint8:function(lt){return f(this,1,lt)[0]},getInt16:function(lt){return((lt=f(this,2,lt,1<arguments.length?arguments[1]:void 0))[1]<<8|lt[0])<<16>>16},getUint16:function(lt){return(lt=f(this,2,lt,1<arguments.length?arguments[1]:void 0))[1]<<8|lt[0]},getInt32:function(lt){return w(f(this,4,lt,1<arguments.length?arguments[1]:void 0))},getUint32:function(lt){return w(f(this,4,lt,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(lt){return _t(f(this,4,lt,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(lt){return _t(f(this,8,lt,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(lt,It){h(this,1,lt,M,It)},setUint8:function(lt,It){h(this,1,lt,M,It)},setInt16:function(lt,It){h(this,2,lt,A,It,2<arguments.length?arguments[2]:void 0)},setUint16:function(lt,It){h(this,2,lt,A,It,2<arguments.length?arguments[2]:void 0)},setInt32:function(lt,It){h(this,4,lt,b,It,2<arguments.length?arguments[2]:void 0)},setUint32:function(lt,It){h(this,4,lt,b,It,2<arguments.length?arguments[2]:void 0)},setFloat32:function(lt,It){h(this,4,lt,I,It,2<arguments.length?arguments[2]:void 0)},setFloat64:function(lt,It){h(this,8,lt,D,It,2<arguments.length?arguments[2]:void 0)}});xe(le,ne),xe(V,J),ve.exports={ArrayBuffer:le,DataView:V}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(l,ve,K){"use strict";var M=l("../internals/to-object"),A=l("../internals/to-absolute-index"),b=l("../internals/to-length"),w=Math.min;ve.exports=[].copyWithin||function(m,D){var d=M(this),f=b(d.length),h=A(m,f),p=A(D,f),g=w((void 0===(m=2<arguments.length?arguments[2]:void 0)?f:A(m,f))-p,f-h),x=1;for(p<h&&h<p+g&&(x=-1,p+=g-1,h+=g-1);0<g--;)p in d?d[h]=d[p]:delete d[h],h+=x,p+=x;return d}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(l,ve,K){"use strict";var M=l("../internals/to-object"),A=l("../internals/to-absolute-index"),b=l("../internals/to-length");ve.exports=function(w){for(var f,I=M(this),D=b(I.length),d=A(1<(f=arguments.length)?arguments[1]:void 0,D),h=void 0===(f=2<f?arguments[2]:void 0)?D:A(f,D);d<h;)I[d++]=w;return I}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(b,ve,K){"use strict";var M=b("../internals/array-iteration").forEach,A=b("../internals/array-method-is-strict");b=b("../internals/array-method-uses-to-length"),A=A("forEach"),b=b("forEach"),ve.exports=A&&b?[].forEach:function(w){return M(this,w,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(l,ve,K){"use strict";var M=l("../internals/function-bind-context"),A=l("../internals/to-object"),b=l("../internals/call-with-safe-iteration-closing"),w=l("../internals/is-array-iterator-method"),I=l("../internals/to-length"),D=l("../internals/create-property"),d=l("../internals/get-iterator-method");ve.exports=function(k){var h,p,m,g,x,E,S=A(k),X=(k="function"==typeof this?this:Array,arguments.length),Y=1<X?arguments[1]:void 0,G=void 0!==Y,z=d(S),ee=0;if(G&&(Y=M(Y,2<X?arguments[2]:void 0,2)),null==z||k==Array&&w(z))for(p=new k(h=I(S.length));ee<h;ee++)E=G?Y(S[ee],ee):S[ee],D(p,ee,E);else for(x=(g=z.call(S)).next,p=new k;!(m=x.call(g)).done;ee++)E=G?b(g,Y,[m.value,ee],!0):m.value,D(p,ee,E);return p.length=ee,p}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(l,ve,K){function M(I){return function(D,d,f){var h,p=A(D),m=b(p.length),g=w(f,m);if(I&&d!=d){for(;g<m;)if((h=p[g++])!=h)return!0}else for(;g<m;g++)if((I||g in p)&&p[g]===d)return I||g||0;return!I&&-1}}var A=l("../internals/to-indexed-object"),b=l("../internals/to-length"),w=l("../internals/to-absolute-index");ve.exports={includes:M(!0),indexOf:M(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(l,ve,K){function M(f){var h=1==f,p=2==f,m=3==f,g=4==f,x=6==f,E=5==f||x;return function(S,k,X,Y){for(var G,z,ee=w(S),H=b(ee),re=A(k,X,3),Z=I(H.length),_e=0,xe=(k=Y||D,h?k(S,Z):p?k(S,0):void 0);_e<Z;_e++)if((E||_e in H)&&(z=re(G=H[_e],_e,ee),f))if(h)xe[_e]=z;else if(z)switch(f){case 3:return!0;case 5:return G;case 6:return _e;case 2:d.call(xe,G)}else if(g)return!1;return x?-1:m||g?g:xe}}var A=l("../internals/function-bind-context"),b=l("../internals/indexed-object"),w=l("../internals/to-object"),I=l("../internals/to-length"),D=l("../internals/array-species-create"),d=[].push;ve.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(f,ve,K){"use strict";var M=f("../internals/to-indexed-object"),A=f("../internals/to-integer"),b=f("../internals/to-length"),d=f("../internals/array-method-is-strict"),w=(f=f("../internals/array-method-uses-to-length"),Math.min),I=[].lastIndexOf,D=!!I&&1/[1].lastIndexOf(1,-0)<0;d=d("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0}),ve.exports=!D&&d&&f?I:function(h){if(D)return I.apply(this,arguments)||0;var p=M(this),m=b(p.length),g=m-1;for((g=1<arguments.length?w(g,A(arguments[1])):g)<0&&(g=m+g);0<=g;g--)if(g in p&&p[g]===h)return g||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(l,ve,K){var M=l("../internals/fails"),A=l("../internals/well-known-symbol"),b=l("../internals/engine-v8-version"),w=A("species");ve.exports=function(I){return 51<=b||!M(function(){var D=[];return(D.constructor={})[w]=function(){return{foo:1}},1!==D[I](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(l,ve,K){"use strict";var M=l("../internals/fails");ve.exports=function(A,b){var w=[][A];return!!w&&M(function(){w.call(null,b||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(l,ve,K){function M(d){throw d}var A=l("../internals/descriptors"),b=l("../internals/fails"),w=l("../internals/has"),I=Object.defineProperty,D={};ve.exports=function(d,f){var h,p,m,g;return w(D,d)?D[d]:(h=[][d],p=!!w(f=f||{},"ACCESSORS")&&f.ACCESSORS,m=w(f,0)?f[0]:M,g=w(f,1)?f[1]:void 0,D[d]=!!h&&!b(function(){if(p&&!A)return!0;var x={length:-1};p?I(x,1,{enumerable:!0,get:M}):x[1]=1,h.call(x,m,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(l,ve,K){function M(D){return function(d,f,h,p){A(f);var m=b(d),g=w(m),x=I(m.length),E=D?x-1:0,S=D?-1:1;if(h<2)for(;;){if(E in g){p=g[E],E+=S;break}if(E+=S,D?E<0:x<=E)throw TypeError("Reduce of empty array with no initial value")}for(;D?0<=E:E<x;E+=S)E in g&&(p=f(p,g[E],E,m));return p}}var A=l("../internals/a-function"),b=l("../internals/to-object"),w=l("../internals/indexed-object"),I=l("../internals/to-length");ve.exports={left:M(!1),right:M(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(l,ve,K){var M=l("../internals/is-object"),A=l("../internals/is-array"),b=l("../internals/well-known-symbol")("species");ve.exports=function(w,I){var D;return new(void 0===(D=A(w)&&("function"==typeof(D=w.constructor)&&(D===Array||A(D.prototype))||M(D)&&null===(D=D[b]))?void 0:D)?Array:D)(0===I?0:I)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(l,ve,K){var M=l("../internals/an-object");ve.exports=function(A,b,w,I){try{return I?b(M(w)[0],w[1]):b(w)}catch(D){throw void 0!==(I=A.return)&&M(I.call(A)),D}}},{"../internals/an-object":10}],27:[function(l,ve,K){var M=l("../internals/well-known-symbol")("iterator"),A=!1;try{var b=0,w={next:function(){return{done:!!b++}},return:function(){A=!0}};w[M]=function(){return this},Array.from(w,function(){throw 2})}catch{}ve.exports=function(I,D){if(!D&&!A)return!1;var d=!1;try{var f={};f[M]=function(){return{next:function(){return{done:d=!0}}}},I(f)}catch{}return d}},{"../internals/well-known-symbol":150}],28:[function(l,ve,K){var M={}.toString;ve.exports=function(A){return M.call(A).slice(8,-1)}},{}],29:[function(l,ve,K){var M=l("../internals/to-string-tag-support"),A=l("../internals/classof-raw"),b=l("../internals/well-known-symbol")("toStringTag"),w="Arguments"==A(function(){return arguments}());ve.exports=M?A:function(I){var D;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(D=function(d,f){try{return d[f]}catch{}}(I=Object(I),b))?D:w?A(I):"Object"==(D=A(I))&&"function"==typeof I.callee?"Arguments":D}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(m,ve,K){"use strict";var M=m("../internals/object-define-property").f,A=m("../internals/object-create"),b=m("../internals/redefine-all"),w=m("../internals/function-bind-context"),I=m("../internals/an-instance"),D=m("../internals/iterate"),d=m("../internals/define-iterator"),f=m("../internals/set-species"),h=m("../internals/descriptors"),p=m("../internals/internal-metadata").fastKey,g=(m=m("../internals/internal-state")).set,x=m.getterFor;ve.exports={getConstructor:function(E,S,k,X){function Y(H,re,Z){var _e,xe=ee(H),oe=G(H,re);return oe?oe.value=Z:(xe.last=oe={index:_e=p(re,!0),key:re,value:Z,previous:re=xe.last,next:void 0,removed:!1},xe.first||(xe.first=oe),re&&(re.next=oe),h?xe.size++:H.size++,"F"!==_e&&(xe.index[_e]=oe)),H}function G(_e,re){_e=ee(_e);var Z,xe=p(re);if("F"!==xe)return _e.index[xe];for(Z=_e.first;Z;Z=Z.next)if(Z.key==re)return Z}var z=E(function(H,re){I(H,z,S),g(H,{type:S,index:A(null),first:void 0,last:void 0,size:0}),h||(H.size=0),null!=re&&D(re,H[X],H,k)}),ee=x(S);return b(z.prototype,{clear:function(){for(var H=ee(this),re=H.index,Z=H.first;Z;)Z.removed=!0,Z.previous&&(Z.previous=Z.previous.next=void 0),delete re[Z.index],Z=Z.next;H.first=H.last=void 0,h?H.size=0:this.size=0},delete:function(xe){var re,Z,_e=ee(this);return(xe=G(this,xe))&&(re=xe.next,Z=xe.previous,delete _e.index[xe.index],xe.removed=!0,Z&&(Z.next=re),re&&(re.previous=Z),_e.first==xe&&(_e.first=re),_e.last==xe&&(_e.last=Z),h?_e.size--:this.size--),!!xe},forEach:function(H){for(var re,Z=ee(this),_e=w(H,1<arguments.length?arguments[1]:void 0,3);re=re?re.next:Z.first;)for(_e(re.value,re.key,this);re&&re.removed;)re=re.previous},has:function(H){return!!G(this,H)}}),b(z.prototype,k?{get:function(H){return(H=G(this,H))&&H.value},set:function(H,re){return Y(this,0===H?0:H,re)}}:{add:function(H){return Y(this,H=0===H?0:H,H)}}),h&&M(z.prototype,"size",{get:function(){return ee(this).size}}),z},setStrong:function(E,S,k){var X=S+" Iterator",Y=x(S),G=x(X);d(E,S,function(z,ee){g(this,{type:X,target:z,state:Y(z),kind:ee,last:void 0})},function(){for(var z=G(this),ee=z.kind,H=z.last;H&&H.removed;)H=H.previous;return z.target&&(z.last=H=H?H.next:z.state.first)?"keys"==ee?{value:H.key,done:!1}:"values"==ee?{value:H.value,done:!1}:{value:[H.key,H.value],done:!1}:{value:z.target=void 0,done:!0}},k?"entries":"values",!k,!0),f(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(g,ve,K){"use strict";function M(Y){return Y.frozen||(Y.frozen=new A)}function A(){this.entries=[]}function b(Y,G){return S(Y.entries,function(z){return z[0]===G})}var w=g("../internals/redefine-all"),I=g("../internals/internal-metadata").getWeakData,D=g("../internals/an-object"),d=g("../internals/is-object"),f=g("../internals/an-instance"),h=g("../internals/iterate"),p=g("../internals/array-iteration"),m=g("../internals/has"),x=(g=g("../internals/internal-state")).set,E=g.getterFor,S=p.find,k=p.findIndex,X=0;A.prototype={get:function(Y){if(Y=b(this,Y))return Y[1]},has:function(Y){return!!b(this,Y)},set:function(Y,G){var z=b(this,Y);z?z[1]=G:this.entries.push([Y,G])},delete:function(Y){var G=k(this.entries,function(z){return z[0]===Y});return~G&&this.entries.splice(G,1),!!~G}},ve.exports={getConstructor:function(Y,G,z,ee){function H(_e,xe,oe){var me=Z(_e),ne=I(D(xe),!0);return!0===ne?M(me).set(xe,oe):ne[me.id]=oe,_e}var re=Y(function(_e,xe){f(_e,re,G),x(_e,{type:G,id:X++,frozen:void 0}),null!=xe&&h(xe,_e[ee],_e,z)}),Z=E(G);return w(re.prototype,{delete:function(_e){var xe,oe=Z(this);return!!d(_e)&&(!0===(xe=I(_e))?M(oe).delete(_e):xe&&m(xe,oe.id)&&delete xe[oe.id])},has:function(_e){var xe,oe=Z(this);return!!d(_e)&&(!0===(xe=I(_e))?M(oe).has(_e):xe&&m(xe,oe.id))}}),w(re.prototype,z?{get:function(_e){var xe,oe=Z(this);if(d(_e))return!0===(xe=I(_e))?M(oe).get(_e):xe?xe[oe.id]:void 0},set:function(_e,xe){return H(this,_e,xe)}}:{add:function(_e){return H(this,_e,!0)}}),re}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/global"),b=l("../internals/is-forced"),w=l("../internals/redefine"),I=l("../internals/internal-metadata"),D=l("../internals/iterate"),d=l("../internals/an-instance"),f=l("../internals/is-object"),h=l("../internals/fails"),p=l("../internals/check-correctness-of-iteration"),m=l("../internals/set-to-string-tag"),g=l("../internals/inherit-if-required");ve.exports=function(x,E,S){function k(ne){var J=xe[ne];w(xe,ne,"add"==ne?function(he){return J.call(this,0===he?0:he),this}:"delete"==ne?function(he){return!(re&&!f(he))&&J.call(this,0===he?0:he)}:"get"==ne?function(he){return re&&!f(he)?void 0:J.call(this,0===he?0:he)}:"has"==ne?function(he){return!(re&&!f(he))&&J.call(this,0===he?0:he)}:function(he,Ce){return J.call(this,0===he?0:he,Ce),this})}var X,Y,G,z,ee,H=-1!==x.indexOf("Map"),re=-1!==x.indexOf("Weak"),Z=H?"set":"add",_e=A[x],xe=_e&&_e.prototype,oe=_e,me={};return b(x,"function"!=typeof _e||!(re||xe.forEach&&!h(function(){(new _e).entries().next()})))?(oe=S.getConstructor(E,x,H,Z),I.REQUIRED=!0):b(x,!0)&&(Y=(X=new oe)[Z](re?{}:-0,1)!=X,G=h(function(){X.has(1)}),z=p(function(ne){new _e(ne)}),ee=!re&&h(function(){for(var ne=new _e,J=5;J--;)ne[Z](J,J);return!ne.has(-0)}),z||(((oe=E(function(ne,J){return d(ne,oe,x),ne=g(new _e,ne,oe),null!=J&&D(J,ne[Z],ne,H),ne})).prototype=xe).constructor=oe),(G||ee)&&(k("delete"),k("has"),H&&k("get")),(ee||Y)&&k(Z),re&&xe.clear&&delete xe.clear),me[x]=oe,M({global:!0,forced:oe!=_e},me),m(oe,x),re||S.setStrong(oe,x,H),oe}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(l,ve,K){var M=l("../internals/has"),A=l("../internals/own-keys"),b=l("../internals/object-get-own-property-descriptor"),w=l("../internals/object-define-property");ve.exports=function(I,D){for(var d=A(D),f=w.f,h=b.f,p=0;p<d.length;p++){var m=d[p];M(I,m)||f(I,m,h(D,m))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(l,ve,K){var M=l("../internals/well-known-symbol")("match");ve.exports=function(A){var b=/./;try{"/./"[A](b)}catch{try{return b[M]=!1,"/./"[A](b)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(l,ve,K){l=l("../internals/fails"),ve.exports=!l(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},{"../internals/fails":51}],36:[function(l,ve,K){var M=l("../internals/require-object-coercible"),A=/"/g;ve.exports=function(d,w,I,D){d=String(M(d));var f="<"+w;return""!==I&&(f+=" "+I+'="'+String(D).replace(A,"&quot;")+'"'),f+">"+d+"</"+w+">"}},{"../internals/require-object-coercible":115}],37:[function(l,ve,K){"use strict";function M(){return this}var A=l("../internals/iterators-core").IteratorPrototype,b=l("../internals/object-create"),w=l("../internals/create-property-descriptor"),I=l("../internals/set-to-string-tag"),D=l("../internals/iterators");ve.exports=function(d,f,h){return f+=" Iterator",d.prototype=b(A,{next:w(1,h)}),I(d,f,!1,!0),D[f]=M,d}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/object-define-property"),b=l("../internals/create-property-descriptor");ve.exports=M?function(w,I,D){return A.f(w,I,b(1,D))}:function(w,I,D){return w[I]=D,w}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(l,ve,K){ve.exports=function(M,A){return{enumerable:!(1&M),configurable:!(2&M),writable:!(4&M),value:A}}},{}],40:[function(l,ve,K){"use strict";var M=l("../internals/to-primitive"),A=l("../internals/object-define-property"),b=l("../internals/create-property-descriptor");ve.exports=function(w,I,D){(I=M(I))in w?A.f(w,I,b(0,D)):w[I]=D}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(g,ve,K){"use strict";function M(){return this}var A=g("../internals/export"),b=g("../internals/create-iterator-constructor"),w=g("../internals/object-get-prototype-of"),I=g("../internals/object-set-prototype-of"),D=g("../internals/set-to-string-tag"),d=g("../internals/create-non-enumerable-property"),f=g("../internals/redefine"),h=g("../internals/well-known-symbol"),p=g("../internals/is-pure"),m=g("../internals/iterators"),x=(g=g("../internals/iterators-core")).IteratorPrototype,E=g.BUGGY_SAFARI_ITERATORS,S=h("iterator"),k="values",X="entries";ve.exports=function(Y,G,z,me,H,re,Z){function _e(le){if(le===H&&Ce)return Ce;if(!E&&le in J)return J[le];switch(le){case"keys":case k:case X:return function(){return new z(this,le)}}return function(){return new z(this)}}b(z,G,me),me=G+" Iterator";var xe,oe,ne=!1,J=Y.prototype,he=J[S]||J["@@iterator"]||H&&J[H],Ce=!E&&he||_e(H),et="Array"==G&&J.entries||he;if(et&&(et=w(et.call(new Y)),x!==Object.prototype&&et.next&&(p||w(et)===x||(I?I(et,x):"function"!=typeof et[S]&&d(et,S,M)),D(et,me,!0,!0),p&&(m[me]=M))),H==k&&he&&he.name!==k&&(ne=!0,Ce=function(){return he.call(this)}),p&&!Z||J[S]===Ce||d(J,S,Ce),m[G]=Ce,H)if(xe={values:_e(k),keys:re?Ce:_e("keys"),entries:_e(X)},Z)for(oe in xe)!E&&!ne&&oe in J||f(J,oe,xe[oe]);else A({target:G,proto:!0,forced:E||ne},xe);return xe}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(l,ve,K){var M=l("../internals/path"),A=l("../internals/has"),b=l("../internals/well-known-symbol-wrapped"),w=l("../internals/object-define-property").f;ve.exports=function(I){var D=M.Symbol||(M.Symbol={});A(D,I)||w(D,I,{value:b.f(I)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(l,ve,K){l=l("../internals/fails"),ve.exports=!l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(A,ve,K){var M=A("../internals/global"),b=(A=A("../internals/is-object"),M.document),w=A(b)&&A(b.createElement);ve.exports=function(I){return w?b.createElement(I):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(l,ve,K){ve.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(l,ve,K){l=l("../internals/engine-user-agent"),ve.exports=/(iphone|ipod|ipad).*applewebkit/i.test(l)},{"../internals/engine-user-agent":47}],47:[function(l,ve,K){l=l("../internals/get-built-in"),ve.exports=l("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(b,ve,K){var M,A,w=b("../internals/global");b=b("../internals/engine-user-agent"),(w=(w=(w=w.process)&&w.versions)&&w.v8)?A=(M=w.split("."))[0]+M[1]:b&&(!(M=b.match(/Edge\/(\d+)/))||74<=M[1])&&(M=b.match(/Chrome\/(\d+)/))&&(A=M[1]),ve.exports=A&&+A},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(l,ve,K){ve.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(l,ve,K){var M=l("../internals/global"),A=l("../internals/object-get-own-property-descriptor").f,b=l("../internals/create-non-enumerable-property"),w=l("../internals/redefine"),I=l("../internals/set-global"),D=l("../internals/copy-constructor-properties"),d=l("../internals/is-forced");ve.exports=function(f,h){var p,m,g,x=f.target,E=f.global,S=f.stat,k=E?M:S?M[x]||I(x,{}):(M[x]||{}).prototype;if(k)for(p in h){if(m=h[p],g=f.noTargetGet?(g=A(k,p))&&g.value:k[p],!d(E?p:x+(S?".":"#")+p,f.forced)&&void 0!==g){if(typeof m==typeof g)continue;D(m,g)}(f.sham||g&&g.sham)&&b(m,"sham",!0),w(k,p,m,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(l,ve,K){ve.exports=function(M){try{return!!M()}catch{return!0}}},{}],52:[function(h,ve,K){"use strict";h("../modules/es.regexp.exec");var M=h("../internals/redefine"),A=h("../internals/fails"),b=h("../internals/well-known-symbol"),w=h("../internals/regexp-exec"),I=h("../internals/create-non-enumerable-property"),D=b("species"),d=!A(function(){var g=/./;return g.exec=function(){var x=[];return x.groups={a:"7"},x},"7"!=="".replace(g,"$<a>")}),f="$0"==="a".replace(/./,"$0"),p=!!/./[h=b("replace")]&&""===/./[h]("a","$0"),m=!A(function(){var g=(x=/(?:)/).exec,x=(x.exec=function(){return g.apply(this,arguments)},"ab".split(x));return 2!==x.length||"a"!==x[0]||"b"!==x[1]});ve.exports=function(g,x,E,S){var k,X,Y=b(g),G=!A(function(){var ee={};return ee[Y]=function(){return 7},7!=""[g](ee)}),z=G&&!A(function(){var ee=!1,H=/a/;return"split"===g&&((H={constructor:{}}).constructor[D]=function(){return H},H.flags="",H[Y]=/./[Y]),H.exec=function(){return ee=!0,null},H[Y](""),!ee});G&&z&&("replace"!==g||d&&f&&!p)&&("split"!==g||m)||(k=/./[Y],E=(z=E(Y,""[g],function(ee,H,re,Z,_e){return H.exec===w?G&&!_e?{done:!0,value:k.call(H,re,Z)}:{done:!0,value:ee.call(re,H,Z)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}))[0],X=z[1],M(String.prototype,g,E),M(RegExp.prototype,Y,2==x?function(ee,H){return X.call(ee,this,H)}:function(ee){return X.call(ee,this)})),S&&I(RegExp.prototype[Y],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(l,ve,K){"use strict";var A=l("../internals/is-array"),b=l("../internals/to-length"),w=l("../internals/function-bind-context");ve.exports=function M(I,D,d,f,h,p,m,g){for(var x,E=h,S=0,k=!!m&&w(m,g,3);S<f;){if(S in d){if(x=k?k(d[S],S,D):d[S],0<p&&A(x))E=M(I,D,x,b(x.length),E,p-1)-1;else{if(9007199254740991<=E)throw TypeError("Exceed the acceptable array length");I[E]=x}E++}S++}return E}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(l,ve,K){l=l("../internals/fails"),ve.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(l,ve,K){var M=l("../internals/a-function");ve.exports=function(A,b,w){if(M(A),void 0===b)return A;switch(w){case 0:return function(){return A.call(b)};case 1:return function(I){return A.call(b,I)};case 2:return function(I,D){return A.call(b,I,D)};case 3:return function(I,D,d){return A.call(b,I,D,d)}}return function(){return A.apply(b,arguments)}}},{"../internals/a-function":5}],56:[function(l,ve,K){"use strict";var M=l("../internals/a-function"),A=l("../internals/is-object"),b=[].slice,w={};ve.exports=Function.bind||function(I){var D=M(this),d=b.call(arguments,1),f=function(){var h=d.concat(b.call(arguments));if(this instanceof f){var p=D,m=h.length,g=h;if(!(m in w)){for(var x=[],E=0;E<m;E++)x[E]="a["+E+"]";w[m]=Function("C,a","return new C("+x.join(",")+")")}return w[m](p,g)}return D.apply(I,h)};return A(D.prototype)&&(f.prototype=D.prototype),f}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(l,ve,K){function M(w){return"function"==typeof w?w:void 0}var A=l("../internals/path"),b=l("../internals/global");ve.exports=function(w,I){return arguments.length<2?M(A[w])||M(b[w]):A[w]&&A[w][I]||b[w]&&b[w][I]}},{"../internals/global":60,"../internals/path":106}],58:[function(l,ve,K){var M=l("../internals/classof"),A=l("../internals/iterators"),b=l("../internals/well-known-symbol")("iterator");ve.exports=function(w){if(null!=w)return w[b]||w["@@iterator"]||A[M(w)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(l,ve,K){var M=l("../internals/an-object"),A=l("../internals/get-iterator-method");ve.exports=function(b){var w=A(b);if("function"!=typeof w)throw TypeError(String(b)+" is not iterable");return M(w.call(b))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(l,ve,K){(function(M){function A(b){return b&&b.Math==Math&&b}ve.exports=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof M&&M)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(l,ve,K){var M={}.hasOwnProperty;ve.exports=function(A,b){return M.call(A,b)}},{}],62:[function(l,ve,K){ve.exports={}},{}],63:[function(l,ve,K){var M=l("../internals/global");ve.exports=function(A,b){var w=M.console;w&&w.error&&(1===arguments.length?w.error(A):w.error(A,b))}},{"../internals/global":60}],64:[function(l,ve,K){l=l("../internals/get-built-in"),ve.exports=l("document","documentElement")},{"../internals/get-built-in":57}],65:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/fails"),b=l("../internals/document-create-element");ve.exports=!M&&!A(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(l,ve,K){var M=Math.abs,A=Math.pow,b=Math.floor,w=Math.log,I=Math.LN2;ve.exports={pack:function(D,d,E){var h,p,m,g=new Array(E),x=8*E-d-1,S=(E=(1<<x)-1)>>1,k=23===d?A(2,-24)-A(2,-77):0,X=D<0||0===D&&1/D<0?1:0,Y=0;for((D=M(D))!=D||D===1/0?(p=D!=D?1:0,h=E):(h=b(w(D)/I),D*(m=A(2,-h))<1&&(h--,m*=2),2<=(D+=1<=h+S?k/m:k*A(2,1-S))*m&&(h++,m/=2),E<=h+S?(p=0,h=E):1<=h+S?(p=(D*m-1)*A(2,d),h+=S):(p=D*A(2,S-1)*A(2,d),h=0));8<=d;g[Y++]=255&p,p/=256,d-=8);for(h=h<<d|p,x+=d;0<x;g[Y++]=255&h,h/=256,x-=8);return g[--Y]|=128*X,g},unpack:function(D,d){var f,E,h=D.length,p=(1<<(E=8*h-d-1))-1,m=p>>1,g=E-7,x=h-1,S=127&(E=D[x--]);for(E>>=7;0<g;S=256*S+D[x],x--,g-=8);for(f=S&(1<<-g)-1,S>>=-g,g+=d;0<g;f=256*f+D[x],x--,g-=8);if(0===S)S=1-m;else{if(S===p)return f?NaN:E?-1/0:1/0;f+=A(2,d),S-=m}return(E?-1:1)*f*A(2,S-d)}}},{}],67:[function(l,ve,K){var M=l("../internals/fails"),A=l("../internals/classof-raw"),b="".split;ve.exports=M(function(){return!Object("z").propertyIsEnumerable(0)})?function(w){return"String"==A(w)?b.call(w,""):Object(w)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(l,ve,K){var M=l("../internals/is-object"),A=l("../internals/object-set-prototype-of");ve.exports=function(b,w,I){return A&&"function"==typeof(w=w.constructor)&&w!==I&&M(w=w.prototype)&&w!==I.prototype&&A(b,w),b}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(M,ve,K){M=M("../internals/shared-store");var A=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(b){return A.call(b)}),ve.exports=M.inspectSource},{"../internals/shared-store":121}],70:[function(l,ve,K){function M(g){I(g,f,{value:{objectID:"O"+ ++h,weakData:{}}})}var A=l("../internals/hidden-keys"),b=l("../internals/is-object"),w=l("../internals/has"),I=l("../internals/object-define-property").f,D=l("../internals/uid"),d=l("../internals/freezing"),f=D("meta"),h=0,p=Object.isExtensible||function(){return!0},m=ve.exports={REQUIRED:!1,fastKey:function(g,x){if(!b(g))return"symbol"==typeof g?g:("string"==typeof g?"S":"P")+g;if(!w(g,f)){if(!p(g))return"F";if(!x)return"E";M(g)}return g[f].objectID},getWeakData:function(g,x){if(!w(g,f)){if(!p(g))return!0;if(!x)return!1;M(g)}return g[f].weakData},onFreeze:function(g){return d&&m.REQUIRED&&p(g)&&!w(g,f)&&M(g),g}};A[f]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(E,ve,K){var M,A,b,w,I,D,d,f,h=E("../internals/native-weak-map"),S=E("../internals/global"),p=E("../internals/is-object"),m=E("../internals/create-non-enumerable-property"),g=E("../internals/has"),x=E("../internals/shared-key");E=E("../internals/hidden-keys"),S=S.WeakMap,d=h?(M=new S,A=M.get,b=M.has,w=M.set,I=function(k,X){return w.call(M,k,X),X},D=function(k){return A.call(M,k)||{}},function(k){return b.call(M,k)}):(E[f=x("state")]=!0,I=function(k,X){return m(k,f,X),X},D=function(k){return g(k,f)?k[f]:{}},function(k){return g(k,f)}),ve.exports={set:I,get:D,has:d,enforce:function(k){return d(k)?D(k):I(k,{})},getterFor:function(k){return function(X){if(p(X)&&(X=D(X)).type===k)return X;throw TypeError("Incompatible receiver, "+k+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(l,ve,K){var M=l("../internals/well-known-symbol"),A=l("../internals/iterators"),b=M("iterator"),w=Array.prototype;ve.exports=function(I){return void 0!==I&&(A.Array===I||w[b]===I)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(l,ve,K){var M=l("../internals/classof-raw");ve.exports=Array.isArray||function(A){return"Array"==M(A)}},{"../internals/classof-raw":28}],74:[function(l,ve,K){function M(f,h){return(f=I[w(f)])==d||f!=D&&("function"==typeof h?A(h):!!h)}var A=l("../internals/fails"),b=/#|\.prototype\./,w=M.normalize=function(f){return String(f).replace(b,".").toLowerCase()},I=M.data={},D=M.NATIVE="N",d=M.POLYFILL="P";ve.exports=M},{"../internals/fails":51}],75:[function(l,ve,K){ve.exports=function(M){return"object"==typeof M?null!==M:"function"==typeof M}},{}],76:[function(l,ve,K){ve.exports=!1},{}],77:[function(l,ve,K){var M=l("../internals/is-object"),A=l("../internals/classof-raw"),b=l("../internals/well-known-symbol")("match");ve.exports=function(w){var I;return M(w)&&(void 0!==(I=w[b])?!!I:"RegExp"==A(w))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(l,ve,K){function M(f,h){this.stopped=f,this.result=h}var A=l("../internals/an-object"),b=l("../internals/is-array-iterator-method"),w=l("../internals/to-length"),I=l("../internals/function-bind-context"),D=l("../internals/get-iterator-method"),d=l("../internals/call-with-safe-iteration-closing");(ve.exports=function(f,h,p,m,g){var x,E,S,k,X,Y,G=I(h,p,m?2:1);if(g)x=f;else{if("function"!=typeof(h=D(f)))throw TypeError("Target is not iterable");if(b(h)){for(E=0,S=w(f.length);E<S;E++)if((k=m?G(A(Y=f[E])[0],Y[1]):G(f[E]))&&k instanceof M)return k;return new M(!1)}x=h.call(f)}for(X=x.next;!(Y=X.call(x)).done;)if("object"==typeof(k=d(x,G,Y.value,m))&&k&&k instanceof M)return k;return new M(!1)}).stop=function(f){return new M(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(D,ve,K){"use strict";var M,A,b=D("../internals/object-get-prototype-of"),w=D("../internals/create-non-enumerable-property"),I=D("../internals/has"),d=D("../internals/well-known-symbol"),f=(D=D("../internals/is-pure"),d=d("iterator"),!1);[].keys&&("next"in(A=[].keys())?(b=b(b(A)))!==Object.prototype&&(M=b):f=!0),null==M&&(M={}),D||I(M,d)||w(M,d,function(){return this}),ve.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(l,ve,K){ve.exports={}},{}],81:[function(l,ve,K){ve.exports=Math.sign||function(M){return 0==(M=+M)||M!=M?M:M<0?-1:1}},{}],82:[function(m,ve,K){var M,A,b,w,I,D,d,f,h=m("../internals/global"),X=m("../internals/object-get-own-property-descriptor").f,k=m("../internals/classof-raw"),p=m("../internals/task").set,g=(m=m("../internals/engine-is-ios"),h.MutationObserver||h.WebKitMutationObserver),x=h.process,E=h.Promise,S="process"==k(x);k=X(h,"queueMicrotask"),(X=k&&k.value)||(M=function(){var Y,G;for(S&&(Y=x.domain)&&Y.exit();A;){G=A.fn,A=A.next;try{G()}catch(z){throw A?w():b=void 0,z}}b=void 0,Y&&Y.enter()},w=S?function(){x.nextTick(M)}:g&&!m?(I=!0,D=document.createTextNode(""),new g(M).observe(D,{characterData:!0}),function(){D.data=I=!I}):E&&E.resolve?(d=E.resolve(void 0),f=d.then,function(){f.call(d,M)}):function(){p.call(h,M)}),ve.exports=X||function(Y){Y={fn:Y,next:void 0},b&&(b.next=Y),A||(A=Y,w()),b=Y}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(l,ve,K){l=l("../internals/global"),ve.exports=l.Promise},{"../internals/global":60}],84:[function(l,ve,K){l=l("../internals/fails"),ve.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(l,ve,K){var M=l("../internals/fails"),A=l("../internals/well-known-symbol"),b=l("../internals/is-pure"),w=A("iterator");ve.exports=!M(function(){var I=new URL("b?a=1&b=2&c=3","http://a"),D=I.searchParams,d="";return I.pathname="c%20d",D.forEach(function(f,h){D.delete("b"),d+=h+f}),b&&!I.toJSON||!D.sort||"http://a/c%20d?a=1&c=3"!==I.href||"3"!==D.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!D[w]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(M,ve,K){var A=M("../internals/global");M=M("../internals/inspect-source"),ve.exports="function"==typeof(A=A.WeakMap)&&/native code/.test(M(A))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(l,ve,K){"use strict";function M(b){var w,I;this.promise=new b(function(D,d){if(void 0!==w||void 0!==I)throw TypeError("Bad Promise constructor");w=D,I=d}),this.resolve=A(w),this.reject=A(I)}var A=l("../internals/a-function");ve.exports.f=function(b){return new M(b)}},{"../internals/a-function":5}],88:[function(l,ve,K){var M=l("../internals/is-regexp");ve.exports=function(A){if(M(A))throw TypeError("The method doesn't accept regular expressions");return A}},{"../internals/is-regexp":77}],89:[function(l,ve,K){var M=l("../internals/global").isFinite;ve.exports=Number.isFinite||function(A){return"number"==typeof A&&M(A)}},{"../internals/global":60}],90:[function(l,ve,K){"use strict";var M=l("../internals/descriptors"),A=l("../internals/fails"),b=l("../internals/object-keys"),w=l("../internals/object-get-own-property-symbols"),I=l("../internals/object-property-is-enumerable"),D=l("../internals/to-object"),d=l("../internals/indexed-object"),f=Object.assign,h=Object.defineProperty;ve.exports=!f||A(function(){var p,m,g,x;return!(!M||1===f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(m={},x="abcdefghijklmnopqrst",(p={})[g=Symbol()]=7,x.split("").forEach(function(E){m[E]=E}),7!=f({},p)[g]||b(f({},m)).join("")!=x)})?function(p,m){for(var g=D(p),x=arguments.length,E=1,S=w.f,k=I.f;E<x;)for(var X,Y=d(arguments[E++]),G=S?b(Y).concat(S(Y)):b(Y),z=G.length,ee=0;ee<z;)X=G[ee++],M&&!k.call(Y,X)||(g[X]=Y[X]);return g}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(h,ve,K){function M(){}var A,b=h("../internals/an-object"),w=h("../internals/object-define-properties"),I=h("../internals/enum-bug-keys"),D=h("../internals/hidden-keys"),d=h("../internals/html"),f=h("../internals/document-create-element"),p=(h=h("../internals/shared-key"),"prototype"),m="script",g=h("IE_PROTO"),x=function(S){return"<"+m+">"+S+"</"+m+">"},E=function(){try{A=document.domain&&new ActiveXObject("htmlfile")}catch{}E=A?((S=A).write(x("")),S.close(),k=S.parentWindow.Object,S=null,k):(S=f("iframe"),k="java"+m+":",S.style.display="none",d.appendChild(S),S.src=String(k),(k=S.contentWindow.document).open(),k.write(x("document.F=Object")),k.close(),k.F);for(var S,k,X=I.length;X--;)delete E[p][I[X]];return E()};D[g]=!0,ve.exports=Object.create||function(S,k){var X;return null!==S?(M[p]=b(S),X=new M,M[p]=null,X[g]=S):X=E(),void 0===k?X:w(X,k)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/object-define-property"),b=l("../internals/an-object"),w=l("../internals/object-keys");ve.exports=M?Object.defineProperties:function(I,D){b(I);for(var d,f=w(D),h=f.length,p=0;p<h;)A.f(I,d=f[p++],D[d]);return I}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/ie8-dom-define"),b=l("../internals/an-object"),w=l("../internals/to-primitive"),I=Object.defineProperty;K.f=M?I:function(D,d,f){if(b(D),d=w(d,!0),b(f),A)try{return I(D,d,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(D[d]=f.value),D}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/object-property-is-enumerable"),b=l("../internals/create-property-descriptor"),w=l("../internals/to-indexed-object"),I=l("../internals/to-primitive"),D=l("../internals/has"),d=l("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;K.f=M?f:function(h,p){if(h=w(h),p=I(p,!0),d)try{return f(h,p)}catch{}if(D(h,p))return b(!A.f.call(h,p),h[p])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(l,ve,K){var M=l("../internals/to-indexed-object"),A=l("../internals/object-get-own-property-names").f,b={}.toString,w="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ve.exports.f=function(I){if(!w||"[object Window]"!=b.call(I))return A(M(I));try{return A(I)}catch{return w.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(l,ve,K){var M=l("../internals/object-keys-internal"),A=l("../internals/enum-bug-keys").concat("length","prototype");K.f=Object.getOwnPropertyNames||function(b){return M(b,A)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(l,ve,K){K.f=Object.getOwnPropertySymbols},{}],98:[function(w,ve,K){var M=w("../internals/has"),A=w("../internals/to-object"),b=w("../internals/shared-key"),I=(w=w("../internals/correct-prototype-getter"),b("IE_PROTO")),D=Object.prototype;ve.exports=w?Object.getPrototypeOf:function(d){return d=A(d),M(d,I)?d[I]:"function"==typeof d.constructor&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?D:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(l,ve,K){var M=l("../internals/has"),A=l("../internals/to-indexed-object"),b=l("../internals/array-includes").indexOf,w=l("../internals/hidden-keys");ve.exports=function(I,D){var d,f=A(I),h=0,p=[];for(d in f)!M(w,d)&&M(f,d)&&p.push(d);for(;D.length>h;)!M(f,d=D[h++])||~b(p,d)||p.push(d);return p}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(l,ve,K){var M=l("../internals/object-keys-internal"),A=l("../internals/enum-bug-keys");ve.exports=Object.keys||function(b){return M(b,A)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(l,ve,K){"use strict";var M={}.propertyIsEnumerable,A=Object.getOwnPropertyDescriptor,b=A&&!M.call({1:2},1);K.f=b?function(w){return!!(w=A(this,w))&&w.enumerable}:M},{}],102:[function(l,ve,K){var M=l("../internals/an-object"),A=l("../internals/a-possible-prototype");ve.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b,w=!1,I={};try{(b=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(I,[]),w=I instanceof Array}catch{}return function(D,d){return M(D),A(d),w?b.call(D,d):D.__proto__=d,D}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(l,ve,K){function M(D){return function(d){for(var f,h=w(d),p=b(h),m=p.length,g=0,x=[];g<m;)f=p[g++],A&&!I.call(h,f)||x.push(D?[f,h[f]]:h[f]);return x}}var A=l("../internals/descriptors"),b=l("../internals/object-keys"),w=l("../internals/to-indexed-object"),I=l("../internals/object-property-is-enumerable").f;ve.exports={entries:M(!0),values:M(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(l,ve,K){"use strict";var M=l("../internals/to-string-tag-support"),A=l("../internals/classof");ve.exports=M?{}.toString:function(){return"[object "+A(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(l,ve,K){var M=l("../internals/get-built-in"),A=l("../internals/object-get-own-property-names"),b=l("../internals/object-get-own-property-symbols"),w=l("../internals/an-object");ve.exports=M("Reflect","ownKeys")||function(I){var D=A.f(w(I)),d=b.f;return d?D.concat(d(I)):D}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(l,ve,K){l=l("../internals/global"),ve.exports=l},{"../internals/global":60}],107:[function(l,ve,K){ve.exports=function(M){try{return{error:!1,value:M()}}catch(A){return{error:!0,value:A}}}},{}],108:[function(l,ve,K){var M=l("../internals/an-object"),A=l("../internals/is-object"),b=l("../internals/new-promise-capability");ve.exports=function(w,I){return M(w),A(I)&&I.constructor===w?I:((0,(w=b.f(w)).resolve)(I),w.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(l,ve,K){var M=l("../internals/redefine");ve.exports=function(A,b,w){for(var I in b)M(A,I,b[I],w);return A}},{"../internals/redefine":110}],110:[function(D,ve,K){var M=D("../internals/global"),A=D("../internals/create-non-enumerable-property"),b=D("../internals/has"),w=D("../internals/set-global"),I=D("../internals/inspect-source"),d=(D=D("../internals/internal-state")).get,f=D.enforce,h=String(String).split("String");(ve.exports=function(p,m,g,k){var E=!!k&&!!k.unsafe,S=!!k&&!!k.enumerable;k=!!k&&!!k.noTargetGet,"function"==typeof g&&("string"!=typeof m||b(g,"name")||A(g,"name",m),f(g).source=h.join("string"==typeof m?m:"")),p===M?S?p[m]=g:w(m,g):(E?!k&&p[m]&&(S=!0):delete p[m],S?p[m]=g:A(p,m,g))})(Function.prototype,"toString",function(){return"function"==typeof this&&d(this).source||I(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(l,ve,K){var M=l("./classof-raw"),A=l("./regexp-exec");ve.exports=function(b,w){var I=b.exec;if("function"==typeof I){if("object"!=typeof(I=I.call(b,w)))throw TypeError("RegExp exec method returned something other than an Object or null");return I}if("RegExp"!==M(b))throw TypeError("RegExp#exec called on incompatible receiver");return A.call(b,w)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(w,ve,K){"use strict";var M,A,b=w("./regexp-flags"),I=(w=w("./regexp-sticky-helpers"),RegExp.prototype.exec),D=String.prototype.replace,d=I,f=(A=/b*/g,I.call(M=/a/,"a"),I.call(A,"a"),0!==M.lastIndex||0!==A.lastIndex),h=w.UNSUPPORTED_Y||w.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];ve.exports=d=f||p||h?function(m){var g,x,E,S,k=this,X=h&&k.sticky,Y=b.call(k),G=k.source,z=0,ee=m;return X&&(-1===(Y=Y.replace("y","")).indexOf("g")&&(Y+="g"),ee=String(m).slice(k.lastIndex),0<k.lastIndex&&(!k.multiline||k.multiline&&"\n"!==m[k.lastIndex-1])&&(G="(?: "+G+")",ee=" "+ee,z++),x=new RegExp("^(?:"+G+")",Y)),p&&(x=new RegExp("^"+G+"$(?!\\s)",Y)),f&&(g=k.lastIndex),E=I.call(X?x:k,ee),X?E?(E.input=E.input.slice(z),E[0]=E[0].slice(z),E.index=k.lastIndex,k.lastIndex+=E[0].length):k.lastIndex=0:f&&E&&(k.lastIndex=k.global?E.index+E[0].length:g),p&&E&&1<E.length&&D.call(E[0],x,function(){for(S=1;S<arguments.length-2;S++)void 0===arguments[S]&&(E[S]=void 0)}),E}:d},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(l,ve,K){"use strict";var M=l("../internals/an-object");ve.exports=function(){var A=M(this),b="";return A.global&&(b+="g"),A.ignoreCase&&(b+="i"),A.multiline&&(b+="m"),A.dotAll&&(b+="s"),A.unicode&&(b+="u"),A.sticky&&(b+="y"),b}},{"../internals/an-object":10}],114:[function(l,ve,K){"use strict";function M(A,b){return RegExp(A,b)}l=l("./fails"),K.UNSUPPORTED_Y=l(function(){var A=M("a","y");return A.lastIndex=2,null!=A.exec("abcd")}),K.BROKEN_CARET=l(function(){var A=M("^r","gy");return A.lastIndex=2,null!=A.exec("str")})},{"./fails":51}],115:[function(l,ve,K){ve.exports=function(M){if(null==M)throw TypeError("Can't call method on "+M);return M}},{}],116:[function(l,ve,K){ve.exports=Object.is||function(M,A){return M===A?0!==M||1/M==1/A:M!=M&&A!=A}},{}],117:[function(l,ve,K){var M=l("../internals/global"),A=l("../internals/create-non-enumerable-property");ve.exports=function(b,w){try{A(M,b,w)}catch{M[b]=w}return w}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(l,ve,K){"use strict";var M=l("../internals/get-built-in"),A=l("../internals/object-define-property"),b=l("../internals/well-known-symbol"),w=l("../internals/descriptors"),I=b("species");ve.exports=function(d){d=M(d),w&&d&&!d[I]&&(0,A.f)(d,I,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(l,ve,K){var M=l("../internals/object-define-property").f,A=l("../internals/has"),b=l("../internals/well-known-symbol")("toStringTag");ve.exports=function(w,I,D){w&&!A(w=D?w:w.prototype,b)&&M(w,b,{configurable:!0,value:I})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(l,ve,K){var M=l("../internals/shared"),A=l("../internals/uid"),b=M("keys");ve.exports=function(w){return b[w]||(b[w]=A(w))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(M,ve,K){var b=M("../internals/global"),A=(M=M("../internals/set-global"),"__core-js_shared__");b=b[A]||M(A,{}),ve.exports=b},{"../internals/global":60,"../internals/set-global":117}],122:[function(l,ve,K){var M=l("../internals/is-pure"),A=l("../internals/shared-store");(ve.exports=function(b,w){return A[b]||(A[b]=void 0!==w?w:{})})("versions",[]).push({version:"3.6.5",mode:M?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(l,ve,K){var M=l("../internals/an-object"),A=l("../internals/a-function"),b=l("../internals/well-known-symbol")("species");ve.exports=function(D,I){return void 0===(D=M(D).constructor)||null==(D=M(D)[b])?I:A(D)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(l,ve,K){var M=l("../internals/fails");ve.exports=function(A){return M(function(){var b=""[A]('"');return b!==b.toLowerCase()||3<b.split('"').length})}},{"../internals/fails":51}],125:[function(l,ve,K){function M(w){return function(f,h){f=String(b(f)),h=A(h);var d,p=f.length;return h<0||p<=h?w?"":void 0:(d=f.charCodeAt(h))<55296||56319<d||h+1===p||(p=f.charCodeAt(h+1))<56320||57343<p?w?f.charAt(h):d:w?f.slice(h,h+2):p-56320+(d-55296<<10)+65536}}var A=l("../internals/to-integer"),b=l("../internals/require-object-coercible");ve.exports={codeAt:M(!1),charAt:M(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(l,ve,K){l=l("../internals/engine-user-agent"),ve.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l)},{"../internals/engine-user-agent":47}],127:[function(l,ve,K){function M(D){return function(p,x,g){var m=(p=String(w(p))).length;return g=void 0===g?" ":String(g),(x=A(x))<=m||""==g?p:((m=b.call(g,I((x-=m)/g.length))).length>x&&(m=m.slice(0,x)),D?p+m:m+p)}}var A=l("../internals/to-length"),b=l("../internals/string-repeat"),w=l("../internals/require-object-coercible"),I=Math.ceil;ve.exports={start:M(!1),end:M(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(l,ve,K){"use strict";function M(E){return E+22+75*(E<26)}function A(E){var S,k=[],X=(E=function(he){for(var Ce=[],et=0,le=he.length;et<le;){var V,ge=he.charCodeAt(et++);55296<=ge&&ge<=56319&&et<le?56320==(64512&(V=he.charCodeAt(et++)))?Ce.push(((1023&ge)<<10)+(1023&V)+65536):(Ce.push(ge),et--):Ce.push(ge)}return Ce}(E)).length,Y=128,G=0,z=72;for(Z=0;Z<E.length;Z++)(S=E[Z])<128&&k.push(x(S));var ee=k.length,H=ee;for(ee&&k.push("-");H<X;){for(var re=b,Z=0;Z<E.length;Z++)Y<=(S=E[Z])&&S<re&&(re=S);var _e=H+1;if(re-Y>g((b-G)/_e))throw RangeError(p);for(G+=(re-Y)*_e,Y=re,Z=0;Z<E.length;Z++){if((S=E[Z])<Y&&++G>b)throw RangeError(p);if(S==Y){for(var xe=G,oe=w;;oe+=w){var me=oe<=z?1:z+I<=oe?I:oe-z;if(xe<me)break;var ne=xe-me,J=w-me;k.push(x(M(me+ne%J))),xe=g(ne/J)}k.push(x(M(xe))),z=function(he,Ce,et){var le=0;for(he=et?g(he/d):he>>1,he+=g(he/Ce);m*I>>1<he;le+=w)he=g(he/m);return g(le+(m+1)*he/(he+D))}(G,_e,H==ee),G=0,++H}}++G,++Y}return k.join("")}var b=2147483647,w=36,I=26,D=38,d=700,f=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",m=w-1,g=Math.floor,x=String.fromCharCode;ve.exports=function(E){for(var S,k=[],X=E.toLowerCase().replace(h,".").split("."),Y=0;Y<X.length;Y++)k.push(f.test(S=X[Y])?"xn--"+A(S):S);return k.join(".")}},{}],129:[function(l,ve,K){"use strict";var M=l("../internals/to-integer"),A=l("../internals/require-object-coercible");ve.exports="".repeat||function(b){var w=String(A(this)),I="",D=M(b);if(D<0||D==1/0)throw RangeError("Wrong number of repetitions");for(;0<D;(D>>>=1)&&(w+=w))1&D&&(I+=w);return I}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(l,ve,K){var M=l("../internals/fails"),A=l("../internals/whitespaces");ve.exports=function(b){return M(function(){return!!A[b]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[b]()||A[b].name!==b})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(b,ve,K){function M(D){return function(d){return d=String(A(d)),1&D&&(d=d.replace(w,"")),2&D?d.replace(I,""):d}}var A=b("../internals/require-object-coercible"),w=(b="["+b("../internals/whitespaces")+"]",RegExp("^"+b+b+"*")),I=RegExp(b+b+"*$");ve.exports={start:M(1),end:M(2),trim:M(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(m,ve,K){function M(H){return function(){ee(H)}}function A(H){ee(H.data)}function b(H){I.postMessage(H+"",g.protocol+"//"+g.host)}var w,I=m("../internals/global"),D=m("../internals/fails"),d=m("../internals/classof-raw"),f=m("../internals/function-bind-context"),h=m("../internals/html"),p=m("../internals/document-create-element"),g=(m=m("../internals/engine-is-ios"),I.location),x=I.setImmediate,E=I.clearImmediate,S=I.process,k=I.MessageChannel,X=I.Dispatch,Y=0,G={},z="onreadystatechange",ee=function(H){var re;G.hasOwnProperty(H)&&(re=G[H],delete G[H],re())};x&&E||(x=function(H){for(var re=[],Z=1;Z<arguments.length;)re.push(arguments[Z++]);return G[++Y]=function(){("function"==typeof H?H:Function(H)).apply(void 0,re)},w(Y),Y},E=function(H){delete G[H]},"process"==d(S)?w=function(H){S.nextTick(M(H))}:X&&X.now?w=function(H){X.now(M(H))}:k&&!m?(m=(d=new k).port2,d.port1.onmessage=A,w=f(m.postMessage,m,1)):!I.addEventListener||"function"!=typeof postMessage||I.importScripts||D(b)||"file:"===g.protocol?w=z in p("script")?function(H){h.appendChild(p("script"))[z]=function(){h.removeChild(this),ee(H)}}:function(H){setTimeout(M(H),0)}:(w=b,I.addEventListener("message",A,!1))),ve.exports={set:x,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(l,ve,K){var M=l("../internals/classof-raw");ve.exports=function(A){if("number"!=typeof A&&"Number"!=M(A))throw TypeError("Incorrect invocation");return+A}},{"../internals/classof-raw":28}],134:[function(l,ve,K){var M=l("../internals/to-integer"),A=Math.max,b=Math.min;ve.exports=function(w,I){return(w=M(w))<0?A(w+I,0):b(w,I)}},{"../internals/to-integer":137}],135:[function(l,ve,K){var M=l("../internals/to-integer"),A=l("../internals/to-length");ve.exports=function(w){if(void 0===w)return 0;w=M(w);var I=A(w);if(w!==I)throw RangeError("Wrong length or index");return I}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(l,ve,K){var M=l("../internals/indexed-object"),A=l("../internals/require-object-coercible");ve.exports=function(b){return M(A(b))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(l,ve,K){var M=Math.ceil,A=Math.floor;ve.exports=function(b){return isNaN(b=+b)?0:(0<b?A:M)(b)}},{}],138:[function(l,ve,K){var M=l("../internals/to-integer"),A=Math.min;ve.exports=function(b){return 0<b?A(M(b),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(l,ve,K){var M=l("../internals/require-object-coercible");ve.exports=function(A){return Object(M(A))}},{"../internals/require-object-coercible":115}],140:[function(l,ve,K){var M=l("../internals/to-positive-integer");ve.exports=function(A,b){if((A=M(A))%b)throw RangeError("Wrong offset");return A}},{"../internals/to-positive-integer":141}],141:[function(l,ve,K){var M=l("../internals/to-integer");ve.exports=function(A){if((A=M(A))<0)throw RangeError("The argument can't be less than 0");return A}},{"../internals/to-integer":137}],142:[function(l,ve,K){var M=l("../internals/is-object");ve.exports=function(A,b){if(!M(A))return A;var w,I;if(b&&"function"==typeof(w=A.toString)&&!M(I=w.call(A))||"function"==typeof(w=A.valueOf)&&!M(I=w.call(A))||!b&&"function"==typeof(w=A.toString)&&!M(I=w.call(A)))return I;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(l,ve,K){var M={};M[l("../internals/well-known-symbol")("toStringTag")]="z",ve.exports="[object z]"===String(M)},{"../internals/well-known-symbol":150}],144:[function(l,ve,K){"use strict";function M(vt,Gt){for(var hn=0,$n=Gt.length,bn=new(lt(vt))($n);hn<$n;)bn[hn]=Gt[hn++];return bn}function A(vt,Gt){V(vt,Gt,{get:function(){return et(this)[Gt]}})}function b(vt){return vt instanceof ut||"ArrayBuffer"==(vt=ee(vt))||"SharedArrayBuffer"==vt}function w(vt,Gt){return It(vt)&&"symbol"!=typeof Gt&&Gt in vt&&String(+Gt)==String(Gt)}function I(vt,Gt){return w(vt,Gt=G(Gt,!0))?E(2,vt[Gt]):ge(vt,Gt)}function D(vt,Gt,hn){return!(w(vt,Gt=G(Gt,!0))&&H(hn)&&z(hn,"value"))||z(hn,"get")||z(hn,"set")||hn.configurable||z(hn,"writable")&&!hn.writable||z(hn,"enumerable")&&!hn.enumerable?V(vt,Gt,hn):(vt[Gt]=hn.value,vt)}var d=l("../internals/export"),f=l("../internals/global"),h=l("../internals/descriptors"),p=l("../internals/typed-array-constructors-require-wrappers"),m=l("../internals/array-buffer-view-core"),g=l("../internals/array-buffer"),x=l("../internals/an-instance"),E=l("../internals/create-property-descriptor"),S=l("../internals/create-non-enumerable-property"),k=l("../internals/to-length"),X=l("../internals/to-index"),Y=l("../internals/to-offset"),G=l("../internals/to-primitive"),z=l("../internals/has"),ee=l("../internals/classof"),H=l("../internals/is-object"),re=l("../internals/object-create"),Z=l("../internals/object-set-prototype-of"),_e=l("../internals/object-get-own-property-names").f,xe=l("../internals/typed-array-from"),oe=l("../internals/array-iteration").forEach,me=l("../internals/set-species"),ne=l("../internals/object-define-property"),J=l("../internals/object-get-own-property-descriptor"),he=l("../internals/internal-state"),Ce=l("../internals/inherit-if-required"),et=he.get,le=he.set,V=ne.f,ge=J.f,Le=Math.round,Ke=f.RangeError,ut=g.ArrayBuffer,_t=g.DataView,Nt=m.NATIVE_ARRAY_BUFFER_VIEWS,dt=m.TYPED_ARRAY_TAG,Rt=m.TypedArray,Bt=m.TypedArrayPrototype,lt=m.aTypedArrayConstructor,It=m.isTypedArray,Tt="BYTES_PER_ELEMENT",Ot="Wrong length";h?(Nt||(J.f=I,ne.f=D,A(Bt,"buffer"),A(Bt,"byteOffset"),A(Bt,"byteLength"),A(Bt,"length")),d({target:"Object",stat:!0,forced:!Nt},{getOwnPropertyDescriptor:I,defineProperty:D}),ve.exports=function(mn,Gt,hn){function $n(Tn,ct){V(Tn,ct,{get:function(){var pt=this,Qe=ct;return(pt=et(pt)).view[Mn](Qe*bn+pt.byteOffset,!0)},set:function(pt){var Qe=this,xt=ct;Qe=et(Qe),hn&&(pt=(pt=Le(pt))<0?0:255<pt?255:255&pt),Qe.view[gr](xt*bn+Qe.byteOffset,pt,!0)},enumerable:!0})}var bn=mn.match(/\d+$/)[0]/8,Xn=mn+(hn?"Clamped":"")+"Array",Mn="get"+mn,gr="set"+mn,Ln=f[Xn],nr=Ln,qn=(mn=nr&&nr.prototype,{});Nt?p&&(nr=Gt(function(Tn,ct,pt,Qe){return x(Tn,nr,Xn),Ce(H(ct)?b(ct)?void 0!==Qe?new Ln(ct,Y(pt,bn),Qe):void 0!==pt?new Ln(ct,Y(pt,bn)):new Ln(ct):It(ct)?M(nr,ct):xe.call(nr,ct):new Ln(X(ct)),Tn,nr)}),Z&&Z(nr,Rt),oe(_e(Ln),function(Tn){Tn in nr||S(nr,Tn,Ln[Tn])}),nr.prototype=mn):(nr=Gt(function(Tn,ct,pt,Qe){x(Tn,nr,Xn);var xt,fn,Cn=0,jn=0;if(H(ct)){if(!b(ct))return It(ct)?M(nr,ct):xe.call(nr,ct);var on=ct;if(jn=Y(pt,bn),pt=ct.byteLength,void 0===Qe){if(pt%bn||(xt=pt-jn)<0)throw Ke(Ot)}else if(pt<(xt=k(Qe)*bn)+jn)throw Ke(Ot);fn=xt/bn}else fn=X(ct),on=new ut(xt=fn*bn);for(le(Tn,{buffer:on,byteOffset:jn,byteLength:xt,length:fn,view:new _t(on)});Cn<fn;)$n(Tn,Cn++)}),Z&&Z(nr,Rt),mn=nr.prototype=re(Bt)),mn.constructor!==nr&&S(mn,"constructor",nr),dt&&S(mn,dt,Xn),qn[Xn]=nr,d({global:!0,forced:nr!=Ln,sham:!Nt},qn),Tt in nr||S(nr,Tt,bn),Tt in mn||S(mn,Tt,bn),me(Xn)}):ve.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(w,ve,K){var M=w("../internals/global"),A=w("../internals/fails"),b=w("../internals/check-correctness-of-iteration"),I=(w=w("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,M.ArrayBuffer),D=M.Int8Array;ve.exports=!w||!A(function(){D(1)})||!A(function(){new D(-1)})||!b(function(d){new D,new D(null),new D(1.5),new D(d)},!0)||A(function(){return 1!==new D(new I(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(l,ve,K){var M=l("../internals/to-object"),A=l("../internals/to-length"),b=l("../internals/get-iterator-method"),w=l("../internals/is-array-iterator-method"),I=l("../internals/function-bind-context"),D=l("../internals/array-buffer-view-core").aTypedArrayConstructor;ve.exports=function(d){var f,h,p,m,g,x,E=M(d),S=arguments.length,k=1<S?arguments[1]:void 0,X=void 0!==k,Y=b(E);if(null!=Y&&!w(Y))for(x=(g=Y.call(E)).next,E=[];!(m=x.call(g)).done;)E.push(m.value);for(X&&2<S&&(k=I(k,arguments[2],2)),h=A(E.length),p=new(D(this))(h),f=0;f<h;f++)p[f]=X?k(E[f],f):E[f];return p}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(l,ve,K){var M=0,A=Math.random();ve.exports=function(b){return"Symbol("+String(void 0===b?"":b)+")_"+(++M+A).toString(36)}},{}],148:[function(l,ve,K){l=l("../internals/native-symbol"),ve.exports=l&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(l,ve,K){l=l("../internals/well-known-symbol"),K.f=l},{"../internals/well-known-symbol":150}],150:[function(D,ve,K){var M=D("../internals/global"),A=D("../internals/shared"),b=D("../internals/has"),w=D("../internals/uid"),I=D("../internals/native-symbol"),d=(D=D("../internals/use-symbol-as-uid"),A("wks")),f=M.Symbol,h=D?f:f&&f.withoutSetter||w;ve.exports=function(p){return b(d,p)||(d[p]=I&&b(f,p)?f[p]:h("Symbol."+p)),d[p]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(l,ve,K){ve.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],152:[function(b,ve,K){"use strict";var M=b("../internals/export"),A=b("../internals/global"),I=b("../internals/array-buffer"),w=(b=b("../internals/set-species"),"ArrayBuffer");M({global:!0,forced:A[w]!==(I=I[w])},{ArrayBuffer:I}),b(w)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(E,ve,K){"use strict";var M=E("../internals/export"),A=E("../internals/fails"),b=E("../internals/is-array"),w=E("../internals/is-object"),I=E("../internals/to-object"),D=E("../internals/to-length"),d=E("../internals/create-property"),f=E("../internals/array-species-create"),h=E("../internals/array-method-has-species-support"),x=E("../internals/well-known-symbol"),p=(E=E("../internals/engine-v8-version"),x("isConcatSpreadable")),m=9007199254740991,g="Maximum allowed index exceeded";x=51<=E||!A(function(){var S=[];return S[p]=!1,S.concat()[0]!==S}),E=h("concat"),M({target:"Array",proto:!0,forced:!x||!E},{concat:function(S){for(var k,X,Y,G,z,ee=I(this),H=f(ee,0),re=0,Z=-1,_e=arguments.length;Z<_e;Z++)if(z=void 0,w(G=Y=-1===Z?ee:arguments[Z])&&(void 0!==(z=G[p])?z:b(G))){if(X=D(Y.length),m<re+X)throw TypeError(g);for(k=0;k<X;k++,re++)k in Y&&d(H,re,Y[k])}else{if(m<=re)throw TypeError(g);d(H,re++,Y)}return H.length=re,H}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(b,ve,K){var M=b("../internals/export"),A=b("../internals/array-copy-within");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{copyWithin:A}),b("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(w,ve,K){"use strict";var M=w("../internals/export"),A=w("../internals/array-iteration").every,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("every"),w=w("every"),M({target:"Array",proto:!0,forced:!b||!w},{every:function(I){return A(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(b,ve,K){var M=b("../internals/export"),A=b("../internals/array-fill");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{fill:A}),b("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(w,ve,K){"use strict";var M=w("../internals/export"),A=w("../internals/array-iteration").filter,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("filter"),w=w("filter"),M({target:"Array",proto:!0,forced:!b||!w},{filter:function(I){return A(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(D,ve,K){"use strict";var M=D("../internals/export"),A=D("../internals/array-iteration").findIndex,b=D("../internals/add-to-unscopables"),w=(D=D("../internals/array-method-uses-to-length"),"findIndex"),I=!0;D=D(w),w in[]&&Array(1)[w](function(){I=!1}),M({target:"Array",proto:!0,forced:I||!D},{findIndex:function(d){return A(this,d,1<arguments.length?arguments[1]:void 0)}}),b(w)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/flatten-into-array"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/a-function"),D=l("../internals/array-species-create");M({target:"Array",proto:!0},{flatMap:function(d){var f,h=b(this),p=w(h.length);return I(d),(f=D(h,0)).length=A(f,h,h,p,0,1,d,1<arguments.length?arguments[1]:void 0),f}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/flatten-into-array"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/to-integer"),D=l("../internals/array-species-create");M({target:"Array",proto:!0},{flat:function(){var d=arguments.length?arguments[0]:void 0,f=b(this),h=w(f.length),p=D(f,0);return p.length=A(p,f,f,h,0,void 0===d?1:I(d)),p}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(A,ve,K){"use strict";var M=A("../internals/export");A=A("../internals/array-for-each"),M({target:"Array",proto:!0,forced:[].forEach!=A},{forEach:A})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(l,ve,K){var M=l("../internals/export"),A=l("../internals/array-from");M({target:"Array",stat:!0,forced:!l("../internals/check-correctness-of-iteration")(function(b){Array.from(b)})},{from:A})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/array-includes").includes,b=l("../internals/add-to-unscopables");M({target:"Array",proto:!0,forced:!l("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(w){return A(this,w,1<arguments.length?arguments[1]:void 0)}}),b("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(D,ve,K){"use strict";var M=D("../internals/export"),A=D("../internals/array-includes").indexOf,I=D("../internals/array-method-is-strict"),b=(D=D("../internals/array-method-uses-to-length"),[].indexOf),w=!!b&&1/[1].indexOf(1,-0)<0;I=I("indexOf"),D=D("indexOf",{ACCESSORS:!0,1:0}),M({target:"Array",proto:!0,forced:w||!I||!D},{indexOf:function(d){return w?b.apply(this,arguments)||0:A(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(I,ve,K){"use strict";var M=I("../internals/to-indexed-object"),A=I("../internals/add-to-unscopables"),b=I("../internals/iterators"),w=I("../internals/internal-state"),D=(I=I("../internals/define-iterator"),"Array Iterator"),d=w.set,f=w.getterFor(D);ve.exports=I(Array,"Array",function(h,p){d(this,{type:D,target:M(h),index:0,kind:p})},function(){var h=f(this),p=h.target,m=h.kind,g=h.index++;return!p||g>=p.length?{value:h.target=void 0,done:!0}:"keys"==m?{value:g,done:!1}:"values"==m?{value:p[g],done:!1}:{value:[g,p[g]],done:!1}},"values"),b.Arguments=b.Array,A("keys"),A("values"),A("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(I,ve,K){"use strict";var M=I("../internals/export"),w=I("../internals/indexed-object"),A=I("../internals/to-indexed-object"),b=(I=I("../internals/array-method-is-strict"),[].join);w=w!=Object,I=I("join",","),M({target:"Array",proto:!0,forced:w||!I},{join:function(D){return b.call(A(this),void 0===D?",":D)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(A,ve,K){A("../internals/export")({target:"Array",proto:!0,forced:(A=A("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:A})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(w,ve,K){"use strict";var M=w("../internals/export"),A=w("../internals/array-iteration").map,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("map"),w=w("map"),M({target:"Array",proto:!0,forced:!b||!w},{map:function(I){return A(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(p,ve,K){"use strict";var M=p("../internals/export"),A=p("../internals/is-object"),b=p("../internals/is-array"),w=p("../internals/to-absolute-index"),I=p("../internals/to-length"),D=p("../internals/to-indexed-object"),d=p("../internals/create-property"),f=p("../internals/well-known-symbol"),h=p("../internals/array-method-has-species-support"),m=(p=p("../internals/array-method-uses-to-length"),h=h("slice"),p=p("slice",{ACCESSORS:!0,0:0,1:2}),f("species")),g=[].slice,x=Math.max;M({target:"Array",proto:!0,forced:!h||!p},{slice:function(E,S){var k,X,Y,G=D(this),z=I(G.length),ee=w(E,z),H=w(void 0===S?z:S,z);if(b(G)&&((k="function"==typeof(k=G.constructor)&&(k===Array||b(k.prototype))||A(k)&&null===(k=k[m])?void 0:k)===Array||void 0===k))return g.call(G,ee,H);for(X=new(void 0===k?Array:k)(x(H-ee,0)),Y=0;ee<H;ee++,Y++)ee in G&&d(X,Y,G[ee]);return X.length=Y,X}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(w,ve,K){"use strict";var M=w("../internals/export"),A=w("../internals/array-iteration").some,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("some"),w=w("some"),M({target:"Array",proto:!0,forced:!b||!w},{some:function(I){return A(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(h,ve,K){"use strict";var M=h("../internals/export"),A=h("../internals/to-absolute-index"),b=h("../internals/to-integer"),w=h("../internals/to-length"),I=h("../internals/to-object"),D=h("../internals/array-species-create"),d=h("../internals/create-property"),f=h("../internals/array-method-has-species-support"),p=(h=h("../internals/array-method-uses-to-length"),f=f("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),m=Math.min;M({target:"Array",proto:!0,forced:!f||!h},{splice:function(re,x){var E,S,k,X,Y,G,z=I(this),ee=w(z.length),H=A(re,ee);if(0===(re=arguments.length)?E=S=0:S=1===re?(E=0,ee-H):(E=re-2,m(p(b(x),0),ee-H)),9007199254740991<ee+E-S)throw TypeError("Maximum allowed length exceeded");for(k=D(z,S),X=0;X<S;X++)(Y=H+X)in z&&d(k,X,z[Y]);if(E<(k.length=S)){for(X=H;X<ee-S;X++)G=X+E,(Y=X+S)in z?z[G]=z[Y]:delete z[G];for(X=ee;ee-S+E<X;X--)delete z[X-1]}else if(S<E)for(X=ee-S;H<X;X--)G=X+E-1,(Y=X+S-1)in z?z[G]=z[Y]:delete z[G];for(X=0;X<E;X++)z[X+H]=arguments[X+2];return z.length=ee-S+E,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(l,ve,K){l("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(l,ve,K){l("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(A,ve,K){var M=A("../internals/descriptors"),b=(A=A("../internals/object-define-property").f,Function.prototype),w=b.toString,I=/^\s*function ([^ (]*)/;!M||"name"in b||A(b,"name",{configurable:!0,get:function(){try{return w.call(this).match(I)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(A,ve,K){"use strict";var M=A("../internals/collection");A=A("../internals/collection-strong"),ve.exports=M("Map",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},A)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(M,ve,K){M=M("../internals/export");var A=Math.hypot,b=Math.abs,w=Math.sqrt;M({target:"Math",stat:!0,forced:!!A&&A(1/0,NaN)!==1/0},{hypot:function(I,D){for(var d,f,h=0,p=0,m=arguments.length,g=0;p<m;)g<(d=b(arguments[p++]))?(h=h*(f=g/d)*f+1,g=d):h+=0<d?(f=d/g)*f:d;return g===1/0?1/0:g*w(h)}})},{"../internals/export":50}],177:[function(M,ve,K){M=M("../internals/export");var A=Math.log,b=Math.LN2;M({target:"Math",stat:!0},{log2:function(w){return A(w)/b}})},{"../internals/export":50}],178:[function(l,ve,K){l("../internals/export")({target:"Math",stat:!0},{sign:l("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(l,ve,K){"use strict";function M(Z){var _e,xe,oe,me,ne,J,he,Ce=h(Z,!1);if("string"==typeof Ce&&2<Ce.length)if(43===(Z=(Ce=S(Ce)).charCodeAt(0))||45===Z){if(88===(_e=Ce.charCodeAt(2))||120===_e)return NaN}else if(48===Z){switch(Ce.charCodeAt(1)){case 66:case 98:xe=2,oe=49;break;case 79:case 111:xe=8,oe=55;break;default:return+Ce}for(ne=(me=Ce.slice(2)).length,J=0;J<ne;J++)if((he=me.charCodeAt(J))<48||oe<he)return NaN;return parseInt(me,xe)}return+Ce}var A=l("../internals/descriptors"),b=l("../internals/global"),w=l("../internals/is-forced"),I=l("../internals/redefine"),D=l("../internals/has"),d=l("../internals/classof-raw"),f=l("../internals/inherit-if-required"),h=l("../internals/to-primitive"),p=l("../internals/fails"),m=l("../internals/object-create"),g=l("../internals/object-get-own-property-names").f,x=l("../internals/object-get-own-property-descriptor").f,E=l("../internals/object-define-property").f,S=l("../internals/string-trim").trim,k="Number",X=b[k],Y=X.prototype,G=d(m(Y))==k;if(w(k,!X(" 0o1")||!X("0b1")||X("+0x1"))){for(var z,ee=function(_e){_e=arguments.length<1?0:_e;var xe=this;return xe instanceof ee&&(G?p(function(){Y.valueOf.call(xe)}):d(xe)!=k)?f(new X(M(_e)),xe,ee):M(_e)},H=A?g(X):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),re=0;H.length>re;re++)D(X,z=H[re])&&!D(ee,z)&&E(ee,z,x(X,z));(ee.prototype=Y).constructor=ee,I(b,k,ee)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(l,ve,K){l("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(l,ve,K){l("../internals/export")({target:"Number",stat:!0},{isFinite:l("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(D,ve,K){"use strict";function M(h,p,m){return 0===p?m:p%2==1?M(h,p-1,m*h):M(h*h,p/2,m)}var A=D("../internals/export"),b=D("../internals/to-integer"),w=D("../internals/this-number-value"),I=D("../internals/string-repeat"),d=(D=D("../internals/fails"),1..toFixed),f=Math.floor;A({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!D(function(){d.call({})})},{toFixed:function(k){function p(z,ee){for(var H=-1,re=ee;++H<6;)X[H]=(re+=z*X[H])%1e7,re=f(re/1e7)}function m(z){for(var ee=6,H=0;0<=--ee;)X[ee]=f((H+=X[ee])/z),H=H%z*1e7}function g(){for(var z,ee=6,H="";0<=--ee;)""===H&&0!==ee&&0===X[ee]||(z=String(X[ee]),H=""===H?z:H+I.call("0",7-z.length)+z);return H}var x,E,S=w(this),X=(k=b(k),[0,0,0,0,0,0]),Y="",G="0";if(k<0||20<k)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(Y="-",S=-S),1e-21<S)if(S=(x=function(z){for(var ee=0,H=z;4096<=H;)ee+=12,H/=4096;for(;2<=H;)ee+=1,H/=2;return ee}(S*M(2,69,1))-69)<0?S*M(2,-x,1):S/M(2,x,1),S*=4503599627370496,0<(x=52-x)){for(p(0,S),E=k;7<=E;)p(1e7,0),E-=7;for(p(M(10,E,1),0),E=x-1;23<=E;)m(1<<23),E-=23;m(1<<E),p(1,1),m(2),G=g()}else p(0,S),p(1<<-x,0),G=g()+I.call("0",k);return 0<k?Y+((S=G.length)<=k?"0."+I.call("0",k-S)+G:G.slice(0,S-k)+"."+G.slice(S-k)):Y+G}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(A,ve,K){var M=A("../internals/export");A=A("../internals/object-assign"),M({target:"Object",stat:!0,forced:Object.assign!==A},{assign:A})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(l,ve,K){var M=l("../internals/export"),A=l("../internals/object-to-array").entries;M({target:"Object",stat:!0},{entries:function(b){return A(b)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(l,ve,K){var M=l("../internals/export"),A=l("../internals/iterate"),b=l("../internals/create-property");M({target:"Object",stat:!0},{fromEntries:function(w){var I={};return A(w,function(D,d){b(I,D,d)},void 0,!0),I}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(w,ve,K){var M=w("../internals/export"),I=w("../internals/fails"),A=w("../internals/to-indexed-object"),b=w("../internals/object-get-own-property-descriptor").f;w=w("../internals/descriptors"),I=I(function(){b(1)}),M({target:"Object",stat:!0,forced:!w||I,sham:!w},{getOwnPropertyDescriptor:function(D,d){return b(A(D),d)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(b,ve,K){var M=b("../internals/export"),A=b("../internals/fails");b=b("../internals/object-get-own-property-names-external").f,M({target:"Object",stat:!0,forced:A(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:b})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(I,ve,K){var M=I("../internals/export"),A=I("../internals/fails"),b=I("../internals/to-object"),w=I("../internals/object-get-prototype-of");I=I("../internals/correct-prototype-getter"),M({target:"Object",stat:!0,forced:A(function(){w(1)}),sham:!I},{getPrototypeOf:function(D){return w(b(D))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(l,ve,K){var M=l("../internals/export"),A=l("../internals/to-object"),b=l("../internals/object-keys");M({target:"Object",stat:!0,forced:l("../internals/fails")(function(){b(1)})},{keys:function(w){return b(A(w))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(b,ve,K){var M=b("../internals/to-string-tag-support"),A=b("../internals/redefine");b=b("../internals/object-to-string"),M||A(Object.prototype,"toString",b,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(hn,ve,K){"use strict";var M,A,b,w,I=hn("../internals/export"),D=hn("../internals/is-pure"),d=hn("../internals/global"),f=hn("../internals/get-built-in"),h=hn("../internals/native-promise-constructor"),p=hn("../internals/redefine"),m=hn("../internals/redefine-all"),g=hn("../internals/set-to-string-tag"),x=hn("../internals/set-species"),E=hn("../internals/is-object"),S=hn("../internals/a-function"),k=hn("../internals/an-instance"),X=hn("../internals/classof-raw"),Y=hn("../internals/inspect-source"),G=hn("../internals/iterate"),z=hn("../internals/check-correctness-of-iteration"),ee=hn("../internals/species-constructor"),H=hn("../internals/task").set,re=hn("../internals/microtask"),Z=hn("../internals/promise-resolve"),_e=hn("../internals/host-report-errors"),xe=hn("../internals/new-promise-capability"),oe=hn("../internals/perform"),me=hn("../internals/internal-state"),ne=hn("../internals/is-forced"),$n=hn("../internals/well-known-symbol"),J=hn("../internals/engine-v8-version"),he=$n("species"),Ce="Promise",et=me.get,le=me.set,V=me.getterFor(Ce),ge=h,Le=d.TypeError,Ke=d.document,ut=d.process,_t=f("fetch"),Nt=xe.f,dt=Nt,Rt="process"==X(ut),Bt=!!(Ke&&Ke.createEvent&&d.dispatchEvent),lt="unhandledrejection",bn=($n=(hn=ne(Ce,function(){var qn,Tn;return Y(ge)===String(ge)&&(66===J||!Rt&&"function"!=typeof PromiseRejectionEvent)||!((!D||ge.prototype.finally)&&(51<=J&&/native code/.test(ge)||(Tn=function(ct){ct(function(){},function(){})},((qn=ge.resolve(1)).constructor={})[he]=Tn,qn.then(function(){})instanceof Tn)))}))||!z(function(qn){ge.all(qn).catch(function(){})}),function(qn){var Tn;return!(!E(qn)||"function"!=typeof(Tn=qn.then))&&Tn}),Xn=function(qn,Tn,ct){var pt;Tn.notified||(Tn.notified=!0,pt=Tn.reactions,re(function(){for(var Qe,xt,fn=Tn.value,Cn=1==Tn.state,jn=0;pt.length>jn;){var on,xn,Pn,Un=pt[jn++],yn=Cn?Un.ok:Un.fail,qt=Un.resolve,_n=Un.reject,Kt=Un.domain;try{yn?(Cn||(2===Tn.rejection&&function(ln,Zn){H.call(d,function(){Rt?ut.emit("rejectionHandled",ln):Mn("rejectionhandled",ln,Zn.value)})}(qn,Tn),Tn.rejection=1),!0===yn?on=fn:(Kt&&Kt.enter(),on=yn(fn),Kt&&(Kt.exit(),Pn=!0)),on===Un.promise?_n(Le("Promise-chain cycle")):(xn=bn(on))?xn.call(on,qt,_n):qt(on)):_n(fn)}catch(ln){Kt&&!Pn&&Kt.exit(),_n(ln)}}Tn.reactions=[],Tn.notified=!1,ct&&!Tn.rejection&&(Qe=qn,xt=Tn,H.call(d,function(){var ln=xt.value,Zn=gr(xt);if(Zn&&(Zn=oe(function(){Rt?ut.emit("unhandledRejection",ln,Qe):Mn(lt,Qe,ln)}),xt.rejection=Rt||gr(xt)?2:1,Zn.error))throw Zn.value}))}))},Mn=function(qn,Tn,ct){var pt;Bt?((pt=Ke.createEvent("Event")).promise=Tn,pt.reason=ct,pt.initEvent(qn,!1,!0),d.dispatchEvent(pt)):pt={promise:Tn,reason:ct},(Tn=d["on"+qn])?Tn(pt):qn===lt&&_e("Unhandled promise rejection",ct)},gr=function(qn){return 1!==qn.rejection&&!qn.parent},Ln=function(qn,Tn,ct,pt){return function(Qe){qn(Tn,ct,Qe,pt)}},nr=function(qn,Tn,ct,pt){Tn.done||(Tn.done=!0,(Tn=pt||Tn).value=ct,Tn.state=2,Xn(qn,Tn,!0))},mn=function(qn,Tn,ct,pt){if(!Tn.done){Tn.done=!0,pt&&(Tn=pt);try{if(qn===ct)throw Le("Promise can't be resolved itself");var Qe=bn(ct);Qe?re(function(){var xt={done:!1};try{Qe.call(ct,Ln(mn,qn,xt,Tn),Ln(nr,qn,xt,Tn))}catch(fn){nr(qn,xt,fn,Tn)}}):(Tn.value=ct,Tn.state=1,Xn(qn,Tn,!1))}catch(xt){nr(qn,{done:!1},xt,Tn)}}};hn&&(ge=function(qn){k(this,ge,Ce),S(qn),M.call(this);var Tn=et(this);try{qn(Ln(mn,this,Tn),Ln(nr,this,Tn))}catch(ct){nr(this,Tn,ct)}},(M=function(qn){le(this,{type:Ce,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(ge.prototype,{then:function(qn,Tn){var ct=V(this),pt=Nt(ee(this,ge));return pt.ok="function"!=typeof qn||qn,pt.fail="function"==typeof Tn&&Tn,pt.domain=Rt?ut.domain:void 0,ct.parent=!0,ct.reactions.push(pt),0!=ct.state&&Xn(this,ct,!1),pt.promise},catch:function(qn){return this.then(void 0,qn)}}),A=function(){var qn=new M,Tn=et(qn);this.promise=qn,this.resolve=Ln(mn,qn,Tn),this.reject=Ln(nr,qn,Tn)},xe.f=Nt=function(qn){return qn===ge||qn===b?new A:dt(qn)},D||"function"!=typeof h||(w=h.prototype.then,p(h.prototype,"then",function(qn,Tn){var ct=this;return new ge(function(pt,Qe){w.call(ct,pt,Qe)}).then(qn,Tn)},{unsafe:!0}),"function"==typeof _t&&I({global:!0,enumerable:!0,forced:!0},{fetch:function(qn){return Z(ge,_t.apply(d,arguments))}}))),I({global:!0,wrap:!0,forced:hn},{Promise:ge}),g(ge,Ce,!1,!0),x(Ce),b=f(Ce),I({target:Ce,stat:!0,forced:hn},{reject:function(qn){var Tn=Nt(this);return Tn.reject.call(void 0,qn),Tn.promise}}),I({target:Ce,stat:!0,forced:D||hn},{resolve:function(qn){return Z(D&&this===b?ge:this,qn)}}),I({target:Ce,stat:!0,forced:$n},{all:function(qn){var Tn=this,ct=Nt(Tn),pt=ct.resolve,Qe=ct.reject,xt=oe(function(){var fn=S(Tn.resolve),Cn=[],jn=0,on=1;G(qn,function(xn){var Pn=jn++,Un=!1;Cn.push(void 0),on++,fn.call(Tn,xn).then(function(yn){Un||(Un=!0,Cn[Pn]=yn,--on||pt(Cn))},Qe)}),--on||pt(Cn)});return xt.error&&Qe(xt.value),ct.promise},race:function(qn){var Tn=this,ct=Nt(Tn),pt=ct.reject,Qe=oe(function(){var xt=S(Tn.resolve);G(qn,function(fn){xt.call(Tn,fn).then(ct.resolve,pt)})});return Qe.error&&pt(Qe.value),ct.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(d,ve,K){var M=d("../internals/export"),m=d("../internals/get-built-in"),A=d("../internals/a-function"),b=d("../internals/an-object"),w=d("../internals/is-object"),I=d("../internals/object-create"),D=d("../internals/function-bind"),f=(d=d("../internals/fails"),m("Reflect","construct")),h=d(function(){function g(){}return!(f(function(){},[],g)instanceof g)}),p=!d(function(){f(function(){})});M({target:"Reflect",stat:!0,forced:m=h||p,sham:m},{construct:function(g,x){A(g),b(x);var E=arguments.length<3?g:A(arguments[2]);if(p&&!h)return f(g,x,E);if(g==E){switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(D.apply(g,S))}return E=I(w(S=E.prototype)?S:Object.prototype),S=Function.apply.call(g,E,x),w(S)?S:E}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(l,ve,K){var M=l("../internals/export"),A=l("../internals/is-object"),b=l("../internals/an-object"),w=l("../internals/has"),I=l("../internals/object-get-own-property-descriptor"),D=l("../internals/object-get-prototype-of");M({target:"Reflect",stat:!0},{get:function d(f,h){var p,m=arguments.length<3?f:arguments[2];return b(f)===m?f[h]:(p=I.f(f,h))?w(p,"value")?p.value:void 0===p.get?void 0:p.get.call(m):A(p=D(f))?d(p,h,m):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(l,ve,K){var M=l("../internals/descriptors"),A=l("../internals/global"),b=l("../internals/is-forced"),w=l("../internals/inherit-if-required"),I=l("../internals/object-define-property").f,D=l("../internals/object-get-own-property-names").f,d=l("../internals/is-regexp"),f=l("../internals/regexp-flags"),h=l("../internals/regexp-sticky-helpers"),p=l("../internals/redefine"),m=l("../internals/fails"),g=l("../internals/internal-state").set,x=l("../internals/set-species"),E=l("../internals/well-known-symbol")("match"),S=A.RegExp,k=S.prototype,X=/a/g,Y=/a/g,G=new S(X)!==X,z=h.UNSUPPORTED_Y;if(M&&b("RegExp",!G||z||m(function(){return Y[E]=!1,S(X)!=X||S(Y)==Y||"/a/i"!=S(X,"i")}))){for(var ee=function(Z,_e){var xe,oe=this instanceof ee,me=d(Z),ne=void 0===_e;return!oe&&me&&Z.constructor===ee&&ne?Z:(G?me&&!ne&&(Z=Z.source):Z instanceof ee&&(ne&&(_e=f.call(Z)),Z=Z.source),z&&(xe=!!_e&&-1<_e.indexOf("y"))&&(_e=_e.replace(/y/g,"")),me=w(G?new S(Z,_e):S(Z,_e),oe?this:k,ee),z&&xe&&g(me,{sticky:xe}),me)},H=D(S),re=0;H.length>re;)!function(Z){Z in ee||I(ee,Z,{configurable:!0,get:function(){return S[Z]},set:function(_e){S[Z]=_e}})}(H[re++]);(k.constructor=ee).prototype=k,p(A,"RegExp",ee)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(A,ve,K){"use strict";var M=A("../internals/export");A=A("../internals/regexp-exec"),M({target:"RegExp",proto:!0,forced:/./.exec!==A},{exec:A})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(w,ve,K){"use strict";var M=w("../internals/redefine"),A=w("../internals/an-object"),d=w("../internals/fails"),b=w("../internals/regexp-flags"),I=(w="toString",RegExp.prototype),D=I[w];((d=d(function(){return"/a/b"!=D.call({source:"a",flags:"b"})}))||D.name!=w)&&M(RegExp.prototype,w,function(){var h=A(this),p=String(h.source),m=h.flags;return"/"+p+"/"+String(void 0===m&&h instanceof RegExp&&!("flags"in I)?b.call(h):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(A,ve,K){"use strict";var M=A("../internals/collection");A=A("../internals/collection-strong"),ve.exports=M("Set",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},A)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(D,ve,K){"use strict";var M=D("../internals/export"),A=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".endsWith),f=Math.min;h=h("endsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=A(String.prototype,"endsWith"))&&!M.writable||h)},{endsWith:function(p){var m=String(I(this)),g=(w(p),1<arguments.length?arguments[1]:void 0),x=b(m.length);return g=void 0===g?x:f(b(g),x),x=String(p),d?d.call(m,x,g):m.slice(g-x.length,g)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/not-a-regexp"),b=l("../internals/require-object-coercible");M({target:"String",proto:!0,forced:!l("../internals/correct-is-regexp-logic")("includes")},{includes:function(w){return!!~String(b(this)).indexOf(A(w),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(b,ve,K){"use strict";var M=b("../internals/string-multibyte").charAt,A=b("../internals/internal-state"),w=(b=b("../internals/define-iterator"),"String Iterator"),I=A.set,D=A.getterFor(w);b(String,"String",function(d){I(this,{type:w,string:String(d),index:0})},function(){var d=D(this),f=d.string,h=d.index;return h>=f.length?{value:void 0,done:!0}:(f=M(f,h),d.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(l,ve,K){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),A=l("../internals/an-object"),b=l("../internals/to-length"),w=l("../internals/require-object-coercible"),I=l("../internals/advance-string-index"),D=l("../internals/regexp-exec-abstract");M("match",1,function(d,f,h){return[function(p){var m=w(this),g=null==p?void 0:p[d];return void 0!==g?g.call(p,m):new RegExp(p)[d](String(m))},function(p){var m=h(f,p,this);if(m.done)return m.value;var g=A(p),x=String(this);if(!g.global)return D(g,x);for(var E=g.unicode,S=[],k=g.lastIndex=0;null!==(X=D(g,x));){var X=String(X[0]);""===(S[k]=X)&&(g.lastIndex=I(x,b(g.lastIndex),E)),k++}return 0===k?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/string-pad").start;M({target:"String",proto:!0,forced:l("../internals/string-pad-webkit-bug")},{padStart:function(b){return A(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(l,ve,K){l("../internals/export")({target:"String",proto:!0},{repeat:l("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(l,ve,K){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),A=l("../internals/an-object"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/to-integer"),D=l("../internals/require-object-coercible"),d=l("../internals/advance-string-index"),f=l("../internals/regexp-exec-abstract"),h=Math.max,p=Math.min,m=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;M("replace",2,function(E,S,k,X){var Y=X.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,G=X.REPLACE_KEEPS_$0,z=Y?"$":"$0";return[function(ee,H){var re=D(this),Z=null==ee?void 0:ee[E];return void 0!==Z?Z.call(ee,re,H):S.call(String(re),ee,H)},function(ee,H){if(!Y&&G||"string"==typeof H&&-1===H.indexOf(z)){var re=k(S,ee,this,H);if(re.done)return re.value}for(var Z,_e=A(ee),xe=String(this),oe="function"==typeof H,me=(oe||(H=String(H)),_e.global),ne=(me&&(Z=_e.unicode,_e.lastIndex=0),[]);null!==(le=f(_e,xe))&&(ne.push(le),me);)""===String(le[0])&&(_e.lastIndex=d(xe,w(_e.lastIndex),Z));for(var J,he="",Ce=0,et=0;et<ne.length;et++){for(var le=ne[et],V=String(le[0]),ge=h(p(I(le.index),xe.length),0),Le=[],Ke=1;Ke<le.length;Ke++)Le.push(void 0===(J=le[Ke])?J:String(J));var ut=le.groups,_t=oe?(_t=[V].concat(Le,ge,xe),void 0!==ut&&_t.push(ut),String(H.apply(void 0,_t))):function(Nt,dt,Rt,Bt,lt,It){var Tt=Rt+Nt.length,Ot=Bt.length,vt=x;return void 0!==lt&&(lt=b(lt),vt=g),S.call(It,vt,function(Gt,hn){var $n;switch(hn.charAt(0)){case"$":return"$";case"&":return Nt;case"`":return dt.slice(0,Rt);case"'":return dt.slice(Tt);case"<":$n=lt[hn.slice(1,-1)];break;default:var bn,Xn=+hn;if(0==Xn)return Gt;if(Ot<Xn)return 0!==(bn=m(Xn/10))&&bn<=Ot?void 0===Bt[bn-1]?hn.charAt(1):Bt[bn-1]+hn.charAt(1):Gt;$n=Bt[Xn-1]}return void 0===$n?"":$n})}(V,xe,ge,Le,ut,H);Ce<=ge&&(he+=xe.slice(Ce,ge)+_t,Ce=ge+V.length)}return he+xe.slice(Ce)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(l,ve,K){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),A=l("../internals/an-object"),b=l("../internals/require-object-coercible"),w=l("../internals/same-value"),I=l("../internals/regexp-exec-abstract");M("search",1,function(D,d,f){return[function(h){var p=b(this),m=null==h?void 0:h[D];return void 0!==m?m.call(h,p):new RegExp(h)[D](String(p))},function(h){var p,m=f(d,h,this);return m.done?m.value:(m=A(h),h=String(this),w(p=m.lastIndex,0)||(m.lastIndex=0),h=I(m,h),w(m.lastIndex,p)||(m.lastIndex=p),null===h?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(p,ve,K){"use strict";var M=p("../internals/fix-regexp-well-known-symbol-logic"),A=p("../internals/is-regexp"),b=p("../internals/an-object"),w=p("../internals/require-object-coercible"),I=p("../internals/species-constructor"),D=p("../internals/advance-string-index"),d=p("../internals/to-length"),f=p("../internals/regexp-exec-abstract"),h=p("../internals/regexp-exec"),m=(p=p("../internals/fails"),[].push),g=Math.min,x=4294967295,E=!p(function(){return!RegExp(x,"y")});M("split",2,function(S,k,X){var Y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(G,z){var ee=String(w(this)),H=void 0===z?x:z>>>0;if(0==H)return[];if(void 0===G)return[ee];if(!A(G))return k.call(ee,G,H);for(var re,Z,_e,xe=[],oe=(z=(G.ignoreCase?"i":"")+(G.multiline?"m":"")+(G.unicode?"u":"")+(G.sticky?"y":""),0),me=new RegExp(G.source,z+"g");(re=h.call(me,ee))&&!(oe<(Z=me.lastIndex)&&(xe.push(ee.slice(oe,re.index)),1<re.length&&re.index<ee.length&&m.apply(xe,re.slice(1)),_e=re[0].length,oe=Z,xe.length>=H));)me.lastIndex===re.index&&me.lastIndex++;return oe===ee.length?!_e&&me.test("")||xe.push(""):xe.push(ee.slice(oe)),xe.length>H?xe.slice(0,H):xe}:"0".split(void 0,0).length?function(G,z){return void 0===G&&0===z?[]:k.call(this,G,z)}:k;return[function(G,z){var ee=w(this),H=null==G?void 0:G[S];return void 0!==H?H.call(G,ee,z):Y.call(String(ee),G,z)},function(re,z){if((ee=X(Y,re,this,z,Y!==k)).done)return ee.value;var ee=b(re),H=String(this),Z=(re=I(ee,RegExp),ee.unicode),xe=new re(E?ee:"^(?:"+ee.source+")",(ee.ignoreCase?"i":"")+(ee.multiline?"m":"")+(ee.unicode?"u":"")+(E?"y":"g")),oe=void 0===z?x:z>>>0;if(0==oe)return[];if(0===H.length)return null===f(xe,H)?[H]:[];for(var me=0,ne=0,J=[];ne<H.length;){xe.lastIndex=E?ne:0;var he,Ce=f(xe,E?H:H.slice(ne));if(null===Ce||(he=g(d(xe.lastIndex+(E?0:ne)),H.length))===me)ne=D(H,ne,Z);else{if(J.push(H.slice(me,ne)),J.length===oe)return J;for(var et=1;et<=Ce.length-1;et++)if(J.push(Ce[et]),J.length===oe)return J;ne=me=he}}return J.push(H.slice(me)),J}]},!E)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(D,ve,K){"use strict";var M=D("../internals/export"),A=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".startsWith),f=Math.min;h=h("startsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=A(String.prototype,"startsWith"))&&!M.writable||h)},{startsWith:function(x){var m=String(I(this)),g=(w(x),b(f(1<arguments.length?arguments[1]:void 0,m.length)));return x=String(x),d?d.call(m,x,g):m.slice(g,g+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/create-html");M({target:"String",proto:!0,forced:l("../internals/string-html-forced")("sub")},{sub:function(){return A(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(l,ve,K){"use strict";var M=l("../internals/export"),A=l("../internals/string-trim").trim;M({target:"String",proto:!0,forced:l("../internals/string-trim-forced")("trim")},{trim:function(){return A(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(g,ve,K){"use strict";var M,A,b,w,I,D=g("../internals/export"),d=g("../internals/descriptors"),f=g("../internals/global"),h=g("../internals/has"),p=g("../internals/is-object"),m=g("../internals/object-define-property").f,x=(g=g("../internals/copy-constructor-properties"),f.Symbol);!d||"function"!=typeof x||"description"in x.prototype&&void 0===x().description||(M={},g(A=function(){var E=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),S=this instanceof A?new x(E):void 0===E?x():x(E);return""===E&&(M[S]=!0),S},x),(f=A.prototype=x.prototype).constructor=A,b=f.toString,w="Symbol(test)"==String(x("test")),I=/^Symbol\((.*)\)[^)]+$/,m(f,"description",{configurable:!0,get:function(){var E=p(this)?this.valueOf():this,S=b.call(E);return h(M,E)?"":""===(E=w?S.slice(7,-1):S.replace(I,"$1"))?void 0:E}}),D({global:!0,forced:!0},{Symbol:A}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(l,ve,K){l("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(dt,ve,K){"use strict";function M(Qe,xt){var fn=$n[Qe]=ee(It[Nt]);return Rt(fn,{type:_t,tag:Qe,description:xt}),h||(fn.description=xt),fn}function A(Qe,Cn){k(Qe);var fn=Y(Cn);return Cn=H(fn).concat(pt(fn)),Ke(Cn,function(jn){h&&!ct.call(fn,jn)||Tn(Qe,jn,fn[jn])}),Qe}function b(Cn,jn){var fn;if(Cn=Y(Cn),jn=G(jn,!0),Cn!==lt||!x($n,jn)||x(bn,jn))return!(fn=Ot(Cn,jn))||!x($n,jn)||x(Cn,ut)&&Cn[ut][jn]||(fn.enumerable=!0),fn}function w(xt){xt=Gt(Y(xt));var fn=[];return Ke(xt,function(Cn){x($n,Cn)||x(Ce,Cn)||fn.push(Cn)}),fn}var I=dt("../internals/export"),D=dt("../internals/global"),d=dt("../internals/get-built-in"),f=dt("../internals/is-pure"),h=dt("../internals/descriptors"),p=dt("../internals/native-symbol"),m=dt("../internals/use-symbol-as-uid"),g=dt("../internals/fails"),x=dt("../internals/has"),E=dt("../internals/is-array"),S=dt("../internals/is-object"),k=dt("../internals/an-object"),X=dt("../internals/to-object"),Y=dt("../internals/to-indexed-object"),G=dt("../internals/to-primitive"),z=dt("../internals/create-property-descriptor"),ee=dt("../internals/object-create"),H=dt("../internals/object-keys"),re=dt("../internals/object-get-own-property-names"),Z=dt("../internals/object-get-own-property-names-external"),_e=dt("../internals/object-get-own-property-symbols"),xe=dt("../internals/object-get-own-property-descriptor"),oe=dt("../internals/object-define-property"),me=dt("../internals/object-property-is-enumerable"),ne=dt("../internals/create-non-enumerable-property"),J=dt("../internals/redefine"),he=dt("../internals/shared"),gr=dt("../internals/shared-key"),Ce=dt("../internals/hidden-keys"),et=dt("../internals/uid"),le=dt("../internals/well-known-symbol"),V=dt("../internals/well-known-symbol-wrapped"),ge=dt("../internals/define-well-known-symbol"),Le=dt("../internals/set-to-string-tag"),Ln=dt("../internals/internal-state"),Ke=dt("../internals/array-iteration").forEach,ut=gr("hidden"),_t="Symbol",Nt="prototype",Rt=(dt=le("toPrimitive"),Ln.set),Bt=Ln.getterFor(_t),lt=Object[Nt],It=D.Symbol,Tt=d("JSON","stringify"),Ot=xe.f,vt=oe.f,Gt=Z.f,hn=me.f,$n=he("symbols"),bn=he("op-symbols"),Xn=he("string-to-symbol-registry"),Mn=he("symbol-to-string-registry"),nr=(gr=he("wks"),!(Ln=D.QObject)||!Ln[Nt]||!Ln[Nt].findChild),mn=h&&g(function(){return 7!=ee(vt({},"a",{get:function(){return vt(this,"a",{value:7}).a}})).a})?function(Qe,xt,fn){var Cn=Ot(lt,xt);Cn&&delete lt[xt],vt(Qe,xt,fn),Cn&&Qe!==lt&&vt(lt,xt,Cn)}:vt,qn=m?function(Qe){return"symbol"==typeof Qe}:function(Qe){return Object(Qe)instanceof It},Tn=function(Qe,xt,fn){return Qe===lt&&Tn(bn,xt,fn),k(Qe),xt=G(xt,!0),k(fn),(x($n,xt)?(fn.enumerable?(x(Qe,ut)&&Qe[ut][xt]&&(Qe[ut][xt]=!1),fn=ee(fn,{enumerable:z(0,!1)})):(x(Qe,ut)||vt(Qe,ut,z(1,{})),Qe[ut][xt]=!0),mn):vt)(Qe,xt,fn)},ct=function(xt){xt=G(xt,!0);var fn=hn.call(this,xt);return!(this===lt&&x($n,xt)&&!x(bn,xt))&&(!(fn||!x(this,xt)||!x($n,xt)||x(this,ut)&&this[ut][xt])||fn)},pt=function(fn){var xt=fn===lt,Cn=(fn=Gt(xt?bn:Y(fn)),[]);return Ke(fn,function(jn){!x($n,jn)||xt&&!x(lt,jn)||Cn.push($n[jn])}),Cn};p||(J((It=function(){if(this instanceof It)throw TypeError("Symbol is not a constructor");var Qe=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,xt=et(Qe),fn=function(Cn){this===lt&&fn.call(bn,Cn),x(this,ut)&&x(this[ut],xt)&&(this[ut][xt]=!1),mn(this,xt,z(1,Cn))};return h&&nr&&mn(lt,xt,{configurable:!0,set:fn}),M(xt,Qe)})[Nt],"toString",function(){return Bt(this).tag}),J(It,"withoutSetter",function(Qe){return M(et(Qe),Qe)}),me.f=ct,oe.f=Tn,xe.f=b,re.f=Z.f=w,_e.f=pt,V.f=function(Qe){return M(le(Qe),Qe)},h&&(vt(It[Nt],"description",{configurable:!0,get:function(){return Bt(this).description}}),f||J(lt,"propertyIsEnumerable",ct,{unsafe:!0}))),I({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:It}),Ke(H(gr),function(Qe){ge(Qe)}),I({target:_t,stat:!0,forced:!p},{for:function(fn){var xt;return fn=String(fn),x(Xn,fn)?Xn[fn]:(xt=It(fn),Xn[fn]=xt,Mn[xt]=fn,xt)},keyFor:function(Qe){if(!qn(Qe))throw TypeError(Qe+" is not a symbol");if(x(Mn,Qe))return Mn[Qe]},useSetter:function(){nr=!0},useSimple:function(){nr=!1}}),I({target:"Object",stat:!0,forced:!p,sham:!h},{create:function(Qe,xt){return void 0===xt?ee(Qe):A(ee(Qe),xt)},defineProperty:Tn,defineProperties:A,getOwnPropertyDescriptor:b}),I({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:w,getOwnPropertySymbols:pt}),I({target:"Object",stat:!0,forced:g(function(){_e.f(1)})},{getOwnPropertySymbols:function(Qe){return _e.f(X(Qe))}}),Tt&&I({target:"JSON",stat:!0,forced:!p||g(function(){var Qe=It();return"[null]"!=Tt([Qe])||"{}"!=Tt({a:Qe})||"{}"!=Tt(Object(Qe))})},{stringify:function(Qe,xt,fn){for(var Cn,jn=[Qe],on=1;on<arguments.length;)jn.push(arguments[on++]);if((S(Cn=xt)||void 0!==Qe)&&!qn(Qe))return E(xt)||(xt=function(xn,Pn){if("function"==typeof Cn&&(Pn=Cn.call(this,xn,Pn)),!qn(Pn))return Pn}),jn[1]=xt,Tt.apply(null,jn)}}),It[Nt][dt]||ne(It[Nt],dt,It[Nt].valueOf),Le(It,_t),Ce[ut]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-copy-within"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("copyWithin",function(w,I){return A.call(b(this),w,I,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").every,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("every",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-fill"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("fill",function(w){return A.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").filter,b=l("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("filter",function(D){for(var d=A(w(this),D,1<arguments.length?arguments[1]:void 0),f=(D=b(this,this.constructor),0),h=d.length,p=new(I(D))(h);f<h;)p[f]=d[f++];return p})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").findIndex,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("findIndex",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").find,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("find",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(l,ve,K){l("../internals/typed-array-constructor")("Float32",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],220:[function(l,ve,K){l("../internals/typed-array-constructor")("Float64",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],221:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").forEach,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("forEach",function(w){A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-includes").includes,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("includes",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-includes").indexOf,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("indexOf",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(l,ve,K){l("../internals/typed-array-constructor")("Int16",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],225:[function(l,ve,K){l("../internals/typed-array-constructor")("Int32",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],226:[function(A,ve,K){"use strict";function M(){return b.call(D(this))}var h=A("../internals/global"),f=A("../internals/array-buffer-view-core"),d=A("../modules/es.array.iterator"),b=(A=A("../internals/well-known-symbol")("iterator"),d.values),w=d.keys,I=d.entries,D=f.aTypedArray;d=f.exportTypedArrayMethod,h=!!(f=(h=h.Uint8Array)&&h.prototype[A])&&("values"==f.name||null==f.name),d("entries",function(){return I.call(D(this))}),d("keys",function(){return w.call(D(this))}),d("values",M,!h),d(A,M,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(A,ve,K){"use strict";var M=(A=A("../internals/array-buffer-view-core")).aTypedArray,b=[].join;(A=A.exportTypedArrayMethod)("join",function(w){return b.apply(M(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-last-index-of"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("lastIndexOf",function(w){return A.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").map,b=l("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("map",function(D){return A(w(this),D,1<arguments.length?arguments[1]:void 0,function(d,f){return new(I(b(d,d.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-reduce").right,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduceRight",function(w){return A(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-reduce").left,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduce",function(w){return A(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(A,ve,K){"use strict";var M=(A=A("../internals/array-buffer-view-core")).aTypedArray,b=(A=A.exportTypedArrayMethod,Math.floor);A("reverse",function(){for(var w,I=M(this).length,D=b(I/2),d=0;d<D;)w=this[d],this[d++]=this[--I],this[I]=w;return this})},{"../internals/array-buffer-view-core":12}],233:[function(I,ve,K){"use strict";var M=I("../internals/array-buffer-view-core"),A=I("../internals/to-length"),b=I("../internals/to-offset"),w=I("../internals/to-object"),D=(I=I("../internals/fails"),M.aTypedArray);(0,M.exportTypedArrayMethod)("set",function(d){D(this);var f=b(1<arguments.length?arguments[1]:void 0,1),h=this.length,p=w(d),m=A(p.length),g=0;if(h<m+f)throw RangeError("Wrong length");for(;g<m;)this[f+g]=p[g++]},I(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(A,ve,K){"use strict";var I=A("../internals/array-buffer-view-core"),M=A("../internals/species-constructor"),b=(A=A("../internals/fails"),I.aTypedArray),w=I.aTypedArrayConstructor,D=[].slice;(I=I.exportTypedArrayMethod)("slice",function(d,f){for(var h=D.call(b(this),d,f),p=(d=M(this,this.constructor),0),m=h.length,g=new(w(d))(m);p<m;)g[p]=h[p++];return g},A(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/array-iteration").some,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("some",function(w){return A(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(A,ve,K){"use strict";var M=(A=A("../internals/array-buffer-view-core")).aTypedArray,b=[].sort;(A=A.exportTypedArrayMethod)("sort",function(w){return b.call(M(this),w)})},{"../internals/array-buffer-view-core":12}],237:[function(l,ve,K){"use strict";var M=l("../internals/array-buffer-view-core"),A=l("../internals/to-length"),b=l("../internals/to-absolute-index"),w=l("../internals/species-constructor"),I=M.aTypedArray;(0,M.exportTypedArrayMethod)("subarray",function(p,d){var f=I(this),h=f.length;return p=b(p,h),new(w(f,f.constructor))(f.buffer,f.byteOffset+p*f.BYTES_PER_ELEMENT,A((void 0===d?h:b(d,h))-p))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(A,ve,K){"use strict";var I=A("../internals/global"),M=A("../internals/array-buffer-view-core"),b=(A=A("../internals/fails"),I.Int8Array),w=M.aTypedArray,D=(I=M.exportTypedArrayMethod,[].toLocaleString),d=[].slice,f=!!b&&A(function(){D.call(new b(1))});I("toLocaleString",function(){return D.apply(f?d.call(w(this)):w(this),arguments)},A(function(){return[1,2].toLocaleString()!=new b([1,2]).toLocaleString()})||!A(function(){b.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(A,ve,K){"use strict";var M=A("../internals/array-buffer-view-core").exportTypedArrayMethod,I=A("../internals/fails"),b=(A=(A=A("../internals/global").Uint8Array)&&A.prototype||{},[].toString),w=[].join;I(function(){b.call({})})&&(b=function(){return w.call(this)}),M("toString",b,I=A.toString!=b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(l,ve,K){l("../internals/typed-array-constructor")("Uint16",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],241:[function(l,ve,K){l("../internals/typed-array-constructor")("Uint32",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],242:[function(l,ve,K){l("../internals/typed-array-constructor")("Uint8",function(M){return function(A,b,w){return M(this,A,b,w)}})},{"../internals/typed-array-constructor":144}],243:[function(l,ve,K){l("../internals/typed-array-constructor")("Uint8",function(M){return function(A,b,w){return M(this,A,b,w)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(x,k,K){"use strict";function M(X){return function(){return X(this,arguments.length?arguments[0]:void 0)}}var A,b,w,I,D,E=x("../internals/global"),d=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),h=x("../internals/collection"),p=x("../internals/collection-weak"),m=x("../internals/is-object"),g=x("../internals/internal-state").enforce,S=(x=x("../internals/native-weak-map"),E=!E.ActiveXObject&&"ActiveXObject"in E,Object.isExtensible);k=k.exports=h("WeakMap",M,p),x&&E&&(A=p.getConstructor(M,"WeakMap",!0),f.REQUIRED=!0,b=(h=k.prototype).delete,w=h.has,I=h.get,D=h.set,d(h,{delete:function(X){var Y;return m(X)&&!S(X)?((Y=g(this)).frozen||(Y.frozen=new A),b.call(this,X)||Y.frozen.delete(X)):b.call(this,X)},has:function(X){var Y;return m(X)&&!S(X)?((Y=g(this)).frozen||(Y.frozen=new A),w.call(this,X)||Y.frozen.has(X)):w.call(this,X)},get:function(X){var Y;return!m(X)||S(X)||((Y=g(this)).frozen||(Y.frozen=new A),w.call(this,X))?I.call(this,X):Y.frozen.get(X)},set:function(X,Y){var G;return!m(X)||S(X)||((G=g(this)).frozen||(G.frozen=new A),w.call(this,X))?D.call(this,X,Y):G.frozen.set(X,Y),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(l,ve,K){var M,A=l("../internals/global"),b=l("../internals/dom-iterables"),w=l("../internals/array-for-each"),I=l("../internals/create-non-enumerable-property");for(M in b){var D;if((D=(D=A[M])&&D.prototype)&&D.forEach!==w)try{I(D,"forEach",w)}catch{D.forEach=w}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(D,ve,K){var M,A=D("../internals/global"),b=D("../internals/dom-iterables"),w=D("../modules/es.array.iterator"),I=D("../internals/create-non-enumerable-property"),d=(D=D("../internals/well-known-symbol"))("iterator"),f=D("toStringTag"),h=w.values;for(M in b){var p=A[M],m=p&&p.prototype;if(m){if(m[d]!==h)try{I(m,d,h)}catch{m[d]=h}if(m[f]||I(m,f,M),b[M])for(var g in w)if(m[g]!==w[g])try{I(m,g,w[g])}catch{m[g]=w[g]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(ut,ve,K){"use strict";function M(_t){try{return decodeURIComponent(_t)}catch{return _t}}function A(_t){return ge[_t]}function b(_t){return encodeURIComponent(_t).replace(V,A)}function w(_t){this.entries.length=0,Le(this.entries,_t)}function I(_t,Nt){if(_t<Nt)throw TypeError("Not enough arguments")}function D(){E(this,D,oe);var _t,Nt,dt,Rt,Bt,lt,It,Tt,Ot=0<arguments.length?arguments[0]:void 0,vt=[];if(ne(this,{type:oe,entries:vt,updateURL:function(){},updateSearchParams:w}),void 0!==Ot)if(G(Ot))if("function"==typeof(_t=re(Ot)))for(dt=(Nt=_t.call(Ot)).next;!(Rt=dt.call(Nt)).done;){if((lt=(Bt=(Rt=H(Y(Rt.value))).next).call(Rt)).done||(It=Bt.call(Rt)).done||!Bt.call(Rt).done)throw TypeError("Expected sequence with length 2");vt.push({key:lt.value+"",value:It.value+""})}else for(Tt in Ot)S(Ot,Tt)&&vt.push({key:Tt,value:Ot[Tt]+""});else Le(vt,"string"==typeof Ot?"?"===Ot.charAt(0)?Ot.slice(1):Ot:Ot+"")}ut("../modules/es.array.iterator");var d=ut("../internals/export"),xe=ut("../internals/get-built-in"),f=ut("../internals/native-url"),h=ut("../internals/redefine"),p=ut("../internals/redefine-all"),m=ut("../internals/set-to-string-tag"),g=ut("../internals/create-iterator-constructor"),x=ut("../internals/internal-state"),E=ut("../internals/an-instance"),S=ut("../internals/has"),k=ut("../internals/function-bind-context"),X=ut("../internals/classof"),Y=ut("../internals/an-object"),G=ut("../internals/is-object"),z=ut("../internals/object-create"),ee=ut("../internals/create-property-descriptor"),H=ut("../internals/get-iterator"),re=ut("../internals/get-iterator-method"),Z=(ut=ut("../internals/well-known-symbol"),xe("fetch")),_e=xe("Headers"),oe=(xe=ut("iterator"),"URLSearchParams"),me=oe+"Iterator",ne=x.set,J=x.getterFor(oe),he=x.getterFor(me),Ce=/\+/g,et=Array(4),le=function(_t){var Nt,dt=_t.replace(Ce," "),Rt=4;try{return decodeURIComponent(dt)}catch{for(;Rt;)dt=dt.replace((Nt=Rt--,et[Nt-1]||(et[Nt-1]=RegExp("((?:%[\\da-f]{2}){"+Nt+"})","gi"))),M);return dt}},V=/[!'()~]|%20/g,ge={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Le=function(_t,Nt){if(Nt)for(var dt,Rt=Nt.split("&"),Bt=0;Bt<Rt.length;)(dt=Rt[Bt++]).length&&(dt=dt.split("="),_t.push({key:le(dt.shift()),value:le(dt.join("="))}))},Ke=g(function(_t,Nt){ne(this,{type:me,iterator:H(J(_t).entries),kind:Nt})},"Iterator",function(){var Nt,_t=(Nt=he(this)).kind,dt=(Nt=Nt.iterator.next()).value;return Nt.done||(Nt.value="keys"===_t?dt.key:"values"===_t?dt.value:[dt.key,dt.value]),Nt});p(ut=D.prototype,{append:function(_t,Nt){I(arguments.length,2);var dt=J(this);dt.entries.push({key:_t+"",value:Nt+""}),dt.updateURL()},delete:function(_t){I(arguments.length,1);for(var Nt=J(this),dt=Nt.entries,Rt=_t+"",Bt=0;Bt<dt.length;)dt[Bt].key===Rt?dt.splice(Bt,1):Bt++;Nt.updateURL()},get:function(_t){I(arguments.length,1);for(var Nt=J(this).entries,dt=_t+"",Rt=0;Rt<Nt.length;Rt++)if(Nt[Rt].key===dt)return Nt[Rt].value;return null},getAll:function(_t){I(arguments.length,1);for(var Nt=J(this).entries,dt=_t+"",Rt=[],Bt=0;Bt<Nt.length;Bt++)Nt[Bt].key===dt&&Rt.push(Nt[Bt].value);return Rt},has:function(_t){I(arguments.length,1);for(var Nt=J(this).entries,dt=_t+"",Rt=0;Rt<Nt.length;)if(Nt[Rt++].key===dt)return!0;return!1},set:function(_t,Nt){I(arguments.length,1);for(var dt,Rt=J(this),Bt=Rt.entries,lt=!1,It=_t+"",Tt=Nt+"",Ot=0;Ot<Bt.length;Ot++)(dt=Bt[Ot]).key===It&&(lt?Bt.splice(Ot--,1):(lt=!0,dt.value=Tt));lt||Bt.push({key:It,value:Tt}),Rt.updateURL()},sort:function(){for(var _t,Nt,dt=J(this),Rt=dt.entries,Bt=Rt.slice(),lt=Rt.length=0;lt<Bt.length;lt++){for(_t=Bt[lt],Nt=0;Nt<lt;Nt++)if(Rt[Nt].key>_t.key){Rt.splice(Nt,0,_t);break}Nt===lt&&Rt.push(_t)}dt.updateURL()},forEach:function(_t){for(var Nt,dt=J(this).entries,Rt=k(_t,1<arguments.length?arguments[1]:void 0,3),Bt=0;Bt<dt.length;)Rt((Nt=dt[Bt++]).value,Nt.key,this)},keys:function(){return new Ke(this,"keys")},values:function(){return new Ke(this,"values")},entries:function(){return new Ke(this,"entries")}},{enumerable:!0}),h(ut,xe,ut.entries),h(ut,"toString",function(){for(var _t,Nt=J(this).entries,dt=[],Rt=0;Rt<Nt.length;)_t=Nt[Rt++],dt.push(b(_t.key)+"="+b(_t.value));return dt.join("&")},{enumerable:!0}),m(D,oe),d({global:!0,forced:!f},{URLSearchParams:D}),f||"function"!=typeof Z||"function"!=typeof _e||d({global:!0,enumerable:!0,forced:!0},{fetch:function(Bt){var Nt,dt,Rt;return Bt=[Bt],1<arguments.length&&(G(Nt=arguments[1])&&X(dt=Nt.body)===oe&&((Rt=Nt.headers?new _e(Nt.headers):new _e).has("content-type")||Rt.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Nt=z(Nt,{body:ee(0,String(dt)),headers:ee(0,Rt)})),Bt.push(Nt)),Z.apply(this,Bt)}}),ve.exports={URLSearchParams:D,getState:J}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(H,ve,K){"use strict";function M(O){var ie,q,ce,Ge;if("number"==typeof O){for(ie=[],q=0;q<4;q++)ie.unshift(O%256),O=me(O/256);return ie.join(".")}if("object"!=typeof O)return O;for(ie="",ce=It(O),q=0;q<8;q++)Ge&&0===O[q]||(Ge=Ge&&!1,ce===q?(ie+=q?":":"::",Ge=!0):(ie+=O[q].toString(16),q<7&&(ie+=":")));return"["+ie+"]"}function A(O){return!O.host||O.cannotBeABaseURL||"file"==O.scheme}function b(O,ie,q,ce){var Ge,He,gt,Vt=q||qn,cn=0,Ve="",We=!1,ft=!1,nt=!1;for(q||(O.scheme="",O.username="",O.password="",O.host=null,O.port=null,O.path=[],O.query=null,O.fragment=null,O.cannotBeABaseURL=!1,ie=ie.replace(Rt,"")),ie=ie.replace(Bt,""),Ge=X(ie);cn<=Ge.length;){switch(He=Ge[cn],Vt){case qn:if(!He||!le.test(He)){if(q)return he;Vt=ct;continue}Ve+=He.toLowerCase(),Vt=Tn;break;case Tn:if(He&&(V.test(He)||"+"==He||"-"==He||"."==He))Ve+=He.toLowerCase();else{if(":"!=He){if(q)return he;Ve="",Vt=ct,cn=0;continue}if(q&&(bn(O)!=S($n,Ve)||"file"==Ve&&(Xn(O)||null!==O.port)||"file"==O.scheme&&!O.host))return;if(O.scheme=Ve,q)return void(bn(O)&&$n[O.scheme]==O.port&&(O.port=null));Ve="","file"==O.scheme?Vt=yn:bn(O)&&ce&&ce.scheme==O.scheme?Vt=pt:bn(O)?Vt=Cn:"/"==Ge[cn+1]?(Vt=Qe,cn++):(O.cannotBeABaseURL=!0,O.path.push(""),Vt=Zn)}break;case ct:if(!ce||ce.cannotBeABaseURL&&"#"!=He)return he;if(ce.cannotBeABaseURL&&"#"==He){O.scheme=ce.scheme,O.path=ce.path.slice(),O.query=ce.query,O.fragment="",O.cannotBeABaseURL=!0,Vt=sn;break}Vt="file"==ce.scheme?yn:xt;continue;case pt:if("/"!=He||"/"!=Ge[cn+1]){Vt=xt;continue}Vt=jn,cn++;break;case Qe:if("/"==He){Vt=on;break}Vt=ln;continue;case xt:if(O.scheme=ce.scheme,He==D)O.username=ce.username,O.password=ce.password,O.host=ce.host,O.port=ce.port,O.path=ce.path.slice(),O.query=ce.query;else if("/"==He||"\\"==He&&bn(O))Vt=fn;else if("?"==He)O.username=ce.username,O.password=ce.password,O.host=ce.host,O.port=ce.port,O.path=ce.path.slice(),O.query="",Vt=Ut;else{if("#"!=He){O.username=ce.username,O.password=ce.password,O.host=ce.host,O.port=ce.port,O.path=ce.path.slice(),O.path.pop(),Vt=ln;continue}O.username=ce.username,O.password=ce.password,O.host=ce.host,O.port=ce.port,O.path=ce.path.slice(),O.query=ce.query,O.fragment="",Vt=sn}break;case fn:if(!bn(O)||"/"!=He&&"\\"!=He){if("/"!=He){O.username=ce.username,O.password=ce.password,O.host=ce.host,O.port=ce.port,Vt=ln;continue}Vt=on}else Vt=jn;break;case Cn:if(Vt=jn,"/"!=He||"/"!=Ve.charAt(cn+1))continue;cn++;break;case jn:if("/"==He||"\\"==He)break;Vt=on;continue;case on:if("@"==He){We&&(Ve="%40"+Ve),We=!0;for(var Dt=X(Ve),un=0;un<Dt.length;un++){var Bn=Dt[un];":"!=Bn||nt?(Bn=hn(Bn,Gt),nt?O.password+=Bn:O.username+=Bn):nt=!0}Ve=""}else if(He==D||"/"==He||"?"==He||"#"==He||"\\"==He&&bn(O)){if(We&&""==Ve)return J;cn-=X(Ve).length+1,Ve="",Vt=xn}else Ve+=He;break;case xn:case Pn:if(q&&"file"==O.scheme){Vt=_n;continue}if(":"!=He||ft){if(He==D||"/"==He||"?"==He||"#"==He||"\\"==He&&bn(O)){if(bn(O)&&""==Ve)return Ce;if(q&&""==Ve&&(Xn(O)||null!==O.port))return;if(gt=lt(O,Ve))return gt;if(Ve="",Vt=Kt,q)return;continue}"["==He?ft=!0:"]"==He&&(ft=!1),Ve+=He}else{if(""==Ve)return Ce;if(gt=lt(O,Ve))return gt;if(Ve="",Vt=Un,q==Pn)return}break;case Un:if(!ge.test(He)){if(He==D||"/"==He||"?"==He||"#"==He||"\\"==He&&bn(O)||q){if(""!=Ve){var ar=parseInt(Ve,10);if(65535<ar)return et;O.port=bn(O)&&ar===$n[O.scheme]?null:ar,Ve=""}if(q)return;Vt=Kt;continue}return et}Ve+=He;break;case yn:if(O.scheme="file","/"==He||"\\"==He)Vt=qt;else{if(!ce||"file"!=ce.scheme){Vt=ln;continue}if(He==D)O.host=ce.host,O.path=ce.path.slice(),O.query=ce.query;else if("?"==He)O.host=ce.host,O.path=ce.path.slice(),O.query="",Vt=Ut;else{if("#"!=He){gr(Ge.slice(cn).join(""))||(O.host=ce.host,O.path=ce.path.slice(),Ln(O)),Vt=ln;continue}O.host=ce.host,O.path=ce.path.slice(),O.query=ce.query,O.fragment="",Vt=sn}}break;case qt:if("/"==He||"\\"==He){Vt=_n;break}ce&&"file"==ce.scheme&&!gr(Ge.slice(cn).join(""))&&(Mn(ce.path[0],!0)?O.path.push(ce.path[0]):O.host=ce.host),Vt=ln;continue;case _n:if(He==D||"/"==He||"\\"==He||"?"==He||"#"==He){if(!q&&Mn(Ve))Vt=ln;else{if(""==Ve){if(O.host="",q)return}else{if(gt=lt(O,Ve))return gt;if("localhost"==O.host&&(O.host=""),q)return;Ve=""}Vt=Kt}continue}Ve+=He;break;case Kt:if(bn(O)){if(Vt=ln,"/"!=He&&"\\"!=He)continue}else if(q||"?"!=He)if(q||"#"!=He){if(He!=D&&(Vt=ln,"/"!=He))continue}else O.fragment="",Vt=sn;else O.query="",Vt=Ut;break;case ln:if(He==D||"/"==He||"\\"==He&&bn(O)||!q&&("?"==He||"#"==He)){if(mn(Ve)?(Ln(O),"/"==He||"\\"==He&&bn(O)||O.path.push("")):nr(Ve)?"/"==He||"\\"==He&&bn(O)||O.path.push(""):("file"==O.scheme&&!O.path.length&&Mn(Ve)&&(O.host&&(O.host=""),Ve=Ve.charAt(0)+":"),O.path.push(Ve)),Ve="","file"==O.scheme&&(He==D||"?"==He||"#"==He))for(;1<O.path.length&&""===O.path[0];)O.path.shift();"?"==He?(O.query="",Vt=Ut):"#"==He&&(O.fragment="",Vt=sn)}else Ve+=hn(He,vt);break;case Zn:"?"==He?(O.query="",Vt=Ut):"#"==He?(O.fragment="",Vt=sn):He!=D&&(O.path[0]+=hn(He,Tt));break;case Ut:q||"#"!=He?He!=D&&("'"==He&&bn(O)?O.query+="%27":O.query+="#"==He?"%23":hn(He,Tt)):(O.fragment="",Vt=sn);break;case sn:He!=D&&(O.fragment+=hn(He,Ot))}cn++}}function w(He){var ie,q,ce=E(this,w,"URL"),Ge=1<arguments.length?arguments[1]:void 0,gt=(He=String(He),xe(ce,{type:"URL"}));if(void 0!==Ge)if(Ge instanceof w)ie=oe(Ge);else if(q=b(ie={},String(Ge)))throw TypeError(q);if(q=b(gt,He,null,ie))throw TypeError(q);var Vt=gt.searchParams=new Z;(Ge=_e(Vt)).updateSearchParams(gt.query),Ge.updateURL=function(){gt.query=String(Vt)||null},p||(ce.href=Sn.call(ce),ce.origin=zn.call(ce),ce.protocol=cr.call(ce),ce.username=sr.call(ce),ce.password=yr.call(ce),ce.host=Tr.call(ce),ce.hostname=te.call(ce),ce.port=De.call(ce),ce.pathname=Ye.call(ce),ce.search=T.call(ce),ce.searchParams=N.call(ce),ce.hash=B.call(ce))}function I(O,ie){return{get:O,set:ie,configurable:!0,enumerable:!0}}H("../modules/es.string.iterator");var D,d,f,h=H("../internals/export"),p=H("../internals/descriptors"),m=H("../internals/native-url"),On=H("../internals/global"),g=H("../internals/object-define-properties"),x=H("../internals/redefine"),E=H("../internals/an-instance"),S=H("../internals/has"),k=H("../internals/object-assign"),X=H("../internals/array-from"),Y=H("../internals/string-multibyte").codeAt,G=H("../internals/string-punycode-to-ascii"),z=H("../internals/set-to-string-tag"),ee=H("../modules/web.url-search-params"),re=(H=H("../internals/internal-state"),On.URL),Z=ee.URLSearchParams,_e=ee.getState,xe=H.set,oe=H.getterFor("URL"),me=Math.floor,ne=Math.pow,J="Invalid authority",he="Invalid scheme",Ce="Invalid host",et="Invalid port",le=/[A-Za-z]/,V=/[\d+-.A-Za-z]/,ge=/\d/,Le=/^(0x|0X)/,Ke=/^[0-7]+$/,ut=/^\d+$/,_t=/^[\dA-Fa-f]+$/,Nt=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,dt=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Rt=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Bt=/[\u0009\u000A\u000D]/g,lt=function(O,ie){var q,ce,Ge;if("["==ie.charAt(0))return"]"==ie.charAt(ie.length-1)&&(q=function(He){var We,ft,nt,Dt,un,Bn,ar,gt=[0,0,0,0,0,0,0,0],Vt=0,cn=null,Ve=0,Pr=function(){return He.charAt(Ve)};if(":"==Pr()){if(":"!=He.charAt(1))return;Ve+=2,cn=++Vt}for(;Pr();){if(8==Vt)return;if(":"!=Pr()){for(We=ft=0;ft<4&&_t.test(Pr());)We=16*We+parseInt(Pr(),16),Ve++,ft++;if("."==Pr()){if(0==ft||(Ve-=ft,Vt>6))return;for(nt=0;Pr();){if(Dt=null,nt>0){if(!("."==Pr()&&nt<4))return;Ve++}if(!ge.test(Pr()))return;for(;ge.test(Pr());){if(un=parseInt(Pr(),10),null===Dt)Dt=un;else{if(0==Dt)return;Dt=10*Dt+un}if(Dt>255)return;Ve++}gt[Vt]=256*gt[Vt]+Dt,(2==++nt||4==nt)&&Vt++}if(4!=nt)return;break}if(":"==Pr()){if(Ve++,!Pr())return}else if(Pr())return;gt[Vt++]=We}else{if(null!==cn)return;Ve++,cn=++Vt}}if(null!==cn)for(Bn=Vt-cn,Vt=7;0!=Vt&&Bn>0;)ar=gt[Vt],gt[Vt--]=gt[cn+Bn-1],gt[cn+--Bn]=ar;else if(8!=Vt)return;return gt}(ie.slice(1,-1)))?void(O.host=q):Ce;if(bn(O))return ie=G(ie),Nt.test(ie)||null===(q=function(He){var Vt,cn,Ve,We,ft,nt,Dt,gt=He.split(".");if(gt.length&&""==gt[gt.length-1]&&gt.pop(),(Vt=gt.length)>4)return He;for(cn=[],Ve=0;Ve<Vt;Ve++){if(""==(We=gt[Ve]))return He;if(ft=10,We.length>1&&"0"==We.charAt(0)&&(ft=Le.test(We)?16:8,We=We.slice(8==ft?1:2)),""===We)nt=0;else{if(!(10==ft?ut:8==ft?Ke:_t).test(We))return He;nt=parseInt(We,ft)}cn.push(nt)}for(Ve=0;Ve<Vt;Ve++)if(nt=cn[Ve],Ve==Vt-1){if(nt>=ne(256,5-Vt))return null}else if(nt>255)return null;for(Dt=cn.pop(),Ve=0;Ve<cn.length;Ve++)Dt+=cn[Ve]*ne(256,3-Ve);return Dt}(ie))?Ce:void(O.host=q);if(dt.test(ie))return Ce;for(q="",ce=X(ie),Ge=0;Ge<ce.length;Ge++)q+=hn(ce[Ge],Tt);O.host=q},It=function(O){for(var ie=null,q=1,ce=null,Ge=0,He=0;He<8;He++)0!==O[He]?(q<Ge&&(ie=ce,q=Ge),ce=null,Ge=0):(null===ce&&(ce=He),++Ge);return q<Ge&&(ie=ce,q=Ge),ie},Tt={},Ot=k({},Tt,{" ":1,'"':1,"<":1,">":1,"`":1}),vt=k({},Ot,{"#":1,"?":1,"{":1,"}":1}),Gt=k({},vt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),hn=function(O,ie){var q=Y(O,0);return 32<q&&q<127&&!S(ie,O)?O:encodeURIComponent(O)},$n={ftp:21,file:null,http:80,https:443,ws:80,wss:443},bn=function(O){return S($n,O.scheme)},Xn=function(O){return""!=O.username||""!=O.password},Mn=function(O,ie){return 2==O.length&&le.test(O.charAt(0))&&(":"==(O=O.charAt(1))||!ie&&"|"==O)},gr=function(O){return 1<O.length&&Mn(O.slice(0,2))&&(2==O.length||"/"===(O=O.charAt(2))||"\\"===O||"?"===O||"#"===O)},Ln=function(O){var ie=O.path,q=ie.length;!q||"file"==O.scheme&&1==q&&Mn(ie[0],!0)||ie.pop()},nr=function(O){return"."===O||"%2e"===O.toLowerCase()},mn=function(O){return".."===(O=O.toLowerCase())||"%2e."===O||".%2e"===O||"%2e%2e"===O},qn={},Tn={},ct={},pt={},Qe={},xt={},fn={},Cn={},jn={},on={},xn={},Pn={},Un={},yn={},qt={},_n={},Kt={},ln={},Zn={},Ut={},sn={},Sn=(On=w.prototype,function(){var O=oe(this),ie=O.scheme,q=O.username,ce=O.password,Ge=O.host,He=O.port,gt=O.path,Vt=O.query,cn=O.fragment,Ve=ie+":";return null!==Ge?(Ve+="//",Xn(O)&&(Ve+=q+(ce?":"+ce:"")+"@"),Ve+=M(Ge),null!==He&&(Ve+=":"+He)):"file"==ie&&(Ve+="//"),Ve+=O.cannotBeABaseURL?gt[0]:gt.length?"/"+gt.join("/"):"",null!==Vt&&(Ve+="?"+Vt),null!==cn&&(Ve+="#"+cn),Ve}),zn=function(){var O=oe(this),ie=O.scheme,q=O.port;if("blob"==ie)try{return new URL(ie.path[0]).origin}catch{return"null"}return"file"!=ie&&bn(O)?ie+"://"+M(O.host)+(null!==q?":"+q:""):"null"},cr=function(){return oe(this).scheme+":"},sr=function(){return oe(this).username},yr=function(){return oe(this).password},Tr=function(){var O=(ie=oe(this)).host,ie=ie.port;return null===O?"":null===ie?M(O):M(O)+":"+ie},te=function(){var O=oe(this).host;return null===O?"":M(O)},De=function(){var O=oe(this).port;return null===O?"":String(O)},Ye=function(){var O=oe(this),ie=O.path;return O.cannotBeABaseURL?ie[0]:ie.length?"/"+ie.join("/"):""},T=function(){var O=oe(this).query;return O?"?"+O:""},N=function(){return oe(this).searchParams},B=function(){var O=oe(this).fragment;return O?"#"+O:""};p&&g(On,{href:I(Sn,function(q){var ie=oe(this);if(q=b(ie,q=String(q)))throw TypeError(q);_e(ie.searchParams).updateSearchParams(ie.query)}),origin:I(zn),protocol:I(cr,function(O){b(oe(this),String(O)+":",qn)}),username:I(sr,function(O){var ie=oe(this),q=X(String(O));if(!A(ie)){ie.username="";for(var ce=0;ce<q.length;ce++)ie.username+=hn(q[ce],Gt)}}),password:I(yr,function(O){var ie=oe(this),q=X(String(O));if(!A(ie)){ie.password="";for(var ce=0;ce<q.length;ce++)ie.password+=hn(q[ce],Gt)}}),host:I(Tr,function(O){var ie=oe(this);ie.cannotBeABaseURL||b(ie,String(O),xn)}),hostname:I(te,function(O){var ie=oe(this);ie.cannotBeABaseURL||b(ie,String(O),Pn)}),port:I(De,function(O){var ie=oe(this);A(ie)||(""==(O=String(O))?ie.port=null:b(ie,O,Un))}),pathname:I(Ye,function(O){var ie=oe(this);ie.cannotBeABaseURL||(ie.path=[],b(ie,O+"",Kt))}),search:I(T,function(O){var ie=oe(this);""==(O=String(O))?ie.query=null:("?"==O.charAt(0)&&(O=O.slice(1)),ie.query="",b(ie,O,Ut)),_e(ie.searchParams).updateSearchParams(ie.query)}),searchParams:I(N),hash:I(B,function(O){var ie=oe(this);""==(O=String(O))?ie.fragment=null:("#"==O.charAt(0)&&(O=O.slice(1)),ie.fragment="",b(ie,O,sn))})}),x(On,"toJSON",function(){return Sn.call(this)},{enumerable:!0}),x(On,"toString",function(){return Sn.call(this)},{enumerable:!0}),re&&(f=re.revokeObjectURL,(d=re.createObjectURL)&&x(w,"createObjectURL",function(O){return d.apply(re,arguments)}),f&&x(w,"revokeObjectURL",function(O){return f.apply(re,arguments)})),z(w,"URL"),h({global:!0,forced:!m,sham:!p},{URL:w})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(l,ve,K){"use strict";ve.exports=l("./").polyfill()},{"./":250}],250:[function(l,ve,K){(function(M,A){var w;w=function(){"use strict";function I(lt){return"function"==typeof lt}var D=Array.isArray||function(lt){return"[object Array]"===Object.prototype.toString.call(lt)},d=0,f=void 0,h=void 0,p=function(lt,It){k[d]=lt,k[d+1]=It,2===(d+=2)&&(h?h(X):Z())},m=typeof window<"u"?window:void 0,g=(g=m||{}).MutationObserver||g.WebKitMutationObserver,x=typeof self>"u"&&void 0!==M&&"[object process]"==={}.toString.call(M),E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var lt=setTimeout;return function(){return lt(X,1)}}var k=new Array(1e3);function X(){for(var lt=0;lt<d;lt+=2)(0,k[lt])(k[lt+1]),k[lt]=void 0,k[lt+1]=void 0;d=0}var G,z,ee,Z=void 0;function H(lt,It){var Tt,Ot=this,vt=new this.constructor(xe),Gt=(void 0===vt[_e]&&_t(vt),Ot._state);return Gt?(Tt=arguments[Gt-1],p(function(){return Ke(Gt,vt,Tt,Ot._result)})):ge(Ot,vt,lt,It),vt}function re(lt){var It;return lt&&"object"==typeof lt&&lt.constructor===this?lt:(Ce(It=new this(xe),lt),It)}Z=x?function(){return M.nextTick(X)}:g?(z=0,x=new g(X),ee=document.createTextNode(""),x.observe(ee,{characterData:!0}),function(){ee.data=z=++z%2}):E?((G=new MessageChannel).port1.onmessage=X,function(){return G.port2.postMessage(0)}):(void 0===m&&"function"==typeof l?function Y(){try{var lt=Function("return this")().require("vertx");return void 0!==(f=lt.runOnLoop||lt.runOnContext)?function(){f(X)}:S()}catch{return S()}}:S)();var _e=Math.random().toString(36).substring(2);function xe(){}var oe=void 0,me=1,ne=2;function J(lt,It,Tt){p(function(Ot){var vt=!1,Gt=function(hn,$n,bn,Xn){try{hn.call($n,function(hn){vt||(vt=!0,(It!==hn?Ce:le)(Ot,hn))},function(hn){vt||(vt=!0,V(Ot,hn))})}catch(Mn){return Mn}}(Tt,It);!vt&&Gt&&(vt=!0,V(Ot,Gt))},lt)}function he(lt,It,Tt){var Ot,vt;It.constructor===lt.constructor&&Tt===H&&It.constructor.resolve===re?(Ot=lt,(vt=It)._state===me?le(Ot,vt._result):vt._state===ne?V(Ot,vt._result):ge(vt,void 0,function(Gt){return Ce(Ot,Gt)},function(Gt){return V(Ot,Gt)})):void 0!==Tt&&I(Tt)?J(lt,It,Tt):le(lt,It)}function Ce(lt,It){if(lt===It)V(lt,new TypeError("You cannot resolve a promise with itself"));else if(Tt=typeof It,null===It||"object"!=Tt&&"function"!=Tt)le(lt,It);else{Tt=void 0;try{Tt=It.then}catch(Ot){return void V(lt,Ot)}he(lt,It,Tt)}var Tt}function et(lt){lt._onerror&&lt._onerror(lt._result),Le(lt)}function le(lt,It){lt._state===oe&&(lt._result=It,lt._state=me,0!==lt._subscribers.length&&p(Le,lt))}function V(lt,It){lt._state===oe&&(lt._state=ne,lt._result=It,p(et,lt))}function ge(lt,It,Tt,Ot){var vt=lt._subscribers,Gt=vt.length;lt._onerror=null,vt[Gt]=It,vt[Gt+me]=Tt,vt[Gt+ne]=Ot,0===Gt&&lt._state&&p(Le,lt)}function Le(lt){var It=lt._subscribers,Tt=lt._state;if(0!==It.length){for(var Ot,vt=void 0,Gt=lt._result,hn=0;hn<It.length;hn+=3)vt=It[hn+Tt],(Ot=It[hn])?Ke(Tt,Ot,vt,Gt):vt(Gt);lt._subscribers.length=0}}function Ke(lt,It,Tt,Ot){var vt=I(Tt),Gt=void 0,hn=void 0,$n=!0;if(vt){try{Gt=Tt(Ot)}catch(bn){$n=!1,hn=bn}if(It===Gt)return void V(It,new TypeError("A promises callback cannot return that same promise."))}else Gt=Ot;It._state===oe&&(vt&&$n?Ce(It,Gt):!1===$n?V(It,hn):lt===me?le(It,Gt):lt===ne&&V(It,Gt))}var ut=0;function _t(lt){lt[_e]=ut++,lt._state=void 0,lt._result=void 0,lt._subscribers=[]}dt.prototype._enumerate=function(lt){for(var It=0;this._state===oe&&It<lt.length;It++)this._eachEntry(lt[It],It)},dt.prototype._eachEntry=function(lt,It){var Tt=this._instanceConstructor,Ot=Tt.resolve;if(Ot===re){var vt,Gt=void 0,hn=void 0,$n=!1;try{Gt=lt.then}catch(bn){$n=!0,hn=bn}Gt===H&&lt._state!==oe?this._settledAt(lt._state,It,lt._result):"function"!=typeof Gt?(this._remaining--,this._result[It]=lt):Tt===Rt?(vt=new Tt(xe),$n?V(vt,hn):he(vt,lt,Gt),this._willSettleAt(vt,It)):this._willSettleAt(new Tt(function(bn){return bn(lt)}),It)}else this._willSettleAt(Ot(lt),It)},dt.prototype._settledAt=function(lt,It,Tt){var Ot=this.promise;Ot._state===oe&&(this._remaining--,lt===ne?V(Ot,Tt):this._result[It]=Tt),0===this._remaining&&le(Ot,this._result)},dt.prototype._willSettleAt=function(lt,It){var Tt=this;ge(lt,void 0,function(Ot){return Tt._settledAt(me,It,Ot)},function(Ot){return Tt._settledAt(ne,It,Ot)})};var Nt=dt;function dt(lt,It){this._instanceConstructor=lt,this.promise=new lt(xe),this.promise[_e]||_t(this.promise),D(It)?(this.length=It.length,this._remaining=It.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(It),0!==this._remaining)||le(this.promise,this._result)):V(this.promise,new Error("Array Methods must be provided an Array"))}Bt.prototype.catch=function(lt){return this.then(null,lt)},Bt.prototype.finally=function(lt){var It=this.constructor;return I(lt)?this.then(function(Tt){return It.resolve(lt()).then(function(){return Tt})},function(Tt){return It.resolve(lt()).then(function(){throw Tt})}):this.then(lt,lt)};var Rt=Bt;function Bt(lt){if(this[_e]=ut++,this._result=this._state=void 0,this._subscribers=[],xe!==lt){if("function"!=typeof lt)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Bt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var It=this;try{lt(function(Tt){Ce(It,Tt)},function(Tt){V(It,Tt)})}catch(Tt){V(It,Tt)}}}return Rt.prototype.then=H,Rt.all=function(lt){return new Nt(this,lt).promise},Rt.race=function(lt){var It=this;return D(lt)?new It(function(Tt,Ot){for(var vt=lt.length,Gt=0;Gt<vt;Gt++)It.resolve(lt[Gt]).then(Tt,Ot)}):new It(function(Tt,Ot){return Ot(new TypeError("You must pass an array to race."))})},Rt.resolve=re,Rt.reject=function(lt){var It=new this(xe);return V(It,lt),It},Rt._setScheduler=function(lt){h=lt},Rt._setAsap=function(lt){p=lt},Rt._asap=p,Rt.polyfill=function(){var lt=void 0;if(void 0!==A)lt=A;else if(typeof self<"u")lt=self;else try{lt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var It=lt.Promise;if(It){var Tt=null;try{Tt=Object.prototype.toString.call(It.resolve())}catch{}if("[object Promise]"===Tt&&!It.cast)return}lt.Promise=Rt},Rt.Promise=Rt},"object"==typeof K&&void 0!==ve?ve.exports=w():this.ES6Promise=w()}).call(this,l("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(l,ve,K){var A;A=function(b,w){"use strict";function d(h){try{delete window[h]}catch{window[h]=void 0}}function f(h){(h=document.getElementById(h))&&document.getElementsByTagName("head")[0].removeChild(h)}w.exports=function(h){var p=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],m=h,g=p.timeout||5e3,x=p.jsonpCallback||"callback",E=void 0;return new Promise(function(S,k){var X=p.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),Y=x+"_"+X,G=(window[X]=function(z){S({ok:!0,json:function(){return Promise.resolve(z)}}),E&&clearTimeout(E),f(Y),d(X)},m+=-1===m.indexOf("?")?"?":"&",document.createElement("script"));G.setAttribute("src",""+m+x+"="+X),p.charset&&G.setAttribute("charset",p.charset),G.id=Y,document.getElementsByTagName("head")[0].appendChild(G),E=setTimeout(function(){k(new Error("JSONP request to "+h+" timed out")),d(X),f(Y),window[X]=function(){d(X)}},g),G.onerror=function(){k(new Error("JSONP request to "+h+" failed")),d(X),f(Y),E&&clearTimeout(E)}})}},void 0!==K&&void 0!==ve?A(0,ve):(A(A={exports:{}},A),this.fetchJsonp=A.exports)},{}],252:[function(l,ve,K){var M=function(A){"use strict";var b,w,I,D,d,f,p,m,g,x;if(!(void 0===A||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return b=function(){return A.URL||A.webkitURL||A},w=(x=A.document).createElementNS("http://www.w3.org/1999/xhtml","a"),I="download"in w,D=/constructor/i.test(A.HTMLElement)||A.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(E){(A.setImmediate||A.setTimeout)(function(){throw E},0)},4e4,p=function(E){setTimeout(function(){"string"==typeof E?b().revokeObjectURL(E):E.remove()},4e4)},m=function(E){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(E.type)?new Blob(["\ufeff",E],{type:E.type}):E},x=(g=function(E,S,z){z||(E=m(E));var X,Y,G=this,ee=(z="application/octet-stream"===E.type,function(){for(var H=G,re="writestart progress write writeend".split(" "),_e=(re=[].concat(re)).length;_e--;){var xe=H["on"+re[_e]];if("function"==typeof xe)try{xe.call(H,H)}catch(oe){f(oe)}}});G.readyState=G.INIT,I?(X=b().createObjectURL(E),setTimeout(function(){var H,re;w.href=X,w.download=S,H=w,re=new MouseEvent("click"),H.dispatchEvent(re),ee(),p(X),G.readyState=G.DONE})):(d||z&&D)&&A.FileReader?((Y=new FileReader).onloadend=function(){var H=d?Y.result:Y.result.replace(/^data:[^;]*;/,"data:attachment/file;");A.open(H,"_blank")||(A.location.href=H),H=void 0,G.readyState=G.DONE,ee()},Y.readAsDataURL(E),G.readyState=G.INIT):(X=X||b().createObjectURL(E),!z&&A.open(X,"_blank")||(A.location.href=X),G.readyState=G.DONE,ee(),p(X))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(E,S,k){return S=S||E.name||"download",k||(E=m(E)),navigator.msSaveOrOpenBlob(E,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(E,S,k){return new g(E,S||E.name||"download",k)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);void 0!==ve&&ve.exports&&(ve.exports.saveAs=M)},{}],253:[function(l,ve,K){var M,A=Object.defineProperty,b=(A(K,"__esModule",{value:!0}),K),w={GIFEncoder:()=>ee,applyPalette:()=>function(oe,me,ne="rgb565"){if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<me.length)throw new Error("applyPalette() only works with 256 colors or less");const J=new Uint32Array(oe.buffer),he=J.length,Ce="rgb444"===ne?4096:65536,et=new Uint8Array(he),le=new Array(Ce);if("rgba4444"===ne)for(let Bt=0;Bt<he;Bt++){var Ke,V=(Ke=J[Bt])>>24&255,ge=Ke>>16&255,Le=Ke>>8&255,ut=(ut=p(Ke&=255,Le,ge,V))in le?le[ut]:le[ut]=function(lt,It,Tt,Ot,vt){let Gt=0,hn=1e100;for(let Mn=0;Mn<vt.length;Mn++){var bn=vt[Mn],Xn=Y(bn[3]-Ot);Xn>hn||(Xn+=Y(bn[0]-lt))>hn||(Xn+=Y(bn[1]-It))>hn||(Xn+=Y(bn[2]-Tt))>hn||(hn=Xn,Gt=Mn)}return Gt}(Ke,Le,ge,V,me);et[Bt]=ut}else{const Bt="rgb444"===ne?m:h;for(let lt=0;lt<he;lt++){var dt,_t=(dt=J[lt])>>16&255,Nt=dt>>8&255,Rt=(Rt=Bt(dt&=255,Nt,_t))in le?le[Rt]:le[Rt]=function(It,Tt,Ot,vt){let Gt=0,hn=1e100;for(let Mn=0;Mn<vt.length;Mn++){var bn=vt[Mn],Xn=Y(bn[0]-It);Xn>hn||(Xn+=Y(bn[1]-Tt))>hn||(Xn+=Y(bn[2]-Ot))>hn||(hn=Xn,Gt=Mn)}return Gt}(dt,Nt,_t,me);et[lt]=Rt}}return et},default:()=>xe,nearestColor:()=>function(oe,me,ne=k){return oe[G(oe,me,ne)]},nearestColorIndex:()=>G,nearestColorIndexWithDistance:()=>z,prequantize:()=>function(oe,{roundRGB:me=5,roundAlpha:ne=10,oneBitAlpha:J=null}={}){const he=new Uint32Array(oe.buffer);for(let ge=0;ge<he.length;ge++){let Le=(V=he[ge])>>24&255;var et=V>>16&255,le=V>>8&255,V=255&V;Le=X(Le,ne),J&&(Le=Le<=("number"==typeof J?J:127)?0:255),V=X(V,me),le=X(le,me),et=X(et,me),he[ge]=Le<<24|et<<16|le<<8|V}},quantize:()=>function(oe,me,ne={}){var{format:J="rgb565",clearAlpha:he=!0,clearAlphaColor:Ce=0,clearAlphaThreshold:et=0,oneBitAlpha:le=!1}=ne;if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");oe=new Uint32Array(oe.buffer);let V=!1!==ne.useSqrt;const ge="rgba4444"===J,Le=function(gr,Ln){const mn=new Array("rgb444"===Ln?4096:65536),qn=gr.length;if("rgba4444"===Ln)for(let qt=0;qt<qn;++qt){var Qe,Tn=(Qe=gr[qt])>>24&255,ct=Qe>>16&255,pt=Qe>>8&255,xt=p(Qe&=255,pt,ct,Tn);let _n=xt in mn?mn[xt]:mn[xt]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=Qe,_n.gc+=pt,_n.bc+=ct,_n.ac+=Tn,_n.cnt++}else if("rgb444"===Ln)for(let qt=0;qt<qn;++qt){var jn,fn=(jn=gr[qt])>>16&255,Cn=jn>>8&255,on=m(jn&=255,Cn,fn);let _n=on in mn?mn[on]:mn[on]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=jn,_n.gc+=Cn,_n.bc+=fn,_n.cnt++}else for(let qt=0;qt<qn;++qt){var Un,xn=(Un=gr[qt])>>16&255,Pn=Un>>8&255,yn=h(Un&=255,Pn,xn);let _n=yn in mn?mn[yn]:mn[yn]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=Un,_n.gc+=Pn,_n.bc+=xn,_n.cnt++}return mn}(oe,J),Ke=Le.length,ut=Ke-1,_t=new Uint32Array(Ke+1);for(var Nt=0,dt=0;dt<Ke;++dt){const gr=Le[dt];null!=gr&&(bn=1/gr.cnt,ge&&(gr.ac*=bn),gr.rc*=bn,gr.gc*=bn,gr.bc*=bn,Le[Nt++]=gr)}var Rt,Bt,lt;for(x(me)/Nt<.022&&(V=!1),dt=0;dt<Nt-1;++dt)Le[dt].fw=dt+1,Le[dt+1].bk=dt,V&&(Le[dt].cnt=Math.sqrt(Le[dt].cnt));for(V&&(Le[dt].cnt=Math.sqrt(Le[dt].cnt)),dt=0;dt<Nt;++dt){E(Le,dt,!1);var It=Le[dt].err;for(Bt=++_t[0];1<Bt&&!(Le[Rt=_t[lt=Bt>>1]].err<=It);Bt=lt)_t[Bt]=Rt;_t[Bt]=dt}var Tt,Ot=Nt-me;for(dt=0;dt<Ot;){for(;;){var vt=_t[1];if((Tt=Le[vt]).tm>=Tt.mtm&&Le[Tt.nn].mtm<=Tt.tm)break;for(Tt.mtm==ut?vt=_t[1]=_t[_t[0]--]:(E(Le,vt,!1),Tt.tm=dt),It=Le[vt].err,Bt=1;(lt=Bt+Bt)<=_t[0]&&(lt<_t[0]&&Le[_t[lt]].err>Le[_t[lt+1]].err&&lt++,!(It<=Le[Rt=_t[lt]].err));Bt=lt)_t[Bt]=Rt;_t[Bt]=vt}var Gt=Le[Tt.nn],hn=Tt.cnt,$n=Gt.cnt,bn=1/(hn+$n);ge&&(Tt.ac=bn*(hn*Tt.ac+$n*Gt.ac)),Tt.rc=bn*(hn*Tt.rc+$n*Gt.rc),Tt.gc=bn*(hn*Tt.gc+$n*Gt.gc),Tt.bc=bn*(hn*Tt.bc+$n*Gt.bc),Tt.cnt+=Gt.cnt,Tt.mtm=++dt,Le[Gt.bk].fw=Gt.fw,Le[Gt.fw].bk=Gt.bk,Gt.mtm=ut}let Xn=[];for(dt=0;;0){let gr=g(Math.round(Le[dt].rc),0,255),Ln=g(Math.round(Le[dt].gc),0,255),nr=g(Math.round(Le[dt].bc),0,255),mn=255;ge&&(mn=g(Math.round(Le[dt].ac),0,255),le&&(mn=mn<=(Mn="number"==typeof le?le:127)?0:255),he&&mn<=et&&(gr=Ln=nr=Ce,mn=0));var Mn=ge?[gr,Ln,nr,mn]:[gr,Ln,nr];if(function(qn,Tn){for(let Qe=0;Qe<qn.length;Qe++){var ct=(pt=qn[Qe])[0]===Tn[0]&&pt[1]===Tn[1]&&pt[2]===Tn[2],pt=!(4<=pt.length&&4<=Tn.length)||pt[3]===Tn[3];if(ct&&pt)return!0}return!1}(Xn,Mn)||Xn.push(Mn),0==(dt=Le[dt].fw))break}return Xn},snapColorsToPalette:()=>function(oe,me,ne=5){if(oe.length&&me.length){var J=oe.map(V=>V.slice(0,3)),he=ne*ne,Ce=oe[0].length;for(let V=0;V<me.length;V++){let ge=me[V];ge=ge.length<Ce?[ge[0],ge[1],ge[2],255]:ge.length>Ce?ge.slice(0,3):ge.slice();var le,et=(le=z(J,ge.slice(0,3),k))[0];0<(le=le[1])&&le<=he&&(oe[et]=ge)}}}};for(M in w)A(b,M,{get:w[M],enumerable:!0});var I={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function D(oe=256){let me=0,ne=new Uint8Array(oe);return{get buffer(){return ne.buffer},reset(){me=0},bytesView:()=>ne.subarray(0,me),bytes:()=>ne.slice(0,me),writeByte(he){J(me+1),ne[me]=he,me++},writeBytes(he,Ce=0,et=he.length){J(me+et);for(let le=0;le<et;le++)ne[me++]=he[le+Ce]},writeBytesView(he,Ce=0,et=he.byteLength){J(me+et),ne.set(he.subarray(Ce,Ce+et),me),me+=et}};function J(he){var Ce=ne.length;if(!(he<=Ce)){he=Math.max(he,Ce*(Ce<1048576?2:1.125)>>>0),0!=Ce&&(he=Math.max(he,256));const et=ne;ne=new Uint8Array(he),0<me&&ne.set(et.subarray(0,me),0)}}}var d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(oe,me,ne,ge,he=D(512),Ce=new Uint8Array(256),et=new Int32Array(5003),le=new Int32Array(5003)){var V=et.length;ge=Math.max(2,ge),Ce.fill(0),le.fill(0),et.fill(-1);let Le=0,Ke=0;var ut=ge+1;const _t=ut;let Nt=!1,dt=_t,Rt=(1<<dt)-1;var Bt=1<<ut-1;const lt=1+Bt;let It=2+Bt,Tt=0,Ot=ne[0],vt=0;for(let Mn=V;Mn<65536;Mn*=2)++vt;vt=8-vt,he.writeByte(ge),Xn(Bt);var Gt=ne.length;for(let Mn=1;Mn<Gt;Mn++)e:{var hn=ne[Mn],$n=(hn<<12)+Ot;let gr=hn<<vt^Ot;if(et[gr]===$n)Ot=le[gr];else{for(var bn=0===gr?1:V-gr;0<=et[gr];)if((gr-=bn)<0&&(gr+=V),et[gr]===$n){Ot=le[gr];break e}Xn(Ot),Ot=hn,It<4096?(le[gr]=It++,et[gr]=$n):(et.fill(-1),It=2+Bt,Nt=!0,Xn(Bt))}}return Xn(Ot),Xn(lt),he.writeByte(0),he.bytesView();function Xn(Mn){for(Le&=d[Ke],0<Ke?Le|=Mn<<Ke:Le=Mn,Ke+=dt;8<=Ke;)Ce[Tt++]=255&Le,254<=Tt&&(he.writeByte(Tt),he.writeBytesView(Ce,0,Tt),Tt=0),Le>>=8,Ke-=8;if((It>Rt||Nt)&&(Nt?(dt=_t,Rt=(1<<dt)-1,Nt=!1):(++dt,Rt=12===dt?1<<dt:(1<<dt)-1)),Mn==lt){for(;0<Ke;)Ce[Tt++]=255&Le,254<=Tt&&(he.writeByte(Tt),he.writeBytesView(Ce,0,Tt),Tt=0),Le>>=8,Ke-=8;0<Tt&&(he.writeByte(Tt),he.writeBytesView(Ce,0,Tt),Tt=0)}}};function h(oe,me,ne){return oe<<8&63488|me<<2&992|ne>>3}function p(oe,me,ne,J){return oe>>4|240&me|(240&ne)<<4|(240&J)<<8}function m(oe,me,ne){return oe>>4<<8|240&me|ne>>4}function g(oe,me,ne){return oe<me?me:ne<oe?ne:oe}function x(oe){return oe*oe}function E(oe,me,ne){var J=0,he=1e100;const Ce=oe[me];for(var et=Ce.cnt,le=Ce.ac,V=Ce.rc,ge=Ce.gc,Le=Ce.bc,Ke=Ce.fw;0!=Ke;Ke=oe[Ke].fw){var ut,Nt,_t=oe[Ke];he<=(Nt=et*(Nt=_t.cnt)/(et+Nt))||(ut=0,ne&&he<=(ut+=Nt*x(_t.ac-le))||he<=(ut+=Nt*x(_t.rc-V))||he<=(ut+=Nt*x(_t.gc-ge))||he<=(ut+=Nt*x(_t.bc-Le))||(he=ut,J=Ke))}Ce.err=he,Ce.nn=J}function k(oe,me){for(var ne=0,J=0;J<oe.length;J++){var he=oe[J]-me[J];ne+=he*he}return ne}function X(oe,me){return 1<me?Math.round(oe/me)*me:oe}function Y(oe){return oe*oe}function G(oe,me,ne=k){let J=1/0,he=-1;for(let et=0;et<oe.length;et++){var Ce=ne(me,oe[et]);Ce<J&&(J=Ce,he=et)}return he}function z(oe,me,ne=k){let J=1/0,he=-1;for(let et=0;et<oe.length;et++){var Ce=ne(me,oe[et]);Ce<J&&(J=Ce,he=et)}return[he,J]}function ee(oe={}){const{initialCapacity:me=4096,auto:ne=!0}=oe,J=D(me),he=new Uint8Array(256),Ce=new Int32Array(5003),et=new Int32Array(5003);let le=!1;return{reset(){J.reset(),le=!1},finish(){J.writeByte(I.trailer)},bytes:()=>J.bytes(),bytesView:()=>J.bytesView(),get buffer(){return J.buffer},get stream(){return J},writeHeader:V,writeFrame(ge,Le,Ke,Ot={}){var{transparent:_t=!1,transparentIndex:Nt=0,delay:bn=0,palette:dt=null,repeat:Gt=0,colorDepth:Rt=8,dispose:Bt=-1}=Ot;let lt=!1;if(ne?le||(lt=!0,V(),le=!0):lt=!!Ot.first,Le=Math.max(0,Math.floor(Le)),Ke=Math.max(0,Math.floor(Ke)),lt){if(!dt)throw new Error("First frame must include a { palette } option");var[Ot,hn,Tt,$n,vt=8]=[J,Le,Ke,dt,Rt];vt=128|vt-1<<4|($n=_e($n.length)-1),re(Ot,hn),re(Ot,Tt),Ot.writeBytes([vt,0,0]),H(J,dt),0<=Gt&&(hn=Gt,($n=J).writeByte(33),$n.writeByte(255),$n.writeByte(11),Z($n,"NETSCAPE2.0"),$n.writeByte(3),$n.writeByte(1),re($n,hn),$n.writeByte(0))}var It,Tt,vt=Bt,Gt=Tt=Math.round(bn/10),hn=_t,$n=Nt,bn=((Ot=J).writeByte(33),Ot.writeByte(249),Ot.writeByte(4),$n<0&&($n=0,hn=!1),hn=hn?(It=1,2):It=0,0<=vt&&(hn=7&vt),Ot.writeByte((hn<<=2)|It),re(Ot,Gt),Ot.writeByte($n||0),Ot.writeByte(0),!!dt&&!lt);_t=Le,Nt=Ke,It=bn?dt:null,(Bt=J).writeByte(44),re(Bt,0),re(Bt,0),re(Bt,_t),re(Bt,Nt),It?(_t=_e(It.length)-1,Bt.writeByte(128|_t)):Bt.writeByte(0),bn&&H(J,dt),[Gt,Ot,Nt,_t,Bt=8,bn,dt,ge]=[J,ge,Le,Ke,Rt,he,Ce,et],f(Nt,_t,Ot,Bt,Gt,bn,dt,ge)}};function V(){Z(J,"GIF89a")}}function H(oe,me){var ne=1<<_e(me.length);for(let J=0;J<ne;J++){let he=[0,0,0];J<me.length&&(he=me[J]),oe.writeByte(he[0]),oe.writeByte(he[1]),oe.writeByte(he[2])}}function re(oe,me){oe.writeByte(255&me),oe.writeByte(me>>8&255)}function Z(oe,me){for(var ne=0;ne<me.length;ne++)oe.writeByte(me.charCodeAt(ne))}function _e(oe){return Math.max(Math.ceil(Math.log2(oe)),1)}var xe=ee},{}],254:[function(l,ve,K){K.read=function(M,A,b,w,E){var D,d,f=8*E-w-1,h=(1<<f)-1,p=h>>1,m=-7,g=b?E-1:0,x=b?-1:1;for(E=M[A+g],g+=x,D=E&(1<<-m)-1,E>>=-m,m+=f;0<m;D=256*D+M[A+g],g+=x,m-=8);for(d=D&(1<<-m)-1,D>>=-m,m+=w;0<m;d=256*d+M[A+g],g+=x,m-=8);if(0===D)D=1-p;else{if(D===h)return d?NaN:1/0*(E?-1:1);d+=Math.pow(2,w),D-=p}return(E?-1:1)*d*Math.pow(2,D-w)},K.write=function(M,A,b,w,I,S){var d,f,h=8*S-I-1,p=(1<<h)-1,m=p>>1,g=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,x=w?0:S-1,E=w?1:-1;for(S=A<0||0===A&&1/A<0?1:0,A=Math.abs(A),isNaN(A)||A===1/0?(f=isNaN(A)?1:0,d=p):(d=Math.floor(Math.log(A)/Math.LN2),A*(w=Math.pow(2,-d))<1&&(d--,w*=2),2<=(A+=1<=d+m?g/w:g*Math.pow(2,1-m))*w&&(d++,w/=2),p<=d+m?(f=0,d=p):1<=d+m?(f=(A*w-1)*Math.pow(2,I),d+=m):(f=A*Math.pow(2,m-1)*Math.pow(2,I),d=0));8<=I;M[b+x]=255&f,x+=E,f/=256,I-=8);for(d=d<<I|f,h+=I;0<h;M[b+x]=255&d,x+=E,d/=256,h-=8);M[b+x-E]|=128*S}},{}],255:[function(l,ve,K){"use strict";var M;function A(ct,pt){return ct.b===pt.b&&ct.a===pt.a}function b(ct,pt){return ct.b<pt.b||ct.b===pt.b&&ct.a<=pt.a}function w(ct,pt,Qe){var xt=pt.b-ct.b,fn=Qe.b-pt.b;return 0<xt+fn?xt<fn?pt.a-ct.a+xt/(xt+fn)*(ct.a-Qe.a):pt.a-Qe.a+fn/(xt+fn)*(Qe.a-ct.a):0}function I(ct,pt,Qe){var xt=pt.b-ct.b,fn=Qe.b-pt.b;return 0<xt+fn?(pt.a-Qe.a)*xt+(pt.a-ct.a)*fn:0}function D(ct,pt){return ct.a<pt.a||ct.a===pt.a&&ct.b<=pt.b}function d(ct,pt,Qe){var xt=pt.a-ct.a,fn=Qe.a-pt.a;return 0<xt+fn?xt<fn?pt.b-ct.b+xt/(xt+fn)*(ct.b-Qe.b):pt.b-Qe.b+fn/(xt+fn)*(Qe.b-ct.b):0}function f(ct,pt,Qe){var xt=pt.a-ct.a,fn=Qe.a-pt.a;return 0<xt+fn?(pt.b-Qe.b)*xt+(pt.b-ct.b)*fn:0}function h(ct,pt,Qe,xt){return(ct=ct<0?0:ct)<=(Qe=Qe<0?0:Qe)?0===Qe?(pt+xt)/2:pt+ct/(ct+Qe)*(xt-pt):xt+Qe/(ct+Qe)*(pt-xt)}function p(ct){var pt=S(ct.b);return X(pt,ct.c),X(pt.b,ct.c),Y(pt,ct.a),pt}function m(ct,pt){var Qe=!1,xt=!1;ct!==pt&&(pt.a!==ct.a&&(xt=!0,z(pt.a,ct.a)),pt.d!==ct.d&&(Qe=!0,ee(pt.d,ct.d)),k(pt,ct),xt||(X(pt,ct.a),ct.a.c=ct),Qe||(Y(pt,ct.d),ct.d.a=ct))}function g(ct){var pt=ct.b,Qe=!1;ct.d!==ct.b.d&&(Qe=!0,ee(ct.d,ct.b.d)),ct.c===ct?z(ct.a,null):(ct.b.d.a=ct.b.e,ct.a.c=ct.c,k(ct,ct.b.e),Qe||Y(ct,ct.d)),pt.c===pt?(z(pt.a,null),ee(pt.d,null)):(ct.d.a=pt.b.e,pt.a.c=pt.c,k(pt,pt.b.e)),G(ct)}function x(ct){var pt=S(ct),Qe=pt.b;return k(pt,ct.e),pt.a=ct.b.a,X(Qe,pt.a),pt.d=Qe.d=ct.d,pt=pt.b,k(ct.b,ct.b.b.e),k(ct.b,pt),ct.b.a=pt.a,pt.b.a.c=pt.b,pt.b.d=ct.b.d,pt.f=ct.f,pt.b.f=ct.b.f,pt}function E(ct,pt){var Qe=!1,xt=S(ct),fn=xt.b;return pt.d!==ct.d&&(Qe=!0,ee(pt.d,ct.d)),k(xt,ct.e),k(fn,pt),xt.a=ct.b.a,fn.a=pt.a,xt.d=fn.d=ct.d,ct.d.a=fn,Qe||Y(xt,ct.d),xt}function S(ct){var pt=new Tt,Qe=new Tt;return(((Qe.h=ct.b.h).b.h=pt).h=ct).b.h=Qe,pt.b=Qe,((pt.c=pt).e=Qe).b=pt,(Qe.c=Qe).e=pt}function k(ct,pt){var Qe=ct.c,xt=pt.c;Qe.b.e=pt,(xt.b.e=ct).c=xt,pt.c=Qe}function X(ct,pt){var Qe=pt.f,xt=new vt(pt,Qe);for(Qe.e=xt,Qe=(pt.f=xt).c=ct;Qe.a=xt,(Qe=Qe.c)!==ct;);}function Y(ct,pt){var Qe=pt.d,xt=new It(pt,Qe);for(Qe.b=xt,(pt.d=xt).a=ct,xt.c=pt.c,Qe=ct;Qe.d=xt,(Qe=Qe.e)!==ct;);}function G(ct){var pt=ct.h;(pt.b.h=ct=ct.b.h).b.h=pt}function z(ct,pt){for(var Qe=ct.c,xt=Qe;xt.a=pt,(xt=xt.c)!==Qe;);((xt=ct.e).f=Qe=ct.f).e=xt}function ee(ct,pt){for(var Qe=ct.a,xt=Qe;xt.d=pt,(xt=xt.e)!==Qe;);((xt=ct.b).d=Qe=ct.d).b=xt}function H(ct){var pt=0;return Math.abs(ct[1])>Math.abs(ct[0])&&(pt=1),Math.abs(ct[2])>Math.abs(ct[pt])?2:pt}function re(ct,pt){ct.f+=pt.f,ct.b.f+=pt.b.f}function Z(ct,pt,Qe){return Qe=Qe.a,(pt=pt.a).b.a===(ct=ct.a)?Qe.b.a===ct?b(pt.a,Qe.a)?I(Qe.b.a,pt.a,Qe.a)<=0:0<=I(pt.b.a,Qe.a,pt.a):I(Qe.b.a,ct,Qe.a)<=0:Qe.b.a===ct?0<=I(pt.b.a,ct,pt.a):(pt=w(pt.b.a,ct,pt.a),(ct=w(Qe.b.a,ct,Qe.a))<=pt)}function _e(ct){ct.a.i=null;var pt=ct.e;pt.a.c=pt.c,pt.c.a=pt.a,ct.e=null}function xe(ct,pt){g(ct.a),ct.c=!1,(ct.a=pt).i=ct}function oe(ct){for(var pt=ct.a.a;(ct=Tn(ct)).a.a===pt;);return ct.c&&(xe(ct,pt=E(qn(ct).a.b,ct.a.e)),ct=Tn(ct)),ct}function me(ct,pt,Qe){var xt=new mn;return xt.a=Qe,xt.e=Nt(ct.f,pt.e,xt),Qe.i=xt}function ne(ct,pt){switch(ct.s){case 100130:return!!(1&pt);case 100131:return 0!==pt;case 100132:return 0<pt;case 100133:return pt<0;case 100134:return 2<=pt||pt<=-2}return!1}function J(ct){var pt=ct.a,Qe=pt.d;Qe.c=ct.d,Qe.a=pt,_e(ct)}function he(ct,pt,Qe){for(pt=(ct=pt).a;ct!==Qe;){ct.c=!1;var xt=qn(ct),fn=xt.a;if(fn.a!==pt.a){if(!xt.c){J(ct);break}xe(xt,fn=E(pt.c.b,fn.b))}pt.c!==fn&&(m(fn.b.e,fn),m(pt,fn)),J(ct),pt=xt.a,ct=xt}return pt}function Ce(ct,pt,Qe,xt,fn,Cn){for(var jn=!0;me(ct,pt,Qe.b),(Qe=Qe.c)!==xt;);for(null===fn&&(fn=qn(pt).a.b.c);(Qe=(xt=qn(pt)).a.b).a===fn.a;)Qe.c!==fn&&(m(Qe.b.e,Qe),m(fn.b.e,Qe)),xt.f=pt.f-Qe.f,xt.d=ne(ct,xt.f),pt.b=!0,!jn&&ge(ct,pt)&&(re(Qe,fn),_e(pt),g(fn)),jn=!1,pt=xt,fn=Qe;pt.b=!0,Cn&&Ke(ct,pt)}function et(ct,pt,Qe,xt,fn){var Cn=[pt.g[0],pt.g[1],pt.g[2]];pt.d=null,pt.d=ct.o&&ct.o(Cn,Qe,xt,ct.c)||null,null===pt.d&&(fn?ct.n||(lt(ct,100156),ct.n=!0):pt.d=Qe[0])}function le(ct,pt,Qe){var xt=[null,null,null,null];xt[0]=pt.a.d,xt[1]=Qe.a.d,et(ct,pt.a,xt,[.5,.5,0,0],!1),m(pt,Qe)}function V(ct,pt,Qe,xt,fn){var Cn=Math.abs(pt.b-ct.b)+Math.abs(pt.a-ct.a),jn=Math.abs(Qe.b-ct.b)+Math.abs(Qe.a-ct.a),on=fn+1;xt[fn]=.5*jn/(Cn+jn),xt[on]=.5*Cn/(Cn+jn),ct.g[0]+=xt[fn]*pt.g[0]+xt[on]*Qe.g[0],ct.g[1]+=xt[fn]*pt.g[1]+xt[on]*Qe.g[1],ct.g[2]+=xt[fn]*pt.g[2]+xt[on]*Qe.g[2]}function ge(ct,pt){var Qe=qn(pt),xt=pt.a,fn=Qe.a;if(b(xt.a,fn.a)){if(0<I(fn.b.a,xt.a,fn.a))return;if(A(xt.a,fn.a)){if(xt.a!==fn.a){Qe=ct.e;var Cn=xt.a.h;if(0<=Cn){var jn=(Qe=Qe.b).d,on=Qe.e,xn=Qe.c,Pn=xn[Cn];jn[Pn]=jn[Qe.a],(xn[jn[Pn]]=Pn)<=--Qe.a&&(Pn<=1||b(on[jn[Pn>>1]],on[jn[Pn]])?Ln:nr)(Qe,Pn),on[Cn]=null,xn[Cn]=Qe.b,Qe.b=Cn}else for(Qe.c[-(Cn+1)]=null;0<Qe.a&&null===Qe.c[Qe.d[Qe.a-1]];)--Qe.a;le(ct,fn.b.e,xt)}}else x(fn.b),m(xt,fn.b.e),pt.b=Qe.b=!0}else{if(I(xt.b.a,fn.a,xt.a)<0)return;Tn(pt).b=pt.b=!0,x(xt.b),m(fn.b.e,xt)}return 1}function Le(ct,pt){var Qe=qn(pt),xt=pt.a,fn=Qe.a,Cn=xt.a,jn=fn.a,on=xt.b.a,xn=fn.b.a,Pn=new vt;if(I(on,ct.a,Cn),I(xn,ct.a,jn),!(Cn===jn||Math.min(Cn.a,on.a)>Math.max(jn.a,xn.a))){if(b(Cn,jn)){if(0<I(xn,Cn,jn))return}else if(I(on,jn,Cn)<0)return;var Un,yn,qt=on,_n=Cn,Kt=xn,ln=jn;if(b(qt,_n)||(Un=qt,qt=_n,_n=Un),b(Kt,ln)||(Un=Kt,Kt=ln,ln=Un),b(qt,Kt)||(Un=qt,qt=Kt,Kt=Un,Un=_n,_n=ln,ln=Un),b(Kt,_n)?b(_n,ln)?((Un=w(qt,Kt,_n))+(yn=w(Kt,_n,ln))<0&&(Un=-Un,yn=-yn),Pn.b=h(Un,Kt.b,yn,_n.b)):((Un=I(qt,Kt,_n))+(yn=-I(qt,ln,_n))<0&&(Un=-Un,yn=-yn),Pn.b=h(Un,Kt.b,yn,ln.b)):Pn.b=(Kt.b+_n.b)/2,D(qt,_n)||(Un=qt,qt=_n,_n=Un),D(Kt,ln)||(Un=Kt,Kt=ln,ln=Un),D(qt,Kt)||(Un=qt,qt=Kt,Kt=Un,Un=_n,_n=ln,ln=Un),D(Kt,_n)?D(_n,ln)?((Un=d(qt,Kt,_n))+(yn=d(Kt,_n,ln))<0&&(Un=-Un,yn=-yn),Pn.a=h(Un,Kt.a,yn,_n.a)):((Un=f(qt,Kt,_n))+(yn=-f(qt,ln,_n))<0&&(Un=-Un,yn=-yn),Pn.a=h(Un,Kt.a,yn,ln.a)):Pn.a=(Kt.a+_n.a)/2,b(Pn,ct.a)&&(Pn.b=ct.a.b,Pn.a=ct.a.a),qt=b(Cn,jn)?Cn:jn,b(qt,Pn)&&(Pn.b=qt.b,Pn.a=qt.a),A(Pn,Cn)||A(Pn,jn))return ge(ct,pt),0;if(!A(on,ct.a)&&0<=I(on,ct.a,Pn)||!A(xn,ct.a)&&I(xn,ct.a,Pn)<=0){if(xn===ct.a)x(xt.b),m(fn.b,xt),xt=qn(pt=oe(pt)).a,he(ct,qn(pt),Qe),Ce(ct,pt,xt.b.e,xt,xt,!0);else{if(on!==ct.a)return 0<=I(on,ct.a,Pn)&&(Tn(pt).b=pt.b=!0,x(xt.b),xt.a.b=ct.a.b,xt.a.a=ct.a.a),void(I(xn,ct.a,Pn)<=0&&(pt.b=Qe.b=!0,x(fn.b),fn.a.b=ct.a.b,fn.a.a=ct.a.a));for(x(fn.b),m(xt.e,fn.b.e),jn=(Cn=Qe=pt).a.b.a;(Cn=Tn(Cn)).a.b.a===jn;);Cn=qn(pt=Cn).a.b.c,Qe.a=fn.b.e,Ce(ct,pt,(fn=he(ct,Qe,null)).c,xt.b.c,Cn,!0)}return 1}x(xt.b),x(fn.b),m(fn.b.e,xt),xt.a.b=Pn.b,xt.a.a=Pn.a,xt.a.h=hn(ct.e,xt.a),fn=[0,0,0,0],Pn=[Cn.d,on.d,jn.d,xn.d],(xt=xt.a).g[0]=xt.g[1]=xt.g[2]=0,V(xt,Cn,on,fn,0),V(xt,jn,xn,fn,2),et(ct,xt,Pn,fn,!0),Tn(pt).b=pt.b=Qe.b=!0}}function Ke(ct,pt){for(var Qe=qn(pt);;){for(;Qe.b;)Qe=qn(pt=Qe);if(!(pt.b||null!==(pt=Tn(Qe=pt))&&pt.b))break;pt.b=!1;var xt=pt.a,fn=Qe.a;if(Cn=xt.b.a!==fn.b.a)e:{var Cn,jn=qn(Cn=pt),on=Cn.a,xn=jn.a,Pn=void 0;if(b(on.b.a,xn.b.a)){if(I(on.b.a,xn.b.a,on.a)<0){Cn=!1;break e}Tn(Cn).b=Cn.b=!0,Pn=x(on),m(xn.b,Pn),Pn.d.c=Cn.d}else{if(0<I(xn.b.a,on.b.a,xn.a)){Cn=!1;break e}Cn.b=jn.b=!0,Pn=x(xn),m(on.e,xn.b),Pn.b.d.c=Cn.d}Cn=!0}if(Cn&&(Qe.c?(_e(Qe),g(fn),fn=(Qe=qn(pt)).a):pt.c&&(_e(pt),g(xt),xt=(pt=Tn(Qe)).a)),xt.a!==fn.a)if(xt.b.a===fn.b.a||pt.c||Qe.c||xt.b.a!==ct.a&&fn.b.a!==ct.a)ge(ct,pt);else if(Le(ct,pt))break;xt.a===fn.a&&xt.b.a===fn.b.a&&(re(fn,xt),_e(pt),g(xt),pt=Tn(Qe))}}function ut(ct,pt){var Qe=new mn,xt=p(ct.b);xt.a.b=4e150,xt.a.a=pt,xt.b.a.b=-4e150,xt.b.a.a=pt,ct.a=xt.b.a,Qe.a=xt,Qe.f=0,Qe.d=!1,Qe.c=!1,Qe.h=!0,Qe.b=!1,xt=Nt(xt=ct.f,xt.a,Qe),Qe.e=xt}function _t(ct){this.a=new dt,this.b=ct,this.c=Z}function Nt(ct,pt,Qe){for(;null!==(pt=pt.c).b&&!ct.c(ct.b,pt.b,Qe););return ct=new dt(Qe,pt.a,pt),pt.a.c=ct,pt.a=ct}function dt(ct,pt,Qe){this.b=ct||null,this.a=pt||this,this.c=Qe||this}function Rt(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Bt(ct,pt){if(ct.d!==pt)for(;ct.d!==pt;)if(ct.d<pt)switch(ct.d){case 0:lt(ct,100151),ct.u(null);break;case 1:lt(ct,100152),ct.t()}else switch(ct.d){case 2:lt(ct,100154),ct.v();break;case 1:lt(ct,100153),ct.w()}}function lt(ct,pt){ct.p&&ct.p(pt,ct.c)}function It(ct,pt){this.b=ct||this,this.d=pt||this,this.a=null,this.c=!1}function Tt(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ot(){this.c=new vt,this.a=new It,this.b=new Tt,this.d=new Tt,this.b.b=this.d,this.d.b=this.b}function vt(ct,pt){this.e=ct||this,this.f=pt||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Gt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new bn}function hn(ct,pt){var Qe,xt,fn;return ct.e?(2*(xt=++(Qe=ct.b).a)>Qe.f&&(Qe.f*=2,Qe.c=Xn(Qe.c,Qe.f+1)),0===Qe.b?fn=xt:(fn=Qe.b,Qe.b=Qe.c[Qe.b]),Qe.e[fn]=pt,Qe.c[fn]=xt,Qe.d[xt]=fn,Qe.h&&nr(Qe,xt),fn):(Qe=ct.a++,ct.c[Qe]=pt,-(Qe+1))}function $n(ct){if(0===ct.a)return gr(ct.b);var pt=ct.c[ct.d[ct.a-1]];if(0!==ct.b.a&&b(Mn(ct.b),pt))return gr(ct.b);for(;--ct.a,0<ct.a&&null===ct.c[ct.d[ct.a-1]];);return pt}function bn(){this.d=Xn([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Xn(ct,pt){for(var Qe=Array(pt),xt=0;xt<ct.length;xt++)Qe[xt]=ct[xt];for(;xt<pt;xt++)Qe[xt]=0;return Qe}function Mn(ct){return ct.e[ct.d[1]]}function gr(ct){var pt=ct.d,Qe=ct.e,xt=ct.c,fn=pt[1],Cn=Qe[fn];return 0<ct.a&&(pt[1]=pt[ct.a],xt[pt[1]]=1,Qe[fn]=null,xt[fn]=ct.b,ct.b=fn,0<--ct.a&&Ln(ct,1)),Cn}function Ln(ct,pt){for(var Qe=ct.d,xt=ct.e,fn=ct.c,Cn=pt,jn=Qe[Cn];;){var on=Cn<<1,xn=(on<ct.a&&b(xt[Qe[on+1]],xt[Qe[on]])&&(on+=1),Qe[on]);if(on>ct.a||b(xt[jn],xt[xn])){fn[Qe[Cn]=jn]=Cn;break}fn[Qe[Cn]=xn]=Cn,Cn=on}}function nr(ct,pt){for(var Qe=ct.d,xt=ct.e,fn=ct.c,Cn=pt,jn=Qe[Cn];;){var on=Cn>>1,xn=Qe[on];if(0==on||b(xt[xn],xt[jn])){fn[Qe[Cn]=jn]=Cn;break}fn[Qe[Cn]=xn]=Cn,Cn=on}}function mn(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function qn(ct){return ct.e.c.b}function Tn(ct){return ct.e.a.b}(M=Rt.prototype).x=function(){Bt(this,0)},M.B=function(ct,pt){switch(ct){case 100142:return;case 100140:switch(pt){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=pt)}break;case 100141:return void(this.m=!!pt);default:return void lt(this,100900)}lt(this,100901)},M.y=function(ct){switch(ct){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:lt(this,100900)}return!1},M.A=function(ct,pt,Qe){this.j[0]=ct,this.j[1]=pt,this.j[2]=Qe},M.z=function(ct,pt){var Qe=pt||null;switch(ct){case 100100:case 100106:this.h=Qe;break;case 100104:case 100110:this.l=Qe;break;case 100101:case 100107:this.k=Qe;break;case 100102:case 100108:this.i=Qe;break;case 100103:case 100109:this.p=Qe;break;case 100105:case 100111:this.o=Qe;break;case 100112:this.r=Qe;break;default:lt(this,100900)}},M.C=function(ct,pt){var Qe=!1,xt=[0,0,0];Bt(this,2);for(var fn=0;fn<3;++fn){var Cn=ct[fn];Cn<-1e150&&(Cn=-1e150,Qe=!0),1e150<Cn&&(Cn=1e150,Qe=!0),xt[fn]=Cn}Qe&&lt(this,100155),null===(Qe=this.q)?m(Qe=p(this.b),Qe.b):(x(Qe),Qe=Qe.e),Qe.a.d=pt,Qe.a.g[0]=xt[0],Qe.a.g[1]=xt[1],Qe.a.g[2]=xt[2],Qe.f=1,Qe.b.f=-1,this.q=Qe},M.u=function(ct){Bt(this,0),this.d=1,this.b=new Ot,this.c=ct},M.t=function(){Bt(this,1),this.d=2,this.q=null},M.v=function(){Bt(this,2),this.d=1},M.w=function(){Bt(this,1),this.d=0;var ct,pt,Cn=!1,jn=[Qe=this.j[0],xt=this.j[1],fn=this.j[2]];if(0===Qe&&0===xt&&0===fn){for(var xt=[-2e150,-2e150,-2e150],on=[2e150,2e150,2e150],fn=[],xn=[],Qe=(Cn=this.b.c).e;Qe!==Cn;Qe=Qe.e)for(var Pn=0;Pn<3;++Pn){var Un=Qe.g[Pn];Un<on[Pn]&&(on[Pn]=Un,xn[Pn]=Qe),Un>xt[Pn]&&(xt[Pn]=Un,fn[Pn]=Qe)}if(xt[1]-on[1]>xt[Qe=0]-on[0]&&(Qe=1),on[Qe=xt[2]-on[2]>xt[Qe]-on[Qe]?2:Qe]>=xt[Qe])jn[0]=0,jn[1]=0,jn[2]=1;else{for(on=xn[Qe],xn=[xt=0,0,0],on=[on.g[0]-(fn=fn[Qe]).g[0],on.g[1]-fn.g[1],on.g[2]-fn.g[2]],Pn=[0,0,0],Qe=Cn.e;Qe!==Cn;Qe=Qe.e)Pn[0]=Qe.g[0]-fn.g[0],Pn[1]=Qe.g[1]-fn.g[1],Pn[2]=Qe.g[2]-fn.g[2],xn[0]=on[1]*Pn[2]-on[2]*Pn[1],xn[1]=on[2]*Pn[0]-on[0]*Pn[2],xn[2]=on[0]*Pn[1]-on[1]*Pn[0],xt<(Un=xn[0]*xn[0]+xn[1]*xn[1]+xn[2]*xn[2])&&(xt=Un,jn[0]=xn[0],jn[1]=xn[1],jn[2]=xn[2]);xt<=0&&(jn[0]=jn[1]=jn[2]=0,jn[H(on)]=1)}Cn=!0}for(xt=((xn=H(jn))+1)%3,fn=(xn+2)%3,xn=0<jn[xn]?1:-1,jn=(Qe=this.b.c).e;jn!==Qe;jn=jn.e)jn.b=jn.g[xt],jn.a=xn*jn.g[fn];if(Cn){for(jn=0,Qe=(Cn=this.b.a).b;Qe!==Cn;Qe=Qe.b)if(!((xt=Qe.a).f<=0))for(;jn+=(xt.a.b-xt.b.a.b)*(xt.a.a+xt.b.a.a),(xt=xt.e)!==Qe.a;);if(jn<0)for(Cn=(jn=this.b.c).e;Cn!==jn;Cn=Cn.e)Cn.a=-Cn.a}for(this.n=!1,Qe=(jn=this.b.b).h;Qe!==jn;Qe=Cn)Cn=Qe.h,xt=Qe.e,A(Qe.a,Qe.b.a)&&Qe.e.e!==Qe&&(le(this,xt,Qe),g(Qe),xt=(Qe=xt).e),xt.e===Qe&&(xt!==Qe&&(xt!==Cn&&xt!==Cn.b||(Cn=Cn.h),g(xt)),Qe!==Cn&&Qe!==Cn.b||(Cn=Cn.h),g(Qe));for(this.e=jn=new Gt,Qe=(Cn=this.b.c).e;Qe!==Cn;Qe=Qe.e)Qe.h=hn(jn,Qe);var yn=jn;yn.d=[];for(var qt=0;qt<yn.a;qt++)yn.d[qt]=qt;yn.d.sort(function(ln){return function(Zn,Ut){return b(ln[Zn],ln[Ut])?1:-1}}(yn.c)),yn.e=!0;for(var _n=yn.b,Kt=_n.a;1<=Kt;--Kt)Ln(_n,Kt);for(_n.h=!0,this.f=new _t(this),ut(this,-4e150),ut(this,4e150);null!==(jn=$n(this.e));){for(;;){e:if(0===(Qe=this.e).a)Cn=Mn(Qe.b);else if(Cn=Qe.c[Qe.d[Qe.a-1]],0!==Qe.b.a&&b(Qe=Mn(Qe.b),Cn)){Cn=Qe;break e}if(null===Cn||!A(Cn,jn))break;Cn=$n(this.e),le(this,jn.c,Cn.c)}!function ln(Zn,Ut){for(var sn,On=(Zn.a=Ut).c;null===On.i;)if((On=On.c)===Ut.c){On=Zn;var Sn=Ut;(yr=new mn).a=Sn.c.b;for(var Tr=(zn=On.f).a;null!==(Tr=Tr.a).b&&!zn.c(zn.b,yr,Tr.b););var zn,cr,sr=qn(zn=Tr.b),yr=zn.a;return Tr=sr.a,void(0===I(yr.b.a,Sn,yr.a)?A((yr=zn.a).a,Sn)||A(yr.b.a,Sn)||(x(yr.b),zn.c&&(g(yr.c),zn.c=!1),m(Sn.c,yr),ln(On,Sn)):(cr=b(Tr.b.a,yr.b.a)?zn:sr,sr=void 0,zn.d||cr.c?(sr=cr===zn?E(Sn.c.b,yr.e):E(Tr.b.c.b,Sn.c).b,cr.c?xe(cr,sr):((zn=me(yr=On,zn,sr)).f=Tn(zn).f+zn.a.f,zn.d=ne(yr,zn.f)),ln(On,Sn)):Ce(On,zn,Sn.c,Sn.c,null,!0)))}zn=(yr=qn(On=oe(On.i))).a,(yr=he(Zn,yr,null)).c===zn?(yr=(zn=yr).c,Tr=qn(On),sn=!1,(sr=On.a).b.a!==(cr=Tr.a).b.a&&Le(Zn,On),A(sr.a,Zn.a)&&(m(yr.b.e,sr),yr=qn(On=oe(On)).a,he(Zn,qn(On),Tr),sn=!0),A(cr.a,Zn.a)&&(m(zn,cr.b.e),zn=he(Zn,Tr,null),sn=!0),sn?Ce(Zn,On,zn.c,yr,yr,!0):(Sn=b(cr.a,sr.a)?cr.b.e:sr,Ce(Zn,On,Sn=E(zn.c.b,Sn),Sn.c,Sn.c,!1),Sn.b.i.c=!0,Ke(Zn,On))):Ce(Zn,On,yr.c,zn,zn,!0)}(this,jn)}for(this.a=this.f.a.a.b.a.a,jn=0;null!==(Cn=this.f.a.a.b);)Cn.h||++jn,_e(Cn);for(this.f=null,(jn=this.e).b=null,jn.d=null,this.e=jn.c=null,Qe=(jn=this.b).a.b;Qe!==jn.a;Qe=Cn)Cn=Qe.b,(Qe=Qe.a).e.e===Qe&&(re(Qe.c,Qe),g(Qe));if(!this.n){if(jn=this.b,this.m)for(Qe=jn.b.h;Qe!==jn.b;Qe=Cn)Cn=Qe.h,Qe.b.d.c!==Qe.d.c?Qe.f=Qe.d.c?1:-1:g(Qe);else for(Qe=jn.a.b;Qe!==jn.a;Qe=Cn)if(Cn=Qe.b,Qe.c){for(Qe=Qe.a;b(Qe.b.a,Qe.a);Qe=Qe.c.b);for(;b(Qe.a,Qe.b.a);Qe=Qe.e);for(xt=Qe.c.b,fn=void 0;Qe.e!==xt;)if(b(Qe.b.a,xt.a)){for(;xt.e!==Qe&&(b((pt=xt.e).b.a,pt.a)||I(xt.a,xt.b.a,xt.e.b.a)<=0);)xt=(fn=E(xt.e,xt)).b;xt=xt.c.b}else{for(;xt.e!==Qe&&(b((ct=Qe.c.b).a,ct.b.a)||0<=I(Qe.b.a,Qe.a,Qe.c.b.a));)Qe=(fn=E(Qe,Qe.c.b)).b;Qe=Qe.e}for(;xt.e.e!==Qe;)xt=(fn=E(xt.e,xt)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(Cn=(jn=this.b).a.b;Cn!==jn.a;Cn=Cn.b)if(Cn.c){for(this.h&&this.h(2,this.c),Qe=Cn.a;this.k&&this.k(Qe.a.d,this.c),(Qe=Qe.e)!==Cn.a;);this.i&&this.i(this.c)}}else{for(Cn=!!this.l,Qe=!1,xt=-1,fn=(jn=this.b).a.d;fn!==jn.a;fn=fn.d)if(fn.c)for(Qe||(this.h&&this.h(4,this.c),Qe=!0),xn=fn.a;Cn&&xt!==(on=xn.b.d.c?0:1)&&(xt=on,this.l&&this.l(!!xt,this.c)),this.k&&this.k(xn.a.d,this.c),(xn=xn.e)!==fn.a;);Qe&&this.i&&this.i(this.c)}if(this.r){for(Qe=(jn=this.b).a.b;Qe!==jn.a;Qe=Cn)if(Cn=Qe.b,!Qe.c){for(fn=(xt=Qe.a).e,xn=void 0;fn=(xn=fn).e,(xn.d=null)===xn.b.d&&(xn.c===xn?z(xn.a,null):(xn.a.c=xn.c,k(xn,xn.b.e)),(on=xn.b).c===on?z(on.a,null):(on.a.c=on.c,k(on,on.b.e)),G(xn)),xn!==xt;);xt=Qe.d,((Qe=Qe.b).d=xt).b=Qe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Rt,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Rt.prototype.gluDeleteTess=Rt.prototype.x,Rt.prototype.gluTessProperty=Rt.prototype.B,Rt.prototype.gluGetTessProperty=Rt.prototype.y,Rt.prototype.gluTessNormal=Rt.prototype.A,Rt.prototype.gluTessCallback=Rt.prototype.z,Rt.prototype.gluTessVertex=Rt.prototype.C,Rt.prototype.gluTessBeginPolygon=Rt.prototype.u,Rt.prototype.gluTessBeginContour=Rt.prototype.t,Rt.prototype.gluTessEndContour=Rt.prototype.v,Rt.prototype.gluTessEndPolygon=Rt.prototype.w,void 0!==ve&&(ve.exports=this.libtess)},{}],256:[function(l,ve,K){"use strict";function A(b,w,I,D){for(var d=b[w++],f=1<<d,h=1+f,p=1+h,m=d+1,g=(1<<m)-1,x=0,E=0,S=0,k=b[w++],X=new Int32Array(4096),Y=null;;){for(;x<16&&0!==k;)E|=b[w++]<<x,x+=8,1===k?k=b[w++]:--k;if(x<m)break;var G=E&g;if(E>>=m,x-=m,G==f)p=1+h,g=(1<<(m=d+1))-1,Y=null;else{if(G==h)break;for(var z=G<p?G:Y,ee=0,H=z;f<H;)H=X[H]>>8,++ee;var re=H;if(D<S+ee+(z!==G?1:0))return void console.log("Warning, gif stream longer than expected.");I[S++]=re;var Z=S+=ee;for(z!==G&&(I[S++]=re),H=z;ee--;)I[--Z]=255&(H=X[H]),H>>=8;null!==Y&&p<4096&&(X[p++]=Y<<8|re,g+1<=p&&m<12&&(++m,g=g<<1|1)),Y=G}}S!==D&&console.log("Warning, gif stream shorter than expected.")}try{K.GifWriter=function M(b,w,I,D){var d=0,f=void 0===(D=void 0===D?{}:D).loop?null:D.loop,h=void 0===D.palette?null:D.palette;if(w<=0||I<=0||65535<w||65535<I)throw new Error("Width/Height invalid.");function p(Y){if((Y=Y.length)<2||256<Y||Y&Y-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return Y}b[d++]=71,b[d++]=73,b[d++]=70,b[d++]=56,b[d++]=57,b[d++]=97;var m=0,g=0;if(null!==h){for(var x=p(h);x>>=1;)++m;if(x=1<<m,--m,void 0!==D.background){if(x<=(g=D.background))throw new Error("Background index out of range.");if(0===g)throw new Error("Background index explicitly passed as 0.")}}if(b[d++]=255&w,b[d++]=w>>8&255,b[d++]=255&I,b[d++]=I>>8&255,b[d++]=(null!==h?128:0)|m,b[d++]=g,b[d++]=0,null!==h)for(var E=0,S=h.length;E<S;++E){var k=h[E];b[d++]=k>>16&255,b[d++]=k>>8&255,b[d++]=255&k}if(null!==f){if(f<0||65535<f)throw new Error("Loop count invalid.");b[d++]=33,b[d++]=255,b[d++]=11,b[d++]=78,b[d++]=69,b[d++]=84,b[d++]=83,b[d++]=67,b[d++]=65,b[d++]=80,b[d++]=69,b[d++]=50,b[d++]=46,b[d++]=48,b[d++]=3,b[d++]=1,b[d++]=255&f,b[d++]=f>>8&255,b[d++]=0}var X=!1;this.addFrame=function(Y,G,z,ee,H,re){if(!0===X&&(--d,X=!1),re=void 0===re?{}:re,Y<0||G<0||65535<Y||65535<G)throw new Error("x/y invalid.");if(z<=0||ee<=0||65535<z||65535<ee)throw new Error("Width/Height invalid.");if(H.length<z*ee)throw new Error("Not enough pixels for the frame size.");var Z=!0,_e=re.palette;if(null==_e&&(Z=!1,_e=h),null==_e)throw new Error("Must supply either a local or global palette.");for(var oe=p(_e),xe=0;oe>>=1;)++xe;oe=1<<xe;var me=void 0===re.delay?0:re.delay,ne=void 0===re.disposal?0:re.disposal;if(ne<0||3<ne)throw new Error("Disposal out of range.");var J=!1,he=0;if(null!=re.transparent&&(J=!0,(he=re.transparent)<0||oe<=he))throw new Error("Transparent color index.");if(0===ne&&!J&&0===me||(b[d++]=33,b[d++]=249,b[d++]=4,b[d++]=ne<<2|(!0===J?1:0),b[d++]=255&me,b[d++]=me>>8&255,b[d++]=he,b[d++]=0),b[d++]=44,b[d++]=255&Y,b[d++]=Y>>8&255,b[d++]=255&G,b[d++]=G>>8&255,b[d++]=255&z,b[d++]=z>>8&255,b[d++]=255&ee,b[d++]=ee>>8&255,b[d++]=!0===Z?128|xe-1:0,!0===Z)for(var Ce=0,et=_e.length;Ce<et;++Ce){var le=_e[Ce];b[d++]=le>>16&255,b[d++]=le>>8&255,b[d++]=255&le}return d=function(V,ge,Le,Ke){V[ge++]=Le;var ut=ge++,_t=1<<Le,Nt=_t-1,dt=1+_t,Rt=1+dt,Bt=Le+1,lt=0,It=0;function Tt(gr){for(;gr<=lt;)V[ge++]=255&It,It>>=8,lt-=8,ge===ut+256&&(V[ut]=255,ut=ge++)}function Ot(gr){It|=gr<<lt,lt+=Bt,Tt(8)}var vt=Ke[0]&Nt,Gt={};Ot(_t);for(var hn=1,$n=Ke.length;hn<$n;++hn){var bn=Ke[hn]&Nt,Xn=vt<<8|bn,Mn=Gt[Xn];if(void 0===Mn){for(It|=vt<<lt,lt+=Bt;8<=lt;)V[ge++]=255&It,It>>=8,lt-=8,ge===ut+256&&(V[ut]=255,ut=ge++);4096===Rt?(Ot(_t),Rt=1+dt,Bt=Le+1,Gt={}):(1<<Bt<=Rt&&++Bt,Gt[Xn]=Rt++),vt=bn}else vt=Mn}return Ot(vt),Ot(dt),Tt(1),ut+1===ge?V[ut]=0:(V[ut]=ge-ut-1,V[ge++]=0),ge}(b,d,xe<2?2:xe,H)},this.end=function(){return!1===X&&(b[d++]=59,X=!0),d},this.getOutputBuffer=function(){return b},this.setOutputBuffer=function(Y){b=Y},this.getOutputBufferPosition=function(){return d},this.setOutputBufferPosition=function(Y){d=Y}},K.GifReader=function(b){var w=0;if(71!==b[w++]||73!==b[w++]||70!==b[w++]||56!==b[w++]||56!=(b[w++]+1&253)||97!==b[w++])throw new Error("Invalid GIF 87a/89a header.");var I=b[w++]|b[w++]<<8,D=b[w++]|b[w++]<<8,d=b[w++],h=(w++,w++,null),p=null,m=(d>>7&&(h=w,w+=3*(p=1<<1+(7&d))),!0),g=[],x=0,E=null,S=0,k=null;for(this.width=I,this.height=D;m&&w<b.length;)switch(b[w++]){case 33:switch(b[w++]){case 255:if(11!==b[w]||78==b[w+1]&&69==b[w+2]&&84==b[w+3]&&83==b[w+4]&&67==b[w+5]&&65==b[w+6]&&80==b[w+7]&&69==b[w+8]&&50==b[w+9]&&46==b[w+10]&&48==b[w+11]&&3==b[w+12]&&1==b[w+13]&&0==b[w+16])w+=14,k=b[w++]|b[w++]<<8,w++;else for(w+=12;;){if(!(0<=(Y=b[w++])))throw Error("Invalid block size");if(0===Y)break;w+=Y}break;case 249:if(4!==b[w++]||0!==b[w+4])throw new Error("Invalid graphics extension block.");var X=b[w++];x=b[w++]|b[w++]<<8,E=b[w++],!(1&X)&&(E=null),S=X>>2&7,w++;break;case 254:for(;;){if(!(0<=(Y=b[w++])))throw Error("Invalid block size");if(0===Y)break;w+=Y}break;default:throw new Error("Unknown graphic control label: 0x"+b[w-1].toString(16))}break;case 44:var Y,G=b[w++]|b[w++]<<8,z=b[w++]|b[w++]<<8,ee=b[w++]|b[w++]<<8,H=b[w++]|b[w++]<<8,re=(me=b[w++])>>6&1,_e=h,xe=p,oe=!1,me=(me>>7&&(oe=!0,_e=w,w+=3*(xe=1<<1+(7&me))),w);for(w++;;){if(!(0<=(Y=b[w++])))throw Error("Invalid block size");if(0===Y)break;w+=Y}g.push({x:G,y:z,width:ee,height:H,has_local_palette:oe,palette_offset:_e,palette_size:xe,data_offset:me,data_length:w-me,transparent_index:E,interlaced:!!re,delay:x,disposal:S});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+b[w-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return k},this.frameInfo=function(ne){if(ne<0||ne>=g.length)throw new Error("Frame index out of range.");return g[ne]},this.decodeAndBlitFrameBGRA=function(ne,J){for(var he=(ne=this.frameInfo(ne)).width*ne.height,Ce=new Uint8Array(he),et=(A(b,ne.data_offset,Ce,he),ne.palette_offset),le=ne.transparent_index,V=(null===le&&(le=256),ne.width),ge=I-V,Le=V,Ke=4*(ne.y*I+ne.x),ut=4*((ne.y+ne.height)*I+ne.x),_t=Ke,Nt=4*ge,dt=(!0===ne.interlaced&&(Nt+=4*I*7),8),Rt=0,Bt=Ce.length;Rt<Bt;++Rt){var lt,It,Tt=Ce[Rt];0===Le&&(Le=V,ut<=(_t+=Nt)&&(Nt=4*ge+4*I*(dt-1),_t=Ke+(V+ge)*(dt<<1),dt>>=1)),Tt===le?_t+=4:(lt=b[et+3*Tt],It=b[et+3*Tt+1],J[_t++]=Tt=b[et+3*Tt+2],J[_t++]=It,J[_t++]=lt,J[_t++]=255),--Le}},this.decodeAndBlitFrameRGBA=function(ne,J){for(var he=(ne=this.frameInfo(ne)).width*ne.height,Ce=new Uint8Array(he),et=(A(b,ne.data_offset,Ce,he),ne.palette_offset),le=ne.transparent_index,V=(null===le&&(le=256),ne.width),ge=I-V,Le=V,Ke=4*(ne.y*I+ne.x),ut=4*((ne.y+ne.height)*I+ne.x),_t=Ke,Nt=4*ge,dt=(!0===ne.interlaced&&(Nt+=4*I*7),8),Rt=0,Bt=Ce.length;Rt<Bt;++Rt){var lt,It,Tt=Ce[Rt];0===Le&&(Le=V,ut<=(_t+=Nt)&&(Nt=4*ge+4*I*(dt-1),_t=Ke+(V+ge)*(dt<<1),dt>>=1)),Tt===le?_t+=4:(lt=b[et+3*Tt],It=b[et+3*Tt+1],Tt=b[et+3*Tt+2],J[_t++]=lt,J[_t++]=It,J[_t++]=Tt,J[_t++]=255),--Le}}}}catch{}},{}],257:[function(l,ve,K){(function(M){var b;b=function(w){"use strict";function I(Ae){if(null==this)throw TypeError();var W,se=String(this),de=se.length;if(!((Ae=(Ae=Ae?Number(Ae):0)!=Ae?0:Ae)<0||de<=Ae))return 55296<=(W=se.charCodeAt(Ae))&&W<=56319&&Ae+1<de&&56320<=(de=se.charCodeAt(Ae+1))&&de<=57343?1024*(W-55296)+de-56320+65536:W}String.prototype.codePointAt||((D=function(){try{var R={},W=Object.defineProperty,se=W(R,R,R)&&W}catch{}return se}())?D(String.prototype,"codePointAt",{value:I,configurable:!0,writable:!0}):String.prototype.codePointAt=I);var D;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function p(R,W){this.source=R,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=W,this.destLen=0,this.ltree=new h,this.dtree=new h}var m=new h,g=new h,x=new Uint8Array(30),E=new Uint16Array(30),S=new Uint8Array(30),k=new Uint16Array(30),X=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Y=new h,G=new Uint8Array(320);function z(R,W,se,de){for(var Ae,Xe=0;Xe<se;++Xe)R[Xe]=0;for(Xe=0;Xe<30-se;++Xe)R[Xe+se]=Xe/se|0;for(Ae=de,Xe=0;Xe<30;++Xe)W[Xe]=Ae,Ae+=1<<R[Xe]}var ee=new Uint16Array(16);function H(R,W,se,de){for(var Ae,Xe=0;Xe<16;++Xe)R.table[Xe]=0;for(Xe=0;Xe<de;++Xe)R.table[W[se+Xe]]++;for(Xe=Ae=R.table[0]=0;Xe<16;++Xe)ee[Xe]=Ae,Ae+=R.table[Xe];for(Xe=0;Xe<de;++Xe)W[se+Xe]&&(R.trans[ee[W[se+Xe]]++]=Xe)}function re(R,W,se){if(!W)return se;for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;var de=R.tag&65535>>>16-W;return R.tag>>>=W,R.bitcount-=W,de+se}function Z(R,W){for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;for(var se=0,de=0,Ae=0,Xe=R.tag;de=2*de+(1&Xe),Xe>>>=1,se+=W.table[++Ae],0<=(de-=W.table[Ae]););return R.tag=Xe,R.bitcount-=Ae,W.trans[se+de]}function _e(R,W,se){for(;;){if(256===(de=Z(R,W)))return 0;if(de<256)R.dest[R.destLen++]=de;else for(var Ae,Xe=re(R,x[de-=257],E[de]),de=Z(R,se),Je=Ae=R.destLen-re(R,S[de],k[de]);Je<Ae+Xe;++Je)R.dest[R.destLen++]=R.dest[Je]}}for(var xe=m,oe=g,me=0;me<7;++me)xe.table[me]=0;for(xe.table[7]=24,xe.table[8]=152,xe.table[9]=112,me=0;me<24;++me)xe.trans[me]=256+me;for(me=0;me<144;++me)xe.trans[24+me]=me;for(me=0;me<8;++me)xe.trans[168+me]=280+me;for(me=0;me<112;++me)xe.trans[176+me]=144+me;for(me=0;me<5;++me)oe.table[me]=0;for(oe.table[5]=32,me=0;me<32;++me)oe.trans[me]=me;z(x,E,4,3),z(S,k,2,1),x[28]=0,E[28]=258;var ne=function(R,W){var se,de,Ae,Xe=new p(R,W);do{switch(void 0,(de=Xe).bitcount--||(de.tag=de.source[de.sourceIndex++],de.bitcount=7),Ae=1&de.tag,de.tag>>>=1,de=Ae,re(Xe,2,0)){case 0:se=function(Fn){for(var Yr,zr;8<Fn.bitcount;)Fn.sourceIndex--,Fn.bitcount-=8;if((Yr=256*Fn.source[Fn.sourceIndex+1]+Fn.source[Fn.sourceIndex])!==(65535&~(256*Fn.source[Fn.sourceIndex+3]+Fn.source[Fn.sourceIndex+2])))return-3;for(Fn.sourceIndex+=4,zr=Yr;zr;--zr)Fn.dest[Fn.destLen++]=Fn.source[Fn.sourceIndex++];return Fn.bitcount=0,0}(Xe);break;case 1:se=_e(Xe,m,g);break;case 2:Qt=at=Re=En=Je=Ne=void 0;for(var Je,bt=Xe,Yt=Xe.ltree,Ht=Xe.dtree,wn=re(bt,5,257),Oe=re(bt,5,1),be=re(bt,4,4),Ne=0;Ne<19;++Ne)G[Ne]=0;for(Ne=0;Ne<be;++Ne){var Re=re(bt,3,0);G[X[Ne]]=Re}for(H(Y,G,0,19),Je=0;Je<wn+Oe;){var at=Z(bt,Y);switch(at){case 16:for(var Qt=G[Je-1],En=re(bt,2,3);En;--En)G[Je++]=Qt;break;case 17:for(En=re(bt,3,3);En;--En)G[Je++]=0;break;case 18:for(En=re(bt,7,11);En;--En)G[Je++]=0;break;default:G[Je++]=at}}H(Yt,G,0,wn),H(Ht,G,wn,Oe),se=_e(Xe,Xe.ltree,Xe.dtree);break;default:se=-3}if(0!==se)throw new Error("Data error")}while(!de);return Xe.destLen<Xe.dest.length?"function"==typeof Xe.dest.slice?Xe.dest.slice(0,Xe.destLen):Xe.dest.subarray(0,Xe.destLen):Xe.dest};function J(R,W,se,de,Ae){return Math.pow(1-Ae,3)*R+3*Math.pow(1-Ae,2)*Ae*W+3*(1-Ae)*Math.pow(Ae,2)*se+Math.pow(Ae,3)*de}function he(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Ce(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function et(R){throw new Error(R)}function le(R,W){R||et(W)}he.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},he.prototype.addPoint=function(R,W){"number"==typeof R&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=R,this.x2=R),R<this.x1&&(this.x1=R),R>this.x2&&(this.x2=R)),"number"==typeof W&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=W,this.y2=W),W<this.y1&&(this.y1=W),W>this.y2&&(this.y2=W))},he.prototype.addX=function(R){this.addPoint(R,null)},he.prototype.addY=function(R){this.addPoint(null,R)},he.prototype.addBezier=function(R,W,se,de,Ae,Xe,Je,bt){var Yt=[R,W],Ht=[se,de],wn=[Ae,Xe],Oe=[Je,bt];this.addPoint(R,W),this.addPoint(Je,bt);for(var be=0;be<=1;be++){var Ne,Re=6*Yt[be]-12*Ht[be]+6*wn[be],at=-3*Yt[be]+9*Ht[be]-9*wn[be]+3*Oe[be],Qt=3*Ht[be]-3*Yt[be];0==at?0==Re||0<(Ne=-Qt/Re)&&Ne<1&&(0===be&&this.addX(J(Yt[be],Ht[be],wn[be],Oe[be],Ne)),1===be&&this.addY(J(Yt[be],Ht[be],wn[be],Oe[be],Ne))):(Ne=Math.pow(Re,2)-4*Qt*at)<0||(0<(Qt=(-Re+Math.sqrt(Ne))/(2*at))&&Qt<1&&(0===be&&this.addX(J(Yt[be],Ht[be],wn[be],Oe[be],Qt)),1===be&&this.addY(J(Yt[be],Ht[be],wn[be],Oe[be],Qt))),0<(Qt=(-Re-Math.sqrt(Ne))/(2*at))&&Qt<1&&(0===be&&this.addX(J(Yt[be],Ht[be],wn[be],Oe[be],Qt)),1===be&&this.addY(J(Yt[be],Ht[be],wn[be],Oe[be],Qt))))}},he.prototype.addQuad=function(R,W,se,de,Ae,Xe){this.addBezier(R,W,se=R+2/3*(se-R),de=W+2/3*(de-W),se+1/3*(Ae-R),de+1/3*(Xe-W),Ae,Xe)},Ce.prototype.moveTo=function(R,W){this.commands.push({type:"M",x:R,y:W})},Ce.prototype.lineTo=function(R,W){this.commands.push({type:"L",x:R,y:W})},Ce.prototype.curveTo=Ce.prototype.bezierCurveTo=function(R,W,se,de,Ae,Xe){this.commands.push({type:"C",x1:R,y1:W,x2:se,y2:de,x:Ae,y:Xe})},Ce.prototype.quadTo=Ce.prototype.quadraticCurveTo=function(R,W,se,de){this.commands.push({type:"Q",x1:R,y1:W,x:se,y:de})},Ce.prototype.close=Ce.prototype.closePath=function(){this.commands.push({type:"Z"})},Ce.prototype.extend=function(R){var W;if(R.commands)R=R.commands;else if(R instanceof he)return this.moveTo((W=R).x1,W.y1),this.lineTo(W.x2,W.y1),this.lineTo(W.x2,W.y2),this.lineTo(W.x1,W.y2),void this.close();Array.prototype.push.apply(this.commands,R)},Ce.prototype.getBoundingBox=function(){for(var R=new he,W=0,se=0,de=0,Ae=0,Xe=0;Xe<this.commands.length;Xe++){var Je=this.commands[Xe];switch(Je.type){case"M":R.addPoint(Je.x,Je.y),W=de=Je.x,se=Ae=Je.y;break;case"L":R.addPoint(Je.x,Je.y),de=Je.x,Ae=Je.y;break;case"Q":R.addQuad(de,Ae,Je.x1,Je.y1,Je.x,Je.y),de=Je.x,Ae=Je.y;break;case"C":R.addBezier(de,Ae,Je.x1,Je.y1,Je.x2,Je.y2,Je.x,Je.y),de=Je.x,Ae=Je.y;break;case"Z":de=W,Ae=se;break;default:throw new Error("Unexpected path command "+Je.type)}}return R.isEmpty()&&R.addPoint(0,0),R},Ce.prototype.draw=function(R){R.beginPath();for(var W=0;W<this.commands.length;W+=1){var se=this.commands[W];"M"===se.type?R.moveTo(se.x,se.y):"L"===se.type?R.lineTo(se.x,se.y):"C"===se.type?R.bezierCurveTo(se.x1,se.y1,se.x2,se.y2,se.x,se.y):"Q"===se.type?R.quadraticCurveTo(se.x1,se.y1,se.x,se.y):"Z"===se.type&&R.closePath()}this.fill&&(R.fillStyle=this.fill,R.fill()),this.stroke&&(R.strokeStyle=this.stroke,R.lineWidth=this.strokeWidth,R.stroke())},Ce.prototype.toPathData=function(R){function W(){for(var Xe=arguments,Je="",bt=0;bt<arguments.length;bt+=1){var Yt=Xe[bt];0<=Yt&&0<bt&&(Je+=" "),Je+=Math.round(Yt)===Yt?""+Math.round(Yt):Yt.toFixed(R)}return Je}R=void 0!==R?R:2;for(var se="",de=0;de<this.commands.length;de+=1){var Ae=this.commands[de];"M"===Ae.type?se+="M"+W(Ae.x,Ae.y):"L"===Ae.type?se+="L"+W(Ae.x,Ae.y):"C"===Ae.type?se+="C"+W(Ae.x1,Ae.y1,Ae.x2,Ae.y2,Ae.x,Ae.y):"Q"===Ae.type?se+="Q"+W(Ae.x1,Ae.y1,Ae.x,Ae.y):"Z"===Ae.type&&(se+="Z")}return se},Ce.prototype.toSVG=function(R){var W=(W='<path d="')+this.toPathData(R)+'"';return this.fill&&"black"!==this.fill&&(W+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(W+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),W+"/>"},Ce.prototype.toDOMElement=function(W){W=this.toPathData(W);var se=document.createElementNS("http://www.w3.org/2000/svg","path");return se.setAttribute("d",W),se};var V={fail:et,argument:le,assert:le},ge={},Le={},Ke={};function ut(R){return function(){return R}}Le.BYTE=function(R){return V.argument(0<=R&&R<=255,"Byte value should be between 0 and 255."),[R]},Ke.BYTE=ut(1),Le.CHAR=function(R){return[R.charCodeAt(0)]},Ke.CHAR=ut(1),Le.CHARARRAY=function(R){for(var W=[],se=0;se<R.length;se+=1)W[se]=R.charCodeAt(se);return W},Ke.CHARARRAY=function(R){return R.length},Le.USHORT=function(R){return[R>>8&255,255&R]},Ke.USHORT=ut(2),Le.SHORT=function(R){return[(R=32768<=R?-(65536-R):R)>>8&255,255&R]},Ke.SHORT=ut(2),Le.UINT24=function(R){return[R>>16&255,R>>8&255,255&R]},Ke.UINT24=ut(3),Le.ULONG=function(R){return[R>>24&255,R>>16&255,R>>8&255,255&R]},Ke.ULONG=ut(4),Le.LONG=function(R){return[(R=2147483648<=R?-(4294967296-R):R)>>24&255,R>>16&255,R>>8&255,255&R]},Ke.LONG=ut(4),Le.FIXED=Le.ULONG,Ke.FIXED=Ke.ULONG,Le.FWORD=Le.SHORT,Ke.FWORD=Ke.SHORT,Le.UFWORD=Le.USHORT,Ke.UFWORD=Ke.USHORT,Le.LONGDATETIME=function(R){return[0,0,0,0,R>>24&255,R>>16&255,R>>8&255,255&R]},Ke.LONGDATETIME=ut(8),Le.TAG=function(R){return V.argument(4===R.length,"Tag should be exactly 4 ASCII characters."),[R.charCodeAt(0),R.charCodeAt(1),R.charCodeAt(2),R.charCodeAt(3)]},Ke.TAG=ut(4),Le.Card8=Le.BYTE,Ke.Card8=Ke.BYTE,Le.Card16=Le.USHORT,Ke.Card16=Ke.USHORT,Le.OffSize=Le.BYTE,Ke.OffSize=Ke.BYTE,Le.SID=Le.USHORT,Ke.SID=Ke.USHORT,Le.NUMBER=function(R){return-107<=R&&R<=107?[R+139]:108<=R&&R<=1131?[247+((R-=108)>>8),255&R]:-1131<=R&&R<=-108?[251+((R=-R-108)>>8),255&R]:-32768<=R&&R<=32767?Le.NUMBER16(R):Le.NUMBER32(R)},Ke.NUMBER=function(R){return Le.NUMBER(R).length},Le.NUMBER16=function(R){return[28,R>>8&255,255&R]},Ke.NUMBER16=ut(3),Le.NUMBER32=function(R){return[29,R>>24&255,R>>16&255,R>>8&255,255&R]},Ke.NUMBER32=ut(5),Le.REAL=function(R){for(var W=R.toString(),se=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(W),de=(se&&(se=parseFloat("1e"+((se[2]?+se[2]:0)+se[1].length)),W=(Math.round(R*se)/se).toString()),""),Ae=0,Xe=W.length;Ae<Xe;Ae+=1){var Je=W[Ae];de+="e"===Je?"-"===W[++Ae]?"c":"b":"."===Je?"a":"-"===Je?"e":Je}for(var bt=[30],Yt=0,Ht=(de+=1&de.length?"f":"ff").length;Yt<Ht;Yt+=2)bt.push(parseInt(de.substr(Yt,2),16));return bt},Ke.REAL=function(R){return Le.REAL(R).length},Le.NAME=Le.CHARARRAY,Ke.NAME=Ke.CHARARRAY,Le.STRING=Le.CHARARRAY,Ke.STRING=Ke.CHARARRAY,ge.UTF8=function(R,W,se){for(var de=[],Ae=se,Xe=0;Xe<Ae;Xe++,W+=1)de[Xe]=R.getUint8(W);return String.fromCharCode.apply(null,de)},ge.UTF16=function(R,W,se){for(var de=[],Ae=se/2,Xe=0;Xe<Ae;Xe++,W+=2)de[Xe]=R.getUint16(W);return String.fromCharCode.apply(null,de)},Le.UTF16=function(R){for(var W=[],se=0;se<R.length;se+=1){var de=R.charCodeAt(se);W[W.length]=de>>8&255,W[W.length]=255&de}return W},Ke.UTF16=function(R){return 2*R.length};var _t,Nt={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},dt=(ge.MACSTRING=function(R,W,se,de){var Ae=Nt[de];if(void 0!==Ae){for(var Xe="",Je=0;Je<se;Je++){var bt=R.getUint8(W+Je);Xe+=bt<=127?String.fromCharCode(bt):Ae[127&bt]}return Xe}},"function"==typeof WeakMap&&new WeakMap);function Rt(R){return-128<=R&&R<=127}Le.MACSTRING=function(R,W){var se=function(Je){if(!_t)for(var bt in _t={},Nt)_t[bt]=new String(bt);var Yt=_t[Je];if(void 0!==Yt){if(dt){var Ht=dt.get(Yt);if(void 0!==Ht)return Ht}var wn=Nt[Je];if(void 0!==wn){for(var Oe={},be=0;be<wn.length;be++)Oe[wn.charCodeAt(be)]=be+128;return dt&&dt.set(Yt,Oe),Oe}}}(W);if(void 0!==se){for(var de=[],Ae=0;Ae<R.length;Ae++){var Xe=R.charCodeAt(Ae);if(128<=Xe&&void 0===(Xe=se[Xe]))return;de[Ae]=Xe}return de}},Ke.MACSTRING=function(R,W){return void 0!==(R=Le.MACSTRING(R,W))?R.length:0},Le.VARDELTAS=function(R){for(var de=0,W=[];de<R.length;){var se=R[de];de=(0===se?function(Ae,Xe,Je){for(var bt=0,Yt=Ae.length;Xe<Yt&&bt<64&&0===Ae[Xe];)++Xe,++bt;return Je.push(128|bt-1),Xe}:-128<=se&&se<=127?function(Ae,Xe,Je){for(var bt=0,Yt=Ae.length,Ht=Xe;Ht<Yt&&bt<64;){var wn=Ae[Ht];if(!Rt(wn)||0===wn&&Ht+1<Yt&&0===Ae[Ht+1])break;++Ht,++bt}Je.push(bt-1);for(var Oe=Xe;Oe<Ht;++Oe)Je.push(Ae[Oe]+256&255);return Ht}:function(Ae,Xe,Je){for(var bt=0,Yt=Ae.length,Ht=Xe;Ht<Yt&&bt<64;){var wn=Ae[Ht];if(0===wn||Rt(wn)&&Ht+1<Yt&&Rt(Ae[Ht+1]))break;++Ht,++bt}Je.push(64|bt-1);for(var Oe=Xe;Oe<Ht;++Oe){var be=Ae[Oe];Je.push(be+65536>>8&255,be+256&255)}return Ht})(R,de,W)}return W},Le.INDEX=function(R){for(var W=1,se=[W],de=[],Ae=0;Ae<R.length;Ae+=1){var Xe=Le.OBJECT(R[Ae]);Array.prototype.push.apply(de,Xe),se.push(W+=Xe.length)}if(0===de.length)return[0,0];for(var Je=[],bt=1+Math.floor(Math.log(W)/Math.log(2))/8|0,Yt=[void 0,Le.BYTE,Le.USHORT,Le.UINT24,Le.ULONG][bt],Ht=0;Ht<se.length;Ht+=1){var wn=Yt(se[Ht]);Array.prototype.push.apply(Je,wn)}return Array.prototype.concat(Le.Card16(R.length),Le.OffSize(bt),Je,de)},Ke.INDEX=function(R){return Le.INDEX(R).length},Le.DICT=function(R){for(var W=[],se=Object.keys(R),de=se.length,Ae=0;Ae<de;Ae+=1){var Xe=parseInt(se[Ae],0),Je=R[Xe];W=(W=W.concat(Le.OPERAND(Je.value,Je.type))).concat(Le.OPERATOR(Xe))}return W},Ke.DICT=function(R){return Le.DICT(R).length},Le.OPERATOR=function(R){return R<1200?[R]:[12,R-1200]},Le.OPERAND=function(R,W){var se=[];if(Array.isArray(W))for(var de=0;de<W.length;de+=1)V.argument(R.length===W.length,"Not enough arguments given for type"+W),se=se.concat(Le.OPERAND(R[de],W[de]));else if("SID"===W)se=se.concat(Le.NUMBER(R));else if("offset"===W)se=se.concat(Le.NUMBER32(R));else if("number"===W)se=se.concat(Le.NUMBER(R));else{if("real"!==W)throw new Error("Unknown operand type "+W);se=se.concat(Le.REAL(R))}return se},Le.OP=Le.BYTE,Ke.OP=Ke.BYTE;var Bt="function"==typeof WeakMap&&new WeakMap;function lt(R,W,se){for(var de=0;de<W.length;de+=1){var Ae=W[de];this[Ae.name]=Ae.value}if(this.tableName=R,this.fields=W,se)for(var Xe=Object.keys(se),Je=0;Je<Xe.length;Je+=1){var bt=Xe[Je];void 0!==this[bt]&&(this[bt]=se[bt])}}function It(R,W,se){void 0===se&&(se=W.length);var de=new Array(W.length+1);de[0]={name:R+"Count",type:"USHORT",value:se};for(var Ae=0;Ae<W.length;Ae++)de[Ae+1]={name:R+Ae,type:"USHORT",value:W[Ae]};return de}function Tt(R,W,se){var de=W.length,Ae=new Array(de+1);Ae[0]={name:R+"Count",type:"USHORT",value:de};for(var Xe=0;Xe<de;Xe++)Ae[Xe+1]={name:R+Xe,type:"TABLE",value:se(W[Xe],Xe)};return Ae}function Ot(R,W,se){var de=W.length,Ae=[];Ae[0]={name:R+"Count",type:"USHORT",value:de};for(var Xe=0;Xe<de;Xe++)Ae=Ae.concat(se(W[Xe],Xe));return Ae}function vt(R){1===R.format?lt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(It("glyph",R.glyphs))):V.assert(!1,"Can't create coverage table format 2 yet.")}function Gt(R){lt.call(this,"scriptListTable",Ot("scriptRecord",R,function(W,se){var de=W.script,Ae=de.defaultLangSys;return V.assert(!!Ae,"Unable to write GSUB: script "+W.tag+" has no default language system."),[{name:"scriptTag"+se,type:"TAG",value:W.tag},{name:"script"+se,type:"TABLE",value:new lt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new lt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Ae.reqFeatureIndex}].concat(It("featureIndex",Ae.featureIndexes)))}].concat(Ot("langSys",de.langSysRecords,function(Xe,Je){var bt=Xe.langSys;return[{name:"langSysTag"+Je,type:"TAG",value:Xe.tag},{name:"langSys"+Je,type:"TABLE",value:new lt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:bt.reqFeatureIndex}].concat(It("featureIndex",bt.featureIndexes)))}]})))}]}))}function hn(R){lt.call(this,"featureListTable",Ot("featureRecord",R,function(W,se){var de=W.feature;return[{name:"featureTag"+se,type:"TAG",value:W.tag},{name:"feature"+se,type:"TABLE",value:new lt("featureTable",[{name:"featureParams",type:"USHORT",value:de.featureParams}].concat(It("lookupListIndex",de.lookupListIndexes)))}]}))}function $n(R,W){lt.call(this,"lookupListTable",Tt("lookup",R,function(se){var de=W[se.lookupType];return V.assert(!!de,"Unable to write GSUB lookup type "+se.lookupType+" tables."),new lt("lookupTable",[{name:"lookupType",type:"USHORT",value:se.lookupType},{name:"lookupFlag",type:"USHORT",value:se.lookupFlag}].concat(Tt("subtable",se.subtables,de)))}))}Le.CHARSTRING=function(R){if(Bt){var W=Bt.get(R);if(void 0!==W)return W}for(var Xe=[],se=R.length,de=0;de<se;de+=1){var Ae=R[de];Xe=Xe.concat(Le[Ae.type](Ae.value))}return Bt&&Bt.set(R,Xe),Xe},Ke.CHARSTRING=function(R){return Le.CHARSTRING(R).length},Le.OBJECT=function(R){var W=Le[R.type];return V.argument(void 0!==W,"No encoding function for type "+R.type),W(R.value)},Ke.OBJECT=function(R){var W=Ke[R.type];return V.argument(void 0!==W,"No sizeOf function for type "+R.type),W(R.value)},Le.TABLE=function(R){for(var W=[],se=R.fields.length,de=[],Ae=[],Xe=0;Xe<se;Xe+=1){var Je=R.fields[Xe],bt=(V.argument(void 0!==(Yt=Le[Je.type]),"No encoding function for field type "+Je.type+" ("+Je.name+")"),R[Je.name]),Yt=Yt(bt=void 0===bt?Je.value:bt);"TABLE"===Je.type?(Ae.push(W.length),W=W.concat([0,0]),de.push(Yt)):W=W.concat(Yt)}for(var Ht=0;Ht<de.length;Ht+=1){var wn=Ae[Ht],Oe=W.length;V.argument(Oe<65536,"Table "+R.tableName+" too big."),W[wn]=Oe>>8,W[wn+1]=255&Oe,W=W.concat(de[Ht])}return W},Ke.TABLE=function(R){for(var W=0,se=R.fields.length,de=0;de<se;de+=1){var Ae=R.fields[de],Xe=Ke[Ae.type],Je=(V.argument(void 0!==Xe,"No sizeOf function for field type "+Ae.type+" ("+Ae.name+")"),R[Ae.name]);W+=Xe(Je=void 0===Je?Ae.value:Je),"TABLE"===Ae.type&&(W+=2)}return W},Le.RECORD=Le.TABLE,Ke.RECORD=Ke.TABLE,Le.LITERAL=function(R){return R},Ke.LITERAL=function(R){return R.length},lt.prototype.encode=function(){return Le.TABLE(this)},lt.prototype.sizeOf=function(){return Ke.TABLE(this)};var bn={Table:lt,Record:lt,Coverage:(vt.prototype=Object.create(lt.prototype)).constructor=vt,ScriptList:(Gt.prototype=Object.create(lt.prototype)).constructor=Gt,FeatureList:(hn.prototype=Object.create(lt.prototype)).constructor=hn,LookupList:($n.prototype=Object.create(lt.prototype)).constructor=$n,ushortList:It,tableList:Tt,recordList:Ot};function Xn(R,W){return R.getUint8(W)}function Mn(R,W){return R.getUint16(W,!1)}function gr(R,W){return R.getUint32(W,!1)}function Ln(R,W){return R.getInt16(W,!1)+R.getUint16(W+2,!1)/65535}var nr={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function mn(R,W){this.data=R,this.offset=W,this.relativeOffset=0}mn.prototype.parseByte=function(){var R=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},mn.prototype.parseChar=function(){var R=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,R},mn.prototype.parseCard8=mn.prototype.parseByte,mn.prototype.parseCard16=mn.prototype.parseUShort=function(){var R=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},mn.prototype.parseSID=mn.prototype.parseUShort,mn.prototype.parseOffset16=mn.prototype.parseUShort,mn.prototype.parseShort=function(){var R=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,R},mn.prototype.parseF2Dot14=function(){var R=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,R},mn.prototype.parseOffset32=mn.prototype.parseULong=function(){var R=gr(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},mn.prototype.parseFixed=function(){var R=Ln(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,R},mn.prototype.parseString=function(R){var W=this.data,se=this.offset+this.relativeOffset,de="";this.relativeOffset+=R;for(var Ae=0;Ae<R;Ae++)de+=String.fromCharCode(W.getUint8(se+Ae));return de},mn.prototype.parseTag=function(){return this.parseString(4)},mn.prototype.parseLongDateTime=function(){var R=gr(this.data,this.offset+this.relativeOffset+4);return R-=2082844800,this.relativeOffset+=8,R},mn.prototype.parseVersion=function(R){var W=Mn(this.data,this.offset+this.relativeOffset),se=Mn(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,W+se/(R=void 0===R?4096:R)/10},mn.prototype.skip=function(R,W){this.relativeOffset+=nr[R]*(W=void 0===W?1:W)},mn.prototype.parseULongList=function(R){void 0===R&&(R=this.parseULong());for(var W=new Array(R),se=this.data,de=this.offset+this.relativeOffset,Ae=0;Ae<R;Ae++)W[Ae]=se.getUint32(de),de+=4;return this.relativeOffset+=4*R,W},mn.prototype.parseOffset16List=mn.prototype.parseUShortList=function(R){void 0===R&&(R=this.parseUShort());for(var W=new Array(R),se=this.data,de=this.offset+this.relativeOffset,Ae=0;Ae<R;Ae++)W[Ae]=se.getUint16(de),de+=2;return this.relativeOffset+=2*R,W},mn.prototype.parseShortList=function(R){for(var W=new Array(R),se=this.data,de=this.offset+this.relativeOffset,Ae=0;Ae<R;Ae++)W[Ae]=se.getInt16(de),de+=2;return this.relativeOffset+=2*R,W},mn.prototype.parseByteList=function(R){for(var W=new Array(R),se=this.data,de=this.offset+this.relativeOffset,Ae=0;Ae<R;Ae++)W[Ae]=se.getUint8(de++);return this.relativeOffset+=R,W},mn.prototype.parseList=function(R,W){W||(W=R,R=this.parseUShort());for(var se=new Array(R),de=0;de<R;de++)se[de]=W.call(this);return se},mn.prototype.parseList32=function(R,W){W||(W=R,R=this.parseULong());for(var se=new Array(R),de=0;de<R;de++)se[de]=W.call(this);return se},mn.prototype.parseRecordList=function(R,W){W||(W=R,R=this.parseUShort());for(var se=new Array(R),de=Object.keys(W),Ae=0;Ae<R;Ae++){for(var Xe={},Je=0;Je<de.length;Je++){var bt=de[Je];Xe[bt]=W[bt].call(this)}se[Ae]=Xe}return se},mn.prototype.parseRecordList32=function(R,W){W||(W=R,R=this.parseULong());for(var se=new Array(R),de=Object.keys(W),Ae=0;Ae<R;Ae++){for(var Xe={},Je=0;Je<de.length;Je++){var bt=de[Je];Xe[bt]=W[bt].call(this)}se[Ae]=Xe}return se},mn.prototype.parseStruct=function(R){if("function"==typeof R)return R.call(this);for(var W=Object.keys(R),se={},de=0;de<W.length;de++){var Ae=W[de];se[Ae]=R[Ae].call(this)}return se},mn.prototype.parseValueRecord=function(R){var W;if(0!==(R=void 0===R?this.parseUShort():R))return W={},1&R&&(W.xPlacement=this.parseShort()),2&R&&(W.yPlacement=this.parseShort()),4&R&&(W.xAdvance=this.parseShort()),8&R&&(W.yAdvance=this.parseShort()),16&R&&(W.xPlaDevice=void 0,this.parseShort()),32&R&&(W.yPlaDevice=void 0,this.parseShort()),64&R&&(W.xAdvDevice=void 0,this.parseShort()),128&R&&(W.yAdvDevice=void 0,this.parseShort()),W},mn.prototype.parseValueRecordList=function(){for(var R=this.parseUShort(),W=this.parseUShort(),se=new Array(W),de=0;de<W;de++)se[de]=this.parseValueRecord(R);return se},mn.prototype.parsePointer=function(R){var W=this.parseOffset16();if(0<W)return new mn(this.data,this.offset+W).parseStruct(R)},mn.prototype.parsePointer32=function(R){var W=this.parseOffset32();if(0<W)return new mn(this.data,this.offset+W).parseStruct(R)},mn.prototype.parseListOfLists=function(R){for(var W=this.parseOffset16List(),se=W.length,de=this.relativeOffset,Ae=new Array(se),Xe=0;Xe<se;Xe++){var Je=W[Xe];if(0===Je)Ae[Xe]=void 0;else if(this.relativeOffset=Je,R){for(var bt=this.parseOffset16List(),Yt=new Array(bt.length),Ht=0;Ht<bt.length;Ht++)this.relativeOffset=Je+bt[Ht],Yt[Ht]=R.call(this);Ae[Xe]=Yt}else Ae[Xe]=this.parseUShortList()}return this.relativeOffset=de,Ae},mn.prototype.parseCoverage=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort(),se=this.parseUShort();if(1===W)return{format:1,glyphs:this.parseUShortList(se)};if(2!==W)throw new Error("0x"+R.toString(16)+": Coverage format must be 1 or 2.");for(var de=new Array(se),Ae=0;Ae<se;Ae++)de[Ae]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:de}},mn.prototype.parseClassDef=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();if(1===W)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===W)return{format:2,ranges:this.parseRecordList({start:mn.uShort,end:mn.uShort,classId:mn.uShort})};throw new Error("0x"+R.toString(16)+": ClassDef format must be 1 or 2.")},mn.list=function(R,W){return function(){return this.parseList(R,W)}},mn.list32=function(R,W){return function(){return this.parseList32(R,W)}},mn.recordList=function(R,W){return function(){return this.parseRecordList(R,W)}},mn.recordList32=function(R,W){return function(){return this.parseRecordList32(R,W)}},mn.pointer=function(R){return function(){return this.parsePointer(R)}},mn.pointer32=function(R){return function(){return this.parsePointer32(R)}},mn.tag=mn.prototype.parseTag,mn.byte=mn.prototype.parseByte,mn.uShort=mn.offset16=mn.prototype.parseUShort,mn.uShortList=mn.prototype.parseUShortList,mn.uLong=mn.offset32=mn.prototype.parseULong,mn.uLongList=mn.prototype.parseULongList,mn.struct=mn.prototype.parseStruct,mn.coverage=mn.prototype.parseCoverage,mn.classDef=mn.prototype.parseClassDef;var qn={reserved:mn.uShort,reqFeatureIndex:mn.uShort,featureIndexes:mn.uShortList},Tn=(mn.prototype.parseScriptList=function(){return this.parsePointer(mn.recordList({tag:mn.tag,script:mn.pointer({defaultLangSys:mn.pointer(qn),langSysRecords:mn.recordList({tag:mn.tag,langSys:mn.pointer(qn)})})}))||[]},mn.prototype.parseFeatureList=function(){return this.parsePointer(mn.recordList({tag:mn.tag,feature:mn.pointer({featureParams:mn.offset16,lookupListIndexes:mn.uShortList})}))||[]},mn.prototype.parseLookupList=function(R){return this.parsePointer(mn.list(mn.pointer(function(){var W=this.parseUShort(),se=(V.argument(1<=W&&W<=9,"GPOS/GSUB lookup type "+W+" unknown."),this.parseUShort()),de=16&se;return{lookupType:W,lookupFlag:se,subtables:this.parseList(mn.pointer(R[W])),markFilteringSet:de?this.parseUShort():void 0}})))||[]},mn.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var R=this.parseUShort(),W=this.parseUShort();return V.argument(1===R&&W<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:mn.offset32,featureTableSubstitutionOffset:mn.offset32})})||[]},{getByte:Xn,getCard8:Xn,getUShort:Mn,getCard16:Mn,getShort:function(R,W){return R.getInt16(W,!1)},getULong:gr,getFixed:Ln,getTag:function(R,W){for(var se="",de=W;de<W+4;de+=1)se+=String.fromCharCode(R.getInt8(de));return se},getOffset:function(R,W,se){for(var de=0,Ae=0;Ae<se;Ae+=1)de=(de<<=8)+R.getUint8(W+Ae);return de},getBytes:function(R,W,se){for(var de=[],Ae=W;Ae<se;Ae+=1)de.push(R.getUint8(Ae));return de},bytesToString:function(R){for(var W="",se=0;se<R.length;se+=1)W+=String.fromCharCode(R[se]);return W},Parser:mn}),ct_parse=function(R,W){for(var se={},de=(se.version=Tn.getUShort(R,W),V.argument(0===se.version,"cmap table version should be 0."),se.numTables=Tn.getUShort(R,W+2),-1),Ae=se.numTables-1;0<=Ae;--Ae){var Xe=Tn.getUShort(R,W+4+8*Ae),Je=Tn.getUShort(R,W+4+8*Ae+2);if(3===Xe&&(0===Je||1===Je||10===Je)||0===Xe&&(0===Je||1===Je||2===Je||3===Je||4===Je)){de=Tn.getULong(R,W+4+8*Ae+4);break}}if(-1===de)throw new Error("No valid cmap sub-tables found.");var bt=new Tn.Parser(R,W+de);if(se.format=bt.parseUShort(),12===se.format){var Yt,Ht=se,wn=bt;wn.parseUShort(),Ht.length=wn.parseULong(),Ht.language=wn.parseULong(),Ht.groupCount=Yt=wn.parseULong(),Ht.glyphIndexMap={};for(var Oe=0;Oe<Yt;Oe+=1)for(var be=wn.parseULong(),Ne=wn.parseULong(),Re=wn.parseULong(),at=be;at<=Ne;at+=1)Ht.glyphIndexMap[at]=Re,Re++}else{if(4!==se.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+se.format+").");var Qt=se,En=R,Fn=W,Yr=de;Qt.length=bt.parseUShort(),Qt.language=bt.parseUShort(),Qt.segCount=zr=bt.parseUShort()>>1,bt.skip("uShort",3),Qt.glyphIndexMap={};for(var zr,ai=new Tn.Parser(En,Fn+Yr+14),li=new Tn.Parser(En,Fn+Yr+16+2*zr),Ni=new Tn.Parser(En,Fn+Yr+16+4*zr),ws=new Tn.Parser(En,Fn+Yr+16+6*zr),mo=Fn+Yr+16+8*zr,Mo=0;Mo<zr-1;Mo+=1)for(var Ro=void 0,go=ai.parseUShort(),zo=li.parseUShort(),Ps=Ni.parseShort(),Bs=ws.parseUShort(),Zr=zo;Zr<=go;Zr+=1)0!==Bs?(mo=(mo=ws.offset+ws.relativeOffset-2)+Bs+2*(Zr-zo),0!==(Ro=Tn.getUShort(En,mo))&&(Ro=Ro+Ps&65535)):Ro=Zr+Ps&65535,Qt.glyphIndexMap[Zr]=Ro}return se},ct_make=function(R){for(var W=!0,se=R.length-1;0<se;--se)if(65535<R.get(se).unicode){console.log("Adding CMAP format 12 (needed!)"),W=!1;break}var de,Ae,Xe=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:W?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:W?12:20}],Je=(Xe=(Xe=W?Xe:Xe.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new bn.Table("cmap",Xe));for(Je.segments=[],se=0;se<R.length;se+=1){for(var bt=R.get(se),Yt=0;Yt<bt.unicodes.length;Yt+=1)Je.segments.push({end:de=bt.unicodes[Yt],start:de,delta:-(de-(Ae=se)),offset:0,glyphIndex:Ae});Je.segments=Je.segments.sort(function(Fn,Yr){return Fn.start-Yr.start})}Je.segments.push({end:65535,start:65535,delta:1,offset:0});var Ht=Je.segments.length,wn=0,Oe=[],be=[],Ne=[],Re=[],at=[],Qt=[];for(se=0;se<Ht;se+=1){var En=Je.segments[se];En.end<=65535&&En.start<=65535?(Oe=Oe.concat({name:"end_"+se,type:"USHORT",value:En.end}),be=be.concat({name:"start_"+se,type:"USHORT",value:En.start}),Ne=Ne.concat({name:"idDelta_"+se,type:"SHORT",value:En.delta}),Re=Re.concat({name:"idRangeOffset_"+se,type:"USHORT",value:En.offset}),void 0!==En.glyphId&&(at=at.concat({name:"glyph_"+se,type:"USHORT",value:En.glyphId}))):wn+=1,W||void 0===En.glyphIndex||(Qt=(Qt=(Qt=Qt.concat({name:"cmap12Start_"+se,type:"ULONG",value:En.start})).concat({name:"cmap12End_"+se,type:"ULONG",value:En.end})).concat({name:"cmap12Glyph_"+se,type:"ULONG",value:En.glyphIndex}))}return Je.segCountX2=2*(Ht-wn),Je.searchRange=2*Math.pow(2,Math.floor(Math.log(Ht-wn)/Math.log(2))),Je.entrySelector=Math.log(Je.searchRange/2)/Math.log(2),Je.rangeShift=Je.segCountX2-Je.searchRange,Je.fields=Je.fields.concat(Oe),Je.fields.push({name:"reservedPad",type:"USHORT",value:0}),Je.fields=Je.fields.concat(be),Je.fields=Je.fields.concat(Ne),Je.fields=Je.fields.concat(Re),Je.fields=Je.fields.concat(at),Je.cmap4Length=14+2*Oe.length+2+2*be.length+2*Ne.length+2*Re.length+2*at.length,W||(Xe=16+4*Qt.length,Je.cmap12Offset=20+Je.cmap4Length,Je.fields=Je.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Xe},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Qt.length/3}]),Je.fields=Je.fields.concat(Qt)),Je},pt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Qe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],xt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fn=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Cn(R){this.font=R}function jn(R){this.cmap=R}function on(R,W){this.encoding=R,this.charset=W}function xn(R){switch(R.version){case 1:this.names=fn.slice();break;case 2:this.names=new Array(R.numberOfGlyphs);for(var W=0;W<R.numberOfGlyphs;W++)this.names[W]=R.glyphNameIndex[W]<fn.length?fn[R.glyphNameIndex[W]]:R.names[R.glyphNameIndex[W]-fn.length];break;case 2.5:this.names=new Array(R.numberOfGlyphs);for(var se=0;se<R.numberOfGlyphs;se++)this.names[se]=fn[se+R.glyphNameIndex[se]];break;default:this.names=[]}}Cn.prototype.charToGlyphIndex=function(R){var W=R.codePointAt(0),se=this.font.glyphs;if(se)for(var de=0;de<se.length;de+=1)for(var Ae=se.get(de),Xe=0;Xe<Ae.unicodes.length;Xe+=1)if(Ae.unicodes[Xe]===W)return de;return null},jn.prototype.charToGlyphIndex=function(R){return this.cmap.glyphIndexMap[R.codePointAt(0)]||0},on.prototype.charToGlyphIndex=function(R){return R=R.codePointAt(0),this.charset.indexOf(R=this.encoding[R])},xn.prototype.nameToGlyphIndex=function(R){return this.names.indexOf(R)},xn.prototype.glyphIndexToName=function(R){return this.names[R]};var Pn_line=function(R,W,se,de,Ae){R.beginPath(),R.moveTo(W,se),R.lineTo(de,Ae),R.stroke()};function Un(R){this.bindConstructorValues(R)}function yn(R,W,se){Object.defineProperty(R,W,{get:function(){return R[se]},set:function(de){R[se]=de},enumerable:!0,configurable:!0})}function qt(R,W){if(this.font=R,this.glyphs={},Array.isArray(W))for(var se=0;se<W.length;se++)this.glyphs[se]=W[se];this.length=W&&W.length||0}Un.prototype.bindConstructorValues=function(R){var W;this.index=R.index||0,this.name=R.name||null,this.unicode=R.unicode||void 0,this.unicodes=R.unicodes||void 0!==R.unicode?[R.unicode]:[],R.xMin&&(this.xMin=R.xMin),R.yMin&&(this.yMin=R.yMin),R.xMax&&(this.xMax=R.xMax),R.yMax&&(this.yMax=R.yMax),R.advanceWidth&&(this.advanceWidth=R.advanceWidth),Object.defineProperty(this,"path",(W=(R=R.path)||new Ce,{configurable:!0,get:function(){return W="function"==typeof W?W():W},set:function(se){W=se}}))},Un.prototype.addUnicode=function(R){0===this.unicodes.length&&(this.unicode=R),this.unicodes.push(R)},Un.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Un.prototype.getPath=function(R,W,se,de,Ae){R=void 0!==R?R:0,W=void 0!==W?W:0,se=void 0!==se?se:72;for(var Xe,Je,bt=(de=de||{}).xScale,Yt=de.yScale,Ht=((Xe=de.hinting&&Ae&&Ae.hinting?this.path&&Ae.hinting.exec(this,se):Xe)?(Je=Ae.hinting.getCommands(Xe),R=Math.round(R),W=Math.round(W),bt=Yt=1):(Je=this.path.commands,de=1/this.path.unitsPerEm*se,void 0===bt&&(bt=de),void 0===Yt&&(Yt=de)),new Ce),wn=0;wn<Je.length;wn+=1){var Oe=Je[wn];"M"===Oe.type?Ht.moveTo(R+Oe.x*bt,W+-Oe.y*Yt):"L"===Oe.type?Ht.lineTo(R+Oe.x*bt,W+-Oe.y*Yt):"Q"===Oe.type?Ht.quadraticCurveTo(R+Oe.x1*bt,W+-Oe.y1*Yt,R+Oe.x*bt,W+-Oe.y*Yt):"C"===Oe.type?Ht.curveTo(R+Oe.x1*bt,W+-Oe.y1*Yt,R+Oe.x2*bt,W+-Oe.y2*Yt,R+Oe.x*bt,W+-Oe.y*Yt):"Z"===Oe.type&&Ht.closePath()}return Ht},Un.prototype.getContours=function(){if(void 0===this.points)return[];for(var R=[],W=[],se=0;se<this.points.length;se+=1){var de=this.points[se];W.push(de),de.lastPointOfContour&&(R.push(W),W=[])}return V.argument(0===W.length,"There are still points left in the current contour."),R},Un.prototype.getMetrics=function(){for(var R=this.path.commands,W=[],se=[],de=0;de<R.length;de+=1){var Ae=R[de];"Z"!==Ae.type&&(W.push(Ae.x),se.push(Ae.y)),"Q"!==Ae.type&&"C"!==Ae.type||(W.push(Ae.x1),se.push(Ae.y1)),"C"===Ae.type&&(W.push(Ae.x2),se.push(Ae.y2))}var Xe={xMin:Math.min.apply(null,W),yMin:Math.min.apply(null,se),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,se),leftSideBearing:this.leftSideBearing};return isFinite(Xe.xMin)||(Xe.xMin=0),isFinite(Xe.xMax)||(Xe.xMax=this.advanceWidth),isFinite(Xe.yMin)||(Xe.yMin=0),isFinite(Xe.yMax)||(Xe.yMax=0),Xe.rightSideBearing=this.advanceWidth-Xe.leftSideBearing-(Xe.xMax-Xe.xMin),Xe},Un.prototype.draw=function(R,W,se,de,Ae){this.getPath(W,se,de,Ae).draw(R)},Un.prototype.drawPoints=function(R,W,se,de){function Ae(wn,Oe,be,Ne){var Re=2*Math.PI;R.beginPath();for(var at=0;at<wn.length;at+=1)R.moveTo(Oe+wn[at].x*Ne,be+wn[at].y*Ne),R.arc(Oe+wn[at].x*Ne,be+wn[at].y*Ne,2,0,Re,!1);R.closePath(),R.fill()}W=void 0!==W?W:0,se=void 0!==se?se:0,de=1/this.path.unitsPerEm*(de=void 0!==de?de:24);for(var Xe=[],Je=[],bt=this.path,Yt=0;Yt<bt.commands.length;Yt+=1){var Ht=bt.commands[Yt];void 0!==Ht.x&&Xe.push({x:Ht.x,y:-Ht.y}),void 0!==Ht.x1&&Je.push({x:Ht.x1,y:-Ht.y1}),void 0!==Ht.x2&&Je.push({x:Ht.x2,y:-Ht.y2})}R.fillStyle="blue",Ae(Xe,W,se,de),R.fillStyle="red",Ae(Je,W,se,de)},Un.prototype.drawMetrics=function(R,W,se,de){W=void 0!==W?W:0,se=void 0!==se?se:0,de=1/this.path.unitsPerEm*(de=void 0!==de?de:24),R.lineWidth=1,R.strokeStyle="black",Pn_line(R,W,-1e4,W,1e4),Pn_line(R,-1e4,se,1e4,se);var Ae=this.xMin||0,Xe=this.yMin||0,Je=this.xMax||0,bt=this.yMax||0,Yt=this.advanceWidth||0;R.strokeStyle="blue",Pn_line(R,W+Ae*de,-1e4,W+Ae*de,1e4),Pn_line(R,W+Je*de,-1e4,W+Je*de,1e4),Pn_line(R,-1e4,se+-Xe*de,1e4,se+-Xe*de),Pn_line(R,-1e4,se+-bt*de,1e4,se+-bt*de),R.strokeStyle="green",Pn_line(R,W+Yt*de,-1e4,W+Yt*de,1e4)},qt.prototype.get=function(R){return"function"==typeof this.glyphs[R]&&(this.glyphs[R]=this.glyphs[R]()),this.glyphs[R]},qt.prototype.push=function(R,W){this.glyphs[R]=W,this.length++};var _n={GlyphSet:qt,glyphLoader:function(R,W){return new Un({index:W,font:R})},ttfGlyphLoader:function(R,W,se,de,Ae,Xe){return function(){var Je=new Un({index:W,font:R});return Je.path=function(){se(Je,de,Ae);var bt=Xe(R.glyphs,Je);return bt.unitsPerEm=R.unitsPerEm,bt},yn(Je,"xMin","_xMin"),yn(Je,"xMax","_xMax"),yn(Je,"yMin","_yMin"),yn(Je,"yMax","_yMax"),Je}},cffGlyphLoader:function(R,W,se,de){return function(){var Ae=new Un({index:W,font:R});return Ae.path=function(){var Xe=se(R,Ae,de);return Xe.unitsPerEm=R.unitsPerEm,Xe},Ae}}};function Kt(R){return R.length<1240?107:R.length<33900?1131:32768}function ln(R,W,se){var de,Ae=[],Xe=[],Je=Tn.getCard16(R,W);if(0!==Je){for(var bt=Tn.getByte(R,W+2),Yt=W+(Je+1)*bt+2,Ht=W+3,wn=0;wn<Je+1;wn+=1)Ae.push(Tn.getOffset(R,Ht,bt)),Ht+=bt;de=Yt+Ae[Je]}else de=W+2;for(var Oe=0;Oe<Ae.length-1;Oe+=1){var be=Tn.getBytes(R,Yt+Ae[Oe],Yt+Ae[Oe+1]);se&&(be=se(be)),Xe.push(be)}return{objects:Xe,startOffset:W,endOffset:de}}function Zn(R,W){if(28===W)return R.parseByte()<<8|R.parseByte();if(29===W)return R.parseByte()<<24|R.parseByte()<<16|R.parseByte()<<8|R.parseByte();if(30===W){for(var se=R,de="",Ae=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var Xe=(Je=se.parseByte())>>4,Je=15&Je;if(15==Xe||(de+=Ae[Xe],15==Je))break;de+=Ae[Je]}return parseFloat(de)}if(32<=W&&W<=246)return W-139;if(247<=W&&W<=250)return 256*(W-247)+R.parseByte()+108;if(251<=W&&W<=254)return 256*-(W-251)-R.parseByte()-108;throw new Error("Invalid b0 "+W)}function Ut(R,W,se){var de=new Tn.Parser(R,W=void 0!==W?W:0),Ae=[],Xe=[];for(se=void 0!==se?se:R.length;de.relativeOffset<se;){var Je=de.parseByte();Je<=21?(12===Je&&(Je=1200+de.parseByte()),Ae.push([Je,Xe]),Xe=[]):Xe.push(Zn(de,Je))}for(var bt=Ae,Yt={},Ht=0;Ht<bt.length;Ht+=1){var be,wn=bt[Ht][0],Oe=bt[Ht][1];if(be=1===Oe.length?Oe[0]:Oe,Yt.hasOwnProperty(wn)&&!isNaN(Yt[wn]))throw new Error("Object "+Yt+" already has key "+wn);Yt[wn]=be}return Yt}function sn(R,W){return W<=390?pt[W]:R[W-391]}function On(R,W,se){for(var de,Ae={},Xe=0;Xe<W.length;Xe+=1){var Je=W[Xe];if(Array.isArray(Je.type)){var bt=[];bt.length=Je.type.length;for(var Yt=0;Yt<Je.type.length;Yt++)void 0===(de=void 0!==R[Je.op]?R[Je.op][Yt]:void 0)&&(de=void 0!==Je.value&&void 0!==Je.value[Yt]?Je.value[Yt]:null),"SID"===Je.type[Yt]&&(de=sn(se,de)),bt[Yt]=de;Ae[Je.name]=bt}else void 0===(de=R[Je.op])&&(de=void 0!==Je.value?Je.value:null),"SID"===Je.type&&(de=sn(se,de)),Ae[Je.name]=de}return Ae}var Sn=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],zn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function cr(R,W,se,de){return On(Ut(R,W,se),zn,de)}function sr(R,W,se,de){for(var Ae=[],Xe=0;Xe<se.length;Xe+=1){var Je,bt=((bt=de,Je=On(Ut(Je=new DataView(new Uint8Array(se[Xe]).buffer),0,Je.byteLength),Sn,bt))._subrs=[],Je._subrsBias=0,Je.private[0]),Yt=Je.private[1];0!==bt&&0!==Yt&&(bt=cr(R,Yt+W,bt,de),Je._defaultWidthX=bt.defaultWidthX,Je._nominalWidthX=bt.nominalWidthX,0!==bt.subrs&&(Yt=ln(R,Yt+bt.subrs+W),Je._subrs=Yt.objects,Je._subrsBias=Kt(Je._subrs)),Je._privateDict=bt),Ae.push(Je)}return Ae}function yr(R,W,se){var de,Ae,Xe,Je,bt,Yt,Ht,wn,Oe,be=new Ce,Ne=[],Re=0,at=!1,Qt=!1,En=0,Fn=0,Yr=(Oe=(R.isCIDFont?(bt=R.tables.cff.topDict._fdSelect[W.index],bt=R.tables.cff.topDict._fdArray[bt],Yt=bt._subrs,Ht=bt._subrsBias,wn=bt._defaultWidthX,bt):(Yt=R.tables.cff.topDict._subrs,Ht=R.tables.cff.topDict._subrsBias,wn=R.tables.cff.topDict._defaultWidthX,R.tables.cff.topDict))._nominalWidthX,wn);function zr(li,Ni){Qt&&be.closePath(),be.moveTo(li,Ni),Qt=!0}function ai(){Ne.length%2==0||at||(Yr=Ne.shift()+Oe),Re+=Ne.length>>1,Ne.length=0,at=!0}return function li(Ni){for(var ws,mo,Mo,Ro,go,zo,Ps,Bs,Zr,Zs,Js,As,ci=0;ci<Ni.length;){var Po=Ni[ci];switch(ci+=1,Po){case 1:case 3:case 18:case 23:ai();break;case 4:1<Ne.length&&!at&&(Yr=Ne.shift()+Oe,at=!0),Fn+=Ne.pop(),zr(En,Fn);break;case 5:for(;0<Ne.length;)En+=Ne.shift(),Fn+=Ne.shift(),be.lineTo(En,Fn);break;case 6:for(;0<Ne.length&&(En+=Ne.shift(),be.lineTo(En,Fn),0!==Ne.length);)Fn+=Ne.shift(),be.lineTo(En,Fn);break;case 7:for(;0<Ne.length&&(Fn+=Ne.shift(),be.lineTo(En,Fn),0!==Ne.length);)En+=Ne.shift(),be.lineTo(En,Fn);break;case 8:for(;0<Ne.length;)de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),Fn=Je+Ne.shift(),be.curveTo(de,Ae,Xe,Je,En,Fn);break;case 10:go=Ne.pop()+Ht,(zo=Yt[go])&&li(zo);break;case 11:return;case 12:switch(Po=Ni[ci],ci+=1,Po){case 35:de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Ps=Xe+Ne.shift(),Bs=Je+Ne.shift(),Zr=Ps+Ne.shift(),Zs=Bs+Ne.shift(),Js=Zr+Ne.shift(),As=Zs+Ne.shift(),En=Js+Ne.shift(),Fn=As+Ne.shift(),Ne.shift(),be.curveTo(de,Ae,Xe,Je,Ps,Bs),be.curveTo(Zr,Zs,Js,As,En,Fn);break;case 34:de=En+Ne.shift(),Ae=Fn,Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Ps=Xe+Ne.shift(),Bs=Je,Zr=Ps+Ne.shift(),Zs=Je,Js=Zr+Ne.shift(),As=Fn,En=Js+Ne.shift(),be.curveTo(de,Ae,Xe,Je,Ps,Bs),be.curveTo(Zr,Zs,Js,As,En,Fn);break;case 36:de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Ps=Xe+Ne.shift(),Bs=Je,Zr=Ps+Ne.shift(),Zs=Je,Js=Zr+Ne.shift(),As=Zs+Ne.shift(),En=Js+Ne.shift(),be.curveTo(de,Ae,Xe,Je,Ps,Bs),be.curveTo(Zr,Zs,Js,As,En,Fn);break;case 37:de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Ps=Xe+Ne.shift(),Bs=Je+Ne.shift(),Zr=Ps+Ne.shift(),Zs=Bs+Ne.shift(),Js=Zr+Ne.shift(),As=Zs+Ne.shift(),Math.abs(Js-En)>Math.abs(As-Fn)?En=Js+Ne.shift():Fn=As+Ne.shift(),be.curveTo(de,Ae,Xe,Je,Ps,Bs),be.curveTo(Zr,Zs,Js,As,En,Fn);break;default:console.log("Glyph "+W.index+": unknown operator 1200"+Po),Ne.length=0}break;case 14:0<Ne.length&&!at&&(Yr=Ne.shift()+Oe,at=!0),Qt&&(be.closePath(),Qt=!1);break;case 19:case 20:ai(),ci+=Re+7>>3;break;case 21:2<Ne.length&&!at&&(Yr=Ne.shift()+Oe,at=!0),Fn+=Ne.pop(),zr(En+=Ne.pop(),Fn);break;case 22:1<Ne.length&&!at&&(Yr=Ne.shift()+Oe,at=!0),zr(En+=Ne.pop(),Fn);break;case 24:for(;2<Ne.length;)de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),Fn=Je+Ne.shift(),be.curveTo(de,Ae,Xe,Je,En,Fn);En+=Ne.shift(),Fn+=Ne.shift(),be.lineTo(En,Fn);break;case 25:for(;6<Ne.length;)En+=Ne.shift(),Fn+=Ne.shift(),be.lineTo(En,Fn);de=En+Ne.shift(),Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),Fn=Je+Ne.shift(),be.curveTo(de,Ae,Xe,Je,En,Fn);break;case 26:for(Ne.length%2&&(En+=Ne.shift());0<Ne.length;)de=En,Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe,Fn=Je+Ne.shift(),be.curveTo(de,Ae,Xe,Je,En,Fn);break;case 27:for(Ne.length%2&&(Fn+=Ne.shift());0<Ne.length;)de=En+Ne.shift(),Ae=Fn,Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),be.curveTo(de,Ae,Xe,Je,En,Fn=Je);break;case 28:Ne.push(((ws=Ni[ci])<<24|(mo=Ni[ci+1])<<16)>>16),ci+=2;break;case 29:go=Ne.pop()+R.gsubrsBias,(zo=R.gsubrs[go])&&li(zo);break;case 30:for(;0<Ne.length&&(de=En,Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),Fn=Je+(1===Ne.length?Ne.shift():0),be.curveTo(de,Ae,Xe,Je,En,Fn),0!==Ne.length);)de=En+Ne.shift(),Ae=Fn,Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Fn=Je+Ne.shift(),En=Xe+(1===Ne.length?Ne.shift():0),be.curveTo(de,Ae,Xe,Je,En,Fn);break;case 31:for(;0<Ne.length&&(de=En+Ne.shift(),Ae=Fn,Xe=de+Ne.shift(),Je=Ae+Ne.shift(),Fn=Je+Ne.shift(),En=Xe+(1===Ne.length?Ne.shift():0),be.curveTo(de,Ae,Xe,Je,En,Fn),0!==Ne.length);)de=En,Ae=Fn+Ne.shift(),Xe=de+Ne.shift(),Je=Ae+Ne.shift(),En=Xe+Ne.shift(),Fn=Je+(1===Ne.length?Ne.shift():0),be.curveTo(de,Ae,Xe,Je,En,Fn);break;default:Po<32?console.log("Glyph "+W.index+": unknown operator "+Po):Po<247?Ne.push(Po-139):Po<251?(ws=Ni[ci],ci+=1,Ne.push(256*(Po-247)+ws+108)):Po<255?(ws=Ni[ci],ci+=1,Ne.push(256*-(Po-251)-ws-108)):(ws=Ni[ci],mo=Ni[ci+1],Mo=Ni[ci+2],Ro=Ni[ci+3],ci+=4,Ne.push((ws<<24|mo<<16|Mo<<8|Ro)/65536))}}}(se),W.advanceWidth=Yr,be}function Tr(R,W){var se,de=pt.indexOf(R);return 0<=de&&(se=de),0<=(de=W.indexOf(R))?se=de+pt.length:(se=pt.length+W.length,W.push(R)),se}function te(R,W,se){for(var de={},Ae=0;Ae<R.length;Ae+=1){var Xe=R[Ae],Je=W[Xe.name];void 0===Je||function bt(Yt,Ht){if(Yt===Ht)return 1;if(Array.isArray(Yt)&&Array.isArray(Ht)&&Yt.length===Ht.length){for(var wn=0;wn<Yt.length;wn+=1)if(!bt(Yt[wn],Ht[wn]))return;return 1}}(Je,Xe.value)||("SID"===Xe.type&&(Je=Tr(Je,se)),de[Xe.op]={name:Xe.name,type:Xe.type,value:Je})}return de}function De(R,W){var se=new bn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return se.dict=te(Sn,R,W),se}function Ye(R){var W=new bn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return W.topDicts=[{name:"topDict_0",type:"TABLE",value:R}],W}var N_parse=function(R,W,se){se.tables.cff={},(Ae={}).formatMajor=Tn.getCard8(bt=R,de=W),Ae.formatMinor=Tn.getCard8(bt,de+1),Ae.size=Tn.getCard8(bt,de+2),Ae.offsetSize=Tn.getCard8(bt,de+3),Ae.startOffset=de,Ae.endOffset=de+4;var bt=ln(R,Ae.endOffset,Tn.bytesToString),de=ln(R,bt.endOffset),Ae=ln(R,de.endOffset,Tn.bytesToString);if(bt=ln(R,Ae.endOffset),se.gsubrs=bt.objects,se.gsubrsBias=Kt(se.gsubrs),1!==(bt=sr(R,W,de.objects,Ae.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+bt.length);if((se.tables.cff.topDict=de=bt[0])._privateDict&&(se.defaultWidthX=de._privateDict.defaultWidthX,se.nominalWidthX=de._privateDict.nominalWidthX),void 0!==de.ros[0]&&void 0!==de.ros[1]&&(se.isCIDFont=!0),se.isCIDFont){var Xe=de.fdSelect;if(0===(bt=de.fdArray)||0===Xe)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");bt=sr(R,W,ln(R,bt+=W).objects,Ae.objects),de._fdArray=bt,de._fdSelect=function(be,Ne,Re,at){var Qt,En=[],Fn=new Tn.Parser(be,Ne);if(0===(be=Fn.parseCard8()))for(var Yr=0;Yr<Re;Yr++){if(at<=(Qt=Fn.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Qt+" (FD count "+at+")");En.push(Qt)}else{if(3!==be)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+be);var zr,ai=Fn.parseCard16(),li=Fn.parseCard16();if(0!==li)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+li);for(var Ni=0;Ni<ai;Ni++){if(Qt=Fn.parseCard8(),zr=Fn.parseCard16(),at<=Qt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Qt+" (FD count "+at+")");if(Re<zr)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+zr);for(;li<zr;li++)En.push(Qt);li=zr}if(zr!==Re)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+zr)}return En}(R,Xe+=W,se.numGlyphs,bt.length)}bt=cr(R,Xe=W+de.private[1],de.private[0],Ae.objects);var Je=(se.defaultWidthX=bt.defaultWidthX,se.nominalWidthX=bt.nominalWidthX,0!==bt.subrs?(Xe=ln(R,Xe+bt.subrs),se.subrs=Xe.objects,se.subrsBias=Kt(se.subrs)):(se.subrs=[],se.subrsBias=0),ln(R,W+de.charStrings));se.nGlyphs=Je.objects.length,bt=function(wn,Oe,be,Ne){var Re=new Tn.Parser(wn,Oe),at=(--be,[".notdef"]);if(0===(wn=Re.parseCard8()))for(var Qt=0;Qt<be;Qt+=1)En=Re.parseSID(),at.push(sn(Ne,En));else if(1===wn)for(;at.length<=be;)for(var En=Re.parseSID(),Fn=Re.parseCard8(),Yr=0;Yr<=Fn;Yr+=1)at.push(sn(Ne,En)),En+=1;else{if(2!==wn)throw new Error("Unknown charset format "+wn);for(;at.length<=be;){En=Re.parseSID(),Fn=Re.parseCard16();for(var zr=0;zr<=Fn;zr+=1)at.push(sn(Ne,En)),En+=1}}return at}(R,W+de.charset,se.nGlyphs,Ae.objects),se.cffEncoding=0===de.encoding?new on(Qe,bt):1===de.encoding?new on(xt,bt):function(wn,Oe,be){var Ne={},Re=new Tn.Parser(wn,Oe);if(0===(wn=Re.parseCard8()))for(var at=Re.parseCard8(),Qt=0;Qt<at;Qt+=1)Ne[Fn=Re.parseCard8()]=Qt;else{if(1!==wn)throw new Error("Unknown encoding format "+wn);for(var En=Re.parseCard8(),Fn=1,Yr=0;Yr<En;Yr+=1)for(var zr=Re.parseCard8(),ai=Re.parseCard8(),li=zr;li<=zr+ai;li+=1)Ne[li]=Fn,Fn+=1}return new on(Ne,be)}(R,W+de.encoding,bt),se.encoding=se.encoding||se.cffEncoding,se.glyphs=new _n.GlyphSet(se);for(var Yt=0;Yt<se.nGlyphs;Yt+=1)se.glyphs.push(Yt,_n.cffGlyphLoader(se,Yt,yr,Je.objects[Yt]))},N_make=function(R,wn){for(var se,de=new bn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Ae={version:wn.version,fullName:wn.fullName,familyName:wn.familyName,weight:wn.weightName,fontBBox:wn.fontBBox||[0,0,0,0],fontMatrix:[Ae=1/wn.unitsPerEm,0,0,Ae,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Xe=[],Je=1;Je<R.length;Je+=1)se=R.get(Je),Xe.push(se.name);var bt,Yt,Ht=[],Oe=(de.header=new bn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),de.nameIndex=function(be){var Ne=new bn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ne.names=[];for(var Re=0;Re<be.length;Re+=1)Ne.names.push({name:"name_"+Re,type:"NAME",value:be[Re]});return Ne}([wn.postScriptName]),wn=De(Ae,Ht),de.topDictIndex=Ye(wn),de.globalSubrIndex=new bn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),de.charsets=function(be,Ne){for(var Re=new bn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),at=0;at<be.length;at+=1){var Qt=Tr(be[at],Ne);Re.fields.push({name:"glyph_"+at,type:"SID",value:Qt})}return Re}(Xe,Ht),de.charStringsIndex=function T(R){for(var W=new bn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),se=0;se<R.length;se+=1){var de=R.get(se),Ae=function(Xe){for(var Je=[],bt=Xe.path,Yt=(Je.push({name:"width",type:"NUMBER",value:Xe.advanceWidth}),0),Ht=0,wn=0;wn<bt.commands.length;wn+=1){var Oe,be,Ne,Re,at=void 0,Qt=void 0,En=bt.commands[wn];"M"===(En="Q"===En.type?{type:"C",x:En.x,y:En.y,x1:1/3*Yt+2/3*En.x1,y1:1/3*Ht+2/3*En.y1,x2:1/3*En.x+2/3*En.x1,y2:1/3*En.y+2/3*En.y1}:En).type?(at=Math.round(En.x-Yt),Qt=Math.round(En.y-Ht),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rmoveto",type:"OP",value:21}),Yt=Math.round(En.x),Ht=Math.round(En.y)):"L"===En.type?(at=Math.round(En.x-Yt),Qt=Math.round(En.y-Ht),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rlineto",type:"OP",value:5}),Yt=Math.round(En.x),Ht=Math.round(En.y)):"C"===En.type&&(Oe=Math.round(En.x1-Yt),be=Math.round(En.y1-Ht),Ne=Math.round(En.x2-En.x1),Re=Math.round(En.y2-En.y1),at=Math.round(En.x-En.x2),Qt=Math.round(En.y-En.y2),Je.push({name:"dx1",type:"NUMBER",value:Oe}),Je.push({name:"dy1",type:"NUMBER",value:be}),Je.push({name:"dx2",type:"NUMBER",value:Ne}),Je.push({name:"dy2",type:"NUMBER",value:Re}),Je.push({name:"dx",type:"NUMBER",value:at}),Je.push({name:"dy",type:"NUMBER",value:Qt}),Je.push({name:"rrcurveto",type:"OP",value:8}),Yt=Math.round(En.x),Ht=Math.round(En.y))}return Je.push({name:"endchar",type:"OP",value:14}),Je}(de);W.charStrings.push({name:de.name,type:"CHARSTRING",value:Ae})}return W}(R),de.privateDict=(Oe={},bt=Ht,(Yt=new bn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=te(zn,Oe,bt),Yt),de.stringIndex=function(be){var Ne=new bn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ne.strings=[];for(var Re=0;Re<be.length;Re+=1)Ne.strings.push({name:"string_"+Re,type:"STRING",value:be[Re]});return Ne}(Ht),de.header.sizeOf()+de.nameIndex.sizeOf()+de.topDictIndex.sizeOf()+de.stringIndex.sizeOf()+de.globalSubrIndex.sizeOf());return Ae.charset=Oe,Ae.encoding=0,Ae.charStrings=Ae.charset+de.charsets.sizeOf(),Ae.private[1]=Ae.charStrings+de.charStringsIndex.sizeOf(),wn=De(Ae,Ht),de.topDictIndex=Ye(wn),de},B_parse=function(de,W){var se={};return de=new Tn.Parser(de,W),se.version=de.parseVersion(),se.fontRevision=Math.round(1e3*de.parseFixed())/1e3,se.checkSumAdjustment=de.parseULong(),se.magicNumber=de.parseULong(),V.argument(1594834165===se.magicNumber,"Font header has wrong magic number."),se.flags=de.parseUShort(),se.unitsPerEm=de.parseUShort(),se.created=de.parseLongDateTime(),se.modified=de.parseLongDateTime(),se.xMin=de.parseShort(),se.yMin=de.parseShort(),se.xMax=de.parseShort(),se.yMax=de.parseShort(),se.macStyle=de.parseUShort(),se.lowestRecPPEM=de.parseUShort(),se.fontDirectionHint=de.parseShort(),se.indexToLocFormat=de.parseShort(),se.glyphDataFormat=de.parseShort(),se},B_make=function(R){var W=Math.round((new Date).getTime()/1e3)+2082844800,se=W;return R.createdTimestamp&&(se=R.createdTimestamp+2082844800),new bn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:se},{name:"modified",type:"LONGDATETIME",value:W},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],R)},O_parse=function(de,W){var se={};return de=new Tn.Parser(de,W),se.version=de.parseVersion(),se.ascender=de.parseShort(),se.descender=de.parseShort(),se.lineGap=de.parseShort(),se.advanceWidthMax=de.parseUShort(),se.minLeftSideBearing=de.parseShort(),se.minRightSideBearing=de.parseShort(),se.xMaxExtent=de.parseShort(),se.caretSlopeRise=de.parseShort(),se.caretSlopeRun=de.parseShort(),se.caretOffset=de.parseShort(),de.relativeOffset+=8,se.metricDataFormat=de.parseShort(),se.numberOfHMetrics=de.parseUShort(),se},O_make=function(R){return new bn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],R)},ie_parse=function(R,W,se,de,Ae){for(var Xe,Je,bt=new Tn.Parser(R,W),Yt=0;Yt<de;Yt+=1){Yt<se&&(Xe=bt.parseUShort(),Je=bt.parseShort());var Ht=Ae.get(Yt);Ht.advanceWidth=Xe,Ht.leftSideBearing=Je}},ie_make=function(R){for(var W=new bn.Table("hmtx",[]),se=0;se<R.length;se+=1){var de=(Ae=R.get(se)).advanceWidth||0,Ae=Ae.leftSideBearing||0;W.fields.push({name:"advanceWidth_"+se,type:"USHORT",value:de}),W.fields.push({name:"leftSideBearing_"+se,type:"SHORT",value:Ae})}return W},q_make=function(R){for(var W=new bn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:R.length}]),se="",de=12+4*R.length,Ae=0;Ae<R.length;++Ae){var Xe=se.indexOf(R[Ae]);Xe<0&&(Xe=se.length,se+=R[Ae]),W.fields.push({name:"offset "+Ae,type:"USHORT",value:de+Xe}),W.fields.push({name:"length "+Ae,type:"USHORT",value:R[Ae].length})}return W.fields.push({name:"stringPool",type:"CHARARRAY",value:se}),W},q_parse=function(R,W){for(var se=new Tn.Parser(R,W),de=se.parseULong(),Ae=(V.argument(1===de,"Unsupported ltag table version."),se.skip("uLong",1),se.parseULong()),Xe=[],Je=0;Je<Ae;Je++){for(var bt="",Yt=W+se.parseUShort(),Ht=se.parseUShort(),wn=Yt;wn<Yt+Ht;++wn)bt+=String.fromCharCode(R.getInt8(wn));Xe.push(bt)}return Xe},ce_parse=function(de,W){var se={};return de=new Tn.Parser(de,W),se.version=de.parseVersion(),se.numGlyphs=de.parseUShort(),1===se.version&&(se.maxPoints=de.parseUShort(),se.maxContours=de.parseUShort(),se.maxCompositePoints=de.parseUShort(),se.maxCompositeContours=de.parseUShort(),se.maxZones=de.parseUShort(),se.maxTwilightPoints=de.parseUShort(),se.maxStorage=de.parseUShort(),se.maxFunctionDefs=de.parseUShort(),se.maxInstructionDefs=de.parseUShort(),se.maxStackElements=de.parseUShort(),se.maxSizeOfInstructions=de.parseUShort(),se.maxComponentElements=de.parseUShort(),se.maxComponentDepth=de.parseUShort()),se},ce_make=function(R){return new bn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:R}])},Ge=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],He={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},gt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Vt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},cn="utf-16",Ve={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},We={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function ft(R,W,se){switch(R){case 0:return cn;case 1:return We[se]||Ve[W];case 3:if(1===W||10===W)return cn}}function nt(R){var W,se={};for(W in R)se[R[W]]=parseInt(W);return se}function Dt(R,W,se,de,Ae,Xe){return new bn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:R},{name:"encodingID",type:"USHORT",value:W},{name:"languageID",type:"USHORT",value:se},{name:"nameID",type:"USHORT",value:de},{name:"length",type:"USHORT",value:Ae},{name:"offset",type:"USHORT",value:Xe}])}function un(R,W){if((se=function(Xe,Je){var bt=Xe.length,Yt=Je.length-bt+1;e:for(var Ht=0;Ht<Yt;Ht++)for(;Ht<Yt;Ht++){for(var wn=0;wn<bt;wn++)if(Je[Ht+wn]!==Xe[wn])continue e;return Ht}return-1}(R,W))<0)for(var se=W.length,de=0,Ae=R.length;de<Ae;++de)W.push(R[de]);return se}var Bn_parse=function(R,W,se){for(var de={},Ae=new Tn.Parser(R,W),Xe=(W=Ae.parseUShort(),Ae.parseUShort()),Je=Ae.offset+Ae.parseUShort(),bt=0;bt<Xe;bt++){var Re=Ae.parseUShort(),Yt=Ae.parseUShort(),Ht=Ae.parseUShort(),wn=Ae.parseUShort(),Oe=(wn=Ge[wn]||wn,Ae.parseUShort()),be=Ae.parseUShort(),Ne=function(Qt,En,Fn){switch(Qt){case 0:if(65535===En)return"und";if(Fn)return Fn[En];break;case 1:return He[En];case 3:return Vt[En]}}(Re,Ht,se);void 0!==(Re=ft(Re,Yt,Ht))&&void 0!==Ne&&(Yt=void 0,(Yt=Re===cn?ge.UTF16(R,Je+be,Oe):ge.MACSTRING(R,Je+be,Oe,Re))&&((Ht=void 0===(Ht=de[wn])?de[wn]={}:Ht)[Ne]=Yt))}return 1===W&&Ae.parseUShort(),de},Bn_make=function(R,W){var se,de=[],Ae={},Xe=nt(Ge);for(se in R){var Je=Xe[se];if(void 0===Je&&(Je=se),be=parseInt(Je),isNaN(be))throw new Error('Name table entry "'+se+'" does not exist, see nameTableNames for complete list.');Ae[be]=R[se],de.push(be)}for(var bt=nt(He),Yt=nt(Vt),Ht=[],wn=[],Oe=0;Oe<de.length;Oe++){var be,Ne,Re=Ae[be=de[Oe]];for(Ne in Re){var zr,at=Re[Ne],Qt=bt[Ne],En=gt[Qt],Fn=ft(zr=1,En,Qt),Yr=(void 0===(Fn=Le.MACSTRING(at,Fn))&&(zr=0,(Qt=W.indexOf(Ne))<0&&(Qt=W.length,W.push(Ne)),En=4,Fn=Le.UTF16(at)),un(Fn,wn));void 0!==(Ht.push(Dt(zr,En,Qt,be,Fn.length,Yr)),zr=Yt[Ne])&&(Qt=un(En=Le.UTF16(at),wn),Ht.push(Dt(3,1,zr,be,En.length,Qt)))}}Ht.sort(function(Ni,ws){return Ni.platformID-ws.platformID||Ni.encodingID-ws.encodingID||Ni.languageID-ws.languageID||Ni.nameID-ws.nameID});for(var ai=new bn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ht.length},{name:"stringOffset",type:"USHORT",value:6+12*Ht.length}]),li=0;li<Ht.length;li++)ai.fields.push({name:"record_"+li,type:"RECORD",value:Ht[li]});return ai.fields.push({name:"strings",type:"LITERAL",value:wn}),ai},ar=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Pr_parse=function(R,W){var se={},de=new Tn.Parser(R,W);se.version=de.parseUShort(),se.xAvgCharWidth=de.parseShort(),se.usWeightClass=de.parseUShort(),se.usWidthClass=de.parseUShort(),se.fsType=de.parseUShort(),se.ySubscriptXSize=de.parseShort(),se.ySubscriptYSize=de.parseShort(),se.ySubscriptXOffset=de.parseShort(),se.ySubscriptYOffset=de.parseShort(),se.ySuperscriptXSize=de.parseShort(),se.ySuperscriptYSize=de.parseShort(),se.ySuperscriptXOffset=de.parseShort(),se.ySuperscriptYOffset=de.parseShort(),se.yStrikeoutSize=de.parseShort(),se.yStrikeoutPosition=de.parseShort(),se.sFamilyClass=de.parseShort(),se.panose=[];for(var Ae=0;Ae<10;Ae++)se.panose[Ae]=de.parseByte();return se.ulUnicodeRange1=de.parseULong(),se.ulUnicodeRange2=de.parseULong(),se.ulUnicodeRange3=de.parseULong(),se.ulUnicodeRange4=de.parseULong(),se.achVendID=String.fromCharCode(de.parseByte(),de.parseByte(),de.parseByte(),de.parseByte()),se.fsSelection=de.parseUShort(),se.usFirstCharIndex=de.parseUShort(),se.usLastCharIndex=de.parseUShort(),se.sTypoAscender=de.parseShort(),se.sTypoDescender=de.parseShort(),se.sTypoLineGap=de.parseShort(),se.usWinAscent=de.parseUShort(),se.usWinDescent=de.parseUShort(),1<=se.version&&(se.ulCodePageRange1=de.parseULong(),se.ulCodePageRange2=de.parseULong()),2<=se.version&&(se.sxHeight=de.parseShort(),se.sCapHeight=de.parseShort(),se.usDefaultChar=de.parseUShort(),se.usBreakChar=de.parseUShort(),se.usMaxContent=de.parseUShort()),se},Pr_make=function(R){return new bn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],R)},Pr_getUnicodeRange=function(R){for(var W=0;W<ar.length;W+=1){var se=ar[W];if(R>=se.begin&&R<se.end)return W}return-1},Ui_parse=function(R,W){var se={},de=new Tn.Parser(R,W);switch(se.version=de.parseVersion(),se.italicAngle=de.parseFixed(),se.underlinePosition=de.parseShort(),se.underlineThickness=de.parseShort(),se.isFixedPitch=de.parseULong(),se.minMemType42=de.parseULong(),se.maxMemType42=de.parseULong(),se.minMemType1=de.parseULong(),se.maxMemType1=de.parseULong(),se.version){case 1:se.names=fn.slice();break;case 2:se.numberOfGlyphs=de.parseUShort(),se.glyphNameIndex=new Array(se.numberOfGlyphs);for(var Ae=0;Ae<se.numberOfGlyphs;Ae++)se.glyphNameIndex[Ae]=de.parseUShort();se.names=[];for(var Xe,Je=0;Je<se.numberOfGlyphs;Je++)se.glyphNameIndex[Je]>=fn.length&&(Xe=de.parseChar(),se.names.push(de.parseString(Xe)));break;case 2.5:se.numberOfGlyphs=de.parseUShort(),se.offset=new Array(se.numberOfGlyphs);for(var bt=0;bt<se.numberOfGlyphs;bt++)se.offset[bt]=de.parseChar()}return se},Ui_make=function(){return new bn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},ji=new Array(9),Us=(ji[1]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{substFormat:1,coverage:this.parsePointer(mn.coverage),deltaGlyphId:this.parseUShort()}:2===W?{substFormat:2,coverage:this.parsePointer(mn.coverage),substitute:this.parseOffset16List()}:void V.assert(!1,"0x"+R.toString(16)+": lookup type 1 format must be 1 or 2.")},ji[2]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(mn.coverage),sequences:this.parseListOfLists()}},ji[3]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(mn.coverage),alternateSets:this.parseListOfLists()}},ji[4]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB ligature table identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(mn.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:mn.uShort,lookupListIndex:mn.uShort});ji[5]=function(){var R,W,se=this.offset+this.relativeOffset,de=this.parseUShort();return 1===de?{substFormat:de,coverage:this.parsePointer(mn.coverage),ruleSets:this.parseListOfLists(function(){var Ae=this.parseUShort(),Xe=this.parseUShort();return{input:this.parseUShortList(Ae-1),lookupRecords:this.parseRecordList(Xe,Us)}})}:2===de?{substFormat:de,coverage:this.parsePointer(mn.coverage),classDef:this.parsePointer(mn.classDef),classSets:this.parseListOfLists(function(){var Ae=this.parseUShort(),Xe=this.parseUShort();return{classes:this.parseUShortList(Ae-1),lookupRecords:this.parseRecordList(Xe,Us)}})}:3===de?(R=this.parseUShort(),W=this.parseUShort(),{substFormat:de,coverages:this.parseList(R,mn.pointer(mn.coverage)),lookupRecords:this.parseRecordList(W,Us)}):void V.assert(!1,"0x"+se.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ji[6]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{substFormat:1,coverage:this.parsePointer(mn.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})}:2===W?{substFormat:2,coverage:this.parsePointer(mn.coverage),backtrackClassDef:this.parsePointer(mn.classDef),inputClassDef:this.parsePointer(mn.classDef),lookaheadClassDef:this.parsePointer(mn.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})}:3===W?{substFormat:3,backtrackCoverage:this.parseList(mn.pointer(mn.coverage)),inputCoverage:this.parseList(mn.pointer(mn.coverage)),lookaheadCoverage:this.parseList(mn.pointer(mn.coverage)),lookupRecords:this.parseRecordList(Us)}:void V.assert(!1,"0x"+R.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ji[7]=function(){var R=this.parseUShort(),W=(V.argument(1===R,"GSUB Extension Substitution subtable identifier-format must be 1"),R=this.parseUShort(),new mn(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:R,extension:ji[R].call(W)}},ji[8]=function(){var R=this.parseUShort();return V.argument(1===R,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:R,coverage:this.parsePointer(mn.coverage),backtrackCoverage:this.parseList(mn.pointer(mn.coverage)),lookaheadCoverage:this.parseList(mn.pointer(mn.coverage)),substitutes:this.parseUShortList()}};var bs=new Array(9);bs[1]=function(R){return new bn.Table("substitutionTable",1===R.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(R.coverage)},{name:"deltaGlyphID",type:"USHORT",value:R.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new bn.Coverage(R.coverage)}].concat(bn.ushortList("substitute",R.substitute)))},bs[3]=function(R){return V.assert(1===R.substFormat,"Lookup type 3 substFormat must be 1."),new bn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(R.coverage)}].concat(bn.tableList("altSet",R.alternateSets,function(W){return new bn.Table("alternateSetTable",bn.ushortList("alternate",W))})))},bs[4]=function(R){return V.assert(1===R.substFormat,"Lookup type 4 substFormat must be 1."),new bn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(R.coverage)}].concat(bn.tableList("ligSet",R.ligatureSets,function(W){return new bn.Table("ligatureSetTable",bn.tableList("ligature",W,function(se){return new bn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:se.ligGlyph}].concat(bn.ushortList("component",se.components,se.components.length+1)))}))})))};var wi_parse=function(R,W){return W=(R=new mn(R,W=W||0)).parseVersion(1),V.argument(1===W||1.1===W,"Unsupported GSUB table version."),1===W?{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(ji)}:{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(ji),variations:R.parseFeatureVariationsList()}},wi_make=function(R){return new bn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new bn.ScriptList(R.scripts)},{name:"features",type:"TABLE",value:new bn.FeatureList(R.features)},{name:"lookups",type:"TABLE",value:new bn.LookupList(R.lookups,bs)}])},us_parse=function(R,W){for(var se=new Tn.Parser(R,W),de=se.parseULong(),Ae=(V.argument(1===de,"Unsupported META table version."),se.parseULong(),se.parseULong(),se.parseULong()),Xe={},Je=0;Je<Ae;Je++){var bt=se.parseTag(),Ht=se.parseULong(),Yt=se.parseULong();Ht=ge.UTF8(R,W+Ht,Yt),Xe[bt]=Ht}return Xe},us_make=function(R){var W,se=Object.keys(R).length,de="",Ae=16+12*se,Xe=new bn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Ae},{name:"numTags",type:"ULONG",value:se}]);for(W in R){var Je=de.length;de+=R[W],Xe.fields.push({name:"tag "+W,type:"TAG",value:W}),Xe.fields.push({name:"offset "+W,type:"ULONG",value:Ae+Je}),Xe.fields.push({name:"length "+W,type:"ULONG",value:R[W].length})}return Xe.fields.push({name:"stringPool",type:"CHARARRAY",value:de}),Xe};function $s(R){return Math.log(R)/Math.log(2)|0}function ys(R){for(;R.length%4!=0;)R.push(0);for(var W=0,se=0;se<R.length;se+=4)W+=(R[se]<<24)+(R[se+1]<<16)+(R[se+2]<<8)+R[se+3];return W%Math.pow(2,32)}function Vs(R,W,se,de){return new bn.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==R?R:""},{name:"checkSum",type:"ULONG",value:void 0!==W?W:0},{name:"offset",type:"ULONG",value:void 0!==se?se:0},{name:"length",type:"ULONG",value:void 0!==de?de:0}])}function Ko(R){for(var W=new bn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),se=(W.tables=R,W.numTables=R.length,Math.pow(2,$s(W.numTables))),de=(W.searchRange=16*se,W.entrySelector=$s(se),W.rangeShift=16*W.numTables-W.searchRange,[]),Ae=[],Xe=W.sizeOf()+Vs().sizeOf()*W.numTables;Xe%4!=0;)Xe+=1,Ae.push({name:"padding",type:"BYTE",value:0});for(var Je=0;Je<R.length;Je+=1){var bt=R[Je],Yt=(V.argument(4===bt.tableName.length,"Table name"+bt.tableName+" is invalid."),bt.sizeOf()),Ht=Vs(bt.tableName,ys(bt.encode()),Xe,Yt);for(de.push({name:Ht.tag+" Table Record",type:"RECORD",value:Ht}),Ae.push({name:bt.tableName+" table",type:"RECORD",value:bt}),Xe+=Yt,V.argument(!isNaN(Xe),"Something went wrong calculating the offset.");Xe%4!=0;)Xe+=1,Ae.push({name:"padding",type:"BYTE",value:0})}return de.sort(function(wn,Oe){return wn.value.tag>Oe.value.tag?1:-1}),W.fields=W.fields.concat(de),W.fields=W.fields.concat(Ae),W}function fo(R,W,se){for(var de=0;de<W.length;de+=1){var Ae=R.charToGlyphIndex(W[de]);if(0<Ae)return R.glyphs.get(Ae).getMetrics()}return se}var Vo_fontToTable=function(R){for(var W,se=[],de=[],Ae=[],Xe=[],Je=[],bt=[],Yt=[],Ht=0,wn=0,Oe=0,be=0,Ne=0,Re=0;Re<R.glyphs.length;Re+=1){var at=R.glyphs.get(Re),Qt=0|at.unicode;if(isNaN(at.advanceWidth))throw new Error("Glyph "+at.name+" ("+Re+"): advanceWidth is not a number.");if((Qt<W||void 0===W)&&0<Qt&&(W=Qt),Ht<Qt&&(Ht=Qt),(Qt=Pr_getUnicodeRange(Qt))<32)wn|=1<<Qt;else if(Qt<64)Oe|=1<<Qt-32;else if(Qt<96)be|=1<<Qt-64;else{if(!(Qt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ne|=1<<Qt-96}".notdef"!==at.name&&(Qt=at.getMetrics(),se.push(Qt.xMin),de.push(Qt.yMin),Ae.push(Qt.xMax),Xe.push(Qt.yMax),bt.push(Qt.leftSideBearing),Yt.push(Qt.rightSideBearing),Je.push(at.advanceWidth))}var En,Fn={xMin:Math.min.apply(null,se),yMin:Math.min.apply(null,de),xMax:Math.max.apply(null,Ae),yMax:Math.max.apply(null,Xe),advanceWidthMax:Math.max.apply(null,Je),advanceWidthAvg:function(Po){for(var fr=0,Gi=0;Gi<Po.length;Gi+=1)fr+=Po[Gi];return fr/Po.length}(Je),minLeftSideBearing:Math.min.apply(null,bt),maxLeftSideBearing:Math.max.apply(null,bt),minRightSideBearing:Math.min.apply(null,Yt)},Yr=(Fn.ascender=R.ascender,Fn.descender=R.descender,B_make({flags:3,unitsPerEm:R.unitsPerEm,xMin:Fn.xMin,yMin:Fn.yMin,xMax:Fn.xMax,yMax:Fn.yMax,lowestRecPPEM:3,createdTimestamp:R.createdTimestamp})),zr=O_make({ascender:Fn.ascender,descender:Fn.descender,advanceWidthMax:Fn.advanceWidthMax,minLeftSideBearing:Fn.minLeftSideBearing,minRightSideBearing:Fn.minRightSideBearing,xMaxExtent:Fn.maxLeftSideBearing+(Fn.xMax-Fn.xMin),numberOfHMetrics:R.glyphs.length}),ai=ce_make(R.glyphs.length),li=Pr_make({xAvgCharWidth:Math.round(Fn.advanceWidthAvg),usWeightClass:R.tables.os2.usWeightClass,usWidthClass:R.tables.os2.usWidthClass,usFirstCharIndex:W,usLastCharIndex:Ht,ulUnicodeRange1:wn,ulUnicodeRange2:Oe,ulUnicodeRange3:be,ulUnicodeRange4:Ne,fsSelection:R.tables.os2.fsSelection,sTypoAscender:Fn.ascender,sTypoDescender:Fn.descender,sTypoLineGap:0,usWinAscent:Fn.yMax,usWinDescent:Math.abs(Fn.yMin),ulCodePageRange1:1,sxHeight:fo(R,"xyvw",{yMax:Math.round(Fn.ascender/2)}).yMax,sCapHeight:fo(R,"HIKLEFJMNTZBDPRAGOQSUVWXY",Fn).yMax,usDefaultChar:R.hasChar(" ")?32:0,usBreakChar:R.hasChar(" ")?32:0}),Ni=ie_make(R.glyphs),ws=ct_make(R.glyphs),Ps=(Bs=R.getEnglishName("fontFamily"))+" "+(Zr=R.getEnglishName("fontSubfamily")),mo=(mo=R.getEnglishName("postScriptName"))||Bs.replace(/\s/g,"")+"-"+Zr,Mo={};for(En in R.names)Mo[En]=R.names[En];Mo.uniqueID||(Mo.uniqueID={en:R.getEnglishName("manufacturer")+":"+Ps}),Mo.postScriptName||(Mo.postScriptName={en:mo}),Mo.preferredFamily||(Mo.preferredFamily=R.names.fontFamily),Mo.preferredSubfamily||(Mo.preferredSubfamily=R.names.fontSubfamily);var Ro=Bn_make(Mo,go=[]),go=0<go.length?q_make(go):void 0,zo=Ui_make(),Bs=(Ps=N_make(R.glyphs,{version:R.getEnglishName("version"),fullName:Ps,familyName:Bs,weightName:Zr,postScriptName:mo,unitsPerEm:R.unitsPerEm,fontBBox:[0,Fn.yMin,Fn.ascender,Fn.advanceWidthMax]}),R.metas&&0<Object.keys(R.metas).length?us_make(R.metas):void 0),Zr=[Yr,zr,ai,li,Ro,ws,zo,Ps,Ni];go&&Zr.push(go),R.tables.gsub&&Zr.push(wi_make(R.tables.gsub)),Bs&&Zr.push(Bs);for(var Zs=ys((mo=Ko(Zr)).encode()),Js=mo.fields,As=!1,ci=0;ci<Js.length;ci+=1)if("head table"===Js[ci].name){Js[ci].value.checkSumAdjustment=2981146554-Zs,As=!0;break}if(As)return mo;throw new Error("Could not find head table with checkSum to adjust.")};function ea(R,W){for(var se=0,de=R.length-1;se<=de;){var Ae=se+de>>>1,Xe=R[Ae].tag;if(Xe===W)return Ae;Xe<W?se=1+Ae:de=Ae-1}return-se-1}function ta(R,W){for(var se=0,de=R.length-1;se<=de;){var Ae=se+de>>>1,Xe=R[Ae];if(Xe===W)return Ae;Xe<W?se=1+Ae:de=Ae-1}return-se-1}function la(R,W){for(var se=0,de=R.length-1;se<=de;){var Ae,Xe=se+de>>>1,Je=(Ae=R[Xe]).start;if(Je===W)return Ae;Je<W?se=1+Xe:de=Xe-1}if(0<se)return W>(Ae=R[se-1]).end?0:Ae}function eo(R,W){this.font=R,this.tableName=W}function ca(R){eo.call(this,R,"gpos")}function _o(R){eo.call(this,R,"gsub")}function ka(R,W,se){for(var de=R.subtables,Ae=0;Ae<de.length;Ae++){var Xe=de[Ae];if(Xe.substFormat===W)return Xe}if(se)return de.push(se),se}function Wa(R){for(var W=new ArrayBuffer(R.length),se=new Uint8Array(W),de=0;de<R.length;++de)se[de]=R[de];return W}function ke(R,W){if(!R)throw W}function ht(R,W,se,de,Ae){var Xe=0<(W&de)?(Xe=R.parseByte(),se+(Xe=W&Ae?Xe:-Xe)):0<(W&Ae)?se:se+R.parseShort();return Xe}function kt(R,W,se){var de,Ae=new Tn.Parser(W,se);if(R.numberOfContours=Ae.parseShort(),R._xMin=Ae.parseShort(),R._yMin=Ae.parseShort(),R._xMax=Ae.parseShort(),R._yMax=Ae.parseShort(),0<R.numberOfContours){for(var Xe=R.endPointIndices=[],Je=0;Je<R.numberOfContours;Je+=1)Xe.push(Ae.parseUShort());R.instructionLength=Ae.parseUShort(),R.instructions=[];for(var bt=0;bt<R.instructionLength;bt+=1)R.instructions.push(Ae.parseByte());for(var Yt=Xe[Xe.length-1]+1,Ht=[],wn=0;wn<Yt;wn+=1)if(de=Ae.parseByte(),Ht.push(de),0<(8&de))for(var Oe=Ae.parseByte(),be=0;be<Oe;be+=1)Ht.push(de),wn+=1;if(V.argument(Ht.length===Yt,"Bad flags."),0<Xe.length){var Ne,Re=[];if(0<Yt){for(var at=0;at<Yt;at+=1)(Ne={}).onCurve=!!(1&(de=Ht[at])),Ne.lastPointOfContour=0<=Xe.indexOf(at),Re.push(Ne);for(var Qt=0,En=0;En<Yt;En+=1)(Ne=Re[En]).x=ht(Ae,de=Ht[En],Qt,2,16),Qt=Ne.x;for(var Fn=0,Yr=0;Yr<Yt;Yr+=1)(Ne=Re[Yr]).y=ht(Ae,de=Ht[Yr],Fn,4,32),Fn=Ne.y}R.points=Re}else R.points=[]}else if(0===R.numberOfContours)R.points=[];else{R.isComposite=!0,R.points=[],R.components=[];for(var zr=!0;zr;){Ht=Ae.parseUShort();var ai={glyphIndex:Ae.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Ht)?0<(2&Ht)?(ai.dx=Ae.parseShort(),ai.dy=Ae.parseShort()):ai.matchedPoints=[Ae.parseUShort(),Ae.parseUShort()]:0<(2&Ht)?(ai.dx=Ae.parseChar(),ai.dy=Ae.parseChar()):ai.matchedPoints=[Ae.parseByte(),Ae.parseByte()],0<(8&Ht)?ai.xScale=ai.yScale=Ae.parseF2Dot14():0<(64&Ht)?(ai.xScale=Ae.parseF2Dot14(),ai.yScale=Ae.parseF2Dot14()):0<(128&Ht)&&(ai.xScale=Ae.parseF2Dot14(),ai.scale01=Ae.parseF2Dot14(),ai.scale10=Ae.parseF2Dot14(),ai.yScale=Ae.parseF2Dot14()),R.components.push(ai),zr=!!(32&Ht)}if(256&Ht){R.instructionLength=Ae.parseUShort(),R.instructions=[];for(var li=0;li<R.instructionLength;li+=1)R.instructions.push(Ae.parseByte())}}}function Be(R,W){for(var se=[],de=0;de<R.length;de+=1){var Ae;se.push(Ae={x:W.xScale*(Ae=R[de]).x+W.scale01*Ae.y+W.dx,y:W.scale10*Ae.x+W.yScale*Ae.y+W.dy,onCurve:Ae.onCurve,lastPointOfContour:Ae.lastPointOfContour})}return se}function zt(R){var W=new Ce;if(R)for(var se=function(Oe){for(var be=[],Ne=[],Re=0;Re<Oe.length;Re+=1){var at=Oe[Re];Ne.push(at),at.lastPointOfContour&&(be.push(Ne),Ne=[])}return V.argument(0===Ne.length,"There are still points left in the current contour."),be}(R),de=0;de<se.length;++de){var Ae,Xe=se[de],bt=Xe[0];(Je=Xe[Xe.length-1]).onCurve?W.moveTo(Je.x,Je.y):bt.onCurve?W.moveTo(bt.x,bt.y):W.moveTo((Ae={x:.5*(Je.x+bt.x),y:.5*(Je.y+bt.y)}).x,Ae.y);for(var Yt=0;Yt<Xe.length;++Yt){var Ht,Je=bt;bt=Xe[(Yt+1)%Xe.length],Je.onCurve?W.lineTo(Je.x,Je.y):(Ht=bt,bt.onCurve||(Ht={x:.5*(Je.x+bt.x),y:.5*(Je.y+bt.y)}),W.quadraticCurveTo(Je.x,Je.y,Ht.x,Ht.y))}W.closePath()}return W}function In(R,W){if(W.isComposite)for(var se=0;se<W.components.length;se+=1){var Ae=R.get((de=W.components[se]).glyphIndex);if(Ae.getPath(),Ae.points){var Xe=void 0;if(void 0===de.matchedPoints)Xe=Be(Ae.points,de);else{if(de.matchedPoints[0]>W.points.length-1||de.matchedPoints[1]>Ae.points.length-1)throw Error("Matched points out of range in "+W.name);var de,Je=W.points[de.matchedPoints[0]],bt=Be([bt=Ae.points[de.matchedPoints[1]]],de={xScale:de.xScale,scale01:de.scale01,scale10:de.scale10,yScale:de.yScale,dx:0,dy:0})[0];de.dx=Je.x-bt.x,de.dy=Je.y-bt.y,Xe=Be(Ae.points,de)}W.points=W.points.concat(Xe)}}return zt(W.points)}(ca.prototype=eo.prototype={searchTag:ea,binSearch:ta,getTable:function(R){var W=this.font.tables[this.tableName];return!W&&R?this.font.tables[this.tableName]=this.createDefaultTable():W},getScriptNames:function(){var R=this.getTable();return R?R.scripts.map(function(W){return W.tag}):[]},getDefaultScriptName:function(){var R=this.getTable();if(R){for(var W=!1,se=0;se<R.scripts.length;se++){var de=R.scripts[se].tag;if("DFLT"===de)return de;"latn"===de&&(W=!0)}return W?"latn":void 0}},getScriptTable:function(R,W){var se,de=this.getTable(W);if(de)return se=de.scripts,0<=(de=ea(de.scripts,R=R||"DFLT"))?se[de].script:W?(se.splice(-1-de,0,W={tag:R,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),W.script):void 0},getLangSysTable:function(Ae,W,se){var de;if(Ae=this.getScriptTable(Ae,se))return W&&"dflt"!==W&&"DFLT"!==W?0<=(de=ea(Ae.langSysRecords,W))?Ae.langSysRecords[de].langSys:se?(Ae.langSysRecords.splice(-1-de,0,se={tag:W,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),se.langSys):void 0:Ae.defaultLangSys},getFeatureTable:function(R,W,se,de){if(R=this.getLangSysTable(R,W,de)){for(var Ae,Xe=R.featureIndexes,Je=this.font.tables[this.tableName].features,bt=0;bt<Xe.length;bt++)if((Ae=Je[Xe[bt]]).tag===se)return Ae.feature;if(de)return V.assert(0===(W=Je.length)||se>=Je[W-1].tag,"Features must be added in alphabetical order."),Je.push(Ae={tag:se,feature:{params:0,lookupListIndexes:[]}}),Xe.push(W),Ae.feature}},getLookupTables:function(Xe,W,se,de,Ae){var Je=[];if(Xe=this.getFeatureTable(Xe,W,se,Ae)){for(var bt,Yt=Xe.lookupListIndexes,Ht=this.font.tables[this.tableName].lookups,wn=0;wn<Yt.length;wn++)(bt=Ht[Yt[wn]]).lookupType===de&&Je.push(bt);if(0===Je.length&&Ae)return W=Ht.length,Ht.push(bt={lookupType:de,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Yt.push(W),[bt]}return Je},getGlyphClass:function(R,W){switch(R.format){case 1:return R.startGlyph<=W&&W<R.startGlyph+R.classes.length?R.classes[W-R.startGlyph]:0;case 2:var se=la(R.ranges,W);return se?se.classId:0}},getCoverageIndex:function(R,W){switch(R.format){case 1:var se=ta(R.glyphs,W);return 0<=se?se:-1;case 2:return(se=la(R.ranges,W))?se.index+W-se.start:-1}},expandCoverage:function(R){if(1===R.format)return R.glyphs;for(var W=[],se=R.ranges,de=0;de<se.length;de++)for(var Ae=se[de],Je=Ae.end,bt=Ae.start;bt<=Je;bt++)W.push(bt);return W}}).init=function(){var R=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(R)},ca.prototype.getKerningValue=function(R,W,se){for(var de=0;de<R.length;de++)for(var Ae=R[de].subtables,Xe=0;Xe<Ae.length;Xe++){var Je=Ae[Xe],bt=this.getCoverageIndex(Je.coverage,W);if(!(bt<0))switch(Je.posFormat){case 1:for(var Yt=Je.pairSets[bt],Ht=0;Ht<Yt.length;Ht++){var wn=Yt[Ht];if(wn.secondGlyph===se)return wn.value1&&wn.value1.xAdvance||0}break;case 2:var be=this.getGlyphClass(Je.classDef1,W),Oe=this.getGlyphClass(Je.classDef2,se);return(be=Je.classRecords[be][Oe]).value1&&be.value1.xAdvance||0}}return 0},ca.prototype.getKerningTables=function(R,W){if(this.font.tables.gpos)return this.getLookupTables(R,W,"kern",2)},(_o.prototype=eo.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},_o.prototype.getSingle=function(R,W,se){for(var de=[],Ae=this.getLookupTables(W,se,R,1),Xe=0;Xe<Ae.length;Xe++)for(var Je=Ae[Xe].subtables,bt=0;bt<Je.length;bt++){var Yt=Je[bt],Ht=this.expandCoverage(Yt.coverage),wn=void 0;if(1===Yt.substFormat){var Oe=Yt.deltaGlyphId;for(wn=0;wn<Ht.length;wn++){var be=Ht[wn];de.push({sub:be,by:be+Oe})}}else{var Ne=Yt.substitute;for(wn=0;wn<Ht.length;wn++)de.push({sub:Ht[wn],by:Ne[wn]})}}return de},_o.prototype.getAlternates=function(R,W,se){for(var de=[],Ae=this.getLookupTables(W,se,R,3),Xe=0;Xe<Ae.length;Xe++)for(var Je=Ae[Xe].subtables,bt=0;bt<Je.length;bt++)for(var Yt=Je[bt],Ht=this.expandCoverage(Yt.coverage),wn=Yt.alternateSets,Oe=0;Oe<Ht.length;Oe++)de.push({sub:Ht[Oe],by:wn[Oe]});return de},_o.prototype.getLigatures=function(R,W,se){for(var de=[],Ae=this.getLookupTables(W,se,R,4),Xe=0;Xe<Ae.length;Xe++)for(var Je=Ae[Xe].subtables,bt=0;bt<Je.length;bt++)for(var Yt=Je[bt],Ht=this.expandCoverage(Yt.coverage),wn=Yt.ligatureSets,Oe=0;Oe<Ht.length;Oe++)for(var be=Ht[Oe],Ne=wn[Oe],Re=0;Re<Ne.length;Re++){var at=Ne[Re];de.push({sub:[be].concat(at.components),by:at.ligGlyph})}return de},_o.prototype.addSingle=function(R,W,se,de){se=ka(this.getLookupTables(se,de,R,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),V.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(R=this.binSearch(se.coverage.glyphs,de=W.sub))<0&&(se.coverage.glyphs.splice(R=-1-R,0,de),se.substitute.splice(R,0,0)),se.substitute[R]=W.by},_o.prototype.addAlternate=function(R,W,se,de){se=ka(this.getLookupTables(se,de,R,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),V.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(R=this.binSearch(se.coverage.glyphs,de=W.sub))<0&&(se.coverage.glyphs.splice(R=-1-R,0,de),se.alternateSets.splice(R,0,0)),se.alternateSets[R]=W.by},_o.prototype.addLigature=function(Xe,Yt,bt,Ae){(Ae=(bt=this.getLookupTables(bt,Ae,Xe,4,!0)[0]).subtables[0])||(bt.subtables[0]=Ae={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),V.assert(1===Ae.coverage.format,"Ligature: unable to modify coverage table format "+Ae.coverage.format),Xe=Yt.sub[0];var Je=Yt.sub.slice(1);if(bt={ligGlyph:Yt.by,components:Je},0<=(Yt=this.binSearch(Ae.coverage.glyphs,Xe))){for(var Ht=Ae.ligatureSets[Yt],wn=0;wn<Ht.length;wn++)if(function(Oe,be){var Ne=Oe.length;if(Ne===be.length){for(var Re=0;Re<Ne;Re++)if(Oe[Re]!==be[Re])return;return 1}}(Ht[wn].components,Je))return;Ht.push(bt)}else Ae.coverage.glyphs.splice(Yt=-1-Yt,0,Xe),Ae.ligatureSets.splice(Yt,0,[bt])},_o.prototype.getFeature=function(R,W,se){if(/ss\d\d/.test(R))return this.getSingle(R,W,se);switch(R){case"aalt":case"salt":return this.getSingle(R,W,se).concat(this.getAlternates(R,W,se));case"dlig":case"liga":case"rlig":return this.getLigatures(R,W,se)}},_o.prototype.add=function(R,W,se,de){if(/ss\d\d/.test(R))return this.addSingle(R,W,se,de);switch(R){case"aalt":case"salt":return"number"==typeof W.by?this.addSingle(R,W,se,de):this.addAlternate(R,W,se,de);case"dlig":case"liga":case"rlig":return this.addLigature(R,W,se,de)}};var ts={getPath:zt,parse:function(R,W,se,de){for(var Ae=new _n.GlyphSet(de),Xe=0;Xe<se.length-1;Xe+=1){var Je=se[Xe];Ae.push(Xe,Je!==se[Xe+1]?_n.ttfGlyphLoader(de,Xe,kt,R,W+Je,In):_n.glyphLoader(de,Xe))}return Ae}};function Gs(R){this.font=R,this.getCommands=function(W){return ts.getPath(W).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Go(R){return R}function Ca(R){return Math.sign(R)*Math.round(Math.abs(R))}function ba(R){return Math.sign(R)*Math.round(Math.abs(2*R))/2}function ll(R){return Math.sign(R)*(Math.round(Math.abs(R)+.5)-.5)}function Rl(R){return Math.sign(R)*Math.ceil(Math.abs(R))}function Pl(R){return Math.sign(R)*Math.floor(Math.abs(R))}function Ol(R){var W=this.srPeriod,se=this.srPhase,de=1;return R<0&&(R=-R,de=-1),R+=this.srThreshold-se,R=Math.trunc(R/W)*W,(R+=se)<0?se*de:R*de}var Io={x:1,y:0,axis:"x",distance:function(R,W,se,de){return(se?R.xo:R.x)-(de?W.xo:W.x)},interpolate:function(R,W,se,de){var Ae,Xe,Je,bt,Yt,Ht,wn;if(!de||de===this)return Ae=R.xo-W.xo,Xe=R.xo-se.xo,Yt=W.x-W.xo,Ht=se.x-se.xo,0===(wn=(Je=Math.abs(Ae))+(bt=Math.abs(Xe)))?void(R.x=R.xo+(Yt+Ht)/2):void(R.x=R.xo+(Yt*bt+Ht*Je)/wn);Ae=de.distance(R,W,!0,!0),Xe=de.distance(R,se,!0,!0),Yt=de.distance(W,W,!1,!0),Ht=de.distance(se,se,!1,!0),0===(wn=(Je=Math.abs(Ae))+(bt=Math.abs(Xe)))?Io.setRelative(R,R,(Yt+Ht)/2,de,!0):Io.setRelative(R,R,(Yt*bt+Ht*Je)/wn,de,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(R,W,se,de,Ae){var Xe,Je;de&&de!==this?(Xe=Ae?W.xo:W.x,Je=Ae?W.yo:W.y,R.x=(Xe+=se*de.x)+(R.y-(Je+=se*de.y))/de.normalSlope):R.x=(Ae?W.xo:W.x)+se},slope:0,touch:function(R){R.xTouched=!0},touched:function(R){return R.xTouched},untouch:function(R){R.xTouched=!1}},ko={x:0,y:1,axis:"y",distance:function(R,W,se,de){return(se?R.yo:R.y)-(de?W.yo:W.y)},interpolate:function(R,W,se,de){var Ae,Xe,Je,bt,Yt,Ht,wn;if(!de||de===this)return Ae=R.yo-W.yo,Xe=R.yo-se.yo,Yt=W.y-W.yo,Ht=se.y-se.yo,0===(wn=(Je=Math.abs(Ae))+(bt=Math.abs(Xe)))?void(R.y=R.yo+(Yt+Ht)/2):void(R.y=R.yo+(Yt*bt+Ht*Je)/wn);Ae=de.distance(R,W,!0,!0),Xe=de.distance(R,se,!0,!0),Yt=de.distance(W,W,!1,!0),Ht=de.distance(se,se,!1,!0),0===(wn=(Je=Math.abs(Ae))+(bt=Math.abs(Xe)))?ko.setRelative(R,R,(Yt+Ht)/2,de,!0):ko.setRelative(R,R,(Yt*bt+Ht*Je)/wn,de,!0)},normalSlope:0,setRelative:function(R,W,se,de,Ae){var Xe,Je;de&&de!==this?(Xe=Ae?W.xo:W.x,Je=Ae?W.yo:W.y,R.y=(Je+=se*de.y)+de.normalSlope*(R.x-(Xe+=se*de.x))):R.y=(Ae?W.yo:W.y)+se},slope:Number.POSITIVE_INFINITY,touch:function(R){R.yTouched=!0},touched:function(R){return R.yTouched},untouch:function(R){R.yTouched=!1}};function ao(R,W){this.x=R,this.y=W,this.axis=void 0,this.slope=W/R,this.normalSlope=-R/W,Object.freeze(this)}function Eo(R,W){var se=Math.sqrt(R*R+W*W);return W/=se,1==(R/=se)&&0===W?Io:0===R&&1===W?ko:new ao(R,W)}function ot(R,W,se,de){this.x=this.xo=Math.round(64*R)/64,this.y=this.yo=Math.round(64*W)/64,this.lastPointOfContour=se,this.onCurve=de,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Io),Object.freeze(ko),ao.prototype.distance=function(R,W,se,de){return this.x*Io.distance(R,W,se,de)+this.y*ko.distance(R,W,se,de)},ao.prototype.interpolate=function(R,Ae,Xe,de){var Je=de.distance(R,Ae,!0,!0),bt=de.distance(R,Xe,!0,!0),Yt=(Ae=de.distance(Ae,Ae,!1,!0),Xe=de.distance(Xe,Xe,!1,!0),(Je=Math.abs(Je))+(bt=Math.abs(bt)));this.setRelative(R,R,0===Yt?(Ae+Xe)/2:(Ae*bt+Xe*Je)/Yt,de,!0)},ao.prototype.setRelative=function(R,Xe,Yt,Ht,bt){var Je=bt?Xe.xo:Xe.x,wn=(bt=bt?Xe.yo:Xe.y,Xe=Je+Yt*(Ht=Ht||this).x,Je=bt+Yt*Ht.y,bt=Ht.normalSlope,R.y);R.x=((Yt=this.slope)*(Ht=R.x)-bt*Xe+Je-wn)/(Yt-bt),R.y=Yt*(R.x-Ht)+wn},ao.prototype.touch=function(R){R.xTouched=!0,R.yTouched=!0},ot.prototype.nextTouched=function(R){for(var W=this.nextPointOnContour;!R.touched(W)&&W!==this;)W=W.nextPointOnContour;return W},ot.prototype.prevTouched=function(R){for(var W=this.prevPointOnContour;!R.touched(W)&&W!==this;)W=W.prevPointOnContour;return W};var Ct=Object.freeze(new ot(0,0)),an={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function vn(R,W){switch(this.env=R,this.stack=[],this.prog=W,R){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Io,this.round=Ca}}function Rn(R){for(var W=R.tZone=new Array(R.gZone.length),se=0;se<W.length;se++)W[se]=new ot(0,0)}function Dn(R,W){var se,de=R.prog,Ae=R.ip,Xe=1;do{if(88===(se=de[++Ae]))Xe++;else if(89===se)Xe--;else if(64===se)Ae+=de[Ae+1]+1;else if(65===se)Ae+=2*de[Ae+1]+1;else if(176<=se&&se<=183)Ae+=se-176+1;else if(184<=se&&se<=191)Ae+=2*(se-184+1);else if(W&&1===Xe&&27===se)break}while(0<Xe);R.ip=Ae}function ir(R,W){w.DEBUG&&console.log(W.step,"SVTCA["+R.axis+"]"),W.fv=W.pv=W.dpv=R}function hr(R,W){w.DEBUG&&console.log(W.step,"SPVTCA["+R.axis+"]"),W.pv=W.dpv=R}function vr(R,W){w.DEBUG&&console.log(W.step,"SFVTCA["+R.axis+"]"),W.fv=R}function Sr(R,W){var se,de=(Ae=W.stack).pop(),Ae=Ae.pop(),Xe=W.z2[de],Je=W.z1[Ae];w.DEBUG&&console.log("SPVTL["+R+"]",de,Ae),de=R?(se=Xe.y-Je.y,Je.x-Xe.x):(se=Je.x-Xe.x,Je.y-Xe.y),W.pv=W.dpv=Eo(se,de)}function qr(R,W){var se,de=(Ae=W.stack).pop(),Ae=Ae.pop(),Xe=W.z2[de],Je=W.z1[Ae];w.DEBUG&&console.log("SFVTL["+R+"]",de,Ae),de=R?(se=Xe.y-Je.y,Je.x-Xe.x):(se=Je.x-Xe.x,Je.y-Xe.y),W.fv=Eo(se,de)}function Gr(R){w.DEBUG&&console.log(R.step,"POP[]"),R.stack.pop()}function ni(R,W){var se=W.stack.pop(),de=W.z0[se],Ae=W.fv,Xe=W.pv,Je=(w.DEBUG&&console.log(W.step,"MDAP["+R+"]",se),Xe.distance(de,Ct));R&&(Je=W.round(Je)),Ae.setRelative(de,Ct,Je,Xe),Ae.touch(de),W.rp0=W.rp1=se}function oi(R,W){var se,de,Ae,Xe=W.z2,Je=Xe.length-2;w.DEBUG&&console.log(W.step,"IUP["+R.axis+"]");for(var bt=0;bt<Je;bt++)R.touched(se=Xe[bt])||(de=se.prevTouched(R))!==se&&(de===(Ae=se.nextTouched(R))&&R.setRelative(se,se,R.distance(de,de,!1,!0),R,!0),R.interpolate(se,de,Ae,R))}function Pi(R,W){for(var se=W.stack,Ae=(R?W.z0:W.z1)[R?W.rp1:W.rp2],Xe=W.fv,Je=W.pv,bt=W.loop,Yt=W.z2;bt--;){var Ht=se.pop(),wn=Yt[Ht],Oe=Je.distance(Ae,Ae,!1,!0);Xe.setRelative(wn,wn,Oe,Je),Xe.touch(wn),w.DEBUG&&console.log(W.step,(1<W.loop?"loop "+(W.loop-bt)+": ":"")+"SHP["+(R?"rp1":"rp2")+"]",Ht)}W.loop=1}function Vi(R,W){for(var de=(R?W.z0:W.z1)[R?W.rp1:W.rp2],Ae=W.fv,Xe=W.pv,Je=W.stack.pop(),bt=W.z2[W.contours[Je]],Yt=bt,Ht=(w.DEBUG&&console.log(W.step,"SHC["+R+"]",Je),Xe.distance(de,de,!1,!0));Yt!==de&&Ae.setRelative(Yt,Yt,Ht,Xe),(Yt=Yt.nextPointOnContour)!==bt;);}function ds(R,W){var se,de,Ae=(R?W.z0:W.z1)[Ae=R?W.rp1:W.rp2],Xe=W.fv,Je=W.pv,bt=(bt=W.stack).pop();switch(w.DEBUG&&console.log(W.step,"SHZ["+R+"]",bt),bt){case 0:se=W.tZone;break;case 1:se=W.gZone;break;default:throw new Error("Invalid zone")}for(var Yt=Je.distance(Ae,Ae,!1,!0),Ht=se.length-2,wn=0;wn<Ht;wn++)Xe.setRelative(de=se[wn],de,Yt,Je)}function Li(R,W){var se=(de=W.stack).pop()/64,de=de.pop(),Ae=W.z1[de],Je=W.fv;Je.setRelative(Ae,W.z0[W.rp0],se,W.pv),Je.touch(Ae),w.DEBUG&&console.log(W.step,"MSIRP["+R+"]",se,de),W.rp1=W.rp0,W.rp2=de,R&&(W.rp0=de)}function Ys(R,W){var bt=(se=W.stack).pop(),se=se.pop(),de=W.z0[se],Ae=W.fv,Xe=W.pv,Je=W.cvt[bt];w.DEBUG&&console.log(W.step,"MIAP["+R+"]",bt,"(",Je,")",se),bt=Xe.distance(de,Ct),R&&(Math.abs(bt-Je)<W.cvCutIn&&(bt=Je),bt=W.round(bt)),Ae.setRelative(de,Ct,bt,Xe),0===W.zp0&&(de.xo=de.x,de.yo=de.y),Ae.touch(de),W.rp0=W.rp1=se}function Or(R,W){var se=W.stack,de=se.pop(),Ae=W.z2[de];w.DEBUG&&console.log(W.step,"GC["+R+"]",de),se.push(64*W.dpv.distance(Ae,Ct,R,!1))}function na(R,W){var se=(de=W.stack).pop(),de=de.pop(),Xe=W.dpv.distance(Xe=W.z0[de],W.z1[se],R,R);w.DEBUG&&console.log(W.step,"MD["+R+"]",se,de,"->",Xe),W.stack.push(Math.round(64*Xe))}function Aa(R,W){var se=W.stack,de=se.pop(),Ae=W.fv,Xe=W.pv,Je=W.ppem,bt=W.deltaBase+16*(R-1),Yt=W.deltaShift,Ht=W.z0;w.DEBUG&&console.log(W.step,"DELTAP["+R+"]",de,se);for(var wn=0;wn<de;wn++){var Oe=se.pop(),be=se.pop();bt+((240&be)>>4)===Je&&(0<=(be=(15&be)-8)&&be++,w.DEBUG&&console.log(W.step,"DELTAPFIX",Oe,"by",be*Yt),Ae.setRelative(Oe=Ht[Oe],Oe,be*Yt,Xe))}}function Hs(R,W){var se=W.stack,de=se.pop();w.DEBUG&&console.log(W.step,"ROUND[]"),se.push(64*W.round(de/64))}function Yl(R,W){var se=W.stack,de=se.pop(),Ae=W.ppem,Xe=W.deltaBase+16*(R-1),Je=W.deltaShift;w.DEBUG&&console.log(W.step,"DELTAC["+R+"]",de,se);for(var bt=0;bt<de;bt++){var Yt=se.pop(),Ht=se.pop();Xe+((240&Ht)>>4)===Ae&&(0<=(Ht=(15&Ht)-8)&&Ht++,Ht*=Je,w.DEBUG&&console.log(W.step,"DELTACFIX",Yt,"by",Ht),W.cvt[Yt]+=Ht)}}function lu(R,W){var se,de=(Ae=W.stack).pop(),Ae=Ae.pop(),Xe=W.z2[de],Je=W.z1[Ae];w.DEBUG&&console.log(W.step,"SDPVTL["+R+"]",de,Ae),de=R?(se=Xe.y-Je.y,Je.x-Xe.x):(se=Je.x-Xe.x,Je.y-Xe.y),W.dpv=Eo(se,de)}function Yo(R,W){var se=W.stack,de=W.prog,Ae=W.ip;w.DEBUG&&console.log(W.step,"PUSHB["+R+"]");for(var Xe=0;Xe<R;Xe++)se.push(de[++Ae]);W.ip=Ae}function to(R,W){var se=W.ip,de=W.prog,Ae=W.stack;w.DEBUG&&console.log(W.ip,"PUSHW["+R+"]");for(var Xe=0;Xe<R;Xe++){var Je=de[++se]<<8|de[++se];32768&Je&&(Je=-(1+(65535^Je))),Ae.push(Je)}W.ip=se}function ri(R,W,se,de,Ae,Xe){var Je,bt,wn,Ht=Xe.stack,Yt=R&&Ht.pop(),Oe=(Ht=Ht.pop(),Xe.z1[Ht]),be=Xe.minDis,Ne=Xe.fv,Re=Xe.dpv,at=Je=Re.distance(Oe,wn=Xe.z0[wn=Xe.rp0],!0,!0),Qt=0<=at?1:-1;at=Math.abs(at),R&&(bt=Xe.cvt[Yt],de&&Math.abs(at-bt)<Xe.cvCutIn&&(at=bt)),se&&at<be&&(at=be),de&&(at=Xe.round(at)),Ne.setRelative(Oe,wn,Qt*at,Re),Ne.touch(Oe),w.DEBUG&&console.log(Xe.step,(R?"MIRP[":"MDRP[")+(W?"M":"m")+(se?">":"_")+(de?"R":"_")+(0===Ae?"Gr":1===Ae?"Bl":2===Ae?"Wh":"")+"]",R?Yt+"("+Xe.cvt[Yt]+","+bt+")":"",Ht,"(d =",Je,"->",Qt*at,")"),Xe.rp1=Xe.rp0,Xe.rp2=Ht,W&&(Xe.rp0=Ht)}Gs.prototype.exec=function(R,W){if("number"!=typeof W)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var se=this.font,de=this._prepState;if(!de||de.ppem!==W){var Ae=this._fpgmState;if(!Ae){vn.prototype=an,(Ae=this._fpgmState=new vn("fpgm",se.tables.fpgm)).funcs=[],Ae.font=se,w.DEBUG&&(console.log("---EXEC FPGM---"),Ae.step=-1);try{ua(Ae)}catch(Ht){return console.log("Hinting error in FPGM:"+Ht),void(this._errorState=3)}}vn.prototype=Ae,(de=this._prepState=new vn("prep",se.tables.prep)).ppem=W;var Xe=se.tables.cvt;if(Xe)for(var Je=de.cvt=new Array(Xe.length),bt=W/se.unitsPerEm,Yt=0;Yt<Xe.length;Yt++)Je[Yt]=Xe[Yt]*bt;else de.cvt=[];w.DEBUG&&(console.log("---EXEC PREP---"),de.step=-1);try{ua(de)}catch(Ht){this._errorState<2&&console.log("Hinting error in PREP:"+Ht),this._errorState=2}}if(!(1<this._errorState))try{return Na(R,de)}catch(Ht){this._errorState<1&&(console.log("Hinting error:"+Ht),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Na=function(R,W){var se=W.ppem/W.font.unitsPerEm,de=se,Ae=R.components;if(vn.prototype=W,Ae){for(var Xe=W.font,Je=[],bt=[],Yt=0;Yt<Ae.length;Yt++){var Ht=Ae[Yt],wn=Xe.glyphs.get(Ht.glyphIndex),Oe=new vn("glyf",wn.instructions);w.DEBUG&&(console.log("---EXEC COMP "+Yt+"---"),Oe.step=-1),Xa(wn,Oe,se,de);for(var be=Math.round(Ht.dx*se),Ne=Math.round(Ht.dy*de),Re=Oe.gZone,at=Oe.contours,Qt=0;Qt<Re.length;Qt++){var En=Re[Qt];En.xTouched=En.yTouched=!1,En.xo=En.x=En.x+be,En.yo=En.y=En.y+Ne}var Fn=Je.length;Je.push.apply(Je,Re);for(var Yr=0;Yr<at.length;Yr++)bt.push(at[Yr]+Fn)}R.instructions&&!Oe.inhibitGridFit&&((Oe=new vn("glyf",R.instructions)).gZone=Oe.z0=Oe.z1=Oe.z2=Je,Oe.contours=bt,Je.push(new ot(0,0),new ot(Math.round(R.advanceWidth*se),0)),w.DEBUG&&(console.log("---EXEC COMPOSITE---"),Oe.step=-1),ua(Oe),Je.length-=2)}else Oe=new vn("glyf",R.instructions),w.DEBUG&&(console.log("---EXEC GLYPH---"),Oe.step=-1),Xa(R,Oe,se,de),Je=Oe.gZone;return Je},Xa=function(R,W,se,de){for(var Ae,Xe,bt=R.points||[],Yt=bt.length,Ht=W.gZone=W.z0=W.z1=W.z2=[],wn=W.contours=[],Oe=0;Oe<Yt;Oe++)Ht[Oe]=new ot((Ae=bt[Oe]).x*se,Ae.y*de,Ae.lastPointOfContour,Ae.onCurve);for(var be=0;be<Yt;be++)Ae=Ht[be],Xe||(Xe=Ae,wn.push(be)),Ae.lastPointOfContour?((Ae.nextPointOnContour=Xe).prevPointOnContour=Ae,Xe=void 0):(Ae.nextPointOnContour=Ht[be+1]).prevPointOnContour=Ae;if(!W.inhibitGridFit){if(w.DEBUG){console.log("PROCESSING GLYPH",W.stack);for(var Ne=0;Ne<Yt;Ne++)console.log(Ne,Ht[Ne].x,Ht[Ne].y)}if(Ht.push(new ot(0,0),new ot(Math.round(R.advanceWidth*se),0)),ua(W),Ht.length-=2,w.DEBUG){console.log("FINISHED GLYPH",W.stack);for(var Re=0;Re<Yt;Re++)console.log(Re,Ht[Re].x,Ht[Re].y)}}},ua=function(R){var W=R.prog;if(W){var se,de=W.length;for(R.ip=0;R.ip<de;R.ip++){if(w.DEBUG&&R.step++,!(se=Zl[W[R.ip]]))throw new Error("unknown instruction: 0x"+Number(W[R.ip]).toString(16));se(R)}}},Zl=[ir.bind(void 0,ko),ir.bind(void 0,Io),hr.bind(void 0,ko),hr.bind(void 0,Io),vr.bind(void 0,ko),vr.bind(void 0,Io),Sr.bind(void 0,0),Sr.bind(void 0,1),qr.bind(void 0,0),qr.bind(void 0,1),function(R){var W=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",W,se),R.pv=R.dpv=Eo(se,W)},function(R){var W=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"SPVFS[]",W,se),R.fv=Eo(se,W)},function(R){var W=R.stack,se=R.pv;w.DEBUG&&console.log(R.step,"GPV[]"),W.push(16384*se.x),W.push(16384*se.y)},function(R){var W=R.stack,se=R.fv;w.DEBUG&&console.log(R.step,"GFV[]"),W.push(16384*se.x),W.push(16384*se.y)},function(R){R.fv=R.pv,w.DEBUG&&console.log(R.step,"SFVTPV[]")},function(W){var se=(Je=W.stack).pop(),de=Je.pop(),Ae=Je.pop(),Xe=Je.pop(),Je=Je.pop(),bt=(Yt=W.z0)[se],Yt=Yt[de],Ht=(wn=W.z1)[Ae],wn=wn[Xe],Oe=(W=W.z2[Je],w.DEBUG&&console.log("ISECT[], ",se,de,Ae,Xe,Je),se=bt.x,de=bt.y,bt=Ht.y,se*(Xe=Yt.y)-de*(Ae=Yt.x)),be=(Je=Ht.x)*(Ht=wn.y)-bt*(Yt=wn.x);W.x=(Oe*(Je-Yt)-be*(se-Ae))/(wn=(se-Ae)*(bt-Ht)-(de-Xe)*(Je-Yt)),W.y=(Oe*(bt-Ht)-be*(de-Xe))/wn},function(R){R.rp0=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP0[]",R.rp0)},function(R){R.rp1=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP1[]",R.rp1)},function(R){R.rp2=R.stack.pop(),w.DEBUG&&console.log(R.step,"SRP2[]",R.rp2)},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP0[]",W),R.zp0=W){case 0:R.tZone||Rn(R),R.z0=R.tZone;break;case 1:R.z0=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP1[]",W),R.zp1=W){case 0:R.tZone||Rn(R),R.z1=R.tZone;break;case 1:R.z1=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZP2[]",W),R.zp2=W){case 0:R.tZone||Rn(R),R.z2=R.tZone;break;case 1:R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){var W=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SZPS[]",W),R.zp0=R.zp1=R.zp2=W){case 0:R.tZone||Rn(R),R.z0=R.z1=R.z2=R.tZone;break;case 1:R.z0=R.z1=R.z2=R.gZone;break;default:throw new Error("Invalid zone pointer")}},function(R){R.loop=R.stack.pop(),w.DEBUG&&console.log(R.step,"SLOOP[]",R.loop)},function(R){w.DEBUG&&console.log(R.step,"RTG[]"),R.round=Ca},function(R){w.DEBUG&&console.log(R.step,"RTHG[]"),R.round=ll},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SMD[]",W),R.minDis=W/64},function(R){w.DEBUG&&console.log(R.step,"ELSE[]"),Dn(R,!1)},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"JMPR[]",W),R.ip+=W-1},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCVTCI[]",W),R.cvCutIn=W/64},void 0,void 0,function(R){var W=R.stack;w.DEBUG&&console.log(R.step,"DUP[]"),W.push(W[W.length-1])},Gr,function(R){w.DEBUG&&console.log(R.step,"CLEAR[]"),R.stack.length=0},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"SWAP[]"),W.push(se),W.push(de)},function(R){var W=R.stack;w.DEBUG&&console.log(R.step,"DEPTH[]"),W.push(W.length)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"CINDEX[]",se),W.push(W[W.length-se])},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"MINDEX[]",se),W.push(W.splice(W.length-se,1)[0])},void 0,void 0,void 0,function(R){var W=(de=R.stack).pop(),se=de.pop(),de=(w.DEBUG&&console.log(R.step,"LOOPCALL[]",W,se),R.ip),Ae=R.prog;R.prog=R.funcs[W];for(var Xe=0;Xe<se;Xe++)ua(R),w.DEBUG&&console.log(++R.step,Xe+1<se?"next loopcall":"done loopcall",Xe);R.ip=de,R.prog=Ae},function(R){var W=R.stack.pop(),se=(w.DEBUG&&console.log(R.step,"CALL[]",W),R.ip),de=R.prog;R.prog=R.funcs[W],ua(R),R.ip=se,R.prog=de,w.DEBUG&&console.log(++R.step,"returning from",W)},function(R){if("fpgm"!==R.env)throw new Error("FDEF not allowed here");var W=R.prog,se=R.ip,de=(de=R.stack).pop(),Ae=se;for(w.DEBUG&&console.log(R.step,"FDEF[]",de);45!==W[++se];);R.ip=se,R.funcs[de]=W.slice(Ae+1,se)},void 0,ni.bind(void 0,0),ni.bind(void 0,1),oi.bind(void 0,ko),oi.bind(void 0,Io),Pi.bind(void 0,0),Pi.bind(void 0,1),Vi.bind(void 0,0),Vi.bind(void 0,1),ds.bind(void 0,0),ds.bind(void 0,1),function(R){for(var W=R.stack,se=R.loop,de=R.fv,Ae=W.pop()/64,Xe=R.z2;se--;){var Je=W.pop(),bt=Xe[Je];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-se)+": ":"")+"SHPIX[]",Je,Ae),de.setRelative(bt,bt,Ae),de.touch(bt)}R.loop=1},function(R){for(var W=R.stack,se=R.rp1,de=R.rp2,Ae=R.loop,Xe=R.z0[se],Je=R.z1[de],bt=R.fv,Yt=R.dpv,Ht=R.z2;Ae--;){var wn=W.pop(),Oe=Ht[wn];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-Ae)+": ":"")+"IP[]",wn,se,"<->",de),bt.interpolate(Oe,Xe,Je,Yt),bt.touch(Oe)}R.loop=1},Li.bind(void 0,0),Li.bind(void 0,1),function(R){for(var W=R.stack,de=R.z0[R.rp0],Ae=R.loop,Xe=R.fv,Je=R.pv,bt=R.z1;Ae--;){var Yt=W.pop(),Ht=bt[Yt];w.DEBUG&&console.log(R.step,(1<R.loop?"loop "+(R.loop-Ae)+": ":"")+"ALIGNRP[]",Yt),Xe.setRelative(Ht,de,0,Je),Xe.touch(Ht)}R.loop=1},function(R){w.DEBUG&&console.log(R.step,"RTDG[]"),R.round=ba},Ys.bind(void 0,0),Ys.bind(void 0,1),function(R){var W=R.prog,se=R.ip,de=R.stack,Ae=W[++se];w.DEBUG&&console.log(R.step,"NPUSHB[]",Ae);for(var Xe=0;Xe<Ae;Xe++)de.push(W[++se]);R.ip=se},function(R){var W=R.ip,se=R.prog,de=R.stack,Ae=se[++W];w.DEBUG&&console.log(R.step,"NPUSHW[]",Ae);for(var Xe=0;Xe<Ae;Xe++){var Je=se[++W]<<8|se[++W];32768&Je&&(Je=-(1+(65535^Je))),de.push(Je)}R.ip=W},function(R){var de=R.stack,W=(W=R.store)||(R.store=[]),se=de.pop();de=de.pop(),w.DEBUG&&console.log(R.step,"WS",se,de),W[de]=se},function(Ae){var W=Ae.stack,se=Ae.store,de=W.pop();w.DEBUG&&console.log(Ae.step,"RS",de),W.push(Ae=se&&se[de]||0)},function(R){var W=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"WCVTP",W,se),R.cvt[se]=W/64},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"RCVT",se),W.push(64*R.cvt[se])},Or.bind(void 0,0),Or.bind(void 0,1),void 0,na.bind(void 0,0),na.bind(void 0,1),function(R){w.DEBUG&&console.log(R.step,"MPPEM[]"),R.stack.push(R.ppem)},void 0,function(R){w.DEBUG&&console.log(R.step,"FLIPON[]"),R.autoFlip=!0},void 0,void 0,function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"LT[]",se,de),W.push(de<se?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"LTEQ[]",se,de),W.push(de<=se?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"GT[]",se,de),W.push(se<de?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"GTEQ[]",se,de),W.push(se<=de?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"EQ[]",se,de),W.push(se===de?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"NEQ[]",se,de),W.push(se!==de?1:0)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"ODD[]",se),W.push(Math.trunc(se)%2?1:0)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"EVEN[]",se),W.push(Math.trunc(se)%2?0:1)},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"IF[]",W),W||(Dn(R,!0),w.DEBUG&&console.log(R.step,"EIF[]"))},function(R){w.DEBUG&&console.log(R.step,"EIF[]")},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"AND[]",se,de),W.push(se&&de?1:0)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"OR[]",se,de),W.push(se||de?1:0)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"NOT[]",se),W.push(se?0:1)},Aa.bind(void 0,1),function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SDB[]",W),R.deltaBase=W},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SDS[]",W),R.deltaShift=Math.pow(.5,W)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"ADD[]",se,de),W.push(de+se)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"SUB[]",se,de),W.push(de-se)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"DIV[]",se,de),W.push(64*de/se)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"MUL[]",se,de),W.push(de*se/64)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"ABS[]",se),W.push(Math.abs(se))},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"NEG[]",se),W.push(-se)},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"FLOOR[]",se),W.push(64*Math.floor(se/64))},function(R){var W=R.stack,se=W.pop();w.DEBUG&&console.log(R.step,"CEILING[]",se),W.push(64*Math.ceil(se/64))},Hs.bind(void 0,0),Hs.bind(void 0,1),Hs.bind(void 0,2),Hs.bind(void 0,3),void 0,void 0,void 0,void 0,function(R){var W=(se=R.stack).pop(),se=se.pop();w.DEBUG&&console.log(R.step,"WCVTF[]",W,se),R.cvt[se]=W*R.ppem/R.font.unitsPerEm},Aa.bind(void 0,2),Aa.bind(void 0,3),Yl.bind(void 0,1),Yl.bind(void 0,2),Yl.bind(void 0,3),function(R){var W,se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"SROUND[]",se),R.round=Ol,192&se){case 0:W=.5;break;case 64:W=1;break;case 128:W=2;break;default:throw new Error("invalid SROUND value")}switch(R.srPeriod=W,48&se){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*W;break;case 32:R.srPhase=.5*W;break;case 48:R.srPhase=.75*W;break;default:throw new Error("invalid SROUND value")}R.srThreshold=0==(se&=15)?0:(se/8-.5)*W},function(R){var W,se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"S45ROUND[]",se),R.round=Ol,192&se){case 0:W=Math.sqrt(2)/2;break;case 64:W=Math.sqrt(2);break;case 128:W=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(R.srPeriod=W,48&se){case 0:R.srPhase=0;break;case 16:R.srPhase=.25*W;break;case 32:R.srPhase=.5*W;break;case 48:R.srPhase=.75*W;break;default:throw new Error("invalid S45ROUND value")}R.srThreshold=0==(se&=15)?0:(se/8-.5)*W},void 0,void 0,function(R){w.DEBUG&&console.log(R.step,"ROFF[]"),R.round=Go},void 0,function(R){w.DEBUG&&console.log(R.step,"RUTG[]"),R.round=Rl},function(R){w.DEBUG&&console.log(R.step,"RDTG[]"),R.round=Pl},Gr,Gr,void 0,void 0,void 0,void 0,void 0,function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANCTRL[]",W)},lu.bind(void 0,0),lu.bind(void 0,1),function(R){var W=R.stack,se=W.pop(),de=0;w.DEBUG&&console.log(R.step,"GETINFO[]",se),1&se&&(de=35),32&se&&(de|=4096),W.push(de)},void 0,function(R){var W=R.stack,se=W.pop(),de=W.pop(),Ae=W.pop();w.DEBUG&&console.log(R.step,"ROLL[]"),W.push(de),W.push(se),W.push(Ae)},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"MAX[]",se,de),W.push(Math.max(de,se))},function(R){var W=R.stack,se=W.pop(),de=W.pop();w.DEBUG&&console.log(R.step,"MIN[]",se,de),W.push(Math.min(de,se))},function(R){var W=R.stack.pop();w.DEBUG&&console.log(R.step,"SCANTYPE[]",W)},function(R){var W=R.stack.pop(),se=R.stack.pop();switch(w.DEBUG&&console.log(R.step,"INSTCTRL[]",W,se),W){case 1:return void(R.inhibitGridFit=!!se);case 2:return void(R.ignoreCvt=!!se);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Yo.bind(void 0,1),Yo.bind(void 0,2),Yo.bind(void 0,3),Yo.bind(void 0,4),Yo.bind(void 0,5),Yo.bind(void 0,6),Yo.bind(void 0,7),Yo.bind(void 0,8),to.bind(void 0,1),to.bind(void 0,2),to.bind(void 0,3),to.bind(void 0,4),to.bind(void 0,5),to.bind(void 0,6),to.bind(void 0,7),to.bind(void 0,8),ri.bind(void 0,0,0,0,0,0),ri.bind(void 0,0,0,0,0,1),ri.bind(void 0,0,0,0,0,2),ri.bind(void 0,0,0,0,0,3),ri.bind(void 0,0,0,0,1,0),ri.bind(void 0,0,0,0,1,1),ri.bind(void 0,0,0,0,1,2),ri.bind(void 0,0,0,0,1,3),ri.bind(void 0,0,0,1,0,0),ri.bind(void 0,0,0,1,0,1),ri.bind(void 0,0,0,1,0,2),ri.bind(void 0,0,0,1,0,3),ri.bind(void 0,0,0,1,1,0),ri.bind(void 0,0,0,1,1,1),ri.bind(void 0,0,0,1,1,2),ri.bind(void 0,0,0,1,1,3),ri.bind(void 0,0,1,0,0,0),ri.bind(void 0,0,1,0,0,1),ri.bind(void 0,0,1,0,0,2),ri.bind(void 0,0,1,0,0,3),ri.bind(void 0,0,1,0,1,0),ri.bind(void 0,0,1,0,1,1),ri.bind(void 0,0,1,0,1,2),ri.bind(void 0,0,1,0,1,3),ri.bind(void 0,0,1,1,0,0),ri.bind(void 0,0,1,1,0,1),ri.bind(void 0,0,1,1,0,2),ri.bind(void 0,0,1,1,0,3),ri.bind(void 0,0,1,1,1,0),ri.bind(void 0,0,1,1,1,1),ri.bind(void 0,0,1,1,1,2),ri.bind(void 0,0,1,1,1,3),ri.bind(void 0,1,0,0,0,0),ri.bind(void 0,1,0,0,0,1),ri.bind(void 0,1,0,0,0,2),ri.bind(void 0,1,0,0,0,3),ri.bind(void 0,1,0,0,1,0),ri.bind(void 0,1,0,0,1,1),ri.bind(void 0,1,0,0,1,2),ri.bind(void 0,1,0,0,1,3),ri.bind(void 0,1,0,1,0,0),ri.bind(void 0,1,0,1,0,1),ri.bind(void 0,1,0,1,0,2),ri.bind(void 0,1,0,1,0,3),ri.bind(void 0,1,0,1,1,0),ri.bind(void 0,1,0,1,1,1),ri.bind(void 0,1,0,1,1,2),ri.bind(void 0,1,0,1,1,3),ri.bind(void 0,1,1,0,0,0),ri.bind(void 0,1,1,0,0,1),ri.bind(void 0,1,1,0,0,2),ri.bind(void 0,1,1,0,0,3),ri.bind(void 0,1,1,0,1,0),ri.bind(void 0,1,1,0,1,1),ri.bind(void 0,1,1,0,1,2),ri.bind(void 0,1,1,0,1,3),ri.bind(void 0,1,1,1,0,0),ri.bind(void 0,1,1,1,0,1),ri.bind(void 0,1,1,1,0,2),ri.bind(void 0,1,1,1,0,3),ri.bind(void 0,1,1,1,1,0),ri.bind(void 0,1,1,1,1,1),ri.bind(void 0,1,1,1,1,2),ri.bind(void 0,1,1,1,1,3)],Ll=Array.from||function(R){return R.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Cs(R){(R=R||{}).empty||(ke(R.familyName,"When creating a new Font object, familyName is required."),ke(R.styleName,"When creating a new Font object, styleName is required."),ke(R.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ke(R.ascender,"When creating a new Font object, ascender is required."),ke(R.descender,"When creating a new Font object, descender is required."),ke(R.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:R.familyName||" "},fontSubfamily:{en:R.styleName||" "},fullName:{en:R.fullName||R.familyName+" "+R.styleName},postScriptName:{en:R.postScriptName||(R.familyName+R.styleName).replace(/\s/g,"")},designer:{en:R.designer||" "},designerURL:{en:R.designerURL||" "},manufacturer:{en:R.manufacturer||" "},manufacturerURL:{en:R.manufacturerURL||" "},license:{en:R.license||" "},licenseURL:{en:R.licenseURL||" "},version:{en:R.version||"Version 0.1"},description:{en:R.description||" "},copyright:{en:R.copyright||" "},trademark:{en:R.trademark||" "}},this.unitsPerEm=R.unitsPerEm||1e3,this.ascender=R.ascender,this.descender=R.descender,this.createdTimestamp=R.createdTimestamp,this.tables={os2:{usWeightClass:R.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:R.widthClass||this.usWidthClasses.MEDIUM,fsSelection:R.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new _n.GlyphSet(this,R.glyphs||[]),this.encoding=new Cn(this),this.position=new ca(this),this.substitution=new _o(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new Gs(this):void 0)}})}Cs.prototype.hasChar=function(R){return null!==this.encoding.charToGlyphIndex(R)},Cs.prototype.charToGlyphIndex=function(R){return this.encoding.charToGlyphIndex(R)},Cs.prototype.charToGlyph=function(R){return R=this.charToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},Cs.prototype.stringToGlyphs=function(R,W){W=W||this.defaultRenderOptions;for(var se=Ll(R),de=[],Ae=0;Ae<se.length;Ae+=1)de.push(this.charToGlyphIndex(se[Ae]));var Je=de.length;if(W.features){R=W.script||this.substitution.getDefaultScriptName();var bt=[];W.features.liga&&(bt=bt.concat(this.substitution.getFeature("liga",R,W.language))),W.features.rlig&&(bt=bt.concat(this.substitution.getFeature("rlig",R,W.language)));for(var Yt=0;Yt<Je;Yt+=1)for(var Ht=0;Ht<bt.length;Ht++){for(var wn=bt[Ht],Oe=wn.sub,be=Oe.length,Ne=0;Ne<be&&Oe[Ne]===de[Yt+Ne];)Ne++;Ne===be&&(de.splice(Yt,be,wn.by),Je=Je-be+1)}}for(var Re=new Array(Je),at=this.glyphs.get(0),Qt=0;Qt<Je;Qt+=1)Re[Qt]=this.glyphs.get(de[Qt])||at;return Re},Cs.prototype.nameToGlyphIndex=function(R){return this.glyphNames.nameToGlyphIndex(R)},Cs.prototype.nameToGlyph=function(R){return R=this.nameToGlyphIndex(R),this.glyphs.get(R)||this.glyphs.get(0)},Cs.prototype.glyphIndexToName=function(R){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(R):""},Cs.prototype.getKerningValue=function(R,W){R=R.index||R,W=W.index||W;var se=this.position.defaultKerningTables;return se?this.position.getKerningValue(se,R,W):this.kerningPairs[R+","+W]||0},Cs.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Cs.prototype.forEachGlyph=function(R,W,se,de,Ae,Xe){W=void 0!==W?W:0,se=void 0!==se?se:0;var Je,bt=1/this.unitsPerEm*(de=void 0!==de?de:72),Yt=this.stringToGlyphs(R,Ae=Ae||this.defaultRenderOptions);Ae.kerning&&(R=Ae.script||this.position.getDefaultScriptName(),Je=this.position.getKerningTables(R,Ae.language));for(var Ht=0;Ht<Yt.length;Ht+=1){var wn=Yt[Ht];Xe.call(this,wn,W,se,de,Ae),wn.advanceWidth&&(W+=wn.advanceWidth*bt),Ae.kerning&&Ht<Yt.length-1&&(W+=(Je?this.position.getKerningValue(Je,wn.index,Yt[Ht+1].index):this.getKerningValue(wn,Yt[Ht+1]))*bt),Ae.letterSpacing?W+=Ae.letterSpacing*de:Ae.tracking&&(W+=Ae.tracking/1e3*de)}return W},Cs.prototype.getPath=function(R,W,se,de,Ae){var Xe=new Ce;return this.forEachGlyph(R,W,se,de,Ae,function(Je,bt,Yt,Ht){Je=Je.getPath(bt,Yt,Ht,Ae,this),Xe.extend(Je)}),Xe},Cs.prototype.getPaths=function(R,W,se,de,Ae){var Xe=[];return this.forEachGlyph(R,W,se,de,Ae,function(Je,bt,Yt,Ht){Je=Je.getPath(bt,Yt,Ht,Ae,this),Xe.push(Je)}),Xe},Cs.prototype.getAdvanceWidth=function(R,W,se){return this.forEachGlyph(R,0,0,W,se,function(){})},Cs.prototype.draw=function(R,W,se,de,Ae,Xe){this.getPath(W,se,de,Ae,Xe).draw(R)},Cs.prototype.drawPoints=function(R,W,se,de,Ae,Xe){this.forEachGlyph(W,se,de,Ae,Xe,function(Je,bt,Yt,Ht){Je.drawPoints(R,bt,Yt,Ht)})},Cs.prototype.drawMetrics=function(R,W,se,de,Ae,Xe){this.forEachGlyph(W,se,de,Ae,Xe,function(Je,bt,Yt,Ht){Je.drawMetrics(R,bt,Yt,Ht)})},Cs.prototype.getEnglishName=function(R){if(R=this.names[R])return R.en},Cs.prototype.validate=function(){var R=this;function W(se){(se=R.getEnglishName(se))&&se.trim()}W("fontFamily"),W("weightName"),W("manufacturer"),W("copyright"),W("version")},Cs.prototype.toTables=function(){return Vo_fontToTable(this)},Cs.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Cs.prototype.toArrayBuffer=function(){for(var R=this.toTables().encode(),W=new ArrayBuffer(R.length),se=new Uint8Array(W),de=0;de<R.length;de++)se[de]=R[de];return W},Cs.prototype.download=function(R){var W=this.getEnglishName("fontFamily"),se=this.getEnglishName("fontSubfamily"),de=(R=R||W.replace(/\s/g,"")+"-"+se+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,de.byteLength,function(Ae){Ae.root.getFile(R,{create:!0},function(Xe){Xe.createWriter(function(Je){var bt=new DataView(de);bt=new Blob([bt],{type:"font/opentype"}),Je.write(bt),Je.addEventListener("writeend",function(){location.href=Xe.toURL()},!1)})})},function(Ae){throw new Error(Ae.name+": "+Ae.message)})):(W=l("fs"),se=function(Ae){for(var Xe=new M(Ae.byteLength),Je=new Uint8Array(Ae),bt=0;bt<Xe.length;++bt)Xe[bt]=Je[bt];return Xe}(de),W.writeFileSync(R,se))},Cs.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Cs.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Cs.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var cu_parse=function(R,W,se){for(var de,Xe,Je,bt=new Tn.Parser(R,W),Yt=bt.parseULong(),Ht=(V.argument(65536===Yt,"Unsupported fvar table version."),bt.parseOffset16()),wn=(bt.skip("uShort",1),bt.parseUShort()),Oe=bt.parseUShort(),be=bt.parseUShort(),Ne=bt.parseUShort(),Re=[],at=0;at<wn;at++)Re.push((Xe=se,Je={},de=new Tn.Parser(de=R,W+Ht+at*Oe),Je.tag=de.parseTag(),Je.minValue=de.parseFixed(),Je.defaultValue=de.parseFixed(),Je.maxValue=de.parseFixed(),de.skip("uShort",1),Je.name=Xe[de.parseUShort()]||{},Je));for(var Qt=[],En=W+Ht+wn*Oe,Fn=0;Fn<be;Fn++)Qt.push(function(Yr,zr,ai,li){var Ni={},ws=new Tn.Parser(Yr,zr);Ni.name=li[ws.parseUShort()]||{},ws.skip("uShort",1),Ni.coordinates={};for(var mo=0;mo<ai.length;++mo)Ni.coordinates[ai[mo].tag]=ws.parseFixed();return Ni}(R,En+Fn*Ne,Re,se));return{axes:Re,instances:Qt}},da=new Array(10);da[1]=function(){var R=this.offset+this.relativeOffset,W=this.parseUShort();return 1===W?{posFormat:1,coverage:this.parsePointer(mn.coverage),value:this.parseValueRecord()}:2===W?{posFormat:2,coverage:this.parsePointer(mn.coverage),values:this.parseValueRecordList()}:void V.assert(!1,"0x"+R.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},da[2]=function(){var R,W,se,de,Xe=this.offset+this.relativeOffset,Ae=this.parseUShort(),Je=(V.assert(1===Ae||2===Ae,"0x"+Xe.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),Xe=this.parsePointer(mn.coverage),this.parseUShort()),bt=this.parseUShort();return 1===Ae?{posFormat:Ae,coverage:Xe,valueFormat1:Je,valueFormat2:bt,pairSets:this.parseList(mn.pointer(mn.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(Je),value2:this.parseValueRecord(bt)}})))}:2===Ae?(R=this.parsePointer(mn.classDef),W=this.parsePointer(mn.classDef),se=this.parseUShort(),de=this.parseUShort(),{posFormat:Ae,coverage:Xe,valueFormat1:Je,valueFormat2:bt,classDef1:R,classDef2:W,class1Count:se,class2Count:de,classRecords:this.parseList(se,mn.list(de,function(){return{value1:this.parseValueRecord(Je),value2:this.parseValueRecord(bt)}}))}):void 0},da[3]=function(){return{error:"GPOS Lookup 3 not supported"}},da[4]=function(){return{error:"GPOS Lookup 4 not supported"}},da[5]=function(){return{error:"GPOS Lookup 5 not supported"}},da[6]=function(){return{error:"GPOS Lookup 6 not supported"}},da[7]=function(){return{error:"GPOS Lookup 7 not supported"}},da[8]=function(){return{error:"GPOS Lookup 8 not supported"}},da[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var kl_parse=function(R,W){return W=(R=new mn(R,W=W||0)).parseVersion(1),V.argument(1===W||1.1===W,"Unsupported GPOS table version "+W),1===W?{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(da)}:{version:W,scripts:R.parseScriptList(),features:R.parseFeatureList(),lookups:R.parseLookupList(da),variations:R.parseFeatureVariationsList()}},po_parse=function(R,W){if(0===(W=(R=new Tn.Parser(R,W)).parseUShort())){var se=R,de={},Oe=(se.skip("uShort"),se.parseUShort()),Ae=(V.argument(0===Oe,"Unsupported kern sub-table version."),se.skip("uShort",2),se.parseUShort());se.skip("uShort",3);for(var Xe=0;Xe<Ae;Xe+=1){var Je=se.parseUShort(),bt=se.parseUShort(),Yt=se.parseShort();de[Je+","+bt]=Yt}return de}if(1!==W)throw new Error("Unsupported kern table version ("+W+").");var Ht=R,wn={};if(Ht.skip("uShort"),1<Ht.parseULong()&&console.warn("Only the first kern subtable is supported."),Ht.skip("uLong"),Oe=255&Ht.parseUShort(),Ht.skip("uShort"),0==Oe){var be=Ht.parseUShort();Ht.skip("uShort",3);for(var Ne=0;Ne<be;Ne+=1){var Re=Ht.parseUShort(),at=Ht.parseUShort(),Qt=Ht.parseShort();wn[Re+","+at]=Qt}}return wn},Nl_parse=function(R,W,se,de){for(var Ae=new Tn.Parser(R,W),Xe=de?Ae.parseUShort:Ae.parseULong,Je=[],bt=0;bt<se+1;bt+=1){var Yt=Xe.call(Ae);de&&(Yt*=2),Je.push(Yt)}return Je};function vl(R,W){l("fs").readFile(R,function(se,de){if(se)return W(se.message);W(null,Wa(de))})}function ja(R,W){var se=new XMLHttpRequest;se.open("get",R,!0),se.responseType="arraybuffer",se.onload=function(){return se.response?W(null,se.response):W("Font could not be loaded: "+se.statusText)},se.onerror=function(){W("Font could not be loaded")},se.send()}function pc(R,W){for(var se=[],de=12,Ae=0;Ae<W;Ae+=1){var Xe=Tn.getTag(R,de),Je=Tn.getULong(R,de+4),bt=Tn.getULong(R,de+8),Yt=Tn.getULong(R,de+12);se.push({tag:Xe,checksum:Je,offset:bt,length:Yt,compression:!1}),de+=16}return se}function ii(se,W){if("WOFF"!==W.compression)return{data:se,offset:W.offset};se=new Uint8Array(se.buffer,W.offset+2,W.compressedLength-2);var de=new Uint8Array(W.length);if(ne(se,de),de.byteLength!==W.length)throw new Error("Decompression error: "+W.tag+" decompressed length doesn't match recorded length");return{data:new DataView(de.buffer,0),offset:0}}function Fa(Fn){var W,se,de,Ae,Xe,Je,bt,Yt,Ht,wn,Oe,be,Ne,Re,at=new Cs({empty:!0}),Qt=new DataView(Fn,0),En=[];if("\0\x01\0\0"===(Fn=Tn.getTag(Qt,0))||"true"===Fn||"typ1"===Fn)at.outlinesFormat="truetype",En=pc(Qt,de=Tn.getUShort(Qt,4));else if("OTTO"===Fn)at.outlinesFormat="cff",En=pc(Qt,de=Tn.getUShort(Qt,4));else{if("wOFF"!==Fn)throw new Error("Unsupported OpenType signature "+Fn);if("\0\x01\0\0"===(Yr=Tn.getTag(Qt,4)))at.outlinesFormat="truetype";else{if("OTTO"!==Yr)throw new Error("Unsupported OpenType flavor "+Fn);at.outlinesFormat="cff"}En=function(Bs,Zr){for(var Zs=[],Js=44,As=0;As<Zr;As+=1){var ci=Tn.getTag(Bs,Js),Po=Tn.getULong(Bs,Js+4),fr=Tn.getULong(Bs,Js+8),Gi=Tn.getULong(Bs,Js+12);Zs.push({tag:ci,offset:Po,compression:fr<Gi&&"WOFF",compressedLength:fr,length:Gi}),Js+=20}return Zs}(Qt,de=Tn.getUShort(Qt,12))}for(var zr=0;zr<de;zr+=1){var ai=En[zr],li=void 0;switch(ai.tag){case"cmap":li=ii(Qt,ai),at.tables.cmap=ct_parse(li.data,li.offset),at.encoding=new jn(at.tables.cmap);break;case"cvt ":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.cvt=Re.parseShortList(ai.length/2);break;case"fvar":Xe=ai;break;case"fpgm":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.fpgm=Re.parseByteList(ai.length);break;case"head":li=ii(Qt,ai),at.tables.head=B_parse(li.data,li.offset),at.unitsPerEm=at.tables.head.unitsPerEm,W=at.tables.head.indexToLocFormat;break;case"hhea":li=ii(Qt,ai),at.tables.hhea=O_parse(li.data,li.offset),at.ascender=at.tables.hhea.ascender,at.descender=at.tables.hhea.descender,at.numberOfHMetrics=at.tables.hhea.numberOfHMetrics;break;case"hmtx":Ht=ai;break;case"ltag":li=ii(Qt,ai),se=q_parse(li.data,li.offset);break;case"maxp":li=ii(Qt,ai),at.tables.maxp=ce_parse(li.data,li.offset),at.numGlyphs=at.tables.maxp.numGlyphs;break;case"name":be=ai;break;case"OS/2":li=ii(Qt,ai),at.tables.os2=Pr_parse(li.data,li.offset);break;case"post":li=ii(Qt,ai),at.tables.post=Ui_parse(li.data,li.offset),at.glyphNames=new xn(at.tables.post);break;case"prep":li=ii(Qt,ai),Re=new Tn.Parser(li.data,li.offset),at.tables.prep=Re.parseByteList(ai.length);break;case"glyf":Je=ai;break;case"loca":Oe=ai;break;case"CFF ":Ae=ai;break;case"kern":wn=ai;break;case"GPOS":bt=ai;break;case"GSUB":Yt=ai;break;case"meta":Ne=ai}}if(Yr=ii(Qt,be),at.tables.name=Bn_parse(Yr.data,Yr.offset,se),at.names=at.tables.name,Je&&Oe)Fn=0===W,Yr=ii(Qt,Oe),Yr=Nl_parse(Yr.data,Yr.offset,at.numGlyphs,Fn),Fn=ii(Qt,Je),at.glyphs=ts.parse(Fn.data,Fn.offset,Yr,at);else{if(!Ae)throw new Error("Font doesn't contain TrueType or CFF outlines.");Fn=ii(Qt,Ae),N_parse(Fn.data,Fn.offset,at)}for(var Yr=ii(Qt,Ht),Ni=(ie_parse(Yr.data,Yr.offset,at.numberOfHMetrics,at.numGlyphs,at.glyphs),at),ws=Ni.tables.cmap.glyphIndexMap,mo=Object.keys(ws),Mo=0;Mo<mo.length;Mo+=1){var Ro,go=mo[Mo];(Ro=Ni.glyphs.get(ws[go])).addUnicode(parseInt(go))}for(var Ps=0;Ps<Ni.glyphs.length;Ps+=1)Ro=Ni.glyphs.get(Ps),Ni.cffEncoding?Ro.name=Ni.isCIDFont?"gid"+Ps:Ni.cffEncoding.charset[Ps]:Ni.glyphNames.names&&(Ro.name=Ni.glyphNames.glyphIndexToName(Ps));return wn?(Fn=ii(Qt,wn),at.kerningPairs=po_parse(Fn.data,Fn.offset)):at.kerningPairs={},bt&&(Yr=ii(Qt,bt),at.tables.gpos=kl_parse(Yr.data,Yr.offset),at.position.init()),Yt&&(Fn=ii(Qt,Yt),at.tables.gsub=wi_parse(Fn.data,Fn.offset)),Xe&&(Yr=ii(Qt,Xe),at.tables.fvar=cu_parse(Yr.data,Yr.offset,at.names)),Ne&&(Fn=ii(Qt,Ne),at.tables.meta=us_parse(Fn.data,Fn.offset),at.metas=at.tables.meta),at}w.Font=Cs,w.Glyph=Un,w.Path=Ce,w.BoundingBox=he,w._parse=Tn,w.parse=Fa,w.load=function(R,W){(typeof window>"u"?vl:ja)(R,function(se,de){if(se)return W(se);var Ae;try{Ae=Fa(de)}catch(Xe){return W(Xe,null)}return W(null,Ae)})},w.loadSync=function(R){return Fa(Wa(l("fs").readFileSync(R)))},Object.defineProperty(w,"__esModule",{value:!0})},b("object"==typeof K&&void 0!==ve?K:this.opentype={})}).call(this,l("buffer").Buffer)},{buffer:4,fs:2}],258:[function(l,ve,K){(function(M){function A(I,D){for(var d=0,f=I.length-1;0<=f;f--){var h=I[f];"."===h?I.splice(f,1):".."===h?(I.splice(f,1),d++):d&&(I.splice(f,1),d--)}if(D)for(;d--;)I.unshift("..");return I}function b(I,D){if(I.filter)return I.filter(D);for(var d=[],f=0;f<I.length;f++)D(I[f],f,I)&&d.push(I[f]);return d}K.resolve=function(){for(var I="",D=!1,d=arguments.length-1;-1<=d&&!D;d--){var f=0<=d?arguments[d]:M.cwd();if("string"!=typeof f)throw new TypeError("Arguments to path.resolve must be strings");f&&(I=f+"/"+I,D="/"===f.charAt(0))}return(D?"/":"")+(I=A(b(I.split("/"),function(h){return!!h}),!D).join("/"))||"."},K.normalize=function(I){var D=K.isAbsolute(I),d="/"===w(I,-1);return(I=(I=A(b(I.split("/"),function(f){return!!f}),!D).join("/"))||D?I:".")&&d&&(I+="/"),(D?"/":"")+I},K.isAbsolute=function(I){return"/"===I.charAt(0)},K.join=function(){var I=Array.prototype.slice.call(arguments,0);return K.normalize(b(I,function(D,d){if("string"!=typeof D)throw new TypeError("Arguments to path.join must be strings");return D}).join("/"))},K.relative=function(I,D){function d(E){for(var S=0;S<E.length&&""===E[S];S++);for(var k=E.length-1;0<=k&&""===E[k];k--);return k<S?[]:E.slice(S,k-S+1)}I=K.resolve(I).substr(1),D=K.resolve(D).substr(1);for(var f=d(I.split("/")),h=d(D.split("/")),p=Math.min(f.length,h.length),m=p,g=0;g<p;g++)if(f[g]!==h[g]){m=g;break}var x=[];for(g=m;g<f.length;g++)x.push("..");return(x=x.concat(h.slice(m))).join("/")},K.sep="/",K.delimiter=":",K.dirname=function(I){if("string"!=typeof I&&(I+=""),0===I.length)return".";for(var D=47===I.charCodeAt(0),d=-1,f=!0,h=I.length-1;1<=h;--h)if(47===I.charCodeAt(h)){if(!f){d=h;break}}else f=!1;return-1===d?D?"/":".":D&&1===d?"/":I.slice(0,d)},K.basename=function(I,D){return I=function(d){"string"!=typeof d&&(d+="");for(var f=0,h=-1,p=!0,m=d.length-1;0<=m;--m)if(47===d.charCodeAt(m)){if(!p){f=m+1;break}}else-1===h&&(p=!1,h=m+1);return-1===h?"":d.slice(f,h)}(I),D&&I.substr(-1*D.length)===D?I.substr(0,I.length-D.length):I},K.extname=function(I){"string"!=typeof I&&(I+="");for(var D=-1,d=0,f=-1,h=!0,p=0,m=I.length-1;0<=m;--m){var g=I.charCodeAt(m);if(47===g){if(h)continue;d=m+1;break}-1===f&&(h=!1,f=m+1),46===g?-1===D?D=m:1!==p&&(p=1):-1!==D&&(p=-1)}return-1===D||-1===f||0===p||1===p&&D===f-1&&D===d+1?"":I.slice(D,f)};var w=function(I,D,d){return I.substr(D,d)}}).call(this,l("_process"))},{_process:259}],259:[function(l,b,K){var M,A;function w(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}b=b.exports={};try{M="function"==typeof setTimeout?setTimeout:w}catch{M=w}try{A="function"==typeof clearTimeout?clearTimeout:I}catch{A=I}function D(S){if(M===setTimeout)return setTimeout(S,0);if((M===w||!M)&&setTimeout)return(M=setTimeout)(S,0);try{return M(S,0)}catch{try{return M.call(null,S,0)}catch{return M.call(this,S,0)}}}var d,f=[],h=!1,p=-1;function m(){h&&d&&(h=!1,d.length?f=d.concat(f):p=-1,f.length&&g())}function g(){if(!h){for(var S=D(m),k=(h=!0,f.length);k;){for(d=f,f=[];++p<k;)d&&d[p].run();p=-1,k=f.length}d=null,h=!1,function(X){if(A===clearTimeout)return clearTimeout(X);if((A===I||!A)&&clearTimeout)return(A=clearTimeout)(X);try{A(X)}catch{try{return A.call(null,X)}catch{return A.call(this,X)}}}(S)}}function x(S,k){this.fun=S,this.array=k}function E(){}b.nextTick=function(S){var k=new Array(arguments.length-1);if(1<arguments.length)for(var X=1;X<arguments.length;X++)k[X-1]=arguments[X];f.push(new x(S,k)),1!==f.length||h||D(g)},x.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=E,b.addListener=E,b.once=E,b.off=E,b.removeListener=E,b.removeAllListeners=E,b.emit=E,b.prependListener=E,b.prependOnceListener=E,b.listeners=function(S){return[]},b.binding=function(S){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(S){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],260:[function(l,ve,K){ve=function(M){"use strict";var A,b=Object.prototype,w=b.hasOwnProperty,I=(Y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",D=Y.asyncIterator||"@@asyncIterator",d=Y.toStringTag||"@@toStringTag";function f(me,ge,J,Le){var Ce,et,le,V;return ge=ge&&ge.prototype instanceof S?ge:S,ge=Object.create(ge.prototype),Le=new _e(Le||[]),ge._invoke=(Ce=me,et=J,le=Le,V=p,function(Ke,ut){if(V===g)throw new Error("Generator is already running");if(V===x){if("throw"===Ke)throw ut;return oe()}for(le.method=Ke,le.arg=ut;;){var _t=le.delegate;if(_t&&(_t=function Nt(dt,Rt){var Bt=dt.iterator[Rt.method];if(Bt===A){if(Rt.delegate=null,"throw"===Rt.method){if(dt.iterator.return&&(Rt.method="return",Rt.arg=A,Nt(dt,Rt),"throw"===Rt.method))return E;Rt.method="throw",Rt.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}return"throw"===(Bt=h(Bt,dt.iterator,Rt.arg)).type?(Rt.method="throw",Rt.arg=Bt.arg,Rt.delegate=null,E):(Bt=Bt.arg)?Bt.done?(Rt[dt.resultName]=Bt.value,Rt.next=dt.nextLoc,"return"!==Rt.method&&(Rt.method="next",Rt.arg=A),Rt.delegate=null,E):Bt:(Rt.method="throw",Rt.arg=new TypeError("iterator result is not an object"),Rt.delegate=null,E)}(_t,le))){if(_t===E)continue;return _t}if("next"===le.method)le.sent=le._sent=le.arg;else if("throw"===le.method){if(V===p)throw V=x,le.arg;le.dispatchException(le.arg)}else"return"===le.method&&le.abrupt("return",le.arg);if(V=g,"normal"===(_t=h(Ce,et,le)).type){if(V=le.done?x:m,_t.arg!==E)return{value:_t.arg,done:le.done}}else"throw"===_t.type&&(V=x,le.method="throw",le.arg=_t.arg)}}),ge}function h(me,ne,J){try{return{type:"normal",arg:me.call(ne,J)}}catch(he){return{type:"throw",arg:he}}}M.wrap=f;var p="suspendedStart",m="suspendedYield",g="executing",x="completed",E={};function S(){}function k(){}function X(){}var Y,G,z=((Y={})[I]=function(){return this},(G=(G=Object.getPrototypeOf)&&G(G(xe([]))))&&G!==b&&w.call(G,I)&&(Y=G),X.prototype=S.prototype=Object.create(Y));function ee(me){["next","throw","return"].forEach(function(ne){me[ne]=function(J){return this._invoke(ne,J)}})}function H(me){var ne;this._invoke=function(J,he){function Ce(){return new Promise(function(et,le){!function V(Nt,Le,Ke,ut){var _t;if("throw"!==(Nt=h(me[Nt],me,Le)).type)return(Le=(_t=Nt.arg).value)&&"object"==typeof Le&&w.call(Le,"__await")?Promise.resolve(Le.__await).then(function(dt){V("next",dt,Ke,ut)},function(dt){V("throw",dt,Ke,ut)}):Promise.resolve(Le).then(function(dt){_t.value=dt,Ke(_t)},function(dt){return V("throw",dt,Ke,ut)});ut(Nt.arg)}(J,he,et,le)})}return ne=ne?ne.then(Ce,Ce):Ce()}}function re(me){var ne={tryLoc:me[0]};1 in me&&(ne.catchLoc=me[1]),2 in me&&(ne.finallyLoc=me[2],ne.afterLoc=me[3]),this.tryEntries.push(ne)}function Z(me){var ne=me.completion||{};ne.type="normal",delete ne.arg,me.completion=ne}function _e(me){this.tryEntries=[{tryLoc:"root"}],me.forEach(re,this),this.reset(!0)}function xe(me){if(me){var ne,J=me[I];if(J)return J.call(me);if("function"==typeof me.next)return me;if(!isNaN(me.length))return ne=-1,(J=function he(){for(;++ne<me.length;)if(w.call(me,ne))return he.value=me[ne],he.done=!1,he;return he.value=A,he.done=!0,he}).next=J}return{next:oe}}function oe(){return{value:A,done:!0}}return(k.prototype=z.constructor=X).constructor=k,X[d]=k.displayName="GeneratorFunction",M.isGeneratorFunction=function(me){return!!(me="function"==typeof me&&me.constructor)&&(me===k||"GeneratorFunction"===(me.displayName||me.name))},M.mark=function(me){return Object.setPrototypeOf?Object.setPrototypeOf(me,X):(me.__proto__=X,d in me||(me[d]="GeneratorFunction")),me.prototype=Object.create(z),me},M.awrap=function(me){return{__await:me}},ee(H.prototype),H.prototype[D]=function(){return this},M.AsyncIterator=H,M.async=function(me,ne,J,he){var Ce=new H(f(me,ne,J,he));return M.isGeneratorFunction(ne)?Ce:Ce.next().then(function(et){return et.done?et.value:Ce.next()})},ee(z),z[d]="Generator",z[I]=function(){return this},z.toString=function(){return"[object Generator]"},M.keys=function(me){var ne,J=[];for(ne in me)J.push(ne);return J.reverse(),function he(){for(;J.length;){var Ce=J.pop();if(Ce in me)return he.value=Ce,he.done=!1,he}return he.done=!0,he}},M.values=xe,_e.prototype={constructor:_e,reset:function(me){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(Z),!me)for(var ne in this)"t"===ne.charAt(0)&&w.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=A)},stop:function(){this.done=!0;var me=this.tryEntries[0].completion;if("throw"===me.type)throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var ne=this;function J(ge,Le){return et.type="throw",et.arg=me,ne.next=ge,Le&&(ne.method="next",ne.arg=A),!!Le}for(var he=this.tryEntries.length-1;0<=he;--he){var Ce=this.tryEntries[he],et=Ce.completion;if("root"===Ce.tryLoc)return J("end");if(Ce.tryLoc<=this.prev){var le=w.call(Ce,"catchLoc"),V=w.call(Ce,"finallyLoc");if(le&&V){if(this.prev<Ce.catchLoc)return J(Ce.catchLoc,!0);if(this.prev<Ce.finallyLoc)return J(Ce.finallyLoc)}else if(le){if(this.prev<Ce.catchLoc)return J(Ce.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<Ce.finallyLoc)return J(Ce.finallyLoc)}}}},abrupt:function(me,ne){for(var J=this.tryEntries.length-1;0<=J;--J){var he=this.tryEntries[J];if(he.tryLoc<=this.prev&&w.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var Ce=he;break}}var et=(Ce=Ce&&("break"===me||"continue"===me)&&Ce.tryLoc<=ne&&ne<=Ce.finallyLoc?null:Ce)?Ce.completion:{};return et.type=me,et.arg=ne,Ce?(this.method="next",this.next=Ce.finallyLoc,E):this.complete(et)},complete:function(me,ne){if("throw"===me.type)throw me.arg;return"break"===me.type||"continue"===me.type?this.next=me.arg:"return"===me.type?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):"normal"===me.type&&ne&&(this.next=ne),E},finish:function(me){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J=this.tryEntries[ne];if(J.finallyLoc===me)return this.complete(J.completion,J.afterLoc),Z(J),E}},catch:function(me){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J,he,Ce=this.tryEntries[ne];if(Ce.tryLoc===me)return"throw"===(J=Ce.completion).type&&(he=J.arg,Z(Ce)),he}throw new Error("illegal catch attempt")},delegateYield:function(me,ne,J){return this.delegate={iterator:xe(me),resultName:ne,nextLoc:J},"next"===this.method&&(this.arg=A),E}},M}("object"==typeof ve?ve.exports:{});try{regeneratorRuntime=ve}catch{Function("r","regeneratorRuntime = r")(ve)}},{}],261:[function(l,ve,K){!function(M){"use strict";var A,b,w,I,D,d,f,h,p,m;function g(Z){if("string"!=typeof Z&&(Z=String(Z)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Z))throw new TypeError("Invalid character in header field name");return Z.toLowerCase()}function x(Z){return"string"!=typeof Z?String(Z):Z}function E(Z){var _e={next:function(){var xe=Z.shift();return{done:void 0===xe,value:xe}}};return b&&(_e[Symbol.iterator]=function(){return _e}),_e}function S(Z){this.map={},Z instanceof S?Z.forEach(function(_e,xe){this.append(xe,_e)},this):Array.isArray(Z)?Z.forEach(function(_e){this.append(_e[0],_e[1])},this):Z&&Object.getOwnPropertyNames(Z).forEach(function(_e){this.append(_e,Z[_e])},this)}function k(Z){if(Z.bodyUsed)return Promise.reject(new TypeError("Already read"));Z.bodyUsed=!0}function X(Z){return new Promise(function(_e,xe){Z.onload=function(){_e(Z.result)},Z.onerror=function(){xe(Z.error)}})}function Y(Z){var _e=new FileReader,xe=X(_e);return _e.readAsArrayBuffer(Z),xe}function G(Z){var _e;return Z.slice?Z.slice(0):((_e=new Uint8Array(Z.byteLength)).set(new Uint8Array(Z)),_e.buffer)}function z(){return this.bodyUsed=!1,this._initBody=function(Z){if(this._bodyInit=Z)if("string"==typeof Z)this._bodyText=Z;else if(w&&Blob.prototype.isPrototypeOf(Z))this._bodyBlob=Z;else if(I&&FormData.prototype.isPrototypeOf(Z))this._bodyFormData=Z;else if(A&&URLSearchParams.prototype.isPrototypeOf(Z))this._bodyText=Z.toString();else if(D&&w&&f(Z))this._bodyArrayBuffer=G(Z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!D||!ArrayBuffer.prototype.isPrototypeOf(Z)&&!h(Z))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=G(Z)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof Z?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):A&&URLSearchParams.prototype.isPrototypeOf(Z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w&&(this.blob=function(){var Z=k(this);if(Z)return Z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Y)}),this.text=function(){var Z,_e,xe=k(this);if(xe)return xe;if(this._bodyBlob)return xe=this._bodyBlob,_e=X(Z=new FileReader),Z.readAsText(xe),_e;if(this._bodyArrayBuffer)return Promise.resolve(function(oe){for(var me=new Uint8Array(oe),ne=new Array(me.length),J=0;J<me.length;J++)ne[J]=String.fromCharCode(me[J]);return ne.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},I&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}function ee(Z,_e){var xe,oe=(_e=_e||{}).body;if(Z instanceof ee){if(Z.bodyUsed)throw new TypeError("Already read");this.url=Z.url,this.credentials=Z.credentials,_e.headers||(this.headers=new S(Z.headers)),this.method=Z.method,this.mode=Z.mode,oe||null==Z._bodyInit||(oe=Z._bodyInit,Z.bodyUsed=!0)}else this.url=String(Z);if(this.credentials=_e.credentials||this.credentials||"omit",!_e.headers&&this.headers||(this.headers=new S(_e.headers)),this.method=(xe=(Z=_e.method||this.method||"GET").toUpperCase(),-1<p.indexOf(xe)?xe:Z),this.mode=_e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(oe)}function H(Z){var _e=new FormData;return Z.trim().split("&").forEach(function(xe){var oe;xe&&(oe=(xe=xe.split("=")).shift().replace(/\+/g," "),xe=xe.join("=").replace(/\+/g," "),_e.append(decodeURIComponent(oe),decodeURIComponent(xe)))}),_e}function re(Z,_e){_e=_e||{},this.type="default",this.status=void 0===_e.status?200:_e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in _e?_e.statusText:"OK",this.headers=new S(_e.headers),this.url=_e.url||"",this._initBody(Z)}M.fetch||(A="URLSearchParams"in M,b="Symbol"in M&&"iterator"in Symbol,w="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch{return!1}}(),I="FormData"in M,(D="ArrayBuffer"in M)&&(d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(Z){return Z&&DataView.prototype.isPrototypeOf(Z)},h=ArrayBuffer.isView||function(Z){return Z&&-1<d.indexOf(Object.prototype.toString.call(Z))}),S.prototype.append=function(Z,_e){Z=g(Z),_e=x(_e);var xe=this.map[Z];this.map[Z]=xe?xe+","+_e:_e},S.prototype.delete=function(Z){delete this.map[g(Z)]},S.prototype.get=function(Z){return Z=g(Z),this.has(Z)?this.map[Z]:null},S.prototype.has=function(Z){return this.map.hasOwnProperty(g(Z))},S.prototype.set=function(Z,_e){this.map[g(Z)]=x(_e)},S.prototype.forEach=function(Z,_e){for(var xe in this.map)this.map.hasOwnProperty(xe)&&Z.call(_e,this.map[xe],xe,this)},S.prototype.keys=function(){var Z=[];return this.forEach(function(_e,xe){Z.push(xe)}),E(Z)},S.prototype.values=function(){var Z=[];return this.forEach(function(_e){Z.push(_e)}),E(Z)},S.prototype.entries=function(){var Z=[];return this.forEach(function(_e,xe){Z.push([xe,_e])}),E(Z)},b&&(S.prototype[Symbol.iterator]=S.prototype.entries),p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})},z.call(ee.prototype),z.call(re.prototype),re.prototype.clone=function(){return new re(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},re.error=function(){var Z=new re(null,{status:0,statusText:""});return Z.type="error",Z},m=[301,302,303,307,308],re.redirect=function(Z,_e){if(-1===m.indexOf(_e))throw new RangeError("Invalid status code");return new re(null,{status:_e,headers:{location:Z}})},M.Headers=S,M.Request=ee,M.Response=re,M.fetch=function(Z,_e){return new Promise(function(xe,oe){var me=new ee(Z,_e),ne=new XMLHttpRequest;ne.onload=function(){var J,he={status:ne.status,statusText:ne.statusText,headers:(he=ne.getAllResponseHeaders()||"",J=new S,he.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(le){var V=(le=le.split(":")).shift().trim();V&&(le=le.join(":").trim(),J.append(V,le))}),J)},Ce=(he.url="responseURL"in ne?ne.responseURL:he.headers.get("X-Request-URL"),"response"in ne?ne.response:ne.responseText);xe(new re(Ce,he))},ne.onerror=function(){oe(new TypeError("Network request failed"))},ne.ontimeout=function(){oe(new TypeError("Network request failed"))},ne.open(me.method,me.url,!0),"include"===me.credentials?ne.withCredentials=!0:"omit"===me.credentials&&(ne.withCredentials=!1),"responseType"in ne&&w&&(ne.responseType="blob"),me.headers.forEach(function(J,he){ne.setRequestHeader(he,J)}),ne.send(void 0===me._bodyInit?null:me._bodyInit)})},M.fetch.polyfill=!0)}(typeof self<"u"?self:this)},{}],262:[function(l,ve,K){"use strict";l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M,A=w(l("../core/main")),b=w(l("../color/color_conversion"));function w(d){return d&&d.__esModule?d:{default:d}}var I=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],D=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];A.default.prototype._rgbColorName=function(p){p=b.default._rgbaToHSBA(p);var f,h,m=[(M=p)[0],p[1],p[2]];0!==m[0]&&(m[0]=Math.round(100*m[0]),(p=m[0].toString().split(""))[h=p.length-1]=parseInt(p[h]),p[h]<2.5?p[h]=0:2.5<=p[h]&&p[h]<7.5&&(p[h]=5),2===p.length?(p[0]=parseInt(p[0]),7.5<=p[h]&&(p[h]=0,p[0]=p[0]+1),m[0]=10*p[0]+p[1]):m[0]=7.5<=p[h]?10:p[h]),m[2]=m[2]/255;for(var g=m.length-1;1<=g;g--)m[g]=m[g]<=.25?0:.25<m[g]&&m[g]<.75?.5:1;if(0===m[0]&&0===m[1]&&1===m[2]){for(var x=2;0<=x;x--)M[x]=Math.round(1e4*M[x])/1e4;for(var E=0;E<I.length;E++){if(I[E].h===M[0]&&I[E].s===M[1]&&I[E].b===M[2]){f=I[E].name;break}f="white"}}else for(var S=0;S<D.length;S++)if(D[S].h===m[0]&&D[S].s===m[1]&&D[S].b===m[2]){f=D[S].name;break}return f},K.default=l=A.default},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l},A="_Description",b="_fallbackDesc",w="_fallbackTable",I="_Label",D="_labelDesc",d="_labelTable";function f(h){if("label"===h||"fallback"===h)throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}M.default.prototype.describe=function(h,p){var m;M.default._validateParameters("describe",arguments),"string"==typeof h&&(m=this.canvas.id,h=f(h),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),p===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},M.default.prototype.describeElement=function(h,p,m){var g,x;M.default._validateParameters("describeElement",arguments),"string"==typeof p&&"string"==typeof h&&(g=this.canvas.id,p=f(p),x=function(E){if("label"===E||"fallback"===E)throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(p,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==x&&(this.descriptions.fallbackElements[h].innerHTML=x):this._describeElementHTML("fallback",h,x),m===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==x&&(this.descriptions.labelElements[h].innerHTML=x):this._describeElementHTML("label",h,x)))},M.default.prototype._describeHTML=function(h,p){var m,g=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(g+A))?this.dummyDOM.querySelector("#"+g+w).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+b,'"></p>')):(m='<div id="'.concat(g).concat(A,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(b,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(g)).innerHTML=m),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(b)),this.descriptions.fallback.innerHTML=p):"label"===h&&(this.dummyDOM.querySelector("#".concat(g+I))?this.dummyDOM.querySelector("#".concat(g+d))&&this.dummyDOM.querySelector("#".concat(g+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(D,'"></p>')):(m='<div id="'.concat(g).concat(I,'" class="p5Label"><p id="').concat(g).concat(D,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",m)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+D),this.descriptions.label.innerHTML=p)},M.default.prototype._describeElementHTML=function(h,p,m){var g,x=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(x+A))?this.dummyDOM.querySelector("#"+x+w)||this.dummyDOM.querySelector("#"+x+b).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(x).concat(A,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).innerHTML=g),(g=document.createElement("tr")).id=x+"_fte_"+p,this.dummyDOM.querySelector("#"+x+w).appendChild(g),this.descriptions.fallbackElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(p)),this.descriptions.fallbackElements[p].innerHTML=m):"label"===h&&(this.dummyDOM.querySelector("#".concat(x+I))?this.dummyDOM.querySelector("#".concat(x+d))||this.dummyDOM.querySelector("#"+x+D).insertAdjacentHTML("afterend",'<table id="'.concat(x+d,'"></table>')):(g='<div id="'.concat(x).concat(I,'" class="p5Label"><table id="').concat(x).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",g)),(h=document.createElement("tr")).id=x+"_lte_"+p,this.dummyDOM.querySelector("#"+x+d).appendChild(h),this.descriptions.labelElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(p)),this.descriptions.labelElements[p].innerHTML=m)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype._updateGridOutput=function(M){var A,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(A=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p="",m=0;for(f in d){var g,x=0;for(g in d[f]){var E='<li id="'.concat(D,"shape").concat(m,'">').concat(d[f][g].color," ").concat(f,",");"line"===f?E+=" location = ".concat(d[f][g].pos,", length = ").concat(d[f][g].length," pixels"):(E+=" location = ".concat(d[f][g].pos),"point"!==f&&(E+=", area = ".concat(d[f][g].area," %")),E+="</li>"),h+=E,x++,m++}p=1<x?"".concat(p," ").concat(x," ").concat(f,"s"):"".concat(p," ").concat(x," ").concat(f)}return{numShapes:[m,p],details:h}}(M,this.ingredients.shapes)).numShapes,f=this.width,h=this.height,d="".concat(d=this.ingredients.colors.background," canvas, ").concat(f," by ").concat(h," pixels, contains ").concat(D[0]),w=d="".concat(d,1===D[0]?" shape: ":" shapes: ").concat(D[1]),I=function(D,d){var f,h,p=0,m="",g=Array.from(Array(10),function(){return Array(10)});for(f in d)for(var x in d[f]){var E;E="line"!==f?'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f,"</a>"):'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f," midpoint</a>"),d[f][x].loc.locY<g.length&&d[f][x].loc.locX<g[d[f][x].loc.locY].length&&(g[d[f][x].loc.locY][d[f][x].loc.locX]=g[d[f][x].loc.locY][d[f][x].loc.locX]?g[d[f][x].loc.locY][d[f][x].loc.locX]+"  "+E:E,p++)}for(h in g){var S,k="<tr>";for(S in g[h])k+="<td>",void 0!==g[h][S]&&(k+=g[h][S]),k+="</td>";m=m+k+"</tr>"}return m}(M,this.ingredients.shapes),w!==A.summary.innerHTML&&(A.summary.innerHTML=w),I!==A.map.innerHTML&&(A.map.innerHTML=I),b.details!==A.shapeDetails.innerHTML&&(A.shapeDetails.innerHTML=b.details),this._accessibleOutputs[M]=A)},K.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(w,I,D){return 10===(I=Math.floor(w[0]/I*10))&&(I-=1),10===(w=Math.floor(w[1]/D*10))&&(w-=1),{locX:I,locY:w}}M.default.prototype.textOutput=function(w){M.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},M.default.prototype.gridOutput=function(w){M.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},M.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},M.default.prototype._createOutput=function(w,I){var D,d,f,h=this.canvas.id,p=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");"Fallback"===I?(D=h+w,this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===I&&(D=h+w+(p=I),this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"+I))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(d,'"></div>'))),this._accessibleOutputs[D]={},"textOutput"===w?(p="#".concat(h,"gridOutput").concat(p),f='<div id="'.concat(D,'">Text Output<div id="').concat(D,'Summary" aria-label="text output summary"><p id="').concat(D,'_summary"></p><ul id="').concat(D,'_list"></ul></div><table id="').concat(D,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].list=this.dummyDOM.querySelector("#".concat(D,"_list"))):"gridOutput"===w&&(p="#".concat(h,"textOutput").concat(p),f='<div id="'.concat(D,'">Grid Output<p id="').concat(D,'_summary" aria-label="grid output summary"><table id="').concat(D,'_map" summary="grid output content"></table><ul id="').concat(D,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].map=this.dummyDOM.querySelector("#".concat(D,"_map"))),this._accessibleOutputs[D].shapeDetails=this.dummyDOM.querySelector("#".concat(D,"_shapeDetails")),this._accessibleOutputs[D].summary=this.dummyDOM.querySelector("#".concat(D,"_summary"))},M.default.prototype._updateAccsOutput=function(){var w=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(w+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(w+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(w+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(w+"gridOutputLabel"))},M.default.prototype._accsBackground=function(w){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==w&&(this.ingredients.colors.backgroundRGBA=w,this.ingredients.colors.background=this._rgbColorName(w))},M.default.prototype._accsCanvasColors=function(w,I){"fill"===w?this.ingredients.colors.fillRGBA!==I&&(this.ingredients.colors.fillRGBA=I,this.ingredients.colors.fill=this._rgbColorName(I)):"stroke"===w&&this.ingredients.colors.strokeRGBA!==I&&(this.ingredients.colors.strokeRGBA=I,this.ingredients.colors.stroke=this._rgbColorName(I))},M.default.prototype._accsOutput=function(w,I){"ellipse"===w&&I[2]===I[3]?w="circle":"rectangle"===w&&I[2]===I[3]&&(w="square");var D,d,g,x,E,f={},h=!0,p=(x=I,g="rectangle"===(g=w)||"ellipse"===g||"arc"===g||"circle"===g||"square"===g?(E=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):"triangle"===g?(E=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):"quadrilateral"===g?(E=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):"line"===g?(E=(x[0]+x[2])/2,(x[1]+x[3])/2):(E=x[0],x[1]),[E,g]);if("line"===w?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(I[0],I[1],I[2],I[3])),D=this._getPos(I[0],[1]),d=this._getPos(I[2],[3]),f.loc=b(p,this.width,this.height),f.pos=D===d?"at ".concat(D):"from ".concat(D," to ").concat(d)):("point"===w?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(w,I)),f.pos=this._getPos.apply(this,function A(w){return function(I){if(Array.isArray(I)){for(var D=0,d=new Array(I.length);D<I.length;D++)d[D]=I[D];return d}}(w)||function(I){if(Symbol.iterator in Object(I)||"[object Arguments]"===Object.prototype.toString.call(I))return Array.from(I)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(p)),f.loc=b(p,this.width,this.height)),this.ingredients.shapes[w]){if(this.ingredients.shapes[w]!==[f]){for(var m in this.ingredients.shapes[w])JSON.stringify(this.ingredients.shapes[w][m])===JSON.stringify(f)&&(h=!1);!0===h&&this.ingredients.shapes[w].push(f)}}else this.ingredients.shapes[w]=[f]},M.default.prototype._getPos=function(d,D){d=new DOMPointReadOnly(d,D),D=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),D=(d=d.matrixTransform(D)).x,d=d.y;var f=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return D<.4*f?d<.4*h?"top left":.6*h<d?"bottom left":"mid left":.6*f<D?d<.4*h?"top right":.6*h<d?"bottom right":"mid right":d<.4*h?"top middle":.6*h<d?"bottom middle":"middle"},M.default.prototype._getArea=function(w,I){var D,d,f=0,h=("arc"===w?(f=(D=((I[5]-I[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*I[2]*I[3]/8,"open"!==I[6]&&"chord"!==I[6]||(d=I[0],x=I[1],h=I[0]+I[2]/2*Math.cos(I[4]).toFixed(2),E=I[1]+I[3]/2*Math.sin(I[4]).toFixed(2),m=I[0]+I[2]/2*Math.cos(I[5]).toFixed(2),p=I[1]+I[3]/2*Math.sin(I[5]).toFixed(2),d=Math.abs(d*(E-p)+h*(p-x)+m*(x-E))/2,D>Math.PI?f+=d:f-=d)):"ellipse"===w||"circle"===w?f=3.14*I[2]/2*I[3]/2:"line"===w||"point"===w?f=0:"quadrilateral"===w?f=Math.abs((I[6]+I[0])*(I[7]-I[1])+(I[0]+I[2])*(I[1]-I[3])+(I[2]+I[4])*(I[3]-I[5])+(I[4]+I[6])*(I[5]-I[7]))/2:"rectangle"===w||"square"===w?f=I[2]*I[3]:"triangle"===w&&(f=Math.abs(I[0]*(I[3]-I[5])+I[2]*(I[5]-I[1])+I[4]*(I[1]-I[3]))/2),this.width*this._pixelDensity),p=this.height*this._pixelDensity,m=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,p),new DOMPoint(0,p)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=m.map(function(S){return S.matrixTransform(g)}),E=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*f/E)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.concat"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype._updateTextOutput=function(M){var A,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(A=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<li><a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][m].color," ").concat(f,"</a>");"line"===f?g+=", ".concat(d[f][m].pos,", ").concat(d[f][m].length," pixels long.</li>"):(g+=", at ".concat(d[f][m].pos),"point"!==f&&(g+=", covering ".concat(d[f][m].area,"% of the canvas")),g+=".</li>"),h+=g,p++}return{numShapes:p,listShapes:h}}(M,this.ingredients.shapes)).numShapes,d=this.ingredients.colors.background,h=this.height,f="Your output is a, ".concat(f=this.width," by ").concat(h," pixels, ").concat(d," canvas containing the following"),w=f=1===D?"".concat(f," shape:"):"".concat(f," ").concat(D," shapes:"),I=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<tr id="'.concat(D,"shape").concat(p,'"><th>').concat(d[f][m].color," ").concat(f,"</th>");"line"===f?g+="<td>location = ".concat(d[f][m].pos,"</td><td>length = ").concat(d[f][m].length," pixels</td></tr>"):(g+="<td>location = ".concat(d[f][m].pos,"</td>"),"point"!==f&&(g+="<td> area = ".concat(d[f][m].area,"%</td>")),g+="</tr>"),h+=g,p++}return h}(M,this.ingredients.shapes),w!==A.summary.innerHTML&&(A.summary.innerHTML=w),b.listShapes!==A.list.innerHTML&&(A.list.innerHTML=b.listShapes),I!==A.shapeDetails.innerHTML&&(A.shapeDetails.innerHTML=I),this._accessibleOutputs[M]=A)},K.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(l,ve,K){"use strict";var M=(M=l("./core/main"))&&M.__esModule?M:{default:M};l("./core/constants"),l("./core/environment"),l("./core/friendly_errors/stacktrace"),l("./core/friendly_errors/validate_params"),l("./core/friendly_errors/file_errors"),l("./core/friendly_errors/fes_core"),l("./core/friendly_errors/sketch_reader"),l("./core/helpers"),l("./core/legacy"),l("./core/preload"),l("./core/p5.Element"),l("./core/p5.Graphics"),l("./core/p5.Renderer"),l("./core/p5.Renderer2D"),l("./core/rendering"),l("./core/shim"),l("./core/structure"),l("./core/transform"),l("./core/shape/2d_primitives"),l("./core/shape/attributes"),l("./core/shape/curves"),l("./core/shape/vertex"),l("./accessibility/outputs"),l("./accessibility/textOutput"),l("./accessibility/gridOutput"),l("./accessibility/color_namer"),l("./color/color_conversion"),l("./color/creating_reading"),l("./color/p5.Color"),l("./color/setting"),l("./data/p5.TypedDict"),l("./data/local_storage.js"),l("./dom/dom"),l("./accessibility/describe"),l("./events/acceleration"),l("./events/keyboard"),l("./events/mouse"),l("./events/touch"),l("./image/filters"),l("./image/image"),l("./image/loading_displaying"),l("./image/p5.Image"),l("./image/pixels"),l("./io/files"),l("./io/p5.Table"),l("./io/p5.TableRow"),l("./io/p5.XML"),l("./math/calculation"),l("./math/math"),l("./math/noise"),l("./math/p5.Vector"),l("./math/random"),l("./math/trigonometry"),l("./typography/attributes"),l("./typography/loading_displaying"),l("./typography/p5.Font"),l("./utilities/array_functions"),l("./utilities/conversion"),l("./utilities/string_functions"),l("./utilities/time_date"),l("./webgl/3d_primitives"),l("./webgl/interaction"),l("./webgl/light"),l("./webgl/loading"),l("./webgl/material"),l("./webgl/p5.Camera"),l("./webgl/p5.DataArray"),l("./webgl/p5.Geometry"),l("./webgl/p5.Matrix"),l("./webgl/p5.Quat"),l("./webgl/p5.RendererGL.Immediate"),l("./webgl/p5.RendererGL"),l("./webgl/p5.RendererGL.Retained"),l("./webgl/p5.Framebuffer"),l("./webgl/p5.Shader"),l("./webgl/p5.RenderBuffer"),l("./webgl/p5.Texture"),l("./webgl/text"),l("./core/init"),ve.exports=M.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.ColorConversion={_hsbaToHSLA:function(M){var b=M[1],w=M[2],I=(2-b)*w/2;return 0!=I&&(1==I?b=0:I<.5?b/=2-b:b=b*w/(2-2*I)),[M[0],b,I,M[3]]},_hsbaToRGBA:function(M){var A,b,w,I,D,d=6*M[0],f=M[1],h=M[2];return 0===f?[h,h,h,M[3]]:(b=h*(1-f),w=h*(1-f*(d-(A=Math.floor(d)))),f=h*(1-f*(1+A-d)),d=1===A?(I=w,D=h,b):2===A?(I=b,D=h,f):3===A?(I=b,D=w,h):4===A?(I=f,D=b,h):5===A?(I=h,D=b,w):(I=h,D=f,b),[I,D,d,M[3]])},_hslaToHSBA:function(M){var b=M[1],w=M[2],I=w<.5?(1+b)*w:w+b-w*b;return[M[0],b=2*(I-w)/I,I,M[3]]},_hslaToRGBA:function(M){var A,b=6*M[0],w=M[1],I=M[2];return 0===w?[I,I,I,M[3]]:[(A=function(D,d,f){return D<0?D+=6:6<=D&&(D-=6),D<1?d+(f-d)*D:D<3?f:D<4?d+(f-d)*(4-D):d})(2+b,w=2*I-(I=I<.5?(1+w)*I:I+w-I*w),I),A(b,w,I),A(b-2,w,I),M[3]]},_rgbaToHSBA:function(M){var A,b,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d-Math.min(w,I,D);return 0==f?b=A=0:(b=f/d,w===d?A=(I-D)/f:I===d?A=2+(D-w)/f:D===d&&(A=4+(w-I)/f),A<0?A+=6:6<=A&&(A-=6)),[A/6,b,d,M[3]]},_rgbaToHSLA:function(M){var A,b,h,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d+(h=Math.min(w,I,D));return 0==(h=d-h)?b=A=0:(b=f<1?h/f:h/(2-f),w===d?A=(I-D)/h:I===d?A=2+(D-w)/h:D===d&&(A=4+(w-I)/h),A<0?A+=6:6<=A&&(A-=6)),[A/6,b,f/2,M[3]]}},K.default=l=l.default.ColorConversion},{"../core/main":283}],269:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.map"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Color"),l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.alpha=function(d){return b.default._validateParameters("alpha",arguments),this.color(d)._getAlpha()},b.default.prototype.blue=function(d){return b.default._validateParameters("blue",arguments),this.color(d)._getBlue()},b.default.prototype.brightness=function(d){return b.default._validateParameters("brightness",arguments),this.color(d)._getBrightness()},b.default.prototype.color=function(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return b.default._validateParameters("color",h),h[0]instanceof b.default.Color?h[0]:(d=Array.isArray(h[0])?h[0]:h,new b.default.Color(this,d))},b.default.prototype.green=function(d){return b.default._validateParameters("green",arguments),this.color(d)._getGreen()},b.default.prototype.hue=function(d){return b.default._validateParameters("hue",arguments),this.color(d)._getHue()},b.default.prototype.lerpColor=function(d,f,h){b.default._validateParameters("lerpColor",arguments),d instanceof b.default.Color||(d=color(d)),f instanceof b.default.Color||(f=color(f));var p,m,g,x=this._colorMode,E=this._colorMaxes;if(x===w.RGB)m=d.levels.map(function(S){return S/255}),g=f.levels.map(function(S){return S/255});else if(x===w.HSB)d._getBrightness(),f._getBrightness(),m=d.hsba,g=f.hsba;else{if(x!==w.HSL)throw new Error("".concat(x," cannot be used for interpolation."));d._getLightness(),f._getLightness(),m=d.hsla,g=f.hsla}return h=Math.max(Math.min(h,1),0),void 0===this.lerp&&(this.lerp=function(S,k,X){return X*(k-S)+S}),x===w.RGB?p=this.lerp(m[0],g[0],h):(.5<Math.abs(m[0]-g[0])&&(m[0]>g[0]?g[0]+=1:m[0]+=1),1<=(p=this.lerp(m[0],g[0],h))&&--p),d=this.lerp(m[1],g[1],h),f=this.lerp(m[2],g[2],h),m=this.lerp(m[3],g[3],h),this.color(p*=E[x][0],d*=E[x][1],f*=E[x][2],m*=E[x][3])},b.default.prototype.paletteLerp=function(d,f){var h=d[0];if(f<h[1])return this.color(h[0]);for(var p=1;p<d.length;p++){var m,g=d[p];if(f<g[1])return this.lerpColor(this.color((m=d[p-1])[0]),this.color(g[0]),(f-m[1])/(g[1]-m[1]))}return this.color(d[d.length-1][0])},b.default.prototype.lightness=function(d){return b.default._validateParameters("lightness",arguments),this.color(d)._getLightness()},b.default.prototype.red=function(d){return b.default._validateParameters("red",arguments),this.color(d)._getRed()},b.default.prototype.saturation=function(d){return b.default._validateParameters("saturation",arguments),this.color(d)._getSaturation()};var D=b.default;K.default=D},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(p,ve,K){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function A(S){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}p("core-js/modules/es.symbol"),p("core-js/modules/es.symbol.description"),p("core-js/modules/es.symbol.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.iterator"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.get-own-property-descriptor"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.iterator"),p("core-js/modules/es.string.trim"),p("core-js/modules/es.weak-map"),p("core-js/modules/web.dom-collections.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.trim"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=d(p("../core/main")),w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==A(S)&&"function"!=typeof S)return{default:S};var k=D();if(k&&k.has(S))return k.get(S);var X,Y={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in S){var z;Object.prototype.hasOwnProperty.call(S,X)&&((z=G?Object.getOwnPropertyDescriptor(S,X):null)&&(z.get||z.set)?Object.defineProperty(Y,X,z):Y[X]=S[X])}return Y.default=S,k&&k.set(S,Y),Y}(p("../core/constants")),I=d(p("./color_conversion"));function D(){var S;return"function"!=typeof WeakMap?null:(D=function(){return S},S=new WeakMap)}function d(S){return S&&S.__esModule?S:{default:S}}function f(S,k){for(var X=0;X<k.length;X++){var Y=k[X];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(S,Y.key,Y)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},E=(p=/\s*/,/(\d{1,3})/),m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(m.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",E.source,",",E.source,",",E.source,"\\)$"].join(p.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),RGBA:new RegExp(["^rgba\\(",E.source,",",E.source,",",E.source,",",m.source,"\\)$"].join(p.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSL:new RegExp(["^hsl\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSLA:new RegExp(["^hsla\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSB:new RegExp(["^hsb\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSBA:new RegExp(["^hsba\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i")};b.default.Color=function(){function S(G,z){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(G._colorMode,G._colorMaxes),![w.RGB,w.HSL,w.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=S._parseInputs.apply(this,z),this._calculateLevels()}var k,X,Y;return k=S,Y=[{key:"_parseInputs",value:function(G,z,ee,H){var re,Z=arguments.length,_e=this.mode,xe=this.maxes[_e],oe=[];if(3<=Z){for(oe[0]=G/xe[0],oe[1]=z/xe[1],oe[2]=ee/xe[2],oe[3]="number"==typeof H?H/xe[3]:1,re=oe.length-1;0<=re;--re){var me=oe[re];me<0?oe[re]=0:1<me&&(oe[re]=1)}return _e===w.HSL?I.default._hslaToRGBA(oe):_e===w.HSB?I.default._hsbaToRGBA(oe):oe}if(1===Z&&"string"==typeof G){if(ee=G.trim().toLowerCase(),h[ee])return S._parseInputs.call(this,h[ee]);if(x.HEX3.test(ee))return(oe=x.HEX3.exec(ee).slice(1).map(function(ne){return parseInt(ne+ne,16)/255}))[3]=1,oe;if(x.HEX6.test(ee))return(oe=x.HEX6.exec(ee).slice(1).map(function(ne){return parseInt(ne,16)/255}))[3]=1,oe;if(x.HEX4.test(ee))return x.HEX4.exec(ee).slice(1).map(function(ne){return parseInt(ne+ne,16)/255});if(x.HEX8.test(ee))return x.HEX8.exec(ee).slice(1).map(function(ne){return parseInt(ne,16)/255});if(x.RGB.test(ee))return(oe=x.RGB.exec(ee).slice(1).map(function(ne){return ne/255}))[3]=1,oe;if(x.RGB_PERCENT.test(ee))return(oe=x.RGB_PERCENT.exec(ee).slice(1).map(function(ne){return parseFloat(ne)/100}))[3]=1,oe;if(x.RGBA.test(ee))return x.RGBA.exec(ee).slice(1).map(function(ne,J){return 3===J?parseFloat(ne):ne/255});if(x.RGBA_PERCENT.test(ee))return x.RGBA_PERCENT.exec(ee).slice(1).map(function(ne,J){return 3===J?parseFloat(ne):parseFloat(ne)/100});if(x.HSL.test(ee)?(oe=x.HSL.exec(ee).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:parseInt(ne,10)/100}))[3]=1:x.HSLA.test(ee)&&(oe=x.HSLA.exec(ee).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:3===J?parseFloat(ne):parseInt(ne,10)/100})),(oe=oe.map(function(ne){return Math.max(Math.min(ne,1),0)})).length)return I.default._hslaToRGBA(oe);if(x.HSB.test(ee)?(oe=x.HSB.exec(ee).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:parseInt(ne,10)/100}))[3]=1:x.HSBA.test(ee)&&(oe=x.HSBA.exec(ee).slice(1).map(function(ne,J){return 0===J?parseInt(ne,10)/360:3===J?parseFloat(ne):parseInt(ne,10)/100})),oe.length){for(re=oe.length-1;0<=re;--re)oe[re]=Math.max(Math.min(oe[re],1),0);return I.default._hsbaToRGBA(oe)}oe=[1,1,1,1]}else{if(1!==Z&&2!==Z||"number"!=typeof G)throw new Error("".concat(arguments,"is not a valid color representation."));oe[0]=G/xe[2],oe[1]=G/xe[2],oe[2]=G/xe[2],oe[3]="number"==typeof z?z/xe[3]:1,oe=oe.map(function(ne){return Math.max(Math.min(ne,1),0)})}return oe}}],(X=[{key:"toString",value:function(G){var z=this.levels,ee=this._array,H=ee[3];switch(G){case"#rrggbb":return"#".concat(z[0]<16?"0".concat(z[0].toString(16)):z[0].toString(16),z[1]<16?"0".concat(z[1].toString(16)):z[1].toString(16),z[2]<16?"0".concat(z[2].toString(16)):z[2].toString(16));case"#rrggbbaa":return"#".concat(z[0]<16?"0".concat(z[0].toString(16)):z[0].toString(16),z[1]<16?"0".concat(z[1].toString(16)):z[1].toString(16),z[2]<16?"0".concat(z[2].toString(16)):z[2].toString(16),z[3]<16?"0".concat(z[3].toString(16)):z[3].toString(16));case"#rgb":return"#".concat(Math.round(15*ee[0]).toString(16),Math.round(15*ee[1]).toString(16),Math.round(15*ee[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*ee[0]).toString(16),Math.round(15*ee[1]).toString(16),Math.round(15*ee[2]).toString(16),Math.round(15*ee[3]).toString(16));case"rgb":return"rgb(".concat(z[0],", ",z[1],", ",z[2],")");case"rgb%":return"rgb(".concat((100*ee[0]).toPrecision(3),"%, ",(100*ee[1]).toPrecision(3),"%, ",(100*ee[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*ee[0]).toPrecision(3),"%, ",(100*ee[1]).toPrecision(3),"%, ",(100*ee[2]).toPrecision(3),"%, ",(100*ee[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],", ",H,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*H).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],", ",H,")");case"hsla%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*H).toPrecision(3),"%)");default:return"rgba(".concat(z[0],",",z[1],",",z[2],",",H,")")}}},{key:"setRed",value:function(G){this._array[0]=G/this.maxes[w.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(G){this._array[1]=G/this.maxes[w.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(G){this._array[2]=G/this.maxes[w.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(G){this._array[3]=G/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var G=this._array,z=this.levels=new Array(G.length),ee=G.length-1;0<=ee;--ee)z[ee]=Math.round(255*G[ee]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(G,z){this.mode=G,this.maxes=z}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[w.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[w.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[w.RGB][1]}},{key:"_getHue",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[w.HSB][0]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[w.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[w.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[w.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[w.HSB][1]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[w.HSL][1])}}])&&f(k.prototype,X),Y&&f(k,Y),S}(),K.default=E=b.default.Color},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.fill"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Color"),b.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},b.default.prototype.endClip=function(){this._renderer.endClip()},b.default.prototype.clip=function(d,f){this._renderer.beginClip(f),d(),this._renderer.endClip(f)},b.default.prototype.background=function(){var d;return(d=this._renderer).background.apply(d,arguments),this},b.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},b.default.prototype.colorMode=function(d,f,h,p,m){return b.default._validateParameters("colorMode",arguments),d!==w.RGB&&d!==w.HSB&&d!==w.HSL||(this._colorMode=d,d=this._colorMaxes[d],2===arguments.length?(d[0]=f,d[1]=f,d[2]=f,d[3]=f):4===arguments.length?(d[0]=f,d[1]=h,d[2]=p):5===arguments.length&&(d[0]=f,d[1]=h,d[2]=p,d[3]=m)),this},b.default.prototype.fill=function(){var d;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(d=this._renderer).fill.apply(d,arguments),this},b.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},b.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},b.default.prototype.stroke=function(){var d;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(d=this._renderer).stroke.apply(d,arguments),this},b.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},b.default.prototype.noErase=function(){return this._renderer.noErase(),this};var D=b.default;K.default=D},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QUADRATIC=K.LINEAR=K._CTX_MIDDLE=K._DEFAULT_LEADMULT=K._DEFAULT_TEXT_FILL=K.WORD=K.CHAR=K.BOLDITALIC=K.BOLD=K.ITALIC=K.NORMAL=K.BLUR=K.ERODE=K.DILATE=K.POSTERIZE=K.INVERT=K.OPAQUE=K.GRAY=K.THRESHOLD=K.BURN=K.DODGE=K.SOFT_LIGHT=K.HARD_LIGHT=K.OVERLAY=K.REPLACE=K.SCREEN=K.MULTIPLY=K.EXCLUSION=K.SUBTRACT=K.DIFFERENCE=K.LIGHTEST=K.DARKEST=K.ADD=K.REMOVE=K.BLEND=K.UP_ARROW=K.TAB=K.SHIFT=K.RIGHT_ARROW=K.RETURN=K.OPTION=K.LEFT_ARROW=K.ESCAPE=K.ENTER=K.DOWN_ARROW=K.DELETE=K.CONTROL=K.BACKSPACE=K.ALT=K.AUTO=K.HSL=K.HSB=K.RGB=K.MITER=K.BEVEL=K.ROUND=K.SQUARE=K.PROJECT=K.PIE=K.CHORD=K.OPEN=K.CLOSE=K.TESS=K.QUAD_STRIP=K.QUADS=K.TRIANGLE_STRIP=K.TRIANGLE_FAN=K.TRIANGLES=K.LINE_LOOP=K.LINE_STRIP=K.LINES=K.POINTS=K.BASELINE=K.BOTTOM=K.TOP=K.CENTER=K.LEFT=K.RIGHT=K.RADIUS=K.CORNERS=K.CORNER=K.RAD_TO_DEG=K.DEG_TO_RAD=K.RADIANS=K.DEGREES=K.TWO_PI=K.TAU=K.QUARTER_PI=K.PI=K.HALF_PI=K.WAIT=K.TEXT=K.MOVE=K.HAND=K.CROSS=K.ARROW=K.WEBGL2=K.WEBGL=K.P2D=K.VERSION=void 0,K.RGBA=K.HALF_FLOAT=K.FLOAT=K.UNSIGNED_INT=K.UNSIGNED_BYTE=K.COVER=K.CONTAIN=K.FALLBACK=K.LABEL=K.AXES=K.GRID=K._DEFAULT_FILL=K._DEFAULT_STROKE=K.PORTRAIT=K.LANDSCAPE=K.SMOOTH=K.FLAT=K.MIRROR=K.CLAMP=K.REPEAT=K.NEAREST=K.IMAGE=K.IMMEDIATE=K.TEXTURE=K.FILL=K.STROKE=K.CURVE=K.BEZIER=void 0;var M=Math.PI,A=(K.VERSION="1.11.3",K.P2D="p2d",K.WEBGL="webgl",K.WEBGL2="webgl2",K.ARROW="default",K.CROSS="crosshair",K.HAND="pointer",K.MOVE="move",K.TEXT="text",K.WAIT="wait",M/2);K.HALF_PI=A,K.PI=A=M,K.QUARTER_PI=A=M/4,K.TAU=A=2*M,K.TWO_PI=A=2*M,K.DEGREES="degrees",K.RADIANS="radians",K.DEG_TO_RAD=A=M/180,K.RAD_TO_DEG=A=180/M,K.CORNER="corner",K.CORNERS="corners",K.RADIUS="radius",K.RIGHT="right",K.LEFT="left",K.CENTER="center",K.TOP="top",K.BOTTOM="bottom",K.BASELINE="alphabetic",K.POINTS=0,K.LINES=1,K.LINE_STRIP=3,K.LINE_LOOP=2,K.TRIANGLES=4,K.TRIANGLE_FAN=6,K.TRIANGLE_STRIP=5,K.QUADS="quads",K.QUAD_STRIP="quad_strip",K.TESS="tess",K.CLOSE="close",K.OPEN="open",K.CHORD="chord",K.PIE="pie",K.PROJECT="square",K.SQUARE="butt",K.ROUND="round",K.BEVEL="bevel",K.MITER="miter",K.RGB="rgb",K.HSB="hsb",K.HSL="hsl",K.AUTO="auto",K.ALT=18,K.BACKSPACE=8,K.CONTROL=17,K.DELETE=46,K.DOWN_ARROW=40,K.ENTER=13,K.ESCAPE=27,K.LEFT_ARROW=37,K.OPTION=18,K.RETURN=13,K.RIGHT_ARROW=39,K.SHIFT=16,K.TAB=9,K.UP_ARROW=38,K.BLEND="source-over",K.REMOVE="destination-out",K.ADD="lighter",K.DARKEST="darken",K.LIGHTEST="lighten",K.DIFFERENCE="difference",K.SUBTRACT="subtract",K.EXCLUSION="exclusion",K.MULTIPLY="multiply",K.SCREEN="screen",K.REPLACE="copy",K.OVERLAY="overlay",K.HARD_LIGHT="hard-light",K.SOFT_LIGHT="soft-light",K.DODGE="color-dodge",K.BURN="color-burn",K.THRESHOLD="threshold",K.GRAY="gray",K.OPAQUE="opaque",K.INVERT="invert",K.POSTERIZE="posterize",K.DILATE="dilate",K.ERODE="erode",K.BLUR="blur",K.NORMAL="normal",K.ITALIC="italic",K.BOLD="bold",K.BOLDITALIC="bold italic",K.CHAR="CHAR",K.WORD="WORD",K._DEFAULT_TEXT_FILL="#000000",K._DEFAULT_LEADMULT=1.25,K._CTX_MIDDLE="middle",K.LINEAR="linear",K.QUADRATIC="quadratic",K.BEZIER="bezier",K.CURVE="curve",K.STROKE="stroke",K.FILL="fill",K.TEXTURE="texture",K.IMMEDIATE="immediate",K.IMAGE="image",K.NEAREST="nearest",K.REPEAT="repeat",K.CLAMP="clamp",K.MIRROR="mirror",K.FLAT="flat",K.SMOOTH="smooth",K.LANDSCAPE="landscape",K.PORTRAIT="portrait",K._DEFAULT_STROKE="#000000",K._DEFAULT_FILL="#FFFFFF",K.GRID="grid",K.AXES="axes",K.LABEL="label",K.FALLBACK="fallback",K.CONTAIN="contain",K.COVER="cover",K.UNSIGNED_BYTE="unsigned-byte",K.UNSIGNED_INT="unsigned-int",K.FLOAT="float",K.HALF_FLOAT="half-float",K.RGBA="rgba"},{}],273:[function(l,ve,K){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function A(m){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(w=l("./main"))&&w.__esModule?w:{default:w},w=function(m){if(m&&m.__esModule)return m;if(null===m||"object"!==A(m)&&"function"!=typeof m)return{default:m};var g=I();if(g&&g.has(m))return g.get(m);var x,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in m){var k;Object.prototype.hasOwnProperty.call(m,x)&&((k=S?Object.getOwnPropertyDescriptor(m,x):null)&&(k.get||k.set)?Object.defineProperty(E,x,k):E[x]=m[x])}return E.default=m,g&&g.set(m,E),E}(l("./constants"));function I(){var m;return"function"!=typeof WeakMap?null:(I=function(){return m},m=new WeakMap)}var D=[w.ARROW,w.CROSS,w.HAND,w.MOVE,w.TEXT,w.WAIT],d=(b.default.prototype._frameRate=0,b.default.prototype._lastFrameTime=window.performance.now(),b.default.prototype._targetFrameRate=60,window.print),f=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function p(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}b.default.prototype.print=function(){var m;arguments.length?(m=console).log.apply(m,arguments):f||(d(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(f=!0))},b.default.prototype.frameCount=0,b.default.prototype.deltaTime=0,b.default.prototype.focused=document.hasFocus(),b.default.prototype.cursor=function(m,g,x){var E,S="auto",k=this._curElement.elt;D.includes(m)?S=m:"string"==typeof m&&(E="",g&&x&&"number"==typeof g&&"number"==typeof x&&(E="".concat(g," ").concat(x)),S="http://"===m.substring(0,7)||"https://"===m.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(m)?"url(".concat(m,") ").concat(E,", auto"):m),k.style.cursor=S},b.default.prototype.frameRate=function(m){return b.default._validateParameters("frameRate",arguments),"number"!=typeof m||m<0?this._frameRate:(this._setProperty("_targetFrameRate",m),0===m&&this._setProperty("_frameRate",m),this)},b.default.prototype.getFrameRate=function(){return this.frameRate()},b.default.prototype.setFrameRate=function(m){return this.frameRate(m)},b.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},b.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},b.default.prototype.webglVersion=w.P2D,b.default.prototype.displayWidth=screen.width,b.default.prototype.displayHeight=screen.height,b.default.prototype.windowWidth=0,b.default.prototype.windowHeight=0,b.default.prototype._onresize=function(m){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p());var g=this._isGlobal?window:this;"function"!=typeof g.windowResized||void 0===(g=g.windowResized(m))||g||m.preventDefault()},b.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p())},b.default.prototype.width=0,b.default.prototype.height=0,b.default.prototype.fullscreen=function(m){if(b.default._validateParameters("fullscreen",arguments),void 0===m)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(m){if(m=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},b.default.prototype.pixelDensity=function(m){var g;return b.default._validateParameters("pixelDensity",arguments),"number"==typeof m?(m!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=m),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},b.default.prototype.displayDensity=function(){return window.devicePixelRatio},b.default.prototype.getURL=function(){return location.href},b.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(m){return""!==m})},b.default.prototype.getURLParams=function(){for(var m,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};null!=(m=g.exec(location.search));)m.index===g.lastIndex&&g.lastIndex++,x[m[1]]=m[2];return x},K.default=l=b.default},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(D=l("../main"))&&D.__esModule?D:{default:D};function A(d,f){f=f||console.log.bind(console),b||I(),b.some(function(h){var p;if(d.message&&null!==d.message.match("\\W?".concat(h.name,"\\W")))return p="function"===h.type?"".concat(h.name,"()"):h.name,f("Did you just try to use p5.js's ".concat(p," ").concat(h.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(w)),!0})}l("../internationalization");var b=null,I=null,w=(M.default._friendlyError=M.default._checkForUserDefinedFunctions=M.default._fesErrorMonitor=function(){},b=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),D=(I=function(){function d(h){return Object.getOwnPropertyNames(h).filter(function(p){return"_"!==p[0]&&!(p in f)&&(f[p]=!0)}).map(function(p){var m="function"==typeof h[p]?"function":p===p.toUpperCase()?"constant":"variable";return{name:p,type:m}})}var f={};(b=[].concat(d(M.default.prototype),d(l("../constants")))).sort(function(h,p){return p.name.length-h.name.length})},M.default.prototype._helpForMisusedAtTopLevelCode=A,"complete"!==document.readyState&&(window.addEventListener("error",A,!1),window.addEventListener("load",function(){window.removeEventListener("error",A,!1)})),M.default);K.default=D},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(M=l("../main"))&&M.__esModule?M:{default:M};l("../internationalization"),M.default._friendlyFileLoadError=function(){},K.default=l=M.default},{"../internationalization":281,"../main":283}],276:[function(l,ve,K){"use strict";function M(V){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(V)}function A(V){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(ge){return M(ge)}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":M(ge)})(V)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=function ne(V){return V&&V.__esModule?V:{default:V}}(l("../main"));function oe(){var V;return"function"!=typeof WeakMap?null:(oe=function(){return V},V=new WeakMap)}l("../internationalization"),function me(V){if(V&&V.__esModule)return V;if(null===V||"object"!==A(V)&&"function"!=typeof V)return{default:V};var ge=oe();if(ge&&ge.has(V))return ge.get(V);var Le,Ke,ut={},_t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Le in V)Object.prototype.hasOwnProperty.call(V,Le)&&((Ke=_t?Object.getOwnPropertyDescriptor(V,Le):null)&&(Ke.get||Ke.set)?Object.defineProperty(ut,Le,Ke):ut[Le]=V[Le]);return ut.default=V,ge&&ge.set(V,ut),ut}(l("../constants")),b.default._fesCodeReader=function(){},K.default=b.default},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(l,ve,K){"use strict";function M(){var A=/(^|@)\S+:\d+/,b=/^\s*at .*(\S+:\d+|\(native\))/m,w=/^(eval@)?(\[native code])?$/;return{parse:function(I){return void 0!==I.stacktrace||void 0!==I["opera#sourceloc"]?this.parseOpera(I):I.stack&&I.stack.match(b)?this.parseV8OrIE(I):I.stack?this.parseFFOrSafari(I):void 0},extractLocation:function(I){return-1===I.indexOf(":")?[I]:[(I=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(I.replace(/[()]/g,"")))[1],I[2]||void 0,I[3]||void 0]},parseV8OrIE:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(b)},this).map(function(D){var f=(d=(D=-1<D.indexOf("(eval ")?D.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):D).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),d=(d=f?d.replace(f[0],""):d).split(/\s+/).slice(1);return f=this.extractLocation(f?f[1]:d.pop()),{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseFFOrSafari:function(I){return I.stack.split("\n").filter(function(D){return!D.match(w)},this).map(function(D){var d,f;return-1===(D=-1<D.indexOf(" > eval")?D.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):D).indexOf("@")&&-1===D.indexOf(":")?{functionName:D}:{functionName:(f=D.match(d=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(D.replace(d,"")))[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseOpera:function(I){return!I.stacktrace||-1<I.message.indexOf("\n")&&I.message.split("\n").length>I.stacktrace.split("\n").length?this.parseOpera9(I):I.stack?this.parseOpera11(I):this.parseOpera10(I)},parseOpera9:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)/i,d=I.message.split("\n"),f=[],h=2,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera10:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=I.stacktrace.split("\n"),f=[],h=0,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera11:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(A)&&!D.match(/^Error created at/)},this).map(function(D){var d,h=D.split("@"),f=this.extractLocation(h.pop());return{functionName:(h=h.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(d=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):d)||"[arguments not available]"===d?void 0:d.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)}}}l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../main"))&&l.__esModule?l:{default:l}).default._getErrorStackParser=function(){return new M},K.default=l=l.default},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(l,ve,K){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(A=l("../main"))&&A.__esModule?A:{default:A};function b(){var I;return"function"!=typeof WeakMap?null:(b=function(){return I},I=new WeakMap)}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}(function(I){if(!(I&&I.__esModule||null===I||"object"!==w(I)&&"function"!=typeof I)){var D=b();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}f.default=I,D&&D.set(I,f)}})(l("../constants")),l("../internationalization"),A.default._validateParameters=A.default._clearValidateParamsCache=function(){},K.default=l=A.default},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(l,ve,K){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}function A(I){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=function(I){if(I&&I.__esModule)return I;if(null===I||"object"!==A(I)&&"function"!=typeof I)return{default:I};var D=w();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}return f.default=I,D&&D.set(I,f),f}(l("./constants"));function w(){var I;return"function"!=typeof WeakMap?null:(w=function(){return I},I=new WeakMap)}K.default={modeAdjust:function(I,D,d,f,h){var p;return h===b.CORNER?p={x:I,y:D,w:Math.abs(d),h:Math.abs(f)}:h===b.CORNERS?p={x:Math.min(I,d),y:Math.min(D,f),w:Math.abs(d-I),h:Math.abs(f-D)}:h===b.RADIUS?p={x:I-(d=Math.abs(d)),y:D-(f=Math.abs(f)),w:2*d,h:2*f}:h===b.CENTER&&(p={x:I-.5*(d=Math.abs(d)),y:D-.5*(f=Math.abs(f)),w:d,h:f}),p}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(l,ve,K){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(A=l("../core/main"))&&A.__esModule?A:{default:A};l("./internationalization");var A=Promise.resolve();Promise.all([new Promise(function(b,w){"complete"===document.readyState?b():window.addEventListener("load",b,!1)}),A]).then(function(){var b;void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(b=new Event("p5Ready"),window.dispatchEvent(b),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!M.default.instance&&new M.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(l,ve,K){"use strict";l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.setTranslatorLanguage=K.currentTranslatorLanguage=K.availableTranslatorLanguages=K.initialize=K.translator=void 0;var M,b=I(l("i18next")),w=I(l("i18next-browser-languagedetector"));function I(f){return f&&f.__esModule?f:{default:f}}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var d=function(){function f(g,x){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(g,x)}var h,p;return h=f,(p=[{key:"fetchWithTimeout",value:function(g,x){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(g,x),new Promise(function(S,k){return setTimeout(function(){return k(new Error("timeout"))},E)})])}},{key:"init",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=g,this.options=x}},{key:"read",value:function(g,x,E){var S=this.options.loadPath;g===this.options.fallback?E(null,M[g][x]):undefined.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:x}),this.loadUrl(S,E)):E("Not found",!1)}},{key:"loadUrl",value:function(g,x){this.fetchWithTimeout(g).then(function(E){if(E.ok)return E.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(E){return x(null,E)}).catch(x)}}])&&D(h.prototype,p),f}();d.type="backend",K.translator=function(f,h){console.debug("p5.js translator called before translations were loaded"),b.default.t(f,h)},K.initialize=function(){return b.default.use(w.default).use(d).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:M}).then(function(f){K.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},K.availableTranslatorLanguages=function(){return b.default.languages},K.currentTranslatorLanguage=function(f){return b.default.language},K.setTranslatorLanguage=function(f){return b.default.changeLanguage(f||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},l.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},l.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},l.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},K.default=l=l.default},{"./main":283}],283:[function(l,ve,K){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function A(f){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,l("./shim");var b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==A(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var D,d=function(){function f(g,S){var E=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},S=Object.getOwnPropertyNames(f.prototype._registeredMethods);var k=!0,X=!1,Y=void 0;try{for(var G,z=S[Symbol.iterator]();!(k=(G=z.next()).done);k=!0){var ee=G.value;this._registeredMethods[ee]=f.prototype._registeredMethods[ee].slice()}}catch(J){X=!0,Y=J}finally{try{k||null==z.return||z.return()}finally{if(X)throw Y}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),f.prototype.callRegisteredHooksFor=function(J){var he=this||f.prototype,Ce=this._isGlobal?window:this;if(he._registeredMethods.hasOwnProperty(J)){he=he._registeredMethods[J];var et=!0,le=void(J=!1);try{for(var V,ge=he[Symbol.iterator]();!(et=(V=ge.next()).done);et=!0){var Le=V.value;"function"==typeof Le&&Le.call(Ce)}}catch(_t){J=!0,le=_t}finally{try{et||null==ge.return||ge.return()}finally{if(J)throw le}}}},this._start=function(){E._userNode&&"string"==typeof E._userNode&&(E._userNode=document.getElementById(E._userNode));var J=E._isGlobal?window:E;if(J.preload){E.callRegisteredHooksFor("beforePreload");var he,Ce=document.getElementById(E._loadingScreenId),et=(Ce||((Ce=document.createElement("div")).innerHTML="Loading...",Ce.style.position="absolute",Ce.id=E._loadingScreenId,(E._userNode||document.body).appendChild(Ce)),E._preloadMethods);for(he in et){et[he]=et[he]||f;var le=et[he];le!==f.prototype&&le!==f||(E._isGlobal&&(window[he]=E._wrapPreload(E,he)),le=E),E._registeredPreloadMethods[he]=le[he],le[he]=E._wrapPreload(le,he)}J.preload(),E._runIfPreloadsAreDone()}else E._setup(),E._recording||E._draw()},this._runIfPreloadsAreDone=function(){var J,he=this._isGlobal?window:this;0===he._preloadCount&&((J=document.getElementById(he._loadingScreenId))&&J.parentNode.removeChild(J),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),he._setup(),this._recording||he._draw()))},this._decrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||"function"!=typeof J.preload||(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,he){var Ce=this;return function(){Ce._incrementPreload();for(var et=arguments.length,le=new Array(et),V=0;V<et;V++)le[V]=arguments[V];return Ce._registeredPreloadMethods[he].apply(J,le)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){E.callRegisteredHooksFor("beforeSetup"),E.createCanvas(E._defaultCanvasSize.width,E._defaultCanvasSize.height,"p2d");var J=E._isGlobal?window:E;if("function"==typeof J.preload)for(var he in E._preloadMethods)J[he]=E._preloadMethods[he][he],J[he]&&E&&(J[he]=J[he].bind(E));E._millisStart=window.performance.now(),J._preloadDone=!0,"function"==typeof J.setup&&J.setup();var Ce=document.getElementsByTagName("canvas"),et=!0,le=!1,V=void 0;try{for(var ge,Le=Ce[Symbol.iterator]();!(et=(ge=Le.next()).done);et=!0){var Ke=ge.value;"true"===Ke.dataset.hidden&&(Ke.style.visibility="",delete Ke.dataset.hidden)}}catch(ut){le=!0,V=ut}finally{try{et||null==Le.return||Le.return()}finally{if(le)throw V}}E._lastTargetFrameTime=window.performance.now(),E._lastRealFrameTime=window.performance.now(),E._setupDone=!0,(E._accessibleOutputs.grid||E._accessibleOutputs.text)&&E._updateAccsOutput(),E.callRegisteredHooksFor("afterSetup")},this._draw=function(he){he=he||window.performance.now();var et=1e3/E._targetFrameRate;(!E._loop||et-5<=he-E._lastTargetFrameTime)&&(E.deltaTime=he-E._lastRealFrameTime,E._setProperty("deltaTime",E.deltaTime),E._frameRate=1e3/E.deltaTime,E.redraw(),E._lastTargetFrameTime=Math.max(E._lastTargetFrameTime+et,he),E._lastRealFrameTime=he,void 0!==E._updateMouseCoords&&(E._updateMouseCoords(),E._setProperty("movedX",0),E._setProperty("movedY",0))),E._loop&&(E._requestAnimId=window.requestAnimationFrame(E._draw))},this._setProperty=function(J,he){E[J]=he,E._isGlobal&&(window[J]=he)},this.remove=function(){if(E._startListener&&window.removeEventListener("load",E._startListener,!1),(J=document.getElementById(E._loadingScreenId))&&(J.parentNode.removeChild(J),E._incrementPreload()),E._curElement){for(var he in E._loop=!1,E._requestAnimId&&window.cancelAnimationFrame(E._requestAnimId),E._events)window.removeEventListener(he,E._events[he]);var Ce=!0,J=!1,et=void 0;try{for(var le,V=E._elements[Symbol.iterator]();!(Ce=(le=V.next()).done);Ce=!0){var ge,Le=le.value;for(ge in Le.elt&&Le.elt.parentNode&&Le.elt.parentNode.removeChild(Le.elt),Le._events)Le.elt.removeEventListener(ge,Le._events[ge])}}catch(dt){J=!0,et=dt}finally{try{Ce||null==V.return||V.return()}finally{if(J)throw et}}var Ke=E;E._registeredMethods.remove.forEach(function(dt){void 0!==dt&&dt.call(Ke)})}if(E._isGlobal){for(var ut in f.prototype)try{delete window[ut]}catch{window[ut]=void 0}for(var _t in E)if(E.hasOwnProperty(_t))try{delete window[_t]}catch{window[_t]=void 0}f.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(J){void 0!==J&&J.call(this)},this),this._setupPromisePreloads();var H,re,Z=this._createFriendlyGlobalFunctionBinder();if(g)g(this),f._checkForUserDefinedFunctions(this);else{for(var _e in this._isGlobal=!0,f.instance=this,f.prototype)"function"==typeof f.prototype[_e]?(H=_e.substring(2),this._events.hasOwnProperty(H)||(Math.hasOwnProperty(_e)&&Math[_e]===f.prototype[_e]?Z(_e,f.prototype[_e]):Z(_e,f.prototype[_e].bind(this)))):Z(_e,f.prototype[_e]);for(var xe in this)this.hasOwnProperty(xe)&&Z(xe,this[xe])}for(re in this._events){var oe=this["_on".concat(re)];oe&&(oe=oe.bind(this),window.addEventListener(re,oe,{passive:!1}),this._events[re]=oe)}function me(){E._setProperty("focused",!0)}function ne(){E._setProperty("focused",!1)}window.addEventListener("focus",me),window.addEventListener("blur",ne),this.registerMethod("remove",function(){window.removeEventListener("focus",me),window.removeEventListener("blur",ne)}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,p;return h=f,(p=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=b.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,x){f.prototype._preloadMethods.hasOwnProperty(g)||(f.prototype._preloadMethods[g]=x)}},{key:"registerMethod",value:function(g,x){var E=this||f.prototype;E._registeredMethods.hasOwnProperty(g)||(E._registeredMethods[g]=[]),E._registeredMethods[g].push(x)}},{key:"unregisterMethod",value:function(g,x){var E=this||f.prototype;if(E._registeredMethods.hasOwnProperty(g)){for(var S=E._registeredMethods[g],k=[],X=0;X<S.length;X++)S[X]===x&&k.push(X);for(var Y=k.length-1;0<=Y;Y--)S.splice(k[Y],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},x=g.globalObject||window;return g.log||console.log.bind(console),function(E,S){x[E]=S}}}])&&I(h.prototype,p),f}();for(D in d.instance=null,d.disableFriendlyErrors=!1,b)d.prototype[D]=b[D];d.VERSION=b.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={},K.default=d},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};function A(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Element=function(){function b(d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.elt=d,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var w,I,D;return w=b,D=[{key:"_adjustListener",value:function(d,f,h){return!1===f?M.default.Element._detachListener(d,h):M.default.Element._attachListener(d,f,h),this}},{key:"_attachListener",value:function(d,f,h){h._events[d]&&M.default.Element._detachListener(d,h),f=f.bind(h),h.elt.addEventListener(d,f,!1),h._events[d]=f}},{key:"_detachListener",value:function(d,f){f.elt.removeEventListener(d,f._events[d],!1),f._events[d]=null}}],(I=[{key:"parent",value:function(d){return void 0===d?this.elt.parentNode:("string"==typeof d?("#"===d[0]&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof M.default.Element&&(d=d.elt),d.appendChild(this.elt),this)}},{key:"id",value:function(d){return void 0===d?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(d){return void 0===d?this.elt.className:(this.elt.className=d,this)}},{key:"mousePressed",value:function(d){return M.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),d.call(this,f)},this),this}},{key:"doubleClicked",value:function(d){return M.default.Element._adjustListener("dblclick",d,this),this}},{key:"mouseWheel",value:function(d){return M.default.Element._adjustListener("wheel",d,this),this}},{key:"mouseReleased",value:function(d){return M.default.Element._adjustListener("mouseup",d,this),this}},{key:"mouseClicked",value:function(d){return M.default.Element._adjustListener("click",d,this),this}},{key:"mouseMoved",value:function(d){return M.default.Element._adjustListener("mousemove",d,this),this}},{key:"mouseOver",value:function(d){return M.default.Element._adjustListener("mouseover",d,this),this}},{key:"mouseOut",value:function(d){return M.default.Element._adjustListener("mouseout",d,this),this}},{key:"touchStarted",value:function(d){return M.default.Element._adjustListener("touchstart",d,this),this}},{key:"touchMoved",value:function(d){return M.default.Element._adjustListener("touchmove",d,this),this}},{key:"touchEnded",value:function(d){return M.default.Element._adjustListener("touchend",d,this),this}},{key:"dragOver",value:function(d){return M.default.Element._adjustListener("dragover",d,this),this}},{key:"dragLeave",value:function(d){return M.default.Element._adjustListener("dragleave",d,this),this}},{key:"_setProperty",value:function(d,f){this[d]=f}}])&&A(w.prototype,I),D&&A(w,D),b}(),K.default=l=M.default.Element},{"./main":283}],285:[function(l,ve,K){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function A(x){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(g=l("./main"))&&g.__esModule?g:{default:g},w=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==A(x)&&"function"!=typeof x)return{default:x};var E=I();if(E&&E.has(x))return E.get(x);var S,k={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var Y;Object.prototype.hasOwnProperty.call(x,S)&&((Y=X?Object.getOwnPropertyDescriptor(x,S):null)&&(Y.get||Y.set)?Object.defineProperty(k,S,Y):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(l("./constants"));function I(){var x;return"function"!=typeof WeakMap?null:(I=function(){return x},x=new WeakMap)}function D(x,E){for(var S=0;S<E.length;S++){var k=E[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(x,E)}function h(x,E){return!E||"object"!==A(E)&&"function"!=typeof E?p(x):E}function p(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function m(x){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}b.default.Graphics=function(x){var E=X;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var k=function f(x){return function(){var E,S=m(x);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=m(this).constructor,Reflect.construct(S,arguments,E)):S.apply(this,arguments))}}(X);function X(Y,G,xe,ee,H){var re;if(!(this instanceof X))throw new TypeError("Cannot call a class as a function");_e=H||document.createElement("canvas"),(re=k.call(this,_e,ee)).canvas=_e;var Z,_e=xe||w.P2D;for(Z in xe=ee._userNode||document.body,H||xe.appendChild(re.canvas),b.default.prototype)re[Z]||(re[Z]="function"==typeof b.default.prototype[Z]?b.default.prototype[Z].bind(p(re)):b.default.prototype[Z]);return b.default.prototype._initializeInstanceVariables.apply(p(re)),re.width=Y,re.height=G,re._pixelDensity=ee._pixelDensity,_e===w.WEBGL?(re._renderer=new b.default.RendererGL(re.canvas,p(re),!1),Y=(H=re._renderer._adjustDimensions(Y,G)).adjustedWidth,G=H.adjustedHeight):re._renderer=new b.default.Renderer2D(re.canvas,p(re),!1),ee._elements.push(p(re)),Object.defineProperty(p(re),"deltaTime",{get:function(){return this._pInst.deltaTime}}),re._renderer.resize(Y,G),re._renderer._applyDefaults(),h(re,p(re))}return E=X,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var Y,G=this._pInst._elements.indexOf(this);for(Y in-1!==G&&this._pInst._elements.splice(G,1),this._events)this.elt.removeEventListener(Y,this._events[Y]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(Y){return new b.default.Framebuffer(this,Y)}}])&&D(E.prototype,x),X}(b.default.Element);var g=b.default.Graphics;K.default=g},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(l,ve,K){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(m=l("./main"))&&m.__esModule?m:{default:m},b=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==I(x)&&"function"!=typeof x)return{default:x};var E=w();if(E&&E.has(x))return E.get(x);var S,k={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var Y;Object.prototype.hasOwnProperty.call(x,S)&&((Y=X?Object.getOwnPropertyDescriptor(x,S):null)&&(Y.get||Y.set)?Object.defineProperty(k,S,Y):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(l("../core/constants"));function w(){var x;return"function"!=typeof WeakMap?null:(w=function(){return x},x=new WeakMap)}function I(x){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}function D(x,E){for(var S=0;S<E.length;S++){var k=E[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(x,E)}function h(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}var m=function(x){var E=X;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var k=function f(x){return function(){var E,S,k=p(x);return E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=p(this).constructor,Reflect.construct(k,arguments,E)):k.apply(this,arguments),k=this,!(S=E)||"object"!==I(S)&&"function"!=typeof S?h(k):S}}(X);function X(Y,G,z){var ee;if(this instanceof X)return(ee=k.call(this,Y,G)).canvas=Y,ee._pixelsState=G,z?(ee._isMainCanvas=!0,ee._pInst._setProperty("_curElement",h(ee)),ee._pInst._setProperty("canvas",ee.canvas),ee._pInst._setProperty("width",ee.width),ee._pInst._setProperty("height",ee.height)):(ee.canvas.style.display="none",ee._styles=[]),ee._clipping=!1,ee._clipInvert=!1,ee._textSize=12,ee._textLeading=15,ee._textFont="sans-serif",ee._textStyle=b.NORMAL,ee._textAscent=null,ee._textDescent=null,ee._textAlign=b.LEFT,ee._textBaseline=b.BASELINE,ee._textWrap=b.WORD,ee._rectMode=b.CORNER,ee._ellipseMode=b.CENTER,ee._curveTightness=0,ee._imageMode=b.CORNER,ee._tint=null,ee._doStroke=!0,ee._doFill=!0,ee._strokeSet=!1,ee._fillSet=!1,ee._leadingSet=!1,ee._pushPopDepth=0,ee;throw new TypeError("Cannot call a class as a function")}return E=X,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(Y){this._pushPopDepth--,Y.properties&&Object.assign(this,Y.properties)}},{key:"beginClip",value:function(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=Y.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(Y,G){this.width=Y,this.height=G,this.elt.width=Y*this._pInst._pixelDensity,this.elt.height=G*this._pInst._pixelDensity,this.elt.style.width="".concat(Y,"px"),this.elt.style.height="".concat(G,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(Y,G,z,ee){var H=this._pixelsState,re=H._pixelDensity,Z=this.canvas;if(void 0===Y&&void 0===G)Y=G=0,z=H.width,ee=H.height;else if(Y*=re,G*=re,void 0===z&&void 0===ee)return Y<0||G<0||Y>=Z.width||G>=Z.height?[0,0,0,0]:this._getPixel(Y,G);return(H=new A.default.Image(z*re,ee*re)).pixelDensity(re),H.canvas.getContext("2d").drawImage(Z,Y,G,z*re,ee*re,0,0,z*re,ee*re),H}},{key:"textLeading",value:function(Y){return"number"==typeof Y?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",Y),this._pInst):this._textLeading}},{key:"textStyle",value:function(Y){return Y?(Y!==b.NORMAL&&Y!==b.ITALIC&&Y!==b.BOLD&&Y!==b.BOLDITALIC||this._setProperty("_textStyle",Y),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(Y,G){return void 0!==Y?(this._setProperty("_textAlign",Y),void 0!==G&&this._setProperty("_textBaseline",G),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(Y){return this._setProperty("_textWrap",Y),this._textWrap}},{key:"text",value:function(Y,G,z,ee,H){var re,Z,_e,xe,oe=this._pInst,me=this._textWrap,ne=Number.MAX_VALUE,J=z;if((this._doFill||this._doStroke)&&void 0!==Y){if(re=(Y=(Y="string"!=typeof Y?Y.toString():Y).replace(/(\t)/g,"  ")).split("\n"),void 0!==ee){switch(this._rectMode===b.CENTER&&(G-=ee/2),this._textAlign){case b.CENTER:G+=ee/2;break;case b.RIGHT:G+=ee}if(void 0!==H){this._rectMode===b.CENTER&&(z-=H/2,J-=H/2),Y=z;var he=oe.textAscent();switch(this._textBaseline){case b.BOTTOM:xe=z+H,z=Math.max(xe,z),J+=he;break;case b.CENTER:xe=z+H/2,z=Math.max(xe,z),J+=he/2}ne=z+H-he,this._textBaseline===b.CENTER&&(ne=Y+H-he/2)}else this._textBaseline!==b.BOTTOM&&this._textBaseline!==b.CENTER||(J=z-(Y=oe.textSize()*this._textLeading)/2,ne=z+Y/2);if(me===b.WORD){for(var Ce=[],et=0;et<re.length;et++){for(var le="",V=re[et].split(" "),ge=0;ge<V.length;ge++)Z="".concat(le+V[ge])+" ",le=ee<(_e=this.textWidth(Z))&&0<le.length?(Ce.push(le),"".concat(V[ge])+" "):Z;Ce.push(le)}var Le=0;this._textBaseline===b.CENTER?Le=(Ce.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Le=(Ce.length-1)*oe.textLeading());for(var Ke=0;Ke<re.length;Ke++){le="",V=re[Ke].split(" ");for(var ut=0;ut<V.length;ut++)Z="".concat(le+V[ut])+" ",ee<(_e=this.textWidth(Z))&&0<le.length?(this._renderText(oe,le.trim(),G,z-Le,ne,J),le="".concat(V[ut])+" ",z+=oe.textLeading()):le=Z;this._renderText(oe,le.trim(),G,z-Le,ne,J),z+=oe.textLeading()}}else{for(var _t=[],Nt=0;Nt<re.length;Nt++)for(var dt=re[Nt].split(le=""),Rt=0;Rt<dt.length;Rt++)Z="".concat(le+dt[Rt]),(_e=this.textWidth(Z))<=ee?le+=dt[Rt]:ee<_e&&0<le.length&&(_t.push(le),le="".concat(dt[Rt]));_t.push(le);var Bt=0;this._textBaseline===b.CENTER?Bt=(_t.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Bt=(_t.length-1)*oe.textLeading());for(var lt=0;lt<re.length;lt++){dt=re[lt].split(le="");for(var It=0;It<dt.length;It++)Z="".concat(le+dt[It]),(_e=this.textWidth(Z))<=ee?le+=dt[It]:ee<_e&&0<le.length&&(this._renderText(oe,le.trim(),G,z-Bt,ne,J),z+=oe.textLeading(),le="".concat(dt[It]))}this._renderText(oe,le.trim(),G,z-Bt,ne,J),z+=oe.textLeading()}}else{var Tt=0;this._textBaseline===b.CENTER?Tt=(re.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Tt=(re.length-1)*oe.textLeading());for(var Ot=0;Ot<re.length;Ot++)this._renderText(oe,re[Ot],G,z-Tt,ne,J-Tt),z+=oe.textLeading()}return oe}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===I(Y)&&Y.font&&Y.font.supported}},{key:"_updateTextMetrics",value:function(){var Y,G,z,ee,H,re;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((Y=document.createElement("span")).style.fontFamily=this._textFont,Y.style.fontSize="".concat(this._textSize,"px"),Y.innerHTML="ABCjgq|",(re=document.createElement("div")).style.display="inline-block",re.style.width="1px",re.style.height="0px",(G=document.createElement("div")).appendChild(Y),G.appendChild(re),G.style.height="0px",G.style.overflow="hidden",document.body.appendChild(G),re.style.verticalAlign="baseline",ee=g(re),H=g(Y),z=ee[1]-H[1],re.style.verticalAlign="bottom",ee=g(re),H=g(Y),re=ee[1]-H[1]-z,document.body.removeChild(G),this._setProperty("_textAscent",z),this._setProperty("_textDescent",re)),this}}])&&D(E.prototype,x),X}(A.default.Element);function g(x){var E=0,S=0;if(x.offsetParent)for(;E+=x.offsetLeft,S+=x.offsetTop,x=x.offsetParent;);else E+=x.offsetLeft,S+=x.offsetTop;return[E,S]}m.prototype.textSize=function(x){return"number"==typeof x?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*b._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},A.default.Renderer=m,K.default=l=A.default.Renderer},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(x,ve,K){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function A(E){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(g=x("./main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==A(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var k,X={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=Y?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(X,k,G):X[k]=E[k])}return X.default=E,S&&S.set(E,X),X}(x("./constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){for(var k=0;k<S.length;k++){var X=S[k];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(E,X.key,X)}}function d(E,S,k){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,Y,G){if(z=function(ee,H){for(;!Object.prototype.hasOwnProperty.call(ee,H)&&null!==(ee=p(ee)););return ee}(z,Y))return(z=Object.getOwnPropertyDescriptor(z,Y)).get?z.get.call(G):z.value})(E,S,k||E)}function f(E,S){return(f=Object.setPrototypeOf||function(k,X){return k.__proto__=X,k})(E,S)}function p(E){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}x("./p5.Renderer");var m="rgba(0,0,0,0)",g=function(E){var S=Y;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&f(S,E);var X=function h(E){return function(){var S,k=p(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=p(this).constructor,Reflect.construct(k,arguments,S)):k.apply(this,arguments),k=this,!S||"object"!==A(S)&&"function"!=typeof S){if(void 0!==k)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(Y);function Y(G,z,ee){if(this instanceof Y)return(G=X.call(this,G,z,ee)).drawingContext=G.canvas.getContext("2d"),G._pInst._setProperty("drawingContext",G.drawingContext),G;throw new TypeError("Cannot call a class as a function")}return S=Y,(E=[{key:"getFilterGraphicsLayer",value:function(){return this.filterGraphicsLayer||(this.filterGraphicsLayer=new b.default.Graphics(this.width,this.height,w.WEBGL,(this._pInst instanceof b.default.Graphics?this._pInst:this)._pInst)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=w.BLEND,this._setFill(w._DEFAULT_FILL),this._setStroke(w._DEFAULT_STROKE),this.drawingContext.lineCap=w.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(G,z){d(p(Y.prototype),"resize",this).call(this,G,z),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var G,z;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof b.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(G=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(G,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(G=this._getFill(),z=(z=this._pInst).color.apply(z,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(z.levels),z=z.toString(),this._setFill(z),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(G),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setFill(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",G.levels)}},{key:"stroke",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setStroke(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",G.levels)}},{key:"erase",value:function(G,z){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,G).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,z).toString(),this.drawingContext.strokeStyle=G,z=this._cachedBlendMode,this.blendMode(w.REMOVE),this._cachedBlendMode=z,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(p(Y.prototype),"beginClip",this).call(this,G),this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=G,G=this._cachedBlendMode,this.blendMode(w.BLEND),this._cachedBlendMode=G,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),d(p(Y.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(G,z,ee,H,re,Z,_e,xe,oe){G.gifProperties&&G._animateGif(this._pInst);try{b.default.MediaElement&&G instanceof b.default.MediaElement&&G._ensureCanvas();var me=(me=this._tint&&G.canvas?this._getTintedImageCanvas(G):me)||G.canvas||G.elt,ne=1;G.width&&0<G.width&&(ne=me.width/G.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(me,ne*z,ne*ee,ne*H,ne*re,Z,_e,xe,oe),this._isErasing&&this._pInst.erase()}catch(J){if("NS_ERROR_NOT_AVAILABLE"!==J.name)throw J}}},{key:"_getTintedImageCanvas",value:function(G){if(!G.canvas)return G;G.tintCanvas||(G.tintCanvas=document.createElement("canvas")),G.tintCanvas.width!==G.canvas.width&&(G.tintCanvas.width=G.canvas.width),G.tintCanvas.height!==G.canvas.height&&(G.tintCanvas.height=G.canvas.height);var z=G.tintCanvas.getContext("2d");return z.save(),z.clearRect(0,0,G.canvas.width,G.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(z.drawImage(G.canvas,0,0),z.globalCompositeOperation="luminosity",z.drawImage(G.canvas,0,0),z.globalCompositeOperation="color",z.drawImage(G.canvas,0,0),z.globalCompositeOperation="multiply",z.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),z.fillRect(0,0,G.canvas.width,G.canvas.height),z.globalCompositeOperation="destination-in"),z.globalAlpha=this._tint[3]/255,z.drawImage(G.canvas,0,0),z.restore(),G.tintCanvas}},{key:"blendMode",value:function(G){if(G===w.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(G!==w.BLEND&&G!==w.REMOVE&&G!==w.DARKEST&&G!==w.LIGHTEST&&G!==w.DIFFERENCE&&G!==w.MULTIPLY&&G!==w.EXCLUSION&&G!==w.SCREEN&&G!==w.REPLACE&&G!==w.OVERLAY&&G!==w.HARD_LIGHT&&G!==w.SOFT_LIGHT&&G!==w.DODGE&&G!==w.BURN&&G!==w.ADD)throw new Error("Mode ".concat(G," not recognized."));this._cachedBlendMode=G,this.drawingContext.globalCompositeOperation=G}}},{key:"blend",value:function(){for(var G=this.drawingContext.globalCompositeOperation,z=arguments.length,ee=new Array(z),H=0;H<z;H++)ee[H]=arguments[H];var re=ee[ee.length-1],Z=Array.prototype.slice.call(ee,0,ee.length-1);this.drawingContext.globalCompositeOperation=re,b.default.prototype.copy.apply(this,Z),this.drawingContext.globalCompositeOperation=G}},{key:"_getPixel",value:function(G,z){return[(G=this.drawingContext.getImageData(G,z,1,1).data)[0],G[1],G[2],G[3]]}},{key:"loadPixels",value:function(){var z,G=this._pixelsState,ee=this.drawingContext.getImageData(0,0,ee=this.width*(z=G._pixelDensity),z*=this.height);G._setProperty("imageData",ee),G._setProperty("pixels",ee.data)}},{key:"set",value:function(G,z,ee){G=Math.floor(G),z=Math.floor(z);var H=this._pixelsState;if(ee instanceof b.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(H._pixelDensity,H._pixelDensity),this.drawingContext.clearRect(G,z,ee.width,ee.height),this.drawingContext.drawImage(ee.canvas,G,z),this.drawingContext.restore();else{var re=0,Z=0,_e=0,xe=0,oe=4*(z*H._pixelDensity*(this.width*H._pixelDensity)+G*H._pixelDensity);if(H.imageData||H.loadPixels(),"number"==typeof ee)oe<H.pixels.length&&(_e=Z=re=ee,xe=255);else if(Array.isArray(ee)){if(ee.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");oe<H.pixels.length&&(re=ee[0],Z=ee[1],_e=ee[2],xe=ee[3])}else ee instanceof b.default.Color&&oe<H.pixels.length&&(re=ee.levels[0],Z=ee.levels[1],_e=ee.levels[2],xe=ee.levels[3]);for(var me=0;me<H._pixelDensity;me++)for(var ne=0;ne<H._pixelDensity;ne++)H.pixels[oe=4*((z*H._pixelDensity+ne)*this.width*H._pixelDensity+(G*H._pixelDensity+me))]=re,H.pixels[oe+1]=Z,H.pixels[oe+2]=_e,H.pixels[oe+3]=xe}}},{key:"updatePixels",value:function(G,z,ee,H){var re=this._pixelsState,Z=re._pixelDensity;void 0===G&&void 0===z&&void 0===ee&&void 0===H&&(z=G=0,ee=this.width,H=this.height),G*=Z,z*=Z,ee*=Z,H*=Z,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=re.imageData),this.drawingContext.putImageData(re.imageData,0,0,G,z,ee,H)}},{key:"arc",value:function(oe,me,ne,J,re,Z,_e){var xe=this.drawingContext,he=(oe+=ne/2,me+=J/2,ne/=2,J/=2,!(_e===w.CHORD||_e===w.OPEN||(Z-re)%w.TWO_PI==0));return this._doFill&&(this._clipping||xe.beginPath(),xe.ellipse(oe,me,ne,J,0,re,Z),he&&xe.lineTo(oe,me),xe.closePath(),this._clipping||xe.fill()),this._doStroke&&(this._clipping||xe.beginPath(),xe.ellipse(oe,me,ne,J,0,re,Z),_e===w.PIE&&he&&xe.lineTo(oe,me),_e!==w.PIE&&_e!==w.CHORD||xe.closePath(),this._clipping||xe.stroke()),this}},{key:"ellipse",value:function(xe){var z=this.drawingContext,ee=this._doFill,H=this._doStroke,re=parseFloat(xe[0]),Z=parseFloat(xe[1]),_e=parseFloat(xe[2]);if(xe=parseFloat(xe[3]),ee&&!H){if(this._getFill()===m)return this}else if(!ee&&H&&this._getStroke()===m)return this;re+=_e/2,Z+=xe/2,_e/=2,xe/=2,this._clipping||z.beginPath(),z.ellipse(re,Z,_e,xe,0,0,2*Math.PI),z.closePath(),!this._clipping&&ee&&z.fill(),!this._clipping&&H&&z.stroke()}},{key:"line",value:function(G,z,ee,H){var re=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(this._clipping||re.beginPath(),re.moveTo(G,z),re.lineTo(ee,H),re.stroke()),this}},{key:"point",value:function(G,z){var ee,H,re=this.drawingContext;return this._doStroke&&this._getStroke()!==m?(ee=this._getStroke(),H=this._getFill(),this._clipping||this._setFill(ee),this._clipping||re.beginPath(),re.arc(G,z,re.lineWidth/2,0,w.TWO_PI,!1),void(this._clipping||(re.fill(),this._setFill(H)))):this}},{key:"quad",value:function(G,z,ee,H,re,Z,_e,xe){var oe=this.drawingContext,me=this._doFill,ne=this._doStroke;if(me&&!ne){if(this._getFill()===m)return this}else if(!me&&ne&&this._getStroke()===m)return this;return this._clipping||oe.beginPath(),oe.moveTo(G,z),oe.lineTo(ee,H),oe.lineTo(re,Z),oe.lineTo(_e,xe),oe.closePath(),!this._clipping&&me&&oe.fill(),!this._clipping&&ne&&oe.stroke(),this}},{key:"rect",value:function(ne){var z,ee,H=ne[0],re=ne[1],Z=ne[2],_e=ne[3],xe=ne[4],oe=ne[5],me=ne[6],J=(ne=ne[7],this.drawingContext),he=this._doFill,Ce=this._doStroke;if(he&&!Ce){if(this._getFill()===m)return this}else if(!he&&Ce&&this._getStroke()===m)return this;return this._clipping||J.beginPath(),void 0===xe?J.rect(H,re,Z,_e):(void 0===oe&&(oe=xe),void 0===me&&(me=oe),void 0===ne&&(ne=me),Ce=(he=Math.abs(Z))/2,ee=(z=Math.abs(_e))/2,J.roundRect(H,re,Z,_e,[xe=z<2*(xe=he<2*xe?Ce:xe)?ee:xe,oe=z<2*(oe=he<2*oe?Ce:oe)?ee:oe,me=z<2*(me=he<2*me?Ce:me)?ee:me,ne=z<2*(ne=he<2*ne?Ce:ne)?ee:ne])),!this._clipping&&this._doFill&&J.fill(),!this._clipping&&this._doStroke&&J.stroke(),this}},{key:"triangle",value:function(me){var z=this.drawingContext,ee=this._doFill,H=this._doStroke,re=me[0],Z=me[1],_e=me[2],xe=me[3],oe=me[4];if(me=me[5],ee&&!H){if(this._getFill()===m)return this}else if(!ee&&H&&this._getStroke()===m)return this;this._clipping||z.beginPath(),z.moveTo(re,Z),z.lineTo(_e,xe),z.lineTo(oe,me),z.closePath(),!this._clipping&&ee&&z.fill(),!this._clipping&&H&&z.stroke()}},{key:"endShape",value:function(G,z,ee,H,re,Z,_e){if(0!==z.length&&(this._doStroke||this._doFill)){var xe,oe,me,ne=G===w.CLOSE,J=(ne&&!Z&&z.push(z[0]),z.length);if(ee&&null===_e){if(3<J){var he=[],Ce=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(z[1][0],z[1][1]),oe=1;oe+2<J;oe++)he[0]=[(xe=z[oe])[0],xe[1]],he[1]=[xe[0]+(Ce*z[oe+1][0]-Ce*z[oe-1][0])/6,xe[1]+(Ce*z[oe+1][1]-Ce*z[oe-1][1])/6],he[2]=[z[oe+1][0]+(Ce*z[oe][0]-Ce*z[oe+2][0])/6,z[oe+1][1]+(Ce*z[oe][1]-Ce*z[oe+2][1])/6],he[3]=[z[oe+1][0],z[oe+1][1]],this.drawingContext.bezierCurveTo(he[1][0],he[1][1],he[2][0],he[2][1],he[3][0],he[3][1]);ne&&this.drawingContext.lineTo(z[oe+1][0],z[oe+1][1]),this._doFillStrokeClose(ne)}}else if(H&&null===_e){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<J;oe++)z[oe].isVert?z[oe].moveTo?this.drawingContext.moveTo(z[oe][0],z[oe][1]):this.drawingContext.lineTo(z[oe][0],z[oe][1]):this.drawingContext.bezierCurveTo(z[oe][0],z[oe][1],z[oe][2],z[oe][3],z[oe][4],z[oe][5]);this._doFillStrokeClose(ne)}else if(re&&null===_e){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<J;oe++)z[oe].isVert?z[oe].moveTo?this.drawingContext.moveTo(z[oe][0],z[oe][1]):this.drawingContext.lineTo(z[oe][0],z[oe][1]):this.drawingContext.quadraticCurveTo(z[oe][0],z[oe][1],z[oe][2],z[oe][3]);this._doFillStrokeClose(ne)}else if(_e===w.POINTS)for(oe=0;oe<J;oe++)xe=z[oe],this._doStroke&&this._pInst.stroke(xe[6]),this._pInst.point(xe[0],xe[1]);else if(_e===w.LINES)for(oe=0;oe+1<J;oe+=2)xe=z[oe],this._doStroke&&this._pInst.stroke(z[oe+1][6]),this._pInst.line(xe[0],xe[1],z[oe+1][0],z[oe+1][1]);else if(_e===w.TRIANGLES)for(oe=0;oe+2<J;oe+=3)xe=z[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(xe[0],xe[1]),this.drawingContext.lineTo(z[oe+1][0],z[oe+1][1]),this.drawingContext.lineTo(z[oe+2][0],z[oe+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(z[oe+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(z[oe+2][6]),this.drawingContext.stroke());else if(_e===w.TRIANGLE_STRIP)for(oe=0;oe+1<J;oe++)xe=z[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(z[oe+1][0],z[oe+1][1]),this.drawingContext.lineTo(xe[0],xe[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(z[oe+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(z[oe+1][5]),oe+2<J&&(this.drawingContext.lineTo(z[oe+2][0],z[oe+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(z[oe+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(z[oe+2][5])),this._doFillStrokeClose(ne);else if(_e===w.TRIANGLE_FAN){if(2<J){for(this._clipping||this.drawingContext.beginPath(),oe=2;oe<J;oe++)xe=z[oe],this.drawingContext.moveTo(z[0][0],z[0][1]),this.drawingContext.lineTo(z[oe-1][0],z[oe-1][1]),this.drawingContext.lineTo(xe[0],xe[1]),this.drawingContext.lineTo(z[0][0],z[0][1]),oe<J-1&&(this._doFill&&xe[5]!==z[oe+1][5]||this._doStroke&&xe[6]!==z[oe+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(xe[5]),this.drawingContext.fill(),this._pInst.fill(z[oe+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(xe[6]),this.drawingContext.stroke(),this._pInst.stroke(z[oe+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(ne)}}else if(_e===w.QUADS)for(oe=0;oe+3<J;oe+=4){for(xe=z[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(xe[0],xe[1]),me=1;me<4;me++)this.drawingContext.lineTo(z[oe+me][0],z[oe+me][1]);this.drawingContext.lineTo(xe[0],xe[1]),!this._clipping&&this._doFill&&this._pInst.fill(z[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(z[oe+3][6]),this._doFillStrokeClose(ne)}else if(_e===w.QUAD_STRIP){if(3<J)for(oe=0;oe+1<J;oe+=2)xe=z[oe],this._clipping||this.drawingContext.beginPath(),oe+3<J?(this.drawingContext.moveTo(z[oe+2][0],z[oe+2][1]),this.drawingContext.lineTo(xe[0],xe[1]),this.drawingContext.lineTo(z[oe+1][0],z[oe+1][1]),this.drawingContext.lineTo(z[oe+3][0],z[oe+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(z[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(z[oe+3][6])):(this.drawingContext.moveTo(xe[0],xe[1]),this.drawingContext.lineTo(z[oe+1][0],z[oe+1][1])),this._doFillStrokeClose(ne)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(z[0][0],z[0][1]),oe=1;oe<J;oe++)(xe=z[oe]).isVert&&(xe.moveTo?(ne&&this.drawingContext.closePath(),this.drawingContext.moveTo(xe[0],xe[1])):this.drawingContext.lineTo(xe[0],xe[1]));this._doFillStrokeClose(ne)}Z=re=H=ee=!1,ne&&z.pop()}return this}},{key:"strokeCap",value:function(G){return G!==w.ROUND&&G!==w.SQUARE&&G!==w.PROJECT||(this.drawingContext.lineCap=G),this}},{key:"strokeJoin",value:function(G){return G!==w.ROUND&&G!==w.BEVEL&&G!==w.MITER||(this.drawingContext.lineJoin=G),this}},{key:"strokeWeight",value:function(G){return this.drawingContext.lineWidth=void 0===G||0===G?1e-4:G,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(G){G!==this._cachedFillStyle&&(this.drawingContext.fillStyle=G,this._cachedFillStyle=G)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(G){G!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=G,this._cachedStrokeStyle=G)}},{key:"bezier",value:function(G,z,ee,H,re,Z,_e,xe){return this._pInst.beginShape(),this._pInst.vertex(G,z),this._pInst.bezierVertex(ee,H,re,Z,_e,xe),this._pInst.endShape(),this}},{key:"curve",value:function(G,z,ee,H,re,Z,_e,xe){return this._pInst.beginShape(),this._pInst.curveVertex(G,z),this._pInst.curveVertex(ee,H),this._pInst.curveVertex(re,Z),this._pInst.curveVertex(_e,xe),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(G){G&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(G,z,ee,H,re,Z){this.drawingContext.transform(G,z,ee,H,re,Z)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(G){this.drawingContext.rotate(G)}},{key:"scale",value:function(G,z){return this.drawingContext.scale(G,z),this}},{key:"translate",value:function(G,z){return G instanceof b.default.Vector&&(z=G.y,G=G.x),this.drawingContext.translate(G,z),this}},{key:"_renderText",value:function(G,z,ee,H,re,Z){if(!(H<Z||re<=H))return G.push(),this._isOpenType()?this._textFont._renderPath(z,ee,H,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(z,ee,H),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(w._DEFAULT_TEXT_FILL),this.drawingContext.fillText(z,ee,H))),G.pop(),G}},{key:"textWidth",value:function(G){return this._isOpenType()?this._textFont._textWidth(G,this._textSize):this.drawingContext.measureText(G).width}},{key:"_applyTextProperties",value:function(){var G=this._pInst,z=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),z=this._textFont,this._isOpenType()&&(z=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),z||"sans-serif");return/\s/.exec(z)&&(z='"'.concat(z,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(z),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===w.CENTER?w._CTX_MIDDLE:this._textBaseline,G}},{key:"push",value:function(){return this.drawingContext.save(),d(p(Y.prototype),"push",this).call(this)}},{key:"pop",value:function(G){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d(p(Y.prototype),"pop",this).call(this,G)}}])&&D(S.prototype,E),Y}(b.default.Renderer);g.prototype.text=function(E,S,k,z,Y){var G;return void 0!==z&&this.drawingContext.textBaseline===w.BASELINE&&(G=!0,this.drawingContext.textBaseline=w.TOP),z=b.default.Renderer.prototype.text.apply(this,arguments),G&&(this.drawingContext.textBaseline=w.BASELINE),z},b.default.Renderer2D=g,K.default=x=b.default.Renderer2D},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(l=l("./main"))&&l.__esModule?l:{default:l};function A(){return{}}M.default.prototype._promisePreloads=[];var b=!(M.default.prototype.registerPromisePreload=function(w){M.default.prototype._promisePreloads.push(w)});M.default.prototype._setupPromisePreloads=function(){var w=!0,I=!1,D=void 0;try{for(var d,f=this._promisePreloads[Symbol.iterator]();!(w=(d=f.next()).done);w=!0){var h=d.value,p=this,m=h.method,g=h.addCallbacks,x=h.legacyPreloadSetup,E=h.target||this,S=E[m].bind(E);if(E===M.default.prototype){if(b)continue;p=null,S=E[m]}E[m]=this._wrapPromisePreload(p,S,g),x&&(E[x.method]=this._legacyPreloadGenerator(p,x,E[m]))}}catch(k){I=!0,D=k}finally{try{w||null==f.return||f.return()}finally{if(I)throw D}}b=!0},M.default.prototype._wrapPromisePreload=function(w,I,D){var d=function(){for(var f=this,h=(this._incrementPreload(),null),p=null,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];if(D)for(var E=g.length-1;0<=E&&!p&&"function"==typeof g[E];E--)p=h,h=g.pop();var S=Promise.resolve(I.apply(this,g));return h&&S.then(h),p&&S.catch(p),S.then(function(){return f._decrementPreload()}),S};return w?d.bind(w):d},M.default.prototype._legacyPreloadGenerator=function(w,f,D){var d=f.createBaseObject||A;return f=function(){var h=this;this._incrementPreload();for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];var x=d.apply(this,m);return D.apply(this,m).then(function(E){Object.assign(x,E),h._decrementPreload()}),x},w?f.bind(w):f}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(l,ve,K){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(d=l("./main"))&&d.__esModule?d:{default:d},b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==I(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("./p5.Graphics"),l("./p5.Renderer2D"),l("../webgl/p5.RendererGL");var D="defaultCanvas0",d=(A.default.prototype.createCanvas=function(f,h,p,m){var g,x,E;if(A.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(p=b.P2D,m=arguments[2]):g=p||b.P2D,m)(E=document.getElementById(D))&&E.parentNode.removeChild(E),E=m,this._defaultGraphicsCreated=!1;else{if(g===b.WEBGL)(E=document.getElementById(D))&&(E.parentNode.removeChild(E),x=this._renderer,this._elements=this._elements.filter(function(k){return k!==x})),(E=document.createElement("canvas")).id=D,E.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)E=this.canvas;else{E=m||document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;D="defaultCanvas".concat(S),E.id=D,E.classList.add("p5Canvas")}this._setupDone||(E.dataset.hidden=!0,E.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(p=document.createElement("main"),document.body.appendChild(p)),document.getElementsByTagName("main")[0])).appendChild(E)}return g===b.WEBGL?(this._setProperty("_renderer",new A.default.RendererGL(E,this,!0)),this._elements.push(this._renderer),f=(m=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=m.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new A.default.Renderer2D(E,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,h),this._renderer._applyDefaults(),this._renderer},A.default.prototype.resizeCanvas=function(f,h,p){if(A.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,g,x,E={};for(m in this.drawingContext){var S=this.drawingContext[m];"object"!==I(S)&&"function"!=typeof S&&(E[m]=S)}for(x in this._renderer instanceof A.default.RendererGL&&(f=(g=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=g.adjustedHeight),this.width=f,this.height=h,this._renderer.resize(f,h),E)try{this.drawingContext[x]=E[x]}catch{}p||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},A.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},A.default.prototype.createGraphics=function(f,h){for(var p=arguments.length,m=new Array(2<p?p-2:0),g=2;g<p;g++)m[g-2]=arguments[g];return m[0]instanceof HTMLCanvasElement&&(m[1]=m[0],m[0]=b.P2D),A.default._validateParameters("createGraphics",arguments),new A.default.Graphics(f,h,m[0],this,m[1])},A.default.prototype.createFramebuffer=function(f){return new A.default.Framebuffer(this,f)},A.default.prototype.clearDepth=function(f){this._assert3d("clearDepth"),this._renderer.clearDepth(f)},A.default.prototype.blendMode=function(f){A.default._validateParameters("blendMode",arguments),f===b.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=b.BLEND),this._renderer.blendMode(f)},A.default);K.default=d},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(l,ve,K){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function A(h){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=d(l("../main")),w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==A(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../constants")),I=d(l("../helpers"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){return h&&h.__esModule?h:{default:h}}l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),b.default.prototype._normalizeArcAngles=function(h,p,m,g,x){var E;return h-=w.TWO_PI*Math.floor(h/w.TWO_PI),p-=w.TWO_PI*Math.floor(p/w.TWO_PI),E=Math.min(Math.abs(h-p),w.TWO_PI-Math.abs(h-p)),x&&(h=h<=w.HALF_PI?Math.atan(m/g*Math.tan(h)):h>w.HALF_PI&&h<=3*w.HALF_PI?Math.atan(m/g*Math.tan(h))+w.PI:Math.atan(m/g*Math.tan(h))+w.TWO_PI,p=p<=w.HALF_PI?Math.atan(m/g*Math.tan(p)):p>w.HALF_PI&&p<=3*w.HALF_PI?Math.atan(m/g*Math.tan(p))+w.PI:Math.atan(m/g*Math.tan(p))+w.TWO_PI),p<h&&(p+=w.TWO_PI),{start:h,stop:p,correspondToSamePoint:E<1e-5}},b.default.prototype.arc=function(h,p,m,g,x,E,S,k){return b.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==E&&(x=this._toRadians(x),E=this._toRadians(E),h=I.default.modeAdjust(h,p,m,g,this._renderer._ellipseMode),(p=this._normalizeArcAngles(x,E,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,k]):(this._renderer.arc(h.x,h.y,h.w,h.h,p.start,p.stop,S,k),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,p.start,p.stop,S]))),this},b.default.prototype.ellipse=function(h,p,m,g,x){return b.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},b.default.prototype.circle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];b.default._validateParameters("circle",p);var g=p.slice(0,2);return g.push(p[2],p[2]),this._renderEllipse.apply(this,function f(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(g))},b.default.prototype._renderEllipse=function(h,p,m,g,x){return(this._renderer._doStroke||this._renderer._doFill)&&(h=I.default.modeAdjust(h,p,m,g=void 0===g?m:g,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},b.default.prototype.line=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("line",m),this._renderer._doStroke&&(h=this._renderer).line.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},b.default.prototype.point=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("point",m),this._renderer._doStroke&&(1===m.length&&m[0]instanceof b.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((h=this._renderer).point.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},b.default.prototype.quad=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((h=this._renderer).quad.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},b.default.prototype.rect=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("rect",p),this._renderRect.apply(this,p)},b.default.prototype.square=function(h,p,m,g,x,E,S){return b.default._validateParameters("square",arguments),this._renderRect.call(this,h,p,m,m,g,x,E,S)},b.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var h=I.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),p=(this._renderer._rectMode===w.CORNER&&(h.w=arguments[2],h.h=arguments[3]),[h.x,h.y,h.w,h.h]),m=4;m<arguments.length;m++)p[m]=arguments[m];this._renderer.rect(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},b.default.prototype.triangle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("triangle",p),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",p),this},K.default=l=b.default},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype.ellipseMode=function(d){return b.default._validateParameters("ellipseMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._ellipseMode=d),this},b.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},b.default.prototype.rectMode=function(d){return b.default._validateParameters("rectMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._rectMode=d),this},b.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},b.default.prototype.strokeCap=function(d){return b.default._validateParameters("strokeCap",arguments),d!==w.ROUND&&d!==w.SQUARE&&d!==w.PROJECT||this._renderer.strokeCap(d),this},b.default.prototype.strokeJoin=function(d){return b.default._validateParameters("strokeJoin",arguments),d!==w.ROUND&&d!==w.BEVEL&&d!==w.MITER||this._renderer.strokeJoin(d),this},b.default.prototype.strokeWeight=function(d){return b.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(d),this};var D=b.default;K.default=D},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(A=l("../main"))&&A.__esModule?A:{default:A};l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),M.default.prototype.bezier=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("bezier",I),(this._renderer._doStroke||this._renderer._doFill)&&(b=this._renderer).bezier.apply(b,I),this},M.default.prototype.bezierDetail=function(b){return M.default._validateParameters("bezierDetail",arguments),this._bezierDetail=b,this},M.default.prototype.bezierPoint=function(b,w,I,D,d){M.default._validateParameters("bezierPoint",arguments);var f=1-d;return Math.pow(f,3)*b+3*Math.pow(f,2)*d*w+3*f*Math.pow(d,2)*I+Math.pow(d,3)*D},M.default.prototype.bezierTangent=function(b,w,I,D,d){M.default._validateParameters("bezierTangent",arguments);var f=1-d;return 3*D*Math.pow(d,2)-3*I*Math.pow(d,2)+6*I*f*d-6*w*f*d+3*w*Math.pow(f,2)-3*b*Math.pow(f,2)},M.default.prototype.curve=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("curve",I),this._renderer._doStroke&&(b=this._renderer).curve.apply(b,I),this},M.default.prototype.curveDetail=function(b){return M.default._validateParameters("curveDetail",arguments),this._curveDetail=b<3?3:b,this},M.default.prototype.curveTightness=function(b){return M.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=b,this},M.default.prototype.curvePoint=function(b,w,I,D,d){M.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,h=d*d*d,p=d*d;return b*((f-1)/2*h+(1-f)*p+(f-1)/2*d)+w*((f+3)/2*h+(-5-f)/2*p+1)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2*d)+D*((1-f)/2*h+(f-1)/2*p)},M.default.prototype.curveTangent=function(b,w,I,D,p){M.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,h=p*p*3;return b*((f-1)/2*h+(1-f)*(p*=2)+(f-1)/2)+w*((f+3)/2*h+(-5-f)/2*p)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2)+D*((1-f)/2*h+(f-1)/2*p)};var A=M.default;K.default=A},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(l,ve,K){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function A(S){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(E=l("../main"))&&E.__esModule?E:{default:E},w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==A(S)&&"function"!=typeof S)return{default:S};var k=I();if(k&&k.has(S))return k.get(S);var X,Y={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in S){var z;Object.prototype.hasOwnProperty.call(S,X)&&((z=G?Object.getOwnPropertyDescriptor(S,X):null)&&(z.get||z.set)?Object.defineProperty(Y,X,z):Y[X]=S[X])}return Y.default=S,k&&k.set(S,Y),Y}(l("../constants"));function I(){var S;return"function"!=typeof WeakMap?null:(I=function(){return S},S=new WeakMap)}var D=null,d=[],f=[],h=!1,p=!1,m=!1,g=!1,x=!0,E=(b.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(f=[],g=!0),this},b.default.prototype.beginShape=function(S){var k;return b.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(k=this._renderer).beginShape.apply(k,arguments):(D=S===w.POINTS||S===w.LINES||S===w.TRIANGLES||S===w.TRIANGLE_FAN||S===w.TRIANGLE_STRIP||S===w.QUADS||S===w.QUAD_STRIP?S:null,d=[],f=[]),this},b.default.prototype.bezierVertex=function(){for(var S,k=arguments.length,X=new Array(k),Y=0;Y<k;Y++)X[Y]=arguments[Y];if(b.default._validateParameters("bezierVertex",X),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,X);else if(0===d.length)b.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var G=[],z=0;z<X.length;z++)G[z]=X[z];G.isVert=!1,(g?f:d).push(G)}return this},b.default.prototype.curveVertex=function(){for(var S,k=arguments.length,X=new Array(k),Y=0;Y<k;Y++)X[Y]=arguments[Y];return b.default._validateParameters("curveVertex",X),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,X):(p=!0,this.vertex(X[0],X[1])),this},b.default.prototype.endContour=function(){if(!this._renderer.isP3D){var S=f[0].slice();S.isVert=f[0].isVert,S.moveTo=!1,f.push(S),x&&(d.push(d[0]),x=!1);for(var k=0;k<f.length;k++)d.push(f[k])}return this},b.default.prototype.endShape=function(S){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(b.default._validateParameters("endShape",arguments),k<1&&(console.log("\u{1f338} p5.js says: You can not have less than one instance"),k=1),this._renderer.isP3D)this._renderer.endShape(S,p,h,m,g,D,k);else{if(1!==k&&console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode"),0===d.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(k=S===w.CLOSE)&&!g&&d.push(d[0]),this._renderer.endShape(S,d,p,h,m,g,D),x=!(g=m=h=p=!1),k&&d.pop()}return this},b.default.prototype.quadraticVertex=function(){for(var S,k=arguments.length,X=new Array(k),Y=0;Y<k;Y++)X[Y]=arguments[Y];if(b.default._validateParameters("quadraticVertex",X),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,X);else{if(this._contourInited)return(S={}).x=X[0],S.y=X[1],S.x3=X[2],S.y3=X[3],S.type=w.QUADRATIC,this._contourVertices.push(S),this;if(0<d.length){m=!0;for(var G=[],z=0;z<X.length;z++)G[z]=X[z];G.isVert=!1,(g?f:d).push(G)}else b.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},b.default.prototype.vertex=function(S,k,X,Y,G){var z;return this._renderer.isP3D?(z=this._renderer).vertex.apply(z,arguments):((z=[]).isVert=!0,z[0]=S,z[1]=k,z[2]=0,z[3]=0,z[4]=0,z[5]=this._renderer._getFill(),z[6]=this._renderer._getStroke(),X&&(z.moveTo=X),(g?(0===f.length&&(z.moveTo=!0),f):d).push(z)),this},b.default.prototype.normal=function(S,k,X){var Y;return this._assert3d("normal"),b.default._validateParameters("normal",arguments),(Y=this._renderer).normal.apply(Y,arguments),this},b.default);K.default=E},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(l,ve,K){},{}],295:[function(l,ve,K){"use strict";l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.assign"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.noLoop=function(){this._loop=!1},l.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},l.default.prototype.isLooping=function(){return this._loop},l.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},l.default.prototype.pop=function(){var M=this._styles.pop();M?(this._renderer.pop(M.renderer),Object.assign(this,M.props)):console.warn("pop() was called without matching push()")},l.default.prototype.redraw=function(M){if(!this._inUserDraw&&this._setupDone){var A=parseInt(M),b=((isNaN(A)||A<1)&&(A=1),this._isGlobal?window:this);if("function"==typeof b.draw){void 0===b.setup&&b.scale(b._pixelDensity,b._pixelDensity);for(var w=0;w<A;w++){b.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),b._renderer.isP3D&&b._renderer._update(),b._setProperty("frameCount",b.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{b.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},K.default=l=l.default},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};M.default.prototype.applyMatrix=function(){var b=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||b?(b=this._renderer).applyMatrix.apply(b,function A(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(b=this._renderer).applyMatrix.apply(b,arguments),this},M.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},M.default.prototype.rotate=function(b,w){return M.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(b),w),this},M.default.prototype.rotateX=function(b){return this._assert3d("rotateX"),M.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(b)),this},M.default.prototype.rotateY=function(b){return this._assert3d("rotateY"),M.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(b)),this},M.default.prototype.rotateZ=function(b){return this._assert3d("rotateZ"),M.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(b)),this},M.default.prototype.scale=function(b,w,I){var D;return M.default._validateParameters("scale",arguments),b instanceof M.default.Vector?(b=(D=b).x,w=D.y,I=D.z):Array.isArray(b)&&(b=(D=b)[0],w=D[1],I=D[2]||1),isNaN(w)?w=I=b:isNaN(I)&&(I=1),this._renderer.scale(b,w,I),this},M.default.prototype.shearX=function(b){return M.default._validateParameters("shearX",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,0,Math.tan(b),1,0,0),this},M.default.prototype.shearY=function(b){return M.default._validateParameters("shearY",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,Math.tan(b),0,1,0,0),this},M.default.prototype.translate=function(b,w,I){return M.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(b,w,I):this._renderer.translate(b,w),this},K.default=l=M.default},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(l,ve,K){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator");var A=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}A.default.prototype.storeItem=function(I,D){"string"!=typeof I&&console.log("The argument that you passed to storeItem() - ".concat(I," is not a string.")),I.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(I," must not end with 'p5TypeID'.")),void 0===D&&console.log("You cannot store undefined variables using storeItem().");var d=w(D);switch(d){case"number":case"boolean":D=D.toString();break;case"object":D instanceof A.default.Color?d="p5.Color":D instanceof A.default.Vector&&(d="p5.Vector",D=[D.x,D.y,D.z]),D=JSON.stringify(D)}localStorage.setItem(I,D),I="".concat(I,"p5TypeID"),localStorage.setItem(I,d)},A.default.prototype.getItem=function(I){var D=localStorage.getItem(I),d=localStorage.getItem("".concat(I,"p5TypeID"));if(void 0===d)console.log("Unable to determine type of item stored under ".concat(I,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==D)switch(d){case"number":D=parseFloat(D);break;case"boolean":D="true"===D;break;case"object":D=JSON.parse(D);break;case"p5.Color":D=JSON.parse(D),D=this.color.apply(this,b(D.levels));break;case"p5.Vector":D=JSON.parse(D),D=this.createVector.apply(this,b(D))}return D},A.default.prototype.clearStorage=function(){var I=this;Object.keys(localStorage).forEach(function(D){D.endsWith("p5TypeID")&&I.removeItem(D.replace("p5TypeID",""))})},A.default.prototype.removeItem=function(I){"string"!=typeof I&&console.log("The argument that you passed to removeItem() - ".concat(I," is not a string.")),localStorage.removeItem(I),localStorage.removeItem("".concat(I,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(l,ve,K){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function A(m){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.object.keys"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(l=l("../core/main"))&&l.__esModule?l:{default:l};function w(m,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&I(m,g)}function I(m,g){return(I=Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(m,g)}function D(m){return function(){var g,x=d(m);if(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=d(this).constructor,Reflect.construct(x,arguments,g)):x.apply(this,arguments),x=this,!g||"object"!==A(g)&&"function"!=typeof g){if(void 0!==x)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function d(m){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function h(m,g){for(var x=0;x<g.length;x++){var E=g[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function p(m,g,x){g&&h(m.prototype,g),x&&h(m,x)}b.default.prototype.createStringDict=function(m,g){return b.default._validateParameters("createStringDict",arguments),new b.default.StringDict(m,g)},b.default.prototype.createNumberDict=function(m,g){return b.default._validateParameters("createNumberDict",arguments),new b.default.NumberDict(m,g)},b.default.TypedDict=function(){function m(g,x){return f(this,m),g instanceof Object?this.data=g:(this.data={},this.data[g]=x),this}return p(m,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,x){this._validate(x)?this.data[g]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var x in g)this.set(x,g[x])}},{key:"create",value:function(g,x){g instanceof Object&&void 0===x?this._addObj(g):void 0!==g?this.set(g,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var x,E="";for(x in this.data)E+="".concat(x,",").concat(this.data[x],"\n");var S=new Blob([E],{type:"text/csv"});b.default.prototype.downloadFile(S,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,x){b.default.prototype.saveJSON(this.data,g,x)}},{key:"_validate",value:function(g){return!0}}]),m}(),b.default.StringDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"string"==typeof x}}]),g}(),b.default.NumberDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"number"==typeof x}},{key:"add",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]+=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,E){this.add(x,-E)}},{key:"mult",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]*=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]/=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var E,S=this.data[Object.keys(this.data)[0]];for(E in this.data)this.data[E]*x<S*x&&(S=this.data[E]);return S}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var E=Object.keys(this.data)[0],S=1;S<Object.keys(this.data).length;S++)Object.keys(this.data)[S]*x<E*x&&(E=Object.keys(this.data)[S]);return E}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),K.default=l=b.default.TypedDict},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(l,ve,K){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(S,k){for(var X=0;X<k.length;X++){var Y=k[X];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(S,Y.key,Y)}}function w(S,k,X){k&&b(S.prototype,k),X&&b(S,X)}function I(S,k){return(I=Object.setPrototypeOf||function(X,Y){return X.__proto__=Y,X})(S,k)}function d(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function f(S){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(S)}function h(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function p(S){return(p="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(k){return M(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":M(k)})(S)}function m(S,k,X){return(k._userNode||document.body).appendChild(S),X=new(X?A.default.MediaElement:A.default.Element)(S,k),k._elements.push(X),X}A.default.prototype.select=function(S,k){return A.default._validateParameters("select",arguments),(k=this._getContainer(k).querySelector(S))?this._wrapElement(k):null},A.default.prototype.selectAll=function(S,k){A.default._validateParameters("selectAll",arguments);var X=[],Y=this._getContainer(k).querySelectorAll(S);if(Y)for(var G=0;G<Y.length;G++){var z=this._wrapElement(Y[G]);X.push(z)}return X},A.default.prototype._getContainer=function(S){var k=document;return"string"==typeof S?k=document.querySelector(S)||document:S instanceof A.default.Element?k=S.elt:S instanceof HTMLElement&&(k=S),k},A.default.prototype._wrapElement=function(S){var k,X=Array.prototype.slice.call(S.children);return"INPUT"===S.tagName&&"checkbox"===S.type?((k=new A.default.Element(S,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},k):"VIDEO"===S.tagName||"AUDIO"===S.tagName?new A.default.MediaElement(S,this):"SELECT"===S.tagName?this.createSelect(new A.default.Element(S,this)):0<X.length&&X.every(function(Y){return"INPUT"===Y.tagName||"LABEL"===Y.tagName})&&("DIV"===S.tagName||"SPAN"===S.tagName)?this.createRadio(new A.default.Element(S,this)):new A.default.Element(S,this)},A.default.prototype.removeElements=function(S){A.default._validateParameters("removeElements",arguments),this._elements.filter(function(k){return!(k.elt instanceof HTMLCanvasElement)}).map(function(k){return k.remove()})},A.default.Element.prototype.changed=function(S){return A.default.Element._adjustListener("change",S,this),this},A.default.Element.prototype.input=function(S){return A.default.Element._adjustListener("input",S,this),this},A.default.prototype.createDiv=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("div");return k.innerHTML=S,m(k,this)},A.default.prototype.createP=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("p");return k.innerHTML=S,m(k,this)},A.default.prototype.createSpan=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=document.createElement("span");return k.innerHTML=S,m(k,this)},A.default.prototype.createImg=function(){A.default._validateParameters("createImg",arguments);var S,k=document.createElement("img"),X=arguments;return 1<X.length&&"string"==typeof X[1]&&(k.alt=X[1]),2<X.length&&"string"==typeof X[2]&&(k.crossOrigin=X[2]),k.src=X[0],S=m(k,this),k.addEventListener("load",function(){S.width=k.offsetWidth||k.width,S.height=k.offsetHeight||k.height;var Y=X[X.length-1];"function"==typeof Y&&Y(S)}),S},A.default.prototype.createA=function(S,k,X){A.default._validateParameters("createA",arguments);var Y=document.createElement("a");return Y.href=S,Y.innerHTML=k,X&&(Y.target=X),m(Y,this)},A.default.prototype.createSlider=function(S,k,X,Y){A.default._validateParameters("createSlider",arguments);var G=document.createElement("input");return G.type="range",G.min=S,G.max=k,0===Y?G.step=1e-18:Y&&(G.step=Y),"number"==typeof X&&(G.value=X),m(G,this)},A.default.prototype.createButton=function(S,k){A.default._validateParameters("createButton",arguments);var X=document.createElement("button");return X.innerHTML=S,k&&(X.value=k),m(X,this)},A.default.prototype.createCheckbox=function(){for(var S=arguments.length,k=new Array(S),X=0;X<S;X++)k[X]=arguments[X];A.default._validateParameters("createCheckbox",k);var Y=document.createElement("div"),G=document.createElement("input"),z=(G.type="checkbox",document.createElement("label")),ee=(z.appendChild(G),Y.appendChild(z),m(Y,this));return ee.checked=function(){var H=ee.elt.firstElementChild.getElementsByTagName("input")[0];if(H){if(0===arguments.length)return H.checked;H.checked=!(arguments.length<=0||!arguments[0])}return ee},this.value=function(H){return ee.value=H,this},k[0]&&(ee.value(k[0]),(Y=document.createElement("span")).innerHTML=k[0],z.appendChild(Y)),k[1]&&(G.checked=!0),ee},A.default.prototype.createSelect=function(){for(var S,k=arguments.length,X=new Array(k),Y=0;Y<k;Y++)X[Y]=arguments[Y];A.default._validateParameters("createSelect",X);var G,z=X[0];return z instanceof A.default.Element&&z.elt instanceof HTMLSelectElement?this.elt=(S=z).elt:z instanceof HTMLSelectElement?(S=m(z,this),this.elt=z):(G=document.createElement("select"),z&&"boolean"==typeof z&&G.setAttribute("multiple","true"),S=m(G,this),this.elt=G),S.option=function(ee,H){var re;if(void 0!==ee){for(var Z,_e=0;_e<this.elt.length;_e+=1)if(this.elt[_e].textContent===ee){re=_e;break}void 0!==re?!1===H?this.elt.remove(re):this.elt[re].value=H:((Z=document.createElement("option")).textContent=ee,Z.value=void 0===H?ee:H,this.elt.appendChild(Z),this._pInst._elements.push(Z))}},S.selected=function(ee){if(void 0!==ee){for(var H=0;H<this.elt.length;H+=1)this.elt[H].value.toString()===ee.toString()&&(this.elt.selectedIndex=H);return this}if(this.elt.getAttribute("multiple")){var re=[],Z=!0,_e=!1,xe=void 0;try{for(var oe,me=this.elt.selectedOptions[Symbol.iterator]();!(Z=(oe=me.next()).done);Z=!0)re.push(oe.value.value)}catch(J){_e=!0,xe=J}finally{try{Z||null==me.return||me.return()}finally{if(_e)throw xe}}return re}return this.elt.value},S.disable=function(ee){if("string"==typeof ee)for(var H=0;H<this.elt.length;H++)this.elt[H].value.toString()===ee&&(this.elt[H].disabled=!0,this.elt[H].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(ee){if("string"==typeof ee)for(var H=0;H<this.elt.length;H++)this.elt[H].value.toString()===ee&&(this.elt[H].disabled=!1,this.elt[H].selected=!1);else{this.elt.disabled=!1;for(var re=0;re<this.elt.length;re++)this.elt[re].disabled=!1,this.elt[re].selected=!1}return this},S};var g=0;function x(S,ee,X,Y){var G=document.createElement(ee),z=("string"==typeof(X=X||"")&&(X=[X]),!0),H=void(ee=!1);try{for(var re,Z=X[Symbol.iterator]();!(z=(re=Z.next()).done);z=!0){var _e=re.value,xe=document.createElement("source");xe.setAttribute("src",_e),G.appendChild(xe)}}catch(me){ee=!0,H=me}finally{try{z||null==Z.return||Z.return()}finally{if(ee)throw H}}"function"==typeof Y&&G.addEventListener("canplaythrough",function me(){Y(),G.removeEventListener("canplaythrough",me)});var oe=m(G,S,!0);return oe.loadedmetadata=!1,G.addEventListener("loadedmetadata",function(){oe.width=G.videoWidth,oe.height=G.videoHeight,0===oe.elt.width&&(oe.elt.width=G.videoWidth),0===oe.elt.height&&(oe.elt.height=G.videoHeight),oe.presetPlaybackRate&&(oe.elt.playbackRate=oe.presetPlaybackRate,delete oe.presetPlaybackRate),oe.loadedmetadata=!0}),oe}function E(S,k,X,Y){h(this,E),this.callback=S,this.time=k,this.id=X,this.val=Y}A.default.prototype.createRadio=function(){function S(ee){return ee instanceof HTMLInputElement&&"radio"===ee.type}function k(ee){return ee instanceof HTMLLabelElement}var X,Y,G,z=arguments.length<=0?void 0:arguments[0];return z instanceof A.default.Element&&(z.elt instanceof HTMLDivElement||z.elt instanceof HTMLSpanElement)?(X=z,this.elt=z.elt):z instanceof HTMLDivElement||z instanceof HTMLSpanElement?(X=m(z,this),Y=this.elt=z,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(G=arguments.length<=1?void 0:arguments[1])):("string"==typeof z&&(G=z),Y=document.createElement("div"),X=m(Y,this),this.elt=Y),X._name=G||"radioOption_".concat(g++),X._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(ee){return S(ee)||k(ee)&&S(ee.firstElementChild)}).map(function(ee){return S(ee)?ee:ee.firstElementChild})},X.option=function(ee,H){var re,Z,_e,xe=!0,oe=!1,me=void 0;try{for(var ne,J=X._getOptionsArray()[Symbol.iterator]();!(xe=(ne=J.next()).done);xe=!0){var he=ne.value;if(he.value===ee){re=he;break}}}catch(Ce){oe=!0,me=Ce}finally{try{xe||null==J.return||J.return()}finally{if(oe)throw me}}return void 0===re&&((re=document.createElement("input")).setAttribute("type","radio"),re.setAttribute("value",ee)),re.setAttribute("name",X._name),k(re.parentElement)?Z=re.parentElement:(Z=document.createElement("label")).insertAdjacentElement("afterbegin",re),Z.lastElementChild instanceof HTMLSpanElement?_e=Z.lastElementChild:(_e=document.createElement("span"),re.insertAdjacentElement("afterend",_e)),_e.innerHTML=void 0===H?ee:H,this.elt.appendChild(Z),re},X.remove=function(ee){var H=!0,re=!1,Z=void 0;try{for(var _e,xe=X._getOptionsArray()[Symbol.iterator]();!(H=(_e=xe.next()).done);H=!0){var oe=_e.value;if(oe.value===ee)return void(k(oe.parentElement)?oe.parentElement:oe).remove()}}catch(me){re=!0,Z=me}finally{try{H||null==xe.return||xe.return()}finally{if(re)throw Z}}},X.value=function(){var ee="",H=!0,re=!1,Z=void 0;try{for(var _e,xe=X._getOptionsArray()[Symbol.iterator]();!(H=(_e=xe.next()).done);H=!0){var oe=_e.value;if(oe.checked){ee=oe.value;break}}}catch(me){re=!0,Z=me}finally{try{H||null==xe.return||xe.return()}finally{if(re)throw Z}}return ee},X.selected=function(ee){var H=null;if(void 0===ee){var re=!0,Z=!1,_e=void 0;try{for(var xe,oe=X._getOptionsArray()[Symbol.iterator]();!(re=(xe=oe.next()).done);re=!0){var me=xe.value;if(me.checked){H=me;break}}}catch(et){Z=!0,_e=et}finally{try{re||null==oe.return||oe.return()}finally{if(Z)throw _e}}}else{X._getOptionsArray().forEach(function(V){V.checked=!1,V.removeAttribute("checked")});var ne=!0;Z=!1,_e=void 0;try{for(var J,he=X._getOptionsArray()[Symbol.iterator]();!(ne=(J=he.next()).done);ne=!0){var Ce=J.value;Ce.value===ee&&(Ce.setAttribute("checked",!0),Ce.checked=!0,H=Ce)}}catch(V){Z=!0,_e=V}finally{try{ne||null==he.return||he.return()}finally{if(Z)throw _e}}}return H},X.disable=function(){var ee=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],H=!0,re=!1,Z=void 0;try{for(var _e,xe=X._getOptionsArray()[Symbol.iterator]();!(H=(_e=xe.next()).done);H=!0)_e.value.setAttribute("disabled",ee)}catch(oe){re=!0,Z=oe}finally{try{H||null==xe.return||xe.return()}finally{if(re)throw Z}}},X},A.default.prototype.createColorPicker=function(S){A.default._validateParameters("createColorPicker",arguments);var k=document.createElement("input");return k.type="color",S?S instanceof A.default.Color?k.value=S.toString("#rrggbb"):(A.default.prototype._colorMode="rgb",A.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},k.value=A.default.prototype.color(S).toString("#rrggbb")):k.value="#000000",(k=m(k,this)).color=function(){return S&&(S.mode&&(A.default.prototype._colorMode=S.mode),S.maxes&&(A.default.prototype._colorMaxes=S.maxes)),A.default.prototype.color(this.elt.value)},k},A.default.prototype.createInput=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",X=(A.default._validateParameters("createInput",arguments),document.createElement("input"));return X.setAttribute("value",S),X.setAttribute("type",k),m(X,this)},A.default.prototype.createFileInput=function(S){var k,X=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(A.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(k=document.createElement("input")).setAttribute("type","file"),X&&k.setAttribute("multiple",!0),k.addEventListener("change",function(Y){var G=!0,z=!1,ee=void 0;try{for(var H,re=Y.target.files[Symbol.iterator]();!(G=(H=re.next()).done);G=!0)A.default.File._load(H.value,S)}catch(_e){z=!0,ee=_e}finally{try{G||null==re.return||re.return()}finally{if(z)throw ee}}},!1),m(k,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},A.default.prototype.createVideo=function(S,k){return A.default._validateParameters("createVideo",arguments),x(this,"video",S,k)},A.default.prototype.createAudio=function(S,k){return A.default._validateParameters("createAudio",arguments),x(this,"audio",S,k)},A.default.prototype.VIDEO="video",A.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(S){var k=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return k?new Promise(function(X,Y){k.call(navigator,S,X,Y)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),A.default.prototype.createCapture=function(){for(var S=arguments.length,k=new Array(S),X=0;X<S;X++)k[X]=arguments[X];if(A.default._validateParameters("createCapture",k),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var Y,G=!0,z=!0,ee=!1,H=0,re=k;H<re.length;H++){var Z=re[H];Z===A.default.prototype.VIDEO?z=!1:Z===A.default.prototype.AUDIO?G=!1:"object"===p(Z)?(void 0!==Z.flipped&&(ee=Z.flipped,delete Z.flipped),_e=Object.assign({},_e,Z)):"function"==typeof Z&&(Y=Z)}var _e=Object.assign({},{video:G,audio:z},_e),xe=document.createElement("video"),oe=(xe.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(_e).then(function(me){try{"srcObject"in xe?xe.srcObject=me:xe.src=window.URL.createObjectURL(me)}catch{xe.src=me}}).catch(function(me){"NotFoundError"===me.name&&A.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===me.name&&A.default._friendlyError("Access to the camera was denied","createCapture"),console.error(me)}),m(xe,this,!0));return oe.loadedmetadata=!1,xe.addEventListener("loadedmetadata",function(){xe.play(),xe.width?(oe.width=xe.width,oe.height=xe.height,ee&&(oe.elt.style.transform="scaleX(-1)")):(oe.width=oe.elt.width=xe.videoWidth,oe.height=oe.elt.height=xe.videoHeight),oe.loadedmetadata=!0,Y&&Y(xe.srcObject)}),oe.flipped=ee,oe},A.default.prototype.createElement=function(S,k){return A.default._validateParameters("createElement",arguments),S=document.createElement(S),void 0!==k&&(S.innerHTML=k),m(S,this)},A.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},A.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},A.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},A.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},A.default.Element.prototype.child=function(S){return void 0===S?this.elt.childNodes:("string"==typeof S?("#"===S[0]&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof A.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},A.default.Element.prototype.center=function(S){var k=this.elt.style.display,X="none"===this.elt.style.display,Y="none"===this.parent().style.display,G={x:this.elt.offsetLeft,y:this.elt.offsetTop},z=(X&&this.show(),Y&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),ee=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===S||void 0===S?this.position(z/2+this.parent().offsetLeft,ee/2+this.parent().offsetTop):"horizontal"===S?this.position(z/2+this.parent().offsetLeft,G.y):"vertical"===S&&this.position(G.x,ee/2+this.parent().offsetTop),this.style("display",k),X&&this.hide(),Y&&this.parent().hide(),this},A.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},A.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},A.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},A.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},A.default.Element.prototype.style=function(S,k){if(void 0===(k=k instanceof A.default.Color?"rgba("+k.levels[0]+","+k.levels[1]+","+k.levels[2]+","+k.levels[3]/255+")":k)){if(-1===S.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(S);for(var X=S.split(";"),Y=0;Y<X.length;Y++){var G=X[Y].split(":");G[0]&&G[1]&&(this.elt.style[G[0].trim()]=G[1].trim())}}else this.elt.style[S]=k,"width"!==S&&"height"!==S&&"left"!==S&&"top"!==S||(k=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(k,10)));return this},A.default.Element.prototype.attribute=function(S,k){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===k?this.elt.getAttribute(S):(this.elt.setAttribute(S,k),this);if(void 0===k)return this.elt.firstChild.getAttribute(S);for(var X=0;X<this.elt.childNodes.length;X++)this.elt.childNodes[X].setAttribute(S,k)},A.default.Element.prototype.removeAttribute=function(S){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var k=0;k<this.elt.childNodes.length;k++)this.elt.childNodes[k].removeAttribute(S);return this.elt.removeAttribute(S),this},A.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},A.default.Element.prototype.show=function(){return this.elt.style.display="block",this},A.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},A.default.Element.prototype.size=function(S,k){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var X=S,Y=k,G=A.default.prototype.AUTO;if(X!==G||Y!==G){if(X===G?X=k*this.width/this.height:Y===G&&(Y=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var z,ee={},H=this.elt.getContext("2d");for(z in H)ee[z]=H[z];for(z in this.elt.setAttribute("width",X*this._pInst._pixelDensity),this.elt.setAttribute("height",Y*this._pInst._pixelDensity),this.elt.style.width=X+"px",this.elt.style.height=Y+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),ee)this.elt.getContext("2d")[z]=ee[z]}else this.elt.style.width=X+"px",this.elt.style.height=Y+"px",this.elt.width=X,this.elt.height=Y;this.width=X,this.height=Y,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",X),this._pInst._setProperty("height",Y))}return this},A.default.Element.prototype.remove=function(){this instanceof A.default.MediaElement&&(this.stop(),null!==(k=this.elt.srcObject)&&k.getTracks().forEach(function(X){X.stop()}));var S,k=this._pInst._elements.indexOf(this);for(S in-1!==k&&this._pInst._elements.splice(k,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},A.default.Element.prototype.drop=function(S,k){var X;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",X=function(Y){Y.preventDefault()}),this.elt.addEventListener("dragleave",X)),A.default.Element._attachListener("drop",function(G){G.preventDefault(),"function"==typeof k&&k.call(this,G),G=G.dataTransfer.files;var z=!0,ee=!1,H=void 0;try{for(var re,Z=G[Symbol.iterator]();!(z=(re=Z.next()).done);z=!0)A.default.File._load(re.value,S)}catch(xe){ee=!0,H=xe}finally{try{z||null==Z.return||Z.return()}finally{if(ee)throw H}}},this)):console.log("The File APIs are not fully supported in this browser."),this},A.default.Element.prototype.draggable=function(S){var k,X="ontouchstart"in window,Y=0,G=0,z=0,ee=0,H=X?"touchend":"mouseup",re=X?"touchmove":"mousemove";function Z(xe){var oe;xe=xe||window.event,ee=X?(oe=xe.changedTouches,Y=z-parseInt(oe[0].clientX),G=ee-parseInt(oe[0].clientY),z=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(Y=z-parseInt(xe.clientX),G=ee-parseInt(xe.clientY),z=parseInt(xe.clientX),parseInt(xe.clientY)),S.style.left=S.offsetLeft-Y+"px",S.style.top=S.offsetTop-G+"px"}function _e(){document.removeEventListener(H,_e,!1),document.removeEventListener(re,Z,!1)}return void 0===S?k=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,k=this.elt),k.addEventListener(X?"touchstart":"mousedown",function(xe){var oe;return xe=xe||window.event,ee=X?(oe=xe.changedTouches,z=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(z=parseInt(xe.clientX),parseInt(xe.clientY)),document.addEventListener(H,_e,!1),document.addEventListener(re,Z,!1),!1},!1),k.style.cursor="move",this},l=function(S){var k=Y;if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),S&&I(k,S);var X=function D(S){return function(){var k,X,Y=f(S);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=f(this).constructor,Reflect.construct(Y,arguments,k)):Y.apply(this,arguments),Y=this,!(X=k)||"object"!==p(X)&&"function"!=typeof X?d(Y):X}}(Y);function Y(G,z){h(this,Y);var ee=d(z=X.call(this,G,z));return z.elt.crossOrigin="anonymous",z._prevTime=0,z._cueIDCounter=0,z._cues=[],z.pixels=[],z._pixelsState=d(z),z._pixelDensity=1,z._modified=!1,z._frameOnCanvas=-1,Object.defineProperty(ee,"src",{get:function(){var H=ee.elt.children[0].src,re=ee.elt.src===window.location.href?"":ee.elt.src;return H===window.location.href?re:H},set:function(H){for(var re=0;re<ee.elt.children.length;re++)ee.elt.removeChild(ee.elt.children[re]);var Z=document.createElement("source");Z.src=H,G.appendChild(Z),ee.elt.src=H,ee.modified=!0}}),ee._onended=function(){},ee.elt.onended=function(){ee._onended(ee)},z}return w(Y,[{key:"play",value:function(){var G;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(G=this.elt.play())&&G.catch&&G.catch(function(z){"NotAllowedError"===z.name?console.error(z):console.error("Media play method encountered an unexpected error",z)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var G=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(G)},{passive:!0,once:!0})}},{key:"autoplay",value:function(G){var z=this,ee=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",G),G&&!ee&&(G=function(){return z._setupAutoplayFailDetection()},4===this.elt.readyState?G():this.elt.addEventListener("canplay",G,{passive:!0,once:!0})),this}},{key:"volume",value:function(G){if(void 0===G)return this.elt.volume;this.elt.volume=G}},{key:"speed",value:function(G){if(void 0===G)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=G:this.presetPlaybackRate=G}},{key:"time",value:function(G){return void 0===G?this.elt.currentTime:(this.elt.currentTime=G,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&this._frameOnCanvas!==this._pInst.frameCount&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var G=arguments.length,z=new Array(G),ee=0;ee<G;ee++)z[ee]=arguments[ee];return A.default.Renderer2D.prototype.loadPixels.apply(this,z)}},{key:"updatePixels",value:function(G,z,ee,H){return this.loadedmetadata&&(this._ensureCanvas(),A.default.Renderer2D.prototype.updatePixels.call(this,G,z,ee,H)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var G=arguments.length,z=new Array(G),ee=0;ee<G;ee++)z[ee]=arguments[ee];return A.default.Renderer2D.prototype.get.apply(this,z)}},{key:"_getPixel",value:function(){this.loadPixels();for(var G=arguments.length,z=new Array(G),ee=0;ee<G;ee++)z[ee]=arguments[ee];return A.default.Renderer2D.prototype._getPixel.apply(this,z)}},{key:"set",value:function(G,z,ee){this.loadedmetadata&&(this._ensureCanvas(),A.default.Renderer2D.prototype.set.call(this,G,z,ee),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var G=arguments.length,z=new Array(G),ee=0;ee<G;ee++)z[ee]=arguments[ee];A.default.prototype.copy.apply(this,z)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var G=arguments.length,z=new Array(G),ee=0;ee<G;ee++)z[ee]=arguments[ee];A.default.Image.prototype.mask.apply(this,z)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(G){this._modified=G}},{key:"onended",value:function(G){return this._onended=G,this}},{key:"connect",value:function(G){var z,ee;if("function"==typeof A.default.prototype.getAudioContext)z=A.default.prototype.getAudioContext(),ee=A.default.soundOut.input;else try{ee=(z=G.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=z.createMediaElementSource(this.elt),this.audioSourceNode.connect(ee)),this.audioSourceNode.connect(G?G.input?G.input:G:ee)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(G,re,ee){var H=this._cueIDCounter++;return re=new E(re,G,H,ee),this._cues.push(re),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),H}},{key:"removeCue",value:function(G){for(var z=0;z<this._cues.length;z++)this._cues[z].id===G&&(console.log(G),this._cues.splice(z,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var G=this.time(),z=0;z<this._cues.length;z++){var ee=this._cues[z].time;this._prevTime<ee&&ee<=G&&this._cues[z].callback(this._cues[z].val)}this._prevTime=G}}]),Y}(A.default.Element),A.default.MediaElement=l,l=function(){function S(k,X){h(this,S),this.file=k,this._pInst=X,X=k.type.split("/"),this.type=X[0],this.subtype=X[1],this.name=k.name,this.size=k.size,this.data=void 0}return w(S,null,[{key:"_createLoader",value:function(k,X){var Y=new FileReader;return Y.onload=function(G){var z,ee=new A.default.File(k);"application/json"===ee.file.type?ee.data=JSON.parse(G.target.result):"text/xml"===ee.file.type?(z=(new DOMParser).parseFromString(G.target.result,"text/xml"),ee.data=new A.default.XML(z.documentElement)):ee.data=G.target.result,X(ee)},Y}},{key:"_load",value:function(k,X){var Y;/^text\//.test(k.type)||"application/json"===k.type?A.default.File._createLoader(k,X).readAsText(k):/^(video|audio)\//.test(k.type)?((Y=new A.default.File(k)).data=URL.createObjectURL(k),X(Y)):A.default.File._createLoader(k,X).readAsDataURL(k)}}]),S}(),A.default.File=l,K.default=l=A.default},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(p,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(p=p("../core/main"))&&p.__esModule?p:{default:p};M.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",M.default.prototype.accelerationX=0,M.default.prototype.accelerationY=0,M.default.prototype.accelerationZ=0,M.default.prototype.pAccelerationX=0,M.default.prototype.pAccelerationY=0,M.default.prototype.pAccelerationZ=0,M.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},M.default.prototype.rotationX=0,M.default.prototype.rotationY=0,M.default.prototype.rotationZ=0,M.default.prototype.pRotationX=0,M.default.prototype.pRotationY=0;var A=M.default.prototype.pRotationZ=0,b=0,w=0,I="clockwise",D="clockwise",d="clockwise",f=(M.default.prototype.pRotateDirectionX=void 0,M.default.prototype.pRotateDirectionY=void 0,M.default.prototype.pRotateDirectionZ=void 0,M.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},M.default.prototype.turnAxis=void 0,.5),h=30;M.default.prototype.setMoveThreshold=function(m){M.default._validateParameters("setMoveThreshold",arguments),f=m},M.default.prototype.setShakeThreshold=function(m){M.default._validateParameters("setShakeThreshold",arguments),h=m},M.default.prototype._ondeviceorientation=function(m){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(m.beta)),this._setProperty("rotationY",this._fromDegrees(m.gamma)),this._setProperty("rotationZ",this._fromDegrees(m.alpha)),this._handleMotion()},M.default.prototype._ondevicemotion=function(m){this._updatePAccelerations(),this._setProperty("accelerationX",2*m.acceleration.x),this._setProperty("accelerationY",2*m.acceleration.y),this._setProperty("accelerationZ",2*m.acceleration.z),this._handleMotion()},M.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var m,g,x,E,S,k=this._isGlobal?window:this;"function"==typeof k.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&k.deviceMoved(),"function"==typeof k.deviceTurned&&(g=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,m=A+180,0<g-x&&g-x<270||g-x<-270?I="clockwise":(g-x<0||270<g-x)&&(I="counter-clockwise"),I!==this.pRotateDirectionX&&(m=g),90<Math.abs(g-m)&&Math.abs(g-m)<270&&(m=g,this._setProperty("turnAxis","X"),k.deviceTurned()),this.pRotateDirectionX=I,A=m-180,x=this._toDegrees(this.rotationY)+180,g=this._toDegrees(this.pRotationY)+180,m=b+180,0<x-g&&x-g<270||x-g<-270?D="clockwise":(x-g<0||270<x-this.pRotationY)&&(D="counter-clockwise"),D!==this.pRotateDirectionY&&(m=x),90<Math.abs(x-m)&&Math.abs(x-m)<270&&(m=x,this._setProperty("turnAxis","Y"),k.deviceTurned()),this.pRotateDirectionY=D,b=m-180,0<(g=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&g-x<270||g-x<-270?d="clockwise":(g-x<0||270<g-x)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(w=g),90<Math.abs(g-w)&&Math.abs(g-w)<270&&(w=g,this._setProperty("turnAxis","Z"),k.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)),"function"==typeof k.deviceShaken&&(null!==this.pAccelerationX&&(E=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),h<E+S&&k.deviceShaken())},K.default=p=M.default},{"../core/main":283}],301:[function(l,ve,K){"use strict";l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.isKeyPressed=!1,M.default.prototype.keyIsPressed=!1,M.default.prototype.key="",M.default.prototype.keyCode=0,M.default.prototype._onkeydown=function(A){var b;A.repeat||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",A.which),this._downKeys[A.which]=!0,this._setProperty("key",A.key||String.fromCharCode(A.which)||A.which),A.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(A.which)),"function"!=typeof(b=this._isGlobal?window:this).keyPressed||A.charCode||!1===b.keyPressed(A)&&A.preventDefault())},M.default.prototype._onkeyup=function(A){var b=this,w=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[A.which]=!1,"Meta"===A.key&&this._metaKeys&&(this._metaKeys.forEach(function(I){b._downKeys[I]=!1}),this._metaKeys=[]),this._isGlobal?window:this);"function"==typeof w.keyReleased&&!1===w.keyReleased(A)&&A.preventDefault()},M.default.prototype._onkeypress=function(A){var b;A.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",A.which),this._setProperty("key",A.key||String.fromCharCode(A.which)||A.which),"function"==typeof(b=this._isGlobal?window:this).keyTyped&&!1===b.keyTyped(A)&&A.preventDefault())},M.default.prototype._onblur=function(A){this._downKeys={}},M.default.prototype.keyIsDown=function(A){return M.default._validateParameters("keyIsDown",arguments),this._downKeys[A]||!1},M.default.prototype._areDownKeys=function(){for(var A in this._downKeys)if(this._downKeys.hasOwnProperty(A)&&!0===this._downKeys[A])return!0;return!1},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(l,ve,K){"use strict";function M(D){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(D)}function A(D){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(D)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(b=l("../core/main"))&&b.__esModule?b:{default:b},w=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!==A(D)&&"function"!=typeof D)return{default:D};var d=I();if(d&&d.has(D))return d.get(D);var f,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in D){var m;Object.prototype.hasOwnProperty.call(D,f)&&((m=p?Object.getOwnPropertyDescriptor(D,f):null)&&(m.get||m.set)?Object.defineProperty(h,f,m):h[f]=D[f])}return h.default=D,d&&d.set(D,h),h}(l("../core/constants"));function I(){var D;return"function"!=typeof WeakMap?null:(I=function(){return D},D=new WeakMap)}b.default.prototype.movedX=0,b.default.prototype.movedY=0,b.default.prototype._hasMouseInteracted=!1,b.default.prototype.mouseX=0,b.default.prototype.mouseY=0,b.default.prototype.pmouseX=0,b.default.prototype.pmouseY=0,b.default.prototype.winMouseX=0,b.default.prototype.winMouseY=0,b.default.prototype.pwinMouseX=0,b.default.prototype.pwinMouseY=0,b.default.prototype.mouseButton=0,b.default.prototype.mouseIsPressed=!1,b.default.prototype._updateNextMouseCoords=function(D){var d,f,h,p,m;null!==this._curElement&&(!D.touches||0<D.touches.length)&&(f=this.width,h=this.height,(p=D)&&!p.clientX&&(p.touches?p=p.touches[0]:p.changedTouches&&(p=p.changedTouches[0])),m=(d=this._curElement.elt).getBoundingClientRect(),h={x:(p.clientX-m.left)/(f=d.scrollWidth/f||1),y:(p.clientY-m.top)/(d=d.scrollHeight/h||1),winX:p.clientX,winY:p.clientY,id:p.identifier},this._setProperty("movedX",D.movementX),this._setProperty("movedY",D.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},b.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},b.default.prototype._setMouseButton=function(D){this._setProperty("mouseButton",1===D.button?w.CENTER:2===D.button?w.RIGHT:w.LEFT)},b.default.prototype._onmousemove=function(D){var d=this._isGlobal?window:this;this._updateNextMouseCoords(D),this.mouseIsPressed?"function"==typeof d.mouseDragged?!1===d.mouseDragged(D)&&D.preventDefault():"function"==typeof d.touchMoved&&!1===d.touchMoved(D)&&D.preventDefault():"function"==typeof d.mouseMoved&&!1===d.mouseMoved(D)&&D.preventDefault()},b.default.prototype._onmousedown=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(D),this._updateNextMouseCoords(D),this.touchstart||("function"==typeof d.mousePressed?!1===d.mousePressed(D)&&D.preventDefault():"function"==typeof d.touchStarted&&!1===d.touchStarted(D)&&D.preventDefault(),this.touchstart=!1)},b.default.prototype._onmouseup=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof d.mouseReleased?!1===d.mouseReleased(D)&&D.preventDefault():"function"==typeof d.touchEnded&&!1===d.touchEnded(D)&&D.preventDefault(),this.touchend=!1)},b.default.prototype._ondragend=b.default.prototype._onmouseup,b.default.prototype._ondragover=b.default.prototype._onmousemove,b.default.prototype._onclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.mouseClicked&&!1===d.mouseClicked(D)&&D.preventDefault()},b.default.prototype._ondblclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.doubleClicked&&!1===d.doubleClicked(D)&&D.preventDefault()},b.default.prototype._mouseWheelDeltaY=0,b.default.prototype._pmouseWheelDeltaY=0,b.default.prototype._onwheel=function(D){var d=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",D.deltaY),"function"==typeof d.mouseWheel&&(D.delta=D.deltaY,!1===d.mouseWheel(D)&&D.preventDefault())},b.default.prototype.requestPointerLock=function(){var D=this._curElement.elt;return D.requestPointerLock=D.requestPointerLock||D.mozRequestPointerLock,D.requestPointerLock?(D.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},b.default.prototype.exitPointerLock=function(){document.exitPointerLock()},K.default=l=b.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.touches=[],l.default.prototype._updateTouchCoords=function(M){if(null!==this._curElement){for(var A=[],b=0;b<M.touches.length;b++)A[b]=function(m,p,g,d){var f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=m.getBoundingClientRect();return p=m.scrollWidth/p||1,m=m.scrollHeight/g||1,{x:((g=d.touches[f]||d.changedTouches[f]).clientX-h.left)/p,y:(g.clientY-h.top)/m,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,M,b);this._setProperty("touches",A)}},l.default.prototype._ontouchstart=function(M){var A=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(M),this._updateNextMouseCoords(M),this._updateMouseCoords(),"function"==typeof A.touchStarted&&(!1===A.touchStarted(M)&&M.preventDefault(),this.touchstart=!0)},l.default.prototype._ontouchmove=function(M){var A=this._isGlobal?window:this;this._updateTouchCoords(M),this._updateNextMouseCoords(M),"function"==typeof A.touchMoved?!1===A.touchMoved(M)&&M.preventDefault():"function"==typeof A.mouseDragged&&!1===A.mouseDragged(M)&&M.preventDefault()},l.default.prototype._ontouchend=function(M){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(M),this._updateNextMouseCoords(M);var A=this._isGlobal?window:this;"function"==typeof A.touchEnded&&(!1===A.touchEnded(M)&&M.preventDefault(),this.touchend=!0)},K.default=l=l.default},{"../core/main":283}],304:[function(l,ve,K){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M,A,b,w,I={_toPixels:function(D){var d,f;return D instanceof ImageData?D.data:D.getContext("2d")?D.getContext("2d").getImageData(0,0,D.width,D.height).data:D.getContext("webgl")?(f=(d=D.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,f=new Uint8Array(f),d.readPixels(0,0,D.width,D.height,d.RGBA,d.UNSIGNED_BYTE,f),f):void 0},_getARGB:function(D,d){return D[3+(d*=4)]<<24&4278190080|D[d]<<16&16711680|D[1+d]<<8&65280|255&D[2+d]},_setPixels:function(D,d){for(var f,h=0,p=D.length;h<p;h++)D[0+(f=4*h)]=(16711680&d[h])>>>16,D[1+f]=(65280&d[h])>>>8,D[2+f]=255&d[h],D[3+f]=(4278190080&d[h])>>>24},_toImageData:function(D){return D instanceof ImageData?D:D.getContext("2d").getImageData(0,0,D.width,D.height)},_createImageData:function(D,d){return I._tmpCanvas=document.createElement("canvas"),I._tmpCtx=I._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(D,d)},apply:function(D,m,f){var h=D.getContext("2d"),p=h.getImageData(0,0,D.width,D.height);(m=m(p,f))instanceof ImageData?h.putImageData(m,0,0,0,0,D.width,D.height):h.putImageData(p,0,0,0,0,D.width,D.height)},threshold:function(D){for(var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,f=I._toPixels(D),h=Math.floor(255*d),p=0;p<f.length;p+=4)f[p]=f[p+1]=f[p+2]=h<=.2126*f[p]+.7152*f[p+1]+.0722*f[p+2]?255:0},gray:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=d[f+1]=d[f+2]=.2126*d[f]+.7152*d[f+1]+.0722*d[f+2]},opaque:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f+3]=255;return d},invert:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2]},posterize:function(D){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,f=I._toPixels(D);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=d-1,p=0;p<f.length;p+=4){var g=f[p+1],x=f[p+2];f[p]=255*(f[p]*d>>8)/h,f[p+1]=255*(g*d>>8)/h,f[p+2]=255*(x*d>>8)/h}},dilate:function(D){for(var d,f,h,p,m,g,x,E,S,k=I._toPixels(D),X=0,Y=k.length?k.length/4:0,G=new Int32Array(Y);X<Y;)for(f=(d=X)+D.width;X<f;)p=h=I._getARGB(k,X),(S=X-1)<d&&(S=X),f<=(E=X+1)&&(E=X),(m=X-D.width)<0&&(m=0),Y<=(g=X+D.width)&&(g=X),m=I._getARGB(k,m),S=I._getARGB(k,S),g=I._getARGB(k,g),(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(x=77*((S=I._getARGB(k,E))>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(h=m,p=E),p<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,p=S),G[X++]=h;I._setPixels(k,G)},erode:function(D){for(var d,f,h,p,m,g,x,E,S,k=I._toPixels(D),X=0,Y=k.length?k.length/4:0,G=new Int32Array(Y);X<Y;)for(f=(d=X)+D.width;X<f;)p=h=I._getARGB(k,X),(S=X-1)<d&&(S=X),f<=(E=X+1)&&(E=X),(m=X-D.width)<0&&(m=0),Y<=(g=X+D.width)&&(g=X),m=I._getARGB(k,m),S=I._getARGB(k,S),g=I._getARGB(k,g),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(h=S,p=x),(x=77*((S=I._getARGB(k,E))>>16&255)+151*(S>>8&255)+28*(255&S))<p&&(h=S,p=x),(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<p&&(h=m,p=E),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<p&&(h=g,p=S),G[X++]=h;I._setPixels(k,G)},blur:function(D,d){for(var f,h,p,m,g,x,E,S,k,X,Y=I._toPixels(D),G=D.width,z=D.height,ee=G*z,H=new Int32Array(ee),re=0;re<ee;re++)H[re]=I._getARGB(Y,re);var Z,_e,xe,oe,me,ne,J,he,Ce=new Int32Array(ee),et=new Int32Array(ee),le=new Int32Array(ee),V=new Int32Array(ee),ge=0,Le=3.5*d|0;if(M!==(Le=Le<1?1:Le<248?Le:248)){A=1+(M=Le)<<1,b=new Int32Array(A),w=new Array(A);for(var Ke=0;Ke<A;Ke++)w[Ke]=new Int32Array(256);for(var ut=1,_t=Le-1;ut<Le;ut++){b[Le+ut]=b[_t]=ne=_t*_t,J=w[Le+ut],he=w[_t--];for(var Nt=0;Nt<256;Nt++)J[Nt]=he[Nt]=ne*Nt}me=b[Le]=Le*Le,J=w[Le];for(var dt=0;dt<256;dt++)J[dt]=me*dt}for(_e=0;_e<z;_e++){for(Z=0;Z<G;Z++){if(m=p=h=g=f=0,(x=Z-M)<0)X=-x,x=0;else{if(G<=x)break;X=0}for(xe=X;xe<A&&!(G<=x);xe++){var Rt=H[x+ge];g+=(oe=w[xe])[(-16777216&Rt)>>>24],h+=oe[(16711680&Rt)>>16],p+=oe[(65280&Rt)>>8],m+=oe[255&Rt],f+=b[xe],x++}Ce[E=ge+Z]=g/f,et[E]=h/f,le[E]=p/f,V[E]=m/f}ge+=G}for(k=(S=-M)*G,_e=ge=0;_e<z;_e++){for(Z=0;Z<G;Z++){if(m=p=h=g=f=0,S<0)X=E=-S,x=Z;else{if(z<=S)break;X=0,E=S,x=Z+k}for(xe=X;xe<A&&!(z<=E);xe++)g+=(oe=w[xe])[Ce[x]],h+=oe[et[x]],p+=oe[le[x]],m+=oe[V[x]],f+=b[xe],E++,x+=G;H[Z+ge]=g/f<<24|h/f<<16|p/f<<8|m/f}ge+=G,k+=G,S++}I._setPixels(Y,H)}};K.default=I},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=b(l("../core/main")),A=b(l("omggif"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.createImage=function(I,D){return M.default._validateParameters("createImage",arguments),new M.default.Image(I,D)},M.default.prototype.saveCanvas=function(){for(var I,D,d,f,h,p,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];switch(M.default._validateParameters("saveCanvas",g),g[0]instanceof HTMLCanvasElement?(I=g[0],g.shift()):g[0]instanceof M.default.Element?(I=g[0].elt,g.shift()):g[0]instanceof M.default.Framebuffer?((h=this.createGraphics((f=g[0]).width,f.height)).pixelDensity(pixelDensity()),f.loadPixels(),h.loadPixels(),h.pixels.set(f.pixels),h.updatePixels(),I=h.elt,g.shift()):I=this._curElement&&this._curElement.elt,1<=g.length&&(D=g[0]),d=(d=2<=g.length?g[1]:d)||M.default.prototype._checkFileExtension(D,d)[1]||"png"){default:p="image/png";break;case"webp":p="image/webp";break;case"jpeg":case"jpg":p="image/jpeg"}I.toBlob(function(E){M.default.prototype.downloadFile(E,D,d),h&&h.remove()},p)},M.default.prototype.encodeAndDownloadGif=function(I,D){for(var d=I.gifProperties,h=(1===(f=d.loopLimit)?f=null:null===f&&(f=0),new Uint8Array(I.width*I.height*d.numFrames)),p=[],m={},g=0;g<d.numFrames;g++){for(var x=new Set,E=d.frames[g].image.data,S=E.length,k=new Uint32Array(I.width*I.height),X=0,Y=0;X<S;X+=4,Y++){var G=E[X+0]<<16|E[X+1]<<8|E[X+2];x.add(G),k[Y]=G}var z=w(x).sort().toString();void 0===m[z]?m[z]={freq:1,frames:[g]}:(m[z].freq+=1,m[z].frames.push(g)),p.push(k)}for(var re=[],ee=Object.keys(m).sort(function(le,V){return m[V].freq-m[le].freq}),H=ee[0].split(",").map(function(le){return parseInt(le)}),Z=(re=re.concat(m[H].frames),new Set(H)),_e=1;_e<ee.length;_e++){var xe=ee[_e].split(",").map(function(le){return parseInt(le)}).filter(function(le){return!Z.has(le)});if(H.length+xe.length<=256){for(var oe=0;oe<xe.length;oe++)H.push(xe[oe]),Z.add(xe[oe]);re=re.concat(m[ee[_e]].frames)}}re=new Set(re);for(var me={},ne=0;ne<H.length;ne++)me[H[ne]]||(me[H[ne]]=ne);for(var J=1;J<H.length;)J<<=1;H.length=J;for(var f={loop:f,palette:new Uint32Array(H)},he=new A.default.GifWriter(h,I.width,I.height,f),Ce={},et=0;et<d.numFrames;et++)!function(V){var ge=!re.has(V),Le=ge?[]:H,Ke=new Uint8Array(I.width*I.height),ut={},_t=new Set,Nt=(p[V].forEach(function(It,Tt){ge?(void 0===ut[It]&&(ut[It]=Le.length,Le.push(It)),Ke[Tt]=ut[It]):Ke[Tt]=me[It],0<V&&p[V-1][Tt]!==It&&_t.add(It)}),{});if(0<(dt=Le.filter(function(It){return!_t.has(It)})).length){var dt,Rt=(ge?ut:me)[dt=dt[0]];if(0<V){for(var Bt=0;Bt<p[V].length;Bt++)p[V-1][Bt]===p[V][Bt]&&(Ke[Bt]=Rt);Nt.transparent=Rt,Ce.frameOpts.disposal=1}}if(Nt.delay=d.frames[V].delay/10,ge){for(var lt=1;lt<Le.length;)lt<<=1;Le.length=lt,Nt.palette=new Uint32Array(Le)}0<V&&he.addFrame(0,0,I.width,I.height,Ce.pixelPaletteIndex,Ce.frameOpts),Ce={pixelPaletteIndex:Ke,frameOpts:Nt}}(et);Ce.frameOpts.disposal=1,he.addFrame(0,0,I.width,I.height,Ce.pixelPaletteIndex,Ce.frameOpts),f=new Blob([h.slice(0,he.end())],{type:"image/gif"}),M.default.prototype.downloadFile(f,D,"gif")},M.default.prototype.saveFrames=function(I,D,d,p,h){M.default._validateParameters("saveFrames",arguments),d=M.default.prototype.constrain(d=d||3,0,15),d*=1e3,p=M.default.prototype.constrain(p||15,0,22);var m=0,g=M.default.prototype._makeFrame,x=this._curElement.elt,E=[],S=setInterval(function(){E.push(g(I+m,D,x)),m++},1e3/p);setTimeout(function(){if(clearInterval(S),h)h(E);else for(var k=0,X=E;k<X.length;k++){var Y=X[k];M.default.prototype.downloadFile(Y.imageData,Y.filename,Y.ext)}E=[]},.01+d)},M.default.prototype._makeFrame=function(I,D,h){var f;if(h=this?this._curElement.elt:h,D)switch(D.toLowerCase()){case"png":default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}else D="png",f="image/png";h=(h=h.toDataURL(f)).replace(f,"image/octet-stream");var p={};return p.imageData=h,p.filename=I,p.ext=D,p},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(l,ve,K){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function A(x){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,l("regenerator-runtime/runtime");var b=h(l("../core/main")),w=h(l("../core/helpers")),I=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==A(x)&&"function"!=typeof x)return{default:x};var E=f();if(E&&E.has(x))return E.get(x);var S,k={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var Y;Object.prototype.hasOwnProperty.call(x,S)&&((Y=X?Object.getOwnPropertyDescriptor(x,S):null)&&(Y.get||Y.set)?Object.defineProperty(k,S,Y):k[S]=x[S])}return k.default=x,E&&E.set(x,k),k}(l("../core/constants")),D=h(l("omggif")),d=l("gifenc");function f(){var x;return"function"!=typeof WeakMap?null:(f=function(){return x},x=new WeakMap)}function h(x){return x&&x.__esModule?x:{default:x}}function p(x,E,S,k,X,Y,G){try{var z=x[Y](G),ee=z.value}catch(H){return void S(H)}z.done?E(ee):Promise.resolve(ee).then(k,X)}function g(x,E){return 0<x&&x<E?x:E}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.loadImage=function(x,E,S){b.default._validateParameters("loadImage",arguments);var k=new b.default.Image(1,1,this),X=this,Y=new Request(x,{method:"GET",mode:"cors"});return fetch(x,Y).then(function(G){var z,ee=G.headers.get("content-type");null===ee&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),ee&&ee.includes("image/gif")?G.arrayBuffer().then(function(H){if(H){H=new Uint8Array(H);for(var re=k,Z=E,_e=S,xe=function(ge){X._decrementPreload()}.bind(X),oe=new D.default.GifReader(H),me=(re.width=re.canvas.width=oe.width,re.height=re.canvas.height=oe.height,[]),ne=oe.numFrames(),J=new Uint8ClampedArray(re.width*re.height*4),he=0;he<ne;he++){var Ce=oe.frameInfo(he),et=re.drawingContext.getImageData(0,0,re.width,re.height),le=(J=et.data.slice(),function(ge,Le){try{Le.decodeAndBlitFrameRGBA(ge,J)}catch(Ke){b.default._friendlyFileLoadError(8,re.src),"function"==typeof _e?_e(Ke):console.error(Ke)}}(he,oe),new ImageData(J,re.width,re.height));0===(re.drawingContext.putImageData(le,0,0),le=Ce.delay)&&(le=10),me.push({image:re.drawingContext.getImageData(0,0,re.width,re.height),delay:10*le}),2===Ce.disposal?re.drawingContext.clearRect(Ce.x,Ce.y,Ce.width,Ce.height):3===Ce.disposal&&re.drawingContext.putImageData(et,0,0,Ce.x,Ce.y,Ce.width,Ce.height)}null===(H=oe.loopCount())?H=1:0===H&&(H=null),re.drawingContext.putImageData(me[0].image,0,0),1<me.length&&(re.gifProperties={displayIndex:0,loopLimit:H,loopCount:0,frames:me,numFrames:ne,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof Z&&Z(re),xe()}},function(H){"function"==typeof S?(S(H),X._decrementPreload()):console.error(H)}):((z=new Image).onload=function(){k.width=k.canvas.width=z.width,k.height=k.canvas.height=z.height,k.drawingContext.drawImage(z,0,0),k.modified=!0,"function"==typeof E&&E(k),X._decrementPreload()},z.onerror=function(H){b.default._friendlyFileLoadError(0,z.src),"function"==typeof S?(S(H),X._decrementPreload()):console.error(H)},0!==x.indexOf("data:image/")&&(z.crossOrigin="Anonymous"),z.src=x),k.modified=!0}).catch(function(G){b.default._friendlyFileLoadError(0,x),"function"==typeof S?(S(G),X._decrementPreload()):console.error(G)}),k},b.default.prototype.saveGif=function(){x=j.mark(function S(k,X){var Y,G,z,ee,H,re,Z,_e,xe,oe,me,ne,J,he,Ce,et,le,V,ge,Le,Ke,ut,_t,Nt,dt,Rt,Bt=arguments;return j.wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(Y=2<Bt.length&&void 0!==Bt[2]?Bt[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof k)throw TypeError("fileName parameter must be a string");lt.next=3;break;case 3:if("number"!=typeof X)throw TypeError("Duration parameter must be a number");lt.next=5;break;case 5:if(z=Y&&Y.units||"seconds",ee=Y&&Y.silent||!1,H=Y&&Y.notificationDuration||0,re=Y&&Y.notificationID||"progressBar","number"!=typeof(G=Y&&Y.delay||0))throw TypeError("Delay parameter must be a number");lt.next=12;break;case 12:if("seconds"!==z&&"frames"!==z)throw TypeError('Units parameter must be either "frames" or "seconds"');lt.next=14;break;case 14:if("boolean"!=typeof ee)throw TypeError("Silent parameter must be a boolean");lt.next=16;break;case 16:if("number"!=typeof H)throw TypeError("Notification duration parameter must be a number");lt.next=18;break;case 18:if("string"!=typeof re)throw TypeError("Notification ID parameter must be a string");lt.next=20;break;case 20:return this._recording=!0,Z=(Z=1/(oe=(oe=this._targetFrameRate)!==1/0&&void 0!==oe&&0!==oe?oe:60)*1e3)<20?20:Z,xe=(_e="seconds"===z?X*oe:X)+(oe="seconds"===z?G*oe:G),this.frameCount=oe,me=this._pixelDensity,this.pixelDensity(1),ne=[],null!==document.getElementById(re)&&document.getElementById(re).remove(),ee||((J=this.createP("")).id(re),J.style("font-size","16px"),J.style("font-family","Montserrat"),J.style("background-color","#ffffffa0"),J.style("padding","8px"),J.style("border-radius","10px"),J.position(0,0)),this._renderer instanceof b.default.RendererGL&&(Ce=this.drawingContext,he=new Uint8Array(Ce.drawingBufferWidth*Ce.drawingBufferHeight*4)),this.noLoop(),lt.next=39,Promise.resolve();case 39:if(oe<xe)return this.redraw(),Nt=void 0,Nt=this._renderer instanceof b.default.RendererGL?(he=new Uint8Array(Ce.drawingBufferWidth*Ce.drawingBufferHeight*4),Ce.readPixels(0,0,Ce.drawingBufferWidth,Ce.drawingBufferHeight,Ce.RGBA,Ce.UNSIGNED_BYTE,he),function(It,Tt,Ot){for(var vt=parseInt(Ot/2),Gt=4*Tt,hn=new Uint8Array(4*Tt),$n=0;$n<vt;++$n){var bn=$n*Gt,Xn=(Ot-$n-1)*Gt;hn.set(It.subarray(bn,bn+Gt)),It.copyWithin(bn,Xn,Xn+Gt),It.set(hn,Xn)}return It}(he,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,ne.push(Nt),oe++,ee||J.html("Saved frame <b>"+ne.length.toString()+"</b> out of "+_e.toString()),lt.next=48,new Promise(function(It){return setTimeout(It,0)});lt.next=50;break;case 48:lt.next=39;break;case 50:ee||J.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(me),et=(0,d.GIFEncoder)(),le=function(It){for(var Tt=new Uint8Array(It.length*It[0].length),Ot=0;Ot<It.length;Ot++)Tt.set(It[Ot],Ot*It[0].length);var vt=(0,d.quantize)(Tt,256,{format:"rgba4444",oneBitAlpha:!0});return 256===vt.length?vt[vt.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:vt.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),vt}(ne),V={},ge=function(It){for(var Tt=It.length/4,Ot=new Uint8Array(Tt),vt=0;vt<Tt;vt++){var Gt=It[4*vt]<<24|It[4*vt+1]<<16|It[4*vt+2]<<8|It[4*vt+3];void 0===V[Gt]&&(V[Gt]=(0,d.nearestColorIndex)(le,It.slice(4*vt,4*(vt+1)))),Ot[vt]=V[Gt]}return Ot},Le=le.length-1,Ke=[],ut=0;case 60:if(!(ut<ne.length)){lt.next=71;break}if(_t=ge(ne[ut]),Nt=_t.slice(),0===ut)et.writeFrame(_t,this.width,this.height,{palette:le,delay:Z,dispose:1});else{for(dt=0;dt<_t.length;dt++)_t[dt]===Ke[dt]&&(_t[dt]=Le);et.writeFrame(_t,this.width,this.height,{delay:Z,transparent:!0,transparentIndex:Le,dispose:1})}return Ke=Nt,ee||J.html("Rendered frame <b>"+ut.toString()+"</b> out of "+_e.toString()),lt.next=68,new Promise(function(It){return setTimeout(It,0)});case 68:ut++,lt.next=60;break;case 71:et.finish(),Rt=et.bytesView(),Rt=new Blob([Rt],{type:"image/gif"}),ne=[],this._recording=!1,this.loop(),ee||(J.html("Done. Downloading your gif!\u{1f338}"),0<H&&setTimeout(function(){return J.remove()},1e3*H)),b.default.prototype.downloadFile(Rt,k,"gif");case 80:case"end":return lt.stop()}},S,this)});var x,E=function(){var S=this,k=arguments;return new Promise(function(X,Y){var G=x.apply(S,k);function z(H){p(G,X,Y,z,ee,"next",H)}function ee(H){p(G,X,Y,z,ee,"throw",H)}z(void 0)})};return function(S,k){return E.apply(this,arguments)}}(),b.default.prototype.image=function(x,E,S,k,oe,me,ne,J,Ce,H,re,Z){b.default._validateParameters("image",arguments);var he=x.width,_e=x.height,xe=(Z=Z||I.CENTER,re=re||I.CENTER,x.elt&&(he=void 0!==he?he:x.elt.width,_e=void 0!==_e?_e:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(he=void 0!==he?he:x.elt.videoWidth,_e=void 0!==_e?_e:x.elt.videoHeight),k||he);oe=oe||_e,me=me||0,ne=ne||0,J=g(void 0!==J?J:he,he),he=g(void 0!==Ce?Ce:_e,_e),Ce=1,x.elt&&!x.canvas&&x.elt.style.width&&(Ce=x.elt.videoWidth&&!k?x.elt.videoWidth:x.elt.width,Ce/=parseInt(x.elt.style.width,10)),me*=Ce,ne*=Ce,he*=Ce,J*=Ce,_e=function m(x,E,S,k,X,Y,G,z,ee,H,re){var Z,_e,xe,oe,me,ne,J,he,Ce;return x===I.COVER&&(Z=E,xe=S,J=Y,he=G,ne=z,Ce=ee,_e=H,oe=re,J/=me=Math.max(J/_e,he/oe),he/=me,me=ne,ne=Ce,Z===I.CENTER?me+=(_e-J)/2:Z===I.RIGHT&&(me+=_e-J),xe===I.CENTER?ne+=(oe-he)/2:xe===I.BOTTOM&&(ne+=oe-he),z=(Ce={x:me,y:ne,w:J,h:he}).x,ee=Ce.y,H=Ce.w,re=Ce.h),x===I.CONTAIN&&(Z=E,_e=S,xe=k,oe=X,me=Y,ne=G,J=H,he=re,J/=Ce=Math.max(J/me,he/ne),he/=Ce,Ce=xe,xe=oe,Z===I.CENTER?Ce+=(me-J)/2:Z===I.RIGHT&&(Ce+=me-J),_e===I.CENTER?xe+=(ne-he)/2:_e===I.BOTTOM&&(xe+=ne-he),k=(x={x:Ce,y:xe,w:J,h:he}).x,X=x.y,Y=x.w,G=x.h),{sx:z,sy:ee,sw:H,sh:re,dx:k,dy:X,dw:Y,dh:G}}(H,re,Z,(_e=w.default.modeAdjust(E,S,xe,oe,this._renderer._imageMode)).x,_e.y,_e.w,_e.h,me,ne,J,he),this._renderer.image(x,_e.sx,_e.sy,_e.sw,_e.sh,_e.dx,_e.dy,_e.dw,_e.dh)},b.default.prototype.tint=function(){for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];b.default._validateParameters("tint",E);var k=this.color.apply(this,E);this._renderer._tint=k.levels},b.default.prototype.noTint=function(){this._renderer._tint=null},b.default.prototype._getTintedImageCanvas=b.default.Renderer2D.prototype._getTintedImageCanvas,b.default.prototype.imageMode=function(x){b.default._validateParameters("imageMode",arguments),x!==I.CORNER&&x!==I.CORNERS&&x!==I.CENTER||(this._renderer._imageMode=x)},K.default=l=b.default},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=b(l("../core/main")),A=b(l("./filters"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I,D){for(var d=0;d<D.length;d++){var f=D[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,f.key,f)}}M.default.Image=function(){function I(h,p){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var D,d;return D=I,(d=[{key:"pixelDensity",value:function(h){return void 0!==h?(h<=0&&(M.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var p,m=this.gifProperties;g=g._lastRealFrameTime||window.performance.now(),0===m.lastChangeTime&&(m.lastChangeTime=g),m.playing&&(m.timeDisplayed=g-m.lastChangeTime,m.timeDisplayed>=(p=m.frames[m.displayIndex].delay)&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=g,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),null!==m.loopLimit&&m.loopCount>=m.loopLimit?m.playing=!1:(this.drawingContext.putImageData(m.frames[g=m.displayIndex%m.numFrames].image,0,0),m.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(h,p){this[h]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){M.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,p,m,g){M.default.Renderer2D.prototype.updatePixels.call(this,h,p,m,g),this.setModified(!0)}},{key:"get",value:function(h,p,m,g){return M.default._validateParameters("p5.Image.get",arguments),M.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return M.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(h,p,m){M.default.Renderer2D.prototype.set.call(this,h,p,m),this.setModified(!0)}},{key:"resize",value:function(h,p){0===h&&0===p?(h=this.canvas.width,p=this.canvas.height):0===h?h=this.canvas.width*p/this.canvas.height:0===p&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=h,m.height=p,this.gifProperties)for(var g=this.gifProperties,x=0;x<g.numFrames;x++){for(var E=this.drawingContext.createImageData(h,p),S=(z=z=G=Y=X=void 0,g.frames[x].image),k=E,X=0,Y=0;Y<k.height;Y++)for(var G=0;G<k.width;G++){var z=Math.floor(G*S.width/k.width);z=4*(Math.floor(Y*S.height/k.height)*S.width+z),k.data[X++]=S.data[z++],k.data[X++]=S.data[z++],k.data[X++]=S.data[z++],k.data[X++]=S.data[+z]}g.frames[x].image=E}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(h){var p=this.drawingContext.globalCompositeOperation,m=this._pixelDensity,g=1,x=[h=void 0===h?this:h,0,0,(g=h instanceof M.default.Renderer?h._pInst._pixelDensity:g)*h.width,g*h.height,0,0,m*this.width,m*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var E=0;E<this.gifProperties.frames.length;E++)this.drawingContext.putImageData(this.gifProperties.frames[E].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[E].image=this.drawingContext.getImageData(0,0,m*this.width,m*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(h,p){A.default.apply(this.canvas,A.default[h],p),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default._validateParameters("p5.Image.blend",arguments),M.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,p){this.gifProperties?M.default.prototype.encodeAndDownloadGif(this,h):M.default.prototype.saveCanvas(this.canvas,h,p)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var p;this.gifProperties&&(h<(p=this.gifProperties).numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=h;else{var g=!0,x=void(p=!1);try{for(var E,S=m.frames[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)E.value.delay=h}catch(X){p=!0,x=X}finally{try{g||null==S.return||S.return()}finally{if(p)throw x}}}}}}])&&w(D.prototype,d),I}(),K.default=l=M.default.Image},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(l,ve,K){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=b(l("../core/main")),A=b(l("./filters"));function b(w){return w&&w.__esModule?w:{default:w}}l("../color/p5.Color"),M.default.prototype.pixels=[],M.default.prototype.blend=function(){for(var w,I=arguments.length,D=new Array(I),d=0;d<I;d++)D[d]=arguments[d];M.default._validateParameters("blend",D),this._renderer?(w=this._renderer).blend.apply(w,D):M.default.Renderer2D.prototype.blend.apply(this,D)},M.default.prototype.copy=function(){for(var w,I,D,d,f,h,p,m,g,x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];if(M.default._validateParameters("copy",E),9===E.length)w=E[0],I=E[1],D=E[2],d=E[3],f=E[4],h=E[5],p=E[6],m=E[7],g=E[8];else{if(8!==E.length)throw new Error("Signature not supported");w=this,I=E[0],D=E[1],d=E[2],f=E[3],h=E[4],p=E[5],m=E[6],g=E[7]}M.default.prototype._copyHelper(this,w,I,D,d,f,h,p,m,g)},M.default.prototype._copyHelper=function(w,I,D,d,f,h,p,m,g,x){var E=I.canvas.width/I.width,S=0,k=0;I._renderer&&I._renderer.isP3D&&(S=I.width/2,k=I.height/2),w._renderer&&w._renderer.isP3D?(w.push(),w.resetMatrix(),w.noLights(),w.blendMode(w.BLEND),w.imageMode(w.CORNER),M.default.RendererGL.prototype.image.call(w._renderer,I,D+S,d+k,f,h,p,m,g,x),w.pop()):w.drawingContext.drawImage(I.canvas,E*(D+S),E*(d+k),E*f,E*h,p,m,g,x)},M.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},M.default.prototype.filter=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("filter",I);var p=function(){var m,g={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof M.default.Shader?g.shader=arguments.length<=0?void 0:arguments[0]:(g.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(g.value=arguments.length<=1?void 0:arguments[1]),!1===((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])&&(g.useWebGL=!1)),g}.apply(void 0,I),d=p.shader,f=p.operation,h=p.value;p=p.useWebGL,this._renderer.isP3D&&d?M.default.RendererGL.prototype.filter.call(this._renderer,d):p||this._renderer.isP3D?(!p&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?M.default.RendererGL.prototype.filter.call(this._renderer,f,h):((d=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),d.filter.apply(d,I),this.copy(d._renderer,0,0,this.width,this.height,0,0,this.width,this.height),d.clear())):A.default.apply(void 0!==this.canvas?this.canvas:this.elt,A.default[f],h)},M.default.prototype.get=function(w,I,D,d){var f;return M.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},M.default.prototype.loadPixels=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("loadPixels",I),this._renderer.loadPixels()},M.default.prototype.set=function(w,I,D){this._renderer.set(w,I,D)},M.default.prototype.updatePixels=function(w,I,D,d){M.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(w,I,D,d)},K.default=l=M.default},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(l,ve,K){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=I(l("../core/main")),b=(l("whatwg-fetch"),l("es6-promise/auto"),I(l("fetch-jsonp"))),w=I(l("file-saver"));function I(h){return h&&h.__esModule?h:{default:h}}function D(h){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}function d(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(h,p){p&&!0!==p&&"true"!==p||(p="");var m="";return(h=h||"untitled")&&h.includes(".")&&(m=h.split(".").pop()),p&&m!==p&&(m=p,h="".concat(h,".").concat(m)),[h,m]}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),A.default.prototype.loadJSON=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];A.default._validateParameters("loadJSON",p);for(var g,x,E,S=p[0],k={},X="json",Y=1;Y<p.length;Y++){var G=p[Y];"string"==typeof G?"jsonp"!==G&&"json"!==G||(X=G):"function"==typeof G?g?x=G:g=G:"object"===D(G)&&(G.hasOwnProperty("jsonpCallback")||G.hasOwnProperty("jsonpCallbackFunction"))&&(X="jsonp",E=G)}var z=this;return this.httpDo(S,"GET",E,X,function(ee){for(var H in ee)k[H]=ee[H];void 0!==g&&g(ee),z._decrementPreload()},function(ee){if(A.default._friendlyFileLoadError(5,S),!x)throw ee;x(ee)}),k},A.default.prototype.loadStrings=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];A.default._validateParameters("loadStrings",p);for(var g,x,E=[],S=1;S<p.length;S++){var k=p[S];"function"==typeof k&&(void 0===g?g=k:void 0===x&&(x=k))}var X=this;return A.default.prototype.httpDo.call(this,p[0],"GET","text",function(Y){for(var G=Y.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),z=0,ee=G.length;z<ee;z+=32768)Array.prototype.push.apply(E,G.slice(z,Math.min(z+32768,ee)));void 0!==g&&g(E),X._decrementPreload()},function(Y){if(A.default._friendlyFileLoadError(3,Y),!x)throw Y;x(Y)}),E},A.default.prototype.loadTable=function(h){var p,m,g,x=[],E=!1,S=h.substring(h.lastIndexOf(".")+1,h.length);"csv"===S?g=",":"ssv"===S?g=";":"tsv"===S&&(g="\t");for(var k=1;k<arguments.length;k++)"function"==typeof arguments[k]?void 0===p?p=arguments[k]:void 0===m&&(m=arguments[k]):"string"==typeof arguments[k]&&(x.push(arguments[k]),"header"===arguments[k]&&(E=!0),"csv"===arguments[k]?g=",":"ssv"===arguments[k]?g=";":"tsv"===arguments[k]&&(g="\t"));var X=new A.default.Table,Y=this;return this.httpDo(h,"GET","table",function(G){for(var z,ee,H={},Z=[],_e=0,xe=null,oe=function(){H.currentState=0,H.token=""},me=function(){xe.push(H.token),oe()},ne=function(){H.currentState=4,Z.push(xe),xe=null};;){if(null==(z=G[_e++])){if(H.escaped)throw new Error("Unclosed quote in file.");if(xe){me(),ne();break}}if(null===xe&&(H.escaped=!1,xe=[],oe()),0===H.currentState){if('"'===z){H.escaped=!0,H.currentState=1;continue}H.currentState=1}if(1===H.currentState&&H.escaped)if('"'===z)'"'===G[_e]?(H.token+='"',_e++):(H.escaped=!1,H.currentState=2);else{if("\r"===z)continue;H.token+=z}else"\r"===z?("\n"===G[_e]&&_e++,me(),ne()):"\n"===z?(me(),ne()):z===g?me():1===H.currentState&&(H.token+=z)}if(E)X.columns=Z.shift();else for(var J=0;J<Z[0].length;J++)X.columns[J]="null";for(var he=0;he<Z.length;he++)(1!==Z[he].length||"undefined"!==Z[he][0]&&""!==Z[he][0])&&((ee=new A.default.TableRow).arr=Z[he],ee.obj=function(Ce,et){if(void 0===(et=et||[]))for(var le=0;le<Ce.length;le++)et[le.toString()]=le;return Object.fromEntries(et.map(function(V,ge){return[V,Ce[ge]]}))}(Z[he],X.columns),X.addRow(ee));"function"==typeof p&&p(X),Y._decrementPreload()},function(G){A.default._friendlyFileLoadError(2,h),m?m(G):console.error(G)}),X},A.default.prototype.loadXML=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];for(var g,x,E=new A.default.XML,S=1;S<p.length;S++){var k=p[S];"function"==typeof k&&(void 0===g?g=k:void 0===x&&(x=k))}var X=this;return this.httpDo(p[0],"GET","xml",function(Y){for(var G in Y)E[G]=Y[G];void 0!==g&&g(E),X._decrementPreload()},function(Y){if(A.default._friendlyFileLoadError(1,Y),!x)throw Y;x(Y)}),E},A.default.prototype.loadBytes=function(h,p,m){var g={},x=this;return this.httpDo(h,"GET","arrayBuffer",function(E){g.bytes=new Uint8Array(E),"function"==typeof p&&p(g),x._decrementPreload()},function(E){if(A.default._friendlyFileLoadError(6,h),!m)throw E;m(E)}),g},A.default.prototype.httpGet=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return A.default._validateParameters("httpGet",p),p.splice(1,0,"GET"),A.default.prototype.httpDo.apply(this,p)},A.default.prototype.httpPost=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return A.default._validateParameters("httpPost",p),p.splice(1,0,"POST"),A.default.prototype.httpDo.apply(this,p)},A.default.prototype.httpDo=function(){for(var h,p,m,g={},x=0,E="text/plain",S=arguments.length-1;0<S&&"function"==typeof(S<0||arguments.length<=S?void 0:arguments[S]);S--)x++;var X=arguments.length<=0?void 0:arguments[0];if(2==(k=arguments.length-x)&&"string"==typeof X&&"object"===D(arguments.length<=1?void 0:arguments[1]))re=new Request(X,arguments.length<=1?void 0:arguments[1]),p=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var Y,G="GET",z=1;z<arguments.length;z++){var ee=z<0||arguments.length<=z?void 0:arguments[z];if("string"==typeof ee)"GET"===ee||"POST"===ee||"PUT"===ee||"DELETE"===ee?G=ee:"json"===ee||"jsonp"===ee||"binary"===ee||"arrayBuffer"===ee||"xml"===ee||"text"===ee||"table"===ee?h=ee:Y=ee;else if("number"==typeof ee)Y=ee.toString();else if("object"===D(ee))if(ee.hasOwnProperty("jsonpCallback")||ee.hasOwnProperty("jsonpCallbackFunction"))for(var H in ee)g[H]=ee[H];else E=ee instanceof A.default.XML?(Y=ee.serialize(),"application/xml"):(Y=JSON.stringify(ee),"application/json");else"function"==typeof ee&&(p?m=ee:p=ee)}var k="GET"===G?new Headers:new Headers({"Content-Type":E}),re=new Request(X,{method:G,mode:"cors",body:Y,headers:k})}return(k=(k="jsonp"===(h=h||(X.includes("json")?"json":X.includes("xml")?"xml":"text"))?(0,b.default)(X,g):fetch(re)).then(function(Z){if(!Z.ok)throw(_e=new Error(Z.body)).status=Z.status,_e.ok=!1,_e;var _e=0;switch((_e="jsonp"!==h?Z.headers.get("content-length"):_e)&&64e6<_e&&A.default._friendlyFileLoadError(7,X),h){case"json":case"jsonp":return Z.json();case"binary":return Z.blob();case"arrayBuffer":return Z.arrayBuffer();case"xml":return Z.text().then(function(xe){return xe=(new DOMParser).parseFromString(xe,"text/xml"),new A.default.XML(xe.documentElement)});default:return Z.text()}})).then(p||function(){}),k.catch(m||console.error),k},window.URL=window.URL||window.webkitURL,A.default.prototype._pWriters=[],A.default.prototype.createWriter=function(h,p){var m,g;for(g in A.default.prototype._pWriters)if(A.default.prototype._pWriters[g].name===h)return m=new A.default.PrintWriter(h+this.millis(),p),A.default.prototype._pWriters.push(m),m;return m=new A.default.PrintWriter(h,p),A.default.prototype._pWriters.push(m),m},A.default.PrintWriter=function(h,p){var m=this;this.name=h,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,"\n")},this.clear=function(){this.content=""},this.close=function(){var g,x=[];for(g in x.push(this.content),A.default.prototype.writeFile(x,h,p),A.default.prototype._pWriters)A.default.prototype._pWriters[g].name===this.name&&A.default.prototype._pWriters.splice(g,1);m.clear(),m={}}},A.default.prototype.save=function(h,p,m){var g=arguments,x=(this._curElement||this).elt;if(0===g.length)A.default.prototype.saveCanvas(x);else if(g[0]instanceof A.default.Renderer||g[0]instanceof A.default.Graphics)A.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(1===g.length&&"string"==typeof g[0])A.default.prototype.saveCanvas(x,g[0]);else switch(f(g[1],g[2])[1]){case"json":return void A.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void A.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?A.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof A.default.Table?A.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof A.default.Image?A.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof A.default.SoundFile&&A.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},A.default.prototype.saveJSON=function(h,p,m){A.default._validateParameters("saveJSON",arguments),m=m?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(m.split("\n"),p,"json")},A.default.prototype.saveJSONObject=A.default.prototype.saveJSON,A.default.prototype.saveJSONArray=A.default.prototype.saveJSON,A.default.prototype.saveStrings=function(h,p,m,g){A.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(p,m||"txt"),E=0;E<h.length;E++)x.write(g?h[E]+"\r\n":h[E]+"\n");x.close(),x.clear()},A.default.prototype.saveTable=function(h,p,m){A.default._validateParameters("saveTable",arguments),g=void 0===m?p.substring(p.lastIndexOf(".")+1,p.length):m;var g,x=this.createWriter(p,g),E=h.columns,S="tsv"===g?"\t":",";if("html"!==g){if("0"!==E[0]){for(var k=0;k<E.length;k++)x.write(k<E.length-1?E[k]+S:E[k]);x.write("\n")}for(var X=0;X<h.rows.length;X++){var Y=void 0;for(Y=0;Y<h.rows[X].arr.length;Y++)Y<h.rows[X].arr.length-1?"csv"===g&&String(h.rows[X].arr[Y]).includes(",")?x.write('"'+h.rows[X].arr[Y]+'"'+S):x.write(h.rows[X].arr[Y]+S):"csv"===g&&String(h.rows[X].arr[Y]).includes(",")?x.write('"'+h.rows[X].arr[Y]+'"'):x.write(h.rows[X].arr[Y]);x.write("\n")}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),"0"!==E[0]){x.print("    <tr>");for(var G=0;G<E.length;G++){var z=d(E[G]);x.print("      <td>".concat(z)),x.print("      </td>")}x.print("    </tr>")}for(var ee=0;ee<h.rows.length;ee++){x.print("    <tr>");for(var H=0;H<h.columns.length;H++){var re=d(h.rows[ee].getString(H));x.print("      <td>".concat(re)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},A.default.prototype.writeFile=function(x,p,m){var g="application/octet-stream";A.default.prototype._isSafari()&&(g="text/plain"),x=new Blob(x,{type:g}),A.default.prototype.downloadFile(x,p,m)},A.default.prototype.downloadFile=function(h,x,E){var g;E=(x=f(x,E))[0],h instanceof Blob?w.default.saveAs(h,E):((g=document.createElement("a")).href=h,g.download=E,g.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},g.style.display="none",document.body.appendChild(g),A.default.prototype._isSafari()&&(h=(h='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(h)),g.click())},A.default.prototype._checkFileExtension=f,A.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},K.default=l=A.default},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Table=function(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=d}var w,I;return w=b,(I=[{key:"addRow",value:function(d){if(void 0===(d=d||new M.default.TableRow).arr||void 0===d.obj)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d}},{key:"removeRow",value:function(d){this.rows[d].table=null,d=this.rows.splice(d+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(d)}},{key:"getRow",value:function(d){return this.rows[d]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(d,f){if("string"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[f]===d)return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[f]===d)return this.rows[p];return null}},{key:"findRows",value:function(d,f){var h=[];if("string"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].obj[f]===d&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[f]===d&&h.push(this.rows[m]);return h}},{key:"matchRow",value:function(d,f){if("number"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[f].match(d))return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[f].match(d))return this.rows[p];return null}},{key:"matchRows",value:function(d,f){var h=[];if("number"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].arr[f].match(d)&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[f].match(d)&&h.push(this.rows[m]);return h}},{key:"getColumn",value:function(d){var f=[];if("string"==typeof d)for(var h=0;h<this.rows.length;h++)f.push(this.rows[h].obj[d]);else for(var p=0;p<this.rows.length;p++)f.push(this.rows[p].arr[d]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(d){this.columns.push(d||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(d,f){for(var h=[],p=0;p<d.length;p++)h.push(d.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(h.join("|"),"g");if(void 0===f)for(var g=0;g<this.columns.length;g++)for(var x=0;x<this.rows.length;x++){var E=(E=this.rows[x].arr[g]).replace(m,"");this.rows[x].arr[g]=E,this.rows[x].obj[this.columns[g]]=E}else if("string"==typeof f)for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].obj[f]).replace(m,""),X=(this.rows[S].obj[f]=k,this.columns.indexOf(f));this.rows[S].arr[X]=k}else for(var Y=0;Y<this.rows.length;Y++){var G=(G=this.rows[Y].arr[f]).replace(m,"");this.rows[Y].arr[f]=G,this.rows[Y].obj[this.columns[f]]=G}}},{key:"trim",value:function(d){var f=new RegExp(" ","g");if(void 0===d)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[h]).replace(f,"");this.rows[p].arr[h]=m,this.rows[p].obj[this.columns[h]]=m}else if("string"==typeof d)for(var g=0;g<this.rows.length;g++){var x=(x=this.rows[g].obj[d]).replace(f,""),E=(this.rows[g].obj[d]=x,this.columns.indexOf(d));this.rows[g].arr[E]=x}else for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].arr[d]).replace(f,"");this.rows[S].arr[d]=k,this.rows[S].obj[this.columns[d]]=k}}},{key:"removeColumn",value:function(p){var f,h;"string"==typeof p?h=this.columns.indexOf(f=p):f=this.columns[h=p],p=this.columns.splice(h+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr,x=g.splice(h+1,g.length);g.pop(),this.rows[m].arr=g.concat(x),delete this.rows[m].obj[f]}}},{key:"set",value:function(d,f,h){this.rows[d].set(f,h)}},{key:"setNum",value:function(d,f,h){this.rows[d].setNum(f,h)}},{key:"setString",value:function(d,f,h){this.rows[d].setString(f,h)}},{key:"get",value:function(d,f){return this.rows[d].get(f)}},{key:"getNum",value:function(d,f){return this.rows[d].getNum(f)}},{key:"getString",value:function(d,f){return this.rows[d].getString(f)}},{key:"getObject",value:function(d){for(var f,h={},p=0;p<this.rows.length;p++)if(f=this.rows[p].obj,"string"==typeof d){if(!(0<=this.columns.indexOf(d)))throw new Error('This table has no column named "'.concat(d,'"'));h[f[d]]=f}else h[p]=this.rows[p].obj;return h}},{key:"getArray",value:function(){for(var d=[],f=0;f<this.rows.length;f++)d.push(this.rows[f].arr);return d}}])&&A(w.prototype,I),b}(),K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(l,ve,K){"use strict";function M(A,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.TableRow=function(){function A(D,d){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");var f=[];D&&(f=D.split(d=d||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var b,w;return b=A,(w=[{key:"set",value:function(D,d){if("string"==typeof D){var f=this.table.columns.indexOf(D);if(!(0<=f))throw new Error('This table has no column named "'.concat(D,'"'));this.obj[D]=d,this.arr[f]=d}else{if(!(D<this.table.columns.length))throw new Error("Column #".concat(D," is out of the range of this table"));this.arr[D]=d,this.obj[f=this.table.columns[D]]=d}}},{key:"setNum",value:function(D,d){d=parseFloat(d),this.set(D,d)}},{key:"setString",value:function(D,d){d=d.toString(),this.set(D,d)}},{key:"get",value:function(D){return("string"==typeof D?this.obj:this.arr)[D]}},{key:"getNum",value:function(D){var d=parseFloat("string"==typeof D?this.obj[D]:this.arr[D]);if("NaN"===d.toString())throw"Error: ".concat(this.obj[D]," is NaN (Not a Number)");return d}},{key:"getString",value:function(D){return("string"==typeof D?this.obj:this.arr)[D].toString()}}])&&M(b.prototype,w),A}(),K.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.XML=function(){function w(f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");f?this.DOM=f:(f=document.implementation.createDocument(null,"doc"),this.DOM=f.createElement("root"))}var I,D;return I=w,(D=[{key:"getParent",value:function(){return new M.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(f){var h=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(f);m.innerHTML=h;for(var g=0;g<p.length;g++)m.setAttribute(p[g].nodeName,p[g].nodeValue);this.DOM=m}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var f=[],h=0;h<this.DOM.childNodes.length;h++)f.push(this.DOM.childNodes[h].nodeName);return f}},{key:"getChildren",value:function(f){return function b(w){for(var I=[],D=0;D<w.length;D++)I.push(new M.default.XML(w[D]));return I}(f?this.DOM.getElementsByTagName(f):this.DOM.children)}},{key:"getChild",value:function(f){if("string"!=typeof f)return new M.default.XML(this.DOM.children[f]);var h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.children[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value;if(E.tagName===f)return new M.default.XML(E)}}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"addChild",value:function(f){f instanceof M.default.XML&&this.DOM.appendChild(f.DOM)}},{key:"removeChild",value:function(f){var h=-1;if("string"==typeof f){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===f){h=p;break}}else h=f;-1!==h&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.attributes[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)f.push(g.value.nodeName)}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}},{key:"hasAttribute",value:function(f){var h={},p=!0,m=!1,g=void 0;try{for(var x,E=this.DOM.attributes[Symbol.iterator]();!(p=(x=E.next()).done);p=!0){var S=x.value;h[S.nodeName]=S.nodeValue}}catch(k){m=!0,g=k}finally{try{p||null==E.return||E.return()}finally{if(m)throw g}}return!!h[f]}},{key:"getNum",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(X){g=!0,x=X}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return Number(p[f])||h||0}},{key:"getString",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(X){g=!0,x=X}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return p[f]?String(p[f]):h||null}},{key:"setAttribute",value:function(f,h){this.DOM.setAttribute(f,h)}},{key:"getContent",value:function(f){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||f||null}},{key:"setContent",value:function(f){this.DOM.children.length||(this.DOM.textContent=f)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&A(I.prototype,D),w}(),K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.string.includes"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.abs=Math.abs,M.default.prototype.ceil=Math.ceil,M.default.prototype.constrain=function(b,w,I){return M.default._validateParameters("constrain",arguments),Math.max(Math.min(b,I),w)},M.default.prototype.dist=function(){for(var b=arguments.length,w=new Array(b),I=0;I<b;I++)w[I]=arguments[I];return M.default._validateParameters("dist",w),4===w.length?Math.hypot(w[2]-w[0],w[3]-w[1]):6===w.length?Math.hypot(w[3]-w[0],w[4]-w[1],w[5]-w[2]):void 0},M.default.prototype.exp=Math.exp,M.default.prototype.floor=Math.floor,M.default.prototype.lerp=function(b,w,I){return M.default._validateParameters("lerp",arguments),I*(w-b)+b},M.default.prototype.log=Math.log,M.default.prototype.mag=function(b,w){return M.default._validateParameters("mag",arguments),Math.hypot(b,w)},M.default.prototype.map=function(b,w,I,D,d,f){return M.default._validateParameters("map",arguments),b=(b-w)/(I-w)*(d-D)+D,f?D<d?this.constrain(b,D,d):this.constrain(b,d,D):b},M.default.prototype.max=function(){for(var b=function(d){return Math.max.apply(Math,A(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.min=function(){for(var b=function(d){return Math.min.apply(Math,A(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.norm=function(b,w,I){return M.default._validateParameters("norm",arguments),this.map(b,w,I,0,1)},M.default.prototype.pow=Math.pow,M.default.prototype.round=function(b,w){return w?(w=Math.pow(10,w),Math.round(b*w)/w):Math.round(b)},M.default.prototype.sq=function(b){return b*b},M.default.prototype.sqrt=Math.sqrt,M.default.prototype.fract=function(D){M.default._validateParameters("fract",arguments);var w,I=0;return D=Number(D),isNaN(D)||Math.abs(D)===1/0?D:(D<0&&(D=-D,I=1),String(D).includes(".")&&!String(D).includes("e")?(w=+("0"+(w=String(D)).slice(w.indexOf("."))),Math.abs(I-w)):D<1?Math.abs(I-D):0)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(w,I,D){return(A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(d,f,h){var p=[null];return p.push.apply(p,f),f=new(Function.bind.apply(d,p)),h&&b(f,h.prototype),f}).apply(null,arguments)}function b(w,I){return(b=Object.setPrototypeOf||function(D,d){return D.__proto__=d,D})(w,I)}M.default.prototype.createVector=function(w,I,D){return this instanceof M.default?A(M.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new M.default.Vector(w,I,D)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(D,ve,K){"use strict";function M(d){return.5*(1-Math.cos(d*Math.PI))}Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,D=(D=D("../core/main"))&&D.__esModule?D:{default:D};var A,b=4095,w=4,I=.5;D.default.prototype.noise=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==A){A=new Array(4096);for(var p=0;p<4096;p++)A[p]=Math.random()}d<0&&(d=-d),f<0&&(f=-f),h<0&&(h=-h);for(var m,g,x=Math.floor(d),E=Math.floor(f),S=Math.floor(h),k=d-x,X=f-E,Y=h-S,G=0,z=.5,ee=0;ee<w;ee++){var H=x+(E<<4)+(S<<8),re=M(k),Z=M(X),_e=A[H&b];_e+=re*(A[H+1&b]-_e),m=A[H+16&b],_e+=Z*((m+=re*(A[H+16+1&b]-m))-_e),m=A[(H+=256)&b],m+=re*(A[H+1&b]-m),g=A[H+16&b],m+=Z*((g+=re*(A[H+16+1&b]-g))-m),G+=(_e+=M(Y)*(m-_e))*z,z*=I,x<<=1,E<<=1,S<<=1,1<=(k*=2)&&(x++,k--),1<=(X*=2)&&(E++,X--),1<=(Y*=2)&&(S++,Y--)}return G},D.default.prototype.noiseDetail=function(d,f){0<d&&(w=d),0<f&&(I=f)},D.default.prototype.noiseSeed=function(d){p=4294967296;var h,p,m_rand=function(){return(h=(1664525*h+1013904223)%p)/p};(function(x){h=(null==x?Math.random()*p:x)>>>0})(d),A=new Array(4096);for(var g=0;g<4096;g++)A[g]=m_rand()},K.default=D=D.default},{"../core/main":283}],316:[function(l,ve,K){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function A(f){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.string.sub"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(d=l("../core/main"))&&d.__esModule?d:{default:d},w=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==A(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("../core/constants"));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}b.default.Vector=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var x,E,S="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,E=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,E=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=E,this.z=S}var h,p,m;return h=f,m=[{key:"fromAngle",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new b.default.Vector(x*Math.cos(g),x*Math.sin(g),0)}},{key:"fromAngles",value:function(Y,k){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,S=Math.cos(k),X=(k=Math.sin(k),Math.cos(Y));return Y=Math.sin(Y),new b.default.Vector(E*Y*k,-E*X,E*Y*S)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*w.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*w.TWO_PI,x=2*Math.random()-1,E=(S=Math.sqrt(1-x*x))*Math.cos(g),S=S*Math.sin(g);return new b.default.Vector(E,S,x)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return X?X.set(S):(X=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),X.add(k),X}},{key:"rem",value:function(g,x){if(g instanceof b.default.Vector&&x instanceof b.default.Vector)return(g=g.copy()).rem(x),g}},{key:"sub",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return X?X.set(S):(X=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),X.sub(k),X}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return X?X.set(S):(X=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),X.mult(k),X}},{key:"rotate",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return 2===x.length?X=S.copy():(X instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),X.set(S)),X.rotate(k),X}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return X?X.set(S):(X=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),X.div(k),X}},{key:"dot",value:function(g,x){return g.dot(x)}},{key:"cross",value:function(g,x){return g.cross(x)}},{key:"dist",value:function(g,x){return g.dist(x)}},{key:"lerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2],Y=x[3];return Y?Y.set(S):(Y=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),Y.lerp(k,X),Y}},{key:"slerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2],Y=x[3];return Y?Y.set(S):(Y=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),Y.slerp(k,X),Y}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1];return x.length<2?k=S.copy():(k instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),k.set(S)),k.normalize()}},{key:"limit",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return x.length<3?X=S.copy():(X instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),X.set(S)),X.limit(k)}},{key:"setMag",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return x.length<3?X=S.copy():(X instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),X.set(S)),X.setMag(k)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,x){return g.angleBetween(x)}},{key:"reflect",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];return x.length<3?X=S.copy():(X instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),X.set(S)),X.reflect(k)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,x){var E;return g instanceof b.default.Vector?E=g:Array.isArray(g)?E=(new b.default.Vector).set(g):b.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),E.equals(x)}}],(p=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,x,E){return g instanceof b.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=x||0,this.z=E||0),this}},{key:"copy",value:function(){return this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new b.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,x,E){return g instanceof b.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=x||0,this.z+=E||0),this}},{key:"calculateRemainder2D",value:function(g,x){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(g,x,E){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),0!==E&&(this.z=this.z%E),this}},{key:"rem",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,k,X,Y=x[0],G=x[1],z=x[2];if(Y instanceof b.default.Vector){if([Y.x,Y.y,Y.z].every(Number.isFinite))return S=parseFloat(Y.x),k=parseFloat(Y.y),X=parseFloat(Y.z),this.calculateRemainder3D(S,k,X)}else if(Array.isArray(Y)){if(Y.every(Number.isFinite))return 2===Y.length?this.calculateRemainder2D(Y[0],Y[1]):3===Y.length?this.calculateRemainder3D(Y[0],Y[1],Y[2]):void 0}else if(1===x.length){if(Number.isFinite(Y)&&0!==Y)return this.x=this.x%Y,this.y=this.y%Y,this.z=this.z%Y,this}else if(2===x.length){if(x.every(Number.isFinite))return this.calculateRemainder2D(Y,G)}else if(3===x.length&&x.every(Number.isFinite))return this.calculateRemainder3D(Y,G,z)}},{key:"sub",value:function(g,x,E){return g instanceof b.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=x||0,this.z-=E||0),this}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,k=x[0],X=x[1],Y=x[2];return k instanceof b.default.Vector?Number.isFinite(k.x)&&Number.isFinite(k.y)&&Number.isFinite(k.z)&&"number"==typeof k.x&&"number"==typeof k.y&&"number"==typeof k.z?(this.x*=k.x,this.y*=k.y,this.z*=k.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(k)?k.every(function(G){return Number.isFinite(G)})&&k.every(function(G){return"number"==typeof G})?1===k.length?(this.x*=k[0],this.y*=k[0],this.z*=k[0]):2===k.length?(this.x*=k[0],this.y*=k[1]):3===k.length&&(this.x*=k[0],this.y*=k[1],this.z*=k[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(S=x).every(function(G){return Number.isFinite(G)})&&S.every(function(G){return"number"==typeof G})?(1===x.length&&(this.x*=k,this.y*=k,this.z*=k),2===x.length&&(this.x*=k,this.y*=X),3===x.length&&(this.x*=k,this.y*=X,this.z*=Y)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],k=x[1],X=x[2];if(S instanceof b.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&"number"==typeof S.x&&"number"==typeof S.y&&"number"==typeof S.z){var Y=0===S.z&&0===this.z;if(0===S.x||0===S.y||!Y&&0===S.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,Y||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(Number.isFinite)&&S.every(function(G){return"number"==typeof G})){if(S.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===S.length?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):2===S.length?(this.x/=S[0],this.y/=S[1]):3===S.length&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(G){return"number"==typeof G})){if(x.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===x.length&&(this.x/=S,this.y/=S,this.z/=S),2===x.length&&(this.x/=S,this.y/=k),3===x.length&&(this.x/=S,this.y/=k,this.z/=X)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,x=this.y,E=this.z;return g*g+x*x+E*E}},{key:"dot",value:function(g,x,E){return g instanceof b.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(x||0)+this.z*(E||0)}},{key:"cross",value:function(S){var x=this.y*S.z-this.z*S.y,E=this.z*S.x-this.x*S.z;return S=this.x*S.y-this.y*S.x,this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,x,E,S):new b.default.Vector(x,E,S)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return 0!==g&&this.mult(1/g),this}},{key:"limit",value:function(g){var x=this.magSq();return g*g<x&&this.div(Math.sqrt(x)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var x=this.mag();return this.x=x*Math.cos(g),this.y=x*Math.sin(g),this}},{key:"rotate",value:function(x){x=this.heading()+x;var E=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*E,this.y=Math.sin(x)*E,this}},{key:"angleBetween",value:function(g){var x;return this.magSq()*g.magSq()==0?NaN:(x=this.cross(g),g=Math.atan2(x.mag(),this.dot(g))*Math.sign(x.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,x,E,S){return g instanceof b.default.Vector?this.lerp(g.x,g.y,g.z,x):(this.x+=(g-this.x)*S||0,this.y+=(x-this.y)*S||0,this.z+=(E-this.z)*S||0,this)}},{key:"slerp",value:function(g,x){if(0!==x){if(1===x)return this.set(g);var E=this.mag(),S=g.mag();if(E*S==0)this.mult(1-x).add(g.x*x,g.y*x,g.z*x);else{var k=this.cross(g),X=k.mag(),Y=Math.atan2(X,this.dot(g));if(0<X)k.x/=X,k.y/=X,k.z/=X;else{if(Y<.5*Math.PI)return this.mult(1-x).add(g.x*x,g.y*x,g.z*x),this;0===this.z&&0===g.z?k.set(0,0,1):0!==this.x?k.set(this.y,-this.x,0).normalize():k.set(1,0,0)}X=k.cross(this),k=(g=1-x+x*S/E)*Math.cos(x*Y),S=g*Math.sin(x*Y),this.x=this.x*k+X.x*S,this.y=this.y*k+X.y*S,this.z=this.z*k+X.z*S}}return this}},{key:"reflect",value:function(g){return g=b.default.Vector.normalize(g),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(X,x,E){var S,k;return X=X instanceof b.default.Vector?(S=X.x||0,k=X.y||0,X.z||0):Array.isArray(X)?(S=X[0]||0,k=X[1]||0,X[2]||0):(S=X||0,k=x||0,E||0),this.x===S&&this.y===k&&this.z===X}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(g){return Math.abs(+(g||0))<=Number.EPSILON?0:g}}])&&D(h.prototype,p),m&&D(h,m),f}();var d=b.default.Vector;K.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(I,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I},A="_lcg_random_state",b=4294967296,w=0;M.default.prototype._lcg=function(D){return this[D]=(1664525*this[D]+1013904223)%b,this[D]/b},M.default.prototype._lcgSetSeed=function(D,d){this[D]=(null==d?Math.random()*b:d)>>>0},M.default.prototype.randomSeed=function(D){this._lcgSetSeed(A,D),this._gaussian_previous=!1},M.default.prototype.random=function(D,d){var f,h;return M.default._validateParameters("random",arguments),f=null!=this[A]?this._lcg(A):Math.random(),void 0===D?f:void 0===d?Array.isArray(D)?D[Math.floor(f*D.length)]:f*D:(d<D&&(h=D,D=d,d=h),f*(d-D)+D)},M.default.prototype.randomGaussian=function(D){var d,f,h,p,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)d=w,this._gaussian_previous=!1;else{for(;1<=(p=(f=this.random(2)-1)*f+(h=this.random(2)-1)*h););d=f*(p=Math.sqrt(-2*Math.log(p)/p)),w=h*p,this._gaussian_previous=!0}return d*m+(D||0)},K.default=I=M.default},{"../core/main":283}],318:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype._angleMode=w.RADIANS,b.default.prototype.acos=function(d){return this._fromRadians(Math.acos(d))},b.default.prototype.asin=function(d){return this._fromRadians(Math.asin(d))},b.default.prototype.atan=function(d){return this._fromRadians(Math.atan(d))},b.default.prototype.atan2=function(d,f){return this._fromRadians(Math.atan2(d,f))},b.default.prototype.cos=function(d){return Math.cos(this._toRadians(d))},b.default.prototype.sin=function(d){return Math.sin(this._toRadians(d))},b.default.prototype.tan=function(d){return Math.tan(this._toRadians(d))},b.default.prototype.degrees=function(d){return d*w.RAD_TO_DEG},b.default.prototype.radians=function(d){return d*w.DEG_TO_RAD},b.default.prototype.angleMode=function(d){if(b.default._validateParameters("angleMode",arguments),void 0===d)return this._angleMode;d!==w.DEGREES&&d!==w.RADIANS||d!==this._angleMode&&(d===w.RADIANS?(this._setProperty("pRotationX",this.pRotationX*w.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*w.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*w.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*w.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*w.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*w.RAD_TO_DEG)),this._angleMode=d)},b.default.prototype._toRadians=function(d){return this._angleMode===w.DEGREES?d*w.DEG_TO_RAD:d},b.default.prototype._toDegrees=function(d){return this._angleMode===w.RADIANS?d*w.RAD_TO_DEG:d},b.default.prototype._fromRadians=function(d){return this._angleMode===w.DEGREES?d*w.RAD_TO_DEG:d},b.default.prototype._fromDegrees=function(d){return this._angleMode===w.RADIANS?d*w.DEG_TO_RAD:d};var D=b.default;K.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(l,ve,K){"use strict";l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.textAlign=function(A,b){var w;return M.default._validateParameters("textAlign",arguments),(w=this._renderer).textAlign.apply(w,arguments)},M.default.prototype.textLeading=function(A){var b;return M.default._validateParameters("textLeading",arguments),(b=this._renderer).textLeading.apply(b,arguments)},M.default.prototype.textSize=function(A){var b;return M.default._validateParameters("textSize",arguments),(b=this._renderer).textSize.apply(b,arguments)},M.default.prototype.textStyle=function(A){var b;return M.default._validateParameters("textStyle",arguments),(b=this._renderer).textStyle.apply(b,arguments)},M.default.prototype.textWidth=function(){for(var A=arguments.length,b=new Array(A),w=0;w<A;w++)b[w]=arguments[w];if(b[0]+="",M.default._validateParameters("textWidth",b),0===b[0].length)return 0;for(var I=b[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),D=[],d=0;d<I.length;d++)D.push(this._renderer.textWidth(I[d]));return Math.max.apply(Math,D)},M.default.prototype.textAscent=function(){for(var A=arguments.length,b=new Array(A),w=0;w<A;w++)b[w]=arguments[w];return M.default._validateParameters("textAscent",b),this._renderer.textAscent()},M.default.prototype.textDescent=function(){for(var A=arguments.length,b=new Array(A),w=0;w<A;w++)b[w]=arguments[w];return M.default._validateParameters("textDescent",b),this._renderer.textDescent()},M.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},M.default.prototype.textWrap=function(A){return M.default._validateParameters("textWrap",[A]),this._renderer.textWrap(A)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(l,ve,K){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function A(h){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.split"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=d(l("../core/constants")),I=d(l("opentype.js"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){if(h&&h.__esModule)return h;if(null===h||"object"!==A(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&((g=E?Object.getOwnPropertyDescriptor(h,m):null)&&(g.get||g.set)?Object.defineProperty(x,m,g):x[m]=h[m]);return x.default=h,p&&p.set(h,x),x}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.loadFont=function(h,p,m){b.default._validateParameters("loadFont",arguments);var g=new b.default.Font(this),x=this;return I.load(h,function(k,X){if(k)return b.default._friendlyFileLoadError(4,h),void 0!==m?m(k):void console.error(k,h);g.font=X,void 0!==p&&p(g),x._decrementPreload();var Y=(X=(k=h.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:k.slice(X+1);["ttf","otf","woff","woff2"].includes(Y)&&(Y=k.slice(0,-1!==X?X:0),(k=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(Y,";\nsrc: url(").concat(h,");\n}\n"))),document.head.appendChild(k))}),g},b.default.prototype.text=function(h,p,m,g,x){var E;return b.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(E=this._renderer).text.apply(E,arguments):this},b.default.prototype.textFont=function(h,p){if(b.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),p&&(this._renderer._setProperty("_textSize",p),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",p*w._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=b.default;K.default=f},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(l,ve,K){"use strict";function M(G){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(z){return typeof z}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(G)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(A=l("../core/main"))&&A.__esModule?A:{default:A},b=function(G){if(G&&G.__esModule)return G;if(null===G||"object"!==I(G)&&"function"!=typeof G)return{default:G};var z=w();if(z&&z.has(G))return z.get(G);var ee,H={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ee in G){var Z;Object.prototype.hasOwnProperty.call(G,ee)&&((Z=re?Object.getOwnPropertyDescriptor(G,ee):null)&&(Z.get||Z.set)?Object.defineProperty(H,ee,Z):H[ee]=G[ee])}return H.default=G,z&&z.set(G,H),H}(l("../core/constants"));function w(){var G;return"function"!=typeof WeakMap?null:(w=function(){return G},G=new WeakMap)}function I(G){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(z){return M(z)}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":M(z)})(G)}function D(G,z){for(var ee=0;ee<z.length;ee++){var H=z[ee];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(G,H.key,H)}}function d(G,z){var ee=G.length;return G[z<0?z%ee+ee:z%ee]}function f(G,z,ee,H){var re,Z,_e;return H?(void 0===f.tmpPoint1&&(f.tmpPoint1=[],f.tmpPoint2=[]),_e=f.tmpPoint2,(Z=f.tmpPoint1).x=z.x-G.x,Z.y=z.y-G.y,_e.x=ee.x-z.x,_e.y=ee.y-z.y,re=Z.x*_e.x+Z.y*_e.y,Z=Math.sqrt(Z.x*Z.x+Z.y*Z.y),_e=Math.sqrt(_e.x*_e.x+_e.y*_e.y),Math.acos(re/(Z*_e))<H):(z[0]-G[0])*(ee[1]-G[1])-(ee[0]-G[0])*(z[1]-G[1])==0}function h(V,Le,ge,Ke,ut,Z,_e,xe,oe){var me=1-oe,ne=(J=Math.pow(me,3))*V+3*(he=Math.pow(me,2))*oe*ge+3*me*oe*oe*ut+(Ce=(le=oe*oe)*oe)*_e,J=J*Le+3*he*oe*Ke+3*me*oe*oe*Z+Ce*xe,he=V+2*oe*(ge-V)+le*(ut-2*ge+V),Ce=Le+2*oe*(Ke-Le)+le*(Z-2*Ke+Le),et=ge+2*oe*(ut-ge)+le*(_e-2*ut+ge),le=Ke+2*oe*(Z-Ke)+le*(xe-2*Z+Ke);return V=me*V+oe*ge,ge=me*Le+oe*Ke,Le=me*ut+oe*_e,Ke=me*Z+oe*xe,ut=90-180*Math.atan2(he-et,Ce-le)/Math.PI,(et<he||Ce<le)&&(ut+=180),{x:ne,y:J,m:{x:he,y:Ce},n:{x:et,y:le},start:{x:V,y:ge},end:{x:Le,y:Ke},alpha:ut}}function p(G,z,ee,H,re,Z,_e,xe,oe){return null==oe?X(G,z,ee,H,re,Z,_e,xe):h(G,z,ee,H,re,Z,_e,xe,function(me,ne,J,he,Ce,et,le,V,ge){if(!(ge<0||X(me,ne,J,he,Ce,et,le,V)<ge)){var Le,Ke=.5,ut=1-Ke;for(Le=X(me,ne,J,he,Ce,et,le,V,ut);.01<Math.abs(Le-ge);)Le=X(me,ne,J,he,Ce,et,le,V,ut+=(Le<ge?1:-1)*(Ke/=2));return ut}}(G,z,ee,H,re,Z,_e,xe,oe))}function m(G,z,ee){for(var H,re,Z,_e,xe,oe=0,me=0,ne=(G=function(J,he){function Ce(vt,Gt,hn){var $n,bn;if(!vt)return["C",Gt.x,Gt.y,Gt.x,Gt.y,Gt.x,Gt.y];switch(vt[0]in{T:1,Q:1}||(Gt.qx=Gt.qy=null),vt[0]){case"M":Gt.X=vt[1],Gt.Y=vt[2];break;case"A":vt=["C"].concat(x.apply(0,[Gt.x,Gt.y].concat(vt.slice(1))));break;case"S":bn="C"===hn||"S"===hn?($n=2*Gt.x-Gt.bx,2*Gt.y-Gt.by):($n=Gt.x,Gt.y),vt=["C",$n,bn].concat(vt.slice(1));break;case"T":"Q"===hn||"T"===hn?(Gt.qx=2*Gt.x-Gt.qx,Gt.qy=2*Gt.y-Gt.qy):(Gt.qx=Gt.x,Gt.qy=Gt.y),vt=["C"].concat(k(Gt.x,Gt.y,Gt.qx,Gt.qy,vt[1],vt[2]));break;case"Q":Gt.qx=vt[1],Gt.qy=vt[2],vt=["C"].concat(k(Gt.x,Gt.y,vt[1],vt[2],vt[3],vt[4]));break;case"L":vt=["C"].concat(S(Gt.x,Gt.y,vt[1],vt[2]));break;case"H":vt=["C"].concat(S(Gt.x,Gt.y,vt[1],Gt.y));break;case"V":vt=["C"].concat(S(Gt.x,Gt.y,Gt.x,vt[1]));break;case"Z":vt=["C"].concat(S(Gt.x,Gt.y,Gt.X,Gt.Y))}return vt}function et(vt,Gt){if(7<vt[Gt].length){vt[Gt].shift();for(var hn=vt[Gt];hn.length;)_t[Gt]="A",Le&&(Nt[Gt]="A"),vt.splice(Gt++,0,["C"].concat(hn.splice(0,6)));vt.splice(Gt,1),V=Math.max(ge.length,Le&&Le.length||0)}}function le(vt,Gt,hn,$n,bn){vt&&Gt&&"M"===vt[bn][0]&&"M"!==Gt[bn][0]&&(Gt.splice(bn,0,["M",$n.x,$n.y]),hn.bx=0,hn.by=0,hn.x=vt[bn][1],hn.y=vt[bn][2],V=Math.max(ge.length,Le&&Le.length||0))}var V,ge=g(J),Le=undefined,Ke={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ut={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},_t=[],Nt=[],dt="",Rt="";V=Math.max(ge.length,Le&&Le.length||0);for(var Bt=0;Bt<V;Bt++){"C"!==(dt=ge[Bt]?ge[Bt][0]:dt)&&(_t[Bt]=dt,Bt&&(Rt=_t[Bt-1])),ge[Bt]=Ce(ge[Bt],Ke,Rt),"A"!==_t[Bt]&&"C"===dt&&(_t[Bt]="C"),et(ge,Bt),Le&&("C"!==(dt=Le[Bt]?Le[Bt][0]:dt)&&(Nt[Bt]=dt,Bt&&(Rt=Nt[Bt-1])),Le[Bt]=Ce(Le[Bt],ut,Rt),"A"!==Nt[Bt]&&"C"===dt&&(Nt[Bt]="C"),et(Le,Bt)),le(ge,Le,Ke,ut,Bt),le(Le,ge,ut,Ke,Bt);var lt=ge[Bt],It=Le&&Le[Bt],Tt=lt.length,Ot=Le&&It.length;Ke.x=lt[Tt-2],Ke.y=lt[Tt-1],Ke.bx=parseFloat(lt[Tt-4])||Ke.x,Ke.by=parseFloat(lt[Tt-3])||Ke.y,ut.bx=Le&&(parseFloat(It[Ot-4])||ut.x),ut.by=Le&&(parseFloat(It[Ot-3])||ut.y),ut.x=Le&&It[Ot-2],ut.y=Le&&It[Ot-1]}return Le?[ge,Le]:ge}(G)).length;me<ne;me++){if("M"===(Z=G[me])[0])H=+Z[1],re=+Z[2];else{if(z<oe+(_e=p(H,re,Z[1],Z[2],Z[3],Z[4],Z[5],Z[6]))&&!ee)return{x:(xe=p(H,re,Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],z-oe)).x,y:xe.y,alpha:xe.alpha};oe+=_e,H=+Z[5],re=+Z[6]}Z.shift()}return(xe=ee?oe:h(H,re,Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],1)).alpha?{x:xe.x,y:xe.y,alpha:xe.alpha}:xe}function g(G){var z=[],ee=0,H=0,re=0,Z=0,_e=0;if(G){"M"===G[0][0]&&(re=ee=+G[0][1],Z=H=+G[0][2],_e++,z[0]=["M",ee,H]);for(var xe,oe,me=3===G.length&&"M"===G[0][0]&&"R"===G[1][0].toUpperCase()&&"Z"===G[2][0].toUpperCase(),ne=_e,J=G.length;ne<J;ne++){if(z.push(xe=[]),(oe=G[ne])[0]!==oe[0].toUpperCase())switch(xe[0]=oe[0].toUpperCase(),xe[0]){case"A":xe[1]=oe[1],xe[2]=oe[2],xe[3]=oe[3],xe[4]=oe[4],xe[5]=oe[5],xe[6]=+(oe[6]+ee),xe[7]=+(oe[7]+H);break;case"V":xe[1]=+oe[1]+H;break;case"H":xe[1]=+oe[1]+ee;break;case"R":for(var he,Ce=2,et=(he=[ee,H].concat(oe.slice(1))).length;Ce<et;Ce++)he[Ce]=+he[Ce]+ee,he[++Ce]=+he[Ce]+H;z.pop(),z=z.concat(E(he,me));break;case"M":re=+oe[1]+ee,Z=+oe[2]+H;break;default:for(var le=1,V=oe.length;le<V;le++)xe[le]=+oe[le]+(le%2?ee:H)}else if("R"===oe[0])he=[ee,H].concat(oe.slice(1)),z.pop(),z=z.concat(E(he,me)),xe=["R"].concat(oe.slice(-2));else for(var ge=0,Le=oe.length;ge<Le;ge++)xe[ge]=oe[ge];switch(xe[0]){case"Z":ee=re,H=Z;break;case"H":ee=xe[1];break;case"V":H=xe[1];break;case"M":re=xe[xe.length-2],Z=xe[xe.length-1];break;default:ee=xe[xe.length-2],H=xe[xe.length-1]}}}return z}function x(G,z,ee,H,Le,_t,Ke,xe,oe,me){function ne(Ot,vt,Gt){return{x:Ot*Math.cos(Gt)-vt*Math.sin(Gt),y:Ot*Math.sin(Gt)+vt*Math.cos(Gt)}}var J,ge=120*(V=Math.PI)/180,he=V/180*(+Le||0),Ce=[],et=(me?(Bt=me[0],J=me[1],dt=me[2],Rt=me[3]):(G=(ut=ne(G,z,-he)).x,z=ut.y,1<(et=(le=(G-(xe=(ut=ne(xe,oe,-he)).x))/2)*le/(ee*ee)+(ut=(z-(oe=ut.y))/2)*ut/(H*H))&&(ee*=et=Math.sqrt(et),H*=et),et=ee*ee,Nt=H*H,dt=(_t=(_t===Ke?-1:1)*Math.sqrt(Math.abs((et*Nt-et*ut*ut-Nt*le*le)/(et*ut*ut+Nt*le*le))))*ee*ut/H+(G+xe)/2,Rt=_t*-H*le/ee+(z+oe)/2,Bt=Math.asin(((z-Rt)/H).toFixed(9)),J=Math.asin(((oe-Rt)/H).toFixed(9)),(Bt=G<dt?V-Bt:Bt)<0&&(Bt=2*V+Bt),(J=xe<dt?V-J:J)<0&&(J=2*V+J),Ke&&J<Bt&&(Bt-=2*V),!Ke&&Bt<J&&(J-=2*V)),J-Bt),le=(Math.abs(et)>ge&&(Nt=J,ut=xe,_t=oe,J=Bt+ge*(Ke&&Bt<J?1:-1),Ce=x(xe=dt+ee*Math.cos(J),oe=Rt+H*Math.sin(J),ee,H,Le,0,Ke,ut,_t,[J,Nt,dt,Rt])),et=J-Bt,Math.cos(Bt)),V=Math.sin(Bt),ut=(ge=Math.cos(J),Le=Math.sin(J),4/3*ee*(Ke=Math.tan(et/4))),Nt=[G,z],dt=[G+ut*V,z-(_t=4/3*H*Ke)*le],Rt=[xe+ut*Le,oe-_t*ge],Bt=[xe,oe];if(dt[0]=2*Nt[0]-dt[0],dt[1]=2*Nt[1]-dt[1],me)return[dt,Rt,Bt].concat(Ce);for(var lt=[],It=0,Tt=(Ce=[dt,Rt,Bt].concat(Ce).join().split(",")).length;It<Tt;It++)lt[It]=It%2?ne(Ce[It-1],Ce[It],he).y:ne(Ce[It],Ce[It+1],he).x;return lt}function E(G,z){for(var ee=[],H=0,re=G.length;H<re-2*!z;H+=2){var Z=[{x:+G[H-2],y:+G[H-1]},{x:+G[H],y:+G[H+1]},{x:+G[H+2],y:+G[H+3]},{x:+G[H+4],y:+G[H+5]}];z?H?re-4===H?Z[3]={x:+G[0],y:+G[1]}:re-2===H&&(Z[2]={x:+G[0],y:+G[1]},Z[3]={x:+G[2],y:+G[3]}):Z[0]={x:+G[re-2],y:+G[re-1]}:re-4===H?Z[3]=Z[2]:H||(Z[0]={x:+G[H],y:+G[H+1]}),ee.push(["C",(6*Z[1].x-Z[0].x+Z[2].x)/6,(6*Z[1].y-Z[0].y+Z[2].y)/6,(Z[1].x+6*Z[2].x-Z[3].x)/6,(Z[1].y+6*Z[2].y-Z[3].y)/6,Z[2].x,Z[2].y])}return ee}function S(G,z,ee,H){return[G,z,ee,H,ee,H]}function k(G,z,ee,H,re,Z){return[1/3*G+2/3*ee,1/3*z+2/3*H,1/3*re+2/3*ee,1/3*Z+2/3*H,re,Z]}function X(G,z,ee,H,re,Z,_e,xe,oe){for(var me=(oe=1<(oe=null==oe?1:oe)?1:oe<0?0:oe)/2,ne=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],J=0,he=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ce=0;Ce<12;Ce++){var et=Y(le=me*ne[Ce]+me,G,ee,re,_e),le=Y(le,z,H,Z,xe);J+=he[Ce]*Math.sqrt(et*et+le*le)}return me*J}function Y(G,z,ee,H,re){return G*(G*(-3*z+9*ee-9*H+3*re)+6*z-12*ee+6*H)-3*z+3*ee}A.default.Font=function(){function G(re){if(!(this instanceof G))throw new TypeError("Cannot call a class as a function");this.parent=re,this.cache={},this.font=void 0}var z,ee;return z=G,(ee=[{key:"textBounds",value:function(re){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,_e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,xe=4<arguments.length?arguments[4]:void 0,oe=xe&&xe.renderer&&xe.renderer._pInst||this.parent,me=oe._renderer.drawingContext,ne=(ne=3<arguments.length?arguments[3]:void 0)||oe._renderer._textSize;if(!_t){for(var J=[],he=[],Ce=[],et=(Ce[0]=[],[]),le=this._scale(ne),V=oe._renderer.textLeading(),ge=0,Le=(this.font.forEachGlyph(re,Z,_e,ne,xe,function(Rt,Bt,lt,It){var Tt=Rt.getMetrics();0===Rt.index?Ce[ge+=1]=[]:(Ce[ge].push(Bt+Tt.xMin*le),Ce[ge].push(Bt+Tt.xMax*le),et.push(lt+ge*V+-Tt.yMin*le),et.push(lt+ge*V+-Tt.yMax*le))}),0<Ce[ge].length&&(J[ge]=Math.min.apply(null,Ce[ge]),he[ge]=Math.max.apply(null,Ce[ge])),0),Ke=0;Ke<=ge;Ke++){J[Ke]=Math.min.apply(null,Ce[Ke]),he[Ke]=Math.max.apply(null,Ce[Ke]);var ut=he[Ke]-J[Ke];Le<ut&&(Le=ut)}var _t={x:me=Math.min.apply(null,J),y:_e=Math.min.apply(null,et),h:Math.max.apply(null,et)-_e,w:Le,advance:me-Z};ne=this._handleAlignment(oe._renderer,re,_t.x,_t.y,_t.w+_t.advance),_t.x=ne.x,_t.y=ne.y}return _t}},{key:"textToPoints",value:function(re,Z,_e,xe,oe){var me,ne=Z,J=[],he=this.parent,Ce=re.split(/\r?\n|\r|\n/g);xe=xe||this.parent._renderer._textSize;for(var et,le,V,ge=0;ge<Ce.length;ge++){var Le=0;Z=ne;for(var Ke=(Ke=Ce[ge]).replace("\t","  "),ut=this._getGlyphs(Ke),_t=0;_t<ut.length;_t++){if(le=Ke,!((V=ut)[et=_t].name&&"space"===V[et].name||le.length===V.length&&" "===le[et]))for(var Nt=function(lt){for(var It,Tt=[],Ot=0;Ot<lt.length;Ot++)"M"===lt[Ot].type&&(It&&Tt.push(It),It=[]),It.push((Gt=void 0,Gt=[(vt=lt[Ot]).type],"M"===vt.type||"L"===vt.type?Gt.push(vt.x,vt.y):"C"===vt.type?Gt.push(vt.x1,vt.y1,vt.x2,vt.y2,vt.x,vt.y):"Q"===vt.type&&Gt.push(vt.x1,vt.y1,vt.x,vt.y),Gt));var vt,Gt;return Tt.push(It),Tt}(ut[_t].getPath(Z,_e,xe).commands),dt=0;dt<Nt.length;dt++)for(var Rt=function(lt,It){It=function($n,bn){if("object"!==I($n))$n=bn;else for(var Xn in bn)void 0===$n[Xn]&&($n[Xn]=bn[Xn]);return $n}(It,{sampleFactor:.1,simplifyThreshold:0});for(var Tt=m(lt,0,1),Ot=Tt/(Tt*It.sampleFactor),vt=[],Gt=0;Gt<Tt;Gt+=Ot)vt.push(m(lt,Gt));return It.simplifyThreshold&&function(hn){for(var $n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Xn=hn.length-1;3<hn.length&&0<=Xn;--Xn)f(d(hn,Xn-1),d(hn,Xn),d(hn,Xn+1),$n)&&hn.splice(Xn%hn.length,1)}(vt,It.simplifyThreshold),vt}(Nt[dt],oe),Bt=0;Bt<Rt.length;Bt++)Rt[Bt].x+=Le,me=this._handleAlignment(he._renderer,Ke,Rt[Bt].x,Rt[Bt].y),Rt[Bt].x=me.x,Rt[Bt].y=me.y,J.push(Rt[Bt]);Le+=ut[_t].advanceWidth*this._scale(xe)}_e+=this.parent._renderer._textLeading}return J}},{key:"_getGlyphs",value:function(re){return this.font.stringToGlyphs(re)}},{key:"_getPath",value:function(re,me,_e,xe){var oe=(xe&&xe.renderer&&xe.renderer._pInst||this.parent)._renderer;return me=this._handleAlignment(oe,re,me,_e),this.font.getPath(re,me.x,me.y,oe._textSize,xe)}},{key:"_getPathData",value:function(re,Z,_e,xe){var oe=3;return"string"==typeof re&&2<arguments.length?re=this._getPath(re,Z,_e,xe):"object"===I(Z)&&(xe=Z),xe&&"number"==typeof xe.decimals&&(oe=xe.decimals),re.toPathData(oe)}},{key:"_getSVG",value:function(re,Z,_e,xe){var oe=3;return"string"==typeof re&&2<arguments.length?re=this._getPath(re,Z,_e,xe):"object"===I(Z)&&(xe=Z),xe&&("number"==typeof xe.decimals&&(oe=xe.decimals),"number"==typeof xe.strokeWidth&&(re.strokeWidth=xe.strokeWidth),void 0!==xe.fill&&(re.fill=xe.fill),void 0!==xe.stroke&&(re.stroke=xe.stroke)),re.toSVG(oe)}},{key:"_renderPath",value:function(ne,he,Ce,xe){var oe=xe&&xe.renderer||this.parent._renderer,me=oe.drawingContext,J=(ne=("object"===I(ne)&&ne.commands?ne:this._getPath(ne,he,Ce,xe)).commands,oe._clipping||me.beginPath(),!0);he=!1,Ce=void 0;try{for(var et,le=ne[Symbol.iterator]();!(J=(et=le.next()).done);J=!0){var V=et.value;"M"===V.type?me.moveTo(V.x,V.y):"L"===V.type?me.lineTo(V.x,V.y):"C"===V.type?me.bezierCurveTo(V.x1,V.y1,V.x2,V.y2,V.x,V.y):"Q"===V.type?me.quadraticCurveTo(V.x1,V.y1,V.x,V.y):"Z"===V.type&&me.closePath()}}catch(ge){he=!0,Ce=ge}finally{try{J||null==le.return||le.return()}finally{if(he)throw Ce}}return oe._doStroke&&oe._strokeSet&&!oe._clipping&&me.stroke(),oe._doFill&&!oe._clipping&&(oe._fillSet||oe._setFill(b._DEFAULT_TEXT_FILL),me.fill()),this}},{key:"_textWidth",value:function(re,Z){return this.font.getAdvanceWidth(re,Z)}},{key:"_textAscent",value:function(re){return this.font.ascender*this._scale(re)}},{key:"_textDescent",value:function(re){return-this.font.descender*this._scale(re)}},{key:"_scale",value:function(re){return 1/this.font.unitsPerEm*(re||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(re,Z,_e,xe,oe){var me=re._textSize;switch(void 0===oe&&(oe=this._textWidth(Z,me)),re._textAlign){case b.CENTER:_e-=oe/2;break;case b.RIGHT:_e-=oe}switch(re._textBaseline){case b.TOP:xe+=this._textAscent(me);break;case b.CENTER:xe+=this._textAscent(me)/2;break;case b.BOTTOM:xe-=this._textDescent(me)}return{x:_e,y:xe}}}])&&D(z.prototype,ee),G}(),K.default=l=A.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(l,ve,K){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.append=function(M,A){return M.push(A),M},l.default.prototype.arrayCopy=function(M,A,b,w,I){var D,d;M=void 0!==I?(d=Math.min(I,M.length),D=w,M.slice(A,d+A)):(d=void 0!==b?(d=b,Math.min(d,M.length)):M.length,b=A,M.slice(D=0,d)),Array.prototype.splice.apply(b,[D,d].concat(M))},l.default.prototype.concat=function(M,A){return M.concat(A)},l.default.prototype.reverse=function(M){return M.reverse()},l.default.prototype.shorten=function(M){return M.pop(),M},l.default.prototype.shuffle=function(M,A){for(var b,w,I=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(M),D=(M=A||I?M:M.slice()).length;1<D;)b=this.random(0,1)*D|0,w=M[--D],M[D]=M[b],M[b]=w;return M},l.default.prototype.sort=function(M,w){var b=w?M.slice(0,Math.min(w,M.length)):M;return w=w?M.slice(Math.min(w,M.length)):[],(b="string"==typeof b[0]?b.sort():b.sort(function(I,D){return I-D})).concat(w)},l.default.prototype.splice=function(M,A,b){return Array.prototype.splice.apply(M,[b,0].concat(A)),M},l.default.prototype.subset=function(M,A,b){return M.slice(A,void 0!==b?A+b:M.length)},K.default=l=l.default},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(l,ve,K){"use strict";l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.float=function(A){return A instanceof Array?A.map(parseFloat):parseFloat(A)},M.default.prototype.int=function(A){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return A===1/0||"Infinity"===A?1/0:A===-1/0||"-Infinity"===A?-1/0:"string"==typeof A?parseInt(A,b):"number"==typeof A?0|A:"boolean"==typeof A?A?1:0:A instanceof Array?A.map(function(w){return M.default.prototype.int(w,b)}):void 0},M.default.prototype.str=function(A){return A instanceof Array?A.map(M.default.prototype.str):String(A)},M.default.prototype.boolean=function(A){return"number"==typeof A?0!==A:"string"==typeof A?"true"===A.toLowerCase():"boolean"==typeof A?A:A instanceof Array?A.map(M.default.prototype.boolean):void 0},M.default.prototype.byte=function(A){return"number"==typeof(A=M.default.prototype.int(A,10))?(A+128)%256-128:A instanceof Array?A.map(M.default.prototype.byte):void 0},M.default.prototype.char=function(A){return"number"!=typeof A||isNaN(A)?A instanceof Array?A.map(M.default.prototype.char):"string"==typeof A?M.default.prototype.char(parseInt(A,10)):void 0:String.fromCharCode(A)},M.default.prototype.unchar=function(A){return"string"==typeof A&&1===A.length?A.charCodeAt(0):A instanceof Array?A.map(M.default.prototype.unchar):void 0},M.default.prototype.hex=function(A,b){if(b=null==b?8:b,A instanceof Array)return A.map(function(I){return M.default.prototype.hex(I,b)});if(A===1/0||A===-1/0)return(A===1/0?"F":"0").repeat(b);if("number"==typeof A){A<0&&(A=4294967295+A+1);for(var w=Number(A).toString(16).toUpperCase();w.length<b;)w="0".concat(w);return w.length>=b?w.substring(w.length-b,w.length):w}},M.default.prototype.unhex=function(A){return A instanceof Array?A.map(M.default.prototype.unhex):parseInt("0x".concat(A),16)},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(d=l("../core/main"))&&d.__esModule?d:{default:d};function A(f,h){return function(p){if(Array.isArray(p))return p}(f)||function(p,m){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p)){var g=[],x=!0,E=!1,S=void 0;try{for(var k,X=p[Symbol.iterator]();!(x=(k=X.next()).done)&&(g.push(k.value),!m||g.length!==m);x=!0);}catch(Y){E=!0,S=Y}finally{try{x||null==X.return||X.return()}finally{if(E)throw S}}return g}}(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(f,h,p){var m,g=f<0,x=(E=A((f=Math.abs(f)).toString().split("."),2))[0],E=E[1];return void 0===p?(x=x.padStart(h,"0"),m=E?x+"."+E:x,g?"-"+m:m):(x=(m=A(f.toFixed(p).toString().split("."),2))[0],E=m[1],x=x.padStart(h,"0"),f=void 0===E?x:x+"."+E,g?"-"+f:f)}function w(g,h){var p=(g=g.toString()).indexOf("."),m=-1!==p?g.substring(p):"";if(g=(g=-1!==p?g.substring(0,p):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===h)m="";else if(void 0!==h)if(h>m.length)for(var x=h-(m+=-1===p?".":"").length+1,E=0;E<x;E++)m+="0";else m=m.substring(0,h+1);return g+m}function I(f){return 0<parseFloat(f)?"+".concat(f.toString()):f.toString()}function D(f){return 0<=parseFloat(f)?" ".concat(f.toString()):f.toString()}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),M.default.prototype.join=function(f,h){return M.default._validateParameters("join",arguments),f.join(h)},M.default.prototype.match=function(f,h){return M.default._validateParameters("match",arguments),f.match(h)},M.default.prototype.matchAll=function(f,h){M.default._validateParameters("matchAll",arguments);for(var p=new RegExp(h,"g"),m=p.exec(f),g=[];null!==m;)g.push(m),m=p.exec(f);return g},M.default.prototype.nf=function(f,h,p){return M.default._validateParameters("nf",arguments),f instanceof Array?f.map(function(m){return b(m,h,p)}):"[object Arguments]"===Object.prototype.toString.call(f)?3===f.length?this.nf(f[0],f[1],f[2]):2===f.length?this.nf(f[0],f[1]):this.nf(f[0]):b(f,h,p)},M.default.prototype.nfc=function(f,h){return M.default._validateParameters("nfc",arguments),f instanceof Array?f.map(function(p){return w(p,h)}):w(f,h)},M.default.prototype.nfp=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfp",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(I):I(m)},M.default.prototype.nfs=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfs",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(D):D(m)},M.default.prototype.split=function(f,h){return M.default._validateParameters("split",arguments),f.split(h)},M.default.prototype.splitTokens=function(f,h){var p,m;return M.default._validateParameters("splitTokens",arguments),m=void 0!==h?(m=/\]/g.exec(h),(p=/\[/g.exec(h))&&m?(h=h.slice(0,m.index)+h.slice(m.index+1),p=/\[/g.exec(h),h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):m?(h=h.slice(0,m.index)+h.slice(m.index+1),new RegExp("[".concat(h,"\\]]"),"g")):p?(h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,f.split(m).filter(function(g){return g})},M.default.prototype.trim=function(f){return M.default._validateParameters("trim",arguments),f instanceof Array?f.map(this.trim):f.trim()};var d=M.default;K.default=d},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.day=function(){return(new Date).getDate()},l.default.prototype.hour=function(){return(new Date).getHours()},l.default.prototype.minute=function(){return(new Date).getMinutes()},l.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},l.default.prototype.month=function(){return(new Date).getMonth()+1},l.default.prototype.second=function(){return(new Date).getSeconds()},l.default.prototype.year=function(){return(new Date).getFullYear()},K.default=l=l.default},{"../core/main":283}],326:[function(l,ve,K){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function A(f){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(d=l("../core/main"))&&d.__esModule?d:{default:d},w=(l("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==A(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("../core/constants")));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h,p,m,g,x,E){f=f<=0?1:f,h=h<0?0:h,p=p<=0?f:p,m=m<3?3:m;for(var S,k,X=(x=void 0===x||x)?-2:0,Y=(g=g<1?1:g)+((E=void 0===E?0!==h:E)?2:0),G=Math.atan2(f-h,p),z=Math.sin(G),ee=Math.cos(G),H=X;H<=Y;++H){var re=H/g,Z=p*re,_e=void 0;for(_e=H<0?(re=Z=0,f):g<H?(Z=p,re=1,h):f+(h-f)*re,-2!==H&&H!==g+2||(_e=0),Z-=p/2,S=0;S<m;++S){var xe=S/(m-1),me=2*Math.PI*xe,oe=Math.sin(me),ne=(me=Math.cos(me),this.vertices.push(new b.default.Vector(oe*_e,Z,me*_e)));ne=H<0?new b.default.Vector(0,-1,0):g<H&&h?new b.default.Vector(0,1,0):new b.default.Vector(oe*ee,z,me*ee),this.vertexNormals.push(ne),this.uvs.push(xe,re)}}var J=0;if(x){for(k=0;k<m;++k)this.faces.push([J+k,J+m+(k+1)%m,J+m+k]);J+=2*m}for(H=0;H<g;++H){for(S=0;S<m;++S){var he=(S+1)%m;this.faces.push([J+S,J+he,J+m+he]),this.faces.push([J+S,J+m+he,J+m+S])}J+=m}if(E)for(J+=m,S=0;S<m;++S)this.faces.push([J+S,J+(S+1)%m,J+m])}b.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},b.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},b.default.prototype.buildGeometry=function(f){return this._renderer.buildGeometry(f)},b.default.prototype.freeGeometry=function(f){this._renderer._freeBuffers(f.gid)},b.default.prototype.plane=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=(this._assert3d("plane"),b.default._validateParameters("plane",arguments),"plane|".concat(m,"|").concat(g));return this._renderer.geometryInHash(x)||((f=new b.default.Geometry(m,g,function(){for(var E,S,k=0;k<=this.detailY;k++)for(var X=k/this.detailY,Y=0;Y<=this.detailX;Y++)S=new b.default.Vector((E=Y/this.detailX)-.5,X-.5,0),this.vertices.push(S),this.uvs.push(E,X)})).computeFaces().computeNormals(),m<=1&&g<=1?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,h,p,1),this},b.default.prototype.box=function(f,h,p,m,g){this._assert3d("box"),b.default._validateParameters("box",arguments),void 0===f&&(f=50),void 0===h&&(h=f),void 0===p&&(p=h);var x,E=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===g&&(g=E?1:4),E="box|".concat(m=void 0===m?E?1:4:m,"|").concat(g),this._renderer.geometryInHash(E)||((x=new b.default.Geometry(m,g,function(){var S=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(k,X){X*=4;for(var Y=0;Y<4;Y++){var G=new b.default.Vector((2*(1&(G=k[Y]))-1)/2,((2&G)-1)/2,((4&G)/2-1)/2);S.vertices.push(G),S.uvs.push(1&Y,(2&Y)/2)}S.faces.push([X,1+X,2+X]),S.faces.push([2+X,1+X,3+X])})})).computeNormals(),m<=4&&g<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(E,x)),this._renderer.drawBuffersScaled(E,f,h,p),this},b.default.prototype.sphere=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),b.default._validateParameters("sphere",arguments),this.ellipsoid(f,f,f,h,p),this},b.default.prototype.cylinder=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],S=(this._assert3d("cylinder"),b.default._validateParameters("cylinder",arguments),"cylinder|".concat(m,"|").concat(g,"|").concat(x,"|").concat(E));return this._renderer.geometryInHash(S)||(f=new b.default.Geometry(m,g),D.call(f,1,1,1,m,g,x,E),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,f)),this._renderer.drawBuffersScaled(S,h,p,h),this},b.default.prototype.cone=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=(this._assert3d("cone"),b.default._validateParameters("cone",arguments),"cone|".concat(m,"|").concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||(f=new b.default.Geometry(m,g),D.call(f,1,0,1,m,g,x,!1),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,h),this},b.default.prototype.ellipsoid=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,x=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,E=(this._assert3d("ellipsoid"),b.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||((f=new b.default.Geometry(g,x,function(){for(var S=0;S<=this.detailY;S++)for(var k=S/this.detailY,X=Math.PI*k-Math.PI/2,Y=Math.cos(X),G=Math.sin(X),z=0;z<=this.detailX;z++){var ee=z/this.detailX,re=2*Math.PI*ee,H=Math.cos(re);re=Math.sin(re),re=new b.default.Vector(Y*re,G,Y*H),this.vertices.push(re),this.vertexNormals.push(re),this.uvs.push(ee,k)}})).computeFaces(),g<=24&&x<=24?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,m),this},b.default.prototype.torus=function(f,E,p,m){if(this._assert3d("torus"),b.default._validateParameters("torus",arguments),void 0===f)f=50;else if(!f)return;if(void 0===E)E=10;else if(!E)return;void 0===p&&(p=24),void 0===m&&(m=16);var g,x=(E/f).toPrecision(4);return E="torus|".concat(x,"|").concat(p,"|").concat(m),this._renderer.geometryInHash(E)||((g=new b.default.Geometry(p,m,function(){for(var S=0;S<=this.detailY;S++)for(var k=S/this.detailY,X=2*Math.PI*k,Y=Math.cos(X),G=Math.sin(X),z=1+x*Y,ee=0;ee<=this.detailX;ee++){var H=ee/this.detailX,re=2*Math.PI*H,_e=Math.cos(re),Z=(re=Math.sin(re),new b.default.Vector(z*_e,z*re,x*G));_e=new b.default.Vector(Y*_e,Y*re,G),this.vertices.push(Z),this.vertexNormals.push(_e),this.uvs.push(H,k)}})).computeFaces(),p<=24&&m<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,g)),this._renderer.drawBuffersScaled(E,f,f,f),this},b.default.RendererGL.prototype.point=function(f,h){var p=[];return p.push(new b.default.Vector(f,h,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(p,this.immediateMode.buffers.point),this},b.default.RendererGL.prototype.triangle=function(E){var h=E[0],p=E[1],m=E[2],g=E[3],x=E[4],S=(E=E[5],this.geometryInHash("tri")||((S=new b.default.Geometry(1,1,function(){var Y=[];Y.push(new b.default.Vector(0,0,0)),Y.push(new b.default.Vector(1,0,0)),Y.push(new b.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=Y,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uModelMatrix.copy());try{var k=Math.sign(h*g-m*p+m*E-x*g+x*p-h*E),X=new b.default.Matrix([m-h,g-p,0,0,x-h,E-p,0,0,0,0,k,0,h,p,0,1]).mult(this.uModelMatrix);this.uModelMatrix=X,this.drawBuffers("tri")}finally{this.uModelMatrix=S}return this},b.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,w.TWO_PI,w.OPEN,f[4])},b.default.RendererGL.prototype.arc=function(){var f,h=arguments.length<=0?void 0:arguments[0],p=arguments.length<=1?void 0:arguments[1],m=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],E=arguments.length<=5?void 0:arguments[5],S=arguments.length<=6?void 0:arguments[6],k=(arguments.length<=7?void 0:arguments[7])||25,X=(Math.abs(E-x)>=w.TWO_PI?"".concat(Y="ellipse","|"):"".concat(Y="arc","|").concat(x,"|").concat(E,"|").concat(S,"|")).concat(k,"|"),Y=(this.geometryInHash(X)||((f=new b.default.Geometry(k,1,function(){if(x.toFixed(10)!==E.toFixed(10)){S!==w.PIE&&void 0!==S||(this.vertices.push(new b.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var G=0;G<=k;G++){var ee=G/k*(E-x)+x,z=.5+Math.cos(ee)/2;ee=.5+Math.sin(ee)/2,this.vertices.push(new b.default.Vector(z,ee,0)),this.uvs.push([z,ee]),G<k-1&&(this.faces.push([0,G+1,G+2]),this.edges.push([G+1,G+2]))}switch(S){case w.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case w.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case w.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),k<=50?f._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(Y," with more than 50 detail")),this.createBuffers(X,f)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(X)}finally{this.uModelMatrix=Y}return this},b.default.RendererGL.prototype.rect=function(f){var h=f[0],p=f[1],m=f[2],g=f[3];if(void 0===f[4]){var S=this._pInst._glAttributes.perPixelLighting,x=f[4]||(S?1:24),E=f[5]||(S?1:16),k=(S="rect|".concat(x,"|").concat(E),this.geometryInHash(S)||((k=new b.default.Geometry(x,E,function(){for(var ne=0;ne<=this.detailY;ne++)for(var J=ne/this.detailY,he=0;he<=this.detailX;he++){var Ce=he/this.detailX,et=new b.default.Vector(Ce,J,0);this.vertices.push(et),this.uvs.push(Ce,J)}0<x&&0<E&&(this.edges=[[0,x],[x,(x+1)*(E+1)-1],[(x+1)*(E+1)-1,(x+1)*E],[(x+1)*E,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,k)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(S)}finally{this.uModelMatrix=k}}else{S=f[4],k=void 0===f[5]?S:f[5];var X=void 0===f[6]?k:f[6],re=(f=void 0===f[7]?X:f[7],m),Y=g,G=((re+=h)<h&&(ee=h,h=re,re=ee),(Y+=p)<p&&(ee=p,p=Y,Y=ee),(ee=Math.min((re-h)/2,(Y-p)/2))<S&&(S=ee),ee<k&&(k=ee),ee<X&&(X=ee),ee<f&&(f=ee),h),z=p,ee=re,H=(h=Y,this.beginShape(),0!==k?(this.vertex(ee-k,z),this.quadraticVertex(ee,z,ee,z+k)):this.vertex(ee,z),0!==X?(this.vertex(ee,h-X),this.quadraticVertex(ee,h,ee-X,h)):this.vertex(ee,h),0!==f?(this.vertex(G+f,h),this.quadraticVertex(G,h,G,h-f)):this.vertex(G,h),0!==S?(this.vertex(G,z+S),this.quadraticVertex(G,z,G+S,z)):this.vertex(G,z),!(this.immediateMode.geometry.uvs.length=0));p=!1,re=void 0;try{for(var Z,_e=this.immediateMode.geometry.vertices[Symbol.iterator]();!(H=(Z=_e.next()).done);H=!0){var xe=Z.value;this.immediateMode.geometry.uvs.push((xe.x-G)/m,(xe.y-z)/g)}}catch(le){p=!0,re=le}finally{try{H||null==_e.return||_e.return()}finally{if(p)throw re}}this.endShape(w.CLOSE)}return this},b.default.RendererGL.prototype.quad=function(f,h,p,m,g,x,E,S,k,X,Y,G){var z=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,ee=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,H="quad|".concat(f,"|").concat(h,"|").concat(p,"|").concat(m,"|").concat(g,"|").concat(x,"|").concat(E,"|").concat(S,"|").concat(k,"|").concat(X,"|").concat(Y,"|").concat(G,"|").concat(z,"|").concat(ee);if(!this.geometryInHash(H)){var re=new b.default.Geometry(z,ee,function(){for(var he=1/(this.detailX-1),Ce=1/(this.detailY-1),et=0;et<this.detailY;et++)for(var le=0;le<this.detailX;le++){var V=le*he,ge=et*Ce;this.vertices.push(new b.default.Vector((1-V)*((1-ge)*f+ge*X)+V*((1-ge)*m+ge*E),(1-V)*((1-ge)*h+ge*Y)+V*((1-ge)*g+ge*S),(1-V)*((1-ge)*p+ge*G)+V*((1-ge)*x+ge*k))),this.uvs.push([V,ge])}});re.faces=[];for(var Z=0;Z<ee-1;Z++)for(var _e=0;_e<z-1;_e++){var xe=_e+Z*z,oe=_e+1+(Z+1)*z,me=_e+(Z+1)*z;re.faces.push([xe,_e+1+Z*z,oe]),re.faces.push([xe,oe,me])}re.computeNormals();for(var ne=[re.edges.length=0,2,3,1],J=0;J<ne.length;J++)re.edges.push([ne[J],ne[(J+1)%ne.length]]);re._edgesToVertices(),this.createBuffers(H,re)}return this.drawBuffers(H),this},b.default.RendererGL.prototype.bezier=function(f,h,p,m,g,x,E,S,k,X,Y,G){8===arguments.length&&(Y=S,X=E,S=x,E=g,g=m,m=p,p=x=k=G=0);var z=this._pInst._bezierDetail||20;this.beginShape();for(var ee=0;ee<=z;ee++){var H=Math.pow(1-ee/z,3),re=ee/z*3*Math.pow(1-ee/z,2),Z=3*Math.pow(ee/z,2)*(1-ee/z),_e=Math.pow(ee/z,3);this.vertex(f*H+m*re+E*Z+X*_e,h*H+g*re+S*Z+Y*_e,p*H+x*re+k*Z+G*_e)}return this.endShape(),this},b.default.RendererGL.prototype.curve=function(f,h,p,m,g,x,E,S,k,X,Y,G){8===arguments.length&&(X=E,Y=S,E=g,S=m,g=m=p,p=x=k=G=0);var z=this._pInst._curveDetail;this.beginShape();for(var ee=0;ee<=z;ee++){var H=.5*Math.pow(ee/z,3),re=.5*Math.pow(ee/z,2),Z=ee/z*.5;this.vertex(H*(3*m-f-3*E+X)+re*(2*f-5*m+4*E-X)+Z*(-f+E)+2*m*.5,H*(3*g-h-3*S+Y)+re*(2*h-5*g+4*S-Y)+Z*(-h+S)+2*g*.5,H*(3*x-p-3*k+G)+re*(2*p-5*x+4*k-G)+Z*(-p+k)+2*x*.5)}return this.endShape(),this},b.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},b.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var f,h,p,m,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var X=1/this._lutBezierDetail,Y=X,G=1,z=0;Y<1;){if(x=parseFloat(Y.toFixed(6)),this._lookUpTableBezier[z]=this._bezierCoefficients(x),G.toFixed(6)===X.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(Y.toFixed(6)),++z,this._lookUpTableBezier[z]=this._bezierCoefficients(x);break}Y+=X,G-=X,++z}}for(var ee=this._lookUpTableBezier.length,H=[],re=0;re<4;re++)H.push([]);H[0]=this.immediateMode.geometry.vertexColors.slice(-4),H[3]=this.curFillColor.slice();var Z=[];for(re=0;re<4;re++)Z.push([]);if(Z[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Z[3]=this.curStrokeColor.slice(),6===k){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var _e=Math.hypot(E[0]-E[1],S[0]-S[1]),oe=Math.hypot(E[1]-E[2],S[1]-S[2]),xe=Math.hypot(E[2]-E[3],S[2]-S[3]);for(_e/=oe=_e+oe+xe,xe/=oe,g=0;g<4;g++)H[1].push(H[0][g]*(1-_e)+H[3][g]*_e),H[2].push(H[0][g]*xe+H[3][g]*(1-xe)),Z[1].push(Z[0][g]*(1-_e)+Z[3][g]*_e),Z[2].push(Z[0][g]*xe+Z[3][g]*(1-xe));for(m=0;m<ee;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],re=f=h=0;re<4;re++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][re]*H[re][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][re]*Z[re][g];f+=E[re]*this._lookUpTableBezier[m][re],h+=S[re]*this._lookUpTableBezier[m][re]}this.vertex(f,h)}this.curFillColor=H[3],this.curStrokeColor=Z[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===k){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var me=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],ne=Math.hypot(E[0]-E[1],S[0]-S[1],me[0]-me[1]),J=(oe=Math.hypot(E[1]-E[2],S[1]-S[2],me[1]-me[2]),Math.hypot(E[2]-E[3],S[2]-S[3],me[2]-me[3]));for(ne/=k=ne+oe+J,J/=k,g=0;g<4;g++)H[1].push(H[0][g]*(1-ne)+H[3][g]*ne),H[2].push(H[0][g]*J+H[3][g]*(1-J)),Z[1].push(Z[0][g]*(1-ne)+Z[3][g]*ne),Z[2].push(Z[0][g]*J+Z[3][g]*(1-J));for(m=0;m<ee;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],re=f=h=p=0;re<4;re++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][re]*H[re][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][re]*Z[re][g];f+=E[re]*this._lookUpTableBezier[m][re],h+=S[re]*this._lookUpTableBezier[m][re],p+=me[re]*this._lookUpTableBezier[m][re]}this.vertex(f,h,p)}this.curFillColor=H[3],this.curStrokeColor=Z[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},b.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var f,h,p,m,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var X=1/this._lutQuadraticDetail,Y=X,G=1,z=0;Y<1;){if(x=parseFloat(Y.toFixed(6)),this._lookUpTableQuadratic[z]=this._quadraticCoefficients(x),G.toFixed(6)===X.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(Y.toFixed(6)),++z,this._lookUpTableQuadratic[z]=this._quadraticCoefficients(x);break}Y+=X,G-=X,++z}}for(var ee=this._lookUpTableQuadratic.length,H=[],re=0;re<3;re++)H.push([]);H[0]=this.immediateMode.geometry.vertexColors.slice(-4),H[2]=this.curFillColor.slice();var Z=[];for(re=0;re<3;re++)Z.push([]);if(Z[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Z[2]=this.curStrokeColor.slice(),4===k){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var _e=Math.hypot(E[0]-E[1],S[0]-S[1]);for(_e/=_e+Math.hypot(E[1]-E[2],S[1]-S[2]),g=0;g<4;g++)H[1].push(H[0][g]*(1-_e)+H[2][g]*_e),Z[1].push(Z[0][g]*(1-_e)+Z[2][g]*_e);for(m=0;m<ee;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],re=f=h=0;re<3;re++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][re]*H[re][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][re]*Z[re][g];f+=E[re]*this._lookUpTableQuadratic[m][re],h+=S[re]*this._lookUpTableQuadratic[m][re]}this.vertex(f,h)}this.curFillColor=H[2],this.curStrokeColor=Z[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===k){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var xe=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],oe=Math.hypot(E[0]-E[1],S[0]-S[1],xe[0]-xe[1]);for(oe/=oe+Math.hypot(E[1]-E[2],S[1]-S[2],xe[1]-xe[2]),g=0;g<4;g++)H[1].push(H[0][g]*(1-oe)+H[2][g]*oe),Z[1].push(Z[0][g]*(1-oe)+Z[2][g]*oe);for(m=0;m<ee;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],re=f=h=p=0;re<3;re++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][re]*H[re][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][re]*Z[re][g];f+=E[re]*this._lookUpTableQuadratic[m][re],h+=S[re]*this._lookUpTableQuadratic[m][re],p+=xe[re]*this._lookUpTableQuadratic[m][re]}this.vertex(f,h,p)}this.curFillColor=H[2],this.curStrokeColor=Z[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},b.default.RendererGL.prototype.curveVertex=function(){var f,g,x,E=[],S=[],k=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var X=1/this._lutBezierDetail,Y=X,G=1,z=0;Y<1;){if(x=parseFloat(Y.toFixed(6)),this._lookUpTableBezier[z]=this._bezierCoefficients(x),G.toFixed(6)===X.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(Y.toFixed(6)),++z,this._lookUpTableBezier[z]=this._bezierCoefficients(x);break}Y+=X,G-=X,++z}}var ee=this._lookUpTableBezier.length;if(2===k){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<ee;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3]);for(g=0;g<k;g++)this.immediateMode._curveVertex.shift()}}else if(3===k&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<ee;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3],f[0]*this._lookUpTableBezier[g][0]+f[1]*this._lookUpTableBezier[g][1]+f[2]*this._lookUpTableBezier[g][2]+f[3]*this._lookUpTableBezier[g][3]);for(g=0;g<k;g++)this.immediateMode._curveVertex.shift()}},b.default.RendererGL.prototype.image=function(f,G,p,z,g,x,E,S,k){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(w.NORMAL);var X=0,Y=(G<=f.width&&(X=G/f.width),1);G+z<=f.width&&(Y=(G+z)/f.width),G=0,p<=f.height&&(G=p/f.height),z=1,p+g<=f.height&&(z=(p+g)/f.height),this.beginShape(),this.vertex(x,E,0,X,G),this.vertex(x+S,E,0,Y,G),this.vertex(x+S,E+k,0,Y,z),this.vertex(x,E+k,0,X,z),this.endShape(w.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(w.REMOVE)};var d=b.default;K.default=d},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(l,ve,K){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function A(h){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==A(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(h,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}var f=function(){function h(x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new b.default.Matrix,x.uModelMatrix=new b.default.Matrix,this.geometry=new b.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var p,m;return p=h,(m=[{key:"transformVertices",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uModelMatrix.multiplyPoint(S)}):x}},{key:"transformNormals",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uNMatrix.multiplyVec3(S)}):x}},{key:"addGeometry",value:function(x){for(var E,S=this,k=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(Y,G){return Y===S.identityMatrix.mat4[G]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),X=((E=this.geometry.vertices).push.apply(E,D(this.transformVertices(x.vertices))),(E=this.geometry.vertexNormals).push.apply(E,D(this.transformNormals(x.vertexNormals))),(E=this.geometry.uvs).push.apply(E,D(x.uvs)),this.renderer._doFill&&(E=this.geometry.faces).push.apply(E,D(x.faces.map(function(Y){return Y.map(function(G){return G+k})}))),this.renderer._doStroke&&(E=this.geometry.edges).push.apply(E,D(x.edges.map(function(Y){return Y.map(function(G){return G+k})}))),D(x.vertexColors));X.length<4*x.vertices.length;)X.push.apply(X,D(this.renderer.curFillColor));(E=this.geometry.vertexColors).push.apply(E,D(X))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,E=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(E===w.TRIANGLE_STRIP||E===w.QUAD_STRIP)for(var k=2;k<x.vertices.length;k++)S.push(k%2==0?[k,k-1,k-2]:[k,k-2,k-1]);else if(E===w.TRIANGLE_FAN)for(var X=2;X<x.vertices.length;X++)S.push([0,X-1,X]);else for(var Y=0;Y<x.vertices.length;Y+=3)S.push([Y,Y+1,Y+2]);this.addGeometry(Object.assign({},x,{faces:S}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&d(p.prototype,m),h}();f.nextGeometryId=0,K.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var A=(D=l("../core/main"))&&D.__esModule?D:{default:D},b=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==I(d)&&"function"!=typeof d)return{default:d};var f=w();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function w(){var d;return"function"!=typeof WeakMap?null:(w=function(){return d},d=new WeakMap)}function I(d){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}A.default.prototype.orbitControl=function(d,f,h,k){var m=this,g=(this._assert3d("orbitControl"),A.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===d&&(d=1),void 0===f&&(f=d),void 0===h&&(h=1),"object"!==I(k)&&(k={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var Y=k.disableTouchActions;!0===this.touchActionsDisabled||void 0!==Y&&!Y||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),k=void 0!==(Y=k.freeRotation)&&Y;var x,E,S,X=[],G=(this.touches.forEach(function(_e){m._renderer.prevTouches.forEach(function(xe){_e.id===xe.id&&X.push(xe={x:_e.x,y:_e.y,px:xe.x,py:xe.y})})}),this._renderer.prevTouches=this.touches,Y=0,0),z=0,ee=0,H=0,re=this.height<this.width?this.height:this.width,Z=!1;return 0<X.length?(Z=0<X[0].x&&X[0].x<this.width&&0<X[0].y&&X[0].y<this.height,1===X.length?(G=-d*((x=X[0]).x-x.px)/re,z=f*(x.y-x.py)/re):(x=X[0],E=X[1],Y=-(Math.hypot(x.x-E.x,x.y-E.y)-Math.hypot(x.px-E.px,x.py-E.py))*h*4e-4,ee=.5*(x.x+E.x)-.5*(x.px+E.px),H=.5*(x.y+E.y)-.5*(x.py+E.py)),0<this.touches.length?Z&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(Z=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(Y=Math.sign(this._mouseWheelDeltaY)*h,Y*=.01,this._mouseWheelDeltaY=0,Z&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(G=-d*this.movedX/re,z=f*this.movedY/re):this.mouseButton===this.RIGHT&&(ee=this.movedX,H=this.movedY*g.yScale),Z&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==Y&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=Y),.001<Math.abs(this._renderer.zoomVelocity)?(k?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),0!==g.projMatrix.mat4[15]&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===G&&0===z||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*G,.6*z),1e-6<this._renderer.rotateVelocity.magSq()?(k?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===ee&&0===H||!this._renderer.executeRotateAndMove||this._renderer.moveVelocity.add(.15*(x=2*ee/this.width),.15*(E=2*-H/this.height)),1e-6<this._renderer.moveVelocity.magSq()?(h=g._getLocalAxes(),d=g.eyeX-g.centerX,f=g.eyeY-g.centerY,re=g.eyeZ-g.centerZ,Z=Math.sqrt(d*d+f*f+re*re),Y=new A.default.Vector(g.centerX,g.centerY,g.centerZ),Y=g.cameraMatrix.multiplyPoint(Y),(Y=this._renderer.uPMatrix.multiplyAndNormalizePoint(Y)).x-=this._renderer.moveVelocity.x,Y.y-=this._renderer.moveVelocity.y,z=0===(G=this._renderer.uPMatrix.mat4)[15]?(S=(G[8]+Y.x)/G[0]*Z,(G[9]+Y.y)/G[5]*Z):(S=(Y.x-G[12])/G[0],(Y.y-G[13])/G[5]),g.setPosition(g.eyeX+S*h.x[0]+z*h.y[0],g.eyeY+S*h.x[1]+z*h.y[1],g.eyeZ+S*h.x[2]+z*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},A.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];A.default._validateParameters("debugMode",f);for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1);f[0]===b.GRID?this.registerMethod("post",this._grid(f[1],f[2],f[3],f[4],f[5])):f[0]===b.AXES?this.registerMethod("post",this._axesIcon(f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid(f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon(f[5],f[6],f[7],f[8])))},A.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1)},A.default.prototype._grid=function(d,f,h,p,m){void 0===d&&(d=this.width/2),void 0===f&&(f=Math.round(d/30)<4?4:Math.round(d/30)),void 0===h&&(h=0),void 0===p&&(p=0),void 0===m&&(m=0);var g=d/f,x=d/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var E=0;E<=f;E++)this.beginShape(this.LINES),this.vertex(-x+h,p,E*g-x+m),this.vertex(x+h,p,E*g-x+m),this.endShape();for(var S=0;S<=f;S++)this.beginShape(this.LINES),this.vertex(S*g-x+h,p,-x+m),this.vertex(S*g-x+h,p,x+m),this.endShape();this.pop()}},A.default.prototype._axesIcon=function(d,f,h,p){return void 0===d&&(d=40<this.width/20?this.width/20:40),void 0===f&&(f=-this.width/4),void 0===h&&(h=f),void 0===p&&(p=f),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f+d,h,p),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h+d,p),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h,p+d),this.endShape(),this.pop()}};var D=A.default;K.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(l,ve,K){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.ambientLight=function(A,b,w,I){this._assert3d("ambientLight"),M.default._validateParameters("ambientLight",arguments);var D=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(D._array[0],D._array[1],D._array[2]),this._renderer._enableLighting=!0,this},M.default.prototype.specularColor=function(A,b,w){this._assert3d("specularColor"),M.default._validateParameters("specularColor",arguments);var I=this.color.apply(this,arguments);return this._renderer.specularColors=[I._array[0],I._array[1],I._array[2]],this},M.default.prototype.directionalLight=function(A,m,p,I,D,d){var f,h;return this._assert3d("directionalLight"),M.default._validateParameters("directionalLight",arguments),A=A instanceof M.default.Color?A:this.color(A,m,p),p="number"==typeof(m=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=m.x,h=m.y,m.z),m=Math.sqrt(f*f+h*h+p*p),this._renderer.directionalLightDirections.push(f/m,h/m,p/m),this._renderer.directionalLightDiffuseColors.push(A._array[0],A._array[1],A._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.pointLight=function(A,p,m,I,D,d){var f,h;return this._assert3d("pointLight"),M.default._validateParameters("pointLight",arguments),A=A instanceof M.default.Color?A:this.color(A,p,m),m="number"==typeof(p=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=p.x,h=p.y,p.z),this._renderer.pointLightPositions.push(f,h,m),this._renderer.pointLightDiffuseColors.push(A._array[0],A._array[1],A._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.imageLight=function(A){this._renderer.activeImageLight=A,this._renderer._enableLighting=!0},M.default.prototype.panorama=function(A){this.filter(this._renderer._getSphereMapping(A))},M.default.prototype.lights=function(){this._assert3d("lights");var A=this.color("rgb(128,128,128)");return this.ambientLight(A),this.directionalLight(A,0,0,-1),this},M.default.prototype.lightFalloff=function(A,b,w){return this._assert3d("lightFalloff"),M.default._validateParameters("lightFalloff",arguments),A<0&&(A=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),b<0&&(b=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),w<0&&(w=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===A&&0===b&&0===w&&(A=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=A,this._renderer.linearAttenuation=b,this._renderer.quadraticAttenuation=w,this},M.default.prototype.spotLight=function(A,b,w,I,D,d,f,h,p,m,g){this._assert3d("spotLight"),M.default._validateParameters("spotLight",arguments);var x,E,S,k=arguments.length;switch(k){case 11:case 10:x=this.color(A,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p);break;case 9:A instanceof M.default.Color?(x=A,E=new M.default.Vector(b,w,I),S=new M.default.Vector(D,d,f),m=h,g=p):I instanceof M.default.Vector?(x=this.color(A,b,w),E=I,S=new M.default.Vector(D,d,f),m=h,g=p):f instanceof M.default.Vector?(x=this.color(A,b,w),E=new M.default.Vector(I,D,d),S=f,m=h,g=p):(x=this.color(A,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p));break;case 8:S=A instanceof M.default.Color?(x=A,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(A,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(A,b,w),E=new M.default.Vector(I,D,d),f),m=h;break;case 7:A instanceof M.default.Color&&b instanceof M.default.Vector?(x=A,E=b,S=new M.default.Vector(w,I,D),m=d,g=f):A instanceof M.default.Color&&D instanceof M.default.Vector?(x=A,E=new M.default.Vector(b,w,I),S=D,m=d,g=f):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(A,b,w),E=I,S=D,m=d,g=f):S=A instanceof M.default.Color?(x=A,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(A,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(A,b,w),E=new M.default.Vector(I,D,d),f);break;case 6:I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(A,b,w),E=I,S=D,m=d):A instanceof M.default.Color&&D instanceof M.default.Vector?(x=A,E=new M.default.Vector(b,w,I),S=D,m=d):A instanceof M.default.Color&&b instanceof M.default.Vector&&(x=A,E=b,S=new M.default.Vector(w,I,D),m=d);break;case 5:A instanceof M.default.Color&&b instanceof M.default.Vector&&w instanceof M.default.Vector?(x=A,E=b,S=w,m=I,g=D):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(A,b,w),E=I,S=D):A instanceof M.default.Color&&D instanceof M.default.Vector?(x=A,E=new M.default.Vector(b,w,I),S=D):A instanceof M.default.Color&&b instanceof M.default.Vector&&(x=A,E=b,S=new M.default.Vector(w,I,D));break;case 4:x=A,E=b,S=w,m=I;break;case 3:x=A,E=b,S=w;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(k<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(E.x,E.y,E.z),S.normalize(),this._renderer.spotLightDirections.push(S.x,S.y,S.z),void 0===m&&(m=Math.PI/3),void 0!==g&&g<1?(g=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===g&&(g=100),m=this._renderer._pInst._toRadians(m),this._renderer.spotLightAngle.push(Math.cos(m)),this._renderer.spotLightConc.push(g),this._renderer._enableLighting=!0,this},M.default.prototype.noLights=function(){this._assert3d("noLights");for(var A=arguments.length,b=new Array(A),w=0;w<A;w++)b[w]=arguments[w];return M.default._validateParameters("noLights",b),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},K.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(l,ve,K){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,l("regenerator-runtime/runtime");var A=(p=l("../core/main"))&&p.__esModule?p:{default:p};function b(m){return function(g){if(Array.isArray(g)){for(var x=0,E=new Array(g.length);x<g.length;x++)E[x]=g[x];return E}}(m)||function(g){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g))return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(m,g,x,E,S,k,X){try{var Y=m[k](X),G=Y.value}catch(z){return void x(z)}Y.done?g(G):Promise.resolve(G).then(E,S)}function I(m){return function(){var g=this,x=arguments;return new Promise(function(E,S){var k=m.apply(g,x);function X(G){w(k,E,S,X,Y,"next",G)}function Y(G){w(k,E,S,X,Y,"throw",G)}X(void 0)})}}function D(m){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}function d(m,g,x){for(var E=2<arguments.length&&void 0!==x?x:{},S={v:[],vt:[],vn:[]},k={},X=null,Y=new Set,G=!1,z=!1,ee=0;ee<g.length;++ee){var H=g[ee].trim().split(/\b\s+/);if(0<H.length)if("usemtl"===H[0])X=H[1];else if("v"===H[0]||"vn"===H[0]){var re=new A.default.Vector(parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3]));S[H[0]].push(re)}else if("vt"===H[0])re=[parseFloat(H[1]),1-parseFloat(H[2])],S[H[0]].push(re);else if("f"===H[0])for(var Z=3;Z<H.length;++Z){for(var _e=[],xe=[1,Z-1,Z],oe=0;oe<xe.length;++oe){for(var me,ne=H[xe[oe]],J=ne.split("/"),he=0;he<J.length;he++)J[he]=parseInt(J[he])-1;k[ne]||(k[ne]={}),void 0===k[ne][X]?(me=m.vertices.length,m.vertices.push(S.v[J[0]].copy()),m.uvs.push(S.vt[J[1]]?S.vt[J[1]].slice():[0,0]),m.vertexNormals.push(S.vn[J[2]]?S.vn[J[2]].copy():new A.default.Vector),k[ne][X]=me,_e.push(me),X&&E[X]&&E[X].diffuseColor&&Y.add(S.v[J[0]])):_e.push(k[ne][X])}if(_e[0]!==_e[1]&&_e[0]!==_e[2]&&_e[1]!==_e[2])if(m.faces.push(_e),X&&E[X]&&E[X].diffuseColor){G=G=!0;for(var Ce=E[X].diffuseColor,et=0;et<_e.length;et++)m.vertexColors.push(Ce[0]),m.vertexColors.push(Ce[1]),m.vertexColors.push(Ce[2])}else z=!0}}if(0===m.vertexNormals.length&&m.computeNormals(),G===z)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function f(m,g){if(function(Bt){for(var lt=new DataView(Bt),It=[115,111,108,105,100],Tt=0;Tt<5;Tt++)if(function(Ot,vt,Gt){for(var hn=0,$n=Ot.length;hn<$n;hn++)if(Ot[hn]!==vt.getUint8(Gt+hn,!1))return;return 1}(It,lt,Tt))return;return 1}(g)){for(var x,E,S,k,X,Y,G,z=m,ee=new DataView(g),H=ee.getUint32(80,!0),re=!1,Z=0;Z<70;Z++)1129270351===ee.getUint32(Z,!1)&&82===ee.getUint8(Z+4)&&61===ee.getUint8(Z+5)&&(re=!0,k=[],X=ee.getUint8(Z+6)/255,Y=ee.getUint8(Z+7)/255,G=ee.getUint8(Z+8)/255);for(var _e=0;_e<H;_e++){for(var xe,oe=84+50*_e,me=ee.getFloat32(oe,!0),ne=ee.getFloat32(4+oe,!0),J=ee.getFloat32(8+oe,!0),he=(re&&(S=32768&(xe=ee.getUint16(48+oe,!0))?(x=X,E=Y,G):(x=(31&xe)/31,E=(xe>>5&31)/31,(xe>>10&31)/31)),new A.default.Vector(me,ne,J)),Ce=1;Ce<=3;Ce++){var et=new A.default.Vector(ee.getFloat32(et=oe+12*Ce,!0),ee.getFloat32(4+et,!0),ee.getFloat32(8+et,!0));z.vertices.push(et),z.vertexNormals.push(he),re&&k.push(x,E,S)}z.faces.push([3*_e,3*_e+1,3*_e+2]),z.uvs.push([0,0],[0,0],[0,0])}}else if(g=new DataView(g),"TextDecoder"in window)for(var le,V,ge=m,Le=new TextDecoder("utf-8").decode(g).split("\n"),Ke="",ut=[],_t=0;_t<Le.length;++_t){for(var Nt=Le[_t].trim(),dt=Nt.split(" "),Rt=0;Rt<dt.length;++Rt)""===dt[Rt]&&dt.splice(Rt,1);if(0!==dt.length)switch(Ke){case"":if("solid"!==dt[0])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "solid"'));Ke="solid";break;case"solid":if("facet"!==dt[0]||"normal"!==dt[1])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "facet normal"'));le=new A.default.Vector(parseFloat(dt[2]),parseFloat(dt[3]),parseFloat(dt[4])),ge.vertexNormals.push(le,le,le),Ke="facet normal";break;case"facet normal":if("outer"!==dt[0]||"loop"!==dt[1])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "outer loop"'));Ke="vertex";break;case"vertex":if("vertex"===dt[0])V=new A.default.Vector(parseFloat(dt[1]),parseFloat(dt[2]),parseFloat(dt[3])),ge.vertices.push(V),ge.uvs.push([0,0]),ut.push(ge.vertices.indexOf(V));else{if("endloop"!==dt[0])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "vertex" or "endloop"'));ge.faces.push(ut),ut=[],Ke="endloop"}break;case"endloop":if("endfacet"!==dt[0])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "endfacet"'));Ke="endfacet";break;case"endfacet":if("endsolid"!==dt[0]){if("facet"!==dt[0]||"normal"!==dt[1])return console.error(Nt),void console.error('Invalid state "'.concat(dt[0],'", should be "endsolid" or "facet normal"'));le=new A.default.Vector(parseFloat(dt[2]),parseFloat(dt[3]),parseFloat(dt[4])),ge.vertexNormals.push(le,le,le),Ke="facet normal"}break;default:console.error('Invalid state "'.concat(Ke,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}l("./p5.Geometry"),A.default.prototype.loadModel=function(m,g){A.default._validateParameters("loadModel",arguments);var x,E,re,S=!1,k=!1,X=!1,Y=m.slice(-4),G=(g&&"object"===D(g)?(S=g.normalize||!1,x=g.successCallback,E=g.failureCallback,Y=g.fileType||Y,k=g.flipU||!1,X=g.flipV||!1):"boolean"==typeof g?(S=g,x=arguments[2],E=arguments[3],void 0!==arguments[4]&&(Y=arguments[4])):(x="function"==typeof g?g:void 0,E=arguments[2],void 0!==arguments[3]&&(Y=arguments[3])),new A.default.Geometry),z=(G.gid="".concat(m,"|").concat(S),this);function ee(){return(ee=I(j.mark(function re(Z){var _e,xe,oe,me;return j.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:for(_e=[],xe=0;xe<Z.length;xe++)(oe=Z[xe].match(/^mtllib (.+)/))&&function(){var J,he=oe[1],Ce=m.split("/");J=1<Ce.length?(Ce.pop(),Ce.join("/")+"/"+he):he,_e.push(function(){return H.apply(this,arguments)}(J).then(function(et){return et?(le=z,V=J,new Promise(function(ge,Le){var Ke=null,ut={};le.loadStrings(V,function(_t){for(var Nt=0;Nt<_t.length;++Nt){var Rt=_t[Nt].trim().split(/\s+/);"newmtl"===Rt[0]?ut[Ke=Rt[1]]={}:"Kd"===Rt[0]?ut[Ke].diffuseColor=[parseFloat(Rt[1]),parseFloat(Rt[2]),parseFloat(Rt[3])]:"Ka"===Rt[0]?ut[Ke].ambientColor=[parseFloat(Rt[1]),parseFloat(Rt[2]),parseFloat(Rt[3])]:"Ks"===Rt[0]?ut[Ke].specularColor=[parseFloat(Rt[1]),parseFloat(Rt[2]),parseFloat(Rt[3])]:"map_Kd"===Rt[0]&&(ut[Ke].texturePath=Rt[1])}ge(ut)},Le)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(J)),{});var le,V}).catch(function(et){return console.warn("Error loading MTL file: ".concat(J),et),{}}))}();return ne.prev=2,ne.next=5,Promise.all(_e);case 5:return me=ne.sent,me=Object.assign.apply(Object,[{}].concat(b(me))),ne.abrupt("return",me);case 10:return ne.prev=10,ne.t0=ne.catch(2),ne.abrupt("return",{});case 13:case"end":return ne.stop()}},re,null,[[2,10]])}))).apply(this,arguments)}function H(){return(H=I(j.mark(function re(Z){return j.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,fetch(Z,{method:"HEAD"});case 3:return xe.abrupt("return",xe.sent.ok);case 7:return xe.prev=7,xe.t0=xe.catch(0),xe.abrupt("return",!1);case 10:case"end":return xe.stop()}},re,null,[[0,7]])}))).apply(this,arguments)}return Y.match(/\.stl$/i)?this.httpDo(m,"GET","arrayBuffer",function(re){f(G,re),S&&G.normalize(),k&&G.flipU(),X&&G.flipV(),z._decrementPreload(),"function"==typeof x&&x(G)},E):Y.match(/\.obj$/i)?this.loadStrings(m,(re=I(j.mark(function Z(_e){return j.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,function(){return ee.apply(this,arguments)}(_e);case 3:d(G,_e,oe.sent),oe.next=11;break;case 7:return oe.prev=7,oe.t0=oe.catch(0),E?E(oe.t0):A.default._friendlyError("Error during parsing: "+oe.t0.message),oe.abrupt("return");case 11:return oe.prev=11,S&&G.normalize(),k&&G.flipU(),X&&G.flipV(),G._makeTriangleEdges(),z._decrementPreload(),"function"==typeof x&&x(G),oe.finish(11);case 19:case"end":return oe.stop()}},Z,null,[[0,7,11,19]])})),function(Z){return re.apply(this,arguments)}),E):(A.default._friendlyFileLoadError(3,m),E?E():A.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),G},A.default.prototype.model=function(m){this._assert3d("model"),A.default._validateParameters("model",arguments),0<m.vertices.length&&(this._renderer.geometryInHash(m.gid)||(m._edgesToVertices(),this._renderer.createBuffers(m.gid,m)),this._renderer.drawBuffers(m.gid))};var h=0,p=(A.default.prototype.createModel=function(m){var g,x,E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ",Y=2<arguments.length?arguments[2]:void 0,S=(A.default._validateParameters("createModel",arguments),!1),k=!1,X=!1;if((Y&&"object"===D(Y)?(S=Y.normalize||!1,g=Y.successCallback,x=Y.failureCallback,k=Y.flipU||!1,X=Y.flipV||!1):x="boolean"==typeof Y?(S=Y,g=arguments[3],arguments[4]):(g="function"==typeof arguments[2]?arguments[2]:void 0,arguments[3]),Y=new A.default.Geometry).gid="".concat(E,"|").concat(S,"|").concat(h++),E.match(/\.stl$/i))try{f(Y,(new TextEncoder).encode(m).buffer)}catch(G){return void(x?x(G):A.default._friendlyError("Error during parsing: "+G.message))}else if(E.match(/\.obj$/i))try{d(Y,m.split("\n"))}catch(G){return void(x?x(G):A.default._friendlyError("Error during parsing: "+G.message))}else A.default._friendlyFileLoadError(3,m),x?x():A.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return S&&Y.normalize(),k&&Y.flipU(),X&&Y.flipV(),Y._makeTriangleEdges(),"function"==typeof g&&g(Y),Y},A.default);K.default=p},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Texture"),b.default.prototype.loadShader=function(d,f,h,p){function m(){x._decrementPreload(),h&&h(g)}b.default._validateParameters("loadShader",arguments),p=p||console.error;var g=new b.default.Shader,x=this,E=!1,S=!1;return this.loadStrings(d,function(k){g._vertSrc=k.join("\n"),S=!0,E&&m()},p),this.loadStrings(f,function(k){g._fragSrc=k.join("\n"),E=!0,S&&m()},p),g},b.default.prototype.createShader=function(d,f,h){return b.default._validateParameters("createShader",arguments),new b.default.Shader(this._renderer,d,f,h)},b.default.prototype.createFilterShader=function(d){b.default._validateParameters("createFilterShader",arguments);var f=d.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return(f=new b.default.Shader(this._renderer,f,d)).ensureCompiledOnContext(this._renderer.GL?this:this._renderer.getFilterGraphicsLayer()),f},b.default.prototype.shader=function(d){return this._assert3d("shader"),b.default._validateParameters("shader",arguments),d.ensureCompiledOnContext(this),d.isStrokeShader()?this._renderer.userStrokeShader=d:(this._renderer.userFillShader=d,this._renderer._useNormalMaterial=!1),d.setDefaultUniforms(),this},b.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},b.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},b.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},b.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},b.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},b.default.prototype.texture=function(d){return this._assert3d("texture"),b.default._validateParameters("texture",arguments),d.gifProperties&&d._animateGif(this),this._renderer.drawMode=w.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=d,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.textureMode=function(d){d!==w.IMAGE&&d!==w.NORMAL?console.warn("You tried to set ".concat(d," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=d},b.default.prototype.textureWrap=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,h=(this._renderer.textureWrapX=d,this._renderer.textureWrapY=f,!0),p=!1,m=void 0;try{for(var g,x=this._renderer.textures.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)g.value.setWrapMode(d,f)}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}},b.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return b.default._validateParameters("normalMaterial",f),this._renderer.drawMode=w.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},b.default.prototype.ambientMaterial=function(d,f,h){this._assert3d("ambientMaterial"),b.default._validateParameters("ambientMaterial",arguments);var p=b.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=p._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.emissiveMaterial=function(d,f,h,p){this._assert3d("emissiveMaterial"),b.default._validateParameters("emissiveMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.specularMaterial=function(d,f,h,p){this._assert3d("specularMaterial"),b.default._validateParameters("specularMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.shininess=function(d){return this._assert3d("shininess"),b.default._validateParameters("shininess",arguments),this._renderer._useShininess=d=d<1?1:d,this},b.default.prototype.metalness=function(d){return this._assert3d("metalness"),d=1-Math.exp(-d/100),this._renderer._useMetalness=d,this},b.default.RendererGL.prototype._applyColorBlend=function(d,m){var h=this.GL;return(m=m||this.userFillShader||this.userStrokeShader||this.userPointShader||this.drawMode===w.TEXTURE||this.curBlendMode!==w.BLEND||d[d.length-1]<1||this._isErasing)!==this._isBlending&&(m||this.curBlendMode!==w.BLEND&&this.curBlendMode!==w.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=m),this._applyBlendMode(),d},b.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var d=this.GL;switch(this.curBlendMode){case w.BLEND:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.ADD:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE);break;case w.REMOVE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ZERO,d.ONE_MINUS_SRC_ALPHA);break;case w.MULTIPLY:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA);break;case w.SCREEN:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_COLOR);break;case w.EXCLUSION:d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE_MINUS_DST_COLOR,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE);break;case w.REPLACE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO);break;case w.SUBTRACT:d.blendEquationSeparate(d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.DARKEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case w.LIGHTEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var D=b.default;K.default=D},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(l,ve,K){"use strict";l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.prototype.camera=function(){var b;this._assert3d("camera");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("camera",I),(b=this._renderer._curCamera).camera.apply(b,I),this},M.default.prototype.perspective=function(){var b;this._assert3d("perspective");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("perspective",I),(b=this._renderer._curCamera).perspective.apply(b,I),this},M.default.prototype.linePerspective=function(b){if(M.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof M.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===b)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=b},M.default.prototype.ortho=function(){var b;this._assert3d("ortho");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("ortho",I),(b=this._renderer._curCamera).ortho.apply(b,I),this},M.default.prototype.frustum=function(){var b;this._assert3d("frustum");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("frustum",I),(b=this._renderer._curCamera).frustum.apply(b,I),this},M.default.prototype.createCamera=function(){this._assert3d("createCamera");var b=new M.default.Camera(this._renderer);return b._computeCameraDefaultSettings(),b._setDefaultCamera(),this._renderer._curCamera=b},M.default.Camera=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._renderer=d,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new M.default.Matrix,this.projMatrix=new M.default.Matrix,this.yScale=1}var w,I;return w=b,(I=[{key:"perspective",value:function(m,f,h,p){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===m?m=this.defaultCameraFOV:this._renderer._pInst._toRadians(m),void 0===f&&(f=this.defaultAspectRatio),void 0===h&&(h=this.defaultCameraNear),void 0===p&&(p=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=h,this.cameraFar=p,this.projMatrix=M.default.Matrix.identity(),m=1/Math.tan(this.cameraFOV/2);var g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/f,0,0,0,0,-m*this.yScale,0,0,0,0,(p+h)*g,-1,0,0,2*p*h*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(G,Y,h,p,m,g){var z=this.fbo||this._renderer,x=(void 0===G&&(G=-z.width/2),void 0===Y&&(Y=+z.width/2),void 0===h&&(h=-z.height/2),void 0===p&&(p=+z.height/2),void 0===m&&(m=0),void 0===g&&(g=Math.max(z.width,z.height)+800),this.cameraNear=m,z=Y-G,p-h),E=(this.cameraFar=g)-m,S=2/z,k=2/x*this.yScale,X=-2/E;Y=-(Y+G)/z,G=-(p+h)/x,z=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,0,0,X,0,Y,G,z,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(G,Y,h,p,m,g){void 0===G&&(G=.05*-this._renderer.width),void 0===Y&&(Y=.05*+this._renderer.width),void 0===h&&(h=.05*+this._renderer.height),void 0===p&&(p=.05*-this._renderer.height),void 0===m&&(m=this.defaultCameraNear),void 0===g&&(g=this.defaultCameraFar),this.cameraNear=m;var z=Y-G,x=p-h,E=(this.cameraFar=g)-m,S=2*m/z,k=2*m/x*this.yScale,X=-2*g*m/E;Y=(Y+G)/z,G=(p+h)/x,z=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,Y,G,z,-1,0,0,X,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,f,h,p){var m=this.centerX,g=this.centerY,x=this.centerZ,E=(m-=this.eyeX,g-=this.eyeY,x-=this.eyeZ,M.default.Matrix.identity(this._renderer._pInst));(E.rotate(this._renderer._pInst._toRadians(S),f,h,p),S=[m*E.mat4[0]+g*E.mat4[4]+x*E.mat4[8],m*E.mat4[1]+g*E.mat4[5]+x*E.mat4[9],m*E.mat4[2]+g*E.mat4[6]+x*E.mat4[10]])[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(h){var f=this._getLocalAxes();h=M.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(h),f.z[0],f.z[1],f.z[2]).rotateVector(new M.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"pan",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(d,f,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,d,f,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(d,f,h,p,m,g,x,E,S){return void 0===d&&(h=this.defaultEyeZ,p=d=this.defaultEyeX,m=f=this.defaultEyeY,E=1,S=x=g=0),this.eyeX=d,this.eyeY=f,this.eyeZ=h,void 0!==p&&(this.centerX=p,this.centerY=m,this.centerZ=g),void 0!==x&&(this.upX=x,this.upY=E,this.upZ=S),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),this.cameraMatrix.translate([m=-d,-f,-h]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(p,m,h){var g=this._getLocalAxes();this.camera(this.eyeX+(p=[g.x[0]*p,g.x[1]*p,g.x[2]*p])[0]+(m=[g.y[0]*m,g.y[1]*m,g.y[2]*m])[0]+(g=[g.z[0]*h,g.z[1]*h,g.z[2]*h])[0],this.eyeY+p[1]+m[1]+g[1],this.eyeZ+p[2]+m[2]+g[2],this.centerX+p[0]+m[0]+g[0],this.centerY+p[1]+m[1]+g[1],this.centerZ+p[2]+m[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(d,f,h){this.camera(d,f,h,this.centerX+(d-this.eyeX),this.centerY+(f-this.eyeY),this.centerZ+(h-this.eyeZ),this.upX,this.upY,this.upZ)}},{key:"set",value:function(d){for(var f=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];f<h.length;f++){var p=h[f];this[p]=d[p]}this.cameraMatrix=d.cameraMatrix.copy(),this.projMatrix=d.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(d,f,h){var p,m,g,x,E,S,k,X,Y,G,z,ee,H,re,Z,_e,xe,oe;0===h?this.set(d):1===h?this.set(f):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=d.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/d.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=d.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/d.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new M.default.Vector(d.eyeX,d.eyeY,d.eyeZ),E=new M.default.Vector(f.eyeX,f.eyeY,f.eyeZ),_e=new M.default.Vector(d.centerX,d.centerY,d.centerZ),oe=new M.default.Vector(f.centerX,f.centerY,f.centerZ),g=M.default.Vector.dist(x,_e),p=M.default.Vector.dist(E,oe),p=g*Math.pow(p/g,h),g=M.default.Vector.sub(x,E),m=1,1e-6<(xe=(re=x.copy().sub(E).sub(_e).add(oe)).magSq())&&(m=M.default.Vector.dot(g,re)/xe,m=Math.max(0,Math.min(m,1))),g=M.default.Vector.lerp(M.default.Vector.lerp(x,_e,m),M.default.Vector.lerp(E,oe,m),h),re=d.cameraMatrix.createSubMatrix3x3(),xe=f.cameraMatrix.createSubMatrix3x3(),x=re.row(2),_e=xe.row(2),E=re.row(1),oe=xe.row(1),d=new M.default.Vector,f=new M.default.Vector,S=new M.default.Vector,k=new M.default.Vector,1-(X=.5*((re=(xe=xe.mult3x3(re.copy().transpose3x3())).diagonal())[0]+re[1]+re[2]-1))<1e-7?(d.set(M.default.Vector.lerp(x,_e,h)).normalize(),S.set(d).mult(m*p).add(g),k.set(d).mult((m-1)*p).add(g),f.set(M.default.Vector.lerp(E,oe,h)).normalize()):(_e=1/(1-X),oe=Math.max(re[0],re[1],re[2]),ee=xe.mat3[1]+xe.mat3[3],H=xe.mat3[2]+xe.mat3[6],Z=xe.mat3[5]+xe.mat3[7],oe=oe===re[0]?(G=.5*ee*(_e/=Y=Math.sqrt((re[0]-X)*_e)),z=.5*H*_e,.5*(xe.mat3[7]-xe.mat3[5])/Y):oe===re[1]?(z=.5*Z*(_e/=G=Math.sqrt((re[1]-X)*_e)),Y=.5*ee*_e,.5*(xe.mat3[2]-xe.mat3[6])/G):(Y=.5*H*(_e/=z=Math.sqrt((re[2]-X)*_e)),G=.5*Z*_e,.5*(xe.mat3[3]-xe.mat3[1])/z),ee=h*Math.atan2(oe,X),H=Math.cos(ee),re=Math.sin(ee),(oe=new M.default.Matrix("mat3",[H+(Z=1-H)*Y*Y,Z*(_e=Y*G)+re*z,Z*(xe=z*Y)-re*G,Z*_e-re*z,H+Z*G*G,Z*(h=G*z)+re*Y,Z*xe+re*G,Z*h-re*Y,H+Z*z*z])).multiplyVec3(x,d),S.set(d).mult(m*p).add(g),k.set(d).mult((m-1)*p).add(g),oe.multiplyVec3(E,f)),this.camera(S.x,S.y,S.z,k.x,k.y,k.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var d=new M.default.Camera(this._renderer);return d.cameraFOV=this.cameraFOV,d.aspectRatio=this.aspectRatio,d.eyeX=this.eyeX,d.eyeY=this.eyeY,d.eyeZ=this.eyeZ,d.centerX=this.centerX,d.centerY=this.centerY,d.centerZ=this.centerZ,d.upX=this.upX,d.upY=this.upY,d.upZ=this.upZ,d.cameraNear=this.cameraNear,d.cameraFar=this.cameraFar,d.cameraType=this.cameraType,d.useLinePerspective=this.useLinePerspective,d.cameraMatrix=this.cameraMatrix.copy(),d.projMatrix=this.projMatrix.copy(),d.yScale=this.yScale,d}},{key:"_getLocalAxes",value:function(){var k,d=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,x=(0!==(x=Math.sqrt(d*d+f*f+h*h))&&(d/=x,f/=x,h/=x),this.upX),p=(E=this.upY)*h-(S=this.upZ)*f,m=-x*h+S*d,g=x*f-E*d,E=(x=f*g-h*m,-d*g+h*p),S=d*m-f*p;return 0!==(0!==(k=Math.sqrt(p*p+m*m+g*g))&&(p/=k,m/=k,g/=k),k=Math.sqrt(x*x+E*E+S*S))&&(x/=k,E/=k,S/=k),{x:[p,m,g],y:[x,E,S],z:[d,f,h]}}},{key:"_orbit",value:function(d,k,S){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(x,g));(p=(p*=Math.pow(10,S))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.acos(Math.max(-1,Math.min(1,M.default.Vector.dot(m,g))))+k,k=d,(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),E.mult(Math.cos(k)*Math.sin(S)),x.mult(Math.sin(k)*Math.sin(S)),m.set(g).add(E).add(x),this.eyeX=p*m.x+this.centerX,this.eyeY=p*m.y+this.centerY,this.eyeZ=p*m.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,k,Y){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(m,x)),G=Math.atan2(k,S),X=(E.mult(Math.sin(G)),x.mult(Math.cos(G)).add(E),G=Math.sqrt(S*S+k*k),E=M.default.Vector.cross(m,x),(p=(p*=Math.pow(10,Y))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.cos(G),k=Math.sin(G),(Y=g.dot(m))*S+(G=g.dot(x))*k);Y=-Y*k+G*S,G=g.dot(E),g.x=X*m.x+Y*x.x+G*E.x,g.y=X*m.y+Y*x.y+G*E.y,g.z=X*m.z+Y*x.z+G*E.z,x.mult(-k),m.mult(S).add(x).mult(p),this.camera(m.x+this.centerX,m.y+this.centerY,m.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&A(w.prototype,I),b}(),M.default.prototype.setCamera=function(b){this._renderer._curCamera=b,this._renderer.uPMatrix.set(b.projMatrix),this._renderer.uViewMatrix.set(b.cameraMatrix)},K.default=l=M.default.Camera},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(l,ve,K){"use strict";function M(A,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.DataArray=function(){function A(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(D),this.initialLength=D}var b,w;return b=A,(w=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var D;this.length<this.data.length/2&&(D=1<<Math.ceil(Math.log2(this.length)),(D=new Float32Array(D)).set(this.data.subarray(0,this.length),0),this.data=D)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var D=arguments.length,d=new Array(D),f=0;f<D;f++)d[f]=arguments[f];this.ensureLength(this.length+d.length),this.data.set(d,this.length),this.length+=d.length}},{key:"slice",value:function(D,d){return this.data.slice(D,Math.min(d,this.length))}},{key:"subArray",value:function(D,d){return this.data.subarray(D,Math.min(d,this.length))}},{key:"ensureLength",value:function(D){for(;this.data.length<D;){var d=new Float32Array(2*this.data.length);d.set(this.data,0),this.data=d}}}])&&M(b.prototype,w),A}(),K.default=l=l.default.DataArray},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(z,ve,K){"use strict";function M(ee){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(ee)}function A(ee){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(H){return M(H)}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":M(H)})(ee)}z("core-js/modules/es.symbol"),z("core-js/modules/es.symbol.description"),z("core-js/modules/es.symbol.iterator"),z("core-js/modules/es.array.fill"),z("core-js/modules/es.array.includes"),z("core-js/modules/es.array.iterator"),z("core-js/modules/es.object.get-own-property-descriptor"),z("core-js/modules/es.object.get-prototype-of"),z("core-js/modules/es.object.to-string"),z("core-js/modules/es.reflect.construct"),z("core-js/modules/es.reflect.get"),z("core-js/modules/es.regexp.to-string"),z("core-js/modules/es.string.includes"),z("core-js/modules/es.string.iterator"),z("core-js/modules/es.typed-array.float32-array"),z("core-js/modules/es.typed-array.uint8-array"),z("core-js/modules/es.typed-array.uint8-clamped-array"),z("core-js/modules/es.typed-array.copy-within"),z("core-js/modules/es.typed-array.every"),z("core-js/modules/es.typed-array.fill"),z("core-js/modules/es.typed-array.filter"),z("core-js/modules/es.typed-array.find"),z("core-js/modules/es.typed-array.find-index"),z("core-js/modules/es.typed-array.for-each"),z("core-js/modules/es.typed-array.includes"),z("core-js/modules/es.typed-array.index-of"),z("core-js/modules/es.typed-array.iterator"),z("core-js/modules/es.typed-array.join"),z("core-js/modules/es.typed-array.last-index-of"),z("core-js/modules/es.typed-array.map"),z("core-js/modules/es.typed-array.reduce"),z("core-js/modules/es.typed-array.reduce-right"),z("core-js/modules/es.typed-array.reverse"),z("core-js/modules/es.typed-array.set"),z("core-js/modules/es.typed-array.slice"),z("core-js/modules/es.typed-array.some"),z("core-js/modules/es.typed-array.sort"),z("core-js/modules/es.typed-array.subarray"),z("core-js/modules/es.typed-array.to-locale-string"),z("core-js/modules/es.typed-array.to-string"),z("core-js/modules/es.weak-map"),z("core-js/modules/web.dom-collections.iterator"),z("core-js/modules/es.array.fill"),z("core-js/modules/es.array.includes"),z("core-js/modules/es.array.iterator"),z("core-js/modules/es.object.get-prototype-of"),z("core-js/modules/es.object.to-string"),z("core-js/modules/es.string.includes"),z("core-js/modules/es.typed-array.float32-array"),z("core-js/modules/es.typed-array.uint8-array"),z("core-js/modules/es.typed-array.uint8-clamped-array"),z("core-js/modules/es.typed-array.copy-within"),z("core-js/modules/es.typed-array.every"),z("core-js/modules/es.typed-array.fill"),z("core-js/modules/es.typed-array.filter"),z("core-js/modules/es.typed-array.find"),z("core-js/modules/es.typed-array.find-index"),z("core-js/modules/es.typed-array.for-each"),z("core-js/modules/es.typed-array.includes"),z("core-js/modules/es.typed-array.index-of"),z("core-js/modules/es.typed-array.iterator"),z("core-js/modules/es.typed-array.join"),z("core-js/modules/es.typed-array.last-index-of"),z("core-js/modules/es.typed-array.map"),z("core-js/modules/es.typed-array.reduce"),z("core-js/modules/es.typed-array.reduce-right"),z("core-js/modules/es.typed-array.reverse"),z("core-js/modules/es.typed-array.set"),z("core-js/modules/es.typed-array.slice"),z("core-js/modules/es.typed-array.some"),z("core-js/modules/es.typed-array.sort"),z("core-js/modules/es.typed-array.subarray"),z("core-js/modules/es.typed-array.to-locale-string"),z("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(G=z("../core/main"))&&G.__esModule?G:{default:G},w=function(ee){if(ee&&ee.__esModule)return ee;if(null===ee||"object"!==A(ee)&&"function"!=typeof ee)return{default:ee};var H=d();if(H&&H.has(ee))return H.get(ee);var re,Z={},_e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(re in ee){var xe;Object.prototype.hasOwnProperty.call(ee,re)&&((xe=_e?Object.getOwnPropertyDescriptor(ee,re):null)&&(xe.get||xe.set)?Object.defineProperty(Z,re,xe):Z[re]=ee[re])}return Z.default=ee,H&&H.set(ee,Z),Z}(z("../core/constants")),I=z("./p5.Texture"),D=z("./p5.RendererGL");function d(){var ee;return"function"!=typeof WeakMap?null:(d=function(){return ee},ee=new WeakMap)}function f(ee,H){return function(re){if(Array.isArray(re))return re}(ee)||function(re,Z){if(Symbol.iterator in Object(re)||"[object Arguments]"===Object.prototype.toString.call(re)){var _e=[],xe=!0,oe=!1,me=void 0;try{for(var ne,J=re[Symbol.iterator]();!(xe=(ne=J.next()).done)&&(_e.push(ne.value),!Z||_e.length!==Z);xe=!0);}catch(he){oe=!0,me=he}finally{try{xe||null==J.return||J.return()}finally{if(oe)throw me}}return _e}}(ee,H)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(ee,H,re){return H in ee?Object.defineProperty(ee,H,{value:re,enumerable:!0,configurable:!0,writable:!0}):ee[H]=re,ee}function p(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}function m(ee,H){for(var re=0;re<H.length;re++){var Z=H[re];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(ee,Z.key,Z)}}function g(ee,H,re){H&&m(ee.prototype,H),re&&m(ee,re)}function x(ee,H,re){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(oe,_e,xe){if(oe=function(me,ne){for(;!Object.prototype.hasOwnProperty.call(me,ne)&&null!==(me=k(me)););return me}(oe,_e))return(oe=Object.getOwnPropertyDescriptor(oe,_e)).get?oe.get.call(xe):oe.value})(ee,H,re||ee)}function E(ee,H){return(E=Object.setPrototypeOf||function(re,Z){return re.__proto__=Z,re})(ee,H)}function k(ee){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)})(ee)}var X=function(ee){var H=Z;if("function"!=typeof ee&&null!==ee)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(ee&&ee.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),ee&&E(H,ee);var re=function S(ee){return function(){var H,re=k(ee);if(H=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(H=k(this).constructor,Reflect.construct(re,arguments,H)):re.apply(this,arguments),re=this,!H||"object"!==A(H)&&"function"!=typeof H){if(void 0!==re)return re;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return H}}(Z);function Z(_e){var xe;return p(this,Z),(xe=re.call(this,_e.target._renderer)).fbo=_e,xe.yScale=-1,xe}return g(Z,[{key:"_computeCameraDefaultSettings",value:function(){x(k(Z.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),Z}(b.default.Camera),Y=(b.default.FramebufferCamera=X,function(){function ee(H,re){p(this,ee),this.framebuffer=H,this.property=re}return g(ee,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),ee}()),G=(b.default.FramebufferTexture=Y,function(){function ee(H){var re=this,Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(p(this,ee),this.target=H,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=Z.format||w.UNSIGNED_BYTE,this.channels=Z.channels||(H._renderer._pInst._glAttributes.alpha?w.RGBA:w.RGB),this.useDepth=void 0===Z.depth||Z.depth,this.depthFormat=Z.depthFormat||w.FLOAT,this.textureFiltering=Z.textureFiltering||w.LINEAR,this.antialiasSamples=void 0===Z.antialias?H._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof Z.antialias?Z.antialias:Z.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&H.webglVersion!==w.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=Z.density||H.pixelDensity(),H._renderer.GL);if(this.gl=_e,Z.width&&Z.height?(xe=H._renderer._adjustDimensions(Z.width,Z.height),this.width=xe.adjustedWidth,this.height=xe.adjustedHeight,this._autoSized=!1):(void 0===Z.width!=(void 0===Z.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=H.width,this.height=H.height,this._autoSized=!0),this._checkIfFormatsAvailable(),Z.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===Z.stencil||Z.stencil),this.framebuffer=_e.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=_e.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var xe=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=xe,this.draw(function(){return re.target.clear()})}return g(ee,[{key:"resize",value:function(H,re){this._autoSized=!1;var Z=this.target._renderer._adjustDimensions(H,re);re=Z.adjustedHeight,this.width=H=Z.adjustedWidth,this.height=re,this._handleResize()}},{key:"pixelDensity",value:function(H){if(!H)return this.density;this._autoSized=!1,this.density=H,this._handleResize()}},{key:"autoSized",value:function(H){if(void 0===H)return this._autoSized;this._autoSized=H,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var H=this.gl;(this.useDepth&&this.target.webglVersion===w.WEBGL&&!H.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===w.WEBGL&&this.depthFormat===w.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),[w.UNSIGNED_BYTE,w.FLOAT,w.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&![w.UNSIGNED_INT,w.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=w.FLOAT),H=(0,I.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==w.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&!H.float&&this.depthFormat===w.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),H.halfFloat||this.format!==w.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.channels===w.RGB&&[w.FLOAT,w.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=w.RGBA)}},{key:"_recreateTextures",value:function(){var H=this.gl,re=(this._updateSize(),H.getParameter(H.TEXTURE_BINDING_2D)),Z=H.getParameter(H.FRAMEBUFFER_BINDING);if(!(_e=H.createTexture()))throw new Error("Unable to create color texture");H.bindTexture(H.TEXTURE_2D,_e);var xe=this._glColorFormat();if(H.texImage2D(H.TEXTURE_2D,0,xe.internalFormat,this.width*this.density,this.height*this.density,0,xe.format,xe.type,null),this.colorTexture=_e,H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,_e,0),this.useDepth){var _e;if(!(_e=H.createTexture()))throw new Error("Unable to create depth texture");var oe=this._glDepthFormat();H.bindTexture(H.TEXTURE_2D,_e),H.texImage2D(H.TEXTURE_2D,0,oe.internalFormat,this.width*this.density,this.height*this.density,0,oe.format,oe.type,null),H.framebufferTexture2D(H.FRAMEBUFFER,this.useStencil?H.DEPTH_STENCIL_ATTACHMENT:H.DEPTH_ATTACHMENT,H.TEXTURE_2D,_e,0),this.depthTexture=_e}this.antialias&&(this.colorRenderbuffer=H.createRenderbuffer(),H.bindRenderbuffer(H.RENDERBUFFER,this.colorRenderbuffer),H.renderbufferStorageMultisample(H.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,H.getParameter(H.MAX_SAMPLES))),xe.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(oe=this._glDepthFormat(),this.depthRenderbuffer=H.createRenderbuffer(),H.bindRenderbuffer(H.RENDERBUFFER,this.depthRenderbuffer),H.renderbufferStorageMultisample(H.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,H.getParameter(H.MAX_SAMPLES))),oe.internalFormat,this.width*this.density,this.height*this.density)),H.bindFramebuffer(H.FRAMEBUFFER,this.aaFramebuffer),H.framebufferRenderbuffer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&H.framebufferRenderbuffer(H.FRAMEBUFFER,this.useStencil?H.DEPTH_STENCIL_ATTACHMENT:H.DEPTH_ATTACHMENT,H.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new Y(this,"depthTexture"),this.depthP5Texture=new b.default.Texture(this.target._renderer,this.depth,{minFilter:_e=H.NEAREST,magFilter:_e}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new Y(this,"colorTexture"),this.colorP5Texture=new b.default.Texture(this.target._renderer,this.color,{minFilter:xe=this.textureFiltering===w.LINEAR?H.LINEAR:H.NEAREST,magFilter:xe}),this.target._renderer.textures.set(this.color,this.colorP5Texture),H.bindTexture(H.TEXTURE_2D,re),H.bindFramebuffer(H.FRAMEBUFFER,Z)}},{key:"_glColorFormat",value:function(){var H,re,Z=this.gl,_e=this.format===w.FLOAT?Z.FLOAT:this.format===w.HALF_FLOAT?this.target.webglVersion===w.WEBGL2?Z.HALF_FLOAT:Z.getExtension("OES_texture_half_float").HALF_FLOAT_OES:Z.UNSIGNED_BYTE,xe=this.channels===w.RGBA?Z.RGBA:Z.RGB;return{internalFormat:this.target.webglVersion===w.WEBGL2?(h(re={},Z.FLOAT,h({},Z.RGBA,Z.RGBA32F)),h(re,Z.HALF_FLOAT,h({},Z.RGBA,Z.RGBA16F)),h(re,Z.UNSIGNED_BYTE,(h(H={},Z.RGBA,Z.RGBA8),h(H,Z.RGB,Z.RGB8),H)),re[_e][xe]):this.format===w.HALF_FLOAT?Z.RGBA:xe,format:xe,type:_e}}},{key:"_glDepthFormat",value:function(){var Z=this.gl,H=this.useStencil?this.depthFormat===w.FLOAT?Z.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===w.WEBGL2?Z.UNSIGNED_INT_24_8:Z.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===w.FLOAT?Z.FLOAT:Z.UNSIGNED_INT,re=this.useStencil?Z.DEPTH_STENCIL:Z.DEPTH_COMPONENT;return{internalFormat:Z=this.useStencil?this.depthFormat===w.FLOAT?Z.DEPTH32F_STENCIL8:this.target.webglVersion===w.WEBGL2?Z.DEPTH24_STENCIL8:Z.DEPTH_STENCIL:this.target.webglVersion===w.WEBGL2?this.depthFormat===w.FLOAT?Z.DEPTH_COMPONENT32F:Z.DEPTH_COMPONENT24:Z.DEPTH_COMPONENT,format:re,type:H}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var H=this.depth,re=this.colorRenderbuffer,Z=this.depthRenderbuffer,_e=(this._deleteTexture(_e=this.color),H&&this._deleteTexture(H),this.gl);re&&_e.deleteRenderbuffer(re),Z&&_e.deleteRenderbuffer(Z),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var H=new X(this);return H._computeCameraDefaultSettings(),H._setDefaultCamera(),this.target._renderer._curCamera=H}},{key:"_deleteTexture",value:function(H){this.gl.deleteTexture(H.rawTexture()),this.target._renderer.textures.delete(H)}},{key:"remove",value:function(){var H=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),H.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&H.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&H.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&H.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var H=this.gl;H.bindFramebuffer(H.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var H=this.gl,re=(H.bindFramebuffer(H.READ_FRAMEBUFFER,this.aaFramebuffer),H.bindFramebuffer(H.DRAW_FRAMEBUFFER,this.framebuffer),[[H.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&re.push([H.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var Z=0,_e=re;Z<_e.length;Z++){var oe=f(_e[Z],2);H.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,oe[0],oe=oe[1])}}}},{key:"end",value:function(){var H=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(H.bindFramebuffer(H.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(H){this.begin(),H(),this.end()}},{key:"loadPixels",value:function(){var H=this.gl,re=this.target._renderer.activeFramebuffer(),Z=(H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,D.readPixelsWebGL)(this.pixels,H,this.framebuffer,0,0,this.width*this.density,this.height*this.density,Z.format,Z.type),H.bindFramebuffer(H.FRAMEBUFFER,re?re._framebufferToBind():null)}},{key:"get",value:function(H,re,Z,_e){b.default._validateParameters("p5.Framebuffer.get",arguments);var xe=this._glColorFormat();if(void 0===H&&void 0===re)re=H=0,Z=this.width,_e=this.height;else if(void 0===Z&&void 0===_e)return(H<0||re<0||H>=this.width||re>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),H=this.target.constrain(H,0,this.width-1),re=this.target.constrain(re,0,this.height-1)),(0,D.readPixelWebGL)(this.gl,this.framebuffer,H*this.density,re*this.density,xe.format,xe.type);H=this.target.constrain(H,0,this.width-1),re=this.target.constrain(re,0,this.height-1),Z=this.target.constrain(Z,1,this.width-H),_e=this.target.constrain(_e,1,this.height-re);for(var oe=(0,D.readPixelsWebGL)(void 0,this.gl,this.framebuffer,H*this.density,re*this.density,Z*this.density,_e*this.density,xe.format,xe.type),me=new Uint8ClampedArray(Z*_e*this.density*this.density*4),ne=(me.fill(255),xe.type===this.gl.RGB?3:4),J=0;J<_e*this.density;J++)for(var he=0;he<Z*this.density;he++)for(var Ce=0;Ce<4;Ce++){var le=4*(J*Z*this.density+he)+Ce;Ce<ne&&(me[le]=oe[4==ne?le:(J*Z*this.density+he)*ne+Ce])}return(H=new b.default.Image(Z*this.density,_e*this.density)).imageData=H.canvas.getContext("2d").createImageData(H.width,H.height),H.imageData.data.set(me),H.pixels=H.imageData.data,H.updatePixels(),1!==this.density&&H.resize(Z,_e),H}},{key:"updatePixels",value:function(){var H=this.gl,re=(this.colorP5Texture.bindTexture(),this._glColorFormat()),Z=this.width*this.height*this.density*this.density*(Z=re.format===H.RGBA?4:3),_e=re.type===H.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof _e)||this.pixels.length!==Z)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");H.texImage2D(H.TEXTURE_2D,0,re.internalFormat,this.width*this.density,this.height*this.density,0,re.format,re.type,this.pixels),this.colorP5Texture.unbindTexture(),_e=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(H.clearDepth(1),H.clear(H.DEPTH_BUFFER_BIT)),this.end()):(H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),this.useDepth&&(H.clearDepth(1),H.clear(H.DEPTH_BUFFER_BIT)),H.bindFramebuffer(H.FRAMEBUFFER,_e?_e._framebufferToBind():null))}}]),ee}());z=b.default.Framebuffer=G,K.default=z},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(l,ve,K){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function A(p){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(p)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(h=l("../core/main"))&&h.__esModule?h:{default:h},w=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==A(p)&&"function"!=typeof p)return{default:p};var m=I();if(m&&m.has(p))return m.get(p);var g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in p){var S;Object.prototype.hasOwnProperty.call(p,g)&&((S=E?Object.getOwnPropertyDescriptor(p,g):null)&&(S.get||S.set)?Object.defineProperty(x,g,S):x[g]=p[g])}return x.default=p,m&&m.set(p,x),x}(l("../core/constants"));function I(){var p;return"function"!=typeof WeakMap?null:(I=function(){return p},p=new WeakMap)}function D(p){return function(m){if(Array.isArray(m)){for(var g=0,x=new Array(m.length);g<m.length;g++)x[g]=m[g];return x}}(p)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(p,m){return function(g){if(Array.isArray(g))return g}(p)||function(g,x){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g)){var E=[],S=!0,k=!1,X=void 0;try{for(var Y,G=g[Symbol.iterator]();!(S=(Y=G.next()).done)&&(E.push(Y.value),!x||E.length!==x);S=!0);}catch(z){k=!0,X=z}finally{try{S||null==G.return||G.return()}finally{if(k)throw X}}return E}}(p,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(p,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,x.key,x)}}b.default.Geometry=function(){function p(E,S,k){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new b.default.DataArray,this.lineTangentsIn=new b.default.DataArray,this.lineTangentsOut=new b.default.DataArray,this.lineSides=new b.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new b.default.DataArray,this.detailX=void 0!==E?E:1,this.detailY=void 0!==S?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,k instanceof Function&&k.call(this)}var m,g;return m=p,(g=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var E=new b.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new b.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),k=0;k<this.vertices.length;k++){var X=this.vertices[k];E.x=Math.min(E.x,X.x),E.y=Math.min(E.y,X.y),E.z=Math.min(E.z,X.z),S.x=Math.max(S.x,X.x),S.y=Math.max(S.y,X.y),S.z=Math.max(S.z,X.z)}var Y=new b.default.Vector(S.x-E.x,S.y-E.y,S.z-E.z),G=new b.default.Vector((E.x+S.x)/2,(E.y+S.y)/2,(E.z+S.z)/2);this.boundingBoxCache={min:E,max:S,size:Y,offset:G}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var E=0;E<this.vertexColors.length;E+=4)if(this.vertexColors[E+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var E=0;E<this.lineVertexColors.length;E+=4)if(this.lineVertexColors[E+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var E=this,S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",k="";if(this.vertices.forEach(function(G){k+="v ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.uvs&&0<this.uvs.length)for(var X=0;X<this.uvs.length;X+=2)k+="vt ".concat(this.uvs[X]," ").concat(this.uvs[X+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(G){k+="vn ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.faces.forEach(function(G){var z="f";G.forEach(function(ee){z=z+" "+(ee+1),(0<E.vertexNormals.length||0<E.uvs.length)&&(z+="/",0<E.uvs.length&&(z+=ee+1),z+="/",0<E.vertexNormals.length&&(z+=ee+1))}),k+=z+"\n"});var Y=new Blob([k],{type:"text/plain"});b.default.prototype.downloadFile(Y,S,"obj")}},{key:"saveStl",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",S=void 0!==(S=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&S,k=E.substring(0,E.lastIndexOf(".")),X=[],Y=!0,G=!1,z=void 0;try{for(var ee,H=this.faces[Symbol.iterator]();!(Y=(ee=H.next()).done);Y=!0){var re=ee.value,Z=b.default.Vector.sub(this.vertices[re[1]],this.vertices[re[0]]),_e=b.default.Vector.sub(this.vertices[re[2]],this.vertices[re[0]]);X.push(new b.default.Vector(Z.y*_e.z-Z.z*_e.y,Z.z*_e.x-Z.x*_e.z,Z.x*_e.y-Z.y*_e.x).normalize())}}catch(hn){G=!0,z=hn}finally{try{Y||null==H.return||H.return()}finally{if(G)throw z}}if(S){var ne,J=80;G=2*this.faces.length+3*this.faces.length*4*4+80+4,z=new ArrayBuffer(G),(ne=new DataView(z)).setUint32(J,this.faces.length,!0),J+=4;for(var he=0,Ce=Object.entries(this.faces);he<Ce.length;he++){var V=(et=d(Ce[he],2))[0],et=et[1],le=(ne.setFloat32(J,(V=X[V]).x,!0),ne.setFloat32(J+=4,V.y,!0),ne.setFloat32(J+=4,V.z,!0),J+=4,!0),ge=void(V=!1);try{for(var Le,Ke=et[Symbol.iterator]();!(le=(Le=Ke.next()).done);le=!0){var _t=this.vertices[Le.value];ne.setFloat32(J,_t.x,!0),ne.setFloat32(J+=4,_t.y,!0),ne.setFloat32(J+=4,_t.z,!0),J+=4}}catch(bn){V=!0,ge=bn}finally{try{le||null==Ke.return||Ke.return()}finally{if(V)throw ge}}ne.setUint16(J,0,!0),J+=2}}else{ne="solid "+k+"\n";for(var Nt=0,dt=Object.entries(this.faces);Nt<dt.length;Nt++){var lt=(Rt=d(dt[Nt],2))[0],Rt=Rt[1],Bt=(ne=ne+" facet norm "+(lt=X[lt]).x+" "+lt.y+" "+lt.z+"\n  outer loop\n",!0),It=void(lt=!1);try{for(var Tt,Ot=Rt[Symbol.iterator]();!(Bt=(Tt=Ot.next()).done);Bt=!0){var Gt=this.vertices[Tt.value];ne+="   vertex "+Gt.x+" "+Gt.y+" "+Gt.z+"\n"}}catch(hn){lt=!0,It=hn}finally{try{Bt||null==Ot.return||Ot.return()}finally{if(lt)throw It}}ne+="  endloop\n endfacet\n"}ne+="endsolid "+k+"\n"}S=new Blob([ne],{type:"text/plain"}),b.default.prototype.downloadFile(S,E,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?1-E:E})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?E:1-E})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var E,S,k,X=this.detailX+1,Y=0;Y<this.detailY;Y++)for(var G=0;G<this.detailX;G++)S=(Y+1)*X+G+1,this.faces.push([Y*X+G,E=Y*X+G+1,k=(Y+1)*X+G]),this.faces.push([k,E,S]);return this}},{key:"_getFaceNormal",value:function(S){var k=this.vertices[(S=this.faces[S])[0]],Y=this.vertices[S[1]],X=(S=this.vertices[S[2]],Y=b.default.Vector.sub(Y,k),S=b.default.Vector.sub(S,k),k=b.default.Vector.cross(Y,S),b.default.Vector.mag(k));return 0==(Y=X/(b.default.Vector.mag(Y)*b.default.Vector.mag(S)))||isNaN(Y)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),k):(1<Y&&(Y=1),k.mult(Math.asin(Y)/X))}},{key:"computeNormals",value:function(){var E,S=this,X=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,Y=this.vertexNormals,G=this.vertices,z=this.faces;if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:w.FLAT)===w.SMOOTH){for(var ee={},H=[],re=Math.pow(10,void 0===X?3:X),Z=function(ne){return Math.round(ne*re)/re},_e=function(ne){return"".concat(Z(ne.x),",").concat(Z(ne.y),",").concat(Z(ne.z))},xe=0;xe<G.length;xe++){var oe=G[xe],me=_e(oe);void 0===ee[me]&&(ee[me]=H.length,H.push(oe))}z.forEach(function(ne){for(var J=0;J<3;++J){var he=_e(he=G[he=ne[J]]);ne[J]=ee[he]}}),this.edges.forEach(function(ne){for(var J=0;J<2;++J){var he=_e(he=G[he=ne[J]]);ne[J]=ee[he]}}),this.vertices=G=H}for(E=Y.length=0;E<G.length;++E)Y.push(new b.default.Vector);for(z.forEach(function(ne,J){for(var he=S._getFaceNormal(J),Ce=0;Ce<3;++Ce)Y[ne[Ce]].add(he)}),E=0;E<G.length;++E)Y[E].normalize();return this}},{key:"averageNormals",value:function(){for(var E=0;E<=this.detailY;E++){var S=this.detailX+1,k=b.default.Vector.add(this.vertexNormals[E*S],this.vertexNormals[E*S+this.detailX]);k=b.default.Vector.div(k,2),this.vertexNormals[E*S]=k,this.vertexNormals[E*S+this.detailX]=k}return this}},{key:"averagePoleNormals",value:function(){for(var E=new b.default.Vector(0,0,0),S=0;S<this.detailX;S++)E.add(this.vertexNormals[S]);E=b.default.Vector.div(E,this.detailX);for(var k=0;k<this.detailX;k++)this.vertexNormals[k]=E;E=new b.default.Vector(0,0,0);for(var X=this.vertices.length-1;X>this.vertices.length-1-this.detailX;X--)E.add(this.vertexNormals[X]);E=b.default.Vector.div(E,this.detailX);for(var Y=this.vertices.length-1;Y>this.vertices.length-1-this.detailX;Y--)this.vertexNormals[Y]=E;return this}},{key:"_makeTriangleEdges",value:function(){for(var E=this.edges.length=0;E<this.faces.length;E++)this.edges.push([this.faces[E][0],this.faces[E][1]]),this.edges.push([this.faces[E][1],this.faces[E][2]]),this.edges.push([this.faces[E][2],this.faces[E][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var E,S=new Map,k=new Set,X=0;X<this.edges.length;X++){var Y,G=this.edges[X-1],z=this.edges[X],ee=this.vertices[z[0]],H=this.vertices[z[1]],re=0<this.vertexStrokeColors.length&&G?this.vertexStrokeColors.slice(4*G[1],4*(G[1]+1)):[0,0,0,0],Z=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*z[0],4*(z[0]+1)):[0,0,0,0],_e=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*z[1],4*(z[1]+1)):[0,0,0,0],xe=H.copy().sub(ee).normalize(),oe=0<xe.magSq();oe&&this._addSegment(ee,H,Z,_e,xe),0<X&&G[1]===z[0]?k.has(z[0])||(k.add(z[0]),S.delete(z[0]),E&&oe&&xe.dot(E)<1-1e-8&&this._addJoin(ee,E,xe,Z)):(oe&&!k.has(z[0])&&((Y=S.get(z[0]))?(this._addJoin(ee,Y.dir,xe,Z),S.delete(z[0]),k.add(z[0])):S.set(z[0],{point:ee,dir:xe.copy().mult(-1),color:Z})),E&&!k.has(G[1])&&((Y=S.get(G[1]))?(this._addJoin(this.vertices[G[1]],E,Y.dir.copy().mult(-1),re),S.delete(G[1]),k.add(G[1])):S.set(G[1],{point:this.vertices[G[1]],dir:E,color:re}),E=void 0)),X!==this.edges.length-1||k.has(z[1])||((ee=S.get(z[1]))?(this._addJoin(H,xe,ee.dir.copy().mult(-1),_e),S.delete(z[1]),k.add(z[1])):S.set(z[1],{point:H,dir:xe,color:_e})),oe&&(E=xe)}var me=!0,ne=!1,J=void 0;try{for(var he,Ce=S.values()[Symbol.iterator]();!(me=(he=Ce.next()).done);me=!0){var et=he.value;this._addCap(et.point,et.dir,et.color)}}catch(Le){ne=!0,J=Le}finally{try{me||null==Ce.return||Ce.return()}finally{if(ne)throw J}}return this}},{key:"_addSegment",value:function(G,z,k,X,Y){G=G.array(),z=z.array();var ee=Y.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var H=0,re=[this.lineTangentsIn,this.lineTangentsOut];H<re.length;H++)for(var Z=re[H],_e=0;_e<6;_e++)Z.push.apply(Z,D(ee));return(Y=this.lineVertices).push.apply(Y,D(G).concat(D(z),D(G),D(z),D(z),D(G))),(Y=this.lineVertexColors).push.apply(Y,D(k).concat(D(X),D(k),D(X),D(X),D(k))),this}},{key:"_addCap",value:function(E,S,k){for(var X,Y=E.array(),G=S.array(),z=[0,0,0],ee=0;ee<6;ee++)(X=this.lineVertices).push.apply(X,D(Y)),(X=this.lineTangentsIn).push.apply(X,D(G)),(X=this.lineTangentsOut).push.apply(X,z),(X=this.lineVertexColors).push.apply(X,D(k));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(E,S,k,X){for(var Y,G=E.array(),z=S.array(),ee=k.array(),H=0;H<12;H++)(Y=this.lineVertices).push.apply(Y,D(G)),(Y=this.lineTangentsIn).push.apply(Y,D(z)),(Y=this.lineTangentsOut).push.apply(Y,D(ee)),(Y=this.lineVertexColors).push.apply(Y,D(X));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var E=this.vertices[0].copy(),S=this.vertices[0].copy(),k=0;k<this.vertices.length;k++)E.x=Math.max(E.x,this.vertices[k].x),S.x=Math.min(S.x,this.vertices[k].x),E.y=Math.max(E.y,this.vertices[k].y),S.y=Math.min(S.y,this.vertices[k].y),E.z=Math.max(E.z,this.vertices[k].z),S.z=Math.min(S.z,this.vertices[k].z);for(var X=b.default.Vector.lerp(E,S,.5),Y=b.default.Vector.sub(E,S),G=200/Math.max(Math.max(Y.x,Y.y),Y.z),z=0;z<this.vertices.length;z++)this.vertices[z].sub(X),this.vertices[z].mult(G)}return this}}])&&f(m.prototype,g),p}();var h=b.default.Geometry;K.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(I,ve,K){"use strict";I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I};function A(D,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(D,h.key,h)}}var b=Array,w=function(D){return Array.isArray(D)};typeof Float32Array<"u"&&(b=Float32Array,w=function(D){return Array.isArray(D)||D instanceof Float32Array}),M.default.Matrix=function(){function D(){var p=this,m=D;if(p instanceof m)return arguments.length&&((p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p])instanceof M.default&&(this.p5=(m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new b([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new b([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var d,f,h;return d=D,h=[{key:"identity",value:function(p){return new M.default.Matrix(p)}}],(f=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(p){var m=arguments;if(p instanceof M.default.Matrix?m=p.mat4:w(p)&&(m=p),16!==m.length)M.default._friendlyError("Expected 16 values but received ".concat(m.length,"."),"p5.Matrix.set");else for(var g=0;g<16;g++)this.mat4[g]=m[g];return this}},{key:"get",value:function(){return new M.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var p;return void 0!==this.mat3?((p=new M.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],p.mat3[1]=this.mat3[1],p.mat3[2]=this.mat3[2],p.mat3[3]=this.mat3[3],p.mat3[4]=this.mat3[4],p.mat3[5]=this.mat3[5],p.mat3[6]=this.mat3[6],p.mat3[7]=this.mat3[7],p.mat3[8]=this.mat3[8]):((p=new M.default.Matrix(this.p5)).mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15]),p}},{key:"transpose",value:function(p){var m,g,x,E,S,k;return p instanceof M.default.Matrix?(m=p.mat4[1],g=p.mat4[2],x=p.mat4[3],E=p.mat4[6],S=p.mat4[7],k=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=m,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=k,this.mat4[15]=p.mat4[15]):w(p)&&(m=p[1],g=p[2],x=p[3],E=p[6],S=p[7],k=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=m,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=k,this.mat4[15]=p[15]),this}},{key:"invert",value:function(oe){oe instanceof M.default.Matrix?(m=oe.mat4[0],g=oe.mat4[1],x=oe.mat4[2],E=oe.mat4[3],S=oe.mat4[4],k=oe.mat4[5],X=oe.mat4[6],Y=oe.mat4[7],G=oe.mat4[8],z=oe.mat4[9],ee=oe.mat4[10],H=oe.mat4[11],re=oe.mat4[12],Z=oe.mat4[13],_e=oe.mat4[14],xe=oe.mat4[15]):w(oe)&&(m=oe[0],g=oe[1],x=oe[2],E=oe[3],S=oe[4],k=oe[5],X=oe[6],Y=oe[7],G=oe[8],z=oe[9],ee=oe[10],H=oe[11],re=oe[12],Z=oe[13],_e=oe[14],xe=oe[15]);var m,g,x,E,S,k,X,Y,G,z,ee,H,re,Z,_e,xe,me=m*X-x*S,ne=m*Y-E*S,J=g*X-x*k,he=g*Y-E*k,Ce=x*Y-E*X,et=G*Z-z*re,le=G*_e-ee*re,V=G*xe-H*re,ge=z*_e-ee*Z,Le=z*xe-H*Z,Ke=ee*xe-H*_e,ut=(oe=m*k-g*S)*Ke-me*Le+ne*ge+J*V-he*le+Ce*et;return ut?(this.mat4[0]=(k*Ke-X*Le+Y*ge)*(ut=1/ut),this.mat4[1]=(x*Le-g*Ke-E*ge)*ut,this.mat4[2]=(Z*Ce-_e*he+xe*J)*ut,this.mat4[3]=(ee*he-z*Ce-H*J)*ut,this.mat4[4]=(X*V-S*Ke-Y*le)*ut,this.mat4[5]=(m*Ke-x*V+E*le)*ut,this.mat4[6]=(_e*ne-re*Ce-xe*me)*ut,this.mat4[7]=(G*Ce-ee*ne+H*me)*ut,this.mat4[8]=(S*Le-k*V+Y*et)*ut,this.mat4[9]=(g*V-m*Le-E*et)*ut,this.mat4[10]=(re*he-Z*ne+xe*oe)*ut,this.mat4[11]=(z*ne-G*he-H*oe)*ut,this.mat4[12]=(k*le-S*ge-X*et)*ut,this.mat4[13]=(m*ge-g*le+x*et)*ut,this.mat4[14]=(Z*me-re*J-_e*oe)*ut,this.mat4[15]=(G*J-z*me+ee*oe)*ut,this):null}},{key:"invert3x3",value:function(){var p=this.mat3[0],m=this.mat3[1],g=this.mat3[2],x=this.mat3[3],E=this.mat3[4],S=this.mat3[5],k=this.mat3[6],X=this.mat3[7],Y=this.mat3[8],G=Y*E-S*X,z=-Y*x+S*k,ee=X*x-E*k,H=p*G+m*z+g*ee;return H?(this.mat3[0]=G*(H=1/H),this.mat3[1]=(-Y*m+g*X)*H,this.mat3[2]=(S*m-g*E)*H,this.mat3[3]=z*H,this.mat3[4]=(Y*p-g*k)*H,this.mat3[5]=(-S*p+g*x)*H,this.mat3[6]=ee*H,this.mat3[7]=(-X*p+m*k)*H,this.mat3[8]=(E*p-m*x)*H,this):null}},{key:"transpose3x3",value:function(p){var m=(p=void 0===p?this.mat3:p)[1],g=p[2],x=p[5];return this.mat3[0]=p[0],this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=m,this.mat3[4]=p[4],this.mat3[5]=p[7],this.mat3[6]=g,this.mat3[7]=x,this.mat3[8]=p[8],this}},{key:"inverseTranspose",value:function(p){if(p=p.mat4,void 0===this.mat3?M.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=p[0],this.mat3[1]=p[1],this.mat3[2]=p[2],this.mat3[3]=p[4],this.mat3[4]=p[5],this.mat3[5]=p[6],this.mat3[6]=p[8],this.mat3[7]=p[9],this.mat3[8]=p[10]),p=this.invert3x3())p.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this}},{key:"determinant",value:function(){return(this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4])*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-(this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4])*(this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13])+(this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4])*(this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13])+(this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5])*(this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12])-(this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5])*(this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12])+(this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6])*(this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12])}},{key:"mult",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var x=this.mat4[1],E=this.mat4[2],S=this.mat4[3];return this.mat4[0]=(g=this.mat4[0])*m[0]+x*m[4]+E*m[8]+S*m[12],this.mat4[1]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[2]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[3]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[4]=(g=this.mat4[4])*m[0]+(x=this.mat4[5])*m[4]+(E=this.mat4[6])*m[8]+(S=this.mat4[7])*m[12],this.mat4[5]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[6]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[7]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[8]=(g=this.mat4[8])*m[0]+(x=this.mat4[9])*m[4]+(E=this.mat4[10])*m[8]+(S=this.mat4[11])*m[12],this.mat4[9]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[10]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[11]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[12]=(g=this.mat4[12])*m[0]+(x=this.mat4[13])*m[4]+(E=this.mat4[14])*m[8]+(S=this.mat4[15])*m[12],this.mat4[13]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[14]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[15]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this}},{key:"apply",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var E,S,k,x=((g=this.mat4)[0]=m[0]*(x=g[0])+m[1]*(E=g[4])+m[2]*(S=g[8])+m[3]*(k=g[12]),g[4]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[8]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[12]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[1]);return g[1]=m[0]*x+m[1]*(E=g[5])+m[2]*(S=g[9])+m[3]*(k=g[13]),g[5]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[9]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[13]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[2]=m[0]*(x=g[2])+m[1]*(E=g[6])+m[2]*(S=g[10])+m[3]*(k=g[14]),g[6]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[10]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[14]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,g[3]=m[0]*(x=g[3])+m[1]*(E=g[7])+m[2]*(S=g[11])+m[3]*(k=g[15]),g[7]=m[4]*x+m[5]*E+m[6]*S+m[7]*k,g[11]=m[8]*x+m[9]*E+m[10]*S+m[11]*k,g[15]=m[12]*x+m[13]*E+m[14]*S+m[15]*k,this}},{key:"scale",value:function(p,m,g){return p instanceof M.default.Vector?(m=p.y,g=p.z,p=p.x):p instanceof Array&&(m=p[1],g=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(oe,Le,ge,x){Le instanceof M.default.Vector?(ge=Le.y,x=Le.z,Le=Le.x):Le instanceof Array&&(ge=Le[1],x=Le[2],Le=Le[0]);var E=(Le*=1/(E=Math.sqrt(Le*Le+ge*ge+x*x)),ge*=1/E,x*=1/E,this.mat4[0]),S=this.mat4[1],k=this.mat4[2],X=this.mat4[3],Y=this.mat4[4],G=this.mat4[5],z=this.mat4[6],ee=this.mat4[7],H=this.mat4[8],re=this.mat4[9],Z=this.mat4[10],_e=this.mat4[11],xe=Math.sin(oe),me=1-(oe=Math.cos(oe)),ne=Le*Le*me+oe,J=ge*Le*me+x*xe,he=x*Le*me-ge*xe,Ce=Le*ge*me-x*xe,et=ge*ge*me+oe,le=x*ge*me+Le*xe,V=Le*x*me+ge*xe;return ge=ge*x*me-Le*xe,Le=x*x*me+oe,this.mat4[0]=E*ne+Y*J+H*he,this.mat4[1]=S*ne+G*J+re*he,this.mat4[2]=k*ne+z*J+Z*he,this.mat4[3]=X*ne+ee*J+_e*he,this.mat4[4]=E*Ce+Y*et+H*le,this.mat4[5]=S*Ce+G*et+re*le,this.mat4[6]=k*Ce+z*et+Z*le,this.mat4[7]=X*Ce+ee*et+_e*le,this.mat4[8]=E*V+Y*ge+H*Le,this.mat4[9]=S*V+G*ge+re*Le,this.mat4[10]=k*V+z*ge+Z*Le,this.mat4[11]=X*V+ee*ge+_e*Le,this}},{key:"translate",value:function(x){var m=x[0],g=x[1];this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*g+this.mat4[8]*(x=x[2]||0),this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*g+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*g+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*g+this.mat4[11]*x}},{key:"rotateX",value:function(p){this.rotate(p,1,0,0)}},{key:"rotateY",value:function(p){this.rotate(p,0,1,0)}},{key:"rotateZ",value:function(p){this.rotate(p,0,0,1)}},{key:"perspective",value:function(E,m,g,x){E=1/Math.tan(E/2);var S=1/(g-x);return this.mat4[0]=E/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=E,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+g)*S,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*g*S,this.mat4[15]=0,this}},{key:"ortho",value:function(p,m,g,x,E,S){var k=1/(p-m),X=1/(g-x),Y=1/(E-S);return this.mat4[0]=-2*k,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*X,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*Y,this.mat4[11]=0,this.mat4[12]=(p+m)*k,this.mat4[13]=(x+g)*X,this.mat4[14]=(S+E)*Y,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(p,m,g,x){var E=new Array(4),S=this.mat4;return E[0]=S[0]*p+S[4]*m+S[8]*g+S[12]*x,E[1]=S[1]*p+S[5]*m+S[9]*g+S[13]*x,E[2]=S[2]*p+S[6]*m+S[10]*g+S[14]*x,E[3]=S[3]*p+S[7]*m+S[11]*g+S[15]*x,E}},{key:"multiplyPoint",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,1);return new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var x;return(x=this.multiplyVec4(x=g.x,g.y,g=g.z,1))[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,0);return new M.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(g){var m;if(g===this||g===this.mat3)m=this.copy().mat3;else if(g instanceof M.default.Matrix)m=g.mat3;else if(w(g))m=g;else{if(9!==arguments.length)return;m=arguments}var x=this.mat3[1],E=this.mat3[2];return this.mat3[0]=(g=this.mat3[0])*m[0]+x*m[3]+E*m[6],this.mat3[1]=g*m[1]+x*m[4]+E*m[7],this.mat3[2]=g*m[2]+x*m[5]+E*m[8],this.mat3[3]=(g=this.mat3[3])*m[0]+(x=this.mat3[4])*m[3]+(E=this.mat3[5])*m[6],this.mat3[4]=g*m[1]+x*m[4]+E*m[7],this.mat3[5]=g*m[2]+x*m[5]+E*m[8],this.mat3[6]=(g=this.mat3[6])*m[0]+(x=this.mat3[7])*m[3]+(E=this.mat3[8])*m[6],this.mat3[7]=g*m[1]+x*m[4]+E*m[7],this.mat3[8]=g*m[2]+x*m[5]+E*m[8],this}},{key:"column",value:function(p){return new M.default.Vector(this.mat3[3*p],this.mat3[3*p+1],this.mat3[3*p+2])}},{key:"row",value:function(p){return new M.default.Vector(this.mat3[p],this.mat3[p+3],this.mat3[p+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(p,m){return(m=void 0===m?p.copy():m).x=this.row(0).dot(p),m.y=this.row(1).dot(p),m.z=this.row(2).dot(p),m}},{key:"createSubMatrix3x3",value:function(){var p=new M.default.Matrix("mat3");return p.mat3[0]=this.mat4[0],p.mat3[1]=this.mat4[1],p.mat3[2]=this.mat4[2],p.mat3[3]=this.mat4[4],p.mat3[4]=this.mat4[5],p.mat3[5]=this.mat4[6],p.mat3[6]=this.mat4[8],p.mat3[7]=this.mat4[9],p.mat3[8]=this.mat4[10],p}}])&&A(d.prototype,f),h&&A(d,h),D}(),K.default=I=M.default.Matrix},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(l,ve,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Quat=function(){function b(d,f,h,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.w=d,this.vec=new M.default.Vector(f,h,p)}var w,I,D;return w=b,D=[{key:"fromAxisAngle",value:function(d,g,h,p){var m=Math.cos(d/2);return g=new M.default.Vector(g,h,p).normalize().mult(Math.sin(d/2)),new M.default.Quat(m,g.x,g.y,g.z)}}],(I=[{key:"conjugate",value:function(){return new M.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(d){return new M.default.Quat(this.w*d.w-this.vec.x*d.vec.x-this.vec.y*d.vec.y-this.vec.z-d.vec.z,this.w*d.vec.x+this.vec.x*d.w+this.vec.y*d.vec.z-this.vec.z*d.vec.y,this.w*d.vec.y-this.vec.x*d.vec.z+this.vec.y*d.w+this.vec.z*d.vec.x,this.w*d.vec.z+this.vec.x*d.vec.y-this.vec.y*d.vec.x+this.vec.z*d.w)}},{key:"rotateVector",value:function(d){return new M.default.Vector.mult(d,this.w*this.w-this.vec.dot(this.vec)).add(M.default.Vector.mult(this.vec,2*d.dot(this.vec))).add(M.default.Vector.mult(this.vec,2*this.w).cross(d)).clampToZero()}},{key:"rotateBy",value:function(d){return d.multiply(this).multiply(d.conjugate()).vec.clampToZero()}}])&&A(w.prototype,I),D&&A(w,D),b}(),K.default=l=M.default.Quat},{"../core/main":283}],338:[function(l,ve,K){"use strict";function M(A,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}l("core-js/modules/es.array.map"),l("core-js/modules/es.array.map"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.RenderBuffer=function(){function A(D,d,f,h,p,m){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");this.size=D,this.src=d,this.dst=f,this.attr=h,this._renderer=p,this.map=m}var b,w;return b=A,(w=[{key:"_prepareBuffer",value:function(D,d){var f,h,p,x,m=this._renderer.GL,g=D.model||D;(x=(x=d.attributes)[this.attr])&&(f=D[this.dst],0<(h=g[this.src]).length?((p=!f)&&(D[this.dst]=f=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,f),!p&&!1===g.dirtyFlags[this.src]||(p=(D=this.map)?D(h):h,this._renderer._bindBuffer(f,m.ARRAY_BUFFER,p),g.dirtyFlags[this.src]=!1),d.enableAttrib(x,this.size)):-1!==(D=x.location)&&this._renderer.registerEnabled.has(D)&&(m.disableVertexAttribArray(D),this._renderer.registerEnabled.delete(D)))}}])&&M(b.prototype,w),A}(),K.default=l=l.default.RenderBuffer},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(l,ve,K){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function A(h){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==A(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l("./p5.RenderBuffer"),b.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=void 0!==h?h:w.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var d={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(b.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==w.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},b.default.RendererGL.prototype.vertex=function(h,p){if(this.immediateMode.shapeMode===w.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in d){var g=d[m];(m=this.immediateMode.geometry[m]).push.apply(m,D(m.slice(m.length-3*g,m.length-2*g)).concat(D(m.slice(m.length-g,m.length))))}var x,E,S=x=E=0,k=(3===arguments.length?S=arguments[2]:4===arguments.length?(x=arguments[2],E=arguments[3]):5===arguments.length&&(S=arguments[2],x=arguments[3],E=arguments[4]),new b.default.Vector(h,p,S));return this.immediateMode.geometry.vertices.push(k),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.immediateMode.geometry.vertexColors.push((k=this.curFillColor||[.5,.5,.5,1])[0],k[1],k[2],k[3]),this.immediateMode.geometry.vertexStrokeColors.push((k=this.curStrokeColor||[.5,.5,.5,1])[0],k[1],k[2],k[3]),this.textureMode!==w.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,E/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,E),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=p,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=p,this.immediateMode._quadraticVertex[2]=S,this},b.default.RendererGL.prototype.normal=function(h,p,m){return this._currentNormal=h instanceof b.default.Vector?h:new b.default.Vector(h,p,m),this},b.default.RendererGL.prototype.endShape=function(h,p,m,g,x,E){var S,k=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===w.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===w.TESS&&(this.immediateMode.shapeMode=w.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),S=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==w.LINE_STRIP&&this.immediateMode.shapeMode!==w.LINES||(this.immediateMode.shapeMode=w.TRIANGLE_FAN,S=!0),this.immediateMode.shapeMode===w.QUADS?this.immediateMode.shapeMode=w.TRIANGLES:this.immediateMode.shapeMode===w.QUAD_STRIP&&(this.immediateMode.shapeMode=w.TRIANGLE_STRIP),this._doFill&&!S&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(k),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},b.default.RendererGL.prototype._processVertices=function(h){var p;0!==this.immediateMode.geometry.vertices.length&&(h=h===w.CLOSE,this._doStroke&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),p=this.immediateMode.shapeMode===w.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||p||h)&&this.immediateMode.shapeMode!==w.LINES&&this._tesselateShape())},b.default.RendererGL.prototype._calculateEdges=function(h,p,m){var g=[],x=0,E=this.immediateMode.contourIndices.slice(),S=0;switch(h){case w.TRIANGLE_STRIP:for(x=0;x<p.length-2;x++)g.push([x,x+1]),g.push([x,x+2]);g.push([x,x+1]);break;case w.TRIANGLE_FAN:for(x=1;x<p.length-1;x++)g.push([0,x]),g.push([x,x+1]);g.push([0,p.length-1]);break;case w.TRIANGLES:for(x=0;x<p.length-2;x+=3)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+2,x]);break;case w.LINES:for(x=0;x<p.length-1;x+=2)g.push([x,x+1]);break;case w.QUADS:for(x=0;x<p.length-5;x+=6)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+3,x+5]),g.push([x+4,x+5]);break;case w.QUAD_STRIP:for(x=0;x<p.length-2;x+=2)g.push([x,x+1]),g.push([x,x+2]),g.push([x+1,x+3]);g.push([x,x+1]);break;default:for(x=0;x<p.length;x++)x+1<p.length&&x+1!==E[0]?g.push([x,x+1]):((m||S)&&g.push([x,S]),0<E.length&&(S=E.shift()))}return h!==w.TESS&&m&&g.push([p.length-1,0]),g},b.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,p=(this.immediateMode.shapeMode=w.TRIANGLES,[[]]),m=0;m<this.immediateMode.geometry.vertices.length;m++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===m&&(this.immediateMode.contourIndices.shift(),p.push([])),p[p.length-1].push(this.immediateMode.geometry.vertices[m].x,this.immediateMode.geometry.vertices[m].y,this.immediateMode.geometry.vertices[m].z,this.immediateMode.geometry.uvs[2*m],this.immediateMode.geometry.uvs[2*m+1],this.immediateMode.geometry.vertexColors[4*m],this.immediateMode.geometry.vertexColors[4*m+1],this.immediateMode.geometry.vertexColors[4*m+2],this.immediateMode.geometry.vertexColors[4*m+3],this.immediateMode.geometry.vertexNormals[m].x,this.immediateMode.geometry.vertexNormals[m].y,this.immediateMode.geometry.vertexNormals[m].z);for(var g,x=this._triangulate(p),E=this.immediateMode.geometry.vertices,S=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),k=0,X=x.length;k<X;k+=b.default.RendererGL.prototype.tessyVertexSize)S.push.apply(S,D(x.slice(k+5,k+9))),this.normal.apply(this,D(x.slice(k+9,k+12))),this.vertex.apply(this,D(x.slice(k,k+5)));this.geometryBuilder&&(g=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(Y){return Y.map(function(G){if(!g.has(G)){var z=E[G],ee=h.immediateMode.geometry.vertices.findIndex(function(me){return z.x===me.x&&z.y===me.y&&z.z===me.z});if(-1===ee){for(var H=1/0,re=0,Z=0;Z<h.immediateMode.geometry.vertices.length;Z++){var xe,oe,_e=z.y-(xe=h.immediateMode.geometry.vertices[Z]).y;(oe=(oe=z.x-xe.x)*oe+_e*_e+(xe=z.z-xe.z)*xe)<H&&(H=oe,re=Z)}ee=re}g.set(G,ee)}return g.get(G)})})),this.immediateMode.geometry.vertexColors=S},b.default.RendererGL.prototype._drawImmediateFill=function(){var h,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,m=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),x=!1,E=void 0;try{for(var S,k=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(S=k.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,h)}catch(X){x=!0,E=X}finally{try{g||null==k.return||k.return()}finally{if(x)throw E}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===p)m.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{m.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,p)}catch{console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},b.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,p=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),m=(this._setStrokeUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.immediateMode.buffers.stroke[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(this.immediateMode.geometry,p)}catch(k){g=!0,x=k}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),p.unbindShader()},b.default.RendererGL);K.default=f},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(l,ve,K){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function A(d){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=(l("./p5.RendererGL"),l("./p5.RenderBuffer"),function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==A(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants")));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.RendererGL.prototype.freeGeometry=function(d){d.gid?this._freeBuffers(d.gid):console.warn("The model you passed to freeGeometry does not have an id!")},b.default.RendererGL.prototype._initBufferDefaults=function(d){var f;return this._freeBuffers(d),1e3<Object.keys(this.retainedMode.geometry).length&&(f=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(f)),this.retainedMode.geometry[d]={}},b.default.RendererGL.prototype._freeBuffers=function(d){var f,h=this.retainedMode.geometry[d];function p(m){var g=!0,x=!1,E=void 0;try{for(var S,k=m[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var X=S.value;h[X.dst]&&(f.deleteBuffer(h[X.dst]),h[X.dst]=null)}}catch(Y){x=!0,E=Y}finally{try{g||null==k.return||k.return()}finally{if(x)throw E}}}h&&(delete this.retainedMode.geometry[d],f=this.GL,h.indexBuffer&&f.deleteBuffer(h.indexBuffer),p(this.retainedMode.buffers.stroke),p(this.retainedMode.buffers.fill))},b.default.RendererGL.prototype.createBuffers=function(x,f){var h,p,m,g=this.GL,E=((x=this._initBufferDefaults(x)).model=f,x.indexBuffer);return f.faces.length?(E=E||(x.indexBuffer=g.createBuffer()),m=(p=(h=b.default.RendererGL.prototype._flatten(f.faces)).some(function(S){return 65535<S}))?Uint32Array:Uint16Array,this._bindBuffer(E,g.ELEMENT_ARRAY_BUFFER,h,m),x.indexBufferType=p?g.UNSIGNED_INT:g.UNSIGNED_SHORT,x.vertexCount=3*f.faces.length):(E&&(g.deleteBuffer(E),x.indexBuffer=null),x.vertexCount=f.vertices?f.vertices.length:0),x.lineVertexCount=f.lineVertices?f.lineVertices.length/3:0,x},b.default.RendererGL.prototype.drawBuffers=function(d){var f=this.GL,h=this.retainedMode.geometry[d];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[d].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var p=this._getRetainedFillShader(),m=(this._setFillUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.retainedMode.buffers.fill[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(h,p)}catch(z){g=!0,x=z}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(f.TRIANGLES,d),p.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var k=this._getRetainedStrokeShader(),X=(this._setStrokeUniforms(k),!0);g=!1,x=void 0;try{for(var Y,G=this.retainedMode.buffers.stroke[Symbol.iterator]();!(X=(Y=G.next()).done);X=!0)Y.value._prepareBuffer(h,k)}catch(H){g=!0,x=H}finally{try{X||null==G.return||G.return()}finally{if(g)throw x}}k.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(f.TRIANGLES,d),k.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},b.default.RendererGL.prototype.drawBuffersScaled=function(d,f,h,p){var m=this.uModelMatrix.copy();try{this.uModelMatrix.scale(f,h,p),this.drawBuffers(d)}finally{this.uModelMatrix=m}},b.default.RendererGL.prototype._drawArrays=function(d,f){return this.GL.drawArrays(d,0,this.retainedMode.geometry[f].lineVertexCount),this},b.default.RendererGL.prototype._drawElements=function(d,h){var p=this.GL;if((h=this.retainedMode.geometry[h]).indexBuffer){if(this._pInst.webglVersion!==w.WEBGL2&&h.indexBufferType===p.UNSIGNED_INT&&!p.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");p.drawElements(p.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else p.drawArrays(d||p.TRIANGLES,0,h.vertexCount)},b.default.RendererGL.prototype._drawPoints=function(d,f){var h=this.GL,p=this._getImmediatePointShader();this._setPointUniforms(p),this._bindBuffer(f,h.ARRAY_BUFFER,this._vToNArray(d),Float32Array,h.STATIC_DRAW),p.enableAttrib(p.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,d.length),p.unbindShader()};var D=b.default.RendererGL;K.default=D},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(Z,ve,K){"use strict";function M(J){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(J)}function A(J){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(he){return M(he)}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":M(he)})(J)}Z("core-js/modules/es.symbol"),Z("core-js/modules/es.symbol.description"),Z("core-js/modules/es.symbol.iterator"),Z("core-js/modules/es.array.concat"),Z("core-js/modules/es.array.copy-within"),Z("core-js/modules/es.array.every"),Z("core-js/modules/es.array.fill"),Z("core-js/modules/es.array.flat"),Z("core-js/modules/es.array.flat-map"),Z("core-js/modules/es.array.from"),Z("core-js/modules/es.array.includes"),Z("core-js/modules/es.array.iterator"),Z("core-js/modules/es.array.map"),Z("core-js/modules/es.array.slice"),Z("core-js/modules/es.array.some"),Z("core-js/modules/es.array.unscopables.flat"),Z("core-js/modules/es.array.unscopables.flat-map"),Z("core-js/modules/es.map"),Z("core-js/modules/es.object.assign"),Z("core-js/modules/es.object.get-own-property-descriptor"),Z("core-js/modules/es.object.get-prototype-of"),Z("core-js/modules/es.object.to-string"),Z("core-js/modules/es.reflect.construct"),Z("core-js/modules/es.reflect.get"),Z("core-js/modules/es.regexp.to-string"),Z("core-js/modules/es.set"),Z("core-js/modules/es.string.includes"),Z("core-js/modules/es.string.iterator"),Z("core-js/modules/es.typed-array.float32-array"),Z("core-js/modules/es.typed-array.float64-array"),Z("core-js/modules/es.typed-array.int16-array"),Z("core-js/modules/es.typed-array.uint8-array"),Z("core-js/modules/es.typed-array.uint16-array"),Z("core-js/modules/es.typed-array.uint32-array"),Z("core-js/modules/es.typed-array.copy-within"),Z("core-js/modules/es.typed-array.every"),Z("core-js/modules/es.typed-array.fill"),Z("core-js/modules/es.typed-array.filter"),Z("core-js/modules/es.typed-array.find"),Z("core-js/modules/es.typed-array.find-index"),Z("core-js/modules/es.typed-array.for-each"),Z("core-js/modules/es.typed-array.includes"),Z("core-js/modules/es.typed-array.index-of"),Z("core-js/modules/es.typed-array.iterator"),Z("core-js/modules/es.typed-array.join"),Z("core-js/modules/es.typed-array.last-index-of"),Z("core-js/modules/es.typed-array.map"),Z("core-js/modules/es.typed-array.reduce"),Z("core-js/modules/es.typed-array.reduce-right"),Z("core-js/modules/es.typed-array.reverse"),Z("core-js/modules/es.typed-array.set"),Z("core-js/modules/es.typed-array.slice"),Z("core-js/modules/es.typed-array.some"),Z("core-js/modules/es.typed-array.sort"),Z("core-js/modules/es.typed-array.subarray"),Z("core-js/modules/es.typed-array.to-locale-string"),Z("core-js/modules/es.typed-array.to-string"),Z("core-js/modules/es.weak-map"),Z("core-js/modules/web.dom-collections.iterator"),Z("core-js/modules/es.symbol"),Z("core-js/modules/es.symbol.description"),Z("core-js/modules/es.symbol.iterator"),Z("core-js/modules/es.array.concat"),Z("core-js/modules/es.array.copy-within"),Z("core-js/modules/es.array.every"),Z("core-js/modules/es.array.fill"),Z("core-js/modules/es.array.flat"),Z("core-js/modules/es.array.flat-map"),Z("core-js/modules/es.array.from"),Z("core-js/modules/es.array.includes"),Z("core-js/modules/es.array.iterator"),Z("core-js/modules/es.array.map"),Z("core-js/modules/es.array.slice"),Z("core-js/modules/es.array.some"),Z("core-js/modules/es.array.unscopables.flat"),Z("core-js/modules/es.array.unscopables.flat-map"),Z("core-js/modules/es.map"),Z("core-js/modules/es.object.assign"),Z("core-js/modules/es.object.to-string"),Z("core-js/modules/es.set"),Z("core-js/modules/es.string.includes"),Z("core-js/modules/es.string.iterator"),Z("core-js/modules/es.typed-array.float32-array"),Z("core-js/modules/es.typed-array.float64-array"),Z("core-js/modules/es.typed-array.int16-array"),Z("core-js/modules/es.typed-array.uint8-array"),Z("core-js/modules/es.typed-array.uint16-array"),Z("core-js/modules/es.typed-array.uint32-array"),Z("core-js/modules/es.typed-array.copy-within"),Z("core-js/modules/es.typed-array.every"),Z("core-js/modules/es.typed-array.fill"),Z("core-js/modules/es.typed-array.filter"),Z("core-js/modules/es.typed-array.find"),Z("core-js/modules/es.typed-array.find-index"),Z("core-js/modules/es.typed-array.for-each"),Z("core-js/modules/es.typed-array.includes"),Z("core-js/modules/es.typed-array.index-of"),Z("core-js/modules/es.typed-array.iterator"),Z("core-js/modules/es.typed-array.join"),Z("core-js/modules/es.typed-array.last-index-of"),Z("core-js/modules/es.typed-array.map"),Z("core-js/modules/es.typed-array.reduce"),Z("core-js/modules/es.typed-array.reduce-right"),Z("core-js/modules/es.typed-array.reverse"),Z("core-js/modules/es.typed-array.set"),Z("core-js/modules/es.typed-array.slice"),Z("core-js/modules/es.typed-array.some"),Z("core-js/modules/es.typed-array.sort"),Z("core-js/modules/es.typed-array.subarray"),Z("core-js/modules/es.typed-array.to-locale-string"),Z("core-js/modules/es.typed-array.to-string"),Z("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.readPixelsWebGL=me,K.readPixelWebGL=ne,K.default=void 0;var b=h(Z("../core/main")),w=function(J){if(J&&J.__esModule)return J;if(null===J||"object"!==A(J)&&"function"!=typeof J)return{default:J};var he=f();if(he&&he.has(J))return he.get(J);var Ce,et={},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ce in J){var V;Object.prototype.hasOwnProperty.call(J,Ce)&&((V=le?Object.getOwnPropertyDescriptor(J,Ce):null)&&(V.get||V.set)?Object.defineProperty(et,Ce,V):et[Ce]=J[Ce])}return et.default=J,he&&he.set(J,et),et}(Z("../core/constants")),I=h(Z("./GeometryBuilder")),D=h(Z("libtess")),d=(Z("./p5.Shader"),Z("./p5.Camera"),Z("../core/p5.Renderer"),Z("./p5.Matrix"),Z("./p5.Framebuffer"),Z("path"),Z("./p5.Texture"));function f(){var J;return"function"!=typeof WeakMap?null:(f=function(){return J},J=new WeakMap)}function h(J){return J&&J.__esModule?J:{default:J}}function p(J){return function(he){if(Array.isArray(he)){for(var Ce=0,et=new Array(he.length);Ce<he.length;Ce++)et[Ce]=he[Ce];return et}}(J)||function(he){if(Symbol.iterator in Object(he)||"[object Arguments]"===Object.prototype.toString.call(he))return Array.from(he)}(J)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(J,he){for(var Ce=0;Ce<he.length;Ce++){var et=he[Ce];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(J,et.key,et)}}function g(J,he,Ce){return(g=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(ge,le,V){if(ge=function(Le,Ke){for(;!Object.prototype.hasOwnProperty.call(Le,Ke)&&null!==(Le=k(Le)););return Le}(ge,le))return(ge=Object.getOwnPropertyDescriptor(ge,le)).get?ge.get.call(V):ge.value})(J,he,Ce||J)}function x(J,he){return(x=Object.setPrototypeOf||function(Ce,et){return Ce.__proto__=et,Ce})(J,he)}function S(J){if(void 0===J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function k(J){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(he){return he.__proto__||Object.getPrototypeOf(he)})(J)}function X(J,he,Ce){he in J?Object.defineProperty(J,he,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):J[he]=Ce}function Y(J,he){re+="#define STROKE_CAP_".concat(J," ").concat(he,"\n"),ee[w[J]]=he}function G(J,he){re+="#define STROKE_JOIN_".concat(J," ").concat(he,"\n"),H[w[J]]=he}var z,ee={},H={},re="",_e={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 positionVec4 = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  gl_Position = uProjectionMatrix * positionVec4;\n\n  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));\n  vVertTexCoord = HOOK_getUV(aTexCoord);\n  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",lightVert:(Y("ROUND",0),Y("PROJECT",1),Y("SQUARE",2),G("ROUND",0),G("MITER",1),G("BEVEL",2),(Z='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));\n  vTexCoord = HOOK_getUV(aTexCoord);\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));\n  HOOK_afterVertex();\n}\n",phongFrag:Z+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:re+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  HOOK_beforeVertex();\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);\n  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);\n  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);\n  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);\n  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);\n  vStrokeWeight = strokeWeight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(-0.00045, -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = HOOK_getLineCenter(p.xy);\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * strokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * strokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * strokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * strokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * strokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));\n    } else {\n      vMaxDist = strokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      strokeWeight * 0.5;\n    vMaxDist = strokeWeight / 2.;\n  }\n  vPosition = HOOK_getLinePosition(vCenter + offset);\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",lineFrag:re+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},xe=_e.sphereMappingFrag;for(z in _e)_e[z]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+_e[z];X(Z={},w.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),X(Z,w.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),X(Z,w.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),X(Z,w.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),X(Z,w.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),X(Z,w.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),X(Z,w.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),X(Z,w.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var oe=Z;function me(J,he,Nt,et,le,V,ge,Le,Ke,ut){var _t=he.getParameter(he.FRAMEBUFFER_BINDING),dt=V*ge*(he.bindFramebuffer(he.FRAMEBUFFER,Nt),Nt=Le===he.RGBA?4:3),Rt=Ke===he.UNSIGNED_BYTE?Uint8Array:Float32Array;if(J instanceof Rt&&J.length===dt||(J=new Rt(dt)),he.readPixels(et,ut?ut-le-ge:le,V,ge,Le,Ke,J),he.bindFramebuffer(he.FRAMEBUFFER,_t),ut)for(var Bt=Math.floor(ge/2),lt=new Rt(V*Nt),It=0;It<Bt;It++){var Tt=It*V*4,Ot=(ge-It-1)*V*4;lt.set(J.subarray(Tt,Tt+4*V)),J.copyWithin(Tt,Ot,Ot+4*V),J.set(lt,Ot)}return J}function ne(J,Ke,Ce,et,le,V,ge){var Le=J.getParameter(J.FRAMEBUFFER_BINDING);return J.bindFramebuffer(J.FRAMEBUFFER,Ke),Ke=le===J.RGBA?4:3,Ke=new(V===J.UNSIGNED_BYTE?Uint8Array:Float32Array)(Ke),J.readPixels(Ce,ge?ge-et-1:et,1,1,le,V,Ke),J.bindFramebuffer(J.FRAMEBUFFER,Le),Array.from(Ke)}b.default.prototype.setAttributes=function(J,he){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Ce=!0;if(void 0!==he?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[J]!==he&&(this._glAttributes[J]=he,Ce=!1)):J instanceof Object&&this._glAttributes!==J&&(this._glAttributes=J,Ce=!1),this._renderer.isP3D&&!Ce){if(!this._setupDone)for(var et in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(et))return void b.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},b.default.RendererGL=function(J){var he=le;if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(J&&J.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),J&&x(he,J);var et=function E(J){return function(){var he,Ce,et=k(J);return he=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(he=k(this).constructor,Reflect.construct(et,arguments,he)):et.apply(this,arguments),et=this,!(Ce=he)||"object"!==A(Ce)&&"function"!=typeof Ce?S(et):Ce}}(le);function le(V,ge,Le,Ke){if(this instanceof le)return(V=et.call(this,V,ge,Le))._setAttributeDefaults(ge),V._initContext(),V.isP3D=!0,V.geometryBuilder=void 0,V.GL=V.drawingContext,V._pInst._setProperty("drawingContext",V.drawingContext),V._isErasing=!1,V._clipDepths=[],V._isClipApplied=!1,V._stencilTestOn=!1,V._enableLighting=!1,V.ambientLightColors=[],V.mixedAmbientLight=[],V.mixedSpecularColor=[],V.specularColors=[1,1,1],V.directionalLightDirections=[],V.directionalLightDiffuseColors=[],V.directionalLightSpecularColors=[],V.pointLightPositions=[],V.pointLightDiffuseColors=[],V.pointLightSpecularColors=[],V.spotLightPositions=[],V.spotLightDirections=[],V.spotLightDiffuseColors=[],V.spotLightSpecularColors=[],V.spotLightAngle=[],V.spotLightConc=[],V.activeImageLight=null,V.diffusedTextures=new Map,V.specularTextures=new Map,V.drawMode=w.FILL,V.curFillColor=V._cachedFillStyle=[1,1,1,1],V.curAmbientColor=V._cachedFillStyle=[1,1,1,1],V.curSpecularColor=V._cachedFillStyle=[0,0,0,0],V.curEmissiveColor=V._cachedFillStyle=[0,0,0,0],V.curStrokeColor=V._cachedStrokeStyle=[0,0,0,1],V.curBlendMode=w.BLEND,V.preEraseBlend=void 0,V._cachedBlendMode=void 0,V.blendExt=V.webglVersion===w.WEBGL2?V.GL:V.GL.getExtension("EXT_blend_minmax"),V._isBlending=!1,V._hasSetAmbient=!1,V._useSpecularMaterial=!1,V._useEmissiveMaterial=!1,V._useNormalMaterial=!1,V._useShininess=1,V._useMetalness=0,V._useLineColor=!1,V._useVertexColor=!1,V.registerEnabled=new Set,V._tint=[255,255,255,255],V.constantAttenuation=1,V.linearAttenuation=0,V.quadraticAttenuation=0,V.uModelMatrix=new b.default.Matrix,V.uViewMatrix=new b.default.Matrix,V.uMVMatrix=new b.default.Matrix,V.uPMatrix=new b.default.Matrix,V.uNMatrix=new b.default.Matrix("mat3"),V.curMatrix=new b.default.Matrix("mat3"),V._currentNormal=new b.default.Vector(0,0,1),V._curCamera=new b.default.Camera(S(V)),V._curCamera._computeCameraDefaultSettings(),V._curCamera._setDefaultCamera(),V.filterCamera=new b.default.Camera(S(V)),V.filterCamera._computeCameraDefaultSettings(),V.filterCamera._setDefaultCamera(),V.prevTouches=[],V.zoomVelocity=0,V.rotateVelocity=new b.default.Vector(0,0),V.moveVelocity=new b.default.Vector(0,0),V.executeZoom=!1,V.executeRotateAndMove=!1,V.specularShader=void 0,V.sphereMapping=void 0,V.diffusedShader=void 0,V._defaultLightShader=void 0,V._defaultImmediateModeShader=void 0,V._defaultNormalShader=void 0,V._defaultColorShader=void 0,V._defaultPointShader=void 0,V.userFillShader=void 0,V.userStrokeShader=void 0,V.userPointShader=void 0,V.retainedMode={geometry:{},buffers:{stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(V)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(V)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(V)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(V)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(V))],fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(V),V._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(V),V._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(V)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(V)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(V),V._flatten)],text:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(V),V._vToNArray),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(V),V._flatten)]}},V.immediateMode={geometry:new b.default.Geometry,shapeMode:w.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(V),V._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(V),V._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(V)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(V)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(V),V._flatten)],stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(V)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(V)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(V)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(V)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(V))],point:V.GL.createBuffer()}},V.pointSize=5,V.curStrokeWeight=1,V.curStrokeCap=w.ROUND,V.curStrokeJoin=w.ROUND,V.textures=new Map,V.framebuffers=new Set,V.activeFramebuffers=[],V.filterShader=void 0,V.filterLayer=void 0,V.filterLayerTemp=void 0,V.defaultFilterShaders={},V.textureMode=w.IMAGE,V.textureWrapX=w.CLAMP,V.textureWrapY=w.CLAMP,V._tex=null,V._curveTightness=6,V._lookUpTableBezier=[],V._lookUpTableQuadratic=[],V._lutBezierDetail=0,V._lutQuadraticDetail=0,V.isProcessingVertices=!1,V._tessy=V._initTessy(),V.fontInfos={},V._curShader=void 0,V;throw new TypeError("Cannot call a class as a function")}return he=le,(J=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new I.default(this)}},{key:"endGeometry",value:function(){var V;if(this.geometryBuilder)return V=this.geometryBuilder.finish(),this.geometryBuilder=void 0,V;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(V){return this.beginGeometry(),V(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(V){var ge={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};V._glAttributes=null===V._glAttributes?ge:Object.assign(ge,V._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?w.WEBGL2:w.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var V=this.drawingContext;V.enable(V.DEPTH_TEST),V.depthFunc(V.LEQUAL),V.viewport(0,0,V.drawingBufferWidth,V.drawingBufferHeight),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var V=this.drawingContext;return V.getParameter(V.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(V,ge){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Ke=this._maxTextureSize,Le=(Ke=Math.floor(Ke/this.pixelDensity()),Math.min(V,Ke));return Ke=Math.min(ge,Ke),Le===V&&Ke===ge||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(Le,", height: ").concat(Ke,".")),{adjustedWidth:Le,adjustedHeight:Ke}}},{key:"_resetContext",value:function(V,ge){var Le,Ke=this.width,ut=this.height,Nt=this.canvas.id,_t=this._pInst instanceof b.default.Graphics;_t?((Le=this._pInst).canvas.parentNode.removeChild(Le.canvas),Le.canvas=document.createElement("canvas"),(Le._pInst._userNode||document.body).appendChild(Le.canvas),b.default.Element.call(Le,Le.canvas,Le._pInst),Le.width=Ke,Le.height=ut):((Le=this.canvas)&&Le.parentNode.removeChild(Le),(Le=document.createElement("canvas")).id=Nt,(this._pInst._userNode||document.body).appendChild(Le),this._pInst.canvas=Le,this.canvas=Le),Nt=new b.default.RendererGL(this._pInst.canvas,this._pInst,!_t),this._pInst._setProperty("_renderer",Nt),Nt.resize(Ke,ut),Nt._applyDefaults(),_t||this._pInst._elements.push(Nt),"function"==typeof ge&&setTimeout(function(){ge.apply(window._renderer,V)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Ke=(Ke=this._pInst).color.apply(Ke,arguments);this.clear(Ke.levels[0]/255,Ke.levels[1]/255,Ke.levels[2]/255,Ke=Ke.levels[3]/255)}},{key:"fill",value:function(V,ge,Le,Ke){var ut=b.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ut._array,this.drawMode=w.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(V,ge,Le,Ke){var ut=b.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ut._array}},{key:"strokeCap",value:function(V){this.curStrokeCap=V}},{key:"strokeJoin",value:function(V){this.curStrokeJoin=V}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(V,ge){V.width===ge.width&&V.height===ge.height||V.resize(ge.width,ge.height),V.pixelDensity()!==ge.pixelDensity()&&V.pixelDensity(ge.pixelDensity())}},{key:"filter",value:function(){var V,ge,Le=this,Ke=this.getFilterLayer(),ut=void 0,_t=void 0,Nt=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(_t=arguments.length<=0?void 0:arguments[0],X(V={},w.BLUR,3),X(V,w.POSTERIZE,4),X(V,w.THRESHOLD,.5),ut=_t in V&&void 0===(arguments.length<=1?void 0:arguments[1])?V[_t]:arguments.length<=1?void 0:arguments[1],_t in this.defaultFilterShaders||(this.defaultFilterShaders[_t]=new b.default.Shader(Ke._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",oe[_t])),this.filterShader=this.defaultFilterShaders[_t]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),dt=(this.matchSize(Ke,Nt),Ke.draw(function(){return Le._pInst.clear()}),[1/(Nt.width*Nt.pixelDensity()),1/(Nt.height*Nt.pixelDensity())]);_t===w.BLUR?(ge=this.getFilterLayerTemp(),this.matchSize(ge,Nt),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(w.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",dt),this.filterShader.setUniform("canvasSize",[Nt.width,Nt.height]),this.filterShader.setUniform("radius",Math.max(1,ut)),ge.draw(function(){Le.filterShader.setUniform("direction",[1,0]),Le.filterShader.setUniform("tex0",Nt),Le._pInst.clear(),Le._pInst.shader(Le.filterShader),Le._pInst.noLights(),Le._pInst.plane(Nt.width,Nt.height)}),Ke.draw(function(){Le.filterShader.setUniform("direction",[0,1]),Le.filterShader.setUniform("tex0",ge),Le._pInst.clear(),Le._pInst.shader(Le.filterShader),Le._pInst.noLights(),Le._pInst.plane(Nt.width,Nt.height)}),this._pInst.pop()):Ke.draw(function(){Le._pInst.noStroke(),Le._pInst.blendMode(w.BLEND),Le._pInst.shader(Le.filterShader),Le.filterShader.setUniform("tex0",Nt),Le.filterShader.setUniform("texelSize",dt),Le.filterShader.setUniform("canvasSize",[Nt.width,Nt.height]),Le.filterShader.setUniform("filterParameter",ut),Le._pInst.noLights(),Le._pInst.plane(Nt.width,Nt.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(w.CORNER),this._pInst.blendMode(w.BLEND),Nt.filterCamera._resize(),this._pInst.setCamera(Nt.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Ke,-Nt.width/2,-Nt.height/2,Nt.width,Nt.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(V){return V?this._pInst.pixelDensity(V):this._pInst.pixelDensity()}},{key:"blendMode",value:function(V){V===w.DARKEST||V===w.LIGHTEST||V===w.ADD||V===w.BLEND||V===w.SUBTRACT||V===w.SCREEN||V===w.EXCLUSION||V===w.REPLACE||V===w.MULTIPLY||V===w.REMOVE?this.curBlendMode=V:V!==w.BURN&&V!==w.OVERLAY&&V!==w.HARD_LIGHT&&V!==w.SOFT_LIGHT&&V!==w.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(V,ge){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(w.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,V/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,ge/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var V=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(g(k(le.prototype),"beginClip",this).call(this,V),this.drawTarget()._isClipApplied=!0,V=this.GL).clearStencil(0),V.clear(V.STENCIL_BUFFER_BIT),V.enable(V.STENCIL_TEST),this._stencilTestOn=!0,V.stencilFunc(V.ALWAYS,1,255),V.stencilOp(V.KEEP,V.KEEP,V.REPLACE),V.disable(V.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var V=this.GL;V.stencilOp(V.KEEP,V.KEEP,V.KEEP),V.stencilFunc(this._clipInvert?V.EQUAL:V.NOTEQUAL,0,255),V.enable(V.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),g(k(le.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(V){this.curStrokeWeight!==V&&(this.pointSize=V,this.curStrokeWeight=V)}},{key:"_getPixel",value:function(V,ge){var Le=this.GL;return ne(Le,null,V,ge,Le.RGBA,Le.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var V,ge,Le=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):Le._setProperty("pixels",me(Le.pixels,ge=this.GL,null,0,0,this.width*(V=this._pInst._pixelDensity),this.height*V,ge.RGBA,ge.UNSIGNED_BYTE,this.height*V))}},{key:"updatePixels",value:function(){var V=this._getTempFramebuffer();V.pixels=this._pixelsState.pixels,V.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(w.CENTER),this._pInst.image(V,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:w.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:w.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(V){return void 0!==this.retainedMode.geometry[V]}},{key:"viewport",value:function(V,ge){this._viewport=[0,0,V,ge],this.GL.viewport(0,0,V,ge)}},{key:"resize",value:function(ut,Ke){b.default.Renderer.prototype.resize.call(this,ut,Ke),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Le=(void 0!==(ut=this._pixelsState).pixels&&ut._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);Ke=!1,ut=void 0;try{for(var _t,Nt=this.framebuffers[Symbol.iterator]();!(Le=(_t=Nt.next()).done);Le=!0)_t.value._canvasSizeChanged()}catch(dt){Ke=!0,ut=dt}finally{try{Le||null==Nt.return||Nt.return()}finally{if(Ke)throw ut}}}},{key:"clear",value:function(){var V=(arguments.length<=0?void 0:arguments[0])||0,ge=(arguments.length<=1?void 0:arguments[1])||0,Le=(arguments.length<=2?void 0:arguments[2])||0,Ke=(arguments.length<=3?void 0:arguments[3])||0,ut=this.activeFramebuffer();ut&&ut.format===w.UNSIGNED_BYTE&&!ut.antialias&&0===Ke&&(Ke=1e-10),this.GL.clearColor(V*Ke,ge*Ke,Le*Ke,Ke),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(V,ge,Le,Ke,ut,_t){16===arguments.length?b.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([V,ge,0,0,Le,Ke,0,0,0,0,1,0,ut,_t,0,1])}},{key:"translate",value:function(V,ge,Le){return V instanceof b.default.Vector&&(Le=V.z,ge=V.y,V=V.x),this.uModelMatrix.translate([V,ge,Le]),this}},{key:"scale",value:function(V,ge,Le){return this.uModelMatrix.scale(V,ge,Le),this}},{key:"rotate",value:function(V,ge){return void 0===ge?this.rotateZ(V):(b.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(V){return this.rotate(V,1,0,0),this}},{key:"rotateY",value:function(V){return this.rotate(V,0,1,0),this}},{key:"rotateZ",value:function(V){return this.rotate(V,0,0,1),this}},{key:"push",value:function(){var V=b.default.Renderer.prototype.push.apply(this),ge=V.properties;return ge.uModelMatrix=this.uModelMatrix.copy(),ge.uViewMatrix=this.uViewMatrix.copy(),ge.uPMatrix=this.uPMatrix.copy(),ge._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),ge.ambientLightColors=this.ambientLightColors.slice(),ge.specularColors=this.specularColors.slice(),ge.directionalLightDirections=this.directionalLightDirections.slice(),ge.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),ge.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),ge.pointLightPositions=this.pointLightPositions.slice(),ge.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),ge.pointLightSpecularColors=this.pointLightSpecularColors.slice(),ge.spotLightPositions=this.spotLightPositions.slice(),ge.spotLightDirections=this.spotLightDirections.slice(),ge.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),ge.spotLightSpecularColors=this.spotLightSpecularColors.slice(),ge.spotLightAngle=this.spotLightAngle.slice(),ge.spotLightConc=this.spotLightConc.slice(),ge.userFillShader=this.userFillShader,ge.userStrokeShader=this.userStrokeShader,ge.userPointShader=this.userPointShader,ge.pointSize=this.pointSize,ge.curStrokeWeight=this.curStrokeWeight,ge.curStrokeColor=this.curStrokeColor,ge.curFillColor=this.curFillColor,ge.curAmbientColor=this.curAmbientColor,ge.curSpecularColor=this.curSpecularColor,ge.curEmissiveColor=this.curEmissiveColor,ge._hasSetAmbient=this._hasSetAmbient,ge._useSpecularMaterial=this._useSpecularMaterial,ge._useEmissiveMaterial=this._useEmissiveMaterial,ge._useShininess=this._useShininess,ge._useMetalness=this._useMetalness,ge.constantAttenuation=this.constantAttenuation,ge.linearAttenuation=this.linearAttenuation,ge.quadraticAttenuation=this.quadraticAttenuation,ge._enableLighting=this._enableLighting,ge._useNormalMaterial=this._useNormalMaterial,ge._tex=this._tex,ge.drawMode=this.drawMode,ge._currentNormal=this._currentNormal,ge.curBlendMode=this.curBlendMode,ge.activeImageLight=this.activeImageLight,ge.textureMode=this.textureMode,V}},{key:"pop",value:function(){var V;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var ge=arguments.length,Le=new Array(ge),Ke=0;Ke<ge;Ke++)Le[Ke]=arguments[Ke];(V=g(k(le.prototype),"pop",this)).call.apply(V,[this].concat(Le)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var V=this.drawTarget();V._isClipApplied!==this._stencilTestOn&&(V._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var V=this.userStrokeShader;return V&&V.isStrokeShader()?V:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(V){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(xe)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",V),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var V=this.userFillShader;if(this._useNormalMaterial&&(!V||!V.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!V||!V.isLightShader())return this._getLightShader()}else if(this._tex){if(!V||!V.isTextureShader())return this._getLightShader()}else if(!V)return this._getImmediateModeShader();return V}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var V=this.userFillShader;if(this._enableLighting){if(!V||!V.isLightShader())return this._getLightShader()}else if(this._tex){if(!V||!V.isTextureShader())return this._getLightShader()}else if(!V)return this._getColorShader();return V}},{key:"_getImmediatePointShader",value:function(){var V=this.userPointShader;return V&&V.isPointShader()?V:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._defaultLightShader=this._pInst._glAttributes.perPixelLighting?new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+_e.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+_e.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+_e.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+_e.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+_e.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+_e.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+_e.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+_e.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+_e.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+_e.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+_e.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+_e.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+_e.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+_e.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===w.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+_e.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+_e.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(V,ge){var Le="";return this.webglVersion===w.WEBGL2&&(Le+="#version 300 es\n#define WEBGL2\n"),"vert"===V?Le+="#define VERTEX_SHADER\n":"frag"===V&&(Le+="#define FRAGMENT_SHADER\n"),ge&&(Le+="precision ".concat(ge," float;\n")),Le}},{key:"_getEmptyTexture",value:function(){var V;return this._emptyTexture||((V=new b.default.Image(1,1)).set(0,0,255),this._emptyTexture=new b.default.Texture(this,V)),this._emptyTexture}},{key:"getTexture",value:function(V){V instanceof b.default.Framebuffer&&(V=V.color);var ge=this.textures.get(V);return ge||(ge=new b.default.Texture(this,V),this.textures.set(V,ge),ge)}},{key:"getDiffusedTexture",value:function(V){var ge,Le,Ke=this;return null!=this.diffusedTextures.get(V)?this.diffusedTextures.get(V):(ge=Math.floor(V.height/V.width*200),Le=this._pInst.createFramebuffer({width:200,height:ge,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(_e.imageLightVert,_e.imageLightDiffusedFrag)),Le.draw(function(){Ke._pInst.shader(Ke.diffusedShader),Ke.diffusedShader.setUniform("environmentMap",V),Ke._pInst.noStroke(),Ke._pInst.rectMode(w.CENTER),Ke._pInst.noLights(),Ke._pInst.rect(0,0,200,ge)}),this.diffusedTextures.set(V,Le),Le)}},{key:"getSpecularTexture",value:function(V){var ge=this;if(null!=this.specularTextures.get(V))return this.specularTextures.get(V);for(var Le,Ke=[],ut=this._pInst.createFramebuffer({width:512,height:512,density:1}),_t=Math.log(512)/Math.log(2),Nt=(this.specularShader||(this.specularShader=this._pInst.createShader(_e.imageLightVert,_e.imageLightSpecularFrag)),512);1<=Nt;Nt/=2)!function(dt){ut.resize(dt,dt);var Rt=1-Math.log(dt)/Math.log(2)/_t;ut.draw(function(){ge._pInst.shader(ge.specularShader),ge._pInst.clear(),ge.specularShader.setUniform("environmentMap",V),ge.specularShader.setUniform("roughness",Rt),ge._pInst.noStroke(),ge._pInst.noLights(),ge._pInst.plane(dt,dt)}),Ke.push(ut.get().drawingContext.getImageData(0,0,dt,dt))}(Nt);return ut.remove(),Le=new d.MipmapTexture(this,Ke,{}),this.specularTextures.set(V,Le),Le}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(V){return new b.default.Framebuffer(this,V)}},{key:"_setStrokeUniforms",value:function(V){V.bindShader(),V.setUniform("uUseLineColor",this._useLineColor),V.setUniform("uMaterialColor",this.curStrokeColor),V.setUniform("uStrokeWeight",this.curStrokeWeight),V.setUniform("uStrokeCap",ee[this.curStrokeCap]),V.setUniform("uStrokeJoin",H[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(V){var ge=this,Le=(V.bindShader(),this.mixedSpecularColor=p(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Ke,ut){return ge.curFillColor[ut]*ge._useMetalness+Ke*(1-ge._useMetalness)})),V.setUniform("uUseVertexColor",this._useVertexColor),V.setUniform("uMaterialColor",this.curFillColor),V.setUniform("isTexture",!!this._tex),this._tex&&V.setUniform("uSampler",this._tex),V.setUniform("uTint",this._tint),V.setUniform("uHasSetAmbient",this._hasSetAmbient),V.setUniform("uAmbientMatColor",this.curAmbientColor),V.setUniform("uSpecularMatColor",this.mixedSpecularColor),V.setUniform("uEmissiveMatColor",this.curEmissiveColor),V.setUniform("uSpecular",this._useSpecularMaterial),V.setUniform("uEmissive",this._useEmissiveMaterial),V.setUniform("uShininess",this._useShininess),V.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(V),V.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);V.setUniform("uPointLightCount",Le),V.setUniform("uPointLightLocation",this.pointLightPositions),V.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),V.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),V.setUniform("uDirectionalLightCount",Le=this.directionalLightDiffuseColors.length/3),V.setUniform("uLightingDirection",this.directionalLightDirections),V.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),V.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),Le=this.ambientLightColors.length/3,this.mixedAmbientLight=p(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Ke){return Math.max(0,Ke-=ge._useMetalness)})),V.setUniform("uAmbientLightCount",Le),V.setUniform("uAmbientColor",this.mixedAmbientLight),V.setUniform("uSpotLightCount",Le=this.spotLightDiffuseColors.length/3),V.setUniform("uSpotLightAngle",this.spotLightAngle),V.setUniform("uSpotLightConc",this.spotLightConc),V.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),V.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),V.setUniform("uSpotLightLocation",this.spotLightPositions),V.setUniform("uSpotLightDirection",this.spotLightDirections),V.setUniform("uConstantAttenuation",this.constantAttenuation),V.setUniform("uLinearAttenuation",this.linearAttenuation),V.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),V.bindTextures()}},{key:"_setImageLightUniforms",value:function(V){var ge;V.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(ge=this.getDiffusedTexture(this.activeImageLight),V.setUniform("environmentMapDiffused",ge),ge=this.getSpecularTexture(this.activeImageLight),V.setUniform("environmentMapSpecular",ge))}},{key:"_setPointUniforms",value:function(V){V.bindShader(),V.setUniform("uMaterialColor",this.curStrokeColor),V.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(V,ge,Le,Ke,ut){this.GL.bindBuffer(ge=ge||this.GL.ARRAY_BUFFER,V),void 0!==Le&&((V=Le)instanceof b.default.DataArray?V=Le.dataArray():V instanceof(Ke||Float32Array)||(V=new(Ke||Float32Array)(V)),this.GL.bufferData(ge,V,ut||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(V,ge){return V.length===ge.length&&V.every(function(Le,Ke){return Le===ge[Ke]})}},{key:"_isTypedArray",value:function(V){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(ge){return V instanceof ge})}},{key:"_flatten",value:function(V){return V.flat()}},{key:"_vToNArray",value:function(V){return V.flatMap(function(ge){return[ge.x,ge.y,ge.z]})}},{key:"_bezierCoefficients",value:function(V){var ge=V*V,Le=1-V,Ke=Le*Le;return[Ke*Le,3*Ke*V,3*Le*ge,ge*V]}},{key:"_quadraticCoefficients",value:function(V){var ge=1-V;return[ge*ge,2*ge*V,V*V]}},{key:"_bezierToCatmull",value:function(V){return[V[1],V[1]+(V[2]-V[0])/this._curveTightness,V[2]-(V[3]-V[1])/this._curveTightness,V[2]]}},{key:"_initTessy",value:function(){var V=new D.default.GluTesselator;return V.gluTessCallback(D.default.gluEnum.GLU_TESS_VERTEX_DATA,function(ge,Le){var Ke=!0,ut=!1,_t=void 0;try{for(var Nt,dt=ge[Symbol.iterator]();!(Ke=(Nt=dt.next()).done);Ke=!0)Le.push(Nt.value)}catch(Bt){ut=!0,_t=Bt}finally{try{Ke||null==dt.return||dt.return()}finally{if(ut)throw _t}}}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_BEGIN,function(ge){ge!==D.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(ge))}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_ERROR,function(ge){console.log("error callback"),console.log("error number: ".concat(ge))}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_COMBINE,function(ge,Le,Ke){for(var ut=new Array(b.default.RendererGL.prototype.tessyVertexSize).fill(0),_t=0;_t<Ke.length;_t++)for(var Nt=0;Nt<ut.length;Nt++)0!==Ke[_t]&&Le[_t]&&(ut[Nt]+=Le[_t][Nt]*Ke[_t]);return ut}),V.gluTessCallback(D.default.gluEnum.GLU_TESS_EDGE_FLAG,function(ge){}),V.gluTessProperty(D.default.gluEnum.GLU_TESS_WINDING_RULE,D.default.windingRule.GLU_TESS_WINDING_NONZERO),V}},{key:"_triangulate",value:function(V){var ge=V[0]?V[0][2]:void 0,Le=!0,Ke=!0,Rt=!1,lt=void 0;try{for(var ut,_t=V[Symbol.iterator]();!(Ke=(ut=_t.next()).done);Ke=!0)for(var Nt=ut.value,dt=0;dt<Nt.length;dt+=b.default.RendererGL.prototype.tessyVertexSize)if(Nt[dt+2]!==ge){Le=!1;break}}catch($n){Rt=!0,lt=$n}finally{try{Ke||null==_t.return||_t.return()}finally{if(Rt)throw lt}}this._tessy.gluTessNormal(0,0,Le?1:0);var Bt=(this._tessy.gluTessBeginPolygon(Rt=[]),!0),It=void(lt=!1);try{for(var Tt,Ot=V[Symbol.iterator]();!(Bt=(Tt=Ot.next()).done);Bt=!0){var vt=Tt.value;this._tessy.gluTessBeginContour();for(var Gt=0;Gt<vt.length;Gt+=b.default.RendererGL.prototype.tessyVertexSize){var hn=vt.slice(Gt,Gt+b.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(hn,hn)}this._tessy.gluTessEndContour()}}catch($n){lt=!0,It=$n}finally{try{Bt||null==Ot.return||Ot.return()}finally{if(lt)throw It}}return this._tessy.gluTessEndPolygon(),Rt}}])&&m(he.prototype,J),le}(b.default.Renderer),b.default.prototype._assert3d=function(J){if(!this._renderer.isP3D)throw new Error("".concat(J,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},b.default.RendererGL.prototype.tessyVertexSize=12,K.default=Z=b.default.RendererGL},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(l,ve,K){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function A(w,I){return function(D){if(Array.isArray(D))return D}(w)||function(D,d){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D)){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=D[Symbol.iterator]();!(h=(g=x.next()).done)&&(f.push(g.value),!d||f.length!==d);h=!0);}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}}(w,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.Shader=function(){function w(f,h,p){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._renderer=f,this._vertSrc=h,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:m.uniforms||{},declarations:m.declarations,helpers:m.helpers||{},vertex:m.vertex||{},fragment:m.fragment||{},modified:{vertex:m.modified&&m.modified.vertex||{},fragment:m.modified&&m.modified.fragment||{}}}}var I,D;return I=w,(D=[{key:"shaderSrc",value:function(k,h){var p,m,g,x,E,S=(k=A(k.split("void main"),2))[0],X=(k=k[1],"");for(p in this.hooks.uniforms)X+="uniform ".concat(p,";\n");for(m in this.hooks.declarations&&(X+=this.hooks.declarations+"\n"),this.hooks[h].declarations&&(X+=this.hooks[h].declarations+"\n"),this.hooks.helpers)X+="".concat(m).concat(this.hooks.helpers[m],"\n");for(g in this.hooks[h])"declarations"!==g&&(x=(E=A(g.split(" "),2))[0],E=E[1],this.hooks.modified[h][g]&&(X+="#define AUGMENTED_HOOK_"+E+"\n"),X+=x+" HOOK_"+E+this.hooks[h][g]+"\n");return S+X+"void main"+k}},{key:"version",value:function(){var f=/#version (.+)$/.exec(this.vertSrc());return f?f[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var f in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[f]?"[MODIFIED] ":"")+f+this.hooks.vertex[f]);for(var h in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[h]?"[MODIFIED] ":"")+h+this.hooks.fragment[h]);for(var p in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(p+this.hooks.helpers[p])}},{key:"modify",value:function(f){M.default._validateParameters("p5.Shader.modify",arguments);var h,p={vertex:{},fragment:{},helpers:{}};for(h in f)"declarations"!==h&&"uniforms"!==h&&("vertexDeclarations"===h?p.vertex.declarations=(p.vertex.declarations||"")+"\n"+f[h]:"fragmentDeclarations"===h?p.fragment.declarations=(p.fragment.declarations||"")+"\n"+f[h]:this.hooks.vertex[h]?p.vertex[h]=f[h]:this.hooks.fragment[h]?p.fragment[h]=f[h]:p.helpers[h]=f[h]);var m,g,x=Object.assign({},this.hooks.modified.vertex),E=Object.assign({},this.hooks.modified.fragment);for(m in p.vertex||{})"declarations"!==m&&(x[m]=!0);for(g in p.fragment||{})"declarations"!==g&&(E[g]=!0);return new M.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(f.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,f.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,p.fragment||{}),vertex:Object.assign({},this.hooks.vertex,p.vertex||{}),helpers:Object.assign({},this.hooks.helpers,p.helpers||{}),modified:{vertex:x,fragment:E}})}},{key:"init",value:function(){if(0===this._glProgram){var f,h=this._renderer.GL;if(this._vertShader=h.createShader(h.VERTEX_SHADER),h.shaderSource(this._vertShader,this.vertSrc()),h.compileShader(this._vertShader),!h.getShaderParameter(this._vertShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._vertShader),console.error(f),null;if(this._fragShader=h.createShader(h.FRAGMENT_SHADER),h.shaderSource(this._fragShader,this.fragSrc()),h.compileShader(this._fragShader),!h.getShaderParameter(this._fragShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._fragShader),console.error(f),null;this._glProgram=h.createProgram(),h.attachShader(this._glProgram,this._vertShader),h.attachShader(this._glProgram,this._fragShader),h.linkProgram(this._glProgram),h.getProgramParameter(this._glProgram,h.LINK_STATUS)||M.default._friendlyError("Snap! Error linking shader program: ".concat(h.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var f in this.hooks.uniforms){var p,h=A(f.split(" "),2)[1];null!=(p=(f=this.hooks.uniforms[f])instanceof Function?f():f)&&this.setUniform(h,p)}}},{key:"copyToContext",value:function(f){var h=new M.default.Shader(f._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(f),h}},{key:"ensureCompiledOnContext",value:function(f){if(0!==this._glProgram&&this._renderer!==f._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=f._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_ATTRIBUTES),p=0;p<h;++p){var m=f.getActiveAttrib(this._glProgram,p),g=m.name,x=f.getAttribLocation(this._glProgram,g),E={};E.name=g,E.location=x,E.index=p,E.type=m.type,E.size=m.size,this.attributes[g]=E}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_UNIFORMS),p=0,m=0;m<h;++m){var g=f.getActiveUniform(this._glProgram,m),x={},E=(x.location=f.getUniformLocation(this._glProgram,g.name),x.size=g.size,g.name);1<g.size&&(E=E.substring(0,E.indexOf("[0]"))),x.name=E,x.type=g.type,x._cachedData=void 0,x.type===f.SAMPLER_2D&&(x.samplerIndex=p,p++,this.samplers.push(x)),x.isArray=1<g.size||x.type===f.FLOAT_MAT3||x.type===f.FLOAT_MAT4||x.type===f.FLOAT_VEC2||x.type===f.FLOAT_VEC3||x.type===f.FLOAT_VEC4||x.type===f.INT_VEC2||x.type===f.INT_VEC4||x.type===f.INT_VEC3,this.uniforms[E]=x}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var f=this._renderer.GL,h=!0,p=!1,m=void 0;try{for(var g,x=this.samplers[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value,S=E.texture;void 0===S&&(S=this._renderer._getEmptyTexture()),f.activeTexture(f.TEXTURE0+E.samplerIndex),S.bindTexture(),S.update(),f.uniform1i(E.location,E.samplerIndex)}}catch(k){p=!0,m=k}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"updateTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value.texture;x&&x.update()}}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"unbindTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)this.setUniform(m.value.name,this._renderer._getEmptyTexture())}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"_setMatrixUniforms",value:function(){var f=this._renderer.uModelMatrix,h=this._renderer.uViewMatrix,p=this._renderer.uPMatrix,m=f.copy().mult(h),g=(this._renderer.uMVMatrix=m).copy();g.mult(p),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",h.mat4),this.setUniform("uProjectionMatrix",p.mat4),this.setUniform("uModelMatrix",f.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){return this._renderer._curShader!==this&&(this._renderer.GL.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(f,h){var p=this.uniforms[f];if(p){var m=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,h))return;p._cachedData=h.slice(0)}else{if(p._cachedData&&p._cachedData===h)return;p._cachedData=Array.isArray(h)?h.slice(0):h}var g=p.location;switch(this.useProgram(),p.type){case m.BOOL:m.uniform1i(g,!0===h?1:0);break;case m.INT:1<p.size?h.length&&m.uniform1iv(g,h):m.uniform1i(g,h);break;case m.FLOAT:1<p.size?h.length&&m.uniform1fv(g,h):m.uniform1f(g,h);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(g,!1,h);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(g,!1,h);break;case m.FLOAT_VEC2:1<p.size?h.length&&m.uniform2fv(g,h):m.uniform2f(g,h[0],h[1]);break;case m.FLOAT_VEC3:1<p.size?h.length&&m.uniform3fv(g,h):m.uniform3f(g,h[0],h[1],h[2]);break;case m.FLOAT_VEC4:1<p.size?h.length&&m.uniform4fv(g,h):m.uniform4f(g,h[0],h[1],h[2],h[3]);break;case m.INT_VEC2:1<p.size?h.length&&m.uniform2iv(g,h):m.uniform2i(g,h[0],h[1]);break;case m.INT_VEC3:1<p.size?h.length&&m.uniform3iv(g,h):m.uniform3i(g,h[0],h[1],h[2]);break;case m.INT_VEC4:1<p.size?h.length&&m.uniform4iv(g,h):m.uniform4i(g,h[0],h[1],h[2],h[3]);break;case m.SAMPLER_2D:if("number"==typeof h){if(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h))return console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;m.activeTexture(h),m.uniform1i(g,h)}else m.activeTexture(m.TEXTURE0+p.samplerIndex),p.texture=h instanceof M.default.Texture?h:this._renderer.getTexture(h),m.uniform1i(g,p.samplerIndex),p.texture.src.gifProperties&&p.texture.src._animateGif(this._renderer._pInst);break;case m.SAMPLER_CUBE:case m.SAMPLER_3D:case m.SAMPLER_2D_SHADOW:case m.SAMPLER_2D_ARRAY:case m.SAMPLER_2D_ARRAY_SHADOW:case m.SAMPLER_CUBE_SHADOW:case m.INT_SAMPLER_2D:case m.INT_SAMPLER_3D:case m.INT_SAMPLER_CUBE:case m.INT_SAMPLER_2D_ARRAY:case m.UNSIGNED_INT_SAMPLER_2D:case m.UNSIGNED_INT_SAMPLER_3D:case m.UNSIGNED_INT_SAMPLER_CUBE:case m.UNSIGNED_INT_SAMPLER_2D_ARRAY:"number"==typeof h&&(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h)?console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(m.activeTexture(h),m.uniform1i(g,h)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(f){return void 0!==f})}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(f,h,p,m,g,x){var E;return f&&-1!==(f=f.location)&&(E=this._renderer.GL,this._renderer.registerEnabled.has(f)||(E.enableVertexAttribArray(f),this._renderer.registerEnabled.add(f)),this._renderer.GL.vertexAttribPointer(f,h,p||E.FLOAT,m||!1,g||0,x||0)),this}},{key:"disableRemainingAttributes",value:function(){var f=this,h=!0,p=!1,m=void 0;try{for(var g,x=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)!function(){var E=g.value;Object.keys(f.attributes).some(function(S){return f.attributes[S].location===E})||(f._renderer.GL.disableVertexAttribArray(E),f._renderer.registerEnabled.delete(E))}()}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}}])&&b(I.prototype,D),w}(),K.default=l=M.default.Shader},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(l,ve,K){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function A(E){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(K,"__esModule",{value:!0}),K.checkWebGLCapabilities=x,K.default=K.MipmapTexture=void 0;var b=(g=l("../core/main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==A(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var k,X={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=Y?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(X,k,G):X[k]=E[k])}return X.default=E,S&&S.set(E,X),X}(l("../core/constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){return(D=Object.setPrototypeOf||function(k,X){return k.__proto__=X,k})(E,S)}function f(E){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}function h(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function p(E,S){for(var k=0;k<S.length;k++){var X=S[k];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(E,X.key,X)}}function m(E,S,k){S&&p(E.prototype,S),k&&p(E,k)}b.default.Texture=function(){function E(z,k,G){h(this,E),this._renderer=z;var Y=this._renderer.GL;return G=G||{},this.src=k,this.glTex=void 0,this.glTarget=Y.TEXTURE_2D,this.glFormat=G.format||Y.RGBA,this.mipmaps=!1,this.glMinFilter=G.minFilter||Y.LINEAR,this.glMagFilter=G.magFilter||Y.LINEAR,this.glWrapS=G.wrapS||Y.CLAMP_TO_EDGE,this.glWrapT=G.wrapT||Y.CLAMP_TO_EDGE,this.glDataType=G.dataType||Y.UNSIGNED_BYTE,G=x(z),this.glFormat!==Y.HALF_FLOAT||G.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=Y.FLOAT),this.glFormat!==Y.HALF_FLOAT||this.glMinFilter!==Y.LINEAR&&this.glMagFilter!==Y.LINEAR||G.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===Y.LINEAR&&(this.glMinFilter=Y.NEAREST),this.glMagFilter===Y.LINEAR&&(this.glMagFilter=Y.NEAREST)),this.glFormat!==Y.FLOAT||G.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=Y.UNSIGNED_BYTE),this.glFormat!==Y.FLOAT||this.glMinFilter!==Y.LINEAR&&this.glMagFilter!==Y.LINEAR||G.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===Y.LINEAR&&(this.glMinFilter=Y.NEAREST),this.glMagFilter===Y.LINEAR&&(this.glMagFilter=Y.NEAREST)),this.isSrcMediaElement=void 0!==b.default.MediaElement&&k instanceof b.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==b.default.Element&&k instanceof b.default.Element&&!(k instanceof b.default.Graphics)&&!(k instanceof b.default.Renderer),this.isSrcP5Image=k instanceof b.default.Image,this.isSrcP5Graphics=k instanceof b.default.Graphics,this.isSrcP5Renderer=k instanceof b.default.Renderer,this.isImageData=typeof ImageData<"u"&&k instanceof ImageData,this.isFramebufferTexture=k instanceof b.default.FramebufferTexture,z=this._getTextureDataFromSource(),this.width=z.width,this.height=z.height,this.init(z),this}return m(E,[{key:"_getTextureDataFromSource",value:function(){var S;return this.isFramebufferTexture?S=this.src.rawTexture():this.isSrcP5Image?S=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),S=this.src.canvas||this.src.elt):this.isImageData&&(S=this.src),S}},{key:"init",value:function(S){var k,X=this._renderer.GL;this.isFramebufferTexture||(this.glTex=X.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,this.glMagFilter),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(k=new Uint8Array([1,1,1,1]),X.texImage2D(this.glTarget,0,X.RGBA,1,1,0,this.glFormat,this.glDataType,k)):X.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S))}},{key:"update",value:function(){var S,k,X,Y=this.src;return 0!==Y.width&&0!==Y.height&&!this.isFramebufferTexture&&(S=this._getTextureDataFromSource(),k=!1,X=this._renderer.GL,S.width!==this.width||S.height!==this.height?(k=!0,this.width=S.width||Y.width,this.height=S.height||Y.height,this.isSrcP5Image?Y.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&Y.setModified(!0)):this.isSrcP5Image?Y.isModified()&&Y.setModified(!(k=!0)):this.isSrcMediaElement?Y.isModified()?Y.setModified(!(k=!0)):Y.loadedmetadata&&this._videoPrevUpdateTime!==Y.time()&&(this._videoPrevUpdateTime=Y.time(),k=!0):this.isImageData?Y._dirty&&(k=!(Y._dirty=!1)):k=!0,k&&(this.bindTexture(),X.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S)),k)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(S,k){var X=this._renderer.GL;this.glMinFilter=this.glFilter(S),this.glMagFilter=this.glFilter(k),this.bindTexture(),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,this.glMinFilter),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(S){var k=this._renderer.GL;return S===w.NEAREST?k.NEAREST:k.LINEAR}},{key:"setWrapMode",value:function(S,k){function X(ee){return!(ee&ee-1)}var Y=this._renderer.GL,z=(z=this._getTextureDataFromSource()).naturalWidth&&z.naturalHeight?(G=z.naturalWidth,z.naturalHeight):(G=this.width,this.height),G=X(G);z=X(z),S===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&z?this.glWrapS=Y.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=Y.CLAMP_TO_EDGE):S===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&z?this.glWrapS=Y.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=Y.CLAMP_TO_EDGE):this.glWrapS=Y.CLAMP_TO_EDGE,k===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&z?this.glWrapT=Y.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=Y.CLAMP_TO_EDGE):k===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&z?this.glWrapT=Y.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=Y.CLAMP_TO_EDGE):this.glWrapT=Y.CLAMP_TO_EDGE,this.bindTexture(),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,this.glWrapS),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),E}();var g=function(E){var S=X;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&D(S,E);var k=function d(E){return function(){var S,k=f(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=f(this).constructor,Reflect.construct(k,arguments,S)):k.apply(this,arguments),k=this,!S||"object"!==A(S)&&"function"!=typeof S){if(void 0!==k)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(X);function X(Y,G,z){return h(this,X),G=(Y=k.call(this,Y,G,z))._renderer.GL,Y.glMinFilter===G.LINEAR&&(Y.glMinFilter=G.LINEAR_MIPMAP_LINEAR),Y}return m(X,[{key:"glFilter",value:function(Y){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(Y){var G=this._renderer.GL;this.glTex=G.createTexture(),this.bindTexture();for(var z=0;z<Y.length;z++)G.texImage2D(this.glTarget,z,this.glFormat,this.glFormat,this.glDataType,Y[z]);this.glMinFilter=G.LINEAR_MIPMAP_LINEAR,G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,this.glMagFilter),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),X}(b.default.Texture);function x(Y){var S=Y.GL,k=(Y=Y.webglVersion)===w.WEBGL2?S.getExtension("EXT_color_buffer_float")&&S.getExtension("EXT_float_blend"):S.getExtension("OES_texture_float");return{float:k,floatLinear:k&&S.getExtension("OES_texture_float_linear"),halfFloat:Y=S.getExtension(Y===w.WEBGL2?"EXT_color_buffer_float":"OES_texture_half_float"),halfFloatLinear:Y&&S.getExtension("OES_texture_half_float_linear")}}K.MipmapTexture=g,K.default=l=b.default.Texture},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(l,ve,K){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function A(E){return(A="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.iterator");var b,w=(b=l("../core/main"))&&b.__esModule?b:{default:b},I=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==A(E)&&"function"!=typeof E)return{default:E};var S=D();if(S&&S.has(E))return S.get(E);var k,X={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var G;Object.prototype.hasOwnProperty.call(E,k)&&((G=Y?Object.getOwnPropertyDescriptor(E,k):null)&&(G.get||G.set)?Object.defineProperty(X,k,G):X[k]=E[k])}return X.default=E,S&&S.set(E,X),X}(l("../core/constants"));function D(){var E;return"function"!=typeof WeakMap?null:(D=function(){return E},E=new WeakMap)}function d(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function f(E,S){for(var k=0;k<S.length;k++){var X=S[k];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(E,X.key,X)}}function h(E,S,k){S&&f(E.prototype,S),k&&f(E,k)}l("./p5.Shader"),l("./p5.RendererGL.Retained"),w.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},w.default.RendererGL.prototype.textWidth=function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):0};var p=function(){function E(S,k){d(this,E),this.width=S,this.height=k,this.infos=[]}return h(E,[{key:"findImage",value:function(S){var k,X,Y=this.width*this.height;if(Y<S)throw new Error("font is too complex to render in 3D");for(var G=this.infos.length-1;0<=G;--G){var z=this.infos[G];if(z.index+S<Y){X=(k=z).imageData;break}}if(!k){try{X=new ImageData(this.width,this.height)}catch{var ee=document.getElementsByTagName("canvas")[0],H=!ee,re=(ee||((ee=document.createElement("canvas")).style.display="none",document.body.appendChild(ee)),ee.getContext("2d"));re&&(X=re.createImageData(this.width,this.height)),H&&document.body.removeChild(ee)}this.infos.push(k={index:0,imageData:X})}return re=k.index,k.index+=S,X._dirty=!0,{imageData:X,index:re}}}]),E}();function m(z,S,k,X,Y){var G=z.imageData.data;z=4*z.index++,G[z++]=S,G[z++]=k,G[z++]=X,G[+z]=Y}var g=Math.sqrt(3),x=function(){function E(S){d(this,E),this.font=S,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={}}return h(E,[{key:"getGlyphInfo",value:function(S){var k=this.glyphInfos[S.index];if(!k){var X=S.getBoundingBox(),Y=X.x1,G=X.y1,z=X.x2-Y,ee=X.y2-G,H=S.path.commands;if(0==z||0==ee||!H.length)return this.glyphInfos[S.index]={};for(var re=[],Z=[],_e=[],xe=8;0<=xe;--xe)_e.push([]);for(xe=8;0<=xe;--xe)Z.push([]);var oe,me,ne,J,he=function(){function Mn(gr,Ln,nr,mn){d(this,Mn),this.p0=gr,this.c0=Ln,this.c1=nr,this.p1=mn}return h(Mn,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return w.default.Vector.sub(w.default.Vector.sub(this.p1,this.p0),w.default.Vector.mult(w.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(qn){var Ln=w.default.Vector.lerp(this.p0,this.c0,qn),mn=w.default.Vector.lerp(this.c0,this.c1,qn),nr=w.default.Vector.lerp(Ln,mn,qn);return this.c1=w.default.Vector.lerp(this.c1,this.p1,qn),this.c0=w.default.Vector.lerp(mn,this.c1,qn),mn=w.default.Vector.lerp(nr,this.c0,qn),qn=new Mn(this.p0,Ln,nr,mn),this.p0=mn,qn}},{key:"splitInflections",value:function(){var gr=w.default.Vector.sub(this.c0,this.p0),Ln=w.default.Vector.sub(w.default.Vector.sub(this.c1,this.c0),gr),nr=w.default.Vector.sub(w.default.Vector.sub(w.default.Vector.sub(this.p1,this.c1),gr),w.default.Vector.mult(Ln,2)),mn=[],qn=Ln.x*nr.y-Ln.y*nr.x;return 0!==qn&&0<=(gr=(nr=gr.x*nr.y-gr.y*nr.x)*nr-4*qn*(gr.x*Ln.y-gr.y*Ln.x))&&(qn<0&&(qn=-qn,nr=-nr),gr=(-nr+(Ln=Math.sqrt(gr)))/(2*qn),0<(nr=(-nr-Ln)/(2*qn))&&nr<1&&(mn.push(this.split(nr)),gr=1-(1-gr)/(1-nr)),0<gr&&gr<1&&mn.push(this.split(gr))),mn.push(this),mn}}]),Mn}(),Ce=!0,et=!1,le=void 0;try{for(var V,ge=H[Symbol.iterator]();!(Ce=(V=ge.next()).done);Ce=!0){var Le=V.value,Ke=(Le.x-Y)/z,ut=(Le.y-G)/ee;if(!bn(oe,me,Ke,ut)){switch(Le.type){case"M":ne=Ke,J=ut;break;case"L":$n(oe,me,Ke,ut);break;case"Q":var _t=(Le.x1-Y)/z,Nt=(Le.y1-G)/ee;Gt([oe,Ke,_t],[me,ut,Nt],{x:oe,y:me,cx:_t,cy:Nt});break;case"Z":bn(oe,me,ne,J)?re.push({x:oe,y:me}):($n(oe,me,ne,J),re.push({x:ne,y:J}));break;case"C":for(var dt=function(pt,Cn,jn,nr,mn,qn,Tn,ct){pt=new he(new w.default.Vector(pt,Cn),new w.default.Vector(jn,nr),new w.default.Vector(mn,qn),new w.default.Vector(Tn,ct)).splitInflections();var Qe=[],xt=30/g,fn=!0;Cn=!1,jn=void 0;try{for(var on,xn=pt[Symbol.iterator]();!(fn=(on=xn.next()).done);fn=!0){for(var Pn=on.value,Un=[],yn=void 0;!(.125<=(yn=xt/Pn.quadError()));){var qt=Math.pow(yn,.3333333333333333),_n=Pn.split(qt),Kt=Pn.split(1-qt/(1-qt));Qe.push(_n),Un.push(Pn),Pn=Kt}yn<1&&Qe.push(Pn.split(.5)),Qe.push(Pn),Array.prototype.push.apply(Qe,Un.reverse())}}catch(ln){Cn=!0,jn=ln}finally{try{fn||null==xn.return||xn.return()}finally{if(Cn)throw jn}}return Qe}(oe,me,(Le.x1-Y)/z,(Le.y1-G)/ee,(Le.x2-Y)/z,(Le.y2-G)/ee,Ke,ut),Rt=0;Rt<dt.length;Rt++){var Bt=dt[Rt].toQuadratic();Gt([Bt.x,Bt.x1,Bt.cx],[Bt.y,Bt.y1,Bt.cy],Bt)}break;default:throw new Error("unknown command type: ".concat(Le.type))}oe=Ke,me=ut}}}catch(Mn){et=!0,le=Mn}finally{try{Ce||null==ge.return||ge.return()}finally{if(et)throw le}}for(var lt=re.length,It=this.strokeImageInfos.findImage(lt),Tt=It.index,Ot=0;Ot<lt;++Ot){var vt=re[Ot];m(It,hn(vt.x),hn(vt.y),hn(vt.cx),hn(vt.cy))}(k=this.glyphInfos[S.index]={glyph:S,uGlyphRect:[X.x1,-X.y1,X.x2,-X.y2],strokeImageInfo:It,strokes:re,colInfo:Xn(_e,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Xn(Z,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[k.colInfo.dimOffset,k.rowInfo.dimOffset]}return k;function Gt(Mn,gr,Ln){var nr=re.length;function mn(Qe,xt,fn){for(var Cn=Qe.length;0<Cn--;){var jn=Qe[Cn];jn<xt&&(xt=jn),fn<jn&&(fn=jn)}return{min:xt,max:fn}}re.push(Ln),Ln=mn(Mn,1,0),Mn=Math.max(Math.floor(9*Ln.min-.5),0);for(var qn=Math.min(Math.ceil(9*Ln.max+.5),9),Tn=Mn;Tn<qn;++Tn)_e[Tn].push(nr);Ln=mn(gr,1,0),Mn=Math.max(Math.floor(9*Ln.min-.5),0);for(var ct=Math.min(Math.ceil(9*Ln.max+.5),9),pt=Mn;pt<ct;++pt)Z[pt].push(nr)}function hn(Mn){return(Mn=255*Mn)<0?0:255<Mn?255:Mn}function $n(Mn,gr,Ln,nr){Gt([Mn,Ln],[gr,nr],{x:Mn,y:gr,cx:(Mn+Ln)/2,cy:(gr+nr)/2})}function bn(Mn,gr,Ln,nr){return Math.abs(Ln-Mn)<1e-5&&Math.abs(nr-gr)<1e-5}function Xn(Mn,gr,Ln){for(var nr=Mn.length,mn=gr.findImage(nr),qn=(gr=mn.index,0),Tn=0;Tn<nr;++Tn)qn+=Mn[Tn].length;for(var ct=Ln.findImage(qn),pt=0;pt<nr;++pt){var Qe=Mn[pt],xt=Qe.length,fn=ct.index;m(mn,fn>>7,127&fn,xt>>7,127&xt);for(var Cn=0;Cn<xt;++Cn){var jn=Qe[Cn]+Tt;m(ct,jn>>7,127&jn,0,0)}}return{cellImageInfo:ct,dimOffset:gr,dimImageInfo:mn}}}}]),E}();w.default.RendererGL.prototype._renderText=function(E,S,k,X,Y){if(this._textFont&&"string"!=typeof this._textFont){if(!(Y<=X)&&this._doFill){if(this._isOpenType()){E.push(),Y=this._doStroke;var G=this.drawMode,z=(this._doStroke=!1,this.drawMode=I.TEXTURE,this._textFont.font),ee=(ee=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(z)),H=(k=this._textFont._handleAlignment(this,S,k,X),X=this._textSize/z.unitsPerEm,this.translate(k.x,k.y,0),this.scale(X,X,1),this.GL),re=(k=!this._defaultFontShader,this._getFontShader()),Z=(re.init(),re.bindShader(),k&&(re.setUniform("uGridImageSize",[64,64]),re.setUniform("uCellsImageSize",[64,64]),re.setUniform("uStrokeImageSize",[64,64]),re.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),_e=(Z||((X=this._textGeom=new w.default.Geometry(1,1,function(){for(var Rt=0;Rt<=1;Rt++)for(var Bt=0;Bt<=1;Bt++)this.vertices.push(new w.default.Vector(Bt,Rt,0)),this.uvs.push(Bt,Rt)})).computeFaces().computeNormals(),Z=this.createBuffers("glyph",X)),!0);k=!1,X=void 0;try{for(var xe,oe=this.retainedMode.buffers.text[Symbol.iterator]();!(_e=(xe=oe.next()).done);_e=!0)xe.value._prepareBuffer(Z,re)}catch(Rt){k=!0,X=Rt}finally{try{_e||null==oe.return||oe.return()}finally{if(k)throw X}}this._bindBuffer(Z.indexBuffer,H.ELEMENT_ARRAY_BUFFER),re.setUniform("uMaterialColor",this.curFillColor),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var me=0,ne=null,J=z.stringToGlyphs(S),he=!0,Ce=!1,et=void 0;try{for(var le,V=J[Symbol.iterator]();!(he=(le=V.next()).done);he=!0){var ge,Le,Ke=le.value,ut=(ne&&(me+=z.getKerningValue(ne,Ke)),ee.getGlyphInfo(Ke));ut.uGlyphRect&&(ge=ut.rowInfo,Le=ut.colInfo,re.setUniform("uSamplerStrokes",ut.strokeImageInfo.imageData),re.setUniform("uSamplerRowStrokes",ge.cellImageInfo.imageData),re.setUniform("uSamplerRows",ge.dimImageInfo.imageData),re.setUniform("uSamplerColStrokes",Le.cellImageInfo.imageData),re.setUniform("uSamplerCols",Le.dimImageInfo.imageData),re.setUniform("uGridOffset",ut.uGridOffset),re.setUniform("uGlyphRect",ut.uGlyphRect),re.setUniform("uGlyphOffset",me),re.bindTextures(),H.drawElements(H.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),me+=Ke.advanceWidth,ne=Ke}}catch(Rt){Ce=!0,et=Rt}finally{try{he||null==V.return||V.return()}finally{if(Ce)throw et}}}finally{re.unbindShader(),this._doStroke=Y,this.drawMode=G,H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),E.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return E}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)},4023:(wr,Nn,je)=>{function j(d){this.mode=Et.MODE_8BIT_BYTE,this.data=d,this.parsedData=[];for(var f=0,h=this.data.length;f<h;f++){var p=[],m=this.data.charCodeAt(f);m>65536?(p[0]=240|(1835008&m)>>>18,p[1]=128|(258048&m)>>>12,p[2]=128|(4032&m)>>>6,p[3]=128|63&m):m>2048?(p[0]=224|(61440&m)>>>12,p[1]=128|(4032&m)>>>6,p[2]=128|63&m):m>128?(p[0]=192|(1984&m)>>>6,p[1]=128|63&m):p[0]=m,this.parsedData.push(p)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function F(d,f){this.typeNumber=d,this.errorCorrectLevel=f,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}j.prototype={getLength:function(d){return this.parsedData.length},write:function(d){for(var f=0,h=this.parsedData.length;f<h;f++)d.put(this.parsedData[f],8)}},F.prototype={addData:function(d){var f=new j(d);this.dataList.push(f),this.dataCache=null},isDark:function(d,f){if(d<0||this.moduleCount<=d||f<0||this.moduleCount<=f)throw new Error(d+","+f);return this.modules[d][f]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(d,f){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[h][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(d,f),this.typeNumber>=7&&this.setupTypeNumber(d),null==this.dataCache&&(this.dataCache=F.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,f)},setupPositionProbePattern:function(d,f){for(var h=-1;h<=7;h++)if(!(d+h<=-1||this.moduleCount<=d+h))for(var p=-1;p<=7;p++)f+p<=-1||this.moduleCount<=f+p||(this.modules[d+h][f+p]=0<=h&&h<=6&&(0==p||6==p)||0<=p&&p<=6&&(0==h||6==h)||2<=h&&h<=4&&2<=p&&p<=4)},getBestMaskPattern:function(){for(var d=0,f=0,h=0;h<8;h++){this.makeImpl(!0,h);var p=ve.getLostPoint(this);(0==h||d>p)&&(d=p,f=h)}return f},createMovieClip:function(d,f,h){var p=d.createEmptyMovieClip(f,h);this.make();for(var g=0;g<this.modules.length;g++)for(var x=1*g,E=0;E<this.modules[g].length;E++){var S=1*E;this.modules[g][E]&&(p.beginFill(0,100),p.moveTo(S,x),p.lineTo(S+1,x),p.lineTo(S+1,x+1),p.lineTo(S,x+1),p.endFill())}return p},setupTimingPattern:function(){for(var d=8;d<this.moduleCount-8;d++)null==this.modules[d][6]&&(this.modules[d][6]=d%2==0);for(var f=8;f<this.moduleCount-8;f++)null==this.modules[6][f]&&(this.modules[6][f]=f%2==0)},setupPositionAdjustPattern:function(){for(var d=ve.getPatternPosition(this.typeNumber),f=0;f<d.length;f++)for(var h=0;h<d.length;h++){var p=d[f],m=d[h];if(null==this.modules[p][m])for(var g=-2;g<=2;g++)for(var x=-2;x<=2;x++)this.modules[p+g][m+x]=-2==g||2==g||-2==x||2==x||0==g&&0==x}},setupTypeNumber:function(d){for(var f=ve.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var p=!d&&1==(f>>h&1);this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=p}for(h=0;h<18;h++)p=!d&&1==(f>>h&1),this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=p},setupTypeInfo:function(d,f){for(var p=ve.getBCHTypeInfo(this.errorCorrectLevel<<3|f),m=0;m<15;m++){var g=!d&&1==(p>>m&1);m<6?this.modules[m][8]=g:m<8?this.modules[m+1][8]=g:this.modules[this.moduleCount-15+m][8]=g}for(m=0;m<15;m++)g=!d&&1==(p>>m&1),m<8?this.modules[8][this.moduleCount-m-1]=g:m<9?this.modules[8][15-m-1+1]=g:this.modules[8][15-m-1]=g;this.modules[this.moduleCount-8][8]=!d},mapData:function(d,f){for(var h=-1,p=this.moduleCount-1,m=7,g=0,x=this.moduleCount-1;x>0;x-=2)for(6==x&&x--;;){for(var E=0;E<2;E++)if(null==this.modules[p][x-E]){var S=!1;g<d.length&&(S=1==(d[g]>>>m&1)),ve.getMask(f,p,x-E)&&(S=!S),this.modules[p][x-E]=S,-1==--m&&(g++,m=7)}if((p+=h)<0||this.moduleCount<=p){p-=h,h=-h;break}}}},F.PAD0=236,F.PAD1=17,F.createData=function(d,f,h){for(var p=b.getRSBlocks(d,f),m=new w,g=0;g<h.length;g++){var x=h[g];m.put(x.mode,4),m.put(x.getLength(),ve.getLengthInBits(x.mode,d)),x.write(m)}var E=0;for(g=0;g<p.length;g++)E+=p[g].dataCount;if(m.getLengthInBits()>8*E)throw new Error("code length overflow. ("+m.getLengthInBits()+">"+8*E+")");for(m.getLengthInBits()+4<=8*E&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(!1);for(;!(m.getLengthInBits()>=8*E||(m.put(F.PAD0,8),m.getLengthInBits()>=8*E));)m.put(F.PAD1,8);return F.createBytes(m,p)},F.createBytes=function(d,f){for(var h=0,p=0,m=0,g=new Array(f.length),x=new Array(f.length),E=0;E<f.length;E++){var S=f[E].dataCount,k=f[E].totalCount-S;p=Math.max(p,S),m=Math.max(m,k),g[E]=new Array(S);for(var X=0;X<g[E].length;X++)g[E][X]=255&d.buffer[X+h];h+=S;var Y=ve.getErrorCorrectPolynomial(k),z=new A(g[E],Y.getLength()-1).mod(Y);for(x[E]=new Array(Y.getLength()-1),X=0;X<x[E].length;X++){var ee=X+z.getLength()-x[E].length;x[E][X]=ee>=0?z.get(ee):0}}var H=0;for(X=0;X<f.length;X++)H+=f[X].totalCount;var re=new Array(H),Z=0;for(X=0;X<p;X++)for(E=0;E<f.length;E++)X<g[E].length&&(re[Z++]=g[E][X]);for(X=0;X<m;X++)for(E=0;E<f.length;E++)X<x[E].length&&(re[Z++]=x[E][X]);return re};for(var Et={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Jt={L:1,M:0,Q:3,H:2},l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ve={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var f=d<<10;ve.getBCHDigit(f)-ve.getBCHDigit(ve.G15)>=0;)f^=ve.G15<<ve.getBCHDigit(f)-ve.getBCHDigit(ve.G15);return(d<<10|f)^ve.G15_MASK},getBCHTypeNumber:function(d){for(var f=d<<12;ve.getBCHDigit(f)-ve.getBCHDigit(ve.G18)>=0;)f^=ve.G18<<ve.getBCHDigit(f)-ve.getBCHDigit(ve.G18);return d<<12|f},getBCHDigit:function(d){for(var f=0;0!=d;)f++,d>>>=1;return f},getPatternPosition:function(d){return ve.PATTERN_POSITION_TABLE[d-1]},getMask:function(d,f,h){switch(d){case l.PATTERN000:return(f+h)%2==0;case l.PATTERN001:return f%2==0;case l.PATTERN010:return h%3==0;case l.PATTERN011:return(f+h)%3==0;case l.PATTERN100:return(Math.floor(f/2)+Math.floor(h/3))%2==0;case l.PATTERN101:return f*h%2+f*h%3==0;case l.PATTERN110:return(f*h%2+f*h%3)%2==0;case l.PATTERN111:return(f*h%3+(f+h)%2)%2==0;default:throw new Error("bad maskPattern:"+d)}},getErrorCorrectPolynomial:function(d){for(var f=new A([1],0),h=0;h<d;h++)f=f.multiply(new A([1,K.gexp(h)],0));return f},getLengthInBits:function(d,f){if(1<=f&&f<10)switch(d){case Et.MODE_NUMBER:return 10;case Et.MODE_ALPHA_NUM:return 9;case Et.MODE_8BIT_BYTE:case Et.MODE_KANJI:return 8;default:throw new Error("mode:"+d)}else if(f<27)switch(d){case Et.MODE_NUMBER:return 12;case Et.MODE_ALPHA_NUM:return 11;case Et.MODE_8BIT_BYTE:return 16;case Et.MODE_KANJI:return 10;default:throw new Error("mode:"+d)}else{if(!(f<41))throw new Error("type:"+f);switch(d){case Et.MODE_NUMBER:return 14;case Et.MODE_ALPHA_NUM:return 13;case Et.MODE_8BIT_BYTE:return 16;case Et.MODE_KANJI:return 12;default:throw new Error("mode:"+d)}}},getLostPoint:function(d){for(var f=d.getModuleCount(),h=0,p=0;p<f;p++)for(var m=0;m<f;m++){for(var g=0,x=d.isDark(p,m),E=-1;E<=1;E++)if(!(p+E<0||f<=p+E))for(var S=-1;S<=1;S++)m+S<0||f<=m+S||0==E&&0==S||x==d.isDark(p+E,m+S)&&g++;g>5&&(h+=3+g-5)}for(p=0;p<f-1;p++)for(m=0;m<f-1;m++){var k=0;d.isDark(p,m)&&k++,d.isDark(p+1,m)&&k++,d.isDark(p,m+1)&&k++,d.isDark(p+1,m+1)&&k++,(0==k||4==k)&&(h+=3)}for(p=0;p<f;p++)for(m=0;m<f-6;m++)d.isDark(p,m)&&!d.isDark(p,m+1)&&d.isDark(p,m+2)&&d.isDark(p,m+3)&&d.isDark(p,m+4)&&!d.isDark(p,m+5)&&d.isDark(p,m+6)&&(h+=40);for(m=0;m<f;m++)for(p=0;p<f-6;p++)d.isDark(p,m)&&!d.isDark(p+1,m)&&d.isDark(p+2,m)&&d.isDark(p+3,m)&&d.isDark(p+4,m)&&!d.isDark(p+5,m)&&d.isDark(p+6,m)&&(h+=40);var X=0;for(m=0;m<f;m++)for(p=0;p<f;p++)d.isDark(p,m)&&X++;return h+Math.abs(100*X/f/f-50)/5*10}},K={glog:function(d){if(d<1)throw new Error("glog("+d+")");return K.LOG_TABLE[d]},gexp:function(d){for(;d<0;)d+=255;for(;d>=256;)d-=255;return K.EXP_TABLE[d]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},M=0;M<8;M++)K.EXP_TABLE[M]=1<<M;for(M=8;M<256;M++)K.EXP_TABLE[M]=K.EXP_TABLE[M-4]^K.EXP_TABLE[M-5]^K.EXP_TABLE[M-6]^K.EXP_TABLE[M-8];for(M=0;M<255;M++)K.LOG_TABLE[K.EXP_TABLE[M]]=M;function A(d,f){if(null==d.length)throw new Error(d.length+"/"+f);for(var h=0;h<d.length&&0==d[h];)h++;this.num=new Array(d.length-h+f);for(var p=0;p<d.length-h;p++)this.num[p]=d[p+h]}function b(d,f){this.totalCount=d,this.dataCount=f}function w(){this.buffer=[],this.length=0}A.prototype={get:function(d){return this.num[d]},getLength:function(){return this.num.length},multiply:function(d){for(var f=new Array(this.getLength()+d.getLength()-1),h=0;h<this.getLength();h++)for(var p=0;p<d.getLength();p++)f[h+p]^=K.gexp(K.glog(this.get(h))+K.glog(d.get(p)));return new A(f,0)},mod:function(d){if(this.getLength()-d.getLength()<0)return this;for(var f=K.glog(this.get(0))-K.glog(d.get(0)),h=new Array(this.getLength()),p=0;p<this.getLength();p++)h[p]=this.get(p);for(p=0;p<d.getLength();p++)h[p]^=K.gexp(K.glog(d.get(p))+f);return new A(h,0).mod(d)}},b.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b.getRSBlocks=function(d,f){var h=b.getRsBlockTable(d,f);if(null==h)throw new Error("bad rs block @ typeNumber:"+d+"/errorCorrectLevel:"+f);for(var p=h.length/3,m=[],g=0;g<p;g++)for(var x=h[3*g+0],E=h[3*g+1],S=h[3*g+2],k=0;k<x;k++)m.push(new b(E,S));return m},b.getRsBlockTable=function(d,f){switch(f){case Jt.L:return b.RS_BLOCK_TABLE[4*(d-1)+0];case Jt.M:return b.RS_BLOCK_TABLE[4*(d-1)+1];case Jt.Q:return b.RS_BLOCK_TABLE[4*(d-1)+2];case Jt.H:return b.RS_BLOCK_TABLE[4*(d-1)+3];default:return}},w.prototype={get:function(d){var f=Math.floor(d/8);return 1==(this.buffer[f]>>>7-d%8&1)},put:function(d,f){for(var h=0;h<f;h++)this.putBit(1==(d>>>f-h-1&1))},getLengthInBits:function(){return this.length},putBit:function(d){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0),d&&(this.buffer[f]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function D(d){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof d&&(d={content:d}),d)for(var h in d)this.options[h]=d[h];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var x=this.options.content,E=function m(k,X){for(var Y=function g(k){var X=encodeURI(k).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return X.length+(X.length!=k?3:0)}(k),G=1,z=0,ee=0,H=I.length;ee<=H;ee++){var re=I[ee];if(!re)throw new Error("Content too long: expected "+z+" but got "+Y);switch(X){case"L":z=re[0];break;case"M":z=re[1];break;case"Q":z=re[2];break;case"H":z=re[3];break;default:throw new Error("Unknwon error correction level: "+X)}if(Y<=z)break;G++}if(G>I.length)throw new Error("Content too long");return G}(x,this.options.ecl),S=function p(k){switch(k){case"L":return Jt.L;case"M":return Jt.M;case"Q":return Jt.Q;case"H":return Jt.H;default:throw new Error("Unknwon error correction level: "+k)}}(this.options.ecl);this.qrcode=new F(E,S),this.qrcode.addData(x),this.qrcode.make()}D.prototype.svg=function(d){var f=this.options||{},h=this.qrcode.modules;typeof d>"u"&&(d={container:f.container||"svg"});for(var p=!(typeof f.pretty<"u"&&!f.pretty),m=p?"  ":"",g=p?"\r\n":"",x=f.width,E=f.height,S=h.length,k=x/(S+2*f.padding),X=E/(S+2*f.padding),Y=typeof f.join<"u"&&!!f.join,G=typeof f.swap<"u"&&!!f.swap,z=!(typeof f.xmlDeclaration<"u"&&!f.xmlDeclaration),ee=typeof f.predefined<"u"&&!!f.predefined,H=ee?m+'<defs><path id="qrmodule" d="M0 0 h'+X+" v"+k+' H0 z" style="fill:'+f.color+';shape-rendering:crispEdges;" /></defs>'+g:"",re=m+'<rect x="0" y="0" width="'+x+'" height="'+E+'" style="fill:'+f.background+';shape-rendering:crispEdges;"/>'+g,Z="",_e="",xe=0;xe<S;xe++)for(var oe=0;oe<S;oe++)if(h[oe][xe]){var ne=oe*k+f.padding*k,J=xe*X+f.padding*X;if(G){var he=ne;ne=J,J=he}if(Y){var Ce=k+ne,et=X+J;ne=Number.isInteger(ne)?Number(ne):ne.toFixed(2),J=Number.isInteger(J)?Number(J):J.toFixed(2),Ce=Number.isInteger(Ce)?Number(Ce):Ce.toFixed(2),_e+="M"+ne+","+J+" V"+(et=Number.isInteger(et)?Number(et):et.toFixed(2))+" H"+Ce+" V"+J+" H"+ne+" Z "}else Z+=ee?m+'<use x="'+ne.toString()+'" y="'+J.toString()+'" href="#qrmodule" />'+g:m+'<rect x="'+ne.toString()+'" y="'+J.toString()+'" width="'+k+'" height="'+X+'" style="fill:'+f.color+';shape-rendering:crispEdges;"/>'+g}Y&&(Z=m+'<path x="0" y="0" style="fill:'+f.color+';shape-rendering:crispEdges;" d="'+_e+'" />');var le="";switch(d.container){case"svg":z&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+x+'" height="'+E+'">'+g,le+=H+re+Z,le+="</svg>";break;case"svg-viewbox":z&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+x+" "+E+'">'+g,le+=H+re+Z,le+="</svg>";break;case"g":le+='<g width="'+x+'" height="'+E+'">'+g,le+=H+re+Z,le+="</g>";break;default:le+=(H+re+Z).replace(/^\s+/,"")}return le},D.prototype.save=function(d,f){var h=this.svg();"function"!=typeof f&&(f=function(m,g){});try{je(Object(function(){var g=new Error("Cannot find module 'fs'");throw g.code="MODULE_NOT_FOUND",g}())).writeFile(d,h,f)}catch(m){f(m)}},wr.exports=D},4412:(wr,Nn,je)=>{"use strict";je.d(Nn,{t:()=>F});var j=je(1413);class F extends j.B{constructor(Jt){super(),this._value=Jt}get value(){return this.getValue()}_subscribe(Jt){const l=super._subscribe(Jt);return!l.closed&&Jt.next(this._value),l}getValue(){const{hasError:Jt,thrownError:l,_value:ve}=this;if(Jt)throw l;return this._throwIfClosed(),ve}next(Jt){super.next(this._value=Jt)}}},1985:(wr,Nn,je)=>{"use strict";je.d(Nn,{c:()=>M});var j=je(7707),F=je(8359),Et=je(3494),Jt=je(1203),l=je(1026),ve=je(8071),K=je(9786);let M=(()=>{class I{constructor(d){d&&(this._subscribe=d)}lift(d){const f=new I;return f.source=this,f.operator=d,f}subscribe(d,f,h){const p=function w(I){return I&&I instanceof j.vU||function b(I){return I&&(0,ve.T)(I.next)&&(0,ve.T)(I.error)&&(0,ve.T)(I.complete)}(I)&&(0,F.Uv)(I)}(d)?d:new j.Ms(d,f,h);return(0,K.Y)(()=>{const{operator:m,source:g}=this;p.add(m?m.call(p,g):g?this._subscribe(p):this._trySubscribe(p))}),p}_trySubscribe(d){try{return this._subscribe(d)}catch(f){d.error(f)}}forEach(d,f){return new(f=A(f))((h,p)=>{const m=new j.Ms({next:g=>{try{d(g)}catch(x){p(x),m.unsubscribe()}},error:p,complete:h});this.subscribe(m)})}_subscribe(d){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(d)}[Et.s](){return this}pipe(...d){return(0,Jt.m)(d)(this)}toPromise(d){return new(d=A(d))((f,h)=>{let p;this.subscribe(m=>p=m,m=>h(m),()=>f(p))})}}return I.create=D=>new I(D),I})();function A(I){var D;return null!==(D=null!=I?I:l.$.Promise)&&void 0!==D?D:Promise}},1413:(wr,Nn,je)=>{"use strict";je.d(Nn,{B:()=>K});var j=je(1985),F=je(8359);const Jt=(0,je(1853).L)(A=>function(){A(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var l=je(7908),ve=je(9786);let K=(()=>{class A extends j.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(w){const I=new M(this,this);return I.operator=w,I}_throwIfClosed(){if(this.closed)throw new Jt}next(w){(0,ve.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const I of this.currentObservers)I.next(w)}})}error(w){(0,ve.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=w;const{observers:I}=this;for(;I.length;)I.shift().error(w)}})}complete(){(0,ve.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:w}=this;for(;w.length;)w.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var w;return(null===(w=this.observers)||void 0===w?void 0:w.length)>0}_trySubscribe(w){return this._throwIfClosed(),super._trySubscribe(w)}_subscribe(w){return this._throwIfClosed(),this._checkFinalizedStatuses(w),this._innerSubscribe(w)}_innerSubscribe(w){const{hasError:I,isStopped:D,observers:d}=this;return I||D?F.Kn:(this.currentObservers=null,d.push(w),new F.yU(()=>{this.currentObservers=null,(0,l.o)(d,w)}))}_checkFinalizedStatuses(w){const{hasError:I,thrownError:D,isStopped:d}=this;I?w.error(D):d&&w.complete()}asObservable(){const w=new j.c;return w.source=this,w}}return A.create=(b,w)=>new M(b,w),A})();class M extends K{constructor(b,w){super(),this.destination=b,this.source=w}next(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.next)||void 0===I||I.call(w,b)}error(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.error)||void 0===I||I.call(w,b)}complete(){var b,w;null===(w=null===(b=this.destination)||void 0===b?void 0:b.complete)||void 0===w||w.call(b)}_subscribe(b){var w,I;return null!==(I=null===(w=this.source)||void 0===w?void 0:w.subscribe(b))&&void 0!==I?I:F.Kn}}},7707:(wr,Nn,je)=>{"use strict";je.d(Nn,{Ms:()=>h,vU:()=>I});var j=je(8071),F=je(8359),Et=je(1026),Jt=je(5334),l=je(5343);const ve=A("C",void 0,void 0);function A(E,S,k){return{kind:E,value:S,error:k}}var b=je(9270),w=je(9786);class I extends F.yU{constructor(S){super(),this.isStopped=!1,S?(this.destination=S,(0,F.Uv)(S)&&S.add(this)):this.destination=x}static create(S,k,X){return new h(S,k,X)}next(S){this.isStopped?g(function M(E){return A("N",E,void 0)}(S),this):this._next(S)}error(S){this.isStopped?g(function K(E){return A("E",void 0,E)}(S),this):(this.isStopped=!0,this._error(S))}complete(){this.isStopped?g(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(S){this.destination.next(S)}_error(S){try{this.destination.error(S)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function d(E,S){return D.call(E,S)}class f{constructor(S){this.partialObserver=S}next(S){const{partialObserver:k}=this;if(k.next)try{k.next(S)}catch(X){p(X)}}error(S){const{partialObserver:k}=this;if(k.error)try{k.error(S)}catch(X){p(X)}else p(S)}complete(){const{partialObserver:S}=this;if(S.complete)try{S.complete()}catch(k){p(k)}}}class h extends I{constructor(S,k,X){let Y;if(super(),(0,j.T)(S)||!S)Y={next:null!=S?S:void 0,error:null!=k?k:void 0,complete:null!=X?X:void 0};else{let G;this&&Et.$.useDeprecatedNextContext?(G=Object.create(S),G.unsubscribe=()=>this.unsubscribe(),Y={next:S.next&&d(S.next,G),error:S.error&&d(S.error,G),complete:S.complete&&d(S.complete,G)}):Y=S}this.destination=new f(Y)}}function p(E){Et.$.useDeprecatedSynchronousErrorHandling?(0,w.l)(E):(0,Jt.m)(E)}function g(E,S){const{onStoppedNotification:k}=Et.$;k&&b.f.setTimeout(()=>k(E,S))}const x={closed:!0,next:l.l,error:function m(E){throw E},complete:l.l}},8359:(wr,Nn,je)=>{"use strict";je.d(Nn,{Kn:()=>ve,yU:()=>l,Uv:()=>K});var j=je(8071);const Et=(0,je(1853).L)(A=>function(w){A(this),this.message=w?`${w.length} errors occurred during unsubscription:\n${w.map((I,D)=>`${D+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=w});var Jt=je(7908);class l{constructor(b){this.initialTeardown=b,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let b;if(!this.closed){this.closed=!0;const{_parentage:w}=this;if(w)if(this._parentage=null,Array.isArray(w))for(const d of w)d.remove(this);else w.remove(this);const{initialTeardown:I}=this;if((0,j.T)(I))try{I()}catch(d){b=d instanceof Et?d.errors:[d]}const{_finalizers:D}=this;if(D){this._finalizers=null;for(const d of D)try{M(d)}catch(f){b=null!=b?b:[],f instanceof Et?b=[...b,...f.errors]:b.push(f)}}if(b)throw new Et(b)}}add(b){var w;if(b&&b!==this)if(this.closed)M(b);else{if(b instanceof l){if(b.closed||b._hasParent(this))return;b._addParent(this)}(this._finalizers=null!==(w=this._finalizers)&&void 0!==w?w:[]).push(b)}}_hasParent(b){const{_parentage:w}=this;return w===b||Array.isArray(w)&&w.includes(b)}_addParent(b){const{_parentage:w}=this;this._parentage=Array.isArray(w)?(w.push(b),w):w?[w,b]:b}_removeParent(b){const{_parentage:w}=this;w===b?this._parentage=null:Array.isArray(w)&&(0,Jt.o)(w,b)}remove(b){const{_finalizers:w}=this;w&&(0,Jt.o)(w,b),b instanceof l&&b._removeParent(this)}}l.EMPTY=(()=>{const A=new l;return A.closed=!0,A})();const ve=l.EMPTY;function K(A){return A instanceof l||A&&"closed"in A&&(0,j.T)(A.remove)&&(0,j.T)(A.add)&&(0,j.T)(A.unsubscribe)}function M(A){(0,j.T)(A)?A():A.unsubscribe()}},1026:(wr,Nn,je)=>{"use strict";je.d(Nn,{$:()=>j});const j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(wr,Nn,je)=>{"use strict";je.d(Nn,{G:()=>ve});var j=je(1985),F=je(8359),Et=je(9898),Jt=je(4360),l=je(9974);class ve extends j.c{constructor(M,A){super(),this.source=M,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,l.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new F.yU;const A=this.getSubject();M.add(this.source.subscribe((0,Jt._)(A,void 0,()=>{this._teardown(),A.complete()},b=>{this._teardown(),A.error(b)},()=>this._teardown()))),M.closed&&(this._connection=null,M=F.yU.EMPTY)}return M}refCount(){return(0,Et.B)()(this)}}},4572:(wr,Nn,je)=>{"use strict";je.d(Nn,{z:()=>b});var j=je(1985),F=je(3073),Et=je(6648),Jt=je(3669),l=je(6450),ve=je(9326),K=je(8496),M=je(4360),A=je(5225);function b(...D){const d=(0,ve.lI)(D),f=(0,ve.ms)(D),{args:h,keys:p}=(0,F.D)(D);if(0===h.length)return(0,Et.H)([],d);const m=new j.c(function w(D,d,f=Jt.D){return h=>{I(d,()=>{const{length:p}=D,m=new Array(p);let g=p,x=p;for(let E=0;E<p;E++)I(d,()=>{const S=(0,Et.H)(D[E],d);let k=!1;S.subscribe((0,M._)(h,X=>{m[E]=X,k||(k=!0,x--),x||h.next(f(m.slice()))},()=>{--g||h.complete()}))},h)},h)}}(h,d,p?g=>(0,K.e)(p,g):Jt.D));return f?m.pipe((0,l.I)(f)):m}function I(D,d,f){D?(0,A.N)(f,D,d):d()}},8793:(wr,Nn,je)=>{"use strict";je.d(Nn,{x:()=>l});var j=je(6365),Et=je(9326),Jt=je(6648);function l(...ve){return function F(){return(0,j.U)(1)}()((0,Jt.H)(ve,(0,Et.lI)(ve)))}},9030:(wr,Nn,je)=>{"use strict";je.d(Nn,{v:()=>Et});var j=je(1985),F=je(8750);function Et(Jt){return new j.c(l=>{(0,F.Tg)(Jt()).subscribe(l)})}},983:(wr,Nn,je)=>{"use strict";je.d(Nn,{w:()=>F});const F=new(je(1985).c)(l=>l.complete())},6648:(wr,Nn,je)=>{"use strict";je.d(Nn,{H:()=>X});var j=je(8750),F=je(5225),Et=je(9974),Jt=je(4360);function l(Y,G=0){return(0,Et.N)((z,ee)=>{z.subscribe((0,Jt._)(ee,H=>(0,F.N)(ee,Y,()=>ee.next(H),G),()=>(0,F.N)(ee,Y,()=>ee.complete(),G),H=>(0,F.N)(ee,Y,()=>ee.error(H),G)))})}function ve(Y,G=0){return(0,Et.N)((z,ee)=>{ee.add(Y.schedule(()=>z.subscribe(ee),G))})}var A=je(1985),w=je(4761),I=je(8071);function d(Y,G){if(!Y)throw new Error("Iterable cannot be null");return new A.c(z=>{(0,F.N)(z,G,()=>{const ee=Y[Symbol.asyncIterator]();(0,F.N)(z,G,()=>{ee.next().then(H=>{H.done?z.complete():z.next(H.value)})},0,!0)})})}var f=je(5055),h=je(7477),p=je(7441),m=je(5397),g=je(7953),x=je(591),E=je(5196);function X(Y,G){return G?function k(Y,G){if(null!=Y){if((0,f.l)(Y))return function K(Y,G){return(0,j.Tg)(Y).pipe(ve(G),l(G))}(Y,G);if((0,p.X)(Y))return function b(Y,G){return new A.c(z=>{let ee=0;return G.schedule(function(){ee===Y.length?z.complete():(z.next(Y[ee++]),z.closed||this.schedule())})})}(Y,G);if((0,h.y)(Y))return function M(Y,G){return(0,j.Tg)(Y).pipe(ve(G),l(G))}(Y,G);if((0,g.T)(Y))return d(Y,G);if((0,m.x)(Y))return function D(Y,G){return new A.c(z=>{let ee;return(0,F.N)(z,G,()=>{ee=Y[w.l](),(0,F.N)(z,G,()=>{let H,re;try{({value:H,done:re}=ee.next())}catch(Z){return void z.error(Z)}re?z.complete():z.next(H)},0,!0)}),()=>(0,I.T)(null==ee?void 0:ee.return)&&ee.return()})}(Y,G);if((0,E.U)(Y))return function S(Y,G){return d((0,E.C)(Y),G)}(Y,G)}throw(0,x.L)(Y)}(Y,G):(0,j.Tg)(Y)}},3726:(wr,Nn,je)=>{"use strict";je.d(Nn,{R:()=>b});var j=je(8750),F=je(1985),Et=je(1397),Jt=je(7441),l=je(8071),ve=je(6450);const K=["addListener","removeListener"],M=["addEventListener","removeEventListener"],A=["on","off"];function b(f,h,p,m){if((0,l.T)(p)&&(m=p,p=void 0),m)return b(f,h,p).pipe((0,ve.I)(m));const[g,x]=function d(f){return(0,l.T)(f.addEventListener)&&(0,l.T)(f.removeEventListener)}(f)?M.map(E=>S=>f[E](h,S,p)):function I(f){return(0,l.T)(f.addListener)&&(0,l.T)(f.removeListener)}(f)?K.map(w(f,h)):function D(f){return(0,l.T)(f.on)&&(0,l.T)(f.off)}(f)?A.map(w(f,h)):[];if(!g&&(0,Jt.X)(f))return(0,Et.Z)(E=>b(E,h,p))((0,j.Tg)(f));if(!g)throw new TypeError("Invalid event target");return new F.c(E=>{const S=(...k)=>E.next(1<k.length?k:k[0]);return g(S),()=>x(S)})}function w(f,h){return p=>m=>f[p](h,m)}},8750:(wr,Nn,je)=>{"use strict";je.d(Nn,{Tg:()=>D});var j=je(1635),F=je(7441),Et=je(7477),Jt=je(1985),l=je(5055),ve=je(7953),K=je(591),M=je(5397),A=je(5196),b=je(8071),w=je(5334),I=je(3494);function D(E){if(E instanceof Jt.c)return E;if(null!=E){if((0,l.l)(E))return function d(E){return new Jt.c(S=>{const k=E[I.s]();if((0,b.T)(k.subscribe))return k.subscribe(S);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(E);if((0,F.X)(E))return function f(E){return new Jt.c(S=>{for(let k=0;k<E.length&&!S.closed;k++)S.next(E[k]);S.complete()})}(E);if((0,Et.y)(E))return function h(E){return new Jt.c(S=>{E.then(k=>{S.closed||(S.next(k),S.complete())},k=>S.error(k)).then(null,w.m)})}(E);if((0,ve.T)(E))return m(E);if((0,M.x)(E))return function p(E){return new Jt.c(S=>{for(const k of E)if(S.next(k),S.closed)return;S.complete()})}(E);if((0,A.U)(E))return function g(E){return m((0,A.C)(E))}(E)}throw(0,K.L)(E)}function m(E){return new Jt.c(S=>{(function x(E,S){var k,X,Y,G;return(0,j.sH)(this,void 0,void 0,function*(){try{for(k=(0,j.xN)(E);!(X=yield k.next()).done;)if(S.next(X.value),S.closed)return}catch(z){Y={error:z}}finally{try{X&&!X.done&&(G=k.return)&&(yield G.call(k))}finally{if(Y)throw Y.error}}S.complete()})})(E,S).catch(k=>S.error(k))})}},7673:(wr,Nn,je)=>{"use strict";je.d(Nn,{of:()=>Et});var j=je(9326),F=je(6648);function Et(...Jt){const l=(0,j.lI)(Jt);return(0,F.H)(Jt,l)}},8810:(wr,Nn,je)=>{"use strict";je.d(Nn,{$:()=>Et});var j=je(1985),F=je(8071);function Et(Jt,l){const ve=(0,F.T)(Jt)?Jt:()=>Jt,K=M=>M.error(ve());return new j.c(l?M=>l.schedule(K,0,M):K)}},4360:(wr,Nn,je)=>{"use strict";je.d(Nn,{_:()=>F});var j=je(7707);function F(Jt,l,ve,K,M){return new Et(Jt,l,ve,K,M)}class Et extends j.vU{constructor(l,ve,K,M,A,b){super(l),this.onFinalize=A,this.shouldUnsubscribe=b,this._next=ve?function(w){try{ve(w)}catch(I){l.error(I)}}:super._next,this._error=M?function(w){try{M(w)}catch(I){l.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=K?function(){try{K()}catch(w){l.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}}}},5964:(wr,Nn,je)=>{"use strict";je.d(Nn,{p:()=>Et});var j=je(9974),F=je(4360);function Et(Jt,l){return(0,j.N)((ve,K)=>{let M=0;ve.subscribe((0,F._)(K,A=>Jt.call(l,A,M++)&&K.next(A)))})}},6354:(wr,Nn,je)=>{"use strict";je.d(Nn,{T:()=>Et});var j=je(9974),F=je(4360);function Et(Jt,l){return(0,j.N)((ve,K)=>{let M=0;ve.subscribe((0,F._)(K,A=>{K.next(Jt.call(l,A,M++))}))})}},3703:(wr,Nn,je)=>{"use strict";je.d(Nn,{u:()=>F});var j=je(6354);function F(Et){return(0,j.T)(()=>Et)}},6365:(wr,Nn,je)=>{"use strict";je.d(Nn,{U:()=>Et});var j=je(1397),F=je(3669);function Et(Jt=1/0){return(0,j.Z)(F.D,Jt)}},1397:(wr,Nn,je)=>{"use strict";je.d(Nn,{Z:()=>M});var j=je(6354),F=je(8750),Et=je(9974),Jt=je(5225),l=je(4360),K=je(8071);function M(A,b,w=1/0){return(0,K.T)(b)?M((I,D)=>(0,j.T)((d,f)=>b(I,d,D,f))((0,F.Tg)(A(I,D))),w):("number"==typeof b&&(w=b),(0,Et.N)((I,D)=>function ve(A,b,w,I,D,d,f,h){const p=[];let m=0,g=0,x=!1;const E=()=>{x&&!p.length&&!m&&b.complete()},S=X=>m<I?k(X):p.push(X),k=X=>{d&&b.next(X),m++;let Y=!1;(0,F.Tg)(w(X,g++)).subscribe((0,l._)(b,G=>{null==D||D(G),d?S(G):b.next(G)},()=>{Y=!0},void 0,()=>{if(Y)try{for(m--;p.length&&m<I;){const G=p.shift();f?(0,Jt.N)(b,f,()=>k(G)):k(G)}E()}catch(G){b.error(G)}}))};return A.subscribe((0,l._)(b,S,()=>{x=!0,E()})),()=>{null==h||h()}}(I,D,A,w)))}},9898:(wr,Nn,je)=>{"use strict";je.d(Nn,{B:()=>Et});var j=je(9974),F=je(4360);function Et(){return(0,j.N)((Jt,l)=>{let ve=null;Jt._refCount++;const K=(0,F._)(l,void 0,void 0,void 0,()=>{if(!Jt||Jt._refCount<=0||0<--Jt._refCount)return void(ve=null);const M=Jt._connection,A=ve;ve=null,M&&(!A||M===A)&&M.unsubscribe(),l.unsubscribe()});Jt.subscribe(K),K.closed||(ve=Jt.connect())})}},5558:(wr,Nn,je)=>{"use strict";je.d(Nn,{n:()=>Jt});var j=je(8750),F=je(9974),Et=je(4360);function Jt(l,ve){return(0,F.N)((K,M)=>{let A=null,b=0,w=!1;const I=()=>w&&!A&&M.complete();K.subscribe((0,Et._)(M,D=>{null==A||A.unsubscribe();let d=0;const f=b++;(0,j.Tg)(l(D,f)).subscribe(A=(0,Et._)(M,h=>M.next(ve?ve(D,h,f,d++):h),()=>{A=null,I()}))},()=>{w=!0,I()}))})}},6697:(wr,Nn,je)=>{"use strict";je.d(Nn,{s:()=>Jt});var j=je(983),F=je(9974),Et=je(4360);function Jt(l){return l<=0?()=>j.w:(0,F.N)((ve,K)=>{let M=0;ve.subscribe((0,Et._)(K,A=>{++M<=l&&(K.next(A),l<=M&&K.complete())}))})}},8141:(wr,Nn,je)=>{"use strict";je.d(Nn,{M:()=>l});var j=je(8071),F=je(9974),Et=je(4360),Jt=je(3669);function l(ve,K,M){const A=(0,j.T)(ve)||K||M?{next:ve,error:K,complete:M}:ve;return A?(0,F.N)((b,w)=>{var I;null===(I=A.subscribe)||void 0===I||I.call(A);let D=!0;b.subscribe((0,Et._)(w,d=>{var f;null===(f=A.next)||void 0===f||f.call(A,d),w.next(d)},()=>{var d;D=!1,null===(d=A.complete)||void 0===d||d.call(A),w.complete()},d=>{var f;D=!1,null===(f=A.error)||void 0===f||f.call(A,d),w.error(d)},()=>{var d,f;D&&(null===(d=A.unsubscribe)||void 0===d||d.call(A)),null===(f=A.finalize)||void 0===f||f.call(A)}))}):Jt.D}},9270:(wr,Nn,je)=>{"use strict";je.d(Nn,{f:()=>j});const j={setTimeout(F,Et,...Jt){const{delegate:l}=j;return null!=l&&l.setTimeout?l.setTimeout(F,Et,...Jt):setTimeout(F,Et,...Jt)},clearTimeout(F){const{delegate:Et}=j;return((null==Et?void 0:Et.clearTimeout)||clearTimeout)(F)},delegate:void 0}},4761:(wr,Nn,je)=>{"use strict";je.d(Nn,{l:()=>F});const F=function j(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(wr,Nn,je)=>{"use strict";je.d(Nn,{s:()=>j});const j="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(wr,Nn,je)=>{"use strict";je.d(Nn,{R0:()=>ve,lI:()=>l,ms:()=>Jt});var j=je(8071),F=je(9470);function Et(K){return K[K.length-1]}function Jt(K){return(0,j.T)(Et(K))?K.pop():void 0}function l(K){return(0,F.m)(Et(K))?K.pop():void 0}function ve(K,M){return"number"==typeof Et(K)?K.pop():M}},3073:(wr,Nn,je)=>{"use strict";je.d(Nn,{D:()=>l});const{isArray:j}=Array,{getPrototypeOf:F,prototype:Et,keys:Jt}=Object;function l(K){if(1===K.length){const M=K[0];if(j(M))return{args:M,keys:null};if(function ve(K){return K&&"object"==typeof K&&F(K)===Et}(M)){const A=Jt(M);return{args:A.map(b=>M[b]),keys:A}}}return{args:K,keys:null}}},7908:(wr,Nn,je)=>{"use strict";function j(F,Et){if(F){const Jt=F.indexOf(Et);0<=Jt&&F.splice(Jt,1)}}je.d(Nn,{o:()=>j})},1853:(wr,Nn,je)=>{"use strict";function j(F){const Jt=F(l=>{Error.call(l),l.stack=(new Error).stack});return Jt.prototype=Object.create(Error.prototype),Jt.prototype.constructor=Jt,Jt}je.d(Nn,{L:()=>j})},8496:(wr,Nn,je)=>{"use strict";function j(F,Et){return F.reduce((Jt,l,ve)=>(Jt[l]=Et[ve],Jt),{})}je.d(Nn,{e:()=>j})},9786:(wr,Nn,je)=>{"use strict";je.d(Nn,{Y:()=>Et,l:()=>Jt});var j=je(1026);let F=null;function Et(l){if(j.$.useDeprecatedSynchronousErrorHandling){const ve=!F;if(ve&&(F={errorThrown:!1,error:null}),l(),ve){const{errorThrown:K,error:M}=F;if(F=null,K)throw M}}else l()}function Jt(l){j.$.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=l)}},5225:(wr,Nn,je)=>{"use strict";function j(F,Et,Jt,l=0,ve=!1){const K=Et.schedule(function(){Jt(),ve?F.add(this.schedule(null,l)):this.unsubscribe()},l);if(F.add(K),!ve)return K}je.d(Nn,{N:()=>j})},3669:(wr,Nn,je)=>{"use strict";function j(F){return F}je.d(Nn,{D:()=>j})},7441:(wr,Nn,je)=>{"use strict";je.d(Nn,{X:()=>j});const j=F=>F&&"number"==typeof F.length&&"function"!=typeof F},7953:(wr,Nn,je)=>{"use strict";je.d(Nn,{T:()=>F});var j=je(8071);function F(Et){return Symbol.asyncIterator&&(0,j.T)(null==Et?void 0:Et[Symbol.asyncIterator])}},8071:(wr,Nn,je)=>{"use strict";function j(F){return"function"==typeof F}je.d(Nn,{T:()=>j})},5055:(wr,Nn,je)=>{"use strict";je.d(Nn,{l:()=>Et});var j=je(3494),F=je(8071);function Et(Jt){return(0,F.T)(Jt[j.s])}},5397:(wr,Nn,je)=>{"use strict";je.d(Nn,{x:()=>Et});var j=je(4761),F=je(8071);function Et(Jt){return(0,F.T)(null==Jt?void 0:Jt[j.l])}},7477:(wr,Nn,je)=>{"use strict";je.d(Nn,{y:()=>F});var j=je(8071);function F(Et){return(0,j.T)(null==Et?void 0:Et.then)}},5196:(wr,Nn,je)=>{"use strict";je.d(Nn,{C:()=>Et,U:()=>Jt});var j=je(1635),F=je(8071);function Et(l){return(0,j.AQ)(this,arguments,function*(){const K=l.getReader();try{for(;;){const{value:M,done:A}=yield(0,j.N3)(K.read());if(A)return yield(0,j.N3)(void 0);yield yield(0,j.N3)(M)}}finally{K.releaseLock()}})}function Jt(l){return(0,F.T)(null==l?void 0:l.getReader)}},9470:(wr,Nn,je)=>{"use strict";je.d(Nn,{m:()=>F});var j=je(8071);function F(Et){return Et&&(0,j.T)(Et.schedule)}},9974:(wr,Nn,je)=>{"use strict";je.d(Nn,{N:()=>Et,S:()=>F});var j=je(8071);function F(Jt){return(0,j.T)(null==Jt?void 0:Jt.lift)}function Et(Jt){return l=>{if(F(l))return l.lift(function(ve){try{return Jt(ve,this)}catch(K){this.error(K)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(wr,Nn,je)=>{"use strict";je.d(Nn,{I:()=>Jt});var j=je(6354);const{isArray:F}=Array;function Jt(l){return(0,j.T)(ve=>function Et(l,ve){return F(ve)?l(...ve):l(ve)}(l,ve))}},5343:(wr,Nn,je)=>{"use strict";function j(){}je.d(Nn,{l:()=>j})},1203:(wr,Nn,je)=>{"use strict";je.d(Nn,{F:()=>F,m:()=>Et});var j=je(3669);function F(...Jt){return Et(Jt)}function Et(Jt){return 0===Jt.length?j.D:1===Jt.length?Jt[0]:function(ve){return Jt.reduce((K,M)=>M(K),ve)}}},5334:(wr,Nn,je)=>{"use strict";je.d(Nn,{m:()=>Et});var j=je(1026),F=je(9270);function Et(Jt){F.f.setTimeout(()=>{const{onUnhandledError:l}=j.$;if(!l)throw Jt;l(Jt)})}},591:(wr,Nn,je)=>{"use strict";function j(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}je.d(Nn,{L:()=>j})},8996:(wr,Nn,je)=>{var j={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function F(Et){if(!je.o(j,Et))return Promise.resolve().then(()=>{var ve=new Error("Cannot find module '"+Et+"'");throw ve.code="MODULE_NOT_FOUND",ve});var Jt=j[Et],l=Jt[0];return Promise.all(Jt.slice(1).map(je.e)).then(()=>je(l))}F.keys=()=>Object.keys(j),F.id=8996,wr.exports=F},5235:(wr,Nn,je)=>{var j={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function F(Et){if(!je.o(j,Et))return Promise.resolve().then(()=>{var ve=new Error("Cannot find module '"+Et+"'");throw ve.code="MODULE_NOT_FOUND",ve});var Jt=j[Et],l=Jt[0];return je.e(Jt[1]).then(()=>je(l))}F.keys=()=>Object.keys(j),F.id=5235,wr.exports=F},4633:(wr,Nn,je)=>{var j=je(3738).default;function F(){"use strict";wr.exports=F=function(){return Jt},wr.exports.__esModule=!0,wr.exports.default=wr.exports;var Et,Jt={},l=Object.prototype,ve=l.hasOwnProperty,K=Object.defineProperty||function(me,ne,J){me[ne]=J.value},M="function"==typeof Symbol?Symbol:{},A=M.iterator||"@@iterator",b=M.asyncIterator||"@@asyncIterator",w=M.toStringTag||"@@toStringTag";function I(me,ne,J){return Object.defineProperty(me,ne,{value:J,enumerable:!0,configurable:!0,writable:!0}),me[ne]}try{I({},"")}catch{I=function(J,he,Ce){return J[he]=Ce}}function D(me,ne,J,he){var et=Object.create((ne&&ne.prototype instanceof x?ne:x).prototype),le=new xe(he||[]);return K(et,"_invoke",{value:H(me,J,le)}),et}function d(me,ne,J){try{return{type:"normal",arg:me.call(ne,J)}}catch(he){return{type:"throw",arg:he}}}Jt.wrap=D;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function x(){}function E(){}function S(){}var k={};I(k,A,function(){return this});var X=Object.getPrototypeOf,Y=X&&X(X(oe([])));Y&&Y!==l&&ve.call(Y,A)&&(k=Y);var G=S.prototype=x.prototype=Object.create(k);function z(me){["next","throw","return"].forEach(function(ne){I(me,ne,function(J){return this._invoke(ne,J)})})}function ee(me,ne){function J(Ce,et,le,V){var ge=d(me[Ce],me,et);if("throw"!==ge.type){var Le=ge.arg,Ke=Le.value;return Ke&&"object"==j(Ke)&&ve.call(Ke,"__await")?ne.resolve(Ke.__await).then(function(ut){J("next",ut,le,V)},function(ut){J("throw",ut,le,V)}):ne.resolve(Ke).then(function(ut){Le.value=ut,le(Le)},function(ut){return J("throw",ut,le,V)})}V(ge.arg)}var he;K(this,"_invoke",{value:function(et,le){function V(){return new ne(function(ge,Le){J(et,le,ge,Le)})}return he=he?he.then(V,V):V()}})}function H(me,ne,J){var he=f;return function(Ce,et){if(he===p)throw Error("Generator is already running");if(he===m){if("throw"===Ce)throw et;return{value:Et,done:!0}}for(J.method=Ce,J.arg=et;;){var le=J.delegate;if(le){var V=re(le,J);if(V){if(V===g)continue;return V}}if("next"===J.method)J.sent=J._sent=J.arg;else if("throw"===J.method){if(he===f)throw he=m,J.arg;J.dispatchException(J.arg)}else"return"===J.method&&J.abrupt("return",J.arg);he=p;var ge=d(me,ne,J);if("normal"===ge.type){if(he=J.done?m:h,ge.arg===g)continue;return{value:ge.arg,done:J.done}}"throw"===ge.type&&(he=m,J.method="throw",J.arg=ge.arg)}}}function re(me,ne){var J=ne.method,he=me.iterator[J];if(he===Et)return ne.delegate=null,"throw"===J&&me.iterator.return&&(ne.method="return",ne.arg=Et,re(me,ne),"throw"===ne.method)||"return"!==J&&(ne.method="throw",ne.arg=new TypeError("The iterator does not provide a '"+J+"' method")),g;var Ce=d(he,me.iterator,ne.arg);if("throw"===Ce.type)return ne.method="throw",ne.arg=Ce.arg,ne.delegate=null,g;var et=Ce.arg;return et?et.done?(ne[me.resultName]=et.value,ne.next=me.nextLoc,"return"!==ne.method&&(ne.method="next",ne.arg=Et),ne.delegate=null,g):et:(ne.method="throw",ne.arg=new TypeError("iterator result is not an object"),ne.delegate=null,g)}function Z(me){var ne={tryLoc:me[0]};1 in me&&(ne.catchLoc=me[1]),2 in me&&(ne.finallyLoc=me[2],ne.afterLoc=me[3]),this.tryEntries.push(ne)}function _e(me){var ne=me.completion||{};ne.type="normal",delete ne.arg,me.completion=ne}function xe(me){this.tryEntries=[{tryLoc:"root"}],me.forEach(Z,this),this.reset(!0)}function oe(me){if(me||""===me){var ne=me[A];if(ne)return ne.call(me);if("function"==typeof me.next)return me;if(!isNaN(me.length)){var J=-1,he=function Ce(){for(;++J<me.length;)if(ve.call(me,J))return Ce.value=me[J],Ce.done=!1,Ce;return Ce.value=Et,Ce.done=!0,Ce};return he.next=he}}throw new TypeError(j(me)+" is not iterable")}return E.prototype=S,K(G,"constructor",{value:S,configurable:!0}),K(S,"constructor",{value:E,configurable:!0}),E.displayName=I(S,w,"GeneratorFunction"),Jt.isGeneratorFunction=function(me){var ne="function"==typeof me&&me.constructor;return!!ne&&(ne===E||"GeneratorFunction"===(ne.displayName||ne.name))},Jt.mark=function(me){return Object.setPrototypeOf?Object.setPrototypeOf(me,S):(me.__proto__=S,I(me,w,"GeneratorFunction")),me.prototype=Object.create(G),me},Jt.awrap=function(me){return{__await:me}},z(ee.prototype),I(ee.prototype,b,function(){return this}),Jt.AsyncIterator=ee,Jt.async=function(me,ne,J,he,Ce){void 0===Ce&&(Ce=Promise);var et=new ee(D(me,ne,J,he),Ce);return Jt.isGeneratorFunction(ne)?et:et.next().then(function(le){return le.done?le.value:et.next()})},z(G),I(G,w,"Generator"),I(G,A,function(){return this}),I(G,"toString",function(){return"[object Generator]"}),Jt.keys=function(me){var ne=Object(me),J=[];for(var he in ne)J.push(he);return J.reverse(),function Ce(){for(;J.length;){var et=J.pop();if(et in ne)return Ce.value=et,Ce.done=!1,Ce}return Ce.done=!0,Ce}},Jt.values=oe,xe.prototype={constructor:xe,reset:function(ne){if(this.prev=0,this.next=0,this.sent=this._sent=Et,this.done=!1,this.delegate=null,this.method="next",this.arg=Et,this.tryEntries.forEach(_e),!ne)for(var J in this)"t"===J.charAt(0)&&ve.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=Et)},stop:function(){this.done=!0;var ne=this.tryEntries[0].completion;if("throw"===ne.type)throw ne.arg;return this.rval},dispatchException:function(ne){if(this.done)throw ne;var J=this;function he(Le,Ke){return le.type="throw",le.arg=ne,J.next=Le,Ke&&(J.method="next",J.arg=Et),!!Ke}for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var et=this.tryEntries[Ce],le=et.completion;if("root"===et.tryLoc)return he("end");if(et.tryLoc<=this.prev){var V=ve.call(et,"catchLoc"),ge=ve.call(et,"finallyLoc");if(V&&ge){if(this.prev<et.catchLoc)return he(et.catchLoc,!0);if(this.prev<et.finallyLoc)return he(et.finallyLoc)}else if(V){if(this.prev<et.catchLoc)return he(et.catchLoc,!0)}else{if(!ge)throw Error("try statement without catch or finally");if(this.prev<et.finallyLoc)return he(et.finallyLoc)}}}},abrupt:function(ne,J){for(var he=this.tryEntries.length-1;he>=0;--he){var Ce=this.tryEntries[he];if(Ce.tryLoc<=this.prev&&ve.call(Ce,"finallyLoc")&&this.prev<Ce.finallyLoc){var et=Ce;break}}et&&("break"===ne||"continue"===ne)&&et.tryLoc<=J&&J<=et.finallyLoc&&(et=null);var le=et?et.completion:{};return le.type=ne,le.arg=J,et?(this.method="next",this.next=et.finallyLoc,g):this.complete(le)},complete:function(ne,J){if("throw"===ne.type)throw ne.arg;return"break"===ne.type||"continue"===ne.type?this.next=ne.arg:"return"===ne.type?(this.rval=this.arg=ne.arg,this.method="return",this.next="end"):"normal"===ne.type&&J&&(this.next=J),g},finish:function(ne){for(var J=this.tryEntries.length-1;J>=0;--J){var he=this.tryEntries[J];if(he.finallyLoc===ne)return this.complete(he.completion,he.afterLoc),_e(he),g}},catch:function(ne){for(var J=this.tryEntries.length-1;J>=0;--J){var he=this.tryEntries[J];if(he.tryLoc===ne){var Ce=he.completion;if("throw"===Ce.type){var et=Ce.arg;_e(he)}return et}}throw Error("illegal catch attempt")},delegateYield:function(ne,J,he){return this.delegate={iterator:oe(ne),resultName:J,nextLoc:he},"next"===this.method&&(this.arg=Et),g}},Jt}wr.exports=F,wr.exports.__esModule=!0,wr.exports.default=wr.exports},3738:wr=>{function Nn(je){return wr.exports=Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},wr.exports.__esModule=!0,wr.exports.default=wr.exports,Nn(je)}wr.exports=Nn,wr.exports.__esModule=!0,wr.exports.default=wr.exports},4756:(wr,Nn,je)=>{var j=je(4633)();wr.exports=j;try{regeneratorRuntime=j}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=j:Function("r","regeneratorRuntime = r")(j)}},177:(wr,Nn,je)=>{"use strict";je.d(Nn,{AJ:()=>Dn,MD:()=>Rn,N0:()=>Pi,QT:()=>Et,Sm:()=>h,Sq:()=>ar,T3:()=>ta,UE:()=>hr,VF:()=>l,Vy:()=>vr,Xr:()=>qr,ZD:()=>Jt,_b:()=>Ve,aZ:()=>m,bT:()=>ji,fw:()=>p,hb:()=>d,hj:()=>A,qQ:()=>K});var j=je(3953);let F=null;function Et(){return F}function Jt(Se){var Ze;null!==(Ze=F)&&void 0!==Ze||(F=Se)}class l{}const K=new j.nKC("");let M=(()=>{var Se;class Ze{historyGo(qe){throw new Error("")}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=j.jDH({token:Se,factory:()=>(0,j.WQX)(b),providedIn:"platform"}),Ze})();const A=new j.nKC("");let b=(()=>{var Se;class Ze extends M{constructor(){super(),this._doc=(0,j.WQX)(K),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Et().getBaseHref(this._doc)}onPopState(qe){const Pt=Et().getGlobalEventTarget(this._doc,"window");return Pt.addEventListener("popstate",qe,!1),()=>Pt.removeEventListener("popstate",qe)}onHashChange(qe){const Pt=Et().getGlobalEventTarget(this._doc,"window");return Pt.addEventListener("hashchange",qe,!1),()=>Pt.removeEventListener("hashchange",qe)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(qe){this._location.pathname=qe}pushState(qe,Pt,en){this._history.pushState(qe,Pt,en)}replaceState(qe,Pt,en){this._history.replaceState(qe,Pt,en)}forward(){this._history.forward()}back(){this._history.back()}historyGo(qe=0){this._history.go(qe)}getState(){return this._history.state}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=j.jDH({token:Se,factory:()=>new Se,providedIn:"platform"}),Ze})();function w(Se,Ze){if(0==Se.length)return Ze;if(0==Ze.length)return Se;let Zt=0;return Se.endsWith("/")&&Zt++,Ze.startsWith("/")&&Zt++,2==Zt?Se+Ze.substring(1):1==Zt?Se+Ze:Se+"/"+Ze}function I(Se){const Ze=Se.match(/#|\?|$/),Zt=Ze&&Ze.index||Se.length;return Se.slice(0,Zt-("/"===Se[Zt-1]?1:0))+Se.slice(Zt)}function D(Se){return Se&&"?"!==Se[0]?"?"+Se:Se}let d=(()=>{var Se;class Ze{historyGo(qe){throw new Error("")}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275prov=j.jDH({token:Se,factory:()=>(0,j.WQX)(h),providedIn:"root"}),Ze})();const f=new j.nKC("");let h=(()=>{var Se;class Ze extends d{constructor(qe,Pt){var en,mt,Ir;super(),this._platformLocation=qe,this._removeListenerFns=[],this._baseHref=null!==(en=null!==(mt=null!=Pt?Pt:this._platformLocation.getBaseHrefFromDOM())&&void 0!==mt?mt:null===(Ir=(0,j.WQX)(K).location)||void 0===Ir?void 0:Ir.origin)&&void 0!==en?en:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(qe){this._removeListenerFns.push(this._platformLocation.onPopState(qe),this._platformLocation.onHashChange(qe))}getBaseHref(){return this._baseHref}prepareExternalUrl(qe){return w(this._baseHref,qe)}path(qe=!1){const Pt=this._platformLocation.pathname+D(this._platformLocation.search),en=this._platformLocation.hash;return en&&qe?`${Pt}${en}`:Pt}pushState(qe,Pt,en,mt){const Ir=this.prepareExternalUrl(en+D(mt));this._platformLocation.pushState(qe,Pt,Ir)}replaceState(qe,Pt,en,mt){const Ir=this.prepareExternalUrl(en+D(mt));this._platformLocation.replaceState(qe,Pt,Ir)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(qe=0){var Pt,en;null===(Pt=(en=this._platformLocation).historyGo)||void 0===Pt||Pt.call(en,qe)}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(j.KVO(M),j.KVO(f,8))},Se.\u0275prov=j.jDH({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Ze})(),p=(()=>{var Se;class Ze extends d{constructor(qe,Pt){super(),this._platformLocation=qe,this._baseHref="",this._removeListenerFns=[],null!=Pt&&(this._baseHref=Pt)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(qe){this._removeListenerFns.push(this._platformLocation.onPopState(qe),this._platformLocation.onHashChange(qe))}getBaseHref(){return this._baseHref}path(qe=!1){var Pt;const en=null!==(Pt=this._platformLocation.hash)&&void 0!==Pt?Pt:"#";return en.length>0?en.substring(1):en}prepareExternalUrl(qe){const Pt=w(this._baseHref,qe);return Pt.length>0?"#"+Pt:Pt}pushState(qe,Pt,en,mt){let Ir=this.prepareExternalUrl(en+D(mt));0==Ir.length&&(Ir=this._platformLocation.pathname),this._platformLocation.pushState(qe,Pt,Ir)}replaceState(qe,Pt,en,mt){let Ir=this.prepareExternalUrl(en+D(mt));0==Ir.length&&(Ir=this._platformLocation.pathname),this._platformLocation.replaceState(qe,Pt,Ir)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(qe=0){var Pt,en;null===(Pt=(en=this._platformLocation).historyGo)||void 0===Pt||Pt.call(en,qe)}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(j.KVO(M),j.KVO(f,8))},Se.\u0275prov=j.jDH({token:Se,factory:Se.\u0275fac}),Ze})(),m=(()=>{var Se;class Ze{constructor(qe){this._subject=new j.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=qe;const Pt=this._locationStrategy.getBaseHref();this._basePath=function S(Se){if(new RegExp("^(https?:)?//").test(Se)){const[,Zt]=Se.split(/\/\/[^\/]+/);return Zt}return Se}(I(E(Pt))),this._locationStrategy.onPopState(en=>{this._subject.emit({url:this.path(!0),pop:!0,state:en.state,type:en.type})})}ngOnDestroy(){var qe;null===(qe=this._urlChangeSubscription)||void 0===qe||qe.unsubscribe(),this._urlChangeListeners=[]}path(qe=!1){return this.normalize(this._locationStrategy.path(qe))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(qe,Pt=""){return this.path()==this.normalize(qe+D(Pt))}normalize(qe){return Ze.stripTrailingSlash(function x(Se,Ze){if(!Se||!Ze.startsWith(Se))return Ze;const Zt=Ze.substring(Se.length);return""===Zt||["/",";","?","#"].includes(Zt[0])?Zt:Ze}(this._basePath,E(qe)))}prepareExternalUrl(qe){return qe&&"/"!==qe[0]&&(qe="/"+qe),this._locationStrategy.prepareExternalUrl(qe)}go(qe,Pt="",en=null){this._locationStrategy.pushState(en,"",qe,Pt),this._notifyUrlChangeListeners(this.prepareExternalUrl(qe+D(Pt)),en)}replaceState(qe,Pt="",en=null){this._locationStrategy.replaceState(en,"",qe,Pt),this._notifyUrlChangeListeners(this.prepareExternalUrl(qe+D(Pt)),en)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(qe=0){var Pt,en;null===(Pt=(en=this._locationStrategy).historyGo)||void 0===Pt||Pt.call(en,qe)}onUrlChange(qe){var Pt;return this._urlChangeListeners.push(qe),null!==(Pt=this._urlChangeSubscription)&&void 0!==Pt||(this._urlChangeSubscription=this.subscribe(en=>{this._notifyUrlChangeListeners(en.url,en.state)})),()=>{const en=this._urlChangeListeners.indexOf(qe);var mt;this._urlChangeListeners.splice(en,1),0===this._urlChangeListeners.length&&(null===(mt=this._urlChangeSubscription)||void 0===mt||mt.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(qe="",Pt){this._urlChangeListeners.forEach(en=>en(qe,Pt))}subscribe(qe,Pt,en){return this._subject.subscribe({next:qe,error:Pt,complete:en})}}return(Se=Ze).normalizeQueryParams=D,Se.joinWithSlash=w,Se.stripTrailingSlash=I,Se.\u0275fac=function(qe){return new(qe||Se)(j.KVO(d))},Se.\u0275prov=j.jDH({token:Se,factory:()=>function g(){return new m((0,j.KVO)(d))}(),providedIn:"root"}),Ze})();function E(Se){return Se.replace(/\/index.html$/,"")}function Ve(Se,Ze){Ze=encodeURIComponent(Ze);for(const Zt of Se.split(";")){const qe=Zt.indexOf("="),[Pt,en]=-1==qe?[Zt,""]:[Zt.slice(0,qe),Zt.slice(qe+1)];if(Pt.trim()===Ze)return decodeURIComponent(en)}return null}class Bn{constructor(Ze,Zt,qe,Pt){this.$implicit=Ze,this.ngForOf=Zt,this.index=qe,this.count=Pt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ar=(()=>{var Se;class Ze{set ngForOf(qe){this._ngForOf=qe,this._ngForOfDirty=!0}set ngForTrackBy(qe){this._trackByFn=qe}get ngForTrackBy(){return this._trackByFn}constructor(qe,Pt,en){this._viewContainer=qe,this._template=Pt,this._differs=en,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(qe){qe&&(this._template=qe)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const qe=this._ngForOf;!this._differ&&qe&&(this._differ=this._differs.find(qe).create(this.ngForTrackBy))}if(this._differ){const qe=this._differ.diff(this._ngForOf);qe&&this._applyChanges(qe)}}_applyChanges(qe){const Pt=this._viewContainer;qe.forEachOperation((en,mt,Ir)=>{if(null==en.previousIndex)Pt.createEmbeddedView(this._template,new Bn(en.item,this._ngForOf,-1,-1),null===Ir?void 0:Ir);else if(null==Ir)Pt.remove(null===mt?void 0:mt);else if(null!==mt){const zi=Pt.get(mt);Pt.move(zi,Ir),Pr(zi,en)}});for(let en=0,mt=Pt.length;en<mt;en++){const zi=Pt.get(en).context;zi.index=en,zi.count=mt,zi.ngForOf=this._ngForOf}qe.forEachIdentityChange(en=>{Pr(Pt.get(en.currentIndex),en)})}static ngTemplateContextGuard(qe,Pt){return!0}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(j.rXU(j.c1b),j.rXU(j.C4Q),j.rXU(j._q3))},Se.\u0275dir=j.FsC({type:Se,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),Ze})();function Pr(Se,Ze){Se.context.$implicit=Ze.item}let ji=(()=>{var Se;class Ze{constructor(qe,Pt){this._viewContainer=qe,this._context=new Us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Pt}set ngIf(qe){this._context.$implicit=this._context.ngIf=qe,this._updateView()}set ngIfThen(qe){bs("ngIfThen",qe),this._thenTemplateRef=qe,this._thenViewRef=null,this._updateView()}set ngIfElse(qe){bs("ngIfElse",qe),this._elseTemplateRef=qe,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(qe,Pt){return!0}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(j.rXU(j.c1b),j.rXU(j.C4Q))},Se.\u0275dir=j.FsC({type:Se,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),Ze})();class Us{constructor(){this.$implicit=null,this.ngIf=null}}function bs(Se,Ze){if(Ze&&!Ze.createEmbeddedView)throw new Error(`${Se} must be a TemplateRef, but received '${(0,j.Tbb)(Ze)}'.`)}let ta=(()=>{var Se;class Ze{constructor(qe){this._viewContainerRef=qe,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(qe){if(this._shouldRecreateView(qe)){var Pt;const en=this._viewContainerRef;if(this._viewRef&&en.remove(en.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const mt=this._createContextForwardProxy();this._viewRef=en.createEmbeddedView(this.ngTemplateOutlet,mt,{injector:null!==(Pt=this.ngTemplateOutletInjector)&&void 0!==Pt?Pt:void 0})}}_shouldRecreateView(qe){return!!qe.ngTemplateOutlet||!!qe.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(qe,Pt,en)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Pt,en),get:(qe,Pt,en)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Pt,en)}})}}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)(j.rXU(j.c1b))},Se.\u0275dir=j.FsC({type:Se,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[j.OA$]}),Ze})(),Rn=(()=>{var Se;class Ze{}return(Se=Ze).\u0275fac=function(qe){return new(qe||Se)},Se.\u0275mod=j.$C({type:Se}),Se.\u0275inj=j.G2t({}),Ze})();const Dn="browser",ir="server";function hr(Se){return Se===Dn}function vr(Se){return Se===ir}let qr=(()=>{var Se;class Ze{}return(Se=Ze).\u0275prov=(0,j.jDH)({token:Se,providedIn:"root",factory:()=>hr((0,j.WQX)(j.Agw))?new Gr((0,j.WQX)(K),window):new oi}),Ze})();class Gr{constructor(Ze,Zt){this.document=Ze,this.window=Zt,this.offset=()=>[0,0]}setOffset(Ze){this.offset=Array.isArray(Ze)?()=>Ze:Ze}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Ze){this.window.scrollTo(Ze[0],Ze[1])}scrollToAnchor(Ze){const Zt=function ni(Se,Ze){const Zt=Se.getElementById(Ze)||Se.getElementsByName(Ze)[0];if(Zt)return Zt;if("function"==typeof Se.createTreeWalker&&Se.body&&"function"==typeof Se.body.attachShadow){const qe=Se.createTreeWalker(Se.body,NodeFilter.SHOW_ELEMENT);let Pt=qe.currentNode;for(;Pt;){const en=Pt.shadowRoot;if(en){const mt=en.getElementById(Ze)||en.querySelector(`[name="${Ze}"]`);if(mt)return mt}Pt=qe.nextNode()}}return null}(this.document,Ze);Zt&&(this.scrollToElement(Zt),Zt.focus())}setHistoryScrollRestoration(Ze){this.window.history.scrollRestoration=Ze}scrollToElement(Ze){const Zt=Ze.getBoundingClientRect(),qe=Zt.left+this.window.pageXOffset,Pt=Zt.top+this.window.pageYOffset,en=this.offset();this.window.scrollTo(qe-en[0],Pt-en[1])}}class oi{setOffset(Ze){}getScrollPosition(){return[0,0]}scrollToPosition(Ze){}scrollToAnchor(Ze){}setHistoryScrollRestoration(Ze){}}class Pi{}},3953:(wr,Nn,je)=>{"use strict";function j(n,i){return Object.is(n,i)}je.d(Nn,{iLQ:()=>_b,sZ2:()=>Kd,hnV:()=>YC,Hbi:()=>PP,o8S:()=>ou,BIS:()=>Zv,gRc:()=>uA,Ql9:()=>sP,Ocv:()=>hP,Z63:()=>To,aKT:()=>Xh,uvJ:()=>ul,zcH:()=>cc,bkB:()=>Oo,$GK:()=>hs,nKC:()=>Zr,zZn:()=>Uo,_q3:()=>KS,MKu:()=>YS,xe9:()=>xb,Co$:()=>J_,Vns:()=>_d,SKi:()=>Lo,Xx1:()=>bo,Agw:()=>Dp,PLl:()=>E1,sFG:()=>by,_9s:()=>Cf,czy:()=>Gg,WPN:()=>hd,kdw:()=>fu,C4Q:()=>rh,NYb:()=>QR,giA:()=>qC,RxE:()=>VC,c1b:()=>lh,gXe:()=>Fc,mal:()=>hm,L39:()=>fO,EWP:()=>mO,a0P:()=>wO,Ol2:()=>Hr,w6W:()=>Ww,oH4:()=>oA,SmG:()=>yP,Rfq:()=>pc,WQX:()=>Br,QuC:()=>Mr,EmA:()=>No,fpN:()=>RP,HJs:()=>SO,N4e:()=>xh,vPA:()=>Qr,O8t:()=>gO,H3F:()=>GC,zAP:()=>NA,H8p:()=>Hf,KH2:()=>km,TgB:()=>pl,wOt:()=>Or,WHO:()=>WC,e01:()=>XC,lNU:()=>Ys,h9k:()=>b0,$MX:()=>Gp,ZF7:()=>Jd,Kcf:()=>B1,e5t:()=>$1,UyX:()=>G1,cWb:()=>V1,osQ:()=>z1,H5H:()=>gS,mq5:()=>sT,JZv:()=>lo,LfX:()=>ws,plB:()=>ju,jNT:()=>FS,zjR:()=>KC,TL$:()=>yE,Tbb:()=>po,rcV:()=>Kc,Vt3:()=>qs,GFd:()=>Z_,OA$:()=>Sc,Jv_:()=>gC,aNF:()=>yC,R7$:()=>Kg,BMQ:()=>rS,AVh:()=>cS,wni:()=>zT,VBU:()=>Fe,FsC:()=>kn,jDH:()=>zr,G2t:()=>li,$C:()=>St,EJ8:()=>dr,rXU:()=>Ou,nrm:()=>pS,eu8:()=>mS,bVm:()=>ub,qex:()=>cb,k0s:()=>lb,j41:()=>ab,RV6:()=>nT,xGo:()=>fg,KVO:()=>hi,kS0:()=>zh,QTQ:()=>j0,bIt:()=>_S,lsd:()=>WT,XpG:()=>RT,SdG:()=>OT,NAR:()=>PT,Y8G:()=>aS,lJ4:()=>bC,mGM:()=>HT,sdS:()=>XT,Njj:()=>rc,eBV:()=>eg,B4B:()=>Ug,n$t:()=>w0,Aen:()=>ru,DNE:()=>sl,EFF:()=>rC,JRh:()=>SS,SpI:()=>pb,Lme:()=>ES,DH7:()=>hC,mxI:()=>TS,R50:()=>MS,GBs:()=>$T});let F=null,Et=!1,Jt=1;const l=Symbol("SIGNAL");function ve(n){const i=F;return F=n,i}const b={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function w(n){if(Et)throw new Error("");if(null===F)return;F.consumerOnSignalRead(n);const i=F.nextProducerIndex++;X(F),i<F.producerNode.length&&F.producerNode[i]!==n&&k(F)&&S(F.producerNode[i],F.producerIndexOfThis[i]),F.producerNode[i]!==n&&(F.producerNode[i]=n,F.producerIndexOfThis[i]=k(F)?E(n,F,i):0),F.producerLastReadVersion[i]=n.version}function D(n){if((!k(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Jt)){if(!n.producerMustRecompute(n)&&!g(n))return n.dirty=!1,void(n.lastCleanEpoch=Jt);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Jt}}function d(n){if(void 0===n.liveConsumerNode)return;const i=Et;Et=!0;try{for(const o of n.liveConsumerNode)o.dirty||h(o)}finally{Et=i}}function f(){var n;return!1!==(null===(n=F)||void 0===n?void 0:n.consumerAllowSignalWrites)}function h(n){var i;n.dirty=!0,d(n),null===(i=n.consumerMarkedDirty)||void 0===i||i.call(n,n)}function p(n){return n&&(n.nextProducerIndex=0),ve(n)}function m(n,i){if(ve(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(k(n))for(let o=n.nextProducerIndex;o<n.producerNode.length;o++)S(n.producerNode[o],n.producerIndexOfThis[o]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function g(n){X(n);for(let i=0;i<n.producerNode.length;i++){const o=n.producerNode[i],c=n.producerLastReadVersion[i];if(c!==o.version||(D(o),c!==o.version))return!0}return!1}function x(n){if(X(n),k(n))for(let i=0;i<n.producerNode.length;i++)S(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function E(n,i,o){if(Y(n),0===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)n.producerIndexOfThis[c]=E(n.producerNode[c],n,c);return n.liveConsumerIndexOfThis.push(o),n.liveConsumerNode.push(i)-1}function S(n,i){if(Y(n),1===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)S(n.producerNode[c],n.producerIndexOfThis[c]);const o=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[o],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[o],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const c=n.liveConsumerIndexOfThis[i],y=n.liveConsumerNode[i];X(y),y.producerIndexOfThis[c]=i}}function k(n){var i,o;return n.consumerIsAlwaysLive||(null!==(i=null==n||null===(o=n.liveConsumerNode)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0}function X(n){var i,o,c;null!==(i=n.producerNode)&&void 0!==i||(n.producerNode=[]),null!==(o=n.producerIndexOfThis)&&void 0!==o||(n.producerIndexOfThis=[]),null!==(c=n.producerLastReadVersion)&&void 0!==c||(n.producerLastReadVersion=[])}function Y(n){var i,o;null!==(i=n.liveConsumerNode)&&void 0!==i||(n.liveConsumerNode=[]),null!==(o=n.liveConsumerIndexOfThis)&&void 0!==o||(n.liveConsumerIndexOfThis=[])}function G(n){return void 0!==n.producerNode}const ee=Symbol("UNSET"),H=Symbol("COMPUTING"),re=Symbol("ERRORED"),Z={...b,value:ee,dirty:!0,error:null,equal:j,producerMustRecompute:n=>n.value===ee||n.value===H,producerRecomputeValue(n){if(n.value===H)throw new Error("Detected cycle in computations.");const i=n.value;n.value=H;const o=p(n);let c;try{c=n.computation()}catch(y){c=re,n.error=y}finally{m(n,o)}i!==ee&&i!==re&&c!==re&&n.equal(i,c)?n.value=i:(n.value=c,n.version++)}};let xe=function _e(){throw new Error};function oe(){xe()}let ne=null;function et(n,i){f()||oe(),n.equal(n.value,i)||(n.value=i,function Le(n){var i;n.version++,function I(){Jt++}(),d(n),null===(i=ne)||void 0===i||i()}(n))}const ge={...b,equal:j,value:void 0};var Vi,dt=je(4412),Rt=je(1413),Bt=je(8359),lt=je(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Ys="https://g.co/ng/security#xss";class Or extends Error{constructor(i,o){super(function na(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function to(n){return{toString:n}.toString()}const Na="__parameters__";function Ll(n,i,o){return to(()=>{const c=function Zl(n){return function(...o){if(n){const c=n(...o);for(const y in c)this[y]=c[y]}}}(i);function y(...P){if(this instanceof y)return c.apply(this,P),this;const $=new y(...P);return ue.annotation=$,ue;function ue(we,ze,st){const yt=we.hasOwnProperty(Na)?we[Na]:Object.defineProperty(we,Na,{value:[]})[Na];for(;yt.length<=st;)yt.push(null);return(yt[st]=yt[st]||[]).push($),we}}return o&&(y.prototype=Object.create(o.prototype)),y.prototype.ngMetadataName=n,y.annotationCls=y,y})}const lo=globalThis;function xs(n){for(let i in n)if(n[i]===xs)return i;throw Error("Could not find renamed property on target object.")}function kl(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function po(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(po).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Nl(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ja=xs({__forward_ref__:xs});function pc(n){return n.__forward_ref__=pc,n.toString=function(){return po(this())},n}function ii(n){return Fa(n)?n():n}function Fa(n){return"function"==typeof n&&n.hasOwnProperty(ja)&&n.__forward_ref__===pc}function zr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function li(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ni(n){return mo(n,go)||mo(n,Ps)}function ws(n){return null!==Ni(n)}function mo(n,i){return n.hasOwnProperty(i)?n[i]:null}function Ro(n){return n&&(n.hasOwnProperty(zo)||n.hasOwnProperty(Bs))?n[zo]:null}const go=xs({\u0275prov:xs}),zo=xs({\u0275inj:xs}),Ps=xs({ngInjectableDef:xs}),Bs=xs({ngInjectorDef:xs});class Zr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=zr({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function jl(n){return n&&!!n.\u0275providers}const _l=xs({\u0275cmp:xs}),bd=xs({\u0275dir:xs}),du=xs({\u0275pipe:xs}),Fl=xs({\u0275mod:xs}),Ul=xs({\u0275fac:xs}),mc=xs({__NG_ELEMENT_ID__:xs}),xd=xs({__NG_ENV_ID__:xs});function Hi(n){return"string"==typeof n?n:null==n?"":String(n)}function Uu(n,i){throw new Or(-201,!1)}var hs=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(hs||{});let Da;function Ql(){return Da}function ha(n){const i=Da;return Da=n,i}function no(n,i,o){const c=Ni(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&hs.Optional?null:void 0!==i?i:void Uu()}const Se={},Ze="__NG_DI_FLAG__",Zt="ngTempTokenPath",Pt=/\n/gm,mt="__source";let Ir;function Ei(n){const i=Ir;return Ir=n,i}function ns(n,i=hs.Default){if(void 0===Ir)throw new Or(-203,!1);return null===Ir?no(n,void 0,i):Ir.get(n,i&hs.Optional?null:void 0,i)}function hi(n,i=hs.Default){return(Ql()||ns)(ii(n),i)}function Br(n,i=hs.Default){return hi(n,Ws(i))}function Ws(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fa(n){const i=[];for(let o=0;o<n.length;o++){const c=ii(n[o]);if(Array.isArray(c)){if(0===c.length)throw new Or(900,!1);let y,P=hs.Default;for(let $=0;$<c.length;$++){const ue=c[$],we=xa(ue);"number"==typeof we?-1===we?y=ue.token:P|=we:y=ue}i.push(hi(y,P))}else i.push(hi(c))}return i}function ro(n,i){return n[Ze]=i,n.prototype[Ze]=i,n}function xa(n){return n[Ze]}const bo=ro(Ll("Optional"),8),fu=ro(Ll("SkipSelf"),4);function xl(n,i){return n.hasOwnProperty(Ul)?n[Ul]:null}function Ua(n,i){n.forEach(o=>Array.isArray(o)?Ua(o,i):i(o))}function mh(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Nc(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Mi(n,i,o){let c=Ia(n,i);return c>=0?n[1|c]=o:(c=~c,function Bu(n,i,o,c){let y=n.length;if(y==i)n.push(o,c);else if(1===y)n.push(c,n[0]),n[0]=o;else{for(y--,n.push(n[y-1],n[y]);y>i;)n[y]=n[y-2],y--;n[i]=o,n[i+1]=c}}(n,c,i,o)),c}function jc(n,i){const o=Ia(n,i);if(o>=0)return n[1|o]}function Ia(n,i){return function gh(n,i,o){let c=0,y=n.length>>o;for(;y!==c;){const P=c+(y-c>>1),$=n[P<<o];if(i===$)return P<<o;$>i?y=P:c=P+1}return~(y<<o)}(n,i,1)}const ra={},fs=[],To=new Zr(""),yh=new Zr("",-1),vh=new Zr("");class Za{get(i,o=Se){if(o===Se){const c=new Error(`NullInjectorError: No provider for ${po(i)}!`);throw c.name="NullInjectorError",c}return o}}var mu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mu||{}),Fc=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fc||{}),gc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gc||{});function Vu(n,i,o){let c=n.length;for(;;){const y=n.indexOf(i,o);if(-1===y)return y;if(0===y||n.charCodeAt(y-1)<=32){const P=i.length;if(y+P===c||n.charCodeAt(y+P)<=32)return y}o=y+1}}function wl(n,i,o){let c=0;for(;c<o.length;){const y=o[c];if("number"==typeof y){if(0!==y)break;c++;const P=o[c++],$=o[c++],ue=o[c++];n.setAttribute(i,$,ue,P)}else{const P=y,$=o[++c];zu(P)?n.setProperty(i,P,$):n.setAttribute(i,P,$),c++}}return c}function Gu(n){return 3===n||4===n||6===n}function zu(n){return 64===n.charCodeAt(0)}function gu(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let c=0;c<i.length;c++){const y=i[c];"number"==typeof y?o=y:0===o||Vf(n,o,y,null,-1===o||2===o?i[++c]:null)}}return n}function Vf(n,i,o,c,y){let P=0,$=n.length;if(-1===i)$=-1;else for(;P<n.length;){const ue=n[P++];if("number"==typeof ue){if(ue===i){$=-1;break}if(ue>i){$=P-1;break}}}for(;P<n.length;){const ue=n[P];if("number"==typeof ue)break;if(ue===o){if(null===c)return void(null!==y&&(n[P+1]=y));if(c===n[P+1])return void(n[P+2]=y)}P++,null!==c&&P++,null!==y&&P++}-1!==$&&(n.splice($,0,i),P=$+1),n.splice(P++,0,o),null!==c&&n.splice(P++,0,c),null!==y&&n.splice(P++,0,y)}const _h="ng-template";function Gf(n,i,o,c){let y=0;if(c){for(;y<i.length&&"string"==typeof i[y];y+=2)if("class"===i[y]&&-1!==Vu(i[y+1].toLowerCase(),o,0))return!0}else if(Sd(n))return!1;if(y=i.indexOf(1,y),y>-1){let P;for(;++y<i.length&&"string"==typeof(P=i[y]);)if(P.toLowerCase()===o)return!0}return!1}function Sd(n){return 4===n.type&&n.value!==_h}function zf(n,i,o){return i===(4!==n.type||o?n.value:_h)}function Um(n,i,o){let c=4;const y=n.attrs,P=null!==y?function yc(n){for(let i=0;i<n.length;i++)if(Gu(n[i]))return i;return n.length}(y):0;let $=!1;for(let ue=0;ue<i.length;ue++){const we=i[ue];if("number"!=typeof we){if(!$)if(4&c){if(c=2|1&c,""!==we&&!zf(n,we,o)||""===we&&1===i.length){if(Sa(c))return!1;$=!0}}else if(8&c){if(null===y||!Gf(n,y,we,o)){if(Sa(c))return!1;$=!0}}else{const ze=i[++ue],st=Ed(we,y,Sd(n),o);if(-1===st){if(Sa(c))return!1;$=!0;continue}if(""!==ze){let yt;if(yt=st>P?"":y[st+1].toLowerCase(),2&c&&ze!==yt){if(Sa(c))return!1;$=!0}}}}else{if(!$&&!Sa(c)&&!Sa(we))return!1;if($&&Sa(we))continue;$=!1,c=we|1&c}}return Sa(c)||$}function Sa(n){return!(1&n)}function Ed(n,i,o,c){if(null===i)return-1;let y=0;if(c||!o){let P=!1;for(;y<i.length;){const $=i[y];if($===n)return y;if(3===$||6===$)P=!0;else{if(1===$||2===$){let ue=i[++y];for(;"string"==typeof ue;)ue=i[++y];continue}if(4===$)break;if(0===$){y+=4;continue}}y+=P?1:2}return-1}return function $f(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===i)return o;o++}return-1}(i,n)}function Qs(n,i,o=!1){for(let c=0;c<i.length;c++)if(Um(n,i[c],o))return!0;return!1}function vc(n,i){e:for(let o=0;o<i.length;o++){const c=i[o];if(n.length===c.length){for(let y=0;y<n.length;y++)if(n[y]!==c[y])continue e;return!0}}return!1}function yu(n,i){return n?":not("+i.trim()+")":i}function $u(n){let i=n[0],o=1,c=2,y="",P=!1;for(;o<n.length;){let $=n[o];if("string"==typeof $)if(2&c){const ue=n[++o];y+="["+$+(ue.length>0?'="'+ue+'"':"")+"]"}else 8&c?y+="."+$:4&c&&(y+=" "+$);else""!==y&&!Sa($)&&(i+=yu(P,y),y=""),c=$,P=P||!Sa(c);o++}return""!==y&&(i+=yu(P,y)),i}function Fe(n){return to(()=>{var i;const o=Co(n),c={...o,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:null!==(i=n.signals)&&void 0!==i&&i,data:n.data||{},encapsulation:n.encapsulation||Fc.Emulated,styles:n.styles||fs,_:null,schemas:n.schemas||null,tView:null,id:""};Rs(c);const y=n.dependencies;return c.directiveDefs=io(y,!1),c.pipeDefs=io(y,!0),c.id=function cl(n){let i=0;const o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const y of o)i=Math.imul(31,i)+y.charCodeAt(0)|0;return i+=2147483648,"c"+i}(c),c})}function Ee(n){return An(n)||Rr(n)}function $e(n){return null!==n}function St(n){return to(()=>({type:n.type,bootstrap:n.bootstrap||fs,declarations:n.declarations||fs,imports:n.imports||fs,exports:n.exports||fs,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Lt(n,i){if(null==n)return ra;const o={};for(const y in n)if(n.hasOwnProperty(y)){const P=n[y];let $,ue,we=gc.None;var c;Array.isArray(P)?(we=P[0],$=P[1],ue=null!==(c=P[2])&&void 0!==c?c:$):($=P,ue=P),i?(o[$]=we!==gc.None?[y,we]:y,i[$]=ue):o[$]=y}return o}function kn(n){return to(()=>{const i=Co(n);return Rs(i),i})}function dr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function An(n){return n[_l]||null}function Rr(n){return n[bd]||null}function fi(n){return n[du]||null}function Mr(n){const i=An(n)||Rr(n)||fi(n);return null!==i&&i.standalone}function Jr(n,i){const o=n[Fl]||null;if(!o&&!0===i)throw new Error(`Type ${po(n)} does not have '\u0275mod' property.`);return o}function Co(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||ra,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||fs,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lt(n.inputs,i),outputs:Lt(n.outputs),debugInfo:null}}function Rs(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function io(n,i){if(!n)return null;const o=i?fi:Ee;return()=>("function"==typeof n?n():n).map(c=>o(c)).filter($e)}function No(n){return{\u0275providers:n}}function Uc(...n){return{\u0275providers:Md(0,n),\u0275fromNgModule:!0}}function Md(n,...i){const o=[],c=new Set;let y;const P=$=>{o.push($)};return Ua(i,$=>{const ue=$;Gl(ue,P,[],c)&&(y||(y=[]),y.push(ue))}),void 0!==y&&jo(y,P),o}function jo(n,i){for(let o=0;o<n.length;o++){const{ngModule:c,providers:y}=n[o];Ls(y,P=>{i(P,c)})}}function Gl(n,i,o,c){if(!(n=ii(n)))return!1;let y=null,P=Ro(n);const $=!P&&An(n);if(P||$){if($&&!$.standalone)return!1;y=n}else{const we=n.ngModule;if(P=Ro(we),!P)return!1;y=we}const ue=c.has(y);if($){if(ue)return!1;if(c.add(y),$.dependencies){const we="function"==typeof $.dependencies?$.dependencies():$.dependencies;for(const ze of we)Gl(ze,i,o,c)}}else{if(!P)return!1;{if(null!=P.imports&&!ue){let ze;c.add(y);try{Ua(P.imports,st=>{Gl(st,i,o,c)&&(ze||(ze=[]),ze.push(st))})}finally{}void 0!==ze&&jo(ze,i)}if(!ue){const ze=xl(y)||(()=>new y);i({provide:y,useFactory:ze,deps:fs},y),i({provide:vh,useValue:y,multi:!0},y),i({provide:To,useValue:()=>hi(y),multi:!0},y)}const we=P.providers;if(null!=we&&!ue){const ze=n;Ls(we,st=>{i(st,ze)})}}}return y!==n&&void 0!==n.providers}function Ls(n,i){for(let o of n)jl(o)&&(o=o.\u0275providers),Array.isArray(o)?Ls(o,i):i(o)}const nE=xs({provide:String,useValue:xs});function Wy(n){return null!==n&&"object"==typeof n&&nE in n}function vu(n){return"function"==typeof n}const Hf=new Zr(""),Bm={},_i={};let Vm;function Qa(){return void 0===Vm&&(Vm=new Za),Vm}class ul{}class ec extends ul{get destroyed(){return this._destroyed}constructor(i,o,c,y){super(),this.parent=o,this.source=c,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(i,$=>this.processProvider($)),this.records.set(yh,Hu(void 0,this)),y.has("environment")&&this.records.set(ul,Hu(void 0,this));const P=this.records.get(Hf);null!=P&&"string"==typeof P.value&&this.scopes.add(P.value),this.injectorDefTypes=new Set(this.get(vh,fs,hs.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=ve(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=Ei(this),c=ha(void 0);try{return i()}finally{Ei(o),ha(c)}}get(i,o=Se,c=hs.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(xd))return i[xd](this);c=Ws(c);const P=Ei(this),$=ha(void 0);try{if(!(c&hs.SkipSelf)){let we=this.records.get(i);if(void 0===we){const ze=function Xy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Zr}(i)&&Ni(i);we=ze&&this.injectableDefInScope(ze)?Hu(el(i),Bm):null,this.records.set(i,we)}if(null!=we)return this.hydrate(i,we)}return(c&hs.Self?Qa():this.parent).get(i,o=c&hs.Optional&&o===Se?null:o)}catch(ue){if("NullInjectorError"===ue.name){if((ue[Zt]=ue[Zt]||[]).unshift(po(i)),P)throw ue;return function wa(n,i,o,c){const y=n[Zt];throw i[mt]&&y.unshift(i[mt]),n.message=function qa(n,i,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let y=po(i);if(Array.isArray(i))y=i.map(po).join(" -> ");else if("object"==typeof i){let P=[];for(let $ in i)if(i.hasOwnProperty($)){let ue=i[$];P.push($+":"+("string"==typeof ue?JSON.stringify(ue):po(ue)))}y=`{${P.join(", ")}}`}return`${o}${c?"("+c+")":""}[${y}]: ${n.replace(Pt,"\n  ")}`}("\n"+n.message,y,o,c),n.ngTokenPath=y,n[Zt]=null,n}(ue,i,"R3InjectorError",this.source)}throw ue}finally{ha($),Ei(P)}}resolveInjectorInitializers(){const i=ve(null),o=Ei(this),c=ha(void 0);try{const P=this.get(To,fs,hs.Self);for(const $ of P)$()}finally{Ei(o),ha(c),ve(i)}}toString(){const i=[],o=this.records;for(const c of o.keys())i.push(po(c));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Or(205,!1)}processProvider(i){let o=vu(i=ii(i))?i:ii(i&&i.provide);const c=function Ea(n){return Wy(n)?Hu(void 0,n.useValue):Hu(Zi(n),Bm)}(i);if(!vu(i)&&!0===i.multi){let y=this.records.get(o);y||(y=Hu(void 0,Bm,!0),y.factory=()=>fa(y.multi),this.records.set(o,y)),o=i,y.multi.push(i)}this.records.set(o,c)}hydrate(i,o){const c=ve(null);try{return o.value===Bm&&(o.value=_i,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Wf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{ve(c)}}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ii(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function el(n){const i=Ni(n),o=null!==i?i.factory:xl(n);if(null!==o)return o;if(n instanceof Zr)throw new Or(204,!1);if(n instanceof Function)return function bh(n){if(n.length>0)throw new Or(204,!1);const o=function Mo(n){return n&&(n[go]||n[Ps])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Or(204,!1)}function Zi(n,i,o){let c;if(vu(n)){const y=ii(n);return xl(y)||el(y)}if(Wy(n))c=()=>ii(n.useValue);else if(function Pb(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...fa(n.deps||[]));else if(function Rb(n){return!(!n||!n.useExisting)}(n))c=()=>hi(ii(n.useExisting));else{const y=ii(n&&(n.useClass||n.provide));if(!function Wu(n){return!!n.deps}(n))return xl(y)||el(y);c=()=>new y(...fa(n.deps))}return c}function Hu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Td(n,i){for(const o of n)Array.isArray(o)?Td(o,i):o&&jl(o)?Td(o.\u0275providers,i):i(o)}function xh(n,i){n instanceof ec&&n.assertNotDestroyed();const c=Ei(n),y=ha(void 0);try{return i()}finally{Ei(c),ha(y)}}function wh(){return void 0!==Ql()||null!=function zi(){return Ir}()}const xo=0,jr=1,ki=2,Zo=3,co=4,$o=5,ia=6,Xu=7,so=8,sa=9,Ma=10,qi=11,qu=12,Kf=13,_u=14,Ao=15,bc=16,oa=17,Va=18,Ku=19,Yu=20,zl=21,xc=22,Ra=23,Ti=25,Zu=1,El=7,Vc=9,Ho=10;var Id=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Id||{});function pa(n){return Array.isArray(n)&&"object"==typeof n[Zu]}function Ga(n){return Array.isArray(n)&&!0===n[Zu]}function Rd(n){return!!(4&n.flags)}function wc(n){return n.componentOffset>-1}function Sh(n){return!(1&~n.flags)}function tc(n){return!!n.template}function Pd(n){return!!(512&n[ki])}class Vb{constructor(i,o,c){this.previousValue=i,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function rv(n,i,o,c){null!==i?i.applyValueToInputSignal(i,c):n[o]=c}function Sc(){return wu}function wu(n){return n.type.prototype.ngOnChanges&&(n.setInput=ep),Qf}function Qf(){const n=iv(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===ra)n.previous=i;else for(let c in i)o[c]=i[c];n.current=null,this.ngOnChanges(i)}}function ep(n,i,o,c,y){const P=this.declaredInputs[c],$=iv(n)||function Gb(n,i){return n[tp]=i}(n,{previous:ra,current:null}),ue=$.current||($.current={}),we=$.previous,ze=we[P];ue[P]=new Vb(ze&&ze.currentValue,o,we===ra),rv(n,i,y,o)}Sc.ngInherit=!0;const tp="__ngSimpleChanges__";function iv(n){return n[tp]||null}const Ec=function(n,i,o){};function vs(n){for(;Array.isArray(n);)n=n[xo];return n}function Od(n,i){return vs(i[n])}function nl(n,i){return vs(i[n.index])}function aa(n,i){return n.data[i]}function Ml(n,i){const o=i[n];return pa(o)?o:o[xo]}function Ym(n){return!(128&~n[ki])}function rl(n,i){return null==i?null:n[i]}function Ah(n){n[oa]=0}function Zm(n){1024&n[ki]||(n[ki]|=1024,Ym(n)&&Ih(n))}function Su(n){var i;return!!(9216&n[ki]||null!==(i=n[Ra])&&void 0!==i&&i.dirty)}function Dh(n){var i;null===(i=n[Ma].changeDetectionScheduler)||void 0===i||i.notify(7),64&n[ki]&&(n[ki]|=1024),Su(n)&&Ih(n)}function Ih(n){var i;null===(i=n[Ma].changeDetectionScheduler)||void 0===i||i.notify(0);let o=Tc(n);for(;null!==o&&!(8192&o[ki])&&(o[ki]|=8192,Ym(o));)o=Tc(o)}function nc(n,i){if(!(256&~n[ki]))throw new Or(911,!1);null===n[zl]&&(n[zl]=[]),n[zl].push(i)}function Tc(n){const i=n[Zo];return Ga(i)?i[Zo]:i}const Wi={lFrame:up(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Eu=!1;function Nd(){return Wi.bindingsEnabled}function Mu(){return null!==Wi.skipHydrationRootTNode}function mr(){return Wi.lFrame.lView}function _s(){return Wi.lFrame.tView}function eg(n){return Wi.lFrame.contextLView=n,n[so]}function rc(n){return Wi.lFrame.contextLView=null,n}function Xs(){let n=sv();for(;null!==n&&64===n.type;)n=n.parent;return n}function sv(){return Wi.lFrame.currentTNode}function hl(n,i){const o=Wi.lFrame;o.currentTNode=n,o.isParent=i}function Rh(){return Wi.lFrame.isParent}function Ph(){Wi.lFrame.isParent=!1}function av(){return Eu}function lv(n){Eu=n}function ic(){return Wi.lFrame.bindingIndex++}function zc(n){const i=Wi.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Wb(n,i){const o=Wi.lFrame;o.bindingIndex=o.bindingRootIndex=n,ng(i)}function ng(n){Wi.lFrame.currentDirectiveIndex=n}function lp(){return Wi.lFrame.currentQueryIndex}function Lh(n){Wi.lFrame.currentQueryIndex=n}function cp(n){const i=n[jr];return 2===i.type?i.declTNode:1===i.type?n[$o]:null}function dv(n,i,o){if(o&hs.SkipSelf){let y=i,P=n;for(;!(y=y.parent,null!==y||o&hs.Host||(y=cp(P),null===y||(P=P[_u],10&y.type))););if(null===y)return!1;i=y,n=P}const c=Wi.lFrame=kh();return c.currentTNode=i,c.lView=n,!0}function jd(n){const i=kh(),o=n[jr];Wi.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function kh(){const n=Wi.lFrame,i=null===n?null:n.child;return null===i?up(n):i}function up(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function dp(){const n=Wi.lFrame;return Wi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fd=dp;function Nh(){const n=dp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ga(){return Wi.lFrame.selectedIndex}function Cc(n){Wi.lFrame.selectedIndex=n}function oo(){const n=Wi.lFrame;return aa(n.tView,n.selectedIndex)}let ig=!0;function sc(){return ig}function fl(n){ig=n}function fp(n,i){for(let ze=i.directiveStart,st=i.directiveEnd;ze<st;ze++){const nn=n.data[ze].type.prototype,{ngAfterContentInit:pn,ngAfterContentChecked:dn,ngAfterViewInit:Qn,ngAfterViewChecked:Er,ngOnDestroy:kr}=nn;var o,c,y,P,$,ue,we;pn&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-ze,pn),dn&&((null!==(c=n.contentHooks)&&void 0!==c?c:n.contentHooks=[]).push(ze,dn),(null!==(y=n.contentCheckHooks)&&void 0!==y?y:n.contentCheckHooks=[]).push(ze,dn)),Qn&&(null!==(P=n.viewHooks)&&void 0!==P?P:n.viewHooks=[]).push(-ze,Qn),Er&&((null!==($=n.viewHooks)&&void 0!==$?$:n.viewHooks=[]).push(ze,Er),(null!==(ue=n.viewCheckHooks)&&void 0!==ue?ue:n.viewCheckHooks=[]).push(ze,Er)),null!=kr&&(null!==(we=n.destroyHooks)&&void 0!==we?we:n.destroyHooks=[]).push(ze,kr)}}function pp(n,i,o){fv(n,i,3,o)}function mp(n,i,o,c){(3&n[ki])===o&&fv(n,i,o,c)}function sg(n,i){let o=n[ki];(3&o)===i&&(o&=16383,o+=1,n[ki]=o)}function fv(n,i,o,c){const P=null!=c?c:-1,$=i.length-1;let ue=0;for(let we=void 0!==c?65535&n[oa]:0;we<$;we++)if("number"==typeof i[we+1]){if(ue=i[we],null!=c&&ue>=c)break}else i[we]<0&&(n[oa]+=65536),(ue<P||-1==P)&&(Kb(n,o,i,we),n[oa]=(4294901760&n[oa])+we+2),we++}function pv(n,i){Ec(4,n,i);const o=ve(null);try{i.call(n)}finally{ve(o),Ec(5,n,i)}}function Kb(n,i,o,c){const y=o[c]<0,P=o[c+1],ue=n[y?-o[c]:o[c]];y?n[ki]>>14<n[oa]>>16&&(3&n[ki])===i&&(n[ki]+=16384,pv(ue,P)):pv(ue,P)}const Bd=-1;class jh{constructor(i,o,c){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}const gp={};class Ac{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,c){c=Ws(c);const y=this.injector.get(i,gp,c);return y!==gp||o===gp?y:this.parentInjector.get(i,o,c)}}function Gd(n){return n!==Bd}function Uh(n){return 32767&n}function Vh(n,i){let o=function Bh(n){return n>>16}(n),c=i;for(;o>0;)c=c[_u],o--;return c}let yp=!0;function Tu(n){const i=yp;return yp=n,i}const vv=255,Dc=5;let _v=0;const oc={};function vp(n,i){const o=_p(n,i);if(-1!==o)return o;const c=i[jr];c.firstCreatePass&&(n.injectorIndex=i.length,lg(c.data,n),lg(i,null),lg(c.blueprint,null));const y=nd(n,i),P=n.injectorIndex;if(Gd(y)){const $=Uh(y),ue=Vh(y,i),we=ue[jr].data;for(let ze=0;ze<8;ze++)i[P+ze]=ue[$+ze]|we[$+ze]}return i[P+8]=y,P}function lg(n,i){n.push(0,0,0,0,0,0,0,0,i)}function _p(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function nd(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,y=i;for(;null!==y;){if(c=xv(y),null===c)return Bd;if(o++,y=y[_u],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return Bd}function rd(n,i,o){!function ag(n,i,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(mc)&&(c=o[mc]),null==c&&(c=o[mc]=_v++);const y=c&vv;i.data[n+(y>>Dc)]|=1<<y}(n,i,o)}function bp(n,i,o){if(o&hs.Optional||void 0!==n)return n;Uu()}function bv(n,i,o,c){if(o&hs.Optional&&void 0===c&&(c=null),!(o&(hs.Self|hs.Host))){const y=n[sa],P=ha(void 0);try{return y?y.get(i,c,o&hs.Optional):no(i,c,o&hs.Optional)}finally{ha(P)}}return bp(c,0,o)}function Gh(n,i,o,c=hs.Default,y){if(null!==n){if(2048&i[ki]&&!(c&hs.Self)){const $=function Qb(n,i,o,c,y){let P=n,$=i;for(;null!==P&&null!==$&&2048&$[ki]&&!(512&$[ki]);){const ue=xp(P,$,o,c|hs.Self,oc);if(ue!==oc)return ue;let we=P.parent;if(!we){const ze=$[Yu];if(ze){const st=ze.get(o,oc,c);if(st!==oc)return st}we=xv($),$=$[_u]}P=we}return y}(n,i,o,c,oc);if($!==oc)return $}const P=xp(n,i,o,c,oc);if(P!==oc)return P}return bv(i,o,c,y)}function xp(n,i,o,c,y){const P=function Jb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(mc)?n[mc]:void 0;return"number"==typeof i?i>=0?i&vv:ac:i}(o);if("function"==typeof P){if(!dv(i,n,c))return c&hs.Host?bp(y,0,c):bv(i,o,c,y);try{let $;if($=P(c),null!=$||c&hs.Optional)return $;Uu()}finally{Fd()}}else if("number"==typeof P){let $=null,ue=_p(n,i),we=Bd,ze=c&hs.Host?i[Ao][$o]:null;for((-1===ue||c&hs.SkipSelf)&&(we=-1===ue?nd(n,i):i[ue+8],we!==Bd&&hg(c,!1)?($=i[jr],ue=Uh(we),i=Vh(we,i)):ue=-1);-1!==ue;){const st=i[jr];if(dg(P,ue,st.data)){const yt=ug(ue,i,o,$,c,ze);if(yt!==oc)return yt}we=i[ue+8],we!==Bd&&hg(c,i[jr].data[ue+8]===ze)&&dg(P,ue,i)?($=st,ue=Uh(we),i=Vh(we,i)):ue=-1}}return y}function ug(n,i,o,c,y,P){const $=i[jr],ue=$.data[n+8],st=zd(ue,$,o,null==c?wc(ue)&&yp:c!=$&&!!(3&ue.type),y&hs.Host&&P===ue);return null!==st?$c(i,$,st,ue):oc}function zd(n,i,o,c,y){const P=n.providerIndexes,$=i.data,ue=1048575&P,we=n.directiveStart,st=P>>20,nn=y?ue+st:n.directiveEnd;for(let pn=c?ue:ue+st;pn<nn;pn++){const dn=$[pn];if(pn<we&&o===dn||pn>=we&&dn.type===o)return pn}if(y){const pn=$[we];if(pn&&tc(pn)&&pn.type===o)return we}return null}function $c(n,i,o,c){let y=n[o];const P=i.data;if(function Yb(n){return n instanceof jh}(y)){const $=y;$.resolving&&function Bl(n,i){throw i&&i.join(" > "),new Or(-200,n)}(function Os(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Hi(n)}(P[o]));const ue=Tu($.canSeeViewProviders);$.resolving=!0;const ze=$.injectImpl?ha($.injectImpl):null;dv(n,c,hs.Default);try{y=n[o]=$.factory(void 0,P,n,c),i.firstCreatePass&&o>=c.directiveStart&&function qb(n,i,o){const{ngOnChanges:c,ngOnInit:y,ngDoCheck:P}=i.type.prototype;if(c){var $,ue;const yt=wu(i);(null!==($=o.preOrderHooks)&&void 0!==$?$:o.preOrderHooks=[]).push(n,yt),(null!==(ue=o.preOrderCheckHooks)&&void 0!==ue?ue:o.preOrderCheckHooks=[]).push(n,yt)}var we,ze,st;y&&(null!==(we=o.preOrderHooks)&&void 0!==we?we:o.preOrderHooks=[]).push(0-n,y),P&&((null!==(ze=o.preOrderHooks)&&void 0!==ze?ze:o.preOrderHooks=[]).push(n,P),(null!==(st=o.preOrderCheckHooks)&&void 0!==st?st:o.preOrderCheckHooks=[]).push(n,P))}(o,P[o],i)}finally{null!==ze&&ha(ze),Tu(ue),$.resolving=!1,Fd()}}return y}function dg(n,i,o){return!!(o[i+(n>>Dc)]&1<<n)}function hg(n,i){return!(n&hs.Self||n&hs.Host&&i)}class Fo{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,c){return Gh(this._tNode,this._lView,i,Ws(c),o)}}function ac(){return new Fo(Xs(),mr())}function fg(n){return to(()=>{const i=n.prototype.constructor,o=i[Ul]||pg(i),c=Object.prototype;let y=Object.getPrototypeOf(n.prototype).constructor;for(;y&&y!==c;){const P=y[Ul]||pg(y);if(P&&P!==o)return P;y=Object.getPrototypeOf(y)}return P=>new P})}function pg(n){return Fa(n)?()=>{const i=pg(ii(n));return i&&i()}:xl(n)}function xv(n){const i=n[jr],o=i.type;return 2===o?i.declTNode:1===o?n[$o]:null}function zh(n){return function cg(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const c=o.length;let y=0;for(;y<c;){const P=o[y];if(Gu(P))break;if(0===P)y+=2;else if("number"==typeof P)for(y++;y<c&&"string"==typeof o[y];)y++;else{if(P===i)return o[y+1];y+=2}}}return null}(Xs(),n)}function Tv(n,i=null,o=null,c){const y=lc(n,i,o,c);return y.resolveInjectorInitializers(),y}function lc(n,i=null,o=null,c,y=new Set){const P=[o||fs,Uc(n)];return c=c||("object"==typeof n?void 0:po(n)),new ec(P,i||Qa(),c||null,y)}class Uo{static create(i,o){if(Array.isArray(i))return Tv({name:""},o,i,"");{var c;const y=null!==(c=i.name)&&void 0!==c?c:"";return Tv({name:y},i.parent,i.providers,y)}}}(Vi=Uo).THROW_IF_NOT_FOUND=Se,Vi.NULL=new Za,Vi.\u0275prov=zr({token:Vi,providedIn:"any",factory:()=>hi(yh)}),Vi.__NG_ELEMENT_ID__=-1,new Zr("").__NG_ELEMENT_ID__=n=>{const i=Xs();if(null===i)throw new Or(204,!1);if(2&i.type)return i.value;if(n&hs.Optional)return null;throw new Or(204,!1)};function Cu(n){return n.ngOriginalError}let Hc=(()=>{var n;class i{}return(n=i).__NG_ELEMENT_ID__=o1,n.__NG_ENV_ID__=o=>o,i})();class s1 extends Hc{constructor(i){super(),this._lView=i}onDestroy(i){return nc(this._lView,i),()=>function kd(n,i){if(null===n[zl])return;const o=n[zl].indexOf(i);-1!==o&&n[zl].splice(o,1)}(this._lView,i)}}function o1(){return new s1(mr())}let pl=(()=>{var n;class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(n=i).\u0275prov=zr({token:n,providedIn:"root",factory:()=>new n}),i})();const Oo=class l1 extends Rt.B{constructor(i=!1){var o,c;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=i,wh()&&(this.destroyRef=null!==(o=Br(Hc,{optional:!0}))&&void 0!==o?o:void 0,this.pendingTasks=null!==(c=Br(pl,{optional:!0}))&&void 0!==c?c:void 0)}emit(i){const o=ve(null);try{super.next(i)}finally{ve(o)}}subscribe(i,o,c){let y=i,P=o||(()=>null),$=c;if(i&&"object"==typeof i){var ue,we,ze;const yt=i;y=null===(ue=yt.next)||void 0===ue?void 0:ue.bind(yt),P=null===(we=yt.error)||void 0===we?void 0:we.bind(yt),$=null===(ze=yt.complete)||void 0===ze?void 0:ze.bind(yt)}this.__isAsync&&(P=this.wrapInTimeout(P),y&&(y=this.wrapInTimeout(y)),$&&($=this.wrapInTimeout($)));const st=super.subscribe({next:y,error:P,complete:$});return i instanceof Bt.yU&&i.add(st),st}wrapInTimeout(i){return o=>{var c;const y=null===(c=this.pendingTasks)||void 0===c?void 0:c.add();setTimeout(()=>{var P;i(o),void 0!==y&&(null===(P=this.pendingTasks)||void 0===P||P.remove(y))})}}};function $l(...n){}function Cv(n){let i,o;function c(){n=$l;try{void 0!==o&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(o),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{n(),c()}),"function"==typeof requestAnimationFrame&&(o=requestAnimationFrame(()=>{n(),c()})),()=>c()}function Tl(n){return queueMicrotask(()=>n()),()=>{n=$l}}class Lo{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oo(!1),this.onMicrotaskEmpty=new Oo(!1),this.onStable=new Oo(!1),this.onError=new Oo(!1),typeof Zone>"u")throw new Or(908,!1);Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!c&&o,y.shouldCoalesceRunChangeDetection=c,y.callbackScheduled=!1,function c1(n){const i=()=>{!function uE(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{Cv(()=>{n.callbackScheduled=!1,Wc(n),n.isCheckStableRunning=!0,Av(n),n.isCheckStableRunning=!1})}),Wc(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,y,P,$,ue)=>{if(function Iv(n){return Rv(n,"__ignore_ng_zone__")}(ue))return o.invokeTask(y,P,$,ue);try{return Dv(n),o.invokeTask(y,P,$,ue)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||n.shouldCoalesceRunChangeDetection)&&i(),Sp(n)}},onInvoke:(o,c,y,P,$,ue,we)=>{try{return Dv(n),o.invoke(y,P,$,ue,we)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function _g(n){return Rv(n,"__scheduler_tick__")}(ue)&&i(),Sp(n)}},onHasTask:(o,c,y,P)=>{o.hasTask(y,P),c===y&&("microTask"==P.change?(n._hasPendingMicrotasks=P.microTask,Wc(n),Av(n)):"macroTask"==P.change&&(n.hasPendingMacrotasks=P.macroTask))},onHandleError:(o,c,y,P)=>(o.handleError(y,P),n.runOutsideAngular(()=>n.onError.emit(P)),!1)})}(y)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lo.isInAngularZone())throw new Or(909,!1)}static assertNotInAngularZone(){if(Lo.isInAngularZone())throw new Or(909,!1)}run(i,o,c){return this._inner.run(i,o,c)}runTask(i,o,c,y){const P=this._inner,$=P.scheduleEventTask("NgZoneEvent: "+y,i,wp,$l,$l);try{return P.runTask($,o,c)}finally{P.cancelTask($)}}runGuarded(i,o,c){return this._inner.runGuarded(i,o,c)}runOutsideAngular(i){return this._outer.run(i)}}const wp={};function Av(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wc(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Dv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Sp(n){n._nesting--,Av(n)}class Ep{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oo,this.onMicrotaskEmpty=new Oo,this.onStable=new Oo,this.onError=new Oo}run(i,o,c){return i.apply(o,c)}runGuarded(i,o,c){return i.apply(o,c)}runOutsideAngular(i){return i()}runTask(i,o,c,y){return i.apply(o,c)}}function Rv(n,i){var o;return!(!Array.isArray(n)||1!==n.length)&&!0===(null===(o=n[0])||void 0===o||null===(o=o.data)||void 0===o?void 0:o[i])}class cc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Cu(i);for(;o&&Cu(o);)o=Cu(o);return o||null}}const Wh=new Zr("",{providedIn:"root",factory:()=>{const n=Br(Lo),i=Br(cc);return o=>n.runOutsideAngular(()=>i.handleError(o))}});function Lv(){return Xd(Xs(),mr())}function Xd(n,i){return new Xh(nl(n,i))}let Xh=(()=>{class i{constructor(c){this.nativeElement=c}}return i.__NG_ELEMENT_ID__=Lv,i})();function kv(n){return n instanceof Xh?n.nativeElement:n}function xg(){return this._results[Symbol.iterator]()}class Xc{get changes(){var i;return null!==(i=this._changes)&&void 0!==i?i:this._changes=new Oo}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=Xc.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=xg)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){this.dirty=!1;const c=function zs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function ph(n,i,o){if(n.length!==i.length)return!1;for(let c=0;c<n.length;c++){let y=n[c],P=i[c];if(o&&(y=o(y),P=o(P)),P!==y)return!1}return!0}(this._results,c,o))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){var i;this.dirty=!0,null===(i=this._onDirty)||void 0===i||i.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Kh(n){return!(128&~n.flags)}const wg=new Map;let Tp=0;const Zh="__ngContext__";function za(n,i){pa(i)?(n[Zh]=i[Ku],function fE(n){wg.set(n[Ku],n)}(i)):n[Zh]=i}function Vv(n){return zv(n[qu])}function Gv(n){return zv(n[co])}function zv(n){for(;null!==n&&!Ga(n);)n=n[co];return n}let Ap;function yE(n){Ap=n}const Kd=new Zr("",{providedIn:"root",factory:()=>Yv}),Yv="ng",E1=new Zr(""),Dp=new Zr("",{providedIn:"platform",factory:()=>"unknown"}),Zv=new Zr("",{providedIn:"root",factory:()=>{var n;return(null===(n=function qc(){if(void 0!==Ap)return Ap;if(typeof document<"u")return document;throw new Or(210,!1)}().body)||void 0===n||null===(n=n.querySelector("[ngCspNonce]"))||void 0===n?void 0:n.getAttribute("ngCspNonce"))||null}});let A1=()=>null;function Jv(n,i,o=!1){return A1(n,i,o)}const o0=new Zr("",{providedIn:"root",factory:()=>!1});let Bp,Vp;function Zd(n){var i;return(null===(i=function Lg(){if(void 0===Bp&&(Bp=null,lo.trustedTypes))try{Bp=lo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bp}())||void 0===i?void 0:i.createHTML(n))||n}function d0(n){var i;return(null===(i=function kg(){if(void 0===Vp&&(Vp=null,lo.trustedTypes))try{Vp=lo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vp}())||void 0===i?void 0:i.createScriptURL(n))||n}class dd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ys})`}}class L1 extends dd{getTypeName(){return"HTML"}}class k1 extends dd{getTypeName(){return"Style"}}class N1 extends dd{getTypeName(){return"Script"}}class j1 extends dd{getTypeName(){return"URL"}}class F1 extends dd{getTypeName(){return"ResourceURL"}}function Kc(n){return n instanceof dd?n.changingThisBreaksApplicationSecurity:n}function Jd(n,i){const o=function U1(n){return n instanceof dd&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Ys})`)}return o===i}function B1(n){return new L1(n)}function V1(n){return new k1(n)}function G1(n){return new N1(n)}function z1(n){return new j1(n)}function $1(n){return new F1(n)}class H1{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Zd(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class W1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=Zd(i),o}}const q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gp(n){return(n=String(n)).match(q1)?n:"unsafe:"+n}function Yc(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function rf(...n){const i={};for(const o of n)for(const c in o)o.hasOwnProperty(c)&&(i[c]=!0);return i}const f0=Yc("area,br,col,hr,img,wbr"),p0=Yc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m0=Yc("rp,rt"),Ng=rf(f0,rf(p0,Yc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rf(m0,Yc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rf(m0,p0)),jg=Yc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g0=rf(jg,Yc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K1=Yc("script,style,template");class Y1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,c=!0,y=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)y.push(o),o=Q1(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let P=J1(o);if(P){o=P;break}o=y.pop()}return this.buf.join("")}startElement(i){const o=y0(i).toLowerCase();if(!Ng.hasOwnProperty(o))return this.sanitizedSomething=!0,!K1.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=i.attributes;for(let y=0;y<c.length;y++){const P=c.item(y),$=P.name,ue=$.toLowerCase();if(!g0.hasOwnProperty(ue)){this.sanitizedSomething=!0;continue}let we=P.value;jg[ue]&&(we=Gp(we)),this.buf.push(" ",$,'="',_0(we),'"')}return this.buf.push(">"),!0}endElement(i){const o=y0(i).toLowerCase();Ng.hasOwnProperty(o)&&!f0.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(_0(i))}}function J1(n){const i=n.nextSibling;if(i&&n!==i.previousSibling)throw v0(i);return i}function Q1(n){const i=n.firstChild;if(i&&function Z1(n,i){return(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,i))throw v0(i);return i}function y0(n){const i=n.nodeName;return"string"==typeof i?i:"FORM"}function v0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ex=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tx=/([^\#-~ |!])/g;function _0(n){return n.replace(/&/g,"&amp;").replace(ex,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(tx,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zp;function b0(n,i){let o=null;try{zp=zp||function h0(n){const i=new W1(n);return function X1(){try{return!!(new window.DOMParser).parseFromString(Zd(""),"text/html")}catch{return!1}}()?new H1(i):i}(n);let c=i?String(i):"";o=zp.getInertBodyElement(c);let y=5,P=c;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,c=P,P=o.innerHTML,o=zp.getInertBodyElement(c)}while(c!==P);return Zd((new Y1).sanitizeChildren(Fg(o)||o))}finally{if(o){const c=Fg(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Fg(n){return"content"in n&&function nx(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hd||{});function Ug(n){const i=sf();return i?i.sanitize(hd.URL,n)||"":Jd(n,"URL")?Kc(n):Gp(Hi(n))}function x0(n){const i=sf();if(i)return d0(i.sanitize(hd.RESOURCE_URL,n)||"");if(Jd(n,"ResourceURL"))return d0(Kc(n));throw new Or(904,!1)}function w0(n,i,o){return function lx(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?x0:Ug}(i,o)(n)}function sf(){const n=mr();return n&&n[Ma].sanitizer}const cx=/^>|^->|<!--|-->|--!>|<!-$/g,ux=/(<|>)/g,dx="\u200b$1\u200b";function Wl(n){return n instanceof Function?n():n}var Gg=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gg||{});let C0;function A0(n,i){return C0(n,i)}function lf(n,i,o,c,y){if(null!=c){let P,$=!1;Ga(c)?P=c:pa(c)&&($=!0,c=c[xo]);const ue=vs(c);0===n&&null!==o?null==y?cf(i,o,ue):$a(i,o,ue,y||null,!0):1===n&&null!==o?$a(i,o,ue,y||null,!0):2===n?function fd(n,i,o){const c=Xp(n,i);c&&function Cx(n,i,o,c){n.removeChild(i,o,c)}(n,c,i,o)}(i,ue,$):3===n&&i.destroyNode(ue),null!=P&&function Dx(n,i,o,c,y){const P=o[El];P!==vs(o)&&lf(i,n,c,P,y);for(let ue=Ho;ue<o.length;ue++){const we=o[ue];Pc(we[jr],we,n,i,c,P)}}(i,n,P,o,y)}}function I0(n,i){return n.createComment(function S0(n){return n.replace(cx,i=>i.replace(ux,dx))}(i))}function zg(n,i,o){return n.createElement(i,o)}function Mx(n,i){var o;null===(o=i[Ma].changeDetectionScheduler)||void 0===o||o.notify(8),Pc(n,i,i[qi],2,null,null)}function Tx(n,i){const o=n[Vc],c=i[Zo];(pa(c)||i[Ao]!==c[Zo][Ao])&&(n[ki]|=Id.HasTransplantedViews),null===o?n[Vc]=[i]:o.push(i)}function R0(n,i){const o=n[Vc],c=o.indexOf(i);o.splice(c,1)}function Wp(n,i){if(n.length<=Ho)return;const o=Ho+i,c=n[o];if(c){const y=c[bc];null!==y&&y!==n&&R0(y,c),i>0&&(n[o-1][co]=c[co]);const P=Nc(n,Ho+i);!function BE(n,i){Mx(n,i),i[xo]=null,i[$o]=null}(c[jr],c);const $=P[Va];null!==$&&$.detachView(P[jr]),c[Zo]=null,c[co]=null,c[ki]&=-129}return c}function $g(n,i){if(!(256&i[ki])){const o=i[qi];o.destroyNode&&Pc(n,i,o,3,null,null),function GE(n){let i=n[qu];if(!i)return P0(n[jr],n);for(;i;){let o=null;if(pa(i))o=i[qu];else{const c=i[Ho];c&&(o=c)}if(!o){for(;i&&!i[co]&&i!==n;)pa(i)&&P0(i[jr],i),i=i[Zo];null===i&&(i=n),pa(i)&&P0(i[jr],i),o=i&&i[co]}i=o}}(i)}}function P0(n,i){if(256&i[ki])return;const o=ve(null);try{i[ki]&=-129,i[ki]|=256,i[Ra]&&x(i[Ra]),function HE(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const y=i[o[c]];if(!(y instanceof jh)){const P=o[c+1];if(Array.isArray(P))for(let $=0;$<P.length;$+=2){const ue=y[P[$]],we=P[$+1];Ec(4,ue,we);try{we.call(ue)}finally{Ec(5,ue,we)}}else{Ec(4,y,P);try{P.call(y)}finally{Ec(5,y,P)}}}}}(n,i),function $E(n,i){const o=n.cleanup,c=i[Xu];if(null!==o)for(let P=0;P<o.length-1;P+=2)if("string"==typeof o[P]){const $=o[P+3];$>=0?c[$]():c[-$].unsubscribe(),P+=2}else o[P].call(c[o[P+1]]);null!==c&&(i[Xu]=null);const y=i[zl];if(null!==y){i[zl]=null;for(let P=0;P<y.length;P++)(0,y[P])()}}(n,i),1===i[jr].type&&i[qi].destroy();const c=i[bc];if(null!==c&&Ga(i[Zo])){c!==i[Zo]&&R0(c,i);const y=i[Va];null!==y&&y.detachView(n)}!function Fv(n){wg.delete(n[Ku])}(i)}finally{ve(o)}}function ss(n,i,o){return function ti(n,i,o){let c=i;for(;null!==c&&168&c.type;)c=(i=c).parent;if(null===c)return o[xo];{const{componentOffset:y}=c;if(y>-1){const{encapsulation:P}=n.data[c.directiveStart+y];if(P===Fc.None||P===Fc.Emulated)return null}return nl(c,o)}}(n,i.parent,o)}function $a(n,i,o,c,y){n.insertBefore(i,o,c,y)}function cf(n,i,o){n.appendChild(i,o)}function Ru(n,i,o,c,y){null!==c?$a(n,i,o,c,y):cf(n,i,o)}function Xp(n,i){return n.parentNode(i)}function O0(n,i,o){return k0(n,i,o)}let Pu,k0=function L0(n,i,o){return 40&n.type?nl(n,o):null};function Rc(n,i,o,c){const y=ss(n,c,i),P=i[qi],ue=O0(c.parent||i[$o],c,i);if(null!=y)if(Array.isArray(o))for(let we=0;we<o.length;we++)Ru(P,y,o[we],ue,!1);else Ru(P,y,o,ue,!1);void 0!==Pu&&Pu(P,c,i,o,y)}function Zc(n,i){if(null!==i){const o=i.type;if(3&o)return nl(i,n);if(4&o)return uf(-1,n[i.index]);if(8&o){const c=i.child;if(null!==c)return Zc(n,c);{const y=n[i.index];return Ga(y)?uf(-1,y):vs(y)}}if(128&o)return Zc(n,i.next);if(32&o)return A0(i,n)()||vs(n[i.index]);{const c=Wg(n,i);return null!==c?Array.isArray(c)?c[0]:Zc(Tc(n[Ao]),c):Zc(n,i.next)}}return null}function Wg(n,i){return null!==i?n[Ao][$o].projection[i.projection]:null}function uf(n,i){const o=Ho+n+1;if(o<i.length){const c=i[o],y=c[jr].firstChild;if(null!==y)return Zc(c,y)}return i[El]}function df(n,i,o,c,y,P,$){for(;null!=o;){if(128===o.type){o=o.next;continue}const ue=c[o.index],we=o.type;if($&&0===i&&(ue&&za(vs(ue),c),o.flags|=2),32&~o.flags)if(8&we)df(n,i,o.child,c,y,P,!1),lf(i,n,y,ue,P);else if(32&we){const ze=A0(o,c);let st;for(;st=ze();)lf(i,n,y,st,P);lf(i,n,y,ue,P)}else 16&we?Xg(n,i,c,o,y,P):lf(i,n,y,ue,P);o=$?o.projectionNext:o.next}}function Pc(n,i,o,c,y,P){df(o,c,n.firstChild,i,y,P,!1)}function Xg(n,i,o,c,y,P){const $=o[Ao],we=$[$o].projection[c.projection];if(Array.isArray(we))for(let ze=0;ze<we.length;ze++)lf(i,n,y,we[ze],P);else{let ze=we;const st=$[Zo];Kh(c)&&(ze.flags|=128),df(n,i,ze,st,y,P,!0)}}function qg(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function hf(n,i,o){const{mergedAttrs:c,classes:y,styles:P}=o;null!==c&&wl(n,i,c),null!==y&&qg(n,i,y),null!==P&&function Ix(n,i,o){n.setAttribute(i,"style",o)}(n,i,P)}const Ji={};function Kg(n=1){Yg(_s(),mr(),ga()+n,!1)}function Yg(n,i,o,c){if(!c)if(3&~i[ki]){const P=n.preOrderHooks;null!==P&&mp(i,P,0,o)}else{const P=n.preOrderCheckHooks;null!==P&&pp(i,P,o)}Cc(o)}function Ou(n,i=hs.Default){const o=mr();return null===o?hi(n,i):Gh(Xs(),o,ii(n),i)}function j0(){throw new Error("invalid")}function F0(n,i,o,c,y,P){const $=ve(null);try{let ue=null;y&gc.SignalBased&&(ue=i[c][l]),null!==ue&&void 0!==ue.transformFn&&(P=ue.transformFn(P)),y&gc.HasDecoratorInputTransform&&(P=n.inputTransforms[c].call(i,P)),null!==n.setInput?n.setInput(i,ue,P,o,c):rv(i,ue,c,P)}finally{ve($)}}function Kp(n,i,o,c,y,P,$,ue,we,ze,st){const yt=i.blueprint.slice();return yt[xo]=y,yt[ki]=204|c,(null!==ze||n&&2048&n[ki])&&(yt[ki]|=2048),Ah(yt),yt[Zo]=yt[_u]=n,yt[so]=o,yt[Ma]=$||n&&n[Ma],yt[qi]=ue||n&&n[qi],yt[sa]=we||n&&n[sa]||null,yt[$o]=P,yt[Ku]=function jv(){return Tp++}(),yt[ia]=st,yt[Yu]=ze,yt[Ao]=2==i.type?n[Ao]:yt,yt}function pd(n,i,o,c,y){let P=n.data[i];if(null===P)P=function Zg(n,i,o,c,y){const P=sv(),$=Rh(),we=n.data[i]=function em(n,i,o,c,y,P){let $=i?i.injectorIndex:-1,ue=0;return Mu()&&(ue|=128),{type:o,index:c,insertBeforeIndex:null,injectorIndex:$,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:ue,providerIndexes:0,value:y,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,$?P:P&&P.parent,o,i,c,y);return null===n.firstChild&&(n.firstChild=we),null!==P&&($?null==P.child&&null!==we.parent&&(P.child=we):null===P.next&&(P.next=we,we.prev=P)),we}(n,i,o,c,y),function Oh(){return Wi.lFrame.inI18n}()&&(P.flags|=32);else if(64&P.type){P.type=o,P.value=c,P.attrs=y;const $=function ed(){const n=Wi.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();P.injectorIndex=null===$?-1:$.injectorIndex}return hl(P,!0),P}function ff(n,i,o,c){if(0===o)return-1;const y=i.length;for(let P=0;P<o;P++)i.push(c),n.blueprint.push(c),n.data.push(null);return y}function Jg(n,i,o,c,y){const P=ga(),$=2&c;try{Cc(-1),$&&i.length>Ti&&Yg(n,i,Ti,!1),Ec($?2:0,y),o(c,y)}finally{Cc(P),Ec($?3:1,y)}}function Yp(n,i,o){if(Rd(i)){const c=ve(null);try{const P=i.directiveEnd;for(let $=i.directiveStart;$<P;$++){const ue=n.data[$];ue.contentQueries&&ue.contentQueries(1,o[$],$)}}finally{ve(c)}}}function Zp(n,i,o){Nd()&&(function Fx(n,i,o,c){const y=o.directiveStart,P=o.directiveEnd;wc(o)&&function Hx(n,i,o){const c=nl(i,n),y=Qg(o);let $=16;o.signals?$=4096:o.onPush&&($=64);const ue=tm(n,Kp(n,y,null,$,c,i,null,n[Ma].rendererFactory.createRenderer(c,o),null,null,null));n[i.index]=ue}(i,o,n.data[y+o.componentOffset]),n.firstCreatePass||vp(o,i),za(c,i);const $=o.initialInputs;for(let ue=y;ue<P;ue++){const we=n.data[ue],ze=$c(i,n,ue,o);za(ze,i),null!==$&&Wx(0,ue-y,ze,we,0,$),tc(we)&&(Ml(o.index,i)[so]=$c(i,n,ue,o))}}(n,i,o,nl(o,i)),!(64&~o.flags)&&H0(n,i,o))}function Jp(n,i,o=nl){const c=i.localNames;if(null!==c){let y=i.index+1;for(let P=0;P<c.length;P+=2){const $=c[P+1],ue=-1===$?o(i,n):n[$];n[y++]=ue}}}function Qg(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Qp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function Qp(n,i,o,c,y,P,$,ue,we,ze,st){const yt=Ti+c,nn=yt+y,pn=function U0(n,i){const o=[];for(let c=0;c<i;c++)o.push(c<n?null:Ji);return o}(yt,nn),dn="function"==typeof ze?ze():ze;return pn[jr]={type:n,blueprint:pn,template:o,queries:null,viewQuery:ue,declTNode:i,data:pn.slice().fill(null,yt),bindingStartIndex:yt,expandoStartIndex:nn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof $?$():$,firstChild:null,schemas:we,consts:dn,incompleteFirstPass:!1,ssrId:st}}let ey=()=>null;function G0(n,i,o,c,y){for(let $ in i){var P;if(!i.hasOwnProperty($))continue;const ue=i[$];if(void 0===ue)continue;null!==(P=c)&&void 0!==P||(c={});let we,ze=gc.None;Array.isArray(ue)?(we=ue[0],ze=ue[1]):we=ue;let st=$;if(null!==y){if(!y.hasOwnProperty($))continue;st=y[$]}0===n?z0(c,o,st,we,ze):z0(c,o,st,we)}return c}function z0(n,i,o,c,y){let P;n.hasOwnProperty(o)?(P=n[o]).push(i,c):P=n[o]=[i,c],void 0!==y&&P.push(y)}function ml(n,i,o,c,y,P,$,ue){const we=nl(i,o);let st,ze=i.inputs;!ue&&null!=ze&&(st=ze[c])?(sy(n,o,st,c,y),wc(i)&&function Lx(n,i){const o=Ml(i,n);16&o[ki]||(o[ki]|=64)}(o,i.index)):3&i.type&&(c=function Ox(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),y=null!=$?$(y,i.value||"",c):y,P.setProperty(we,c,y))}function ty(n,i,o,c){if(Nd()){const y=null===c?null:{"":-1},P=function Bx(n,i){const o=n.directiveRegistry;let c=null,y=null;if(o)for(let $=0;$<o.length;$++){const ue=o[$];if(Qs(i,ue.selectors,!1))if(c||(c=[]),tc(ue))if(null!==ue.findHostDirectiveDefs){const we=[];y=y||new Map,ue.findHostDirectiveDefs(ue,we,y),c.unshift(...we,ue),ny(n,i,we.length)}else c.unshift(ue),ny(n,i,0);else{var P;y=y||new Map,null===(P=ue.findHostDirectiveDefs)||void 0===P||P.call(ue,ue,c,y),c.push(ue)}}return null===c?null:[c,y]}(n,o);let $,ue;null===P?$=ue=null:[$,ue]=P,null!==$&&$0(n,i,o,$,y,ue),y&&function Vx(n,i,o){if(i){const c=n.localNames=[];for(let y=0;y<i.length;y+=2){const P=o[i[y+1]];if(null==P)throw new Or(-301,!1);c.push(i[y],P)}}}(o,c,y)}o.mergedAttrs=gu(o.mergedAttrs,o.attrs)}function $0(n,i,o,c,y,P){for(let yt=0;yt<c.length;yt++)rd(vp(o,i),n,c[yt].type);!function zx(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,c.length);for(let yt=0;yt<c.length;yt++){const nn=c[yt];nn.providersResolver&&nn.providersResolver(nn)}let $=!1,ue=!1,we=ff(n,i,c.length,null);for(let yt=0;yt<c.length;yt++){const nn=c[yt];o.mergedAttrs=gu(o.mergedAttrs,nn.hostAttrs),$x(n,o,i,we,nn),Gx(we,nn,y),null!==nn.contentQueries&&(o.flags|=4),(null!==nn.hostBindings||null!==nn.hostAttrs||0!==nn.hostVars)&&(o.flags|=64);const pn=nn.type.prototype;var ze,st;!$&&(pn.ngOnChanges||pn.ngOnInit||pn.ngDoCheck)&&((null!==(ze=n.preOrderHooks)&&void 0!==ze?ze:n.preOrderHooks=[]).push(o.index),$=!0),ue||!pn.ngOnChanges&&!pn.ngDoCheck||((null!==(st=n.preOrderCheckHooks)&&void 0!==st?st:n.preOrderCheckHooks=[]).push(o.index),ue=!0),we++}!function Px(n,i,o){const y=i.directiveEnd,P=n.data,$=i.attrs,ue=[];let we=null,ze=null;for(let st=i.directiveStart;st<y;st++){const yt=P[st],nn=o?o.get(yt):null,dn=nn?nn.outputs:null;we=G0(0,yt.inputs,st,we,nn?nn.inputs:null),ze=G0(1,yt.outputs,st,ze,dn);const Qn=null===we||null===$||Sd(i)?null:Xx(we,st,$);ue.push(Qn)}null!==we&&(we.hasOwnProperty("class")&&(i.flags|=8),we.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=ue,i.inputs=we,i.outputs=ze}(n,o,P)}function H0(n,i,o){const c=o.directiveStart,y=o.directiveEnd,P=o.index,$=function uv(){return Wi.lFrame.currentDirectiveIndex}();try{Cc(P);for(let ue=c;ue<y;ue++){const we=n.data[ue],ze=i[ue];ng(ue),(null!==we.hostBindings||0!==we.hostVars||null!==we.hostAttrs)&&Ux(we,ze)}}finally{Cc(-1),ng($)}}function Ux(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ny(n,i,o){var c;i.componentOffset=o,(null!==(c=n.components)&&void 0!==c?c:n.components=[]).push(i.index)}function Gx(n,i,o){if(o){if(i.exportAs)for(let c=0;c<i.exportAs.length;c++)o[i.exportAs[c]]=n;tc(i)&&(o[""]=n)}}function $x(n,i,o,c,y){n.data[c]=y;const P=y.factory||(y.factory=xl(y.type)),$=new jh(P,tc(y),Ou);n.blueprint[c]=$,o[c]=$,function Nx(n,i,o,c,y){const P=y.hostBindings;if(P){let $=n.hostBindingOpCodes;null===$&&($=n.hostBindingOpCodes=[]);const ue=~i.index;(function jx(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})($)!=ue&&$.push(ue),$.push(o,c,P)}}(n,i,c,ff(n,o,y.hostVars,Ji),y)}function Oc(n,i,o,c,y,P){const $=nl(n,i);!function ry(n,i,o,c,y,P,$){if(null==P)n.removeAttribute(i,y,o);else{const ue=null==$?Hi(P):$(P,c||"",y);n.setAttribute(i,y,ue,o)}}(i[qi],$,P,n.value,o,c,y)}function Wx(n,i,o,c,y,P){const $=P[i];if(null!==$)for(let ue=0;ue<$.length;)F0(c,o,$[ue++],$[ue++],$[ue++],$[ue++])}function Xx(n,i,o){let c=null,y=0;for(;y<o.length;){const P=o[y];if(0!==P)if(5!==P){if("number"==typeof P)break;if(n.hasOwnProperty(P)){null===c&&(c=[]);const $=n[P];for(let ue=0;ue<$.length;ue+=3)if($[ue]===i){c.push(P,$[ue+1],$[ue+2],o[y+1]);break}}y+=2}else y+=2;else y+=4}return c}function W0(n,i,o,c){return[n,!0,0,i,null,c,null,o,null,null]}function X0(n,i){const o=n.contentQueries;if(null!==o){const c=ve(null);try{for(let y=0;y<o.length;y+=2){const $=o[y+1];if(-1!==$){const ue=n.data[$];Lh(o[y]),ue.contentQueries(2,i[$],$)}}}finally{ve(c)}}}function tm(n,i){return n[qu]?n[Kf][co]=i:n[qu]=i,n[Kf]=i,i}function iy(n,i,o){Lh(0);const c=ve(null);try{i(n,o)}finally{ve(c)}}function q0(n){var i;return null!==(i=n[Xu])&&void 0!==i?i:n[Xu]=[]}function K0(n){var i;return null!==(i=n.cleanup)&&void 0!==i?i:n.cleanup=[]}function nm(n,i){const o=n[sa],c=o?o.get(cc,null):null;c&&c.handleError(i)}function sy(n,i,o,c,y){for(let P=0;P<o.length;){const $=o[P++],ue=o[P++],we=o[P++];F0(n.data[$],i[$],c,ue,we,y)}}function Jc(n,i,o){const c=Od(i,n);!function Ex(n,i,o){n.setValue(i,o)}(n[qi],c,o)}function qx(n,i){const o=Ml(i,n),c=o[jr];!function Kx(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])}(c,o);const y=o[xo];null!==y&&null===o[ia]&&(o[ia]=Jv(y,o[sa])),oy(c,o,o[so])}function oy(n,i,o){jd(i);try{var c;const y=n.viewQuery;null!==y&&iy(1,y,o);const P=n.template;null!==P&&Jg(n,i,P,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),null===(c=i[Va])||void 0===c||c.finishViewCreation(n),n.staticContentQueries&&X0(n,i),n.staticViewQueries&&iy(2,n.viewQuery,o);const $=n.components;null!==$&&function Yx(n,i){for(let o=0;o<i.length;o++)qx(n,i[o])}(i,$)}catch(y){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),y}finally{i[ki]&=-5,Nh()}}function th(n,i,o,c){const y=ve(null);try{var P,$,ue;const we=i.tView,yt=Kp(n,we,o,4096&n[ki]?4096:16,null,i,null,null,null!==(P=null==c?void 0:c.injector)&&void 0!==P?P:null,null!==($=null==c?void 0:c.embeddedViewInjector)&&void 0!==$?$:null,null!==(ue=null==c?void 0:c.dehydratedView)&&void 0!==ue?ue:null);yt[bc]=n[i.index];const pn=n[Va];return null!==pn&&(yt[Va]=pn.createEmbeddedView(we)),oy(we,yt,o),yt}finally{ve(y)}}function Qc(n,i){return!i||null===i.firstChild||Kh(n)}function md(n,i,o,c=!0){const y=i[jr];if(function zE(n,i,o,c){const y=Ho+c,P=o.length;c>0&&(o[y-1][co]=i),c<P-Ho?(i[co]=o[y],mh(o,Ho+c,i)):(o.push(i),i[co]=null),i[Zo]=o;const $=i[bc];null!==$&&o!==$&&Tx($,i);const ue=i[Va];null!==ue&&ue.insertView(n),Dh(i),i[ki]|=128}(y,i,n,o),c){const $=uf(o,n),ue=i[qi],we=Xp(ue,n[El]);null!==we&&function VE(n,i,o,c,y,P){c[xo]=y,c[$o]=i,Pc(n,c,o,1,y,P)}(y,n[$o],ue,i,we,$)}const P=i[ia];null!==P&&null!==P.firstChild&&(P.firstChild=null)}function Lu(n,i,o,c,y=!1){for(;null!==o;){if(128===o.type){o=y?o.projectionNext:o.next;continue}const P=i[o.index];null!==P&&c.push(vs(P)),Ga(P)&&ly(P,c);const $=o.type;if(8&$)Lu(n,i,o.child,c);else if(32&$){const ue=A0(o,i);let we;for(;we=ue();)c.push(we)}else if(16&$){const ue=Wg(i,o);if(Array.isArray(ue))c.push(...ue);else{const we=Tc(i[Ao]);Lu(we[jr],we,ue,c,!0)}}o=y?o.projectionNext:o.next}return c}function ly(n,i){for(let o=Ho;o<n.length;o++){const c=n[o],y=c[jr].firstChild;null!==y&&Lu(c[jr],c,y,i)}n[El]!==n[xo]&&i.push(n[El])}let J0=[];const Qx={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ih(n.lView)},consumerOnSignalRead(){this.lView[Ra]=this}},ew={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let i=Tc(n.lView);for(;i&&!t_(i[jr]);)i=Tc(i);i&&Zm(i)},consumerOnSignalRead(){this.lView[Ra]=this}};function t_(n){return 2!==n.type}const rm=100;function im(n,i=!0,o=0){const c=n[Ma],y=c.rendererFactory;var $;null===($=y.begin)||void 0===$||$.call(y);try{!function tw(n,i){const o=av();try{lv(!0),pf(n,i);let c=0;for(;Su(n);){if(c===rm)throw new Or(103,!1);c++,pf(n,1)}}finally{lv(o)}}(n,o)}catch(ze){throw i&&nm(n,ze),ze}finally{var ue,we;null===(ue=y.end)||void 0===ue||ue.call(y),null===(we=c.inlineEffectRunner)||void 0===we||we.flush()}}function nw(n,i,o,c){var y;const P=i[ki];if(!(256&~P))return;null===(y=i[Ma].inlineEffectRunner)||void 0===y||y.flush(),jd(i);let we=!0,ze=null,st=null;t_(n)?(st=function Zx(n){var i;return null!==(i=n[Ra])&&void 0!==i?i:function Jx(n){var i;const o=null!==(i=J0.pop())&&void 0!==i?i:Object.create(Qx);return o.lView=n,o}(n)}(i),ze=p(st)):null===function K(){return F}()?(we=!1,st=function e_(n){var i;const o=null!==(i=n[Ra])&&void 0!==i?i:Object.create(ew);return o.lView=n,o}(i),ze=p(st)):i[Ra]&&(x(i[Ra]),i[Ra]=null);try{Ah(i),function cv(n){return Wi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Jg(n,i,o,2,c);const yt=!(3&~P);if(yt){const dn=n.preOrderCheckHooks;null!==dn&&pp(i,dn,null)}else{const dn=n.preOrderHooks;null!==dn&&mp(i,dn,0,null),sg(i,0)}if(function r_(n){for(let i=Vv(n);null!==i;i=Gv(i)){if(!(i[ki]&Id.HasTransplantedViews))continue;const o=i[Vc];for(let c=0;c<o.length;c++)Zm(o[c])}}(i),nh(i,0),null!==n.contentQueries&&X0(n,i),yt){const dn=n.contentCheckHooks;null!==dn&&pp(i,dn)}else{const dn=n.contentHooks;null!==dn&&mp(i,dn,1),sg(i,1)}!function Rx(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const y=o[c];if(y<0)Cc(~y);else{const P=y,$=o[++c],ue=o[++c];Wb($,P),ue(2,i[P])}}}finally{Cc(-1)}}(n,i);const nn=n.components;null!==nn&&o_(i,nn,0);const pn=n.viewQuery;if(null!==pn&&iy(2,pn,c),yt){const dn=n.viewCheckHooks;null!==dn&&pp(i,dn)}else{const dn=n.viewHooks;null!==dn&&mp(i,dn,2),sg(i,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[xc]){for(const dn of i[xc])dn();i[xc]=null}i[ki]&=-73}catch(yt){throw Ih(i),yt}finally{null!==st&&(m(st,ze),we&&function Q0(n){n.lView[Ra]!==n&&(n.lView=null,J0.push(n))}(st)),Nh()}}function nh(n,i){for(let o=Vv(n);null!==o;o=Gv(o))for(let c=Ho;c<o.length;c++)s_(o[c],i)}function i_(n,i,o){s_(Ml(i,n),o)}function s_(n,i){Ym(n)&&pf(n,i)}function pf(n,i){const c=n[jr],y=n[ki],P=n[Ra];let $=!!(0===i&&16&y);if($||($=!!(64&y&&0===i)),$||($=!!(1024&y)),$||($=!(null==P||!P.dirty||!g(P))),$||($=!1),P&&(P.dirty=!1),n[ki]&=-9217,$)nw(c,n,c.template,n[so]);else if(8192&y){nh(n,1);const ue=c.components;null!==ue&&o_(n,ue,1)}}function o_(n,i,o){for(let c=0;c<i.length;c++)i_(n,i[c],o)}function mf(n,i){var o;const c=av()?64:1088;for(null===(o=n[Ma].changeDetectionScheduler)||void 0===o||o.notify(i);n;){n[ki]|=c;const y=Tc(n);if(Pd(n)&&!y)return n;n=y}return null}class gf{get rootNodes(){const i=this._lView,o=i[jr];return Lu(o,i,o.firstChild,[])}constructor(i,o,c=!0){this._lView=i,this._cdRefInjectingView=o,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[so]}set context(i){this._lView[so]=i}get destroyed(){return!(256&~this._lView[ki])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Zo];if(Ga(i)){const o=i[8],c=o?o.indexOf(this):-1;c>-1&&(Wp(i,c),Nc(o,c))}this._attachedToViewContainer=!1}$g(this._lView[jr],this._lView)}onDestroy(i){nc(this._lView,i)}markForCheck(){mf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ki]&=-129}reattach(){Dh(this._lView),this._lView[ki]|=128}detectChanges(){this._lView[ki]|=1024,im(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Or(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=Pd(this._lView),o=this._lView[bc];null!==o&&!i&&R0(o,this._lView),Mx(this._lView[jr],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Or(902,!1);this._appRef=i;const o=Pd(this._lView),c=this._lView[bc];null!==c&&!o&&Tx(c,this._lView),Dh(this._lView)}}let rh=(()=>{class i{}return i.__NG_ELEMENT_ID__=iw,i})();const rw=rh,a_=class extends rw{constructor(i,o,c){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=c}get ssrId(){var i;return(null===(i=this._declarationTContainer.tView)||void 0===i?void 0:i.ssrId)||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,c){const y=th(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:o,dehydratedView:c});return new gf(y)}};function iw(){return sm(Xs(),mr())}function sm(n,i){return 4&n.type?new a_(i,n,Xd(n,i)):null}let I_=()=>null;function ku(n,i){return I_(n,i)}class sh{}const Mf=new Zr("",{providedIn:"root",factory:()=>!1}),P_=new Zr("");class O_{}class L_{}class k_{resolveComponentFactory(i){throw function Ow(n){const i=Error(`No component factory found for ${po(n)}.`);return i.ngComponent=n,i}(i)}}class oh{}oh.NULL=new k_;class Cf{}let by=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function Nu(){const n=mr(),o=Ml(Xs().index,n);return(pa(o)?o:n)[qi]}(),i})(),Lw=(()=>{var n;class i{}return(n=i).\u0275prov=zr({token:n,providedIn:"root",factory:()=>null}),i})();const j_=new Set;function Qo(n){var i,o;j_.has(n)||(j_.add(n),null===(i=performance)||void 0===i||null===(o=i.mark)||void 0===o||o.call(i,"mark_feature_usage",{detail:{feature:n}}))}var Bo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bo||{});const F_={destroy(){}};function hm(n,i){var o,c;!i&&function Cd(n){if(!wh())throw new Or(-203,!1)}();const y=null!==(o=null==i?void 0:i.injector)&&void 0!==o?o:Br(Uo);return function Al(n){return"browser"===(null!=n?n:Br(Uo)).get(Dp)}(y)?(Qo("NgAfterNextRender"),function U_(n,i,o,c){var y;const P=function wy(n,i){if(n instanceof Function)switch(i){case Bo.EarlyRead:return{earlyRead:n};case Bo.Write:return{write:n};case Bo.MixedReadWrite:return{mixedReadWrite:n};case Bo.Read:return{read:n}}return n}(n,c),$=i.get(fm),ue=null!==(y=$.handler)&&void 0!==y?y:$.handler=new jw,we=[],ze=[],st=()=>{for(const dn of ze)ue.unregister(dn);yt()},yt=i.get(Hc).onDestroy(st);let nn=0;const pn=(dn,Qn)=>{if(!Qn)return;const Er=o?(...lr)=>(nn--,nn<1&&st(),Qn(...lr)):Qn,kr=xh(i,()=>new Nw(dn,we,Er));ue.register(kr),ze.push(kr),nn++};return pn(Bo.EarlyRead,P.earlyRead),pn(Bo.Write,P.write),pn(Bo.MixedReadWrite,P.mixedReadWrite),pn(Bo.Read,P.read),{destroy:st}}(n,y,!0,null!==(c=null==i?void 0:i.phase)&&void 0!==c?c:Bo.MixedReadWrite)):F_}class Nw{constructor(i,o,c){var y;this.phase=i,this.pipelinedArgs=o,this.callbackFn=c,this.zone=Br(Lo),this.errorHandler=Br(cc,{optional:!0}),null===(y=Br(sh,{optional:!0}))||void 0===y||y.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){var i;null===(i=this.errorHandler)||void 0===i||i.handleError(o)}}}class jw{constructor(){this.executingCallbacks=!1,this.buckets={[Bo.EarlyRead]:new Set,[Bo.Write]:new Set,[Bo.MixedReadWrite]:new Set,[Bo.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const o of i)o.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let fm=(()=>{var n;class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var c;this.executeInternalCallbacks(),null===(c=this.handler)||void 0===c||c.execute()}executeInternalCallbacks(){const c=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const y of c)y()}ngOnDestroy(){var c;null===(c=this.handler)||void 0===c||c.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(n=i).\u0275prov=zr({token:n,providedIn:"root",factory:()=>new n}),i})();function ju(n){return!!Jr(n)}function gm(n,i,o){let c=o?n.styles:null,y=o?n.classes:null,P=0;if(null!==i)for(let $=0;$<i.length;$++){const ue=i[$];"number"==typeof ue?P=ue:1==P?y=Nl(y,ue):2==P&&(c=Nl(c,ue+": "+i[++$]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=y:n.classesWithoutHost=y}class z_ extends oh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=An(i);return new ah(o,this.ngModule)}}function $_(n,i){const o=[];for(const c in n){if(!n.hasOwnProperty(c))continue;const y=n[c];if(void 0===y)continue;const P=Array.isArray(y),$=P?y[0]:y;o.push(i?{propName:$,templateName:c,isSignal:!!((P?y[1]:gc.None)&gc.SignalBased)}:{propName:$,templateName:c})}return o}class ah extends L_{get inputs(){const i=this.componentDef,o=i.inputTransforms,c=$_(i.inputs,!0);if(null!==o)for(const y of c)o.hasOwnProperty(y.propName)&&(y.transform=o[y.propName]);return c}get outputs(){return $_(this.componentDef.outputs,!1)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function pe(n){return n.map($u).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,c,y){const P=ve(null);try{var ue;let we=(y=y||this.ngModule)instanceof ul?y:null===(ue=y)||void 0===ue?void 0:ue.injector;we&&null!==this.componentDef.getStandaloneInjector&&(we=this.componentDef.getStandaloneInjector(we)||we);const ze=we?new Ac(i,we):i,st=ze.get(Cf,null);if(null===st)throw new Or(407,!1);const yt=ze.get(Lw,null),dn={rendererFactory:st,sanitizer:yt,inlineEffectRunner:null,afterRenderEventManager:ze.get(fm,null),changeDetectionScheduler:ze.get(sh,null)},Qn=st.createRenderer(null,this.componentDef),Er=this.componentDef.selectors[0][0]||"div",kr=c?function B0(n,i,o,c){const P=c.get(o0,!1)||o===Fc.ShadowDom,$=n.selectRootElement(i,P);return function V0(n){ey(n)}($),$}(Qn,c,this.componentDef.encapsulation,ze):zg(Qn,Er,function Lc(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Er));let lr=512;this.componentDef.signals?lr|=4096:this.componentDef.onPush||(lr|=16);let $i=null;null!==kr&&($i=Jv(kr,ze,!0));const as=Qp(0,null,null,1,0,null,null,null,null,null,null),Ks=Kp(null,as,null,lr,null,null,dn,Qn,ze,null,$i);let al,yl;jd(Ks);try{const au=this.componentDef;let Nf,eE=null;au.findHostDirectiveDefs?(Nf=[],eE=new Map,au.findHostDirectiveDefs(au,Nf,eE),Nf.push(au)):Nf=[au];const EO=function Uw(n,i){const o=n[jr],c=Ti;return n[c]=i,pd(o,c,2,"#host",null)}(Ks,kr),MO=function Bw(n,i,o,c,y,P,$){const ue=y[jr];!function Vw(n,i,o,c){for(const y of n)i.mergedAttrs=gu(i.mergedAttrs,y.hostAttrs);null!==i.mergedAttrs&&(gm(i,i.mergedAttrs,!0),null!==o&&hf(c,o,i))}(c,n,i,$);let we=null;null!==i&&(we=Jv(i,y[sa]));const ze=P.rendererFactory.createRenderer(i,o);let st=16;o.signals?st=4096:o.onPush&&(st=64);const yt=Kp(y,Qg(o),null,st,y[n.index],n,P,ze,null,null,we);return ue.firstCreatePass&&ny(ue,n,c.length-1),tm(y,yt),y[n.index]=yt}(EO,kr,au,Nf,Ks,dn,Qn);yl=aa(as,Ti),kr&&function zw(n,i,o,c){if(c)wl(n,o,["ng-version","18.1.3"]);else{const{attrs:y,classes:P}=function Te(n){const i=[],o=[];let c=1,y=2;for(;c<n.length;){let P=n[c];if("string"==typeof P)2===y?""!==P&&i.push(P,n[++c]):8===y&&o.push(P);else{if(!Sa(y))break;y=P}c++}return{attrs:i,classes:o}}(i.selectors[0]);y&&wl(n,o,y),P&&P.length>0&&qg(n,o,P.join(" "))}}(Qn,au,kr,c),void 0!==o&&function $w(n,i,o){const c=n.projection=[];for(let y=0;y<i.length;y++){const P=o[y];c.push(null!=P?Array.from(P):null)}}(yl,this.ngContentSelectors,o),al=function Gw(n,i,o,c,y,P){const $=Xs(),ue=y[jr],we=nl($,y);$0(ue,y,$,o,null,c);for(let st=0;st<o.length;st++)za($c(y,ue,$.directiveStart+st,$),y);H0(ue,y,$),we&&za(we,y);const ze=$c(y,ue,$.directiveStart+$.componentOffset,$);if(n[so]=y[so]=ze,null!==P)for(const st of P)st(ze,i);return Yp(ue,$,y),ze}(MO,au,Nf,eE,Ks,[tu]),oy(as,Ks,null)}finally{Nh()}return new Fw(this.componentType,al,Xd(yl,Ks),Ks,yl)}finally{ve(P)}}}class Fw extends O_{constructor(i,o,c,y,P){super(),this.location=c,this._rootLView=y,this._tNode=P,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new gf(y,void 0,!1),this.componentType=i}setInput(i,o){const c=this._tNode.inputs;let y;if(null!==c&&(y=c[i])){var P;if(null!==(P=this.previousInputValues)&&void 0!==P||(this.previousInputValues=new Map),this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const $=this._rootLView;sy($[jr],$,y,i,o),this.previousInputValues.set(i,o),mf(Ml(this._tNode.index,$),1)}}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function tu(){const n=Xs();fp(mr()[jr],n)}let lh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hw,i})();function Hw(){return a(Xs(),mr())}const v=lh,t=class extends v{constructor(i,o,c){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=c}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const i=nd(this._hostTNode,this._hostLView);if(Gd(i)){const o=Vh(i,this._hostLView),c=Uh(i);return new Fo(o[jr].data[c+8],o)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=r(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Ho}createEmbeddedView(i,o,c){let y,P;"number"==typeof c?y=c:null!=c&&(y=c.index,P=c.injector);const $=ku(this._lContainer,i.ssrId),ue=i.createEmbeddedViewImpl(o||{},P,$);return this.insertImpl(ue,y,Qc(this._hostTNode,$)),ue}createComponent(i,o,c,y,P){var $,ue,we;const ze=i&&!function _c(n){return"function"==typeof n}(i);let st;if(ze)st=o;else{const kr=o||{};st=kr.index,c=kr.injector,y=kr.projectableNodes,P=kr.environmentInjector||kr.ngModuleRef}const yt=ze?i:new ah(An(i)),nn=c||this.parentInjector;if(!P&&null==yt.ngModule){const lr=(ze?nn:this.parentInjector).get(ul,null);lr&&(P=lr)}const pn=An(null!==($=yt.componentType)&&void 0!==$?$:{}),dn=ku(this._lContainer,null!==(ue=null==pn?void 0:pn.id)&&void 0!==ue?ue:null),Qn=null!==(we=null==dn?void 0:dn.firstChild)&&void 0!==we?we:null,Er=yt.create(nn,y,Qn,P);return this.insertImpl(Er.hostView,st,Qc(this._hostTNode,dn)),Er}insert(i,o){return this.insertImpl(i,o,!0)}insertImpl(i,o,c){const y=i._lView;if(function Ta(n){return Ga(n[Zo])}(y)){const ue=this.indexOf(i);if(-1!==ue)this.detach(ue);else{const we=y[Zo],ze=new t(we,we[$o],we[Zo]);ze.detach(ze.indexOf(i))}}const P=this._adjustIndex(o),$=this._lContainer;return md($,y,P,c),i.attachToViewContainerRef(),mh(s($),P,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=r(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),c=Wp(this._lContainer,o);c&&(Nc(s(this._lContainer),o),$g(c[jr],c))}detach(i){const o=this._adjustIndex(i,-1),c=Wp(this._lContainer,o);return c&&null!=Nc(s(this._lContainer),o)?new gf(c):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function r(n){return n[8]}function s(n){return n[8]||(n[8]=[])}function a(n,i){let o;const c=i[n.index];return Ga(c)?o=c:(o=W0(c,i,null,n),i[n.index]=o,tm(i,o)),_(o,i,n,c),new t(o,n,i)}let _=function U(n,i,o,c){if(n[El])return;let y;y=8&o.type?vs(c):function u(n,i){const o=n[qi],c=o.createComment(""),y=nl(i,n);return $a(o,Xp(o,y),c,function Ax(n,i){return n.nextSibling(i)}(o,y),!1),c}(i,o),n[El]=y},C=()=>!1;class ye{constructor(i){this.queryList=i,this.matches=null}clone(){return new ye(this.queryList)}setDirty(){this.queryList.setDirty()}}class Me{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const c=null!==i.contentQueries?i.contentQueries[0]:o.length,y=[];for(let P=0;P<c;P++){const $=o.getByIndex(P);y.push(this.queries[$.indexInDeclarationView].clone())}return new Me(y)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==pr(i,o).matches&&this.queries[o].setDirty()}}class Ue{constructor(i,o,c=null){this.flags=o,this.read=c,this.predicate="string"==typeof i?function Kn(n){return n.split(",").map(i=>i.trim())}(i):i}}class Pe{constructor(i=[]){this.queries=i}elementStart(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let c=0;c<this.length;c++){const y=null!==o?o.length:0,P=this.getByIndex(c).embeddedTView(i,y);P&&(P.indexInDeclarationView=c,null!==o?o.push(P):o=[P])}return null!==o?new Pe(o):null}template(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Ie{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Ie(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let c=i.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let y=0;y<c.length;y++){const P=c[y];this.matchTNodeWithReadOption(i,o,tt(o,P)),this.matchTNodeWithReadOption(i,o,zd(o,i,P,!1,!1))}else c===rh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,zd(o,i,c,!1,!1))}matchTNodeWithReadOption(i,o,c){if(null!==c){const y=this.metadata.read;if(null!==y)if(y===Xh||y===lh||y===rh&&4&o.type)this.addMatch(o.index,-2);else{const P=zd(o,i,y,!1,!1);null!==P&&this.addMatch(o.index,P)}else this.addMatch(o.index,c)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function tt(n,i){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===i)return o[c+1];return null}function rt(n,i,o,c){return-1===o?function it(n,i){return 11&n.type?Xd(n,i):4&n.type?sm(n,i):null}(i,n):-2===o?function $t(n,i,o){return o===Xh?Xd(i,n):o===rh?sm(i,n):o===lh?a(i,n):void 0}(n,i,c):$c(n,n[jr],o,i)}function At(n,i,o,c){const y=i[Va].queries[c];if(null===y.matches){const P=n.data,$=o.matches,ue=[];for(let we=0;null!==$&&we<$.length;we+=2){const ze=$[we];ue.push(ze<0?null:rt(i,P[ze],$[we+1],o.metadata.read))}y.matches=ue}return y.matches}function Ft(n,i,o,c){const y=n.queries.getByIndex(o),P=y.matches;if(null!==P){const $=At(n,i,y,o);for(let ue=0;ue<P.length;ue+=2){const we=P[ue];if(we>0)c.push($[ue/2]);else{const ze=P[ue+1],st=i[-we];for(let yt=Ho;yt<st.length;yt++){const nn=st[yt];nn[bc]===nn[Zo]&&Ft(nn[jr],nn,ze,c)}if(null!==st[Vc]){const yt=st[Vc];for(let nn=0;nn<yt.length;nn++){const pn=yt[nn];Ft(pn[jr],pn,ze,c)}}}}}return c}function Mt(n,i,o){var c;const y=new Xc(!(4&~o));return function va(n,i,o,c){const y=q0(i);y.push(o),n.firstCreatePass&&K0(n).push(c,y.length-1)}(n,i,y,y.destroy),(null!==(c=i[Va])&&void 0!==c?c:i[Va]=new Me).queries.push(new ye(y))-1}function Hn(n,i,o){null===n.queries&&(n.queries=new Pe),n.queries.track(new Ie(i,o))}function pr(n,i){return n.queries.getByIndex(i)}function Yn(n,i){const o=n[jr],c=pr(o,i);return c.crossesNgTemplate?Ft(o,n,i,[]):At(o,n,c,i)}function Qr(n,i){Qo("NgSignals");const o=function J(n){const i=Object.create(ge);i.value=n;const o=()=>(w(i),i.value);return o[l]=i,o}(n),c=o[l];return null!=i&&i.equal&&(c.equal=i.equal),o.set=y=>et(c,y),o.update=y=>function le(n,i){f()||oe(),et(n,i(n.value))}(c,y),o.asReadonly=vi.bind(o),o}function vi(){const n=this[l];if(void 0===n.readonlyFn){const i=()=>this();i[l]=n,n.readonlyFn=i}return n.readonlyFn}function Yi(n){return function Nr(n){return"function"==typeof n&&void 0!==n[l]}(n)&&"function"==typeof n.set}function qs(n){let i=function Pa(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;i;){let y;if(tc(n))y=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Or(903,!1);y=i.\u0275dir}if(y){if(o){c.push(y);const $=n;$.inputs=If(n.inputs),$.inputTransforms=If(n.inputTransforms),$.declaredInputs=If(n.declaredInputs),$.outputs=If(n.outputs);const ue=y.hostBindings;ue&&My(n,ue);const we=y.viewQuery,ze=y.contentQueries;if(we&&H_(n,we),ze&&vd(n,ze),dc(n,y),kl(n.outputs,y.outputs),tc(y)&&y.data.animation){const st=n.data;st.animation=(st.animation||[]).concat(y.data.animation)}}const P=y.features;if(P)for(let $=0;$<P.length;$++){const ue=P[$];ue&&ue.ngInherit&&ue(n),ue===qs&&(o=!1)}}i=Object.getPrototypeOf(i)}!function nu(n){let i=0,o=null;for(let c=n.length-1;c>=0;c--){const y=n[c];y.hostVars=i+=y.hostVars,y.hostAttrs=gu(y.hostAttrs,o=gu(o,y.hostAttrs))}}(c)}function dc(n,i){for(const c in i.inputs){if(!i.inputs.hasOwnProperty(c)||n.inputs.hasOwnProperty(c))continue;const y=i.inputs[c];if(void 0!==y&&(n.inputs[c]=y,n.declaredInputs[c]=i.declaredInputs[c],null!==i.inputTransforms)){var o;const P=Array.isArray(y)?y[0]:y;if(!i.inputTransforms.hasOwnProperty(P))continue;null!==(o=n.inputTransforms)&&void 0!==o||(n.inputTransforms={}),n.inputTransforms[P]=i.inputTransforms[P]}}}function If(n){return n===ra?{}:n===fs?[]:n}function H_(n,i){const o=n.viewQuery;n.viewQuery=o?(c,y)=>{i(c,y),o(c,y)}:i}function vd(n,i){const o=n.contentQueries;n.contentQueries=o?(c,y,P)=>{i(c,y,P),o(c,y,P)}:i}function My(n,i){const o=n.hostBindings;n.hostBindings=o?(c,y)=>{i(c,y),o(c,y)}:i}function Z_(n){const i=n.inputConfig,o={};for(const c in i)if(i.hasOwnProperty(c)){const y=i[c];Array.isArray(y)&&y[3]&&(o[c]=y[3])}n.inputTransforms=o}class _d{}class J_{}function Ww(n,i){return new Gn(n,null!=i?i:null,[])}class Gn extends _d{constructor(i,o,c){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const y=Jr(i);this._bootstrapComponents=Wl(y.bootstrap),this._r3Injector=lc(i,o,[{provide:_d,useValue:this},{provide:oh,useValue:this.componentFactoryResolver},...c],po(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class rr extends J_{constructor(i){super(),this.moduleType=i}create(i){return new Gn(this.moduleType,i,[])}}class Wn extends _d{constructor(i){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const o=new ec([...i.providers,{provide:_d,useValue:this},{provide:oh,useValue:this.componentFactoryResolver}],i.parent||Qa(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Hr(n,i,o=null){return new Wn({providers:n,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}function xi(n){return!!Bi(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Bi(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function os(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function kc(n,i,o,c,y,P,$,ue,we,ze){const st=o+Ti,yt=i.firstCreatePass?function hc(n,i,o,c,y,P,$,ue,we){const ze=i.consts,st=pd(i,n,4,$||null,ue||null);ty(i,o,st,rl(ze,we)),fp(i,st);const yt=st.tView=Qp(2,st,c,y,P,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ze,null);return null!==i.queries&&(i.queries.template(i,st),yt.queries=i.queries.embeddedTView(st)),st}(st,i,n,c,y,P,$,ue,we):i.data[st];hl(yt,!1);const nn=ch(i,n,yt,o);sc()&&Rc(i,n,nn,yt),za(nn,n);const pn=W0(nn,n,nn,yt);return n[st]=pn,tm(n,pn),function L(n,i,o){return C(n,i,o)}(pn,yt,n),Sh(yt)&&Zp(i,n,yt),null!=we&&Jp(n,yt,ze),yt}function sl(n,i,o,c,y,P,$,ue){const we=mr(),ze=_s();return kc(we,ze,n,i,o,c,y,rl(ze.consts,P),$,ue),sl}let ch=function Do(n,i,o,c){return fl(!0),i[qi].createComment("")};function rS(n,i,o,c){const y=mr();return os(y,ic(),i)&&(_s(),Oc(oo(),y,n,i,o,c)),rS}function Tm(n,i,o,c,y,P){const ue=function Ts(n,i,o,c){const y=os(n,i,o);return os(n,i+1,c)||y}(n,function Gc(){return Wi.lFrame.bindingIndex}(),o,y);return zc(2),ue?i+Hi(o)+c+Hi(y)+P:Ji}function ib(n,i){return n<<17|i<<2}function dh(n){return n>>17&32767}function iS(n){return 2|n}function Of(n){return(131068&n)>>2}function sS(n,i){return-131069&n|i<<2}function oS(n){return 1|n}function jM(n,i,o,c){const y=n[o+1],P=null===i;let $=c?dh(y):Of(y),ue=!1;for(;0!==$&&(!1===ue||P);){const ze=n[$+1];jD(n[$],i)&&(ue=!0,n[$+1]=c?oS(ze):iS(ze)),$=c?dh(ze):Of(ze)}ue&&(n[o+1]=c?iS(y):oS(y))}function jD(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ia(n,i)>=0}const Oa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FM(n){return n.substring(Oa.key,Oa.keyEnd)}function FD(n){return n.substring(Oa.value,Oa.valueEnd)}function BM(n,i){const o=Oa.textEnd;let c=Oa.key=Om(n,i,o);return o===c?-1:(c=Oa.keyEnd=function GD(n,i,o){let c;for(;i<o&&(45===(c=n.charCodeAt(i))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)i++;return i}(n,c,o),c=GM(n,c,o),c=Oa.value=Om(n,c,o),c=Oa.valueEnd=function zD(n,i,o){let c=-1,y=-1,P=-1,$=i,ue=$;for(;$<o;){const we=n.charCodeAt($++);if(59===we)return ue;34===we||39===we?ue=$=zM(n,we,$,o):i===$-4&&85===P&&82===y&&76===c&&40===we?ue=$=zM(n,41,$,o):we>32&&(ue=$),P=y,y=c,c=-33&we}return ue}(n,c,o),GM(n,c,o))}function Om(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function GM(n,i,o,c){return(i=Om(n,i,o))<o&&i++,i}function zM(n,i,o,c){let y=-1,P=o;for(;P<c;){const $=n.charCodeAt(P++);if($==i&&92!==y)return P;y=92==$&&92===y?0:$}throw new Error}function aS(n,i,o){const c=mr();return os(c,ic(),i)&&ml(_s(),oo(),c,n,i,c[qi],o,!1),aS}function lS(n,i,o,c,y){const $=y?"class":"style";sy(n,o,i.inputs[$],$,c)}function cS(n,i){return function iu(n,i,o,c){const y=mr(),P=_s(),$=zc(2);P.firstUpdatePass&&WM(P,n,$,c),i!==Ji&&os(y,$,i)&&qM(P,P.data[ga()],y,y[qi],n,y[$+1]=function QD(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=po(Kc(n)))),n}(i,o),c,$)}(n,i,null,!0),cS}function ru(n){!function su(n,i,o,c){const y=_s(),P=zc(2);y.firstUpdatePass&&WM(y,null,P,c);const $=mr();if(o!==Ji&&os($,P,o)){const ue=y.data[ga()];if(YM(ue,c)&&!HM(y,P)){let we=c?ue.classesWithoutHost:ue.stylesWithoutHost;null!==we&&(o=Nl(we,o||"")),lS(y,ue,$,o,c)}else!function JD(n,i,o,c,y,P,$,ue){y===Ji&&(y=fs);let we=0,ze=0,st=0<y.length?y[0]:null,yt=0<P.length?P[0]:null;for(;null!==st||null!==yt;){const nn=we<y.length?y[we+1]:void 0,pn=ze<P.length?P[ze+1]:void 0;let Qn,dn=null;st===yt?(we+=2,ze+=2,nn!==pn&&(dn=yt,Qn=pn)):null===yt||null!==st&&st<yt?(we+=2,dn=st):(ze+=2,dn=yt,Qn=pn),null!==dn&&qM(n,i,o,c,dn,Qn,$,ue),st=we<y.length?y[we]:null,yt=ze<P.length?P[ze]:null}}(y,ue,$,$[qi],$[P+1],$[P+1]=function YD(n,i,o){if(null==o||""===o)return fs;const c=[],y=Kc(o);if(Array.isArray(y))for(let P=0;P<y.length;P++)n(c,y[P],!0);else if("object"==typeof y)for(const P in y)y.hasOwnProperty(P)&&n(c,P,y[P]);else"string"==typeof y&&i(c,y);return c}(n,i,o),c,P)}}(XM,$D,n,!1)}function $D(n,i){for(let o=function BD(n){return function VM(n){Oa.key=0,Oa.keyEnd=0,Oa.value=0,Oa.valueEnd=0,Oa.textEnd=n.length}(n),BM(n,Om(n,0,Oa.textEnd))}(i);o>=0;o=BM(i,o))XM(n,FM(i),FD(i))}function HM(n,i){return i>=n.expandoStartIndex}function WM(n,i,o,c){const y=n.data;if(null===y[o+1]){const P=y[ga()],$=HM(n,o);YM(P,c)&&null===i&&!$&&(i=!1),i=function WD(n,i,o,c){const y=function ap(n){const i=Wi.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let P=c?i.residualClasses:i.residualStyles;if(null===y)0===(c?i.classBindings:i.styleBindings)&&(o=Ry(o=uS(null,n,i,o,c),i.attrs,c),P=null);else{const $=i.directiveStylingLast;if(-1===$||n[$]!==y)if(o=uS(y,n,i,o,c),null===P){let we=function XD(n,i,o){const c=o?i.classBindings:i.styleBindings;if(0!==Of(c))return n[dh(c)]}(n,i,c);void 0!==we&&Array.isArray(we)&&(we=uS(null,n,i,we[1],c),we=Ry(we,i.attrs,c),function qD(n,i,o,c){n[dh(o?i.classBindings:i.styleBindings)]=c}(n,i,c,we))}else P=function KD(n,i,o){let c;const y=i.directiveEnd;for(let P=1+i.directiveStylingLast;P<y;P++)c=Ry(c,n[P].hostAttrs,o);return Ry(c,i.attrs,o)}(n,i,c)}return void 0!==P&&(c?i.residualClasses=P:i.residualStyles=P),o}(y,P,i,c),function kD(n,i,o,c,y,P){let $=P?i.classBindings:i.styleBindings,ue=dh($),we=Of($);n[c]=o;let st,ze=!1;if(Array.isArray(o)?(st=o[1],(null===st||Ia(o,st)>0)&&(ze=!0)):st=o,y)if(0!==we){const nn=dh(n[ue+1]);n[c+1]=ib(nn,ue),0!==nn&&(n[nn+1]=sS(n[nn+1],c)),n[ue+1]=function OD(n,i){return 131071&n|i<<17}(n[ue+1],c)}else n[c+1]=ib(ue,0),0!==ue&&(n[ue+1]=sS(n[ue+1],c)),ue=c;else n[c+1]=ib(we,0),0===ue?ue=c:n[we+1]=sS(n[we+1],c),we=c;ze&&(n[c+1]=iS(n[c+1])),jM(n,st,c,!0),jM(n,st,c,!1),function ND(n,i,o,c,y){const P=y?n.residualClasses:n.residualStyles;null!=P&&"string"==typeof i&&Ia(P,i)>=0&&(o[c+1]=oS(o[c+1]))}(i,st,n,c,P),$=ib(ue,we),P?i.classBindings=$:i.styleBindings=$}(y,P,i,o,$,c)}}function uS(n,i,o,c,y){let P=null;const $=o.directiveEnd;let ue=o.directiveStylingLast;for(-1===ue?ue=o.directiveStart:ue++;ue<$&&(P=i[ue],c=Ry(c,P.hostAttrs,y),P!==n);)ue++;return null!==n&&(o.directiveStylingLast=ue),c}function Ry(n,i,o){const c=o?1:2;let y=-1;if(null!==i)for(let P=0;P<i.length;P++){const $=i[P];"number"==typeof $?y=$:y===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mi(n,$,!!o||i[++P]))}return void 0===n?null:n}function XM(n,i,o){Mi(n,i,Kc(o))}function qM(n,i,o,c,y,P,$,ue){if(!(3&i.type))return;const we=n.data,ze=we[ue+1],st=function LD(n){return!(1&~n)}(ze)?KM(we,i,o,y,Of(ze),$):void 0;sb(st)||(sb(P)||function PD(n){return!(2&~n)}(ze)&&(P=KM(we,null,o,y,ue,$)),function N0(n,i,o,c,y){if(i)y?n.addClass(o,c):n.removeClass(o,c);else{let P=-1===c.indexOf("-")?void 0:Gg.DashCase;null==y?n.removeStyle(o,c,P):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),P|=Gg.Important),n.setStyle(o,c,y,P))}}(c,$,Od(ga(),o),y,P))}function KM(n,i,o,c,y,P){const $=null===i;let ue;for(;y>0;){const we=n[y],ze=Array.isArray(we),st=ze?we[1]:we,yt=null===st;let nn=o[y+1];nn===Ji&&(nn=yt?fs:void 0);let pn=yt?jc(nn,c):st===c?nn:void 0;if(ze&&!sb(pn)&&(pn=jc(we,c)),sb(pn)&&(ue=pn,$))return ue;const dn=n[y+1];y=$?dh(dn):Of(dn)}if(null!==i){let we=P?i.residualClasses:i.residualStyles;null!=we&&(ue=jc(we,c))}return ue}function sb(n){return void 0!==n}function YM(n,i){return!!(n.flags&(i?8:16))}function ab(n,i,o,c){const y=mr(),P=_s(),$=Ti+n,ue=y[qi],we=P.firstCreatePass?function w2(n,i,o,c,y,P){const $=i.consts,we=pd(i,n,2,c,rl($,y));return ty(i,o,we,rl($,P)),null!==we.attrs&&gm(we,we.attrs,!1),null!==we.mergedAttrs&&gm(we,we.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,we),we}($,P,y,i,o,c):P.data[$],ze=eT(P,y,we,ue,i,n);y[$]=ze;const st=Sh(we);return hl(we,!0),hf(ue,ze,we),!function Ns(n){return!(32&~n.flags)}(we)&&sc()&&Rc(P,y,ze,we),0===function Jm(){return Wi.lFrame.elementDepthCount}()&&za(ze,y),function ip(){Wi.lFrame.elementDepthCount++}(),st&&(Zp(P,y,we),Yp(P,we,y)),null!==c&&Jp(y,we),ab}function lb(){let n=Xs();Rh()?Ph():(n=n.parent,hl(n,!1));const i=n;(function $b(n){return Wi.skipHydrationRootTNode===n})(i)&&function aE(){Wi.skipHydrationRootTNode=null}(),function sp(){Wi.lFrame.elementDepthCount--}();const o=_s();return o.firstCreatePass&&(fp(o,n),Rd(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Vd(n){return!!(8&n.flags)}(i)&&lS(o,i,mr(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zb(n){return!!(16&n.flags)}(i)&&lS(o,i,mr(),i.stylesWithoutHost,!1),lb}function pS(n,i,o,c){return ab(n,i,o,c),lb(),pS}let eT=(n,i,o,c,y,P)=>(fl(!0),zg(c,y,function hv(){return Wi.lFrame.currentNamespace}()));function cb(n,i,o){const c=mr(),y=_s(),P=n+Ti,$=y.firstCreatePass?function M2(n,i,o,c,y){const P=i.consts,$=rl(P,c),ue=pd(i,n,8,"ng-container",$);return null!==$&&gm(ue,$,!0),ty(i,o,ue,rl(P,y)),null!==i.queries&&i.queries.elementStart(i,ue),ue}(P,y,c,i,o):y.data[P];hl($,!0);const ue=tT(y,c,$,n);return c[P]=ue,sc()&&Rc(y,c,ue,$),za(ue,c),Sh($)&&(Zp(y,c,$),Yp(y,$,c)),null!=o&&Jp(c,$),cb}function ub(){let n=Xs();const i=_s();return Rh()?Ph():(n=n.parent,hl(n,!1)),i.firstCreatePass&&(fp(i,n),Rd(n)&&i.queries.elementEnd(n)),ub}function mS(n,i,o){return cb(n,i,o),ub(),mS}let tT=(n,i,o,c)=>(fl(!0),I0(i[qi],""));function nT(){return mr()}const Lf=void 0;var D2=["en",[["a","p"],["AM","PM"],Lf],[["AM","PM"],Lf,Lf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lf,"{1} 'at' {0}",Lf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function A2(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Lm={};function gS(n){const i=function I2(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=oT(i);if(o)return o;const c=i.split("-")[0];if(o=oT(c),o)return o;if("en"===c)return D2;throw new Or(701,!1)}function sT(n){return gS(n)[km.PluralCase]}function oT(n){return n in Lm||(Lm[n]=lo.ng&&lo.ng.common&&lo.ng.common.locales&&lo.ng.common.locales[n]),Lm[n]}var km=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(km||{});const Nm="en-US";let aT=Nm;let TT=(n,i,o)=>{};function _S(n,i,o,c){const y=mr(),P=_s(),$=Xs();return bS(P,y,y[qi],$,n,i,c),_S}function bS(n,i,o,c,y,P,$){const ue=Sh(c),ze=n.firstCreatePass&&K0(n),st=i[so],yt=q0(i);let nn=!0;if(3&c.type||$){const Qn=nl(c,i),Er=$?$(Qn):Qn,kr=yt.length,lr=$?as=>$(vs(as[c.index])):c.index;let $i=null;if(!$&&ue&&($i=function yI(n,i,o,c){const y=n.cleanup;if(null!=y)for(let P=0;P<y.length-1;P+=2){const $=y[P];if($===o&&y[P+1]===c){const ue=i[Xu],we=y[P+2];return ue.length>we?ue[we]:null}"string"==typeof $&&(P+=2)}return null}(n,i,y,c.index)),null!==$i)($i.__ngLastListenerFn__||$i).__ngNextListenerFn__=P,$i.__ngLastListenerFn__=P,nn=!1;else{P=IT(c,i,st,P),TT(Qn,y,P);const as=o.listen(Er,y,P);yt.push(P,as),ze&&ze.push(y,lr,kr,kr+1)}}else P=IT(c,i,st,P);const pn=c.outputs;let dn;if(nn&&null!==pn&&(dn=pn[y])){const Qn=dn.length;if(Qn)for(let Er=0;Er<Qn;Er+=2){const Ks=i[dn[Er]][dn[Er+1]].subscribe(P),al=yt.length;yt.push(P,Ks),ze&&ze.push(y,c.index,al,-(al+1))}}}function DT(n,i,o,c){const y=ve(null);try{return Ec(6,i,o),!1!==o(c)}catch(P){return nm(n,P),!1}finally{Ec(7,i,o),ve(y)}}function IT(n,i,o,c){return function y(P){if(P===Function)return c;mf(n.componentOffset>-1?Ml(n.index,i):i,5);let ue=DT(i,o,c,P),we=y.__ngNextListenerFn__;for(;we;)ue=DT(i,o,we,P)&&ue,we=we.__ngNextListenerFn__;return ue}}function RT(n=1){return function td(n){return(Wi.lFrame.contextLView=function Ld(n,i){for(;n>0;)i=i[_u],n--;return i}(n,Wi.lFrame.contextLView))[so]}(n)}function vI(n,i){let o=null;const c=function Vl(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let y=0;y<i.length;y++){const P=i[y];if("*"!==P){if(null===c?Qs(n,P,!0):vc(c,P))return y}else o=y}return o}function PT(n){const i=mr()[Ao][$o];if(!i.projection){const c=i.projection=function Ya(n,i){const o=[];for(let c=0;c<n;c++)o.push(i);return o}(n?n.length:1,null),y=c.slice();let P=i.child;for(;null!==P;){if(128!==P.type){const $=n?vI(P,n):0;null!==$&&(y[$]?y[$].projectionNext=P:c[$]=P,y[$]=P)}P=P.next}}}function OT(n,i=0,o,c,y,P){const $=mr(),ue=_s(),we=c?n+1:null;null!==we&&kc($,ue,we,c,y,P,null,o);const ze=pd(ue,Ti+n,16,null,o||null);null===ze.projection&&(ze.projection=i),Ph();const yt=!$[ia]||Mu();null===$[Ao][$o].projection[ze.projection]&&null!==we?function _I(n,i,o){const c=Ti+o,y=i.data[c],P=n[c],$=ku(P,y.tView.ssrId);md(P,th(n,y,void 0,{dehydratedView:$}),0,Qc(y,$))}($,ue,we):yt&&32&~ze.flags&&function Qd(n,i,o){Xg(i[qi],0,i,o,ss(n,o,i),O0(o.parent||i[$o],o,i))}(ue,$,ze)}function zT(n,i,o,c){!function gn(n,i,o,c){const y=_s();if(y.firstCreatePass){const P=Xs();Hn(y,new Ue(i,o,c),P.index),function Jn(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(y,n),!(2&~o)&&(y.staticContentQueries=!0)}return Mt(y,mr(),o)}(n,i,o,c)}function $T(n,i,o){!function wt(n,i,o){const c=_s();return c.firstCreatePass&&(Hn(c,new Ue(n,i,o),-1),!(2&~i)&&(c.staticViewQueries=!0)),Mt(c,mr(),i)}(n,i,o)}function HT(n){const i=mr(),o=_s(),c=lp();Lh(c+1);const y=pr(o,c);if(n.dirty&&function Qu(n){return!(4&~n[ki])}(i)===!(2&~y.metadata.flags)){if(null===y.matches)n.reset([]);else{const P=Yn(i,c);n.reset(P,kv),n.notifyOnChanges()}return!0}return!1}function WT(){return function Wt(n,i){return n[Va].queries[i].queryList}(mr(),lp())}function XT(n){return function Mc(n,i){return n[i]}(function op(){return Wi.lFrame.contextLView}(),Ti+n)}function rC(n,i=""){const o=mr(),c=_s(),y=n+Ti,P=c.firstCreatePass?pd(c,y,1,i,null):c.data[y],$=iC(c,o,P,i,n);o[y]=$,sc()&&Rc(c,o,$,P),hl(P,!1)}let iC=(n,i,o,c,y)=>(fl(!0),function D0(n,i){return n.createText(i)}(i[qi],c));function SS(n){return pb("",n,""),SS}function pb(n,i,o){const c=mr(),y=function Mm(n,i,o,c){return os(n,ic(),o)?i+Hi(o)+c:Ji}(c,n,i,o);return y!==Ji&&Jc(c,ga(),y),pb}function ES(n,i,o,c,y){const P=mr(),$=Tm(P,n,i,o,c,y);return $!==Ji&&Jc(P,ga(),$),ES}function MS(n,i,o){Yi(i)&&(i=i());const c=mr();return os(c,ic(),i)&&ml(_s(),oo(),c,n,i,c[qi],o,!1),MS}function hC(n,i){const o=Yi(n);return o&&n.set(i),o}function TS(n,i){const o=mr(),c=_s(),y=Xs();return bS(c,o,o[qi],y,n,i),TS}function CS(n,i,o,c,y){if(n=ii(n),Array.isArray(n))for(let P=0;P<n.length;P++)CS(n[P],i,o,c,y);else{const P=_s(),$=mr(),ue=Xs();let we=vu(n)?n:ii(n.provide);const ze=Zi(n),st=1048575&ue.providerIndexes,yt=ue.directiveStart,nn=ue.providerIndexes>>20;if(vu(n)||!n.multi){const pn=new jh(ze,y,Ou),dn=DS(we,i,y?st:st+nn,yt);-1===dn?(rd(vp(ue,$),P,we),AS(P,n,i.length),i.push(we),ue.directiveStart++,ue.directiveEnd++,y&&(ue.providerIndexes+=1048576),o.push(pn),$.push(pn)):(o[dn]=pn,$[dn]=pn)}else{const pn=DS(we,i,st+nn,yt),dn=DS(we,i,st,st+nn),Er=dn>=0&&o[dn];if(y&&!Er||!y&&!(pn>=0&&o[pn])){rd(vp(ue,$),P,we);const kr=function UI(n,i,o,c,y){const P=new jh(n,o,Ou);return P.multi=[],P.index=i,P.componentProviders=0,mC(P,y,c&&!o),P}(y?FI:jI,o.length,y,c,ze);!y&&Er&&(o[dn].providerFactory=kr),AS(P,n,i.length,0),i.push(we),ue.directiveStart++,ue.directiveEnd++,y&&(ue.providerIndexes+=1048576),o.push(kr),$.push(kr)}else AS(P,n,pn>-1?pn:dn,mC(o[y?dn:pn],ze,!y&&c));!y&&c&&Er&&o[dn].componentProviders++}}}function AS(n,i,o,c){const y=vu(i),P=function rE(n){return!!n.useClass}(i);if(y||P){const we=(P?ii(i.useClass):i).prototype.ngOnDestroy;if(we){const ze=n.destroyHooks||(n.destroyHooks=[]);if(!y&&i.multi){const st=ze.indexOf(o);-1===st?ze.push(o,[c,we]):ze[st+1].push(c,we)}else ze.push(o,we)}}}function mC(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function DS(n,i,o,c){for(let y=o;y<c;y++)if(i[y]===n)return y;return-1}function jI(n,i,o,c){return IS(this.multi,[])}function FI(n,i,o,c){const y=this.multi;let P;if(this.providerFactory){const $=this.providerFactory.componentProviders,ue=$c(o,o[jr],this.providerFactory.index,c);P=ue.slice(0,$),IS(y,P);for(let we=$;we<ue.length;we++)P.push(ue[we])}else P=[],IS(y,P);return P}function IS(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function gC(n,i=[]){return o=>{o.providersResolver=(c,y)=>function NI(n,i,o){const c=_s();if(c.firstCreatePass){const y=tc(n);CS(o,c.data,c.blueprint,y,!0),CS(i,c.data,c.blueprint,y,!1)}}(c,y?y(n):n,i)}}let BI=(()=>{var n;class i{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const y=Md(0,c.type),P=y.length>0?Hr([y],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,P)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(n=i).\u0275prov=zr({token:n,providedIn:"environment",factory:()=>new n(hi(ul))}),i})();function yC(n){Qo("NgStandalone"),n.getStandaloneInjector=i=>i.get(BI).getOrCreateStandaloneInjector(n)}function bC(n,i,o){const c=function ma(){const n=Wi.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}()+n,y=mr();return y[c]===Ji?function Ms(n,i,o){return n[i]=o}(y,c,o?i.call(o):i()):function yo(n,i){return n[i]}(y,c)}class VC{constructor(i){this.full=i;const o=i.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}let GC=(()=>{var n;class i{log(c){console.log(c)}warn(c){console.warn(c)}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();const WC=new Zr(""),XC=new Zr("");let jS,QR=(()=>{var n;class i{constructor(c,y,P){this._ngZone=c,this.registry=y,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jS||(function eP(n){jS=n}(P),P.addToWindow(y)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb()}});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(c)||(clearTimeout(y.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,y,P){let $=-1;y&&y>0&&($=setTimeout(()=>{this._callbacks=this._callbacks.filter(ue=>ue.timeoutId!==$),c()},y)),this._callbacks.push({doneCb:c,timeoutId:$,updateCb:P})}whenStable(c,y,P){if(P&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,y,P),this._runCallbacksIfReady()}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,y,P){return[]}}return(n=i).\u0275fac=function(c){return new(c||n)(hi(Lo),hi(qC),hi(XC))},n.\u0275prov=zr({token:n,factory:n.\u0275fac}),i})(),qC=(()=>{var n;class i{constructor(){this._applications=new Map}registerApplication(c,y){this._applications.set(c,y)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,y=!0){var P,$;return null!==(P=null===($=jS)||void 0===$?void 0:$.findTestabilityInTree(this,c,y))&&void 0!==P?P:null}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();function FS(n){return!!n&&"function"==typeof n.then}function KC(n){return!!n&&"function"==typeof n.subscribe}const YC=new Zr("");let US=(()=>{var n;class i{constructor(){var c;this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,P)=>{this.resolve=y,this.reject=P}),this.appInits=null!==(c=Br(YC,{optional:!0}))&&void 0!==c?c:[]}runInitializers(){if(this.initialized)return;const c=[];for(const P of this.appInits){const $=P();if(FS($))c.push($);else if(KC($)){const ue=new Promise((we,ze)=>{$.subscribe({complete:we,error:ze})});c.push(ue)}}const y=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{y()}).catch(P=>{this.reject(P)}),0===c.length&&y(),this.initialized=!0}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const _b=new Zr("");function QC(n,i){return Array.isArray(i)?i.reduce(QC,n):{...n,...i}}let ou=(()=>{var n;class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Br(Wh),this.afterRenderEffectManager=Br(fm),this.zonelessEnabled=Br(Mf),this.externalTestViews=new Set,this.beforeRender=new Rt.B,this.afterTick=new Rt.B,this.componentTypes=[],this.components=[],this.isStable=Br(pl).hasPendingTasks.pipe((0,lt.T)(c=>!c)),this._injector=Br(ul)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,y){const P=c instanceof L_;if(!this._injector.get(US).done)throw!P&&Mr(c),new Or(405,!1);let ue;ue=P?c:this._injector.get(oh).resolveComponentFactory(c),this.componentTypes.push(ue.componentType);const we=function tP(n){return n.isBoundToModule}(ue)?void 0:this._injector.get(_d),st=ue.create(Uo.NULL,[],y||ue.selector,we),yt=st.location.nativeElement,nn=st.injector.get(WC,null);return null==nn||nn.registerApplication(yt),st.onDestroy(()=>{this.detachView(st.hostView),bb(this.components,st),null==nn||nn.unregisterApplication(yt)}),this._loadComponent(st),st}tick(){this._tick(!0)}_tick(c){if(this._runningTick)throw new Or(101,!1);const y=ve(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(c)}catch(P){this.internalErrorHandler(P)}finally{this._runningTick=!1,ve(y),this.afterTick.next()}}detectChangesInAttachedViews(c){let y=null;this._injector.destroyed||(y=this._injector.get(Cf,null,{optional:!0}));let P=0;const $=this.afterRenderEffectManager;for(;P<10;){const pn=0===P;if(c||!pn){this.beforeRender.next(pn);for(let{_lView:dn,notifyErrorHandler:Qn}of this._views)rP(dn,Qn,pn,this.zonelessEnabled)}else{var ue,we,ze,st,yt,nn;null===(ue=y)||void 0===ue||null===(we=(ze=ue).begin)||void 0===we||we.call(ze),null===(st=y)||void 0===st||null===(yt=(nn=st).end)||void 0===yt||yt.call(nn)}if(P++,$.executeInternalCallbacks(),!this.allViews.some(({_lView:dn})=>Su(dn))&&($.execute(),!this.allViews.some(({_lView:dn})=>Su(dn))))break}}attachView(c){const y=c;this._views.push(y),y.attachToAppRef(this)}detachView(c){const y=c;bb(this._views,y),y.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const y=this._injector.get(_b,[]);[...this._bootstrapListeners,...y].forEach(P=>P(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>bb(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Or(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function bb(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function rP(n,i,o,c){(o||Su(n))&&im(n,i,o&&!c?0:1)}class iP{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let sP=(()=>{var n;class i{compileModuleSync(c){return new rr(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const y=this.compileModuleSync(c),$=Wl(Jr(c).declarations).reduce((ue,we)=>{const ze=An(we);return ze&&ue.push(new ah(ze)),ue},[]);return new iP(y,$)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),lP=(()=>{var n;class i{constructor(){this.zone=Br(Lo),this.changeDetectionScheduler=Br(sh),this.applicationRef=Br(ou)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var c;null===(c=this._onMicrotaskEmptySubscription)||void 0===c||c.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function BS({ngZoneFactory:n,ignoreChangesOutsideZone:i}){var o;return null!==(o=n)&&void 0!==o||(n=()=>new Lo(VS())),[{provide:Lo,useFactory:n},{provide:To,multi:!0,useFactory:()=>{const c=Br(lP,{optional:!0});return()=>c.initialize()}},{provide:To,multi:!0,useFactory:()=>{const c=Br(uP);return()=>{c.initialize()}}},!0===i?{provide:P_,useValue:!0}:[]]}function VS(n){var i,o;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(i=null==n?void 0:n.eventCoalescing)&&void 0!==i&&i,shouldCoalesceRunChangeDetection:null!==(o=null==n?void 0:n.runCoalescing)&&void 0!==o&&o}}let uP=(()=>{var n;class i{constructor(){this.subscription=new Bt.yU,this.initialized=!1,this.zone=Br(Lo),this.pendingTasks=Br(pl)}initialize(){if(this.initialized)return;this.initialized=!0;let c=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(c=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Lo.assertNotInAngularZone(),queueMicrotask(()=>{null!==c&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(c),c=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var y;Lo.assertInAngularZone(),null!==(y=c)&&void 0!==y||(c=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),Gy=(()=>{var n;class i{constructor(){var c;this.appRef=Br(ou),this.taskService=Br(pl),this.ngZone=Br(Lo),this.zonelessEnabled=Br(Mf),this.disableScheduling=null!==(c=Br(P_,{optional:!0}))&&void 0!==c&&c,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Bt.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof Ep||!this.zoneIsDefined))}notify(c){if(!this.zonelessEnabled&&5===c)return;switch(c){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const y=this.useMicrotaskScheduler?Tl:Cv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Lo.isInAngularZone())}tick(c){if(this.runningTick||this.appRef.destroyed)return;const y=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(c)},void 0,this.schedulerTickApplyArgs)}catch(P){throw this.taskService.remove(y),P}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Tl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(y)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var c;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(c=this.cancelScheduledCallback)||void 0===c||c.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const y=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(y)}}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const xb=new Zr("",{providedIn:"root",factory:()=>Br(xb,hs.Optional|hs.SkipSelf)||function dP(){return typeof $localize<"u"&&$localize.locale||Nm}()}),hP=new Zr("",{providedIn:"root",factory:()=>"USD"}),zS=new Zr("");let iA=(()=>{var n;class i{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,y){const P=function Pv(n="zone.js",i){return"noop"===n?new Ep:"zone.js"===n?new Lo(i):n}(null==y?void 0:y.ngZone,VS({eventCoalescing:null==y?void 0:y.ngZoneEventCoalescing,runCoalescing:null==y?void 0:y.ngZoneRunCoalescing}));return P.run(()=>{const ue=function or(n,i,o){return new Gn(n,i,o)}(c.moduleType,this.injector,[...BS({ngZoneFactory:()=>P,ignoreChangesOutsideZone:null==y?void 0:y.ignoreChangesOutsideZone}),{provide:sh,useExisting:Gy}]),we=ue.injector.get(cc,null);return P.runOutsideAngular(()=>{const ze=P.onError.subscribe({next:st=>{we.handleError(st)}});ue.onDestroy(()=>{bb(this._modules,ue),ze.unsubscribe()})}),function JC(n,i,o){try{const c=o();return FS(c)?c.catch(y=>{throw i.runOutsideAngular(()=>n.handleError(y)),y}):c}catch(c){throw i.runOutsideAngular(()=>n.handleError(c)),c}}(we,P,()=>{const ze=ue.injector.get(US);return ze.runInitializers(),ze.donePromise.then(()=>(function lT(n){"string"==typeof n&&(aT=n.toLowerCase().replace(/_/g,"-"))}(ue.injector.get(xb,Nm)||Nm),this._moduleDoBootstrap(ue),ue))})})}bootstrapModule(c,y=[]){const P=QC({},y);return function aP(n,i,o){const c=new rr(o);return Promise.resolve(c)}(0,0,c).then($=>this.bootstrapModuleFactory($,P))}_moduleDoBootstrap(c){const y=c.injector.get(ou);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(P=>y.bootstrap(P));else{if(!c.instance.ngDoBootstrap)throw new Or(-403,!1);c.instance.ngDoBootstrap(y)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Or(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const c=this._injector.get(zS,null);c&&(c.forEach(y=>y()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(n=i).\u0275fac=function(c){return new(c||n)(hi(Uo))},n.\u0275prov=zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})(),hh=null;const sA=new Zr("");function oA(n,i,o=[]){const c=`Platform: ${i}`,y=new Zr(c);return(P=[])=>{let $=$S();if(!$||$.injector.get(sA,!1)){const ue=[...o,...P,{provide:y,useValue:!0}];n?n(ue):function pP(n){if(hh&&!hh.get(sA,!1))throw new Or(400,!1);(function ZC(){!function me(n){xe=n}(()=>{throw new Or(600,!1)})})(),hh=n;const i=n.get(iA);(function lA(n){const i=n.get(E1,null);null==i||i.forEach(o=>o())})(n)}(function aA(n=[],i){return Uo.create({name:i,providers:[{provide:Hf,useValue:"platform"},{provide:zS,useValue:new Set([()=>hh=null])},...n]})}(ue,c))}return function mP(n){const i=$S();if(!i)throw new Or(401,!1);return i}()}}function $S(){var n,i;return null!==(n=null===(i=hh)||void 0===i?void 0:i.get(iA))&&void 0!==n?n:null}function yP(){}let uA=(()=>{class i{}return i.__NG_ELEMENT_ID__=vP,i})();function vP(n){return function _P(n,i,o){if(wc(n)&&!o){const c=Ml(n.index,i);return new gf(c,c)}return 175&n.type?new gf(i[Ao],i):null}(Xs(),mr(),!(16&~n))}class pA{constructor(){}supports(i){return xi(i)}create(i){return new EP(i)}}const SP=(n,i)=>i;class EP{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SP}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,c=this._removalsHead,y=0,P=null;for(;o||c;){const $=!c||o&&o.currentIndex<gA(c,y,P)?o:c,ue=gA($,y,P),we=$.currentIndex;if($===c)y--,c=c._nextRemoved;else if(o=o._next,null==$.previousIndex)y++;else{P||(P=[]);const ze=ue-y,st=we-y;if(ze!=st){for(let nn=0;nn<ze;nn++){const pn=nn<P.length?P[nn]:P[nn]=0,dn=pn+nn;st<=dn&&dn<ze&&(P[nn]=pn+1)}P[$.previousIndex]=st-ze}}ue!==we&&i($,ue,we)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!xi(i))throw new Or(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let y,P,$,o=this._itHead,c=!1;if(Array.isArray(i)){this.length=i.length;for(let ue=0;ue<this.length;ue++)P=i[ue],$=this._trackByFn(ue,P),null!==o&&Object.is(o.trackById,$)?(c&&(o=this._verifyReinsertion(o,P,$,ue)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,$,ue),c=!0),o=o._next}else y=0,function rs(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let c;for(;!(c=o.next()).done;)i(c.value)}}(i,ue=>{$=this._trackByFn(y,ue),null!==o&&Object.is(o.trackById,$)?(c&&(o=this._verifyReinsertion(o,ue,$,y)),Object.is(o.item,ue)||this._addIdentityChange(o,ue)):(o=this._mismatch(o,ue,$,y),c=!0),o=o._next,y++}),this.length=y;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,c,y){let P;return null===i?P=this._itTail:(P=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,P,y)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(c,y))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,P,y)):i=this._addAfter(new MP(o,c),P,y),i}_verifyReinsertion(i,o,c,y){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==P?i=this._reinsertAfter(P,i._prev,y):i.currentIndex!=y&&(i.currentIndex=y,this._addToMoves(i,y)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const y=i._prevRemoved,P=i._nextRemoved;return null===y?this._removalsHead=P:y._nextRemoved=P,null===P?this._removalsTail=y:P._prevRemoved=y,this._insertAfter(i,o,c),this._addToMoves(i,c),i}_moveAfter(i,o,c){return this._unlink(i),this._insertAfter(i,o,c),this._addToMoves(i,c),i}_addAfter(i,o,c){return this._insertAfter(i,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,c){const y=null===o?this._itHead:o._next;return i._next=y,i._prev=o,null===y?this._itTail=i:y._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new mA),this._linkedRecords.put(i),i.currentIndex=c,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,c=i._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mA),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class MP{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TP{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,i))return c;return null}remove(i){const o=i._prevDup,c=i._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class mA{constructor(){this.map=new Map}put(i){const o=i.trackById;let c=this.map.get(o);c||(c=new TP,this.map.set(o,c)),c.add(i)}get(i,o){const y=this.map.get(i);return y?y.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gA(n,i,o){const c=n.previousIndex;if(null===c)return c;let y=0;return o&&c<o.length&&(y=o[c]),c+i+y}class yA{constructor(){}supports(i){return i instanceof Map||Bi(i)}create(){return new CP}}class CP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Bi(i)))throw new Or(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(c,y)=>{if(o&&o.key===y)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const P=this._getOrCreateRecordForKey(y,c);o=this._insertBeforeOrAppend(o,P)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const c=i._prev;return o._next=i,o._prev=c,i._prev=o,c&&(c._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const y=this._records.get(i);this._maybeAddToChanges(y,o);const P=y._prev,$=y._next;return P&&(P._next=$),$&&($._prev=P),y._next=null,y._prev=null,y}const c=new AP(i);return this._records.set(i,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(c=>o(i[c],c))}}class AP{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vA(){return new KS([new pA])}let KS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(null!=y){const P=y.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||vA()),deps:[[i,new fu,new bo]]}}find(c){const y=this.factories.find(P=>P.supports(c));if(null!=y)return y;throw new Or(901,!1)}}return(n=i).\u0275prov=zr({token:n,providedIn:"root",factory:vA}),i})();function _A(){return new YS([new yA])}let YS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(y){const P=y.factories.slice();c=c.concat(P)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||_A()),deps:[[i,new fu,new bo]]}}find(c){const y=this.factories.find(P=>P.supports(c));if(y)return y;throw new Or(901,!1)}}return(n=i).\u0275prov=zr({token:n,providedIn:"root",factory:_A}),i})();const RP=oA(null,"core",[]);let PP=(()=>{var n;class i{constructor(c){}}return(n=i).\u0275fac=function(c){return new(c||n)(hi(ou))},n.\u0275mod=St({type:n}),n.\u0275inj=li({}),i})();const NA=new Zr("");function fO(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function mO(n,i){Qo("NgSignals");const o=function z(n){const i=Object.create(Z);i.computation=n;const o=()=>{if(D(i),w(i),i.value===re)throw i.error;return i.value};return o[l]=i,o}(n);return null!=i&&i.equal&&(o[l].equal=i.equal),o}function gO(n){const i=ve(null);try{return n()}finally{ve(i)}}function wO(n,i){const o=An(n),c=i.elementInjector||Qa();return new ah(o).create(c,i.projectableNodes,i.hostElement,i.environmentInjector)}function SO(n){const i=An(n);if(!i)return null;const o=new ah(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},4341:(wr,Nn,je)=>{"use strict";je.d(Nn,{me:()=>S,YN:()=>Ht,zX:()=>Na,VZ:()=>ua,cz:()=>Y,kq:()=>h,vO:()=>Gt,BC:()=>Xn,vS:()=>ba,Q0:()=>Pl});var j=je(3953),F=je(177),Et=je(6648),Jt=je(1985),l=je(3073),ve=je(8750),K=je(9326),M=je(4360),A=je(6450),b=je(8496),I=je(1413),D=je(6354);let d=(()=>{var Oe;class be{constructor(Re,at){this._renderer=Re,this._elementRef=at,this.onChange=Qt=>{},this.onTouched=()=>{}}setProperty(Re,at){this._renderer.setProperty(this._elementRef.nativeElement,Re,at)}registerOnTouched(Re){this.onTouched=Re}registerOnChange(Re){this.onChange=Re}setDisabledState(Re){this.setProperty("disabled",Re)}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)(j.rXU(j.sFG),j.rXU(j.aKT))},Oe.\u0275dir=j.FsC({type:Oe}),be})(),f=(()=>{var Oe;class be extends d{}return(Oe=be).\u0275fac=(()=>{let Ne;return function(at){return(Ne||(Ne=j.xGo(Oe)))(at||Oe)}})(),Oe.\u0275dir=j.FsC({type:Oe,features:[j.Vt3]}),be})();const h=new j.nKC(""),g={provide:h,useExisting:(0,j.Rfq)(()=>S),multi:!0},E=new j.nKC("");let S=(()=>{var Oe;class be extends d{constructor(Re,at,Qt){super(Re,at),this._compositionMode=Qt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x(){const Oe=(0,F.QT)()?(0,F.QT)().getUserAgent():"";return/android (\d+)/.test(Oe.toLowerCase())}())}writeValue(Re){this.setProperty("value",null==Re?"":Re)}_handleInput(Re){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Re)}_compositionStart(){this._composing=!0}_compositionEnd(Re){this._composing=!1,this._compositionMode&&this.onChange(Re)}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)(j.rXU(j.sFG),j.rXU(j.aKT),j.rXU(E,8))},Oe.\u0275dir=j.FsC({type:Oe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Re,at){1&Re&&j.bIt("input",function(En){return at._handleInput(En.target.value)})("blur",function(){return at.onTouched()})("compositionstart",function(){return at._compositionStart()})("compositionend",function(En){return at._compositionEnd(En.target.value)})},features:[j.Jv_([g]),j.Vt3]}),be})();function k(Oe){return null==Oe||("string"==typeof Oe||Array.isArray(Oe))&&0===Oe.length}const Y=new j.nKC(""),G=new j.nKC("");function J(Oe){return null}function he(Oe){return null!=Oe}function Ce(Oe){return(0,j.jNT)(Oe)?(0,Et.H)(Oe):Oe}function et(Oe){let be={};return Oe.forEach(Ne=>{be=null!=Ne?{...be,...Ne}:be}),0===Object.keys(be).length?null:be}function le(Oe,be){return be.map(Ne=>Ne(Oe))}function ge(Oe){return Oe.map(be=>function V(Oe){return!Oe.validate}(be)?be:Ne=>be.validate(Ne))}function Ke(Oe){return null!=Oe?function Le(Oe){if(!Oe)return null;const be=Oe.filter(he);return 0==be.length?null:function(Ne){return et(le(Ne,be))}}(ge(Oe)):null}function _t(Oe){return null!=Oe?function ut(Oe){if(!Oe)return null;const be=Oe.filter(he);return 0==be.length?null:function(Ne){return function w(...Oe){const be=(0,K.ms)(Oe),{args:Ne,keys:Re}=(0,l.D)(Oe),at=new Jt.c(Qt=>{const{length:En}=Ne;if(!En)return void Qt.complete();const Fn=new Array(En);let Yr=En,zr=En;for(let ai=0;ai<En;ai++){let li=!1;(0,ve.Tg)(Ne[ai]).subscribe((0,M._)(Qt,Ni=>{li||(li=!0,zr--),Fn[ai]=Ni},()=>Yr--,void 0,()=>{(!Yr||!li)&&(zr||Qt.next(Re?(0,b.e)(Re,Fn):Fn),Qt.complete())}))}});return be?at.pipe((0,A.I)(be)):at}(le(Ne,be).map(Ce)).pipe((0,D.T)(et))}}(ge(Oe)):null}function Nt(Oe,be){return null===Oe?[be]:Array.isArray(Oe)?[...Oe,be]:[Oe,be]}function Bt(Oe){return Oe?Array.isArray(Oe)?Oe:[Oe]:[]}function lt(Oe,be){return Array.isArray(Oe)?Oe.includes(be):Oe===be}function It(Oe,be){const Ne=Bt(be);return Bt(Oe).forEach(at=>{lt(Ne,at)||Ne.push(at)}),Ne}function Tt(Oe,be){return Bt(be).filter(Ne=>!lt(Oe,Ne))}class Ot{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(be){this._rawValidators=be||[],this._composedValidatorFn=Ke(this._rawValidators)}_setAsyncValidators(be){this._rawAsyncValidators=be||[],this._composedAsyncValidatorFn=_t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(be){this._onDestroyCallbacks.push(be)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(be=>be()),this._onDestroyCallbacks=[]}reset(be=void 0){this.control&&this.control.reset(be)}hasError(be,Ne){return!!this.control&&this.control.hasError(be,Ne)}getError(be,Ne){return this.control?this.control.getError(be,Ne):null}}class vt extends Ot{get formDirective(){return null}get path(){return null}}class Gt extends Ot{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hn{constructor(be){this._cd=be}get isTouched(){var be,Ne,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(Ne=be._touched)||void 0===Ne||Ne.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.touched)}get isUntouched(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.untouched)}get isPristine(){var be,Ne,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(Ne=be._pristine)||void 0===Ne||Ne.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.pristine)}get isDirty(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.dirty)}get isValid(){var be,Ne,Re;return null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||null===(Ne=be._status)||void 0===Ne||Ne.call(be),!(null===(Re=this._cd)||void 0===Re||null===(Re=Re.control)||void 0===Re||!Re.valid)}get isInvalid(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.invalid)}get isPending(){var be;return!(null===(be=this._cd)||void 0===be||null===(be=be.control)||void 0===be||!be.pending)}get isSubmitted(){var be,Ne,Re;return null===(be=this._cd)||void 0===be||null===(Ne=be._submitted)||void 0===Ne||Ne.call(be),!(null===(Re=this._cd)||void 0===Re||!Re.submitted)}}let Xn=(()=>{var Oe;class be extends hn{constructor(Re){super(Re)}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)(j.rXU(Gt,2))},Oe.\u0275dir=j.FsC({type:Oe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Re,at){2&Re&&j.AVh("ng-untouched",at.isUntouched)("ng-touched",at.isTouched)("ng-pristine",at.isPristine)("ng-dirty",at.isDirty)("ng-valid",at.isValid)("ng-invalid",at.isInvalid)("ng-pending",at.isPending)},features:[j.Vt3]}),be})();const qt="VALID",_n="INVALID",Kt="PENDING",ln="DISABLED";class Zn{}class Ut extends Zn{constructor(be,Ne){super(),this.value=be,this.source=Ne}}class sn extends Zn{constructor(be,Ne){super(),this.pristine=be,this.source=Ne}}class On extends Zn{constructor(be,Ne){super(),this.touched=be,this.source=Ne}}class Sn extends Zn{constructor(be,Ne){super(),this.status=be,this.source=Ne}}function De(Oe){return null!=Oe&&!Array.isArray(Oe)&&"object"==typeof Oe}class N{constructor(be,Ne){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,j.EWP)(()=>this.statusReactive()),this.statusReactive=(0,j.vPA)(void 0),this._pristine=(0,j.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,j.vPA)(!0),this._touched=(0,j.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,j.vPA)(!1),this._events=new I.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(be),this._assignAsyncValidators(Ne)}get validator(){return this._composedValidatorFn}set validator(be){this._rawValidators=this._composedValidatorFn=be}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(be){this._rawAsyncValidators=this._composedAsyncValidatorFn=be}get parent(){return this._parent}get status(){return(0,j.O8t)(this.statusReactive)}set status(be){(0,j.O8t)(()=>this.statusReactive.set(be))}get valid(){return this.status===qt}get invalid(){return this.status===_n}get pending(){return this.status==Kt}get disabled(){return this.status===ln}get enabled(){return this.status!==ln}get pristine(){return(0,j.O8t)(this.pristineReactive)}set pristine(be){(0,j.O8t)(()=>this.pristineReactive.set(be))}get dirty(){return!this.pristine}get touched(){return(0,j.O8t)(this.touchedReactive)}set touched(be){(0,j.O8t)(()=>this.touchedReactive.set(be))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(be){this._assignValidators(be)}setAsyncValidators(be){this._assignAsyncValidators(be)}addValidators(be){this.setValidators(It(be,this._rawValidators))}addAsyncValidators(be){this.setAsyncValidators(It(be,this._rawAsyncValidators))}removeValidators(be){this.setValidators(Tt(be,this._rawValidators))}removeAsyncValidators(be){this.setAsyncValidators(Tt(be,this._rawAsyncValidators))}hasValidator(be){return lt(this._rawValidators,be)}hasAsyncValidator(be){return lt(this._rawAsyncValidators,be)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(be={}){var Ne;const Re=!1===this.touched;this.touched=!0;const at=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;this._parent&&!be.onlySelf&&this._parent.markAsTouched({...be,sourceControl:at}),Re&&!1!==be.emitEvent&&this._events.next(new On(!0,at))}markAllAsTouched(be={}){this.markAsTouched({onlySelf:!0,emitEvent:be.emitEvent,sourceControl:this}),this._forEachChild(Ne=>Ne.markAllAsTouched(be))}markAsUntouched(be={}){var Ne;const Re=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const at=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;this._forEachChild(Qt=>{Qt.markAsUntouched({onlySelf:!0,emitEvent:be.emitEvent,sourceControl:at})}),this._parent&&!be.onlySelf&&this._parent._updateTouched(be,at),Re&&!1!==be.emitEvent&&this._events.next(new On(!1,at))}markAsDirty(be={}){var Ne;const Re=!0===this.pristine;this.pristine=!1;const at=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;this._parent&&!be.onlySelf&&this._parent.markAsDirty({...be,sourceControl:at}),Re&&!1!==be.emitEvent&&this._events.next(new sn(!1,at))}markAsPristine(be={}){var Ne;const Re=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const at=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;this._forEachChild(Qt=>{Qt.markAsPristine({onlySelf:!0,emitEvent:be.emitEvent})}),this._parent&&!be.onlySelf&&this._parent._updatePristine(be,at),Re&&!1!==be.emitEvent&&this._events.next(new sn(!0,at))}markAsPending(be={}){var Ne;this.status=Kt;const Re=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;!1!==be.emitEvent&&(this._events.next(new Sn(this.status,Re)),this.statusChanges.emit(this.status)),this._parent&&!be.onlySelf&&this._parent.markAsPending({...be,sourceControl:Re})}disable(be={}){var Ne;const Re=this._parentMarkedDirty(be.onlySelf);this.status=ln,this.errors=null,this._forEachChild(Qt=>{Qt.disable({...be,onlySelf:!0})}),this._updateValue();const at=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;!1!==be.emitEvent&&(this._events.next(new Ut(this.value,at)),this._events.next(new Sn(this.status,at)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...be,skipPristineCheck:Re},this),this._onDisabledChange.forEach(Qt=>Qt(!0))}enable(be={}){const Ne=this._parentMarkedDirty(be.onlySelf);this.status=qt,this._forEachChild(Re=>{Re.enable({...be,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:be.emitEvent}),this._updateAncestors({...be,skipPristineCheck:Ne},this),this._onDisabledChange.forEach(Re=>Re(!1))}_updateAncestors(be,Ne){this._parent&&!be.onlySelf&&(this._parent.updateValueAndValidity(be),be.skipPristineCheck||this._parent._updatePristine({},Ne),this._parent._updateTouched({},Ne))}setParent(be){this._parent=be}getRawValue(){return this.value}updateValueAndValidity(be={}){var Ne;if(this._setInitialStatus(),this._updateValue(),this.enabled){const at=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qt||this.status===Kt)&&this._runAsyncValidator(at,be.emitEvent)}const Re=null!==(Ne=be.sourceControl)&&void 0!==Ne?Ne:this;!1!==be.emitEvent&&(this._events.next(new Ut(this.value,Re)),this._events.next(new Sn(this.status,Re)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!be.onlySelf&&this._parent.updateValueAndValidity({...be,sourceControl:Re})}_updateTreeValidity(be={emitEvent:!0}){this._forEachChild(Ne=>Ne._updateTreeValidity(be)),this.updateValueAndValidity({onlySelf:!0,emitEvent:be.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ln:qt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(be,Ne){if(this.asyncValidator){this.status=Kt,this._hasOwnPendingAsyncValidator={emitEvent:!1!==Ne};const Re=Ce(this.asyncValidator(this));this._asyncValidationSubscription=Re.subscribe(at=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(at,{emitEvent:Ne,shouldHaveEmitted:be})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var be,Ne;this._asyncValidationSubscription.unsubscribe();const Re=null!==(be=null===(Ne=this._hasOwnPendingAsyncValidator)||void 0===Ne?void 0:Ne.emitEvent)&&void 0!==be&&be;return this._hasOwnPendingAsyncValidator=null,Re}return!1}setErrors(be,Ne={}){this.errors=be,this._updateControlsErrors(!1!==Ne.emitEvent,this,Ne.shouldHaveEmitted)}get(be){let Ne=be;return null==Ne||(Array.isArray(Ne)||(Ne=Ne.split(".")),0===Ne.length)?null:Ne.reduce((Re,at)=>Re&&Re._find(at),this)}getError(be,Ne){const Re=Ne?this.get(Ne):this;return Re&&Re.errors?Re.errors[be]:null}hasError(be,Ne){return!!this.getError(be,Ne)}get root(){let be=this;for(;be._parent;)be=be._parent;return be}_updateControlsErrors(be,Ne,Re){this.status=this._calculateStatus(),be&&this.statusChanges.emit(this.status),(be||Re)&&this._events.next(new Sn(this.status,Ne)),this._parent&&this._parent._updateControlsErrors(be,Ne,Re)}_initObservables(){this.valueChanges=new j.bkB,this.statusChanges=new j.bkB}_calculateStatus(){return this._allControlsDisabled()?ln:this.errors?_n:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kt)?Kt:this._anyControlsHaveStatus(_n)?_n:qt}_anyControlsHaveStatus(be){return this._anyControls(Ne=>Ne.status===be)}_anyControlsDirty(){return this._anyControls(be=>be.dirty)}_anyControlsTouched(){return this._anyControls(be=>be.touched)}_updatePristine(be,Ne){const Re=!this._anyControlsDirty(),at=this.pristine!==Re;this.pristine=Re,this._parent&&!be.onlySelf&&this._parent._updatePristine(be,Ne),at&&this._events.next(new sn(this.pristine,Ne))}_updateTouched(be={},Ne){this.touched=this._anyControlsTouched(),this._events.next(new On(this.touched,Ne)),this._parent&&!be.onlySelf&&this._parent._updateTouched(be,Ne)}_registerOnCollectionChange(be){this._onCollectionChange=be}_setUpdateStrategy(be){De(be)&&null!=be.updateOn&&(this._updateOn=be.updateOn)}_parentMarkedDirty(be){return!be&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(be){return null}_assignValidators(be){this._rawValidators=Array.isArray(be)?be.slice():be,this._composedValidatorFn=function yr(Oe){return Array.isArray(Oe)?Ke(Oe):Oe||null}(this._rawValidators)}_assignAsyncValidators(be){this._rawAsyncValidators=Array.isArray(be)?be.slice():be,this._composedAsyncValidatorFn=function te(Oe){return Array.isArray(Oe)?_t(Oe):Oe||null}(this._rawAsyncValidators)}}const He=new j.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>gt}),gt="always";function cn(Oe,be,Ne=gt){var Re,at;(function nt(Oe,be){const Ne=function dt(Oe){return Oe._rawValidators}(Oe);null!==be.validator?Oe.setValidators(Nt(Ne,be.validator)):"function"==typeof Ne&&Oe.setValidators([Ne]);const Re=function Rt(Oe){return Oe._rawAsyncValidators}(Oe);null!==be.asyncValidator?Oe.setAsyncValidators(Nt(Re,be.asyncValidator)):"function"==typeof Re&&Oe.setAsyncValidators([Re]);const at=()=>Oe.updateValueAndValidity();We(be._rawValidators,at),We(be._rawAsyncValidators,at)})(Oe,be),be.valueAccessor.writeValue(Oe.value),(Oe.disabled||"always"===Ne)&&(null===(Re=(at=be.valueAccessor).setDisabledState)||void 0===Re||Re.call(at,Oe.disabled)),function un(Oe,be){be.valueAccessor.registerOnChange(Ne=>{Oe._pendingValue=Ne,Oe._pendingChange=!0,Oe._pendingDirty=!0,"change"===Oe.updateOn&&ar(Oe,be)})}(Oe,be),function Pr(Oe,be){const Ne=(Re,at)=>{be.valueAccessor.writeValue(Re),at&&be.viewToModelUpdate(Re)};Oe.registerOnChange(Ne),be._registerOnDestroy(()=>{Oe._unregisterOnChange(Ne)})}(Oe,be),function Bn(Oe,be){be.valueAccessor.registerOnTouched(()=>{Oe._pendingTouched=!0,"blur"===Oe.updateOn&&Oe._pendingChange&&ar(Oe,be),"submit"!==Oe.updateOn&&Oe.markAsTouched()})}(Oe,be),function ft(Oe,be){if(be.valueAccessor.setDisabledState){const Ne=Re=>{be.valueAccessor.setDisabledState(Re)};Oe.registerOnDisabledChange(Ne),be._registerOnDestroy(()=>{Oe._unregisterOnDisabledChange(Ne)})}}(Oe,be)}function We(Oe,be){Oe.forEach(Ne=>{Ne.registerOnValidatorChange&&Ne.registerOnValidatorChange(be)})}function ar(Oe,be){Oe._pendingDirty&&Oe.markAsDirty(),Oe.setValue(Oe._pendingValue,{emitModelToViewChange:!1}),be.viewToModelUpdate(Oe._pendingValue),Oe._pendingChange=!1}function ca(Oe,be){const Ne=Oe.indexOf(be);Ne>-1&&Oe.splice(Ne,1)}function _o(Oe){return"object"==typeof Oe&&null!==Oe&&2===Object.keys(Oe).length&&"value"in Oe&&"disabled"in Oe}Promise.resolve();const ka=class extends N{constructor(be=null,Ne,Re){super(function sr(Oe){return(De(Oe)?Oe.validators:Oe)||null}(Ne),function Tr(Oe,be){return(De(be)?be.asyncValidators:Oe)||null}(Re,Ne)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(be),this._setUpdateStrategy(Ne),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),De(Ne)&&(Ne.nonNullable||Ne.initialValueIsDefault)&&(this.defaultValue=_o(be)?be.value:be)}setValue(be,Ne={}){this.value=this._pendingValue=be,this._onChange.length&&!1!==Ne.emitModelToViewChange&&this._onChange.forEach(Re=>Re(this.value,!1!==Ne.emitViewToModelChange)),this.updateValueAndValidity(Ne)}patchValue(be,Ne={}){this.setValue(be,Ne)}reset(be=this.defaultValue,Ne={}){this._applyFormState(be),this.markAsPristine(Ne),this.markAsUntouched(Ne),this.setValue(this.value,Ne),this._pendingChange=!1}_updateValue(){}_anyControls(be){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(be){this._onChange.push(be)}_unregisterOnChange(be){ca(this._onChange,be)}registerOnDisabledChange(be){this._onDisabledChange.push(be)}_unregisterOnDisabledChange(be){ca(this._onDisabledChange,be)}_forEachChild(be){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(be){_o(be)?(this.value=this._pendingValue=be.value,be.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=be}},Go={provide:Gt,useExisting:(0,j.Rfq)(()=>ba)},Ca=Promise.resolve();let ba=(()=>{var Oe;class be extends Gt{constructor(Re,at,Qt,En,Fn,Yr){super(),this._changeDetectorRef=Fn,this.callSetDisabledState=Yr,this.control=new ka,this._registered=!1,this.name="",this.update=new j.bkB,this._parent=Re,this._setValidators(at),this._setAsyncValidators(Qt),this.valueAccessor=function fo(Oe,be){if(!be)return null;let Ne,Re,at;return Array.isArray(be),be.forEach(Qt=>{Qt.constructor===S?Ne=Qt:function Vs(Oe){return Object.getPrototypeOf(Oe.constructor)===f}(Qt)?Re=Qt:at=Qt}),at||Re||Ne||null}(0,En)}ngOnChanges(Re){if(this._checkForErrors(),!this._registered||"name"in Re){if(this._registered&&(this._checkName(),this.formDirective)){const at=Re.name.previousValue;this.formDirective.removeControl({name:at,path:this._getPath(at)})}this._setUpControl()}"isDisabled"in Re&&this._updateDisabled(Re),function ys(Oe,be){if(!Oe.hasOwnProperty("model"))return!1;const Ne=Oe.model;return!!Ne.isFirstChange()||!Object.is(be,Ne.currentValue)}(Re,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Re){this.viewModel=Re,this.update.emit(Re)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Re){Ca.then(()=>{var at;this.control.setValue(Re,{emitViewToModelChange:!1}),null===(at=this._changeDetectorRef)||void 0===at||at.markForCheck()})}_updateDisabled(Re){const at=Re.isDisabled.currentValue,Qt=0!==at&&(0,j.L39)(at);Ca.then(()=>{var En;Qt&&!this.control.disabled?this.control.disable():!Qt&&this.control.disabled&&this.control.enable(),null===(En=this._changeDetectorRef)||void 0===En||En.markForCheck()})}_getPath(Re){return this._parent?function Vt(Oe,be){return[...be.path,Oe]}(Re,this._parent):[Re]}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)(j.rXU(vt,9),j.rXU(Y,10),j.rXU(G,10),j.rXU(h,10),j.rXU(j.gRc,8),j.rXU(He,8))},Oe.\u0275dir=j.FsC({type:Oe,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[j.Jv_([Go]),j.Vt3,j.OA$]}),be})();const Rl={provide:h,useExisting:(0,j.Rfq)(()=>Pl),multi:!0};let Pl=(()=>{var Oe;class be extends f{writeValue(Re){this.setProperty("value",null==Re?"":Re)}registerOnChange(Re){this.onChange=at=>{Re(""==at?null:parseFloat(at))}}}return(Oe=be).\u0275fac=(()=>{let Ne;return function(at){return(Ne||(Ne=j.xGo(Oe)))(at||Oe)}})(),Oe.\u0275dir=j.FsC({type:Oe,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Re,at){1&Re&&j.bIt("input",function(En){return at.onChange(En.target.value)})("blur",function(){return at.onTouched()})},features:[j.Jv_([Rl]),j.Vt3]}),be})();function Yo(Oe){return"number"==typeof Oe?Oe:parseFloat(Oe)}let to=(()=>{var Oe;class be{constructor(){this._validator=J}ngOnChanges(Re){if(this.inputName in Re){const at=this.normalizeInput(Re[this.inputName].currentValue);this._enabled=this.enabled(at),this._validator=this._enabled?this.createValidator(at):J,this._onChange&&this._onChange()}}validate(Re){return this._validator(Re)}registerOnValidatorChange(Re){this._onChange=Re}enabled(Re){return null!=Re}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)},Oe.\u0275dir=j.FsC({type:Oe,features:[j.OA$]}),be})();const ri={provide:Y,useExisting:(0,j.Rfq)(()=>Na),multi:!0};let Na=(()=>{var Oe;class be extends to{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=Re=>Yo(Re),this.createValidator=Re=>function re(Oe){return be=>{if(k(be.value)||k(Oe))return null;const Ne=parseFloat(be.value);return!isNaN(Ne)&&Ne>Oe?{max:{max:Oe,actual:be.value}}:null}}(Re)}}return(Oe=be).\u0275fac=(()=>{let Ne;return function(at){return(Ne||(Ne=j.xGo(Oe)))(at||Oe)}})(),Oe.\u0275dir=j.FsC({type:Oe,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Re,at){2&Re&&j.BMQ("max",at._enabled?at.max:null)},inputs:{max:"max"},features:[j.Jv_([ri]),j.Vt3]}),be})();const Xa={provide:Y,useExisting:(0,j.Rfq)(()=>ua),multi:!0};let ua=(()=>{var Oe;class be extends to{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=Re=>Yo(Re),this.createValidator=Re=>function H(Oe){return be=>{if(k(be.value)||k(Oe))return null;const Ne=parseFloat(be.value);return!isNaN(Ne)&&Ne<Oe?{min:{min:Oe,actual:be.value}}:null}}(Re)}}return(Oe=be).\u0275fac=(()=>{let Ne;return function(at){return(Ne||(Ne=j.xGo(Oe)))(at||Oe)}})(),Oe.\u0275dir=j.FsC({type:Oe,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Re,at){2&Re&&j.BMQ("min",at._enabled?at.min:null)},inputs:{min:"min"},features:[j.Jv_([Xa]),j.Vt3]}),be})(),R=(()=>{var Oe;class be{}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)},Oe.\u0275mod=j.$C({type:Oe}),Oe.\u0275inj=j.G2t({}),be})(),Ht=(()=>{var Oe;class be{static withConfig(Re){var at;return{ngModule:be,providers:[{provide:He,useValue:null!==(at=Re.callSetDisabledState)&&void 0!==at?at:gt}]}}}return(Oe=be).\u0275fac=function(Re){return new(Re||Oe)},Oe.\u0275mod=j.$C({type:Oe}),Oe.\u0275inj=j.G2t({imports:[R]}),be})()},345:(wr,Nn,je)=>{"use strict";je.d(Nn,{Bb:()=>Bt,hE:()=>Tt,sG:()=>_t,up:()=>ct});var j=je(177),F=je(3953);class Et extends j.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jt extends Et{static makeCurrent(){(0,j.ZD)(new Jt)}onAndCancel(qt,_n,Kt){return qt.addEventListener(_n,Kt),()=>{qt.removeEventListener(_n,Kt)}}dispatchEvent(qt,_n){qt.dispatchEvent(_n)}remove(qt){qt.parentNode&&qt.parentNode.removeChild(qt)}createElement(qt,_n){return(_n=_n||this.getDefaultDocument()).createElement(qt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(qt){return qt.nodeType===Node.ELEMENT_NODE}isShadowRoot(qt){return qt instanceof DocumentFragment}getGlobalEventTarget(qt,_n){return"window"===_n?window:"document"===_n?qt:"body"===_n?qt.body:null}getBaseHref(qt){const _n=function ve(){return l=l||document.querySelector("base"),l?l.getAttribute("href"):null}();return null==_n?null:function K(yn){return new URL(yn,document.baseURI).pathname}(_n)}resetBaseElement(){l=null}getUserAgent(){return window.navigator.userAgent}getCookie(qt){return(0,j._b)(document.cookie,qt)}}let l=null,A=(()=>{var yn;class qt{build(){return new XMLHttpRequest}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();const b=new F.nKC("");let w=(()=>{var yn;class qt{constructor(Kt,ln){this._zone=ln,this._eventNameToPlugin=new Map,Kt.forEach(Zn=>{Zn.manager=this}),this._plugins=Kt.slice().reverse()}addEventListener(Kt,ln,Zn){return this._findPluginFor(ln).addEventListener(Kt,ln,Zn)}getZone(){return this._zone}_findPluginFor(Kt){let ln=this._eventNameToPlugin.get(Kt);if(ln)return ln;if(ln=this._plugins.find(Ut=>Ut.supports(Kt)),!ln)throw new F.wOt(5101,!1);return this._eventNameToPlugin.set(Kt,ln),ln}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(b),F.KVO(F.SKi))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();class I{constructor(qt){this._doc=qt}}const D="ng-app-id";let d=(()=>{var yn;class qt{constructor(Kt,ln,Zn,Ut={}){this.doc=Kt,this.appId=ln,this.nonce=Zn,this.platformId=Ut,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,j.Vy)(Ut),this.resetHostNodes()}addStyles(Kt){for(const ln of Kt)1===this.changeUsageCount(ln,1)&&this.onStyleAdded(ln)}removeStyles(Kt){for(const ln of Kt)this.changeUsageCount(ln,-1)<=0&&this.onStyleRemoved(ln)}ngOnDestroy(){const Kt=this.styleNodesInDOM;Kt&&(Kt.forEach(ln=>ln.remove()),Kt.clear());for(const ln of this.getAllStyles())this.onStyleRemoved(ln);this.resetHostNodes()}addHost(Kt){this.hostNodes.add(Kt);for(const ln of this.getAllStyles())this.addStyleToHost(Kt,ln)}removeHost(Kt){this.hostNodes.delete(Kt)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Kt){for(const ln of this.hostNodes)this.addStyleToHost(ln,Kt)}onStyleRemoved(Kt){var ln;const Zn=this.styleRef;null===(ln=Zn.get(Kt))||void 0===ln||null===(ln=ln.elements)||void 0===ln||ln.forEach(Ut=>Ut.remove()),Zn.delete(Kt)}collectServerRenderedStyles(){var Kt;const ln=null===(Kt=this.doc.head)||void 0===Kt?void 0:Kt.querySelectorAll(`style[${D}="${this.appId}"]`);if(null!=ln&&ln.length){const Zn=new Map;return ln.forEach(Ut=>{null!=Ut.textContent&&Zn.set(Ut.textContent,Ut)}),Zn}return null}changeUsageCount(Kt,ln){const Zn=this.styleRef;if(Zn.has(Kt)){const Ut=Zn.get(Kt);return Ut.usage+=ln,Ut.usage}return Zn.set(Kt,{usage:ln,elements:[]}),ln}getStyleElement(Kt,ln){const Zn=this.styleNodesInDOM,Ut=null==Zn?void 0:Zn.get(ln);if((null==Ut?void 0:Ut.parentNode)===Kt)return Zn.delete(ln),Ut.removeAttribute(D),Ut;{const sn=this.doc.createElement("style");return this.nonce&&sn.setAttribute("nonce",this.nonce),sn.textContent=ln,this.platformIsServer&&sn.setAttribute(D,this.appId),Kt.appendChild(sn),sn}}addStyleToHost(Kt,ln){var Zn;const Ut=this.getStyleElement(Kt,ln),sn=this.styleRef,On=null===(Zn=sn.get(ln))||void 0===Zn?void 0:Zn.elements;On?On.push(Ut):sn.set(ln,{elements:[Ut],usage:1})}resetHostNodes(){const Kt=this.hostNodes;Kt.clear(),Kt.add(this.doc.head)}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ),F.KVO(F.sZ2),F.KVO(F.BIS,8),F.KVO(F.Agw))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();const f={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h=/%COMP%/g,p="%COMP%",m=`_nghost-${p}`,g=`_ngcontent-${p}`,E=new F.nKC("",{providedIn:"root",factory:()=>!0});function X(yn,qt){return qt.map(_n=>_n.replace(h,yn))}let Y=(()=>{var yn;class qt{constructor(Kt,ln,Zn,Ut,sn,On,Sn,zn=null){this.eventManager=Kt,this.sharedStylesHost=ln,this.appId=Zn,this.removeStylesOnCompDestroy=Ut,this.doc=sn,this.platformId=On,this.ngZone=Sn,this.nonce=zn,this.rendererByCompId=new Map,this.platformIsServer=(0,j.Vy)(On),this.defaultRenderer=new G(Kt,sn,Sn,this.platformIsServer)}createRenderer(Kt,ln){if(!Kt||!ln)return this.defaultRenderer;this.platformIsServer&&ln.encapsulation===F.gXe.ShadowDom&&(ln={...ln,encapsulation:F.gXe.Emulated});const Zn=this.getOrCreateRenderer(Kt,ln);return Zn instanceof _e?Zn.applyToHost(Kt):Zn instanceof Z&&Zn.applyStyles(),Zn}getOrCreateRenderer(Kt,ln){const Zn=this.rendererByCompId;let Ut=Zn.get(ln.id);if(!Ut){const sn=this.doc,On=this.ngZone,Sn=this.eventManager,zn=this.sharedStylesHost,cr=this.removeStylesOnCompDestroy,sr=this.platformIsServer;switch(ln.encapsulation){case F.gXe.Emulated:Ut=new _e(Sn,zn,ln,this.appId,cr,sn,On,sr);break;case F.gXe.ShadowDom:return new re(Sn,zn,Kt,ln,sn,On,this.nonce,sr);default:Ut=new Z(Sn,zn,ln,cr,sn,On,sr)}Zn.set(ln.id,Ut)}return Ut}ngOnDestroy(){this.rendererByCompId.clear()}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(w),F.KVO(d),F.KVO(F.sZ2),F.KVO(E),F.KVO(j.qQ),F.KVO(F.Agw),F.KVO(F.SKi),F.KVO(F.BIS))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();class G{constructor(qt,_n,Kt,ln){this.eventManager=qt,this.doc=_n,this.ngZone=Kt,this.platformIsServer=ln,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(qt,_n){return _n?this.doc.createElementNS(f[_n]||_n,qt):this.doc.createElement(qt)}createComment(qt){return this.doc.createComment(qt)}createText(qt){return this.doc.createTextNode(qt)}appendChild(qt,_n){(H(qt)?qt.content:qt).appendChild(_n)}insertBefore(qt,_n,Kt){qt&&(H(qt)?qt.content:qt).insertBefore(_n,Kt)}removeChild(qt,_n){qt&&qt.removeChild(_n)}selectRootElement(qt,_n){let Kt="string"==typeof qt?this.doc.querySelector(qt):qt;if(!Kt)throw new F.wOt(-5104,!1);return _n||(Kt.textContent=""),Kt}parentNode(qt){return qt.parentNode}nextSibling(qt){return qt.nextSibling}setAttribute(qt,_n,Kt,ln){if(ln){_n=ln+":"+_n;const Zn=f[ln];Zn?qt.setAttributeNS(Zn,_n,Kt):qt.setAttribute(_n,Kt)}else qt.setAttribute(_n,Kt)}removeAttribute(qt,_n,Kt){if(Kt){const ln=f[Kt];ln?qt.removeAttributeNS(ln,_n):qt.removeAttribute(`${Kt}:${_n}`)}else qt.removeAttribute(_n)}addClass(qt,_n){qt.classList.add(_n)}removeClass(qt,_n){qt.classList.remove(_n)}setStyle(qt,_n,Kt,ln){ln&(F.czy.DashCase|F.czy.Important)?qt.style.setProperty(_n,Kt,ln&F.czy.Important?"important":""):qt.style[_n]=Kt}removeStyle(qt,_n,Kt){Kt&F.czy.DashCase?qt.style.removeProperty(_n):qt.style[_n]=""}setProperty(qt,_n,Kt){null!=qt&&(qt[_n]=Kt)}setValue(qt,_n){qt.nodeValue=_n}listen(qt,_n,Kt){if("string"==typeof qt&&!(qt=(0,j.QT)().getGlobalEventTarget(this.doc,qt)))throw new Error(`Unsupported event target ${qt} for event ${_n}`);return this.eventManager.addEventListener(qt,_n,this.decoratePreventDefault(Kt))}decoratePreventDefault(qt){return _n=>{if("__ngUnwrap__"===_n)return qt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>qt(_n)):qt(_n))&&_n.preventDefault()}}}function H(yn){return"TEMPLATE"===yn.tagName&&void 0!==yn.content}class re extends G{constructor(qt,_n,Kt,ln,Zn,Ut,sn,On){super(qt,Zn,Ut,On),this.sharedStylesHost=_n,this.hostEl=Kt,this.shadowRoot=Kt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Sn=X(ln.id,ln.styles);for(const zn of Sn){const cr=document.createElement("style");sn&&cr.setAttribute("nonce",sn),cr.textContent=zn,this.shadowRoot.appendChild(cr)}}nodeOrShadowRoot(qt){return qt===this.hostEl?this.shadowRoot:qt}appendChild(qt,_n){return super.appendChild(this.nodeOrShadowRoot(qt),_n)}insertBefore(qt,_n,Kt){return super.insertBefore(this.nodeOrShadowRoot(qt),_n,Kt)}removeChild(qt,_n){return super.removeChild(this.nodeOrShadowRoot(qt),_n)}parentNode(qt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(qt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Z extends G{constructor(qt,_n,Kt,ln,Zn,Ut,sn,On){super(qt,Zn,Ut,sn),this.sharedStylesHost=_n,this.removeStylesOnCompDestroy=ln,this.styles=On?X(On,Kt.styles):Kt.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _e extends Z{constructor(qt,_n,Kt,ln,Zn,Ut,sn,On){const Sn=ln+"-"+Kt.id;super(qt,_n,Kt,Zn,Ut,sn,On,Sn),this.contentAttr=function S(yn){return g.replace(h,yn)}(Sn),this.hostAttr=function k(yn){return m.replace(h,yn)}(Sn)}applyToHost(qt){this.applyStyles(),this.setAttribute(qt,this.hostAttr,"")}createElement(qt,_n){const Kt=super.createElement(qt,_n);return super.setAttribute(Kt,this.contentAttr,""),Kt}}let xe=(()=>{var yn;class qt extends I{constructor(Kt){super(Kt)}supports(Kt){return!0}addEventListener(Kt,ln,Zn){return Kt.addEventListener(ln,Zn,!1),()=>this.removeEventListener(Kt,ln,Zn)}removeEventListener(Kt,ln,Zn){return Kt.removeEventListener(ln,Zn)}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})(),oe=(()=>{var yn;class qt extends I{constructor(Kt){super(Kt),this.delegate=(0,F.WQX)(F.zAP,{optional:!0})}supports(Kt){return!!this.delegate&&this.delegate.supports(Kt)}addEventListener(Kt,ln,Zn){return this.delegate.addEventListener(Kt,ln,Zn)}removeEventListener(Kt,ln,Zn){return this.delegate.removeEventListener(Kt,ln,Zn)}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();const me=["alt","control","meta","shift"],ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J={alt:yn=>yn.altKey,control:yn=>yn.ctrlKey,meta:yn=>yn.metaKey,shift:yn=>yn.shiftKey};let he=(()=>{var yn;class qt extends I{constructor(Kt){super(Kt)}supports(Kt){return null!=qt.parseEventName(Kt)}addEventListener(Kt,ln,Zn){const Ut=qt.parseEventName(ln),sn=qt.eventCallback(Ut.fullKey,Zn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,j.QT)().onAndCancel(Kt,Ut.domEventName,sn))}static parseEventName(Kt){const ln=Kt.toLowerCase().split("."),Zn=ln.shift();if(0===ln.length||"keydown"!==Zn&&"keyup"!==Zn)return null;const Ut=qt._normalizeKey(ln.pop());let sn="",On=ln.indexOf("code");if(On>-1&&(ln.splice(On,1),sn="code."),me.forEach(zn=>{const cr=ln.indexOf(zn);cr>-1&&(ln.splice(cr,1),sn+=zn+".")}),sn+=Ut,0!=ln.length||0===Ut.length)return null;const Sn={};return Sn.domEventName=Zn,Sn.fullKey=sn,Sn}static matchEventFullKeyCode(Kt,ln){let Zn=ne[Kt.key]||Kt.key,Ut="";return ln.indexOf("code.")>-1&&(Zn=Kt.code,Ut="code."),!(null==Zn||!Zn)&&(Zn=Zn.toLowerCase()," "===Zn?Zn="space":"."===Zn&&(Zn="dot"),me.forEach(sn=>{sn!==Zn&&(0,J[sn])(Kt)&&(Ut+=sn+".")}),Ut+=Zn,Ut===ln)}static eventCallback(Kt,ln,Zn){return Ut=>{qt.matchEventFullKeyCode(Ut,Kt)&&Zn.runGuarded(()=>ln(Ut))}}static _normalizeKey(Kt){return"esc"===Kt?"escape":Kt}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac}),qt})();const _t=(0,F.oH4)(F.fpN,"browser",[{provide:F.Agw,useValue:j.AJ},{provide:F.PLl,useValue:function ge(){Jt.makeCurrent()},multi:!0},{provide:j.qQ,useFactory:function Ke(){return(0,F.TL$)(document),document},deps:[]}]),Nt=new F.nKC(""),dt=[{provide:F.e01,useClass:class M{addToWindow(qt){F.JZv.getAngularTestability=(Kt,ln=!0)=>{const Zn=qt.findTestabilityInTree(Kt,ln);if(null==Zn)throw new F.wOt(5103,!1);return Zn},F.JZv.getAllAngularTestabilities=()=>qt.getAllTestabilities(),F.JZv.getAllAngularRootElements=()=>qt.getAllRootElements(),F.JZv.frameworkStabilizers||(F.JZv.frameworkStabilizers=[]),F.JZv.frameworkStabilizers.push(Kt=>{const ln=F.JZv.getAllAngularTestabilities();let Zn=ln.length;const Ut=function(){Zn--,0==Zn&&Kt()};ln.forEach(sn=>{sn.whenStable(Ut)})})}findTestabilityInTree(qt,_n,Kt){if(null==_n)return null;const ln=qt.getTestability(_n);return null!=ln?ln:Kt?(0,j.QT)().isShadowRoot(_n)?this.findTestabilityInTree(qt,_n.host,!0):this.findTestabilityInTree(qt,_n.parentElement,!0):null}},deps:[]},{provide:F.WHO,useClass:F.NYb,deps:[F.SKi,F.giA,F.e01]},{provide:F.NYb,useClass:F.NYb,deps:[F.SKi,F.giA,F.e01]}],Rt=[{provide:F.H8p,useValue:"root"},{provide:F.zcH,useFactory:function Le(){return new F.zcH},deps:[]},{provide:b,useClass:xe,multi:!0,deps:[j.qQ,F.SKi,F.Agw]},{provide:b,useClass:he,multi:!0,deps:[j.qQ]},{provide:b,useClass:oe,multi:!0},Y,d,w,{provide:F._9s,useExisting:Y},{provide:j.N0,useClass:A,deps:[]},[]];let Bt=(()=>{var yn;class qt{constructor(Kt){}static withServerTransition(Kt){return{ngModule:qt,providers:[{provide:F.sZ2,useValue:Kt.appId}]}}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(Nt,12))},yn.\u0275mod=F.$C({type:yn}),yn.\u0275inj=F.G2t({providers:[...Rt,...dt],imports:[j.MD,F.Hbi]}),qt})(),Tt=(()=>{var yn;class qt{constructor(Kt){this._doc=Kt}getTitle(){return this._doc.title}setTitle(Kt){this._doc.title=Kt||""}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac,providedIn:"root"}),qt})(),ct=(()=>{var yn;class qt{}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)},yn.\u0275prov=F.jDH({token:yn,factory:function(Kt){let ln=null;return ln=Kt?new(Kt||yn):F.KVO(pt),ln},providedIn:"root"}),qt})(),pt=(()=>{var yn;class qt extends ct{constructor(Kt){super(),this._doc=Kt}sanitize(Kt,ln){if(null==ln)return null;switch(Kt){case F.WPN.NONE:return ln;case F.WPN.HTML:return(0,F.ZF7)(ln,"HTML")?(0,F.rcV)(ln):(0,F.h9k)(this._doc,String(ln)).toString();case F.WPN.STYLE:return(0,F.ZF7)(ln,"Style")?(0,F.rcV)(ln):ln;case F.WPN.SCRIPT:if((0,F.ZF7)(ln,"Script"))return(0,F.rcV)(ln);throw new F.wOt(5200,!1);case F.WPN.URL:return(0,F.ZF7)(ln,"URL")?(0,F.rcV)(ln):(0,F.$MX)(String(ln));case F.WPN.RESOURCE_URL:if((0,F.ZF7)(ln,"ResourceURL"))return(0,F.rcV)(ln);throw new F.wOt(5201,!1);default:throw new F.wOt(5202,!1)}}bypassSecurityTrustHtml(Kt){return(0,F.Kcf)(Kt)}bypassSecurityTrustStyle(Kt){return(0,F.cWb)(Kt)}bypassSecurityTrustScript(Kt){return(0,F.UyX)(Kt)}bypassSecurityTrustUrl(Kt){return(0,F.osQ)(Kt)}bypassSecurityTrustResourceUrl(Kt){return(0,F.e5t)(Kt)}}return(yn=qt).\u0275fac=function(Kt){return new(Kt||yn)(F.KVO(j.qQ))},yn.\u0275prov=F.jDH({token:yn,factory:yn.\u0275fac,providedIn:"root"}),qt})()},9858:(wr,Nn,je)=>{"use strict";je.d(Nn,{nX:()=>Gr,Zp:()=>an,Z:()=>$s,Xk:()=>dt,Kp:()=>Ua,b:()=>hi,Ix:()=>bo,Wk:()=>wd,iI:()=>_h,Sd:()=>jn});var j=je(3953),F=je(1985),Et=je(8071),l=je(6648),ve=je(7673),K=je(4412),M=je(4572);const b=(0,je(1853).L)(pe=>function(){pe(this),this.name="EmptyError",this.message="no elements in sequence"});var w=je(8793),I=je(9030),D=je(1203),d=je(8810),f=je(983),h=je(17),p=je(1413),m=je(8359),g=je(177),x=je(6354),E=je(5558),S=je(6697),k=je(9326),X=je(9974),G=je(5964),z=je(1397),ee=je(4360);function H(pe){return(0,X.N)((Te,Fe)=>{let Ee=!1;Te.subscribe((0,ee._)(Fe,$e=>{Ee=!0,Fe.next($e)},()=>{Ee||Fe.next(pe),Fe.complete()}))})}function re(pe=Z){return(0,X.N)((Te,Fe)=>{let Ee=!1;Te.subscribe((0,ee._)(Fe,$e=>{Ee=!0,Fe.next($e)},()=>Ee?Fe.complete():Fe.error(pe())))})}function Z(){return new b}var _e=je(3669);function xe(pe,Te){const Fe=arguments.length>=2;return Ee=>Ee.pipe(pe?(0,G.p)(($e,St)=>pe($e,St,Ee)):_e.D,(0,S.s)(1),Fe?H(Te):re(()=>new b))}function oe(pe,Te){return(0,Et.T)(Te)?(0,z.Z)(pe,Te,1):(0,z.Z)(pe,1)}var me=je(8141),ne=je(8750);function J(pe){return(0,X.N)((Te,Fe)=>{let St,Ee=null,$e=!1;Ee=Te.subscribe((0,ee._)(Fe,void 0,void 0,Lt=>{St=(0,ne.Tg)(pe(Lt,J(pe)(Te))),Ee?(Ee.unsubscribe(),Ee=null,St.subscribe(Fe)):$e=!0})),$e&&(Ee.unsubscribe(),Ee=null,St.subscribe(Fe))})}function et(pe){return pe<=0?()=>f.w:(0,X.N)((Te,Fe)=>{let Ee=[];Te.subscribe((0,ee._)(Fe,$e=>{Ee.push($e),pe<Ee.length&&Ee.shift()},()=>{for(const $e of Ee)Fe.next($e);Fe.complete()},void 0,()=>{Ee=null}))})}var V=je(3703);function ge(pe){return(0,X.N)((Te,Fe)=>{try{Te.subscribe(Fe)}finally{Fe.add(pe)}})}var Le=je(9898),Ke=je(5343),_t=je(6365),Nt=je(345);const dt="primary",Rt=Symbol("RouteTitle");class Bt{constructor(Te){this.params=Te||{}}has(Te){return Object.prototype.hasOwnProperty.call(this.params,Te)}get(Te){if(this.has(Te)){const Fe=this.params[Te];return Array.isArray(Fe)?Fe[0]:Fe}return null}getAll(Te){if(this.has(Te)){const Fe=this.params[Te];return Array.isArray(Fe)?Fe:[Fe]}return[]}get keys(){return Object.keys(this.params)}}function lt(pe){return new Bt(pe)}function It(pe,Te,Fe){const Ee=Fe.path.split("/");if(Ee.length>pe.length||"full"===Fe.pathMatch&&(Te.hasChildren()||Ee.length<pe.length))return null;const $e={};for(let St=0;St<Ee.length;St++){const Lt=Ee[St],kn=pe[St];if(":"===Lt[0])$e[Lt.substring(1)]=kn;else if(Lt!==kn.path)return null}return{consumed:pe.slice(0,Ee.length),posParams:$e}}function Ot(pe,Te){const Fe=pe?vt(pe):void 0,Ee=Te?vt(Te):void 0;if(!Fe||!Ee||Fe.length!=Ee.length)return!1;let $e;for(let St=0;St<Fe.length;St++)if($e=Fe[St],!Gt(pe[$e],Te[$e]))return!1;return!0}function vt(pe){return[...Object.keys(pe),...Object.getOwnPropertySymbols(pe)]}function Gt(pe,Te){if(Array.isArray(pe)&&Array.isArray(Te)){if(pe.length!==Te.length)return!1;const Fe=[...pe].sort(),Ee=[...Te].sort();return Fe.every(($e,St)=>Ee[St]===$e)}return pe===Te}function hn(pe){return pe.length>0?pe[pe.length-1]:null}function $n(pe){return function Jt(pe){return!!pe&&(pe instanceof F.c||(0,Et.T)(pe.lift)&&(0,Et.T)(pe.subscribe))}(pe)?pe:(0,j.jNT)(pe)?(0,l.H)(Promise.resolve(pe)):(0,ve.of)(pe)}const bn={exact:function Ln(pe,Te,Fe){if(!fn(pe.segments,Te.segments)||!Tn(pe.segments,Te.segments,Fe)||pe.numberOfChildren!==Te.numberOfChildren)return!1;for(const Ee in Te.children)if(!pe.children[Ee]||!Ln(pe.children[Ee],Te.children[Ee],Fe))return!1;return!0},subset:mn},Xn={exact:function gr(pe,Te){return Ot(pe,Te)},subset:function nr(pe,Te){return Object.keys(Te).length<=Object.keys(pe).length&&Object.keys(Te).every(Fe=>Gt(pe[Fe],Te[Fe]))},ignored:()=>!0};function Mn(pe,Te,Fe){return bn[Fe.paths](pe.root,Te.root,Fe.matrixParams)&&Xn[Fe.queryParams](pe.queryParams,Te.queryParams)&&!("exact"===Fe.fragment&&pe.fragment!==Te.fragment)}function mn(pe,Te,Fe){return qn(pe,Te,Te.segments,Fe)}function qn(pe,Te,Fe,Ee){if(pe.segments.length>Fe.length){const $e=pe.segments.slice(0,Fe.length);return!(!fn($e,Fe)||Te.hasChildren()||!Tn($e,Fe,Ee))}if(pe.segments.length===Fe.length){if(!fn(pe.segments,Fe)||!Tn(pe.segments,Fe,Ee))return!1;for(const $e in Te.children)if(!pe.children[$e]||!mn(pe.children[$e],Te.children[$e],Ee))return!1;return!0}{const $e=Fe.slice(0,pe.segments.length),St=Fe.slice(pe.segments.length);return!!(fn(pe.segments,$e)&&Tn(pe.segments,$e,Ee)&&pe.children[dt])&&qn(pe.children[dt],Te,St,Ee)}}function Tn(pe,Te,Fe){return Te.every((Ee,$e)=>Xn[Fe](pe[$e].parameters,Ee.parameters))}class ct{constructor(Te=new pt([],{}),Fe={},Ee=null){this.root=Te,this.queryParams=Fe,this.fragment=Ee}get queryParamMap(){var Te;return null!==(Te=this._queryParamMap)&&void 0!==Te||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return xn.serialize(this)}}class pt{constructor(Te,Fe){this.segments=Te,this.children=Fe,this.parent=null,Object.values(Fe).forEach(Ee=>Ee.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pn(this)}}class Qe{constructor(Te,Fe){this.path=Te,this.parameters=Fe}get parameterMap(){var Te;return null!==(Te=this._parameterMap)&&void 0!==Te||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return Ut(this)}}function fn(pe,Te){return pe.length===Te.length&&pe.every((Fe,Ee)=>Fe.path===Te[Ee].path)}let jn=(()=>{var pe;class Te{}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:()=>new on,providedIn:"root"}),Te})();class on{parse(Te){const Fe=new Ye(Te);return new ct(Fe.parseRootSegment(),Fe.parseQueryParams(),Fe.parseFragment())}serialize(Te){const Fe=`/${Un(Te.root,!0)}`,Ee=function On(pe){const Te=Object.entries(pe).map(([Fe,Ee])=>Array.isArray(Ee)?Ee.map($e=>`${qt(Fe)}=${qt($e)}`).join("&"):`${qt(Fe)}=${qt(Ee)}`).filter(Fe=>Fe);return Te.length?`?${Te.join("&")}`:""}(Te.queryParams);return`${Fe}${Ee}${"string"==typeof Te.fragment?`#${function _n(pe){return encodeURI(pe)}(Te.fragment)}`:""}`}}const xn=new on;function Pn(pe){return pe.segments.map(Te=>Ut(Te)).join("/")}function Un(pe,Te){if(!pe.hasChildren())return Pn(pe);if(Te){const Fe=pe.children[dt]?Un(pe.children[dt],!1):"",Ee=[];return Object.entries(pe.children).forEach(([$e,St])=>{$e!==dt&&Ee.push(`${$e}:${Un(St,!1)}`)}),Ee.length>0?`${Fe}(${Ee.join("//")})`:Fe}{const Fe=function Cn(pe,Te){let Fe=[];return Object.entries(pe.children).forEach(([Ee,$e])=>{Ee===dt&&(Fe=Fe.concat(Te($e,Ee)))}),Object.entries(pe.children).forEach(([Ee,$e])=>{Ee!==dt&&(Fe=Fe.concat(Te($e,Ee)))}),Fe}(pe,(Ee,$e)=>$e===dt?[Un(pe.children[dt],!1)]:[`${$e}:${Un(Ee,!1)}`]);return 1===Object.keys(pe.children).length&&null!=pe.children[dt]?`${Pn(pe)}/${Fe[0]}`:`${Pn(pe)}/(${Fe.join("//")})`}}function yn(pe){return encodeURIComponent(pe).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qt(pe){return yn(pe).replace(/%3B/gi,";")}function Kt(pe){return yn(pe).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(pe){return decodeURIComponent(pe)}function Zn(pe){return ln(pe.replace(/\+/g,"%20"))}function Ut(pe){return`${Kt(pe.path)}${function sn(pe){return Object.entries(pe).map(([Te,Fe])=>`;${Kt(Te)}=${Kt(Fe)}`).join("")}(pe.parameters)}`}const Sn=/^[^\/()?;#]+/;function zn(pe){const Te=pe.match(Sn);return Te?Te[0]:""}const cr=/^[^\/()?;=#]+/,yr=/^[^=?&#]+/,te=/^[^&#]+/;class Ye{constructor(Te){this.url=Te,this.remaining=Te}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const Te={};if(this.consumeOptional("?"))do{this.parseQueryParam(Te)}while(this.consumeOptional("&"));return Te}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const Te=[];for(this.peekStartsWith("(")||Te.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Te.push(this.parseSegment());let Fe={};this.peekStartsWith("/(")&&(this.capture("/"),Fe=this.parseParens(!0));let Ee={};return this.peekStartsWith("(")&&(Ee=this.parseParens(!1)),(Te.length>0||Object.keys(Fe).length>0)&&(Ee[dt]=new pt(Te,Fe)),Ee}parseSegment(){const Te=zn(this.remaining);if(""===Te&&this.peekStartsWith(";"))throw new j.wOt(4009,!1);return this.capture(Te),new Qe(ln(Te),this.parseMatrixParams())}parseMatrixParams(){const Te={};for(;this.consumeOptional(";");)this.parseParam(Te);return Te}parseParam(Te){const Fe=function sr(pe){const Te=pe.match(cr);return Te?Te[0]:""}(this.remaining);if(!Fe)return;this.capture(Fe);let Ee="";if(this.consumeOptional("=")){const $e=zn(this.remaining);$e&&(Ee=$e,this.capture(Ee))}Te[ln(Fe)]=ln(Ee)}parseQueryParam(Te){const Fe=function Tr(pe){const Te=pe.match(yr);return Te?Te[0]:""}(this.remaining);if(!Fe)return;this.capture(Fe);let Ee="";if(this.consumeOptional("=")){const Lt=function De(pe){const Te=pe.match(te);return Te?Te[0]:""}(this.remaining);Lt&&(Ee=Lt,this.capture(Ee))}const $e=Zn(Fe),St=Zn(Ee);if(Te.hasOwnProperty($e)){let Lt=Te[$e];Array.isArray(Lt)||(Lt=[Lt],Te[$e]=Lt),Lt.push(St)}else Te[$e]=St}parseParens(Te){const Fe={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Ee=zn(this.remaining),$e=this.remaining[Ee.length];if("/"!==$e&&")"!==$e&&";"!==$e)throw new j.wOt(4010,!1);let St;Ee.indexOf(":")>-1?(St=Ee.slice(0,Ee.indexOf(":")),this.capture(St),this.capture(":")):Te&&(St=dt);const Lt=this.parseChildren();Fe[St]=1===Object.keys(Lt).length?Lt[dt]:new pt([],Lt),this.consumeOptional("//")}return Fe}peekStartsWith(Te){return this.remaining.startsWith(Te)}consumeOptional(Te){return!!this.peekStartsWith(Te)&&(this.remaining=this.remaining.substring(Te.length),!0)}capture(Te){if(!this.consumeOptional(Te))throw new j.wOt(4011,!1)}}function T(pe){return pe.segments.length>0?new pt([],{[dt]:pe}):pe}function N(pe){const Te={};for(const[Ee,$e]of Object.entries(pe.children)){const St=N($e);if(Ee===dt&&0===St.segments.length&&St.hasChildren())for(const[Lt,kn]of Object.entries(St.children))Te[Lt]=kn;else(St.segments.length>0||St.hasChildren())&&(Te[Ee]=St)}return function B(pe){if(1===pe.numberOfChildren&&pe.children[dt]){const Te=pe.children[dt];return new pt(pe.segments.concat(Te.segments),Te.children)}return pe}(new pt(pe.segments,Te))}function O(pe){return pe instanceof ct}function q(pe){var Te;let Fe;const St=T(function Ee(Lt){const kn={};for(const An of Lt.children){const Rr=Ee(An);kn[An.outlet]=Rr}const dr=new pt(Lt.url,kn);return Lt===pe&&(Fe=dr),dr}(pe.root));return null!==(Te=Fe)&&void 0!==Te?Te:St}function ce(pe,Te,Fe,Ee){let $e=pe;for(;$e.parent;)$e=$e.parent;if(0===Te.length)return gt($e,$e,$e,Fe,Ee);const St=function Ve(pe){if("string"==typeof pe[0]&&1===pe.length&&"/"===pe[0])return new cn(!0,0,pe);let Te=0,Fe=!1;const Ee=pe.reduce(($e,St,Lt)=>{if("object"==typeof St&&null!=St){if(St.outlets){const kn={};return Object.entries(St.outlets).forEach(([dr,An])=>{kn[dr]="string"==typeof An?An.split("/"):An}),[...$e,{outlets:kn}]}if(St.segmentPath)return[...$e,St.segmentPath]}return"string"!=typeof St?[...$e,St]:0===Lt?(St.split("/").forEach((kn,dr)=>{0==dr&&"."===kn||(0==dr&&""===kn?Fe=!0:".."===kn?Te++:""!=kn&&$e.push(kn))}),$e):[...$e,St]},[]);return new cn(Fe,Te,Ee)}(Te);if(St.toRoot())return gt($e,$e,new pt([],{}),Fe,Ee);const Lt=function ft(pe,Te,Fe){if(pe.isAbsolute)return new We(Te,!0,0);if(!Fe)return new We(Te,!1,NaN);if(null===Fe.parent)return new We(Fe,!0,0);const Ee=Ge(pe.commands[0])?0:1;return function nt(pe,Te,Fe){let Ee=pe,$e=Te,St=Fe;for(;St>$e;){if(St-=$e,Ee=Ee.parent,!Ee)throw new j.wOt(4005,!1);$e=Ee.segments.length}return new We(Ee,!1,$e-St)}(Fe,Fe.segments.length-1+Ee,pe.numberOfDoubleDots)}(St,$e,pe),kn=Lt.processChildren?Bn(Lt.segmentGroup,Lt.index,St.commands):un(Lt.segmentGroup,Lt.index,St.commands);return gt($e,Lt.segmentGroup,kn,Fe,Ee)}function Ge(pe){return"object"==typeof pe&&null!=pe&&!pe.outlets&&!pe.segmentPath}function He(pe){return"object"==typeof pe&&null!=pe&&pe.outlets}function gt(pe,Te,Fe,Ee,$e){let Lt,St={};Ee&&Object.entries(Ee).forEach(([dr,An])=>{St[dr]=Array.isArray(An)?An.map(Rr=>`${Rr}`):`${An}`}),Lt=pe===Te?Fe:Vt(pe,Te,Fe);const kn=T(N(Lt));return new ct(kn,St,$e)}function Vt(pe,Te,Fe){const Ee={};return Object.entries(pe.children).forEach(([$e,St])=>{Ee[$e]=St===Te?Fe:Vt(St,Te,Fe)}),new pt(pe.segments,Ee)}class cn{constructor(Te,Fe,Ee){if(this.isAbsolute=Te,this.numberOfDoubleDots=Fe,this.commands=Ee,Te&&Ee.length>0&&Ge(Ee[0]))throw new j.wOt(4003,!1);const $e=Ee.find(He);if($e&&$e!==hn(Ee))throw new j.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class We{constructor(Te,Fe,Ee){this.segmentGroup=Te,this.processChildren=Fe,this.index=Ee}}function un(pe,Te,Fe){var Ee;if(null!==(Ee=pe)&&void 0!==Ee||(pe=new pt([],{})),0===pe.segments.length&&pe.hasChildren())return Bn(pe,Te,Fe);const $e=function ar(pe,Te,Fe){let Ee=0,$e=Te;const St={match:!1,pathIndex:0,commandIndex:0};for(;$e<pe.segments.length;){if(Ee>=Fe.length)return St;const Lt=pe.segments[$e],kn=Fe[Ee];if(He(kn))break;const dr=`${kn}`,An=Ee<Fe.length-1?Fe[Ee+1]:null;if($e>0&&void 0===dr)break;if(dr&&An&&"object"==typeof An&&void 0===An.outlets){if(!Us(dr,An,Lt))return St;Ee+=2}else{if(!Us(dr,{},Lt))return St;Ee++}$e++}return{match:!0,pathIndex:$e,commandIndex:Ee}}(pe,Te,Fe),St=Fe.slice($e.commandIndex);if($e.match&&$e.pathIndex<pe.segments.length){const Lt=new pt(pe.segments.slice(0,$e.pathIndex),{});return Lt.children[dt]=new pt(pe.segments.slice($e.pathIndex),pe.children),Bn(Lt,0,St)}return $e.match&&0===St.length?new pt(pe.segments,{}):$e.match&&!pe.hasChildren()?Pr(pe,Te,Fe):$e.match?Bn(pe,0,St):Pr(pe,Te,Fe)}function Bn(pe,Te,Fe){if(0===Fe.length)return new pt(pe.segments,{});{const Ee=function Dt(pe){return He(pe[0])?pe[0].outlets:{[dt]:pe}}(Fe),$e={};if(Object.keys(Ee).some(St=>St!==dt)&&pe.children[dt]&&1===pe.numberOfChildren&&0===pe.children[dt].segments.length){const St=Bn(pe.children[dt],Te,Fe);return new pt(pe.segments,St.children)}return Object.entries(Ee).forEach(([St,Lt])=>{"string"==typeof Lt&&(Lt=[Lt]),null!==Lt&&($e[St]=un(pe.children[St],Te,Lt))}),Object.entries(pe.children).forEach(([St,Lt])=>{void 0===Ee[St]&&($e[St]=Lt)}),new pt(pe.segments,$e)}}function Pr(pe,Te,Fe){const Ee=pe.segments.slice(0,Te);let $e=0;for(;$e<Fe.length;){const St=Fe[$e];if(He(St)){const dr=Ui(St.outlets);return new pt(Ee,dr)}if(0===$e&&Ge(Fe[0])){Ee.push(new Qe(pe.segments[Te].path,ji(Fe[0]))),$e++;continue}const Lt=He(St)?St.outlets[dt]:`${St}`,kn=$e<Fe.length-1?Fe[$e+1]:null;Lt&&kn&&Ge(kn)?(Ee.push(new Qe(Lt,ji(kn))),$e+=2):(Ee.push(new Qe(Lt,{})),$e++)}return new pt(Ee,{})}function Ui(pe){const Te={};return Object.entries(pe).forEach(([Fe,Ee])=>{"string"==typeof Ee&&(Ee=[Ee]),null!==Ee&&(Te[Fe]=Pr(new pt([],{}),0,Ee))}),Te}function ji(pe){const Te={};return Object.entries(pe).forEach(([Fe,Ee])=>Te[Fe]=`${Ee}`),Te}function Us(pe,Te,Fe){return pe==Fe.path&&Ot(Te,Fe.parameters)}const bs="imperative";var wi=function(pe){return pe[pe.NavigationStart=0]="NavigationStart",pe[pe.NavigationEnd=1]="NavigationEnd",pe[pe.NavigationCancel=2]="NavigationCancel",pe[pe.NavigationError=3]="NavigationError",pe[pe.RoutesRecognized=4]="RoutesRecognized",pe[pe.ResolveStart=5]="ResolveStart",pe[pe.ResolveEnd=6]="ResolveEnd",pe[pe.GuardsCheckStart=7]="GuardsCheckStart",pe[pe.GuardsCheckEnd=8]="GuardsCheckEnd",pe[pe.RouteConfigLoadStart=9]="RouteConfigLoadStart",pe[pe.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",pe[pe.ChildActivationStart=11]="ChildActivationStart",pe[pe.ChildActivationEnd=12]="ChildActivationEnd",pe[pe.ActivationStart=13]="ActivationStart",pe[pe.ActivationEnd=14]="ActivationEnd",pe[pe.Scroll=15]="Scroll",pe[pe.NavigationSkipped=16]="NavigationSkipped",pe}(wi||{});class us{constructor(Te,Fe){this.id=Te,this.url=Fe}}class $s extends us{constructor(Te,Fe,Ee="imperative",$e=null){super(Te,Fe),this.type=wi.NavigationStart,this.navigationTrigger=Ee,this.restoredState=$e}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ys extends us{constructor(Te,Fe,Ee){super(Te,Fe),this.urlAfterRedirects=Ee,this.type=wi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Vs=function(pe){return pe[pe.Redirect=0]="Redirect",pe[pe.SupersededByNewNavigation=1]="SupersededByNewNavigation",pe[pe.NoDataFromResolver=2]="NoDataFromResolver",pe[pe.GuardRejected=3]="GuardRejected",pe}(Vs||{}),Ko=function(pe){return pe[pe.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",pe[pe.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",pe}(Ko||{});class fo extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.reason=Ee,this.code=$e,this.type=wi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vo extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.reason=Ee,this.code=$e,this.type=wi.NavigationSkipped}}class ea extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.error=Ee,this.target=$e,this.type=wi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ta extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.urlAfterRedirects=Ee,this.state=$e,this.type=wi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.urlAfterRedirects=Ee,this.state=$e,this.type=wi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eo extends us{constructor(Te,Fe,Ee,$e,St){super(Te,Fe),this.urlAfterRedirects=Ee,this.state=$e,this.shouldActivate=St,this.type=wi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ca extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.urlAfterRedirects=Ee,this.state=$e,this.type=wi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _o extends us{constructor(Te,Fe,Ee,$e){super(Te,Fe),this.urlAfterRedirects=Ee,this.state=$e,this.type=wi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ka{constructor(Te){this.route=Te,this.type=wi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wa{constructor(Te){this.route=Te,this.type=wi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ke{constructor(Te){this.snapshot=Te,this.type=wi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ht{constructor(Te){this.snapshot=Te,this.type=wi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kt{constructor(Te){this.snapshot=Te,this.type=wi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Be{constructor(Te){this.snapshot=Te,this.type=wi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zt{constructor(Te,Fe,Ee){this.routerEvent=Te,this.position=Fe,this.anchor=Ee,this.type=wi.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class In{}class ts{constructor(Te,Fe){this.url=Te,this.navigationBehaviorOptions=Fe}}function ao(pe){return pe.outlet||dt}function ot(pe){var Te;if(!pe)return null;if(null!==(Te=pe.routeConfig)&&void 0!==Te&&Te._injector)return pe.routeConfig._injector;for(let Fe=pe.parent;Fe;Fe=Fe.parent){const Ee=Fe.routeConfig;if(null!=Ee&&Ee._loadedInjector)return Ee._loadedInjector;if(null!=Ee&&Ee._injector)return Ee._injector}return null}class Ct{get injector(){var Te,Fe;return null!==(Te=ot(null===(Fe=this.route)||void 0===Fe?void 0:Fe.snapshot))&&void 0!==Te?Te:this.rootInjector}set injector(Te){}constructor(Te){this.rootInjector=Te,this.outlet=null,this.route=null,this.children=new an(this.rootInjector),this.attachRef=null}}let an=(()=>{var pe;class Te{constructor(Ee){this.rootInjector=Ee,this.contexts=new Map}onChildOutletCreated(Ee,$e){const St=this.getOrCreateContext(Ee);St.outlet=$e,this.contexts.set(Ee,St)}onChildOutletDestroyed(Ee){const $e=this.getContext(Ee);$e&&($e.outlet=null,$e.attachRef=null)}onOutletDeactivated(){const Ee=this.contexts;return this.contexts=new Map,Ee}onOutletReAttached(Ee){this.contexts=Ee}getOrCreateContext(Ee){let $e=this.getContext(Ee);return $e||($e=new Ct(this.rootInjector),this.contexts.set(Ee,$e)),$e}getContext(Ee){return this.contexts.get(Ee)||null}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)(j.KVO(j.uvJ))},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();class vn{constructor(Te){this._root=Te}get root(){return this._root.value}parent(Te){const Fe=this.pathFromRoot(Te);return Fe.length>1?Fe[Fe.length-2]:null}children(Te){const Fe=Rn(Te,this._root);return Fe?Fe.children.map(Ee=>Ee.value):[]}firstChild(Te){const Fe=Rn(Te,this._root);return Fe&&Fe.children.length>0?Fe.children[0].value:null}siblings(Te){const Fe=Dn(Te,this._root);return Fe.length<2?[]:Fe[Fe.length-2].children.map($e=>$e.value).filter($e=>$e!==Te)}pathFromRoot(Te){return Dn(Te,this._root).map(Fe=>Fe.value)}}function Rn(pe,Te){if(pe===Te.value)return Te;for(const Fe of Te.children){const Ee=Rn(pe,Fe);if(Ee)return Ee}return null}function Dn(pe,Te){if(pe===Te.value)return[Te];for(const Fe of Te.children){const Ee=Dn(pe,Fe);if(Ee.length)return Ee.unshift(Te),Ee}return[]}class ir{constructor(Te,Fe){this.value=Te,this.children=Fe}toString(){return`TreeNode(${this.value})`}}function hr(pe){const Te={};return pe&&pe.children.forEach(Fe=>Te[Fe.value.outlet]=Fe),Te}class vr extends vn{constructor(Te,Fe){super(Te),this.snapshot=Fe,Vi(this,Te)}toString(){return this.snapshot.toString()}}function Sr(pe){const Te=function qr(pe){const St=new oi([],{},{},"",{},dt,pe,null,{});return new Pi("",new ir(St,[]))}(pe),Fe=new K.t([new Qe("",{})]),Ee=new K.t({}),$e=new K.t({}),St=new K.t({}),Lt=new K.t(""),kn=new Gr(Fe,Ee,St,Lt,$e,dt,pe,Te.root);return kn.snapshot=Te.root,new vr(new ir(kn,[]),Te)}class Gr{constructor(Te,Fe,Ee,$e,St,Lt,kn,dr){var An,Rr;this.urlSubject=Te,this.paramsSubject=Fe,this.queryParamsSubject=Ee,this.fragmentSubject=$e,this.dataSubject=St,this.outlet=Lt,this.component=kn,this._futureSnapshot=dr,this.title=null!==(An=null===(Rr=this.dataSubject)||void 0===Rr?void 0:Rr.pipe((0,x.T)(fi=>fi[Rt])))&&void 0!==An?An:(0,ve.of)(void 0),this.url=Te,this.params=Fe,this.queryParams=Ee,this.fragment=$e,this.data=St}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Te;return null!==(Te=this._paramMap)&&void 0!==Te||(this._paramMap=this.params.pipe((0,x.T)(Fe=>lt(Fe)))),this._paramMap}get queryParamMap(){var Te;return null!==(Te=this._queryParamMap)&&void 0!==Te||(this._queryParamMap=this.queryParams.pipe((0,x.T)(Fe=>lt(Fe)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ni(pe,Te,Fe="emptyOnly"){var Ee;let $e;const{routeConfig:St}=pe;var Lt;return $e=null===Te||"always"!==Fe&&""!==(null==St?void 0:St.path)&&(Te.component||null!==(Ee=Te.routeConfig)&&void 0!==Ee&&Ee.loadComponent)?{params:{...pe.params},data:{...pe.data},resolve:{...pe.data,...null!==(Lt=pe._resolvedData)&&void 0!==Lt?Lt:{}}}:{params:{...Te.params,...pe.params},data:{...Te.data,...pe.data},resolve:{...pe.data,...Te.data,...null==St?void 0:St.data,...pe._resolvedData}},St&&Or(St)&&($e.resolve[Rt]=St.title),$e}class oi{get title(){var Te;return null===(Te=this.data)||void 0===Te?void 0:Te[Rt]}constructor(Te,Fe,Ee,$e,St,Lt,kn,dr,An){this.url=Te,this.params=Fe,this.queryParams=Ee,this.fragment=$e,this.data=St,this.outlet=Lt,this.component=kn,this.routeConfig=dr,this._resolve=An}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Te;return null!==(Te=this._paramMap)&&void 0!==Te||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){var Te;return null!==(Te=this._queryParamMap)&&void 0!==Te||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Ee=>Ee.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pi extends vn{constructor(Te,Fe){super(Fe),this.url=Te,Vi(this,Fe)}toString(){return ds(this._root)}}function Vi(pe,Te){Te.value._routerState=pe,Te.children.forEach(Fe=>Vi(pe,Fe))}function ds(pe){const Te=pe.children.length>0?` { ${pe.children.map(ds).join(", ")} } `:"";return`${pe.value}${Te}`}function Li(pe){if(pe.snapshot){const Te=pe.snapshot,Fe=pe._futureSnapshot;pe.snapshot=Fe,Ot(Te.queryParams,Fe.queryParams)||pe.queryParamsSubject.next(Fe.queryParams),Te.fragment!==Fe.fragment&&pe.fragmentSubject.next(Fe.fragment),Ot(Te.params,Fe.params)||pe.paramsSubject.next(Fe.params),function Tt(pe,Te){if(pe.length!==Te.length)return!1;for(let Fe=0;Fe<pe.length;++Fe)if(!Ot(pe[Fe],Te[Fe]))return!1;return!0}(Te.url,Fe.url)||pe.urlSubject.next(Fe.url),Ot(Te.data,Fe.data)||pe.dataSubject.next(Fe.data)}else pe.snapshot=pe._futureSnapshot,pe.dataSubject.next(pe._futureSnapshot.data)}function Ys(pe,Te){const Fe=Ot(pe.params,Te.params)&&function xt(pe,Te){return fn(pe,Te)&&pe.every((Fe,Ee)=>Ot(Fe.parameters,Te[Ee].parameters))}(pe.url,Te.url);return Fe&&!(!pe.parent!=!Te.parent)&&(!pe.parent||Ys(pe.parent,Te.parent))}function Or(pe){return"string"==typeof pe.title||null===pe.title}let na=(()=>{var pe;class Te{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new j.bkB,this.deactivateEvents=new j.bkB,this.attachEvents=new j.bkB,this.detachEvents=new j.bkB,this.parentContexts=(0,j.WQX)(an),this.location=(0,j.WQX)(j.c1b),this.changeDetector=(0,j.WQX)(j.gRc),this.inputBinder=(0,j.WQX)(Hs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(Ee){if(Ee.name){const{firstChange:$e,previousValue:St}=Ee.name;if($e)return;this.isTrackedInParentContexts(St)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(St)),this.initializeOutletWithName()}}ngOnDestroy(){var Ee;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(Ee=this.inputBinder)||void 0===Ee||Ee.unsubscribeFromRouteData(this)}isTrackedInParentContexts(Ee){var $e;return(null===($e=this.parentContexts.getContext(Ee))||void 0===$e?void 0:$e.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const Ee=this.parentContexts.getContext(this.name);null!=Ee&&Ee.route&&(Ee.attachRef?this.attach(Ee.attachRef,Ee.route):this.activateWith(Ee.route,Ee.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j.wOt(4012,!1);this.location.detach();const Ee=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Ee.instance),Ee}attach(Ee,$e){var St;this.activated=Ee,this._activatedRoute=$e,this.location.insert(Ee.hostView),null===(St=this.inputBinder)||void 0===St||St.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(Ee.instance)}deactivate(){if(this.activated){const Ee=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Ee)}}activateWith(Ee,$e){var St;if(this.isActivated)throw new j.wOt(4013,!1);this._activatedRoute=Ee;const Lt=this.location,dr=Ee.snapshot.component,An=this.parentContexts.getOrCreateContext(this.name).children,Rr=new Aa(Ee,An,Lt.injector);this.activated=Lt.createComponent(dr,{index:Lt.length,injector:Rr,environmentInjector:$e}),this.changeDetector.markForCheck(),null===(St=this.inputBinder)||void 0===St||St.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275dir=j.FsC({type:pe,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[j.OA$]}),Te})();class Aa{__ngOutletInjector(Te){return new Aa(this.route,this.childContexts,Te)}constructor(Te,Fe,Ee){this.route=Te,this.childContexts=Fe,this.parent=Ee}get(Te,Fe){return Te===Gr?this.route:Te===an?this.childContexts:this.parent.get(Te,Fe)}}const Hs=new j.nKC("");let Yl=(()=>{var pe;class Te{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(Ee){this.unsubscribeFromRouteData(Ee),this.subscribeToRouteData(Ee)}unsubscribeFromRouteData(Ee){var $e;null===($e=this.outletDataSubscriptions.get(Ee))||void 0===$e||$e.unsubscribe(),this.outletDataSubscriptions.delete(Ee)}subscribeToRouteData(Ee){const{activatedRoute:$e}=Ee,St=(0,M.z)([$e.queryParams,$e.params,$e.data]).pipe((0,E.n)(([Lt,kn,dr],An)=>(dr={...Lt,...kn,...dr},0===An?(0,ve.of)(dr):Promise.resolve(dr)))).subscribe(Lt=>{if(!Ee.isActivated||!Ee.activatedComponentRef||Ee.activatedRoute!==$e||null===$e.component)return void this.unsubscribeFromRouteData(Ee);const kn=(0,j.HJs)($e.component);if(kn)for(const{templateName:dr}of kn.inputs)Ee.activatedComponentRef.setInput(dr,Lt[dr]);else this.unsubscribeFromRouteData(Ee)});this.outletDataSubscriptions.set(Ee,St)}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac}),Te})();function Yo(pe,Te,Fe){if(Fe&&pe.shouldReuseRoute(Te.value,Fe.value.snapshot)){const Ee=Fe.value;Ee._futureSnapshot=Te.value;const $e=function to(pe,Te,Fe){return Te.children.map(Ee=>{for(const $e of Fe.children)if(pe.shouldReuseRoute(Ee.value,$e.value.snapshot))return Yo(pe,Ee,$e);return Yo(pe,Ee)})}(pe,Te,Fe);return new ir(Ee,$e)}{if(pe.shouldAttach(Te.value)){const St=pe.retrieve(Te.value);if(null!==St){const Lt=St.route;return Lt.value._futureSnapshot=Te.value,Lt.children=Te.children.map(kn=>Yo(pe,kn)),Lt}}const Ee=function ri(pe){return new Gr(new K.t(pe.url),new K.t(pe.params),new K.t(pe.queryParams),new K.t(pe.fragment),new K.t(pe.data),pe.outlet,pe.component,pe)}(Te.value),$e=Te.children.map(St=>Yo(pe,St));return new ir(Ee,$e)}}class Na{constructor(Te,Fe){this.redirectTo=Te,this.navigationBehaviorOptions=Fe}}const Xa="ngNavigationCancelingError";function ua(pe,Te){const{redirectTo:Fe,navigationBehaviorOptions:Ee}=O(Te)?{redirectTo:Te,navigationBehaviorOptions:void 0}:Te,$e=Zl(!1,Vs.Redirect);return $e.url=Fe,$e.navigationBehaviorOptions=Ee,$e}function Zl(pe,Te){const Fe=new Error(`NavigationCancelingError: ${pe||""}`);return Fe[Xa]=!0,Fe.cancellationCode=Te,Fe}function Cs(pe){return!!pe&&pe[Xa]}class da{constructor(Te,Fe,Ee,$e,St){this.routeReuseStrategy=Te,this.futureState=Fe,this.currState=Ee,this.forwardEvent=$e,this.inputBindingEnabled=St}activate(Te){const Fe=this.futureState._root,Ee=this.currState?this.currState._root:null;this.deactivateChildRoutes(Fe,Ee,Te),Li(this.futureState.root),this.activateChildRoutes(Fe,Ee,Te)}deactivateChildRoutes(Te,Fe,Ee){const $e=hr(Fe);Te.children.forEach(St=>{const Lt=St.value.outlet;this.deactivateRoutes(St,$e[Lt],Ee),delete $e[Lt]}),Object.values($e).forEach(St=>{this.deactivateRouteAndItsChildren(St,Ee)})}deactivateRoutes(Te,Fe,Ee){const $e=Te.value,St=Fe?Fe.value:null;if($e===St)if($e.component){const Lt=Ee.getContext($e.outlet);Lt&&this.deactivateChildRoutes(Te,Fe,Lt.children)}else this.deactivateChildRoutes(Te,Fe,Ee);else St&&this.deactivateRouteAndItsChildren(Fe,Ee)}deactivateRouteAndItsChildren(Te,Fe){Te.value.component&&this.routeReuseStrategy.shouldDetach(Te.value.snapshot)?this.detachAndStoreRouteSubtree(Te,Fe):this.deactivateRouteAndOutlet(Te,Fe)}detachAndStoreRouteSubtree(Te,Fe){const Ee=Fe.getContext(Te.value.outlet),$e=Ee&&Te.value.component?Ee.children:Fe,St=hr(Te);for(const Lt of Object.values(St))this.deactivateRouteAndItsChildren(Lt,$e);if(Ee&&Ee.outlet){const Lt=Ee.outlet.detach(),kn=Ee.children.onOutletDeactivated();this.routeReuseStrategy.store(Te.value.snapshot,{componentRef:Lt,route:Te,contexts:kn})}}deactivateRouteAndOutlet(Te,Fe){const Ee=Fe.getContext(Te.value.outlet),$e=Ee&&Te.value.component?Ee.children:Fe,St=hr(Te);for(const Lt of Object.values(St))this.deactivateRouteAndItsChildren(Lt,$e);Ee&&(Ee.outlet&&(Ee.outlet.deactivate(),Ee.children.onOutletDeactivated()),Ee.attachRef=null,Ee.route=null)}activateChildRoutes(Te,Fe,Ee){const $e=hr(Fe);Te.children.forEach(St=>{this.activateRoutes(St,$e[St.value.outlet],Ee),this.forwardEvent(new Be(St.value.snapshot))}),Te.children.length&&this.forwardEvent(new ht(Te.value.snapshot))}activateRoutes(Te,Fe,Ee){const $e=Te.value,St=Fe?Fe.value:null;if(Li($e),$e===St)if($e.component){const Lt=Ee.getOrCreateContext($e.outlet);this.activateChildRoutes(Te,Fe,Lt.children)}else this.activateChildRoutes(Te,Fe,Ee);else if($e.component){const Lt=Ee.getOrCreateContext($e.outlet);if(this.routeReuseStrategy.shouldAttach($e.snapshot)){const kn=this.routeReuseStrategy.retrieve($e.snapshot);this.routeReuseStrategy.store($e.snapshot,null),Lt.children.onOutletReAttached(kn.contexts),Lt.attachRef=kn.componentRef,Lt.route=kn.route.value,Lt.outlet&&Lt.outlet.attach(kn.componentRef,kn.route.value),Li(kn.route.value),this.activateChildRoutes(Te,null,Lt.children)}else Lt.attachRef=null,Lt.route=$e,Lt.outlet&&Lt.outlet.activateWith($e,Lt.injector),this.activateChildRoutes(Te,null,Lt.children)}else this.activateChildRoutes(Te,null,Ee)}}class xs{constructor(Te){this.path=Te,this.route=this.path[this.path.length-1]}}class kl{constructor(Te,Fe){this.component=Te,this.route=Fe}}function po(pe,Te,Fe){const Ee=pe._root;return ja(Ee,Te?Te._root:null,Fe,[Ee.value])}function vl(pe,Te){const Fe=Symbol(),Ee=Te.get(pe,Fe);return Ee===Fe?"function"!=typeof pe||(0,j.LfX)(pe)?Te.get(pe):pe:Ee}function ja(pe,Te,Fe,Ee,$e={canDeactivateChecks:[],canActivateChecks:[]}){const St=hr(Te);return pe.children.forEach(Lt=>{(function pc(pe,Te,Fe,Ee,$e={canDeactivateChecks:[],canActivateChecks:[]}){const St=pe.value,Lt=Te?Te.value:null,kn=Fe?Fe.getContext(pe.value.outlet):null;if(Lt&&St.routeConfig===Lt.routeConfig){const dr=function ii(pe,Te,Fe){if("function"==typeof Fe)return Fe(pe,Te);switch(Fe){case"pathParamsChange":return!fn(pe.url,Te.url);case"pathParamsOrQueryParamsChange":return!fn(pe.url,Te.url)||!Ot(pe.queryParams,Te.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ys(pe,Te)||!Ot(pe.queryParams,Te.queryParams);default:return!Ys(pe,Te)}}(Lt,St,St.routeConfig.runGuardsAndResolvers);dr?$e.canActivateChecks.push(new xs(Ee)):(St.data=Lt.data,St._resolvedData=Lt._resolvedData),ja(pe,Te,St.component?kn?kn.children:null:Fe,Ee,$e),dr&&kn&&kn.outlet&&kn.outlet.isActivated&&$e.canDeactivateChecks.push(new kl(kn.outlet.component,Lt))}else Lt&&Fa(Te,kn,$e),$e.canActivateChecks.push(new xs(Ee)),ja(pe,null,St.component?kn?kn.children:null:Fe,Ee,$e)})(Lt,St[Lt.value.outlet],Fe,Ee.concat([Lt.value]),$e),delete St[Lt.value.outlet]}),Object.entries(St).forEach(([Lt,kn])=>Fa(kn,Fe.getContext(Lt),$e)),$e}function Fa(pe,Te,Fe){const Ee=hr(pe),$e=pe.value;Object.entries(Ee).forEach(([St,Lt])=>{Fa(Lt,$e.component?Te?Te.children.getContext(St):null:Te,Fe)}),Fe.canDeactivateChecks.push(new kl($e.component&&Te&&Te.outlet&&Te.outlet.isActivated?Te.outlet.component:null,$e))}function R(pe){return"function"==typeof pe}function bt(pe){return pe instanceof b||"EmptyError"===(null==pe?void 0:pe.name)}const Yt=Symbol("INITIAL_VALUE");function Ht(){return(0,E.n)(pe=>(0,M.z)(pe.map(Te=>Te.pipe((0,S.s)(1),function Y(...pe){const Te=(0,k.lI)(pe);return(0,X.N)((Fe,Ee)=>{(Te?(0,w.x)(pe,Fe,Te):(0,w.x)(pe,Fe)).subscribe(Ee)})}(Yt)))).pipe((0,x.T)(Te=>{for(const Fe of Te)if(!0!==Fe){if(Fe===Yt)return Yt;if(!1===Fe||wn(Fe))return Fe}return!0}),(0,G.p)(Te=>Te!==Yt),(0,S.s)(1)))}function wn(pe){return O(pe)||pe instanceof Na}function zr(pe){return(0,D.F)((0,me.M)(Te=>{if("boolean"!=typeof Te)throw ua(0,Te)}),(0,x.T)(Te=>!0===Te))}class li{constructor(Te){this.segmentGroup=Te||null}}class Ni extends Error{constructor(Te){super(),this.urlTree=Te}}function ws(pe){return(0,d.$)(new li(pe))}class go{constructor(Te,Fe){this.urlSerializer=Te,this.urlTree=Fe}lineralizeSegments(Te,Fe){let Ee=[],$e=Fe.root;for(;;){if(Ee=Ee.concat($e.segments),0===$e.numberOfChildren)return(0,ve.of)(Ee);if($e.numberOfChildren>1||!$e.children[dt])return(0,d.$)(new j.wOt(4e3,!1));$e=$e.children[dt]}}applyRedirectCommands(Te,Fe,Ee,$e,St){if("string"!=typeof Fe){const kn=Fe,{queryParams:dr,fragment:An,routeConfig:Rr,url:fi,outlet:Mr,params:Jr,data:Co,title:Rs}=$e,io=(0,j.N4e)(St,()=>kn({params:Jr,data:Co,queryParams:dr,fragment:An,routeConfig:Rr,url:fi,outlet:Mr,title:Rs}));if(io instanceof ct)throw new Ni(io);Fe=io}const Lt=this.applyRedirectCreateUrlTree(Fe,this.urlSerializer.parse(Fe),Te,Ee);if("/"===Fe[0])throw new Ni(Lt);return Lt}applyRedirectCreateUrlTree(Te,Fe,Ee,$e){const St=this.createSegmentGroup(Te,Fe.root,Ee,$e);return new ct(St,this.createQueryParams(Fe.queryParams,this.urlTree.queryParams),Fe.fragment)}createQueryParams(Te,Fe){const Ee={};return Object.entries(Te).forEach(([$e,St])=>{if("string"==typeof St&&":"===St[0]){const kn=St.substring(1);Ee[$e]=Fe[kn]}else Ee[$e]=St}),Ee}createSegmentGroup(Te,Fe,Ee,$e){const St=this.createSegments(Te,Fe.segments,Ee,$e);let Lt={};return Object.entries(Fe.children).forEach(([kn,dr])=>{Lt[kn]=this.createSegmentGroup(Te,dr,Ee,$e)}),new pt(St,Lt)}createSegments(Te,Fe,Ee,$e){return Fe.map(St=>":"===St.path[0]?this.findPosParam(Te,St,$e):this.findOrReturn(St,Ee))}findPosParam(Te,Fe,Ee){const $e=Ee[Fe.path.substring(1)];if(!$e)throw new j.wOt(4001,!1);return $e}findOrReturn(Te,Fe){let Ee=0;for(const $e of Fe){if($e.path===Te.path)return Fe.splice(Ee),$e;Ee++}return Te}}const zo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ps(pe,Te,Fe,Ee,$e){const St=Bs(pe,Te,Fe);return St.matched?(Ee=function Go(pe,Te){var Fe;return pe.providers&&!pe._injector&&(pe._injector=(0,j.Ol2)(pe.providers,Te,`Route: ${pe.path}`)),null!==(Fe=pe._injector)&&void 0!==Fe?Fe:Te}(Te,Ee),function ai(pe,Te,Fe,Ee){const $e=Te.canMatch;if(!$e||0===$e.length)return(0,ve.of)(!0);const St=$e.map(Lt=>{const kn=vl(Lt,pe);return $n(function Je(pe){return pe&&R(pe.canMatch)}(kn)?kn.canMatch(Te,Fe):(0,j.N4e)(pe,()=>kn(Te,Fe)))});return(0,ve.of)(St).pipe(Ht(),zr())}(Ee,Te,Fe).pipe((0,x.T)(Lt=>!0===Lt?St:{...zo}))):(0,ve.of)(St)}function Bs(pe,Te,Fe){var Ee,$e;if("**"===Te.path)return function Zr(pe){return{matched:!0,parameters:pe.length>0?hn(pe).parameters:{},consumedSegments:pe,remainingSegments:[],positionalParamSegments:{}}}(Fe);if(""===Te.path)return"full"===Te.pathMatch&&(pe.hasChildren()||Fe.length>0)?{...zo}:{matched:!0,consumedSegments:[],remainingSegments:Fe,parameters:{},positionalParamSegments:{}};const Lt=(Te.matcher||It)(Fe,pe,Te);if(!Lt)return{...zo};const kn={};Object.entries(null!==(Ee=Lt.posParams)&&void 0!==Ee?Ee:{}).forEach(([An,Rr])=>{kn[An]=Rr.path});const dr=Lt.consumed.length>0?{...kn,...Lt.consumed[Lt.consumed.length-1].parameters}:kn;return{matched:!0,consumedSegments:Lt.consumed,remainingSegments:Fe.slice(Lt.consumed.length),parameters:dr,positionalParamSegments:null!==($e=Lt.posParams)&&void 0!==$e?$e:{}}}function Zs(pe,Te,Fe,Ee){return Fe.length>0&&function ci(pe,Te,Fe){return Fe.some(Ee=>fr(pe,Te,Ee)&&ao(Ee)!==dt)}(pe,Fe,Ee)?{segmentGroup:new pt(Te,As(Ee,new pt(Fe,pe.children))),slicedSegments:[]}:0===Fe.length&&function Po(pe,Te,Fe){return Fe.some(Ee=>fr(pe,Te,Ee))}(pe,Fe,Ee)?{segmentGroup:new pt(pe.segments,Js(pe,Fe,Ee,pe.children)),slicedSegments:Fe}:{segmentGroup:new pt(pe.segments,pe.children),slicedSegments:Fe}}function Js(pe,Te,Fe,Ee){const $e={};for(const St of Fe)if(fr(pe,Te,St)&&!Ee[ao(St)]){const Lt=new pt([],{});$e[ao(St)]=Lt}return{...Ee,...$e}}function As(pe,Te){const Fe={};Fe[dt]=Te;for(const Ee of pe)if(""===Ee.path&&ao(Ee)!==dt){const $e=new pt([],{});Fe[ao(Ee)]=$e}return Fe}function fr(pe,Te,Fe){return(!(pe.hasChildren()||Te.length>0)||"full"!==Fe.pathMatch)&&""===Fe.path}class jf{}class _l{constructor(Te,Fe,Ee,$e,St,Lt,kn){this.injector=Te,this.configLoader=Fe,this.rootComponentType=Ee,this.config=$e,this.urlTree=St,this.paramsInheritanceStrategy=Lt,this.urlSerializer=kn,this.applyRedirects=new go(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(Te){return new j.wOt(4002,`'${Te.segmentGroup}'`)}recognize(){const Te=Zs(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(Te).pipe((0,x.T)(({children:Fe,rootSnapshot:Ee})=>{const $e=new ir(Ee,Fe),St=new Pi("",$e),Lt=function ie(pe,Te,Fe=null,Ee=null){return ce(q(pe),Te,Fe,Ee)}(Ee,[],this.urlTree.queryParams,this.urlTree.fragment);return Lt.queryParams=this.urlTree.queryParams,St.url=this.urlSerializer.serialize(Lt),{state:St,tree:Lt}}))}match(Te){const Fe=new oi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),dt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,Te,dt,Fe).pipe((0,x.T)(Ee=>({children:Ee,rootSnapshot:Fe})),J(Ee=>{if(Ee instanceof Ni)return this.urlTree=Ee.urlTree,this.match(Ee.urlTree.root);throw Ee instanceof li?this.noMatchError(Ee):Ee}))}processSegmentGroup(Te,Fe,Ee,$e,St){return 0===Ee.segments.length&&Ee.hasChildren()?this.processChildren(Te,Fe,Ee,St):this.processSegment(Te,Fe,Ee,Ee.segments,$e,!0,St).pipe((0,x.T)(Lt=>Lt instanceof ir?[Lt]:[]))}processChildren(Te,Fe,Ee,$e){const St=[];for(const Lt of Object.keys(Ee.children))"primary"===Lt?St.unshift(Lt):St.push(Lt);return(0,l.H)(St).pipe(oe(Lt=>{const kn=Ee.children[Lt],dr=function Eo(pe,Te){const Fe=pe.filter(Ee=>ao(Ee)===Te);return Fe.push(...pe.filter(Ee=>ao(Ee)!==Te)),Fe}(Fe,Lt);return this.processSegmentGroup(Te,dr,kn,Lt,$e)}),function Ce(pe,Te){return(0,X.N)(function he(pe,Te,Fe,Ee,$e){return(St,Lt)=>{let kn=Fe,dr=Te,An=0;St.subscribe((0,ee._)(Lt,Rr=>{const fi=An++;dr=kn?pe(dr,Rr,fi):(kn=!0,Rr),Ee&&Lt.next(dr)},$e&&(()=>{kn&&Lt.next(dr),Lt.complete()})))}}(pe,Te,arguments.length>=2,!0))}((Lt,kn)=>(Lt.push(...kn),Lt)),H(null),function le(pe,Te){const Fe=arguments.length>=2;return Ee=>Ee.pipe(pe?(0,G.p)(($e,St)=>pe($e,St,Ee)):_e.D,et(1),Fe?H(Te):re(()=>new b))}(),(0,z.Z)(Lt=>{if(null===Lt)return ws(Ee);const kn=Fl(Lt);return function bd(pe){pe.sort((Te,Fe)=>Te.value.outlet===dt?-1:Fe.value.outlet===dt?1:Te.value.outlet.localeCompare(Fe.value.outlet))}(kn),(0,ve.of)(kn)}))}processSegment(Te,Fe,Ee,$e,St,Lt,kn){return(0,l.H)(Fe).pipe(oe(dr=>{var An;return this.processSegmentAgainstRoute(null!==(An=dr._injector)&&void 0!==An?An:Te,Fe,dr,Ee,$e,St,Lt,kn).pipe(J(Rr=>{if(Rr instanceof li)return(0,ve.of)(null);throw Rr}))}),xe(dr=>!!dr),J(dr=>{if(bt(dr))return function uu(pe,Te,Fe){return 0===Te.length&&!pe.children[Fe]}(Ee,$e,St)?(0,ve.of)(new jf):ws(Ee);throw dr}))}processSegmentAgainstRoute(Te,Fe,Ee,$e,St,Lt,kn,dr){return function Gi(pe,Te,Fe,Ee){return!!(ao(pe)===Ee||Ee!==dt&&fr(Te,Fe,pe))&&Bs(Te,pe,Fe).matched}(Ee,$e,St,Lt)?void 0===Ee.redirectTo?this.matchSegmentAgainstRoute(Te,$e,Ee,St,Lt,dr):this.allowRedirects&&kn?this.expandSegmentAgainstRouteUsingRedirect(Te,$e,Fe,Ee,St,Lt,dr):ws($e):ws($e)}expandSegmentAgainstRouteUsingRedirect(Te,Fe,Ee,$e,St,Lt,kn){var dr,An;const{matched:Rr,parameters:fi,consumedSegments:Mr,positionalParamSegments:Jr,remainingSegments:Co}=Bs(Fe,$e,St);if(!Rr)return ws(Fe);"string"==typeof $e.redirectTo&&"/"===$e.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Rs=new oi(St,fi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mc($e),ao($e),null!==(dr=null!==(An=$e.component)&&void 0!==An?An:$e._loadedComponent)&&void 0!==dr?dr:null,$e,xd($e)),io=ni(Rs,kn,this.paramsInheritanceStrategy);Rs.params=Object.freeze(io.params),Rs.data=Object.freeze(io.data);const Ja=this.applyRedirects.applyRedirectCommands(Mr,$e.redirectTo,Jr,Rs,Te);return this.applyRedirects.lineralizeSegments($e,Ja).pipe((0,z.Z)(cl=>this.processSegment(Te,Ee,Fe,cl.concat(Co),Lt,!1,kn)))}matchSegmentAgainstRoute(Te,Fe,Ee,$e,St,Lt){const kn=Ps(Fe,Ee,$e,Te);return"**"===Ee.path&&(Fe.children={}),kn.pipe((0,E.n)(dr=>{var An;return dr.matched?(Te=null!==(An=Ee._injector)&&void 0!==An?An:Te,this.getChildConfig(Te,Ee,$e).pipe((0,E.n)(({routes:Rr})=>{var fi,Mr,Jr;const Co=null!==(fi=Ee._loadedInjector)&&void 0!==fi?fi:Te,{parameters:Rs,consumedSegments:io,remainingSegments:Ja}=dr,cl=new oi(io,Rs,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mc(Ee),ao(Ee),null!==(Mr=null!==(Jr=Ee.component)&&void 0!==Jr?Jr:Ee._loadedComponent)&&void 0!==Mr?Mr:null,Ee,xd(Ee)),No=ni(cl,Lt,this.paramsInheritanceStrategy);cl.params=Object.freeze(No.params),cl.data=Object.freeze(No.data);const{segmentGroup:Uc,slicedSegments:Md}=Zs(Fe,io,Ja,Rr);if(0===Md.length&&Uc.hasChildren())return this.processChildren(Co,Rr,Uc,cl).pipe((0,x.T)(Gl=>new ir(cl,Gl)));if(0===Rr.length&&0===Md.length)return(0,ve.of)(new ir(cl,[]));const jo=ao(Ee)===St;return this.processSegment(Co,Rr,Uc,Md,jo?dt:St,!0,cl).pipe((0,x.T)(Gl=>new ir(cl,Gl instanceof ir?[Gl]:[])))}))):ws(Fe)}))}getChildConfig(Te,Fe,Ee){return Fe.children?(0,ve.of)({routes:Fe.children,injector:Te}):Fe.loadChildren?void 0!==Fe._loadedRoutes?(0,ve.of)({routes:Fe._loadedRoutes,injector:Fe._loadedInjector}):function Yr(pe,Te,Fe,Ee){const $e=Te.canLoad;if(void 0===$e||0===$e.length)return(0,ve.of)(!0);const St=$e.map(Lt=>{const kn=vl(Lt,pe);return $n(function se(pe){return pe&&R(pe.canLoad)}(kn)?kn.canLoad(Te,Fe):(0,j.N4e)(pe,()=>kn(Te,Fe)))});return(0,ve.of)(St).pipe(Ht(),zr())}(Te,Fe,Ee).pipe((0,z.Z)($e=>$e?this.configLoader.loadChildren(Te,Fe).pipe((0,me.M)(St=>{Fe._loadedRoutes=St.routes,Fe._loadedInjector=St.injector})):function Ro(pe){return(0,d.$)(Zl(!1,Vs.GuardRejected))}())):(0,ve.of)({routes:[],injector:Te})}}function du(pe){const Te=pe.value.routeConfig;return Te&&""===Te.path}function Fl(pe){const Te=[],Fe=new Set;for(const Ee of pe){if(!du(Ee)){Te.push(Ee);continue}const $e=Te.find(St=>Ee.value.routeConfig===St.value.routeConfig);void 0!==$e?($e.children.push(...Ee.children),Fe.add($e)):Te.push(Ee)}for(const Ee of Fe){const $e=Fl(Ee.children);Te.push(new ir(Ee.value,$e))}return Te.filter(Ee=>!Fe.has(Ee))}function mc(pe){return pe.data||{}}function xd(pe){return pe.resolve||{}}function Uf(pe){const Te=pe.children.map(Fe=>Uf(Fe)).flat();return[pe,...Te]}function Jl(pe){return(0,E.n)(Te=>{const Fe=pe(Te);return Fe?(0,l.H)(Fe).pipe((0,x.T)(()=>Te)):(0,ve.of)(Te)})}let Uu=(()=>{var pe;class Te{buildTitle(Ee){let $e,St=Ee.root;for(;void 0!==St;){var Lt;$e=null!==(Lt=this.getResolvedTitleForRoute(St))&&void 0!==Lt?Lt:$e,St=St.children.find(kn=>kn.outlet===dt)}return $e}getResolvedTitleForRoute(Ee){return Ee.data[Rt]}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:()=>(0,j.WQX)(hs),providedIn:"root"}),Te})(),hs=(()=>{var pe;class Te extends Uu{constructor(Ee){super(),this.title=Ee}updateTitle(Ee){const $e=this.buildTitle(Ee);void 0!==$e&&this.title.setTitle($e)}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)(j.KVO(Nt.hE))},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();const Da=new j.nKC("",{providedIn:"root",factory:()=>({})});let Ql=(()=>{var pe;class Te{}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275cmp=j.VBU({type:pe,selectors:[["ng-component"]],standalone:!0,features:[j.aNF],decls:1,vars:0,template:function(Ee,$e){1&Ee&&j.nrm(0,"router-outlet")},dependencies:[na],encapsulation:2}),Te})();function ha(pe){const Te=pe.children&&pe.children.map(ha),Fe=Te?{...pe,children:Te}:{...pe};return!Fe.component&&!Fe.loadComponent&&(Te||Fe.loadChildren)&&Fe.outlet&&Fe.outlet!==dt&&(Fe.component=Ql),Fe}const no=new j.nKC("");let Ds=(()=>{var pe;class Te{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,j.WQX)(j.Ql9)}loadComponent(Ee){if(this.componentLoaders.get(Ee))return this.componentLoaders.get(Ee);if(Ee._loadedComponent)return(0,ve.of)(Ee._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(Ee);const $e=$n(Ee.loadComponent()).pipe((0,x.T)(Ze),(0,me.M)(Lt=>{this.onLoadEndListener&&this.onLoadEndListener(Ee),Ee._loadedComponent=Lt}),ge(()=>{this.componentLoaders.delete(Ee)})),St=new h.G($e,()=>new p.B).pipe((0,Le.B)());return this.componentLoaders.set(Ee,St),St}loadChildren(Ee,$e){if(this.childrenLoaders.get($e))return this.childrenLoaders.get($e);if($e._loadedRoutes)return(0,ve.of)({routes:$e._loadedRoutes,injector:$e._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener($e);const Lt=function fh(pe,Te,Fe,Ee){return $n(pe.loadChildren()).pipe((0,x.T)(Ze),(0,z.Z)($e=>$e instanceof j.Co$||Array.isArray($e)?(0,ve.of)($e):(0,l.H)(Te.compileModuleAsync($e))),(0,x.T)($e=>{Ee&&Ee(pe);let St,Lt,kn=!1;return Array.isArray($e)?(Lt=$e,!0):(St=$e.create(Fe).injector,Lt=St.get(no,[],{optional:!0,self:!0}).flat()),{routes:Lt.map(ha),injector:St}}))}($e,this.compiler,Ee,this.onLoadEndListener).pipe(ge(()=>{this.childrenLoaders.delete($e)})),kn=new h.G(Lt,()=>new p.B).pipe((0,Le.B)());return this.childrenLoaders.set($e,kn),kn}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();function Ze(pe){return function Se(pe){return pe&&"object"==typeof pe&&"default"in pe}(pe)?pe.default:pe}let Zt=(()=>{var pe;class Te{}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:()=>(0,j.WQX)(qe),providedIn:"root"}),Te})(),qe=(()=>{var pe;class Te{shouldProcessUrl(Ee){return!0}extract(Ee){return Ee}merge(Ee,$e){return Ee}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();const Pt=new j.nKC(""),en=new j.nKC("");function mt(pe,Te,Fe){const Ee=pe.get(en),$e=pe.get(g.qQ);return pe.get(j.SKi).runOutsideAngular(()=>{if(!$e.startViewTransition||Ee.skipNextTransition)return Ee.skipNextTransition=!1,new Promise(An=>setTimeout(An));let St;const Lt=new Promise(An=>{St=An}),kn=$e.startViewTransition(()=>(St(),function Ir(pe){return new Promise(Te=>{(0,j.mal)({read:()=>setTimeout(Te)},{injector:pe})})}(pe))),{onViewTransitionCreated:dr}=Ee;return dr&&(0,j.N4e)(pe,()=>dr({transition:kn,from:Te,to:Fe})),Lt})}const zi=new j.nKC("");let Ei=(()=>{var pe;class Te{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new p.B,this.transitionAbortSubject=new p.B,this.configLoader=(0,j.WQX)(Ds),this.environmentInjector=(0,j.WQX)(j.uvJ),this.urlSerializer=(0,j.WQX)(jn),this.rootContexts=(0,j.WQX)(an),this.location=(0,j.WQX)(g.aZ),this.inputBindingEnabled=null!==(0,j.WQX)(Hs,{optional:!0}),this.titleStrategy=(0,j.WQX)(Uu),this.options=(0,j.WQX)(Da,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,j.WQX)(Zt),this.createViewTransition=(0,j.WQX)(Pt,{optional:!0}),this.navigationErrorHandler=(0,j.WQX)(zi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ve.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=St=>this.events.next(new Wa(St)),this.configLoader.onLoadStartListener=St=>this.events.next(new ka(St))}complete(){var Ee;null===(Ee=this.transitions)||void 0===Ee||Ee.complete()}handleNavigationRequest(Ee){var $e;const St=++this.navigationId;null===($e=this.transitions)||void 0===$e||$e.next({...this.transitions.value,...Ee,id:St})}setupNavigations(Ee,$e,St){return this.transitions=new K.t({id:0,currentUrlTree:$e,currentRawUrl:$e,extractedUrl:this.urlHandlingStrategy.extract($e),urlAfterRedirects:this.urlHandlingStrategy.extract($e),rawUrl:$e,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bs,restoredState:null,currentSnapshot:St.snapshot,targetSnapshot:null,currentRouterState:St,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,G.p)(Lt=>0!==Lt.id),(0,x.T)(Lt=>({...Lt,extractedUrl:this.urlHandlingStrategy.extract(Lt.rawUrl)})),(0,E.n)(Lt=>{let kn=!1,dr=!1;return(0,ve.of)(Lt).pipe((0,E.n)(An=>{var Rr;if(this.navigationId>Lt.id)return this.cancelNavigationTransition(Lt,"",Vs.SupersededByNewNavigation),f.w;this.currentTransition=Lt,this.currentNavigation={id:An.id,initialUrl:An.rawUrl,extractedUrl:An.extractedUrl,targetBrowserUrl:"string"==typeof An.extras.browserUrl?this.urlSerializer.parse(An.extras.browserUrl):An.extras.browserUrl,trigger:An.source,extras:An.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const fi=!Ee.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Mr=null!==(Rr=An.extras.onSameUrlNavigation)&&void 0!==Rr?Rr:Ee.onSameUrlNavigation;if(!fi&&"reload"!==Mr){const Jr="";return this.events.next(new Vo(An.id,this.urlSerializer.serialize(An.rawUrl),Jr,Ko.IgnoredSameUrlNavigation)),An.resolve(!1),f.w}if(this.urlHandlingStrategy.shouldProcessUrl(An.rawUrl))return(0,ve.of)(An).pipe((0,E.n)(Jr=>{var Co,Rs;const io=null===(Co=this.transitions)||void 0===Co?void 0:Co.getValue();return this.events.next(new $s(Jr.id,this.urlSerializer.serialize(Jr.extractedUrl),Jr.source,Jr.restoredState)),io!==(null===(Rs=this.transitions)||void 0===Rs?void 0:Rs.getValue())?f.w:Promise.resolve(Jr)}),function Hi(pe,Te,Fe,Ee,$e,St){return(0,z.Z)(Lt=>function Ff(pe,Te,Fe,Ee,$e,St,Lt="emptyOnly"){return new _l(pe,Te,Fe,Ee,$e,Lt,St).recognize()}(pe,Te,Fe,Ee,Lt.extractedUrl,$e,St).pipe((0,x.T)(({state:kn,tree:dr})=>({...Lt,targetSnapshot:kn,urlAfterRedirects:dr}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,Ee.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,me.M)(Jr=>{Lt.targetSnapshot=Jr.targetSnapshot,Lt.urlAfterRedirects=Jr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Jr.urlAfterRedirects};const Co=new ta(Jr.id,this.urlSerializer.serialize(Jr.extractedUrl),this.urlSerializer.serialize(Jr.urlAfterRedirects),Jr.targetSnapshot);this.events.next(Co)}));if(fi&&this.urlHandlingStrategy.shouldProcessUrl(An.currentRawUrl)){const{id:Jr,extractedUrl:Co,source:Rs,restoredState:io,extras:Ja}=An,cl=new $s(Jr,this.urlSerializer.serialize(Co),Rs,io);this.events.next(cl);const No=Sr(this.rootComponentType).snapshot;return this.currentTransition=Lt={...An,targetSnapshot:No,urlAfterRedirects:Co,extras:{...Ja,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Co,(0,ve.of)(Lt)}{const Jr="";return this.events.next(new Vo(An.id,this.urlSerializer.serialize(An.extractedUrl),Jr,Ko.IgnoredByUrlHandlingStrategy)),An.resolve(!1),f.w}}),(0,me.M)(An=>{const Rr=new la(An.id,this.urlSerializer.serialize(An.extractedUrl),this.urlSerializer.serialize(An.urlAfterRedirects),An.targetSnapshot);this.events.next(Rr)}),(0,x.T)(An=>(this.currentTransition=Lt={...An,guards:po(An.targetSnapshot,An.currentSnapshot,this.rootContexts)},Lt)),function Oe(pe,Te){return(0,z.Z)(Fe=>{const{targetSnapshot:Ee,currentSnapshot:$e,guards:{canActivateChecks:St,canDeactivateChecks:Lt}}=Fe;return 0===Lt.length&&0===St.length?(0,ve.of)({...Fe,guardsResult:!0}):function be(pe,Te,Fe,Ee){return(0,l.H)(pe).pipe((0,z.Z)($e=>function Fn(pe,Te,Fe,Ee,$e){const St=Te&&Te.routeConfig?Te.routeConfig.canDeactivate:null;if(!St||0===St.length)return(0,ve.of)(!0);const Lt=St.map(kn=>{var dr;const An=null!==(dr=ot(Te))&&void 0!==dr?dr:$e,Rr=vl(kn,An);return $n(function Xe(pe){return pe&&R(pe.canDeactivate)}(Rr)?Rr.canDeactivate(pe,Te,Fe,Ee):(0,j.N4e)(An,()=>Rr(pe,Te,Fe,Ee))).pipe(xe())});return(0,ve.of)(Lt).pipe(Ht())}($e.component,$e.route,Fe,Te,Ee)),xe($e=>!0!==$e,!0))}(Lt,Ee,$e,pe).pipe((0,z.Z)(kn=>kn&&function W(pe){return"boolean"==typeof pe}(kn)?function Ne(pe,Te,Fe,Ee){return(0,l.H)(Te).pipe(oe($e=>(0,w.x)(function at(pe,Te){return null!==pe&&Te&&Te(new ke(pe)),(0,ve.of)(!0)}($e.route.parent,Ee),function Re(pe,Te){return null!==pe&&Te&&Te(new kt(pe)),(0,ve.of)(!0)}($e.route,Ee),function En(pe,Te,Fe){const Ee=Te[Te.length-1],St=Te.slice(0,Te.length-1).reverse().map(Lt=>function Nl(pe){const Te=pe.routeConfig?pe.routeConfig.canActivateChild:null;return Te&&0!==Te.length?{node:pe,guards:Te}:null}(Lt)).filter(Lt=>null!==Lt).map(Lt=>(0,I.v)(()=>{const kn=Lt.guards.map(dr=>{var An;const Rr=null!==(An=ot(Lt.node))&&void 0!==An?An:Fe,fi=vl(dr,Rr);return $n(function Ae(pe){return pe&&R(pe.canActivateChild)}(fi)?fi.canActivateChild(Ee,pe):(0,j.N4e)(Rr,()=>fi(Ee,pe))).pipe(xe())});return(0,ve.of)(kn).pipe(Ht())}));return(0,ve.of)(St).pipe(Ht())}(pe,$e.path,Fe),function Qt(pe,Te,Fe){const Ee=Te.routeConfig?Te.routeConfig.canActivate:null;if(!Ee||0===Ee.length)return(0,ve.of)(!0);const $e=Ee.map(St=>(0,I.v)(()=>{var Lt;const kn=null!==(Lt=ot(Te))&&void 0!==Lt?Lt:Fe,dr=vl(St,kn);return $n(function de(pe){return pe&&R(pe.canActivate)}(dr)?dr.canActivate(Te,pe):(0,j.N4e)(kn,()=>dr(Te,pe))).pipe(xe())}));return(0,ve.of)($e).pipe(Ht())}(pe,$e.route,Fe))),xe($e=>!0!==$e,!0))}(Ee,St,pe,Te):(0,ve.of)(kn)),(0,x.T)(kn=>({...Fe,guardsResult:kn})))})}(this.environmentInjector,An=>this.events.next(An)),(0,me.M)(An=>{if(Lt.guardsResult=An.guardsResult,An.guardsResult&&"boolean"!=typeof An.guardsResult)throw ua(0,An.guardsResult);const Rr=new eo(An.id,this.urlSerializer.serialize(An.extractedUrl),this.urlSerializer.serialize(An.urlAfterRedirects),An.targetSnapshot,!!An.guardsResult);this.events.next(Rr)}),(0,G.p)(An=>!!An.guardsResult||(this.cancelNavigationTransition(An,"",Vs.GuardRejected),!1)),Jl(An=>{if(An.guards.canActivateChecks.length)return(0,ve.of)(An).pipe((0,me.M)(Rr=>{const fi=new ca(Rr.id,this.urlSerializer.serialize(Rr.extractedUrl),this.urlSerializer.serialize(Rr.urlAfterRedirects),Rr.targetSnapshot);this.events.next(fi)}),(0,E.n)(Rr=>{let fi=!1;return(0,ve.of)(Rr).pipe(function Os(pe,Te){return(0,z.Z)(Fe=>{const{targetSnapshot:Ee,guards:{canActivateChecks:$e}}=Fe;if(!$e.length)return(0,ve.of)(Fe);const St=new Set($e.map(dr=>dr.route)),Lt=new Set;for(const dr of St)if(!Lt.has(dr))for(const An of Uf(dr))Lt.add(An);let kn=0;return(0,l.H)(Lt).pipe(oe(dr=>St.has(dr)?function Ss(pe,Te,Fe,Ee){const $e=pe.routeConfig,St=pe._resolve;return void 0!==(null==$e?void 0:$e.title)&&!Or($e)&&(St[Rt]=$e.title),function Bl(pe,Te,Fe,Ee){const $e=vt(pe);if(0===$e.length)return(0,ve.of)({});const St={};return(0,l.H)($e).pipe((0,z.Z)(Lt=>function hu(pe,Te,Fe,Ee){var $e;const St=null!==($e=ot(Te))&&void 0!==$e?$e:Ee,Lt=vl(pe,St);return $n(Lt.resolve?Lt.resolve(Te,Fe):(0,j.N4e)(St,()=>Lt(Te,Fe)))}(pe[Lt],Te,Fe,Ee).pipe(xe(),(0,me.M)(kn=>{if(kn instanceof Na)throw ua(new on,kn);St[Lt]=kn}))),et(1),(0,V.u)(St),J(Lt=>bt(Lt)?f.w:(0,d.$)(Lt)))}(St,pe,Te,Ee).pipe((0,x.T)(Lt=>(pe._resolvedData=Lt,pe.data=ni(pe,pe.parent,Fe).resolve,null)))}(dr,Ee,pe,Te):(dr.data=ni(dr,dr.parent,pe).resolve,(0,ve.of)(void 0))),(0,me.M)(()=>kn++),et(1),(0,z.Z)(dr=>kn===Lt.size?(0,ve.of)(Fe):f.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,me.M)({next:()=>fi=!0,complete:()=>{fi||this.cancelNavigationTransition(Rr,"",Vs.NoDataFromResolver)}}))}),(0,me.M)(Rr=>{const fi=new _o(Rr.id,this.urlSerializer.serialize(Rr.extractedUrl),this.urlSerializer.serialize(Rr.urlAfterRedirects),Rr.targetSnapshot);this.events.next(fi)}))}),Jl(An=>{const Rr=fi=>{var Mr;const Jr=[];null!==(Mr=fi.routeConfig)&&void 0!==Mr&&Mr.loadComponent&&!fi.routeConfig._loadedComponent&&Jr.push(this.configLoader.loadComponent(fi.routeConfig).pipe((0,me.M)(Co=>{fi.component=Co}),(0,x.T)(()=>{})));for(const Co of fi.children)Jr.push(...Rr(Co));return Jr};return(0,M.z)(Rr(An.targetSnapshot.root)).pipe(H(null),(0,S.s)(1))}),Jl(()=>this.afterPreactivation()),(0,E.n)(()=>{var An;const{currentSnapshot:Rr,targetSnapshot:fi}=Lt,Mr=null===(An=this.createViewTransition)||void 0===An?void 0:An.call(this,this.environmentInjector,Rr.root,fi.root);return Mr?(0,l.H)(Mr).pipe((0,x.T)(()=>Lt)):(0,ve.of)(Lt)}),(0,x.T)(An=>{const Rr=function lu(pe,Te,Fe){const Ee=Yo(pe,Te._root,Fe?Fe._root:void 0);return new vr(Ee,Te)}(Ee.routeReuseStrategy,An.targetSnapshot,An.currentRouterState);return this.currentTransition=Lt={...An,targetRouterState:Rr},this.currentNavigation.targetRouterState=Rr,Lt}),(0,me.M)(()=>{this.events.next(new In)}),((pe,Te,Fe,Ee)=>(0,x.T)($e=>(new da(Te,$e.targetRouterState,$e.currentRouterState,Fe,Ee).activate(pe),$e)))(this.rootContexts,Ee.routeReuseStrategy,An=>this.events.next(An),this.inputBindingEnabled),(0,S.s)(1),(0,me.M)({next:An=>{var Rr;kn=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ys(An.id,this.urlSerializer.serialize(An.extractedUrl),this.urlSerializer.serialize(An.urlAfterRedirects))),null===(Rr=this.titleStrategy)||void 0===Rr||Rr.updateTitle(An.targetRouterState.snapshot),An.resolve(!0)},complete:()=>{kn=!0}}),function ut(pe){return(0,X.N)((Te,Fe)=>{(0,ne.Tg)(pe).subscribe((0,ee._)(Fe,()=>Fe.complete(),Ke.l)),!Fe.closed&&Te.subscribe(Fe)})}(this.transitionAbortSubject.pipe((0,me.M)(An=>{throw An}))),ge(()=>{var An;!kn&&!dr&&this.cancelNavigationTransition(Lt,"",Vs.SupersededByNewNavigation),(null===(An=this.currentTransition)||void 0===An?void 0:An.id)===Lt.id&&(this.currentNavigation=null,this.currentTransition=null)}),J(An=>{if(dr=!0,Cs(An))this.events.next(new fo(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),An.message,An.cancellationCode)),function Ll(pe){return Cs(pe)&&O(pe.url)}(An)?this.events.next(new ts(An.url,An.navigationBehaviorOptions)):Lt.resolve(!1);else{var Rr;const fi=new ea(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),An,null!==(Rr=Lt.targetSnapshot)&&void 0!==Rr?Rr:void 0);try{const Mr=(0,j.N4e)(this.environmentInjector,()=>{var Jr;return null===(Jr=this.navigationErrorHandler)||void 0===Jr?void 0:Jr.call(this,fi)});if(Mr instanceof Na){const{message:Jr,cancellationCode:Co}=ua(0,Mr);this.events.next(new fo(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),Jr,Co)),this.events.next(new ts(Mr.redirectTo,Mr.navigationBehaviorOptions))}else{this.events.next(fi);const Jr=Ee.errorHandler(An);Lt.resolve(!!Jr)}}catch(Mr){this.options.resolveNavigationPromiseOnError?Lt.resolve(!1):Lt.reject(Mr)}}return f.w}))}))}cancelNavigationTransition(Ee,$e,St){const Lt=new fo(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),$e,St);this.events.next(Lt),Ee.resolve(!1)}isUpdatingInternalState(){var Ee,$e;return(null===(Ee=this.currentTransition)||void 0===Ee?void 0:Ee.extractedUrl.toString())!==(null===($e=this.currentTransition)||void 0===$e?void 0:$e.currentUrlTree.toString())}isUpdatedBrowserUrl(){var Ee,$e,St,Lt;const kn=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),dr=null!==(Ee=null===($e=this.currentNavigation)||void 0===$e?void 0:$e.targetBrowserUrl)&&void 0!==Ee?Ee:null===(St=this.currentNavigation)||void 0===St?void 0:St.extractedUrl;return kn.toString()!==(null==dr?void 0:dr.toString())&&!(null!==(Lt=this.currentNavigation)&&void 0!==Lt&&Lt.extras.skipLocationChange)}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();function ns(pe){return pe!==bs}let hi=(()=>{var pe;class Te{}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:()=>(0,j.WQX)(Br),providedIn:"root"}),Te})();class Is{shouldDetach(Te){return!1}store(Te,Fe){}shouldAttach(Te){return!1}retrieve(Te){return null}shouldReuseRoute(Te,Fe){return Te.routeConfig===Fe.routeConfig}}let Br=(()=>{var pe;class Te extends Is{}return(pe=Te).\u0275fac=(()=>{let Fe;return function($e){return(Fe||(Fe=j.xGo(pe)))($e||pe)}})(),pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})(),Ws=(()=>{var pe;class Te{}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:()=>(0,j.WQX)(fa),providedIn:"root"}),Te})(),fa=(()=>{var pe;class Te extends Ws{constructor(){super(...arguments),this.location=(0,j.WQX)(g.aZ),this.urlSerializer=(0,j.WQX)(jn),this.options=(0,j.WQX)(Da,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,j.WQX)(Zt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ct,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var Ee,$e;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(Ee=null===($e=this.restoredState())||void 0===$e?void 0:$e.\u0275routerPageId)&&void 0!==Ee?Ee:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(Ee){return this.location.subscribe($e=>{"popstate"===$e.type&&Ee($e.url,$e.state)})}handleRouterEvent(Ee,$e){if(Ee instanceof $s)this.stateMemento=this.createStateMemento();else if(Ee instanceof Vo)this.rawUrlTree=$e.initialUrl;else if(Ee instanceof ta){if("eager"===this.urlUpdateStrategy&&!$e.extras.skipLocationChange){var St;const kn=this.urlHandlingStrategy.merge($e.finalUrl,$e.initialUrl);this.setBrowserUrl(null!==(St=$e.targetBrowserUrl)&&void 0!==St?St:kn,$e)}}else if(Ee instanceof In){var Lt;this.currentUrlTree=$e.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge($e.finalUrl,$e.initialUrl),this.routerState=$e.targetRouterState,"deferred"!==this.urlUpdateStrategy||$e.extras.skipLocationChange||this.setBrowserUrl(null!==(Lt=$e.targetBrowserUrl)&&void 0!==Lt?Lt:this.rawUrlTree,$e)}else Ee instanceof fo&&(Ee.code===Vs.GuardRejected||Ee.code===Vs.NoDataFromResolver)?this.restoreHistory($e):Ee instanceof ea?this.restoreHistory($e,!0):Ee instanceof ys&&(this.lastSuccessfulId=Ee.id,this.currentPageId=this.browserPageId)}setBrowserUrl(Ee,$e){const St=Ee instanceof ct?this.urlSerializer.serialize(Ee):Ee;if(this.location.isCurrentPathEqualTo(St)||$e.extras.replaceUrl){const kn={...$e.extras.state,...this.generateNgRouterState($e.id,this.browserPageId)};this.location.replaceState(St,"",kn)}else{const Lt={...$e.extras.state,...this.generateNgRouterState($e.id,this.browserPageId+1)};this.location.go(St,"",Lt)}}restoreHistory(Ee,$e=!1){if("computed"===this.canceledNavigationResolution){const Lt=this.currentPageId-this.browserPageId;0!==Lt?this.location.historyGo(Lt):this.currentUrlTree===Ee.finalUrl&&0===Lt&&(this.resetState(Ee),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&($e&&this.resetState(Ee),this.resetUrlToCurrentUrlTree())}resetState(Ee){var $e;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==($e=Ee.finalUrl)&&void 0!==$e?$e:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(Ee,$e){return"computed"===this.canceledNavigationResolution?{navigationId:Ee,\u0275routerPageId:$e}:{navigationId:Ee}}}return(pe=Te).\u0275fac=(()=>{let Fe;return function($e){return(Fe||(Fe=j.xGo(pe)))($e||pe)}})(),pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();var ro=function(pe){return pe[pe.COMPLETE=0]="COMPLETE",pe[pe.FAILED=1]="FAILED",pe[pe.REDIRECTING=2]="REDIRECTING",pe}(ro||{});function xa(pe,Te){pe.events.pipe((0,G.p)(Fe=>Fe instanceof ys||Fe instanceof fo||Fe instanceof ea||Fe instanceof Vo),(0,x.T)(Fe=>Fe instanceof ys||Fe instanceof Vo?ro.COMPLETE:Fe instanceof fo&&(Fe.code===Vs.Redirect||Fe.code===Vs.SupersededByNewNavigation)?ro.REDIRECTING:ro.FAILED),(0,G.p)(Fe=>Fe!==ro.REDIRECTING),(0,S.s)(1)).subscribe(()=>{Te()})}function wa(pe){throw pe}const qa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ka={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bo=(()=>{var pe;class Te{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var Ee,$e;this.disposed=!1,this.console=(0,j.WQX)(j.H3F),this.stateManager=(0,j.WQX)(Ws),this.options=(0,j.WQX)(Da,{optional:!0})||{},this.pendingTasks=(0,j.WQX)(j.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,j.WQX)(Ei),this.urlSerializer=(0,j.WQX)(jn),this.location=(0,j.WQX)(g.aZ),this.urlHandlingStrategy=(0,j.WQX)(Zt),this._events=new p.B,this.errorHandler=this.options.errorHandler||wa,this.navigated=!1,this.routeReuseStrategy=(0,j.WQX)(hi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(Ee=null===($e=(0,j.WQX)(no,{optional:!0}))||void 0===$e?void 0:$e.flat())&&void 0!==Ee?Ee:[],this.componentInputBindingEnabled=!!(0,j.WQX)(Hs,{optional:!0}),this.eventsSubscription=new m.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:St=>{this.console.warn(St)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const Ee=this.navigationTransitions.events.subscribe($e=>{try{const St=this.navigationTransitions.currentTransition,Lt=this.navigationTransitions.currentNavigation;if(null!==St&&null!==Lt)if(this.stateManager.handleRouterEvent($e,Lt),$e instanceof fo&&$e.code!==Vs.Redirect&&$e.code!==Vs.SupersededByNewNavigation)this.navigated=!0;else if($e instanceof ys)this.navigated=!0;else if($e instanceof ts){const kn=$e.navigationBehaviorOptions,dr=this.urlHandlingStrategy.merge($e.url,St.currentRawUrl),An={browserUrl:St.extras.browserUrl,info:St.extras.info,skipLocationChange:St.extras.skipLocationChange,replaceUrl:St.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ns(St.source),...kn};this.scheduleNavigation(dr,bs,null,An,{resolve:St.resolve,reject:St.reject,promise:St.promise})}(function fu(pe){return!(pe instanceof In||pe instanceof ts)})($e)&&this._events.next($e)}catch(St){this.navigationTransitions.transitionAbortSubject.next(St)}});this.eventsSubscription.add(Ee)}resetRootComponentType(Ee){this.routerState.root.component=Ee,this.navigationTransitions.rootComponentType=Ee}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bs,this.stateManager.restoredState())}setUpLocationChangeListener(){var Ee;null!==(Ee=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==Ee||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener(($e,St)=>{setTimeout(()=>{this.navigateToSyncWithBrowser($e,"popstate",St)},0)}))}navigateToSyncWithBrowser(Ee,$e,St){const Lt={replaceUrl:!0},kn=null!=St&&St.navigationId?St:null;if(St){const An={...St};delete An.navigationId,delete An.\u0275routerPageId,0!==Object.keys(An).length&&(Lt.state=An)}const dr=this.parseUrl(Ee);this.scheduleNavigation(dr,$e,kn,Lt)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(Ee){this.config=Ee.map(ha),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(Ee,$e={}){const{relativeTo:St,queryParams:Lt,fragment:kn,queryParamsHandling:dr,preserveFragment:An}=$e,Rr=An?this.currentUrlTree.fragment:kn;let Mr,fi=null;switch(dr){case"merge":fi={...this.currentUrlTree.queryParams,...Lt};break;case"preserve":fi=this.currentUrlTree.queryParams;break;default:fi=Lt||null}null!==fi&&(fi=this.removeEmptyProps(fi));try{Mr=q(St?St.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof Ee[0]||"/"!==Ee[0][0])&&(Ee=[]),Mr=this.currentUrlTree.root}return ce(Mr,Ee,fi,null!=Rr?Rr:null)}navigateByUrl(Ee,$e={skipLocationChange:!1}){const St=O(Ee)?Ee:this.parseUrl(Ee),Lt=this.urlHandlingStrategy.merge(St,this.rawUrlTree);return this.scheduleNavigation(Lt,bs,null,$e)}navigate(Ee,$e={skipLocationChange:!1}){return function bl(pe){for(let Te=0;Te<pe.length;Te++)if(null==pe[Te])throw new j.wOt(4008,!1)}(Ee),this.navigateByUrl(this.createUrlTree(Ee,$e),$e)}serializeUrl(Ee){return this.urlSerializer.serialize(Ee)}parseUrl(Ee){try{return this.urlSerializer.parse(Ee)}catch{return this.urlSerializer.parse("/")}}isActive(Ee,$e){let St;if(St=!0===$e?{...qa}:!1===$e?{...Ka}:$e,O(Ee))return Mn(this.currentUrlTree,Ee,St);const Lt=this.parseUrl(Ee);return Mn(this.currentUrlTree,Lt,St)}removeEmptyProps(Ee){return Object.entries(Ee).reduce(($e,[St,Lt])=>(null!=Lt&&($e[St]=Lt),$e),{})}scheduleNavigation(Ee,$e,St,Lt,kn){if(this.disposed)return Promise.resolve(!1);let dr,An,Rr;kn?(dr=kn.resolve,An=kn.reject,Rr=kn.promise):Rr=new Promise((Mr,Jr)=>{dr=Mr,An=Jr});const fi=this.pendingTasks.add();return xa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(fi))}),this.navigationTransitions.handleNavigationRequest({source:$e,restoredState:St,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:Ee,extras:Lt,resolve:dr,reject:An,promise:Rr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rr.catch(Mr=>Promise.reject(Mr))}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})(),wd=(()=>{var pe;class Te{constructor(Ee,$e,St,Lt,kn,dr){var An;this.router=Ee,this.route=$e,this.tabIndexAttribute=St,this.renderer=Lt,this.el=kn,this.locationStrategy=dr,this.href=null,this.onChanges=new p.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const Rr=null===(An=kn.nativeElement.tagName)||void 0===An?void 0:An.toLowerCase();this.isAnchorElement="a"===Rr||"area"===Rr,this.isAnchorElement?this.subscription=Ee.events.subscribe(fi=>{fi instanceof ys&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(Ee){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",Ee)}ngOnChanges(Ee){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(Ee){null==Ee?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=O(Ee)||Array.isArray(Ee)?Ee:[Ee],this.setTabIndexIfNotOnNativeEl("0"))}onClick(Ee,$e,St,Lt,kn){const dr=this.urlTree;return!!(null===dr||this.isAnchorElement&&(0!==Ee||$e||St||Lt||kn||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(dr,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var Ee;null===(Ee=this.subscription)||void 0===Ee||Ee.unsubscribe()}updateHref(){var Ee;const $e=this.urlTree;this.href=null!==$e&&this.locationStrategy?null===(Ee=this.locationStrategy)||void 0===Ee?void 0:Ee.prepareExternalUrl(this.router.serializeUrl($e)):null;const St=null===this.href?null:(0,j.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",St)}applyAttributeValue(Ee,$e){const St=this.renderer,Lt=this.el.nativeElement;null!==$e?St.setAttribute(Lt,Ee,$e):St.removeAttribute(Lt,Ee)}get urlTree(){return null===this.routerLinkInput?null:O(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)(j.rXU(bo),j.rXU(Gr),j.kS0("tabindex"),j.rXU(j.sFG),j.rXU(j.aKT),j.rXU(g.hb))},pe.\u0275dir=j.FsC({type:pe,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(Ee,$e){1&Ee&&j.bIt("click",function(Lt){return $e.onClick(Lt.button,Lt.ctrlKey,Lt.shiftKey,Lt.altKey,Lt.metaKey)}),2&Ee&&j.BMQ("target",$e.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",j.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",j.L39],replaceUrl:[2,"replaceUrl","replaceUrl",j.L39],routerLink:"routerLink"},standalone:!0,features:[j.GFd,j.OA$]}),Te})();class zs{}let Ua=(()=>{var pe;class Te{preload(Ee,$e){return $e().pipe(J(()=>(0,ve.of)(null)))}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})(),Nc=(()=>{var pe;class Te{constructor(Ee,$e,St,Lt,kn){this.router=Ee,this.injector=St,this.preloadingStrategy=Lt,this.loader=kn}setUpPreloading(){this.subscription=this.router.events.pipe((0,G.p)(Ee=>Ee instanceof ys),oe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Ee,$e){const St=[];for(const An of $e){var Lt,kn;An.providers&&!An._injector&&(An._injector=(0,j.Ol2)(An.providers,Ee,`Route: ${An.path}`));const Rr=null!==(Lt=An._injector)&&void 0!==Lt?Lt:Ee,fi=null!==(kn=An._loadedInjector)&&void 0!==kn?kn:Rr;var dr;(An.loadChildren&&!An._loadedRoutes&&void 0===An.canLoad||An.loadComponent&&!An._loadedComponent)&&St.push(this.preloadConfig(Rr,An)),(An.children||An._loadedRoutes)&&St.push(this.processRoutes(fi,null!==(dr=An.children)&&void 0!==dr?dr:An._loadedRoutes))}return(0,l.H)(St).pipe((0,_t.U)())}preloadConfig(Ee,$e){return this.preloadingStrategy.preload($e,()=>{let St;St=$e.loadChildren&&void 0===$e.canLoad?this.loader.loadChildren(Ee,$e):(0,ve.of)(null);const Lt=St.pipe((0,z.Z)(kn=>{var dr;return null===kn?(0,ve.of)(void 0):($e._loadedRoutes=kn.routes,$e._loadedInjector=kn.injector,this.processRoutes(null!==(dr=kn.injector)&&void 0!==dr?dr:Ee,kn.routes))}));if($e.loadComponent&&!$e._loadedComponent){const kn=this.loader.loadComponent($e);return(0,l.H)([Lt,kn]).pipe((0,_t.U)())}return Lt})}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)(j.KVO(bo),j.KVO(j.Ql9),j.KVO(j.uvJ),j.KVO(zs),j.KVO(Ds))},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"}),Te})();const Ya=new j.nKC("");let pu=(()=>{var pe;class Te{constructor(Ee,$e,St,Lt,kn={}){this.urlSerializer=Ee,this.transitions=$e,this.viewportScroller=St,this.zone=Lt,this.options=kn,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},kn.scrollPositionRestoration||(kn.scrollPositionRestoration="disabled"),kn.anchorScrolling||(kn.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(Ee=>{Ee instanceof $s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Ee.navigationTrigger,this.restoredId=Ee.restoredState?Ee.restoredState.navigationId:0):Ee instanceof ys?(this.lastId=Ee.id,this.scheduleScrollEvent(Ee,this.urlSerializer.parse(Ee.urlAfterRedirects).fragment)):Ee instanceof Vo&&Ee.code===Ko.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(Ee,this.urlSerializer.parse(Ee.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(Ee=>{Ee instanceof zt&&(Ee.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Ee.position):Ee.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Ee.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Ee,$e){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zt(Ee,"popstate"===this.lastSource?this.store[this.restoredId]:null,$e))})},0)})}ngOnDestroy(){var Ee,$e;null===(Ee=this.routerEventsSubscription)||void 0===Ee||Ee.unsubscribe(),null===($e=this.scrollEventsSubscription)||void 0===$e||$e.unsubscribe()}}return(pe=Te).\u0275fac=function(Ee){j.QTQ()},pe.\u0275prov=j.jDH({token:pe,factory:pe.\u0275fac}),Te})();function Ba(pe,Te){return{\u0275kind:pe,\u0275providers:Te}}function gh(){const pe=(0,j.WQX)(j.zZn);return Te=>{var Fe,Ee;const $e=pe.get(j.o8S);if(Te!==$e.components[0])return;const St=pe.get(bo),Lt=pe.get(ra);1===pe.get(fs)&&St.initialNavigation(),null===(Fe=pe.get(Za,null,j.$GK.Optional))||void 0===Fe||Fe.setUpPreloading(),null===(Ee=pe.get(Ya,null,j.$GK.Optional))||void 0===Ee||Ee.init(),St.resetRootComponentType($e.componentTypes[0]),Lt.closed||(Lt.next(),Lt.complete(),Lt.unsubscribe())}}const ra=new j.nKC("",{factory:()=>new p.B}),fs=new j.nKC("",{providedIn:"root",factory:()=>1}),Za=new j.nKC("");function mu(pe){return Ba(0,[{provide:Za,useExisting:Nc},{provide:zs,useExisting:pe}])}function Gu(pe){return Ba(9,[{provide:Pt,useValue:mt},{provide:en,useValue:{skipNextTransition:!(null==pe||!pe.skipInitialTransition),...pe}}])}const gu=new j.nKC("ROUTER_FORROOT_GUARD"),Vf=[g.aZ,{provide:jn,useClass:on},bo,an,{provide:Gr,useFactory:function Bu(pe){return pe.routerState.root},deps:[bo]},Ds,[]];let _h=(()=>{var pe;class Te{constructor(Ee){}static forRoot(Ee,$e){return{ngModule:Te,providers:[Vf,[],{provide:no,multi:!0,useValue:Ee},{provide:gu,useFactory:Um,deps:[[bo,new j.Xx1,new j.kdw]]},{provide:Da,useValue:$e||{}},null!=$e&&$e.useHash?{provide:g.hb,useClass:g.fw}:{provide:g.hb,useClass:g.Sm},{provide:Ya,useFactory:()=>{const pe=(0,j.WQX)(g.Xr),Te=(0,j.WQX)(j.SKi),Fe=(0,j.WQX)(Da),Ee=(0,j.WQX)(Ei),$e=(0,j.WQX)(jn);return Fe.scrollOffset&&pe.setOffset(Fe.scrollOffset),new pu($e,Ee,pe,Te,Fe)}},null!=$e&&$e.preloadingStrategy?mu($e.preloadingStrategy).\u0275providers:[],null!=$e&&$e.initialNavigation?Sa($e):[],null!=$e&&$e.bindToComponentInputs?Ba(8,[Yl,{provide:Hs,useExisting:Yl}]).\u0275providers:[],null!=$e&&$e.enableViewTransitions?Gu().\u0275providers:[],[{provide:Ed,useFactory:gh},{provide:j.iLQ,multi:!0,useExisting:Ed}]]}}static forChild(Ee){return{ngModule:Te,providers:[{provide:no,multi:!0,useValue:Ee}]}}}return(pe=Te).\u0275fac=function(Ee){return new(Ee||pe)(j.KVO(gu,8))},pe.\u0275mod=j.$C({type:pe}),pe.\u0275inj=j.G2t({}),Te})();function Um(pe){return"guarded"}function Sa(pe){return["disabled"===pe.initialNavigation?Ba(3,[{provide:j.hnV,multi:!0,useFactory:()=>{const Te=(0,j.WQX)(bo);return()=>{Te.setUpLocationChangeListener()}}},{provide:fs,useValue:2}]).\u0275providers:[],"enabledBlocking"===pe.initialNavigation?Ba(2,[{provide:fs,useValue:0},{provide:j.hnV,multi:!0,deps:[j.zZn],useFactory:Te=>{const Fe=Te.get(g.hj,Promise.resolve());return()=>Fe.then(()=>new Promise(Ee=>{const $e=Te.get(bo),St=Te.get(ra);xa($e,()=>{Ee(!0)}),Te.get(Ei).afterPreactivation=()=>(Ee(!0),St.closed?(0,ve.of)(void 0):St),$e.initialNavigation()}))}}]).\u0275providers:[]]}const Ed=new j.nKC("")},3656:(wr,Nn,je)=>{"use strict";je.d(Nn,{Yq:()=>hn,TS:()=>Tt,sR:()=>Ot,el:()=>te,Sb:()=>jn,QE:()=>B,CF:()=>xt,Rg:()=>On,p4:()=>O,jM:()=>Vt,q9:()=>Rt,y8:()=>Gt,Kb:()=>cn,OD:()=>_t,CE:()=>De,pF:()=>Ye,fL:()=>q,YV:()=>sr,er:()=>ie,z3:()=>ce});var j=je(467),F=je(9842),Et=je(3953),Jt=je(9858),l=je(177),ve=je(5531),K=je(4442);var H=je(1413),re=je(3726),Z=je(4412),_e=je(4572),xe=je(7673),oe=je(1635),me=je(5964),ne=je(5558),J=je(3669),he=je(9974),Ce=je(4360);function le(Ve,We){return Ve===We}var V=je(4341);const ge=["tabsInner"];let _t=(()=>{var Ve;class We{constructor(nt,Dt){(0,F.A)(this,"doc",void 0),(0,F.A)(this,"_readyPromise",void 0),(0,F.A)(this,"win",void 0),(0,F.A)(this,"backButton",new H.B),(0,F.A)(this,"keyboardDidShow",new H.B),(0,F.A)(this,"keyboardDidHide",new H.B),(0,F.A)(this,"pause",new H.B),(0,F.A)(this,"resume",new H.B),(0,F.A)(this,"resize",new H.B),this.doc=nt,Dt.run(()=>{var un;let Bn;this.win=nt.defaultView,this.backButton.subscribeWithPriority=function(ar,Pr){return this.subscribe(Ui=>Ui.register(ar,ji=>Dt.run(()=>Pr(ji))))},dt(this.pause,nt,"pause",Dt),dt(this.resume,nt,"resume",Dt),dt(this.backButton,nt,"ionBackButton",Dt),dt(this.resize,this.win,"resize",Dt),dt(this.keyboardDidShow,this.win,"ionKeyboardDidShow",Dt),dt(this.keyboardDidHide,this.win,"ionKeyboardDidHide",Dt),this._readyPromise=new Promise(ar=>{Bn=ar}),null!==(un=this.win)&&void 0!==un&&un.cordova?nt.addEventListener("deviceready",()=>{Bn("cordova")},{once:!0}):Bn("dom")})}is(nt){return(0,ve.a)(this.win,nt)}platforms(){return(0,ve.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(nt){return Nt(this.win.location.href,nt)}isLandscape(){return!this.isPortrait()}isPortrait(){var nt,Dt;return null===(nt=(Dt=this.win).matchMedia)||void 0===nt?void 0:nt.call(Dt,"(orientation: portrait)").matches}testUserAgent(nt){const Dt=this.win.navigator;return!!(null!=Dt&&Dt.userAgent&&Dt.userAgent.indexOf(nt)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.KVO(l.qQ),Et.KVO(Et.SKi))}),(0,F.A)(We,"\u0275prov",Et.jDH({token:Ve,factory:Ve.\u0275fac,providedIn:"root"})),We})();const Nt=(Ve,We)=>{We=We.replace(/[[\]\\]/g,"\\$&");const nt=new RegExp("[\\?&]"+We+"=([^&#]*)").exec(Ve);return nt?decodeURIComponent(nt[1].replace(/\+/g," ")):null},dt=(Ve,We,ft,nt)=>{We&&We.addEventListener(ft,Dt=>{nt.run(()=>{Ve.next(null!=Dt?Dt.detail:void 0)})})};let Rt=(()=>{var Ve;class We{constructor(nt,Dt,un,Bn){(0,F.A)(this,"location",void 0),(0,F.A)(this,"serializer",void 0),(0,F.A)(this,"router",void 0),(0,F.A)(this,"topOutlet",void 0),(0,F.A)(this,"direction",lt),(0,F.A)(this,"animated",It),(0,F.A)(this,"animationBuilder",void 0),(0,F.A)(this,"guessDirection","forward"),(0,F.A)(this,"guessAnimation",void 0),(0,F.A)(this,"lastNavId",-1),this.location=Dt,this.serializer=un,this.router=Bn,Bn&&Bn.events.subscribe(ar=>{if(ar instanceof Jt.Z){const Pr=ar.restoredState?ar.restoredState.navigationId:ar.id;this.guessDirection=this.guessAnimation=Pr<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?ar.id:Pr}}),nt.backButton.subscribeWithPriority(0,ar=>{this.pop(),ar()})}navigateForward(nt,Dt={}){return this.setDirection("forward",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(nt,Dt)}navigateBack(nt,Dt={}){return this.setDirection("back",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(nt,Dt)}navigateRoot(nt,Dt={}){return this.setDirection("root",Dt.animated,Dt.animationDirection,Dt.animation),this.navigate(nt,Dt)}back(nt={animated:!0,animationDirection:"back"}){return this.setDirection("back",nt.animated,nt.animationDirection,nt.animation),this.location.back()}pop(){var nt=this;return(0,j.A)(function*(){let Dt=nt.topOutlet;for(;Dt;){if(yield Dt.pop())return!0;Dt=Dt.parentOutlet}return!1})()}setDirection(nt,Dt,un,Bn){this.direction=nt,this.animated=Bt(nt,Dt,un),this.animationBuilder=Bn}setTopOutlet(nt){this.topOutlet=nt}consumeTransition(){let Dt,nt="root";const un=this.animationBuilder;return"auto"===this.direction?(nt=this.guessDirection,Dt=this.guessAnimation):(Dt=this.animated,nt=this.direction),this.direction=lt,this.animated=It,this.animationBuilder=void 0,{direction:nt,animation:Dt,animationBuilder:un}}navigate(nt,Dt){if(Array.isArray(nt))return this.router.navigate(nt,Dt);{const un=this.serializer.parse(nt.toString());return void 0!==Dt.queryParams&&(un.queryParams={...Dt.queryParams}),void 0!==Dt.fragment&&(un.fragment=Dt.fragment),this.router.navigateByUrl(un,Dt)}}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.KVO(_t),Et.KVO(l.aZ),Et.KVO(Jt.Sd),Et.KVO(Jt.Ix,8))}),(0,F.A)(We,"\u0275prov",Et.jDH({token:Ve,factory:Ve.\u0275fac,providedIn:"root"})),We})();const Bt=(Ve,We,ft)=>{if(!1!==We){if(void 0!==ft)return ft;if("forward"===Ve||"back"===Ve)return Ve;if("root"===Ve&&!0===We)return"forward"}},lt="auto",It=void 0;let Tt=(()=>{var Ve;class We{get(nt,Dt){const un=vt();return un?un.get(nt,Dt):null}getBoolean(nt,Dt){const un=vt();return!!un&&un.getBoolean(nt,Dt)}getNumber(nt,Dt){const un=vt();return un?un.getNumber(nt,Dt):0}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)}),(0,F.A)(We,"\u0275prov",Et.jDH({token:Ve,factory:Ve.\u0275fac,providedIn:"root"})),We})();const Ot=new Et.nKC("USERCONFIG"),vt=()=>{if(typeof window<"u"){const Ve=window.Ionic;if(null!=Ve&&Ve.config)return Ve.config}return null};class Gt{constructor(We={}){(0,F.A)(this,"data",void 0),this.data=We,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(We){return this.data[We]}}let hn=(()=>{var Ve;class We{constructor(){(0,F.A)(this,"zone",(0,Et.WQX)(Et.SKi)),(0,F.A)(this,"applicationRef",(0,Et.WQX)(Et.o8S)),(0,F.A)(this,"config",(0,Et.WQX)(Ot))}create(nt,Dt,un){var Bn;return new $n(nt,Dt,this.applicationRef,this.zone,un,null!==(Bn=this.config.useSetInputAPI)&&void 0!==Bn&&Bn)}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)}),(0,F.A)(We,"\u0275prov",Et.jDH({token:Ve,factory:Ve.\u0275fac})),We})();class $n{constructor(We,ft,nt,Dt,un,Bn){(0,F.A)(this,"environmentInjector",void 0),(0,F.A)(this,"injector",void 0),(0,F.A)(this,"applicationRef",void 0),(0,F.A)(this,"zone",void 0),(0,F.A)(this,"elementReferenceKey",void 0),(0,F.A)(this,"enableSignalsSupport",void 0),(0,F.A)(this,"elRefMap",new WeakMap),(0,F.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=We,this.injector=ft,this.applicationRef=nt,this.zone=Dt,this.elementReferenceKey=un,this.enableSignalsSupport=Bn}attachViewToDom(We,ft,nt,Dt){return this.zone.run(()=>new Promise(un=>{const Bn={...nt};void 0!==this.elementReferenceKey&&(Bn[this.elementReferenceKey]=We),un(bn(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,We,ft,Bn,Dt,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(We,ft){return this.zone.run(()=>new Promise(nt=>{const Dt=this.elRefMap.get(ft);if(Dt){Dt.destroy(),this.elRefMap.delete(ft);const un=this.elEventsMap.get(ft);un&&(un(),this.elEventsMap.delete(ft))}nt()}))}}const bn=(Ve,We,ft,nt,Dt,un,Bn,ar,Pr,Ui,ji,Us)=>{const bs=Et.zZn.create({providers:Ln(Pr),parent:ft}),wi=(0,Et.a0P)(ar,{environmentInjector:We,elementInjector:bs}),us=wi.instance,$s=wi.location.nativeElement;if(Pr)if(ji&&void 0!==us[ji]&&console.error(`[Ionic Error]: ${ji} is a reserved property when using ${Bn.tagName.toLowerCase()}. Rename or remove the "${ji}" property from ${ar.name}.`),!0===Us&&void 0!==wi.setInput){const{modal:Vs,popover:Ko,...fo}=Pr;for(const Vo in fo)wi.setInput(Vo,fo[Vo]);void 0!==Vs&&Object.assign(us,{modal:Vs}),void 0!==Ko&&Object.assign(us,{popover:Ko})}else Object.assign(us,Pr);if(Ui)for(const Vs of Ui)$s.classList.add(Vs);const ys=Mn(Ve,us,$s);return Bn.appendChild($s),nt.attachView(wi.hostView),Dt.set($s,wi),un.set($s,ys),$s},Xn=[K.L,K.a,K.b,K.c,K.d],Mn=(Ve,We,ft)=>Ve.run(()=>{const nt=Xn.filter(Dt=>"function"==typeof We[Dt]).map(Dt=>{const un=Bn=>We[Dt](Bn.detail);return ft.addEventListener(Dt,un),()=>ft.removeEventListener(Dt,un)});return()=>nt.forEach(Dt=>Dt())}),gr=new Et.nKC("NavParamsToken"),Ln=Ve=>[{provide:gr,useValue:Ve},{provide:Gt,useFactory:nr,deps:[gr]}],nr=Ve=>new Gt(Ve),mn=(Ve,We)=>{const ft=Ve.prototype;We.forEach(nt=>{Object.defineProperty(ft,nt,{get(){return this.el[nt]},set(Dt){this.z.runOutsideAngular(()=>this.el[nt]=Dt)}})})},qn=(Ve,We)=>{const ft=Ve.prototype;We.forEach(nt=>{ft[nt]=function(){const Dt=arguments;return this.z.runOutsideAngular(()=>this.el[nt].apply(this.el,Dt))}})},Tn=(Ve,We,ft)=>{ft.forEach(nt=>Ve[nt]=(0,re.R)(We,nt))};function ct(Ve){return function(ft){const{defineCustomElementFn:nt,inputs:Dt,methods:un}=Ve;return void 0!==nt&&nt(),Dt&&mn(ft,Dt),un&&qn(ft,un),ft}}const pt=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],Qe=["present","dismiss","onDidDismiss","onWillDismiss"];let xt=(()=>{var Ve;let We=((0,F.A)(Ve=class{constructor(nt,Dt,un){(0,F.A)(this,"z",void 0),(0,F.A)(this,"template",void 0),(0,F.A)(this,"isCmpOpen",!1),(0,F.A)(this,"el",void 0),this.z=un,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,nt.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,nt.detectChanges()}),Tn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(Et.gRc),Et.rXU(Et.aKT),Et.rXU(Et.SKi))}),(0,F.A)(Ve,"\u0275dir",Et.FsC({type:Ve,selectors:[["ion-popover"]],contentQueries:function(nt,Dt,un){if(1&nt&&Et.wni(un,Et.C4Q,5),2&nt){let Bn;Et.mGM(Bn=Et.lsd())&&(Dt.template=Bn.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Ve);return We=(0,oe.Cg)([ct({inputs:pt,methods:Qe})],We),We})();const fn=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],Cn=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let jn=(()=>{var Ve;let We=((0,F.A)(Ve=class{constructor(nt,Dt,un){(0,F.A)(this,"z",void 0),(0,F.A)(this,"template",void 0),(0,F.A)(this,"isCmpOpen",!1),(0,F.A)(this,"el",void 0),this.z=un,this.el=Dt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,nt.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,nt.detectChanges()}),Tn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(Et.gRc),Et.rXU(Et.aKT),Et.rXU(Et.SKi))}),(0,F.A)(Ve,"\u0275dir",Et.FsC({type:Ve,selectors:[["ion-modal"]],contentQueries:function(nt,Dt,un){if(1&nt&&Et.wni(un,Et.C4Q,5),2&nt){let Bn;Et.mGM(Bn=Et.lsd())&&(Dt.template=Bn.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Ve);return We=(0,oe.Cg)([ct({inputs:fn,methods:Cn})],We),We})();const xn=(Ve,We)=>((Ve=Ve.filter(ft=>ft.stackId!==We.stackId)).push(We),Ve),yn=(Ve,We)=>{const ft=Ve.createUrlTree(["."],{relativeTo:We});return Ve.serializeUrl(ft)},qt=(Ve,We)=>!We||Ve.stackId!==We.stackId,_n=(Ve,We)=>{if(!Ve)return;const ft=Kt(We);for(let nt=0;nt<ft.length;nt++){if(nt>=Ve.length)return ft[nt];if(ft[nt]!==Ve[nt])return}},Kt=Ve=>Ve.split("/").map(We=>We.trim()).filter(We=>""!==We),ln=Ve=>{Ve&&(Ve.ref.destroy(),Ve.unlistenEvents())};class Zn{constructor(We,ft,nt,Dt,un,Bn){(0,F.A)(this,"containerEl",void 0),(0,F.A)(this,"router",void 0),(0,F.A)(this,"navCtrl",void 0),(0,F.A)(this,"zone",void 0),(0,F.A)(this,"location",void 0),(0,F.A)(this,"views",[]),(0,F.A)(this,"runningTask",void 0),(0,F.A)(this,"skipTransition",!1),(0,F.A)(this,"tabsPrefix",void 0),(0,F.A)(this,"activeView",void 0),(0,F.A)(this,"nextId",0),this.containerEl=ft,this.router=nt,this.navCtrl=Dt,this.zone=un,this.location=Bn,this.tabsPrefix=void 0!==We?Kt(We):void 0}createView(We,ft){var nt;const Dt=yn(this.router,ft),un=null==We||null===(nt=We.location)||void 0===nt?void 0:nt.nativeElement,Bn=Mn(this.zone,We.instance,un);return{id:this.nextId++,stackId:_n(this.tabsPrefix,Dt),unlistenEvents:Bn,element:un,ref:We,url:Dt}}getExistingView(We){const ft=yn(this.router,We),nt=this.views.find(Dt=>Dt.url===ft);return nt&&nt.ref.changeDetectorRef.reattach(),nt}setActive(We){var ft,nt;const Dt=this.navCtrl.consumeTransition();let{direction:un,animation:Bn,animationBuilder:ar}=Dt;const Pr=this.activeView,Ui=qt(We,Pr);Ui&&(un="back",Bn=void 0);const ji=this.views.slice();let Us;const bs=this.router;bs.getCurrentNavigation?Us=bs.getCurrentNavigation():null!==(ft=bs.navigations)&&void 0!==ft&&ft.value&&(Us=bs.navigations.value),null!==(nt=Us)&&void 0!==nt&&null!==(nt=nt.extras)&&void 0!==nt&&nt.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const wi=this.views.includes(We),us=this.insertView(We,un);wi||We.ref.changeDetectorRef.detectChanges();const $s=We.animationBuilder;return void 0===ar&&"back"===un&&!Ui&&void 0!==$s&&(ar=$s),Pr&&(Pr.animationBuilder=ar),this.zone.runOutsideAngular(()=>this.wait(()=>(Pr&&Pr.ref.changeDetectorRef.detach(),We.ref.changeDetectorRef.reattach(),this.transition(We,Pr,Bn,this.canGoBack(1),!1,ar).then(()=>Ut(We,us,ji,this.location,this.zone)).then(()=>({enteringView:We,direction:un,animation:Bn,tabSwitch:Ui})))))}canGoBack(We,ft=this.getActiveStackId()){return this.getStack(ft).length>We}pop(We,ft=this.getActiveStackId()){return this.zone.run(()=>{const nt=this.getStack(ft);if(nt.length<=We)return Promise.resolve(!1);const Dt=nt[nt.length-We-1];let un=Dt.url;const Bn=Dt.savedData;if(Bn){var ar;const Ui=Bn.get("primary");null!=Ui&&null!==(ar=Ui.route)&&void 0!==ar&&null!==(ar=ar._routerState)&&void 0!==ar&&ar.snapshot.url&&(un=Ui.route._routerState.snapshot.url)}const{animationBuilder:Pr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(un,{...Dt.savedExtras,animation:Pr}).then(()=>!0)})}startBackTransition(){const We=this.activeView;if(We){const ft=this.getStack(We.stackId),nt=ft[ft.length-2],Dt=nt.animationBuilder;return this.wait(()=>this.transition(nt,We,"back",this.canGoBack(2),!0,Dt))}return Promise.resolve()}endBackTransition(We){We?(this.skipTransition=!0,this.pop(1)):this.activeView&&sn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(We){const ft=this.getStack(We);return ft.length>0?ft[ft.length-1]:void 0}getRootUrl(We){const ft=this.getStack(We);return ft.length>0?ft[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ln),this.activeView=void 0,this.views=[]}getStack(We){return this.views.filter(ft=>ft.stackId===We)}insertView(We,ft){return this.activeView=We,this.views=((Ve,We,ft)=>"root"===ft?xn(Ve,We):"forward"===ft?((Ve,We)=>(Ve.indexOf(We)>=0?Ve=Ve.filter(nt=>nt.stackId!==We.stackId||nt.id<=We.id):Ve.push(We),Ve))(Ve,We):((Ve,We)=>Ve.indexOf(We)>=0?Ve.filter(nt=>nt.stackId!==We.stackId||nt.id<=We.id):xn(Ve,We))(Ve,We))(this.views,We,ft),this.views.slice()}transition(We,ft,nt,Dt,un,Bn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(ft===We)return Promise.resolve(!1);const ar=We?We.element:void 0,Pr=ft?ft.element:void 0,Ui=this.containerEl;return ar&&ar!==Pr&&(ar.classList.add("ion-page"),ar.classList.add("ion-page-invisible"),Ui.commit)?Ui.commit(ar,Pr,{duration:void 0===nt?0:void 0,direction:nt,showGoBack:Dt,progressAnimation:un,animationBuilder:Bn}):Promise.resolve(!1)}wait(We){var ft=this;return(0,j.A)(function*(){void 0!==ft.runningTask&&(yield ft.runningTask,ft.runningTask=void 0);const nt=ft.runningTask=We();return nt.finally(()=>ft.runningTask=void 0),nt})()}}const Ut=(Ve,We,ft,nt,Dt)=>"function"==typeof requestAnimationFrame?new Promise(un=>{requestAnimationFrame(()=>{sn(Ve,We,ft,nt,Dt),un()})}):Promise.resolve(),sn=(Ve,We,ft,nt,Dt)=>{Dt.run(()=>ft.filter(un=>!We.includes(un)).forEach(ln)),We.forEach(un=>{const ar=nt.path().split("?")[0].split("#")[0];if(un!==Ve&&un.url!==ar){const Pr=un.element;Pr.setAttribute("aria-hidden","true"),Pr.classList.add("ion-page-hidden"),un.ref.changeDetectorRef.detach()}})};let On=(()=>{var Ve;class We{get activatedComponentRef(){return this.activated}set animation(nt){this.nativeEl.animation=nt}set animated(nt){this.nativeEl.animated=nt}set swipeGesture(nt){this._swipeGesture=nt,this.nativeEl.swipeHandler=nt?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Dt=>this.stackCtrl.endBackTransition(Dt)}:void 0}constructor(nt,Dt,un,Bn,ar,Pr,Ui,ji){(0,F.A)(this,"parentOutlet",void 0),(0,F.A)(this,"nativeEl",void 0),(0,F.A)(this,"activatedView",null),(0,F.A)(this,"tabsPrefix",void 0),(0,F.A)(this,"_swipeGesture",void 0),(0,F.A)(this,"stackCtrl",void 0),(0,F.A)(this,"proxyMap",new WeakMap),(0,F.A)(this,"currentActivatedRoute$",new Z.t(null)),(0,F.A)(this,"activated",null),(0,F.A)(this,"_activatedRoute",null),(0,F.A)(this,"name",Jt.Xk),(0,F.A)(this,"stackWillChange",new Et.bkB),(0,F.A)(this,"stackDidChange",new Et.bkB),(0,F.A)(this,"activateEvents",new Et.bkB),(0,F.A)(this,"deactivateEvents",new Et.bkB),(0,F.A)(this,"parentContexts",(0,Et.WQX)(Jt.Zp)),(0,F.A)(this,"location",(0,Et.WQX)(Et.c1b)),(0,F.A)(this,"environmentInjector",(0,Et.WQX)(Et.uvJ)),(0,F.A)(this,"inputBinder",(0,Et.WQX)(zn,{optional:!0})),(0,F.A)(this,"supportsBindingToComponentInputs",!0),(0,F.A)(this,"config",(0,Et.WQX)(Tt)),(0,F.A)(this,"navCtrl",(0,Et.WQX)(Rt)),this.parentOutlet=ji,this.nativeEl=Bn.nativeElement,this.name=nt||Jt.Xk,this.tabsPrefix="true"===Dt?yn(ar,Ui):void 0,this.stackCtrl=new Zn(this.tabsPrefix,this.nativeEl,ar,this.navCtrl,Pr,un),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var nt;this.stackCtrl.destroy(),null===(nt=this.inputBinder)||void 0===nt||nt.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const nt=this.getContext();null!=nt&&nt.route&&this.activateWith(nt.route,nt.injector)}new Promise(nt=>((Ve,We)=>{Ve.componentOnReady?Ve.componentOnReady().then(ft=>We(ft)):(Ve=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ve):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ve):setTimeout(Ve)})(()=>We(Ve))})(this.nativeEl,nt)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(nt,Dt){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Dt=this.getContext();this.activatedView.savedData=new Map(Dt.children.contexts);const un=this.activatedView.savedData.get("primary");if(un&&Dt.route&&(un.route={...Dt.route}),this.activatedView.savedExtras={},Dt.route){const Bn=Dt.route.snapshot;this.activatedView.savedExtras.queryParams=Bn.queryParams,this.activatedView.savedExtras.fragment=Bn.fragment}}const nt=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(nt)}}activateWith(nt,Dt){var un;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=nt;let Bn,ar=this.stackCtrl.getExistingView(nt);if(ar){Bn=this.activated=ar.ref;const ji=ar.savedData;ji&&(this.getContext().children.contexts=ji),this.updateActivatedRouteProxy(Bn.instance,nt)}else{var Pr;const ji=nt._futureSnapshot,Us=this.parentContexts.getOrCreateContext(this.name).children,bs=new Z.t(null),wi=this.createActivatedRouteProxy(bs,nt),us=new Sn(wi,Us,this.location.injector),$s=null!==(Pr=ji.routeConfig.component)&&void 0!==Pr?Pr:ji.component;Bn=this.activated=this.outletContent.createComponent($s,{index:this.outletContent.length,injector:us,environmentInjector:null!=Dt?Dt:this.environmentInjector}),bs.next(Bn.instance),ar=this.stackCtrl.createView(this.activated,nt),this.proxyMap.set(Bn.instance,wi),this.currentActivatedRoute$.next({component:Bn.instance,activatedRoute:nt})}null===(un=this.inputBinder)||void 0===un||un.bindActivatedRouteToOutletComponent(this),this.activatedView=ar,this.navCtrl.setTopOutlet(this);const Ui=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:ar,tabSwitch:qt(ar,Ui)}),this.stackCtrl.setActive(ar).then(ji=>{this.activateEvents.emit(Bn.instance),this.stackDidChange.emit(ji)})}canGoBack(nt=1,Dt){return this.stackCtrl.canGoBack(nt,Dt)}pop(nt=1,Dt){return this.stackCtrl.pop(nt,Dt)}getLastUrl(nt){const Dt=this.stackCtrl.getLastUrl(nt);return Dt?Dt.url:void 0}getLastRouteView(nt){return this.stackCtrl.getLastUrl(nt)}getRootView(nt){return this.stackCtrl.getRootUrl(nt)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(nt,Dt){const un=new Jt.nX;return un._futureSnapshot=Dt._futureSnapshot,un._routerState=Dt._routerState,un.snapshot=Dt.snapshot,un.outlet=Dt.outlet,un.component=Dt.component,un._paramMap=this.proxyObservable(nt,"paramMap"),un._queryParamMap=this.proxyObservable(nt,"queryParamMap"),un.url=this.proxyObservable(nt,"url"),un.params=this.proxyObservable(nt,"params"),un.queryParams=this.proxyObservable(nt,"queryParams"),un.fragment=this.proxyObservable(nt,"fragment"),un.data=this.proxyObservable(nt,"data"),un}proxyObservable(nt,Dt){return nt.pipe((0,me.p)(un=>!!un),(0,ne.n)(un=>this.currentActivatedRoute$.pipe((0,me.p)(Bn=>null!==Bn&&Bn.component===un),(0,ne.n)(Bn=>Bn&&Bn.activatedRoute[Dt]),function et(Ve,We=J.D){return Ve=null!=Ve?Ve:le,(0,he.N)((ft,nt)=>{let Dt,un=!0;ft.subscribe((0,Ce._)(nt,Bn=>{const ar=We(Bn);(un||!Ve(Dt,ar))&&(un=!1,Dt=ar,nt.next(Bn))}))})}())))}updateActivatedRouteProxy(nt,Dt){const un=this.proxyMap.get(nt);if(!un)throw new Error("Could not find activated route proxy for view");un._futureSnapshot=Dt._futureSnapshot,un._routerState=Dt._routerState,un.snapshot=Dt.snapshot,un.outlet=Dt.outlet,un.component=Dt.component,this.currentActivatedRoute$.next({component:nt,activatedRoute:Dt})}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.kS0("name"),Et.kS0("tabs"),Et.rXU(l.aZ),Et.rXU(Et.aKT),Et.rXU(Jt.Ix),Et.rXU(Et.SKi),Et.rXU(Jt.nX),Et.rXU(Ve,12))}),(0,F.A)(We,"\u0275dir",Et.FsC({type:Ve,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),We})();class Sn{constructor(We,ft,nt){(0,F.A)(this,"route",void 0),(0,F.A)(this,"childContexts",void 0),(0,F.A)(this,"parent",void 0),this.route=We,this.childContexts=ft,this.parent=nt}get(We,ft){return We===Jt.nX?this.route:We===Jt.Zp?this.childContexts:this.parent.get(We,ft)}}const zn=new Et.nKC("");let cr=(()=>{var Ve;class We{constructor(){(0,F.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(nt){this.unsubscribeFromRouteData(nt),this.subscribeToRouteData(nt)}unsubscribeFromRouteData(nt){var Dt;null===(Dt=this.outletDataSubscriptions.get(nt))||void 0===Dt||Dt.unsubscribe(),this.outletDataSubscriptions.delete(nt)}subscribeToRouteData(nt){const{activatedRoute:Dt}=nt,un=(0,_e.z)([Dt.queryParams,Dt.params,Dt.data]).pipe((0,ne.n)(([Bn,ar,Pr],Ui)=>(Pr={...Bn,...ar,...Pr},0===Ui?(0,xe.of)(Pr):Promise.resolve(Pr)))).subscribe(Bn=>{if(!nt.isActivated||!nt.activatedComponentRef||nt.activatedRoute!==Dt||null===Dt.component)return void this.unsubscribeFromRouteData(nt);const ar=(0,Et.HJs)(Dt.component);if(ar)for(const{templateName:Pr}of ar.inputs)nt.activatedComponentRef.setInput(Pr,Bn[Pr]);else this.unsubscribeFromRouteData(nt)});this.outletDataSubscriptions.set(nt,un)}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)}),(0,F.A)(We,"\u0275prov",Et.jDH({token:Ve,factory:Ve.\u0275fac})),We})();const sr=()=>({provide:zn,useFactory:yr,deps:[Jt.Ix]});function yr(Ve){return null!=Ve&&Ve.componentInputBindingEnabled?new cr:null}const Tr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let te=(()=>{var Ve;let We=((0,F.A)(Ve=class{constructor(nt,Dt,un,Bn,ar,Pr){(0,F.A)(this,"routerOutlet",void 0),(0,F.A)(this,"navCtrl",void 0),(0,F.A)(this,"config",void 0),(0,F.A)(this,"r",void 0),(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.routerOutlet=nt,this.navCtrl=Dt,this.config=un,this.r=Bn,this.z=ar,Pr.detach(),this.el=this.r.nativeElement}onClick(nt){var Dt;const un=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(Dt=this.routerOutlet)&&void 0!==Dt&&Dt.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),nt.preventDefault()):null!=un&&(this.navCtrl.navigateBack(un,{animation:this.routerAnimation}),nt.preventDefault())}},"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(On,8),Et.rXU(Rt),Et.rXU(Tt),Et.rXU(Et.aKT),Et.rXU(Et.SKi),Et.rXU(Et.gRc))}),(0,F.A)(Ve,"\u0275dir",Et.FsC({type:Ve,hostBindings:function(nt,Dt){1&nt&&Et.bIt("click",function(Bn){return Dt.onClick(Bn)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Ve);return We=(0,oe.Cg)([ct({inputs:Tr})],We),We})(),De=(()=>{var Ve;class We{constructor(nt,Dt,un,Bn,ar){(0,F.A)(this,"locationStrategy",void 0),(0,F.A)(this,"navCtrl",void 0),(0,F.A)(this,"elementRef",void 0),(0,F.A)(this,"router",void 0),(0,F.A)(this,"routerLink",void 0),(0,F.A)(this,"routerDirection","forward"),(0,F.A)(this,"routerAnimation",void 0),this.locationStrategy=nt,this.navCtrl=Dt,this.elementRef=un,this.router=Bn,this.routerLink=ar}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var nt;if(null!==(nt=this.routerLink)&&void 0!==nt&&nt.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(nt){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),nt.preventDefault()}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(l.hb),Et.rXU(Rt),Et.rXU(Et.aKT),Et.rXU(Jt.Ix),Et.rXU(Jt.Wk,8))}),(0,F.A)(We,"\u0275dir",Et.FsC({type:Ve,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(nt,Dt){1&nt&&Et.bIt("click",function(Bn){return Dt.onClick(Bn)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Et.OA$]})),We})(),Ye=(()=>{var Ve;class We{constructor(nt,Dt,un,Bn,ar){(0,F.A)(this,"locationStrategy",void 0),(0,F.A)(this,"navCtrl",void 0),(0,F.A)(this,"elementRef",void 0),(0,F.A)(this,"router",void 0),(0,F.A)(this,"routerLink",void 0),(0,F.A)(this,"routerDirection","forward"),(0,F.A)(this,"routerAnimation",void 0),this.locationStrategy=nt,this.navCtrl=Dt,this.elementRef=un,this.router=Bn,this.routerLink=ar}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var nt;if(null!==(nt=this.routerLink)&&void 0!==nt&&nt.urlTree){const Dt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=Dt}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(l.hb),Et.rXU(Rt),Et.rXU(Et.aKT),Et.rXU(Jt.Ix),Et.rXU(Jt.Wk,8))}),(0,F.A)(We,"\u0275dir",Et.FsC({type:Ve,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(nt,Dt){1&nt&&Et.bIt("click",function(){return Dt.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Et.OA$]})),We})();const T=["animated","animation","root","rootParams","swipeGesture"],N=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let B=(()=>{var Ve;let We=((0,F.A)(Ve=class{constructor(nt,Dt,un,Bn,ar,Pr){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=ar,Pr.detach(),this.el=nt.nativeElement,nt.nativeElement.delegate=Bn.create(Dt,un),Tn(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(Et.aKT),Et.rXU(Et.uvJ),Et.rXU(Et.zZn),Et.rXU(hn),Et.rXU(Et.SKi),Et.rXU(Et.gRc))}),(0,F.A)(Ve,"\u0275dir",Et.FsC({type:Ve,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Ve);return We=(0,oe.Cg)([ct({inputs:T,methods:N})],We),We})(),O=(()=>{var Ve;class We{constructor(nt){(0,F.A)(this,"navCtrl",void 0),(0,F.A)(this,"tabsInner",void 0),(0,F.A)(this,"ionTabsWillChange",new Et.bkB),(0,F.A)(this,"ionTabsDidChange",new Et.bkB),(0,F.A)(this,"tabBarSlot","bottom"),this.navCtrl=nt}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:nt,tabSwitch:Dt}){const un=nt.stackId;Dt&&void 0!==un&&this.ionTabsWillChange.emit({tab:un})}onStackDidChange({enteringView:nt,tabSwitch:Dt}){const un=nt.stackId;Dt&&void 0!==un&&(this.tabBar&&(this.tabBar.selectedTab=un),this.ionTabsDidChange.emit({tab:un}))}select(nt){const Dt="string"==typeof nt,un=Dt?nt:nt.detail.tab,Bn=this.outlet.getActiveStackId()===un,ar=`${this.outlet.tabsPrefix}/${un}`;if(Dt||nt.stopPropagation(),Bn){const Pr=this.outlet.getActiveStackId(),Ui=this.outlet.getLastRouteView(Pr);if((null==Ui?void 0:Ui.url)===ar)return;const ji=this.outlet.getRootView(un);return this.navCtrl.navigateRoot(ar,{...ji&&ar===ji.url&&ji.savedExtras,animated:!0,animationDirection:"back"})}{const Pr=this.outlet.getLastRouteView(un);return this.navCtrl.navigateRoot((null==Pr?void 0:Pr.url)||ar,{...null==Pr?void 0:Pr.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(nt=>{const Dt=nt.el.getAttribute("slot");Dt!==this.tabBarSlot&&(this.tabBarSlot=Dt,this.relocateTabBar())})}relocateTabBar(){const nt=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(nt):this.tabsInner.nativeElement.after(nt)}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(Rt))}),(0,F.A)(We,"\u0275dir",Et.FsC({type:Ve,selectors:[["ion-tabs"]],viewQuery:function(nt,Dt){if(1&nt&&Et.GBs(ge,7,Et.aKT),2&nt){let un;Et.mGM(un=Et.lsd())&&(Dt.tabsInner=un.first)}},hostBindings:function(nt,Dt){1&nt&&Et.bIt("ionTabButtonClick",function(Bn){return Dt.select(Bn)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),We})();const ie=Ve=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ve):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ve):setTimeout(Ve);let q=(()=>{var Ve;class We{constructor(nt,Dt){(0,F.A)(this,"injector",void 0),(0,F.A)(this,"elementRef",void 0),(0,F.A)(this,"onChange",()=>{}),(0,F.A)(this,"onTouched",()=>{}),(0,F.A)(this,"lastValue",void 0),(0,F.A)(this,"statusChanges",void 0),this.injector=nt,this.elementRef=Dt}writeValue(nt){this.elementRef.nativeElement.value=this.lastValue=nt,ce(this.elementRef)}handleValueChange(nt,Dt){nt===this.elementRef.nativeElement&&(Dt!==this.lastValue&&(this.lastValue=Dt,this.onChange(Dt)),ce(this.elementRef))}_handleBlurEvent(nt){nt===this.elementRef.nativeElement&&(this.onTouched(),ce(this.elementRef))}registerOnChange(nt){this.onChange=nt}registerOnTouched(nt){this.onTouched=nt}setDisabledState(nt){this.elementRef.nativeElement.disabled=nt}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let nt;try{nt=this.injector.get(V.vO)}catch{}if(!nt)return;nt.statusChanges&&(this.statusChanges=nt.statusChanges.subscribe(()=>ce(this.elementRef)));const Dt=nt.control;Dt&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Bn=>{if(typeof Dt[Bn]<"u"){const ar=Dt[Bn].bind(Dt);Dt[Bn]=(...Pr)=>{ar(...Pr),ce(this.elementRef)}}})}}return Ve=We,(0,F.A)(We,"\u0275fac",function(nt){return new(nt||Ve)(Et.rXU(Et.zZn),Et.rXU(Et.aKT))}),(0,F.A)(We,"\u0275dir",Et.FsC({type:Ve,hostBindings:function(nt,Dt){1&nt&&Et.bIt("ionBlur",function(Bn){return Dt._handleBlurEvent(Bn.target)})}})),We})();const ce=Ve=>{ie(()=>{const We=Ve.nativeElement,ft=null!=We.value&&We.value.toString().length>0,nt=Ge(We);He(We,nt);const Dt=We.closest("ion-item");Dt&&He(Dt,ft?[...nt,"item-has-value"]:nt)})},Ge=Ve=>{const We=Ve.classList,ft=[];for(let nt=0;nt<We.length;nt++){const Dt=We.item(nt);null!==Dt&&gt(Dt,"ng-")&&ft.push(`ion-${Dt.substring(3)}`)}return ft},He=(Ve,We)=>{const ft=Ve.classList;ft.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),ft.add(...We)},gt=(Ve,We)=>Ve.substring(0,We.length)===We;class Vt{shouldDetach(We){return!1}shouldAttach(We){return!1}store(We,ft){}retrieve(We){return null}shouldReuseRoute(We,ft){if(We.routeConfig!==ft.routeConfig)return!1;const nt=We.params,Dt=ft.params,un=Object.keys(nt),Bn=Object.keys(Dt);if(un.length!==Bn.length)return!1;for(const ar of un)if(Dt[ar]!==nt[ar])return!1;return!0}}class cn{constructor(We){(0,F.A)(this,"ctrl",void 0),this.ctrl=We}create(We){return this.ctrl.create(We||{})}dismiss(We,ft,nt){return this.ctrl.dismiss(We,ft,nt)}getTop(){return this.ctrl.getTop()}}},5374:(wr,Nn,je)=>{"use strict";je.d(Nn,{hG:()=>$s,Hx:()=>ys,hB:()=>k,xk:()=>_e,YH:()=>xe,Zy:()=>me,U1:()=>ne,mC:()=>J,el:()=>un,Jm:()=>V,QW:()=>ge,b_:()=>Le,I9:()=>Ke,ME:()=>ut,HW:()=>_t,tN:()=>Nt,eY:()=>dt,ZB:()=>Rt,hU:()=>Bt,W9:()=>lt,A9:()=>It,M0:()=>hn,lO:()=>$n,eU:()=>bn,iq:()=>Xn,$w:()=>nr,uz:()=>qn,Dg:()=>Tn,he:()=>fn,nf:()=>Cn,AF:()=>jn,T6:()=>us,Sb:()=>Ui,CF:()=>ji,KO:()=>sn,f0:()=>On,Ob:()=>Sn,Rg:()=>nt,ln:()=>te,Nm:()=>N,Ip:()=>B,Jq:()=>ce,qW:()=>Ge,p4:()=>Dt,BC:()=>cn,BY:()=>We,ai:()=>ft,bv:()=>Wa,Xi:()=>fo,W3:()=>ea,su:()=>X,Je:()=>Y,Gw:()=>G});var j=je(9842),F=je(3953),Et=je(4341),Jt=je(3656),l=je(1635),ve=je(3726),K=je(177),M=je(9858),A=je(617),w=je(467),I=je(8393);const d=je(4921).i,f=function(){var ke=(0,w.A)(function*(ht,kt){if(!(typeof window>"u"))return yield d(),(0,I.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),kt)});return function(kt,Be){return ke.apply(this,arguments)}}(),h=["*"],p=["outletContent"],m=["outlet"],g=[[["","slot","top"]],"*"],x=["[slot=top]","*"];function E(ke,ht){if(1&ke&&(F.j41(0,"div",1),F.eu8(1,2),F.k0s()),2&ke){const kt=F.XpG();F.R7$(),F.Y8G("ngTemplateOutlet",kt.template)}}function S(ke,ht){if(1&ke&&F.eu8(0,1),2&ke){const kt=F.XpG();F.Y8G("ngTemplateOutlet",kt.template)}}let k=(()=>{var ke;class ht extends Jt.fL{constructor(Be,zt){super(Be,zt)}writeValue(Be){this.elementRef.nativeElement.checked=this.lastValue=Be,(0,Jt.z3)(this.elementRef)}_handleIonChange(Be){this.handleValueChange(Be,Be.checked)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.zZn),F.rXU(F.aKT))}),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(Be,zt){1&Be&&F.bIt("ionChange",function(ts){return zt._handleIonChange(ts.target)})},features:[F.Jv_([{provide:Et.kq,useExisting:ke,multi:!0}]),F.Vt3]})),ht})(),X=(()=>{var ke;class ht extends Jt.fL{constructor(Be,zt){super(Be,zt),(0,j.A)(this,"el",void 0),this.el=zt}handleInputEvent(Be){this.handleValueChange(Be,Be.value)}registerOnChange(Be){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName?zt=>{Be(""===zt?null:parseFloat(zt))}:Be)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.zZn),F.rXU(F.aKT))}),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-input","type","number"],["ion-range"]],hostBindings:function(Be,zt){1&Be&&F.bIt("ionInput",function(ts){return zt.handleInputEvent(ts.target)})},features:[F.Jv_([{provide:Et.kq,useExisting:ke,multi:!0}]),F.Vt3]})),ht})(),Y=(()=>{var ke;class ht extends Jt.fL{constructor(Be,zt){super(Be,zt)}_handleChangeEvent(Be){this.handleValueChange(Be,Be.value)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.zZn),F.rXU(F.aKT))}),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(Be,zt){1&Be&&F.bIt("ionChange",function(ts){return zt._handleChangeEvent(ts.target)})},features:[F.Jv_([{provide:Et.kq,useExisting:ke,multi:!0}]),F.Vt3]})),ht})(),G=(()=>{var ke;class ht extends Jt.fL{constructor(Be,zt){super(Be,zt)}_handleInputEvent(Be){this.handleValueChange(Be,Be.value)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.zZn),F.rXU(F.aKT))}),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(Be,zt){1&Be&&F.bIt("ionInput",function(ts){return zt._handleInputEvent(ts.target)})},features:[F.Jv_([{provide:Et.kq,useExisting:ke,multi:!0}]),F.Vt3]})),ht})();const z=(ke,ht)=>{const kt=ke.prototype;ht.forEach(Be=>{Object.defineProperty(kt,Be,{get(){return this.el[Be]},set(zt){this.z.runOutsideAngular(()=>this.el[Be]=zt)},configurable:!0})})},ee=(ke,ht)=>{const kt=ke.prototype;ht.forEach(Be=>{kt[Be]=function(){const zt=arguments;return this.z.runOutsideAngular(()=>this.el[Be].apply(this.el,zt))}})},H=(ke,ht,kt)=>{kt.forEach(Be=>ke[Be]=(0,ve.R)(ht,Be))};function Z(ke){return function(kt){const{defineCustomElementFn:Be,inputs:zt,methods:In}=ke;return void 0!==Be&&Be(),zt&&z(kt,zt),In&&ee(kt,In),kt}}let _e=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-accordion"]],inputs:{disabled:"disabled",mode:"mode",readonly:"readonly",toggleIcon:"toggleIcon",toggleIconSlot:"toggleIconSlot",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["disabled","mode","readonly","toggleIcon","toggleIconSlot","value"]})],ht),ht})(),xe=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-accordion-group"]],inputs:{animated:"animated",disabled:"disabled",expand:"expand",mode:"mode",multiple:"multiple",readonly:"readonly",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["animated","disabled","expand","mode","multiple","readonly","value"]})],ht),ht})(),me=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionAlertDidPresent","ionAlertWillPresent","ionAlertWillDismiss","ionAlertDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-alert"]],inputs:{animated:"animated",backdropDismiss:"backdropDismiss",buttons:"buttons",cssClass:"cssClass",enterAnimation:"enterAnimation",header:"header",htmlAttributes:"htmlAttributes",inputs:"inputs",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",message:"message",mode:"mode",subHeader:"subHeader",translucent:"translucent",trigger:"trigger"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["animated","backdropDismiss","buttons","cssClass","enterAnimation","header","htmlAttributes","inputs","isOpen","keyboardClose","leaveAnimation","message","mode","subHeader","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],ht),ht})(),ne=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-app"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({})],ht),ht})(),J=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-avatar"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({})],ht),ht})(),V=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],ht),ht})(),ge=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["collapse"]})],ht),ht})(),Le=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],ht),ht})(),Ke=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["mode"]})],ht),ht})(),ut=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode","translucent"]})],ht),ht})(),_t=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode"]})],ht),ht})(),Nt=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode"]})],ht),ht})(),dt=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["alignment","checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"]})],ht),ht})(),Rt=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","disabled","mode","outline"]})],ht),ht})(),Bt=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],ht),ht})(),lt=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],ht),ht})(),It=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",formatOptions:"formatOptions",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","formatOptions","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],ht),ht})(),hn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["collapse","mode","translucent"]})],ht),ht})(),$n=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["fixed"]})],ht),ht})(),bn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["collapse","mode","translucent"]})],ht),ht})(),Xn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],ht),ht})(),nr=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],ht),ht})(),qn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],ht),ht})(),Tn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode","sticky"]})],ht),ht})(),fn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode","position"]})],ht),ht})(),Cn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],ht),ht})(),jn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-list-header"]],inputs:{color:"color",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","lines","mode"]})],ht),ht})(),sn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],ht),ht})(),On=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["allowEmptySelection","compareWith","name","value"]})],ht),ht})(),Sn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",label:"label",labelPlacement:"labelPlacement",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","label","labelPlacement","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],ht),ht})(),te=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-row"]],ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({})],ht),ht})(),N=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],methods:["open"]})],ht),ht})(),B=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["disabled","value"]})],ht),ht})(),ce=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode","selectedTab","translucent"]})],ht),ht})(),Ge=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],ht),ht})(),cn=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","size"]})],ht),ht})(),We=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement,H(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["alignment","checked","color","disabled","enableOnOffLabels","justify","labelPlacement","mode","name","value"]})],ht),ht})(),ft=(()=>{var ke;let ht=((0,j.A)(ke=class{constructor(Be,zt,In){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=In,Be.detach(),this.el=zt.nativeElement}},"\u0275fac",function(Be){return new(Be||ke)(F.rXU(F.gRc),F.rXU(F.aKT),F.rXU(F.SKi))}),(0,j.A)(ke,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ke);return ht=(0,l.Cg)([Z({inputs:["color","mode"]})],ht),ht})(),nt=(()=>{var ke;class ht extends Jt.Rg{constructor(Be,zt,In,ts,Gs,Go,Ca,ba){super(Be,zt,In,ts,Gs,Go,Ca,ba),(0,j.A)(this,"parentOutlet",void 0),(0,j.A)(this,"outletContent",void 0),this.parentOutlet=ba}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.kS0("name"),F.kS0("tabs"),F.rXU(K.aZ),F.rXU(F.aKT),F.rXU(M.Ix),F.rXU(F.SKi),F.rXU(M.nX),F.rXU(ke,12))}),(0,j.A)(ht,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-router-outlet"]],viewQuery:function(Be,zt){if(1&Be&&F.GBs(p,7,F.c1b),2&Be){let In;F.mGM(In=F.lsd())&&(zt.outletContent=In.first)}},features:[F.Vt3],ngContentSelectors:h,decls:3,vars:0,consts:[["outletContent",""]],template:function(Be,zt){1&Be&&(F.NAR(),F.qex(0,null,0),F.SdG(2),F.bVm())},encapsulation:2})),ht})(),Dt=(()=>{var ke;class ht extends Jt.p4{constructor(...Be){super(...Be),(0,j.A)(this,"outlet",void 0),(0,j.A)(this,"tabBar",void 0),(0,j.A)(this,"tabBars",void 0)}}return ke=ht,(0,j.A)(ht,"\u0275fac",(()=>{let kt;return function(zt){return(kt||(kt=F.xGo(ke)))(zt||ke)}})()),(0,j.A)(ht,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-tabs"]],contentQueries:function(Be,zt,In){if(1&Be&&(F.wni(In,ce,5),F.wni(In,ce,4)),2&Be){let ts;F.mGM(ts=F.lsd())&&(zt.tabBar=ts.first),F.mGM(ts=F.lsd())&&(zt.tabBars=ts)}},viewQuery:function(Be,zt){if(1&Be&&F.GBs(m,5,nt),2&Be){let In;F.mGM(In=F.lsd())&&(zt.outlet=In.first)}},features:[F.Vt3],ngContentSelectors:x,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(Be,zt){if(1&Be){const In=F.RV6();F.NAR(g),F.SdG(0),F.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),F.bIt("stackWillChange",function(Gs){return F.eBV(In),F.Njj(zt.onStackWillChange(Gs))})("stackDidChange",function(Gs){return F.eBV(In),F.Njj(zt.onStackDidChange(Gs))}),F.k0s()(),F.SdG(5,1)}},dependencies:[nt],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),ht})(),un=(()=>{var ke;class ht extends Jt.el{constructor(Be,zt,In,ts,Gs,Go){super(Be,zt,In,ts,Gs,Go)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)(F.rXU(nt,8),F.rXU(Jt.q9),F.rXU(Jt.TS),F.rXU(F.aKT),F.rXU(F.SKi),F.rXU(F.gRc))}),(0,j.A)(ht,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-back-button"]],features:[F.Vt3],ngContentSelectors:h,decls:1,vars:0,template:function(Be,zt){1&Be&&(F.NAR(),F.SdG(0))},encapsulation:2,changeDetection:0})),ht})(),Ui=(()=>{var ke;class ht extends Jt.Sb{}return ke=ht,(0,j.A)(ht,"\u0275fac",(()=>{let kt;return function(zt){return(kt||(kt=F.xGo(ke)))(zt||ke)}})()),(0,j.A)(ht,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-modal"]],features:[F.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(Be,zt){1&Be&&F.DNE(0,E,2,1,"div",0),2&Be&&F.Y8G("ngIf",zt.isCmpOpen||zt.keepContentsMounted)},dependencies:[K.bT,K.T3],encapsulation:2,changeDetection:0})),ht})(),ji=(()=>{var ke;class ht extends Jt.CF{}return ke=ht,(0,j.A)(ht,"\u0275fac",(()=>{let kt;return function(zt){return(kt||(kt=F.xGo(ke)))(zt||ke)}})()),(0,j.A)(ht,"\u0275cmp",F.VBU({type:ke,selectors:[["ion-popover"]],features:[F.Vt3],decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(Be,zt){1&Be&&F.DNE(0,S,1,1,"ng-container",0),2&Be&&F.Y8G("ngIf",zt.isCmpOpen||zt.keepContentsMounted)},dependencies:[K.bT,K.T3],encapsulation:2,changeDetection:0})),ht})();const Us={provide:Et.cz,useExisting:(0,F.Rfq)(()=>bs),multi:!0};let bs=(()=>{var ke;class ht extends Et.zX{}return ke=ht,(0,j.A)(ht,"\u0275fac",(()=>{let kt;return function(zt){return(kt||(kt=F.xGo(ke)))(zt||ke)}})()),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Be,zt){2&Be&&F.BMQ("max",zt._enabled?zt.max:null)},features:[F.Jv_([Us]),F.Vt3]})),ht})();const wi={provide:Et.cz,useExisting:(0,F.Rfq)(()=>us),multi:!0};let us=(()=>{var ke;class ht extends Et.VZ{}return ke=ht,(0,j.A)(ht,"\u0275fac",(()=>{let kt;return function(zt){return(kt||(kt=F.xGo(ke)))(zt||ke)}})()),(0,j.A)(ht,"\u0275dir",F.FsC({type:ke,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Be,zt){2&Be&&F.BMQ("min",zt._enabled?zt.min:null)},features:[F.Jv_([wi]),F.Vt3]})),ht})(),$s=(()=>{var ke;class ht extends Jt.Kb{constructor(){super(A.TN)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)}),(0,j.A)(ht,"\u0275prov",F.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),ht})(),ys=(()=>{var ke;class ht{create(Be){return(0,A.JI)(Be)}easingTime(Be,zt,In,ts,Gs){return(0,A.sE)(Be,zt,In,ts,Gs)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)}),(0,j.A)(ht,"\u0275prov",F.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),ht})(),fo=(()=>{var ke;class ht extends Jt.Kb{constructor(){super(A.FJ)}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)}),(0,j.A)(ht,"\u0275prov",F.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})),ht})(),ea=(()=>{var ke;class ht extends Jt.Kb{constructor(){super(A.OZ),(0,j.A)(this,"angularDelegate",(0,F.WQX)(Jt.Yq)),(0,j.A)(this,"injector",(0,F.WQX)(F.zZn)),(0,j.A)(this,"environmentInjector",(0,F.WQX)(F.uvJ))}create(Be){return super.create({...Be,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)}),(0,j.A)(ht,"\u0275prov",F.jDH({token:ke,factory:ke.\u0275fac})),ht})();class la extends Jt.Kb{constructor(){super(A.mF),(0,j.A)(this,"angularDelegate",(0,F.WQX)(Jt.Yq)),(0,j.A)(this,"injector",(0,F.WQX)(F.zZn)),(0,j.A)(this,"environmentInjector",(0,F.WQX)(F.uvJ))}create(ht){return super.create({...ht,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const ca=(ke,ht,kt)=>()=>{const Be=ht.defaultView;if(Be&&typeof window<"u"){(0,A.QX)({...ke,_zoneGate:In=>kt.run(In)});const zt="__zone_symbol__addEventListener"in ht.body?"__zone_symbol__addEventListener":"addEventListener";return function b(){var ke=[];if(typeof window<"u"){var ht=window;(!ht.customElements||ht.Element&&(!ht.Element.prototype.closest||!ht.Element.prototype.matches||!ht.Element.prototype.remove||!ht.Element.prototype.getRootNode))&&ke.push(je.e(7278).then(je.t.bind(je,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||ht.NodeList&&!ht.NodeList.prototype.forEach||!ht.fetch||!function(){try{var Be=new URL("b","http://a");return Be.pathname="c%20d","http://a/c%20d"===Be.href&&Be.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&ke.push(je.e(9329).then(je.t.bind(je,7783,23)))}return Promise.all(ke)}().then(()=>f(Be,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Jt.er,jmp:In=>kt.runOutsideAngular(In),ael(In,ts,Gs,Go){In[zt](ts,Gs,Go)},rel(In,ts,Gs,Go){In.removeEventListener(ts,Gs,Go)}}))}};let Wa=(()=>{var ke;class ht{static forRoot(Be={}){return{ngModule:ht,providers:[{provide:Jt.sR,useValue:Be},{provide:F.hnV,useFactory:ca,multi:!0,deps:[Jt.sR,K.qQ,F.SKi]},Jt.Yq,(0,Jt.YV)()]}}}return ke=ht,(0,j.A)(ht,"\u0275fac",function(Be){return new(Be||ke)}),(0,j.A)(ht,"\u0275mod",F.$C({type:ke})),(0,j.A)(ht,"\u0275inj",F.G2t({providers:[ea,la],imports:[K.MD]})),ht})()},467:(wr,Nn,je)=>{"use strict";function j(Et,Jt,l,ve,K,M,A){try{var b=Et[M](A),w=b.value}catch(I){return void l(I)}b.done?Jt(w):Promise.resolve(w).then(ve,K)}function F(Et){return function(){var Jt=this,l=arguments;return new Promise(function(ve,K){var M=Et.apply(Jt,l);function A(w){j(M,ve,K,A,b,"next",w)}function b(w){j(M,ve,K,A,b,"throw",w)}A(void 0)})}}je.d(Nn,{A:()=>F})},9842:(wr,Nn,je)=>{"use strict";function j(l){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ve){return typeof ve}:function(ve){return ve&&"function"==typeof Symbol&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve})(l)}function Jt(l,ve,K){return(ve=function Et(l){var ve=function F(l,ve){if("object"!=j(l)||!l)return l;var K=l[Symbol.toPrimitive];if(void 0!==K){var M=K.call(l,ve||"default");if("object"!=j(M))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ve?String:Number)(l)}(l,"string");return"symbol"==j(ve)?ve:ve+""}(ve))in l?Object.defineProperty(l,ve,{value:K,enumerable:!0,configurable:!0,writable:!0}):l[ve]=K,l}je.d(Nn,{A:()=>Jt})},1635:(wr,Nn,je)=>{"use strict";function l(ne,J,he,Ce){var V,et=arguments.length,le=et<3?J:null===Ce?Ce=Object.getOwnPropertyDescriptor(J,he):Ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(ne,J,he,Ce);else for(var ge=ne.length-1;ge>=0;ge--)(V=ne[ge])&&(le=(et<3?V(le):et>3?V(J,he,le):V(J,he))||le);return et>3&&le&&Object.defineProperty(J,he,le),le}function I(ne,J,he,Ce){return new(he||(he=Promise))(function(le,V){function ge(ut){try{Ke(Ce.next(ut))}catch(_t){V(_t)}}function Le(ut){try{Ke(Ce.throw(ut))}catch(_t){V(_t)}}function Ke(ut){ut.done?le(ut.value):function et(le){return le instanceof he?le:new he(function(V){V(le)})}(ut.value).then(ge,Le)}Ke((Ce=Ce.apply(ne,J||[])).next())})}function E(ne){return this instanceof E?(this.v=ne,this):new E(ne)}function S(ne,J,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Ce=he.apply(ne,J||[]),le=[];return et={},ge("next"),ge("throw"),ge("return",function V(dt){return function(Rt){return Promise.resolve(Rt).then(dt,_t)}}),et[Symbol.asyncIterator]=function(){return this},et;function ge(dt,Rt){Ce[dt]&&(et[dt]=function(Bt){return new Promise(function(lt,It){le.push([dt,Bt,lt,It])>1||Le(dt,Bt)})},Rt&&(et[dt]=Rt(et[dt])))}function Le(dt,Rt){try{!function Ke(dt){dt.value instanceof E?Promise.resolve(dt.value.v).then(ut,_t):Nt(le[0][2],dt)}(Ce[dt](Rt))}catch(Bt){Nt(le[0][3],Bt)}}function ut(dt){Le("next",dt)}function _t(dt){Le("throw",dt)}function Nt(dt,Rt){dt(Rt),le.shift(),le.length&&Le(le[0][0],le[0][1])}}function X(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,J=ne[Symbol.asyncIterator];return J?J.call(ne):(ne=function h(ne){var J="function"==typeof Symbol&&Symbol.iterator,he=J&&ne[J],Ce=0;if(he)return he.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Ce>=ne.length&&(ne=void 0),{value:ne&&ne[Ce++],done:!ne}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),he={},Ce("next"),Ce("throw"),Ce("return"),he[Symbol.asyncIterator]=function(){return this},he);function Ce(le){he[le]=ne[le]&&function(V){return new Promise(function(ge,Le){!function et(le,V,ge,Le){Promise.resolve(Le).then(function(Ke){le({value:Ke,done:ge})},V)}(ge,Le,(V=ne[le](V)).done,V.value)})}}}je.d(Nn,{AQ:()=>S,Cg:()=>l,N3:()=>E,sH:()=>I,xN:()=>X}),"function"==typeof SuppressedError&&SuppressedError}},wr=>{wr(wr.s=3419)}]);